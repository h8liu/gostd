<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5383075">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5383131">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5383185">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5383236">package</span>&nbsp;<span class="ident" id="5383244">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5383250">import</span>&nbsp;<span class="string" id="5383257">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5383266">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="5383318">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="5383360">func</span>&nbsp;<span class="ident" id="5383365">Compact</span><span class="op" id="5383372">(</span><span class="ident" id="5383373">dst</span>&nbsp;<span class="op" id="5383377">*</span><span class="ident" id="5383378">bytes</span><span class="op" id="5383383">.</span><span class="ident" id="5383384">Buffer</span><span class="op" id="5383390">,</span>&nbsp;<span class="ident" id="5383392">src</span>&nbsp;<span class="op" id="5383396">[</span><span class="op" id="5383397">]</span><span class="builtintype" id="5383398">byte</span><span class="op" id="5383402">)</span>&nbsp;<span class="builtintype" id="5383404">error</span>&nbsp;<span class="op" id="5383410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383413">return</span>&nbsp;<span class="ident" id="5383420">compact</span><span class="op" id="5383427">(</span><span class="ident" id="5383428">dst</span><span class="op" id="5383431">,</span>&nbsp;<span class="ident" id="5383433">src</span><span class="op" id="5383436">,</span>&nbsp;<span class="builtintype" id="5383438">false</span><span class="op" id="5383443">)</span><br>
<span class="lineno"></span><span class="op" id="5383445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5383448">func</span>&nbsp;<span class="ident" id="5383453">compact</span><span class="op" id="5383460">(</span><span class="ident" id="5383461">dst</span>&nbsp;<span class="op" id="5383465">*</span><span class="ident" id="5383466">bytes</span><span class="op" id="5383471">.</span><span class="ident" id="5383472">Buffer</span><span class="op" id="5383478">,</span>&nbsp;<span class="ident" id="5383480">src</span>&nbsp;<span class="op" id="5383484">[</span><span class="op" id="5383485">]</span><span class="builtintype" id="5383486">byte</span><span class="op" id="5383490">,</span>&nbsp;<span class="ident" id="5383492">escape</span>&nbsp;<span class="builtintype" id="5383499">bool</span><span class="op" id="5383503">)</span>&nbsp;<span class="builtintype" id="5383505">error</span>&nbsp;<span class="op" id="5383511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383514">origLen</span>&nbsp;<span class="op" id="5383522">:=</span>&nbsp;<span class="ident" id="5383525">dst</span><span class="op" id="5383528">.</span><span class="ident" id="5383529">Len</span><span class="op" id="5383532">(</span><span class="op" id="5383533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383536">var</span>&nbsp;<span class="ident" id="5383540">scan</span>&nbsp;<span class="ident" id="5383545">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383554">scan</span><span class="op" id="5383558">.</span><span class="ident" id="5383559">reset</span><span class="op" id="5383564">(</span><span class="op" id="5383565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383568">start</span>&nbsp;<span class="op" id="5383574">:=</span>&nbsp;<span class="num" id="5383577">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383580">for</span>&nbsp;<span class="ident" id="5383584">i</span><span class="op" id="5383585">,</span>&nbsp;<span class="ident" id="5383587">c</span>&nbsp;<span class="op" id="5383589">:=</span>&nbsp;<span class="keyword" id="5383592">range</span>&nbsp;<span class="ident" id="5383598">src</span>&nbsp;<span class="op" id="5383602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383606">if</span>&nbsp;<span class="ident" id="5383609">escape</span>&nbsp;<span class="op" id="5383616">&amp;&amp;</span>&nbsp;<span class="op" id="5383619">(</span><span class="ident" id="5383620">c</span>&nbsp;<span class="op" id="5383622">==</span>&nbsp;<span class="string" id="5383625">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="5383629">||</span>&nbsp;<span class="ident" id="5383632">c</span>&nbsp;<span class="op" id="5383634">==</span>&nbsp;<span class="string" id="5383637">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="5383641">||</span>&nbsp;<span class="ident" id="5383644">c</span>&nbsp;<span class="op" id="5383646">==</span>&nbsp;<span class="string" id="5383649">&#39;&amp;&#39;</span><span class="op" id="5383652">)</span>&nbsp;<span class="op" id="5383654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383659">if</span>&nbsp;<span class="ident" id="5383662">start</span>&nbsp;<span class="op" id="5383668">&lt;</span>&nbsp;<span class="ident" id="5383670">i</span>&nbsp;<span class="op" id="5383672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383678">dst</span><span class="op" id="5383681">.</span><span class="ident" id="5383682">Write</span><span class="op" id="5383687">(</span><span class="ident" id="5383688">src</span><span class="op" id="5383691">[</span><span class="ident" id="5383692">start</span><span class="op" id="5383697">:</span><span class="ident" id="5383698">i</span><span class="op" id="5383699">]</span><span class="op" id="5383700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383705">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383710">dst</span><span class="op" id="5383713">.</span><span class="ident" id="5383714">WriteString</span><span class="op" id="5383725">(</span><span class="string" id="5383726">`\u00`</span><span class="op" id="5383732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383737">dst</span><span class="op" id="5383740">.</span><span class="ident" id="5383741">WriteByte</span><span class="op" id="5383750">(</span><span class="ident" id="5383751">hex</span><span class="op" id="5383754">[</span><span class="ident" id="5383755">c</span><span class="op" id="5383756">&gt;&gt;</span><span class="num" id="5383758">4</span><span class="op" id="5383759">]</span><span class="op" id="5383760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383765">dst</span><span class="op" id="5383768">.</span><span class="ident" id="5383769">WriteByte</span><span class="op" id="5383778">(</span><span class="ident" id="5383779">hex</span><span class="op" id="5383782">[</span><span class="ident" id="5383783">c</span><span class="op" id="5383784">&amp;</span><span class="num" id="5383785">0xF</span><span class="op" id="5383788">]</span><span class="op" id="5383789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383794">start</span>&nbsp;<span class="op" id="5383800">=</span>&nbsp;<span class="ident" id="5383802">i</span>&nbsp;<span class="op" id="5383804">+</span>&nbsp;<span class="num" id="5383806">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383810">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5383814">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383870">if</span>&nbsp;<span class="ident" id="5383873">c</span>&nbsp;<span class="op" id="5383875">==</span>&nbsp;<span class="num" id="5383878">0xE2</span>&nbsp;<span class="op" id="5383883">&amp;&amp;</span>&nbsp;<span class="ident" id="5383886">i</span><span class="op" id="5383887">+</span><span class="num" id="5383888">2</span>&nbsp;<span class="op" id="5383890">&lt;</span>&nbsp;<span class="builtinfunc" id="5383892">len</span><span class="op" id="5383895">(</span><span class="ident" id="5383896">src</span><span class="op" id="5383899">)</span>&nbsp;<span class="op" id="5383901">&amp;&amp;</span>&nbsp;<span class="ident" id="5383904">src</span><span class="op" id="5383907">[</span><span class="ident" id="5383908">i</span><span class="op" id="5383909">+</span><span class="num" id="5383910">1</span><span class="op" id="5383911">]</span>&nbsp;<span class="op" id="5383913">==</span>&nbsp;<span class="num" id="5383916">0x80</span>&nbsp;<span class="op" id="5383921">&amp;&amp;</span>&nbsp;<span class="ident" id="5383924">src</span><span class="op" id="5383927">[</span><span class="ident" id="5383928">i</span><span class="op" id="5383929">+</span><span class="num" id="5383930">2</span><span class="op" id="5383931">]</span><span class="op" id="5383932">&amp;^</span><span class="num" id="5383934">1</span>&nbsp;<span class="op" id="5383936">==</span>&nbsp;<span class="num" id="5383939">0xA8</span>&nbsp;<span class="op" id="5383944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383949">if</span>&nbsp;<span class="ident" id="5383952">start</span>&nbsp;<span class="op" id="5383958">&lt;</span>&nbsp;<span class="ident" id="5383960">i</span>&nbsp;<span class="op" id="5383962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383968">dst</span><span class="op" id="5383971">.</span><span class="ident" id="5383972">Write</span><span class="op" id="5383977">(</span><span class="ident" id="5383978">src</span><span class="op" id="5383981">[</span><span class="ident" id="5383982">start</span><span class="op" id="5383987">:</span><span class="ident" id="5383988">i</span><span class="op" id="5383989">]</span><span class="op" id="5383990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383995">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384000">dst</span><span class="op" id="5384003">.</span><span class="ident" id="5384004">WriteString</span><span class="op" id="5384015">(</span><span class="string" id="5384016">`\u202`</span><span class="op" id="5384023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384028">dst</span><span class="op" id="5384031">.</span><span class="ident" id="5384032">WriteByte</span><span class="op" id="5384041">(</span><span class="ident" id="5384042">hex</span><span class="op" id="5384045">[</span><span class="ident" id="5384046">src</span><span class="op" id="5384049">[</span><span class="ident" id="5384050">i</span><span class="op" id="5384051">+</span><span class="num" id="5384052">2</span><span class="op" id="5384053">]</span><span class="op" id="5384054">&amp;</span><span class="num" id="5384055">0xF</span><span class="op" id="5384058">]</span><span class="op" id="5384059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384064">start</span>&nbsp;<span class="op" id="5384070">=</span>&nbsp;<span class="ident" id="5384072">i</span>&nbsp;<span class="op" id="5384074">+</span>&nbsp;<span class="num" id="5384076">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384084">v</span>&nbsp;<span class="op" id="5384086">:=</span>&nbsp;<span class="ident" id="5384089">scan</span><span class="op" id="5384093">.</span><span class="ident" id="5384094">step</span><span class="op" id="5384098">(</span><span class="op" id="5384099">&amp;</span><span class="ident" id="5384100">scan</span><span class="op" id="5384104">,</span>&nbsp;<span class="builtintype" id="5384106">int</span><span class="op" id="5384109">(</span><span class="ident" id="5384110">c</span><span class="op" id="5384111">)</span><span class="op" id="5384112">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384116">if</span>&nbsp;<span class="ident" id="5384119">v</span>&nbsp;<span class="op" id="5384121">&gt;=</span>&nbsp;<span class="ident" id="5384124">scanSkipSpace</span>&nbsp;<span class="op" id="5384138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384143">if</span>&nbsp;<span class="ident" id="5384146">v</span>&nbsp;<span class="op" id="5384148">==</span>&nbsp;<span class="ident" id="5384151">scanError</span>&nbsp;<span class="op" id="5384161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384167">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384181">if</span>&nbsp;<span class="ident" id="5384184">start</span>&nbsp;<span class="op" id="5384190">&lt;</span>&nbsp;<span class="ident" id="5384192">i</span>&nbsp;<span class="op" id="5384194">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384200">dst</span><span class="op" id="5384203">.</span><span class="ident" id="5384204">Write</span><span class="op" id="5384209">(</span><span class="ident" id="5384210">src</span><span class="op" id="5384213">[</span><span class="ident" id="5384214">start</span><span class="op" id="5384219">:</span><span class="ident" id="5384220">i</span><span class="op" id="5384221">]</span><span class="op" id="5384222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384232">start</span>&nbsp;<span class="op" id="5384238">=</span>&nbsp;<span class="ident" id="5384240">i</span>&nbsp;<span class="op" id="5384242">+</span>&nbsp;<span class="num" id="5384244">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384251">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384254">if</span>&nbsp;<span class="ident" id="5384257">scan</span><span class="op" id="5384261">.</span><span class="ident" id="5384262">eof</span><span class="op" id="5384265">(</span><span class="op" id="5384266">)</span>&nbsp;<span class="op" id="5384268">==</span>&nbsp;<span class="ident" id="5384271">scanError</span>&nbsp;<span class="op" id="5384281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384285">dst</span><span class="op" id="5384288">.</span><span class="ident" id="5384289">Truncate</span><span class="op" id="5384297">(</span><span class="ident" id="5384298">origLen</span><span class="op" id="5384305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384309">return</span>&nbsp;<span class="ident" id="5384316">scan</span><span class="op" id="5384320">.</span><span class="ident" id="5384321">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384329">if</span>&nbsp;<span class="ident" id="5384332">start</span>&nbsp;<span class="op" id="5384338">&lt;</span>&nbsp;<span class="builtinfunc" id="5384340">len</span><span class="op" id="5384343">(</span><span class="ident" id="5384344">src</span><span class="op" id="5384347">)</span>&nbsp;<span class="op" id="5384349">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384353">dst</span><span class="op" id="5384356">.</span><span class="ident" id="5384357">Write</span><span class="op" id="5384362">(</span><span class="ident" id="5384363">src</span><span class="op" id="5384366">[</span><span class="ident" id="5384367">start</span><span class="op" id="5384372">:</span><span class="op" id="5384373">]</span><span class="op" id="5384374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384380">return</span>&nbsp;<span class="ident" id="5384387">nil</span><br>
<span class="lineno"></span><span class="op" id="5384391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5384394">func</span>&nbsp;<span class="ident" id="5384399">newline</span><span class="op" id="5384406">(</span><span class="ident" id="5384407">dst</span>&nbsp;<span class="op" id="5384411">*</span><span class="ident" id="5384412">bytes</span><span class="op" id="5384417">.</span><span class="ident" id="5384418">Buffer</span><span class="op" id="5384424">,</span>&nbsp;<span class="ident" id="5384426">prefix</span><span class="op" id="5384432">,</span>&nbsp;<span class="ident" id="5384434">indent</span>&nbsp;<span class="builtintype" id="5384441">string</span><span class="op" id="5384447">,</span>&nbsp;<span class="ident" id="5384449">depth</span>&nbsp;<span class="builtintype" id="5384455">int</span><span class="op" id="5384458">)</span>&nbsp;<span class="op" id="5384460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384463">dst</span><span class="op" id="5384466">.</span><span class="ident" id="5384467">WriteByte</span><span class="op" id="5384476">(</span><span class="string" id="5384477">&#39;\n&#39;</span><span class="op" id="5384481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384484">dst</span><span class="op" id="5384487">.</span><span class="ident" id="5384488">WriteString</span><span class="op" id="5384499">(</span><span class="ident" id="5384500">prefix</span><span class="op" id="5384506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384509">for</span>&nbsp;<span class="ident" id="5384513">i</span>&nbsp;<span class="op" id="5384515">:=</span>&nbsp;<span class="num" id="5384518">0</span><span class="op" id="5384519">;</span>&nbsp;<span class="ident" id="5384521">i</span>&nbsp;<span class="op" id="5384523">&lt;</span>&nbsp;<span class="ident" id="5384525">depth</span><span class="op" id="5384530">;</span>&nbsp;<span class="ident" id="5384532">i</span><span class="op" id="5384533">++</span>&nbsp;<span class="op" id="5384536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384540">dst</span><span class="op" id="5384543">.</span><span class="ident" id="5384544">WriteString</span><span class="op" id="5384555">(</span><span class="ident" id="5384556">indent</span><span class="op" id="5384562">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384565">}</span><br>
<span class="lineno"></span><span class="op" id="5384567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5384570">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="5384637">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="5384696">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="5384759">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="5384817">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="5384880">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5384940">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="5384993">func</span>&nbsp;<span class="ident" id="5384998">Indent</span><span class="op" id="5385004">(</span><span class="ident" id="5385005">dst</span>&nbsp;<span class="op" id="5385009">*</span><span class="ident" id="5385010">bytes</span><span class="op" id="5385015">.</span><span class="ident" id="5385016">Buffer</span><span class="op" id="5385022">,</span>&nbsp;<span class="ident" id="5385024">src</span>&nbsp;<span class="op" id="5385028">[</span><span class="op" id="5385029">]</span><span class="builtintype" id="5385030">byte</span><span class="op" id="5385034">,</span>&nbsp;<span class="ident" id="5385036">prefix</span><span class="op" id="5385042">,</span>&nbsp;<span class="ident" id="5385044">indent</span>&nbsp;<span class="builtintype" id="5385051">string</span><span class="op" id="5385057">)</span>&nbsp;<span class="builtintype" id="5385059">error</span>&nbsp;<span class="op" id="5385065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385068">origLen</span>&nbsp;<span class="op" id="5385076">:=</span>&nbsp;<span class="ident" id="5385079">dst</span><span class="op" id="5385082">.</span><span class="ident" id="5385083">Len</span><span class="op" id="5385086">(</span><span class="op" id="5385087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385090">var</span>&nbsp;<span class="ident" id="5385094">scan</span>&nbsp;<span class="ident" id="5385099">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385108">scan</span><span class="op" id="5385112">.</span><span class="ident" id="5385113">reset</span><span class="op" id="5385118">(</span><span class="op" id="5385119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385122">needIndent</span>&nbsp;<span class="op" id="5385133">:=</span>&nbsp;<span class="builtintype" id="5385136">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385143">depth</span>&nbsp;<span class="op" id="5385149">:=</span>&nbsp;<span class="num" id="5385152">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385155">for</span>&nbsp;<span class="ident" id="5385159">_</span><span class="op" id="5385160">,</span>&nbsp;<span class="ident" id="5385162">c</span>&nbsp;<span class="op" id="5385164">:=</span>&nbsp;<span class="keyword" id="5385167">range</span>&nbsp;<span class="ident" id="5385173">src</span>&nbsp;<span class="op" id="5385177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385181">scan</span><span class="op" id="5385185">.</span><span class="ident" id="5385186">bytes</span><span class="op" id="5385191">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385196">v</span>&nbsp;<span class="op" id="5385198">:=</span>&nbsp;<span class="ident" id="5385201">scan</span><span class="op" id="5385205">.</span><span class="ident" id="5385206">step</span><span class="op" id="5385210">(</span><span class="op" id="5385211">&amp;</span><span class="ident" id="5385212">scan</span><span class="op" id="5385216">,</span>&nbsp;<span class="builtintype" id="5385218">int</span><span class="op" id="5385221">(</span><span class="ident" id="5385222">c</span><span class="op" id="5385223">)</span><span class="op" id="5385224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385228">if</span>&nbsp;<span class="ident" id="5385231">v</span>&nbsp;<span class="op" id="5385233">==</span>&nbsp;<span class="ident" id="5385236">scanSkipSpace</span>&nbsp;<span class="op" id="5385250">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385255">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385270">if</span>&nbsp;<span class="ident" id="5385273">v</span>&nbsp;<span class="op" id="5385275">==</span>&nbsp;<span class="ident" id="5385278">scanError</span>&nbsp;<span class="op" id="5385288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385293">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385301">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385305">if</span>&nbsp;<span class="ident" id="5385308">needIndent</span>&nbsp;<span class="op" id="5385319">&amp;&amp;</span>&nbsp;<span class="ident" id="5385322">v</span>&nbsp;<span class="op" id="5385324">!=</span>&nbsp;<span class="ident" id="5385327">scanEndObject</span>&nbsp;<span class="op" id="5385341">&amp;&amp;</span>&nbsp;<span class="ident" id="5385344">v</span>&nbsp;<span class="op" id="5385346">!=</span>&nbsp;<span class="ident" id="5385349">scanEndArray</span>&nbsp;<span class="op" id="5385362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385367">needIndent</span>&nbsp;<span class="op" id="5385378">=</span>&nbsp;<span class="builtintype" id="5385380">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385389">depth</span><span class="op" id="5385394">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385400">newline</span><span class="op" id="5385407">(</span><span class="ident" id="5385408">dst</span><span class="op" id="5385411">,</span>&nbsp;<span class="ident" id="5385413">prefix</span><span class="op" id="5385419">,</span>&nbsp;<span class="ident" id="5385421">indent</span><span class="op" id="5385427">,</span>&nbsp;<span class="ident" id="5385429">depth</span><span class="op" id="5385434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385438">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5385443">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5385486">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385543">if</span>&nbsp;<span class="ident" id="5385546">v</span>&nbsp;<span class="op" id="5385548">==</span>&nbsp;<span class="ident" id="5385551">scanContinue</span>&nbsp;<span class="op" id="5385564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385569">dst</span><span class="op" id="5385572">.</span><span class="ident" id="5385573">WriteByte</span><span class="op" id="5385582">(</span><span class="ident" id="5385583">c</span><span class="op" id="5385584">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385589">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5385605">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385647">switch</span>&nbsp;<span class="ident" id="5385654">c</span>&nbsp;<span class="op" id="5385656">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385660">case</span>&nbsp;<span class="string" id="5385665">&#39;{&#39;</span><span class="op" id="5385668">,</span>&nbsp;<span class="string" id="5385670">&#39;[&#39;</span><span class="op" id="5385673">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5385678">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385756">needIndent</span>&nbsp;<span class="op" id="5385767">=</span>&nbsp;<span class="builtintype" id="5385769">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385777">dst</span><span class="op" id="5385780">.</span><span class="ident" id="5385781">WriteByte</span><span class="op" id="5385790">(</span><span class="ident" id="5385791">c</span><span class="op" id="5385792">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385797">case</span>&nbsp;<span class="string" id="5385802">&#39;,&#39;</span><span class="op" id="5385805">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385810">dst</span><span class="op" id="5385813">.</span><span class="ident" id="5385814">WriteByte</span><span class="op" id="5385823">(</span><span class="ident" id="5385824">c</span><span class="op" id="5385825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385830">newline</span><span class="op" id="5385837">(</span><span class="ident" id="5385838">dst</span><span class="op" id="5385841">,</span>&nbsp;<span class="ident" id="5385843">prefix</span><span class="op" id="5385849">,</span>&nbsp;<span class="ident" id="5385851">indent</span><span class="op" id="5385857">,</span>&nbsp;<span class="ident" id="5385859">depth</span><span class="op" id="5385864">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385869">case</span>&nbsp;<span class="string" id="5385874">&#39;:&#39;</span><span class="op" id="5385877">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385882">dst</span><span class="op" id="5385885">.</span><span class="ident" id="5385886">WriteByte</span><span class="op" id="5385895">(</span><span class="ident" id="5385896">c</span><span class="op" id="5385897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385902">dst</span><span class="op" id="5385905">.</span><span class="ident" id="5385906">WriteByte</span><span class="op" id="5385915">(</span><span class="string" id="5385916">&#39;&nbsp;&#39;</span><span class="op" id="5385919">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385924">case</span>&nbsp;<span class="string" id="5385929">&#39;}&#39;</span><span class="op" id="5385932">,</span>&nbsp;<span class="string" id="5385934">&#39;]&#39;</span><span class="op" id="5385937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385942">if</span>&nbsp;<span class="ident" id="5385945">needIndent</span>&nbsp;<span class="op" id="5385956">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5385962">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5386007">needIndent</span>&nbsp;<span class="op" id="5386018">=</span>&nbsp;<span class="builtintype" id="5386020">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5386029">}</span>&nbsp;<span class="keyword" id="5386031">else</span>&nbsp;<span class="op" id="5386036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5386042">depth</span><span class="op" id="5386047">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5386054">newline</span><span class="op" id="5386061">(</span><span class="ident" id="5386062">dst</span><span class="op" id="5386065">,</span>&nbsp;<span class="ident" id="5386067">prefix</span><span class="op" id="5386073">,</span>&nbsp;<span class="ident" id="5386075">indent</span><span class="op" id="5386081">,</span>&nbsp;<span class="ident" id="5386083">depth</span><span class="op" id="5386088">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5386093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5386098">dst</span><span class="op" id="5386101">.</span><span class="ident" id="5386102">WriteByte</span><span class="op" id="5386111">(</span><span class="ident" id="5386112">c</span><span class="op" id="5386113">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5386118">default</span><span class="op" id="5386125">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5386130">dst</span><span class="op" id="5386133">.</span><span class="ident" id="5386134">WriteByte</span><span class="op" id="5386143">(</span><span class="ident" id="5386144">c</span><span class="op" id="5386145">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5386149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5386152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5386155">if</span>&nbsp;<span class="ident" id="5386158">scan</span><span class="op" id="5386162">.</span><span class="ident" id="5386163">eof</span><span class="op" id="5386166">(</span><span class="op" id="5386167">)</span>&nbsp;<span class="op" id="5386169">==</span>&nbsp;<span class="ident" id="5386172">scanError</span>&nbsp;<span class="op" id="5386182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5386186">dst</span><span class="op" id="5386189">.</span><span class="ident" id="5386190">Truncate</span><span class="op" id="5386198">(</span><span class="ident" id="5386199">origLen</span><span class="op" id="5386206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5386210">return</span>&nbsp;<span class="ident" id="5386217">scan</span><span class="op" id="5386221">.</span><span class="ident" id="5386222">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5386227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5386230">return</span>&nbsp;<span class="ident" id="5386237">nil</span><br>
<span class="lineno"></span><span class="op" id="5386241">}</span>
</div>
</body>
</html>
