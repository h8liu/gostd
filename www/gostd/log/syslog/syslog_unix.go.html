<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html" class="current">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6273909">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6273964">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6274018">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6274069">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6274102">package</span>&nbsp;<span class="ident" id="6274110">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6274118">import</span>&nbsp;<span class="op" id="6274125">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6274128">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6274138">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6274144">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6274147">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6274216">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6274262">func</span>&nbsp;<span class="ident" id="6274267">unixSyslog</span><span class="op" id="6274277">(</span><span class="op" id="6274278">)</span>&nbsp;<span class="op" id="6274280">(</span><span class="ident" id="6274281">conn</span>&nbsp;<span class="ident" id="6274286">serverConn</span><span class="op" id="6274296">,</span>&nbsp;<span class="ident" id="6274298">err</span>&nbsp;<span class="builtintype" id="6274302">error</span><span class="op" id="6274307">)</span>&nbsp;<span class="op" id="6274309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274312">logTypes</span>&nbsp;<span class="op" id="6274321">:=</span>&nbsp;<span class="op" id="6274324">[</span><span class="op" id="6274325">]</span><span class="builtintype" id="6274326">string</span><span class="op" id="6274332">{</span><span class="string" id="6274333">&#34;unixgram&#34;</span><span class="op" id="6274343">,</span>&nbsp;<span class="string" id="6274345">&#34;unix&#34;</span><span class="op" id="6274351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274354">logPaths</span>&nbsp;<span class="op" id="6274363">:=</span>&nbsp;<span class="op" id="6274366">[</span><span class="op" id="6274367">]</span><span class="builtintype" id="6274368">string</span><span class="op" id="6274374">{</span><span class="string" id="6274375">&#34;/dev/log&#34;</span><span class="op" id="6274385">,</span>&nbsp;<span class="string" id="6274387">&#34;/var/run/syslog&#34;</span><span class="op" id="6274404">,</span>&nbsp;<span class="string" id="6274406">&#34;/var/run/log&#34;</span><span class="op" id="6274420">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274423">for</span>&nbsp;<span class="ident" id="6274427">_</span><span class="op" id="6274428">,</span>&nbsp;<span class="ident" id="6274430">network</span>&nbsp;<span class="op" id="6274438">:=</span>&nbsp;<span class="keyword" id="6274441">range</span>&nbsp;<span class="ident" id="6274447">logTypes</span>&nbsp;<span class="op" id="6274456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274460">for</span>&nbsp;<span class="ident" id="6274464">_</span><span class="op" id="6274465">,</span>&nbsp;<span class="ident" id="6274467">path</span>&nbsp;<span class="op" id="6274472">:=</span>&nbsp;<span class="keyword" id="6274475">range</span>&nbsp;<span class="ident" id="6274481">logPaths</span>&nbsp;<span class="op" id="6274490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274495">conn</span><span class="op" id="6274499">,</span>&nbsp;<span class="ident" id="6274501">err</span>&nbsp;<span class="op" id="6274505">:=</span>&nbsp;<span class="ident" id="6274508">net</span><span class="op" id="6274511">.</span><span class="ident" id="6274512">Dial</span><span class="op" id="6274516">(</span><span class="ident" id="6274517">network</span><span class="op" id="6274524">,</span>&nbsp;<span class="ident" id="6274526">path</span><span class="op" id="6274530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274535">if</span>&nbsp;<span class="ident" id="6274538">err</span>&nbsp;<span class="op" id="6274542">!=</span>&nbsp;<span class="ident" id="6274545">nil</span>&nbsp;<span class="op" id="6274549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274555">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6274567">}</span>&nbsp;<span class="keyword" id="6274569">else</span>&nbsp;<span class="op" id="6274574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274580">return</span>&nbsp;<span class="op" id="6274587">&amp;</span><span class="ident" id="6274588">netConn</span><span class="op" id="6274595">{</span><span class="ident" id="6274596">conn</span><span class="op" id="6274600">:</span>&nbsp;<span class="ident" id="6274602">conn</span><span class="op" id="6274606">,</span>&nbsp;<span class="ident" id="6274608">local</span><span class="op" id="6274613">:</span>&nbsp;<span class="builtintype" id="6274615">true</span><span class="op" id="6274619">}</span><span class="op" id="6274620">,</span>&nbsp;<span class="ident" id="6274622">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6274629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6274633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6274636">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274639">return</span>&nbsp;<span class="ident" id="6274646">nil</span><span class="op" id="6274649">,</span>&nbsp;<span class="ident" id="6274651">errors</span><span class="op" id="6274657">.</span><span class="ident" id="6274658">New</span><span class="op" id="6274661">(</span><span class="string" id="6274662">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6274690">)</span><br>
<span class="lineno"></span><span class="op" id="6274692">}</span>
</div>
</body>
</html>
