<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1906573">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1906628">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1906682">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1906733">package</span>&nbsp;<span class="ident" id="1906741">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1906750">import</span>&nbsp;<span class="op" id="1906757">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1906760">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1906769">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1906772">const</span>&nbsp;<span class="op" id="1906778">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906781">hashSize</span>&nbsp;<span class="op" id="1906790">=</span>&nbsp;<span class="num" id="1906792">1009</span><br>
<span class="lineno"></span><span class="op" id="1906797">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1906800">var</span>&nbsp;<span class="op" id="1906804">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906807">ifaceLock</span>&nbsp;<span class="ident" id="1906817">mutex</span>&nbsp;<span class="comment" id="1906823">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906851">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1906861">[</span><span class="ident" id="1906862">hashSize</span><span class="op" id="1906870">]</span><span class="op" id="1906871">*</span><span class="ident" id="1906872">itab</span><br>
<span class="lineno"></span><span class="op" id="1906877">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1906880">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1906950">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1907019">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1907088">type</span>&nbsp;<span class="ident" id="1907093">fInterface</span>&nbsp;<span class="keyword" id="1907104">interface</span>&nbsp;<span class="op" id="1907114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907117">f</span><span class="op" id="1907118">(</span><span class="op" id="1907119">)</span><br>
<span class="lineno">25</span><span class="op" id="1907121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1907124">func</span>&nbsp;<span class="ident" id="1907129">getitab</span><span class="op" id="1907136">(</span><span class="ident" id="1907137">inter</span>&nbsp;<span class="op" id="1907143">*</span><span class="ident" id="1907144">interfacetype</span><span class="op" id="1907157">,</span>&nbsp;<span class="ident" id="1907159">typ</span>&nbsp;<span class="op" id="1907163">*</span><span class="ident" id="1907164">_type</span><span class="op" id="1907169">,</span>&nbsp;<span class="ident" id="1907171">canfail</span>&nbsp;<span class="builtintype" id="1907179">bool</span><span class="op" id="1907183">)</span>&nbsp;<span class="op" id="1907185">*</span><span class="ident" id="1907186">itab</span>&nbsp;<span class="op" id="1907191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907194">if</span>&nbsp;<span class="builtinfunc" id="1907197">len</span><span class="op" id="1907200">(</span><span class="ident" id="1907201">inter</span><span class="op" id="1907206">.</span><span class="ident" id="1907207">mhdr</span><span class="op" id="1907211">)</span>&nbsp;<span class="op" id="1907213">==</span>&nbsp;<span class="num" id="1907216">0</span>&nbsp;<span class="op" id="1907218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907222">gothrow</span><span class="op" id="1907229">(</span><span class="string" id="1907230">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1907263">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1907270">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907284">x</span>&nbsp;<span class="op" id="1907286">:=</span>&nbsp;<span class="ident" id="1907289">typ</span><span class="op" id="1907292">.</span><span class="ident" id="1907293">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907296">if</span>&nbsp;<span class="ident" id="1907299">x</span>&nbsp;<span class="op" id="1907301">==</span>&nbsp;<span class="ident" id="1907304">nil</span>&nbsp;<span class="op" id="1907308">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907312">if</span>&nbsp;<span class="ident" id="1907315">canfail</span>&nbsp;<span class="op" id="1907323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907328">return</span>&nbsp;<span class="ident" id="1907335">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907345">i</span>&nbsp;<span class="op" id="1907347">:=</span>&nbsp;<span class="op" id="1907350">(</span><span class="op" id="1907351">*</span><span class="ident" id="1907352">imethod</span><span class="op" id="1907359">)</span><span class="op" id="1907360">(</span><span class="ident" id="1907361">add</span><span class="op" id="1907364">(</span><span class="ident" id="1907365">unsafe</span><span class="op" id="1907371">.</span><span class="ident" id="1907372">Pointer</span><span class="op" id="1907379">(</span><span class="ident" id="1907380">inter</span><span class="op" id="1907385">)</span><span class="op" id="1907386">,</span>&nbsp;<span class="ident" id="1907388">unsafe</span><span class="op" id="1907394">.</span><span class="ident" id="1907395">Sizeof</span><span class="op" id="1907401">(</span><span class="ident" id="1907402">interfacetype</span><span class="op" id="1907415">{</span><span class="op" id="1907416">}</span><span class="op" id="1907417">)</span><span class="op" id="1907418">)</span><span class="op" id="1907419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1907423">panic</span><span class="op" id="1907428">(</span><span class="op" id="1907429">&amp;</span><span class="ident" id="1907430">TypeAssertionError</span><span class="op" id="1907448">{</span><span class="string" id="1907449">&#34;&#34;</span><span class="op" id="1907451">,</span>&nbsp;<span class="op" id="1907453">*</span><span class="ident" id="1907454">typ</span><span class="op" id="1907457">.</span><span class="ident" id="1907458">_string</span><span class="op" id="1907465">,</span>&nbsp;<span class="op" id="1907467">*</span><span class="ident" id="1907468">inter</span><span class="op" id="1907473">.</span><span class="ident" id="1907474">typ</span><span class="op" id="1907477">.</span><span class="ident" id="1907478">_string</span><span class="op" id="1907485">,</span>&nbsp;<span class="op" id="1907487">*</span><span class="ident" id="1907488">i</span><span class="op" id="1907489">.</span><span class="ident" id="1907490">name</span><span class="op" id="1907494">}</span><span class="op" id="1907495">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1907502">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907557">h</span>&nbsp;<span class="op" id="1907559">:=</span>&nbsp;<span class="ident" id="1907562">inter</span><span class="op" id="1907567">.</span><span class="ident" id="1907568">typ</span><span class="op" id="1907571">.</span><span class="ident" id="1907572">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907578">h</span>&nbsp;<span class="op" id="1907580">+=</span>&nbsp;<span class="num" id="1907583">17</span>&nbsp;<span class="op" id="1907586">*</span>&nbsp;<span class="ident" id="1907588">typ</span><span class="op" id="1907591">.</span><span class="ident" id="1907592">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1907598">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907633">h</span>&nbsp;<span class="op" id="1907635">%=</span>&nbsp;<span class="ident" id="1907638">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1907649">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1907696">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907740">var</span>&nbsp;<span class="ident" id="1907744">m</span>&nbsp;<span class="op" id="1907746">*</span><span class="ident" id="1907747">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907753">var</span>&nbsp;<span class="ident" id="1907757">locked</span>&nbsp;<span class="builtintype" id="1907764">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907769">for</span>&nbsp;<span class="ident" id="1907773">locked</span>&nbsp;<span class="op" id="1907780">=</span>&nbsp;<span class="num" id="1907782">0</span><span class="op" id="1907783">;</span>&nbsp;<span class="ident" id="1907785">locked</span>&nbsp;<span class="op" id="1907792">&lt;</span>&nbsp;<span class="num" id="1907794">2</span><span class="op" id="1907795">;</span>&nbsp;<span class="ident" id="1907797">locked</span><span class="op" id="1907803">++</span>&nbsp;<span class="op" id="1907806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907810">if</span>&nbsp;<span class="ident" id="1907813">locked</span>&nbsp;<span class="op" id="1907820">!=</span>&nbsp;<span class="num" id="1907823">0</span>&nbsp;<span class="op" id="1907825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907830">lock</span><span class="op" id="1907834">(</span><span class="op" id="1907835">&amp;</span><span class="ident" id="1907836">ifaceLock</span><span class="op" id="1907845">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907853">for</span>&nbsp;<span class="ident" id="1907857">m</span>&nbsp;<span class="op" id="1907859">=</span>&nbsp;<span class="op" id="1907861">(</span><span class="op" id="1907862">*</span><span class="ident" id="1907863">itab</span><span class="op" id="1907867">)</span><span class="op" id="1907868">(</span><span class="ident" id="1907869">atomicloadp</span><span class="op" id="1907880">(</span><span class="ident" id="1907881">unsafe</span><span class="op" id="1907887">.</span><span class="ident" id="1907888">Pointer</span><span class="op" id="1907895">(</span><span class="op" id="1907896">&amp;</span><span class="ident" id="1907897">hash</span><span class="op" id="1907901">[</span><span class="ident" id="1907902">h</span><span class="op" id="1907903">]</span><span class="op" id="1907904">)</span><span class="op" id="1907905">)</span><span class="op" id="1907906">)</span><span class="op" id="1907907">;</span>&nbsp;<span class="ident" id="1907909">m</span>&nbsp;<span class="op" id="1907911">!=</span>&nbsp;<span class="ident" id="1907914">nil</span><span class="op" id="1907917">;</span>&nbsp;<span class="ident" id="1907919">m</span>&nbsp;<span class="op" id="1907921">=</span>&nbsp;<span class="ident" id="1907923">m</span><span class="op" id="1907924">.</span><span class="ident" id="1907925">link</span>&nbsp;<span class="op" id="1907930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907935">if</span>&nbsp;<span class="ident" id="1907938">m</span><span class="op" id="1907939">.</span><span class="ident" id="1907940">inter</span>&nbsp;<span class="op" id="1907946">==</span>&nbsp;<span class="ident" id="1907949">inter</span>&nbsp;<span class="op" id="1907955">&amp;&amp;</span>&nbsp;<span class="ident" id="1907958">m</span><span class="op" id="1907959">.</span><span class="ident" id="1907960">_type</span>&nbsp;<span class="op" id="1907966">==</span>&nbsp;<span class="ident" id="1907969">typ</span>&nbsp;<span class="op" id="1907973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907979">if</span>&nbsp;<span class="ident" id="1907982">m</span><span class="op" id="1907983">.</span><span class="ident" id="1907984">bad</span>&nbsp;<span class="op" id="1907988">!=</span>&nbsp;<span class="num" id="1907991">0</span>&nbsp;<span class="op" id="1907993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908000">m</span>&nbsp;<span class="op" id="1908002">=</span>&nbsp;<span class="ident" id="1908004">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1908013">if</span>&nbsp;<span class="op" id="1908016">!</span><span class="ident" id="1908017">canfail</span>&nbsp;<span class="op" id="1908025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908033">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908081">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908132">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908179">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908227">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908276">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908325">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1908372">goto</span>&nbsp;<span class="ident" id="1908377">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1908389">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1908395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1908401">if</span>&nbsp;<span class="ident" id="1908404">locked</span>&nbsp;<span class="op" id="1908411">!=</span>&nbsp;<span class="num" id="1908414">0</span>&nbsp;<span class="op" id="1908416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908423">unlock</span><span class="op" id="1908429">(</span><span class="op" id="1908430">&amp;</span><span class="ident" id="1908431">ifaceLock</span><span class="op" id="1908440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1908446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1908452">return</span>&nbsp;<span class="ident" id="1908459">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1908464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1908468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1908471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908475">m</span>&nbsp;<span class="op" id="1908477">=</span>&nbsp;<span class="op" id="1908479">(</span><span class="op" id="1908480">*</span><span class="ident" id="1908481">itab</span><span class="op" id="1908485">)</span><span class="op" id="1908486">(</span><span class="ident" id="1908487">persistentalloc</span><span class="op" id="1908502">(</span><span class="ident" id="1908503">unsafe</span><span class="op" id="1908509">.</span><span class="ident" id="1908510">Sizeof</span><span class="op" id="1908516">(</span><span class="ident" id="1908517">itab</span><span class="op" id="1908521">{</span><span class="op" id="1908522">}</span><span class="op" id="1908523">)</span><span class="op" id="1908524">+</span><span class="builtintype" id="1908525">uintptr</span><span class="op" id="1908532">(</span><span class="builtinfunc" id="1908533">len</span><span class="op" id="1908536">(</span><span class="ident" id="1908537">inter</span><span class="op" id="1908542">.</span><span class="ident" id="1908543">mhdr</span><span class="op" id="1908547">)</span><span class="op" id="1908548">)</span><span class="op" id="1908549">*</span><span class="ident" id="1908550">ptrSize</span><span class="op" id="1908557">,</span>&nbsp;<span class="num" id="1908559">0</span><span class="op" id="1908560">,</span>&nbsp;<span class="op" id="1908562">&amp;</span><span class="ident" id="1908563">memstats</span><span class="op" id="1908571">.</span><span class="ident" id="1908572">other_sys</span><span class="op" id="1908581">)</span><span class="op" id="1908582">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908585">m</span><span class="op" id="1908586">.</span><span class="ident" id="1908587">inter</span>&nbsp;<span class="op" id="1908593">=</span>&nbsp;<span class="ident" id="1908595">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908602">m</span><span class="op" id="1908603">.</span><span class="ident" id="1908604">_type</span>&nbsp;<span class="op" id="1908610">=</span>&nbsp;<span class="ident" id="1908612">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1908617">search</span><span class="op" id="1908623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908626">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908677">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908713">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1908756">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908795">ni</span>&nbsp;<span class="op" id="1908798">:=</span>&nbsp;<span class="builtinfunc" id="1908801">len</span><span class="op" id="1908804">(</span><span class="ident" id="1908805">inter</span><span class="op" id="1908810">.</span><span class="ident" id="1908811">mhdr</span><span class="op" id="1908815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908818">nt</span>&nbsp;<span class="op" id="1908821">:=</span>&nbsp;<span class="builtinfunc" id="1908824">len</span><span class="op" id="1908827">(</span><span class="ident" id="1908828">x</span><span class="op" id="1908829">.</span><span class="ident" id="1908830">mhdr</span><span class="op" id="1908834">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908837">j</span>&nbsp;<span class="op" id="1908839">:=</span>&nbsp;<span class="num" id="1908842">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1908845">for</span>&nbsp;<span class="ident" id="1908849">k</span>&nbsp;<span class="op" id="1908851">:=</span>&nbsp;<span class="num" id="1908854">0</span><span class="op" id="1908855">;</span>&nbsp;<span class="ident" id="1908857">k</span>&nbsp;<span class="op" id="1908859">&lt;</span>&nbsp;<span class="ident" id="1908861">ni</span><span class="op" id="1908863">;</span>&nbsp;<span class="ident" id="1908865">k</span><span class="op" id="1908866">++</span>&nbsp;<span class="op" id="1908869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908873">i</span>&nbsp;<span class="op" id="1908875">:=</span>&nbsp;<span class="op" id="1908878">(</span><span class="op" id="1908879">*</span><span class="ident" id="1908880">imethod</span><span class="op" id="1908887">)</span><span class="op" id="1908888">(</span><span class="ident" id="1908889">add</span><span class="op" id="1908892">(</span><span class="ident" id="1908893">unsafe</span><span class="op" id="1908899">.</span><span class="ident" id="1908900">Pointer</span><span class="op" id="1908907">(</span><span class="ident" id="1908908">inter</span><span class="op" id="1908913">)</span><span class="op" id="1908914">,</span>&nbsp;<span class="ident" id="1908916">unsafe</span><span class="op" id="1908922">.</span><span class="ident" id="1908923">Sizeof</span><span class="op" id="1908929">(</span><span class="ident" id="1908930">interfacetype</span><span class="op" id="1908943">{</span><span class="op" id="1908944">}</span><span class="op" id="1908945">)</span><span class="op" id="1908946">+</span><span class="builtintype" id="1908947">uintptr</span><span class="op" id="1908954">(</span><span class="ident" id="1908955">k</span><span class="op" id="1908956">)</span><span class="op" id="1908957">*</span><span class="ident" id="1908958">unsafe</span><span class="op" id="1908964">.</span><span class="ident" id="1908965">Sizeof</span><span class="op" id="1908971">(</span><span class="ident" id="1908972">imethod</span><span class="op" id="1908979">{</span><span class="op" id="1908980">}</span><span class="op" id="1908981">)</span><span class="op" id="1908982">)</span><span class="op" id="1908983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1908987">iname</span>&nbsp;<span class="op" id="1908993">:=</span>&nbsp;<span class="ident" id="1908996">i</span><span class="op" id="1908997">.</span><span class="ident" id="1908998">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909005">ipkgpath</span>&nbsp;<span class="op" id="1909014">:=</span>&nbsp;<span class="ident" id="1909017">i</span><span class="op" id="1909018">.</span><span class="ident" id="1909019">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909029">itype</span>&nbsp;<span class="op" id="1909035">:=</span>&nbsp;<span class="ident" id="1909038">i</span><span class="op" id="1909039">.</span><span class="ident" id="1909040">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909048">for</span>&nbsp;<span class="op" id="1909052">;</span>&nbsp;<span class="ident" id="1909054">j</span>&nbsp;<span class="op" id="1909056">&lt;</span>&nbsp;<span class="ident" id="1909058">nt</span><span class="op" id="1909060">;</span>&nbsp;<span class="ident" id="1909062">j</span><span class="op" id="1909063">++</span>&nbsp;<span class="op" id="1909066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909071">t</span>&nbsp;<span class="op" id="1909073">:=</span>&nbsp;<span class="op" id="1909076">(</span><span class="op" id="1909077">*</span><span class="ident" id="1909078">method</span><span class="op" id="1909084">)</span><span class="op" id="1909085">(</span><span class="ident" id="1909086">add</span><span class="op" id="1909089">(</span><span class="ident" id="1909090">unsafe</span><span class="op" id="1909096">.</span><span class="ident" id="1909097">Pointer</span><span class="op" id="1909104">(</span><span class="ident" id="1909105">x</span><span class="op" id="1909106">)</span><span class="op" id="1909107">,</span>&nbsp;<span class="ident" id="1909109">unsafe</span><span class="op" id="1909115">.</span><span class="ident" id="1909116">Sizeof</span><span class="op" id="1909122">(</span><span class="ident" id="1909123">uncommontype</span><span class="op" id="1909135">{</span><span class="op" id="1909136">}</span><span class="op" id="1909137">)</span><span class="op" id="1909138">+</span><span class="builtintype" id="1909139">uintptr</span><span class="op" id="1909146">(</span><span class="ident" id="1909147">j</span><span class="op" id="1909148">)</span><span class="op" id="1909149">*</span><span class="ident" id="1909150">unsafe</span><span class="op" id="1909156">.</span><span class="ident" id="1909157">Sizeof</span><span class="op" id="1909163">(</span><span class="ident" id="1909164">method</span><span class="op" id="1909170">{</span><span class="op" id="1909171">}</span><span class="op" id="1909172">)</span><span class="op" id="1909173">)</span><span class="op" id="1909174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909179">if</span>&nbsp;<span class="ident" id="1909182">t</span><span class="op" id="1909183">.</span><span class="ident" id="1909184">mtyp</span>&nbsp;<span class="op" id="1909189">==</span>&nbsp;<span class="ident" id="1909192">itype</span>&nbsp;<span class="op" id="1909198">&amp;&amp;</span>&nbsp;<span class="ident" id="1909201">t</span><span class="op" id="1909202">.</span><span class="ident" id="1909203">name</span>&nbsp;<span class="op" id="1909208">==</span>&nbsp;<span class="ident" id="1909211">iname</span>&nbsp;<span class="op" id="1909217">&amp;&amp;</span>&nbsp;<span class="ident" id="1909220">t</span><span class="op" id="1909221">.</span><span class="ident" id="1909222">pkgpath</span>&nbsp;<span class="op" id="1909230">==</span>&nbsp;<span class="ident" id="1909233">ipkgpath</span>&nbsp;<span class="op" id="1909242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909248">if</span>&nbsp;<span class="ident" id="1909251">m</span>&nbsp;<span class="op" id="1909253">!=</span>&nbsp;<span class="ident" id="1909256">nil</span>&nbsp;<span class="op" id="1909260">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909267">*</span><span class="op" id="1909268">(</span><span class="op" id="1909269">*</span><span class="ident" id="1909270">unsafe</span><span class="op" id="1909276">.</span><span class="ident" id="1909277">Pointer</span><span class="op" id="1909284">)</span><span class="op" id="1909285">(</span><span class="ident" id="1909286">add</span><span class="op" id="1909289">(</span><span class="ident" id="1909290">unsafe</span><span class="op" id="1909296">.</span><span class="ident" id="1909297">Pointer</span><span class="op" id="1909304">(</span><span class="ident" id="1909305">m</span><span class="op" id="1909306">)</span><span class="op" id="1909307">,</span>&nbsp;<span class="ident" id="1909309">unsafe</span><span class="op" id="1909315">.</span><span class="ident" id="1909316">Sizeof</span><span class="op" id="1909322">(</span><span class="ident" id="1909323">itab</span><span class="op" id="1909327">{</span><span class="op" id="1909328">}</span><span class="op" id="1909329">)</span><span class="op" id="1909330">+</span><span class="builtintype" id="1909331">uintptr</span><span class="op" id="1909338">(</span><span class="ident" id="1909339">k</span><span class="op" id="1909340">)</span><span class="op" id="1909341">*</span><span class="ident" id="1909342">ptrSize</span><span class="op" id="1909349">)</span><span class="op" id="1909350">)</span>&nbsp;<span class="op" id="1909352">=</span>&nbsp;<span class="ident" id="1909354">t</span><span class="op" id="1909355">.</span><span class="ident" id="1909356">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909370">goto</span>&nbsp;<span class="ident" id="1909375">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909394">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1909398">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909422">if</span>&nbsp;<span class="op" id="1909425">!</span><span class="ident" id="1909426">canfail</span>&nbsp;<span class="op" id="1909434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909439">if</span>&nbsp;<span class="ident" id="1909442">locked</span>&nbsp;<span class="op" id="1909449">!=</span>&nbsp;<span class="num" id="1909452">0</span>&nbsp;<span class="op" id="1909454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909460">unlock</span><span class="op" id="1909466">(</span><span class="op" id="1909467">&amp;</span><span class="ident" id="1909468">ifaceLock</span><span class="op" id="1909477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909482">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1909487">panic</span><span class="op" id="1909492">(</span><span class="op" id="1909493">&amp;</span><span class="ident" id="1909494">TypeAssertionError</span><span class="op" id="1909512">{</span><span class="string" id="1909513">&#34;&#34;</span><span class="op" id="1909515">,</span>&nbsp;<span class="op" id="1909517">*</span><span class="ident" id="1909518">typ</span><span class="op" id="1909521">.</span><span class="ident" id="1909522">_string</span><span class="op" id="1909529">,</span>&nbsp;<span class="op" id="1909531">*</span><span class="ident" id="1909532">inter</span><span class="op" id="1909537">.</span><span class="ident" id="1909538">typ</span><span class="op" id="1909541">.</span><span class="ident" id="1909542">_string</span><span class="op" id="1909549">,</span>&nbsp;<span class="op" id="1909551">*</span><span class="ident" id="1909552">iname</span><span class="op" id="1909557">}</span><span class="op" id="1909558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909566">m</span><span class="op" id="1909567">.</span><span class="ident" id="1909568">bad</span>&nbsp;<span class="op" id="1909572">=</span>&nbsp;<span class="num" id="1909574">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909578">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909585">nextimethod</span><span class="op" id="1909596">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909602">if</span>&nbsp;<span class="ident" id="1909605">locked</span>&nbsp;<span class="op" id="1909612">==</span>&nbsp;<span class="num" id="1909615">0</span>&nbsp;<span class="op" id="1909617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909621">gothrow</span><span class="op" id="1909628">(</span><span class="string" id="1909629">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1909651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909657">m</span><span class="op" id="1909658">.</span><span class="ident" id="1909659">link</span>&nbsp;<span class="op" id="1909664">=</span>&nbsp;<span class="ident" id="1909666">hash</span><span class="op" id="1909670">[</span><span class="ident" id="1909671">h</span><span class="op" id="1909672">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909675">atomicstorep</span><span class="op" id="1909687">(</span><span class="ident" id="1909688">unsafe</span><span class="op" id="1909694">.</span><span class="ident" id="1909695">Pointer</span><span class="op" id="1909702">(</span><span class="op" id="1909703">&amp;</span><span class="ident" id="1909704">hash</span><span class="op" id="1909708">[</span><span class="ident" id="1909709">h</span><span class="op" id="1909710">]</span><span class="op" id="1909711">)</span><span class="op" id="1909712">,</span>&nbsp;<span class="ident" id="1909714">unsafe</span><span class="op" id="1909720">.</span><span class="ident" id="1909721">Pointer</span><span class="op" id="1909728">(</span><span class="ident" id="1909729">m</span><span class="op" id="1909730">)</span><span class="op" id="1909731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909734">unlock</span><span class="op" id="1909740">(</span><span class="op" id="1909741">&amp;</span><span class="ident" id="1909742">ifaceLock</span><span class="op" id="1909751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909754">if</span>&nbsp;<span class="ident" id="1909757">m</span><span class="op" id="1909758">.</span><span class="ident" id="1909759">bad</span>&nbsp;<span class="op" id="1909763">!=</span>&nbsp;<span class="num" id="1909766">0</span>&nbsp;<span class="op" id="1909768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909772">return</span>&nbsp;<span class="ident" id="1909779">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1909784">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909787">return</span>&nbsp;<span class="ident" id="1909794">m</span><br>
<span class="lineno"></span><span class="op" id="1909796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1909799">func</span>&nbsp;<span class="ident" id="1909804">typ2Itab</span><span class="op" id="1909812">(</span><span class="ident" id="1909813">t</span>&nbsp;<span class="op" id="1909815">*</span><span class="ident" id="1909816">_type</span><span class="op" id="1909821">,</span>&nbsp;<span class="ident" id="1909823">inter</span>&nbsp;<span class="op" id="1909829">*</span><span class="ident" id="1909830">interfacetype</span><span class="op" id="1909843">,</span>&nbsp;<span class="ident" id="1909845">cache</span>&nbsp;<span class="op" id="1909851">*</span><span class="op" id="1909852">*</span><span class="ident" id="1909853">itab</span><span class="op" id="1909857">)</span>&nbsp;<span class="op" id="1909859">*</span><span class="ident" id="1909860">itab</span>&nbsp;<span class="op" id="1909865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909868">tab</span>&nbsp;<span class="op" id="1909872">:=</span>&nbsp;<span class="ident" id="1909875">getitab</span><span class="op" id="1909882">(</span><span class="ident" id="1909883">inter</span><span class="op" id="1909888">,</span>&nbsp;<span class="ident" id="1909890">t</span><span class="op" id="1909891">,</span>&nbsp;<span class="builtintype" id="1909893">false</span><span class="op" id="1909898">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1909901">atomicstorep</span><span class="op" id="1909913">(</span><span class="ident" id="1909914">unsafe</span><span class="op" id="1909920">.</span><span class="ident" id="1909921">Pointer</span><span class="op" id="1909928">(</span><span class="ident" id="1909929">cache</span><span class="op" id="1909934">)</span><span class="op" id="1909935">,</span>&nbsp;<span class="ident" id="1909937">unsafe</span><span class="op" id="1909943">.</span><span class="ident" id="1909944">Pointer</span><span class="op" id="1909951">(</span><span class="ident" id="1909952">tab</span><span class="op" id="1909955">)</span><span class="op" id="1909956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1909959">return</span>&nbsp;<span class="ident" id="1909966">tab</span><br>
<span class="lineno"></span><span class="op" id="1909970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1909973">func</span>&nbsp;<span class="ident" id="1909978">convT2E</span><span class="op" id="1909985">(</span><span class="ident" id="1909986">t</span>&nbsp;<span class="op" id="1909988">*</span><span class="ident" id="1909989">_type</span><span class="op" id="1909994">,</span>&nbsp;<span class="ident" id="1909996">elem</span>&nbsp;<span class="ident" id="1910001">unsafe</span><span class="op" id="1910007">.</span><span class="ident" id="1910008">Pointer</span><span class="op" id="1910015">)</span>&nbsp;<span class="op" id="1910017">(</span><span class="ident" id="1910018">e</span>&nbsp;<span class="keyword" id="1910020">interface</span><span class="op" id="1910029">{</span><span class="op" id="1910030">}</span><span class="op" id="1910031">)</span>&nbsp;<span class="op" id="1910033">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910036">size</span>&nbsp;<span class="op" id="1910041">:=</span>&nbsp;<span class="builtintype" id="1910044">uintptr</span><span class="op" id="1910051">(</span><span class="ident" id="1910052">t</span><span class="op" id="1910053">.</span><span class="ident" id="1910054">size</span><span class="op" id="1910058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910061">ep</span>&nbsp;<span class="op" id="1910064">:=</span>&nbsp;<span class="op" id="1910067">(</span><span class="op" id="1910068">*</span><span class="ident" id="1910069">eface</span><span class="op" id="1910074">)</span><span class="op" id="1910075">(</span><span class="ident" id="1910076">unsafe</span><span class="op" id="1910082">.</span><span class="ident" id="1910083">Pointer</span><span class="op" id="1910090">(</span><span class="op" id="1910091">&amp;</span><span class="ident" id="1910092">e</span><span class="op" id="1910093">)</span><span class="op" id="1910094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1910097">if</span>&nbsp;<span class="ident" id="1910100">isDirectIface</span><span class="op" id="1910113">(</span><span class="ident" id="1910114">t</span><span class="op" id="1910115">)</span>&nbsp;<span class="op" id="1910117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910121">ep</span><span class="op" id="1910123">.</span><span class="ident" id="1910124">_type</span>&nbsp;<span class="op" id="1910130">=</span>&nbsp;<span class="ident" id="1910132">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910136">memmove</span><span class="op" id="1910143">(</span><span class="ident" id="1910144">unsafe</span><span class="op" id="1910150">.</span><span class="ident" id="1910151">Pointer</span><span class="op" id="1910158">(</span><span class="op" id="1910159">&amp;</span><span class="ident" id="1910160">ep</span><span class="op" id="1910162">.</span><span class="ident" id="1910163">data</span><span class="op" id="1910167">)</span><span class="op" id="1910168">,</span>&nbsp;<span class="ident" id="1910170">elem</span><span class="op" id="1910174">,</span>&nbsp;<span class="ident" id="1910176">size</span><span class="op" id="1910180">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1910183">}</span>&nbsp;<span class="keyword" id="1910185">else</span>&nbsp;<span class="op" id="1910190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910194">x</span>&nbsp;<span class="op" id="1910196">:=</span>&nbsp;<span class="ident" id="1910199">newobject</span><span class="op" id="1910208">(</span><span class="ident" id="1910209">t</span><span class="op" id="1910210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1910214">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1910279">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910355">memmove</span><span class="op" id="1910362">(</span><span class="ident" id="1910363">x</span><span class="op" id="1910364">,</span>&nbsp;<span class="ident" id="1910366">elem</span><span class="op" id="1910370">,</span>&nbsp;<span class="ident" id="1910372">size</span><span class="op" id="1910376">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910380">ep</span><span class="op" id="1910382">.</span><span class="ident" id="1910383">_type</span>&nbsp;<span class="op" id="1910389">=</span>&nbsp;<span class="ident" id="1910391">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910395">ep</span><span class="op" id="1910397">.</span><span class="ident" id="1910398">data</span>&nbsp;<span class="op" id="1910403">=</span>&nbsp;<span class="ident" id="1910405">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1910408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1910411">return</span><br>
<span class="lineno"></span><span class="op" id="1910418">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1910421">func</span>&nbsp;<span class="ident" id="1910426">convT2I</span><span class="op" id="1910433">(</span><span class="ident" id="1910434">t</span>&nbsp;<span class="op" id="1910436">*</span><span class="ident" id="1910437">_type</span><span class="op" id="1910442">,</span>&nbsp;<span class="ident" id="1910444">inter</span>&nbsp;<span class="op" id="1910450">*</span><span class="ident" id="1910451">interfacetype</span><span class="op" id="1910464">,</span>&nbsp;<span class="ident" id="1910466">cache</span>&nbsp;<span class="op" id="1910472">*</span><span class="op" id="1910473">*</span><span class="ident" id="1910474">itab</span><span class="op" id="1910478">,</span>&nbsp;<span class="ident" id="1910480">elem</span>&nbsp;<span class="ident" id="1910485">unsafe</span><span class="op" id="1910491">.</span><span class="ident" id="1910492">Pointer</span><span class="op" id="1910499">)</span>&nbsp;<span class="op" id="1910501">(</span><span class="ident" id="1910502">i</span>&nbsp;<span class="ident" id="1910504">fInterface</span><span class="op" id="1910514">)</span>&nbsp;<span class="op" id="1910516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910519">tab</span>&nbsp;<span class="op" id="1910523">:=</span>&nbsp;<span class="op" id="1910526">(</span><span class="op" id="1910527">*</span><span class="ident" id="1910528">itab</span><span class="op" id="1910532">)</span><span class="op" id="1910533">(</span><span class="ident" id="1910534">atomicloadp</span><span class="op" id="1910545">(</span><span class="ident" id="1910546">unsafe</span><span class="op" id="1910552">.</span><span class="ident" id="1910553">Pointer</span><span class="op" id="1910560">(</span><span class="ident" id="1910561">cache</span><span class="op" id="1910566">)</span><span class="op" id="1910567">)</span><span class="op" id="1910568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1910571">if</span>&nbsp;<span class="ident" id="1910574">tab</span>&nbsp;<span class="op" id="1910578">==</span>&nbsp;<span class="ident" id="1910581">nil</span>&nbsp;<span class="op" id="1910585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910589">tab</span>&nbsp;<span class="op" id="1910593">=</span>&nbsp;<span class="ident" id="1910595">getitab</span><span class="op" id="1910602">(</span><span class="ident" id="1910603">inter</span><span class="op" id="1910608">,</span>&nbsp;<span class="ident" id="1910610">t</span><span class="op" id="1910611">,</span>&nbsp;<span class="builtintype" id="1910613">false</span><span class="op" id="1910618">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910622">atomicstorep</span><span class="op" id="1910634">(</span><span class="ident" id="1910635">unsafe</span><span class="op" id="1910641">.</span><span class="ident" id="1910642">Pointer</span><span class="op" id="1910649">(</span><span class="ident" id="1910650">cache</span><span class="op" id="1910655">)</span><span class="op" id="1910656">,</span>&nbsp;<span class="ident" id="1910658">unsafe</span><span class="op" id="1910664">.</span><span class="ident" id="1910665">Pointer</span><span class="op" id="1910672">(</span><span class="ident" id="1910673">tab</span><span class="op" id="1910676">)</span><span class="op" id="1910677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1910680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910683">size</span>&nbsp;<span class="op" id="1910688">:=</span>&nbsp;<span class="builtintype" id="1910691">uintptr</span><span class="op" id="1910698">(</span><span class="ident" id="1910699">t</span><span class="op" id="1910700">.</span><span class="ident" id="1910701">size</span><span class="op" id="1910705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910708">pi</span>&nbsp;<span class="op" id="1910711">:=</span>&nbsp;<span class="op" id="1910714">(</span><span class="op" id="1910715">*</span><span class="ident" id="1910716">iface</span><span class="op" id="1910721">)</span><span class="op" id="1910722">(</span><span class="ident" id="1910723">unsafe</span><span class="op" id="1910729">.</span><span class="ident" id="1910730">Pointer</span><span class="op" id="1910737">(</span><span class="op" id="1910738">&amp;</span><span class="ident" id="1910739">i</span><span class="op" id="1910740">)</span><span class="op" id="1910741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1910744">if</span>&nbsp;<span class="ident" id="1910747">isDirectIface</span><span class="op" id="1910760">(</span><span class="ident" id="1910761">t</span><span class="op" id="1910762">)</span>&nbsp;<span class="op" id="1910764">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910768">pi</span><span class="op" id="1910770">.</span><span class="ident" id="1910771">tab</span>&nbsp;<span class="op" id="1910775">=</span>&nbsp;<span class="ident" id="1910777">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910783">memmove</span><span class="op" id="1910790">(</span><span class="ident" id="1910791">unsafe</span><span class="op" id="1910797">.</span><span class="ident" id="1910798">Pointer</span><span class="op" id="1910805">(</span><span class="op" id="1910806">&amp;</span><span class="ident" id="1910807">pi</span><span class="op" id="1910809">.</span><span class="ident" id="1910810">data</span><span class="op" id="1910814">)</span><span class="op" id="1910815">,</span>&nbsp;<span class="ident" id="1910817">elem</span><span class="op" id="1910821">,</span>&nbsp;<span class="ident" id="1910823">size</span><span class="op" id="1910827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1910830">}</span>&nbsp;<span class="keyword" id="1910832">else</span>&nbsp;<span class="op" id="1910837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910841">x</span>&nbsp;<span class="op" id="1910843">:=</span>&nbsp;<span class="ident" id="1910846">newobject</span><span class="op" id="1910855">(</span><span class="ident" id="1910856">t</span><span class="op" id="1910857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910861">memmove</span><span class="op" id="1910868">(</span><span class="ident" id="1910869">x</span><span class="op" id="1910870">,</span>&nbsp;<span class="ident" id="1910872">elem</span><span class="op" id="1910876">,</span>&nbsp;<span class="ident" id="1910878">size</span><span class="op" id="1910882">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910886">pi</span><span class="op" id="1910888">.</span><span class="ident" id="1910889">tab</span>&nbsp;<span class="op" id="1910893">=</span>&nbsp;<span class="ident" id="1910895">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1910901">pi</span><span class="op" id="1910903">.</span><span class="ident" id="1910904">data</span>&nbsp;<span class="op" id="1910909">=</span>&nbsp;<span class="ident" id="1910911">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1910914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1910917">return</span><br>
<span class="lineno"></span><span class="op" id="1910924">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1910927">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1911004">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1911078">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1911091">func</span>&nbsp;<span class="ident" id="1911096">assertI2T</span><span class="op" id="1911105">(</span><span class="ident" id="1911106">t</span>&nbsp;<span class="op" id="1911108">*</span><span class="ident" id="1911109">_type</span><span class="op" id="1911114">,</span>&nbsp;<span class="ident" id="1911116">i</span>&nbsp;<span class="ident" id="1911118">fInterface</span><span class="op" id="1911128">)</span>&nbsp;<span class="op" id="1911130">(</span><span class="ident" id="1911131">r</span>&nbsp;<span class="keyword" id="1911133">struct</span><span class="op" id="1911139">{</span><span class="op" id="1911140">}</span><span class="op" id="1911141">)</span>&nbsp;<span class="op" id="1911143">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911146">ip</span>&nbsp;<span class="op" id="1911149">:=</span>&nbsp;<span class="op" id="1911152">(</span><span class="op" id="1911153">*</span><span class="ident" id="1911154">iface</span><span class="op" id="1911159">)</span><span class="op" id="1911160">(</span><span class="ident" id="1911161">unsafe</span><span class="op" id="1911167">.</span><span class="ident" id="1911168">Pointer</span><span class="op" id="1911175">(</span><span class="op" id="1911176">&amp;</span><span class="ident" id="1911177">i</span><span class="op" id="1911178">)</span><span class="op" id="1911179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911182">tab</span>&nbsp;<span class="op" id="1911186">:=</span>&nbsp;<span class="ident" id="1911189">ip</span><span class="op" id="1911191">.</span><span class="ident" id="1911192">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1911197">if</span>&nbsp;<span class="ident" id="1911200">tab</span>&nbsp;<span class="op" id="1911204">==</span>&nbsp;<span class="ident" id="1911207">nil</span>&nbsp;<span class="op" id="1911211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1911215">panic</span><span class="op" id="1911220">(</span><span class="op" id="1911221">&amp;</span><span class="ident" id="1911222">TypeAssertionError</span><span class="op" id="1911240">{</span><span class="string" id="1911241">&#34;&#34;</span><span class="op" id="1911243">,</span>&nbsp;<span class="string" id="1911245">&#34;&#34;</span><span class="op" id="1911247">,</span>&nbsp;<span class="op" id="1911249">*</span><span class="ident" id="1911250">t</span><span class="op" id="1911251">.</span><span class="ident" id="1911252">_string</span><span class="op" id="1911259">,</span>&nbsp;<span class="string" id="1911261">&#34;&#34;</span><span class="op" id="1911263">}</span><span class="op" id="1911264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911267">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1911270">if</span>&nbsp;<span class="ident" id="1911273">tab</span><span class="op" id="1911276">.</span><span class="ident" id="1911277">_type</span>&nbsp;<span class="op" id="1911283">!=</span>&nbsp;<span class="ident" id="1911286">t</span>&nbsp;<span class="op" id="1911288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1911292">panic</span><span class="op" id="1911297">(</span><span class="op" id="1911298">&amp;</span><span class="ident" id="1911299">TypeAssertionError</span><span class="op" id="1911317">{</span><span class="op" id="1911318">*</span><span class="ident" id="1911319">tab</span><span class="op" id="1911322">.</span><span class="ident" id="1911323">inter</span><span class="op" id="1911328">.</span><span class="ident" id="1911329">typ</span><span class="op" id="1911332">.</span><span class="ident" id="1911333">_string</span><span class="op" id="1911340">,</span>&nbsp;<span class="op" id="1911342">*</span><span class="ident" id="1911343">tab</span><span class="op" id="1911346">.</span><span class="ident" id="1911347">_type</span><span class="op" id="1911352">.</span><span class="ident" id="1911353">_string</span><span class="op" id="1911360">,</span>&nbsp;<span class="op" id="1911362">*</span><span class="ident" id="1911363">t</span><span class="op" id="1911364">.</span><span class="ident" id="1911365">_string</span><span class="op" id="1911372">,</span>&nbsp;<span class="string" id="1911374">&#34;&#34;</span><span class="op" id="1911376">}</span><span class="op" id="1911377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911383">size</span>&nbsp;<span class="op" id="1911388">:=</span>&nbsp;<span class="builtintype" id="1911391">uintptr</span><span class="op" id="1911398">(</span><span class="ident" id="1911399">t</span><span class="op" id="1911400">.</span><span class="ident" id="1911401">size</span><span class="op" id="1911405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1911408">if</span>&nbsp;<span class="ident" id="1911411">isDirectIface</span><span class="op" id="1911424">(</span><span class="ident" id="1911425">t</span><span class="op" id="1911426">)</span>&nbsp;<span class="op" id="1911428">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911432">memmove</span><span class="op" id="1911439">(</span><span class="ident" id="1911440">unsafe</span><span class="op" id="1911446">.</span><span class="ident" id="1911447">Pointer</span><span class="op" id="1911454">(</span><span class="op" id="1911455">&amp;</span><span class="ident" id="1911456">r</span><span class="op" id="1911457">)</span><span class="op" id="1911458">,</span>&nbsp;<span class="ident" id="1911460">unsafe</span><span class="op" id="1911466">.</span><span class="ident" id="1911467">Pointer</span><span class="op" id="1911474">(</span><span class="op" id="1911475">&amp;</span><span class="ident" id="1911476">ip</span><span class="op" id="1911478">.</span><span class="ident" id="1911479">data</span><span class="op" id="1911483">)</span><span class="op" id="1911484">,</span>&nbsp;<span class="ident" id="1911486">size</span><span class="op" id="1911490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911493">}</span>&nbsp;<span class="keyword" id="1911495">else</span>&nbsp;<span class="op" id="1911500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911504">memmove</span><span class="op" id="1911511">(</span><span class="ident" id="1911512">unsafe</span><span class="op" id="1911518">.</span><span class="ident" id="1911519">Pointer</span><span class="op" id="1911526">(</span><span class="op" id="1911527">&amp;</span><span class="ident" id="1911528">r</span><span class="op" id="1911529">)</span><span class="op" id="1911530">,</span>&nbsp;<span class="ident" id="1911532">ip</span><span class="op" id="1911534">.</span><span class="ident" id="1911535">data</span><span class="op" id="1911539">,</span>&nbsp;<span class="ident" id="1911541">size</span><span class="op" id="1911545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1911551">return</span><br>
<span class="lineno">190</span><span class="op" id="1911558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1911561">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1911574">func</span>&nbsp;<span class="ident" id="1911579">assertI2T2</span><span class="op" id="1911589">(</span><span class="ident" id="1911590">t</span>&nbsp;<span class="op" id="1911592">*</span><span class="ident" id="1911593">_type</span><span class="op" id="1911598">,</span>&nbsp;<span class="ident" id="1911600">i</span>&nbsp;<span class="ident" id="1911602">fInterface</span><span class="op" id="1911612">)</span>&nbsp;<span class="op" id="1911614">(</span><span class="ident" id="1911615">r</span>&nbsp;<span class="builtintype" id="1911617">byte</span><span class="op" id="1911621">)</span>&nbsp;<span class="op" id="1911623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911626">ip</span>&nbsp;<span class="op" id="1911629">:=</span>&nbsp;<span class="op" id="1911632">(</span><span class="op" id="1911633">*</span><span class="ident" id="1911634">iface</span><span class="op" id="1911639">)</span><span class="op" id="1911640">(</span><span class="ident" id="1911641">unsafe</span><span class="op" id="1911647">.</span><span class="ident" id="1911648">Pointer</span><span class="op" id="1911655">(</span><span class="op" id="1911656">&amp;</span><span class="ident" id="1911657">i</span><span class="op" id="1911658">)</span><span class="op" id="1911659">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911662">size</span>&nbsp;<span class="op" id="1911667">:=</span>&nbsp;<span class="builtintype" id="1911670">uintptr</span><span class="op" id="1911677">(</span><span class="ident" id="1911678">t</span><span class="op" id="1911679">.</span><span class="ident" id="1911680">size</span><span class="op" id="1911684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911687">ok</span>&nbsp;<span class="op" id="1911690">:=</span>&nbsp;<span class="op" id="1911693">(</span><span class="op" id="1911694">*</span><span class="builtintype" id="1911695">bool</span><span class="op" id="1911699">)</span><span class="op" id="1911700">(</span><span class="ident" id="1911701">add</span><span class="op" id="1911704">(</span><span class="ident" id="1911705">unsafe</span><span class="op" id="1911711">.</span><span class="ident" id="1911712">Pointer</span><span class="op" id="1911719">(</span><span class="op" id="1911720">&amp;</span><span class="ident" id="1911721">r</span><span class="op" id="1911722">)</span><span class="op" id="1911723">,</span>&nbsp;<span class="ident" id="1911725">size</span><span class="op" id="1911729">)</span><span class="op" id="1911730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911733">tab</span>&nbsp;<span class="op" id="1911737">:=</span>&nbsp;<span class="ident" id="1911740">ip</span><span class="op" id="1911742">.</span><span class="ident" id="1911743">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1911748">if</span>&nbsp;<span class="ident" id="1911751">tab</span>&nbsp;<span class="op" id="1911755">==</span>&nbsp;<span class="ident" id="1911758">nil</span>&nbsp;<span class="op" id="1911762">||</span>&nbsp;<span class="ident" id="1911765">tab</span><span class="op" id="1911768">.</span><span class="ident" id="1911769">_type</span>&nbsp;<span class="op" id="1911775">!=</span>&nbsp;<span class="ident" id="1911778">t</span>&nbsp;<span class="op" id="1911780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911784">*</span><span class="ident" id="1911785">ok</span>&nbsp;<span class="op" id="1911788">=</span>&nbsp;<span class="builtintype" id="1911790">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911798">memclr</span><span class="op" id="1911804">(</span><span class="ident" id="1911805">unsafe</span><span class="op" id="1911811">.</span><span class="ident" id="1911812">Pointer</span><span class="op" id="1911819">(</span><span class="op" id="1911820">&amp;</span><span class="ident" id="1911821">r</span><span class="op" id="1911822">)</span><span class="op" id="1911823">,</span>&nbsp;<span class="ident" id="1911825">size</span><span class="op" id="1911829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1911833">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911844">*</span><span class="ident" id="1911845">ok</span>&nbsp;<span class="op" id="1911848">=</span>&nbsp;<span class="builtintype" id="1911850">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1911856">if</span>&nbsp;<span class="ident" id="1911859">isDirectIface</span><span class="op" id="1911872">(</span><span class="ident" id="1911873">t</span><span class="op" id="1911874">)</span>&nbsp;<span class="op" id="1911876">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911880">memmove</span><span class="op" id="1911887">(</span><span class="ident" id="1911888">unsafe</span><span class="op" id="1911894">.</span><span class="ident" id="1911895">Pointer</span><span class="op" id="1911902">(</span><span class="op" id="1911903">&amp;</span><span class="ident" id="1911904">r</span><span class="op" id="1911905">)</span><span class="op" id="1911906">,</span>&nbsp;<span class="ident" id="1911908">unsafe</span><span class="op" id="1911914">.</span><span class="ident" id="1911915">Pointer</span><span class="op" id="1911922">(</span><span class="op" id="1911923">&amp;</span><span class="ident" id="1911924">ip</span><span class="op" id="1911926">.</span><span class="ident" id="1911927">data</span><span class="op" id="1911931">)</span><span class="op" id="1911932">,</span>&nbsp;<span class="ident" id="1911934">size</span><span class="op" id="1911938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911941">}</span>&nbsp;<span class="keyword" id="1911943">else</span>&nbsp;<span class="op" id="1911948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1911952">memmove</span><span class="op" id="1911959">(</span><span class="ident" id="1911960">unsafe</span><span class="op" id="1911966">.</span><span class="ident" id="1911967">Pointer</span><span class="op" id="1911974">(</span><span class="op" id="1911975">&amp;</span><span class="ident" id="1911976">r</span><span class="op" id="1911977">)</span><span class="op" id="1911978">,</span>&nbsp;<span class="ident" id="1911980">ip</span><span class="op" id="1911982">.</span><span class="ident" id="1911983">data</span><span class="op" id="1911987">,</span>&nbsp;<span class="ident" id="1911989">size</span><span class="op" id="1911993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1911996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1911999">return</span><br>
<span class="lineno">210</span><span class="op" id="1912006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1912009">func</span>&nbsp;<span class="ident" id="1912014">assertI2TOK</span><span class="op" id="1912025">(</span><span class="ident" id="1912026">t</span>&nbsp;<span class="op" id="1912028">*</span><span class="ident" id="1912029">_type</span><span class="op" id="1912034">,</span>&nbsp;<span class="ident" id="1912036">i</span>&nbsp;<span class="ident" id="1912038">fInterface</span><span class="op" id="1912048">)</span>&nbsp;<span class="builtintype" id="1912050">bool</span>&nbsp;<span class="op" id="1912055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912058">ip</span>&nbsp;<span class="op" id="1912061">:=</span>&nbsp;<span class="op" id="1912064">(</span><span class="op" id="1912065">*</span><span class="ident" id="1912066">iface</span><span class="op" id="1912071">)</span><span class="op" id="1912072">(</span><span class="ident" id="1912073">unsafe</span><span class="op" id="1912079">.</span><span class="ident" id="1912080">Pointer</span><span class="op" id="1912087">(</span><span class="op" id="1912088">&amp;</span><span class="ident" id="1912089">i</span><span class="op" id="1912090">)</span><span class="op" id="1912091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912094">tab</span>&nbsp;<span class="op" id="1912098">:=</span>&nbsp;<span class="ident" id="1912101">ip</span><span class="op" id="1912103">.</span><span class="ident" id="1912104">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1912109">return</span>&nbsp;<span class="ident" id="1912116">tab</span>&nbsp;<span class="op" id="1912120">!=</span>&nbsp;<span class="ident" id="1912123">nil</span>&nbsp;<span class="op" id="1912127">&amp;&amp;</span>&nbsp;<span class="ident" id="1912130">tab</span><span class="op" id="1912133">.</span><span class="ident" id="1912134">_type</span>&nbsp;<span class="op" id="1912140">==</span>&nbsp;<span class="ident" id="1912143">t</span><br>
<span class="lineno"></span><span class="op" id="1912145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1912148">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1912161">func</span>&nbsp;<span class="ident" id="1912166">assertE2T</span><span class="op" id="1912175">(</span><span class="ident" id="1912176">t</span>&nbsp;<span class="op" id="1912178">*</span><span class="ident" id="1912179">_type</span><span class="op" id="1912184">,</span>&nbsp;<span class="ident" id="1912186">e</span>&nbsp;<span class="keyword" id="1912188">interface</span><span class="op" id="1912197">{</span><span class="op" id="1912198">}</span><span class="op" id="1912199">)</span>&nbsp;<span class="op" id="1912201">(</span><span class="ident" id="1912202">r</span>&nbsp;<span class="keyword" id="1912204">struct</span><span class="op" id="1912210">{</span><span class="op" id="1912211">}</span><span class="op" id="1912212">)</span>&nbsp;<span class="op" id="1912214">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912217">ep</span>&nbsp;<span class="op" id="1912220">:=</span>&nbsp;<span class="op" id="1912223">(</span><span class="op" id="1912224">*</span><span class="ident" id="1912225">eface</span><span class="op" id="1912230">)</span><span class="op" id="1912231">(</span><span class="ident" id="1912232">unsafe</span><span class="op" id="1912238">.</span><span class="ident" id="1912239">Pointer</span><span class="op" id="1912246">(</span><span class="op" id="1912247">&amp;</span><span class="ident" id="1912248">e</span><span class="op" id="1912249">)</span><span class="op" id="1912250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1912253">if</span>&nbsp;<span class="ident" id="1912256">ep</span><span class="op" id="1912258">.</span><span class="ident" id="1912259">_type</span>&nbsp;<span class="op" id="1912265">==</span>&nbsp;<span class="ident" id="1912268">nil</span>&nbsp;<span class="op" id="1912272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1912276">panic</span><span class="op" id="1912281">(</span><span class="op" id="1912282">&amp;</span><span class="ident" id="1912283">TypeAssertionError</span><span class="op" id="1912301">{</span><span class="string" id="1912302">&#34;&#34;</span><span class="op" id="1912304">,</span>&nbsp;<span class="string" id="1912306">&#34;&#34;</span><span class="op" id="1912308">,</span>&nbsp;<span class="op" id="1912310">*</span><span class="ident" id="1912311">t</span><span class="op" id="1912312">.</span><span class="ident" id="1912313">_string</span><span class="op" id="1912320">,</span>&nbsp;<span class="string" id="1912322">&#34;&#34;</span><span class="op" id="1912324">}</span><span class="op" id="1912325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1912328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1912331">if</span>&nbsp;<span class="ident" id="1912334">ep</span><span class="op" id="1912336">.</span><span class="ident" id="1912337">_type</span>&nbsp;<span class="op" id="1912343">!=</span>&nbsp;<span class="ident" id="1912346">t</span>&nbsp;<span class="op" id="1912348">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1912352">panic</span><span class="op" id="1912357">(</span><span class="op" id="1912358">&amp;</span><span class="ident" id="1912359">TypeAssertionError</span><span class="op" id="1912377">{</span><span class="string" id="1912378">&#34;&#34;</span><span class="op" id="1912380">,</span>&nbsp;<span class="op" id="1912382">*</span><span class="ident" id="1912383">ep</span><span class="op" id="1912385">.</span><span class="ident" id="1912386">_type</span><span class="op" id="1912391">.</span><span class="ident" id="1912392">_string</span><span class="op" id="1912399">,</span>&nbsp;<span class="op" id="1912401">*</span><span class="ident" id="1912402">t</span><span class="op" id="1912403">.</span><span class="ident" id="1912404">_string</span><span class="op" id="1912411">,</span>&nbsp;<span class="string" id="1912413">&#34;&#34;</span><span class="op" id="1912415">}</span><span class="op" id="1912416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1912419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912422">size</span>&nbsp;<span class="op" id="1912427">:=</span>&nbsp;<span class="builtintype" id="1912430">uintptr</span><span class="op" id="1912437">(</span><span class="ident" id="1912438">t</span><span class="op" id="1912439">.</span><span class="ident" id="1912440">size</span><span class="op" id="1912444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1912447">if</span>&nbsp;<span class="ident" id="1912450">isDirectIface</span><span class="op" id="1912463">(</span><span class="ident" id="1912464">t</span><span class="op" id="1912465">)</span>&nbsp;<span class="op" id="1912467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912471">memmove</span><span class="op" id="1912478">(</span><span class="ident" id="1912479">unsafe</span><span class="op" id="1912485">.</span><span class="ident" id="1912486">Pointer</span><span class="op" id="1912493">(</span><span class="op" id="1912494">&amp;</span><span class="ident" id="1912495">r</span><span class="op" id="1912496">)</span><span class="op" id="1912497">,</span>&nbsp;<span class="ident" id="1912499">unsafe</span><span class="op" id="1912505">.</span><span class="ident" id="1912506">Pointer</span><span class="op" id="1912513">(</span><span class="op" id="1912514">&amp;</span><span class="ident" id="1912515">ep</span><span class="op" id="1912517">.</span><span class="ident" id="1912518">data</span><span class="op" id="1912522">)</span><span class="op" id="1912523">,</span>&nbsp;<span class="ident" id="1912525">size</span><span class="op" id="1912529">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1912532">}</span>&nbsp;<span class="keyword" id="1912534">else</span>&nbsp;<span class="op" id="1912539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912543">memmove</span><span class="op" id="1912550">(</span><span class="ident" id="1912551">unsafe</span><span class="op" id="1912557">.</span><span class="ident" id="1912558">Pointer</span><span class="op" id="1912565">(</span><span class="op" id="1912566">&amp;</span><span class="ident" id="1912567">r</span><span class="op" id="1912568">)</span><span class="op" id="1912569">,</span>&nbsp;<span class="ident" id="1912571">ep</span><span class="op" id="1912573">.</span><span class="ident" id="1912574">data</span><span class="op" id="1912578">,</span>&nbsp;<span class="ident" id="1912580">size</span><span class="op" id="1912584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1912587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1912590">return</span><br>
<span class="lineno"></span><span class="op" id="1912597">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1912600">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1912613">func</span>&nbsp;<span class="ident" id="1912618">assertE2T2</span><span class="op" id="1912628">(</span><span class="ident" id="1912629">t</span>&nbsp;<span class="op" id="1912631">*</span><span class="ident" id="1912632">_type</span><span class="op" id="1912637">,</span>&nbsp;<span class="ident" id="1912639">e</span>&nbsp;<span class="keyword" id="1912641">interface</span><span class="op" id="1912650">{</span><span class="op" id="1912651">}</span><span class="op" id="1912652">)</span>&nbsp;<span class="op" id="1912654">(</span><span class="ident" id="1912655">r</span>&nbsp;<span class="builtintype" id="1912657">byte</span><span class="op" id="1912661">)</span>&nbsp;<span class="op" id="1912663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912666">ep</span>&nbsp;<span class="op" id="1912669">:=</span>&nbsp;<span class="op" id="1912672">(</span><span class="op" id="1912673">*</span><span class="ident" id="1912674">eface</span><span class="op" id="1912679">)</span><span class="op" id="1912680">(</span><span class="ident" id="1912681">unsafe</span><span class="op" id="1912687">.</span><span class="ident" id="1912688">Pointer</span><span class="op" id="1912695">(</span><span class="op" id="1912696">&amp;</span><span class="ident" id="1912697">e</span><span class="op" id="1912698">)</span><span class="op" id="1912699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912702">size</span>&nbsp;<span class="op" id="1912707">:=</span>&nbsp;<span class="builtintype" id="1912710">uintptr</span><span class="op" id="1912717">(</span><span class="ident" id="1912718">t</span><span class="op" id="1912719">.</span><span class="ident" id="1912720">size</span><span class="op" id="1912724">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912727">ok</span>&nbsp;<span class="op" id="1912730">:=</span>&nbsp;<span class="op" id="1912733">(</span><span class="op" id="1912734">*</span><span class="builtintype" id="1912735">bool</span><span class="op" id="1912739">)</span><span class="op" id="1912740">(</span><span class="ident" id="1912741">add</span><span class="op" id="1912744">(</span><span class="ident" id="1912745">unsafe</span><span class="op" id="1912751">.</span><span class="ident" id="1912752">Pointer</span><span class="op" id="1912759">(</span><span class="op" id="1912760">&amp;</span><span class="ident" id="1912761">r</span><span class="op" id="1912762">)</span><span class="op" id="1912763">,</span>&nbsp;<span class="ident" id="1912765">size</span><span class="op" id="1912769">)</span><span class="op" id="1912770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1912773">if</span>&nbsp;<span class="ident" id="1912776">ep</span><span class="op" id="1912778">.</span><span class="ident" id="1912779">_type</span>&nbsp;<span class="op" id="1912785">!=</span>&nbsp;<span class="ident" id="1912788">t</span>&nbsp;<span class="op" id="1912790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1912794">*</span><span class="ident" id="1912795">ok</span>&nbsp;<span class="op" id="1912798">=</span>&nbsp;<span class="builtintype" id="1912800">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912808">memclr</span><span class="op" id="1912814">(</span><span class="ident" id="1912815">unsafe</span><span class="op" id="1912821">.</span><span class="ident" id="1912822">Pointer</span><span class="op" id="1912829">(</span><span class="op" id="1912830">&amp;</span><span class="ident" id="1912831">r</span><span class="op" id="1912832">)</span><span class="op" id="1912833">,</span>&nbsp;<span class="ident" id="1912835">size</span><span class="op" id="1912839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1912843">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1912851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1912854">*</span><span class="ident" id="1912855">ok</span>&nbsp;<span class="op" id="1912858">=</span>&nbsp;<span class="builtintype" id="1912860">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1912866">if</span>&nbsp;<span class="ident" id="1912869">isDirectIface</span><span class="op" id="1912882">(</span><span class="ident" id="1912883">t</span><span class="op" id="1912884">)</span>&nbsp;<span class="op" id="1912886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912890">memmove</span><span class="op" id="1912897">(</span><span class="ident" id="1912898">unsafe</span><span class="op" id="1912904">.</span><span class="ident" id="1912905">Pointer</span><span class="op" id="1912912">(</span><span class="op" id="1912913">&amp;</span><span class="ident" id="1912914">r</span><span class="op" id="1912915">)</span><span class="op" id="1912916">,</span>&nbsp;<span class="ident" id="1912918">unsafe</span><span class="op" id="1912924">.</span><span class="ident" id="1912925">Pointer</span><span class="op" id="1912932">(</span><span class="op" id="1912933">&amp;</span><span class="ident" id="1912934">ep</span><span class="op" id="1912936">.</span><span class="ident" id="1912937">data</span><span class="op" id="1912941">)</span><span class="op" id="1912942">,</span>&nbsp;<span class="ident" id="1912944">size</span><span class="op" id="1912948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1912951">}</span>&nbsp;<span class="keyword" id="1912953">else</span>&nbsp;<span class="op" id="1912958">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1912962">memmove</span><span class="op" id="1912969">(</span><span class="ident" id="1912970">unsafe</span><span class="op" id="1912976">.</span><span class="ident" id="1912977">Pointer</span><span class="op" id="1912984">(</span><span class="op" id="1912985">&amp;</span><span class="ident" id="1912986">r</span><span class="op" id="1912987">)</span><span class="op" id="1912988">,</span>&nbsp;<span class="ident" id="1912990">ep</span><span class="op" id="1912992">.</span><span class="ident" id="1912993">data</span><span class="op" id="1912997">,</span>&nbsp;<span class="ident" id="1912999">size</span><span class="op" id="1913003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1913006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913009">return</span><br>
<span class="lineno"></span><span class="op" id="1913016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1913019">func</span>&nbsp;<span class="ident" id="1913024">assertE2TOK</span><span class="op" id="1913035">(</span><span class="ident" id="1913036">t</span>&nbsp;<span class="op" id="1913038">*</span><span class="ident" id="1913039">_type</span><span class="op" id="1913044">,</span>&nbsp;<span class="ident" id="1913046">e</span>&nbsp;<span class="keyword" id="1913048">interface</span><span class="op" id="1913057">{</span><span class="op" id="1913058">}</span><span class="op" id="1913059">)</span>&nbsp;<span class="builtintype" id="1913061">bool</span>&nbsp;<span class="op" id="1913066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913069">ep</span>&nbsp;<span class="op" id="1913072">:=</span>&nbsp;<span class="op" id="1913075">(</span><span class="op" id="1913076">*</span><span class="ident" id="1913077">eface</span><span class="op" id="1913082">)</span><span class="op" id="1913083">(</span><span class="ident" id="1913084">unsafe</span><span class="op" id="1913090">.</span><span class="ident" id="1913091">Pointer</span><span class="op" id="1913098">(</span><span class="op" id="1913099">&amp;</span><span class="ident" id="1913100">e</span><span class="op" id="1913101">)</span><span class="op" id="1913102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913105">return</span>&nbsp;<span class="ident" id="1913112">t</span>&nbsp;<span class="op" id="1913114">==</span>&nbsp;<span class="ident" id="1913117">ep</span><span class="op" id="1913119">.</span><span class="ident" id="1913120">_type</span><br>
<span class="lineno"></span><span class="op" id="1913126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1913129">func</span>&nbsp;<span class="ident" id="1913134">convI2E</span><span class="op" id="1913141">(</span><span class="ident" id="1913142">i</span>&nbsp;<span class="ident" id="1913144">fInterface</span><span class="op" id="1913154">)</span>&nbsp;<span class="op" id="1913156">(</span><span class="ident" id="1913157">r</span>&nbsp;<span class="keyword" id="1913159">interface</span><span class="op" id="1913168">{</span><span class="op" id="1913169">}</span><span class="op" id="1913170">)</span>&nbsp;<span class="op" id="1913172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913175">ip</span>&nbsp;<span class="op" id="1913178">:=</span>&nbsp;<span class="op" id="1913181">(</span><span class="op" id="1913182">*</span><span class="ident" id="1913183">iface</span><span class="op" id="1913188">)</span><span class="op" id="1913189">(</span><span class="ident" id="1913190">unsafe</span><span class="op" id="1913196">.</span><span class="ident" id="1913197">Pointer</span><span class="op" id="1913204">(</span><span class="op" id="1913205">&amp;</span><span class="ident" id="1913206">i</span><span class="op" id="1913207">)</span><span class="op" id="1913208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913211">tab</span>&nbsp;<span class="op" id="1913215">:=</span>&nbsp;<span class="ident" id="1913218">ip</span><span class="op" id="1913220">.</span><span class="ident" id="1913221">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913226">if</span>&nbsp;<span class="ident" id="1913229">tab</span>&nbsp;<span class="op" id="1913233">==</span>&nbsp;<span class="ident" id="1913236">nil</span>&nbsp;<span class="op" id="1913240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913244">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1913252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913255">rp</span>&nbsp;<span class="op" id="1913258">:=</span>&nbsp;<span class="op" id="1913261">(</span><span class="op" id="1913262">*</span><span class="ident" id="1913263">eface</span><span class="op" id="1913268">)</span><span class="op" id="1913269">(</span><span class="ident" id="1913270">unsafe</span><span class="op" id="1913276">.</span><span class="ident" id="1913277">Pointer</span><span class="op" id="1913284">(</span><span class="op" id="1913285">&amp;</span><span class="ident" id="1913286">r</span><span class="op" id="1913287">)</span><span class="op" id="1913288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913291">rp</span><span class="op" id="1913293">.</span><span class="ident" id="1913294">_type</span>&nbsp;<span class="op" id="1913300">=</span>&nbsp;<span class="ident" id="1913302">tab</span><span class="op" id="1913305">.</span><span class="ident" id="1913306">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913313">rp</span><span class="op" id="1913315">.</span><span class="ident" id="1913316">data</span>&nbsp;<span class="op" id="1913321">=</span>&nbsp;<span class="ident" id="1913323">ip</span><span class="op" id="1913325">.</span><span class="ident" id="1913326">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913332">return</span><br>
<span class="lineno">270</span><span class="op" id="1913339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1913342">func</span>&nbsp;<span class="ident" id="1913347">assertI2E</span><span class="op" id="1913356">(</span><span class="ident" id="1913357">inter</span>&nbsp;<span class="op" id="1913363">*</span><span class="ident" id="1913364">interfacetype</span><span class="op" id="1913377">,</span>&nbsp;<span class="ident" id="1913379">i</span>&nbsp;<span class="ident" id="1913381">fInterface</span><span class="op" id="1913391">)</span>&nbsp;<span class="op" id="1913393">(</span><span class="ident" id="1913394">r</span>&nbsp;<span class="keyword" id="1913396">interface</span><span class="op" id="1913405">{</span><span class="op" id="1913406">}</span><span class="op" id="1913407">)</span>&nbsp;<span class="op" id="1913409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913412">ip</span>&nbsp;<span class="op" id="1913415">:=</span>&nbsp;<span class="op" id="1913418">(</span><span class="op" id="1913419">*</span><span class="ident" id="1913420">iface</span><span class="op" id="1913425">)</span><span class="op" id="1913426">(</span><span class="ident" id="1913427">unsafe</span><span class="op" id="1913433">.</span><span class="ident" id="1913434">Pointer</span><span class="op" id="1913441">(</span><span class="op" id="1913442">&amp;</span><span class="ident" id="1913443">i</span><span class="op" id="1913444">)</span><span class="op" id="1913445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913448">tab</span>&nbsp;<span class="op" id="1913452">:=</span>&nbsp;<span class="ident" id="1913455">ip</span><span class="op" id="1913457">.</span><span class="ident" id="1913458">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913463">if</span>&nbsp;<span class="ident" id="1913466">tab</span>&nbsp;<span class="op" id="1913470">==</span>&nbsp;<span class="ident" id="1913473">nil</span>&nbsp;<span class="op" id="1913477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1913481">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1913540">panic</span><span class="op" id="1913545">(</span><span class="op" id="1913546">&amp;</span><span class="ident" id="1913547">TypeAssertionError</span><span class="op" id="1913565">{</span><span class="string" id="1913566">&#34;&#34;</span><span class="op" id="1913568">,</span>&nbsp;<span class="string" id="1913570">&#34;&#34;</span><span class="op" id="1913572">,</span>&nbsp;<span class="op" id="1913574">*</span><span class="ident" id="1913575">inter</span><span class="op" id="1913580">.</span><span class="ident" id="1913581">typ</span><span class="op" id="1913584">.</span><span class="ident" id="1913585">_string</span><span class="op" id="1913592">,</span>&nbsp;<span class="string" id="1913594">&#34;&#34;</span><span class="op" id="1913596">}</span><span class="op" id="1913597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1913600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913603">rp</span>&nbsp;<span class="op" id="1913606">:=</span>&nbsp;<span class="op" id="1913609">(</span><span class="op" id="1913610">*</span><span class="ident" id="1913611">eface</span><span class="op" id="1913616">)</span><span class="op" id="1913617">(</span><span class="ident" id="1913618">unsafe</span><span class="op" id="1913624">.</span><span class="ident" id="1913625">Pointer</span><span class="op" id="1913632">(</span><span class="op" id="1913633">&amp;</span><span class="ident" id="1913634">r</span><span class="op" id="1913635">)</span><span class="op" id="1913636">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913639">rp</span><span class="op" id="1913641">.</span><span class="ident" id="1913642">_type</span>&nbsp;<span class="op" id="1913648">=</span>&nbsp;<span class="ident" id="1913650">tab</span><span class="op" id="1913653">.</span><span class="ident" id="1913654">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913661">rp</span><span class="op" id="1913663">.</span><span class="ident" id="1913664">data</span>&nbsp;<span class="op" id="1913669">=</span>&nbsp;<span class="ident" id="1913671">ip</span><span class="op" id="1913673">.</span><span class="ident" id="1913674">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913680">return</span><br>
<span class="lineno"></span><span class="op" id="1913687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1913690">func</span>&nbsp;<span class="ident" id="1913695">assertI2E2</span><span class="op" id="1913705">(</span><span class="ident" id="1913706">inter</span>&nbsp;<span class="op" id="1913712">*</span><span class="ident" id="1913713">interfacetype</span><span class="op" id="1913726">,</span>&nbsp;<span class="ident" id="1913728">i</span>&nbsp;<span class="ident" id="1913730">fInterface</span><span class="op" id="1913740">)</span>&nbsp;<span class="op" id="1913742">(</span><span class="ident" id="1913743">r</span>&nbsp;<span class="keyword" id="1913745">interface</span><span class="op" id="1913754">{</span><span class="op" id="1913755">}</span><span class="op" id="1913756">,</span>&nbsp;<span class="ident" id="1913758">ok</span>&nbsp;<span class="builtintype" id="1913761">bool</span><span class="op" id="1913765">)</span>&nbsp;<span class="op" id="1913767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913770">ip</span>&nbsp;<span class="op" id="1913773">:=</span>&nbsp;<span class="op" id="1913776">(</span><span class="op" id="1913777">*</span><span class="ident" id="1913778">iface</span><span class="op" id="1913783">)</span><span class="op" id="1913784">(</span><span class="ident" id="1913785">unsafe</span><span class="op" id="1913791">.</span><span class="ident" id="1913792">Pointer</span><span class="op" id="1913799">(</span><span class="op" id="1913800">&amp;</span><span class="ident" id="1913801">i</span><span class="op" id="1913802">)</span><span class="op" id="1913803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913806">tab</span>&nbsp;<span class="op" id="1913810">:=</span>&nbsp;<span class="ident" id="1913813">ip</span><span class="op" id="1913815">.</span><span class="ident" id="1913816">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913821">if</span>&nbsp;<span class="ident" id="1913824">tab</span>&nbsp;<span class="op" id="1913828">==</span>&nbsp;<span class="ident" id="1913831">nil</span>&nbsp;<span class="op" id="1913835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913839">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1913847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913850">rp</span>&nbsp;<span class="op" id="1913853">:=</span>&nbsp;<span class="op" id="1913856">(</span><span class="op" id="1913857">*</span><span class="ident" id="1913858">eface</span><span class="op" id="1913863">)</span><span class="op" id="1913864">(</span><span class="ident" id="1913865">unsafe</span><span class="op" id="1913871">.</span><span class="ident" id="1913872">Pointer</span><span class="op" id="1913879">(</span><span class="op" id="1913880">&amp;</span><span class="ident" id="1913881">r</span><span class="op" id="1913882">)</span><span class="op" id="1913883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913886">rp</span><span class="op" id="1913888">.</span><span class="ident" id="1913889">_type</span>&nbsp;<span class="op" id="1913895">=</span>&nbsp;<span class="ident" id="1913897">tab</span><span class="op" id="1913900">.</span><span class="ident" id="1913901">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913908">rp</span><span class="op" id="1913910">.</span><span class="ident" id="1913911">data</span>&nbsp;<span class="op" id="1913916">=</span>&nbsp;<span class="ident" id="1913918">ip</span><span class="op" id="1913920">.</span><span class="ident" id="1913921">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1913927">ok</span>&nbsp;<span class="op" id="1913930">=</span>&nbsp;<span class="builtintype" id="1913932">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1913938">return</span><br>
<span class="lineno"></span><span class="op" id="1913945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1913948">func</span>&nbsp;<span class="ident" id="1913953">convI2I</span><span class="op" id="1913960">(</span><span class="ident" id="1913961">inter</span>&nbsp;<span class="op" id="1913967">*</span><span class="ident" id="1913968">interfacetype</span><span class="op" id="1913981">,</span>&nbsp;<span class="ident" id="1913983">i</span>&nbsp;<span class="ident" id="1913985">fInterface</span><span class="op" id="1913995">)</span>&nbsp;<span class="op" id="1913997">(</span><span class="ident" id="1913998">r</span>&nbsp;<span class="ident" id="1914000">fInterface</span><span class="op" id="1914010">)</span>&nbsp;<span class="op" id="1914012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914015">ip</span>&nbsp;<span class="op" id="1914018">:=</span>&nbsp;<span class="op" id="1914021">(</span><span class="op" id="1914022">*</span><span class="ident" id="1914023">iface</span><span class="op" id="1914028">)</span><span class="op" id="1914029">(</span><span class="ident" id="1914030">unsafe</span><span class="op" id="1914036">.</span><span class="ident" id="1914037">Pointer</span><span class="op" id="1914044">(</span><span class="op" id="1914045">&amp;</span><span class="ident" id="1914046">i</span><span class="op" id="1914047">)</span><span class="op" id="1914048">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914051">tab</span>&nbsp;<span class="op" id="1914055">:=</span>&nbsp;<span class="ident" id="1914058">ip</span><span class="op" id="1914060">.</span><span class="ident" id="1914061">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914066">if</span>&nbsp;<span class="ident" id="1914069">tab</span>&nbsp;<span class="op" id="1914073">==</span>&nbsp;<span class="ident" id="1914076">nil</span>&nbsp;<span class="op" id="1914080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914084">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1914092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914095">rp</span>&nbsp;<span class="op" id="1914098">:=</span>&nbsp;<span class="op" id="1914101">(</span><span class="op" id="1914102">*</span><span class="ident" id="1914103">iface</span><span class="op" id="1914108">)</span><span class="op" id="1914109">(</span><span class="ident" id="1914110">unsafe</span><span class="op" id="1914116">.</span><span class="ident" id="1914117">Pointer</span><span class="op" id="1914124">(</span><span class="op" id="1914125">&amp;</span><span class="ident" id="1914126">r</span><span class="op" id="1914127">)</span><span class="op" id="1914128">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914131">if</span>&nbsp;<span class="ident" id="1914134">tab</span><span class="op" id="1914137">.</span><span class="ident" id="1914138">inter</span>&nbsp;<span class="op" id="1914144">==</span>&nbsp;<span class="ident" id="1914147">inter</span>&nbsp;<span class="op" id="1914153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914157">rp</span><span class="op" id="1914159">.</span><span class="ident" id="1914160">tab</span>&nbsp;<span class="op" id="1914164">=</span>&nbsp;<span class="ident" id="1914166">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914172">rp</span><span class="op" id="1914174">.</span><span class="ident" id="1914175">data</span>&nbsp;<span class="op" id="1914180">=</span>&nbsp;<span class="ident" id="1914182">ip</span><span class="op" id="1914184">.</span><span class="ident" id="1914185">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914192">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1914200">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914203">rp</span><span class="op" id="1914205">.</span><span class="ident" id="1914206">tab</span>&nbsp;<span class="op" id="1914210">=</span>&nbsp;<span class="ident" id="1914212">getitab</span><span class="op" id="1914219">(</span><span class="ident" id="1914220">inter</span><span class="op" id="1914225">,</span>&nbsp;<span class="ident" id="1914227">tab</span><span class="op" id="1914230">.</span><span class="ident" id="1914231">_type</span><span class="op" id="1914236">,</span>&nbsp;<span class="builtintype" id="1914238">false</span><span class="op" id="1914243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914246">rp</span><span class="op" id="1914248">.</span><span class="ident" id="1914249">data</span>&nbsp;<span class="op" id="1914254">=</span>&nbsp;<span class="ident" id="1914256">ip</span><span class="op" id="1914258">.</span><span class="ident" id="1914259">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914265">return</span><br>
<span class="lineno"></span><span class="op" id="1914272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1914275">func</span>&nbsp;<span class="ident" id="1914280">assertI2I</span><span class="op" id="1914289">(</span><span class="ident" id="1914290">inter</span>&nbsp;<span class="op" id="1914296">*</span><span class="ident" id="1914297">interfacetype</span><span class="op" id="1914310">,</span>&nbsp;<span class="ident" id="1914312">i</span>&nbsp;<span class="ident" id="1914314">fInterface</span><span class="op" id="1914324">)</span>&nbsp;<span class="op" id="1914326">(</span><span class="ident" id="1914327">r</span>&nbsp;<span class="ident" id="1914329">fInterface</span><span class="op" id="1914339">)</span>&nbsp;<span class="op" id="1914341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914344">ip</span>&nbsp;<span class="op" id="1914347">:=</span>&nbsp;<span class="op" id="1914350">(</span><span class="op" id="1914351">*</span><span class="ident" id="1914352">iface</span><span class="op" id="1914357">)</span><span class="op" id="1914358">(</span><span class="ident" id="1914359">unsafe</span><span class="op" id="1914365">.</span><span class="ident" id="1914366">Pointer</span><span class="op" id="1914373">(</span><span class="op" id="1914374">&amp;</span><span class="ident" id="1914375">i</span><span class="op" id="1914376">)</span><span class="op" id="1914377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914380">tab</span>&nbsp;<span class="op" id="1914384">:=</span>&nbsp;<span class="ident" id="1914387">ip</span><span class="op" id="1914389">.</span><span class="ident" id="1914390">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914395">if</span>&nbsp;<span class="ident" id="1914398">tab</span>&nbsp;<span class="op" id="1914402">==</span>&nbsp;<span class="ident" id="1914405">nil</span>&nbsp;<span class="op" id="1914409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1914413">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1914472">panic</span><span class="op" id="1914477">(</span><span class="op" id="1914478">&amp;</span><span class="ident" id="1914479">TypeAssertionError</span><span class="op" id="1914497">{</span><span class="string" id="1914498">&#34;&#34;</span><span class="op" id="1914500">,</span>&nbsp;<span class="string" id="1914502">&#34;&#34;</span><span class="op" id="1914504">,</span>&nbsp;<span class="op" id="1914506">*</span><span class="ident" id="1914507">inter</span><span class="op" id="1914512">.</span><span class="ident" id="1914513">typ</span><span class="op" id="1914516">.</span><span class="ident" id="1914517">_string</span><span class="op" id="1914524">,</span>&nbsp;<span class="string" id="1914526">&#34;&#34;</span><span class="op" id="1914528">}</span><span class="op" id="1914529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1914532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914535">rp</span>&nbsp;<span class="op" id="1914538">:=</span>&nbsp;<span class="op" id="1914541">(</span><span class="op" id="1914542">*</span><span class="ident" id="1914543">iface</span><span class="op" id="1914548">)</span><span class="op" id="1914549">(</span><span class="ident" id="1914550">unsafe</span><span class="op" id="1914556">.</span><span class="ident" id="1914557">Pointer</span><span class="op" id="1914564">(</span><span class="op" id="1914565">&amp;</span><span class="ident" id="1914566">r</span><span class="op" id="1914567">)</span><span class="op" id="1914568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914571">if</span>&nbsp;<span class="ident" id="1914574">tab</span><span class="op" id="1914577">.</span><span class="ident" id="1914578">inter</span>&nbsp;<span class="op" id="1914584">==</span>&nbsp;<span class="ident" id="1914587">inter</span>&nbsp;<span class="op" id="1914593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914597">rp</span><span class="op" id="1914599">.</span><span class="ident" id="1914600">tab</span>&nbsp;<span class="op" id="1914604">=</span>&nbsp;<span class="ident" id="1914606">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914612">rp</span><span class="op" id="1914614">.</span><span class="ident" id="1914615">data</span>&nbsp;<span class="op" id="1914620">=</span>&nbsp;<span class="ident" id="1914622">ip</span><span class="op" id="1914624">.</span><span class="ident" id="1914625">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914632">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1914640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914643">rp</span><span class="op" id="1914645">.</span><span class="ident" id="1914646">tab</span>&nbsp;<span class="op" id="1914650">=</span>&nbsp;<span class="ident" id="1914652">getitab</span><span class="op" id="1914659">(</span><span class="ident" id="1914660">inter</span><span class="op" id="1914665">,</span>&nbsp;<span class="ident" id="1914667">tab</span><span class="op" id="1914670">.</span><span class="ident" id="1914671">_type</span><span class="op" id="1914676">,</span>&nbsp;<span class="builtintype" id="1914678">false</span><span class="op" id="1914683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914686">rp</span><span class="op" id="1914688">.</span><span class="ident" id="1914689">data</span>&nbsp;<span class="op" id="1914694">=</span>&nbsp;<span class="ident" id="1914696">ip</span><span class="op" id="1914698">.</span><span class="ident" id="1914699">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914705">return</span><br>
<span class="lineno"></span><span class="op" id="1914712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1914715">func</span>&nbsp;<span class="ident" id="1914720">assertI2I2</span><span class="op" id="1914730">(</span><span class="ident" id="1914731">inter</span>&nbsp;<span class="op" id="1914737">*</span><span class="ident" id="1914738">interfacetype</span><span class="op" id="1914751">,</span>&nbsp;<span class="ident" id="1914753">i</span>&nbsp;<span class="ident" id="1914755">fInterface</span><span class="op" id="1914765">)</span>&nbsp;<span class="op" id="1914767">(</span><span class="ident" id="1914768">r</span>&nbsp;<span class="ident" id="1914770">fInterface</span><span class="op" id="1914780">,</span>&nbsp;<span class="ident" id="1914782">ok</span>&nbsp;<span class="builtintype" id="1914785">bool</span><span class="op" id="1914789">)</span>&nbsp;<span class="op" id="1914791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914794">ip</span>&nbsp;<span class="op" id="1914797">:=</span>&nbsp;<span class="op" id="1914800">(</span><span class="op" id="1914801">*</span><span class="ident" id="1914802">iface</span><span class="op" id="1914807">)</span><span class="op" id="1914808">(</span><span class="ident" id="1914809">unsafe</span><span class="op" id="1914815">.</span><span class="ident" id="1914816">Pointer</span><span class="op" id="1914823">(</span><span class="op" id="1914824">&amp;</span><span class="ident" id="1914825">i</span><span class="op" id="1914826">)</span><span class="op" id="1914827">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914830">tab</span>&nbsp;<span class="op" id="1914834">:=</span>&nbsp;<span class="ident" id="1914837">ip</span><span class="op" id="1914839">.</span><span class="ident" id="1914840">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914845">if</span>&nbsp;<span class="ident" id="1914848">tab</span>&nbsp;<span class="op" id="1914852">==</span>&nbsp;<span class="ident" id="1914855">nil</span>&nbsp;<span class="op" id="1914859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914863">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1914871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914874">rp</span>&nbsp;<span class="op" id="1914877">:=</span>&nbsp;<span class="op" id="1914880">(</span><span class="op" id="1914881">*</span><span class="ident" id="1914882">iface</span><span class="op" id="1914887">)</span><span class="op" id="1914888">(</span><span class="ident" id="1914889">unsafe</span><span class="op" id="1914895">.</span><span class="ident" id="1914896">Pointer</span><span class="op" id="1914903">(</span><span class="op" id="1914904">&amp;</span><span class="ident" id="1914905">r</span><span class="op" id="1914906">)</span><span class="op" id="1914907">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914910">if</span>&nbsp;<span class="ident" id="1914913">tab</span><span class="op" id="1914916">.</span><span class="ident" id="1914917">inter</span>&nbsp;<span class="op" id="1914923">==</span>&nbsp;<span class="ident" id="1914926">inter</span>&nbsp;<span class="op" id="1914932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914936">rp</span><span class="op" id="1914938">.</span><span class="ident" id="1914939">tab</span>&nbsp;<span class="op" id="1914943">=</span>&nbsp;<span class="ident" id="1914945">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914951">rp</span><span class="op" id="1914953">.</span><span class="ident" id="1914954">data</span>&nbsp;<span class="op" id="1914959">=</span>&nbsp;<span class="ident" id="1914961">ip</span><span class="op" id="1914963">.</span><span class="ident" id="1914964">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914971">ok</span>&nbsp;<span class="op" id="1914974">=</span>&nbsp;<span class="builtintype" id="1914976">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1914983">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1914991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1914994">tab</span>&nbsp;<span class="op" id="1914998">=</span>&nbsp;<span class="ident" id="1915000">getitab</span><span class="op" id="1915007">(</span><span class="ident" id="1915008">inter</span><span class="op" id="1915013">,</span>&nbsp;<span class="ident" id="1915015">tab</span><span class="op" id="1915018">.</span><span class="ident" id="1915019">_type</span><span class="op" id="1915024">,</span>&nbsp;<span class="builtintype" id="1915026">true</span><span class="op" id="1915030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915033">if</span>&nbsp;<span class="ident" id="1915036">tab</span>&nbsp;<span class="op" id="1915040">==</span>&nbsp;<span class="ident" id="1915043">nil</span>&nbsp;<span class="op" id="1915047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915051">rp</span><span class="op" id="1915053">.</span><span class="ident" id="1915054">data</span>&nbsp;<span class="op" id="1915059">=</span>&nbsp;<span class="ident" id="1915061">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915067">rp</span><span class="op" id="1915069">.</span><span class="ident" id="1915070">tab</span>&nbsp;<span class="op" id="1915074">=</span>&nbsp;<span class="ident" id="1915076">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915082">ok</span>&nbsp;<span class="op" id="1915085">=</span>&nbsp;<span class="builtintype" id="1915087">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915095">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1915103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915106">rp</span><span class="op" id="1915108">.</span><span class="ident" id="1915109">tab</span>&nbsp;<span class="op" id="1915113">=</span>&nbsp;<span class="ident" id="1915115">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915120">rp</span><span class="op" id="1915122">.</span><span class="ident" id="1915123">data</span>&nbsp;<span class="op" id="1915128">=</span>&nbsp;<span class="ident" id="1915130">ip</span><span class="op" id="1915132">.</span><span class="ident" id="1915133">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915139">ok</span>&nbsp;<span class="op" id="1915142">=</span>&nbsp;<span class="builtintype" id="1915144">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915150">return</span><br>
<span class="lineno"></span><span class="op" id="1915157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1915160">func</span>&nbsp;<span class="ident" id="1915165">assertE2I</span><span class="op" id="1915174">(</span><span class="ident" id="1915175">inter</span>&nbsp;<span class="op" id="1915181">*</span><span class="ident" id="1915182">interfacetype</span><span class="op" id="1915195">,</span>&nbsp;<span class="ident" id="1915197">e</span>&nbsp;<span class="keyword" id="1915199">interface</span><span class="op" id="1915208">{</span><span class="op" id="1915209">}</span><span class="op" id="1915210">)</span>&nbsp;<span class="op" id="1915212">(</span><span class="ident" id="1915213">r</span>&nbsp;<span class="ident" id="1915215">fInterface</span><span class="op" id="1915225">)</span>&nbsp;<span class="op" id="1915227">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915230">ep</span>&nbsp;<span class="op" id="1915233">:=</span>&nbsp;<span class="op" id="1915236">(</span><span class="op" id="1915237">*</span><span class="ident" id="1915238">eface</span><span class="op" id="1915243">)</span><span class="op" id="1915244">(</span><span class="ident" id="1915245">unsafe</span><span class="op" id="1915251">.</span><span class="ident" id="1915252">Pointer</span><span class="op" id="1915259">(</span><span class="op" id="1915260">&amp;</span><span class="ident" id="1915261">e</span><span class="op" id="1915262">)</span><span class="op" id="1915263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915266">t</span>&nbsp;<span class="op" id="1915268">:=</span>&nbsp;<span class="ident" id="1915271">ep</span><span class="op" id="1915273">.</span><span class="ident" id="1915274">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915281">if</span>&nbsp;<span class="ident" id="1915284">t</span>&nbsp;<span class="op" id="1915286">==</span>&nbsp;<span class="ident" id="1915289">nil</span>&nbsp;<span class="op" id="1915293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1915297">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1915356">panic</span><span class="op" id="1915361">(</span><span class="op" id="1915362">&amp;</span><span class="ident" id="1915363">TypeAssertionError</span><span class="op" id="1915381">{</span><span class="string" id="1915382">&#34;&#34;</span><span class="op" id="1915384">,</span>&nbsp;<span class="string" id="1915386">&#34;&#34;</span><span class="op" id="1915388">,</span>&nbsp;<span class="op" id="1915390">*</span><span class="ident" id="1915391">inter</span><span class="op" id="1915396">.</span><span class="ident" id="1915397">typ</span><span class="op" id="1915400">.</span><span class="ident" id="1915401">_string</span><span class="op" id="1915408">,</span>&nbsp;<span class="string" id="1915410">&#34;&#34;</span><span class="op" id="1915412">}</span><span class="op" id="1915413">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1915416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915419">rp</span>&nbsp;<span class="op" id="1915422">:=</span>&nbsp;<span class="op" id="1915425">(</span><span class="op" id="1915426">*</span><span class="ident" id="1915427">iface</span><span class="op" id="1915432">)</span><span class="op" id="1915433">(</span><span class="ident" id="1915434">unsafe</span><span class="op" id="1915440">.</span><span class="ident" id="1915441">Pointer</span><span class="op" id="1915448">(</span><span class="op" id="1915449">&amp;</span><span class="ident" id="1915450">r</span><span class="op" id="1915451">)</span><span class="op" id="1915452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915455">rp</span><span class="op" id="1915457">.</span><span class="ident" id="1915458">tab</span>&nbsp;<span class="op" id="1915462">=</span>&nbsp;<span class="ident" id="1915464">getitab</span><span class="op" id="1915471">(</span><span class="ident" id="1915472">inter</span><span class="op" id="1915477">,</span>&nbsp;<span class="ident" id="1915479">t</span><span class="op" id="1915480">,</span>&nbsp;<span class="builtintype" id="1915482">false</span><span class="op" id="1915487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915490">rp</span><span class="op" id="1915492">.</span><span class="ident" id="1915493">data</span>&nbsp;<span class="op" id="1915498">=</span>&nbsp;<span class="ident" id="1915500">ep</span><span class="op" id="1915502">.</span><span class="ident" id="1915503">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915509">return</span><br>
<span class="lineno">370</span><span class="op" id="1915516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1915519">func</span>&nbsp;<span class="ident" id="1915524">assertE2I2</span><span class="op" id="1915534">(</span><span class="ident" id="1915535">inter</span>&nbsp;<span class="op" id="1915541">*</span><span class="ident" id="1915542">interfacetype</span><span class="op" id="1915555">,</span>&nbsp;<span class="ident" id="1915557">e</span>&nbsp;<span class="keyword" id="1915559">interface</span><span class="op" id="1915568">{</span><span class="op" id="1915569">}</span><span class="op" id="1915570">)</span>&nbsp;<span class="op" id="1915572">(</span><span class="ident" id="1915573">r</span>&nbsp;<span class="ident" id="1915575">fInterface</span><span class="op" id="1915585">,</span>&nbsp;<span class="ident" id="1915587">ok</span>&nbsp;<span class="builtintype" id="1915590">bool</span><span class="op" id="1915594">)</span>&nbsp;<span class="op" id="1915596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915599">ep</span>&nbsp;<span class="op" id="1915602">:=</span>&nbsp;<span class="op" id="1915605">(</span><span class="op" id="1915606">*</span><span class="ident" id="1915607">eface</span><span class="op" id="1915612">)</span><span class="op" id="1915613">(</span><span class="ident" id="1915614">unsafe</span><span class="op" id="1915620">.</span><span class="ident" id="1915621">Pointer</span><span class="op" id="1915628">(</span><span class="op" id="1915629">&amp;</span><span class="ident" id="1915630">e</span><span class="op" id="1915631">)</span><span class="op" id="1915632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915635">t</span>&nbsp;<span class="op" id="1915637">:=</span>&nbsp;<span class="ident" id="1915640">ep</span><span class="op" id="1915642">.</span><span class="ident" id="1915643">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915650">if</span>&nbsp;<span class="ident" id="1915653">t</span>&nbsp;<span class="op" id="1915655">==</span>&nbsp;<span class="ident" id="1915658">nil</span>&nbsp;<span class="op" id="1915662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915666">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1915674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915677">tab</span>&nbsp;<span class="op" id="1915681">:=</span>&nbsp;<span class="ident" id="1915684">getitab</span><span class="op" id="1915691">(</span><span class="ident" id="1915692">inter</span><span class="op" id="1915697">,</span>&nbsp;<span class="ident" id="1915699">t</span><span class="op" id="1915700">,</span>&nbsp;<span class="builtintype" id="1915702">true</span><span class="op" id="1915706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915709">if</span>&nbsp;<span class="ident" id="1915712">tab</span>&nbsp;<span class="op" id="1915716">==</span>&nbsp;<span class="ident" id="1915719">nil</span>&nbsp;<span class="op" id="1915723">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915727">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1915735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915738">rp</span>&nbsp;<span class="op" id="1915741">:=</span>&nbsp;<span class="op" id="1915744">(</span><span class="op" id="1915745">*</span><span class="ident" id="1915746">iface</span><span class="op" id="1915751">)</span><span class="op" id="1915752">(</span><span class="ident" id="1915753">unsafe</span><span class="op" id="1915759">.</span><span class="ident" id="1915760">Pointer</span><span class="op" id="1915767">(</span><span class="op" id="1915768">&amp;</span><span class="ident" id="1915769">r</span><span class="op" id="1915770">)</span><span class="op" id="1915771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915774">rp</span><span class="op" id="1915776">.</span><span class="ident" id="1915777">tab</span>&nbsp;<span class="op" id="1915781">=</span>&nbsp;<span class="ident" id="1915783">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915788">rp</span><span class="op" id="1915790">.</span><span class="ident" id="1915791">data</span>&nbsp;<span class="op" id="1915796">=</span>&nbsp;<span class="ident" id="1915798">ep</span><span class="op" id="1915800">.</span><span class="ident" id="1915801">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1915807">ok</span>&nbsp;<span class="op" id="1915810">=</span>&nbsp;<span class="builtintype" id="1915812">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1915818">return</span><br>
<span class="lineno"></span><span class="op" id="1915825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1915828">func</span>&nbsp;<span class="ident" id="1915833">reflect_ifaceE2I</span><span class="op" id="1915849">(</span><span class="ident" id="1915850">inter</span>&nbsp;<span class="op" id="1915856">*</span><span class="ident" id="1915857">interfacetype</span><span class="op" id="1915870">,</span>&nbsp;<span class="ident" id="1915872">e</span>&nbsp;<span class="keyword" id="1915874">interface</span><span class="op" id="1915883">{</span><span class="op" id="1915884">}</span><span class="op" id="1915885">,</span>&nbsp;<span class="ident" id="1915887">dst</span>&nbsp;<span class="op" id="1915891">*</span><span class="ident" id="1915892">fInterface</span><span class="op" id="1915902">)</span>&nbsp;<span class="op" id="1915904">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1915907">*</span><span class="ident" id="1915908">dst</span>&nbsp;<span class="op" id="1915912">=</span>&nbsp;<span class="ident" id="1915914">assertE2I</span><span class="op" id="1915923">(</span><span class="ident" id="1915924">inter</span><span class="op" id="1915929">,</span>&nbsp;<span class="ident" id="1915931">e</span><span class="op" id="1915932">)</span><br>
<span class="lineno"></span><span class="op" id="1915934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1915937">func</span>&nbsp;<span class="ident" id="1915942">assertE2E</span><span class="op" id="1915951">(</span><span class="ident" id="1915952">inter</span>&nbsp;<span class="op" id="1915958">*</span><span class="ident" id="1915959">interfacetype</span><span class="op" id="1915972">,</span>&nbsp;<span class="ident" id="1915974">e</span>&nbsp;<span class="keyword" id="1915976">interface</span><span class="op" id="1915985">{</span><span class="op" id="1915986">}</span><span class="op" id="1915987">)</span>&nbsp;<span class="keyword" id="1915989">interface</span><span class="op" id="1915998">{</span><span class="op" id="1915999">}</span>&nbsp;<span class="op" id="1916001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1916004">ep</span>&nbsp;<span class="op" id="1916007">:=</span>&nbsp;<span class="op" id="1916010">(</span><span class="op" id="1916011">*</span><span class="ident" id="1916012">eface</span><span class="op" id="1916017">)</span><span class="op" id="1916018">(</span><span class="ident" id="1916019">unsafe</span><span class="op" id="1916025">.</span><span class="ident" id="1916026">Pointer</span><span class="op" id="1916033">(</span><span class="op" id="1916034">&amp;</span><span class="ident" id="1916035">e</span><span class="op" id="1916036">)</span><span class="op" id="1916037">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916040">if</span>&nbsp;<span class="ident" id="1916043">ep</span><span class="op" id="1916045">.</span><span class="ident" id="1916046">_type</span>&nbsp;<span class="op" id="1916052">==</span>&nbsp;<span class="ident" id="1916055">nil</span>&nbsp;<span class="op" id="1916059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1916063">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1916122">panic</span><span class="op" id="1916127">(</span><span class="op" id="1916128">&amp;</span><span class="ident" id="1916129">TypeAssertionError</span><span class="op" id="1916147">{</span><span class="string" id="1916148">&#34;&#34;</span><span class="op" id="1916150">,</span>&nbsp;<span class="string" id="1916152">&#34;&#34;</span><span class="op" id="1916154">,</span>&nbsp;<span class="op" id="1916156">*</span><span class="ident" id="1916157">inter</span><span class="op" id="1916162">.</span><span class="ident" id="1916163">typ</span><span class="op" id="1916166">.</span><span class="ident" id="1916167">_string</span><span class="op" id="1916174">,</span>&nbsp;<span class="string" id="1916176">&#34;&#34;</span><span class="op" id="1916178">}</span><span class="op" id="1916179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1916182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916185">return</span>&nbsp;<span class="ident" id="1916192">e</span><br>
<span class="lineno">400</span><span class="op" id="1916194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1916197">func</span>&nbsp;<span class="ident" id="1916202">assertE2E2</span><span class="op" id="1916212">(</span><span class="ident" id="1916213">inter</span>&nbsp;<span class="op" id="1916219">*</span><span class="ident" id="1916220">interfacetype</span><span class="op" id="1916233">,</span>&nbsp;<span class="ident" id="1916235">e</span>&nbsp;<span class="keyword" id="1916237">interface</span><span class="op" id="1916246">{</span><span class="op" id="1916247">}</span><span class="op" id="1916248">)</span>&nbsp;<span class="op" id="1916250">(</span><span class="keyword" id="1916251">interface</span><span class="op" id="1916260">{</span><span class="op" id="1916261">}</span><span class="op" id="1916262">,</span>&nbsp;<span class="builtintype" id="1916264">bool</span><span class="op" id="1916268">)</span>&nbsp;<span class="op" id="1916270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1916273">ep</span>&nbsp;<span class="op" id="1916276">:=</span>&nbsp;<span class="op" id="1916279">(</span><span class="op" id="1916280">*</span><span class="ident" id="1916281">eface</span><span class="op" id="1916286">)</span><span class="op" id="1916287">(</span><span class="ident" id="1916288">unsafe</span><span class="op" id="1916294">.</span><span class="ident" id="1916295">Pointer</span><span class="op" id="1916302">(</span><span class="op" id="1916303">&amp;</span><span class="ident" id="1916304">e</span><span class="op" id="1916305">)</span><span class="op" id="1916306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916309">if</span>&nbsp;<span class="ident" id="1916312">ep</span><span class="op" id="1916314">.</span><span class="ident" id="1916315">_type</span>&nbsp;<span class="op" id="1916321">==</span>&nbsp;<span class="ident" id="1916324">nil</span>&nbsp;<span class="op" id="1916328">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916332">return</span>&nbsp;<span class="ident" id="1916339">nil</span><span class="op" id="1916342">,</span>&nbsp;<span class="builtintype" id="1916344">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1916351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916354">return</span>&nbsp;<span class="ident" id="1916361">e</span><span class="op" id="1916362">,</span>&nbsp;<span class="builtintype" id="1916364">true</span><br>
<span class="lineno"></span><span class="op" id="1916369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1916372">func</span>&nbsp;<span class="ident" id="1916377">ifacethash</span><span class="op" id="1916387">(</span><span class="ident" id="1916388">i</span>&nbsp;<span class="ident" id="1916390">fInterface</span><span class="op" id="1916400">)</span>&nbsp;<span class="builtintype" id="1916402">uint32</span>&nbsp;<span class="op" id="1916409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1916412">ip</span>&nbsp;<span class="op" id="1916415">:=</span>&nbsp;<span class="op" id="1916418">(</span><span class="op" id="1916419">*</span><span class="ident" id="1916420">iface</span><span class="op" id="1916425">)</span><span class="op" id="1916426">(</span><span class="ident" id="1916427">unsafe</span><span class="op" id="1916433">.</span><span class="ident" id="1916434">Pointer</span><span class="op" id="1916441">(</span><span class="op" id="1916442">&amp;</span><span class="ident" id="1916443">i</span><span class="op" id="1916444">)</span><span class="op" id="1916445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1916448">tab</span>&nbsp;<span class="op" id="1916452">:=</span>&nbsp;<span class="ident" id="1916455">ip</span><span class="op" id="1916457">.</span><span class="ident" id="1916458">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916463">if</span>&nbsp;<span class="ident" id="1916466">tab</span>&nbsp;<span class="op" id="1916470">==</span>&nbsp;<span class="ident" id="1916473">nil</span>&nbsp;<span class="op" id="1916477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916481">return</span>&nbsp;<span class="num" id="1916488">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1916491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916494">return</span>&nbsp;<span class="ident" id="1916501">tab</span><span class="op" id="1916504">.</span><span class="ident" id="1916505">_type</span><span class="op" id="1916510">.</span><span class="ident" id="1916511">hash</span><br>
<span class="lineno"></span><span class="op" id="1916516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1916519">func</span>&nbsp;<span class="ident" id="1916524">efacethash</span><span class="op" id="1916534">(</span><span class="ident" id="1916535">e</span>&nbsp;<span class="keyword" id="1916537">interface</span><span class="op" id="1916546">{</span><span class="op" id="1916547">}</span><span class="op" id="1916548">)</span>&nbsp;<span class="builtintype" id="1916550">uint32</span>&nbsp;<span class="op" id="1916557">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1916560">ep</span>&nbsp;<span class="op" id="1916563">:=</span>&nbsp;<span class="op" id="1916566">(</span><span class="op" id="1916567">*</span><span class="ident" id="1916568">eface</span><span class="op" id="1916573">)</span><span class="op" id="1916574">(</span><span class="ident" id="1916575">unsafe</span><span class="op" id="1916581">.</span><span class="ident" id="1916582">Pointer</span><span class="op" id="1916589">(</span><span class="op" id="1916590">&amp;</span><span class="ident" id="1916591">e</span><span class="op" id="1916592">)</span><span class="op" id="1916593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1916596">t</span>&nbsp;<span class="op" id="1916598">:=</span>&nbsp;<span class="ident" id="1916601">ep</span><span class="op" id="1916603">.</span><span class="ident" id="1916604">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916611">if</span>&nbsp;<span class="ident" id="1916614">t</span>&nbsp;<span class="op" id="1916616">==</span>&nbsp;<span class="ident" id="1916619">nil</span>&nbsp;<span class="op" id="1916623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916627">return</span>&nbsp;<span class="num" id="1916634">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1916637">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916640">return</span>&nbsp;<span class="ident" id="1916647">t</span><span class="op" id="1916648">.</span><span class="ident" id="1916649">hash</span><br>
<span class="lineno"></span><span class="op" id="1916654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1916657">func</span>&nbsp;<span class="ident" id="1916662">iterate_itabs</span><span class="op" id="1916675">(</span><span class="ident" id="1916676">fn</span>&nbsp;<span class="keyword" id="1916679">func</span><span class="op" id="1916683">(</span><span class="op" id="1916684">*</span><span class="ident" id="1916685">itab</span><span class="op" id="1916689">)</span><span class="op" id="1916690">)</span>&nbsp;<span class="op" id="1916692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916695">for</span>&nbsp;<span class="ident" id="1916699">_</span><span class="op" id="1916700">,</span>&nbsp;<span class="ident" id="1916702">h</span>&nbsp;<span class="op" id="1916704">:=</span>&nbsp;<span class="keyword" id="1916707">range</span>&nbsp;<span class="op" id="1916713">&amp;</span><span class="ident" id="1916714">hash</span>&nbsp;<span class="op" id="1916719">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916723">for</span>&nbsp;<span class="op" id="1916727">;</span>&nbsp;<span class="ident" id="1916729">h</span>&nbsp;<span class="op" id="1916731">!=</span>&nbsp;<span class="ident" id="1916734">nil</span><span class="op" id="1916737">;</span>&nbsp;<span class="ident" id="1916739">h</span>&nbsp;<span class="op" id="1916741">=</span>&nbsp;<span class="ident" id="1916743">h</span><span class="op" id="1916744">.</span><span class="ident" id="1916745">link</span>&nbsp;<span class="op" id="1916750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1916755">fn</span><span class="op" id="1916757">(</span><span class="ident" id="1916758">h</span><span class="op" id="1916759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1916763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1916766">}</span><br>
<span class="lineno"></span><span class="op" id="1916768">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1916771">func</span>&nbsp;<span class="ident" id="1916776">ifaceE2I2</span><span class="op" id="1916785">(</span><span class="ident" id="1916786">inter</span>&nbsp;<span class="op" id="1916792">*</span><span class="ident" id="1916793">interfacetype</span><span class="op" id="1916806">,</span>&nbsp;<span class="ident" id="1916808">e</span>&nbsp;<span class="keyword" id="1916810">interface</span><span class="op" id="1916819">{</span><span class="op" id="1916820">}</span><span class="op" id="1916821">,</span>&nbsp;<span class="ident" id="1916823">r</span>&nbsp;<span class="op" id="1916825">*</span><span class="ident" id="1916826">fInterface</span><span class="op" id="1916836">)</span>&nbsp;<span class="op" id="1916838">(</span><span class="ident" id="1916839">ok</span>&nbsp;<span class="builtintype" id="1916842">bool</span><span class="op" id="1916846">)</span>&nbsp;<span class="op" id="1916848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1916851">*</span><span class="ident" id="1916852">r</span><span class="op" id="1916853">,</span>&nbsp;<span class="ident" id="1916855">ok</span>&nbsp;<span class="op" id="1916858">=</span>&nbsp;<span class="ident" id="1916860">assertE2I2</span><span class="op" id="1916870">(</span><span class="ident" id="1916871">inter</span><span class="op" id="1916876">,</span>&nbsp;<span class="ident" id="1916878">e</span><span class="op" id="1916879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1916882">return</span><br>
<span class="lineno"></span><span class="op" id="1916889">}</span>
</div>
</body>
</html>
