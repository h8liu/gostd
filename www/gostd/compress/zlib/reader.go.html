<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/zlib</h2>
<ul>
<li><a href="/gostd/compress/zlib/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/compress/zlib/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/zlib/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/zlib/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/zlib/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5541469">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5541524">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5541578">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5541629">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbspw.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbspr,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspio.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspr.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5542072">package</span>&nbsp;<span class="ident" id="5542080">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5542086">import</span>&nbsp;<span class="op" id="5542093">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5542096">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5542105">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5542123">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5542133">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5542141">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5542157">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5542162">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5542165">const</span>&nbsp;<span class="ident" id="5542171">zlibDeflate</span>&nbsp;<span class="op" id="5542183">=</span>&nbsp;<span class="num" id="5542185">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5542188">var</span>&nbsp;<span class="op" id="5542192">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5542195">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5542276">ErrChecksum</span>&nbsp;<span class="op" id="5542288">=</span>&nbsp;<span class="ident" id="5542290">errors</span><span class="op" id="5542296">.</span><span class="ident" id="5542297">New</span><span class="op" id="5542300">(</span><span class="string" id="5542301">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="5542325">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5542328">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5542413">ErrDictionary</span>&nbsp;<span class="op" id="5542427">=</span>&nbsp;<span class="ident" id="5542429">errors</span><span class="op" id="5542435">.</span><span class="ident" id="5542436">New</span><span class="op" id="5542439">(</span><span class="string" id="5542440">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="5542466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5542469">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5542546">ErrHeader</span>&nbsp;<span class="op" id="5542556">=</span>&nbsp;<span class="ident" id="5542558">errors</span><span class="op" id="5542564">.</span><span class="ident" id="5542565">New</span><span class="op" id="5542568">(</span><span class="string" id="5542569">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="5542591">)</span><br>
<span class="lineno"></span><span class="op" id="5542593">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5542596">type</span>&nbsp;<span class="ident" id="5542601">reader</span>&nbsp;<span class="keyword" id="5542608">struct</span>&nbsp;<span class="op" id="5542615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5542618">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5542631">flate</span><span class="op" id="5542636">.</span><span class="ident" id="5542637">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5542645">decompressor</span>&nbsp;<span class="ident" id="5542658">io</span><span class="op" id="5542660">.</span><span class="ident" id="5542661">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5542673">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5542686">hash</span><span class="op" id="5542690">.</span><span class="ident" id="5542691">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5542699">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5542712">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5542719">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5542732">[</span><span class="num" id="5542733">4</span><span class="op" id="5542734">]</span><span class="builtintype" id="5542735">byte</span><br>
<span class="lineno"></span><span class="op" id="5542740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5542743">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="5542817">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="5542892">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="5542928">type</span>&nbsp;<span class="ident" id="5542933">Resetter</span>&nbsp;<span class="keyword" id="5542942">interface</span>&nbsp;<span class="op" id="5542952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5542955">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5543029">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5543074">Reset</span><span class="op" id="5543079">(</span><span class="ident" id="5543080">r</span>&nbsp;<span class="ident" id="5543082">io</span><span class="op" id="5543084">.</span><span class="ident" id="5543085">Reader</span><span class="op" id="5543091">,</span>&nbsp;<span class="ident" id="5543093">dict</span>&nbsp;<span class="op" id="5543098">[</span><span class="op" id="5543099">]</span><span class="builtintype" id="5543100">byte</span><span class="op" id="5543104">)</span>&nbsp;<span class="builtintype" id="5543106">error</span><br>
<span class="lineno"></span><span class="op" id="5543112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5543115">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5543154">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="5543225">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5543307">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5543387">//</span><br>
<span class="lineno"></span><span class="comment" id="5543390">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5543456">func</span>&nbsp;<span class="ident" id="5543461">NewReader</span><span class="op" id="5543470">(</span><span class="ident" id="5543471">r</span>&nbsp;<span class="ident" id="5543473">io</span><span class="op" id="5543475">.</span><span class="ident" id="5543476">Reader</span><span class="op" id="5543482">)</span>&nbsp;<span class="op" id="5543484">(</span><span class="ident" id="5543485">io</span><span class="op" id="5543487">.</span><span class="ident" id="5543488">ReadCloser</span><span class="op" id="5543498">,</span>&nbsp;<span class="builtintype" id="5543500">error</span><span class="op" id="5543505">)</span>&nbsp;<span class="op" id="5543507">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5543510">return</span>&nbsp;<span class="ident" id="5543517">NewReaderDict</span><span class="op" id="5543530">(</span><span class="ident" id="5543531">r</span><span class="op" id="5543532">,</span>&nbsp;<span class="ident" id="5543534">nil</span><span class="op" id="5543537">)</span><br>
<span class="lineno"></span><span class="op" id="5543539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5543542">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5543607">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="5543692">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5543789">//</span><br>
<span class="lineno"></span><span class="comment" id="5543792">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5543862">func</span>&nbsp;<span class="ident" id="5543867">NewReaderDict</span><span class="op" id="5543880">(</span><span class="ident" id="5543881">r</span>&nbsp;<span class="ident" id="5543883">io</span><span class="op" id="5543885">.</span><span class="ident" id="5543886">Reader</span><span class="op" id="5543892">,</span>&nbsp;<span class="ident" id="5543894">dict</span>&nbsp;<span class="op" id="5543899">[</span><span class="op" id="5543900">]</span><span class="builtintype" id="5543901">byte</span><span class="op" id="5543905">)</span>&nbsp;<span class="op" id="5543907">(</span><span class="ident" id="5543908">io</span><span class="op" id="5543910">.</span><span class="ident" id="5543911">ReadCloser</span><span class="op" id="5543921">,</span>&nbsp;<span class="builtintype" id="5543923">error</span><span class="op" id="5543928">)</span>&nbsp;<span class="op" id="5543930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5543933">z</span>&nbsp;<span class="op" id="5543935">:=</span>&nbsp;<span class="builtinfunc" id="5543938">new</span><span class="op" id="5543941">(</span><span class="ident" id="5543942">reader</span><span class="op" id="5543948">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5543951">err</span>&nbsp;<span class="op" id="5543955">:=</span>&nbsp;<span class="ident" id="5543958">z</span><span class="op" id="5543959">.</span><span class="ident" id="5543960">Reset</span><span class="op" id="5543965">(</span><span class="ident" id="5543966">r</span><span class="op" id="5543967">,</span>&nbsp;<span class="ident" id="5543969">dict</span><span class="op" id="5543973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5543976">if</span>&nbsp;<span class="ident" id="5543979">err</span>&nbsp;<span class="op" id="5543983">!=</span>&nbsp;<span class="ident" id="5543986">nil</span>&nbsp;<span class="op" id="5543990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5543994">return</span>&nbsp;<span class="ident" id="5544001">nil</span><span class="op" id="5544004">,</span>&nbsp;<span class="ident" id="5544006">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5544011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544014">return</span>&nbsp;<span class="ident" id="5544021">z</span><span class="op" id="5544022">,</span>&nbsp;<span class="ident" id="5544024">nil</span><br>
<span class="lineno">85</span><span class="op" id="5544028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5544031">func</span>&nbsp;<span class="op" id="5544036">(</span><span class="ident" id="5544037">z</span>&nbsp;<span class="op" id="5544039">*</span><span class="ident" id="5544040">reader</span><span class="op" id="5544046">)</span>&nbsp;<span class="ident" id="5544048">Read</span><span class="op" id="5544052">(</span><span class="ident" id="5544053">p</span>&nbsp;<span class="op" id="5544055">[</span><span class="op" id="5544056">]</span><span class="builtintype" id="5544057">byte</span><span class="op" id="5544061">)</span>&nbsp;<span class="op" id="5544063">(</span><span class="ident" id="5544064">n</span>&nbsp;<span class="builtintype" id="5544066">int</span><span class="op" id="5544069">,</span>&nbsp;<span class="ident" id="5544071">err</span>&nbsp;<span class="builtintype" id="5544075">error</span><span class="op" id="5544080">)</span>&nbsp;<span class="op" id="5544082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544085">if</span>&nbsp;<span class="ident" id="5544088">z</span><span class="op" id="5544089">.</span><span class="ident" id="5544090">err</span>&nbsp;<span class="op" id="5544094">!=</span>&nbsp;<span class="ident" id="5544097">nil</span>&nbsp;<span class="op" id="5544101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544105">return</span>&nbsp;<span class="num" id="5544112">0</span><span class="op" id="5544113">,</span>&nbsp;<span class="ident" id="5544115">z</span><span class="op" id="5544116">.</span><span class="ident" id="5544117">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5544122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544125">if</span>&nbsp;<span class="builtinfunc" id="5544128">len</span><span class="op" id="5544131">(</span><span class="ident" id="5544132">p</span><span class="op" id="5544133">)</span>&nbsp;<span class="op" id="5544135">==</span>&nbsp;<span class="num" id="5544138">0</span>&nbsp;<span class="op" id="5544140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544144">return</span>&nbsp;<span class="num" id="5544151">0</span><span class="op" id="5544152">,</span>&nbsp;<span class="ident" id="5544154">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5544159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544163">n</span><span class="op" id="5544164">,</span>&nbsp;<span class="ident" id="5544166">err</span>&nbsp;<span class="op" id="5544170">=</span>&nbsp;<span class="ident" id="5544172">z</span><span class="op" id="5544173">.</span><span class="ident" id="5544174">decompressor</span><span class="op" id="5544186">.</span><span class="ident" id="5544187">Read</span><span class="op" id="5544191">(</span><span class="ident" id="5544192">p</span><span class="op" id="5544193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544196">z</span><span class="op" id="5544197">.</span><span class="ident" id="5544198">digest</span><span class="op" id="5544204">.</span><span class="ident" id="5544205">Write</span><span class="op" id="5544210">(</span><span class="ident" id="5544211">p</span><span class="op" id="5544212">[</span><span class="num" id="5544213">0</span><span class="op" id="5544214">:</span><span class="ident" id="5544215">n</span><span class="op" id="5544216">]</span><span class="op" id="5544217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544220">if</span>&nbsp;<span class="ident" id="5544223">n</span>&nbsp;<span class="op" id="5544225">!=</span>&nbsp;<span class="num" id="5544228">0</span>&nbsp;<span class="op" id="5544230">||</span>&nbsp;<span class="ident" id="5544233">err</span>&nbsp;<span class="op" id="5544237">!=</span>&nbsp;<span class="ident" id="5544240">io</span><span class="op" id="5544242">.</span><span class="ident" id="5544243">EOF</span>&nbsp;<span class="op" id="5544247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544251">z</span><span class="op" id="5544252">.</span><span class="ident" id="5544253">err</span>&nbsp;<span class="op" id="5544257">=</span>&nbsp;<span class="ident" id="5544259">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544265">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5544273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5544277">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544312">if</span>&nbsp;<span class="ident" id="5544315">_</span><span class="op" id="5544316">,</span>&nbsp;<span class="ident" id="5544318">err</span>&nbsp;<span class="op" id="5544322">:=</span>&nbsp;<span class="ident" id="5544325">io</span><span class="op" id="5544327">.</span><span class="ident" id="5544328">ReadFull</span><span class="op" id="5544336">(</span><span class="ident" id="5544337">z</span><span class="op" id="5544338">.</span><span class="ident" id="5544339">r</span><span class="op" id="5544340">,</span>&nbsp;<span class="ident" id="5544342">z</span><span class="op" id="5544343">.</span><span class="ident" id="5544344">scratch</span><span class="op" id="5544351">[</span><span class="num" id="5544352">0</span><span class="op" id="5544353">:</span><span class="num" id="5544354">4</span><span class="op" id="5544355">]</span><span class="op" id="5544356">)</span><span class="op" id="5544357">;</span>&nbsp;<span class="ident" id="5544359">err</span>&nbsp;<span class="op" id="5544363">!=</span>&nbsp;<span class="ident" id="5544366">nil</span>&nbsp;<span class="op" id="5544370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544374">z</span><span class="op" id="5544375">.</span><span class="ident" id="5544376">err</span>&nbsp;<span class="op" id="5544380">=</span>&nbsp;<span class="ident" id="5544382">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544388">return</span>&nbsp;<span class="num" id="5544395">0</span><span class="op" id="5544396">,</span>&nbsp;<span class="ident" id="5544398">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5544403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5544406">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544465">checksum</span>&nbsp;<span class="op" id="5544474">:=</span>&nbsp;<span class="builtintype" id="5544477">uint32</span><span class="op" id="5544483">(</span><span class="ident" id="5544484">z</span><span class="op" id="5544485">.</span><span class="ident" id="5544486">scratch</span><span class="op" id="5544493">[</span><span class="num" id="5544494">0</span><span class="op" id="5544495">]</span><span class="op" id="5544496">)</span><span class="op" id="5544497">&lt;&lt;</span><span class="num" id="5544499">24</span>&nbsp;<span class="op" id="5544502">|</span>&nbsp;<span class="builtintype" id="5544504">uint32</span><span class="op" id="5544510">(</span><span class="ident" id="5544511">z</span><span class="op" id="5544512">.</span><span class="ident" id="5544513">scratch</span><span class="op" id="5544520">[</span><span class="num" id="5544521">1</span><span class="op" id="5544522">]</span><span class="op" id="5544523">)</span><span class="op" id="5544524">&lt;&lt;</span><span class="num" id="5544526">16</span>&nbsp;<span class="op" id="5544529">|</span>&nbsp;<span class="builtintype" id="5544531">uint32</span><span class="op" id="5544537">(</span><span class="ident" id="5544538">z</span><span class="op" id="5544539">.</span><span class="ident" id="5544540">scratch</span><span class="op" id="5544547">[</span><span class="num" id="5544548">2</span><span class="op" id="5544549">]</span><span class="op" id="5544550">)</span><span class="op" id="5544551">&lt;&lt;</span><span class="num" id="5544553">8</span>&nbsp;<span class="op" id="5544555">|</span>&nbsp;<span class="builtintype" id="5544557">uint32</span><span class="op" id="5544563">(</span><span class="ident" id="5544564">z</span><span class="op" id="5544565">.</span><span class="ident" id="5544566">scratch</span><span class="op" id="5544573">[</span><span class="num" id="5544574">3</span><span class="op" id="5544575">]</span><span class="op" id="5544576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544579">if</span>&nbsp;<span class="ident" id="5544582">checksum</span>&nbsp;<span class="op" id="5544591">!=</span>&nbsp;<span class="ident" id="5544594">z</span><span class="op" id="5544595">.</span><span class="ident" id="5544596">digest</span><span class="op" id="5544602">.</span><span class="ident" id="5544603">Sum32</span><span class="op" id="5544608">(</span><span class="op" id="5544609">)</span>&nbsp;<span class="op" id="5544611">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544615">z</span><span class="op" id="5544616">.</span><span class="ident" id="5544617">err</span>&nbsp;<span class="op" id="5544621">=</span>&nbsp;<span class="ident" id="5544623">ErrChecksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544637">return</span>&nbsp;<span class="num" id="5544644">0</span><span class="op" id="5544645">,</span>&nbsp;<span class="ident" id="5544647">z</span><span class="op" id="5544648">.</span><span class="ident" id="5544649">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5544654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544657">return</span><br>
<span class="lineno"></span><span class="op" id="5544664">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5544667">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5544753">func</span>&nbsp;<span class="op" id="5544758">(</span><span class="ident" id="5544759">z</span>&nbsp;<span class="op" id="5544761">*</span><span class="ident" id="5544762">reader</span><span class="op" id="5544768">)</span>&nbsp;<span class="ident" id="5544770">Close</span><span class="op" id="5544775">(</span><span class="op" id="5544776">)</span>&nbsp;<span class="builtintype" id="5544778">error</span>&nbsp;<span class="op" id="5544784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544787">if</span>&nbsp;<span class="ident" id="5544790">z</span><span class="op" id="5544791">.</span><span class="ident" id="5544792">err</span>&nbsp;<span class="op" id="5544796">!=</span>&nbsp;<span class="ident" id="5544799">nil</span>&nbsp;<span class="op" id="5544803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544807">return</span>&nbsp;<span class="ident" id="5544814">z</span><span class="op" id="5544815">.</span><span class="ident" id="5544816">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5544821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544824">z</span><span class="op" id="5544825">.</span><span class="ident" id="5544826">err</span>&nbsp;<span class="op" id="5544830">=</span>&nbsp;<span class="ident" id="5544832">z</span><span class="op" id="5544833">.</span><span class="ident" id="5544834">decompressor</span><span class="op" id="5544846">.</span><span class="ident" id="5544847">Close</span><span class="op" id="5544852">(</span><span class="op" id="5544853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544856">return</span>&nbsp;<span class="ident" id="5544863">z</span><span class="op" id="5544864">.</span><span class="ident" id="5544865">err</span><br>
<span class="lineno"></span><span class="op" id="5544869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5544872">func</span>&nbsp;<span class="op" id="5544877">(</span><span class="ident" id="5544878">z</span>&nbsp;<span class="op" id="5544880">*</span><span class="ident" id="5544881">reader</span><span class="op" id="5544887">)</span>&nbsp;<span class="ident" id="5544889">Reset</span><span class="op" id="5544894">(</span><span class="ident" id="5544895">r</span>&nbsp;<span class="ident" id="5544897">io</span><span class="op" id="5544899">.</span><span class="ident" id="5544900">Reader</span><span class="op" id="5544906">,</span>&nbsp;<span class="ident" id="5544908">dict</span>&nbsp;<span class="op" id="5544913">[</span><span class="op" id="5544914">]</span><span class="builtintype" id="5544915">byte</span><span class="op" id="5544919">)</span>&nbsp;<span class="builtintype" id="5544921">error</span>&nbsp;<span class="op" id="5544927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544930">if</span>&nbsp;<span class="ident" id="5544933">fr</span><span class="op" id="5544935">,</span>&nbsp;<span class="ident" id="5544937">ok</span>&nbsp;<span class="op" id="5544940">:=</span>&nbsp;<span class="ident" id="5544943">r</span><span class="op" id="5544944">.</span><span class="op" id="5544945">(</span><span class="ident" id="5544946">flate</span><span class="op" id="5544951">.</span><span class="ident" id="5544952">Reader</span><span class="op" id="5544958">)</span><span class="op" id="5544959">;</span>&nbsp;<span class="ident" id="5544961">ok</span>&nbsp;<span class="op" id="5544964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544968">z</span><span class="op" id="5544969">.</span><span class="ident" id="5544970">r</span>&nbsp;<span class="op" id="5544972">=</span>&nbsp;<span class="ident" id="5544974">fr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5544978">}</span>&nbsp;<span class="keyword" id="5544980">else</span>&nbsp;<span class="op" id="5544985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544989">z</span><span class="op" id="5544990">.</span><span class="ident" id="5544991">r</span>&nbsp;<span class="op" id="5544993">=</span>&nbsp;<span class="ident" id="5544995">bufio</span><span class="op" id="5545000">.</span><span class="ident" id="5545001">NewReader</span><span class="op" id="5545010">(</span><span class="ident" id="5545011">r</span><span class="op" id="5545012">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545018">_</span><span class="op" id="5545019">,</span>&nbsp;<span class="ident" id="5545021">err</span>&nbsp;<span class="op" id="5545025">:=</span>&nbsp;<span class="ident" id="5545028">io</span><span class="op" id="5545030">.</span><span class="ident" id="5545031">ReadFull</span><span class="op" id="5545039">(</span><span class="ident" id="5545040">z</span><span class="op" id="5545041">.</span><span class="ident" id="5545042">r</span><span class="op" id="5545043">,</span>&nbsp;<span class="ident" id="5545045">z</span><span class="op" id="5545046">.</span><span class="ident" id="5545047">scratch</span><span class="op" id="5545054">[</span><span class="num" id="5545055">0</span><span class="op" id="5545056">:</span><span class="num" id="5545057">2</span><span class="op" id="5545058">]</span><span class="op" id="5545059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545062">if</span>&nbsp;<span class="ident" id="5545065">err</span>&nbsp;<span class="op" id="5545069">!=</span>&nbsp;<span class="ident" id="5545072">nil</span>&nbsp;<span class="op" id="5545076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545080">return</span>&nbsp;<span class="ident" id="5545087">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545092">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545095">h</span>&nbsp;<span class="op" id="5545097">:=</span>&nbsp;<span class="builtintype" id="5545100">uint</span><span class="op" id="5545104">(</span><span class="ident" id="5545105">z</span><span class="op" id="5545106">.</span><span class="ident" id="5545107">scratch</span><span class="op" id="5545114">[</span><span class="num" id="5545115">0</span><span class="op" id="5545116">]</span><span class="op" id="5545117">)</span><span class="op" id="5545118">&lt;&lt;</span><span class="num" id="5545120">8</span>&nbsp;<span class="op" id="5545122">|</span>&nbsp;<span class="builtintype" id="5545124">uint</span><span class="op" id="5545128">(</span><span class="ident" id="5545129">z</span><span class="op" id="5545130">.</span><span class="ident" id="5545131">scratch</span><span class="op" id="5545138">[</span><span class="num" id="5545139">1</span><span class="op" id="5545140">]</span><span class="op" id="5545141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545144">if</span>&nbsp;<span class="op" id="5545147">(</span><span class="ident" id="5545148">z</span><span class="op" id="5545149">.</span><span class="ident" id="5545150">scratch</span><span class="op" id="5545157">[</span><span class="num" id="5545158">0</span><span class="op" id="5545159">]</span><span class="op" id="5545160">&amp;</span><span class="num" id="5545161">0x0f</span>&nbsp;<span class="op" id="5545166">!=</span>&nbsp;<span class="ident" id="5545169">zlibDeflate</span><span class="op" id="5545180">)</span>&nbsp;<span class="op" id="5545182">||</span>&nbsp;<span class="op" id="5545185">(</span><span class="ident" id="5545186">h</span><span class="op" id="5545187">%</span><span class="num" id="5545188">31</span>&nbsp;<span class="op" id="5545191">!=</span>&nbsp;<span class="num" id="5545194">0</span><span class="op" id="5545195">)</span>&nbsp;<span class="op" id="5545197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545201">return</span>&nbsp;<span class="ident" id="5545208">ErrHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545222">haveDict</span>&nbsp;<span class="op" id="5545231">:=</span>&nbsp;<span class="ident" id="5545234">z</span><span class="op" id="5545235">.</span><span class="ident" id="5545236">scratch</span><span class="op" id="5545243">[</span><span class="num" id="5545244">1</span><span class="op" id="5545245">]</span><span class="op" id="5545246">&amp;</span><span class="num" id="5545247">0x20</span>&nbsp;<span class="op" id="5545252">!=</span>&nbsp;<span class="num" id="5545255">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545258">if</span>&nbsp;<span class="ident" id="5545261">haveDict</span>&nbsp;<span class="op" id="5545270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545274">_</span><span class="op" id="5545275">,</span>&nbsp;<span class="ident" id="5545277">err</span>&nbsp;<span class="op" id="5545281">=</span>&nbsp;<span class="ident" id="5545283">io</span><span class="op" id="5545285">.</span><span class="ident" id="5545286">ReadFull</span><span class="op" id="5545294">(</span><span class="ident" id="5545295">z</span><span class="op" id="5545296">.</span><span class="ident" id="5545297">r</span><span class="op" id="5545298">,</span>&nbsp;<span class="ident" id="5545300">z</span><span class="op" id="5545301">.</span><span class="ident" id="5545302">scratch</span><span class="op" id="5545309">[</span><span class="num" id="5545310">0</span><span class="op" id="5545311">:</span><span class="num" id="5545312">4</span><span class="op" id="5545313">]</span><span class="op" id="5545314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545318">if</span>&nbsp;<span class="ident" id="5545321">err</span>&nbsp;<span class="op" id="5545325">!=</span>&nbsp;<span class="ident" id="5545328">nil</span>&nbsp;<span class="op" id="5545332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545337">return</span>&nbsp;<span class="ident" id="5545344">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545350">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545354">checksum</span>&nbsp;<span class="op" id="5545363">:=</span>&nbsp;<span class="builtintype" id="5545366">uint32</span><span class="op" id="5545372">(</span><span class="ident" id="5545373">z</span><span class="op" id="5545374">.</span><span class="ident" id="5545375">scratch</span><span class="op" id="5545382">[</span><span class="num" id="5545383">0</span><span class="op" id="5545384">]</span><span class="op" id="5545385">)</span><span class="op" id="5545386">&lt;&lt;</span><span class="num" id="5545388">24</span>&nbsp;<span class="op" id="5545391">|</span>&nbsp;<span class="builtintype" id="5545393">uint32</span><span class="op" id="5545399">(</span><span class="ident" id="5545400">z</span><span class="op" id="5545401">.</span><span class="ident" id="5545402">scratch</span><span class="op" id="5545409">[</span><span class="num" id="5545410">1</span><span class="op" id="5545411">]</span><span class="op" id="5545412">)</span><span class="op" id="5545413">&lt;&lt;</span><span class="num" id="5545415">16</span>&nbsp;<span class="op" id="5545418">|</span>&nbsp;<span class="builtintype" id="5545420">uint32</span><span class="op" id="5545426">(</span><span class="ident" id="5545427">z</span><span class="op" id="5545428">.</span><span class="ident" id="5545429">scratch</span><span class="op" id="5545436">[</span><span class="num" id="5545437">2</span><span class="op" id="5545438">]</span><span class="op" id="5545439">)</span><span class="op" id="5545440">&lt;&lt;</span><span class="num" id="5545442">8</span>&nbsp;<span class="op" id="5545444">|</span>&nbsp;<span class="builtintype" id="5545446">uint32</span><span class="op" id="5545452">(</span><span class="ident" id="5545453">z</span><span class="op" id="5545454">.</span><span class="ident" id="5545455">scratch</span><span class="op" id="5545462">[</span><span class="num" id="5545463">3</span><span class="op" id="5545464">]</span><span class="op" id="5545465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545469">if</span>&nbsp;<span class="ident" id="5545472">checksum</span>&nbsp;<span class="op" id="5545481">!=</span>&nbsp;<span class="ident" id="5545484">adler32</span><span class="op" id="5545491">.</span><span class="ident" id="5545492">Checksum</span><span class="op" id="5545500">(</span><span class="ident" id="5545501">dict</span><span class="op" id="5545505">)</span>&nbsp;<span class="op" id="5545507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545512">return</span>&nbsp;<span class="ident" id="5545519">ErrDictionary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545538">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545541">if</span>&nbsp;<span class="ident" id="5545544">z</span><span class="op" id="5545545">.</span><span class="ident" id="5545546">decompressor</span>&nbsp;<span class="op" id="5545559">==</span>&nbsp;<span class="ident" id="5545562">nil</span>&nbsp;<span class="op" id="5545566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545570">if</span>&nbsp;<span class="ident" id="5545573">haveDict</span>&nbsp;<span class="op" id="5545582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545587">z</span><span class="op" id="5545588">.</span><span class="ident" id="5545589">decompressor</span>&nbsp;<span class="op" id="5545602">=</span>&nbsp;<span class="ident" id="5545604">flate</span><span class="op" id="5545609">.</span><span class="ident" id="5545610">NewReaderDict</span><span class="op" id="5545623">(</span><span class="ident" id="5545624">z</span><span class="op" id="5545625">.</span><span class="ident" id="5545626">r</span><span class="op" id="5545627">,</span>&nbsp;<span class="ident" id="5545629">dict</span><span class="op" id="5545633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545637">}</span>&nbsp;<span class="keyword" id="5545639">else</span>&nbsp;<span class="op" id="5545644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545649">z</span><span class="op" id="5545650">.</span><span class="ident" id="5545651">decompressor</span>&nbsp;<span class="op" id="5545664">=</span>&nbsp;<span class="ident" id="5545666">flate</span><span class="op" id="5545671">.</span><span class="ident" id="5545672">NewReader</span><span class="op" id="5545681">(</span><span class="ident" id="5545682">z</span><span class="op" id="5545683">.</span><span class="ident" id="5545684">r</span><span class="op" id="5545685">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545692">}</span>&nbsp;<span class="keyword" id="5545694">else</span>&nbsp;<span class="op" id="5545699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545703">z</span><span class="op" id="5545704">.</span><span class="ident" id="5545705">decompressor</span><span class="op" id="5545717">.</span><span class="op" id="5545718">(</span><span class="ident" id="5545719">flate</span><span class="op" id="5545724">.</span><span class="ident" id="5545725">Resetter</span><span class="op" id="5545733">)</span><span class="op" id="5545734">.</span><span class="ident" id="5545735">Reset</span><span class="op" id="5545740">(</span><span class="ident" id="5545741">z</span><span class="op" id="5545742">.</span><span class="ident" id="5545743">r</span><span class="op" id="5545744">,</span>&nbsp;<span class="ident" id="5545746">dict</span><span class="op" id="5545750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5545753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545756">z</span><span class="op" id="5545757">.</span><span class="ident" id="5545758">digest</span>&nbsp;<span class="op" id="5545765">=</span>&nbsp;<span class="ident" id="5545767">adler32</span><span class="op" id="5545774">.</span><span class="ident" id="5545775">New</span><span class="op" id="5545778">(</span><span class="op" id="5545779">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545782">return</span>&nbsp;<span class="ident" id="5545789">nil</span><br>
<span class="lineno"></span><span class="op" id="5545793">}</span>
</div>
</body>
</html>
