<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4925248">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4925303">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4925357">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4925408">package</span>&nbsp;<span class="ident" id="4925416">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4925423">import</span>&nbsp;<span class="op" id="4925430">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4925433">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4925442">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4925452">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4925457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4925460">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="4925528">var</span>&nbsp;<span class="ident" id="4925532">ErrFormat</span>&nbsp;<span class="op" id="4925542">=</span>&nbsp;<span class="ident" id="4925544">errors</span><span class="op" id="4925550">.</span><span class="ident" id="4925551">New</span><span class="op" id="4925554">(</span><span class="string" id="4925555">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="4925578">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4925581">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="4925658">type</span>&nbsp;<span class="ident" id="4925663">format</span>&nbsp;<span class="keyword" id="4925670">struct</span>&nbsp;<span class="op" id="4925677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925680">name</span><span class="op" id="4925684">,</span>&nbsp;<span class="ident" id="4925686">magic</span>&nbsp;&nbsp;<span class="builtintype" id="4925693">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925701">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4925714">func</span><span class="op" id="4925718">(</span><span class="ident" id="4925719">io</span><span class="op" id="4925721">.</span><span class="ident" id="4925722">Reader</span><span class="op" id="4925728">)</span>&nbsp;<span class="op" id="4925730">(</span><span class="ident" id="4925731">Image</span><span class="op" id="4925736">,</span>&nbsp;<span class="builtintype" id="4925738">error</span><span class="op" id="4925743">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925746">decodeConfig</span>&nbsp;<span class="keyword" id="4925759">func</span><span class="op" id="4925763">(</span><span class="ident" id="4925764">io</span><span class="op" id="4925766">.</span><span class="ident" id="4925767">Reader</span><span class="op" id="4925773">)</span>&nbsp;<span class="op" id="4925775">(</span><span class="ident" id="4925776">Config</span><span class="op" id="4925782">,</span>&nbsp;<span class="builtintype" id="4925784">error</span><span class="op" id="4925789">)</span><br>
<span class="lineno"></span><span class="op" id="4925791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4925794">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="4925840">var</span>&nbsp;<span class="ident" id="4925844">formats</span>&nbsp;<span class="op" id="4925852">[</span><span class="op" id="4925853">]</span><span class="ident" id="4925854">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="4925862">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="4925925">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4925982">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="4926060">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="4926126">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="4926184">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="4926253">func</span>&nbsp;<span class="ident" id="4926258">RegisterFormat</span><span class="op" id="4926272">(</span><span class="ident" id="4926273">name</span><span class="op" id="4926277">,</span>&nbsp;<span class="ident" id="4926279">magic</span>&nbsp;<span class="builtintype" id="4926285">string</span><span class="op" id="4926291">,</span>&nbsp;<span class="ident" id="4926293">decode</span>&nbsp;<span class="keyword" id="4926300">func</span><span class="op" id="4926304">(</span><span class="ident" id="4926305">io</span><span class="op" id="4926307">.</span><span class="ident" id="4926308">Reader</span><span class="op" id="4926314">)</span>&nbsp;<span class="op" id="4926316">(</span><span class="ident" id="4926317">Image</span><span class="op" id="4926322">,</span>&nbsp;<span class="builtintype" id="4926324">error</span><span class="op" id="4926329">)</span><span class="op" id="4926330">,</span>&nbsp;<span class="ident" id="4926332">decodeConfig</span>&nbsp;<span class="keyword" id="4926345">func</span><span class="op" id="4926349">(</span><span class="ident" id="4926350">io</span><span class="op" id="4926352">.</span><span class="ident" id="4926353">Reader</span><span class="op" id="4926359">)</span>&nbsp;<span class="op" id="4926361">(</span><span class="ident" id="4926362">Config</span><span class="op" id="4926368">,</span>&nbsp;<span class="builtintype" id="4926370">error</span><span class="op" id="4926375">)</span><span class="op" id="4926376">)</span>&nbsp;<span class="op" id="4926378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926381">formats</span>&nbsp;<span class="op" id="4926389">=</span>&nbsp;<span class="builtinfunc" id="4926391">append</span><span class="op" id="4926397">(</span><span class="ident" id="4926398">formats</span><span class="op" id="4926405">,</span>&nbsp;<span class="ident" id="4926407">format</span><span class="op" id="4926413">{</span><span class="ident" id="4926414">name</span><span class="op" id="4926418">,</span>&nbsp;<span class="ident" id="4926420">magic</span><span class="op" id="4926425">,</span>&nbsp;<span class="ident" id="4926427">decode</span><span class="op" id="4926433">,</span>&nbsp;<span class="ident" id="4926435">decodeConfig</span><span class="op" id="4926447">}</span><span class="op" id="4926448">)</span><br>
<span class="lineno"></span><span class="op" id="4926450">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="4926453">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="4926507">type</span>&nbsp;<span class="ident" id="4926512">reader</span>&nbsp;<span class="keyword" id="4926519">interface</span>&nbsp;<span class="op" id="4926529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926532">io</span><span class="op" id="4926534">.</span><span class="ident" id="4926535">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926543">Peek</span><span class="op" id="4926547">(</span><span class="builtintype" id="4926548">int</span><span class="op" id="4926551">)</span>&nbsp;<span class="op" id="4926553">(</span><span class="op" id="4926554">[</span><span class="op" id="4926555">]</span><span class="builtintype" id="4926556">byte</span><span class="op" id="4926560">,</span>&nbsp;<span class="builtintype" id="4926562">error</span><span class="op" id="4926567">)</span><br>
<span class="lineno">40</span><span class="op" id="4926569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4926572">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="4926619">func</span>&nbsp;<span class="ident" id="4926624">asReader</span><span class="op" id="4926632">(</span><span class="ident" id="4926633">r</span>&nbsp;<span class="ident" id="4926635">io</span><span class="op" id="4926637">.</span><span class="ident" id="4926638">Reader</span><span class="op" id="4926644">)</span>&nbsp;<span class="ident" id="4926646">reader</span>&nbsp;<span class="op" id="4926653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926656">if</span>&nbsp;<span class="ident" id="4926659">rr</span><span class="op" id="4926661">,</span>&nbsp;<span class="ident" id="4926663">ok</span>&nbsp;<span class="op" id="4926666">:=</span>&nbsp;<span class="ident" id="4926669">r</span><span class="op" id="4926670">.</span><span class="op" id="4926671">(</span><span class="ident" id="4926672">reader</span><span class="op" id="4926678">)</span><span class="op" id="4926679">;</span>&nbsp;<span class="ident" id="4926681">ok</span>&nbsp;<span class="op" id="4926684">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926688">return</span>&nbsp;<span class="ident" id="4926695">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926702">return</span>&nbsp;<span class="ident" id="4926709">bufio</span><span class="op" id="4926714">.</span><span class="ident" id="4926715">NewReader</span><span class="op" id="4926724">(</span><span class="ident" id="4926725">r</span><span class="op" id="4926726">)</span><br>
<span class="lineno"></span><span class="op" id="4926728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="4926731">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="4926806">func</span>&nbsp;<span class="ident" id="4926811">match</span><span class="op" id="4926816">(</span><span class="ident" id="4926817">magic</span>&nbsp;<span class="builtintype" id="4926823">string</span><span class="op" id="4926829">,</span>&nbsp;<span class="ident" id="4926831">b</span>&nbsp;<span class="op" id="4926833">[</span><span class="op" id="4926834">]</span><span class="builtintype" id="4926835">byte</span><span class="op" id="4926839">)</span>&nbsp;<span class="builtintype" id="4926841">bool</span>&nbsp;<span class="op" id="4926846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926849">if</span>&nbsp;<span class="builtinfunc" id="4926852">len</span><span class="op" id="4926855">(</span><span class="ident" id="4926856">magic</span><span class="op" id="4926861">)</span>&nbsp;<span class="op" id="4926863">!=</span>&nbsp;<span class="builtinfunc" id="4926866">len</span><span class="op" id="4926869">(</span><span class="ident" id="4926870">b</span><span class="op" id="4926871">)</span>&nbsp;<span class="op" id="4926873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926877">return</span>&nbsp;<span class="builtintype" id="4926884">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926891">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926894">for</span>&nbsp;<span class="ident" id="4926898">i</span><span class="op" id="4926899">,</span>&nbsp;<span class="ident" id="4926901">c</span>&nbsp;<span class="op" id="4926903">:=</span>&nbsp;<span class="keyword" id="4926906">range</span>&nbsp;<span class="ident" id="4926912">b</span>&nbsp;<span class="op" id="4926914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926918">if</span>&nbsp;<span class="ident" id="4926921">magic</span><span class="op" id="4926926">[</span><span class="ident" id="4926927">i</span><span class="op" id="4926928">]</span>&nbsp;<span class="op" id="4926930">!=</span>&nbsp;<span class="ident" id="4926933">c</span>&nbsp;<span class="op" id="4926935">&amp;&amp;</span>&nbsp;<span class="ident" id="4926938">magic</span><span class="op" id="4926943">[</span><span class="ident" id="4926944">i</span><span class="op" id="4926945">]</span>&nbsp;<span class="op" id="4926947">!=</span>&nbsp;<span class="string" id="4926950">&#39;?&#39;</span>&nbsp;<span class="op" id="4926954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926959">return</span>&nbsp;<span class="builtintype" id="4926966">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926977">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926980">return</span>&nbsp;<span class="builtintype" id="4926987">true</span><br>
<span class="lineno"></span><span class="op" id="4926992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4926995">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="4927039">func</span>&nbsp;<span class="ident" id="4927044">sniff</span><span class="op" id="4927049">(</span><span class="ident" id="4927050">r</span>&nbsp;<span class="ident" id="4927052">reader</span><span class="op" id="4927058">)</span>&nbsp;<span class="ident" id="4927060">format</span>&nbsp;<span class="op" id="4927067">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927070">for</span>&nbsp;<span class="ident" id="4927074">_</span><span class="op" id="4927075">,</span>&nbsp;<span class="ident" id="4927077">f</span>&nbsp;<span class="op" id="4927079">:=</span>&nbsp;<span class="keyword" id="4927082">range</span>&nbsp;<span class="ident" id="4927088">formats</span>&nbsp;<span class="op" id="4927096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927100">b</span><span class="op" id="4927101">,</span>&nbsp;<span class="ident" id="4927103">err</span>&nbsp;<span class="op" id="4927107">:=</span>&nbsp;<span class="ident" id="4927110">r</span><span class="op" id="4927111">.</span><span class="ident" id="4927112">Peek</span><span class="op" id="4927116">(</span><span class="builtinfunc" id="4927117">len</span><span class="op" id="4927120">(</span><span class="ident" id="4927121">f</span><span class="op" id="4927122">.</span><span class="ident" id="4927123">magic</span><span class="op" id="4927128">)</span><span class="op" id="4927129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927133">if</span>&nbsp;<span class="ident" id="4927136">err</span>&nbsp;<span class="op" id="4927140">==</span>&nbsp;<span class="ident" id="4927143">nil</span>&nbsp;<span class="op" id="4927147">&amp;&amp;</span>&nbsp;<span class="ident" id="4927150">match</span><span class="op" id="4927155">(</span><span class="ident" id="4927156">f</span><span class="op" id="4927157">.</span><span class="ident" id="4927158">magic</span><span class="op" id="4927163">,</span>&nbsp;<span class="ident" id="4927165">b</span><span class="op" id="4927166">)</span>&nbsp;<span class="op" id="4927168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927173">return</span>&nbsp;<span class="ident" id="4927180">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927184">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927190">return</span>&nbsp;<span class="ident" id="4927197">format</span><span class="op" id="4927203">{</span><span class="op" id="4927204">}</span><br>
<span class="lineno"></span><span class="op" id="4927206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4927209">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="4927282">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="4927357">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="4927432">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="4927453">func</span>&nbsp;<span class="ident" id="4927458">Decode</span><span class="op" id="4927464">(</span><span class="ident" id="4927465">r</span>&nbsp;<span class="ident" id="4927467">io</span><span class="op" id="4927469">.</span><span class="ident" id="4927470">Reader</span><span class="op" id="4927476">)</span>&nbsp;<span class="op" id="4927478">(</span><span class="ident" id="4927479">Image</span><span class="op" id="4927484">,</span>&nbsp;<span class="builtintype" id="4927486">string</span><span class="op" id="4927492">,</span>&nbsp;<span class="builtintype" id="4927494">error</span><span class="op" id="4927499">)</span>&nbsp;<span class="op" id="4927501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927504">rr</span>&nbsp;<span class="op" id="4927507">:=</span>&nbsp;<span class="ident" id="4927510">asReader</span><span class="op" id="4927518">(</span><span class="ident" id="4927519">r</span><span class="op" id="4927520">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927523">f</span>&nbsp;<span class="op" id="4927525">:=</span>&nbsp;<span class="ident" id="4927528">sniff</span><span class="op" id="4927533">(</span><span class="ident" id="4927534">rr</span><span class="op" id="4927536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927539">if</span>&nbsp;<span class="ident" id="4927542">f</span><span class="op" id="4927543">.</span><span class="ident" id="4927544">decode</span>&nbsp;<span class="op" id="4927551">==</span>&nbsp;<span class="ident" id="4927554">nil</span>&nbsp;<span class="op" id="4927558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927562">return</span>&nbsp;<span class="ident" id="4927569">nil</span><span class="op" id="4927572">,</span>&nbsp;<span class="string" id="4927574">&#34;&#34;</span><span class="op" id="4927576">,</span>&nbsp;<span class="ident" id="4927578">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927592">m</span><span class="op" id="4927593">,</span>&nbsp;<span class="ident" id="4927595">err</span>&nbsp;<span class="op" id="4927599">:=</span>&nbsp;<span class="ident" id="4927602">f</span><span class="op" id="4927603">.</span><span class="ident" id="4927604">decode</span><span class="op" id="4927610">(</span><span class="ident" id="4927611">rr</span><span class="op" id="4927613">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927616">return</span>&nbsp;<span class="ident" id="4927623">m</span><span class="op" id="4927624">,</span>&nbsp;<span class="ident" id="4927626">f</span><span class="op" id="4927627">.</span><span class="ident" id="4927628">name</span><span class="op" id="4927632">,</span>&nbsp;<span class="ident" id="4927634">err</span><br>
<span class="lineno"></span><span class="op" id="4927638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4927641">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="4927717">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="4927796">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4927873">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="4927924">func</span>&nbsp;<span class="ident" id="4927929">DecodeConfig</span><span class="op" id="4927941">(</span><span class="ident" id="4927942">r</span>&nbsp;<span class="ident" id="4927944">io</span><span class="op" id="4927946">.</span><span class="ident" id="4927947">Reader</span><span class="op" id="4927953">)</span>&nbsp;<span class="op" id="4927955">(</span><span class="ident" id="4927956">Config</span><span class="op" id="4927962">,</span>&nbsp;<span class="builtintype" id="4927964">string</span><span class="op" id="4927970">,</span>&nbsp;<span class="builtintype" id="4927972">error</span><span class="op" id="4927977">)</span>&nbsp;<span class="op" id="4927979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927982">rr</span>&nbsp;<span class="op" id="4927985">:=</span>&nbsp;<span class="ident" id="4927988">asReader</span><span class="op" id="4927996">(</span><span class="ident" id="4927997">r</span><span class="op" id="4927998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928001">f</span>&nbsp;<span class="op" id="4928003">:=</span>&nbsp;<span class="ident" id="4928006">sniff</span><span class="op" id="4928011">(</span><span class="ident" id="4928012">rr</span><span class="op" id="4928014">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928017">if</span>&nbsp;<span class="ident" id="4928020">f</span><span class="op" id="4928021">.</span><span class="ident" id="4928022">decodeConfig</span>&nbsp;<span class="op" id="4928035">==</span>&nbsp;<span class="ident" id="4928038">nil</span>&nbsp;<span class="op" id="4928042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928046">return</span>&nbsp;<span class="ident" id="4928053">Config</span><span class="op" id="4928059">{</span><span class="op" id="4928060">}</span><span class="op" id="4928061">,</span>&nbsp;<span class="string" id="4928063">&#34;&#34;</span><span class="op" id="4928065">,</span>&nbsp;<span class="ident" id="4928067">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928081">c</span><span class="op" id="4928082">,</span>&nbsp;<span class="ident" id="4928084">err</span>&nbsp;<span class="op" id="4928088">:=</span>&nbsp;<span class="ident" id="4928091">f</span><span class="op" id="4928092">.</span><span class="ident" id="4928093">decodeConfig</span><span class="op" id="4928105">(</span><span class="ident" id="4928106">rr</span><span class="op" id="4928108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928111">return</span>&nbsp;<span class="ident" id="4928118">c</span><span class="op" id="4928119">,</span>&nbsp;<span class="ident" id="4928121">f</span><span class="op" id="4928122">.</span><span class="ident" id="4928123">name</span><span class="op" id="4928127">,</span>&nbsp;<span class="ident" id="4928129">err</span><br>
<span class="lineno">100</span><span class="op" id="4928133">}</span>
</div>
</body>
</html>
