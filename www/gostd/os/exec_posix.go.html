<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html" class="current">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2426217">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2426272">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2426326">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2426377">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2426455">package</span>&nbsp;<span class="ident" id="2426463">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2426467">import</span>&nbsp;<span class="op" id="2426474">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426477">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2426487">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2426490">//&nbsp;The&nbsp;only&nbsp;signal&nbsp;values&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;present&nbsp;on&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2426556">//&nbsp;are&nbsp;Interrupt&nbsp;(send&nbsp;the&nbsp;process&nbsp;an&nbsp;interrupt)&nbsp;and&nbsp;Kill&nbsp;(force</span><br>
<span class="lineno">15</span><span class="comment" id="2426621">//&nbsp;the&nbsp;process&nbsp;to&nbsp;exit).</span><br>
<span class="lineno"></span><span class="keyword" id="2426646">var</span>&nbsp;<span class="op" id="2426650">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2426653">Interrupt</span>&nbsp;<span class="ident" id="2426663">Signal</span>&nbsp;<span class="op" id="2426670">=</span>&nbsp;<span class="ident" id="2426672">syscall</span><span class="op" id="2426679">.</span><span class="ident" id="2426680">SIGINT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2426688">Kill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2426698">Signal</span>&nbsp;<span class="op" id="2426705">=</span>&nbsp;<span class="ident" id="2426707">syscall</span><span class="op" id="2426714">.</span><span class="ident" id="2426715">SIGKILL</span><br>
<span class="lineno"></span><span class="op" id="2426723">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2426726">func</span>&nbsp;<span class="ident" id="2426731">startProcess</span><span class="op" id="2426743">(</span><span class="ident" id="2426744">name</span>&nbsp;<span class="builtintype" id="2426749">string</span><span class="op" id="2426755">,</span>&nbsp;<span class="ident" id="2426757">argv</span>&nbsp;<span class="op" id="2426762">[</span><span class="op" id="2426763">]</span><span class="builtintype" id="2426764">string</span><span class="op" id="2426770">,</span>&nbsp;<span class="ident" id="2426772">attr</span>&nbsp;<span class="op" id="2426777">*</span><span class="ident" id="2426778">ProcAttr</span><span class="op" id="2426786">)</span>&nbsp;<span class="op" id="2426788">(</span><span class="ident" id="2426789">p</span>&nbsp;<span class="op" id="2426791">*</span><span class="ident" id="2426792">Process</span><span class="op" id="2426799">,</span>&nbsp;<span class="ident" id="2426801">err</span>&nbsp;<span class="builtintype" id="2426805">error</span><span class="op" id="2426810">)</span>&nbsp;<span class="op" id="2426812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2426815">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;SysProcAttr&nbsp;(ie.&nbsp;no&nbsp;Chroot&nbsp;or&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2426872">//&nbsp;UID/GID),&nbsp;double-check&nbsp;existence&nbsp;of&nbsp;the&nbsp;directory&nbsp;we&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2426934">//&nbsp;to&nbsp;chdir&nbsp;into.&nbsp;&nbsp;We&nbsp;can&nbsp;make&nbsp;the&nbsp;error&nbsp;clearer&nbsp;this&nbsp;way.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2426994">if</span>&nbsp;<span class="ident" id="2426997">attr</span>&nbsp;<span class="op" id="2427002">!=</span>&nbsp;<span class="builtintype" id="2427005">nil</span>&nbsp;<span class="op" id="2427009">&amp;&amp;</span>&nbsp;<span class="ident" id="2427012">attr</span><span class="op" id="2427016">.</span><span class="ident" id="2427017">Sys</span>&nbsp;<span class="op" id="2427021">==</span>&nbsp;<span class="builtintype" id="2427024">nil</span>&nbsp;<span class="op" id="2427028">&amp;&amp;</span>&nbsp;<span class="ident" id="2427031">attr</span><span class="op" id="2427035">.</span><span class="ident" id="2427036">Dir</span>&nbsp;<span class="op" id="2427040">!=</span>&nbsp;<span class="string" id="2427043">&#34;&#34;</span>&nbsp;<span class="op" id="2427046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427050">if</span>&nbsp;<span class="ident" id="2427053">_</span><span class="op" id="2427054">,</span>&nbsp;<span class="ident" id="2427056">err</span>&nbsp;<span class="op" id="2427060">:=</span>&nbsp;<span class="ident" id="2427063">Stat</span><span class="op" id="2427067">(</span><span class="ident" id="2427068">attr</span><span class="op" id="2427072">.</span><span class="ident" id="2427073">Dir</span><span class="op" id="2427076">)</span><span class="op" id="2427077">;</span>&nbsp;<span class="ident" id="2427079">err</span>&nbsp;<span class="op" id="2427083">!=</span>&nbsp;<span class="builtintype" id="2427086">nil</span>&nbsp;<span class="op" id="2427090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427095">pe</span>&nbsp;<span class="op" id="2427098">:=</span>&nbsp;<span class="ident" id="2427101">err</span><span class="op" id="2427104">.</span><span class="op" id="2427105">(</span><span class="op" id="2427106">*</span><span class="ident" id="2427107">PathError</span><span class="op" id="2427116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427121">pe</span><span class="op" id="2427123">.</span><span class="ident" id="2427124">Op</span>&nbsp;<span class="op" id="2427127">=</span>&nbsp;<span class="string" id="2427129">&#34;chdir&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427140">return</span>&nbsp;<span class="builtintype" id="2427147">nil</span><span class="op" id="2427150">,</span>&nbsp;<span class="ident" id="2427152">pe</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2427157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2427160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427164">sysattr</span>&nbsp;<span class="op" id="2427172">:=</span>&nbsp;<span class="op" id="2427175">&amp;</span><span class="ident" id="2427176">syscall</span><span class="op" id="2427183">.</span><span class="ident" id="2427184">ProcAttr</span><span class="op" id="2427192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427196">Dir</span><span class="op" id="2427199">:</span>&nbsp;<span class="ident" id="2427201">attr</span><span class="op" id="2427205">.</span><span class="ident" id="2427206">Dir</span><span class="op" id="2427209">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427213">Env</span><span class="op" id="2427216">:</span>&nbsp;<span class="ident" id="2427218">attr</span><span class="op" id="2427222">.</span><span class="ident" id="2427223">Env</span><span class="op" id="2427226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427230">Sys</span><span class="op" id="2427233">:</span>&nbsp;<span class="ident" id="2427235">attr</span><span class="op" id="2427239">.</span><span class="ident" id="2427240">Sys</span><span class="op" id="2427243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2427246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427249">if</span>&nbsp;<span class="ident" id="2427252">sysattr</span><span class="op" id="2427259">.</span><span class="ident" id="2427260">Env</span>&nbsp;<span class="op" id="2427264">==</span>&nbsp;<span class="builtintype" id="2427267">nil</span>&nbsp;<span class="op" id="2427271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427275">sysattr</span><span class="op" id="2427282">.</span><span class="ident" id="2427283">Env</span>&nbsp;<span class="op" id="2427287">=</span>&nbsp;<span class="ident" id="2427289">Environ</span><span class="op" id="2427296">(</span><span class="op" id="2427297">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2427300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427303">for</span>&nbsp;<span class="ident" id="2427307">_</span><span class="op" id="2427308">,</span>&nbsp;<span class="ident" id="2427310">f</span>&nbsp;<span class="op" id="2427312">:=</span>&nbsp;<span class="keyword" id="2427315">range</span>&nbsp;<span class="ident" id="2427321">attr</span><span class="op" id="2427325">.</span><span class="ident" id="2427326">Files</span>&nbsp;<span class="op" id="2427332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427336">sysattr</span><span class="op" id="2427343">.</span><span class="ident" id="2427344">Files</span>&nbsp;<span class="op" id="2427350">=</span>&nbsp;<span class="builtinfunc" id="2427352">append</span><span class="op" id="2427358">(</span><span class="ident" id="2427359">sysattr</span><span class="op" id="2427366">.</span><span class="ident" id="2427367">Files</span><span class="op" id="2427372">,</span>&nbsp;<span class="ident" id="2427374">f</span><span class="op" id="2427375">.</span><span class="ident" id="2427376">Fd</span><span class="op" id="2427378">(</span><span class="op" id="2427379">)</span><span class="op" id="2427380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2427383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427387">pid</span><span class="op" id="2427390">,</span>&nbsp;<span class="ident" id="2427392">h</span><span class="op" id="2427393">,</span>&nbsp;<span class="ident" id="2427395">e</span>&nbsp;<span class="op" id="2427397">:=</span>&nbsp;<span class="ident" id="2427400">syscall</span><span class="op" id="2427407">.</span><span class="ident" id="2427408">StartProcess</span><span class="op" id="2427420">(</span><span class="ident" id="2427421">name</span><span class="op" id="2427425">,</span>&nbsp;<span class="ident" id="2427427">argv</span><span class="op" id="2427431">,</span>&nbsp;<span class="ident" id="2427433">sysattr</span><span class="op" id="2427440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427443">if</span>&nbsp;<span class="ident" id="2427446">e</span>&nbsp;<span class="op" id="2427448">!=</span>&nbsp;<span class="builtintype" id="2427451">nil</span>&nbsp;<span class="op" id="2427455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427459">return</span>&nbsp;<span class="builtintype" id="2427466">nil</span><span class="op" id="2427469">,</span>&nbsp;<span class="op" id="2427471">&amp;</span><span class="ident" id="2427472">PathError</span><span class="op" id="2427481">{</span><span class="string" id="2427482">&#34;fork/exec&#34;</span><span class="op" id="2427493">,</span>&nbsp;<span class="ident" id="2427495">name</span><span class="op" id="2427499">,</span>&nbsp;<span class="ident" id="2427501">e</span><span class="op" id="2427502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2427505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427508">return</span>&nbsp;<span class="ident" id="2427515">newProcess</span><span class="op" id="2427525">(</span><span class="ident" id="2427526">pid</span><span class="op" id="2427529">,</span>&nbsp;<span class="ident" id="2427531">h</span><span class="op" id="2427532">)</span><span class="op" id="2427533">,</span>&nbsp;<span class="builtintype" id="2427535">nil</span><br>
<span class="lineno">50</span><span class="op" id="2427539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2427542">func</span>&nbsp;<span class="op" id="2427547">(</span><span class="ident" id="2427548">p</span>&nbsp;<span class="op" id="2427550">*</span><span class="ident" id="2427551">Process</span><span class="op" id="2427558">)</span>&nbsp;<span class="ident" id="2427560">kill</span><span class="op" id="2427564">(</span><span class="op" id="2427565">)</span>&nbsp;<span class="builtintype" id="2427567">error</span>&nbsp;<span class="op" id="2427573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427576">return</span>&nbsp;<span class="ident" id="2427583">p</span><span class="op" id="2427584">.</span><span class="ident" id="2427585">Signal</span><span class="op" id="2427591">(</span><span class="ident" id="2427592">Kill</span><span class="op" id="2427596">)</span><br>
<span class="lineno"></span><span class="op" id="2427598">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2427601">//&nbsp;ProcessState&nbsp;stores&nbsp;information&nbsp;about&nbsp;a&nbsp;process,&nbsp;as&nbsp;reported&nbsp;by&nbsp;Wait.</span><br>
<span class="lineno"></span><span class="keyword" id="2427674">type</span>&nbsp;<span class="ident" id="2427679">ProcessState</span>&nbsp;<span class="keyword" id="2427692">struct</span>&nbsp;<span class="op" id="2427699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427702">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2427709">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427728">//&nbsp;The&nbsp;process&#39;s&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427750">status</span>&nbsp;<span class="ident" id="2427757">syscall</span><span class="op" id="2427764">.</span><span class="ident" id="2427765">WaitStatus</span>&nbsp;<span class="comment" id="2427776">//&nbsp;System-dependent&nbsp;status&nbsp;info.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427810">rusage</span>&nbsp;<span class="op" id="2427817">*</span><span class="ident" id="2427818">syscall</span><span class="op" id="2427825">.</span><span class="ident" id="2427826">Rusage</span><br>
<span class="lineno"></span><span class="op" id="2427833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2427836">//&nbsp;Pid&nbsp;returns&nbsp;the&nbsp;process&nbsp;id&nbsp;of&nbsp;the&nbsp;exited&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="2427889">func</span>&nbsp;<span class="op" id="2427894">(</span><span class="ident" id="2427895">p</span>&nbsp;<span class="op" id="2427897">*</span><span class="ident" id="2427898">ProcessState</span><span class="op" id="2427910">)</span>&nbsp;<span class="ident" id="2427912">Pid</span><span class="op" id="2427915">(</span><span class="op" id="2427916">)</span>&nbsp;<span class="builtintype" id="2427918">int</span>&nbsp;<span class="op" id="2427922">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427925">return</span>&nbsp;<span class="ident" id="2427932">p</span><span class="op" id="2427933">.</span><span class="ident" id="2427934">pid</span><br>
<span class="lineno"></span><span class="op" id="2427938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2427941">func</span>&nbsp;<span class="op" id="2427946">(</span><span class="ident" id="2427947">p</span>&nbsp;<span class="op" id="2427949">*</span><span class="ident" id="2427950">ProcessState</span><span class="op" id="2427962">)</span>&nbsp;<span class="ident" id="2427964">exited</span><span class="op" id="2427970">(</span><span class="op" id="2427971">)</span>&nbsp;<span class="builtintype" id="2427973">bool</span>&nbsp;<span class="op" id="2427978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2427981">return</span>&nbsp;<span class="ident" id="2427988">p</span><span class="op" id="2427989">.</span><span class="ident" id="2427990">status</span><span class="op" id="2427996">.</span><span class="ident" id="2427997">Exited</span><span class="op" id="2428003">(</span><span class="op" id="2428004">)</span><br>
<span class="lineno">70</span><span class="op" id="2428006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2428009">func</span>&nbsp;<span class="op" id="2428014">(</span><span class="ident" id="2428015">p</span>&nbsp;<span class="op" id="2428017">*</span><span class="ident" id="2428018">ProcessState</span><span class="op" id="2428030">)</span>&nbsp;<span class="ident" id="2428032">success</span><span class="op" id="2428039">(</span><span class="op" id="2428040">)</span>&nbsp;<span class="builtintype" id="2428042">bool</span>&nbsp;<span class="op" id="2428047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428050">return</span>&nbsp;<span class="ident" id="2428057">p</span><span class="op" id="2428058">.</span><span class="ident" id="2428059">status</span><span class="op" id="2428065">.</span><span class="ident" id="2428066">ExitStatus</span><span class="op" id="2428076">(</span><span class="op" id="2428077">)</span>&nbsp;<span class="op" id="2428079">==</span>&nbsp;<span class="num" id="2428082">0</span><br>
<span class="lineno"></span><span class="op" id="2428084">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="2428087">func</span>&nbsp;<span class="op" id="2428092">(</span><span class="ident" id="2428093">p</span>&nbsp;<span class="op" id="2428095">*</span><span class="ident" id="2428096">ProcessState</span><span class="op" id="2428108">)</span>&nbsp;<span class="ident" id="2428110">sys</span><span class="op" id="2428113">(</span><span class="op" id="2428114">)</span>&nbsp;<span class="keyword" id="2428116">interface</span><span class="op" id="2428125">{</span><span class="op" id="2428126">}</span>&nbsp;<span class="op" id="2428128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428131">return</span>&nbsp;<span class="ident" id="2428138">p</span><span class="op" id="2428139">.</span><span class="ident" id="2428140">status</span><br>
<span class="lineno"></span><span class="op" id="2428147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="2428150">func</span>&nbsp;<span class="op" id="2428155">(</span><span class="ident" id="2428156">p</span>&nbsp;<span class="op" id="2428158">*</span><span class="ident" id="2428159">ProcessState</span><span class="op" id="2428171">)</span>&nbsp;<span class="ident" id="2428173">sysUsage</span><span class="op" id="2428181">(</span><span class="op" id="2428182">)</span>&nbsp;<span class="keyword" id="2428184">interface</span><span class="op" id="2428193">{</span><span class="op" id="2428194">}</span>&nbsp;<span class="op" id="2428196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428199">return</span>&nbsp;<span class="ident" id="2428206">p</span><span class="op" id="2428207">.</span><span class="ident" id="2428208">rusage</span><br>
<span class="lineno"></span><span class="op" id="2428215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2428218">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno">85</span><span class="keyword" id="2428250">func</span>&nbsp;<span class="ident" id="2428255">itod</span><span class="op" id="2428259">(</span><span class="ident" id="2428260">i</span>&nbsp;<span class="builtintype" id="2428262">int</span><span class="op" id="2428265">)</span>&nbsp;<span class="builtintype" id="2428267">string</span>&nbsp;<span class="op" id="2428274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428277">if</span>&nbsp;<span class="ident" id="2428280">i</span>&nbsp;<span class="op" id="2428282">==</span>&nbsp;<span class="num" id="2428285">0</span>&nbsp;<span class="op" id="2428287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428291">return</span>&nbsp;<span class="string" id="2428298">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2428303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428307">u</span>&nbsp;<span class="op" id="2428309">:=</span>&nbsp;<span class="ident" id="2428312">uint64</span><span class="op" id="2428318">(</span><span class="ident" id="2428319">i</span><span class="op" id="2428320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428323">if</span>&nbsp;<span class="ident" id="2428326">i</span>&nbsp;<span class="op" id="2428328">&lt;</span>&nbsp;<span class="num" id="2428330">0</span>&nbsp;<span class="op" id="2428332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428336">u</span>&nbsp;<span class="op" id="2428338">=</span>&nbsp;<span class="op" id="2428340">-</span><span class="ident" id="2428341">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2428344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2428348">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428387">var</span>&nbsp;<span class="ident" id="2428391">b</span>&nbsp;<span class="op" id="2428393">[</span><span class="num" id="2428394">32</span><span class="op" id="2428396">]</span><span class="builtintype" id="2428397">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428403">bp</span>&nbsp;<span class="op" id="2428406">:=</span>&nbsp;<span class="builtinfunc" id="2428409">len</span><span class="op" id="2428412">(</span><span class="ident" id="2428413">b</span><span class="op" id="2428414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428417">for</span>&nbsp;<span class="op" id="2428421">;</span>&nbsp;<span class="ident" id="2428423">u</span>&nbsp;<span class="op" id="2428425">&gt;</span>&nbsp;<span class="num" id="2428427">0</span><span class="op" id="2428428">;</span>&nbsp;<span class="ident" id="2428430">u</span>&nbsp;<span class="op" id="2428432">/=</span>&nbsp;<span class="num" id="2428435">10</span>&nbsp;<span class="op" id="2428438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428442">bp</span><span class="op" id="2428444">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428449">b</span><span class="op" id="2428450">[</span><span class="ident" id="2428451">bp</span><span class="op" id="2428453">]</span>&nbsp;<span class="op" id="2428455">=</span>&nbsp;<span class="builtintype" id="2428457">byte</span><span class="op" id="2428461">(</span><span class="ident" id="2428462">u</span><span class="op" id="2428463">%</span><span class="num" id="2428464">10</span><span class="op" id="2428466">)</span>&nbsp;<span class="op" id="2428468">+</span>&nbsp;<span class="string" id="2428470">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2428475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428479">if</span>&nbsp;<span class="ident" id="2428482">i</span>&nbsp;<span class="op" id="2428484">&lt;</span>&nbsp;<span class="num" id="2428486">0</span>&nbsp;<span class="op" id="2428488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428492">bp</span><span class="op" id="2428494">--</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428499">b</span><span class="op" id="2428500">[</span><span class="ident" id="2428501">bp</span><span class="op" id="2428503">]</span>&nbsp;<span class="op" id="2428505">=</span>&nbsp;<span class="string" id="2428507">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2428512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428516">return</span>&nbsp;<span class="builtintype" id="2428523">string</span><span class="op" id="2428529">(</span><span class="ident" id="2428530">b</span><span class="op" id="2428531">[</span><span class="ident" id="2428532">bp</span><span class="op" id="2428534">:</span><span class="op" id="2428535">]</span><span class="op" id="2428536">)</span><br>
<span class="lineno"></span><span class="op" id="2428538">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2428541">func</span>&nbsp;<span class="op" id="2428546">(</span><span class="ident" id="2428547">p</span>&nbsp;<span class="op" id="2428549">*</span><span class="ident" id="2428550">ProcessState</span><span class="op" id="2428562">)</span>&nbsp;<span class="ident" id="2428564">String</span><span class="op" id="2428570">(</span><span class="op" id="2428571">)</span>&nbsp;<span class="builtintype" id="2428573">string</span>&nbsp;<span class="op" id="2428580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428583">if</span>&nbsp;<span class="ident" id="2428586">p</span>&nbsp;<span class="op" id="2428588">==</span>&nbsp;<span class="builtintype" id="2428591">nil</span>&nbsp;<span class="op" id="2428595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428599">return</span>&nbsp;<span class="string" id="2428606">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2428615">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428618">status</span>&nbsp;<span class="op" id="2428625">:=</span>&nbsp;<span class="ident" id="2428628">p</span><span class="op" id="2428629">.</span><span class="ident" id="2428630">Sys</span><span class="op" id="2428633">(</span><span class="op" id="2428634">)</span><span class="op" id="2428635">.</span><span class="op" id="2428636">(</span><span class="ident" id="2428637">syscall</span><span class="op" id="2428644">.</span><span class="ident" id="2428645">WaitStatus</span><span class="op" id="2428655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428658">res</span>&nbsp;<span class="op" id="2428662">:=</span>&nbsp;<span class="string" id="2428665">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428669">switch</span>&nbsp;<span class="op" id="2428676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428679">case</span>&nbsp;<span class="ident" id="2428684">status</span><span class="op" id="2428690">.</span><span class="ident" id="2428691">Exited</span><span class="op" id="2428697">(</span><span class="op" id="2428698">)</span><span class="op" id="2428699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428703">res</span>&nbsp;<span class="op" id="2428707">=</span>&nbsp;<span class="string" id="2428709">&#34;exit&nbsp;status&nbsp;&#34;</span>&nbsp;<span class="op" id="2428724">+</span>&nbsp;<span class="ident" id="2428726">itod</span><span class="op" id="2428730">(</span><span class="ident" id="2428731">status</span><span class="op" id="2428737">.</span><span class="ident" id="2428738">ExitStatus</span><span class="op" id="2428748">(</span><span class="op" id="2428749">)</span><span class="op" id="2428750">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428753">case</span>&nbsp;<span class="ident" id="2428758">status</span><span class="op" id="2428764">.</span><span class="ident" id="2428765">Signaled</span><span class="op" id="2428773">(</span><span class="op" id="2428774">)</span><span class="op" id="2428775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428779">res</span>&nbsp;<span class="op" id="2428783">=</span>&nbsp;<span class="string" id="2428785">&#34;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2428796">+</span>&nbsp;<span class="ident" id="2428798">status</span><span class="op" id="2428804">.</span><span class="ident" id="2428805">Signal</span><span class="op" id="2428811">(</span><span class="op" id="2428812">)</span><span class="op" id="2428813">.</span><span class="ident" id="2428814">String</span><span class="op" id="2428820">(</span><span class="op" id="2428821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428824">case</span>&nbsp;<span class="ident" id="2428829">status</span><span class="op" id="2428835">.</span><span class="ident" id="2428836">Stopped</span><span class="op" id="2428843">(</span><span class="op" id="2428844">)</span><span class="op" id="2428845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428849">res</span>&nbsp;<span class="op" id="2428853">=</span>&nbsp;<span class="string" id="2428855">&#34;stop&nbsp;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2428871">+</span>&nbsp;<span class="ident" id="2428873">status</span><span class="op" id="2428879">.</span><span class="ident" id="2428880">StopSignal</span><span class="op" id="2428890">(</span><span class="op" id="2428891">)</span><span class="op" id="2428892">.</span><span class="ident" id="2428893">String</span><span class="op" id="2428899">(</span><span class="op" id="2428900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2428904">if</span>&nbsp;<span class="ident" id="2428907">status</span><span class="op" id="2428913">.</span><span class="ident" id="2428914">StopSignal</span><span class="op" id="2428924">(</span><span class="op" id="2428925">)</span>&nbsp;<span class="op" id="2428927">==</span>&nbsp;<span class="ident" id="2428930">syscall</span><span class="op" id="2428937">.</span><span class="ident" id="2428938">SIGTRAP</span>&nbsp;<span class="op" id="2428946">&amp;&amp;</span>&nbsp;<span class="ident" id="2428949">status</span><span class="op" id="2428955">.</span><span class="ident" id="2428956">TrapCause</span><span class="op" id="2428965">(</span><span class="op" id="2428966">)</span>&nbsp;<span class="op" id="2428968">!=</span>&nbsp;<span class="num" id="2428971">0</span>&nbsp;<span class="op" id="2428973">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428978">res</span>&nbsp;<span class="op" id="2428982">+=</span>&nbsp;<span class="string" id="2428985">&#34;&nbsp;(trap&nbsp;&#34;</span>&nbsp;<span class="op" id="2428995">+</span>&nbsp;<span class="ident" id="2428997">itod</span><span class="op" id="2429001">(</span><span class="ident" id="2429002">status</span><span class="op" id="2429008">.</span><span class="ident" id="2429009">TrapCause</span><span class="op" id="2429018">(</span><span class="op" id="2429019">)</span><span class="op" id="2429020">)</span>&nbsp;<span class="op" id="2429022">+</span>&nbsp;<span class="string" id="2429024">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2429030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2429033">case</span>&nbsp;<span class="ident" id="2429038">status</span><span class="op" id="2429044">.</span><span class="ident" id="2429045">Continued</span><span class="op" id="2429054">(</span><span class="op" id="2429055">)</span><span class="op" id="2429056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2429060">res</span>&nbsp;<span class="op" id="2429064">=</span>&nbsp;<span class="string" id="2429066">&#34;continued&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2429079">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2429082">if</span>&nbsp;<span class="ident" id="2429085">status</span><span class="op" id="2429091">.</span><span class="ident" id="2429092">CoreDump</span><span class="op" id="2429100">(</span><span class="op" id="2429101">)</span>&nbsp;<span class="op" id="2429103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2429107">res</span>&nbsp;<span class="op" id="2429111">+=</span>&nbsp;<span class="string" id="2429114">&#34;&nbsp;(core&nbsp;dumped)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2429132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2429135">return</span>&nbsp;<span class="ident" id="2429142">res</span><br>
<span class="lineno"></span><span class="op" id="2429146">}</span>
</div>
</body>
</html>
