<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8007617">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8007672">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8007726">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8007777">package</span>&nbsp;<span class="ident" id="8007785">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8007790">import</span>&nbsp;<span class="op" id="8007797">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8007800">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8007806">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8007819">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8007825">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8007836">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8007846">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8007849">var</span>&nbsp;<span class="ident" id="8007853">filenames</span>&nbsp;<span class="op" id="8007863">=</span>&nbsp;<span class="op" id="8007865">[</span><span class="op" id="8007866">]</span><span class="builtintype" id="8007867">string</span><span class="op" id="8007873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8007876">&#34;../testdata/e.txt&#34;</span><span class="op" id="8007895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8007898">&#34;../testdata/pi.txt&#34;</span><span class="op" id="8007918">,</span><br>
<span class="lineno"></span><span class="op" id="8007920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8007923">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="8008001">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="8008068">func</span>&nbsp;<span class="ident" id="8008073">testFile</span><span class="op" id="8008081">(</span><span class="ident" id="8008082">t</span>&nbsp;<span class="op" id="8008084">*</span><span class="ident" id="8008085">testing</span><span class="op" id="8008092">.</span><span class="ident" id="8008093">T</span><span class="op" id="8008094">,</span>&nbsp;<span class="ident" id="8008096">fn</span>&nbsp;<span class="builtintype" id="8008099">string</span><span class="op" id="8008105">,</span>&nbsp;<span class="ident" id="8008107">order</span>&nbsp;<span class="ident" id="8008113">Order</span><span class="op" id="8008118">,</span>&nbsp;<span class="ident" id="8008120">litWidth</span>&nbsp;<span class="builtintype" id="8008129">int</span><span class="op" id="8008132">)</span>&nbsp;<span class="op" id="8008134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8008137">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008174">golden</span><span class="op" id="8008180">,</span>&nbsp;<span class="ident" id="8008182">err</span>&nbsp;<span class="op" id="8008186">:=</span>&nbsp;<span class="ident" id="8008189">os</span><span class="op" id="8008191">.</span><span class="ident" id="8008192">Open</span><span class="op" id="8008196">(</span><span class="ident" id="8008197">fn</span><span class="op" id="8008199">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008202">if</span>&nbsp;<span class="ident" id="8008205">err</span>&nbsp;<span class="op" id="8008209">!=</span>&nbsp;<span class="ident" id="8008212">nil</span>&nbsp;<span class="op" id="8008216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008220">t</span><span class="op" id="8008221">.</span><span class="ident" id="8008222">Errorf</span><span class="op" id="8008228">(</span><span class="string" id="8008229">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8008260">,</span>&nbsp;<span class="ident" id="8008262">fn</span><span class="op" id="8008264">,</span>&nbsp;<span class="ident" id="8008266">order</span><span class="op" id="8008271">,</span>&nbsp;<span class="ident" id="8008273">litWidth</span><span class="op" id="8008281">,</span>&nbsp;<span class="ident" id="8008283">err</span><span class="op" id="8008286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008290">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8008298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008301">defer</span>&nbsp;<span class="ident" id="8008307">golden</span><span class="op" id="8008313">.</span><span class="ident" id="8008314">Close</span><span class="op" id="8008319">(</span><span class="op" id="8008320">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8008324">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008444">raw</span><span class="op" id="8008447">,</span>&nbsp;<span class="ident" id="8008449">err</span>&nbsp;<span class="op" id="8008453">:=</span>&nbsp;<span class="ident" id="8008456">os</span><span class="op" id="8008458">.</span><span class="ident" id="8008459">Open</span><span class="op" id="8008463">(</span><span class="ident" id="8008464">fn</span><span class="op" id="8008466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008469">if</span>&nbsp;<span class="ident" id="8008472">err</span>&nbsp;<span class="op" id="8008476">!=</span>&nbsp;<span class="ident" id="8008479">nil</span>&nbsp;<span class="op" id="8008483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008487">t</span><span class="op" id="8008488">.</span><span class="ident" id="8008489">Errorf</span><span class="op" id="8008495">(</span><span class="string" id="8008496">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8008527">,</span>&nbsp;<span class="ident" id="8008529">fn</span><span class="op" id="8008531">,</span>&nbsp;<span class="ident" id="8008533">order</span><span class="op" id="8008538">,</span>&nbsp;<span class="ident" id="8008540">litWidth</span><span class="op" id="8008548">,</span>&nbsp;<span class="ident" id="8008550">err</span><span class="op" id="8008553">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008557">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8008565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008569">piper</span><span class="op" id="8008574">,</span>&nbsp;<span class="ident" id="8008576">pipew</span>&nbsp;<span class="op" id="8008582">:=</span>&nbsp;<span class="ident" id="8008585">io</span><span class="op" id="8008587">.</span><span class="ident" id="8008588">Pipe</span><span class="op" id="8008592">(</span><span class="op" id="8008593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008596">defer</span>&nbsp;<span class="ident" id="8008602">piper</span><span class="op" id="8008607">.</span><span class="ident" id="8008608">Close</span><span class="op" id="8008613">(</span><span class="op" id="8008614">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008617">go</span>&nbsp;<span class="keyword" id="8008620">func</span><span class="op" id="8008624">(</span><span class="op" id="8008625">)</span>&nbsp;<span class="op" id="8008627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008631">defer</span>&nbsp;<span class="ident" id="8008637">raw</span><span class="op" id="8008640">.</span><span class="ident" id="8008641">Close</span><span class="op" id="8008646">(</span><span class="op" id="8008647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008651">defer</span>&nbsp;<span class="ident" id="8008657">pipew</span><span class="op" id="8008662">.</span><span class="ident" id="8008663">Close</span><span class="op" id="8008668">(</span><span class="op" id="8008669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008673">lzww</span>&nbsp;<span class="op" id="8008678">:=</span>&nbsp;<span class="ident" id="8008681">NewWriter</span><span class="op" id="8008690">(</span><span class="ident" id="8008691">pipew</span><span class="op" id="8008696">,</span>&nbsp;<span class="ident" id="8008698">order</span><span class="op" id="8008703">,</span>&nbsp;<span class="ident" id="8008705">litWidth</span><span class="op" id="8008713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008717">defer</span>&nbsp;<span class="ident" id="8008723">lzww</span><span class="op" id="8008727">.</span><span class="ident" id="8008728">Close</span><span class="op" id="8008733">(</span><span class="op" id="8008734">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008738">var</span>&nbsp;<span class="ident" id="8008742">b</span>&nbsp;<span class="op" id="8008744">[</span><span class="num" id="8008745">4096</span><span class="op" id="8008749">]</span><span class="builtintype" id="8008750">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008757">for</span>&nbsp;<span class="op" id="8008761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008766">n</span><span class="op" id="8008767">,</span>&nbsp;<span class="ident" id="8008769">err0</span>&nbsp;<span class="op" id="8008774">:=</span>&nbsp;<span class="ident" id="8008777">raw</span><span class="op" id="8008780">.</span><span class="ident" id="8008781">Read</span><span class="op" id="8008785">(</span><span class="ident" id="8008786">b</span><span class="op" id="8008787">[</span><span class="op" id="8008788">:</span><span class="op" id="8008789">]</span><span class="op" id="8008790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008795">if</span>&nbsp;<span class="ident" id="8008798">err0</span>&nbsp;<span class="op" id="8008803">!=</span>&nbsp;<span class="ident" id="8008806">nil</span>&nbsp;<span class="op" id="8008810">&amp;&amp;</span>&nbsp;<span class="ident" id="8008813">err0</span>&nbsp;<span class="op" id="8008818">!=</span>&nbsp;<span class="ident" id="8008821">io</span><span class="op" id="8008823">.</span><span class="ident" id="8008824">EOF</span>&nbsp;<span class="op" id="8008828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008834">t</span><span class="op" id="8008835">.</span><span class="ident" id="8008836">Errorf</span><span class="op" id="8008842">(</span><span class="string" id="8008843">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8008874">,</span>&nbsp;<span class="ident" id="8008876">fn</span><span class="op" id="8008878">,</span>&nbsp;<span class="ident" id="8008880">order</span><span class="op" id="8008885">,</span>&nbsp;<span class="ident" id="8008887">litWidth</span><span class="op" id="8008895">,</span>&nbsp;<span class="ident" id="8008897">err0</span><span class="op" id="8008901">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008907">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8008917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008922">_</span><span class="op" id="8008923">,</span>&nbsp;<span class="ident" id="8008925">err1</span>&nbsp;<span class="op" id="8008930">:=</span>&nbsp;<span class="ident" id="8008933">lzww</span><span class="op" id="8008937">.</span><span class="ident" id="8008938">Write</span><span class="op" id="8008943">(</span><span class="ident" id="8008944">b</span><span class="op" id="8008945">[</span><span class="op" id="8008946">:</span><span class="ident" id="8008947">n</span><span class="op" id="8008948">]</span><span class="op" id="8008949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008954">if</span>&nbsp;<span class="ident" id="8008957">err1</span>&nbsp;<span class="op" id="8008962">!=</span>&nbsp;<span class="ident" id="8008965">nil</span>&nbsp;<span class="op" id="8008969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008975">t</span><span class="op" id="8008976">.</span><span class="ident" id="8008977">Errorf</span><span class="op" id="8008983">(</span><span class="string" id="8008984">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8009015">,</span>&nbsp;<span class="ident" id="8009017">fn</span><span class="op" id="8009019">,</span>&nbsp;<span class="ident" id="8009021">order</span><span class="op" id="8009026">,</span>&nbsp;<span class="ident" id="8009028">litWidth</span><span class="op" id="8009036">,</span>&nbsp;<span class="ident" id="8009038">err1</span><span class="op" id="8009042">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009048">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009063">if</span>&nbsp;<span class="ident" id="8009066">err0</span>&nbsp;<span class="op" id="8009071">==</span>&nbsp;<span class="ident" id="8009074">io</span><span class="op" id="8009076">.</span><span class="ident" id="8009077">EOF</span>&nbsp;<span class="op" id="8009081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009087">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009096">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009103">}</span><span class="op" id="8009104">(</span><span class="op" id="8009105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8009108">lzwr</span>&nbsp;<span class="op" id="8009113">:=</span>&nbsp;<span class="ident" id="8009116">NewReader</span><span class="op" id="8009125">(</span><span class="ident" id="8009126">piper</span><span class="op" id="8009131">,</span>&nbsp;<span class="ident" id="8009133">order</span><span class="op" id="8009138">,</span>&nbsp;<span class="ident" id="8009140">litWidth</span><span class="op" id="8009148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009151">defer</span>&nbsp;<span class="ident" id="8009157">lzwr</span><span class="op" id="8009161">.</span><span class="ident" id="8009162">Close</span><span class="op" id="8009167">(</span><span class="op" id="8009168">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8009172">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8009193">b0</span><span class="op" id="8009195">,</span>&nbsp;<span class="ident" id="8009197">err0</span>&nbsp;<span class="op" id="8009202">:=</span>&nbsp;<span class="ident" id="8009205">ioutil</span><span class="op" id="8009211">.</span><span class="ident" id="8009212">ReadAll</span><span class="op" id="8009219">(</span><span class="ident" id="8009220">golden</span><span class="op" id="8009226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8009229">b1</span><span class="op" id="8009231">,</span>&nbsp;<span class="ident" id="8009233">err1</span>&nbsp;<span class="op" id="8009238">:=</span>&nbsp;<span class="ident" id="8009241">ioutil</span><span class="op" id="8009247">.</span><span class="ident" id="8009248">ReadAll</span><span class="op" id="8009255">(</span><span class="ident" id="8009256">lzwr</span><span class="op" id="8009260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009263">if</span>&nbsp;<span class="ident" id="8009266">err0</span>&nbsp;<span class="op" id="8009271">!=</span>&nbsp;<span class="ident" id="8009274">nil</span>&nbsp;<span class="op" id="8009278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8009282">t</span><span class="op" id="8009283">.</span><span class="ident" id="8009284">Errorf</span><span class="op" id="8009290">(</span><span class="string" id="8009291">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8009322">,</span>&nbsp;<span class="ident" id="8009324">fn</span><span class="op" id="8009326">,</span>&nbsp;<span class="ident" id="8009328">order</span><span class="op" id="8009333">,</span>&nbsp;<span class="ident" id="8009335">litWidth</span><span class="op" id="8009343">,</span>&nbsp;<span class="ident" id="8009345">err0</span><span class="op" id="8009349">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009353">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009364">if</span>&nbsp;<span class="ident" id="8009367">err1</span>&nbsp;<span class="op" id="8009372">!=</span>&nbsp;<span class="ident" id="8009375">nil</span>&nbsp;<span class="op" id="8009379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8009383">t</span><span class="op" id="8009384">.</span><span class="ident" id="8009385">Errorf</span><span class="op" id="8009391">(</span><span class="string" id="8009392">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8009423">,</span>&nbsp;<span class="ident" id="8009425">fn</span><span class="op" id="8009427">,</span>&nbsp;<span class="ident" id="8009429">order</span><span class="op" id="8009434">,</span>&nbsp;<span class="ident" id="8009436">litWidth</span><span class="op" id="8009444">,</span>&nbsp;<span class="ident" id="8009446">err1</span><span class="op" id="8009450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009454">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009465">if</span>&nbsp;<span class="builtinfunc" id="8009468">len</span><span class="op" id="8009471">(</span><span class="ident" id="8009472">b1</span><span class="op" id="8009474">)</span>&nbsp;<span class="op" id="8009476">!=</span>&nbsp;<span class="builtinfunc" id="8009479">len</span><span class="op" id="8009482">(</span><span class="ident" id="8009483">b0</span><span class="op" id="8009485">)</span>&nbsp;<span class="op" id="8009487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8009491">t</span><span class="op" id="8009492">.</span><span class="ident" id="8009493">Errorf</span><span class="op" id="8009499">(</span><span class="string" id="8009500">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="8009553">,</span>&nbsp;<span class="ident" id="8009555">fn</span><span class="op" id="8009557">,</span>&nbsp;<span class="ident" id="8009559">order</span><span class="op" id="8009564">,</span>&nbsp;<span class="ident" id="8009566">litWidth</span><span class="op" id="8009574">,</span>&nbsp;<span class="builtinfunc" id="8009576">len</span><span class="op" id="8009579">(</span><span class="ident" id="8009580">b1</span><span class="op" id="8009582">)</span><span class="op" id="8009583">,</span>&nbsp;<span class="builtinfunc" id="8009585">len</span><span class="op" id="8009588">(</span><span class="ident" id="8009589">b0</span><span class="op" id="8009591">)</span><span class="op" id="8009592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009596">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009604">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009607">for</span>&nbsp;<span class="ident" id="8009611">i</span>&nbsp;<span class="op" id="8009613">:=</span>&nbsp;<span class="num" id="8009616">0</span><span class="op" id="8009617">;</span>&nbsp;<span class="ident" id="8009619">i</span>&nbsp;<span class="op" id="8009621">&lt;</span>&nbsp;<span class="builtinfunc" id="8009623">len</span><span class="op" id="8009626">(</span><span class="ident" id="8009627">b0</span><span class="op" id="8009629">)</span><span class="op" id="8009630">;</span>&nbsp;<span class="ident" id="8009632">i</span><span class="op" id="8009633">++</span>&nbsp;<span class="op" id="8009636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009640">if</span>&nbsp;<span class="ident" id="8009643">b1</span><span class="op" id="8009645">[</span><span class="ident" id="8009646">i</span><span class="op" id="8009647">]</span>&nbsp;<span class="op" id="8009649">!=</span>&nbsp;<span class="ident" id="8009652">b0</span><span class="op" id="8009654">[</span><span class="ident" id="8009655">i</span><span class="op" id="8009656">]</span>&nbsp;<span class="op" id="8009658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8009663">t</span><span class="op" id="8009664">.</span><span class="ident" id="8009665">Errorf</span><span class="op" id="8009671">(</span><span class="string" id="8009672">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="8009735">,</span>&nbsp;<span class="ident" id="8009737">fn</span><span class="op" id="8009739">,</span>&nbsp;<span class="ident" id="8009741">order</span><span class="op" id="8009746">,</span>&nbsp;<span class="ident" id="8009748">litWidth</span><span class="op" id="8009756">,</span>&nbsp;<span class="ident" id="8009758">i</span><span class="op" id="8009759">,</span>&nbsp;<span class="ident" id="8009761">b1</span><span class="op" id="8009763">[</span><span class="ident" id="8009764">i</span><span class="op" id="8009765">]</span><span class="op" id="8009766">,</span>&nbsp;<span class="ident" id="8009768">b0</span><span class="op" id="8009770">[</span><span class="ident" id="8009771">i</span><span class="op" id="8009772">]</span><span class="op" id="8009773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009778">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009787">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8009790">}</span><br>
<span class="lineno"></span><span class="op" id="8009792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8009795">func</span>&nbsp;<span class="ident" id="8009800">TestWriter</span><span class="op" id="8009810">(</span><span class="ident" id="8009811">t</span>&nbsp;<span class="op" id="8009813">*</span><span class="ident" id="8009814">testing</span><span class="op" id="8009821">.</span><span class="ident" id="8009822">T</span><span class="op" id="8009823">)</span>&nbsp;<span class="op" id="8009825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009828">for</span>&nbsp;<span class="ident" id="8009832">_</span><span class="op" id="8009833">,</span>&nbsp;<span class="ident" id="8009835">filename</span>&nbsp;<span class="op" id="8009844">:=</span>&nbsp;<span class="keyword" id="8009847">range</span>&nbsp;<span class="ident" id="8009853">filenames</span>&nbsp;<span class="op" id="8009863">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009867">for</span>&nbsp;<span class="ident" id="8009871">_</span><span class="op" id="8009872">,</span>&nbsp;<span class="ident" id="8009874">order</span>&nbsp;<span class="op" id="8009880">:=</span>&nbsp;<span class="keyword" id="8009883">range</span>&nbsp;<span class="op" id="8009889">[</span><span class="op" id="8009890">...</span><span class="op" id="8009893">]</span><span class="ident" id="8009894">Order</span><span class="op" id="8009899">{</span><span class="ident" id="8009900">LSB</span><span class="op" id="8009903">,</span>&nbsp;<span class="ident" id="8009905">MSB</span><span class="op" id="8009908">}</span>&nbsp;<span class="op" id="8009910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8009915">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8009995">for</span>&nbsp;<span class="ident" id="8009999">_</span><span class="op" id="8010000">,</span>&nbsp;<span class="ident" id="8010002">litWidth</span>&nbsp;<span class="op" id="8010011">:=</span>&nbsp;<span class="keyword" id="8010014">range</span>&nbsp;<span class="op" id="8010020">[</span><span class="op" id="8010021">...</span><span class="op" id="8010024">]</span><span class="builtintype" id="8010025">int</span><span class="op" id="8010028">{</span><span class="num" id="8010029">6</span><span class="op" id="8010030">,</span>&nbsp;<span class="num" id="8010032">7</span><span class="op" id="8010033">,</span>&nbsp;<span class="num" id="8010035">8</span><span class="op" id="8010036">}</span>&nbsp;<span class="op" id="8010038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010044">testFile</span><span class="op" id="8010052">(</span><span class="ident" id="8010053">t</span><span class="op" id="8010054">,</span>&nbsp;<span class="ident" id="8010056">filename</span><span class="op" id="8010064">,</span>&nbsp;<span class="ident" id="8010066">order</span><span class="op" id="8010071">,</span>&nbsp;<span class="ident" id="8010073">litWidth</span><span class="op" id="8010081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010086">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010093">}</span><br>
<span class="lineno"></span><span class="op" id="8010095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8010098">func</span>&nbsp;<span class="ident" id="8010103">TestWriterReturnValues</span><span class="op" id="8010125">(</span><span class="ident" id="8010126">t</span>&nbsp;<span class="op" id="8010128">*</span><span class="ident" id="8010129">testing</span><span class="op" id="8010136">.</span><span class="ident" id="8010137">T</span><span class="op" id="8010138">)</span>&nbsp;<span class="op" id="8010140">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010143">w</span>&nbsp;<span class="op" id="8010145">:=</span>&nbsp;<span class="ident" id="8010148">NewWriter</span><span class="op" id="8010157">(</span><span class="ident" id="8010158">ioutil</span><span class="op" id="8010164">.</span><span class="ident" id="8010165">Discard</span><span class="op" id="8010172">,</span>&nbsp;<span class="ident" id="8010174">LSB</span><span class="op" id="8010177">,</span>&nbsp;<span class="num" id="8010179">8</span><span class="op" id="8010180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010183">n</span><span class="op" id="8010184">,</span>&nbsp;<span class="ident" id="8010186">err</span>&nbsp;<span class="op" id="8010190">:=</span>&nbsp;<span class="ident" id="8010193">w</span><span class="op" id="8010194">.</span><span class="ident" id="8010195">Write</span><span class="op" id="8010200">(</span><span class="op" id="8010201">[</span><span class="op" id="8010202">]</span><span class="builtintype" id="8010203">byte</span><span class="op" id="8010207">(</span><span class="string" id="8010208">&#34;asdf&#34;</span><span class="op" id="8010214">)</span><span class="op" id="8010215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8010218">if</span>&nbsp;<span class="ident" id="8010221">n</span>&nbsp;<span class="op" id="8010223">!=</span>&nbsp;<span class="num" id="8010226">4</span>&nbsp;<span class="op" id="8010228">||</span>&nbsp;<span class="ident" id="8010231">err</span>&nbsp;<span class="op" id="8010235">!=</span>&nbsp;<span class="ident" id="8010238">nil</span>&nbsp;<span class="op" id="8010242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010246">t</span><span class="op" id="8010247">.</span><span class="ident" id="8010248">Errorf</span><span class="op" id="8010254">(</span><span class="string" id="8010255">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="8010280">,</span>&nbsp;<span class="ident" id="8010282">n</span><span class="op" id="8010283">,</span>&nbsp;<span class="ident" id="8010285">err</span><span class="op" id="8010288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010291">}</span><br>
<span class="lineno">105</span><span class="op" id="8010293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8010296">func</span>&nbsp;<span class="ident" id="8010301">benchmarkEncoder</span><span class="op" id="8010317">(</span><span class="ident" id="8010318">b</span>&nbsp;<span class="op" id="8010320">*</span><span class="ident" id="8010321">testing</span><span class="op" id="8010328">.</span><span class="ident" id="8010329">B</span><span class="op" id="8010330">,</span>&nbsp;<span class="ident" id="8010332">n</span>&nbsp;<span class="builtintype" id="8010334">int</span><span class="op" id="8010337">)</span>&nbsp;<span class="op" id="8010339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010342">b</span><span class="op" id="8010343">.</span><span class="ident" id="8010344">StopTimer</span><span class="op" id="8010353">(</span><span class="op" id="8010354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010357">b</span><span class="op" id="8010358">.</span><span class="ident" id="8010359">SetBytes</span><span class="op" id="8010367">(</span><span class="ident" id="8010368">int64</span><span class="op" id="8010373">(</span><span class="ident" id="8010374">n</span><span class="op" id="8010375">)</span><span class="op" id="8010376">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010379">buf0</span><span class="op" id="8010383">,</span>&nbsp;<span class="ident" id="8010385">err</span>&nbsp;<span class="op" id="8010389">:=</span>&nbsp;<span class="ident" id="8010392">ioutil</span><span class="op" id="8010398">.</span><span class="ident" id="8010399">ReadFile</span><span class="op" id="8010407">(</span><span class="string" id="8010408">&#34;../testdata/e.txt&#34;</span><span class="op" id="8010427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8010430">if</span>&nbsp;<span class="ident" id="8010433">err</span>&nbsp;<span class="op" id="8010437">!=</span>&nbsp;<span class="ident" id="8010440">nil</span>&nbsp;<span class="op" id="8010444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010448">b</span><span class="op" id="8010449">.</span><span class="ident" id="8010450">Fatal</span><span class="op" id="8010455">(</span><span class="ident" id="8010456">err</span><span class="op" id="8010459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8010465">if</span>&nbsp;<span class="builtinfunc" id="8010468">len</span><span class="op" id="8010471">(</span><span class="ident" id="8010472">buf0</span><span class="op" id="8010476">)</span>&nbsp;<span class="op" id="8010478">==</span>&nbsp;<span class="num" id="8010481">0</span>&nbsp;<span class="op" id="8010483">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010487">b</span><span class="op" id="8010488">.</span><span class="ident" id="8010489">Fatalf</span><span class="op" id="8010495">(</span><span class="string" id="8010496">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="8010519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010525">buf1</span>&nbsp;<span class="op" id="8010530">:=</span>&nbsp;<span class="builtinfunc" id="8010533">make</span><span class="op" id="8010537">(</span><span class="op" id="8010538">[</span><span class="op" id="8010539">]</span><span class="builtintype" id="8010540">byte</span><span class="op" id="8010544">,</span>&nbsp;<span class="ident" id="8010546">n</span><span class="op" id="8010547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8010550">for</span>&nbsp;<span class="ident" id="8010554">i</span>&nbsp;<span class="op" id="8010556">:=</span>&nbsp;<span class="num" id="8010559">0</span><span class="op" id="8010560">;</span>&nbsp;<span class="ident" id="8010562">i</span>&nbsp;<span class="op" id="8010564">&lt;</span>&nbsp;<span class="ident" id="8010566">n</span><span class="op" id="8010567">;</span>&nbsp;<span class="ident" id="8010569">i</span>&nbsp;<span class="op" id="8010571">+=</span>&nbsp;<span class="builtinfunc" id="8010574">len</span><span class="op" id="8010577">(</span><span class="ident" id="8010578">buf0</span><span class="op" id="8010582">)</span>&nbsp;<span class="op" id="8010584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8010588">if</span>&nbsp;<span class="builtinfunc" id="8010591">len</span><span class="op" id="8010594">(</span><span class="ident" id="8010595">buf0</span><span class="op" id="8010599">)</span>&nbsp;<span class="op" id="8010601">&gt;</span>&nbsp;<span class="ident" id="8010603">n</span><span class="op" id="8010604">-</span><span class="ident" id="8010605">i</span>&nbsp;<span class="op" id="8010607">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010612">buf0</span>&nbsp;<span class="op" id="8010617">=</span>&nbsp;<span class="ident" id="8010619">buf0</span><span class="op" id="8010623">[</span><span class="op" id="8010624">:</span><span class="ident" id="8010625">n</span><span class="op" id="8010626">-</span><span class="ident" id="8010627">i</span><span class="op" id="8010628">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8010636">copy</span><span class="op" id="8010640">(</span><span class="ident" id="8010641">buf1</span><span class="op" id="8010645">[</span><span class="ident" id="8010646">i</span><span class="op" id="8010647">:</span><span class="op" id="8010648">]</span><span class="op" id="8010649">,</span>&nbsp;<span class="ident" id="8010651">buf0</span><span class="op" id="8010655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010661">buf0</span>&nbsp;<span class="op" id="8010666">=</span>&nbsp;<span class="ident" id="8010668">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010673">runtime</span><span class="op" id="8010680">.</span><span class="ident" id="8010681">GC</span><span class="op" id="8010683">(</span><span class="op" id="8010684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010687">b</span><span class="op" id="8010688">.</span><span class="ident" id="8010689">StartTimer</span><span class="op" id="8010699">(</span><span class="op" id="8010700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8010703">for</span>&nbsp;<span class="ident" id="8010707">i</span>&nbsp;<span class="op" id="8010709">:=</span>&nbsp;<span class="num" id="8010712">0</span><span class="op" id="8010713">;</span>&nbsp;<span class="ident" id="8010715">i</span>&nbsp;<span class="op" id="8010717">&lt;</span>&nbsp;<span class="ident" id="8010719">b</span><span class="op" id="8010720">.</span><span class="ident" id="8010721">N</span><span class="op" id="8010722">;</span>&nbsp;<span class="ident" id="8010724">i</span><span class="op" id="8010725">++</span>&nbsp;<span class="op" id="8010728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010732">w</span>&nbsp;<span class="op" id="8010734">:=</span>&nbsp;<span class="ident" id="8010737">NewWriter</span><span class="op" id="8010746">(</span><span class="ident" id="8010747">ioutil</span><span class="op" id="8010753">.</span><span class="ident" id="8010754">Discard</span><span class="op" id="8010761">,</span>&nbsp;<span class="ident" id="8010763">LSB</span><span class="op" id="8010766">,</span>&nbsp;<span class="num" id="8010768">8</span><span class="op" id="8010769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010773">w</span><span class="op" id="8010774">.</span><span class="ident" id="8010775">Write</span><span class="op" id="8010780">(</span><span class="ident" id="8010781">buf1</span><span class="op" id="8010785">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010789">w</span><span class="op" id="8010790">.</span><span class="ident" id="8010791">Close</span><span class="op" id="8010796">(</span><span class="op" id="8010797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8010800">}</span><br>
<span class="lineno"></span><span class="op" id="8010802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8010805">func</span>&nbsp;<span class="ident" id="8010810">BenchmarkEncoder1e4</span><span class="op" id="8010829">(</span><span class="ident" id="8010830">b</span>&nbsp;<span class="op" id="8010832">*</span><span class="ident" id="8010833">testing</span><span class="op" id="8010840">.</span><span class="ident" id="8010841">B</span><span class="op" id="8010842">)</span>&nbsp;<span class="op" id="8010844">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010847">benchmarkEncoder</span><span class="op" id="8010863">(</span><span class="ident" id="8010864">b</span><span class="op" id="8010865">,</span>&nbsp;<span class="num" id="8010867">1e4</span><span class="op" id="8010870">)</span><br>
<span class="lineno"></span><span class="op" id="8010872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8010875">func</span>&nbsp;<span class="ident" id="8010880">BenchmarkEncoder1e5</span><span class="op" id="8010899">(</span><span class="ident" id="8010900">b</span>&nbsp;<span class="op" id="8010902">*</span><span class="ident" id="8010903">testing</span><span class="op" id="8010910">.</span><span class="ident" id="8010911">B</span><span class="op" id="8010912">)</span>&nbsp;<span class="op" id="8010914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010917">benchmarkEncoder</span><span class="op" id="8010933">(</span><span class="ident" id="8010934">b</span><span class="op" id="8010935">,</span>&nbsp;<span class="num" id="8010937">1e5</span><span class="op" id="8010940">)</span><br>
<span class="lineno">140</span><span class="op" id="8010942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8010945">func</span>&nbsp;<span class="ident" id="8010950">BenchmarkEncoder1e6</span><span class="op" id="8010969">(</span><span class="ident" id="8010970">b</span>&nbsp;<span class="op" id="8010972">*</span><span class="ident" id="8010973">testing</span><span class="op" id="8010980">.</span><span class="ident" id="8010981">B</span><span class="op" id="8010982">)</span>&nbsp;<span class="op" id="8010984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8010987">benchmarkEncoder</span><span class="op" id="8011003">(</span><span class="ident" id="8011004">b</span><span class="op" id="8011005">,</span>&nbsp;<span class="num" id="8011007">1e6</span><span class="op" id="8011010">)</span><br>
<span class="lineno"></span><span class="op" id="8011012">}</span>
</div>
</body>
</html>
