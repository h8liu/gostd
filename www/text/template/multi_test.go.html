<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6621930">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6621985">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6622039">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6622090">package</span>&nbsp;<span class="ident" id="6622098">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6622108">//&nbsp;Tests&nbsp;for&nbsp;mulitple-template&nbsp;parsing&nbsp;and&nbsp;execution.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6622163">import</span>&nbsp;<span class="op" id="6622170">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6622173">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6622182">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6622189">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6622200">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6622211">&#34;text/template/parse&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6622233">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6622236">const</span>&nbsp;<span class="op" id="6622242">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622245">noError</span>&nbsp;&nbsp;<span class="op" id="6622254">=</span>&nbsp;<span class="builtintype" id="6622256">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622262">hasError</span>&nbsp;<span class="op" id="6622271">=</span>&nbsp;<span class="builtintype" id="6622273">false</span><br>
<span class="lineno">20</span><span class="op" id="6622279">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6622282">type</span>&nbsp;<span class="ident" id="6622287">multiParseTest</span>&nbsp;<span class="keyword" id="6622302">struct</span>&nbsp;<span class="op" id="6622309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622312">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6622320">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622328">input</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6622336">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622344">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6622352">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622358">names</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6622366">[</span><span class="op" id="6622367">]</span><span class="builtintype" id="6622368">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622376">results</span>&nbsp;<span class="op" id="6622384">[</span><span class="op" id="6622385">]</span><span class="builtintype" id="6622386">string</span><br>
<span class="lineno"></span><span class="op" id="6622393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6622396">var</span>&nbsp;<span class="ident" id="6622400">multiParseTests</span>&nbsp;<span class="op" id="6622416">=</span>&nbsp;<span class="op" id="6622418">[</span><span class="op" id="6622419">]</span><span class="ident" id="6622420"><a href="/text/template/multi_test.go.html#6622287">multiParseTest</a></span><span class="op" id="6622434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622437">{</span><span class="string" id="6622438">&#34;empty&#34;</span><span class="op" id="6622445">,</span>&nbsp;<span class="string" id="6622447">&#34;&#34;</span><span class="op" id="6622449">,</span>&nbsp;<span class="ident" id="6622451"><a href="/text/template/multi_test.go.html#6622245">noError</a></span><span class="op" id="6622458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622462">nil</span><span class="op" id="6622465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622469">nil</span><span class="op" id="6622472">}</span><span class="op" id="6622473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622476">{</span><span class="string" id="6622477">&#34;one&#34;</span><span class="op" id="6622482">,</span>&nbsp;<span class="string" id="6622484">`{{define&nbsp;&#34;foo&#34;}}&nbsp;FOO&nbsp;{{end}}`</span><span class="op" id="6622514">,</span>&nbsp;<span class="ident" id="6622516"><a href="/text/template/multi_test.go.html#6622245">noError</a></span><span class="op" id="6622523">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622527">[</span><span class="op" id="6622528">]</span><span class="builtintype" id="6622529">string</span><span class="op" id="6622535">{</span><span class="string" id="6622536">&#34;foo&#34;</span><span class="op" id="6622541">}</span><span class="op" id="6622542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622546">[</span><span class="op" id="6622547">]</span><span class="builtintype" id="6622548">string</span><span class="op" id="6622554">{</span><span class="string" id="6622555">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="6622562">}</span><span class="op" id="6622563">}</span><span class="op" id="6622564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622567">{</span><span class="string" id="6622568">&#34;two&#34;</span><span class="op" id="6622573">,</span>&nbsp;<span class="string" id="6622575">`{{define&nbsp;&#34;foo&#34;}}&nbsp;FOO&nbsp;{{end}}{{define&nbsp;&#34;bar&#34;}}&nbsp;BAR&nbsp;{{end}}`</span><span class="op" id="6622633">,</span>&nbsp;<span class="ident" id="6622635"><a href="/text/template/multi_test.go.html#6622245">noError</a></span><span class="op" id="6622642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622646">[</span><span class="op" id="6622647">]</span><span class="builtintype" id="6622648">string</span><span class="op" id="6622654">{</span><span class="string" id="6622655">&#34;foo&#34;</span><span class="op" id="6622660">,</span>&nbsp;<span class="string" id="6622662">&#34;bar&#34;</span><span class="op" id="6622667">}</span><span class="op" id="6622668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622672">[</span><span class="op" id="6622673">]</span><span class="builtintype" id="6622674">string</span><span class="op" id="6622680">{</span><span class="string" id="6622681">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="6622688">,</span>&nbsp;<span class="string" id="6622690">&#34;&nbsp;BAR&nbsp;&#34;</span><span class="op" id="6622697">}</span><span class="op" id="6622698">}</span><span class="op" id="6622699">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6622702">//&nbsp;errors</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622713">{</span><span class="string" id="6622714">&#34;missing&nbsp;end&#34;</span><span class="op" id="6622727">,</span>&nbsp;<span class="string" id="6622729">`{{define&nbsp;&#34;foo&#34;}}&nbsp;FOO&nbsp;`</span><span class="op" id="6622752">,</span>&nbsp;<span class="ident" id="6622754"><a href="/text/template/multi_test.go.html#6622262">hasError</a></span><span class="op" id="6622762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622766">nil</span><span class="op" id="6622769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622773">nil</span><span class="op" id="6622776">}</span><span class="op" id="6622777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6622780">{</span><span class="string" id="6622781">&#34;malformed&nbsp;name&#34;</span><span class="op" id="6622797">,</span>&nbsp;<span class="string" id="6622799">`{{define&nbsp;&#34;foo}}&nbsp;FOO&nbsp;`</span><span class="op" id="6622821">,</span>&nbsp;<span class="ident" id="6622823"><a href="/text/template/multi_test.go.html#6622262">hasError</a></span><span class="op" id="6622831">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622835">nil</span><span class="op" id="6622838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622842">nil</span><span class="op" id="6622845">}</span><span class="op" id="6622846">,</span><br>
<span class="lineno"></span><span class="op" id="6622848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6622851">func</span>&nbsp;<span class="ident" id="6622856">TestMultiParse</span><span class="op" id="6622870">(</span><span class="ident" id="6622871">t</span>&nbsp;<span class="op" id="6622873">*</span><span class="ident" id="6622874"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6622881">.</span><span class="ident" id="6622882">T</span><span class="op" id="6622883">)</span>&nbsp;<span class="op" id="6622885">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6622888">for</span>&nbsp;<span class="ident" id="6622892">_</span><span class="op" id="6622893">,</span>&nbsp;<span class="ident" id="6622895">test</span>&nbsp;<span class="op" id="6622900">:=</span>&nbsp;<span class="keyword" id="6622903">range</span>&nbsp;<span class="ident" id="6622909"><a href="/text/template/multi_test.go.html#6622400">multiParseTests</a></span>&nbsp;<span class="op" id="6622925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6622929">template</span><span class="op" id="6622937">,</span>&nbsp;<span class="ident" id="6622939">err</span>&nbsp;<span class="op" id="6622943">:=</span>&nbsp;<span class="ident" id="6622946"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6622949">(</span><span class="string" id="6622950">&#34;root&#34;</span><span class="op" id="6622956">)</span><span class="op" id="6622957">.</span><span class="ident" id="6622958">Parse</span><span class="op" id="6622963">(</span><span class="ident" id="6622964"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6622968">.</span><span class="ident" id="6622969">input</span><span class="op" id="6622974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6622978">switch</span>&nbsp;<span class="op" id="6622985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6622989">case</span>&nbsp;<span class="ident" id="6622994"><a href="/text/template/multi_test.go.html#6622939">err</a></span>&nbsp;<span class="op" id="6622998">==</span>&nbsp;<span class="ident" id="6623001">nil</span>&nbsp;<span class="op" id="6623005">&amp;&amp;</span>&nbsp;<span class="op" id="6623008">!</span><span class="ident" id="6623009"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623013">.</span><span class="ident" id="6623014">ok</span><span class="op" id="6623016">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623021"><a href="/text/template/multi_test.go.html#6622871">t</a></span><span class="op" id="6623022">.</span><span class="ident" id="6623023">Errorf</span><span class="op" id="6623029">(</span><span class="string" id="6623030">&#34;%q:&nbsp;expected&nbsp;error;&nbsp;got&nbsp;none&#34;</span><span class="op" id="6623060">,</span>&nbsp;<span class="ident" id="6623062"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623066">.</span><span class="ident" id="6623067">name</span><span class="op" id="6623071">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623076">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623087">case</span>&nbsp;<span class="ident" id="6623092"><a href="/text/template/multi_test.go.html#6622939">err</a></span>&nbsp;<span class="op" id="6623096">!=</span>&nbsp;<span class="ident" id="6623099">nil</span>&nbsp;<span class="op" id="6623103">&amp;&amp;</span>&nbsp;<span class="ident" id="6623106"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623110">.</span><span class="ident" id="6623111">ok</span><span class="op" id="6623113">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623118"><a href="/text/template/multi_test.go.html#6622871">t</a></span><span class="op" id="6623119">.</span><span class="ident" id="6623120">Errorf</span><span class="op" id="6623126">(</span><span class="string" id="6623127">&#34;%q:&nbsp;unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6623153">,</span>&nbsp;<span class="ident" id="6623155"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623159">.</span><span class="ident" id="6623160">name</span><span class="op" id="6623164">,</span>&nbsp;<span class="ident" id="6623166"><a href="/text/template/multi_test.go.html#6622939">err</a></span><span class="op" id="6623169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623174">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623185">case</span>&nbsp;<span class="ident" id="6623190"><a href="/text/template/multi_test.go.html#6622939">err</a></span>&nbsp;<span class="op" id="6623194">!=</span>&nbsp;<span class="ident" id="6623197">nil</span>&nbsp;<span class="op" id="6623201">&amp;&amp;</span>&nbsp;<span class="op" id="6623204">!</span><span class="ident" id="6623205"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623209">.</span><span class="ident" id="6623210">ok</span><span class="op" id="6623212">:</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6623217">//&nbsp;expected&nbsp;error,&nbsp;got&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623247">if</span>&nbsp;<span class="op" id="6623250">*</span><span class="ident" id="6623251"><a href="/text/template/exec_test.go.html#6587937">debug</a></span>&nbsp;<span class="op" id="6623257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623263"><a href="/text/template/multi_test.go.html#6622182">fmt</a></span><span class="op" id="6623266">.</span><span class="ident" id="6623267">Printf</span><span class="op" id="6623273">(</span><span class="string" id="6623274">&#34;%s:&nbsp;%s\n\t%s\n&#34;</span><span class="op" id="6623290">,</span>&nbsp;<span class="ident" id="6623292"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623296">.</span><span class="ident" id="6623297">name</span><span class="op" id="6623301">,</span>&nbsp;<span class="ident" id="6623303"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623307">.</span><span class="ident" id="6623308">input</span><span class="op" id="6623313">,</span>&nbsp;<span class="ident" id="6623315"><a href="/text/template/multi_test.go.html#6622939">err</a></span><span class="op" id="6623318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623328">continue</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623343">if</span>&nbsp;<span class="ident" id="6623346"><a href="/text/template/multi_test.go.html#6622929">template</a></span>&nbsp;<span class="op" id="6623355">==</span>&nbsp;<span class="ident" id="6623358">nil</span>&nbsp;<span class="op" id="6623362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623367">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623382">if</span>&nbsp;<span class="builtinfunc" id="6623385">len</span><span class="op" id="6623388">(</span><span class="ident" id="6623389"><a href="/text/template/multi_test.go.html#6622929">template</a></span><span class="op" id="6623397">.</span><span class="ident" id="6623398">tmpl</span><span class="op" id="6623402">)</span>&nbsp;<span class="op" id="6623404">!=</span>&nbsp;<span class="builtinfunc" id="6623407">len</span><span class="op" id="6623410">(</span><span class="ident" id="6623411"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623415">.</span><span class="ident" id="6623416">names</span><span class="op" id="6623421">)</span><span class="op" id="6623422">+</span><span class="num" id="6623423">1</span>&nbsp;<span class="op" id="6623425">{</span>&nbsp;<span class="comment" id="6623427">//&nbsp;+1&nbsp;for&nbsp;root</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623445"><a href="/text/template/multi_test.go.html#6622871">t</a></span><span class="op" id="6623446">.</span><span class="ident" id="6623447">Errorf</span><span class="op" id="6623453">(</span><span class="string" id="6623454">&#34;%s:&nbsp;wrong&nbsp;number&nbsp;of&nbsp;templates;&nbsp;wanted&nbsp;%d&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6623503">,</span>&nbsp;<span class="ident" id="6623505"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623509">.</span><span class="ident" id="6623510">name</span><span class="op" id="6623514">,</span>&nbsp;<span class="builtinfunc" id="6623516">len</span><span class="op" id="6623519">(</span><span class="ident" id="6623520"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623524">.</span><span class="ident" id="6623525">names</span><span class="op" id="6623530">)</span><span class="op" id="6623531">,</span>&nbsp;<span class="builtinfunc" id="6623533">len</span><span class="op" id="6623536">(</span><span class="ident" id="6623537"><a href="/text/template/multi_test.go.html#6622929">template</a></span><span class="op" id="6623545">.</span><span class="ident" id="6623546">tmpl</span><span class="op" id="6623550">)</span><span class="op" id="6623551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623556">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623571">for</span>&nbsp;<span class="ident" id="6623575">i</span><span class="op" id="6623576">,</span>&nbsp;<span class="ident" id="6623578">name</span>&nbsp;<span class="op" id="6623583">:=</span>&nbsp;<span class="keyword" id="6623586">range</span>&nbsp;<span class="ident" id="6623592"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623596">.</span><span class="ident" id="6623597">names</span>&nbsp;<span class="op" id="6623603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623608">tmpl</span><span class="op" id="6623612">,</span>&nbsp;<span class="ident" id="6623614">ok</span>&nbsp;<span class="op" id="6623617">:=</span>&nbsp;<span class="ident" id="6623620"><a href="/text/template/multi_test.go.html#6622929">template</a></span><span class="op" id="6623628">.</span><span class="ident" id="6623629">tmpl</span><span class="op" id="6623633">[</span><span class="ident" id="6623634"><a href="/text/template/multi_test.go.html#6623578">name</a></span><span class="op" id="6623638">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623643">if</span>&nbsp;<span class="op" id="6623646">!</span><span class="ident" id="6623647"><a href="/text/template/multi_test.go.html#6623614">ok</a></span>&nbsp;<span class="op" id="6623650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623656"><a href="/text/template/multi_test.go.html#6622871">t</a></span><span class="op" id="6623657">.</span><span class="ident" id="6623658">Errorf</span><span class="op" id="6623664">(</span><span class="string" id="6623665">&#34;%s:&nbsp;can&#39;t&nbsp;find&nbsp;template&nbsp;%q&#34;</span><span class="op" id="6623693">,</span>&nbsp;<span class="ident" id="6623695"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623699">.</span><span class="ident" id="6623700">name</span><span class="op" id="6623704">,</span>&nbsp;<span class="ident" id="6623706"><a href="/text/template/multi_test.go.html#6623578">name</a></span><span class="op" id="6623710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623716">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623733">result</span>&nbsp;<span class="op" id="6623740">:=</span>&nbsp;<span class="ident" id="6623743"><a href="/text/template/multi_test.go.html#6623608">tmpl</a></span><span class="op" id="6623747">.</span><span class="ident" id="6623748">Root</span><span class="op" id="6623752">.</span><span class="ident" id="6623753">String</span><span class="op" id="6623759">(</span><span class="op" id="6623760">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6623765">if</span>&nbsp;<span class="ident" id="6623768"><a href="/text/template/multi_test.go.html#6623733">result</a></span>&nbsp;<span class="op" id="6623775">!=</span>&nbsp;<span class="ident" id="6623778"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623782">.</span><span class="ident" id="6623783">results</span><span class="op" id="6623790">[</span><span class="ident" id="6623791"><a href="/text/template/multi_test.go.html#6623575">i</a></span><span class="op" id="6623792">]</span>&nbsp;<span class="op" id="6623794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623800"><a href="/text/template/multi_test.go.html#6622871">t</a></span><span class="op" id="6623801">.</span><span class="ident" id="6623802">Errorf</span><span class="op" id="6623808">(</span><span class="string" id="6623809">&#34;%s=(%q):&nbsp;got\n\t%v\nexpected\n\t%v&#34;</span><span class="op" id="6623845">,</span>&nbsp;<span class="ident" id="6623847"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623851">.</span><span class="ident" id="6623852">name</span><span class="op" id="6623856">,</span>&nbsp;<span class="ident" id="6623858"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623862">.</span><span class="ident" id="6623863">input</span><span class="op" id="6623868">,</span>&nbsp;<span class="ident" id="6623870"><a href="/text/template/multi_test.go.html#6623733">result</a></span><span class="op" id="6623876">,</span>&nbsp;<span class="ident" id="6623878"><a href="/text/template/multi_test.go.html#6622895">test</a></span><span class="op" id="6623882">.</span><span class="ident" id="6623883">results</span><span class="op" id="6623890">[</span><span class="ident" id="6623891"><a href="/text/template/multi_test.go.html#6623575">i</a></span><span class="op" id="6623892">]</span><span class="op" id="6623893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623905">}</span><br>
<span class="lineno">85</span><span class="op" id="6623907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6623910">var</span>&nbsp;<span class="ident" id="6623914">multiExecTests</span>&nbsp;<span class="op" id="6623929">=</span>&nbsp;<span class="op" id="6623931">[</span><span class="op" id="6623932">]</span><span class="ident" id="6623933"><a href="/text/template/exec_test.go.html#6592195">execTest</a></span><span class="op" id="6623941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623944">{</span><span class="string" id="6623945">&#34;empty&#34;</span><span class="op" id="6623952">,</span>&nbsp;<span class="string" id="6623954">&#34;&#34;</span><span class="op" id="6623956">,</span>&nbsp;<span class="string" id="6623958">&#34;&#34;</span><span class="op" id="6623960">,</span>&nbsp;<span class="ident" id="6623962">nil</span><span class="op" id="6623965">,</span>&nbsp;<span class="builtintype" id="6623967">true</span><span class="op" id="6623971">}</span><span class="op" id="6623972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6623975">{</span><span class="string" id="6623976">&#34;text&#34;</span><span class="op" id="6623982">,</span>&nbsp;<span class="string" id="6623984">&#34;some&nbsp;text&#34;</span><span class="op" id="6623995">,</span>&nbsp;<span class="string" id="6623997">&#34;some&nbsp;text&#34;</span><span class="op" id="6624008">,</span>&nbsp;<span class="ident" id="6624010">nil</span><span class="op" id="6624013">,</span>&nbsp;<span class="builtintype" id="6624015">true</span><span class="op" id="6624019">}</span><span class="op" id="6624020">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624023">{</span><span class="string" id="6624024">&#34;invoke&nbsp;x&#34;</span><span class="op" id="6624034">,</span>&nbsp;<span class="string" id="6624036">`{{template&nbsp;&#34;x&#34;&nbsp;.SI}}`</span><span class="op" id="6624058">,</span>&nbsp;<span class="string" id="6624060">&#34;TEXT&#34;</span><span class="op" id="6624066">,</span>&nbsp;<span class="ident" id="6624068"><a href="/text/template/exec_test.go.html#6589574">tVal</a></span><span class="op" id="6624072">,</span>&nbsp;<span class="builtintype" id="6624074">true</span><span class="op" id="6624078">}</span><span class="op" id="6624079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624082">{</span><span class="string" id="6624083">&#34;invoke&nbsp;x&nbsp;no&nbsp;args&#34;</span><span class="op" id="6624101">,</span>&nbsp;<span class="string" id="6624103">`{{template&nbsp;&#34;x&#34;}}`</span><span class="op" id="6624121">,</span>&nbsp;<span class="string" id="6624123">&#34;TEXT&#34;</span><span class="op" id="6624129">,</span>&nbsp;<span class="ident" id="6624131"><a href="/text/template/exec_test.go.html#6589574">tVal</a></span><span class="op" id="6624135">,</span>&nbsp;<span class="builtintype" id="6624137">true</span><span class="op" id="6624141">}</span><span class="op" id="6624142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624145">{</span><span class="string" id="6624146">&#34;invoke&nbsp;dot&nbsp;int&#34;</span><span class="op" id="6624162">,</span>&nbsp;<span class="string" id="6624164">`{{template&nbsp;&#34;dot&#34;&nbsp;.I}}`</span><span class="op" id="6624187">,</span>&nbsp;<span class="string" id="6624189">&#34;17&#34;</span><span class="op" id="6624193">,</span>&nbsp;<span class="ident" id="6624195"><a href="/text/template/exec_test.go.html#6589574">tVal</a></span><span class="op" id="6624199">,</span>&nbsp;<span class="builtintype" id="6624201">true</span><span class="op" id="6624205">}</span><span class="op" id="6624206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624209">{</span><span class="string" id="6624210">&#34;invoke&nbsp;dot&nbsp;[]int&#34;</span><span class="op" id="6624228">,</span>&nbsp;<span class="string" id="6624230">`{{template&nbsp;&#34;dot&#34;&nbsp;.SI}}`</span><span class="op" id="6624254">,</span>&nbsp;<span class="string" id="6624256">&#34;[3&nbsp;4&nbsp;5]&#34;</span><span class="op" id="6624265">,</span>&nbsp;<span class="ident" id="6624267"><a href="/text/template/exec_test.go.html#6589574">tVal</a></span><span class="op" id="6624271">,</span>&nbsp;<span class="builtintype" id="6624273">true</span><span class="op" id="6624277">}</span><span class="op" id="6624278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624281">{</span><span class="string" id="6624282">&#34;invoke&nbsp;dotV&#34;</span><span class="op" id="6624295">,</span>&nbsp;<span class="string" id="6624297">`{{template&nbsp;&#34;dotV&#34;&nbsp;.U}}`</span><span class="op" id="6624321">,</span>&nbsp;<span class="string" id="6624323">&#34;v&#34;</span><span class="op" id="6624326">,</span>&nbsp;<span class="ident" id="6624328"><a href="/text/template/exec_test.go.html#6589574">tVal</a></span><span class="op" id="6624332">,</span>&nbsp;<span class="builtintype" id="6624334">true</span><span class="op" id="6624338">}</span><span class="op" id="6624339">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624342">{</span><span class="string" id="6624343">&#34;invoke&nbsp;nested&nbsp;int&#34;</span><span class="op" id="6624362">,</span>&nbsp;<span class="string" id="6624364">`{{template&nbsp;&#34;nested&#34;&nbsp;.I}}`</span><span class="op" id="6624390">,</span>&nbsp;<span class="string" id="6624392">&#34;17&#34;</span><span class="op" id="6624396">,</span>&nbsp;<span class="ident" id="6624398"><a href="/text/template/exec_test.go.html#6589574">tVal</a></span><span class="op" id="6624402">,</span>&nbsp;<span class="builtintype" id="6624404">true</span><span class="op" id="6624408">}</span><span class="op" id="6624409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624412">{</span><span class="string" id="6624413">&#34;variable&nbsp;declared&nbsp;by&nbsp;template&#34;</span><span class="op" id="6624444">,</span>&nbsp;<span class="string" id="6624446">`{{template&nbsp;&#34;nested&#34;&nbsp;$x:=.SI}},{{index&nbsp;$x&nbsp;1}}`</span><span class="op" id="6624492">,</span>&nbsp;<span class="string" id="6624494">&#34;[3&nbsp;4&nbsp;5],4&#34;</span><span class="op" id="6624505">,</span>&nbsp;<span class="ident" id="6624507"><a href="/text/template/exec_test.go.html#6589574">tVal</a></span><span class="op" id="6624511">,</span>&nbsp;<span class="builtintype" id="6624513">true</span><span class="op" id="6624517">}</span><span class="op" id="6624518">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6624522">//&nbsp;User-defined&nbsp;function:&nbsp;test&nbsp;argument&nbsp;evaluator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624574">{</span><span class="string" id="6624575">&#34;testFunc&nbsp;literal&#34;</span><span class="op" id="6624593">,</span>&nbsp;<span class="string" id="6624595">`{{oneArg&nbsp;&#34;joe&#34;}}`</span><span class="op" id="6624613">,</span>&nbsp;<span class="string" id="6624615">&#34;oneArg=joe&#34;</span><span class="op" id="6624627">,</span>&nbsp;<span class="ident" id="6624629"><a href="/text/template/exec_test.go.html#6589574">tVal</a></span><span class="op" id="6624633">,</span>&nbsp;<span class="builtintype" id="6624635">true</span><span class="op" id="6624639">}</span><span class="op" id="6624640">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624643">{</span><span class="string" id="6624644">&#34;testFunc&nbsp;.&#34;</span><span class="op" id="6624656">,</span>&nbsp;<span class="string" id="6624658">`{{oneArg&nbsp;.}}`</span><span class="op" id="6624672">,</span>&nbsp;<span class="string" id="6624674">&#34;oneArg=joe&#34;</span><span class="op" id="6624686">,</span>&nbsp;<span class="string" id="6624688">&#34;joe&#34;</span><span class="op" id="6624693">,</span>&nbsp;<span class="builtintype" id="6624695">true</span><span class="op" id="6624699">}</span><span class="op" id="6624700">,</span><br>
<span class="lineno"></span><span class="op" id="6624702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6624705">//&nbsp;These&nbsp;strings&nbsp;are&nbsp;also&nbsp;in&nbsp;testdata/*.</span><br>
<span class="lineno"></span><span class="keyword" id="6624746">const</span>&nbsp;<span class="ident" id="6624752">multiText1</span>&nbsp;<span class="op" id="6624763">=</span>&nbsp;<span class="string" id="6624765">`<br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp{{define&nbsp;&#34;x&#34;}}TEXT{{end}}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp{{define&nbsp;&#34;dotV&#34;}}{{.V}}{{end}}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6624829">const</span>&nbsp;<span class="ident" id="6624835">multiText2</span>&nbsp;<span class="op" id="6624846">=</span>&nbsp;<span class="string" id="6624848">`<br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp{{define&nbsp;&#34;dot&#34;}}{{.}}{{end}}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp{{define&nbsp;&#34;nested&#34;}}{{template&nbsp;&#34;dot&#34;&nbsp;.}}{{end}}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6624931">func</span>&nbsp;<span class="ident" id="6624936">TestMultiExecute</span><span class="op" id="6624952">(</span><span class="ident" id="6624953">t</span>&nbsp;<span class="op" id="6624955">*</span><span class="ident" id="6624956"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6624963">.</span><span class="ident" id="6624964">T</span><span class="op" id="6624965">)</span>&nbsp;<span class="op" id="6624967">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6624970">//&nbsp;Declare&nbsp;a&nbsp;couple&nbsp;of&nbsp;templates&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625011">template</span><span class="op" id="6625019">,</span>&nbsp;<span class="ident" id="6625021">err</span>&nbsp;<span class="op" id="6625025">:=</span>&nbsp;<span class="ident" id="6625028"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6625031">(</span><span class="string" id="6625032">&#34;root&#34;</span><span class="op" id="6625038">)</span><span class="op" id="6625039">.</span><span class="ident" id="6625040">Parse</span><span class="op" id="6625045">(</span><span class="ident" id="6625046"><a href="/text/template/multi_test.go.html#6624752">multiText1</a></span><span class="op" id="6625056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625059">if</span>&nbsp;<span class="ident" id="6625062"><a href="/text/template/multi_test.go.html#6625021">err</a></span>&nbsp;<span class="op" id="6625066">!=</span>&nbsp;<span class="ident" id="6625069">nil</span>&nbsp;<span class="op" id="6625073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625077"><a href="/text/template/multi_test.go.html#6624953">t</a></span><span class="op" id="6625078">.</span><span class="ident" id="6625079">Fatalf</span><span class="op" id="6625085">(</span><span class="string" id="6625086">&#34;parse&nbsp;error&nbsp;for&nbsp;1:&nbsp;%s&#34;</span><span class="op" id="6625109">,</span>&nbsp;<span class="ident" id="6625111"><a href="/text/template/multi_test.go.html#6625021">err</a></span><span class="op" id="6625114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625117">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625120">_</span><span class="op" id="6625121">,</span>&nbsp;<span class="ident" id="6625123"><a href="/text/template/multi_test.go.html#6625021">err</a></span>&nbsp;<span class="op" id="6625127">=</span>&nbsp;<span class="ident" id="6625129"><a href="/text/template/multi_test.go.html#6625011">template</a></span><span class="op" id="6625137">.</span><span class="ident" id="6625138">Parse</span><span class="op" id="6625143">(</span><span class="ident" id="6625144"><a href="/text/template/multi_test.go.html#6624835">multiText2</a></span><span class="op" id="6625154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625157">if</span>&nbsp;<span class="ident" id="6625160"><a href="/text/template/multi_test.go.html#6625021">err</a></span>&nbsp;<span class="op" id="6625164">!=</span>&nbsp;<span class="ident" id="6625167">nil</span>&nbsp;<span class="op" id="6625171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625175"><a href="/text/template/multi_test.go.html#6624953">t</a></span><span class="op" id="6625176">.</span><span class="ident" id="6625177">Fatalf</span><span class="op" id="6625183">(</span><span class="string" id="6625184">&#34;parse&nbsp;error&nbsp;for&nbsp;2:&nbsp;%s&#34;</span><span class="op" id="6625207">,</span>&nbsp;<span class="ident" id="6625209"><a href="/text/template/multi_test.go.html#6625021">err</a></span><span class="op" id="6625212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625218"><a href="/text/template/exec_test.go.html#6610441">testExecute</a></span><span class="op" id="6625229">(</span><span class="ident" id="6625230"><a href="/text/template/multi_test.go.html#6623914">multiExecTests</a></span><span class="op" id="6625244">,</span>&nbsp;<span class="ident" id="6625246"><a href="/text/template/multi_test.go.html#6625011">template</a></span><span class="op" id="6625254">,</span>&nbsp;<span class="ident" id="6625256"><a href="/text/template/multi_test.go.html#6624953">t</a></span><span class="op" id="6625257">)</span><br>
<span class="lineno">125</span><span class="op" id="6625259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6625262">func</span>&nbsp;<span class="ident" id="6625267">TestParseFiles</span><span class="op" id="6625281">(</span><span class="ident" id="6625282">t</span>&nbsp;<span class="op" id="6625284">*</span><span class="ident" id="6625285"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6625292">.</span><span class="ident" id="6625293">T</span><span class="op" id="6625294">)</span>&nbsp;<span class="op" id="6625296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625299">_</span><span class="op" id="6625300">,</span>&nbsp;<span class="ident" id="6625302">err</span>&nbsp;<span class="op" id="6625306">:=</span>&nbsp;<span class="ident" id="6625309"><a href="/text/template/helper.go.html#4712109">ParseFiles</a></span><span class="op" id="6625319">(</span><span class="string" id="6625320">&#34;DOES&nbsp;NOT&nbsp;EXIST&#34;</span><span class="op" id="6625336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625339">if</span>&nbsp;<span class="ident" id="6625342"><a href="/text/template/multi_test.go.html#6625302">err</a></span>&nbsp;<span class="op" id="6625346">==</span>&nbsp;<span class="ident" id="6625349">nil</span>&nbsp;<span class="op" id="6625353">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625357"><a href="/text/template/multi_test.go.html#6625282">t</a></span><span class="op" id="6625358">.</span><span class="ident" id="6625359">Error</span><span class="op" id="6625364">(</span><span class="string" id="6625365">&#34;expected&nbsp;error&nbsp;for&nbsp;non-existent&nbsp;file;&nbsp;got&nbsp;none&#34;</span><span class="op" id="6625413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625419">template</span>&nbsp;<span class="op" id="6625428">:=</span>&nbsp;<span class="ident" id="6625431"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6625434">(</span><span class="string" id="6625435">&#34;root&#34;</span><span class="op" id="6625441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625444">_</span><span class="op" id="6625445">,</span>&nbsp;<span class="ident" id="6625447"><a href="/text/template/multi_test.go.html#6625302">err</a></span>&nbsp;<span class="op" id="6625451">=</span>&nbsp;<span class="ident" id="6625453"><a href="/text/template/multi_test.go.html#6625419">template</a></span><span class="op" id="6625461">.</span><span class="ident" id="6625462">ParseFiles</span><span class="op" id="6625472">(</span><span class="string" id="6625473">&#34;testdata/file1.tmpl&#34;</span><span class="op" id="6625494">,</span>&nbsp;<span class="string" id="6625496">&#34;testdata/file2.tmpl&#34;</span><span class="op" id="6625517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625520">if</span>&nbsp;<span class="ident" id="6625523"><a href="/text/template/multi_test.go.html#6625302">err</a></span>&nbsp;<span class="op" id="6625527">!=</span>&nbsp;<span class="ident" id="6625530">nil</span>&nbsp;<span class="op" id="6625534">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625538"><a href="/text/template/multi_test.go.html#6625282">t</a></span><span class="op" id="6625539">.</span><span class="ident" id="6625540">Fatalf</span><span class="op" id="6625546">(</span><span class="string" id="6625547">&#34;error&nbsp;parsing&nbsp;files:&nbsp;%v&#34;</span><span class="op" id="6625572">,</span>&nbsp;<span class="ident" id="6625574"><a href="/text/template/multi_test.go.html#6625302">err</a></span><span class="op" id="6625577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625583"><a href="/text/template/exec_test.go.html#6610441">testExecute</a></span><span class="op" id="6625594">(</span><span class="ident" id="6625595"><a href="/text/template/multi_test.go.html#6623914">multiExecTests</a></span><span class="op" id="6625609">,</span>&nbsp;<span class="ident" id="6625611"><a href="/text/template/multi_test.go.html#6625419">template</a></span><span class="op" id="6625619">,</span>&nbsp;<span class="ident" id="6625621"><a href="/text/template/multi_test.go.html#6625282">t</a></span><span class="op" id="6625622">)</span><br>
<span class="lineno"></span><span class="op" id="6625624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="6625627">func</span>&nbsp;<span class="ident" id="6625632">TestParseGlob</span><span class="op" id="6625645">(</span><span class="ident" id="6625646">t</span>&nbsp;<span class="op" id="6625648">*</span><span class="ident" id="6625649"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6625656">.</span><span class="ident" id="6625657">T</span><span class="op" id="6625658">)</span>&nbsp;<span class="op" id="6625660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625663">_</span><span class="op" id="6625664">,</span>&nbsp;<span class="ident" id="6625666">err</span>&nbsp;<span class="op" id="6625670">:=</span>&nbsp;<span class="ident" id="6625673"><a href="/text/template/helper.go.html#4714000">ParseGlob</a></span><span class="op" id="6625682">(</span><span class="string" id="6625683">&#34;DOES&nbsp;NOT&nbsp;EXIST&#34;</span><span class="op" id="6625699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625702">if</span>&nbsp;<span class="ident" id="6625705"><a href="/text/template/multi_test.go.html#6625666">err</a></span>&nbsp;<span class="op" id="6625709">==</span>&nbsp;<span class="ident" id="6625712">nil</span>&nbsp;<span class="op" id="6625716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625720"><a href="/text/template/multi_test.go.html#6625646">t</a></span><span class="op" id="6625721">.</span><span class="ident" id="6625722">Error</span><span class="op" id="6625727">(</span><span class="string" id="6625728">&#34;expected&nbsp;error&nbsp;for&nbsp;non-existent&nbsp;file;&nbsp;got&nbsp;none&#34;</span><span class="op" id="6625776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625779">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625782">_</span><span class="op" id="6625783">,</span>&nbsp;<span class="ident" id="6625785"><a href="/text/template/multi_test.go.html#6625666">err</a></span>&nbsp;<span class="op" id="6625789">=</span>&nbsp;<span class="ident" id="6625791"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6625794">(</span><span class="string" id="6625795">&#34;error&#34;</span><span class="op" id="6625802">)</span><span class="op" id="6625803">.</span><span class="ident" id="6625804">ParseGlob</span><span class="op" id="6625813">(</span><span class="string" id="6625814">&#34;[x&#34;</span><span class="op" id="6625818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625821">if</span>&nbsp;<span class="ident" id="6625824"><a href="/text/template/multi_test.go.html#6625666">err</a></span>&nbsp;<span class="op" id="6625828">==</span>&nbsp;<span class="ident" id="6625831">nil</span>&nbsp;<span class="op" id="6625835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625839"><a href="/text/template/multi_test.go.html#6625646">t</a></span><span class="op" id="6625840">.</span><span class="ident" id="6625841">Error</span><span class="op" id="6625846">(</span><span class="string" id="6625847">&#34;expected&nbsp;error&nbsp;for&nbsp;bad&nbsp;pattern;&nbsp;got&nbsp;none&#34;</span><span class="op" id="6625889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625895">template</span>&nbsp;<span class="op" id="6625904">:=</span>&nbsp;<span class="ident" id="6625907"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6625910">(</span><span class="string" id="6625911">&#34;root&#34;</span><span class="op" id="6625917">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625920">_</span><span class="op" id="6625921">,</span>&nbsp;<span class="ident" id="6625923"><a href="/text/template/multi_test.go.html#6625666">err</a></span>&nbsp;<span class="op" id="6625927">=</span>&nbsp;<span class="ident" id="6625929"><a href="/text/template/multi_test.go.html#6625895">template</a></span><span class="op" id="6625937">.</span><span class="ident" id="6625938">ParseGlob</span><span class="op" id="6625947">(</span><span class="string" id="6625948">&#34;testdata/file*.tmpl&#34;</span><span class="op" id="6625969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625972">if</span>&nbsp;<span class="ident" id="6625975"><a href="/text/template/multi_test.go.html#6625666">err</a></span>&nbsp;<span class="op" id="6625979">!=</span>&nbsp;<span class="ident" id="6625982">nil</span>&nbsp;<span class="op" id="6625986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625990"><a href="/text/template/multi_test.go.html#6625646">t</a></span><span class="op" id="6625991">.</span><span class="ident" id="6625992">Fatalf</span><span class="op" id="6625998">(</span><span class="string" id="6625999">&#34;error&nbsp;parsing&nbsp;files:&nbsp;%v&#34;</span><span class="op" id="6626024">,</span>&nbsp;<span class="ident" id="6626026"><a href="/text/template/multi_test.go.html#6625666">err</a></span><span class="op" id="6626029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626035"><a href="/text/template/exec_test.go.html#6610441">testExecute</a></span><span class="op" id="6626046">(</span><span class="ident" id="6626047"><a href="/text/template/multi_test.go.html#6623914">multiExecTests</a></span><span class="op" id="6626061">,</span>&nbsp;<span class="ident" id="6626063"><a href="/text/template/multi_test.go.html#6625895">template</a></span><span class="op" id="6626071">,</span>&nbsp;<span class="ident" id="6626073"><a href="/text/template/multi_test.go.html#6625646">t</a></span><span class="op" id="6626074">)</span><br>
<span class="lineno">155</span><span class="op" id="6626076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6626079">//&nbsp;In&nbsp;these&nbsp;tests,&nbsp;actual&nbsp;content&nbsp;(not&nbsp;just&nbsp;template&nbsp;definitions)&nbsp;comes&nbsp;from&nbsp;the&nbsp;parsed&nbsp;files.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6626175">var</span>&nbsp;<span class="ident" id="6626179">templateFileExecTests</span>&nbsp;<span class="op" id="6626201">=</span>&nbsp;<span class="op" id="6626203">[</span><span class="op" id="6626204">]</span><span class="ident" id="6626205"><a href="/text/template/exec_test.go.html#6592195">execTest</a></span><span class="op" id="6626213">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626216">{</span><span class="string" id="6626217">&#34;test&#34;</span><span class="op" id="6626223">,</span>&nbsp;<span class="string" id="6626225">`{{template&nbsp;&#34;tmpl1.tmpl&#34;}}{{template&nbsp;&#34;tmpl2.tmpl&#34;}}`</span><span class="op" id="6626277">,</span>&nbsp;<span class="string" id="6626279">&#34;template1\n\ny\ntemplate2\n\nx\n&#34;</span><span class="op" id="6626313">,</span>&nbsp;<span class="num" id="6626315">0</span><span class="op" id="6626316">,</span>&nbsp;<span class="builtintype" id="6626318">true</span><span class="op" id="6626322">}</span><span class="op" id="6626323">,</span><br>
<span class="lineno"></span><span class="op" id="6626325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6626328">func</span>&nbsp;<span class="ident" id="6626333">TestParseFilesWithData</span><span class="op" id="6626355">(</span><span class="ident" id="6626356">t</span>&nbsp;<span class="op" id="6626358">*</span><span class="ident" id="6626359"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6626366">.</span><span class="ident" id="6626367">T</span><span class="op" id="6626368">)</span>&nbsp;<span class="op" id="6626370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626373">template</span><span class="op" id="6626381">,</span>&nbsp;<span class="ident" id="6626383">err</span>&nbsp;<span class="op" id="6626387">:=</span>&nbsp;<span class="ident" id="6626390"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6626393">(</span><span class="string" id="6626394">&#34;root&#34;</span><span class="op" id="6626400">)</span><span class="op" id="6626401">.</span><span class="ident" id="6626402">ParseFiles</span><span class="op" id="6626412">(</span><span class="string" id="6626413">&#34;testdata/tmpl1.tmpl&#34;</span><span class="op" id="6626434">,</span>&nbsp;<span class="string" id="6626436">&#34;testdata/tmpl2.tmpl&#34;</span><span class="op" id="6626457">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626460">if</span>&nbsp;<span class="ident" id="6626463"><a href="/text/template/multi_test.go.html#6626383">err</a></span>&nbsp;<span class="op" id="6626467">!=</span>&nbsp;<span class="ident" id="6626470">nil</span>&nbsp;<span class="op" id="6626474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626478"><a href="/text/template/multi_test.go.html#6626356">t</a></span><span class="op" id="6626479">.</span><span class="ident" id="6626480">Fatalf</span><span class="op" id="6626486">(</span><span class="string" id="6626487">&#34;error&nbsp;parsing&nbsp;files:&nbsp;%v&#34;</span><span class="op" id="6626512">,</span>&nbsp;<span class="ident" id="6626514"><a href="/text/template/multi_test.go.html#6626383">err</a></span><span class="op" id="6626517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626523"><a href="/text/template/exec_test.go.html#6610441">testExecute</a></span><span class="op" id="6626534">(</span><span class="ident" id="6626535"><a href="/text/template/multi_test.go.html#6626179">templateFileExecTests</a></span><span class="op" id="6626556">,</span>&nbsp;<span class="ident" id="6626558"><a href="/text/template/multi_test.go.html#6626373">template</a></span><span class="op" id="6626566">,</span>&nbsp;<span class="ident" id="6626568"><a href="/text/template/multi_test.go.html#6626356">t</a></span><span class="op" id="6626569">)</span><br>
<span class="lineno"></span><span class="op" id="6626571">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="6626574">func</span>&nbsp;<span class="ident" id="6626579">TestParseGlobWithData</span><span class="op" id="6626600">(</span><span class="ident" id="6626601">t</span>&nbsp;<span class="op" id="6626603">*</span><span class="ident" id="6626604"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6626611">.</span><span class="ident" id="6626612">T</span><span class="op" id="6626613">)</span>&nbsp;<span class="op" id="6626615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626618">template</span><span class="op" id="6626626">,</span>&nbsp;<span class="ident" id="6626628">err</span>&nbsp;<span class="op" id="6626632">:=</span>&nbsp;<span class="ident" id="6626635"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6626638">(</span><span class="string" id="6626639">&#34;root&#34;</span><span class="op" id="6626645">)</span><span class="op" id="6626646">.</span><span class="ident" id="6626647">ParseGlob</span><span class="op" id="6626656">(</span><span class="string" id="6626657">&#34;testdata/tmpl*.tmpl&#34;</span><span class="op" id="6626678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626681">if</span>&nbsp;<span class="ident" id="6626684"><a href="/text/template/multi_test.go.html#6626628">err</a></span>&nbsp;<span class="op" id="6626688">!=</span>&nbsp;<span class="ident" id="6626691">nil</span>&nbsp;<span class="op" id="6626695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626699"><a href="/text/template/multi_test.go.html#6626601">t</a></span><span class="op" id="6626700">.</span><span class="ident" id="6626701">Fatalf</span><span class="op" id="6626707">(</span><span class="string" id="6626708">&#34;error&nbsp;parsing&nbsp;files:&nbsp;%v&#34;</span><span class="op" id="6626733">,</span>&nbsp;<span class="ident" id="6626735"><a href="/text/template/multi_test.go.html#6626628">err</a></span><span class="op" id="6626738">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626744"><a href="/text/template/exec_test.go.html#6610441">testExecute</a></span><span class="op" id="6626755">(</span><span class="ident" id="6626756"><a href="/text/template/multi_test.go.html#6626179">templateFileExecTests</a></span><span class="op" id="6626777">,</span>&nbsp;<span class="ident" id="6626779"><a href="/text/template/multi_test.go.html#6626618">template</a></span><span class="op" id="6626787">,</span>&nbsp;<span class="ident" id="6626789"><a href="/text/template/multi_test.go.html#6626601">t</a></span><span class="op" id="6626790">)</span><br>
<span class="lineno"></span><span class="op" id="6626792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6626795">const</span>&nbsp;<span class="op" id="6626801">(</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626804">cloneText1</span>&nbsp;<span class="op" id="6626815">=</span>&nbsp;<span class="string" id="6626817">`{{define&nbsp;&#34;a&#34;}}{{template&nbsp;&#34;b&#34;}}{{template&nbsp;&#34;c&#34;}}{{end}}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626874">cloneText2</span>&nbsp;<span class="op" id="6626885">=</span>&nbsp;<span class="string" id="6626887">`{{define&nbsp;&#34;b&#34;}}b{{end}}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626913">cloneText3</span>&nbsp;<span class="op" id="6626924">=</span>&nbsp;<span class="string" id="6626926">`{{define&nbsp;&#34;c&#34;}}root{{end}}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626955">cloneText4</span>&nbsp;<span class="op" id="6626966">=</span>&nbsp;<span class="string" id="6626968">`{{define&nbsp;&#34;c&#34;}}clone{{end}}`</span><br>
<span class="lineno"></span><span class="op" id="6626997">)</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="6627000">func</span>&nbsp;<span class="ident" id="6627005">TestClone</span><span class="op" id="6627014">(</span><span class="ident" id="6627015">t</span>&nbsp;<span class="op" id="6627017">*</span><span class="ident" id="6627018"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6627025">.</span><span class="ident" id="6627026">T</span><span class="op" id="6627027">)</span>&nbsp;<span class="op" id="6627029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6627032">//&nbsp;Create&nbsp;some&nbsp;templates&nbsp;and&nbsp;clone&nbsp;the&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627078">root</span><span class="op" id="6627082">,</span>&nbsp;<span class="ident" id="6627084">err</span>&nbsp;<span class="op" id="6627088">:=</span>&nbsp;<span class="ident" id="6627091"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6627094">(</span><span class="string" id="6627095">&#34;root&#34;</span><span class="op" id="6627101">)</span><span class="op" id="6627102">.</span><span class="ident" id="6627103">Parse</span><span class="op" id="6627108">(</span><span class="ident" id="6627109"><a href="/text/template/multi_test.go.html#6626804">cloneText1</a></span><span class="op" id="6627119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627122">if</span>&nbsp;<span class="ident" id="6627125"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627129">!=</span>&nbsp;<span class="ident" id="6627132">nil</span>&nbsp;<span class="op" id="6627136">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627140"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627141">.</span><span class="ident" id="6627142">Fatal</span><span class="op" id="6627147">(</span><span class="ident" id="6627148"><a href="/text/template/multi_test.go.html#6627084">err</a></span><span class="op" id="6627151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627157">_</span><span class="op" id="6627158">,</span>&nbsp;<span class="ident" id="6627160"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627164">=</span>&nbsp;<span class="ident" id="6627166"><a href="/text/template/multi_test.go.html#6627078">root</a></span><span class="op" id="6627170">.</span><span class="ident" id="6627171">Parse</span><span class="op" id="6627176">(</span><span class="ident" id="6627177"><a href="/text/template/multi_test.go.html#6626874">cloneText2</a></span><span class="op" id="6627187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627190">if</span>&nbsp;<span class="ident" id="6627193"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627197">!=</span>&nbsp;<span class="ident" id="6627200">nil</span>&nbsp;<span class="op" id="6627204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627208"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627209">.</span><span class="ident" id="6627210">Fatal</span><span class="op" id="6627215">(</span><span class="ident" id="6627216"><a href="/text/template/multi_test.go.html#6627084">err</a></span><span class="op" id="6627219">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627225">clone</span>&nbsp;<span class="op" id="6627231">:=</span>&nbsp;<span class="ident" id="6627234"><a href="/text/template/helper.go.html#4711715">Must</a></span><span class="op" id="6627238">(</span><span class="ident" id="6627239"><a href="/text/template/multi_test.go.html#6627078">root</a></span><span class="op" id="6627243">.</span><span class="ident" id="6627244">Clone</span><span class="op" id="6627249">(</span><span class="op" id="6627250">)</span><span class="op" id="6627251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6627254">//&nbsp;Add&nbsp;variants&nbsp;to&nbsp;both.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627280">_</span><span class="op" id="6627281">,</span>&nbsp;<span class="ident" id="6627283"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627287">=</span>&nbsp;<span class="ident" id="6627289"><a href="/text/template/multi_test.go.html#6627078">root</a></span><span class="op" id="6627293">.</span><span class="ident" id="6627294">Parse</span><span class="op" id="6627299">(</span><span class="ident" id="6627300"><a href="/text/template/multi_test.go.html#6626913">cloneText3</a></span><span class="op" id="6627310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627313">if</span>&nbsp;<span class="ident" id="6627316"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627320">!=</span>&nbsp;<span class="ident" id="6627323">nil</span>&nbsp;<span class="op" id="6627327">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627331"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627332">.</span><span class="ident" id="6627333">Fatal</span><span class="op" id="6627338">(</span><span class="ident" id="6627339"><a href="/text/template/multi_test.go.html#6627084">err</a></span><span class="op" id="6627342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627348">_</span><span class="op" id="6627349">,</span>&nbsp;<span class="ident" id="6627351"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627355">=</span>&nbsp;<span class="ident" id="6627357"><a href="/text/template/multi_test.go.html#6627225">clone</a></span><span class="op" id="6627362">.</span><span class="ident" id="6627363">Parse</span><span class="op" id="6627368">(</span><span class="ident" id="6627369"><a href="/text/template/multi_test.go.html#6626955">cloneText4</a></span><span class="op" id="6627379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627382">if</span>&nbsp;<span class="ident" id="6627385"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627389">!=</span>&nbsp;<span class="ident" id="6627392">nil</span>&nbsp;<span class="op" id="6627396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627400"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627401">.</span><span class="ident" id="6627402">Fatal</span><span class="op" id="6627407">(</span><span class="ident" id="6627408"><a href="/text/template/multi_test.go.html#6627084">err</a></span><span class="op" id="6627411">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6627417">//&nbsp;Verify&nbsp;that&nbsp;the&nbsp;clone&nbsp;is&nbsp;self-consistent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627463">for</span>&nbsp;<span class="ident" id="6627467">k</span><span class="op" id="6627468">,</span>&nbsp;<span class="ident" id="6627470">v</span>&nbsp;<span class="op" id="6627472">:=</span>&nbsp;<span class="keyword" id="6627475">range</span>&nbsp;<span class="ident" id="6627481"><a href="/text/template/multi_test.go.html#6627225">clone</a></span><span class="op" id="6627486">.</span><span class="ident" id="6627487">tmpl</span>&nbsp;<span class="op" id="6627492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627496">if</span>&nbsp;<span class="ident" id="6627499"><a href="/text/template/multi_test.go.html#6627467">k</a></span>&nbsp;<span class="op" id="6627501">==</span>&nbsp;<span class="ident" id="6627504"><a href="/text/template/multi_test.go.html#6627225">clone</a></span><span class="op" id="6627509">.</span><span class="ident" id="6627510">name</span>&nbsp;<span class="op" id="6627515">&amp;&amp;</span>&nbsp;<span class="ident" id="6627518"><a href="/text/template/multi_test.go.html#6627470">v</a></span><span class="op" id="6627519">.</span><span class="ident" id="6627520">tmpl</span><span class="op" id="6627524">[</span><span class="ident" id="6627525"><a href="/text/template/multi_test.go.html#6627467">k</a></span><span class="op" id="6627526">]</span>&nbsp;<span class="op" id="6627528">!=</span>&nbsp;<span class="ident" id="6627531"><a href="/text/template/multi_test.go.html#6627225">clone</a></span>&nbsp;<span class="op" id="6627537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627542"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627543">.</span><span class="ident" id="6627544">Error</span><span class="op" id="6627549">(</span><span class="string" id="6627550">&#34;clone&nbsp;does&nbsp;not&nbsp;contain&nbsp;root&#34;</span><span class="op" id="6627579">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627587">if</span>&nbsp;<span class="ident" id="6627590"><a href="/text/template/multi_test.go.html#6627470">v</a></span>&nbsp;<span class="op" id="6627592">!=</span>&nbsp;<span class="ident" id="6627595"><a href="/text/template/multi_test.go.html#6627470">v</a></span><span class="op" id="6627596">.</span><span class="ident" id="6627597">tmpl</span><span class="op" id="6627601">[</span><span class="ident" id="6627602"><a href="/text/template/multi_test.go.html#6627470">v</a></span><span class="op" id="6627603">.</span><span class="ident" id="6627604">name</span><span class="op" id="6627608">]</span>&nbsp;<span class="op" id="6627610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627615"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627616">.</span><span class="ident" id="6627617">Errorf</span><span class="op" id="6627623">(</span><span class="string" id="6627624">&#34;clone&nbsp;does&nbsp;not&nbsp;contain&nbsp;self&nbsp;for&nbsp;%q&#34;</span><span class="op" id="6627660">,</span>&nbsp;<span class="ident" id="6627662"><a href="/text/template/multi_test.go.html#6627467">k</a></span><span class="op" id="6627663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627670">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6627673">//&nbsp;Execute&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627691">var</span>&nbsp;<span class="ident" id="6627695">b</span>&nbsp;<span class="ident" id="6627697"><a href="/text/template/multi_test.go.html#6622173">bytes</a></span><span class="op" id="6627702">.</span><span class="ident" id="6627703">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627711"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627715">=</span>&nbsp;<span class="ident" id="6627717"><a href="/text/template/multi_test.go.html#6627078">root</a></span><span class="op" id="6627721">.</span><span class="ident" id="6627722">ExecuteTemplate</span><span class="op" id="6627737">(</span><span class="op" id="6627738">&amp;</span><span class="ident" id="6627739"><a href="/text/template/multi_test.go.html#6627695">b</a></span><span class="op" id="6627740">,</span>&nbsp;<span class="string" id="6627742">&#34;a&#34;</span><span class="op" id="6627745">,</span>&nbsp;<span class="num" id="6627747">0</span><span class="op" id="6627748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627751">if</span>&nbsp;<span class="ident" id="6627754"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627758">!=</span>&nbsp;<span class="ident" id="6627761">nil</span>&nbsp;<span class="op" id="6627765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627769"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627770">.</span><span class="ident" id="6627771">Fatal</span><span class="op" id="6627776">(</span><span class="ident" id="6627777"><a href="/text/template/multi_test.go.html#6627084">err</a></span><span class="op" id="6627780">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627786">if</span>&nbsp;<span class="ident" id="6627789"><a href="/text/template/multi_test.go.html#6627695">b</a></span><span class="op" id="6627790">.</span><span class="ident" id="6627791">String</span><span class="op" id="6627797">(</span><span class="op" id="6627798">)</span>&nbsp;<span class="op" id="6627800">!=</span>&nbsp;<span class="string" id="6627803">&#34;broot&#34;</span>&nbsp;<span class="op" id="6627811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627815"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627816">.</span><span class="ident" id="6627817">Errorf</span><span class="op" id="6627823">(</span><span class="string" id="6627824">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6627844">,</span>&nbsp;<span class="string" id="6627846">&#34;broot&#34;</span><span class="op" id="6627853">,</span>&nbsp;<span class="ident" id="6627855"><a href="/text/template/multi_test.go.html#6627695">b</a></span><span class="op" id="6627856">.</span><span class="ident" id="6627857">String</span><span class="op" id="6627863">(</span><span class="op" id="6627864">)</span><span class="op" id="6627865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6627871">//&nbsp;Execute&nbsp;copy.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627889"><a href="/text/template/multi_test.go.html#6627695">b</a></span><span class="op" id="6627890">.</span><span class="ident" id="6627891">Reset</span><span class="op" id="6627896">(</span><span class="op" id="6627897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627900"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627904">=</span>&nbsp;<span class="ident" id="6627906"><a href="/text/template/multi_test.go.html#6627225">clone</a></span><span class="op" id="6627911">.</span><span class="ident" id="6627912">ExecuteTemplate</span><span class="op" id="6627927">(</span><span class="op" id="6627928">&amp;</span><span class="ident" id="6627929"><a href="/text/template/multi_test.go.html#6627695">b</a></span><span class="op" id="6627930">,</span>&nbsp;<span class="string" id="6627932">&#34;a&#34;</span><span class="op" id="6627935">,</span>&nbsp;<span class="num" id="6627937">0</span><span class="op" id="6627938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627941">if</span>&nbsp;<span class="ident" id="6627944"><a href="/text/template/multi_test.go.html#6627084">err</a></span>&nbsp;<span class="op" id="6627948">!=</span>&nbsp;<span class="ident" id="6627951">nil</span>&nbsp;<span class="op" id="6627955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6627959"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6627960">.</span><span class="ident" id="6627961">Fatal</span><span class="op" id="6627966">(</span><span class="ident" id="6627967"><a href="/text/template/multi_test.go.html#6627084">err</a></span><span class="op" id="6627970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6627973">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6627976">if</span>&nbsp;<span class="ident" id="6627979"><a href="/text/template/multi_test.go.html#6627695">b</a></span><span class="op" id="6627980">.</span><span class="ident" id="6627981">String</span><span class="op" id="6627987">(</span><span class="op" id="6627988">)</span>&nbsp;<span class="op" id="6627990">!=</span>&nbsp;<span class="string" id="6627993">&#34;bclone&#34;</span>&nbsp;<span class="op" id="6628002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628006"><a href="/text/template/multi_test.go.html#6627015">t</a></span><span class="op" id="6628007">.</span><span class="ident" id="6628008">Errorf</span><span class="op" id="6628014">(</span><span class="string" id="6628015">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6628035">,</span>&nbsp;<span class="string" id="6628037">&#34;bclone&#34;</span><span class="op" id="6628045">,</span>&nbsp;<span class="ident" id="6628047"><a href="/text/template/multi_test.go.html#6627695">b</a></span><span class="op" id="6628048">.</span><span class="ident" id="6628049">String</span><span class="op" id="6628055">(</span><span class="op" id="6628056">)</span><span class="op" id="6628057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6628060">}</span><br>
<span class="lineno"></span><span class="op" id="6628062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="6628065">func</span>&nbsp;<span class="ident" id="6628070">TestAddParseTree</span><span class="op" id="6628086">(</span><span class="ident" id="6628087">t</span>&nbsp;<span class="op" id="6628089">*</span><span class="ident" id="6628090"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6628097">.</span><span class="ident" id="6628098">T</span><span class="op" id="6628099">)</span>&nbsp;<span class="op" id="6628101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6628104">//&nbsp;Create&nbsp;some&nbsp;templates.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628131">root</span><span class="op" id="6628135">,</span>&nbsp;<span class="ident" id="6628137">err</span>&nbsp;<span class="op" id="6628141">:=</span>&nbsp;<span class="ident" id="6628144"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6628147">(</span><span class="string" id="6628148">&#34;root&#34;</span><span class="op" id="6628154">)</span><span class="op" id="6628155">.</span><span class="ident" id="6628156">Parse</span><span class="op" id="6628161">(</span><span class="ident" id="6628162"><a href="/text/template/multi_test.go.html#6626804">cloneText1</a></span><span class="op" id="6628172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6628175">if</span>&nbsp;<span class="ident" id="6628178"><a href="/text/template/multi_test.go.html#6628137">err</a></span>&nbsp;<span class="op" id="6628182">!=</span>&nbsp;<span class="ident" id="6628185">nil</span>&nbsp;<span class="op" id="6628189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628193"><a href="/text/template/multi_test.go.html#6628087">t</a></span><span class="op" id="6628194">.</span><span class="ident" id="6628195">Fatal</span><span class="op" id="6628200">(</span><span class="ident" id="6628201"><a href="/text/template/multi_test.go.html#6628137">err</a></span><span class="op" id="6628204">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6628207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628210">_</span><span class="op" id="6628211">,</span>&nbsp;<span class="ident" id="6628213"><a href="/text/template/multi_test.go.html#6628137">err</a></span>&nbsp;<span class="op" id="6628217">=</span>&nbsp;<span class="ident" id="6628219"><a href="/text/template/multi_test.go.html#6628131">root</a></span><span class="op" id="6628223">.</span><span class="ident" id="6628224">Parse</span><span class="op" id="6628229">(</span><span class="ident" id="6628230"><a href="/text/template/multi_test.go.html#6626874">cloneText2</a></span><span class="op" id="6628240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6628243">if</span>&nbsp;<span class="ident" id="6628246"><a href="/text/template/multi_test.go.html#6628137">err</a></span>&nbsp;<span class="op" id="6628250">!=</span>&nbsp;<span class="ident" id="6628253">nil</span>&nbsp;<span class="op" id="6628257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628261"><a href="/text/template/multi_test.go.html#6628087">t</a></span><span class="op" id="6628262">.</span><span class="ident" id="6628263">Fatal</span><span class="op" id="6628268">(</span><span class="ident" id="6628269"><a href="/text/template/multi_test.go.html#6628137">err</a></span><span class="op" id="6628272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6628275">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6628278">//&nbsp;Add&nbsp;a&nbsp;new&nbsp;parse&nbsp;tree.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628304">tree</span><span class="op" id="6628308">,</span>&nbsp;<span class="ident" id="6628310"><a href="/text/template/multi_test.go.html#6628137">err</a></span>&nbsp;<span class="op" id="6628314">:=</span>&nbsp;<span class="ident" id="6628317"><a href="/text/template/multi_test.go.html#6622211">parse</a></span><span class="op" id="6628322">.</span><span class="ident" id="6628323">Parse</span><span class="op" id="6628328">(</span><span class="string" id="6628329">&#34;cloneText3&#34;</span><span class="op" id="6628341">,</span>&nbsp;<span class="ident" id="6628343"><a href="/text/template/multi_test.go.html#6626913">cloneText3</a></span><span class="op" id="6628353">,</span>&nbsp;<span class="string" id="6628355">&#34;&#34;</span><span class="op" id="6628357">,</span>&nbsp;<span class="string" id="6628359">&#34;&#34;</span><span class="op" id="6628361">,</span>&nbsp;<span class="ident" id="6628363">nil</span><span class="op" id="6628366">,</span>&nbsp;<span class="ident" id="6628368"><a href="/text/template/funcs.go.html#4696910">builtins</a></span><span class="op" id="6628376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6628379">if</span>&nbsp;<span class="ident" id="6628382"><a href="/text/template/multi_test.go.html#6628137">err</a></span>&nbsp;<span class="op" id="6628386">!=</span>&nbsp;<span class="ident" id="6628389">nil</span>&nbsp;<span class="op" id="6628393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628397"><a href="/text/template/multi_test.go.html#6628087">t</a></span><span class="op" id="6628398">.</span><span class="ident" id="6628399">Fatal</span><span class="op" id="6628404">(</span><span class="ident" id="6628405"><a href="/text/template/multi_test.go.html#6628137">err</a></span><span class="op" id="6628408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6628411">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628414">added</span><span class="op" id="6628419">,</span>&nbsp;<span class="ident" id="6628421"><a href="/text/template/multi_test.go.html#6628137">err</a></span>&nbsp;<span class="op" id="6628425">:=</span>&nbsp;<span class="ident" id="6628428"><a href="/text/template/multi_test.go.html#6628131">root</a></span><span class="op" id="6628432">.</span><span class="ident" id="6628433">AddParseTree</span><span class="op" id="6628445">(</span><span class="string" id="6628446">&#34;c&#34;</span><span class="op" id="6628449">,</span>&nbsp;<span class="ident" id="6628451"><a href="/text/template/multi_test.go.html#6628304">tree</a></span><span class="op" id="6628455">[</span><span class="string" id="6628456">&#34;c&#34;</span><span class="op" id="6628459">]</span><span class="op" id="6628460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6628463">//&nbsp;Execute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6628476">var</span>&nbsp;<span class="ident" id="6628480">b</span>&nbsp;<span class="ident" id="6628482"><a href="/text/template/multi_test.go.html#6622173">bytes</a></span><span class="op" id="6628487">.</span><span class="ident" id="6628488">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628496"><a href="/text/template/multi_test.go.html#6628137">err</a></span>&nbsp;<span class="op" id="6628500">=</span>&nbsp;<span class="ident" id="6628502"><a href="/text/template/multi_test.go.html#6628414">added</a></span><span class="op" id="6628507">.</span><span class="ident" id="6628508">ExecuteTemplate</span><span class="op" id="6628523">(</span><span class="op" id="6628524">&amp;</span><span class="ident" id="6628525"><a href="/text/template/multi_test.go.html#6628480">b</a></span><span class="op" id="6628526">,</span>&nbsp;<span class="string" id="6628528">&#34;a&#34;</span><span class="op" id="6628531">,</span>&nbsp;<span class="num" id="6628533">0</span><span class="op" id="6628534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6628537">if</span>&nbsp;<span class="ident" id="6628540"><a href="/text/template/multi_test.go.html#6628137">err</a></span>&nbsp;<span class="op" id="6628544">!=</span>&nbsp;<span class="ident" id="6628547">nil</span>&nbsp;<span class="op" id="6628551">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628555"><a href="/text/template/multi_test.go.html#6628087">t</a></span><span class="op" id="6628556">.</span><span class="ident" id="6628557">Fatal</span><span class="op" id="6628562">(</span><span class="ident" id="6628563"><a href="/text/template/multi_test.go.html#6628137">err</a></span><span class="op" id="6628566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6628569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6628572">if</span>&nbsp;<span class="ident" id="6628575"><a href="/text/template/multi_test.go.html#6628480">b</a></span><span class="op" id="6628576">.</span><span class="ident" id="6628577">String</span><span class="op" id="6628583">(</span><span class="op" id="6628584">)</span>&nbsp;<span class="op" id="6628586">!=</span>&nbsp;<span class="string" id="6628589">&#34;broot&#34;</span>&nbsp;<span class="op" id="6628597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628601"><a href="/text/template/multi_test.go.html#6628087">t</a></span><span class="op" id="6628602">.</span><span class="ident" id="6628603">Errorf</span><span class="op" id="6628609">(</span><span class="string" id="6628610">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6628630">,</span>&nbsp;<span class="string" id="6628632">&#34;broot&#34;</span><span class="op" id="6628639">,</span>&nbsp;<span class="ident" id="6628641"><a href="/text/template/multi_test.go.html#6628480">b</a></span><span class="op" id="6628642">.</span><span class="ident" id="6628643">String</span><span class="op" id="6628649">(</span><span class="op" id="6628650">)</span><span class="op" id="6628651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6628654">}</span><br>
<span class="lineno">260</span><span class="op" id="6628656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6628659">//&nbsp;Issue&nbsp;7032</span><br>
<span class="lineno"></span><span class="keyword" id="6628673">func</span>&nbsp;<span class="ident" id="6628678">TestAddParseTreeToUnparsedTemplate</span><span class="op" id="6628712">(</span><span class="ident" id="6628713">t</span>&nbsp;<span class="op" id="6628715">*</span><span class="ident" id="6628716"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6628723">.</span><span class="ident" id="6628724">T</span><span class="op" id="6628725">)</span>&nbsp;<span class="op" id="6628727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628730">master</span>&nbsp;<span class="op" id="6628737">:=</span>&nbsp;<span class="string" id="6628740">&#34;{{define&nbsp;\&#34;master\&#34;}}{{end}}&#34;</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628772">tmpl</span>&nbsp;<span class="op" id="6628777">:=</span>&nbsp;<span class="ident" id="6628780"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6628783">(</span><span class="string" id="6628784">&#34;master&#34;</span><span class="op" id="6628792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628795">tree</span><span class="op" id="6628799">,</span>&nbsp;<span class="ident" id="6628801">err</span>&nbsp;<span class="op" id="6628805">:=</span>&nbsp;<span class="ident" id="6628808"><a href="/text/template/multi_test.go.html#6622211">parse</a></span><span class="op" id="6628813">.</span><span class="ident" id="6628814">Parse</span><span class="op" id="6628819">(</span><span class="string" id="6628820">&#34;master&#34;</span><span class="op" id="6628828">,</span>&nbsp;<span class="ident" id="6628830"><a href="/text/template/multi_test.go.html#6628730">master</a></span><span class="op" id="6628836">,</span>&nbsp;<span class="string" id="6628838">&#34;&#34;</span><span class="op" id="6628840">,</span>&nbsp;<span class="string" id="6628842">&#34;&#34;</span><span class="op" id="6628844">,</span>&nbsp;<span class="ident" id="6628846">nil</span><span class="op" id="6628849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6628852">if</span>&nbsp;<span class="ident" id="6628855"><a href="/text/template/multi_test.go.html#6628801">err</a></span>&nbsp;<span class="op" id="6628859">!=</span>&nbsp;<span class="ident" id="6628862">nil</span>&nbsp;<span class="op" id="6628866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628870"><a href="/text/template/multi_test.go.html#6628713">t</a></span><span class="op" id="6628871">.</span><span class="ident" id="6628872">Fatalf</span><span class="op" id="6628878">(</span><span class="string" id="6628879">&#34;unexpected&nbsp;parse&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="6628905">,</span>&nbsp;<span class="ident" id="6628907"><a href="/text/template/multi_test.go.html#6628801">err</a></span><span class="op" id="6628910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6628913">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628916">masterTree</span>&nbsp;<span class="op" id="6628927">:=</span>&nbsp;<span class="ident" id="6628930"><a href="/text/template/multi_test.go.html#6628795">tree</a></span><span class="op" id="6628934">[</span><span class="string" id="6628935">&#34;master&#34;</span><span class="op" id="6628943">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6628946"><a href="/text/template/multi_test.go.html#6628772">tmpl</a></span><span class="op" id="6628950">.</span><span class="ident" id="6628951">AddParseTree</span><span class="op" id="6628963">(</span><span class="string" id="6628964">&#34;master&#34;</span><span class="op" id="6628972">,</span>&nbsp;<span class="ident" id="6628974"><a href="/text/template/multi_test.go.html#6628916">masterTree</a></span><span class="op" id="6628984">)</span>&nbsp;<span class="comment" id="6628986">//&nbsp;used&nbsp;to&nbsp;panic</span><br>
<span class="lineno"></span><span class="op" id="6629003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6629006">func</span>&nbsp;<span class="ident" id="6629011">TestRedefinition</span><span class="op" id="6629027">(</span><span class="ident" id="6629028">t</span>&nbsp;<span class="op" id="6629030">*</span><span class="ident" id="6629031"><a href="/text/template/multi_test.go.html#6622200">testing</a></span><span class="op" id="6629038">.</span><span class="ident" id="6629039">T</span><span class="op" id="6629040">)</span>&nbsp;<span class="op" id="6629042">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6629045">var</span>&nbsp;<span class="ident" id="6629049">tmpl</span>&nbsp;<span class="op" id="6629054">*</span><span class="ident" id="6629055"><a href="/text/template/template.go.html#4715603">Template</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6629065">var</span>&nbsp;<span class="ident" id="6629069">err</span>&nbsp;<span class="builtintype" id="6629073">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6629080">if</span>&nbsp;<span class="ident" id="6629083"><a href="/text/template/multi_test.go.html#6629049">tmpl</a></span><span class="op" id="6629087">,</span>&nbsp;<span class="ident" id="6629089"><a href="/text/template/multi_test.go.html#6629069">err</a></span>&nbsp;<span class="op" id="6629093">=</span>&nbsp;<span class="ident" id="6629095"><a href="/text/template/template.go.html#4715755">New</a></span><span class="op" id="6629098">(</span><span class="string" id="6629099">&#34;tmpl1&#34;</span><span class="op" id="6629106">)</span><span class="op" id="6629107">.</span><span class="ident" id="6629108">Parse</span><span class="op" id="6629113">(</span><span class="string" id="6629114">`{{define&nbsp;&#34;test&#34;}}foo{{end}}`</span><span class="op" id="6629143">)</span><span class="op" id="6629144">;</span>&nbsp;<span class="ident" id="6629146"><a href="/text/template/multi_test.go.html#6629069">err</a></span>&nbsp;<span class="op" id="6629150">!=</span>&nbsp;<span class="ident" id="6629153">nil</span>&nbsp;<span class="op" id="6629157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629161"><a href="/text/template/multi_test.go.html#6629028">t</a></span><span class="op" id="6629162">.</span><span class="ident" id="6629163">Fatalf</span><span class="op" id="6629169">(</span><span class="string" id="6629170">&#34;parse&nbsp;1:&nbsp;%v&#34;</span><span class="op" id="6629183">,</span>&nbsp;<span class="ident" id="6629185"><a href="/text/template/multi_test.go.html#6629069">err</a></span><span class="op" id="6629188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6629191">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6629194">if</span>&nbsp;<span class="ident" id="6629197">_</span><span class="op" id="6629198">,</span>&nbsp;<span class="ident" id="6629200"><a href="/text/template/multi_test.go.html#6629069">err</a></span>&nbsp;<span class="op" id="6629204">=</span>&nbsp;<span class="ident" id="6629206"><a href="/text/template/multi_test.go.html#6629049">tmpl</a></span><span class="op" id="6629210">.</span><span class="ident" id="6629211">Parse</span><span class="op" id="6629216">(</span><span class="string" id="6629217">`{{define&nbsp;&#34;test&#34;}}bar{{end}}`</span><span class="op" id="6629246">)</span><span class="op" id="6629247">;</span>&nbsp;<span class="ident" id="6629249"><a href="/text/template/multi_test.go.html#6629069">err</a></span>&nbsp;<span class="op" id="6629253">==</span>&nbsp;<span class="ident" id="6629256">nil</span>&nbsp;<span class="op" id="6629260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629264"><a href="/text/template/multi_test.go.html#6629028">t</a></span><span class="op" id="6629265">.</span><span class="ident" id="6629266">Fatal</span><span class="op" id="6629271">(</span><span class="string" id="6629272">&#34;expected&nbsp;error&#34;</span><span class="op" id="6629288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6629291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6629294">if</span>&nbsp;<span class="op" id="6629297">!</span><span class="ident" id="6629298"><a href="/text/template/multi_test.go.html#6622189">strings</a></span><span class="op" id="6629305">.</span><span class="ident" id="6629306">Contains</span><span class="op" id="6629314">(</span><span class="ident" id="6629315"><a href="/text/template/multi_test.go.html#6629069">err</a></span><span class="op" id="6629318">.</span><span class="ident" id="6629319">Error</span><span class="op" id="6629324">(</span><span class="op" id="6629325">)</span><span class="op" id="6629326">,</span>&nbsp;<span class="string" id="6629328">&#34;redefinition&#34;</span><span class="op" id="6629342">)</span>&nbsp;<span class="op" id="6629344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629348"><a href="/text/template/multi_test.go.html#6629028">t</a></span><span class="op" id="6629349">.</span><span class="ident" id="6629350">Fatalf</span><span class="op" id="6629356">(</span><span class="string" id="6629357">&#34;expected&nbsp;redefinition&nbsp;error;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6629394">,</span>&nbsp;<span class="ident" id="6629396"><a href="/text/template/multi_test.go.html#6629069">err</a></span><span class="op" id="6629399">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6629402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6629405">if</span>&nbsp;<span class="ident" id="6629408">_</span><span class="op" id="6629409">,</span>&nbsp;<span class="ident" id="6629411"><a href="/text/template/multi_test.go.html#6629069">err</a></span>&nbsp;<span class="op" id="6629415">=</span>&nbsp;<span class="ident" id="6629417"><a href="/text/template/multi_test.go.html#6629049">tmpl</a></span><span class="op" id="6629421">.</span><span class="ident" id="6629422">New</span><span class="op" id="6629425">(</span><span class="string" id="6629426">&#34;tmpl2&#34;</span><span class="op" id="6629433">)</span><span class="op" id="6629434">.</span><span class="ident" id="6629435">Parse</span><span class="op" id="6629440">(</span><span class="string" id="6629441">`{{define&nbsp;&#34;test&#34;}}bar{{end}}`</span><span class="op" id="6629470">)</span><span class="op" id="6629471">;</span>&nbsp;<span class="ident" id="6629473"><a href="/text/template/multi_test.go.html#6629069">err</a></span>&nbsp;<span class="op" id="6629477">==</span>&nbsp;<span class="ident" id="6629480">nil</span>&nbsp;<span class="op" id="6629484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629488"><a href="/text/template/multi_test.go.html#6629028">t</a></span><span class="op" id="6629489">.</span><span class="ident" id="6629490">Fatal</span><span class="op" id="6629495">(</span><span class="string" id="6629496">&#34;expected&nbsp;error&#34;</span><span class="op" id="6629512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6629515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6629518">if</span>&nbsp;<span class="op" id="6629521">!</span><span class="ident" id="6629522"><a href="/text/template/multi_test.go.html#6622189">strings</a></span><span class="op" id="6629529">.</span><span class="ident" id="6629530">Contains</span><span class="op" id="6629538">(</span><span class="ident" id="6629539"><a href="/text/template/multi_test.go.html#6629069">err</a></span><span class="op" id="6629542">.</span><span class="ident" id="6629543">Error</span><span class="op" id="6629548">(</span><span class="op" id="6629549">)</span><span class="op" id="6629550">,</span>&nbsp;<span class="string" id="6629552">&#34;redefinition&#34;</span><span class="op" id="6629566">)</span>&nbsp;<span class="op" id="6629568">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629572"><a href="/text/template/multi_test.go.html#6629028">t</a></span><span class="op" id="6629573">.</span><span class="ident" id="6629574">Fatalf</span><span class="op" id="6629580">(</span><span class="string" id="6629581">&#34;expected&nbsp;redefinition&nbsp;error;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6629618">,</span>&nbsp;<span class="ident" id="6629620"><a href="/text/template/multi_test.go.html#6629069">err</a></span><span class="op" id="6629623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6629626">}</span><br>
<span class="lineno"></span><span class="op" id="6629628">}</span>
</div>
</body>
</html>
