<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5725737">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5725793">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5725847">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5725898">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5725921">package</span>&nbsp;<span class="ident" id="5725929">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5725936">import</span>&nbsp;<span class="op" id="5725943">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5725946">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5725965">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5725972">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5725975">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="5726052">//</span><br>
<span class="lineno"></span><span class="comment" id="5726055">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="5726142">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="5726220">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5726298">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5726370">//</span><br>
<span class="lineno"></span><span class="comment" id="5726373">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="5726454">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="5726533">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5726586">//</span><br>
<span class="lineno"></span><span class="comment" id="5726589">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="5726664">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5726739">type</span>&nbsp;<span class="ident" id="5726744">LineTable</span>&nbsp;<span class="keyword" id="5726754">struct</span>&nbsp;<span class="op" id="5726761">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726764">Data</span>&nbsp;<span class="op" id="5726769">[</span><span class="op" id="5726770">]</span><span class="builtintype" id="5726771">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726777">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5726782">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726790">Line</span>&nbsp;<span class="builtintype" id="5726795">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5726801">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726818">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5726827">sync</span><span class="op" id="5726831">.</span><span class="ident" id="5726832">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726839">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5726848">int</span>&nbsp;<span class="comment" id="5726852">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726906">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5726915">binary</span><span class="op" id="5726921">.</span><span class="ident" id="5726922">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726933">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="5726942">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726950">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="5726959">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726967">functab</span>&nbsp;&nbsp;<span class="op" id="5726976">[</span><span class="op" id="5726977">]</span><span class="builtintype" id="5726978">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5726984">nfunctab</span>&nbsp;<span class="builtintype" id="5726993">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5727001">filetab</span>&nbsp;&nbsp;<span class="op" id="5727010">[</span><span class="op" id="5727011">]</span><span class="builtintype" id="5727012">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5727018">nfiletab</span>&nbsp;<span class="builtintype" id="5727027">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5727035">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="5727044">map</span><span class="op" id="5727047">[</span><span class="builtintype" id="5727048">string</span><span class="op" id="5727054">]</span><span class="builtintype" id="5727055">uint32</span><br>
<span class="lineno">45</span><span class="op" id="5727062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5727065">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="5727136">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="5727201">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="5727275">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="5727286">const</span>&nbsp;<span class="ident" id="5727292">oldQuantum</span>&nbsp;<span class="op" id="5727303">=</span>&nbsp;<span class="num" id="5727305">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5727308">func</span>&nbsp;<span class="op" id="5727313">(</span><span class="ident" id="5727314">t</span>&nbsp;<span class="op" id="5727316">*</span><span class="ident" id="5727317">LineTable</span><span class="op" id="5727326">)</span>&nbsp;<span class="ident" id="5727328">parse</span><span class="op" id="5727333">(</span><span class="ident" id="5727334">targetPC</span>&nbsp;<span class="ident" id="5727343">uint64</span><span class="op" id="5727349">,</span>&nbsp;<span class="ident" id="5727351">targetLine</span>&nbsp;<span class="builtintype" id="5727362">int</span><span class="op" id="5727365">)</span>&nbsp;<span class="op" id="5727367">(</span><span class="ident" id="5727368">b</span>&nbsp;<span class="op" id="5727370">[</span><span class="op" id="5727371">]</span><span class="builtintype" id="5727372">byte</span><span class="op" id="5727376">,</span>&nbsp;<span class="ident" id="5727378">pc</span>&nbsp;<span class="ident" id="5727381">uint64</span><span class="op" id="5727387">,</span>&nbsp;<span class="ident" id="5727389">line</span>&nbsp;<span class="builtintype" id="5727394">int</span><span class="op" id="5727397">)</span>&nbsp;<span class="op" id="5727399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5727402">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5727459">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5727491">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5727553">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5727610">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5727649">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5727653">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5727716">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5727773">b</span><span class="op" id="5727774">,</span>&nbsp;<span class="ident" id="5727776">pc</span><span class="op" id="5727778">,</span>&nbsp;<span class="ident" id="5727780">line</span>&nbsp;<span class="op" id="5727785">=</span>&nbsp;<span class="ident" id="5727787">t</span><span class="op" id="5727788">.</span><span class="ident" id="5727789">Data</span><span class="op" id="5727793">,</span>&nbsp;<span class="ident" id="5727795">t</span><span class="op" id="5727796">.</span><span class="ident" id="5727797">PC</span><span class="op" id="5727799">,</span>&nbsp;<span class="ident" id="5727801">t</span><span class="op" id="5727802">.</span><span class="ident" id="5727803">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5727809">for</span>&nbsp;<span class="ident" id="5727813">pc</span>&nbsp;<span class="op" id="5727816">&lt;=</span>&nbsp;<span class="ident" id="5727819">targetPC</span>&nbsp;<span class="op" id="5727828">&amp;&amp;</span>&nbsp;<span class="ident" id="5727831">line</span>&nbsp;<span class="op" id="5727836">!=</span>&nbsp;<span class="ident" id="5727839">targetLine</span>&nbsp;<span class="op" id="5727850">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5727853">len</span><span class="op" id="5727856">(</span><span class="ident" id="5727857">b</span><span class="op" id="5727858">)</span>&nbsp;<span class="op" id="5727860">&gt;</span>&nbsp;<span class="num" id="5727862">0</span>&nbsp;<span class="op" id="5727864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5727868">code</span>&nbsp;<span class="op" id="5727873">:=</span>&nbsp;<span class="ident" id="5727876">b</span><span class="op" id="5727877">[</span><span class="num" id="5727878">0</span><span class="op" id="5727879">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5727883">b</span>&nbsp;<span class="op" id="5727885">=</span>&nbsp;<span class="ident" id="5727887">b</span><span class="op" id="5727888">[</span><span class="num" id="5727889">1</span><span class="op" id="5727890">:</span><span class="op" id="5727891">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5727895">switch</span>&nbsp;<span class="op" id="5727902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5727906">case</span>&nbsp;<span class="ident" id="5727911">code</span>&nbsp;<span class="op" id="5727916">==</span>&nbsp;<span class="num" id="5727919">0</span><span class="op" id="5727920">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5727925">if</span>&nbsp;<span class="builtinfunc" id="5727928">len</span><span class="op" id="5727931">(</span><span class="ident" id="5727932">b</span><span class="op" id="5727933">)</span>&nbsp;<span class="op" id="5727935">&lt;</span>&nbsp;<span class="num" id="5727937">4</span>&nbsp;<span class="op" id="5727939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5727945">b</span>&nbsp;<span class="op" id="5727947">=</span>&nbsp;<span class="ident" id="5727949">b</span><span class="op" id="5727950">[</span><span class="num" id="5727951">0</span><span class="op" id="5727952">:</span><span class="num" id="5727953">0</span><span class="op" id="5727954">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5727960">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5727969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5727974">val</span>&nbsp;<span class="op" id="5727978">:=</span>&nbsp;<span class="ident" id="5727981">binary</span><span class="op" id="5727987">.</span><span class="ident" id="5727988">BigEndian</span><span class="op" id="5727997">.</span><span class="ident" id="5727998">Uint32</span><span class="op" id="5728004">(</span><span class="ident" id="5728005">b</span><span class="op" id="5728006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728011">b</span>&nbsp;<span class="op" id="5728013">=</span>&nbsp;<span class="ident" id="5728015">b</span><span class="op" id="5728016">[</span><span class="num" id="5728017">4</span><span class="op" id="5728018">:</span><span class="op" id="5728019">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728024">line</span>&nbsp;<span class="op" id="5728029">+=</span>&nbsp;<span class="builtintype" id="5728032">int</span><span class="op" id="5728035">(</span><span class="ident" id="5728036">val</span><span class="op" id="5728039">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728043">case</span>&nbsp;<span class="ident" id="5728048">code</span>&nbsp;<span class="op" id="5728053">&lt;=</span>&nbsp;<span class="num" id="5728056">64</span><span class="op" id="5728058">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728063">line</span>&nbsp;<span class="op" id="5728068">+=</span>&nbsp;<span class="builtintype" id="5728071">int</span><span class="op" id="5728074">(</span><span class="ident" id="5728075">code</span><span class="op" id="5728079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728083">case</span>&nbsp;<span class="ident" id="5728088">code</span>&nbsp;<span class="op" id="5728093">&lt;=</span>&nbsp;<span class="num" id="5728096">128</span><span class="op" id="5728099">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728104">line</span>&nbsp;<span class="op" id="5728109">-=</span>&nbsp;<span class="builtintype" id="5728112">int</span><span class="op" id="5728115">(</span><span class="ident" id="5728116">code</span>&nbsp;<span class="op" id="5728121">-</span>&nbsp;<span class="num" id="5728123">64</span><span class="op" id="5728125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728129">default</span><span class="op" id="5728136">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728141">pc</span>&nbsp;<span class="op" id="5728144">+=</span>&nbsp;<span class="ident" id="5728147">oldQuantum</span>&nbsp;<span class="op" id="5728158">*</span>&nbsp;<span class="ident" id="5728160">uint64</span><span class="op" id="5728166">(</span><span class="ident" id="5728167">code</span><span class="op" id="5728171">-</span><span class="num" id="5728172">128</span><span class="op" id="5728175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728180">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5728191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728195">pc</span>&nbsp;<span class="op" id="5728198">+=</span>&nbsp;<span class="ident" id="5728201">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5728213">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728216">return</span>&nbsp;<span class="ident" id="5728223">b</span><span class="op" id="5728224">,</span>&nbsp;<span class="ident" id="5728226">pc</span><span class="op" id="5728228">,</span>&nbsp;<span class="ident" id="5728230">line</span><br>
<span class="lineno"></span><span class="op" id="5728235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5728238">func</span>&nbsp;<span class="op" id="5728243">(</span><span class="ident" id="5728244">t</span>&nbsp;<span class="op" id="5728246">*</span><span class="ident" id="5728247">LineTable</span><span class="op" id="5728256">)</span>&nbsp;<span class="ident" id="5728258">slice</span><span class="op" id="5728263">(</span><span class="ident" id="5728264">pc</span>&nbsp;<span class="ident" id="5728267">uint64</span><span class="op" id="5728273">)</span>&nbsp;<span class="op" id="5728275">*</span><span class="ident" id="5728276">LineTable</span>&nbsp;<span class="op" id="5728286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728289">data</span><span class="op" id="5728293">,</span>&nbsp;<span class="ident" id="5728295">pc</span><span class="op" id="5728297">,</span>&nbsp;<span class="ident" id="5728299">line</span>&nbsp;<span class="op" id="5728304">:=</span>&nbsp;<span class="ident" id="5728307">t</span><span class="op" id="5728308">.</span><span class="ident" id="5728309">parse</span><span class="op" id="5728314">(</span><span class="ident" id="5728315">pc</span><span class="op" id="5728317">,</span>&nbsp;<span class="op" id="5728319">-</span><span class="num" id="5728320">1</span><span class="op" id="5728321">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728324">return</span>&nbsp;<span class="op" id="5728331">&amp;</span><span class="ident" id="5728332">LineTable</span><span class="op" id="5728341">{</span><span class="ident" id="5728342">Data</span><span class="op" id="5728346">:</span>&nbsp;<span class="ident" id="5728348">data</span><span class="op" id="5728352">,</span>&nbsp;<span class="ident" id="5728354">PC</span><span class="op" id="5728356">:</span>&nbsp;<span class="ident" id="5728358">pc</span><span class="op" id="5728360">,</span>&nbsp;<span class="ident" id="5728362">Line</span><span class="op" id="5728366">:</span>&nbsp;<span class="ident" id="5728368">line</span><span class="op" id="5728372">}</span><br>
<span class="lineno"></span><span class="op" id="5728374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5728377">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="5728444">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="5728499">func</span>&nbsp;<span class="op" id="5728504">(</span><span class="ident" id="5728505">t</span>&nbsp;<span class="op" id="5728507">*</span><span class="ident" id="5728508">LineTable</span><span class="op" id="5728517">)</span>&nbsp;<span class="ident" id="5728519">PCToLine</span><span class="op" id="5728527">(</span><span class="ident" id="5728528">pc</span>&nbsp;<span class="ident" id="5728531">uint64</span><span class="op" id="5728537">)</span>&nbsp;<span class="builtintype" id="5728539">int</span>&nbsp;<span class="op" id="5728543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728546">if</span>&nbsp;<span class="ident" id="5728549">t</span><span class="op" id="5728550">.</span><span class="ident" id="5728551">isGo12</span><span class="op" id="5728557">(</span><span class="op" id="5728558">)</span>&nbsp;<span class="op" id="5728560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728564">return</span>&nbsp;<span class="ident" id="5728571">t</span><span class="op" id="5728572">.</span><span class="ident" id="5728573">go12PCToLine</span><span class="op" id="5728585">(</span><span class="ident" id="5728586">pc</span><span class="op" id="5728588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5728591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728594">_</span><span class="op" id="5728595">,</span>&nbsp;<span class="ident" id="5728597">_</span><span class="op" id="5728598">,</span>&nbsp;<span class="ident" id="5728600">line</span>&nbsp;<span class="op" id="5728605">:=</span>&nbsp;<span class="ident" id="5728608">t</span><span class="op" id="5728609">.</span><span class="ident" id="5728610">parse</span><span class="op" id="5728615">(</span><span class="ident" id="5728616">pc</span><span class="op" id="5728618">,</span>&nbsp;<span class="op" id="5728620">-</span><span class="num" id="5728621">1</span><span class="op" id="5728622">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728625">return</span>&nbsp;<span class="ident" id="5728632">line</span><br>
<span class="lineno"></span><span class="op" id="5728637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5728640">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="5728707">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="5728758">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5728813">func</span>&nbsp;<span class="op" id="5728818">(</span><span class="ident" id="5728819">t</span>&nbsp;<span class="op" id="5728821">*</span><span class="ident" id="5728822">LineTable</span><span class="op" id="5728831">)</span>&nbsp;<span class="ident" id="5728833">LineToPC</span><span class="op" id="5728841">(</span><span class="ident" id="5728842">line</span>&nbsp;<span class="builtintype" id="5728847">int</span><span class="op" id="5728850">,</span>&nbsp;<span class="ident" id="5728852">maxpc</span>&nbsp;<span class="ident" id="5728858">uint64</span><span class="op" id="5728864">)</span>&nbsp;<span class="ident" id="5728866">uint64</span>&nbsp;<span class="op" id="5728873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728876">if</span>&nbsp;<span class="ident" id="5728879">t</span><span class="op" id="5728880">.</span><span class="ident" id="5728881">isGo12</span><span class="op" id="5728887">(</span><span class="op" id="5728888">)</span>&nbsp;<span class="op" id="5728890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728894">return</span>&nbsp;<span class="num" id="5728901">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5728904">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728907">_</span><span class="op" id="5728908">,</span>&nbsp;<span class="ident" id="5728910">pc</span><span class="op" id="5728912">,</span>&nbsp;<span class="ident" id="5728914">line1</span>&nbsp;<span class="op" id="5728920">:=</span>&nbsp;<span class="ident" id="5728923">t</span><span class="op" id="5728924">.</span><span class="ident" id="5728925">parse</span><span class="op" id="5728930">(</span><span class="ident" id="5728931">maxpc</span><span class="op" id="5728936">,</span>&nbsp;<span class="ident" id="5728938">line</span><span class="op" id="5728942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728945">if</span>&nbsp;<span class="ident" id="5728948">line1</span>&nbsp;<span class="op" id="5728954">!=</span>&nbsp;<span class="ident" id="5728957">line</span>&nbsp;<span class="op" id="5728962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5728966">return</span>&nbsp;<span class="num" id="5728973">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5728976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5728979">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5729043">return</span>&nbsp;<span class="ident" id="5729050">pc</span>&nbsp;<span class="op" id="5729053">-</span>&nbsp;<span class="ident" id="5729055">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="5729066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5729069">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="5729113">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="5729151">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5729192">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5729223">func</span>&nbsp;<span class="ident" id="5729228">NewLineTable</span><span class="op" id="5729240">(</span><span class="ident" id="5729241">data</span>&nbsp;<span class="op" id="5729246">[</span><span class="op" id="5729247">]</span><span class="builtintype" id="5729248">byte</span><span class="op" id="5729252">,</span>&nbsp;<span class="ident" id="5729254">text</span>&nbsp;<span class="ident" id="5729259">uint64</span><span class="op" id="5729265">)</span>&nbsp;<span class="op" id="5729267">*</span><span class="ident" id="5729268">LineTable</span>&nbsp;<span class="op" id="5729278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5729281">return</span>&nbsp;<span class="op" id="5729288">&amp;</span><span class="ident" id="5729289">LineTable</span><span class="op" id="5729298">{</span><span class="ident" id="5729299">Data</span><span class="op" id="5729303">:</span>&nbsp;<span class="ident" id="5729305">data</span><span class="op" id="5729309">,</span>&nbsp;<span class="ident" id="5729311">PC</span><span class="op" id="5729313">:</span>&nbsp;<span class="ident" id="5729315">text</span><span class="op" id="5729319">,</span>&nbsp;<span class="ident" id="5729321">Line</span><span class="op" id="5729325">:</span>&nbsp;<span class="num" id="5729327">0</span><span class="op" id="5729328">}</span><br>
<span class="lineno"></span><span class="op" id="5729330">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5729333">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="5729364">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="5729396">//</span><br>
<span class="lineno"></span><span class="comment" id="5729399">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="5729466">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5729534">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="5729608">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="5729632">//</span><br>
<span class="lineno"></span><span class="comment" id="5729635">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="5729705">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5729751">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5729819">func</span>&nbsp;<span class="op" id="5729824">(</span><span class="ident" id="5729825">t</span>&nbsp;<span class="op" id="5729827">*</span><span class="ident" id="5729828">LineTable</span><span class="op" id="5729837">)</span>&nbsp;<span class="ident" id="5729839">isGo12</span><span class="op" id="5729845">(</span><span class="op" id="5729846">)</span>&nbsp;<span class="builtintype" id="5729848">bool</span>&nbsp;<span class="op" id="5729853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5729856">t</span><span class="op" id="5729857">.</span><span class="ident" id="5729858">go12Init</span><span class="op" id="5729866">(</span><span class="op" id="5729867">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5729870">return</span>&nbsp;<span class="ident" id="5729877">t</span><span class="op" id="5729878">.</span><span class="ident" id="5729879">go12</span>&nbsp;<span class="op" id="5729884">==</span>&nbsp;<span class="num" id="5729887">1</span><br>
<span class="lineno"></span><span class="op" id="5729889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5729892">const</span>&nbsp;<span class="ident" id="5729898">go12magic</span>&nbsp;<span class="op" id="5729908">=</span>&nbsp;<span class="num" id="5729910">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="5729922">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="5729979">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="5730036">func</span>&nbsp;<span class="op" id="5730041">(</span><span class="ident" id="5730042">t</span>&nbsp;<span class="op" id="5730044">*</span><span class="ident" id="5730045">LineTable</span><span class="op" id="5730054">)</span>&nbsp;<span class="builtintype" id="5730056">uintptr</span><span class="op" id="5730063">(</span><span class="ident" id="5730064">b</span>&nbsp;<span class="op" id="5730066">[</span><span class="op" id="5730067">]</span><span class="builtintype" id="5730068">byte</span><span class="op" id="5730072">)</span>&nbsp;<span class="ident" id="5730074">uint64</span>&nbsp;<span class="op" id="5730081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730084">if</span>&nbsp;<span class="ident" id="5730087">t</span><span class="op" id="5730088">.</span><span class="ident" id="5730089">ptrsize</span>&nbsp;<span class="op" id="5730097">==</span>&nbsp;<span class="num" id="5730100">4</span>&nbsp;<span class="op" id="5730102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730106">return</span>&nbsp;<span class="ident" id="5730113">uint64</span><span class="op" id="5730119">(</span><span class="ident" id="5730120">t</span><span class="op" id="5730121">.</span><span class="ident" id="5730122">binary</span><span class="op" id="5730128">.</span><span class="ident" id="5730129">Uint32</span><span class="op" id="5730135">(</span><span class="ident" id="5730136">b</span><span class="op" id="5730137">)</span><span class="op" id="5730138">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730144">return</span>&nbsp;<span class="ident" id="5730151">t</span><span class="op" id="5730152">.</span><span class="ident" id="5730153">binary</span><span class="op" id="5730159">.</span><span class="ident" id="5730160">Uint64</span><span class="op" id="5730166">(</span><span class="ident" id="5730167">b</span><span class="op" id="5730168">)</span><br>
<span class="lineno"></span><span class="op" id="5730170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5730173">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="5730248">func</span>&nbsp;<span class="op" id="5730253">(</span><span class="ident" id="5730254">t</span>&nbsp;<span class="op" id="5730256">*</span><span class="ident" id="5730257">LineTable</span><span class="op" id="5730266">)</span>&nbsp;<span class="ident" id="5730268">go12Init</span><span class="op" id="5730276">(</span><span class="op" id="5730277">)</span>&nbsp;<span class="op" id="5730279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730282">t</span><span class="op" id="5730283">.</span><span class="ident" id="5730284">mu</span><span class="op" id="5730286">.</span><span class="ident" id="5730287">Lock</span><span class="op" id="5730291">(</span><span class="op" id="5730292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730295">defer</span>&nbsp;<span class="ident" id="5730301">t</span><span class="op" id="5730302">.</span><span class="ident" id="5730303">mu</span><span class="op" id="5730305">.</span><span class="ident" id="5730306">Unlock</span><span class="op" id="5730312">(</span><span class="op" id="5730313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730316">if</span>&nbsp;<span class="ident" id="5730319">t</span><span class="op" id="5730320">.</span><span class="ident" id="5730321">go12</span>&nbsp;<span class="op" id="5730326">!=</span>&nbsp;<span class="num" id="5730329">0</span>&nbsp;<span class="op" id="5730331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730335">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730347">defer</span>&nbsp;<span class="keyword" id="5730353">func</span><span class="op" id="5730357">(</span><span class="op" id="5730358">)</span>&nbsp;<span class="op" id="5730360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5730364">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5730429">recover</span><span class="op" id="5730436">(</span><span class="op" id="5730437">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730440">}</span><span class="op" id="5730441">(</span><span class="op" id="5730442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5730446">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730515">t</span><span class="op" id="5730516">.</span><span class="ident" id="5730517">go12</span>&nbsp;<span class="op" id="5730522">=</span>&nbsp;<span class="op" id="5730524">-</span><span class="num" id="5730525">1</span>&nbsp;<span class="comment" id="5730527">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730565">if</span>&nbsp;<span class="builtinfunc" id="5730568">len</span><span class="op" id="5730571">(</span><span class="ident" id="5730572">t</span><span class="op" id="5730573">.</span><span class="ident" id="5730574">Data</span><span class="op" id="5730578">)</span>&nbsp;<span class="op" id="5730580">&lt;</span>&nbsp;<span class="num" id="5730582">16</span>&nbsp;<span class="op" id="5730585">||</span>&nbsp;<span class="ident" id="5730588">t</span><span class="op" id="5730589">.</span><span class="ident" id="5730590">Data</span><span class="op" id="5730594">[</span><span class="num" id="5730595">4</span><span class="op" id="5730596">]</span>&nbsp;<span class="op" id="5730598">!=</span>&nbsp;<span class="num" id="5730601">0</span>&nbsp;<span class="op" id="5730603">||</span>&nbsp;<span class="ident" id="5730606">t</span><span class="op" id="5730607">.</span><span class="ident" id="5730608">Data</span><span class="op" id="5730612">[</span><span class="num" id="5730613">5</span><span class="op" id="5730614">]</span>&nbsp;<span class="op" id="5730616">!=</span>&nbsp;<span class="num" id="5730619">0</span>&nbsp;<span class="op" id="5730621">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730626">(</span><span class="ident" id="5730627">t</span><span class="op" id="5730628">.</span><span class="ident" id="5730629">Data</span><span class="op" id="5730633">[</span><span class="num" id="5730634">6</span><span class="op" id="5730635">]</span>&nbsp;<span class="op" id="5730637">!=</span>&nbsp;<span class="num" id="5730640">1</span>&nbsp;<span class="op" id="5730642">&amp;&amp;</span>&nbsp;<span class="ident" id="5730645">t</span><span class="op" id="5730646">.</span><span class="ident" id="5730647">Data</span><span class="op" id="5730651">[</span><span class="num" id="5730652">6</span><span class="op" id="5730653">]</span>&nbsp;<span class="op" id="5730655">!=</span>&nbsp;<span class="num" id="5730658">4</span><span class="op" id="5730659">)</span>&nbsp;<span class="op" id="5730661">||</span>&nbsp;<span class="comment" id="5730664">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730680">(</span><span class="ident" id="5730681">t</span><span class="op" id="5730682">.</span><span class="ident" id="5730683">Data</span><span class="op" id="5730687">[</span><span class="num" id="5730688">7</span><span class="op" id="5730689">]</span>&nbsp;<span class="op" id="5730691">!=</span>&nbsp;<span class="num" id="5730694">4</span>&nbsp;<span class="op" id="5730696">&amp;&amp;</span>&nbsp;<span class="ident" id="5730699">t</span><span class="op" id="5730700">.</span><span class="ident" id="5730701">Data</span><span class="op" id="5730705">[</span><span class="num" id="5730706">7</span><span class="op" id="5730707">]</span>&nbsp;<span class="op" id="5730709">!=</span>&nbsp;<span class="num" id="5730712">8</span><span class="op" id="5730713">)</span>&nbsp;<span class="op" id="5730715">{</span>&nbsp;<span class="comment" id="5730717">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730735">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730747">switch</span>&nbsp;<span class="builtintype" id="5730754">uint32</span><span class="op" id="5730760">(</span><span class="ident" id="5730761">go12magic</span><span class="op" id="5730770">)</span>&nbsp;<span class="op" id="5730772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730775">case</span>&nbsp;<span class="ident" id="5730780">binary</span><span class="op" id="5730786">.</span><span class="ident" id="5730787">LittleEndian</span><span class="op" id="5730799">.</span><span class="ident" id="5730800">Uint32</span><span class="op" id="5730806">(</span><span class="ident" id="5730807">t</span><span class="op" id="5730808">.</span><span class="ident" id="5730809">Data</span><span class="op" id="5730813">)</span><span class="op" id="5730814">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730818">t</span><span class="op" id="5730819">.</span><span class="ident" id="5730820">binary</span>&nbsp;<span class="op" id="5730827">=</span>&nbsp;<span class="ident" id="5730829">binary</span><span class="op" id="5730835">.</span><span class="ident" id="5730836">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730850">case</span>&nbsp;<span class="ident" id="5730855">binary</span><span class="op" id="5730861">.</span><span class="ident" id="5730862">BigEndian</span><span class="op" id="5730871">.</span><span class="ident" id="5730872">Uint32</span><span class="op" id="5730878">(</span><span class="ident" id="5730879">t</span><span class="op" id="5730880">.</span><span class="ident" id="5730881">Data</span><span class="op" id="5730885">)</span><span class="op" id="5730886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730890">t</span><span class="op" id="5730891">.</span><span class="ident" id="5730892">binary</span>&nbsp;<span class="op" id="5730899">=</span>&nbsp;<span class="ident" id="5730901">binary</span><span class="op" id="5730907">.</span><span class="ident" id="5730908">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730919">default</span><span class="op" id="5730926">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730930">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730942">t</span><span class="op" id="5730943">.</span><span class="ident" id="5730944">quantum</span>&nbsp;<span class="op" id="5730952">=</span>&nbsp;<span class="builtintype" id="5730954">uint32</span><span class="op" id="5730960">(</span><span class="ident" id="5730961">t</span><span class="op" id="5730962">.</span><span class="ident" id="5730963">Data</span><span class="op" id="5730967">[</span><span class="num" id="5730968">6</span><span class="op" id="5730969">]</span><span class="op" id="5730970">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730973">t</span><span class="op" id="5730974">.</span><span class="ident" id="5730975">ptrsize</span>&nbsp;<span class="op" id="5730983">=</span>&nbsp;<span class="builtintype" id="5730985">uint32</span><span class="op" id="5730991">(</span><span class="ident" id="5730992">t</span><span class="op" id="5730993">.</span><span class="ident" id="5730994">Data</span><span class="op" id="5730998">[</span><span class="num" id="5730999">7</span><span class="op" id="5731000">]</span><span class="op" id="5731001">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731005">t</span><span class="op" id="5731006">.</span><span class="ident" id="5731007">nfunctab</span>&nbsp;<span class="op" id="5731016">=</span>&nbsp;<span class="builtintype" id="5731018">uint32</span><span class="op" id="5731024">(</span><span class="ident" id="5731025">t</span><span class="op" id="5731026">.</span><span class="builtintype" id="5731027">uintptr</span><span class="op" id="5731034">(</span><span class="ident" id="5731035">t</span><span class="op" id="5731036">.</span><span class="ident" id="5731037">Data</span><span class="op" id="5731041">[</span><span class="num" id="5731042">8</span><span class="op" id="5731043">:</span><span class="op" id="5731044">]</span><span class="op" id="5731045">)</span><span class="op" id="5731046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731049">t</span><span class="op" id="5731050">.</span><span class="ident" id="5731051">functab</span>&nbsp;<span class="op" id="5731059">=</span>&nbsp;<span class="ident" id="5731061">t</span><span class="op" id="5731062">.</span><span class="ident" id="5731063">Data</span><span class="op" id="5731067">[</span><span class="num" id="5731068">8</span><span class="op" id="5731069">+</span><span class="ident" id="5731070">t</span><span class="op" id="5731071">.</span><span class="ident" id="5731072">ptrsize</span><span class="op" id="5731079">:</span><span class="op" id="5731080">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731083">functabsize</span>&nbsp;<span class="op" id="5731095">:=</span>&nbsp;<span class="ident" id="5731098">t</span><span class="op" id="5731099">.</span><span class="ident" id="5731100">nfunctab</span><span class="op" id="5731108">*</span><span class="num" id="5731109">2</span><span class="op" id="5731110">*</span><span class="ident" id="5731111">t</span><span class="op" id="5731112">.</span><span class="ident" id="5731113">ptrsize</span>&nbsp;<span class="op" id="5731121">+</span>&nbsp;<span class="ident" id="5731123">t</span><span class="op" id="5731124">.</span><span class="ident" id="5731125">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731134">fileoff</span>&nbsp;<span class="op" id="5731142">:=</span>&nbsp;<span class="ident" id="5731145">t</span><span class="op" id="5731146">.</span><span class="ident" id="5731147">binary</span><span class="op" id="5731153">.</span><span class="ident" id="5731154">Uint32</span><span class="op" id="5731160">(</span><span class="ident" id="5731161">t</span><span class="op" id="5731162">.</span><span class="ident" id="5731163">functab</span><span class="op" id="5731170">[</span><span class="ident" id="5731171">functabsize</span><span class="op" id="5731182">:</span><span class="op" id="5731183">]</span><span class="op" id="5731184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731187">t</span><span class="op" id="5731188">.</span><span class="ident" id="5731189">functab</span>&nbsp;<span class="op" id="5731197">=</span>&nbsp;<span class="ident" id="5731199">t</span><span class="op" id="5731200">.</span><span class="ident" id="5731201">functab</span><span class="op" id="5731208">[</span><span class="op" id="5731209">:</span><span class="ident" id="5731210">functabsize</span><span class="op" id="5731221">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731224">t</span><span class="op" id="5731225">.</span><span class="ident" id="5731226">filetab</span>&nbsp;<span class="op" id="5731234">=</span>&nbsp;<span class="ident" id="5731236">t</span><span class="op" id="5731237">.</span><span class="ident" id="5731238">Data</span><span class="op" id="5731242">[</span><span class="ident" id="5731243">fileoff</span><span class="op" id="5731250">:</span><span class="op" id="5731251">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731254">t</span><span class="op" id="5731255">.</span><span class="ident" id="5731256">nfiletab</span>&nbsp;<span class="op" id="5731265">=</span>&nbsp;<span class="ident" id="5731267">t</span><span class="op" id="5731268">.</span><span class="ident" id="5731269">binary</span><span class="op" id="5731275">.</span><span class="ident" id="5731276">Uint32</span><span class="op" id="5731282">(</span><span class="ident" id="5731283">t</span><span class="op" id="5731284">.</span><span class="ident" id="5731285">filetab</span><span class="op" id="5731292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731295">t</span><span class="op" id="5731296">.</span><span class="ident" id="5731297">filetab</span>&nbsp;<span class="op" id="5731305">=</span>&nbsp;<span class="ident" id="5731307">t</span><span class="op" id="5731308">.</span><span class="ident" id="5731309">filetab</span><span class="op" id="5731316">[</span><span class="op" id="5731317">:</span><span class="ident" id="5731318">t</span><span class="op" id="5731319">.</span><span class="ident" id="5731320">nfiletab</span><span class="op" id="5731328">*</span><span class="num" id="5731329">4</span><span class="op" id="5731330">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731334">t</span><span class="op" id="5731335">.</span><span class="ident" id="5731336">go12</span>&nbsp;<span class="op" id="5731341">=</span>&nbsp;<span class="num" id="5731343">1</span>&nbsp;<span class="comment" id="5731345">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="5731363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5731366">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="5731440">func</span>&nbsp;<span class="op" id="5731445">(</span><span class="ident" id="5731446">t</span>&nbsp;<span class="op" id="5731448">*</span><span class="ident" id="5731449">LineTable</span><span class="op" id="5731458">)</span>&nbsp;<span class="ident" id="5731460">go12Funcs</span><span class="op" id="5731469">(</span><span class="op" id="5731470">)</span>&nbsp;<span class="op" id="5731472">[</span><span class="op" id="5731473">]</span><span class="ident" id="5731474">Func</span>&nbsp;<span class="op" id="5731479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5731482">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5731534">defer</span>&nbsp;<span class="keyword" id="5731540">func</span><span class="op" id="5731544">(</span><span class="op" id="5731545">)</span>&nbsp;<span class="op" id="5731547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5731551">recover</span><span class="op" id="5731558">(</span><span class="op" id="5731559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5731562">}</span><span class="op" id="5731563">(</span><span class="op" id="5731564">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731568">n</span>&nbsp;<span class="op" id="5731570">:=</span>&nbsp;<span class="builtinfunc" id="5731573">len</span><span class="op" id="5731576">(</span><span class="ident" id="5731577">t</span><span class="op" id="5731578">.</span><span class="ident" id="5731579">functab</span><span class="op" id="5731586">)</span>&nbsp;<span class="op" id="5731588">/</span>&nbsp;<span class="builtintype" id="5731590">int</span><span class="op" id="5731593">(</span><span class="ident" id="5731594">t</span><span class="op" id="5731595">.</span><span class="ident" id="5731596">ptrsize</span><span class="op" id="5731603">)</span>&nbsp;<span class="op" id="5731605">/</span>&nbsp;<span class="num" id="5731607">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731610">funcs</span>&nbsp;<span class="op" id="5731616">:=</span>&nbsp;<span class="builtinfunc" id="5731619">make</span><span class="op" id="5731623">(</span><span class="op" id="5731624">[</span><span class="op" id="5731625">]</span><span class="ident" id="5731626">Func</span><span class="op" id="5731630">,</span>&nbsp;<span class="ident" id="5731632">n</span><span class="op" id="5731633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5731636">for</span>&nbsp;<span class="ident" id="5731640">i</span>&nbsp;<span class="op" id="5731642">:=</span>&nbsp;<span class="keyword" id="5731645">range</span>&nbsp;<span class="ident" id="5731651">funcs</span>&nbsp;<span class="op" id="5731657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731661">f</span>&nbsp;<span class="op" id="5731663">:=</span>&nbsp;<span class="op" id="5731666">&amp;</span><span class="ident" id="5731667">funcs</span><span class="op" id="5731672">[</span><span class="ident" id="5731673">i</span><span class="op" id="5731674">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731678">f</span><span class="op" id="5731679">.</span><span class="ident" id="5731680">Entry</span>&nbsp;<span class="op" id="5731686">=</span>&nbsp;<span class="ident" id="5731688">uint64</span><span class="op" id="5731694">(</span><span class="ident" id="5731695">t</span><span class="op" id="5731696">.</span><span class="builtintype" id="5731697">uintptr</span><span class="op" id="5731704">(</span><span class="ident" id="5731705">t</span><span class="op" id="5731706">.</span><span class="ident" id="5731707">functab</span><span class="op" id="5731714">[</span><span class="num" id="5731715">2</span><span class="op" id="5731716">*</span><span class="ident" id="5731717">i</span><span class="op" id="5731718">*</span><span class="builtintype" id="5731719">int</span><span class="op" id="5731722">(</span><span class="ident" id="5731723">t</span><span class="op" id="5731724">.</span><span class="ident" id="5731725">ptrsize</span><span class="op" id="5731732">)</span><span class="op" id="5731733">:</span><span class="op" id="5731734">]</span><span class="op" id="5731735">)</span><span class="op" id="5731736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731740">f</span><span class="op" id="5731741">.</span><span class="ident" id="5731742">End</span>&nbsp;<span class="op" id="5731746">=</span>&nbsp;<span class="ident" id="5731748">uint64</span><span class="op" id="5731754">(</span><span class="ident" id="5731755">t</span><span class="op" id="5731756">.</span><span class="builtintype" id="5731757">uintptr</span><span class="op" id="5731764">(</span><span class="ident" id="5731765">t</span><span class="op" id="5731766">.</span><span class="ident" id="5731767">functab</span><span class="op" id="5731774">[</span><span class="op" id="5731775">(</span><span class="num" id="5731776">2</span><span class="op" id="5731777">*</span><span class="ident" id="5731778">i</span><span class="op" id="5731779">+</span><span class="num" id="5731780">2</span><span class="op" id="5731781">)</span><span class="op" id="5731782">*</span><span class="builtintype" id="5731783">int</span><span class="op" id="5731786">(</span><span class="ident" id="5731787">t</span><span class="op" id="5731788">.</span><span class="ident" id="5731789">ptrsize</span><span class="op" id="5731796">)</span><span class="op" id="5731797">:</span><span class="op" id="5731798">]</span><span class="op" id="5731799">)</span><span class="op" id="5731800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731804">info</span>&nbsp;<span class="op" id="5731809">:=</span>&nbsp;<span class="ident" id="5731812">t</span><span class="op" id="5731813">.</span><span class="ident" id="5731814">Data</span><span class="op" id="5731818">[</span><span class="ident" id="5731819">t</span><span class="op" id="5731820">.</span><span class="builtintype" id="5731821">uintptr</span><span class="op" id="5731828">(</span><span class="ident" id="5731829">t</span><span class="op" id="5731830">.</span><span class="ident" id="5731831">functab</span><span class="op" id="5731838">[</span><span class="op" id="5731839">(</span><span class="num" id="5731840">2</span><span class="op" id="5731841">*</span><span class="ident" id="5731842">i</span><span class="op" id="5731843">+</span><span class="num" id="5731844">1</span><span class="op" id="5731845">)</span><span class="op" id="5731846">*</span><span class="builtintype" id="5731847">int</span><span class="op" id="5731850">(</span><span class="ident" id="5731851">t</span><span class="op" id="5731852">.</span><span class="ident" id="5731853">ptrsize</span><span class="op" id="5731860">)</span><span class="op" id="5731861">:</span><span class="op" id="5731862">]</span><span class="op" id="5731863">)</span><span class="op" id="5731864">:</span><span class="op" id="5731865">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731869">f</span><span class="op" id="5731870">.</span><span class="ident" id="5731871">LineTable</span>&nbsp;<span class="op" id="5731881">=</span>&nbsp;<span class="ident" id="5731883">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731887">f</span><span class="op" id="5731888">.</span><span class="ident" id="5731889">FrameSize</span>&nbsp;<span class="op" id="5731899">=</span>&nbsp;<span class="builtintype" id="5731901">int</span><span class="op" id="5731904">(</span><span class="ident" id="5731905">t</span><span class="op" id="5731906">.</span><span class="ident" id="5731907">binary</span><span class="op" id="5731913">.</span><span class="ident" id="5731914">Uint32</span><span class="op" id="5731920">(</span><span class="ident" id="5731921">info</span><span class="op" id="5731925">[</span><span class="ident" id="5731926">t</span><span class="op" id="5731927">.</span><span class="ident" id="5731928">ptrsize</span><span class="op" id="5731935">+</span><span class="num" id="5731936">2</span><span class="op" id="5731937">*</span><span class="num" id="5731938">4</span><span class="op" id="5731939">:</span><span class="op" id="5731940">]</span><span class="op" id="5731941">)</span><span class="op" id="5731942">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731946">f</span><span class="op" id="5731947">.</span><span class="ident" id="5731948">Sym</span>&nbsp;<span class="op" id="5731952">=</span>&nbsp;<span class="op" id="5731954">&amp;</span><span class="ident" id="5731955">Sym</span><span class="op" id="5731958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731963">Value</span><span class="op" id="5731968">:</span>&nbsp;&nbsp;<span class="ident" id="5731971">f</span><span class="op" id="5731972">.</span><span class="ident" id="5731973">Entry</span><span class="op" id="5731978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731983">Type</span><span class="op" id="5731987">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5731991">&#39;T&#39;</span><span class="op" id="5731994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731999">Name</span><span class="op" id="5732003">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5732007">t</span><span class="op" id="5732008">.</span><span class="builtintype" id="5732009">string</span><span class="op" id="5732015">(</span><span class="ident" id="5732016">t</span><span class="op" id="5732017">.</span><span class="ident" id="5732018">binary</span><span class="op" id="5732024">.</span><span class="ident" id="5732025">Uint32</span><span class="op" id="5732031">(</span><span class="ident" id="5732032">info</span><span class="op" id="5732036">[</span><span class="ident" id="5732037">t</span><span class="op" id="5732038">.</span><span class="ident" id="5732039">ptrsize</span><span class="op" id="5732046">:</span><span class="op" id="5732047">]</span><span class="op" id="5732048">)</span><span class="op" id="5732049">)</span><span class="op" id="5732050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732055">GoType</span><span class="op" id="5732061">:</span>&nbsp;<span class="num" id="5732063">0</span><span class="op" id="5732064">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732069">Func</span><span class="op" id="5732073">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5732077">f</span><span class="op" id="5732078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732088">return</span>&nbsp;<span class="ident" id="5732095">funcs</span><br>
<span class="lineno"></span><span class="op" id="5732101">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5732104">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="5732177">func</span>&nbsp;<span class="op" id="5732182">(</span><span class="ident" id="5732183">t</span>&nbsp;<span class="op" id="5732185">*</span><span class="ident" id="5732186">LineTable</span><span class="op" id="5732195">)</span>&nbsp;<span class="ident" id="5732197">findFunc</span><span class="op" id="5732205">(</span><span class="ident" id="5732206">pc</span>&nbsp;<span class="ident" id="5732209">uint64</span><span class="op" id="5732215">)</span>&nbsp;<span class="op" id="5732217">[</span><span class="op" id="5732218">]</span><span class="builtintype" id="5732219">byte</span>&nbsp;<span class="op" id="5732224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732227">if</span>&nbsp;<span class="ident" id="5732230">pc</span>&nbsp;<span class="op" id="5732233">&lt;</span>&nbsp;<span class="ident" id="5732235">t</span><span class="op" id="5732236">.</span><span class="builtintype" id="5732237">uintptr</span><span class="op" id="5732244">(</span><span class="ident" id="5732245">t</span><span class="op" id="5732246">.</span><span class="ident" id="5732247">functab</span><span class="op" id="5732254">)</span>&nbsp;<span class="op" id="5732256">||</span>&nbsp;<span class="ident" id="5732259">pc</span>&nbsp;<span class="op" id="5732262">&gt;=</span>&nbsp;<span class="ident" id="5732265">t</span><span class="op" id="5732266">.</span><span class="builtintype" id="5732267">uintptr</span><span class="op" id="5732274">(</span><span class="ident" id="5732275">t</span><span class="op" id="5732276">.</span><span class="ident" id="5732277">functab</span><span class="op" id="5732284">[</span><span class="builtinfunc" id="5732285">len</span><span class="op" id="5732288">(</span><span class="ident" id="5732289">t</span><span class="op" id="5732290">.</span><span class="ident" id="5732291">functab</span><span class="op" id="5732298">)</span><span class="op" id="5732299">-</span><span class="builtintype" id="5732300">int</span><span class="op" id="5732303">(</span><span class="ident" id="5732304">t</span><span class="op" id="5732305">.</span><span class="ident" id="5732306">ptrsize</span><span class="op" id="5732313">)</span><span class="op" id="5732314">:</span><span class="op" id="5732315">]</span><span class="op" id="5732316">)</span>&nbsp;<span class="op" id="5732318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732322">return</span>&nbsp;<span class="ident" id="5732329">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5732338">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5732397">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732462">f</span>&nbsp;<span class="op" id="5732464">:=</span>&nbsp;<span class="ident" id="5732467">t</span><span class="op" id="5732468">.</span><span class="ident" id="5732469">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732478">nf</span>&nbsp;<span class="op" id="5732481">:=</span>&nbsp;<span class="ident" id="5732484">t</span><span class="op" id="5732485">.</span><span class="ident" id="5732486">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732496">for</span>&nbsp;<span class="ident" id="5732500">nf</span>&nbsp;<span class="op" id="5732503">&gt;</span>&nbsp;<span class="num" id="5732505">0</span>&nbsp;<span class="op" id="5732507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732511">m</span>&nbsp;<span class="op" id="5732513">:=</span>&nbsp;<span class="ident" id="5732516">nf</span>&nbsp;<span class="op" id="5732519">/</span>&nbsp;<span class="num" id="5732521">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732525">fm</span>&nbsp;<span class="op" id="5732528">:=</span>&nbsp;<span class="ident" id="5732531">f</span><span class="op" id="5732532">[</span><span class="num" id="5732533">2</span><span class="op" id="5732534">*</span><span class="ident" id="5732535">t</span><span class="op" id="5732536">.</span><span class="ident" id="5732537">ptrsize</span><span class="op" id="5732544">*</span><span class="ident" id="5732545">m</span><span class="op" id="5732546">:</span><span class="op" id="5732547">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732551">if</span>&nbsp;<span class="ident" id="5732554">t</span><span class="op" id="5732555">.</span><span class="builtintype" id="5732556">uintptr</span><span class="op" id="5732563">(</span><span class="ident" id="5732564">fm</span><span class="op" id="5732566">)</span>&nbsp;<span class="op" id="5732568">&lt;=</span>&nbsp;<span class="ident" id="5732571">pc</span>&nbsp;<span class="op" id="5732574">&amp;&amp;</span>&nbsp;<span class="ident" id="5732577">pc</span>&nbsp;<span class="op" id="5732580">&lt;</span>&nbsp;<span class="ident" id="5732582">t</span><span class="op" id="5732583">.</span><span class="builtintype" id="5732584">uintptr</span><span class="op" id="5732591">(</span><span class="ident" id="5732592">fm</span><span class="op" id="5732594">[</span><span class="num" id="5732595">2</span><span class="op" id="5732596">*</span><span class="ident" id="5732597">t</span><span class="op" id="5732598">.</span><span class="ident" id="5732599">ptrsize</span><span class="op" id="5732606">:</span><span class="op" id="5732607">]</span><span class="op" id="5732608">)</span>&nbsp;<span class="op" id="5732610">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732615">return</span>&nbsp;<span class="ident" id="5732622">t</span><span class="op" id="5732623">.</span><span class="ident" id="5732624">Data</span><span class="op" id="5732628">[</span><span class="ident" id="5732629">t</span><span class="op" id="5732630">.</span><span class="builtintype" id="5732631">uintptr</span><span class="op" id="5732638">(</span><span class="ident" id="5732639">fm</span><span class="op" id="5732641">[</span><span class="ident" id="5732642">t</span><span class="op" id="5732643">.</span><span class="ident" id="5732644">ptrsize</span><span class="op" id="5732651">:</span><span class="op" id="5732652">]</span><span class="op" id="5732653">)</span><span class="op" id="5732654">:</span><span class="op" id="5732655">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732659">}</span>&nbsp;<span class="keyword" id="5732661">else</span>&nbsp;<span class="keyword" id="5732666">if</span>&nbsp;<span class="ident" id="5732669">pc</span>&nbsp;<span class="op" id="5732672">&lt;</span>&nbsp;<span class="ident" id="5732674">t</span><span class="op" id="5732675">.</span><span class="builtintype" id="5732676">uintptr</span><span class="op" id="5732683">(</span><span class="ident" id="5732684">fm</span><span class="op" id="5732686">)</span>&nbsp;<span class="op" id="5732688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732693">nf</span>&nbsp;<span class="op" id="5732696">=</span>&nbsp;<span class="ident" id="5732698">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732702">}</span>&nbsp;<span class="keyword" id="5732704">else</span>&nbsp;<span class="op" id="5732709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732714">f</span>&nbsp;<span class="op" id="5732716">=</span>&nbsp;<span class="ident" id="5732718">f</span><span class="op" id="5732719">[</span><span class="op" id="5732720">(</span><span class="ident" id="5732721">m</span><span class="op" id="5732722">+</span><span class="num" id="5732723">1</span><span class="op" id="5732724">)</span><span class="op" id="5732725">*</span><span class="num" id="5732726">2</span><span class="op" id="5732727">*</span><span class="ident" id="5732728">t</span><span class="op" id="5732729">.</span><span class="ident" id="5732730">ptrsize</span><span class="op" id="5732737">:</span><span class="op" id="5732738">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732743">nf</span>&nbsp;<span class="op" id="5732746">-=</span>&nbsp;<span class="ident" id="5732749">m</span>&nbsp;<span class="op" id="5732751">+</span>&nbsp;<span class="num" id="5732753">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732763">return</span>&nbsp;<span class="ident" id="5732770">nil</span><br>
<span class="lineno"></span><span class="op" id="5732774">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="5732777">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="5732838">func</span>&nbsp;<span class="op" id="5732843">(</span><span class="ident" id="5732844">t</span>&nbsp;<span class="op" id="5732846">*</span><span class="ident" id="5732847">LineTable</span><span class="op" id="5732856">)</span>&nbsp;<span class="ident" id="5732858">readvarint</span><span class="op" id="5732868">(</span><span class="ident" id="5732869">pp</span>&nbsp;<span class="op" id="5732872">*</span><span class="op" id="5732873">[</span><span class="op" id="5732874">]</span><span class="builtintype" id="5732875">byte</span><span class="op" id="5732879">)</span>&nbsp;<span class="builtintype" id="5732881">uint32</span>&nbsp;<span class="op" id="5732888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732891">var</span>&nbsp;<span class="ident" id="5732895">v</span><span class="op" id="5732896">,</span>&nbsp;<span class="ident" id="5732898">shift</span>&nbsp;<span class="builtintype" id="5732904">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732912">p</span>&nbsp;<span class="op" id="5732914">:=</span>&nbsp;<span class="op" id="5732917">*</span><span class="ident" id="5732918">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732922">for</span>&nbsp;<span class="ident" id="5732926">shift</span>&nbsp;<span class="op" id="5732932">=</span>&nbsp;<span class="num" id="5732934">0</span><span class="op" id="5732935">;</span>&nbsp;<span class="op" id="5732937">;</span>&nbsp;<span class="ident" id="5732939">shift</span>&nbsp;<span class="op" id="5732945">+=</span>&nbsp;<span class="num" id="5732948">7</span>&nbsp;<span class="op" id="5732950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732954">b</span>&nbsp;<span class="op" id="5732956">:=</span>&nbsp;<span class="ident" id="5732959">p</span><span class="op" id="5732960">[</span><span class="num" id="5732961">0</span><span class="op" id="5732962">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732966">p</span>&nbsp;<span class="op" id="5732968">=</span>&nbsp;<span class="ident" id="5732970">p</span><span class="op" id="5732971">[</span><span class="num" id="5732972">1</span><span class="op" id="5732973">:</span><span class="op" id="5732974">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732978">v</span>&nbsp;<span class="op" id="5732980">|=</span>&nbsp;<span class="op" id="5732983">(</span><span class="builtintype" id="5732984">uint32</span><span class="op" id="5732990">(</span><span class="ident" id="5732991">b</span><span class="op" id="5732992">)</span>&nbsp;<span class="op" id="5732994">&amp;</span>&nbsp;<span class="num" id="5732996">0x7F</span><span class="op" id="5733000">)</span>&nbsp;<span class="op" id="5733002">&lt;&lt;</span>&nbsp;<span class="ident" id="5733005">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733013">if</span>&nbsp;<span class="ident" id="5733016">b</span><span class="op" id="5733017">&amp;</span><span class="num" id="5733018">0x80</span>&nbsp;<span class="op" id="5733023">==</span>&nbsp;<span class="num" id="5733026">0</span>&nbsp;<span class="op" id="5733028">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733033">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733047">*</span><span class="ident" id="5733048">pp</span>&nbsp;<span class="op" id="5733051">=</span>&nbsp;<span class="ident" id="5733053">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733056">return</span>&nbsp;<span class="ident" id="5733063">v</span><br>
<span class="lineno">265</span><span class="op" id="5733065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5733068">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="5733112">func</span>&nbsp;<span class="op" id="5733117">(</span><span class="ident" id="5733118">t</span>&nbsp;<span class="op" id="5733120">*</span><span class="ident" id="5733121">LineTable</span><span class="op" id="5733130">)</span>&nbsp;<span class="builtintype" id="5733132">string</span><span class="op" id="5733138">(</span><span class="ident" id="5733139">off</span>&nbsp;<span class="builtintype" id="5733143">uint32</span><span class="op" id="5733149">)</span>&nbsp;<span class="builtintype" id="5733151">string</span>&nbsp;<span class="op" id="5733158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733161">for</span>&nbsp;<span class="ident" id="5733165">i</span>&nbsp;<span class="op" id="5733167">:=</span>&nbsp;<span class="ident" id="5733170">off</span><span class="op" id="5733173">;</span>&nbsp;<span class="op" id="5733175">;</span>&nbsp;<span class="ident" id="5733177">i</span><span class="op" id="5733178">++</span>&nbsp;<span class="op" id="5733181">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733185">if</span>&nbsp;<span class="ident" id="5733188">t</span><span class="op" id="5733189">.</span><span class="ident" id="5733190">Data</span><span class="op" id="5733194">[</span><span class="ident" id="5733195">i</span><span class="op" id="5733196">]</span>&nbsp;<span class="op" id="5733198">==</span>&nbsp;<span class="num" id="5733201">0</span>&nbsp;<span class="op" id="5733203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733208">return</span>&nbsp;<span class="builtintype" id="5733215">string</span><span class="op" id="5733221">(</span><span class="ident" id="5733222">t</span><span class="op" id="5733223">.</span><span class="ident" id="5733224">Data</span><span class="op" id="5733228">[</span><span class="ident" id="5733229">off</span><span class="op" id="5733232">:</span><span class="ident" id="5733233">i</span><span class="op" id="5733234">]</span><span class="op" id="5733235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733242">}</span><br>
<span class="lineno"></span><span class="op" id="5733244">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="5733247">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5733313">func</span>&nbsp;<span class="op" id="5733318">(</span><span class="ident" id="5733319">t</span>&nbsp;<span class="op" id="5733321">*</span><span class="ident" id="5733322">LineTable</span><span class="op" id="5733331">)</span>&nbsp;<span class="ident" id="5733333">step</span><span class="op" id="5733337">(</span><span class="ident" id="5733338">p</span>&nbsp;<span class="op" id="5733340">*</span><span class="op" id="5733341">[</span><span class="op" id="5733342">]</span><span class="builtintype" id="5733343">byte</span><span class="op" id="5733347">,</span>&nbsp;<span class="ident" id="5733349">pc</span>&nbsp;<span class="op" id="5733352">*</span><span class="ident" id="5733353">uint64</span><span class="op" id="5733359">,</span>&nbsp;<span class="ident" id="5733361">val</span>&nbsp;<span class="op" id="5733365">*</span><span class="builtintype" id="5733366">int32</span><span class="op" id="5733371">,</span>&nbsp;<span class="ident" id="5733373">first</span>&nbsp;<span class="builtintype" id="5733379">bool</span><span class="op" id="5733383">)</span>&nbsp;<span class="builtintype" id="5733385">bool</span>&nbsp;<span class="op" id="5733390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733393">uvdelta</span>&nbsp;<span class="op" id="5733401">:=</span>&nbsp;<span class="ident" id="5733404">t</span><span class="op" id="5733405">.</span><span class="ident" id="5733406">readvarint</span><span class="op" id="5733416">(</span><span class="ident" id="5733417">p</span><span class="op" id="5733418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733421">if</span>&nbsp;<span class="ident" id="5733424">uvdelta</span>&nbsp;<span class="op" id="5733432">==</span>&nbsp;<span class="num" id="5733435">0</span>&nbsp;<span class="op" id="5733437">&amp;&amp;</span>&nbsp;<span class="op" id="5733440">!</span><span class="ident" id="5733441">first</span>&nbsp;<span class="op" id="5733447">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733451">return</span>&nbsp;<span class="builtintype" id="5733458">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733468">if</span>&nbsp;<span class="ident" id="5733471">uvdelta</span><span class="op" id="5733478">&amp;</span><span class="num" id="5733479">1</span>&nbsp;<span class="op" id="5733481">!=</span>&nbsp;<span class="num" id="5733484">0</span>&nbsp;<span class="op" id="5733486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733490">uvdelta</span>&nbsp;<span class="op" id="5733498">=</span>&nbsp;<span class="op" id="5733500">^</span><span class="op" id="5733501">(</span><span class="ident" id="5733502">uvdelta</span>&nbsp;<span class="op" id="5733510">&gt;&gt;</span>&nbsp;<span class="num" id="5733513">1</span><span class="op" id="5733514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733517">}</span>&nbsp;<span class="keyword" id="5733519">else</span>&nbsp;<span class="op" id="5733524">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733528">uvdelta</span>&nbsp;<span class="op" id="5733536">&gt;&gt;=</span>&nbsp;<span class="num" id="5733540">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733546">vdelta</span>&nbsp;<span class="op" id="5733553">:=</span>&nbsp;<span class="builtintype" id="5733556">int32</span><span class="op" id="5733561">(</span><span class="ident" id="5733562">uvdelta</span><span class="op" id="5733569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733572">pcdelta</span>&nbsp;<span class="op" id="5733580">:=</span>&nbsp;<span class="ident" id="5733583">t</span><span class="op" id="5733584">.</span><span class="ident" id="5733585">readvarint</span><span class="op" id="5733595">(</span><span class="ident" id="5733596">p</span><span class="op" id="5733597">)</span>&nbsp;<span class="op" id="5733599">*</span>&nbsp;<span class="ident" id="5733601">t</span><span class="op" id="5733602">.</span><span class="ident" id="5733603">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733612">*</span><span class="ident" id="5733613">pc</span>&nbsp;<span class="op" id="5733616">+=</span>&nbsp;<span class="ident" id="5733619">uint64</span><span class="op" id="5733625">(</span><span class="ident" id="5733626">pcdelta</span><span class="op" id="5733633">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733636">*</span><span class="ident" id="5733637">val</span>&nbsp;<span class="op" id="5733641">+=</span>&nbsp;<span class="ident" id="5733644">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733652">return</span>&nbsp;<span class="builtintype" id="5733659">true</span><br>
<span class="lineno"></span><span class="op" id="5733664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5733667">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="5733727">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="5733788">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5733849">func</span>&nbsp;<span class="op" id="5733854">(</span><span class="ident" id="5733855">t</span>&nbsp;<span class="op" id="5733857">*</span><span class="ident" id="5733858">LineTable</span><span class="op" id="5733867">)</span>&nbsp;<span class="ident" id="5733869">pcvalue</span><span class="op" id="5733876">(</span><span class="ident" id="5733877">off</span>&nbsp;<span class="builtintype" id="5733881">uint32</span><span class="op" id="5733887">,</span>&nbsp;<span class="ident" id="5733889">entry</span><span class="op" id="5733894">,</span>&nbsp;<span class="ident" id="5733896">targetpc</span>&nbsp;<span class="ident" id="5733905">uint64</span><span class="op" id="5733911">)</span>&nbsp;<span class="builtintype" id="5733913">int32</span>&nbsp;<span class="op" id="5733919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733922">if</span>&nbsp;<span class="ident" id="5733925">off</span>&nbsp;<span class="op" id="5733929">==</span>&nbsp;<span class="num" id="5733932">0</span>&nbsp;<span class="op" id="5733934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733938">return</span>&nbsp;<span class="op" id="5733945">-</span><span class="num" id="5733946">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733952">p</span>&nbsp;<span class="op" id="5733954">:=</span>&nbsp;<span class="ident" id="5733957">t</span><span class="op" id="5733958">.</span><span class="ident" id="5733959">Data</span><span class="op" id="5733963">[</span><span class="ident" id="5733964">off</span><span class="op" id="5733967">:</span><span class="op" id="5733968">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733972">val</span>&nbsp;<span class="op" id="5733976">:=</span>&nbsp;<span class="builtintype" id="5733979">int32</span><span class="op" id="5733984">(</span><span class="op" id="5733985">-</span><span class="num" id="5733986">1</span><span class="op" id="5733987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733990">pc</span>&nbsp;<span class="op" id="5733993">:=</span>&nbsp;<span class="ident" id="5733996">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734003">for</span>&nbsp;<span class="ident" id="5734007">t</span><span class="op" id="5734008">.</span><span class="ident" id="5734009">step</span><span class="op" id="5734013">(</span><span class="op" id="5734014">&amp;</span><span class="ident" id="5734015">p</span><span class="op" id="5734016">,</span>&nbsp;<span class="op" id="5734018">&amp;</span><span class="ident" id="5734019">pc</span><span class="op" id="5734021">,</span>&nbsp;<span class="op" id="5734023">&amp;</span><span class="ident" id="5734024">val</span><span class="op" id="5734027">,</span>&nbsp;<span class="ident" id="5734029">pc</span>&nbsp;<span class="op" id="5734032">==</span>&nbsp;<span class="ident" id="5734035">entry</span><span class="op" id="5734040">)</span>&nbsp;<span class="op" id="5734042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734046">if</span>&nbsp;<span class="ident" id="5734049">targetpc</span>&nbsp;<span class="op" id="5734058">&lt;</span>&nbsp;<span class="ident" id="5734060">pc</span>&nbsp;<span class="op" id="5734063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734068">return</span>&nbsp;<span class="ident" id="5734075">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734084">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734087">return</span>&nbsp;<span class="op" id="5734094">-</span><span class="num" id="5734095">1</span><br>
<span class="lineno"></span><span class="op" id="5734097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5734100">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5734163">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="5734219">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="5734288">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5734359">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5734434">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5734511">func</span>&nbsp;<span class="op" id="5734516">(</span><span class="ident" id="5734517">t</span>&nbsp;<span class="op" id="5734519">*</span><span class="ident" id="5734520">LineTable</span><span class="op" id="5734529">)</span>&nbsp;<span class="ident" id="5734531">findFileLine</span><span class="op" id="5734543">(</span><span class="ident" id="5734544">entry</span>&nbsp;<span class="ident" id="5734550">uint64</span><span class="op" id="5734556">,</span>&nbsp;<span class="ident" id="5734558">filetab</span><span class="op" id="5734565">,</span>&nbsp;<span class="ident" id="5734567">linetab</span>&nbsp;<span class="builtintype" id="5734575">uint32</span><span class="op" id="5734581">,</span>&nbsp;<span class="ident" id="5734583">filenum</span><span class="op" id="5734590">,</span>&nbsp;<span class="ident" id="5734592">line</span>&nbsp;<span class="builtintype" id="5734597">int32</span><span class="op" id="5734602">)</span>&nbsp;<span class="ident" id="5734604">uint64</span>&nbsp;<span class="op" id="5734611">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734614">if</span>&nbsp;<span class="ident" id="5734617">filetab</span>&nbsp;<span class="op" id="5734625">==</span>&nbsp;<span class="num" id="5734628">0</span>&nbsp;<span class="op" id="5734630">||</span>&nbsp;<span class="ident" id="5734633">linetab</span>&nbsp;<span class="op" id="5734641">==</span>&nbsp;<span class="num" id="5734644">0</span>&nbsp;<span class="op" id="5734646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734650">return</span>&nbsp;<span class="num" id="5734657">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734664">fp</span>&nbsp;<span class="op" id="5734667">:=</span>&nbsp;<span class="ident" id="5734670">t</span><span class="op" id="5734671">.</span><span class="ident" id="5734672">Data</span><span class="op" id="5734676">[</span><span class="ident" id="5734677">filetab</span><span class="op" id="5734684">:</span><span class="op" id="5734685">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734688">fl</span>&nbsp;<span class="op" id="5734691">:=</span>&nbsp;<span class="ident" id="5734694">t</span><span class="op" id="5734695">.</span><span class="ident" id="5734696">Data</span><span class="op" id="5734700">[</span><span class="ident" id="5734701">linetab</span><span class="op" id="5734708">:</span><span class="op" id="5734709">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734712">fileVal</span>&nbsp;<span class="op" id="5734720">:=</span>&nbsp;<span class="builtintype" id="5734723">int32</span><span class="op" id="5734728">(</span><span class="op" id="5734729">-</span><span class="num" id="5734730">1</span><span class="op" id="5734731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734734">filePC</span>&nbsp;<span class="op" id="5734741">:=</span>&nbsp;<span class="ident" id="5734744">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734751">lineVal</span>&nbsp;<span class="op" id="5734759">:=</span>&nbsp;<span class="builtintype" id="5734762">int32</span><span class="op" id="5734767">(</span><span class="op" id="5734768">-</span><span class="num" id="5734769">1</span><span class="op" id="5734770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734773">linePC</span>&nbsp;<span class="op" id="5734780">:=</span>&nbsp;<span class="ident" id="5734783">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734790">fileStartPC</span>&nbsp;<span class="op" id="5734802">:=</span>&nbsp;<span class="ident" id="5734805">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734813">for</span>&nbsp;<span class="ident" id="5734817">t</span><span class="op" id="5734818">.</span><span class="ident" id="5734819">step</span><span class="op" id="5734823">(</span><span class="op" id="5734824">&amp;</span><span class="ident" id="5734825">fp</span><span class="op" id="5734827">,</span>&nbsp;<span class="op" id="5734829">&amp;</span><span class="ident" id="5734830">filePC</span><span class="op" id="5734836">,</span>&nbsp;<span class="op" id="5734838">&amp;</span><span class="ident" id="5734839">fileVal</span><span class="op" id="5734846">,</span>&nbsp;<span class="ident" id="5734848">filePC</span>&nbsp;<span class="op" id="5734855">==</span>&nbsp;<span class="ident" id="5734858">entry</span><span class="op" id="5734863">)</span>&nbsp;<span class="op" id="5734865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734869">if</span>&nbsp;<span class="ident" id="5734872">fileVal</span>&nbsp;<span class="op" id="5734880">==</span>&nbsp;<span class="ident" id="5734883">filenum</span>&nbsp;<span class="op" id="5734891">&amp;&amp;</span>&nbsp;<span class="ident" id="5734894">fileStartPC</span>&nbsp;<span class="op" id="5734906">&lt;</span>&nbsp;<span class="ident" id="5734908">filePC</span>&nbsp;<span class="op" id="5734915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734920">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734977">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735036">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735094">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735126">lineStartPC</span>&nbsp;<span class="op" id="5735138">:=</span>&nbsp;<span class="ident" id="5735141">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735151">for</span>&nbsp;<span class="ident" id="5735155">linePC</span>&nbsp;<span class="op" id="5735162">&lt;</span>&nbsp;<span class="ident" id="5735164">filePC</span>&nbsp;<span class="op" id="5735171">&amp;&amp;</span>&nbsp;<span class="ident" id="5735174">t</span><span class="op" id="5735175">.</span><span class="ident" id="5735176">step</span><span class="op" id="5735180">(</span><span class="op" id="5735181">&amp;</span><span class="ident" id="5735182">fl</span><span class="op" id="5735184">,</span>&nbsp;<span class="op" id="5735186">&amp;</span><span class="ident" id="5735187">linePC</span><span class="op" id="5735193">,</span>&nbsp;<span class="op" id="5735195">&amp;</span><span class="ident" id="5735196">lineVal</span><span class="op" id="5735203">,</span>&nbsp;<span class="ident" id="5735205">linePC</span>&nbsp;<span class="op" id="5735212">==</span>&nbsp;<span class="ident" id="5735215">entry</span><span class="op" id="5735220">)</span>&nbsp;<span class="op" id="5735222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735228">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735296">if</span>&nbsp;<span class="ident" id="5735299">lineVal</span>&nbsp;<span class="op" id="5735307">==</span>&nbsp;<span class="ident" id="5735310">line</span>&nbsp;<span class="op" id="5735315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735322">if</span>&nbsp;<span class="ident" id="5735325">fileStartPC</span>&nbsp;<span class="op" id="5735337">&lt;=</span>&nbsp;<span class="ident" id="5735340">lineStartPC</span>&nbsp;<span class="op" id="5735352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735360">return</span>&nbsp;<span class="ident" id="5735367">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735391">if</span>&nbsp;<span class="ident" id="5735394">fileStartPC</span>&nbsp;<span class="op" id="5735406">&lt;</span>&nbsp;<span class="ident" id="5735408">linePC</span>&nbsp;<span class="op" id="5735415">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735423">return</span>&nbsp;<span class="ident" id="5735430">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735459">lineStartPC</span>&nbsp;<span class="op" id="5735471">=</span>&nbsp;<span class="ident" id="5735473">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735483">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735491">fileStartPC</span>&nbsp;<span class="op" id="5735503">=</span>&nbsp;<span class="ident" id="5735505">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735516">return</span>&nbsp;<span class="num" id="5735523">0</span><br>
<span class="lineno"></span><span class="op" id="5735525">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="5735528">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5735607">func</span>&nbsp;<span class="op" id="5735612">(</span><span class="ident" id="5735613">t</span>&nbsp;<span class="op" id="5735615">*</span><span class="ident" id="5735616">LineTable</span><span class="op" id="5735625">)</span>&nbsp;<span class="ident" id="5735627">go12PCToLine</span><span class="op" id="5735639">(</span><span class="ident" id="5735640">pc</span>&nbsp;<span class="ident" id="5735643">uint64</span><span class="op" id="5735649">)</span>&nbsp;<span class="op" id="5735651">(</span><span class="ident" id="5735652">line</span>&nbsp;<span class="builtintype" id="5735657">int</span><span class="op" id="5735660">)</span>&nbsp;<span class="op" id="5735662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735665">defer</span>&nbsp;<span class="keyword" id="5735671">func</span><span class="op" id="5735675">(</span><span class="op" id="5735676">)</span>&nbsp;<span class="op" id="5735678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735682">if</span>&nbsp;<span class="builtinfunc" id="5735685">recover</span><span class="op" id="5735692">(</span><span class="op" id="5735693">)</span>&nbsp;<span class="op" id="5735695">!=</span>&nbsp;<span class="ident" id="5735698">nil</span>&nbsp;<span class="op" id="5735702">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735707">line</span>&nbsp;<span class="op" id="5735712">=</span>&nbsp;<span class="op" id="5735714">-</span><span class="num" id="5735715">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735722">}</span><span class="op" id="5735723">(</span><span class="op" id="5735724">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735728">f</span>&nbsp;<span class="op" id="5735730">:=</span>&nbsp;<span class="ident" id="5735733">t</span><span class="op" id="5735734">.</span><span class="ident" id="5735735">findFunc</span><span class="op" id="5735743">(</span><span class="ident" id="5735744">pc</span><span class="op" id="5735746">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735749">if</span>&nbsp;<span class="ident" id="5735752">f</span>&nbsp;<span class="op" id="5735754">==</span>&nbsp;<span class="ident" id="5735757">nil</span>&nbsp;<span class="op" id="5735761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735765">return</span>&nbsp;<span class="op" id="5735772">-</span><span class="num" id="5735773">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735779">entry</span>&nbsp;<span class="op" id="5735785">:=</span>&nbsp;<span class="ident" id="5735788">t</span><span class="op" id="5735789">.</span><span class="builtintype" id="5735790">uintptr</span><span class="op" id="5735797">(</span><span class="ident" id="5735798">f</span><span class="op" id="5735799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735802">linetab</span>&nbsp;<span class="op" id="5735810">:=</span>&nbsp;<span class="ident" id="5735813">t</span><span class="op" id="5735814">.</span><span class="ident" id="5735815">binary</span><span class="op" id="5735821">.</span><span class="ident" id="5735822">Uint32</span><span class="op" id="5735828">(</span><span class="ident" id="5735829">f</span><span class="op" id="5735830">[</span><span class="ident" id="5735831">t</span><span class="op" id="5735832">.</span><span class="ident" id="5735833">ptrsize</span><span class="op" id="5735840">+</span><span class="num" id="5735841">5</span><span class="op" id="5735842">*</span><span class="num" id="5735843">4</span><span class="op" id="5735844">:</span><span class="op" id="5735845">]</span><span class="op" id="5735846">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735849">return</span>&nbsp;<span class="builtintype" id="5735856">int</span><span class="op" id="5735859">(</span><span class="ident" id="5735860">t</span><span class="op" id="5735861">.</span><span class="ident" id="5735862">pcvalue</span><span class="op" id="5735869">(</span><span class="ident" id="5735870">linetab</span><span class="op" id="5735877">,</span>&nbsp;<span class="ident" id="5735879">entry</span><span class="op" id="5735884">,</span>&nbsp;<span class="ident" id="5735886">pc</span><span class="op" id="5735888">)</span><span class="op" id="5735889">)</span><br>
<span class="lineno"></span><span class="op" id="5735891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5735894">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5735971">func</span>&nbsp;<span class="op" id="5735976">(</span><span class="ident" id="5735977">t</span>&nbsp;<span class="op" id="5735979">*</span><span class="ident" id="5735980">LineTable</span><span class="op" id="5735989">)</span>&nbsp;<span class="ident" id="5735991">go12PCToFile</span><span class="op" id="5736003">(</span><span class="ident" id="5736004">pc</span>&nbsp;<span class="ident" id="5736007">uint64</span><span class="op" id="5736013">)</span>&nbsp;<span class="op" id="5736015">(</span><span class="ident" id="5736016">file</span>&nbsp;<span class="builtintype" id="5736021">string</span><span class="op" id="5736027">)</span>&nbsp;<span class="op" id="5736029">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736032">defer</span>&nbsp;<span class="keyword" id="5736038">func</span><span class="op" id="5736042">(</span><span class="op" id="5736043">)</span>&nbsp;<span class="op" id="5736045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736049">if</span>&nbsp;<span class="builtinfunc" id="5736052">recover</span><span class="op" id="5736059">(</span><span class="op" id="5736060">)</span>&nbsp;<span class="op" id="5736062">!=</span>&nbsp;<span class="ident" id="5736065">nil</span>&nbsp;<span class="op" id="5736069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736074">file</span>&nbsp;<span class="op" id="5736079">=</span>&nbsp;<span class="string" id="5736081">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736089">}</span><span class="op" id="5736090">(</span><span class="op" id="5736091">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736095">f</span>&nbsp;<span class="op" id="5736097">:=</span>&nbsp;<span class="ident" id="5736100">t</span><span class="op" id="5736101">.</span><span class="ident" id="5736102">findFunc</span><span class="op" id="5736110">(</span><span class="ident" id="5736111">pc</span><span class="op" id="5736113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736116">if</span>&nbsp;<span class="ident" id="5736119">f</span>&nbsp;<span class="op" id="5736121">==</span>&nbsp;<span class="ident" id="5736124">nil</span>&nbsp;<span class="op" id="5736128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736132">return</span>&nbsp;<span class="string" id="5736139">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736143">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736146">entry</span>&nbsp;<span class="op" id="5736152">:=</span>&nbsp;<span class="ident" id="5736155">t</span><span class="op" id="5736156">.</span><span class="builtintype" id="5736157">uintptr</span><span class="op" id="5736164">(</span><span class="ident" id="5736165">f</span><span class="op" id="5736166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736169">filetab</span>&nbsp;<span class="op" id="5736177">:=</span>&nbsp;<span class="ident" id="5736180">t</span><span class="op" id="5736181">.</span><span class="ident" id="5736182">binary</span><span class="op" id="5736188">.</span><span class="ident" id="5736189">Uint32</span><span class="op" id="5736195">(</span><span class="ident" id="5736196">f</span><span class="op" id="5736197">[</span><span class="ident" id="5736198">t</span><span class="op" id="5736199">.</span><span class="ident" id="5736200">ptrsize</span><span class="op" id="5736207">+</span><span class="num" id="5736208">4</span><span class="op" id="5736209">*</span><span class="num" id="5736210">4</span><span class="op" id="5736211">:</span><span class="op" id="5736212">]</span><span class="op" id="5736213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736216">fno</span>&nbsp;<span class="op" id="5736220">:=</span>&nbsp;<span class="ident" id="5736223">t</span><span class="op" id="5736224">.</span><span class="ident" id="5736225">pcvalue</span><span class="op" id="5736232">(</span><span class="ident" id="5736233">filetab</span><span class="op" id="5736240">,</span>&nbsp;<span class="ident" id="5736242">entry</span><span class="op" id="5736247">,</span>&nbsp;<span class="ident" id="5736249">pc</span><span class="op" id="5736251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736254">if</span>&nbsp;<span class="ident" id="5736257">fno</span>&nbsp;<span class="op" id="5736261">&lt;=</span>&nbsp;<span class="num" id="5736264">0</span>&nbsp;<span class="op" id="5736266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736270">return</span>&nbsp;<span class="string" id="5736277">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736284">return</span>&nbsp;<span class="ident" id="5736291">t</span><span class="op" id="5736292">.</span><span class="builtintype" id="5736293">string</span><span class="op" id="5736299">(</span><span class="ident" id="5736300">t</span><span class="op" id="5736301">.</span><span class="ident" id="5736302">binary</span><span class="op" id="5736308">.</span><span class="ident" id="5736309">Uint32</span><span class="op" id="5736315">(</span><span class="ident" id="5736316">t</span><span class="op" id="5736317">.</span><span class="ident" id="5736318">filetab</span><span class="op" id="5736325">[</span><span class="num" id="5736326">4</span><span class="op" id="5736327">*</span><span class="ident" id="5736328">fno</span><span class="op" id="5736331">:</span><span class="op" id="5736332">]</span><span class="op" id="5736333">)</span><span class="op" id="5736334">)</span><br>
<span class="lineno"></span><span class="op" id="5736336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5736339">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="5736428">func</span>&nbsp;<span class="op" id="5736433">(</span><span class="ident" id="5736434">t</span>&nbsp;<span class="op" id="5736436">*</span><span class="ident" id="5736437">LineTable</span><span class="op" id="5736446">)</span>&nbsp;<span class="ident" id="5736448">go12LineToPC</span><span class="op" id="5736460">(</span><span class="ident" id="5736461">file</span>&nbsp;<span class="builtintype" id="5736466">string</span><span class="op" id="5736472">,</span>&nbsp;<span class="ident" id="5736474">line</span>&nbsp;<span class="builtintype" id="5736479">int</span><span class="op" id="5736482">)</span>&nbsp;<span class="op" id="5736484">(</span><span class="ident" id="5736485">pc</span>&nbsp;<span class="ident" id="5736488">uint64</span><span class="op" id="5736494">)</span>&nbsp;<span class="op" id="5736496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736499">defer</span>&nbsp;<span class="keyword" id="5736505">func</span><span class="op" id="5736509">(</span><span class="op" id="5736510">)</span>&nbsp;<span class="op" id="5736512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736516">if</span>&nbsp;<span class="builtinfunc" id="5736519">recover</span><span class="op" id="5736526">(</span><span class="op" id="5736527">)</span>&nbsp;<span class="op" id="5736529">!=</span>&nbsp;<span class="ident" id="5736532">nil</span>&nbsp;<span class="op" id="5736536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736541">pc</span>&nbsp;<span class="op" id="5736544">=</span>&nbsp;<span class="num" id="5736546">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736550">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736553">}</span><span class="op" id="5736554">(</span><span class="op" id="5736555">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736559">t</span><span class="op" id="5736560">.</span><span class="ident" id="5736561">initFileMap</span><span class="op" id="5736572">(</span><span class="op" id="5736573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736576">filenum</span>&nbsp;<span class="op" id="5736584">:=</span>&nbsp;<span class="ident" id="5736587">t</span><span class="op" id="5736588">.</span><span class="ident" id="5736589">fileMap</span><span class="op" id="5736596">[</span><span class="ident" id="5736597">file</span><span class="op" id="5736601">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736604">if</span>&nbsp;<span class="ident" id="5736607">filenum</span>&nbsp;<span class="op" id="5736615">==</span>&nbsp;<span class="num" id="5736618">0</span>&nbsp;<span class="op" id="5736620">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736624">return</span>&nbsp;<span class="num" id="5736631">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5736638">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5736662">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5736739">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736812">for</span>&nbsp;<span class="ident" id="5736816">i</span>&nbsp;<span class="op" id="5736818">:=</span>&nbsp;<span class="builtintype" id="5736821">uint32</span><span class="op" id="5736827">(</span><span class="num" id="5736828">0</span><span class="op" id="5736829">)</span><span class="op" id="5736830">;</span>&nbsp;<span class="ident" id="5736832">i</span>&nbsp;<span class="op" id="5736834">&lt;</span>&nbsp;<span class="ident" id="5736836">t</span><span class="op" id="5736837">.</span><span class="ident" id="5736838">nfunctab</span><span class="op" id="5736846">;</span>&nbsp;<span class="ident" id="5736848">i</span><span class="op" id="5736849">++</span>&nbsp;<span class="op" id="5736852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736856">f</span>&nbsp;<span class="op" id="5736858">:=</span>&nbsp;<span class="ident" id="5736861">t</span><span class="op" id="5736862">.</span><span class="ident" id="5736863">Data</span><span class="op" id="5736867">[</span><span class="ident" id="5736868">t</span><span class="op" id="5736869">.</span><span class="builtintype" id="5736870">uintptr</span><span class="op" id="5736877">(</span><span class="ident" id="5736878">t</span><span class="op" id="5736879">.</span><span class="ident" id="5736880">functab</span><span class="op" id="5736887">[</span><span class="num" id="5736888">2</span><span class="op" id="5736889">*</span><span class="ident" id="5736890">t</span><span class="op" id="5736891">.</span><span class="ident" id="5736892">ptrsize</span><span class="op" id="5736899">*</span><span class="ident" id="5736900">i</span><span class="op" id="5736901">+</span><span class="ident" id="5736902">t</span><span class="op" id="5736903">.</span><span class="ident" id="5736904">ptrsize</span><span class="op" id="5736911">:</span><span class="op" id="5736912">]</span><span class="op" id="5736913">)</span><span class="op" id="5736914">:</span><span class="op" id="5736915">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736919">entry</span>&nbsp;<span class="op" id="5736925">:=</span>&nbsp;<span class="ident" id="5736928">t</span><span class="op" id="5736929">.</span><span class="builtintype" id="5736930">uintptr</span><span class="op" id="5736937">(</span><span class="ident" id="5736938">f</span><span class="op" id="5736939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736943">filetab</span>&nbsp;<span class="op" id="5736951">:=</span>&nbsp;<span class="ident" id="5736954">t</span><span class="op" id="5736955">.</span><span class="ident" id="5736956">binary</span><span class="op" id="5736962">.</span><span class="ident" id="5736963">Uint32</span><span class="op" id="5736969">(</span><span class="ident" id="5736970">f</span><span class="op" id="5736971">[</span><span class="ident" id="5736972">t</span><span class="op" id="5736973">.</span><span class="ident" id="5736974">ptrsize</span><span class="op" id="5736981">+</span><span class="num" id="5736982">4</span><span class="op" id="5736983">*</span><span class="num" id="5736984">4</span><span class="op" id="5736985">:</span><span class="op" id="5736986">]</span><span class="op" id="5736987">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736991">linetab</span>&nbsp;<span class="op" id="5736999">:=</span>&nbsp;<span class="ident" id="5737002">t</span><span class="op" id="5737003">.</span><span class="ident" id="5737004">binary</span><span class="op" id="5737010">.</span><span class="ident" id="5737011">Uint32</span><span class="op" id="5737017">(</span><span class="ident" id="5737018">f</span><span class="op" id="5737019">[</span><span class="ident" id="5737020">t</span><span class="op" id="5737021">.</span><span class="ident" id="5737022">ptrsize</span><span class="op" id="5737029">+</span><span class="num" id="5737030">5</span><span class="op" id="5737031">*</span><span class="num" id="5737032">4</span><span class="op" id="5737033">:</span><span class="op" id="5737034">]</span><span class="op" id="5737035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737039">pc</span>&nbsp;<span class="op" id="5737042">:=</span>&nbsp;<span class="ident" id="5737045">t</span><span class="op" id="5737046">.</span><span class="ident" id="5737047">findFileLine</span><span class="op" id="5737059">(</span><span class="ident" id="5737060">entry</span><span class="op" id="5737065">,</span>&nbsp;<span class="ident" id="5737067">filetab</span><span class="op" id="5737074">,</span>&nbsp;<span class="ident" id="5737076">linetab</span><span class="op" id="5737083">,</span>&nbsp;<span class="builtintype" id="5737085">int32</span><span class="op" id="5737090">(</span><span class="ident" id="5737091">filenum</span><span class="op" id="5737098">)</span><span class="op" id="5737099">,</span>&nbsp;<span class="builtintype" id="5737101">int32</span><span class="op" id="5737106">(</span><span class="ident" id="5737107">line</span><span class="op" id="5737111">)</span><span class="op" id="5737112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737116">if</span>&nbsp;<span class="ident" id="5737119">pc</span>&nbsp;<span class="op" id="5737122">!=</span>&nbsp;<span class="num" id="5737125">0</span>&nbsp;<span class="op" id="5737127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737132">return</span>&nbsp;<span class="ident" id="5737139">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737144">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737150">return</span>&nbsp;<span class="num" id="5737157">0</span><br>
<span class="lineno"></span><span class="op" id="5737159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5737162">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="5737228">func</span>&nbsp;<span class="op" id="5737233">(</span><span class="ident" id="5737234">t</span>&nbsp;<span class="op" id="5737236">*</span><span class="ident" id="5737237">LineTable</span><span class="op" id="5737246">)</span>&nbsp;<span class="ident" id="5737248">initFileMap</span><span class="op" id="5737259">(</span><span class="op" id="5737260">)</span>&nbsp;<span class="op" id="5737262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737265">t</span><span class="op" id="5737266">.</span><span class="ident" id="5737267">mu</span><span class="op" id="5737269">.</span><span class="ident" id="5737270">Lock</span><span class="op" id="5737274">(</span><span class="op" id="5737275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737278">defer</span>&nbsp;<span class="ident" id="5737284">t</span><span class="op" id="5737285">.</span><span class="ident" id="5737286">mu</span><span class="op" id="5737288">.</span><span class="ident" id="5737289">Unlock</span><span class="op" id="5737295">(</span><span class="op" id="5737296">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737300">if</span>&nbsp;<span class="ident" id="5737303">t</span><span class="op" id="5737304">.</span><span class="ident" id="5737305">fileMap</span>&nbsp;<span class="op" id="5737313">!=</span>&nbsp;<span class="ident" id="5737316">nil</span>&nbsp;<span class="op" id="5737320">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737324">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737335">m</span>&nbsp;<span class="op" id="5737337">:=</span>&nbsp;<span class="builtinfunc" id="5737340">make</span><span class="op" id="5737344">(</span><span class="keyword" id="5737345">map</span><span class="op" id="5737348">[</span><span class="builtintype" id="5737349">string</span><span class="op" id="5737355">]</span><span class="builtintype" id="5737356">uint32</span><span class="op" id="5737362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737366">for</span>&nbsp;<span class="ident" id="5737370">i</span>&nbsp;<span class="op" id="5737372">:=</span>&nbsp;<span class="builtintype" id="5737375">uint32</span><span class="op" id="5737381">(</span><span class="num" id="5737382">1</span><span class="op" id="5737383">)</span><span class="op" id="5737384">;</span>&nbsp;<span class="ident" id="5737386">i</span>&nbsp;<span class="op" id="5737388">&lt;</span>&nbsp;<span class="ident" id="5737390">t</span><span class="op" id="5737391">.</span><span class="ident" id="5737392">nfiletab</span><span class="op" id="5737400">;</span>&nbsp;<span class="ident" id="5737402">i</span><span class="op" id="5737403">++</span>&nbsp;<span class="op" id="5737406">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737410">s</span>&nbsp;<span class="op" id="5737412">:=</span>&nbsp;<span class="ident" id="5737415">t</span><span class="op" id="5737416">.</span><span class="builtintype" id="5737417">string</span><span class="op" id="5737423">(</span><span class="ident" id="5737424">t</span><span class="op" id="5737425">.</span><span class="ident" id="5737426">binary</span><span class="op" id="5737432">.</span><span class="ident" id="5737433">Uint32</span><span class="op" id="5737439">(</span><span class="ident" id="5737440">t</span><span class="op" id="5737441">.</span><span class="ident" id="5737442">filetab</span><span class="op" id="5737449">[</span><span class="num" id="5737450">4</span><span class="op" id="5737451">*</span><span class="ident" id="5737452">i</span><span class="op" id="5737453">:</span><span class="op" id="5737454">]</span><span class="op" id="5737455">)</span><span class="op" id="5737456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737460">m</span><span class="op" id="5737461">[</span><span class="ident" id="5737462">s</span><span class="op" id="5737463">]</span>&nbsp;<span class="op" id="5737465">=</span>&nbsp;<span class="ident" id="5737467">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737473">t</span><span class="op" id="5737474">.</span><span class="ident" id="5737475">fileMap</span>&nbsp;<span class="op" id="5737483">=</span>&nbsp;<span class="ident" id="5737485">m</span><br>
<span class="lineno"></span><span class="op" id="5737487">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5737490">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="5737562">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="5737639">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="5737704">func</span>&nbsp;<span class="op" id="5737709">(</span><span class="ident" id="5737710">t</span>&nbsp;<span class="op" id="5737712">*</span><span class="ident" id="5737713">LineTable</span><span class="op" id="5737722">)</span>&nbsp;<span class="ident" id="5737724">go12MapFiles</span><span class="op" id="5737736">(</span><span class="ident" id="5737737">m</span>&nbsp;<span class="keyword" id="5737739">map</span><span class="op" id="5737742">[</span><span class="builtintype" id="5737743">string</span><span class="op" id="5737749">]</span><span class="op" id="5737750">*</span><span class="ident" id="5737751">Obj</span><span class="op" id="5737754">,</span>&nbsp;<span class="ident" id="5737756">obj</span>&nbsp;<span class="op" id="5737760">*</span><span class="ident" id="5737761">Obj</span><span class="op" id="5737764">)</span>&nbsp;<span class="op" id="5737766">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737769">defer</span>&nbsp;<span class="keyword" id="5737775">func</span><span class="op" id="5737779">(</span><span class="op" id="5737780">)</span>&nbsp;<span class="op" id="5737782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5737786">recover</span><span class="op" id="5737793">(</span><span class="op" id="5737794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737797">}</span><span class="op" id="5737798">(</span><span class="op" id="5737799">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737803">t</span><span class="op" id="5737804">.</span><span class="ident" id="5737805">initFileMap</span><span class="op" id="5737816">(</span><span class="op" id="5737817">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737820">for</span>&nbsp;<span class="ident" id="5737824">file</span>&nbsp;<span class="op" id="5737829">:=</span>&nbsp;<span class="keyword" id="5737832">range</span>&nbsp;<span class="ident" id="5737838">t</span><span class="op" id="5737839">.</span><span class="ident" id="5737840">fileMap</span>&nbsp;<span class="op" id="5737848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737852">m</span><span class="op" id="5737853">[</span><span class="ident" id="5737854">file</span><span class="op" id="5737858">]</span>&nbsp;<span class="op" id="5737860">=</span>&nbsp;<span class="ident" id="5737862">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737867">}</span><br>
<span class="lineno"></span><span class="op" id="5737869">}</span>
</div>
</body>
</html>
