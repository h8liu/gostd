<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6721891">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6721947">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6722001">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6722052">package</span>&nbsp;<span class="ident" id="6722060">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722066">import</span>&nbsp;<span class="op" id="6722073">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6722076">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6722085">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6722098">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6722105">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6722116">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6722127">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6722137">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6722140">//&nbsp;Test&nbsp;values&nbsp;for&nbsp;the&nbsp;stream&nbsp;test.</span><br>
<span class="lineno"></span><span class="comment" id="6722176">//&nbsp;One&nbsp;of&nbsp;each&nbsp;JSON&nbsp;kind.</span><br>
<span class="lineno"></span><span class="keyword" id="6722202">var</span>&nbsp;<span class="ident" id="6722206">streamTest</span>&nbsp;<span class="op" id="6722217">=</span>&nbsp;<span class="op" id="6722219">[</span><span class="op" id="6722220">]</span><span class="keyword" id="6722221">interface</span><span class="op" id="6722230">{</span><span class="op" id="6722231">}</span><span class="op" id="6722232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6722235">0.1</span><span class="op" id="6722238">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6722241">&#34;hello&#34;</span><span class="op" id="6722248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722251">nil</span><span class="op" id="6722254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6722257">true</span><span class="op" id="6722261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6722264">false</span><span class="op" id="6722269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722272">[</span><span class="op" id="6722273">]</span><span class="keyword" id="6722274">interface</span><span class="op" id="6722283">{</span><span class="op" id="6722284">}</span><span class="op" id="6722285">{</span><span class="string" id="6722286">&#34;a&#34;</span><span class="op" id="6722289">,</span>&nbsp;<span class="string" id="6722291">&#34;b&#34;</span><span class="op" id="6722294">,</span>&nbsp;<span class="string" id="6722296">&#34;c&#34;</span><span class="op" id="6722299">}</span><span class="op" id="6722300">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722303">map</span><span class="op" id="6722306">[</span><span class="builtintype" id="6722307">string</span><span class="op" id="6722313">]</span><span class="keyword" id="6722314">interface</span><span class="op" id="6722323">{</span><span class="op" id="6722324">}</span><span class="op" id="6722325">{</span><span class="string" id="6722326">&#34;K&#34;</span><span class="op" id="6722331">:</span>&nbsp;<span class="string" id="6722333">&#34;Kelvin&#34;</span><span class="op" id="6722341">,</span>&nbsp;<span class="string" id="6722343">&#34;ß&#34;</span><span class="op" id="6722347">:</span>&nbsp;<span class="string" id="6722349">&#34;long&nbsp;s&#34;</span><span class="op" id="6722357">}</span><span class="op" id="6722358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6722361">3.14</span><span class="op" id="6722365">,</span>&nbsp;<span class="comment" id="6722367">//&nbsp;another&nbsp;value&nbsp;to&nbsp;make&nbsp;sure&nbsp;something&nbsp;can&nbsp;follow&nbsp;map</span><br>
<span class="lineno"></span><span class="op" id="6722422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722425">var</span>&nbsp;<span class="ident" id="6722429">streamEncoded</span>&nbsp;<span class="op" id="6722443">=</span>&nbsp;<span class="string" id="6722445">`0.1<br>
<span class="lineno">30</span>&#34;hello&#34;<br>
<span class="lineno"></span>null<br>
<span class="lineno"></span>true<br>
<span class="lineno"></span>false<br>
<span class="lineno"></span>[&#34;a&#34;,&#34;b&#34;,&#34;c&#34;]<br>
<span class="lineno">35</span>{&#34;ß&#34;:&#34;long&nbsp;s&#34;,&#34;K&#34;:&#34;Kelvin&#34;}<br>
<span class="lineno"></span>3.14<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722527">func</span>&nbsp;<span class="ident" id="6722532">TestEncoder</span><span class="op" id="6722543">(</span><span class="ident" id="6722544">t</span>&nbsp;<span class="op" id="6722546">*</span><span class="ident" id="6722547"><a href="/encoding/json/stream_test.go.html#6722127">testing</a></span><span class="op" id="6722554">.</span><span class="ident" id="6722555">T</span><span class="op" id="6722556">)</span>&nbsp;<span class="op" id="6722558">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722561">for</span>&nbsp;<span class="ident" id="6722565">i</span>&nbsp;<span class="op" id="6722567">:=</span>&nbsp;<span class="num" id="6722570">0</span><span class="op" id="6722571">;</span>&nbsp;<span class="ident" id="6722573"><a href="/encoding/json/stream_test.go.html#6722565">i</a></span>&nbsp;<span class="op" id="6722575">&lt;=</span>&nbsp;<span class="builtinfunc" id="6722578">len</span><span class="op" id="6722581">(</span><span class="ident" id="6722582"><a href="/encoding/json/stream_test.go.html#6722206">streamTest</a></span><span class="op" id="6722592">)</span><span class="op" id="6722593">;</span>&nbsp;<span class="ident" id="6722595"><a href="/encoding/json/stream_test.go.html#6722565">i</a></span><span class="op" id="6722596">++</span>&nbsp;<span class="op" id="6722599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722603">var</span>&nbsp;<span class="ident" id="6722607">buf</span>&nbsp;<span class="ident" id="6722611"><a href="/encoding/json/stream_test.go.html#6722076">bytes</a></span><span class="op" id="6722616">.</span><span class="ident" id="6722617">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722626">enc</span>&nbsp;<span class="op" id="6722630">:=</span>&nbsp;<span class="ident" id="6722633"><a href="/encoding/json/stream.go.html#4805785">NewEncoder</a></span><span class="op" id="6722643">(</span><span class="op" id="6722644">&amp;</span><span class="ident" id="6722645"><a href="/encoding/json/stream_test.go.html#6722607">buf</a></span><span class="op" id="6722648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722652">for</span>&nbsp;<span class="ident" id="6722656">j</span><span class="op" id="6722657">,</span>&nbsp;<span class="ident" id="6722659">v</span>&nbsp;<span class="op" id="6722661">:=</span>&nbsp;<span class="keyword" id="6722664">range</span>&nbsp;<span class="ident" id="6722670"><a href="/encoding/json/stream_test.go.html#6722206">streamTest</a></span><span class="op" id="6722680">[</span><span class="num" id="6722681">0</span><span class="op" id="6722682">:</span><span class="ident" id="6722683"><a href="/encoding/json/stream_test.go.html#6722565">i</a></span><span class="op" id="6722684">]</span>&nbsp;<span class="op" id="6722686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722691">if</span>&nbsp;<span class="ident" id="6722694">err</span>&nbsp;<span class="op" id="6722698">:=</span>&nbsp;<span class="ident" id="6722701"><a href="/encoding/json/stream_test.go.html#6722626">enc</a></span><span class="op" id="6722704">.</span><span class="ident" id="6722705">Encode</span><span class="op" id="6722711">(</span><span class="ident" id="6722712"><a href="/encoding/json/stream_test.go.html#6722659">v</a></span><span class="op" id="6722713">)</span><span class="op" id="6722714">;</span>&nbsp;<span class="ident" id="6722716"><a href="/encoding/json/stream_test.go.html#6722694">err</a></span>&nbsp;<span class="op" id="6722720">!=</span>&nbsp;<span class="ident" id="6722723">nil</span>&nbsp;<span class="op" id="6722727">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722733"><a href="/encoding/json/stream_test.go.html#6722544">t</a></span><span class="op" id="6722734">.</span><span class="ident" id="6722735">Fatalf</span><span class="op" id="6722741">(</span><span class="string" id="6722742">&#34;encode&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="6722758">,</span>&nbsp;<span class="ident" id="6722760"><a href="/encoding/json/stream_test.go.html#6722656">j</a></span><span class="op" id="6722761">,</span>&nbsp;<span class="ident" id="6722763"><a href="/encoding/json/stream_test.go.html#6722694">err</a></span><span class="op" id="6722766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722779">if</span>&nbsp;<span class="ident" id="6722782">have</span><span class="op" id="6722786">,</span>&nbsp;<span class="ident" id="6722788">want</span>&nbsp;<span class="op" id="6722793">:=</span>&nbsp;<span class="ident" id="6722796"><a href="/encoding/json/stream_test.go.html#6722607">buf</a></span><span class="op" id="6722799">.</span><span class="ident" id="6722800">String</span><span class="op" id="6722806">(</span><span class="op" id="6722807">)</span><span class="op" id="6722808">,</span>&nbsp;<span class="ident" id="6722810"><a href="/encoding/json/stream_test.go.html#6724273">nlines</a></span><span class="op" id="6722816">(</span><span class="ident" id="6722817"><a href="/encoding/json/stream_test.go.html#6722429">streamEncoded</a></span><span class="op" id="6722830">,</span>&nbsp;<span class="ident" id="6722832"><a href="/encoding/json/stream_test.go.html#6722565">i</a></span><span class="op" id="6722833">)</span><span class="op" id="6722834">;</span>&nbsp;<span class="ident" id="6722836"><a href="/encoding/json/stream_test.go.html#6722782">have</a></span>&nbsp;<span class="op" id="6722841">!=</span>&nbsp;<span class="ident" id="6722844"><a href="/encoding/json/stream_test.go.html#6722788">want</a></span>&nbsp;<span class="op" id="6722849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722854"><a href="/encoding/json/stream_test.go.html#6722544">t</a></span><span class="op" id="6722855">.</span><span class="ident" id="6722856">Errorf</span><span class="op" id="6722862">(</span><span class="string" id="6722863">&#34;encoding&nbsp;%d&nbsp;items:&nbsp;mismatch&#34;</span><span class="op" id="6722892">,</span>&nbsp;<span class="ident" id="6722894"><a href="/encoding/json/stream_test.go.html#6722565">i</a></span><span class="op" id="6722895">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722900"><a href="/encoding/json/scanner_test.go.html#6720248">diff</a></span><span class="op" id="6722904">(</span><span class="ident" id="6722905"><a href="/encoding/json/stream_test.go.html#6722544">t</a></span><span class="op" id="6722906">,</span>&nbsp;<span class="op" id="6722908">[</span><span class="op" id="6722909">]</span><span class="builtintype" id="6722910">byte</span><span class="op" id="6722914">(</span><span class="ident" id="6722915"><a href="/encoding/json/stream_test.go.html#6722782">have</a></span><span class="op" id="6722919">)</span><span class="op" id="6722920">,</span>&nbsp;<span class="op" id="6722922">[</span><span class="op" id="6722923">]</span><span class="builtintype" id="6722924">byte</span><span class="op" id="6722928">(</span><span class="ident" id="6722929"><a href="/encoding/json/stream_test.go.html#6722788">want</a></span><span class="op" id="6722933">)</span><span class="op" id="6722934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722939">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722950">}</span><br>
<span class="lineno"></span><span class="op" id="6722952">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6722955">func</span>&nbsp;<span class="ident" id="6722960">TestDecoder</span><span class="op" id="6722971">(</span><span class="ident" id="6722972">t</span>&nbsp;<span class="op" id="6722974">*</span><span class="ident" id="6722975"><a href="/encoding/json/stream_test.go.html#6722127">testing</a></span><span class="op" id="6722982">.</span><span class="ident" id="6722983">T</span><span class="op" id="6722984">)</span>&nbsp;<span class="op" id="6722986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722989">for</span>&nbsp;<span class="ident" id="6722993">i</span>&nbsp;<span class="op" id="6722995">:=</span>&nbsp;<span class="num" id="6722998">0</span><span class="op" id="6722999">;</span>&nbsp;<span class="ident" id="6723001"><a href="/encoding/json/stream_test.go.html#6722993">i</a></span>&nbsp;<span class="op" id="6723003">&lt;=</span>&nbsp;<span class="builtinfunc" id="6723006">len</span><span class="op" id="6723009">(</span><span class="ident" id="6723010"><a href="/encoding/json/stream_test.go.html#6722206">streamTest</a></span><span class="op" id="6723020">)</span><span class="op" id="6723021">;</span>&nbsp;<span class="ident" id="6723023"><a href="/encoding/json/stream_test.go.html#6722993">i</a></span><span class="op" id="6723024">++</span>&nbsp;<span class="op" id="6723027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6723031">//&nbsp;Use&nbsp;stream&nbsp;without&nbsp;newlines&nbsp;as&nbsp;input,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6723074">//&nbsp;just&nbsp;to&nbsp;stress&nbsp;the&nbsp;decoder&nbsp;even&nbsp;more.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6723117">//&nbsp;Our&nbsp;test&nbsp;input&nbsp;does&nbsp;not&nbsp;include&nbsp;back-to-back&nbsp;numbers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6723176">//&nbsp;Otherwise&nbsp;stripping&nbsp;the&nbsp;newlines&nbsp;would</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6723220">//&nbsp;merge&nbsp;two&nbsp;adjacent&nbsp;JSON&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723257">var</span>&nbsp;<span class="ident" id="6723261">buf</span>&nbsp;<span class="ident" id="6723265"><a href="/encoding/json/stream_test.go.html#6722076">bytes</a></span><span class="op" id="6723270">.</span><span class="ident" id="6723271">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723280">for</span>&nbsp;<span class="ident" id="6723284">_</span><span class="op" id="6723285">,</span>&nbsp;<span class="ident" id="6723287">c</span>&nbsp;<span class="op" id="6723289">:=</span>&nbsp;<span class="keyword" id="6723292">range</span>&nbsp;<span class="ident" id="6723298"><a href="/encoding/json/stream_test.go.html#6724273">nlines</a></span><span class="op" id="6723304">(</span><span class="ident" id="6723305"><a href="/encoding/json/stream_test.go.html#6722429">streamEncoded</a></span><span class="op" id="6723318">,</span>&nbsp;<span class="ident" id="6723320"><a href="/encoding/json/stream_test.go.html#6722993">i</a></span><span class="op" id="6723321">)</span>&nbsp;<span class="op" id="6723323">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723328">if</span>&nbsp;<span class="ident" id="6723331"><a href="/encoding/json/stream_test.go.html#6723287">c</a></span>&nbsp;<span class="op" id="6723333">!=</span>&nbsp;<span class="string" id="6723336">&#39;\n&#39;</span>&nbsp;<span class="op" id="6723341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723347"><a href="/encoding/json/stream_test.go.html#6723261">buf</a></span><span class="op" id="6723350">.</span><span class="ident" id="6723351">WriteRune</span><span class="op" id="6723360">(</span><span class="ident" id="6723361"><a href="/encoding/json/stream_test.go.html#6723287">c</a></span><span class="op" id="6723362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723375">out</span>&nbsp;<span class="op" id="6723379">:=</span>&nbsp;<span class="builtinfunc" id="6723382">make</span><span class="op" id="6723386">(</span><span class="op" id="6723387">[</span><span class="op" id="6723388">]</span><span class="keyword" id="6723389">interface</span><span class="op" id="6723398">{</span><span class="op" id="6723399">}</span><span class="op" id="6723400">,</span>&nbsp;<span class="ident" id="6723402"><a href="/encoding/json/stream_test.go.html#6722993">i</a></span><span class="op" id="6723403">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723407">dec</span>&nbsp;<span class="op" id="6723411">:=</span>&nbsp;<span class="ident" id="6723414"><a href="/encoding/json/stream.go.html#4802892">NewDecoder</a></span><span class="op" id="6723424">(</span><span class="op" id="6723425">&amp;</span><span class="ident" id="6723426"><a href="/encoding/json/stream_test.go.html#6723261">buf</a></span><span class="op" id="6723429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723433">for</span>&nbsp;<span class="ident" id="6723437">j</span>&nbsp;<span class="op" id="6723439">:=</span>&nbsp;<span class="keyword" id="6723442">range</span>&nbsp;<span class="ident" id="6723448"><a href="/encoding/json/stream_test.go.html#6723375">out</a></span>&nbsp;<span class="op" id="6723452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723457">if</span>&nbsp;<span class="ident" id="6723460">err</span>&nbsp;<span class="op" id="6723464">:=</span>&nbsp;<span class="ident" id="6723467"><a href="/encoding/json/stream_test.go.html#6723407">dec</a></span><span class="op" id="6723470">.</span><span class="ident" id="6723471">Decode</span><span class="op" id="6723477">(</span><span class="op" id="6723478">&amp;</span><span class="ident" id="6723479"><a href="/encoding/json/stream_test.go.html#6723375">out</a></span><span class="op" id="6723482">[</span><span class="ident" id="6723483"><a href="/encoding/json/stream_test.go.html#6723437">j</a></span><span class="op" id="6723484">]</span><span class="op" id="6723485">)</span><span class="op" id="6723486">;</span>&nbsp;<span class="ident" id="6723488"><a href="/encoding/json/stream_test.go.html#6723460">err</a></span>&nbsp;<span class="op" id="6723492">!=</span>&nbsp;<span class="ident" id="6723495">nil</span>&nbsp;<span class="op" id="6723499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723505"><a href="/encoding/json/stream_test.go.html#6722972">t</a></span><span class="op" id="6723506">.</span><span class="ident" id="6723507">Fatalf</span><span class="op" id="6723513">(</span><span class="string" id="6723514">&#34;decode&nbsp;#%d/%d:&nbsp;%v&#34;</span><span class="op" id="6723533">,</span>&nbsp;<span class="ident" id="6723535"><a href="/encoding/json/stream_test.go.html#6723437">j</a></span><span class="op" id="6723536">,</span>&nbsp;<span class="ident" id="6723538"><a href="/encoding/json/stream_test.go.html#6722993">i</a></span><span class="op" id="6723539">,</span>&nbsp;<span class="ident" id="6723541"><a href="/encoding/json/stream_test.go.html#6723460">err</a></span><span class="op" id="6723544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723549">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723557">if</span>&nbsp;<span class="op" id="6723560">!</span><span class="ident" id="6723561"><a href="/encoding/json/stream_test.go.html#6722105">reflect</a></span><span class="op" id="6723568">.</span><span class="ident" id="6723569">DeepEqual</span><span class="op" id="6723578">(</span><span class="ident" id="6723579"><a href="/encoding/json/stream_test.go.html#6723375">out</a></span><span class="op" id="6723582">,</span>&nbsp;<span class="ident" id="6723584"><a href="/encoding/json/stream_test.go.html#6722206">streamTest</a></span><span class="op" id="6723594">[</span><span class="num" id="6723595">0</span><span class="op" id="6723596">:</span><span class="ident" id="6723597"><a href="/encoding/json/stream_test.go.html#6722993">i</a></span><span class="op" id="6723598">]</span><span class="op" id="6723599">)</span>&nbsp;<span class="op" id="6723601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723606"><a href="/encoding/json/stream_test.go.html#6722972">t</a></span><span class="op" id="6723607">.</span><span class="ident" id="6723608">Errorf</span><span class="op" id="6723614">(</span><span class="string" id="6723615">&#34;decoding&nbsp;%d&nbsp;items:&nbsp;mismatch&#34;</span><span class="op" id="6723644">,</span>&nbsp;<span class="ident" id="6723646"><a href="/encoding/json/stream_test.go.html#6722993">i</a></span><span class="op" id="6723647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723652">for</span>&nbsp;<span class="ident" id="6723656">j</span>&nbsp;<span class="op" id="6723658">:=</span>&nbsp;<span class="keyword" id="6723661">range</span>&nbsp;<span class="ident" id="6723667"><a href="/encoding/json/stream_test.go.html#6723375">out</a></span>&nbsp;<span class="op" id="6723671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723677">if</span>&nbsp;<span class="op" id="6723680">!</span><span class="ident" id="6723681"><a href="/encoding/json/stream_test.go.html#6722105">reflect</a></span><span class="op" id="6723688">.</span><span class="ident" id="6723689">DeepEqual</span><span class="op" id="6723698">(</span><span class="ident" id="6723699"><a href="/encoding/json/stream_test.go.html#6723375">out</a></span><span class="op" id="6723702">[</span><span class="ident" id="6723703"><a href="/encoding/json/stream_test.go.html#6723656">j</a></span><span class="op" id="6723704">]</span><span class="op" id="6723705">,</span>&nbsp;<span class="ident" id="6723707"><a href="/encoding/json/stream_test.go.html#6722206">streamTest</a></span><span class="op" id="6723717">[</span><span class="ident" id="6723718"><a href="/encoding/json/stream_test.go.html#6723656">j</a></span><span class="op" id="6723719">]</span><span class="op" id="6723720">)</span>&nbsp;<span class="op" id="6723722">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723729"><a href="/encoding/json/stream_test.go.html#6722972">t</a></span><span class="op" id="6723730">.</span><span class="ident" id="6723731">Errorf</span><span class="op" id="6723737">(</span><span class="string" id="6723738">&#34;#%d:&nbsp;have&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6723760">,</span>&nbsp;<span class="ident" id="6723762"><a href="/encoding/json/stream_test.go.html#6723656">j</a></span><span class="op" id="6723763">,</span>&nbsp;<span class="ident" id="6723765"><a href="/encoding/json/stream_test.go.html#6723375">out</a></span><span class="op" id="6723768">[</span><span class="ident" id="6723769"><a href="/encoding/json/stream_test.go.html#6723656">j</a></span><span class="op" id="6723770">]</span><span class="op" id="6723771">,</span>&nbsp;<span class="ident" id="6723773"><a href="/encoding/json/stream_test.go.html#6722206">streamTest</a></span><span class="op" id="6723783">[</span><span class="ident" id="6723784"><a href="/encoding/json/stream_test.go.html#6723656">j</a></span><span class="op" id="6723785">]</span><span class="op" id="6723786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723802">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723810">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723813">}</span><br>
<span class="lineno"></span><span class="op" id="6723815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6723818">func</span>&nbsp;<span class="ident" id="6723823">TestDecoderBuffered</span><span class="op" id="6723842">(</span><span class="ident" id="6723843">t</span>&nbsp;<span class="op" id="6723845">*</span><span class="ident" id="6723846"><a href="/encoding/json/stream_test.go.html#6722127">testing</a></span><span class="op" id="6723853">.</span><span class="ident" id="6723854">T</span><span class="op" id="6723855">)</span>&nbsp;<span class="op" id="6723857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723860">r</span>&nbsp;<span class="op" id="6723862">:=</span>&nbsp;<span class="ident" id="6723865"><a href="/encoding/json/stream_test.go.html#6722116">strings</a></span><span class="op" id="6723872">.</span><span class="ident" id="6723873">NewReader</span><span class="op" id="6723882">(</span><span class="string" id="6723883">`{&#34;Name&#34;:&nbsp;&#34;Gopher&#34;}&nbsp;extra&nbsp;`</span><span class="op" id="6723910">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723913">var</span>&nbsp;<span class="ident" id="6723917">m</span>&nbsp;<span class="keyword" id="6723919">struct</span>&nbsp;<span class="op" id="6723926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723930">Name</span>&nbsp;<span class="builtintype" id="6723935">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723946">d</span>&nbsp;<span class="op" id="6723948">:=</span>&nbsp;<span class="ident" id="6723951"><a href="/encoding/json/stream.go.html#4802892">NewDecoder</a></span><span class="op" id="6723961">(</span><span class="ident" id="6723962"><a href="/encoding/json/stream_test.go.html#6723860">r</a></span><span class="op" id="6723963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6723966">err</span>&nbsp;<span class="op" id="6723970">:=</span>&nbsp;<span class="ident" id="6723973"><a href="/encoding/json/stream_test.go.html#6723946">d</a></span><span class="op" id="6723974">.</span><span class="ident" id="6723975">Decode</span><span class="op" id="6723981">(</span><span class="op" id="6723982">&amp;</span><span class="ident" id="6723983"><a href="/encoding/json/stream_test.go.html#6723917">m</a></span><span class="op" id="6723984">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6723987">if</span>&nbsp;<span class="ident" id="6723990"><a href="/encoding/json/stream_test.go.html#6723966">err</a></span>&nbsp;<span class="op" id="6723994">!=</span>&nbsp;<span class="ident" id="6723997">nil</span>&nbsp;<span class="op" id="6724001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724005"><a href="/encoding/json/stream_test.go.html#6723843">t</a></span><span class="op" id="6724006">.</span><span class="ident" id="6724007">Fatal</span><span class="op" id="6724012">(</span><span class="ident" id="6724013"><a href="/encoding/json/stream_test.go.html#6723966">err</a></span><span class="op" id="6724016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724022">if</span>&nbsp;<span class="ident" id="6724025"><a href="/encoding/json/stream_test.go.html#6723917">m</a></span><span class="op" id="6724026">.</span><span class="ident" id="6724027">Name</span>&nbsp;<span class="op" id="6724032">!=</span>&nbsp;<span class="string" id="6724035">&#34;Gopher&#34;</span>&nbsp;<span class="op" id="6724044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724048"><a href="/encoding/json/stream_test.go.html#6723843">t</a></span><span class="op" id="6724049">.</span><span class="ident" id="6724050">Errorf</span><span class="op" id="6724056">(</span><span class="string" id="6724057">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;Gopher&#34;</span><span class="op" id="6724081">,</span>&nbsp;<span class="ident" id="6724083"><a href="/encoding/json/stream_test.go.html#6723917">m</a></span><span class="op" id="6724084">.</span><span class="ident" id="6724085">Name</span><span class="op" id="6724089">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724095">rest</span><span class="op" id="6724099">,</span>&nbsp;<span class="ident" id="6724101"><a href="/encoding/json/stream_test.go.html#6723966">err</a></span>&nbsp;<span class="op" id="6724105">:=</span>&nbsp;<span class="ident" id="6724108"><a href="/encoding/json/stream_test.go.html#6722085">ioutil</a></span><span class="op" id="6724114">.</span><span class="ident" id="6724115">ReadAll</span><span class="op" id="6724122">(</span><span class="ident" id="6724123"><a href="/encoding/json/stream_test.go.html#6723946">d</a></span><span class="op" id="6724124">.</span><span class="ident" id="6724125">Buffered</span><span class="op" id="6724133">(</span><span class="op" id="6724134">)</span><span class="op" id="6724135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724138">if</span>&nbsp;<span class="ident" id="6724141"><a href="/encoding/json/stream_test.go.html#6723966">err</a></span>&nbsp;<span class="op" id="6724145">!=</span>&nbsp;<span class="ident" id="6724148">nil</span>&nbsp;<span class="op" id="6724152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724156"><a href="/encoding/json/stream_test.go.html#6723843">t</a></span><span class="op" id="6724157">.</span><span class="ident" id="6724158">Fatal</span><span class="op" id="6724163">(</span><span class="ident" id="6724164"><a href="/encoding/json/stream_test.go.html#6723966">err</a></span><span class="op" id="6724167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724170">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724173">if</span>&nbsp;<span class="ident" id="6724176">g</span><span class="op" id="6724177">,</span>&nbsp;<span class="ident" id="6724179">w</span>&nbsp;<span class="op" id="6724181">:=</span>&nbsp;<span class="builtintype" id="6724184">string</span><span class="op" id="6724190">(</span><span class="ident" id="6724191"><a href="/encoding/json/stream_test.go.html#6724095">rest</a></span><span class="op" id="6724195">)</span><span class="op" id="6724196">,</span>&nbsp;<span class="string" id="6724198">&#34;&nbsp;extra&nbsp;&#34;</span><span class="op" id="6724207">;</span>&nbsp;<span class="ident" id="6724209"><a href="/encoding/json/stream_test.go.html#6724176">g</a></span>&nbsp;<span class="op" id="6724211">!=</span>&nbsp;<span class="ident" id="6724214"><a href="/encoding/json/stream_test.go.html#6724179">w</a></span>&nbsp;<span class="op" id="6724216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724220"><a href="/encoding/json/stream_test.go.html#6723843">t</a></span><span class="op" id="6724221">.</span><span class="ident" id="6724222">Errorf</span><span class="op" id="6724228">(</span><span class="string" id="6724229">&#34;Remaining&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6724254">,</span>&nbsp;<span class="ident" id="6724256"><a href="/encoding/json/stream_test.go.html#6724176">g</a></span><span class="op" id="6724257">,</span>&nbsp;<span class="ident" id="6724259"><a href="/encoding/json/stream_test.go.html#6724179">w</a></span><span class="op" id="6724260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724263">}</span><br>
<span class="lineno"></span><span class="op" id="6724265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="6724268">func</span>&nbsp;<span class="ident" id="6724273">nlines</span><span class="op" id="6724279">(</span><span class="ident" id="6724280">s</span>&nbsp;<span class="builtintype" id="6724282">string</span><span class="op" id="6724288">,</span>&nbsp;<span class="ident" id="6724290">n</span>&nbsp;<span class="builtintype" id="6724292">int</span><span class="op" id="6724295">)</span>&nbsp;<span class="builtintype" id="6724297">string</span>&nbsp;<span class="op" id="6724304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724307">if</span>&nbsp;<span class="ident" id="6724310"><a href="/encoding/json/stream_test.go.html#6724290">n</a></span>&nbsp;<span class="op" id="6724312">&lt;=</span>&nbsp;<span class="num" id="6724315">0</span>&nbsp;<span class="op" id="6724317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724321">return</span>&nbsp;<span class="string" id="6724328">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724335">for</span>&nbsp;<span class="ident" id="6724339">i</span><span class="op" id="6724340">,</span>&nbsp;<span class="ident" id="6724342">c</span>&nbsp;<span class="op" id="6724344">:=</span>&nbsp;<span class="keyword" id="6724347">range</span>&nbsp;<span class="ident" id="6724353"><a href="/encoding/json/stream_test.go.html#6724280">s</a></span>&nbsp;<span class="op" id="6724355">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724359">if</span>&nbsp;<span class="ident" id="6724362"><a href="/encoding/json/stream_test.go.html#6724342">c</a></span>&nbsp;<span class="op" id="6724364">==</span>&nbsp;<span class="string" id="6724367">&#39;\n&#39;</span>&nbsp;<span class="op" id="6724372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724377">if</span>&nbsp;<span class="ident" id="6724380"><a href="/encoding/json/stream_test.go.html#6724290">n</a></span><span class="op" id="6724381">--</span><span class="op" id="6724383">;</span>&nbsp;<span class="ident" id="6724385"><a href="/encoding/json/stream_test.go.html#6724290">n</a></span>&nbsp;<span class="op" id="6724387">==</span>&nbsp;<span class="num" id="6724390">0</span>&nbsp;<span class="op" id="6724392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724398">return</span>&nbsp;<span class="ident" id="6724405"><a href="/encoding/json/stream_test.go.html#6724280">s</a></span><span class="op" id="6724406">[</span><span class="num" id="6724407">0</span>&nbsp;<span class="op" id="6724409">:</span>&nbsp;<span class="ident" id="6724411"><a href="/encoding/json/stream_test.go.html#6724339">i</a></span><span class="op" id="6724412">+</span><span class="num" id="6724413">1</span><span class="op" id="6724414">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724423">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724429">return</span>&nbsp;<span class="ident" id="6724436"><a href="/encoding/json/stream_test.go.html#6724280">s</a></span><br>
<span class="lineno"></span><span class="op" id="6724438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6724441">func</span>&nbsp;<span class="ident" id="6724446">TestRawMessage</span><span class="op" id="6724460">(</span><span class="ident" id="6724461">t</span>&nbsp;<span class="op" id="6724463">*</span><span class="ident" id="6724464"><a href="/encoding/json/stream_test.go.html#6722127">testing</a></span><span class="op" id="6724471">.</span><span class="ident" id="6724472">T</span><span class="op" id="6724473">)</span>&nbsp;<span class="op" id="6724475">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6724478">//&nbsp;TODO(rsc):&nbsp;Should&nbsp;not&nbsp;need&nbsp;the&nbsp;*&nbsp;in&nbsp;*RawMessage</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724530">var</span>&nbsp;<span class="ident" id="6724534">data</span>&nbsp;<span class="keyword" id="6724539">struct</span>&nbsp;<span class="op" id="6724546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724550">X</span>&nbsp;&nbsp;<span class="builtintype" id="6724553">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724563">Id</span>&nbsp;<span class="op" id="6724566">*</span><span class="ident" id="6724567"><a href="/encoding/json/stream.go.html#4806744">RawMessage</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724580">Y</span>&nbsp;&nbsp;<span class="builtintype" id="6724583">float32</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724595">const</span>&nbsp;<span class="ident" id="6724601">raw</span>&nbsp;<span class="op" id="6724605">=</span>&nbsp;<span class="string" id="6724607">`[&#34;\u0056&#34;,null]`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724626">const</span>&nbsp;<span class="ident" id="6724632">msg</span>&nbsp;<span class="op" id="6724636">=</span>&nbsp;<span class="string" id="6724638">`{&#34;X&#34;:0.1,&#34;Id&#34;:[&#34;\u0056&#34;,null],&#34;Y&#34;:0.2}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724680">err</span>&nbsp;<span class="op" id="6724684">:=</span>&nbsp;<span class="ident" id="6724687"><a href="/encoding/json/decode.go.html#4723926">Unmarshal</a></span><span class="op" id="6724696">(</span><span class="op" id="6724697">[</span><span class="op" id="6724698">]</span><span class="builtintype" id="6724699">byte</span><span class="op" id="6724703">(</span><span class="ident" id="6724704"><a href="/encoding/json/stream_test.go.html#6724632">msg</a></span><span class="op" id="6724707">)</span><span class="op" id="6724708">,</span>&nbsp;<span class="op" id="6724710">&amp;</span><span class="ident" id="6724711"><a href="/encoding/json/stream_test.go.html#6724534">data</a></span><span class="op" id="6724715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724718">if</span>&nbsp;<span class="ident" id="6724721"><a href="/encoding/json/stream_test.go.html#6724680">err</a></span>&nbsp;<span class="op" id="6724725">!=</span>&nbsp;<span class="ident" id="6724728">nil</span>&nbsp;<span class="op" id="6724732">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724736"><a href="/encoding/json/stream_test.go.html#6724461">t</a></span><span class="op" id="6724737">.</span><span class="ident" id="6724738">Fatalf</span><span class="op" id="6724744">(</span><span class="string" id="6724745">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op" id="6724760">,</span>&nbsp;<span class="ident" id="6724762"><a href="/encoding/json/stream_test.go.html#6724680">err</a></span><span class="op" id="6724765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724771">if</span>&nbsp;<span class="builtintype" id="6724774">string</span><span class="op" id="6724780">(</span><span class="op" id="6724781">[</span><span class="op" id="6724782">]</span><span class="builtintype" id="6724783">byte</span><span class="op" id="6724787">(</span><span class="op" id="6724788">*</span><span class="ident" id="6724789"><a href="/encoding/json/stream_test.go.html#6724534">data</a></span><span class="op" id="6724793">.</span><span class="ident" id="6724794">Id</span><span class="op" id="6724796">)</span><span class="op" id="6724797">)</span>&nbsp;<span class="op" id="6724799">!=</span>&nbsp;<span class="ident" id="6724802"><a href="/encoding/json/stream_test.go.html#6724601">raw</a></span>&nbsp;<span class="op" id="6724806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724810"><a href="/encoding/json/stream_test.go.html#6724461">t</a></span><span class="op" id="6724811">.</span><span class="ident" id="6724812">Fatalf</span><span class="op" id="6724818">(</span><span class="string" id="6724819">&#34;Raw&nbsp;mismatch:&nbsp;have&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6724852">,</span>&nbsp;<span class="op" id="6724854">[</span><span class="op" id="6724855">]</span><span class="builtintype" id="6724856">byte</span><span class="op" id="6724860">(</span><span class="op" id="6724861">*</span><span class="ident" id="6724862"><a href="/encoding/json/stream_test.go.html#6724534">data</a></span><span class="op" id="6724866">.</span><span class="ident" id="6724867">Id</span><span class="op" id="6724869">)</span><span class="op" id="6724870">,</span>&nbsp;<span class="ident" id="6724872"><a href="/encoding/json/stream_test.go.html#6724601">raw</a></span><span class="op" id="6724875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724878">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724881">b</span><span class="op" id="6724882">,</span>&nbsp;<span class="ident" id="6724884"><a href="/encoding/json/stream_test.go.html#6724680">err</a></span>&nbsp;<span class="op" id="6724888">:=</span>&nbsp;<span class="ident" id="6724891"><a href="/encoding/json/encode.go.html#4753477">Marshal</a></span><span class="op" id="6724898">(</span><span class="op" id="6724899">&amp;</span><span class="ident" id="6724900"><a href="/encoding/json/stream_test.go.html#6724534">data</a></span><span class="op" id="6724904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724907">if</span>&nbsp;<span class="ident" id="6724910"><a href="/encoding/json/stream_test.go.html#6724680">err</a></span>&nbsp;<span class="op" id="6724914">!=</span>&nbsp;<span class="ident" id="6724917">nil</span>&nbsp;<span class="op" id="6724921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724925"><a href="/encoding/json/stream_test.go.html#6724461">t</a></span><span class="op" id="6724926">.</span><span class="ident" id="6724927">Fatalf</span><span class="op" id="6724933">(</span><span class="string" id="6724934">&#34;Marshal:&nbsp;%v&#34;</span><span class="op" id="6724947">,</span>&nbsp;<span class="ident" id="6724949"><a href="/encoding/json/stream_test.go.html#6724680">err</a></span><span class="op" id="6724952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724958">if</span>&nbsp;<span class="builtintype" id="6724961">string</span><span class="op" id="6724967">(</span><span class="ident" id="6724968"><a href="/encoding/json/stream_test.go.html#6724881">b</a></span><span class="op" id="6724969">)</span>&nbsp;<span class="op" id="6724971">!=</span>&nbsp;<span class="ident" id="6724974"><a href="/encoding/json/stream_test.go.html#6724632">msg</a></span>&nbsp;<span class="op" id="6724978">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724982"><a href="/encoding/json/stream_test.go.html#6724461">t</a></span><span class="op" id="6724983">.</span><span class="ident" id="6724984">Fatalf</span><span class="op" id="6724990">(</span><span class="string" id="6724991">&#34;Marshal:&nbsp;have&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6725019">,</span>&nbsp;<span class="ident" id="6725021"><a href="/encoding/json/stream_test.go.html#6724881">b</a></span><span class="op" id="6725022">,</span>&nbsp;<span class="ident" id="6725024"><a href="/encoding/json/stream_test.go.html#6724632">msg</a></span><span class="op" id="6725027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725030">}</span><br>
<span class="lineno"></span><span class="op" id="6725032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6725035">func</span>&nbsp;<span class="ident" id="6725040">TestNullRawMessage</span><span class="op" id="6725058">(</span><span class="ident" id="6725059">t</span>&nbsp;<span class="op" id="6725061">*</span><span class="ident" id="6725062"><a href="/encoding/json/stream_test.go.html#6722127">testing</a></span><span class="op" id="6725069">.</span><span class="ident" id="6725070">T</span><span class="op" id="6725071">)</span>&nbsp;<span class="op" id="6725073">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6725076">//&nbsp;TODO(rsc):&nbsp;Should&nbsp;not&nbsp;need&nbsp;the&nbsp;*&nbsp;in&nbsp;*RawMessage</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725128">var</span>&nbsp;<span class="ident" id="6725132">data</span>&nbsp;<span class="keyword" id="6725137">struct</span>&nbsp;<span class="op" id="6725144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725148">X</span>&nbsp;&nbsp;<span class="builtintype" id="6725151">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725161">Id</span>&nbsp;<span class="op" id="6725164">*</span><span class="ident" id="6725165"><a href="/encoding/json/stream.go.html#4806744">RawMessage</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725178">Y</span>&nbsp;&nbsp;<span class="builtintype" id="6725181">float32</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725193"><a href="/encoding/json/stream_test.go.html#6725132">data</a></span><span class="op" id="6725197">.</span><span class="ident" id="6725198">Id</span>&nbsp;<span class="op" id="6725201">=</span>&nbsp;<span class="builtinfunc" id="6725203">new</span><span class="op" id="6725206">(</span><span class="ident" id="6725207"><a href="/encoding/json/stream.go.html#4806744">RawMessage</a></span><span class="op" id="6725217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725220">const</span>&nbsp;<span class="ident" id="6725226">msg</span>&nbsp;<span class="op" id="6725230">=</span>&nbsp;<span class="string" id="6725232">`{&#34;X&#34;:0.1,&#34;Id&#34;:null,&#34;Y&#34;:0.2}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725263">err</span>&nbsp;<span class="op" id="6725267">:=</span>&nbsp;<span class="ident" id="6725270"><a href="/encoding/json/decode.go.html#4723926">Unmarshal</a></span><span class="op" id="6725279">(</span><span class="op" id="6725280">[</span><span class="op" id="6725281">]</span><span class="builtintype" id="6725282">byte</span><span class="op" id="6725286">(</span><span class="ident" id="6725287"><a href="/encoding/json/stream_test.go.html#6725226">msg</a></span><span class="op" id="6725290">)</span><span class="op" id="6725291">,</span>&nbsp;<span class="op" id="6725293">&amp;</span><span class="ident" id="6725294"><a href="/encoding/json/stream_test.go.html#6725132">data</a></span><span class="op" id="6725298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725301">if</span>&nbsp;<span class="ident" id="6725304"><a href="/encoding/json/stream_test.go.html#6725263">err</a></span>&nbsp;<span class="op" id="6725308">!=</span>&nbsp;<span class="ident" id="6725311">nil</span>&nbsp;<span class="op" id="6725315">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725319"><a href="/encoding/json/stream_test.go.html#6725059">t</a></span><span class="op" id="6725320">.</span><span class="ident" id="6725321">Fatalf</span><span class="op" id="6725327">(</span><span class="string" id="6725328">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op" id="6725343">,</span>&nbsp;<span class="ident" id="6725345"><a href="/encoding/json/stream_test.go.html#6725263">err</a></span><span class="op" id="6725348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725354">if</span>&nbsp;<span class="ident" id="6725357"><a href="/encoding/json/stream_test.go.html#6725132">data</a></span><span class="op" id="6725361">.</span><span class="ident" id="6725362">Id</span>&nbsp;<span class="op" id="6725365">!=</span>&nbsp;<span class="ident" id="6725368">nil</span>&nbsp;<span class="op" id="6725372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725376"><a href="/encoding/json/stream_test.go.html#6725059">t</a></span><span class="op" id="6725377">.</span><span class="ident" id="6725378">Fatalf</span><span class="op" id="6725384">(</span><span class="string" id="6725385">&#34;Raw&nbsp;mismatch:&nbsp;have&nbsp;non-nil,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="6725423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725426">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725429">b</span><span class="op" id="6725430">,</span>&nbsp;<span class="ident" id="6725432"><a href="/encoding/json/stream_test.go.html#6725263">err</a></span>&nbsp;<span class="op" id="6725436">:=</span>&nbsp;<span class="ident" id="6725439"><a href="/encoding/json/encode.go.html#4753477">Marshal</a></span><span class="op" id="6725446">(</span><span class="op" id="6725447">&amp;</span><span class="ident" id="6725448"><a href="/encoding/json/stream_test.go.html#6725132">data</a></span><span class="op" id="6725452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725455">if</span>&nbsp;<span class="ident" id="6725458"><a href="/encoding/json/stream_test.go.html#6725263">err</a></span>&nbsp;<span class="op" id="6725462">!=</span>&nbsp;<span class="ident" id="6725465">nil</span>&nbsp;<span class="op" id="6725469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725473"><a href="/encoding/json/stream_test.go.html#6725059">t</a></span><span class="op" id="6725474">.</span><span class="ident" id="6725475">Fatalf</span><span class="op" id="6725481">(</span><span class="string" id="6725482">&#34;Marshal:&nbsp;%v&#34;</span><span class="op" id="6725495">,</span>&nbsp;<span class="ident" id="6725497"><a href="/encoding/json/stream_test.go.html#6725263">err</a></span><span class="op" id="6725500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725506">if</span>&nbsp;<span class="builtintype" id="6725509">string</span><span class="op" id="6725515">(</span><span class="ident" id="6725516"><a href="/encoding/json/stream_test.go.html#6725429">b</a></span><span class="op" id="6725517">)</span>&nbsp;<span class="op" id="6725519">!=</span>&nbsp;<span class="ident" id="6725522"><a href="/encoding/json/stream_test.go.html#6725226">msg</a></span>&nbsp;<span class="op" id="6725526">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725530"><a href="/encoding/json/stream_test.go.html#6725059">t</a></span><span class="op" id="6725531">.</span><span class="ident" id="6725532">Fatalf</span><span class="op" id="6725538">(</span><span class="string" id="6725539">&#34;Marshal:&nbsp;have&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6725567">,</span>&nbsp;<span class="ident" id="6725569"><a href="/encoding/json/stream_test.go.html#6725429">b</a></span><span class="op" id="6725570">,</span>&nbsp;<span class="ident" id="6725572"><a href="/encoding/json/stream_test.go.html#6725226">msg</a></span><span class="op" id="6725575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725578">}</span><br>
<span class="lineno"></span><span class="op" id="6725580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6725583">var</span>&nbsp;<span class="ident" id="6725587">blockingTests</span>&nbsp;<span class="op" id="6725601">=</span>&nbsp;<span class="op" id="6725603">[</span><span class="op" id="6725604">]</span><span class="builtintype" id="6725605">string</span><span class="op" id="6725611">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6725614">`{&#34;x&#34;:&nbsp;1}`</span><span class="op" id="6725624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6725627">`[1,&nbsp;2,&nbsp;3]`</span><span class="op" id="6725638">,</span><br>
<span class="lineno"></span><span class="op" id="6725640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6725643">func</span>&nbsp;<span class="ident" id="6725648">TestBlocking</span><span class="op" id="6725660">(</span><span class="ident" id="6725661">t</span>&nbsp;<span class="op" id="6725663">*</span><span class="ident" id="6725664"><a href="/encoding/json/stream_test.go.html#6722127">testing</a></span><span class="op" id="6725671">.</span><span class="ident" id="6725672">T</span><span class="op" id="6725673">)</span>&nbsp;<span class="op" id="6725675">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725678">for</span>&nbsp;<span class="ident" id="6725682">_</span><span class="op" id="6725683">,</span>&nbsp;<span class="ident" id="6725685">enc</span>&nbsp;<span class="op" id="6725689">:=</span>&nbsp;<span class="keyword" id="6725692">range</span>&nbsp;<span class="ident" id="6725698"><a href="/encoding/json/stream_test.go.html#6725587">blockingTests</a></span>&nbsp;<span class="op" id="6725712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725716">r</span><span class="op" id="6725717">,</span>&nbsp;<span class="ident" id="6725719">w</span>&nbsp;<span class="op" id="6725721">:=</span>&nbsp;<span class="ident" id="6725724"><a href="/encoding/json/stream_test.go.html#6722098">net</a></span><span class="op" id="6725727">.</span><span class="ident" id="6725728">Pipe</span><span class="op" id="6725732">(</span><span class="op" id="6725733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725737">go</span>&nbsp;<span class="ident" id="6725740"><a href="/encoding/json/stream_test.go.html#6725719">w</a></span><span class="op" id="6725741">.</span><span class="ident" id="6725742">Write</span><span class="op" id="6725747">(</span><span class="op" id="6725748">[</span><span class="op" id="6725749">]</span><span class="builtintype" id="6725750">byte</span><span class="op" id="6725754">(</span><span class="ident" id="6725755"><a href="/encoding/json/stream_test.go.html#6725685">enc</a></span><span class="op" id="6725758">)</span><span class="op" id="6725759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725763">var</span>&nbsp;<span class="ident" id="6725767">val</span>&nbsp;<span class="keyword" id="6725771">interface</span><span class="op" id="6725780">{</span><span class="op" id="6725781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6725786">//&nbsp;If&nbsp;Decode&nbsp;reads&nbsp;beyond&nbsp;what&nbsp;w.Write&nbsp;writes&nbsp;above,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6725841">//&nbsp;it&nbsp;will&nbsp;block,&nbsp;and&nbsp;the&nbsp;test&nbsp;will&nbsp;deadlock.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725889">if</span>&nbsp;<span class="ident" id="6725892">err</span>&nbsp;<span class="op" id="6725896">:=</span>&nbsp;<span class="ident" id="6725899"><a href="/encoding/json/stream.go.html#4802892">NewDecoder</a></span><span class="op" id="6725909">(</span><span class="ident" id="6725910"><a href="/encoding/json/stream_test.go.html#6725716">r</a></span><span class="op" id="6725911">)</span><span class="op" id="6725912">.</span><span class="ident" id="6725913">Decode</span><span class="op" id="6725919">(</span><span class="op" id="6725920">&amp;</span><span class="ident" id="6725921"><a href="/encoding/json/stream_test.go.html#6725767">val</a></span><span class="op" id="6725924">)</span><span class="op" id="6725925">;</span>&nbsp;<span class="ident" id="6725927"><a href="/encoding/json/stream_test.go.html#6725892">err</a></span>&nbsp;<span class="op" id="6725931">!=</span>&nbsp;<span class="ident" id="6725934">nil</span>&nbsp;<span class="op" id="6725938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725943"><a href="/encoding/json/stream_test.go.html#6725661">t</a></span><span class="op" id="6725944">.</span><span class="ident" id="6725945">Errorf</span><span class="op" id="6725951">(</span><span class="string" id="6725952">&#34;decoding&nbsp;%s:&nbsp;%v&#34;</span><span class="op" id="6725969">,</span>&nbsp;<span class="ident" id="6725971"><a href="/encoding/json/stream_test.go.html#6725685">enc</a></span><span class="op" id="6725974">,</span>&nbsp;<span class="ident" id="6725976"><a href="/encoding/json/stream_test.go.html#6725892">err</a></span><span class="op" id="6725979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725983">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725987"><a href="/encoding/json/stream_test.go.html#6725716">r</a></span><span class="op" id="6725988">.</span><span class="ident" id="6725989">Close</span><span class="op" id="6725994">(</span><span class="op" id="6725995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725999"><a href="/encoding/json/stream_test.go.html#6725719">w</a></span><span class="op" id="6726000">.</span><span class="ident" id="6726001">Close</span><span class="op" id="6726006">(</span><span class="op" id="6726007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726010">}</span><br>
<span class="lineno"></span><span class="op" id="6726012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="6726015">func</span>&nbsp;<span class="ident" id="6726020">BenchmarkEncoderEncode</span><span class="op" id="6726042">(</span><span class="ident" id="6726043">b</span>&nbsp;<span class="op" id="6726045">*</span><span class="ident" id="6726046"><a href="/encoding/json/stream_test.go.html#6722127">testing</a></span><span class="op" id="6726053">.</span><span class="ident" id="6726054">B</span><span class="op" id="6726055">)</span>&nbsp;<span class="op" id="6726057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726060"><a href="/encoding/json/stream_test.go.html#6726043">b</a></span><span class="op" id="6726061">.</span><span class="ident" id="6726062">ReportAllocs</span><span class="op" id="6726074">(</span><span class="op" id="6726075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726078">type</span>&nbsp;<span class="ident" id="6726083">T</span>&nbsp;<span class="keyword" id="6726085">struct</span>&nbsp;<span class="op" id="6726092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726096">X</span><span class="op" id="6726097">,</span>&nbsp;<span class="ident" id="6726099">Y</span>&nbsp;<span class="builtintype" id="6726101">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726109">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726112">v</span>&nbsp;<span class="op" id="6726114">:=</span>&nbsp;<span class="op" id="6726117">&amp;</span><span class="ident" id="6726118"><a href="/encoding/json/stream_test.go.html#6726083">T</a></span><span class="op" id="6726119">{</span><span class="string" id="6726120">&#34;foo&#34;</span><span class="op" id="6726125">,</span>&nbsp;<span class="string" id="6726127">&#34;bar&#34;</span><span class="op" id="6726132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726135">for</span>&nbsp;<span class="ident" id="6726139">i</span>&nbsp;<span class="op" id="6726141">:=</span>&nbsp;<span class="num" id="6726144">0</span><span class="op" id="6726145">;</span>&nbsp;<span class="ident" id="6726147"><a href="/encoding/json/stream_test.go.html#6726139">i</a></span>&nbsp;<span class="op" id="6726149">&lt;</span>&nbsp;<span class="ident" id="6726151"><a href="/encoding/json/stream_test.go.html#6726043">b</a></span><span class="op" id="6726152">.</span><span class="ident" id="6726153">N</span><span class="op" id="6726154">;</span>&nbsp;<span class="ident" id="6726156"><a href="/encoding/json/stream_test.go.html#6726139">i</a></span><span class="op" id="6726157">++</span>&nbsp;<span class="op" id="6726160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726164">if</span>&nbsp;<span class="ident" id="6726167">err</span>&nbsp;<span class="op" id="6726171">:=</span>&nbsp;<span class="ident" id="6726174"><a href="/encoding/json/stream.go.html#4805785">NewEncoder</a></span><span class="op" id="6726184">(</span><span class="ident" id="6726185"><a href="/encoding/json/stream_test.go.html#6722085">ioutil</a></span><span class="op" id="6726191">.</span><span class="ident" id="6726192">Discard</span><span class="op" id="6726199">)</span><span class="op" id="6726200">.</span><span class="ident" id="6726201">Encode</span><span class="op" id="6726207">(</span><span class="ident" id="6726208"><a href="/encoding/json/stream_test.go.html#6726112">v</a></span><span class="op" id="6726209">)</span><span class="op" id="6726210">;</span>&nbsp;<span class="ident" id="6726212"><a href="/encoding/json/stream_test.go.html#6726167">err</a></span>&nbsp;<span class="op" id="6726216">!=</span>&nbsp;<span class="ident" id="6726219">nil</span>&nbsp;<span class="op" id="6726223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726228"><a href="/encoding/json/stream_test.go.html#6726043">b</a></span><span class="op" id="6726229">.</span><span class="ident" id="6726230">Fatal</span><span class="op" id="6726235">(</span><span class="ident" id="6726236"><a href="/encoding/json/stream_test.go.html#6726167">err</a></span><span class="op" id="6726239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726243">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726246">}</span><br>
<span class="lineno"></span><span class="op" id="6726248">}</span>
</div>
</body>
</html>
