<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5322172">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5322227">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5322281">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5322332">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="5322407">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5322438">package</span>&nbsp;<span class="ident" id="5322446">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5322452">import</span>&nbsp;<span class="op" id="5322459">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322462">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322471">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322483">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322502">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322512">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322519">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322530">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322541">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322552">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322563">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322580">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5322595">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5322598">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="5322662">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5322695">//</span><br>
<span class="lineno"></span><span class="comment" id="5322698">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5322750">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="5322819">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="5322859">//</span><br>
<span class="lineno"></span><span class="comment" id="5322862">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5322935">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="5323006">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="5323076">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="5323150">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="5323195">//</span><br>
<span class="lineno"></span><span class="comment" id="5323198">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="5323268">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="5323347">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="5323421">//</span><br>
<span class="lineno"></span><span class="comment" id="5323424">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="5323470">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="5323527">//</span><br>
<span class="lineno"></span><span class="comment" id="5323530">//&nbsp;&nbsp;&nbsp;&nbspbool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="5323557">//&nbsp;&nbsp;&nbsp;&nbspfloat64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="5323586">//&nbsp;&nbsp;&nbsp;&nbspstring,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="5323614">//&nbsp;&nbsp;&nbsp;&nbsp[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="5323648">//&nbsp;&nbsp;&nbsp;&nbspmap[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="5323692">//&nbsp;&nbsp;&nbsp;&nbspnil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="5323713">//</span><br>
<span class="lineno"></span><span class="comment" id="5323716">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="5323779">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5323839">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="5323907">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="5323971">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5324032">//</span><br>
<span class="lineno"></span><span class="comment" id="5324035">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="5324111">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="5324190">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="5324272">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5324311">//</span><br>
<span class="lineno"></span><span class="comment" id="5324314">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5324368">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5324431">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="5324488">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="5324509">//</span><br>
<span class="lineno"></span><span class="keyword" id="5324512">func</span>&nbsp;<span class="ident" id="5324517">Unmarshal</span><span class="op" id="5324526">(</span><span class="ident" id="5324527">data</span>&nbsp;<span class="op" id="5324532">[</span><span class="op" id="5324533">]</span><span class="builtintype" id="5324534">byte</span><span class="op" id="5324538">,</span>&nbsp;<span class="ident" id="5324540">v</span>&nbsp;<span class="keyword" id="5324542">interface</span><span class="op" id="5324551">{</span><span class="op" id="5324552">}</span><span class="op" id="5324553">)</span>&nbsp;<span class="builtintype" id="5324555">error</span>&nbsp;<span class="op" id="5324561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5324564">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5324595">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5324640">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324684">var</span>&nbsp;<span class="ident" id="5324688">d</span>&nbsp;<span class="ident" id="5324690">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324703">err</span>&nbsp;<span class="op" id="5324707">:=</span>&nbsp;<span class="ident" id="5324710">checkValid</span><span class="op" id="5324720">(</span><span class="ident" id="5324721">data</span><span class="op" id="5324725">,</span>&nbsp;<span class="op" id="5324727">&amp;</span><span class="ident" id="5324728">d</span><span class="op" id="5324729">.</span><span class="ident" id="5324730">scan</span><span class="op" id="5324734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324737">if</span>&nbsp;<span class="ident" id="5324740">err</span>&nbsp;<span class="op" id="5324744">!=</span>&nbsp;<span class="ident" id="5324747">nil</span>&nbsp;<span class="op" id="5324751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324755">return</span>&nbsp;<span class="ident" id="5324762">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324771">d</span><span class="op" id="5324772">.</span><span class="ident" id="5324773">init</span><span class="op" id="5324777">(</span><span class="ident" id="5324778">data</span><span class="op" id="5324782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324785">return</span>&nbsp;<span class="ident" id="5324792">d</span><span class="op" id="5324793">.</span><span class="ident" id="5324794">unmarshal</span><span class="op" id="5324803">(</span><span class="ident" id="5324804">v</span><span class="op" id="5324805">)</span><br>
<span class="lineno"></span><span class="op" id="5324807">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5324810">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="5324865">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5324921">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5324975">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="5325030">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="5325082">type</span>&nbsp;<span class="ident" id="5325087">Unmarshaler</span>&nbsp;<span class="keyword" id="5325099">interface</span>&nbsp;<span class="op" id="5325109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325112">UnmarshalJSON</span><span class="op" id="5325125">(</span><span class="op" id="5325126">[</span><span class="op" id="5325127">]</span><span class="builtintype" id="5325128">byte</span><span class="op" id="5325132">)</span>&nbsp;<span class="builtintype" id="5325134">error</span><br>
<span class="lineno"></span><span class="op" id="5325140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="5325143">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="5325200">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5325254">type</span>&nbsp;<span class="ident" id="5325259">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="5325278">struct</span>&nbsp;<span class="op" id="5325285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325288">Value</span>&nbsp;<span class="builtintype" id="5325294">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325307">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325368">Type</span>&nbsp;&nbsp;<span class="ident" id="5325374">reflect</span><span class="op" id="5325381">.</span><span class="ident" id="5325382">Type</span>&nbsp;<span class="comment" id="5325387">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="5325435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5325438">func</span>&nbsp;<span class="op" id="5325443">(</span><span class="ident" id="5325444">e</span>&nbsp;<span class="op" id="5325446">*</span><span class="ident" id="5325447">UnmarshalTypeError</span><span class="op" id="5325465">)</span>&nbsp;<span class="ident" id="5325467">Error</span><span class="op" id="5325472">(</span><span class="op" id="5325473">)</span>&nbsp;<span class="builtintype" id="5325475">string</span>&nbsp;<span class="op" id="5325482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325485">return</span>&nbsp;<span class="string" id="5325492">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="5325518">+</span>&nbsp;<span class="ident" id="5325520">e</span><span class="op" id="5325521">.</span><span class="ident" id="5325522">Value</span>&nbsp;<span class="op" id="5325528">+</span>&nbsp;<span class="string" id="5325530">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5325556">+</span>&nbsp;<span class="ident" id="5325558">e</span><span class="op" id="5325559">.</span><span class="ident" id="5325560">Type</span><span class="op" id="5325564">.</span><span class="ident" id="5325565">String</span><span class="op" id="5325571">(</span><span class="op" id="5325572">)</span><br>
<span class="lineno"></span><span class="op" id="5325574">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5325577">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5325636">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5325701">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="5325746">type</span>&nbsp;<span class="ident" id="5325751">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="5325771">struct</span>&nbsp;<span class="op" id="5325778">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325781">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5325787">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325795">Type</span>&nbsp;&nbsp;<span class="ident" id="5325801">reflect</span><span class="op" id="5325808">.</span><span class="ident" id="5325809">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325815">Field</span>&nbsp;<span class="ident" id="5325821">reflect</span><span class="op" id="5325828">.</span><span class="ident" id="5325829">StructField</span><br>
<span class="lineno"></span><span class="op" id="5325841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="5325844">func</span>&nbsp;<span class="op" id="5325849">(</span><span class="ident" id="5325850">e</span>&nbsp;<span class="op" id="5325852">*</span><span class="ident" id="5325853">UnmarshalFieldError</span><span class="op" id="5325872">)</span>&nbsp;<span class="ident" id="5325874">Error</span><span class="op" id="5325879">(</span><span class="op" id="5325880">)</span>&nbsp;<span class="builtintype" id="5325882">string</span>&nbsp;<span class="op" id="5325889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325892">return</span>&nbsp;<span class="string" id="5325899">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="5325936">+</span>&nbsp;<span class="ident" id="5325938">strconv</span><span class="op" id="5325945">.</span><span class="ident" id="5325946">Quote</span><span class="op" id="5325951">(</span><span class="ident" id="5325952">e</span><span class="op" id="5325953">.</span><span class="ident" id="5325954">Key</span><span class="op" id="5325957">)</span>&nbsp;<span class="op" id="5325959">+</span>&nbsp;<span class="string" id="5325961">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="5325987">+</span>&nbsp;<span class="ident" id="5325989">e</span><span class="op" id="5325990">.</span><span class="ident" id="5325991">Field</span><span class="op" id="5325996">.</span><span class="ident" id="5325997">Name</span>&nbsp;<span class="op" id="5326002">+</span>&nbsp;<span class="string" id="5326004">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5326016">+</span>&nbsp;<span class="ident" id="5326018">e</span><span class="op" id="5326019">.</span><span class="ident" id="5326020">Type</span><span class="op" id="5326024">.</span><span class="ident" id="5326025">String</span><span class="op" id="5326031">(</span><span class="op" id="5326032">)</span><br>
<span class="lineno"></span><span class="op" id="5326034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5326037">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="5326116">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="5326174">type</span>&nbsp;<span class="ident" id="5326179">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="5326201">struct</span>&nbsp;<span class="op" id="5326208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326211">Type</span>&nbsp;<span class="ident" id="5326216">reflect</span><span class="op" id="5326223">.</span><span class="ident" id="5326224">Type</span><br>
<span class="lineno"></span><span class="op" id="5326229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="5326232">func</span>&nbsp;<span class="op" id="5326237">(</span><span class="ident" id="5326238">e</span>&nbsp;<span class="op" id="5326240">*</span><span class="ident" id="5326241">InvalidUnmarshalError</span><span class="op" id="5326262">)</span>&nbsp;<span class="ident" id="5326264">Error</span><span class="op" id="5326269">(</span><span class="op" id="5326270">)</span>&nbsp;<span class="builtintype" id="5326272">string</span>&nbsp;<span class="op" id="5326279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326282">if</span>&nbsp;<span class="ident" id="5326285">e</span><span class="op" id="5326286">.</span><span class="ident" id="5326287">Type</span>&nbsp;<span class="op" id="5326292">==</span>&nbsp;<span class="ident" id="5326295">nil</span>&nbsp;<span class="op" id="5326299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326303">return</span>&nbsp;<span class="string" id="5326310">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326338">if</span>&nbsp;<span class="ident" id="5326341">e</span><span class="op" id="5326342">.</span><span class="ident" id="5326343">Type</span><span class="op" id="5326347">.</span><span class="ident" id="5326348">Kind</span><span class="op" id="5326352">(</span><span class="op" id="5326353">)</span>&nbsp;<span class="op" id="5326355">!=</span>&nbsp;<span class="ident" id="5326358">reflect</span><span class="op" id="5326365">.</span><span class="ident" id="5326366">Ptr</span>&nbsp;<span class="op" id="5326370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326374">return</span>&nbsp;<span class="string" id="5326381">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="5326412">+</span>&nbsp;<span class="ident" id="5326414">e</span><span class="op" id="5326415">.</span><span class="ident" id="5326416">Type</span><span class="op" id="5326420">.</span><span class="ident" id="5326421">String</span><span class="op" id="5326427">(</span><span class="op" id="5326428">)</span>&nbsp;<span class="op" id="5326430">+</span>&nbsp;<span class="string" id="5326432">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326440">return</span>&nbsp;<span class="string" id="5326447">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="5326470">+</span>&nbsp;<span class="ident" id="5326472">e</span><span class="op" id="5326473">.</span><span class="ident" id="5326474">Type</span><span class="op" id="5326478">.</span><span class="ident" id="5326479">String</span><span class="op" id="5326485">(</span><span class="op" id="5326486">)</span>&nbsp;<span class="op" id="5326488">+</span>&nbsp;<span class="string" id="5326490">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="5326494">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="5326497">func</span>&nbsp;<span class="op" id="5326502">(</span><span class="ident" id="5326503">d</span>&nbsp;<span class="op" id="5326505">*</span><span class="ident" id="5326506">decodeState</span><span class="op" id="5326517">)</span>&nbsp;<span class="ident" id="5326519">unmarshal</span><span class="op" id="5326528">(</span><span class="ident" id="5326529">v</span>&nbsp;<span class="keyword" id="5326531">interface</span><span class="op" id="5326540">{</span><span class="op" id="5326541">}</span><span class="op" id="5326542">)</span>&nbsp;<span class="op" id="5326544">(</span><span class="ident" id="5326545">err</span>&nbsp;<span class="builtintype" id="5326549">error</span><span class="op" id="5326554">)</span>&nbsp;<span class="op" id="5326556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326559">defer</span>&nbsp;<span class="keyword" id="5326565">func</span><span class="op" id="5326569">(</span><span class="op" id="5326570">)</span>&nbsp;<span class="op" id="5326572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326576">if</span>&nbsp;<span class="ident" id="5326579">r</span>&nbsp;<span class="op" id="5326581">:=</span>&nbsp;<span class="builtinfunc" id="5326584">recover</span><span class="op" id="5326591">(</span><span class="op" id="5326592">)</span><span class="op" id="5326593">;</span>&nbsp;<span class="ident" id="5326595">r</span>&nbsp;<span class="op" id="5326597">!=</span>&nbsp;<span class="ident" id="5326600">nil</span>&nbsp;<span class="op" id="5326604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326609">if</span>&nbsp;<span class="ident" id="5326612">_</span><span class="op" id="5326613">,</span>&nbsp;<span class="ident" id="5326615">ok</span>&nbsp;<span class="op" id="5326618">:=</span>&nbsp;<span class="ident" id="5326621">r</span><span class="op" id="5326622">.</span><span class="op" id="5326623">(</span><span class="ident" id="5326624">runtime</span><span class="op" id="5326631">.</span><span class="ident" id="5326632">Error</span><span class="op" id="5326637">)</span><span class="op" id="5326638">;</span>&nbsp;<span class="ident" id="5326640">ok</span>&nbsp;<span class="op" id="5326643">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5326649">panic</span><span class="op" id="5326654">(</span><span class="ident" id="5326655">r</span><span class="op" id="5326656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326666">err</span>&nbsp;<span class="op" id="5326670">=</span>&nbsp;<span class="ident" id="5326672">r</span><span class="op" id="5326673">.</span><span class="op" id="5326674">(</span><span class="builtintype" id="5326675">error</span><span class="op" id="5326680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326687">}</span><span class="op" id="5326688">(</span><span class="op" id="5326689">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326693">rv</span>&nbsp;<span class="op" id="5326696">:=</span>&nbsp;<span class="ident" id="5326699">reflect</span><span class="op" id="5326706">.</span><span class="ident" id="5326707">ValueOf</span><span class="op" id="5326714">(</span><span class="ident" id="5326715">v</span><span class="op" id="5326716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326719">if</span>&nbsp;<span class="ident" id="5326722">rv</span><span class="op" id="5326724">.</span><span class="ident" id="5326725">Kind</span><span class="op" id="5326729">(</span><span class="op" id="5326730">)</span>&nbsp;<span class="op" id="5326732">!=</span>&nbsp;<span class="ident" id="5326735">reflect</span><span class="op" id="5326742">.</span><span class="ident" id="5326743">Ptr</span>&nbsp;<span class="op" id="5326747">||</span>&nbsp;<span class="ident" id="5326750">rv</span><span class="op" id="5326752">.</span><span class="ident" id="5326753">IsNil</span><span class="op" id="5326758">(</span><span class="op" id="5326759">)</span>&nbsp;<span class="op" id="5326761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326765">return</span>&nbsp;<span class="op" id="5326772">&amp;</span><span class="ident" id="5326773">InvalidUnmarshalError</span><span class="op" id="5326794">{</span><span class="ident" id="5326795">reflect</span><span class="op" id="5326802">.</span><span class="ident" id="5326803">TypeOf</span><span class="op" id="5326809">(</span><span class="ident" id="5326810">v</span><span class="op" id="5326811">)</span><span class="op" id="5326812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326815">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326819">d</span><span class="op" id="5326820">.</span><span class="ident" id="5326821">scan</span><span class="op" id="5326825">.</span><span class="ident" id="5326826">reset</span><span class="op" id="5326831">(</span><span class="op" id="5326832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326835">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326898">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326954">d</span><span class="op" id="5326955">.</span><span class="ident" id="5326956">value</span><span class="op" id="5326961">(</span><span class="ident" id="5326962">rv</span><span class="op" id="5326964">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326967">return</span>&nbsp;<span class="ident" id="5326974">d</span><span class="op" id="5326975">.</span><span class="ident" id="5326976">savedError</span><br>
<span class="lineno"></span><span class="op" id="5326987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5326990">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="5327036">type</span>&nbsp;<span class="ident" id="5327041">Number</span>&nbsp;<span class="builtintype" id="5327048">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="5327056">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="5327106">func</span>&nbsp;<span class="op" id="5327111">(</span><span class="ident" id="5327112">n</span>&nbsp;<span class="ident" id="5327114">Number</span><span class="op" id="5327120">)</span>&nbsp;<span class="ident" id="5327122">String</span><span class="op" id="5327128">(</span><span class="op" id="5327129">)</span>&nbsp;<span class="builtintype" id="5327131">string</span>&nbsp;<span class="op" id="5327138">{</span>&nbsp;<span class="keyword" id="5327140">return</span>&nbsp;<span class="builtintype" id="5327147">string</span><span class="op" id="5327153">(</span><span class="ident" id="5327154">n</span><span class="op" id="5327155">)</span>&nbsp;<span class="op" id="5327157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5327160">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="5327204">func</span>&nbsp;<span class="op" id="5327209">(</span><span class="ident" id="5327210">n</span>&nbsp;<span class="ident" id="5327212">Number</span><span class="op" id="5327218">)</span>&nbsp;<span class="ident" id="5327220">Float64</span><span class="op" id="5327227">(</span><span class="op" id="5327228">)</span>&nbsp;<span class="op" id="5327230">(</span><span class="builtintype" id="5327231">float64</span><span class="op" id="5327238">,</span>&nbsp;<span class="builtintype" id="5327240">error</span><span class="op" id="5327245">)</span>&nbsp;<span class="op" id="5327247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327250">return</span>&nbsp;<span class="ident" id="5327257">strconv</span><span class="op" id="5327264">.</span><span class="ident" id="5327265">ParseFloat</span><span class="op" id="5327275">(</span><span class="builtintype" id="5327276">string</span><span class="op" id="5327282">(</span><span class="ident" id="5327283">n</span><span class="op" id="5327284">)</span><span class="op" id="5327285">,</span>&nbsp;<span class="num" id="5327287">64</span><span class="op" id="5327289">)</span><br>
<span class="lineno"></span><span class="op" id="5327291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5327294">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="5327335">func</span>&nbsp;<span class="op" id="5327340">(</span><span class="ident" id="5327341">n</span>&nbsp;<span class="ident" id="5327343">Number</span><span class="op" id="5327349">)</span>&nbsp;<span class="ident" id="5327351">Int64</span><span class="op" id="5327356">(</span><span class="op" id="5327357">)</span>&nbsp;<span class="op" id="5327359">(</span><span class="ident" id="5327360">int64</span><span class="op" id="5327365">,</span>&nbsp;<span class="builtintype" id="5327367">error</span><span class="op" id="5327372">)</span>&nbsp;<span class="op" id="5327374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327377">return</span>&nbsp;<span class="ident" id="5327384">strconv</span><span class="op" id="5327391">.</span><span class="ident" id="5327392">ParseInt</span><span class="op" id="5327400">(</span><span class="builtintype" id="5327401">string</span><span class="op" id="5327407">(</span><span class="ident" id="5327408">n</span><span class="op" id="5327409">)</span><span class="op" id="5327410">,</span>&nbsp;<span class="num" id="5327412">10</span><span class="op" id="5327414">,</span>&nbsp;<span class="num" id="5327416">64</span><span class="op" id="5327418">)</span><br>
<span class="lineno"></span><span class="op" id="5327420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5327423">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="5327488">type</span>&nbsp;<span class="ident" id="5327493">decodeState</span>&nbsp;<span class="keyword" id="5327505">struct</span>&nbsp;<span class="op" id="5327512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327515">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5327526">[</span><span class="op" id="5327527">]</span><span class="builtintype" id="5327528">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327534">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5327545">int</span>&nbsp;<span class="comment" id="5327549">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327573">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5327584">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327593">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5327604">scanner</span>&nbsp;<span class="comment" id="5327612">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327639">savedError</span>&nbsp;<span class="builtintype" id="5327650">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327657">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="5327668">bool</span><br>
<span class="lineno"></span><span class="op" id="5327673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5327676">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="5327737">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="5327799">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="5327845">var</span>&nbsp;<span class="ident" id="5327849">errPhase</span>&nbsp;<span class="op" id="5327858">=</span>&nbsp;<span class="ident" id="5327860">errors</span><span class="op" id="5327866">.</span><span class="ident" id="5327867">New</span><span class="op" id="5327870">(</span><span class="string" id="5327871">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="5327924">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5327927">func</span>&nbsp;<span class="op" id="5327932">(</span><span class="ident" id="5327933">d</span>&nbsp;<span class="op" id="5327935">*</span><span class="ident" id="5327936">decodeState</span><span class="op" id="5327947">)</span>&nbsp;<span class="ident" id="5327949">init</span><span class="op" id="5327953">(</span><span class="ident" id="5327954">data</span>&nbsp;<span class="op" id="5327959">[</span><span class="op" id="5327960">]</span><span class="builtintype" id="5327961">byte</span><span class="op" id="5327965">)</span>&nbsp;<span class="op" id="5327967">*</span><span class="ident" id="5327968">decodeState</span>&nbsp;<span class="op" id="5327980">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327983">d</span><span class="op" id="5327984">.</span><span class="ident" id="5327985">data</span>&nbsp;<span class="op" id="5327990">=</span>&nbsp;<span class="ident" id="5327992">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327998">d</span><span class="op" id="5327999">.</span><span class="ident" id="5328000">off</span>&nbsp;<span class="op" id="5328004">=</span>&nbsp;<span class="num" id="5328006">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328009">d</span><span class="op" id="5328010">.</span><span class="ident" id="5328011">savedError</span>&nbsp;<span class="op" id="5328022">=</span>&nbsp;<span class="ident" id="5328024">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328029">return</span>&nbsp;<span class="ident" id="5328036">d</span><br>
<span class="lineno"></span><span class="op" id="5328038">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5328041">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="5328093">func</span>&nbsp;<span class="op" id="5328098">(</span><span class="ident" id="5328099">d</span>&nbsp;<span class="op" id="5328101">*</span><span class="ident" id="5328102">decodeState</span><span class="op" id="5328113">)</span>&nbsp;<span class="builtintype" id="5328115">error</span><span class="op" id="5328120">(</span><span class="ident" id="5328121">err</span>&nbsp;<span class="builtintype" id="5328125">error</span><span class="op" id="5328130">)</span>&nbsp;<span class="op" id="5328132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5328135">panic</span><span class="op" id="5328140">(</span><span class="ident" id="5328141">err</span><span class="op" id="5328144">)</span><br>
<span class="lineno"></span><span class="op" id="5328146">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="5328149">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="5328201">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="5328247">func</span>&nbsp;<span class="op" id="5328252">(</span><span class="ident" id="5328253">d</span>&nbsp;<span class="op" id="5328255">*</span><span class="ident" id="5328256">decodeState</span><span class="op" id="5328267">)</span>&nbsp;<span class="ident" id="5328269">saveError</span><span class="op" id="5328278">(</span><span class="ident" id="5328279">err</span>&nbsp;<span class="builtintype" id="5328283">error</span><span class="op" id="5328288">)</span>&nbsp;<span class="op" id="5328290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328293">if</span>&nbsp;<span class="ident" id="5328296">d</span><span class="op" id="5328297">.</span><span class="ident" id="5328298">savedError</span>&nbsp;<span class="op" id="5328309">==</span>&nbsp;<span class="ident" id="5328312">nil</span>&nbsp;<span class="op" id="5328316">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328320">d</span><span class="op" id="5328321">.</span><span class="ident" id="5328322">savedError</span>&nbsp;<span class="op" id="5328333">=</span>&nbsp;<span class="ident" id="5328335">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328340">}</span><br>
<span class="lineno"></span><span class="op" id="5328342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5328345">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="5328418">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="5328486">func</span>&nbsp;<span class="op" id="5328491">(</span><span class="ident" id="5328492">d</span>&nbsp;<span class="op" id="5328494">*</span><span class="ident" id="5328495">decodeState</span><span class="op" id="5328506">)</span>&nbsp;<span class="ident" id="5328508">next</span><span class="op" id="5328512">(</span><span class="op" id="5328513">)</span>&nbsp;<span class="op" id="5328515">[</span><span class="op" id="5328516">]</span><span class="builtintype" id="5328517">byte</span>&nbsp;<span class="op" id="5328522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328525">c</span>&nbsp;<span class="op" id="5328527">:=</span>&nbsp;<span class="ident" id="5328530">d</span><span class="op" id="5328531">.</span><span class="ident" id="5328532">data</span><span class="op" id="5328536">[</span><span class="ident" id="5328537">d</span><span class="op" id="5328538">.</span><span class="ident" id="5328539">off</span><span class="op" id="5328542">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328545">item</span><span class="op" id="5328549">,</span>&nbsp;<span class="ident" id="5328551">rest</span><span class="op" id="5328555">,</span>&nbsp;<span class="ident" id="5328557">err</span>&nbsp;<span class="op" id="5328561">:=</span>&nbsp;<span class="ident" id="5328564">nextValue</span><span class="op" id="5328573">(</span><span class="ident" id="5328574">d</span><span class="op" id="5328575">.</span><span class="ident" id="5328576">data</span><span class="op" id="5328580">[</span><span class="ident" id="5328581">d</span><span class="op" id="5328582">.</span><span class="ident" id="5328583">off</span><span class="op" id="5328586">:</span><span class="op" id="5328587">]</span><span class="op" id="5328588">,</span>&nbsp;<span class="op" id="5328590">&amp;</span><span class="ident" id="5328591">d</span><span class="op" id="5328592">.</span><span class="ident" id="5328593">nextscan</span><span class="op" id="5328601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328604">if</span>&nbsp;<span class="ident" id="5328607">err</span>&nbsp;<span class="op" id="5328611">!=</span>&nbsp;<span class="ident" id="5328614">nil</span>&nbsp;<span class="op" id="5328618">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328622">d</span><span class="op" id="5328623">.</span><span class="builtintype" id="5328624">error</span><span class="op" id="5328629">(</span><span class="ident" id="5328630">err</span><span class="op" id="5328633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328639">d</span><span class="op" id="5328640">.</span><span class="ident" id="5328641">off</span>&nbsp;<span class="op" id="5328645">=</span>&nbsp;<span class="builtinfunc" id="5328647">len</span><span class="op" id="5328650">(</span><span class="ident" id="5328651">d</span><span class="op" id="5328652">.</span><span class="ident" id="5328653">data</span><span class="op" id="5328657">)</span>&nbsp;<span class="op" id="5328659">-</span>&nbsp;<span class="builtinfunc" id="5328661">len</span><span class="op" id="5328664">(</span><span class="ident" id="5328665">rest</span><span class="op" id="5328669">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5328673">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5328724">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5328780">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328830">if</span>&nbsp;<span class="ident" id="5328833">c</span>&nbsp;<span class="op" id="5328835">==</span>&nbsp;<span class="string" id="5328838">&#39;{&#39;</span>&nbsp;<span class="op" id="5328842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328846">d</span><span class="op" id="5328847">.</span><span class="ident" id="5328848">scan</span><span class="op" id="5328852">.</span><span class="ident" id="5328853">step</span><span class="op" id="5328857">(</span><span class="op" id="5328858">&amp;</span><span class="ident" id="5328859">d</span><span class="op" id="5328860">.</span><span class="ident" id="5328861">scan</span><span class="op" id="5328865">,</span>&nbsp;<span class="string" id="5328867">&#39;}&#39;</span><span class="op" id="5328870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328873">}</span>&nbsp;<span class="keyword" id="5328875">else</span>&nbsp;<span class="op" id="5328880">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328884">d</span><span class="op" id="5328885">.</span><span class="ident" id="5328886">scan</span><span class="op" id="5328890">.</span><span class="ident" id="5328891">step</span><span class="op" id="5328895">(</span><span class="op" id="5328896">&amp;</span><span class="ident" id="5328897">d</span><span class="op" id="5328898">.</span><span class="ident" id="5328899">scan</span><span class="op" id="5328903">,</span>&nbsp;<span class="string" id="5328905">&#39;]&#39;</span><span class="op" id="5328908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328915">return</span>&nbsp;<span class="ident" id="5328922">item</span><br>
<span class="lineno"></span><span class="op" id="5328927">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5328930">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5328986">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="5329027">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="5329078">func</span>&nbsp;<span class="op" id="5329083">(</span><span class="ident" id="5329084">d</span>&nbsp;<span class="op" id="5329086">*</span><span class="ident" id="5329087">decodeState</span><span class="op" id="5329098">)</span>&nbsp;<span class="ident" id="5329100">scanWhile</span><span class="op" id="5329109">(</span><span class="ident" id="5329110">op</span>&nbsp;<span class="builtintype" id="5329113">int</span><span class="op" id="5329116">)</span>&nbsp;<span class="builtintype" id="5329118">int</span>&nbsp;<span class="op" id="5329122">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329125">var</span>&nbsp;<span class="ident" id="5329129">newOp</span>&nbsp;<span class="builtintype" id="5329135">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329140">for</span>&nbsp;<span class="op" id="5329144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329148">if</span>&nbsp;<span class="ident" id="5329151">d</span><span class="op" id="5329152">.</span><span class="ident" id="5329153">off</span>&nbsp;<span class="op" id="5329157">&gt;=</span>&nbsp;<span class="builtinfunc" id="5329160">len</span><span class="op" id="5329163">(</span><span class="ident" id="5329164">d</span><span class="op" id="5329165">.</span><span class="ident" id="5329166">data</span><span class="op" id="5329170">)</span>&nbsp;<span class="op" id="5329172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329177">newOp</span>&nbsp;<span class="op" id="5329183">=</span>&nbsp;<span class="ident" id="5329185">d</span><span class="op" id="5329186">.</span><span class="ident" id="5329187">scan</span><span class="op" id="5329191">.</span><span class="ident" id="5329192">eof</span><span class="op" id="5329195">(</span><span class="op" id="5329196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329201">d</span><span class="op" id="5329202">.</span><span class="ident" id="5329203">off</span>&nbsp;<span class="op" id="5329207">=</span>&nbsp;<span class="builtinfunc" id="5329209">len</span><span class="op" id="5329212">(</span><span class="ident" id="5329213">d</span><span class="op" id="5329214">.</span><span class="ident" id="5329215">data</span><span class="op" id="5329219">)</span>&nbsp;<span class="op" id="5329221">+</span>&nbsp;<span class="num" id="5329223">1</span>&nbsp;<span class="comment" id="5329225">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329260">}</span>&nbsp;<span class="keyword" id="5329262">else</span>&nbsp;<span class="op" id="5329267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329272">c</span>&nbsp;<span class="op" id="5329274">:=</span>&nbsp;<span class="builtintype" id="5329277">int</span><span class="op" id="5329280">(</span><span class="ident" id="5329281">d</span><span class="op" id="5329282">.</span><span class="ident" id="5329283">data</span><span class="op" id="5329287">[</span><span class="ident" id="5329288">d</span><span class="op" id="5329289">.</span><span class="ident" id="5329290">off</span><span class="op" id="5329293">]</span><span class="op" id="5329294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329299">d</span><span class="op" id="5329300">.</span><span class="ident" id="5329301">off</span><span class="op" id="5329304">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329310">newOp</span>&nbsp;<span class="op" id="5329316">=</span>&nbsp;<span class="ident" id="5329318">d</span><span class="op" id="5329319">.</span><span class="ident" id="5329320">scan</span><span class="op" id="5329324">.</span><span class="ident" id="5329325">step</span><span class="op" id="5329329">(</span><span class="op" id="5329330">&amp;</span><span class="ident" id="5329331">d</span><span class="op" id="5329332">.</span><span class="ident" id="5329333">scan</span><span class="op" id="5329337">,</span>&nbsp;<span class="ident" id="5329339">c</span><span class="op" id="5329340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329344">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329348">if</span>&nbsp;<span class="ident" id="5329351">newOp</span>&nbsp;<span class="op" id="5329357">!=</span>&nbsp;<span class="ident" id="5329360">op</span>&nbsp;<span class="op" id="5329363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329368">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329382">return</span>&nbsp;<span class="ident" id="5329389">newOp</span><br>
<span class="lineno">245</span><span class="op" id="5329395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5329398">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5329464">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5329517">func</span>&nbsp;<span class="op" id="5329522">(</span><span class="ident" id="5329523">d</span>&nbsp;<span class="op" id="5329525">*</span><span class="ident" id="5329526">decodeState</span><span class="op" id="5329537">)</span>&nbsp;<span class="ident" id="5329539">value</span><span class="op" id="5329544">(</span><span class="ident" id="5329545">v</span>&nbsp;<span class="ident" id="5329547">reflect</span><span class="op" id="5329554">.</span><span class="ident" id="5329555">Value</span><span class="op" id="5329560">)</span>&nbsp;<span class="op" id="5329562">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329565">if</span>&nbsp;<span class="op" id="5329568">!</span><span class="ident" id="5329569">v</span><span class="op" id="5329570">.</span><span class="ident" id="5329571">IsValid</span><span class="op" id="5329578">(</span><span class="op" id="5329579">)</span>&nbsp;<span class="op" id="5329581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329585">_</span><span class="op" id="5329586">,</span>&nbsp;<span class="ident" id="5329588">rest</span><span class="op" id="5329592">,</span>&nbsp;<span class="ident" id="5329594">err</span>&nbsp;<span class="op" id="5329598">:=</span>&nbsp;<span class="ident" id="5329601">nextValue</span><span class="op" id="5329610">(</span><span class="ident" id="5329611">d</span><span class="op" id="5329612">.</span><span class="ident" id="5329613">data</span><span class="op" id="5329617">[</span><span class="ident" id="5329618">d</span><span class="op" id="5329619">.</span><span class="ident" id="5329620">off</span><span class="op" id="5329623">:</span><span class="op" id="5329624">]</span><span class="op" id="5329625">,</span>&nbsp;<span class="op" id="5329627">&amp;</span><span class="ident" id="5329628">d</span><span class="op" id="5329629">.</span><span class="ident" id="5329630">nextscan</span><span class="op" id="5329638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329642">if</span>&nbsp;<span class="ident" id="5329645">err</span>&nbsp;<span class="op" id="5329649">!=</span>&nbsp;<span class="ident" id="5329652">nil</span>&nbsp;<span class="op" id="5329656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329661">d</span><span class="op" id="5329662">.</span><span class="builtintype" id="5329663">error</span><span class="op" id="5329668">(</span><span class="ident" id="5329669">err</span><span class="op" id="5329672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329676">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329680">d</span><span class="op" id="5329681">.</span><span class="ident" id="5329682">off</span>&nbsp;<span class="op" id="5329686">=</span>&nbsp;<span class="builtinfunc" id="5329688">len</span><span class="op" id="5329691">(</span><span class="ident" id="5329692">d</span><span class="op" id="5329693">.</span><span class="ident" id="5329694">data</span><span class="op" id="5329698">)</span>&nbsp;<span class="op" id="5329700">-</span>&nbsp;<span class="builtinfunc" id="5329702">len</span><span class="op" id="5329705">(</span><span class="ident" id="5329706">rest</span><span class="op" id="5329710">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5329715">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5329776">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5329838">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329892">if</span>&nbsp;<span class="ident" id="5329895">d</span><span class="op" id="5329896">.</span><span class="ident" id="5329897">scan</span><span class="op" id="5329901">.</span><span class="ident" id="5329902">redo</span>&nbsp;<span class="op" id="5329907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5329912">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329926">d</span><span class="op" id="5329927">.</span><span class="ident" id="5329928">scan</span><span class="op" id="5329932">.</span><span class="ident" id="5329933">redo</span>&nbsp;<span class="op" id="5329938">=</span>&nbsp;<span class="builtintype" id="5329940">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329949">d</span><span class="op" id="5329950">.</span><span class="ident" id="5329951">scan</span><span class="op" id="5329955">.</span><span class="ident" id="5329956">step</span>&nbsp;<span class="op" id="5329961">=</span>&nbsp;<span class="ident" id="5329963">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329981">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329985">d</span><span class="op" id="5329986">.</span><span class="ident" id="5329987">scan</span><span class="op" id="5329991">.</span><span class="ident" id="5329992">step</span><span class="op" id="5329996">(</span><span class="op" id="5329997">&amp;</span><span class="ident" id="5329998">d</span><span class="op" id="5329999">.</span><span class="ident" id="5330000">scan</span><span class="op" id="5330004">,</span>&nbsp;<span class="string" id="5330006">&#39;&#34;&#39;</span><span class="op" id="5330009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330013">d</span><span class="op" id="5330014">.</span><span class="ident" id="5330015">scan</span><span class="op" id="5330019">.</span><span class="ident" id="5330020">step</span><span class="op" id="5330024">(</span><span class="op" id="5330025">&amp;</span><span class="ident" id="5330026">d</span><span class="op" id="5330027">.</span><span class="ident" id="5330028">scan</span><span class="op" id="5330032">,</span>&nbsp;<span class="string" id="5330034">&#39;&#34;&#39;</span><span class="op" id="5330037">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330042">n</span>&nbsp;<span class="op" id="5330044">:=</span>&nbsp;<span class="builtinfunc" id="5330047">len</span><span class="op" id="5330050">(</span><span class="ident" id="5330051">d</span><span class="op" id="5330052">.</span><span class="ident" id="5330053">scan</span><span class="op" id="5330057">.</span><span class="ident" id="5330058">parseState</span><span class="op" id="5330068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330072">if</span>&nbsp;<span class="ident" id="5330075">n</span>&nbsp;<span class="op" id="5330077">&gt;</span>&nbsp;<span class="num" id="5330079">0</span>&nbsp;<span class="op" id="5330081">&amp;&amp;</span>&nbsp;<span class="ident" id="5330084">d</span><span class="op" id="5330085">.</span><span class="ident" id="5330086">scan</span><span class="op" id="5330090">.</span><span class="ident" id="5330091">parseState</span><span class="op" id="5330101">[</span><span class="ident" id="5330102">n</span><span class="op" id="5330103">-</span><span class="num" id="5330104">1</span><span class="op" id="5330105">]</span>&nbsp;<span class="op" id="5330107">==</span>&nbsp;<span class="ident" id="5330110">parseObjectKey</span>&nbsp;<span class="op" id="5330125">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5330130">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330196">d</span><span class="op" id="5330197">.</span><span class="ident" id="5330198">scan</span><span class="op" id="5330202">.</span><span class="ident" id="5330203">step</span><span class="op" id="5330207">(</span><span class="op" id="5330208">&amp;</span><span class="ident" id="5330209">d</span><span class="op" id="5330210">.</span><span class="ident" id="5330211">scan</span><span class="op" id="5330215">,</span>&nbsp;<span class="string" id="5330217">&#39;:&#39;</span><span class="op" id="5330220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330225">d</span><span class="op" id="5330226">.</span><span class="ident" id="5330227">scan</span><span class="op" id="5330231">.</span><span class="ident" id="5330232">step</span><span class="op" id="5330236">(</span><span class="op" id="5330237">&amp;</span><span class="ident" id="5330238">d</span><span class="op" id="5330239">.</span><span class="ident" id="5330240">scan</span><span class="op" id="5330244">,</span>&nbsp;<span class="string" id="5330246">&#39;&#34;&#39;</span><span class="op" id="5330249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330254">d</span><span class="op" id="5330255">.</span><span class="ident" id="5330256">scan</span><span class="op" id="5330260">.</span><span class="ident" id="5330261">step</span><span class="op" id="5330265">(</span><span class="op" id="5330266">&amp;</span><span class="ident" id="5330267">d</span><span class="op" id="5330268">.</span><span class="ident" id="5330269">scan</span><span class="op" id="5330273">,</span>&nbsp;<span class="string" id="5330275">&#39;&#34;&#39;</span><span class="op" id="5330278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330283">d</span><span class="op" id="5330284">.</span><span class="ident" id="5330285">scan</span><span class="op" id="5330289">.</span><span class="ident" id="5330290">step</span><span class="op" id="5330294">(</span><span class="op" id="5330295">&amp;</span><span class="ident" id="5330296">d</span><span class="op" id="5330297">.</span><span class="ident" id="5330298">scan</span><span class="op" id="5330302">,</span>&nbsp;<span class="string" id="5330304">&#39;}&#39;</span><span class="op" id="5330307">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5330311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330316">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5330324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330328">switch</span>&nbsp;<span class="ident" id="5330335">op</span>&nbsp;<span class="op" id="5330338">:=</span>&nbsp;<span class="ident" id="5330341">d</span><span class="op" id="5330342">.</span><span class="ident" id="5330343">scanWhile</span><span class="op" id="5330352">(</span><span class="ident" id="5330353">scanSkipSpace</span><span class="op" id="5330366">)</span><span class="op" id="5330367">;</span>&nbsp;<span class="ident" id="5330369">op</span>&nbsp;<span class="op" id="5330372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330375">default</span><span class="op" id="5330382">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330386">d</span><span class="op" id="5330387">.</span><span class="builtintype" id="5330388">error</span><span class="op" id="5330393">(</span><span class="ident" id="5330394">errPhase</span><span class="op" id="5330402">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330406">case</span>&nbsp;<span class="ident" id="5330411">scanBeginArray</span><span class="op" id="5330425">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330429">d</span><span class="op" id="5330430">.</span><span class="ident" id="5330431">array</span><span class="op" id="5330436">(</span><span class="ident" id="5330437">v</span><span class="op" id="5330438">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330442">case</span>&nbsp;<span class="ident" id="5330447">scanBeginObject</span><span class="op" id="5330462">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330466">d</span><span class="op" id="5330467">.</span><span class="ident" id="5330468">object</span><span class="op" id="5330474">(</span><span class="ident" id="5330475">v</span><span class="op" id="5330476">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330480">case</span>&nbsp;<span class="ident" id="5330485">scanBeginLiteral</span><span class="op" id="5330501">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330505">d</span><span class="op" id="5330506">.</span><span class="ident" id="5330507">literal</span><span class="op" id="5330514">(</span><span class="ident" id="5330515">v</span><span class="op" id="5330516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5330519">}</span><br>
<span class="lineno"></span><span class="op" id="5330521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="5330524">type</span>&nbsp;<span class="ident" id="5330529">unquotedValue</span>&nbsp;<span class="keyword" id="5330543">struct</span><span class="op" id="5330549">{</span><span class="op" id="5330550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5330553">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5330596">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5330662">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="5330730">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5330770">func</span>&nbsp;<span class="op" id="5330775">(</span><span class="ident" id="5330776">d</span>&nbsp;<span class="op" id="5330778">*</span><span class="ident" id="5330779">decodeState</span><span class="op" id="5330790">)</span>&nbsp;<span class="ident" id="5330792">valueQuoted</span><span class="op" id="5330803">(</span><span class="op" id="5330804">)</span>&nbsp;<span class="keyword" id="5330806">interface</span><span class="op" id="5330815">{</span><span class="op" id="5330816">}</span>&nbsp;<span class="op" id="5330818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330821">switch</span>&nbsp;<span class="ident" id="5330828">op</span>&nbsp;<span class="op" id="5330831">:=</span>&nbsp;<span class="ident" id="5330834">d</span><span class="op" id="5330835">.</span><span class="ident" id="5330836">scanWhile</span><span class="op" id="5330845">(</span><span class="ident" id="5330846">scanSkipSpace</span><span class="op" id="5330859">)</span><span class="op" id="5330860">;</span>&nbsp;<span class="ident" id="5330862">op</span>&nbsp;<span class="op" id="5330865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330868">default</span><span class="op" id="5330875">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330879">d</span><span class="op" id="5330880">.</span><span class="builtintype" id="5330881">error</span><span class="op" id="5330886">(</span><span class="ident" id="5330887">errPhase</span><span class="op" id="5330895">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330899">case</span>&nbsp;<span class="ident" id="5330904">scanBeginArray</span><span class="op" id="5330918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330922">d</span><span class="op" id="5330923">.</span><span class="ident" id="5330924">array</span><span class="op" id="5330929">(</span><span class="ident" id="5330930">reflect</span><span class="op" id="5330937">.</span><span class="ident" id="5330938">Value</span><span class="op" id="5330943">{</span><span class="op" id="5330944">}</span><span class="op" id="5330945">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330949">case</span>&nbsp;<span class="ident" id="5330954">scanBeginObject</span><span class="op" id="5330969">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330973">d</span><span class="op" id="5330974">.</span><span class="ident" id="5330975">object</span><span class="op" id="5330981">(</span><span class="ident" id="5330982">reflect</span><span class="op" id="5330989">.</span><span class="ident" id="5330990">Value</span><span class="op" id="5330995">{</span><span class="op" id="5330996">}</span><span class="op" id="5330997">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331001">case</span>&nbsp;<span class="ident" id="5331006">scanBeginLiteral</span><span class="op" id="5331022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331026">switch</span>&nbsp;<span class="ident" id="5331033">v</span>&nbsp;<span class="op" id="5331035">:=</span>&nbsp;<span class="ident" id="5331038">d</span><span class="op" id="5331039">.</span><span class="ident" id="5331040">literalInterface</span><span class="op" id="5331056">(</span><span class="op" id="5331057">)</span><span class="op" id="5331058">.</span><span class="op" id="5331059">(</span><span class="keyword" id="5331060">type</span><span class="op" id="5331064">)</span>&nbsp;<span class="op" id="5331066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331070">case</span>&nbsp;<span class="ident" id="5331075">nil</span><span class="op" id="5331078">,</span>&nbsp;<span class="builtintype" id="5331080">string</span><span class="op" id="5331086">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331091">return</span>&nbsp;<span class="ident" id="5331098">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331108">return</span>&nbsp;<span class="ident" id="5331115">unquotedValue</span><span class="op" id="5331128">{</span><span class="op" id="5331129">}</span><br>
<span class="lineno"></span><span class="op" id="5331131">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5331134">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="5331190">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="5331225">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="5331294">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="5331382">func</span>&nbsp;<span class="op" id="5331387">(</span><span class="ident" id="5331388">d</span>&nbsp;<span class="op" id="5331390">*</span><span class="ident" id="5331391">decodeState</span><span class="op" id="5331402">)</span>&nbsp;<span class="ident" id="5331404">indirect</span><span class="op" id="5331412">(</span><span class="ident" id="5331413">v</span>&nbsp;<span class="ident" id="5331415">reflect</span><span class="op" id="5331422">.</span><span class="ident" id="5331423">Value</span><span class="op" id="5331428">,</span>&nbsp;<span class="ident" id="5331430">decodingNull</span>&nbsp;<span class="builtintype" id="5331443">bool</span><span class="op" id="5331447">)</span>&nbsp;<span class="op" id="5331449">(</span><span class="ident" id="5331450">Unmarshaler</span><span class="op" id="5331461">,</span>&nbsp;<span class="ident" id="5331463">encoding</span><span class="op" id="5331471">.</span><span class="ident" id="5331472">TextUnmarshaler</span><span class="op" id="5331487">,</span>&nbsp;<span class="ident" id="5331489">reflect</span><span class="op" id="5331496">.</span><span class="ident" id="5331497">Value</span><span class="op" id="5331502">)</span>&nbsp;<span class="op" id="5331504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331507">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331552">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331621">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331639">if</span>&nbsp;<span class="ident" id="5331642">v</span><span class="op" id="5331643">.</span><span class="ident" id="5331644">Kind</span><span class="op" id="5331648">(</span><span class="op" id="5331649">)</span>&nbsp;<span class="op" id="5331651">!=</span>&nbsp;<span class="ident" id="5331654">reflect</span><span class="op" id="5331661">.</span><span class="ident" id="5331662">Ptr</span>&nbsp;<span class="op" id="5331666">&amp;&amp;</span>&nbsp;<span class="ident" id="5331669">v</span><span class="op" id="5331670">.</span><span class="ident" id="5331671">Type</span><span class="op" id="5331675">(</span><span class="op" id="5331676">)</span><span class="op" id="5331677">.</span><span class="ident" id="5331678">Name</span><span class="op" id="5331682">(</span><span class="op" id="5331683">)</span>&nbsp;<span class="op" id="5331685">!=</span>&nbsp;<span class="string" id="5331688">&#34;&#34;</span>&nbsp;<span class="op" id="5331691">&amp;&amp;</span>&nbsp;<span class="ident" id="5331694">v</span><span class="op" id="5331695">.</span><span class="ident" id="5331696">CanAddr</span><span class="op" id="5331703">(</span><span class="op" id="5331704">)</span>&nbsp;<span class="op" id="5331706">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331710">v</span>&nbsp;<span class="op" id="5331712">=</span>&nbsp;<span class="ident" id="5331714">v</span><span class="op" id="5331715">.</span><span class="ident" id="5331716">Addr</span><span class="op" id="5331720">(</span><span class="op" id="5331721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331727">for</span>&nbsp;<span class="op" id="5331731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331735">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331798">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331825">if</span>&nbsp;<span class="ident" id="5331828">v</span><span class="op" id="5331829">.</span><span class="ident" id="5331830">Kind</span><span class="op" id="5331834">(</span><span class="op" id="5331835">)</span>&nbsp;<span class="op" id="5331837">==</span>&nbsp;<span class="ident" id="5331840">reflect</span><span class="op" id="5331847">.</span><span class="ident" id="5331848">Interface</span>&nbsp;<span class="op" id="5331858">&amp;&amp;</span>&nbsp;<span class="op" id="5331861">!</span><span class="ident" id="5331862">v</span><span class="op" id="5331863">.</span><span class="ident" id="5331864">IsNil</span><span class="op" id="5331869">(</span><span class="op" id="5331870">)</span>&nbsp;<span class="op" id="5331872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331877">e</span>&nbsp;<span class="op" id="5331879">:=</span>&nbsp;<span class="ident" id="5331882">v</span><span class="op" id="5331883">.</span><span class="ident" id="5331884">Elem</span><span class="op" id="5331888">(</span><span class="op" id="5331889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331894">if</span>&nbsp;<span class="ident" id="5331897">e</span><span class="op" id="5331898">.</span><span class="ident" id="5331899">Kind</span><span class="op" id="5331903">(</span><span class="op" id="5331904">)</span>&nbsp;<span class="op" id="5331906">==</span>&nbsp;<span class="ident" id="5331909">reflect</span><span class="op" id="5331916">.</span><span class="ident" id="5331917">Ptr</span>&nbsp;<span class="op" id="5331921">&amp;&amp;</span>&nbsp;<span class="op" id="5331924">!</span><span class="ident" id="5331925">e</span><span class="op" id="5331926">.</span><span class="ident" id="5331927">IsNil</span><span class="op" id="5331932">(</span><span class="op" id="5331933">)</span>&nbsp;<span class="op" id="5331935">&amp;&amp;</span>&nbsp;<span class="op" id="5331938">(</span><span class="op" id="5331939">!</span><span class="ident" id="5331940">decodingNull</span>&nbsp;<span class="op" id="5331953">||</span>&nbsp;<span class="ident" id="5331956">e</span><span class="op" id="5331957">.</span><span class="ident" id="5331958">Elem</span><span class="op" id="5331962">(</span><span class="op" id="5331963">)</span><span class="op" id="5331964">.</span><span class="ident" id="5331965">Kind</span><span class="op" id="5331969">(</span><span class="op" id="5331970">)</span>&nbsp;<span class="op" id="5331972">==</span>&nbsp;<span class="ident" id="5331975">reflect</span><span class="op" id="5331982">.</span><span class="ident" id="5331983">Ptr</span><span class="op" id="5331986">)</span>&nbsp;<span class="op" id="5331988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331994">v</span>&nbsp;<span class="op" id="5331996">=</span>&nbsp;<span class="ident" id="5331998">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332004">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332025">if</span>&nbsp;<span class="ident" id="5332028">v</span><span class="op" id="5332029">.</span><span class="ident" id="5332030">Kind</span><span class="op" id="5332034">(</span><span class="op" id="5332035">)</span>&nbsp;<span class="op" id="5332037">!=</span>&nbsp;<span class="ident" id="5332040">reflect</span><span class="op" id="5332047">.</span><span class="ident" id="5332048">Ptr</span>&nbsp;<span class="op" id="5332052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332057">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332070">if</span>&nbsp;<span class="ident" id="5332073">v</span><span class="op" id="5332074">.</span><span class="ident" id="5332075">Elem</span><span class="op" id="5332079">(</span><span class="op" id="5332080">)</span><span class="op" id="5332081">.</span><span class="ident" id="5332082">Kind</span><span class="op" id="5332086">(</span><span class="op" id="5332087">)</span>&nbsp;<span class="op" id="5332089">!=</span>&nbsp;<span class="ident" id="5332092">reflect</span><span class="op" id="5332099">.</span><span class="ident" id="5332100">Ptr</span>&nbsp;<span class="op" id="5332104">&amp;&amp;</span>&nbsp;<span class="ident" id="5332107">decodingNull</span>&nbsp;<span class="op" id="5332120">&amp;&amp;</span>&nbsp;<span class="ident" id="5332123">v</span><span class="op" id="5332124">.</span><span class="ident" id="5332125">CanSet</span><span class="op" id="5332131">(</span><span class="op" id="5332132">)</span>&nbsp;<span class="op" id="5332134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332139">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332147">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332151">if</span>&nbsp;<span class="ident" id="5332154">v</span><span class="op" id="5332155">.</span><span class="ident" id="5332156">IsNil</span><span class="op" id="5332161">(</span><span class="op" id="5332162">)</span>&nbsp;<span class="op" id="5332164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332169">v</span><span class="op" id="5332170">.</span><span class="ident" id="5332171">Set</span><span class="op" id="5332174">(</span><span class="ident" id="5332175">reflect</span><span class="op" id="5332182">.</span><span class="ident" id="5332183">New</span><span class="op" id="5332186">(</span><span class="ident" id="5332187">v</span><span class="op" id="5332188">.</span><span class="ident" id="5332189">Type</span><span class="op" id="5332193">(</span><span class="op" id="5332194">)</span><span class="op" id="5332195">.</span><span class="ident" id="5332196">Elem</span><span class="op" id="5332200">(</span><span class="op" id="5332201">)</span><span class="op" id="5332202">)</span><span class="op" id="5332203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332211">if</span>&nbsp;<span class="ident" id="5332214">v</span><span class="op" id="5332215">.</span><span class="ident" id="5332216">Type</span><span class="op" id="5332220">(</span><span class="op" id="5332221">)</span><span class="op" id="5332222">.</span><span class="ident" id="5332223">NumMethod</span><span class="op" id="5332232">(</span><span class="op" id="5332233">)</span>&nbsp;<span class="op" id="5332235">&gt;</span>&nbsp;<span class="num" id="5332237">0</span>&nbsp;<span class="op" id="5332239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332244">if</span>&nbsp;<span class="ident" id="5332247">u</span><span class="op" id="5332248">,</span>&nbsp;<span class="ident" id="5332250">ok</span>&nbsp;<span class="op" id="5332253">:=</span>&nbsp;<span class="ident" id="5332256">v</span><span class="op" id="5332257">.</span><span class="ident" id="5332258">Interface</span><span class="op" id="5332267">(</span><span class="op" id="5332268">)</span><span class="op" id="5332269">.</span><span class="op" id="5332270">(</span><span class="ident" id="5332271">Unmarshaler</span><span class="op" id="5332282">)</span><span class="op" id="5332283">;</span>&nbsp;<span class="ident" id="5332285">ok</span>&nbsp;<span class="op" id="5332288">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332294">return</span>&nbsp;<span class="ident" id="5332301">u</span><span class="op" id="5332302">,</span>&nbsp;<span class="ident" id="5332304">nil</span><span class="op" id="5332307">,</span>&nbsp;<span class="ident" id="5332309">reflect</span><span class="op" id="5332316">.</span><span class="ident" id="5332317">Value</span><span class="op" id="5332322">{</span><span class="op" id="5332323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332333">if</span>&nbsp;<span class="ident" id="5332336">u</span><span class="op" id="5332337">,</span>&nbsp;<span class="ident" id="5332339">ok</span>&nbsp;<span class="op" id="5332342">:=</span>&nbsp;<span class="ident" id="5332345">v</span><span class="op" id="5332346">.</span><span class="ident" id="5332347">Interface</span><span class="op" id="5332356">(</span><span class="op" id="5332357">)</span><span class="op" id="5332358">.</span><span class="op" id="5332359">(</span><span class="ident" id="5332360">encoding</span><span class="op" id="5332368">.</span><span class="ident" id="5332369">TextUnmarshaler</span><span class="op" id="5332384">)</span><span class="op" id="5332385">;</span>&nbsp;<span class="ident" id="5332387">ok</span>&nbsp;<span class="op" id="5332390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332396">return</span>&nbsp;<span class="ident" id="5332403">nil</span><span class="op" id="5332406">,</span>&nbsp;<span class="ident" id="5332408">u</span><span class="op" id="5332409">,</span>&nbsp;<span class="ident" id="5332411">reflect</span><span class="op" id="5332418">.</span><span class="ident" id="5332419">Value</span><span class="op" id="5332424">{</span><span class="op" id="5332425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332430">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332438">v</span>&nbsp;<span class="op" id="5332440">=</span>&nbsp;<span class="ident" id="5332442">v</span><span class="op" id="5332443">.</span><span class="ident" id="5332444">Elem</span><span class="op" id="5332448">(</span><span class="op" id="5332449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332455">return</span>&nbsp;<span class="ident" id="5332462">nil</span><span class="op" id="5332465">,</span>&nbsp;<span class="ident" id="5332467">nil</span><span class="op" id="5332470">,</span>&nbsp;<span class="ident" id="5332472">v</span><br>
<span class="lineno"></span><span class="op" id="5332474">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="5332477">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5332554">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="5332614">func</span>&nbsp;<span class="op" id="5332619">(</span><span class="ident" id="5332620">d</span>&nbsp;<span class="op" id="5332622">*</span><span class="ident" id="5332623">decodeState</span><span class="op" id="5332634">)</span>&nbsp;<span class="ident" id="5332636">array</span><span class="op" id="5332641">(</span><span class="ident" id="5332642">v</span>&nbsp;<span class="ident" id="5332644">reflect</span><span class="op" id="5332651">.</span><span class="ident" id="5332652">Value</span><span class="op" id="5332657">)</span>&nbsp;<span class="op" id="5332659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332662">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332689">u</span><span class="op" id="5332690">,</span>&nbsp;<span class="ident" id="5332692">ut</span><span class="op" id="5332694">,</span>&nbsp;<span class="ident" id="5332696">pv</span>&nbsp;<span class="op" id="5332699">:=</span>&nbsp;<span class="ident" id="5332702">d</span><span class="op" id="5332703">.</span><span class="ident" id="5332704">indirect</span><span class="op" id="5332712">(</span><span class="ident" id="5332713">v</span><span class="op" id="5332714">,</span>&nbsp;<span class="builtintype" id="5332716">false</span><span class="op" id="5332721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332724">if</span>&nbsp;<span class="ident" id="5332727">u</span>&nbsp;<span class="op" id="5332729">!=</span>&nbsp;<span class="ident" id="5332732">nil</span>&nbsp;<span class="op" id="5332736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332740">d</span><span class="op" id="5332741">.</span><span class="ident" id="5332742">off</span><span class="op" id="5332745">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332750">err</span>&nbsp;<span class="op" id="5332754">:=</span>&nbsp;<span class="ident" id="5332757">u</span><span class="op" id="5332758">.</span><span class="ident" id="5332759">UnmarshalJSON</span><span class="op" id="5332772">(</span><span class="ident" id="5332773">d</span><span class="op" id="5332774">.</span><span class="ident" id="5332775">next</span><span class="op" id="5332779">(</span><span class="op" id="5332780">)</span><span class="op" id="5332781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332785">if</span>&nbsp;<span class="ident" id="5332788">err</span>&nbsp;<span class="op" id="5332792">!=</span>&nbsp;<span class="ident" id="5332795">nil</span>&nbsp;<span class="op" id="5332799">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332804">d</span><span class="op" id="5332805">.</span><span class="builtintype" id="5332806">error</span><span class="op" id="5332811">(</span><span class="ident" id="5332812">err</span><span class="op" id="5332815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332823">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332834">if</span>&nbsp;<span class="ident" id="5332837">ut</span>&nbsp;<span class="op" id="5332840">!=</span>&nbsp;<span class="ident" id="5332843">nil</span>&nbsp;<span class="op" id="5332847">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332851">d</span><span class="op" id="5332852">.</span><span class="ident" id="5332853">saveError</span><span class="op" id="5332862">(</span><span class="op" id="5332863">&amp;</span><span class="ident" id="5332864">UnmarshalTypeError</span><span class="op" id="5332882">{</span><span class="string" id="5332883">&#34;array&#34;</span><span class="op" id="5332890">,</span>&nbsp;<span class="ident" id="5332892">v</span><span class="op" id="5332893">.</span><span class="ident" id="5332894">Type</span><span class="op" id="5332898">(</span><span class="op" id="5332899">)</span><span class="op" id="5332900">}</span><span class="op" id="5332901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332905">d</span><span class="op" id="5332906">.</span><span class="ident" id="5332907">off</span><span class="op" id="5332910">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332915">d</span><span class="op" id="5332916">.</span><span class="ident" id="5332917">next</span><span class="op" id="5332921">(</span><span class="op" id="5332922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332926">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332934">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332938">v</span>&nbsp;<span class="op" id="5332940">=</span>&nbsp;<span class="ident" id="5332942">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332947">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332973">switch</span>&nbsp;<span class="ident" id="5332980">v</span><span class="op" id="5332981">.</span><span class="ident" id="5332982">Kind</span><span class="op" id="5332986">(</span><span class="op" id="5332987">)</span>&nbsp;<span class="op" id="5332989">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332992">case</span>&nbsp;<span class="ident" id="5332997">reflect</span><span class="op" id="5333004">.</span><span class="ident" id="5333005">Interface</span><span class="op" id="5333014">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333018">if</span>&nbsp;<span class="ident" id="5333021">v</span><span class="op" id="5333022">.</span><span class="ident" id="5333023">NumMethod</span><span class="op" id="5333032">(</span><span class="op" id="5333033">)</span>&nbsp;<span class="op" id="5333035">==</span>&nbsp;<span class="num" id="5333038">0</span>&nbsp;<span class="op" id="5333040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333045">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333109">v</span><span class="op" id="5333110">.</span><span class="ident" id="5333111">Set</span><span class="op" id="5333114">(</span><span class="ident" id="5333115">reflect</span><span class="op" id="5333122">.</span><span class="ident" id="5333123">ValueOf</span><span class="op" id="5333130">(</span><span class="ident" id="5333131">d</span><span class="op" id="5333132">.</span><span class="ident" id="5333133">arrayInterface</span><span class="op" id="5333147">(</span><span class="op" id="5333148">)</span><span class="op" id="5333149">)</span><span class="op" id="5333150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333155">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333168">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333197">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333210">default</span><span class="op" id="5333217">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333221">d</span><span class="op" id="5333222">.</span><span class="ident" id="5333223">saveError</span><span class="op" id="5333232">(</span><span class="op" id="5333233">&amp;</span><span class="ident" id="5333234">UnmarshalTypeError</span><span class="op" id="5333252">{</span><span class="string" id="5333253">&#34;array&#34;</span><span class="op" id="5333260">,</span>&nbsp;<span class="ident" id="5333262">v</span><span class="op" id="5333263">.</span><span class="ident" id="5333264">Type</span><span class="op" id="5333268">(</span><span class="op" id="5333269">)</span><span class="op" id="5333270">}</span><span class="op" id="5333271">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333275">d</span><span class="op" id="5333276">.</span><span class="ident" id="5333277">off</span><span class="op" id="5333280">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333285">d</span><span class="op" id="5333286">.</span><span class="ident" id="5333287">next</span><span class="op" id="5333291">(</span><span class="op" id="5333292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333296">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333304">case</span>&nbsp;<span class="ident" id="5333309">reflect</span><span class="op" id="5333316">.</span><span class="ident" id="5333317">Array</span><span class="op" id="5333322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333325">case</span>&nbsp;<span class="ident" id="5333330">reflect</span><span class="op" id="5333337">.</span><span class="ident" id="5333338">Slice</span><span class="op" id="5333343">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333347">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333358">i</span>&nbsp;<span class="op" id="5333360">:=</span>&nbsp;<span class="num" id="5333363">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333366">for</span>&nbsp;<span class="op" id="5333370">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333374">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333434">op</span>&nbsp;<span class="op" id="5333437">:=</span>&nbsp;<span class="ident" id="5333440">d</span><span class="op" id="5333441">.</span><span class="ident" id="5333442">scanWhile</span><span class="op" id="5333451">(</span><span class="ident" id="5333452">scanSkipSpace</span><span class="op" id="5333465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333469">if</span>&nbsp;<span class="ident" id="5333472">op</span>&nbsp;<span class="op" id="5333475">==</span>&nbsp;<span class="ident" id="5333478">scanEndArray</span>&nbsp;<span class="op" id="5333491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333496">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333504">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333509">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333565">d</span><span class="op" id="5333566">.</span><span class="ident" id="5333567">off</span><span class="op" id="5333570">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333575">d</span><span class="op" id="5333576">.</span><span class="ident" id="5333577">scan</span><span class="op" id="5333581">.</span><span class="ident" id="5333582">undo</span><span class="op" id="5333586">(</span><span class="ident" id="5333587">op</span><span class="op" id="5333589">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333594">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333643">if</span>&nbsp;<span class="ident" id="5333646">v</span><span class="op" id="5333647">.</span><span class="ident" id="5333648">Kind</span><span class="op" id="5333652">(</span><span class="op" id="5333653">)</span>&nbsp;<span class="op" id="5333655">==</span>&nbsp;<span class="ident" id="5333658">reflect</span><span class="op" id="5333665">.</span><span class="ident" id="5333666">Slice</span>&nbsp;<span class="op" id="5333672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333677">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333707">if</span>&nbsp;<span class="ident" id="5333710">i</span>&nbsp;<span class="op" id="5333712">&gt;=</span>&nbsp;<span class="ident" id="5333715">v</span><span class="op" id="5333716">.</span><span class="ident" id="5333717">Cap</span><span class="op" id="5333720">(</span><span class="op" id="5333721">)</span>&nbsp;<span class="op" id="5333723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333729">newcap</span>&nbsp;<span class="op" id="5333736">:=</span>&nbsp;<span class="ident" id="5333739">v</span><span class="op" id="5333740">.</span><span class="ident" id="5333741">Cap</span><span class="op" id="5333744">(</span><span class="op" id="5333745">)</span>&nbsp;<span class="op" id="5333747">+</span>&nbsp;<span class="ident" id="5333749">v</span><span class="op" id="5333750">.</span><span class="ident" id="5333751">Cap</span><span class="op" id="5333754">(</span><span class="op" id="5333755">)</span><span class="op" id="5333756">/</span><span class="num" id="5333757">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333763">if</span>&nbsp;<span class="ident" id="5333766">newcap</span>&nbsp;<span class="op" id="5333773">&lt;</span>&nbsp;<span class="num" id="5333775">4</span>&nbsp;<span class="op" id="5333777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333784">newcap</span>&nbsp;<span class="op" id="5333791">=</span>&nbsp;<span class="num" id="5333793">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333805">newv</span>&nbsp;<span class="op" id="5333810">:=</span>&nbsp;<span class="ident" id="5333813">reflect</span><span class="op" id="5333820">.</span><span class="ident" id="5333821">MakeSlice</span><span class="op" id="5333830">(</span><span class="ident" id="5333831">v</span><span class="op" id="5333832">.</span><span class="ident" id="5333833">Type</span><span class="op" id="5333837">(</span><span class="op" id="5333838">)</span><span class="op" id="5333839">,</span>&nbsp;<span class="ident" id="5333841">v</span><span class="op" id="5333842">.</span><span class="ident" id="5333843">Len</span><span class="op" id="5333846">(</span><span class="op" id="5333847">)</span><span class="op" id="5333848">,</span>&nbsp;<span class="ident" id="5333850">newcap</span><span class="op" id="5333856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333862">reflect</span><span class="op" id="5333869">.</span><span class="ident" id="5333870">Copy</span><span class="op" id="5333874">(</span><span class="ident" id="5333875">newv</span><span class="op" id="5333879">,</span>&nbsp;<span class="ident" id="5333881">v</span><span class="op" id="5333882">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333888">v</span><span class="op" id="5333889">.</span><span class="ident" id="5333890">Set</span><span class="op" id="5333893">(</span><span class="ident" id="5333894">newv</span><span class="op" id="5333898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333908">if</span>&nbsp;<span class="ident" id="5333911">i</span>&nbsp;<span class="op" id="5333913">&gt;=</span>&nbsp;<span class="ident" id="5333916">v</span><span class="op" id="5333917">.</span><span class="ident" id="5333918">Len</span><span class="op" id="5333921">(</span><span class="op" id="5333922">)</span>&nbsp;<span class="op" id="5333924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333930">v</span><span class="op" id="5333931">.</span><span class="ident" id="5333932">SetLen</span><span class="op" id="5333938">(</span><span class="ident" id="5333939">i</span>&nbsp;<span class="op" id="5333941">+</span>&nbsp;<span class="num" id="5333943">1</span><span class="op" id="5333944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333949">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333958">if</span>&nbsp;<span class="ident" id="5333961">i</span>&nbsp;<span class="op" id="5333963">&lt;</span>&nbsp;<span class="ident" id="5333965">v</span><span class="op" id="5333966">.</span><span class="ident" id="5333967">Len</span><span class="op" id="5333970">(</span><span class="op" id="5333971">)</span>&nbsp;<span class="op" id="5333973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333978">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334005">d</span><span class="op" id="5334006">.</span><span class="ident" id="5334007">value</span><span class="op" id="5334012">(</span><span class="ident" id="5334013">v</span><span class="op" id="5334014">.</span><span class="ident" id="5334015">Index</span><span class="op" id="5334020">(</span><span class="ident" id="5334021">i</span><span class="op" id="5334022">)</span><span class="op" id="5334023">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334027">}</span>&nbsp;<span class="keyword" id="5334029">else</span>&nbsp;<span class="op" id="5334034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334039">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334075">d</span><span class="op" id="5334076">.</span><span class="ident" id="5334077">value</span><span class="op" id="5334082">(</span><span class="ident" id="5334083">reflect</span><span class="op" id="5334090">.</span><span class="ident" id="5334091">Value</span><span class="op" id="5334096">{</span><span class="op" id="5334097">}</span><span class="op" id="5334098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334106">i</span><span class="op" id="5334107">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334113">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334145">op</span>&nbsp;<span class="op" id="5334148">=</span>&nbsp;<span class="ident" id="5334150">d</span><span class="op" id="5334151">.</span><span class="ident" id="5334152">scanWhile</span><span class="op" id="5334161">(</span><span class="ident" id="5334162">scanSkipSpace</span><span class="op" id="5334175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334179">if</span>&nbsp;<span class="ident" id="5334182">op</span>&nbsp;<span class="op" id="5334185">==</span>&nbsp;<span class="ident" id="5334188">scanEndArray</span>&nbsp;<span class="op" id="5334201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334206">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334218">if</span>&nbsp;<span class="ident" id="5334221">op</span>&nbsp;<span class="op" id="5334224">!=</span>&nbsp;<span class="ident" id="5334227">scanArrayValue</span>&nbsp;<span class="op" id="5334242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334247">d</span><span class="op" id="5334248">.</span><span class="builtintype" id="5334249">error</span><span class="op" id="5334254">(</span><span class="ident" id="5334255">errPhase</span><span class="op" id="5334263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334270">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334274">if</span>&nbsp;<span class="ident" id="5334277">i</span>&nbsp;<span class="op" id="5334279">&lt;</span>&nbsp;<span class="ident" id="5334281">v</span><span class="op" id="5334282">.</span><span class="ident" id="5334283">Len</span><span class="op" id="5334286">(</span><span class="op" id="5334287">)</span>&nbsp;<span class="op" id="5334289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334293">if</span>&nbsp;<span class="ident" id="5334296">v</span><span class="op" id="5334297">.</span><span class="ident" id="5334298">Kind</span><span class="op" id="5334302">(</span><span class="op" id="5334303">)</span>&nbsp;<span class="op" id="5334305">==</span>&nbsp;<span class="ident" id="5334308">reflect</span><span class="op" id="5334315">.</span><span class="ident" id="5334316">Array</span>&nbsp;<span class="op" id="5334322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334327">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334356">z</span>&nbsp;<span class="op" id="5334358">:=</span>&nbsp;<span class="ident" id="5334361">reflect</span><span class="op" id="5334368">.</span><span class="ident" id="5334369">Zero</span><span class="op" id="5334373">(</span><span class="ident" id="5334374">v</span><span class="op" id="5334375">.</span><span class="ident" id="5334376">Type</span><span class="op" id="5334380">(</span><span class="op" id="5334381">)</span><span class="op" id="5334382">.</span><span class="ident" id="5334383">Elem</span><span class="op" id="5334387">(</span><span class="op" id="5334388">)</span><span class="op" id="5334389">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334394">for</span>&nbsp;<span class="op" id="5334398">;</span>&nbsp;<span class="ident" id="5334400">i</span>&nbsp;<span class="op" id="5334402">&lt;</span>&nbsp;<span class="ident" id="5334404">v</span><span class="op" id="5334405">.</span><span class="ident" id="5334406">Len</span><span class="op" id="5334409">(</span><span class="op" id="5334410">)</span><span class="op" id="5334411">;</span>&nbsp;<span class="ident" id="5334413">i</span><span class="op" id="5334414">++</span>&nbsp;<span class="op" id="5334417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334423">v</span><span class="op" id="5334424">.</span><span class="ident" id="5334425">Index</span><span class="op" id="5334430">(</span><span class="ident" id="5334431">i</span><span class="op" id="5334432">)</span><span class="op" id="5334433">.</span><span class="ident" id="5334434">Set</span><span class="op" id="5334437">(</span><span class="ident" id="5334438">z</span><span class="op" id="5334439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334448">}</span>&nbsp;<span class="keyword" id="5334450">else</span>&nbsp;<span class="op" id="5334455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334460">v</span><span class="op" id="5334461">.</span><span class="ident" id="5334462">SetLen</span><span class="op" id="5334468">(</span><span class="ident" id="5334469">i</span><span class="op" id="5334470">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334480">if</span>&nbsp;<span class="ident" id="5334483">i</span>&nbsp;<span class="op" id="5334485">==</span>&nbsp;<span class="num" id="5334488">0</span>&nbsp;<span class="op" id="5334490">&amp;&amp;</span>&nbsp;<span class="ident" id="5334493">v</span><span class="op" id="5334494">.</span><span class="ident" id="5334495">Kind</span><span class="op" id="5334499">(</span><span class="op" id="5334500">)</span>&nbsp;<span class="op" id="5334502">==</span>&nbsp;<span class="ident" id="5334505">reflect</span><span class="op" id="5334512">.</span><span class="ident" id="5334513">Slice</span>&nbsp;<span class="op" id="5334519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334523">v</span><span class="op" id="5334524">.</span><span class="ident" id="5334525">Set</span><span class="op" id="5334528">(</span><span class="ident" id="5334529">reflect</span><span class="op" id="5334536">.</span><span class="ident" id="5334537">MakeSlice</span><span class="op" id="5334546">(</span><span class="ident" id="5334547">v</span><span class="op" id="5334548">.</span><span class="ident" id="5334549">Type</span><span class="op" id="5334553">(</span><span class="op" id="5334554">)</span><span class="op" id="5334555">,</span>&nbsp;<span class="num" id="5334557">0</span><span class="op" id="5334558">,</span>&nbsp;<span class="num" id="5334560">0</span><span class="op" id="5334561">)</span><span class="op" id="5334562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334565">}</span><br>
<span class="lineno">470</span><span class="op" id="5334567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5334570">var</span>&nbsp;<span class="ident" id="5334574">nullLiteral</span>&nbsp;<span class="op" id="5334586">=</span>&nbsp;<span class="op" id="5334588">[</span><span class="op" id="5334589">]</span><span class="builtintype" id="5334590">byte</span><span class="op" id="5334594">(</span><span class="string" id="5334595">&#34;null&#34;</span><span class="op" id="5334601">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5334604">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="5334683">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="5334744">func</span>&nbsp;<span class="op" id="5334749">(</span><span class="ident" id="5334750">d</span>&nbsp;<span class="op" id="5334752">*</span><span class="ident" id="5334753">decodeState</span><span class="op" id="5334764">)</span>&nbsp;<span class="ident" id="5334766">object</span><span class="op" id="5334772">(</span><span class="ident" id="5334773">v</span>&nbsp;<span class="ident" id="5334775">reflect</span><span class="op" id="5334782">.</span><span class="ident" id="5334783">Value</span><span class="op" id="5334788">)</span>&nbsp;<span class="op" id="5334790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334793">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334820">u</span><span class="op" id="5334821">,</span>&nbsp;<span class="ident" id="5334823">ut</span><span class="op" id="5334825">,</span>&nbsp;<span class="ident" id="5334827">pv</span>&nbsp;<span class="op" id="5334830">:=</span>&nbsp;<span class="ident" id="5334833">d</span><span class="op" id="5334834">.</span><span class="ident" id="5334835">indirect</span><span class="op" id="5334843">(</span><span class="ident" id="5334844">v</span><span class="op" id="5334845">,</span>&nbsp;<span class="builtintype" id="5334847">false</span><span class="op" id="5334852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334855">if</span>&nbsp;<span class="ident" id="5334858">u</span>&nbsp;<span class="op" id="5334860">!=</span>&nbsp;<span class="ident" id="5334863">nil</span>&nbsp;<span class="op" id="5334867">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334871">d</span><span class="op" id="5334872">.</span><span class="ident" id="5334873">off</span><span class="op" id="5334876">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334881">err</span>&nbsp;<span class="op" id="5334885">:=</span>&nbsp;<span class="ident" id="5334888">u</span><span class="op" id="5334889">.</span><span class="ident" id="5334890">UnmarshalJSON</span><span class="op" id="5334903">(</span><span class="ident" id="5334904">d</span><span class="op" id="5334905">.</span><span class="ident" id="5334906">next</span><span class="op" id="5334910">(</span><span class="op" id="5334911">)</span><span class="op" id="5334912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334916">if</span>&nbsp;<span class="ident" id="5334919">err</span>&nbsp;<span class="op" id="5334923">!=</span>&nbsp;<span class="ident" id="5334926">nil</span>&nbsp;<span class="op" id="5334930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334935">d</span><span class="op" id="5334936">.</span><span class="builtintype" id="5334937">error</span><span class="op" id="5334942">(</span><span class="ident" id="5334943">err</span><span class="op" id="5334946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334950">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334954">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334965">if</span>&nbsp;<span class="ident" id="5334968">ut</span>&nbsp;<span class="op" id="5334971">!=</span>&nbsp;<span class="ident" id="5334974">nil</span>&nbsp;<span class="op" id="5334978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334982">d</span><span class="op" id="5334983">.</span><span class="ident" id="5334984">saveError</span><span class="op" id="5334993">(</span><span class="op" id="5334994">&amp;</span><span class="ident" id="5334995">UnmarshalTypeError</span><span class="op" id="5335013">{</span><span class="string" id="5335014">&#34;object&#34;</span><span class="op" id="5335022">,</span>&nbsp;<span class="ident" id="5335024">v</span><span class="op" id="5335025">.</span><span class="ident" id="5335026">Type</span><span class="op" id="5335030">(</span><span class="op" id="5335031">)</span><span class="op" id="5335032">}</span><span class="op" id="5335033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335037">d</span><span class="op" id="5335038">.</span><span class="ident" id="5335039">off</span><span class="op" id="5335042">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335047">d</span><span class="op" id="5335048">.</span><span class="ident" id="5335049">next</span><span class="op" id="5335053">(</span><span class="op" id="5335054">)</span>&nbsp;<span class="comment" id="5335056">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335084">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335095">v</span>&nbsp;<span class="op" id="5335097">=</span>&nbsp;<span class="ident" id="5335099">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335104">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335166">if</span>&nbsp;<span class="ident" id="5335169">v</span><span class="op" id="5335170">.</span><span class="ident" id="5335171">Kind</span><span class="op" id="5335175">(</span><span class="op" id="5335176">)</span>&nbsp;<span class="op" id="5335178">==</span>&nbsp;<span class="ident" id="5335181">reflect</span><span class="op" id="5335188">.</span><span class="ident" id="5335189">Interface</span>&nbsp;<span class="op" id="5335199">&amp;&amp;</span>&nbsp;<span class="ident" id="5335202">v</span><span class="op" id="5335203">.</span><span class="ident" id="5335204">NumMethod</span><span class="op" id="5335213">(</span><span class="op" id="5335214">)</span>&nbsp;<span class="op" id="5335216">==</span>&nbsp;<span class="num" id="5335219">0</span>&nbsp;<span class="op" id="5335221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335225">v</span><span class="op" id="5335226">.</span><span class="ident" id="5335227">Set</span><span class="op" id="5335230">(</span><span class="ident" id="5335231">reflect</span><span class="op" id="5335238">.</span><span class="ident" id="5335239">ValueOf</span><span class="op" id="5335246">(</span><span class="ident" id="5335247">d</span><span class="op" id="5335248">.</span><span class="ident" id="5335249">objectInterface</span><span class="op" id="5335264">(</span><span class="op" id="5335265">)</span><span class="op" id="5335266">)</span><span class="op" id="5335267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335271">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335279">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335283">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335332">switch</span>&nbsp;<span class="ident" id="5335339">v</span><span class="op" id="5335340">.</span><span class="ident" id="5335341">Kind</span><span class="op" id="5335345">(</span><span class="op" id="5335346">)</span>&nbsp;<span class="op" id="5335348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335351">case</span>&nbsp;<span class="ident" id="5335356">reflect</span><span class="op" id="5335363">.</span><span class="ident" id="5335364">Map</span><span class="op" id="5335367">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335371">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335402">t</span>&nbsp;<span class="op" id="5335404">:=</span>&nbsp;<span class="ident" id="5335407">v</span><span class="op" id="5335408">.</span><span class="ident" id="5335409">Type</span><span class="op" id="5335413">(</span><span class="op" id="5335414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335418">if</span>&nbsp;<span class="ident" id="5335421">t</span><span class="op" id="5335422">.</span><span class="ident" id="5335423">Key</span><span class="op" id="5335426">(</span><span class="op" id="5335427">)</span><span class="op" id="5335428">.</span><span class="ident" id="5335429">Kind</span><span class="op" id="5335433">(</span><span class="op" id="5335434">)</span>&nbsp;<span class="op" id="5335436">!=</span>&nbsp;<span class="ident" id="5335439">reflect</span><span class="op" id="5335446">.</span><span class="ident" id="5335447">String</span>&nbsp;<span class="op" id="5335454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335459">d</span><span class="op" id="5335460">.</span><span class="ident" id="5335461">saveError</span><span class="op" id="5335470">(</span><span class="op" id="5335471">&amp;</span><span class="ident" id="5335472">UnmarshalTypeError</span><span class="op" id="5335490">{</span><span class="string" id="5335491">&#34;object&#34;</span><span class="op" id="5335499">,</span>&nbsp;<span class="ident" id="5335501">v</span><span class="op" id="5335502">.</span><span class="ident" id="5335503">Type</span><span class="op" id="5335507">(</span><span class="op" id="5335508">)</span><span class="op" id="5335509">}</span><span class="op" id="5335510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335515">d</span><span class="op" id="5335516">.</span><span class="ident" id="5335517">off</span><span class="op" id="5335520">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335526">d</span><span class="op" id="5335527">.</span><span class="ident" id="5335528">next</span><span class="op" id="5335532">(</span><span class="op" id="5335533">)</span>&nbsp;<span class="comment" id="5335535">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335564">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335577">if</span>&nbsp;<span class="ident" id="5335580">v</span><span class="op" id="5335581">.</span><span class="ident" id="5335582">IsNil</span><span class="op" id="5335587">(</span><span class="op" id="5335588">)</span>&nbsp;<span class="op" id="5335590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335595">v</span><span class="op" id="5335596">.</span><span class="ident" id="5335597">Set</span><span class="op" id="5335600">(</span><span class="ident" id="5335601">reflect</span><span class="op" id="5335608">.</span><span class="ident" id="5335609">MakeMap</span><span class="op" id="5335616">(</span><span class="ident" id="5335617">t</span><span class="op" id="5335618">)</span><span class="op" id="5335619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335623">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335626">case</span>&nbsp;<span class="ident" id="5335631">reflect</span><span class="op" id="5335638">.</span><span class="ident" id="5335639">Struct</span><span class="op" id="5335645">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335649">default</span><span class="op" id="5335656">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335660">d</span><span class="op" id="5335661">.</span><span class="ident" id="5335662">saveError</span><span class="op" id="5335671">(</span><span class="op" id="5335672">&amp;</span><span class="ident" id="5335673">UnmarshalTypeError</span><span class="op" id="5335691">{</span><span class="string" id="5335692">&#34;object&#34;</span><span class="op" id="5335700">,</span>&nbsp;<span class="ident" id="5335702">v</span><span class="op" id="5335703">.</span><span class="ident" id="5335704">Type</span><span class="op" id="5335708">(</span><span class="op" id="5335709">)</span><span class="op" id="5335710">}</span><span class="op" id="5335711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335715">d</span><span class="op" id="5335716">.</span><span class="ident" id="5335717">off</span><span class="op" id="5335720">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335725">d</span><span class="op" id="5335726">.</span><span class="ident" id="5335727">next</span><span class="op" id="5335731">(</span><span class="op" id="5335732">)</span>&nbsp;<span class="comment" id="5335734">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335762">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335774">var</span>&nbsp;<span class="ident" id="5335778">mapElem</span>&nbsp;<span class="ident" id="5335786">reflect</span><span class="op" id="5335793">.</span><span class="ident" id="5335794">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335802">for</span>&nbsp;<span class="op" id="5335806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335810">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335858">op</span>&nbsp;<span class="op" id="5335861">:=</span>&nbsp;<span class="ident" id="5335864">d</span><span class="op" id="5335865">.</span><span class="ident" id="5335866">scanWhile</span><span class="op" id="5335875">(</span><span class="ident" id="5335876">scanSkipSpace</span><span class="op" id="5335889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335893">if</span>&nbsp;<span class="ident" id="5335896">op</span>&nbsp;<span class="op" id="5335899">==</span>&nbsp;<span class="ident" id="5335902">scanEndObject</span>&nbsp;<span class="op" id="5335916">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335921">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335975">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335987">if</span>&nbsp;<span class="ident" id="5335990">op</span>&nbsp;<span class="op" id="5335993">!=</span>&nbsp;<span class="ident" id="5335996">scanBeginLiteral</span>&nbsp;<span class="op" id="5336013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336018">d</span><span class="op" id="5336019">.</span><span class="builtintype" id="5336020">error</span><span class="op" id="5336025">(</span><span class="ident" id="5336026">errPhase</span><span class="op" id="5336034">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336043">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336058">start</span>&nbsp;<span class="op" id="5336064">:=</span>&nbsp;<span class="ident" id="5336067">d</span><span class="op" id="5336068">.</span><span class="ident" id="5336069">off</span>&nbsp;<span class="op" id="5336073">-</span>&nbsp;<span class="num" id="5336075">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336079">op</span>&nbsp;<span class="op" id="5336082">=</span>&nbsp;<span class="ident" id="5336084">d</span><span class="op" id="5336085">.</span><span class="ident" id="5336086">scanWhile</span><span class="op" id="5336095">(</span><span class="ident" id="5336096">scanContinue</span><span class="op" id="5336108">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336112">item</span>&nbsp;<span class="op" id="5336117">:=</span>&nbsp;<span class="ident" id="5336120">d</span><span class="op" id="5336121">.</span><span class="ident" id="5336122">data</span><span class="op" id="5336126">[</span><span class="ident" id="5336127">start</span>&nbsp;<span class="op" id="5336133">:</span>&nbsp;<span class="ident" id="5336135">d</span><span class="op" id="5336136">.</span><span class="ident" id="5336137">off</span><span class="op" id="5336140">-</span><span class="num" id="5336141">1</span><span class="op" id="5336142">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336146">key</span><span class="op" id="5336149">,</span>&nbsp;<span class="ident" id="5336151">ok</span>&nbsp;<span class="op" id="5336154">:=</span>&nbsp;<span class="ident" id="5336157">unquoteBytes</span><span class="op" id="5336169">(</span><span class="ident" id="5336170">item</span><span class="op" id="5336174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336178">if</span>&nbsp;<span class="op" id="5336181">!</span><span class="ident" id="5336182">ok</span>&nbsp;<span class="op" id="5336185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336190">d</span><span class="op" id="5336191">.</span><span class="builtintype" id="5336192">error</span><span class="op" id="5336197">(</span><span class="ident" id="5336198">errPhase</span><span class="op" id="5336206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336210">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336215">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336259">var</span>&nbsp;<span class="ident" id="5336263">subv</span>&nbsp;<span class="ident" id="5336268">reflect</span><span class="op" id="5336275">.</span><span class="ident" id="5336276">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336284">destring</span>&nbsp;<span class="op" id="5336293">:=</span>&nbsp;<span class="builtintype" id="5336296">false</span>&nbsp;<span class="comment" id="5336302">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336369">if</span>&nbsp;<span class="ident" id="5336372">v</span><span class="op" id="5336373">.</span><span class="ident" id="5336374">Kind</span><span class="op" id="5336378">(</span><span class="op" id="5336379">)</span>&nbsp;<span class="op" id="5336381">==</span>&nbsp;<span class="ident" id="5336384">reflect</span><span class="op" id="5336391">.</span><span class="ident" id="5336392">Map</span>&nbsp;<span class="op" id="5336396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336401">elemType</span>&nbsp;<span class="op" id="5336410">:=</span>&nbsp;<span class="ident" id="5336413">v</span><span class="op" id="5336414">.</span><span class="ident" id="5336415">Type</span><span class="op" id="5336419">(</span><span class="op" id="5336420">)</span><span class="op" id="5336421">.</span><span class="ident" id="5336422">Elem</span><span class="op" id="5336426">(</span><span class="op" id="5336427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336432">if</span>&nbsp;<span class="op" id="5336435">!</span><span class="ident" id="5336436">mapElem</span><span class="op" id="5336443">.</span><span class="ident" id="5336444">IsValid</span><span class="op" id="5336451">(</span><span class="op" id="5336452">)</span>&nbsp;<span class="op" id="5336454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336460">mapElem</span>&nbsp;<span class="op" id="5336468">=</span>&nbsp;<span class="ident" id="5336470">reflect</span><span class="op" id="5336477">.</span><span class="ident" id="5336478">New</span><span class="op" id="5336481">(</span><span class="ident" id="5336482">elemType</span><span class="op" id="5336490">)</span><span class="op" id="5336491">.</span><span class="ident" id="5336492">Elem</span><span class="op" id="5336496">(</span><span class="op" id="5336497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336502">}</span>&nbsp;<span class="keyword" id="5336504">else</span>&nbsp;<span class="op" id="5336509">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336515">mapElem</span><span class="op" id="5336522">.</span><span class="ident" id="5336523">Set</span><span class="op" id="5336526">(</span><span class="ident" id="5336527">reflect</span><span class="op" id="5336534">.</span><span class="ident" id="5336535">Zero</span><span class="op" id="5336539">(</span><span class="ident" id="5336540">elemType</span><span class="op" id="5336548">)</span><span class="op" id="5336549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336559">subv</span>&nbsp;<span class="op" id="5336564">=</span>&nbsp;<span class="ident" id="5336566">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336576">}</span>&nbsp;<span class="keyword" id="5336578">else</span>&nbsp;<span class="op" id="5336583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336588">var</span>&nbsp;<span class="ident" id="5336592">f</span>&nbsp;<span class="op" id="5336594">*</span><span class="ident" id="5336595">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336604">fields</span>&nbsp;<span class="op" id="5336611">:=</span>&nbsp;<span class="ident" id="5336614">cachedTypeFields</span><span class="op" id="5336630">(</span><span class="ident" id="5336631">v</span><span class="op" id="5336632">.</span><span class="ident" id="5336633">Type</span><span class="op" id="5336637">(</span><span class="op" id="5336638">)</span><span class="op" id="5336639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336644">for</span>&nbsp;<span class="ident" id="5336648">i</span>&nbsp;<span class="op" id="5336650">:=</span>&nbsp;<span class="keyword" id="5336653">range</span>&nbsp;<span class="ident" id="5336659">fields</span>&nbsp;<span class="op" id="5336666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336672">ff</span>&nbsp;<span class="op" id="5336675">:=</span>&nbsp;<span class="op" id="5336678">&amp;</span><span class="ident" id="5336679">fields</span><span class="op" id="5336685">[</span><span class="ident" id="5336686">i</span><span class="op" id="5336687">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336693">if</span>&nbsp;<span class="ident" id="5336696">bytes</span><span class="op" id="5336701">.</span><span class="ident" id="5336702">Equal</span><span class="op" id="5336707">(</span><span class="ident" id="5336708">ff</span><span class="op" id="5336710">.</span><span class="ident" id="5336711">nameBytes</span><span class="op" id="5336720">,</span>&nbsp;<span class="ident" id="5336722">key</span><span class="op" id="5336725">)</span>&nbsp;<span class="op" id="5336727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336734">f</span>&nbsp;<span class="op" id="5336736">=</span>&nbsp;<span class="ident" id="5336738">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336746">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336762">if</span>&nbsp;<span class="ident" id="5336765">f</span>&nbsp;<span class="op" id="5336767">==</span>&nbsp;<span class="ident" id="5336770">nil</span>&nbsp;<span class="op" id="5336774">&amp;&amp;</span>&nbsp;<span class="ident" id="5336777">ff</span><span class="op" id="5336779">.</span><span class="ident" id="5336780">equalFold</span><span class="op" id="5336789">(</span><span class="ident" id="5336790">ff</span><span class="op" id="5336792">.</span><span class="ident" id="5336793">nameBytes</span><span class="op" id="5336802">,</span>&nbsp;<span class="ident" id="5336804">key</span><span class="op" id="5336807">)</span>&nbsp;<span class="op" id="5336809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336816">f</span>&nbsp;<span class="op" id="5336818">=</span>&nbsp;<span class="ident" id="5336820">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336827">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336837">if</span>&nbsp;<span class="ident" id="5336840">f</span>&nbsp;<span class="op" id="5336842">!=</span>&nbsp;<span class="ident" id="5336845">nil</span>&nbsp;<span class="op" id="5336849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336855">subv</span>&nbsp;<span class="op" id="5336860">=</span>&nbsp;<span class="ident" id="5336862">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336868">destring</span>&nbsp;<span class="op" id="5336877">=</span>&nbsp;<span class="ident" id="5336879">f</span><span class="op" id="5336880">.</span><span class="ident" id="5336881">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336892">for</span>&nbsp;<span class="ident" id="5336896">_</span><span class="op" id="5336897">,</span>&nbsp;<span class="ident" id="5336899">i</span>&nbsp;<span class="op" id="5336901">:=</span>&nbsp;<span class="keyword" id="5336904">range</span>&nbsp;<span class="ident" id="5336910">f</span><span class="op" id="5336911">.</span><span class="ident" id="5336912">index</span>&nbsp;<span class="op" id="5336918">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336925">if</span>&nbsp;<span class="ident" id="5336928">subv</span><span class="op" id="5336932">.</span><span class="ident" id="5336933">Kind</span><span class="op" id="5336937">(</span><span class="op" id="5336938">)</span>&nbsp;<span class="op" id="5336940">==</span>&nbsp;<span class="ident" id="5336943">reflect</span><span class="op" id="5336950">.</span><span class="ident" id="5336951">Ptr</span>&nbsp;<span class="op" id="5336955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336963">if</span>&nbsp;<span class="ident" id="5336966">subv</span><span class="op" id="5336970">.</span><span class="ident" id="5336971">IsNil</span><span class="op" id="5336976">(</span><span class="op" id="5336977">)</span>&nbsp;<span class="op" id="5336979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336988">subv</span><span class="op" id="5336992">.</span><span class="ident" id="5336993">Set</span><span class="op" id="5336996">(</span><span class="ident" id="5336997">reflect</span><span class="op" id="5337004">.</span><span class="ident" id="5337005">New</span><span class="op" id="5337008">(</span><span class="ident" id="5337009">subv</span><span class="op" id="5337013">.</span><span class="ident" id="5337014">Type</span><span class="op" id="5337018">(</span><span class="op" id="5337019">)</span><span class="op" id="5337020">.</span><span class="ident" id="5337021">Elem</span><span class="op" id="5337025">(</span><span class="op" id="5337026">)</span><span class="op" id="5337027">)</span><span class="op" id="5337028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337044">subv</span>&nbsp;<span class="op" id="5337049">=</span>&nbsp;<span class="ident" id="5337051">subv</span><span class="op" id="5337055">.</span><span class="ident" id="5337056">Elem</span><span class="op" id="5337060">(</span><span class="op" id="5337061">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337075">subv</span>&nbsp;<span class="op" id="5337080">=</span>&nbsp;<span class="ident" id="5337082">subv</span><span class="op" id="5337086">.</span><span class="ident" id="5337087">Field</span><span class="op" id="5337092">(</span><span class="ident" id="5337093">i</span><span class="op" id="5337094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337109">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337114">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337140">if</span>&nbsp;<span class="ident" id="5337143">op</span>&nbsp;<span class="op" id="5337146">==</span>&nbsp;<span class="ident" id="5337149">scanSkipSpace</span>&nbsp;<span class="op" id="5337163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337168">op</span>&nbsp;<span class="op" id="5337171">=</span>&nbsp;<span class="ident" id="5337173">d</span><span class="op" id="5337174">.</span><span class="ident" id="5337175">scanWhile</span><span class="op" id="5337184">(</span><span class="ident" id="5337185">scanSkipSpace</span><span class="op" id="5337198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337202">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337206">if</span>&nbsp;<span class="ident" id="5337209">op</span>&nbsp;<span class="op" id="5337212">!=</span>&nbsp;<span class="ident" id="5337215">scanObjectKey</span>&nbsp;<span class="op" id="5337229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337234">d</span><span class="op" id="5337235">.</span><span class="builtintype" id="5337236">error</span><span class="op" id="5337241">(</span><span class="ident" id="5337242">errPhase</span><span class="op" id="5337250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337259">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337276">if</span>&nbsp;<span class="ident" id="5337279">destring</span>&nbsp;<span class="op" id="5337288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337293">switch</span>&nbsp;<span class="ident" id="5337300">qv</span>&nbsp;<span class="op" id="5337303">:=</span>&nbsp;<span class="ident" id="5337306">d</span><span class="op" id="5337307">.</span><span class="ident" id="5337308">valueQuoted</span><span class="op" id="5337319">(</span><span class="op" id="5337320">)</span><span class="op" id="5337321">.</span><span class="op" id="5337322">(</span><span class="keyword" id="5337323">type</span><span class="op" id="5337327">)</span>&nbsp;<span class="op" id="5337329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337334">case</span>&nbsp;<span class="ident" id="5337339">nil</span><span class="op" id="5337342">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337348">d</span><span class="op" id="5337349">.</span><span class="ident" id="5337350">literalStore</span><span class="op" id="5337362">(</span><span class="ident" id="5337363">nullLiteral</span><span class="op" id="5337374">,</span>&nbsp;<span class="ident" id="5337376">subv</span><span class="op" id="5337380">,</span>&nbsp;<span class="builtintype" id="5337382">false</span><span class="op" id="5337387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337392">case</span>&nbsp;<span class="builtintype" id="5337397">string</span><span class="op" id="5337403">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337409">d</span><span class="op" id="5337410">.</span><span class="ident" id="5337411">literalStore</span><span class="op" id="5337423">(</span><span class="op" id="5337424">[</span><span class="op" id="5337425">]</span><span class="builtintype" id="5337426">byte</span><span class="op" id="5337430">(</span><span class="ident" id="5337431">qv</span><span class="op" id="5337433">)</span><span class="op" id="5337434">,</span>&nbsp;<span class="ident" id="5337436">subv</span><span class="op" id="5337440">,</span>&nbsp;<span class="builtintype" id="5337442">true</span><span class="op" id="5337446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337451">default</span><span class="op" id="5337458">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337464">d</span><span class="op" id="5337465">.</span><span class="ident" id="5337466">saveError</span><span class="op" id="5337475">(</span><span class="ident" id="5337476">fmt</span><span class="op" id="5337479">.</span><span class="ident" id="5337480">Errorf</span><span class="op" id="5337486">(</span><span class="string" id="5337487">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5337572">,</span>&nbsp;<span class="ident" id="5337574">item</span><span class="op" id="5337578">,</span>&nbsp;<span class="ident" id="5337580">v</span><span class="op" id="5337581">.</span><span class="ident" id="5337582">Type</span><span class="op" id="5337586">(</span><span class="op" id="5337587">)</span><span class="op" id="5337588">)</span><span class="op" id="5337589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337598">}</span>&nbsp;<span class="keyword" id="5337600">else</span>&nbsp;<span class="op" id="5337605">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337610">d</span><span class="op" id="5337611">.</span><span class="ident" id="5337612">value</span><span class="op" id="5337617">(</span><span class="ident" id="5337618">subv</span><span class="op" id="5337622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337631">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337661">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337716">if</span>&nbsp;<span class="ident" id="5337719">v</span><span class="op" id="5337720">.</span><span class="ident" id="5337721">Kind</span><span class="op" id="5337725">(</span><span class="op" id="5337726">)</span>&nbsp;<span class="op" id="5337728">==</span>&nbsp;<span class="ident" id="5337731">reflect</span><span class="op" id="5337738">.</span><span class="ident" id="5337739">Map</span>&nbsp;<span class="op" id="5337743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337748">kv</span>&nbsp;<span class="op" id="5337751">:=</span>&nbsp;<span class="ident" id="5337754">reflect</span><span class="op" id="5337761">.</span><span class="ident" id="5337762">ValueOf</span><span class="op" id="5337769">(</span><span class="ident" id="5337770">key</span><span class="op" id="5337773">)</span><span class="op" id="5337774">.</span><span class="ident" id="5337775">Convert</span><span class="op" id="5337782">(</span><span class="ident" id="5337783">v</span><span class="op" id="5337784">.</span><span class="ident" id="5337785">Type</span><span class="op" id="5337789">(</span><span class="op" id="5337790">)</span><span class="op" id="5337791">.</span><span class="ident" id="5337792">Key</span><span class="op" id="5337795">(</span><span class="op" id="5337796">)</span><span class="op" id="5337797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337802">v</span><span class="op" id="5337803">.</span><span class="ident" id="5337804">SetMapIndex</span><span class="op" id="5337815">(</span><span class="ident" id="5337816">kv</span><span class="op" id="5337818">,</span>&nbsp;<span class="ident" id="5337820">subv</span><span class="op" id="5337824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337833">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337865">op</span>&nbsp;<span class="op" id="5337868">=</span>&nbsp;<span class="ident" id="5337870">d</span><span class="op" id="5337871">.</span><span class="ident" id="5337872">scanWhile</span><span class="op" id="5337881">(</span><span class="ident" id="5337882">scanSkipSpace</span><span class="op" id="5337895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337899">if</span>&nbsp;<span class="ident" id="5337902">op</span>&nbsp;<span class="op" id="5337905">==</span>&nbsp;<span class="ident" id="5337908">scanEndObject</span>&nbsp;<span class="op" id="5337922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337927">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337935">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337939">if</span>&nbsp;<span class="ident" id="5337942">op</span>&nbsp;<span class="op" id="5337945">!=</span>&nbsp;<span class="ident" id="5337948">scanObjectValue</span>&nbsp;<span class="op" id="5337964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337969">d</span><span class="op" id="5337970">.</span><span class="builtintype" id="5337971">error</span><span class="op" id="5337976">(</span><span class="ident" id="5337977">errPhase</span><span class="op" id="5337985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337992">}</span><br>
<span class="lineno"></span><span class="op" id="5337994">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="5337997">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5338077">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="5338132">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="5338181">func</span>&nbsp;<span class="op" id="5338186">(</span><span class="ident" id="5338187">d</span>&nbsp;<span class="op" id="5338189">*</span><span class="ident" id="5338190">decodeState</span><span class="op" id="5338201">)</span>&nbsp;<span class="ident" id="5338203">literal</span><span class="op" id="5338210">(</span><span class="ident" id="5338211">v</span>&nbsp;<span class="ident" id="5338213">reflect</span><span class="op" id="5338220">.</span><span class="ident" id="5338221">Value</span><span class="op" id="5338226">)</span>&nbsp;<span class="op" id="5338228">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338231">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338289">start</span>&nbsp;<span class="op" id="5338295">:=</span>&nbsp;<span class="ident" id="5338298">d</span><span class="op" id="5338299">.</span><span class="ident" id="5338300">off</span>&nbsp;<span class="op" id="5338304">-</span>&nbsp;<span class="num" id="5338306">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338309">op</span>&nbsp;<span class="op" id="5338312">:=</span>&nbsp;<span class="ident" id="5338315">d</span><span class="op" id="5338316">.</span><span class="ident" id="5338317">scanWhile</span><span class="op" id="5338326">(</span><span class="ident" id="5338327">scanContinue</span><span class="op" id="5338339">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338343">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338384">d</span><span class="op" id="5338385">.</span><span class="ident" id="5338386">off</span><span class="op" id="5338389">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338393">d</span><span class="op" id="5338394">.</span><span class="ident" id="5338395">scan</span><span class="op" id="5338399">.</span><span class="ident" id="5338400">undo</span><span class="op" id="5338404">(</span><span class="ident" id="5338405">op</span><span class="op" id="5338407">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338411">d</span><span class="op" id="5338412">.</span><span class="ident" id="5338413">literalStore</span><span class="op" id="5338425">(</span><span class="ident" id="5338426">d</span><span class="op" id="5338427">.</span><span class="ident" id="5338428">data</span><span class="op" id="5338432">[</span><span class="ident" id="5338433">start</span><span class="op" id="5338438">:</span><span class="ident" id="5338439">d</span><span class="op" id="5338440">.</span><span class="ident" id="5338441">off</span><span class="op" id="5338444">]</span><span class="op" id="5338445">,</span>&nbsp;<span class="ident" id="5338447">v</span><span class="op" id="5338448">,</span>&nbsp;<span class="builtintype" id="5338450">false</span><span class="op" id="5338455">)</span><br>
<span class="lineno"></span><span class="op" id="5338457">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="5338460">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="5338532">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="5338576">func</span>&nbsp;<span class="op" id="5338581">(</span><span class="ident" id="5338582">d</span>&nbsp;<span class="op" id="5338584">*</span><span class="ident" id="5338585">decodeState</span><span class="op" id="5338596">)</span>&nbsp;<span class="ident" id="5338598">convertNumber</span><span class="op" id="5338611">(</span><span class="ident" id="5338612">s</span>&nbsp;<span class="builtintype" id="5338614">string</span><span class="op" id="5338620">)</span>&nbsp;<span class="op" id="5338622">(</span><span class="keyword" id="5338623">interface</span><span class="op" id="5338632">{</span><span class="op" id="5338633">}</span><span class="op" id="5338634">,</span>&nbsp;<span class="builtintype" id="5338636">error</span><span class="op" id="5338641">)</span>&nbsp;<span class="op" id="5338643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338646">if</span>&nbsp;<span class="ident" id="5338649">d</span><span class="op" id="5338650">.</span><span class="ident" id="5338651">useNumber</span>&nbsp;<span class="op" id="5338661">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338665">return</span>&nbsp;<span class="ident" id="5338672">Number</span><span class="op" id="5338678">(</span><span class="ident" id="5338679">s</span><span class="op" id="5338680">)</span><span class="op" id="5338681">,</span>&nbsp;<span class="ident" id="5338683">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338691">f</span><span class="op" id="5338692">,</span>&nbsp;<span class="ident" id="5338694">err</span>&nbsp;<span class="op" id="5338698">:=</span>&nbsp;<span class="ident" id="5338701">strconv</span><span class="op" id="5338708">.</span><span class="ident" id="5338709">ParseFloat</span><span class="op" id="5338719">(</span><span class="ident" id="5338720">s</span><span class="op" id="5338721">,</span>&nbsp;<span class="num" id="5338723">64</span><span class="op" id="5338725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338728">if</span>&nbsp;<span class="ident" id="5338731">err</span>&nbsp;<span class="op" id="5338735">!=</span>&nbsp;<span class="ident" id="5338738">nil</span>&nbsp;<span class="op" id="5338742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338746">return</span>&nbsp;<span class="ident" id="5338753">nil</span><span class="op" id="5338756">,</span>&nbsp;<span class="op" id="5338758">&amp;</span><span class="ident" id="5338759">UnmarshalTypeError</span><span class="op" id="5338777">{</span><span class="string" id="5338778">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5338788">+</span>&nbsp;<span class="ident" id="5338790">s</span><span class="op" id="5338791">,</span>&nbsp;<span class="ident" id="5338793">reflect</span><span class="op" id="5338800">.</span><span class="ident" id="5338801">TypeOf</span><span class="op" id="5338807">(</span><span class="num" id="5338808">0.0</span><span class="op" id="5338811">)</span><span class="op" id="5338812">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338818">return</span>&nbsp;<span class="ident" id="5338825">f</span><span class="op" id="5338826">,</span>&nbsp;<span class="ident" id="5338828">nil</span><br>
<span class="lineno"></span><span class="op" id="5338832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5338835">var</span>&nbsp;<span class="ident" id="5338839">numberType</span>&nbsp;<span class="op" id="5338850">=</span>&nbsp;<span class="ident" id="5338852">reflect</span><span class="op" id="5338859">.</span><span class="ident" id="5338860">TypeOf</span><span class="op" id="5338866">(</span><span class="ident" id="5338867">Number</span><span class="op" id="5338873">(</span><span class="string" id="5338874">&#34;&#34;</span><span class="op" id="5338876">)</span><span class="op" id="5338877">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="5338880">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5338937">//</span><br>
<span class="lineno"></span><span class="comment" id="5338940">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5339008">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="5339077">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="5339117">func</span>&nbsp;<span class="op" id="5339122">(</span><span class="ident" id="5339123">d</span>&nbsp;<span class="op" id="5339125">*</span><span class="ident" id="5339126">decodeState</span><span class="op" id="5339137">)</span>&nbsp;<span class="ident" id="5339139">literalStore</span><span class="op" id="5339151">(</span><span class="ident" id="5339152">item</span>&nbsp;<span class="op" id="5339157">[</span><span class="op" id="5339158">]</span><span class="builtintype" id="5339159">byte</span><span class="op" id="5339163">,</span>&nbsp;<span class="ident" id="5339165">v</span>&nbsp;<span class="ident" id="5339167">reflect</span><span class="op" id="5339174">.</span><span class="ident" id="5339175">Value</span><span class="op" id="5339180">,</span>&nbsp;<span class="ident" id="5339182">fromQuoted</span>&nbsp;<span class="builtintype" id="5339193">bool</span><span class="op" id="5339197">)</span>&nbsp;<span class="op" id="5339199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339202">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339229">if</span>&nbsp;<span class="builtinfunc" id="5339232">len</span><span class="op" id="5339235">(</span><span class="ident" id="5339236">item</span><span class="op" id="5339240">)</span>&nbsp;<span class="op" id="5339242">==</span>&nbsp;<span class="num" id="5339245">0</span>&nbsp;<span class="op" id="5339247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339251">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339274">d</span><span class="op" id="5339275">.</span><span class="ident" id="5339276">saveError</span><span class="op" id="5339285">(</span><span class="ident" id="5339286">fmt</span><span class="op" id="5339289">.</span><span class="ident" id="5339290">Errorf</span><span class="op" id="5339296">(</span><span class="string" id="5339297">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5339370">,</span>&nbsp;<span class="ident" id="5339372">item</span><span class="op" id="5339376">,</span>&nbsp;<span class="ident" id="5339378">v</span><span class="op" id="5339379">.</span><span class="ident" id="5339380">Type</span><span class="op" id="5339384">(</span><span class="op" id="5339385">)</span><span class="op" id="5339386">)</span><span class="op" id="5339387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339391">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339402">wantptr</span>&nbsp;<span class="op" id="5339410">:=</span>&nbsp;<span class="ident" id="5339413">item</span><span class="op" id="5339417">[</span><span class="num" id="5339418">0</span><span class="op" id="5339419">]</span>&nbsp;<span class="op" id="5339421">==</span>&nbsp;<span class="string" id="5339424">&#39;n&#39;</span>&nbsp;<span class="comment" id="5339428">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339437">u</span><span class="op" id="5339438">,</span>&nbsp;<span class="ident" id="5339440">ut</span><span class="op" id="5339442">,</span>&nbsp;<span class="ident" id="5339444">pv</span>&nbsp;<span class="op" id="5339447">:=</span>&nbsp;<span class="ident" id="5339450">d</span><span class="op" id="5339451">.</span><span class="ident" id="5339452">indirect</span><span class="op" id="5339460">(</span><span class="ident" id="5339461">v</span><span class="op" id="5339462">,</span>&nbsp;<span class="ident" id="5339464">wantptr</span><span class="op" id="5339471">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339474">if</span>&nbsp;<span class="ident" id="5339477">u</span>&nbsp;<span class="op" id="5339479">!=</span>&nbsp;<span class="ident" id="5339482">nil</span>&nbsp;<span class="op" id="5339486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339490">err</span>&nbsp;<span class="op" id="5339494">:=</span>&nbsp;<span class="ident" id="5339497">u</span><span class="op" id="5339498">.</span><span class="ident" id="5339499">UnmarshalJSON</span><span class="op" id="5339512">(</span><span class="ident" id="5339513">item</span><span class="op" id="5339517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339521">if</span>&nbsp;<span class="ident" id="5339524">err</span>&nbsp;<span class="op" id="5339528">!=</span>&nbsp;<span class="ident" id="5339531">nil</span>&nbsp;<span class="op" id="5339535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339540">d</span><span class="op" id="5339541">.</span><span class="builtintype" id="5339542">error</span><span class="op" id="5339547">(</span><span class="ident" id="5339548">err</span><span class="op" id="5339551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339555">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339559">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339570">if</span>&nbsp;<span class="ident" id="5339573">ut</span>&nbsp;<span class="op" id="5339576">!=</span>&nbsp;<span class="ident" id="5339579">nil</span>&nbsp;<span class="op" id="5339583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339587">if</span>&nbsp;<span class="ident" id="5339590">item</span><span class="op" id="5339594">[</span><span class="num" id="5339595">0</span><span class="op" id="5339596">]</span>&nbsp;<span class="op" id="5339598">!=</span>&nbsp;<span class="string" id="5339601">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5339605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339610">if</span>&nbsp;<span class="ident" id="5339613">fromQuoted</span>&nbsp;<span class="op" id="5339624">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339630">d</span><span class="op" id="5339631">.</span><span class="ident" id="5339632">saveError</span><span class="op" id="5339641">(</span><span class="ident" id="5339642">fmt</span><span class="op" id="5339645">.</span><span class="ident" id="5339646">Errorf</span><span class="op" id="5339652">(</span><span class="string" id="5339653">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5339726">,</span>&nbsp;<span class="ident" id="5339728">item</span><span class="op" id="5339732">,</span>&nbsp;<span class="ident" id="5339734">v</span><span class="op" id="5339735">.</span><span class="ident" id="5339736">Type</span><span class="op" id="5339740">(</span><span class="op" id="5339741">)</span><span class="op" id="5339742">)</span><span class="op" id="5339743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339748">}</span>&nbsp;<span class="keyword" id="5339750">else</span>&nbsp;<span class="op" id="5339755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339761">d</span><span class="op" id="5339762">.</span><span class="ident" id="5339763">saveError</span><span class="op" id="5339772">(</span><span class="op" id="5339773">&amp;</span><span class="ident" id="5339774">UnmarshalTypeError</span><span class="op" id="5339792">{</span><span class="string" id="5339793">&#34;string&#34;</span><span class="op" id="5339801">,</span>&nbsp;<span class="ident" id="5339803">v</span><span class="op" id="5339804">.</span><span class="ident" id="5339805">Type</span><span class="op" id="5339809">(</span><span class="op" id="5339810">)</span><span class="op" id="5339811">}</span><span class="op" id="5339812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339821">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339825">s</span><span class="op" id="5339826">,</span>&nbsp;<span class="ident" id="5339828">ok</span>&nbsp;<span class="op" id="5339831">:=</span>&nbsp;<span class="ident" id="5339834">unquoteBytes</span><span class="op" id="5339846">(</span><span class="ident" id="5339847">item</span><span class="op" id="5339851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339855">if</span>&nbsp;<span class="op" id="5339858">!</span><span class="ident" id="5339859">ok</span>&nbsp;<span class="op" id="5339862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339867">if</span>&nbsp;<span class="ident" id="5339870">fromQuoted</span>&nbsp;<span class="op" id="5339881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339887">d</span><span class="op" id="5339888">.</span><span class="builtintype" id="5339889">error</span><span class="op" id="5339894">(</span><span class="ident" id="5339895">fmt</span><span class="op" id="5339898">.</span><span class="ident" id="5339899">Errorf</span><span class="op" id="5339905">(</span><span class="string" id="5339906">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5339979">,</span>&nbsp;<span class="ident" id="5339981">item</span><span class="op" id="5339985">,</span>&nbsp;<span class="ident" id="5339987">v</span><span class="op" id="5339988">.</span><span class="ident" id="5339989">Type</span><span class="op" id="5339993">(</span><span class="op" id="5339994">)</span><span class="op" id="5339995">)</span><span class="op" id="5339996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340001">}</span>&nbsp;<span class="keyword" id="5340003">else</span>&nbsp;<span class="op" id="5340008">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340014">d</span><span class="op" id="5340015">.</span><span class="builtintype" id="5340016">error</span><span class="op" id="5340021">(</span><span class="ident" id="5340022">errPhase</span><span class="op" id="5340030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340043">err</span>&nbsp;<span class="op" id="5340047">:=</span>&nbsp;<span class="ident" id="5340050">ut</span><span class="op" id="5340052">.</span><span class="ident" id="5340053">UnmarshalText</span><span class="op" id="5340066">(</span><span class="ident" id="5340067">s</span><span class="op" id="5340068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340072">if</span>&nbsp;<span class="ident" id="5340075">err</span>&nbsp;<span class="op" id="5340079">!=</span>&nbsp;<span class="ident" id="5340082">nil</span>&nbsp;<span class="op" id="5340086">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340091">d</span><span class="op" id="5340092">.</span><span class="builtintype" id="5340093">error</span><span class="op" id="5340098">(</span><span class="ident" id="5340099">err</span><span class="op" id="5340102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340110">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340122">v</span>&nbsp;<span class="op" id="5340124">=</span>&nbsp;<span class="ident" id="5340126">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340131">switch</span>&nbsp;<span class="ident" id="5340138">c</span>&nbsp;<span class="op" id="5340140">:=</span>&nbsp;<span class="ident" id="5340143">item</span><span class="op" id="5340147">[</span><span class="num" id="5340148">0</span><span class="op" id="5340149">]</span><span class="op" id="5340150">;</span>&nbsp;<span class="ident" id="5340152">c</span>&nbsp;<span class="op" id="5340154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340157">case</span>&nbsp;<span class="string" id="5340162">&#39;n&#39;</span><span class="op" id="5340165">:</span>&nbsp;<span class="comment" id="5340167">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340177">switch</span>&nbsp;<span class="ident" id="5340184">v</span><span class="op" id="5340185">.</span><span class="ident" id="5340186">Kind</span><span class="op" id="5340190">(</span><span class="op" id="5340191">)</span>&nbsp;<span class="op" id="5340193">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340197">case</span>&nbsp;<span class="ident" id="5340202">reflect</span><span class="op" id="5340209">.</span><span class="ident" id="5340210">Interface</span><span class="op" id="5340219">,</span>&nbsp;<span class="ident" id="5340221">reflect</span><span class="op" id="5340228">.</span><span class="ident" id="5340229">Ptr</span><span class="op" id="5340232">,</span>&nbsp;<span class="ident" id="5340234">reflect</span><span class="op" id="5340241">.</span><span class="ident" id="5340242">Map</span><span class="op" id="5340245">,</span>&nbsp;<span class="ident" id="5340247">reflect</span><span class="op" id="5340254">.</span><span class="ident" id="5340255">Slice</span><span class="op" id="5340260">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340265">v</span><span class="op" id="5340266">.</span><span class="ident" id="5340267">Set</span><span class="op" id="5340270">(</span><span class="ident" id="5340271">reflect</span><span class="op" id="5340278">.</span><span class="ident" id="5340279">Zero</span><span class="op" id="5340283">(</span><span class="ident" id="5340284">v</span><span class="op" id="5340285">.</span><span class="ident" id="5340286">Type</span><span class="op" id="5340290">(</span><span class="op" id="5340291">)</span><span class="op" id="5340292">)</span><span class="op" id="5340293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340298">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340351">case</span>&nbsp;<span class="string" id="5340356">&#39;t&#39;</span><span class="op" id="5340359">,</span>&nbsp;<span class="string" id="5340361">&#39;f&#39;</span><span class="op" id="5340364">:</span>&nbsp;<span class="comment" id="5340366">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340383">value</span>&nbsp;<span class="op" id="5340389">:=</span>&nbsp;<span class="ident" id="5340392">c</span>&nbsp;<span class="op" id="5340394">==</span>&nbsp;<span class="string" id="5340397">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340403">switch</span>&nbsp;<span class="ident" id="5340410">v</span><span class="op" id="5340411">.</span><span class="ident" id="5340412">Kind</span><span class="op" id="5340416">(</span><span class="op" id="5340417">)</span>&nbsp;<span class="op" id="5340419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340423">default</span><span class="op" id="5340430">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340435">if</span>&nbsp;<span class="ident" id="5340438">fromQuoted</span>&nbsp;<span class="op" id="5340449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340455">d</span><span class="op" id="5340456">.</span><span class="ident" id="5340457">saveError</span><span class="op" id="5340466">(</span><span class="ident" id="5340467">fmt</span><span class="op" id="5340470">.</span><span class="ident" id="5340471">Errorf</span><span class="op" id="5340477">(</span><span class="string" id="5340478">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5340551">,</span>&nbsp;<span class="ident" id="5340553">item</span><span class="op" id="5340557">,</span>&nbsp;<span class="ident" id="5340559">v</span><span class="op" id="5340560">.</span><span class="ident" id="5340561">Type</span><span class="op" id="5340565">(</span><span class="op" id="5340566">)</span><span class="op" id="5340567">)</span><span class="op" id="5340568">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340573">}</span>&nbsp;<span class="keyword" id="5340575">else</span>&nbsp;<span class="op" id="5340580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340586">d</span><span class="op" id="5340587">.</span><span class="ident" id="5340588">saveError</span><span class="op" id="5340597">(</span><span class="op" id="5340598">&amp;</span><span class="ident" id="5340599">UnmarshalTypeError</span><span class="op" id="5340617">{</span><span class="string" id="5340618">&#34;bool&#34;</span><span class="op" id="5340624">,</span>&nbsp;<span class="ident" id="5340626">v</span><span class="op" id="5340627">.</span><span class="ident" id="5340628">Type</span><span class="op" id="5340632">(</span><span class="op" id="5340633">)</span><span class="op" id="5340634">}</span><span class="op" id="5340635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340644">case</span>&nbsp;<span class="ident" id="5340649">reflect</span><span class="op" id="5340656">.</span><span class="ident" id="5340657">Bool</span><span class="op" id="5340661">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340666">v</span><span class="op" id="5340667">.</span><span class="ident" id="5340668">SetBool</span><span class="op" id="5340675">(</span><span class="ident" id="5340676">value</span><span class="op" id="5340681">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340685">case</span>&nbsp;<span class="ident" id="5340690">reflect</span><span class="op" id="5340697">.</span><span class="ident" id="5340698">Interface</span><span class="op" id="5340707">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340712">if</span>&nbsp;<span class="ident" id="5340715">v</span><span class="op" id="5340716">.</span><span class="ident" id="5340717">NumMethod</span><span class="op" id="5340726">(</span><span class="op" id="5340727">)</span>&nbsp;<span class="op" id="5340729">==</span>&nbsp;<span class="num" id="5340732">0</span>&nbsp;<span class="op" id="5340734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340740">v</span><span class="op" id="5340741">.</span><span class="ident" id="5340742">Set</span><span class="op" id="5340745">(</span><span class="ident" id="5340746">reflect</span><span class="op" id="5340753">.</span><span class="ident" id="5340754">ValueOf</span><span class="op" id="5340761">(</span><span class="ident" id="5340762">value</span><span class="op" id="5340767">)</span><span class="op" id="5340768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340773">}</span>&nbsp;<span class="keyword" id="5340775">else</span>&nbsp;<span class="op" id="5340780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340786">d</span><span class="op" id="5340787">.</span><span class="ident" id="5340788">saveError</span><span class="op" id="5340797">(</span><span class="op" id="5340798">&amp;</span><span class="ident" id="5340799">UnmarshalTypeError</span><span class="op" id="5340817">{</span><span class="string" id="5340818">&#34;bool&#34;</span><span class="op" id="5340824">,</span>&nbsp;<span class="ident" id="5340826">v</span><span class="op" id="5340827">.</span><span class="ident" id="5340828">Type</span><span class="op" id="5340832">(</span><span class="op" id="5340833">)</span><span class="op" id="5340834">}</span><span class="op" id="5340835">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340848">case</span>&nbsp;<span class="string" id="5340853">&#39;&#34;&#39;</span><span class="op" id="5340856">:</span>&nbsp;<span class="comment" id="5340858">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340870">s</span><span class="op" id="5340871">,</span>&nbsp;<span class="ident" id="5340873">ok</span>&nbsp;<span class="op" id="5340876">:=</span>&nbsp;<span class="ident" id="5340879">unquoteBytes</span><span class="op" id="5340891">(</span><span class="ident" id="5340892">item</span><span class="op" id="5340896">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340900">if</span>&nbsp;<span class="op" id="5340903">!</span><span class="ident" id="5340904">ok</span>&nbsp;<span class="op" id="5340907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340912">if</span>&nbsp;<span class="ident" id="5340915">fromQuoted</span>&nbsp;<span class="op" id="5340926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340932">d</span><span class="op" id="5340933">.</span><span class="builtintype" id="5340934">error</span><span class="op" id="5340939">(</span><span class="ident" id="5340940">fmt</span><span class="op" id="5340943">.</span><span class="ident" id="5340944">Errorf</span><span class="op" id="5340950">(</span><span class="string" id="5340951">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5341024">,</span>&nbsp;<span class="ident" id="5341026">item</span><span class="op" id="5341030">,</span>&nbsp;<span class="ident" id="5341032">v</span><span class="op" id="5341033">.</span><span class="ident" id="5341034">Type</span><span class="op" id="5341038">(</span><span class="op" id="5341039">)</span><span class="op" id="5341040">)</span><span class="op" id="5341041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341046">}</span>&nbsp;<span class="keyword" id="5341048">else</span>&nbsp;<span class="op" id="5341053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341059">d</span><span class="op" id="5341060">.</span><span class="builtintype" id="5341061">error</span><span class="op" id="5341066">(</span><span class="ident" id="5341067">errPhase</span><span class="op" id="5341075">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341088">switch</span>&nbsp;<span class="ident" id="5341095">v</span><span class="op" id="5341096">.</span><span class="ident" id="5341097">Kind</span><span class="op" id="5341101">(</span><span class="op" id="5341102">)</span>&nbsp;<span class="op" id="5341104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341108">default</span><span class="op" id="5341115">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341120">d</span><span class="op" id="5341121">.</span><span class="ident" id="5341122">saveError</span><span class="op" id="5341131">(</span><span class="op" id="5341132">&amp;</span><span class="ident" id="5341133">UnmarshalTypeError</span><span class="op" id="5341151">{</span><span class="string" id="5341152">&#34;string&#34;</span><span class="op" id="5341160">,</span>&nbsp;<span class="ident" id="5341162">v</span><span class="op" id="5341163">.</span><span class="ident" id="5341164">Type</span><span class="op" id="5341168">(</span><span class="op" id="5341169">)</span><span class="op" id="5341170">}</span><span class="op" id="5341171">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341175">case</span>&nbsp;<span class="ident" id="5341180">reflect</span><span class="op" id="5341187">.</span><span class="ident" id="5341188">Slice</span><span class="op" id="5341193">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341198">if</span>&nbsp;<span class="ident" id="5341201">v</span><span class="op" id="5341202">.</span><span class="ident" id="5341203">Type</span><span class="op" id="5341207">(</span><span class="op" id="5341208">)</span>&nbsp;<span class="op" id="5341210">!=</span>&nbsp;<span class="ident" id="5341213">byteSliceType</span>&nbsp;<span class="op" id="5341227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341233">d</span><span class="op" id="5341234">.</span><span class="ident" id="5341235">saveError</span><span class="op" id="5341244">(</span><span class="op" id="5341245">&amp;</span><span class="ident" id="5341246">UnmarshalTypeError</span><span class="op" id="5341264">{</span><span class="string" id="5341265">&#34;string&#34;</span><span class="op" id="5341273">,</span>&nbsp;<span class="ident" id="5341275">v</span><span class="op" id="5341276">.</span><span class="ident" id="5341277">Type</span><span class="op" id="5341281">(</span><span class="op" id="5341282">)</span><span class="op" id="5341283">}</span><span class="op" id="5341284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341290">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341299">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341304">b</span>&nbsp;<span class="op" id="5341306">:=</span>&nbsp;<span class="builtinfunc" id="5341309">make</span><span class="op" id="5341313">(</span><span class="op" id="5341314">[</span><span class="op" id="5341315">]</span><span class="builtintype" id="5341316">byte</span><span class="op" id="5341320">,</span>&nbsp;<span class="ident" id="5341322">base64</span><span class="op" id="5341328">.</span><span class="ident" id="5341329">StdEncoding</span><span class="op" id="5341340">.</span><span class="ident" id="5341341">DecodedLen</span><span class="op" id="5341351">(</span><span class="builtinfunc" id="5341352">len</span><span class="op" id="5341355">(</span><span class="ident" id="5341356">s</span><span class="op" id="5341357">)</span><span class="op" id="5341358">)</span><span class="op" id="5341359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341364">n</span><span class="op" id="5341365">,</span>&nbsp;<span class="ident" id="5341367">err</span>&nbsp;<span class="op" id="5341371">:=</span>&nbsp;<span class="ident" id="5341374">base64</span><span class="op" id="5341380">.</span><span class="ident" id="5341381">StdEncoding</span><span class="op" id="5341392">.</span><span class="ident" id="5341393">Decode</span><span class="op" id="5341399">(</span><span class="ident" id="5341400">b</span><span class="op" id="5341401">,</span>&nbsp;<span class="ident" id="5341403">s</span><span class="op" id="5341404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341409">if</span>&nbsp;<span class="ident" id="5341412">err</span>&nbsp;<span class="op" id="5341416">!=</span>&nbsp;<span class="ident" id="5341419">nil</span>&nbsp;<span class="op" id="5341423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341429">d</span><span class="op" id="5341430">.</span><span class="ident" id="5341431">saveError</span><span class="op" id="5341440">(</span><span class="ident" id="5341441">err</span><span class="op" id="5341444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341450">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341464">v</span><span class="op" id="5341465">.</span><span class="ident" id="5341466">Set</span><span class="op" id="5341469">(</span><span class="ident" id="5341470">reflect</span><span class="op" id="5341477">.</span><span class="ident" id="5341478">ValueOf</span><span class="op" id="5341485">(</span><span class="ident" id="5341486">b</span><span class="op" id="5341487">[</span><span class="num" id="5341488">0</span><span class="op" id="5341489">:</span><span class="ident" id="5341490">n</span><span class="op" id="5341491">]</span><span class="op" id="5341492">)</span><span class="op" id="5341493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341497">case</span>&nbsp;<span class="ident" id="5341502">reflect</span><span class="op" id="5341509">.</span><span class="ident" id="5341510">String</span><span class="op" id="5341516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341521">v</span><span class="op" id="5341522">.</span><span class="ident" id="5341523">SetString</span><span class="op" id="5341532">(</span><span class="builtintype" id="5341533">string</span><span class="op" id="5341539">(</span><span class="ident" id="5341540">s</span><span class="op" id="5341541">)</span><span class="op" id="5341542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341546">case</span>&nbsp;<span class="ident" id="5341551">reflect</span><span class="op" id="5341558">.</span><span class="ident" id="5341559">Interface</span><span class="op" id="5341568">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341573">if</span>&nbsp;<span class="ident" id="5341576">v</span><span class="op" id="5341577">.</span><span class="ident" id="5341578">NumMethod</span><span class="op" id="5341587">(</span><span class="op" id="5341588">)</span>&nbsp;<span class="op" id="5341590">==</span>&nbsp;<span class="num" id="5341593">0</span>&nbsp;<span class="op" id="5341595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341601">v</span><span class="op" id="5341602">.</span><span class="ident" id="5341603">Set</span><span class="op" id="5341606">(</span><span class="ident" id="5341607">reflect</span><span class="op" id="5341614">.</span><span class="ident" id="5341615">ValueOf</span><span class="op" id="5341622">(</span><span class="builtintype" id="5341623">string</span><span class="op" id="5341629">(</span><span class="ident" id="5341630">s</span><span class="op" id="5341631">)</span><span class="op" id="5341632">)</span><span class="op" id="5341633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341638">}</span>&nbsp;<span class="keyword" id="5341640">else</span>&nbsp;<span class="op" id="5341645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341651">d</span><span class="op" id="5341652">.</span><span class="ident" id="5341653">saveError</span><span class="op" id="5341662">(</span><span class="op" id="5341663">&amp;</span><span class="ident" id="5341664">UnmarshalTypeError</span><span class="op" id="5341682">{</span><span class="string" id="5341683">&#34;string&#34;</span><span class="op" id="5341691">,</span>&nbsp;<span class="ident" id="5341693">v</span><span class="op" id="5341694">.</span><span class="ident" id="5341695">Type</span><span class="op" id="5341699">(</span><span class="op" id="5341700">)</span><span class="op" id="5341701">}</span><span class="op" id="5341702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341707">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341715">default</span><span class="op" id="5341722">:</span>&nbsp;<span class="comment" id="5341724">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341736">if</span>&nbsp;<span class="ident" id="5341739">c</span>&nbsp;<span class="op" id="5341741">!=</span>&nbsp;<span class="string" id="5341744">&#39;-&#39;</span>&nbsp;<span class="op" id="5341748">&amp;&amp;</span>&nbsp;<span class="op" id="5341751">(</span><span class="ident" id="5341752">c</span>&nbsp;<span class="op" id="5341754">&lt;</span>&nbsp;<span class="string" id="5341756">&#39;0&#39;</span>&nbsp;<span class="op" id="5341760">||</span>&nbsp;<span class="ident" id="5341763">c</span>&nbsp;<span class="op" id="5341765">&gt;</span>&nbsp;<span class="string" id="5341767">&#39;9&#39;</span><span class="op" id="5341770">)</span>&nbsp;<span class="op" id="5341772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341777">if</span>&nbsp;<span class="ident" id="5341780">fromQuoted</span>&nbsp;<span class="op" id="5341791">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341797">d</span><span class="op" id="5341798">.</span><span class="builtintype" id="5341799">error</span><span class="op" id="5341804">(</span><span class="ident" id="5341805">fmt</span><span class="op" id="5341808">.</span><span class="ident" id="5341809">Errorf</span><span class="op" id="5341815">(</span><span class="string" id="5341816">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5341889">,</span>&nbsp;<span class="ident" id="5341891">item</span><span class="op" id="5341895">,</span>&nbsp;<span class="ident" id="5341897">v</span><span class="op" id="5341898">.</span><span class="ident" id="5341899">Type</span><span class="op" id="5341903">(</span><span class="op" id="5341904">)</span><span class="op" id="5341905">)</span><span class="op" id="5341906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341911">}</span>&nbsp;<span class="keyword" id="5341913">else</span>&nbsp;<span class="op" id="5341918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341924">d</span><span class="op" id="5341925">.</span><span class="builtintype" id="5341926">error</span><span class="op" id="5341931">(</span><span class="ident" id="5341932">errPhase</span><span class="op" id="5341940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341949">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341953">s</span>&nbsp;<span class="op" id="5341955">:=</span>&nbsp;<span class="builtintype" id="5341958">string</span><span class="op" id="5341964">(</span><span class="ident" id="5341965">item</span><span class="op" id="5341969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341973">switch</span>&nbsp;<span class="ident" id="5341980">v</span><span class="op" id="5341981">.</span><span class="ident" id="5341982">Kind</span><span class="op" id="5341986">(</span><span class="op" id="5341987">)</span>&nbsp;<span class="op" id="5341989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341993">default</span><span class="op" id="5342000">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342005">if</span>&nbsp;<span class="ident" id="5342008">v</span><span class="op" id="5342009">.</span><span class="ident" id="5342010">Kind</span><span class="op" id="5342014">(</span><span class="op" id="5342015">)</span>&nbsp;<span class="op" id="5342017">==</span>&nbsp;<span class="ident" id="5342020">reflect</span><span class="op" id="5342027">.</span><span class="ident" id="5342028">String</span>&nbsp;<span class="op" id="5342035">&amp;&amp;</span>&nbsp;<span class="ident" id="5342038">v</span><span class="op" id="5342039">.</span><span class="ident" id="5342040">Type</span><span class="op" id="5342044">(</span><span class="op" id="5342045">)</span>&nbsp;<span class="op" id="5342047">==</span>&nbsp;<span class="ident" id="5342050">numberType</span>&nbsp;<span class="op" id="5342061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342067">v</span><span class="op" id="5342068">.</span><span class="ident" id="5342069">SetString</span><span class="op" id="5342078">(</span><span class="ident" id="5342079">s</span><span class="op" id="5342080">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342086">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342100">if</span>&nbsp;<span class="ident" id="5342103">fromQuoted</span>&nbsp;<span class="op" id="5342114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342120">d</span><span class="op" id="5342121">.</span><span class="builtintype" id="5342122">error</span><span class="op" id="5342127">(</span><span class="ident" id="5342128">fmt</span><span class="op" id="5342131">.</span><span class="ident" id="5342132">Errorf</span><span class="op" id="5342138">(</span><span class="string" id="5342139">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5342212">,</span>&nbsp;<span class="ident" id="5342214">item</span><span class="op" id="5342218">,</span>&nbsp;<span class="ident" id="5342220">v</span><span class="op" id="5342221">.</span><span class="ident" id="5342222">Type</span><span class="op" id="5342226">(</span><span class="op" id="5342227">)</span><span class="op" id="5342228">)</span><span class="op" id="5342229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342234">}</span>&nbsp;<span class="keyword" id="5342236">else</span>&nbsp;<span class="op" id="5342241">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342247">d</span><span class="op" id="5342248">.</span><span class="builtintype" id="5342249">error</span><span class="op" id="5342254">(</span><span class="op" id="5342255">&amp;</span><span class="ident" id="5342256">UnmarshalTypeError</span><span class="op" id="5342274">{</span><span class="string" id="5342275">&#34;number&#34;</span><span class="op" id="5342283">,</span>&nbsp;<span class="ident" id="5342285">v</span><span class="op" id="5342286">.</span><span class="ident" id="5342287">Type</span><span class="op" id="5342291">(</span><span class="op" id="5342292">)</span><span class="op" id="5342293">}</span><span class="op" id="5342294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342303">case</span>&nbsp;<span class="ident" id="5342308">reflect</span><span class="op" id="5342315">.</span><span class="ident" id="5342316">Interface</span><span class="op" id="5342325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342330">n</span><span class="op" id="5342331">,</span>&nbsp;<span class="ident" id="5342333">err</span>&nbsp;<span class="op" id="5342337">:=</span>&nbsp;<span class="ident" id="5342340">d</span><span class="op" id="5342341">.</span><span class="ident" id="5342342">convertNumber</span><span class="op" id="5342355">(</span><span class="ident" id="5342356">s</span><span class="op" id="5342357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342362">if</span>&nbsp;<span class="ident" id="5342365">err</span>&nbsp;<span class="op" id="5342369">!=</span>&nbsp;<span class="ident" id="5342372">nil</span>&nbsp;<span class="op" id="5342376">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342382">d</span><span class="op" id="5342383">.</span><span class="ident" id="5342384">saveError</span><span class="op" id="5342393">(</span><span class="ident" id="5342394">err</span><span class="op" id="5342397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342403">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342417">if</span>&nbsp;<span class="ident" id="5342420">v</span><span class="op" id="5342421">.</span><span class="ident" id="5342422">NumMethod</span><span class="op" id="5342431">(</span><span class="op" id="5342432">)</span>&nbsp;<span class="op" id="5342434">!=</span>&nbsp;<span class="num" id="5342437">0</span>&nbsp;<span class="op" id="5342439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342445">d</span><span class="op" id="5342446">.</span><span class="ident" id="5342447">saveError</span><span class="op" id="5342456">(</span><span class="op" id="5342457">&amp;</span><span class="ident" id="5342458">UnmarshalTypeError</span><span class="op" id="5342476">{</span><span class="string" id="5342477">&#34;number&#34;</span><span class="op" id="5342485">,</span>&nbsp;<span class="ident" id="5342487">v</span><span class="op" id="5342488">.</span><span class="ident" id="5342489">Type</span><span class="op" id="5342493">(</span><span class="op" id="5342494">)</span><span class="op" id="5342495">}</span><span class="op" id="5342496">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342502">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342516">v</span><span class="op" id="5342517">.</span><span class="ident" id="5342518">Set</span><span class="op" id="5342521">(</span><span class="ident" id="5342522">reflect</span><span class="op" id="5342529">.</span><span class="ident" id="5342530">ValueOf</span><span class="op" id="5342537">(</span><span class="ident" id="5342538">n</span><span class="op" id="5342539">)</span><span class="op" id="5342540">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342545">case</span>&nbsp;<span class="ident" id="5342550">reflect</span><span class="op" id="5342557">.</span><span class="ident" id="5342558">Int</span><span class="op" id="5342561">,</span>&nbsp;<span class="ident" id="5342563">reflect</span><span class="op" id="5342570">.</span><span class="ident" id="5342571">Int8</span><span class="op" id="5342575">,</span>&nbsp;<span class="ident" id="5342577">reflect</span><span class="op" id="5342584">.</span><span class="ident" id="5342585">Int16</span><span class="op" id="5342590">,</span>&nbsp;<span class="ident" id="5342592">reflect</span><span class="op" id="5342599">.</span><span class="ident" id="5342600">Int32</span><span class="op" id="5342605">,</span>&nbsp;<span class="ident" id="5342607">reflect</span><span class="op" id="5342614">.</span><span class="ident" id="5342615">Int64</span><span class="op" id="5342620">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342625">n</span><span class="op" id="5342626">,</span>&nbsp;<span class="ident" id="5342628">err</span>&nbsp;<span class="op" id="5342632">:=</span>&nbsp;<span class="ident" id="5342635">strconv</span><span class="op" id="5342642">.</span><span class="ident" id="5342643">ParseInt</span><span class="op" id="5342651">(</span><span class="ident" id="5342652">s</span><span class="op" id="5342653">,</span>&nbsp;<span class="num" id="5342655">10</span><span class="op" id="5342657">,</span>&nbsp;<span class="num" id="5342659">64</span><span class="op" id="5342661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342666">if</span>&nbsp;<span class="ident" id="5342669">err</span>&nbsp;<span class="op" id="5342673">!=</span>&nbsp;<span class="ident" id="5342676">nil</span>&nbsp;<span class="op" id="5342680">||</span>&nbsp;<span class="ident" id="5342683">v</span><span class="op" id="5342684">.</span><span class="ident" id="5342685">OverflowInt</span><span class="op" id="5342696">(</span><span class="ident" id="5342697">n</span><span class="op" id="5342698">)</span>&nbsp;<span class="op" id="5342700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342706">d</span><span class="op" id="5342707">.</span><span class="ident" id="5342708">saveError</span><span class="op" id="5342717">(</span><span class="op" id="5342718">&amp;</span><span class="ident" id="5342719">UnmarshalTypeError</span><span class="op" id="5342737">{</span><span class="string" id="5342738">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5342748">+</span>&nbsp;<span class="ident" id="5342750">s</span><span class="op" id="5342751">,</span>&nbsp;<span class="ident" id="5342753">v</span><span class="op" id="5342754">.</span><span class="ident" id="5342755">Type</span><span class="op" id="5342759">(</span><span class="op" id="5342760">)</span><span class="op" id="5342761">}</span><span class="op" id="5342762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342768">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342777">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342782">v</span><span class="op" id="5342783">.</span><span class="ident" id="5342784">SetInt</span><span class="op" id="5342790">(</span><span class="ident" id="5342791">n</span><span class="op" id="5342792">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342797">case</span>&nbsp;<span class="ident" id="5342802">reflect</span><span class="op" id="5342809">.</span><span class="ident" id="5342810">Uint</span><span class="op" id="5342814">,</span>&nbsp;<span class="ident" id="5342816">reflect</span><span class="op" id="5342823">.</span><span class="ident" id="5342824">Uint8</span><span class="op" id="5342829">,</span>&nbsp;<span class="ident" id="5342831">reflect</span><span class="op" id="5342838">.</span><span class="ident" id="5342839">Uint16</span><span class="op" id="5342845">,</span>&nbsp;<span class="ident" id="5342847">reflect</span><span class="op" id="5342854">.</span><span class="ident" id="5342855">Uint32</span><span class="op" id="5342861">,</span>&nbsp;<span class="ident" id="5342863">reflect</span><span class="op" id="5342870">.</span><span class="ident" id="5342871">Uint64</span><span class="op" id="5342877">,</span>&nbsp;<span class="ident" id="5342879">reflect</span><span class="op" id="5342886">.</span><span class="ident" id="5342887">Uintptr</span><span class="op" id="5342894">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342899">n</span><span class="op" id="5342900">,</span>&nbsp;<span class="ident" id="5342902">err</span>&nbsp;<span class="op" id="5342906">:=</span>&nbsp;<span class="ident" id="5342909">strconv</span><span class="op" id="5342916">.</span><span class="ident" id="5342917">ParseUint</span><span class="op" id="5342926">(</span><span class="ident" id="5342927">s</span><span class="op" id="5342928">,</span>&nbsp;<span class="num" id="5342930">10</span><span class="op" id="5342932">,</span>&nbsp;<span class="num" id="5342934">64</span><span class="op" id="5342936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342941">if</span>&nbsp;<span class="ident" id="5342944">err</span>&nbsp;<span class="op" id="5342948">!=</span>&nbsp;<span class="ident" id="5342951">nil</span>&nbsp;<span class="op" id="5342955">||</span>&nbsp;<span class="ident" id="5342958">v</span><span class="op" id="5342959">.</span><span class="ident" id="5342960">OverflowUint</span><span class="op" id="5342972">(</span><span class="ident" id="5342973">n</span><span class="op" id="5342974">)</span>&nbsp;<span class="op" id="5342976">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342982">d</span><span class="op" id="5342983">.</span><span class="ident" id="5342984">saveError</span><span class="op" id="5342993">(</span><span class="op" id="5342994">&amp;</span><span class="ident" id="5342995">UnmarshalTypeError</span><span class="op" id="5343013">{</span><span class="string" id="5343014">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5343024">+</span>&nbsp;<span class="ident" id="5343026">s</span><span class="op" id="5343027">,</span>&nbsp;<span class="ident" id="5343029">v</span><span class="op" id="5343030">.</span><span class="ident" id="5343031">Type</span><span class="op" id="5343035">(</span><span class="op" id="5343036">)</span><span class="op" id="5343037">}</span><span class="op" id="5343038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343044">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343058">v</span><span class="op" id="5343059">.</span><span class="ident" id="5343060">SetUint</span><span class="op" id="5343067">(</span><span class="ident" id="5343068">n</span><span class="op" id="5343069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343074">case</span>&nbsp;<span class="ident" id="5343079">reflect</span><span class="op" id="5343086">.</span><span class="ident" id="5343087">Float32</span><span class="op" id="5343094">,</span>&nbsp;<span class="ident" id="5343096">reflect</span><span class="op" id="5343103">.</span><span class="ident" id="5343104">Float64</span><span class="op" id="5343111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343116">n</span><span class="op" id="5343117">,</span>&nbsp;<span class="ident" id="5343119">err</span>&nbsp;<span class="op" id="5343123">:=</span>&nbsp;<span class="ident" id="5343126">strconv</span><span class="op" id="5343133">.</span><span class="ident" id="5343134">ParseFloat</span><span class="op" id="5343144">(</span><span class="ident" id="5343145">s</span><span class="op" id="5343146">,</span>&nbsp;<span class="ident" id="5343148">v</span><span class="op" id="5343149">.</span><span class="ident" id="5343150">Type</span><span class="op" id="5343154">(</span><span class="op" id="5343155">)</span><span class="op" id="5343156">.</span><span class="ident" id="5343157">Bits</span><span class="op" id="5343161">(</span><span class="op" id="5343162">)</span><span class="op" id="5343163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343168">if</span>&nbsp;<span class="ident" id="5343171">err</span>&nbsp;<span class="op" id="5343175">!=</span>&nbsp;<span class="ident" id="5343178">nil</span>&nbsp;<span class="op" id="5343182">||</span>&nbsp;<span class="ident" id="5343185">v</span><span class="op" id="5343186">.</span><span class="ident" id="5343187">OverflowFloat</span><span class="op" id="5343200">(</span><span class="ident" id="5343201">n</span><span class="op" id="5343202">)</span>&nbsp;<span class="op" id="5343204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343210">d</span><span class="op" id="5343211">.</span><span class="ident" id="5343212">saveError</span><span class="op" id="5343221">(</span><span class="op" id="5343222">&amp;</span><span class="ident" id="5343223">UnmarshalTypeError</span><span class="op" id="5343241">{</span><span class="string" id="5343242">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5343252">+</span>&nbsp;<span class="ident" id="5343254">s</span><span class="op" id="5343255">,</span>&nbsp;<span class="ident" id="5343257">v</span><span class="op" id="5343258">.</span><span class="ident" id="5343259">Type</span><span class="op" id="5343263">(</span><span class="op" id="5343264">)</span><span class="op" id="5343265">}</span><span class="op" id="5343266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343272">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343286">v</span><span class="op" id="5343287">.</span><span class="ident" id="5343288">SetFloat</span><span class="op" id="5343296">(</span><span class="ident" id="5343297">n</span><span class="op" id="5343298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343305">}</span><br>
<span class="lineno"></span><span class="op" id="5343307">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="5343310">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="5343369">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="5343429">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="5343494">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="5343550">func</span>&nbsp;<span class="op" id="5343555">(</span><span class="ident" id="5343556">d</span>&nbsp;<span class="op" id="5343558">*</span><span class="ident" id="5343559">decodeState</span><span class="op" id="5343570">)</span>&nbsp;<span class="ident" id="5343572">valueInterface</span><span class="op" id="5343586">(</span><span class="op" id="5343587">)</span>&nbsp;<span class="keyword" id="5343589">interface</span><span class="op" id="5343598">{</span><span class="op" id="5343599">}</span>&nbsp;<span class="op" id="5343601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343604">switch</span>&nbsp;<span class="ident" id="5343611">d</span><span class="op" id="5343612">.</span><span class="ident" id="5343613">scanWhile</span><span class="op" id="5343622">(</span><span class="ident" id="5343623">scanSkipSpace</span><span class="op" id="5343636">)</span>&nbsp;<span class="op" id="5343638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343641">default</span><span class="op" id="5343648">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343652">d</span><span class="op" id="5343653">.</span><span class="builtintype" id="5343654">error</span><span class="op" id="5343659">(</span><span class="ident" id="5343660">errPhase</span><span class="op" id="5343668">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5343672">panic</span><span class="op" id="5343677">(</span><span class="string" id="5343678">&#34;unreachable&#34;</span><span class="op" id="5343691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343694">case</span>&nbsp;<span class="ident" id="5343699">scanBeginArray</span><span class="op" id="5343713">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343717">return</span>&nbsp;<span class="ident" id="5343724">d</span><span class="op" id="5343725">.</span><span class="ident" id="5343726">arrayInterface</span><span class="op" id="5343740">(</span><span class="op" id="5343741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343744">case</span>&nbsp;<span class="ident" id="5343749">scanBeginObject</span><span class="op" id="5343764">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343768">return</span>&nbsp;<span class="ident" id="5343775">d</span><span class="op" id="5343776">.</span><span class="ident" id="5343777">objectInterface</span><span class="op" id="5343792">(</span><span class="op" id="5343793">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343796">case</span>&nbsp;<span class="ident" id="5343801">scanBeginLiteral</span><span class="op" id="5343817">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343821">return</span>&nbsp;<span class="ident" id="5343828">d</span><span class="op" id="5343829">.</span><span class="ident" id="5343830">literalInterface</span><span class="op" id="5343846">(</span><span class="op" id="5343847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343850">}</span><br>
<span class="lineno"></span><span class="op" id="5343852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="5343855">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5343914">func</span>&nbsp;<span class="op" id="5343919">(</span><span class="ident" id="5343920">d</span>&nbsp;<span class="op" id="5343922">*</span><span class="ident" id="5343923">decodeState</span><span class="op" id="5343934">)</span>&nbsp;<span class="ident" id="5343936">arrayInterface</span><span class="op" id="5343950">(</span><span class="op" id="5343951">)</span>&nbsp;<span class="op" id="5343953">[</span><span class="op" id="5343954">]</span><span class="keyword" id="5343955">interface</span><span class="op" id="5343964">{</span><span class="op" id="5343965">}</span>&nbsp;<span class="op" id="5343967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343970">var</span>&nbsp;<span class="ident" id="5343974">v</span>&nbsp;<span class="op" id="5343976">=</span>&nbsp;<span class="builtinfunc" id="5343978">make</span><span class="op" id="5343982">(</span><span class="op" id="5343983">[</span><span class="op" id="5343984">]</span><span class="keyword" id="5343985">interface</span><span class="op" id="5343994">{</span><span class="op" id="5343995">}</span><span class="op" id="5343996">,</span>&nbsp;<span class="num" id="5343998">0</span><span class="op" id="5343999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344002">for</span>&nbsp;<span class="op" id="5344006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344010">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344070">op</span>&nbsp;<span class="op" id="5344073">:=</span>&nbsp;<span class="ident" id="5344076">d</span><span class="op" id="5344077">.</span><span class="ident" id="5344078">scanWhile</span><span class="op" id="5344087">(</span><span class="ident" id="5344088">scanSkipSpace</span><span class="op" id="5344101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344105">if</span>&nbsp;<span class="ident" id="5344108">op</span>&nbsp;<span class="op" id="5344111">==</span>&nbsp;<span class="ident" id="5344114">scanEndArray</span>&nbsp;<span class="op" id="5344127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344132">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344145">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344201">d</span><span class="op" id="5344202">.</span><span class="ident" id="5344203">off</span><span class="op" id="5344206">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344211">d</span><span class="op" id="5344212">.</span><span class="ident" id="5344213">scan</span><span class="op" id="5344217">.</span><span class="ident" id="5344218">undo</span><span class="op" id="5344222">(</span><span class="ident" id="5344223">op</span><span class="op" id="5344225">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344230">v</span>&nbsp;<span class="op" id="5344232">=</span>&nbsp;<span class="builtinfunc" id="5344234">append</span><span class="op" id="5344240">(</span><span class="ident" id="5344241">v</span><span class="op" id="5344242">,</span>&nbsp;<span class="ident" id="5344244">d</span><span class="op" id="5344245">.</span><span class="ident" id="5344246">valueInterface</span><span class="op" id="5344260">(</span><span class="op" id="5344261">)</span><span class="op" id="5344262">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344267">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344299">op</span>&nbsp;<span class="op" id="5344302">=</span>&nbsp;<span class="ident" id="5344304">d</span><span class="op" id="5344305">.</span><span class="ident" id="5344306">scanWhile</span><span class="op" id="5344315">(</span><span class="ident" id="5344316">scanSkipSpace</span><span class="op" id="5344329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344333">if</span>&nbsp;<span class="ident" id="5344336">op</span>&nbsp;<span class="op" id="5344339">==</span>&nbsp;<span class="ident" id="5344342">scanEndArray</span>&nbsp;<span class="op" id="5344355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344360">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344372">if</span>&nbsp;<span class="ident" id="5344375">op</span>&nbsp;<span class="op" id="5344378">!=</span>&nbsp;<span class="ident" id="5344381">scanArrayValue</span>&nbsp;<span class="op" id="5344396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344401">d</span><span class="op" id="5344402">.</span><span class="builtintype" id="5344403">error</span><span class="op" id="5344408">(</span><span class="ident" id="5344409">errPhase</span><span class="op" id="5344417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344424">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344427">return</span>&nbsp;<span class="ident" id="5344434">v</span><br>
<span class="lineno"></span><span class="op" id="5344436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5344439">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5344509">func</span>&nbsp;<span class="op" id="5344514">(</span><span class="ident" id="5344515">d</span>&nbsp;<span class="op" id="5344517">*</span><span class="ident" id="5344518">decodeState</span><span class="op" id="5344529">)</span>&nbsp;<span class="ident" id="5344531">objectInterface</span><span class="op" id="5344546">(</span><span class="op" id="5344547">)</span>&nbsp;<span class="keyword" id="5344549">map</span><span class="op" id="5344552">[</span><span class="builtintype" id="5344553">string</span><span class="op" id="5344559">]</span><span class="keyword" id="5344560">interface</span><span class="op" id="5344569">{</span><span class="op" id="5344570">}</span>&nbsp;<span class="op" id="5344572">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344575">m</span>&nbsp;<span class="op" id="5344577">:=</span>&nbsp;<span class="builtinfunc" id="5344580">make</span><span class="op" id="5344584">(</span><span class="keyword" id="5344585">map</span><span class="op" id="5344588">[</span><span class="builtintype" id="5344589">string</span><span class="op" id="5344595">]</span><span class="keyword" id="5344596">interface</span><span class="op" id="5344605">{</span><span class="op" id="5344606">}</span><span class="op" id="5344607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344610">for</span>&nbsp;<span class="op" id="5344614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344618">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344666">op</span>&nbsp;<span class="op" id="5344669">:=</span>&nbsp;<span class="ident" id="5344672">d</span><span class="op" id="5344673">.</span><span class="ident" id="5344674">scanWhile</span><span class="op" id="5344683">(</span><span class="ident" id="5344684">scanSkipSpace</span><span class="op" id="5344697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344701">if</span>&nbsp;<span class="ident" id="5344704">op</span>&nbsp;<span class="op" id="5344707">==</span>&nbsp;<span class="ident" id="5344710">scanEndObject</span>&nbsp;<span class="op" id="5344724">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344729">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344783">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344795">if</span>&nbsp;<span class="ident" id="5344798">op</span>&nbsp;<span class="op" id="5344801">!=</span>&nbsp;<span class="ident" id="5344804">scanBeginLiteral</span>&nbsp;<span class="op" id="5344821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344826">d</span><span class="op" id="5344827">.</span><span class="builtintype" id="5344828">error</span><span class="op" id="5344833">(</span><span class="ident" id="5344834">errPhase</span><span class="op" id="5344842">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344851">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344873">start</span>&nbsp;<span class="op" id="5344879">:=</span>&nbsp;<span class="ident" id="5344882">d</span><span class="op" id="5344883">.</span><span class="ident" id="5344884">off</span>&nbsp;<span class="op" id="5344888">-</span>&nbsp;<span class="num" id="5344890">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344894">op</span>&nbsp;<span class="op" id="5344897">=</span>&nbsp;<span class="ident" id="5344899">d</span><span class="op" id="5344900">.</span><span class="ident" id="5344901">scanWhile</span><span class="op" id="5344910">(</span><span class="ident" id="5344911">scanContinue</span><span class="op" id="5344923">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344927">item</span>&nbsp;<span class="op" id="5344932">:=</span>&nbsp;<span class="ident" id="5344935">d</span><span class="op" id="5344936">.</span><span class="ident" id="5344937">data</span><span class="op" id="5344941">[</span><span class="ident" id="5344942">start</span>&nbsp;<span class="op" id="5344948">:</span>&nbsp;<span class="ident" id="5344950">d</span><span class="op" id="5344951">.</span><span class="ident" id="5344952">off</span><span class="op" id="5344955">-</span><span class="num" id="5344956">1</span><span class="op" id="5344957">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344961">key</span><span class="op" id="5344964">,</span>&nbsp;<span class="ident" id="5344966">ok</span>&nbsp;<span class="op" id="5344969">:=</span>&nbsp;<span class="ident" id="5344972">unquote</span><span class="op" id="5344979">(</span><span class="ident" id="5344980">item</span><span class="op" id="5344984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344988">if</span>&nbsp;<span class="op" id="5344991">!</span><span class="ident" id="5344992">ok</span>&nbsp;<span class="op" id="5344995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345000">d</span><span class="op" id="5345001">.</span><span class="builtintype" id="5345002">error</span><span class="op" id="5345007">(</span><span class="ident" id="5345008">errPhase</span><span class="op" id="5345016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345020">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345025">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345051">if</span>&nbsp;<span class="ident" id="5345054">op</span>&nbsp;<span class="op" id="5345057">==</span>&nbsp;<span class="ident" id="5345060">scanSkipSpace</span>&nbsp;<span class="op" id="5345074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345079">op</span>&nbsp;<span class="op" id="5345082">=</span>&nbsp;<span class="ident" id="5345084">d</span><span class="op" id="5345085">.</span><span class="ident" id="5345086">scanWhile</span><span class="op" id="5345095">(</span><span class="ident" id="5345096">scanSkipSpace</span><span class="op" id="5345109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345113">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345117">if</span>&nbsp;<span class="ident" id="5345120">op</span>&nbsp;<span class="op" id="5345123">!=</span>&nbsp;<span class="ident" id="5345126">scanObjectKey</span>&nbsp;<span class="op" id="5345140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345145">d</span><span class="op" id="5345146">.</span><span class="builtintype" id="5345147">error</span><span class="op" id="5345152">(</span><span class="ident" id="5345153">errPhase</span><span class="op" id="5345161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345170">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345187">m</span><span class="op" id="5345188">[</span><span class="ident" id="5345189">key</span><span class="op" id="5345192">]</span>&nbsp;<span class="op" id="5345194">=</span>&nbsp;<span class="ident" id="5345196">d</span><span class="op" id="5345197">.</span><span class="ident" id="5345198">valueInterface</span><span class="op" id="5345212">(</span><span class="op" id="5345213">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345218">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345250">op</span>&nbsp;<span class="op" id="5345253">=</span>&nbsp;<span class="ident" id="5345255">d</span><span class="op" id="5345256">.</span><span class="ident" id="5345257">scanWhile</span><span class="op" id="5345266">(</span><span class="ident" id="5345267">scanSkipSpace</span><span class="op" id="5345280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345284">if</span>&nbsp;<span class="ident" id="5345287">op</span>&nbsp;<span class="op" id="5345290">==</span>&nbsp;<span class="ident" id="5345293">scanEndObject</span>&nbsp;<span class="op" id="5345307">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345312">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345324">if</span>&nbsp;<span class="ident" id="5345327">op</span>&nbsp;<span class="op" id="5345330">!=</span>&nbsp;<span class="ident" id="5345333">scanObjectValue</span>&nbsp;<span class="op" id="5345349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345354">d</span><span class="op" id="5345355">.</span><span class="builtintype" id="5345356">error</span><span class="op" id="5345361">(</span><span class="ident" id="5345362">errPhase</span><span class="op" id="5345370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345374">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345380">return</span>&nbsp;<span class="ident" id="5345387">m</span><br>
<span class="lineno"></span><span class="op" id="5345389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5345392">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="5345460">func</span>&nbsp;<span class="op" id="5345465">(</span><span class="ident" id="5345466">d</span>&nbsp;<span class="op" id="5345468">*</span><span class="ident" id="5345469">decodeState</span><span class="op" id="5345480">)</span>&nbsp;<span class="ident" id="5345482">literalInterface</span><span class="op" id="5345498">(</span><span class="op" id="5345499">)</span>&nbsp;<span class="keyword" id="5345501">interface</span><span class="op" id="5345510">{</span><span class="op" id="5345511">}</span>&nbsp;<span class="op" id="5345513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345516">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345574">start</span>&nbsp;<span class="op" id="5345580">:=</span>&nbsp;<span class="ident" id="5345583">d</span><span class="op" id="5345584">.</span><span class="ident" id="5345585">off</span>&nbsp;<span class="op" id="5345589">-</span>&nbsp;<span class="num" id="5345591">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345594">op</span>&nbsp;<span class="op" id="5345597">:=</span>&nbsp;<span class="ident" id="5345600">d</span><span class="op" id="5345601">.</span><span class="ident" id="5345602">scanWhile</span><span class="op" id="5345611">(</span><span class="ident" id="5345612">scanContinue</span><span class="op" id="5345624">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345628">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345669">d</span><span class="op" id="5345670">.</span><span class="ident" id="5345671">off</span><span class="op" id="5345674">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345678">d</span><span class="op" id="5345679">.</span><span class="ident" id="5345680">scan</span><span class="op" id="5345684">.</span><span class="ident" id="5345685">undo</span><span class="op" id="5345689">(</span><span class="ident" id="5345690">op</span><span class="op" id="5345692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345695">item</span>&nbsp;<span class="op" id="5345700">:=</span>&nbsp;<span class="ident" id="5345703">d</span><span class="op" id="5345704">.</span><span class="ident" id="5345705">data</span><span class="op" id="5345709">[</span><span class="ident" id="5345710">start</span><span class="op" id="5345715">:</span><span class="ident" id="5345716">d</span><span class="op" id="5345717">.</span><span class="ident" id="5345718">off</span><span class="op" id="5345721">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345725">switch</span>&nbsp;<span class="ident" id="5345732">c</span>&nbsp;<span class="op" id="5345734">:=</span>&nbsp;<span class="ident" id="5345737">item</span><span class="op" id="5345741">[</span><span class="num" id="5345742">0</span><span class="op" id="5345743">]</span><span class="op" id="5345744">;</span>&nbsp;<span class="ident" id="5345746">c</span>&nbsp;<span class="op" id="5345748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345751">case</span>&nbsp;<span class="string" id="5345756">&#39;n&#39;</span><span class="op" id="5345759">:</span>&nbsp;<span class="comment" id="5345761">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345771">return</span>&nbsp;<span class="ident" id="5345778">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345784">case</span>&nbsp;<span class="string" id="5345789">&#39;t&#39;</span><span class="op" id="5345792">,</span>&nbsp;<span class="string" id="5345794">&#39;f&#39;</span><span class="op" id="5345797">:</span>&nbsp;<span class="comment" id="5345799">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345816">return</span>&nbsp;<span class="ident" id="5345823">c</span>&nbsp;<span class="op" id="5345825">==</span>&nbsp;<span class="string" id="5345828">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345834">case</span>&nbsp;<span class="string" id="5345839">&#39;&#34;&#39;</span><span class="op" id="5345842">:</span>&nbsp;<span class="comment" id="5345844">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345856">s</span><span class="op" id="5345857">,</span>&nbsp;<span class="ident" id="5345859">ok</span>&nbsp;<span class="op" id="5345862">:=</span>&nbsp;<span class="ident" id="5345865">unquote</span><span class="op" id="5345872">(</span><span class="ident" id="5345873">item</span><span class="op" id="5345877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345881">if</span>&nbsp;<span class="op" id="5345884">!</span><span class="ident" id="5345885">ok</span>&nbsp;<span class="op" id="5345888">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345893">d</span><span class="op" id="5345894">.</span><span class="builtintype" id="5345895">error</span><span class="op" id="5345900">(</span><span class="ident" id="5345901">errPhase</span><span class="op" id="5345909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345917">return</span>&nbsp;<span class="ident" id="5345924">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345928">default</span><span class="op" id="5345935">:</span>&nbsp;<span class="comment" id="5345937">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345949">if</span>&nbsp;<span class="ident" id="5345952">c</span>&nbsp;<span class="op" id="5345954">!=</span>&nbsp;<span class="string" id="5345957">&#39;-&#39;</span>&nbsp;<span class="op" id="5345961">&amp;&amp;</span>&nbsp;<span class="op" id="5345964">(</span><span class="ident" id="5345965">c</span>&nbsp;<span class="op" id="5345967">&lt;</span>&nbsp;<span class="string" id="5345969">&#39;0&#39;</span>&nbsp;<span class="op" id="5345973">||</span>&nbsp;<span class="ident" id="5345976">c</span>&nbsp;<span class="op" id="5345978">&gt;</span>&nbsp;<span class="string" id="5345980">&#39;9&#39;</span><span class="op" id="5345983">)</span>&nbsp;<span class="op" id="5345985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345990">d</span><span class="op" id="5345991">.</span><span class="builtintype" id="5345992">error</span><span class="op" id="5345997">(</span><span class="ident" id="5345998">errPhase</span><span class="op" id="5346006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346014">n</span><span class="op" id="5346015">,</span>&nbsp;<span class="ident" id="5346017">err</span>&nbsp;<span class="op" id="5346021">:=</span>&nbsp;<span class="ident" id="5346024">d</span><span class="op" id="5346025">.</span><span class="ident" id="5346026">convertNumber</span><span class="op" id="5346039">(</span><span class="builtintype" id="5346040">string</span><span class="op" id="5346046">(</span><span class="ident" id="5346047">item</span><span class="op" id="5346051">)</span><span class="op" id="5346052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346056">if</span>&nbsp;<span class="ident" id="5346059">err</span>&nbsp;<span class="op" id="5346063">!=</span>&nbsp;<span class="ident" id="5346066">nil</span>&nbsp;<span class="op" id="5346070">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346075">d</span><span class="op" id="5346076">.</span><span class="ident" id="5346077">saveError</span><span class="op" id="5346086">(</span><span class="ident" id="5346087">err</span><span class="op" id="5346090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346098">return</span>&nbsp;<span class="ident" id="5346105">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346108">}</span><br>
<span class="lineno"></span><span class="op" id="5346110">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="5346113">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="5346187">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="5346208">func</span>&nbsp;<span class="ident" id="5346213">getu4</span><span class="op" id="5346218">(</span><span class="ident" id="5346219">s</span>&nbsp;<span class="op" id="5346221">[</span><span class="op" id="5346222">]</span><span class="builtintype" id="5346223">byte</span><span class="op" id="5346227">)</span>&nbsp;<span class="builtintype" id="5346229">rune</span>&nbsp;<span class="op" id="5346234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346237">if</span>&nbsp;<span class="builtinfunc" id="5346240">len</span><span class="op" id="5346243">(</span><span class="ident" id="5346244">s</span><span class="op" id="5346245">)</span>&nbsp;<span class="op" id="5346247">&lt;</span>&nbsp;<span class="num" id="5346249">6</span>&nbsp;<span class="op" id="5346251">||</span>&nbsp;<span class="ident" id="5346254">s</span><span class="op" id="5346255">[</span><span class="num" id="5346256">0</span><span class="op" id="5346257">]</span>&nbsp;<span class="op" id="5346259">!=</span>&nbsp;<span class="string" id="5346262">&#39;\\&#39;</span>&nbsp;<span class="op" id="5346267">||</span>&nbsp;<span class="ident" id="5346270">s</span><span class="op" id="5346271">[</span><span class="num" id="5346272">1</span><span class="op" id="5346273">]</span>&nbsp;<span class="op" id="5346275">!=</span>&nbsp;<span class="string" id="5346278">&#39;u&#39;</span>&nbsp;<span class="op" id="5346282">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346286">return</span>&nbsp;<span class="op" id="5346293">-</span><span class="num" id="5346294">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346300">r</span><span class="op" id="5346301">,</span>&nbsp;<span class="ident" id="5346303">err</span>&nbsp;<span class="op" id="5346307">:=</span>&nbsp;<span class="ident" id="5346310">strconv</span><span class="op" id="5346317">.</span><span class="ident" id="5346318">ParseUint</span><span class="op" id="5346327">(</span><span class="builtintype" id="5346328">string</span><span class="op" id="5346334">(</span><span class="ident" id="5346335">s</span><span class="op" id="5346336">[</span><span class="num" id="5346337">2</span><span class="op" id="5346338">:</span><span class="num" id="5346339">6</span><span class="op" id="5346340">]</span><span class="op" id="5346341">)</span><span class="op" id="5346342">,</span>&nbsp;<span class="num" id="5346344">16</span><span class="op" id="5346346">,</span>&nbsp;<span class="num" id="5346348">64</span><span class="op" id="5346350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346353">if</span>&nbsp;<span class="ident" id="5346356">err</span>&nbsp;<span class="op" id="5346360">!=</span>&nbsp;<span class="ident" id="5346363">nil</span>&nbsp;<span class="op" id="5346367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346371">return</span>&nbsp;<span class="op" id="5346378">-</span><span class="num" id="5346379">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346385">return</span>&nbsp;<span class="builtintype" id="5346392">rune</span><span class="op" id="5346396">(</span><span class="ident" id="5346397">r</span><span class="op" id="5346398">)</span><br>
<span class="lineno"></span><span class="op" id="5346400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5346403">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="5346479">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="5346550">func</span>&nbsp;<span class="ident" id="5346555">unquote</span><span class="op" id="5346562">(</span><span class="ident" id="5346563">s</span>&nbsp;<span class="op" id="5346565">[</span><span class="op" id="5346566">]</span><span class="builtintype" id="5346567">byte</span><span class="op" id="5346571">)</span>&nbsp;<span class="op" id="5346573">(</span><span class="ident" id="5346574">t</span>&nbsp;<span class="builtintype" id="5346576">string</span><span class="op" id="5346582">,</span>&nbsp;<span class="ident" id="5346584">ok</span>&nbsp;<span class="builtintype" id="5346587">bool</span><span class="op" id="5346591">)</span>&nbsp;<span class="op" id="5346593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346596">s</span><span class="op" id="5346597">,</span>&nbsp;<span class="ident" id="5346599">ok</span>&nbsp;<span class="op" id="5346602">=</span>&nbsp;<span class="ident" id="5346604">unquoteBytes</span><span class="op" id="5346616">(</span><span class="ident" id="5346617">s</span><span class="op" id="5346618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346621">t</span>&nbsp;<span class="op" id="5346623">=</span>&nbsp;<span class="builtintype" id="5346625">string</span><span class="op" id="5346631">(</span><span class="ident" id="5346632">s</span><span class="op" id="5346633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346636">return</span><br>
<span class="lineno">970</span><span class="op" id="5346643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5346646">func</span>&nbsp;<span class="ident" id="5346651">unquoteBytes</span><span class="op" id="5346663">(</span><span class="ident" id="5346664">s</span>&nbsp;<span class="op" id="5346666">[</span><span class="op" id="5346667">]</span><span class="builtintype" id="5346668">byte</span><span class="op" id="5346672">)</span>&nbsp;<span class="op" id="5346674">(</span><span class="ident" id="5346675">t</span>&nbsp;<span class="op" id="5346677">[</span><span class="op" id="5346678">]</span><span class="builtintype" id="5346679">byte</span><span class="op" id="5346683">,</span>&nbsp;<span class="ident" id="5346685">ok</span>&nbsp;<span class="builtintype" id="5346688">bool</span><span class="op" id="5346692">)</span>&nbsp;<span class="op" id="5346694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346697">if</span>&nbsp;<span class="builtinfunc" id="5346700">len</span><span class="op" id="5346703">(</span><span class="ident" id="5346704">s</span><span class="op" id="5346705">)</span>&nbsp;<span class="op" id="5346707">&lt;</span>&nbsp;<span class="num" id="5346709">2</span>&nbsp;<span class="op" id="5346711">||</span>&nbsp;<span class="ident" id="5346714">s</span><span class="op" id="5346715">[</span><span class="num" id="5346716">0</span><span class="op" id="5346717">]</span>&nbsp;<span class="op" id="5346719">!=</span>&nbsp;<span class="string" id="5346722">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5346726">||</span>&nbsp;<span class="ident" id="5346729">s</span><span class="op" id="5346730">[</span><span class="builtinfunc" id="5346731">len</span><span class="op" id="5346734">(</span><span class="ident" id="5346735">s</span><span class="op" id="5346736">)</span><span class="op" id="5346737">-</span><span class="num" id="5346738">1</span><span class="op" id="5346739">]</span>&nbsp;<span class="op" id="5346741">!=</span>&nbsp;<span class="string" id="5346744">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5346748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346752">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346763">s</span>&nbsp;<span class="op" id="5346765">=</span>&nbsp;<span class="ident" id="5346767">s</span><span class="op" id="5346768">[</span><span class="num" id="5346769">1</span>&nbsp;<span class="op" id="5346771">:</span>&nbsp;<span class="builtinfunc" id="5346773">len</span><span class="op" id="5346776">(</span><span class="ident" id="5346777">s</span><span class="op" id="5346778">)</span><span class="op" id="5346779">-</span><span class="num" id="5346780">1</span><span class="op" id="5346781">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346785">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346838">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346896">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346916">r</span>&nbsp;<span class="op" id="5346918">:=</span>&nbsp;<span class="num" id="5346921">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346924">for</span>&nbsp;<span class="ident" id="5346928">r</span>&nbsp;<span class="op" id="5346930">&lt;</span>&nbsp;<span class="builtinfunc" id="5346932">len</span><span class="op" id="5346935">(</span><span class="ident" id="5346936">s</span><span class="op" id="5346937">)</span>&nbsp;<span class="op" id="5346939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346943">c</span>&nbsp;<span class="op" id="5346945">:=</span>&nbsp;<span class="ident" id="5346948">s</span><span class="op" id="5346949">[</span><span class="ident" id="5346950">r</span><span class="op" id="5346951">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346955">if</span>&nbsp;<span class="ident" id="5346958">c</span>&nbsp;<span class="op" id="5346960">==</span>&nbsp;<span class="string" id="5346963">&#39;\\&#39;</span>&nbsp;<span class="op" id="5346968">||</span>&nbsp;<span class="ident" id="5346971">c</span>&nbsp;<span class="op" id="5346973">==</span>&nbsp;<span class="string" id="5346976">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5346980">||</span>&nbsp;<span class="ident" id="5346983">c</span>&nbsp;<span class="op" id="5346985">&lt;</span>&nbsp;<span class="string" id="5346987">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5346991">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346996">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347008">if</span>&nbsp;<span class="ident" id="5347011">c</span>&nbsp;<span class="op" id="5347013">&lt;</span>&nbsp;<span class="ident" id="5347015">utf8</span><span class="op" id="5347019">.</span><span class="ident" id="5347020">RuneSelf</span>&nbsp;<span class="op" id="5347029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347034">r</span><span class="op" id="5347035">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347041">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347056">rr</span><span class="op" id="5347058">,</span>&nbsp;<span class="ident" id="5347060">size</span>&nbsp;<span class="op" id="5347065">:=</span>&nbsp;<span class="ident" id="5347068">utf8</span><span class="op" id="5347072">.</span><span class="ident" id="5347073">DecodeRune</span><span class="op" id="5347083">(</span><span class="ident" id="5347084">s</span><span class="op" id="5347085">[</span><span class="ident" id="5347086">r</span><span class="op" id="5347087">:</span><span class="op" id="5347088">]</span><span class="op" id="5347089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347093">if</span>&nbsp;<span class="ident" id="5347096">rr</span>&nbsp;<span class="op" id="5347099">==</span>&nbsp;<span class="ident" id="5347102">utf8</span><span class="op" id="5347106">.</span><span class="ident" id="5347107">RuneError</span>&nbsp;<span class="op" id="5347117">&amp;&amp;</span>&nbsp;<span class="ident" id="5347120">size</span>&nbsp;<span class="op" id="5347125">==</span>&nbsp;<span class="num" id="5347128">1</span>&nbsp;<span class="op" id="5347130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347135">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347143">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347147">r</span>&nbsp;<span class="op" id="5347149">+=</span>&nbsp;<span class="ident" id="5347152">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347161">if</span>&nbsp;<span class="ident" id="5347164">r</span>&nbsp;<span class="op" id="5347166">==</span>&nbsp;<span class="builtinfunc" id="5347169">len</span><span class="op" id="5347172">(</span><span class="ident" id="5347173">s</span><span class="op" id="5347174">)</span>&nbsp;<span class="op" id="5347176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347180">return</span>&nbsp;<span class="ident" id="5347187">s</span><span class="op" id="5347188">,</span>&nbsp;<span class="builtintype" id="5347190">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347196">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347200">b</span>&nbsp;<span class="op" id="5347202">:=</span>&nbsp;<span class="builtinfunc" id="5347205">make</span><span class="op" id="5347209">(</span><span class="op" id="5347210">[</span><span class="op" id="5347211">]</span><span class="builtintype" id="5347212">byte</span><span class="op" id="5347216">,</span>&nbsp;<span class="builtinfunc" id="5347218">len</span><span class="op" id="5347221">(</span><span class="ident" id="5347222">s</span><span class="op" id="5347223">)</span><span class="op" id="5347224">+</span><span class="num" id="5347225">2</span><span class="op" id="5347226">*</span><span class="ident" id="5347227">utf8</span><span class="op" id="5347231">.</span><span class="ident" id="5347232">UTFMax</span><span class="op" id="5347238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347241">w</span>&nbsp;<span class="op" id="5347243">:=</span>&nbsp;<span class="builtinfunc" id="5347246">copy</span><span class="op" id="5347250">(</span><span class="ident" id="5347251">b</span><span class="op" id="5347252">,</span>&nbsp;<span class="ident" id="5347254">s</span><span class="op" id="5347255">[</span><span class="num" id="5347256">0</span><span class="op" id="5347257">:</span><span class="ident" id="5347258">r</span><span class="op" id="5347259">]</span><span class="op" id="5347260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347263">for</span>&nbsp;<span class="ident" id="5347267">r</span>&nbsp;<span class="op" id="5347269">&lt;</span>&nbsp;<span class="builtinfunc" id="5347271">len</span><span class="op" id="5347274">(</span><span class="ident" id="5347275">s</span><span class="op" id="5347276">)</span>&nbsp;<span class="op" id="5347278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347282">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347333">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347379">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347405">if</span>&nbsp;<span class="ident" id="5347408">w</span>&nbsp;<span class="op" id="5347410">&gt;=</span>&nbsp;<span class="builtinfunc" id="5347413">len</span><span class="op" id="5347416">(</span><span class="ident" id="5347417">b</span><span class="op" id="5347418">)</span><span class="op" id="5347419">-</span><span class="num" id="5347420">2</span><span class="op" id="5347421">*</span><span class="ident" id="5347422">utf8</span><span class="op" id="5347426">.</span><span class="ident" id="5347427">UTFMax</span>&nbsp;<span class="op" id="5347434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347439">nb</span>&nbsp;<span class="op" id="5347442">:=</span>&nbsp;<span class="builtinfunc" id="5347445">make</span><span class="op" id="5347449">(</span><span class="op" id="5347450">[</span><span class="op" id="5347451">]</span><span class="builtintype" id="5347452">byte</span><span class="op" id="5347456">,</span>&nbsp;<span class="op" id="5347458">(</span><span class="builtinfunc" id="5347459">len</span><span class="op" id="5347462">(</span><span class="ident" id="5347463">b</span><span class="op" id="5347464">)</span><span class="op" id="5347465">+</span><span class="ident" id="5347466">utf8</span><span class="op" id="5347470">.</span><span class="ident" id="5347471">UTFMax</span><span class="op" id="5347477">)</span><span class="op" id="5347478">*</span><span class="num" id="5347479">2</span><span class="op" id="5347480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5347485">copy</span><span class="op" id="5347489">(</span><span class="ident" id="5347490">nb</span><span class="op" id="5347492">,</span>&nbsp;<span class="ident" id="5347494">b</span><span class="op" id="5347495">[</span><span class="num" id="5347496">0</span><span class="op" id="5347497">:</span><span class="ident" id="5347498">w</span><span class="op" id="5347499">]</span><span class="op" id="5347500">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347505">b</span>&nbsp;<span class="op" id="5347507">=</span>&nbsp;<span class="ident" id="5347509">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347518">switch</span>&nbsp;<span class="ident" id="5347525">c</span>&nbsp;<span class="op" id="5347527">:=</span>&nbsp;<span class="ident" id="5347530">s</span><span class="op" id="5347531">[</span><span class="ident" id="5347532">r</span><span class="op" id="5347533">]</span><span class="op" id="5347534">;</span>&nbsp;<span class="op" id="5347536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347540">case</span>&nbsp;<span class="ident" id="5347545">c</span>&nbsp;<span class="op" id="5347547">==</span>&nbsp;<span class="string" id="5347550">&#39;\\&#39;</span><span class="op" id="5347554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347559">r</span><span class="op" id="5347560">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347566">if</span>&nbsp;<span class="ident" id="5347569">r</span>&nbsp;<span class="op" id="5347571">&gt;=</span>&nbsp;<span class="builtinfunc" id="5347574">len</span><span class="op" id="5347577">(</span><span class="ident" id="5347578">s</span><span class="op" id="5347579">)</span>&nbsp;<span class="op" id="5347581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347587">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347602">switch</span>&nbsp;<span class="ident" id="5347609">s</span><span class="op" id="5347610">[</span><span class="ident" id="5347611">r</span><span class="op" id="5347612">]</span>&nbsp;<span class="op" id="5347614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347619">default</span><span class="op" id="5347626">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347632">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347642">case</span>&nbsp;<span class="string" id="5347647">&#39;&#34;&#39;</span><span class="op" id="5347650">,</span>&nbsp;<span class="string" id="5347652">&#39;\\&#39;</span><span class="op" id="5347656">,</span>&nbsp;<span class="string" id="5347658">&#39;/&#39;</span><span class="op" id="5347661">,</span>&nbsp;<span class="string" id="5347663">&#39;\&#39;&#39;</span><span class="op" id="5347667">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347673">b</span><span class="op" id="5347674">[</span><span class="ident" id="5347675">w</span><span class="op" id="5347676">]</span>&nbsp;<span class="op" id="5347678">=</span>&nbsp;<span class="ident" id="5347680">s</span><span class="op" id="5347681">[</span><span class="ident" id="5347682">r</span><span class="op" id="5347683">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347689">r</span><span class="op" id="5347690">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347697">w</span><span class="op" id="5347698">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347704">case</span>&nbsp;<span class="string" id="5347709">&#39;b&#39;</span><span class="op" id="5347712">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347718">b</span><span class="op" id="5347719">[</span><span class="ident" id="5347720">w</span><span class="op" id="5347721">]</span>&nbsp;<span class="op" id="5347723">=</span>&nbsp;<span class="string" id="5347725">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347734">r</span><span class="op" id="5347735">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347742">w</span><span class="op" id="5347743">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347749">case</span>&nbsp;<span class="string" id="5347754">&#39;f&#39;</span><span class="op" id="5347757">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347763">b</span><span class="op" id="5347764">[</span><span class="ident" id="5347765">w</span><span class="op" id="5347766">]</span>&nbsp;<span class="op" id="5347768">=</span>&nbsp;<span class="string" id="5347770">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347779">r</span><span class="op" id="5347780">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347787">w</span><span class="op" id="5347788">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347794">case</span>&nbsp;<span class="string" id="5347799">&#39;n&#39;</span><span class="op" id="5347802">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347808">b</span><span class="op" id="5347809">[</span><span class="ident" id="5347810">w</span><span class="op" id="5347811">]</span>&nbsp;<span class="op" id="5347813">=</span>&nbsp;<span class="string" id="5347815">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347824">r</span><span class="op" id="5347825">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347832">w</span><span class="op" id="5347833">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347839">case</span>&nbsp;<span class="string" id="5347844">&#39;r&#39;</span><span class="op" id="5347847">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347853">b</span><span class="op" id="5347854">[</span><span class="ident" id="5347855">w</span><span class="op" id="5347856">]</span>&nbsp;<span class="op" id="5347858">=</span>&nbsp;<span class="string" id="5347860">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347869">r</span><span class="op" id="5347870">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347877">w</span><span class="op" id="5347878">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347884">case</span>&nbsp;<span class="string" id="5347889">&#39;t&#39;</span><span class="op" id="5347892">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347898">b</span><span class="op" id="5347899">[</span><span class="ident" id="5347900">w</span><span class="op" id="5347901">]</span>&nbsp;<span class="op" id="5347903">=</span>&nbsp;<span class="string" id="5347905">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347914">r</span><span class="op" id="5347915">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347922">w</span><span class="op" id="5347923">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347929">case</span>&nbsp;<span class="string" id="5347934">&#39;u&#39;</span><span class="op" id="5347937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347943">r</span><span class="op" id="5347944">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347951">rr</span>&nbsp;<span class="op" id="5347954">:=</span>&nbsp;<span class="ident" id="5347957">getu4</span><span class="op" id="5347962">(</span><span class="ident" id="5347963">s</span><span class="op" id="5347964">[</span><span class="ident" id="5347965">r</span><span class="op" id="5347966">:</span><span class="op" id="5347967">]</span><span class="op" id="5347968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347974">if</span>&nbsp;<span class="ident" id="5347977">rr</span>&nbsp;<span class="op" id="5347980">&lt;</span>&nbsp;<span class="num" id="5347982">0</span>&nbsp;<span class="op" id="5347984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347991">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348008">r</span>&nbsp;<span class="op" id="5348010">+=</span>&nbsp;<span class="num" id="5348013">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348019">if</span>&nbsp;<span class="ident" id="5348022">utf16</span><span class="op" id="5348027">.</span><span class="ident" id="5348028">IsSurrogate</span><span class="op" id="5348039">(</span><span class="ident" id="5348040">rr</span><span class="op" id="5348042">)</span>&nbsp;<span class="op" id="5348044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348051">rr1</span>&nbsp;<span class="op" id="5348055">:=</span>&nbsp;<span class="ident" id="5348058">getu4</span><span class="op" id="5348063">(</span><span class="ident" id="5348064">s</span><span class="op" id="5348065">[</span><span class="ident" id="5348066">r</span><span class="op" id="5348067">:</span><span class="op" id="5348068">]</span><span class="op" id="5348069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348076">if</span>&nbsp;<span class="ident" id="5348079">dec</span>&nbsp;<span class="op" id="5348083">:=</span>&nbsp;<span class="ident" id="5348086">utf16</span><span class="op" id="5348091">.</span><span class="ident" id="5348092">DecodeRune</span><span class="op" id="5348102">(</span><span class="ident" id="5348103">rr</span><span class="op" id="5348105">,</span>&nbsp;<span class="ident" id="5348107">rr1</span><span class="op" id="5348110">)</span><span class="op" id="5348111">;</span>&nbsp;<span class="ident" id="5348113">dec</span>&nbsp;<span class="op" id="5348117">!=</span>&nbsp;<span class="ident" id="5348120">unicode</span><span class="op" id="5348127">.</span><span class="ident" id="5348128">ReplacementChar</span>&nbsp;<span class="op" id="5348144">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348152">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348184">r</span>&nbsp;<span class="op" id="5348186">+=</span>&nbsp;<span class="num" id="5348189">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348197">w</span>&nbsp;<span class="op" id="5348199">+=</span>&nbsp;<span class="ident" id="5348202">utf8</span><span class="op" id="5348206">.</span><span class="ident" id="5348207">EncodeRune</span><span class="op" id="5348217">(</span><span class="ident" id="5348218">b</span><span class="op" id="5348219">[</span><span class="ident" id="5348220">w</span><span class="op" id="5348221">:</span><span class="op" id="5348222">]</span><span class="op" id="5348223">,</span>&nbsp;<span class="ident" id="5348225">dec</span><span class="op" id="5348228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348236">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348247">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348254">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348312">rr</span>&nbsp;<span class="op" id="5348315">=</span>&nbsp;<span class="ident" id="5348317">unicode</span><span class="op" id="5348324">.</span><span class="ident" id="5348325">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348351">w</span>&nbsp;<span class="op" id="5348353">+=</span>&nbsp;<span class="ident" id="5348356">utf8</span><span class="op" id="5348360">.</span><span class="ident" id="5348361">EncodeRune</span><span class="op" id="5348371">(</span><span class="ident" id="5348372">b</span><span class="op" id="5348373">[</span><span class="ident" id="5348374">w</span><span class="op" id="5348375">:</span><span class="op" id="5348376">]</span><span class="op" id="5348377">,</span>&nbsp;<span class="ident" id="5348379">rr</span><span class="op" id="5348381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348386">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348391">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348435">case</span>&nbsp;<span class="ident" id="5348440">c</span>&nbsp;<span class="op" id="5348442">==</span>&nbsp;<span class="string" id="5348445">&#39;&#34;&#39;</span><span class="op" id="5348448">,</span>&nbsp;<span class="ident" id="5348450">c</span>&nbsp;<span class="op" id="5348452">&lt;</span>&nbsp;<span class="string" id="5348454">&#39;&nbsp;&#39;</span><span class="op" id="5348457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348462">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348472">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348483">case</span>&nbsp;<span class="ident" id="5348488">c</span>&nbsp;<span class="op" id="5348490">&lt;</span>&nbsp;<span class="ident" id="5348492">utf8</span><span class="op" id="5348496">.</span><span class="ident" id="5348497">RuneSelf</span><span class="op" id="5348505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348510">b</span><span class="op" id="5348511">[</span><span class="ident" id="5348512">w</span><span class="op" id="5348513">]</span>&nbsp;<span class="op" id="5348515">=</span>&nbsp;<span class="ident" id="5348517">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348522">r</span><span class="op" id="5348523">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348529">w</span><span class="op" id="5348530">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348536">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348570">default</span><span class="op" id="5348577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348582">rr</span><span class="op" id="5348584">,</span>&nbsp;<span class="ident" id="5348586">size</span>&nbsp;<span class="op" id="5348591">:=</span>&nbsp;<span class="ident" id="5348594">utf8</span><span class="op" id="5348598">.</span><span class="ident" id="5348599">DecodeRune</span><span class="op" id="5348609">(</span><span class="ident" id="5348610">s</span><span class="op" id="5348611">[</span><span class="ident" id="5348612">r</span><span class="op" id="5348613">:</span><span class="op" id="5348614">]</span><span class="op" id="5348615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348620">r</span>&nbsp;<span class="op" id="5348622">+=</span>&nbsp;<span class="ident" id="5348625">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348633">w</span>&nbsp;<span class="op" id="5348635">+=</span>&nbsp;<span class="ident" id="5348638">utf8</span><span class="op" id="5348642">.</span><span class="ident" id="5348643">EncodeRune</span><span class="op" id="5348653">(</span><span class="ident" id="5348654">b</span><span class="op" id="5348655">[</span><span class="ident" id="5348656">w</span><span class="op" id="5348657">:</span><span class="op" id="5348658">]</span><span class="op" id="5348659">,</span>&nbsp;<span class="ident" id="5348661">rr</span><span class="op" id="5348663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348673">return</span>&nbsp;<span class="ident" id="5348680">b</span><span class="op" id="5348681">[</span><span class="num" id="5348682">0</span><span class="op" id="5348683">:</span><span class="ident" id="5348684">w</span><span class="op" id="5348685">]</span><span class="op" id="5348686">,</span>&nbsp;<span class="builtintype" id="5348688">true</span><br>
<span class="lineno"></span><span class="op" id="5348693">}</span>
</div>
</body>
</html>
