<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2083133">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2083188">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2083242">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2083293">package</span>&nbsp;<span class="ident" id="2083301">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2083305">import</span>&nbsp;<span class="op" id="2083312">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2083315">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2083326">&#34;time&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2083333">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2083336">func</span>&nbsp;<span class="ident" id="2083341">sameFile</span><span class="op" id="2083349">(</span><span class="ident" id="2083350">fs1</span><span class="op" id="2083353">,</span>&nbsp;<span class="ident" id="2083355">fs2</span>&nbsp;<span class="op" id="2083359">*</span><span class="ident" id="2083360"><a href="/os/types_notwin.go.html#2089730">fileStat</a></span><span class="op" id="2083368">)</span>&nbsp;<span class="builtintype" id="2083370">bool</span>&nbsp;<span class="op" id="2083375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083378">stat1</span>&nbsp;<span class="op" id="2083384">:=</span>&nbsp;<span class="ident" id="2083387"><a href="/os/stat_linux.go.html#2083350">fs1</a></span><span class="op" id="2083390">.</span><span class="ident" id="2083391">sys</span><span class="op" id="2083394">.</span><span class="op" id="2083395">(</span><span class="op" id="2083396">*</span><span class="ident" id="2083397"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083404">.</span><span class="ident" id="2083405">Stat_t</span><span class="op" id="2083411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083414">stat2</span>&nbsp;<span class="op" id="2083420">:=</span>&nbsp;<span class="ident" id="2083423"><a href="/os/stat_linux.go.html#2083355">fs2</a></span><span class="op" id="2083426">.</span><span class="ident" id="2083427">sys</span><span class="op" id="2083430">.</span><span class="op" id="2083431">(</span><span class="op" id="2083432">*</span><span class="ident" id="2083433"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083440">.</span><span class="ident" id="2083441">Stat_t</span><span class="op" id="2083447">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083450">return</span>&nbsp;<span class="ident" id="2083457"><a href="/os/stat_linux.go.html#2083378">stat1</a></span><span class="op" id="2083462">.</span><span class="ident" id="2083463">Dev</span>&nbsp;<span class="op" id="2083467">==</span>&nbsp;<span class="ident" id="2083470"><a href="/os/stat_linux.go.html#2083414">stat2</a></span><span class="op" id="2083475">.</span><span class="ident" id="2083476">Dev</span>&nbsp;<span class="op" id="2083480">&amp;&amp;</span>&nbsp;<span class="ident" id="2083483"><a href="/os/stat_linux.go.html#2083378">stat1</a></span><span class="op" id="2083488">.</span><span class="ident" id="2083489">Ino</span>&nbsp;<span class="op" id="2083493">==</span>&nbsp;<span class="ident" id="2083496"><a href="/os/stat_linux.go.html#2083414">stat2</a></span><span class="op" id="2083501">.</span><span class="ident" id="2083502">Ino</span><br>
<span class="lineno"></span><span class="op" id="2083506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2083509">func</span>&nbsp;<span class="ident" id="2083514">fileInfoFromStat</span><span class="op" id="2083530">(</span><span class="ident" id="2083531">st</span>&nbsp;<span class="op" id="2083534">*</span><span class="ident" id="2083535"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083542">.</span><span class="ident" id="2083543">Stat_t</span><span class="op" id="2083549">,</span>&nbsp;<span class="ident" id="2083551">name</span>&nbsp;<span class="builtintype" id="2083556">string</span><span class="op" id="2083562">)</span>&nbsp;<span class="ident" id="2083564"><a href="/os/types.go.html#2085788">FileInfo</a></span>&nbsp;<span class="op" id="2083573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083576">fs</span>&nbsp;<span class="op" id="2083579">:=</span>&nbsp;<span class="op" id="2083582">&amp;</span><span class="ident" id="2083583"><a href="/os/types_notwin.go.html#2089730">fileStat</a></span><span class="op" id="2083591">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083595">name</span><span class="op" id="2083599">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083604"><a href="/os/file_unix.go.html#2073641">basename</a></span><span class="op" id="2083612">(</span><span class="ident" id="2083613"><a href="/os/stat_linux.go.html#2083551">name</a></span><span class="op" id="2083617">)</span><span class="op" id="2083618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083622">size</span><span class="op" id="2083626">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083631">int64</span><span class="op" id="2083636">(</span><span class="ident" id="2083637"><a href="/os/stat_linux.go.html#2083531">st</a></span><span class="op" id="2083639">.</span><span class="ident" id="2083640">Size</span><span class="op" id="2083644">)</span><span class="op" id="2083645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083649">modTime</span><span class="op" id="2083656">:</span>&nbsp;<span class="ident" id="2083658"><a href="/os/stat_linux.go.html#2084323">timespecToTime</a></span><span class="op" id="2083672">(</span><span class="ident" id="2083673"><a href="/os/stat_linux.go.html#2083531">st</a></span><span class="op" id="2083675">.</span><span class="ident" id="2083676">Mtim</span><span class="op" id="2083680">)</span><span class="op" id="2083681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083685">sys</span><span class="op" id="2083688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083694"><a href="/os/stat_linux.go.html#2083531">st</a></span><span class="op" id="2083696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2083699">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083702"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2083704">.</span><span class="ident" id="2083705">mode</span>&nbsp;<span class="op" id="2083710">=</span>&nbsp;<span class="ident" id="2083712"><a href="/os/types.go.html#2086441">FileMode</a></span><span class="op" id="2083720">(</span><span class="ident" id="2083721"><a href="/os/stat_linux.go.html#2083531">st</a></span><span class="op" id="2083723">.</span><span class="ident" id="2083724">Mode</span>&nbsp;<span class="op" id="2083729">&amp;</span>&nbsp;<span class="num" id="2083731">0777</span><span class="op" id="2083735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083738">switch</span>&nbsp;<span class="ident" id="2083745"><a href="/os/stat_linux.go.html#2083531">st</a></span><span class="op" id="2083747">.</span><span class="ident" id="2083748">Mode</span>&nbsp;<span class="op" id="2083753">&amp;</span>&nbsp;<span class="ident" id="2083755"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083762">.</span><span class="ident" id="2083763">S_IFMT</span>&nbsp;<span class="op" id="2083770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083773">case</span>&nbsp;<span class="ident" id="2083778"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083785">.</span><span class="ident" id="2083786">S_IFBLK</span><span class="op" id="2083793">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083797"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2083799">.</span><span class="ident" id="2083800">mode</span>&nbsp;<span class="op" id="2083805">|=</span>&nbsp;<span class="ident" id="2083808"><a href="/os/types.go.html#2087266">ModeDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083820">case</span>&nbsp;<span class="ident" id="2083825"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083832">.</span><span class="ident" id="2083833">S_IFCHR</span><span class="op" id="2083840">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083844"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2083846">.</span><span class="ident" id="2083847">mode</span>&nbsp;<span class="op" id="2083852">|=</span>&nbsp;<span class="ident" id="2083855"><a href="/os/types.go.html#2087266">ModeDevice</a></span>&nbsp;<span class="op" id="2083866">|</span>&nbsp;<span class="ident" id="2083868"><a href="/os/types.go.html#2087599">ModeCharDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083884">case</span>&nbsp;<span class="ident" id="2083889"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083896">.</span><span class="ident" id="2083897">S_IFDIR</span><span class="op" id="2083904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083908"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2083910">.</span><span class="ident" id="2083911">mode</span>&nbsp;<span class="op" id="2083916">|=</span>&nbsp;<span class="ident" id="2083919"><a href="/os/types.go.html#2086910">ModeDir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083928">case</span>&nbsp;<span class="ident" id="2083933"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083940">.</span><span class="ident" id="2083941">S_IFIFO</span><span class="op" id="2083948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083952"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2083954">.</span><span class="ident" id="2083955">mode</span>&nbsp;<span class="op" id="2083960">|=</span>&nbsp;<span class="ident" id="2083963"><a href="/os/types.go.html#2087332">ModeNamedPipe</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083978">case</span>&nbsp;<span class="ident" id="2083983"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2083990">.</span><span class="ident" id="2083991">S_IFLNK</span><span class="op" id="2083998">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084002"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2084004">.</span><span class="ident" id="2084005">mode</span>&nbsp;<span class="op" id="2084010">|=</span>&nbsp;<span class="ident" id="2084013"><a href="/os/types.go.html#2087198">ModeSymlink</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084026">case</span>&nbsp;<span class="ident" id="2084031"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2084038">.</span><span class="ident" id="2084039">S_IFREG</span><span class="op" id="2084046">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2084050">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084068">case</span>&nbsp;<span class="ident" id="2084073"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2084080">.</span><span class="ident" id="2084081">S_IFSOCK</span><span class="op" id="2084089">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084093"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2084095">.</span><span class="ident" id="2084096">mode</span>&nbsp;<span class="op" id="2084101">|=</span>&nbsp;<span class="ident" id="2084104"><a href="/os/types.go.html#2087404">ModeSocket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2084116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084119">if</span>&nbsp;<span class="ident" id="2084122"><a href="/os/stat_linux.go.html#2083531">st</a></span><span class="op" id="2084124">.</span><span class="ident" id="2084125">Mode</span><span class="op" id="2084129">&amp;</span><span class="ident" id="2084130"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2084137">.</span><span class="ident" id="2084138">S_ISGID</span>&nbsp;<span class="op" id="2084146">!=</span>&nbsp;<span class="num" id="2084149">0</span>&nbsp;<span class="op" id="2084151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084155"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2084157">.</span><span class="ident" id="2084158">mode</span>&nbsp;<span class="op" id="2084163">|=</span>&nbsp;<span class="ident" id="2084166"><a href="/os/types.go.html#2087538">ModeSetgid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2084178">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084181">if</span>&nbsp;<span class="ident" id="2084184"><a href="/os/stat_linux.go.html#2083531">st</a></span><span class="op" id="2084186">.</span><span class="ident" id="2084187">Mode</span><span class="op" id="2084191">&amp;</span><span class="ident" id="2084192"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2084199">.</span><span class="ident" id="2084200">S_ISUID</span>&nbsp;<span class="op" id="2084208">!=</span>&nbsp;<span class="num" id="2084211">0</span>&nbsp;<span class="op" id="2084213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084217"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2084219">.</span><span class="ident" id="2084220">mode</span>&nbsp;<span class="op" id="2084225">|=</span>&nbsp;<span class="ident" id="2084228"><a href="/os/types.go.html#2087477">ModeSetuid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2084240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084243">if</span>&nbsp;<span class="ident" id="2084246"><a href="/os/stat_linux.go.html#2083531">st</a></span><span class="op" id="2084248">.</span><span class="ident" id="2084249">Mode</span><span class="op" id="2084253">&amp;</span><span class="ident" id="2084254"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2084261">.</span><span class="ident" id="2084262">S_ISVTX</span>&nbsp;<span class="op" id="2084270">!=</span>&nbsp;<span class="num" id="2084273">0</span>&nbsp;<span class="op" id="2084275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084279"><a href="/os/stat_linux.go.html#2083576">fs</a></span><span class="op" id="2084281">.</span><span class="ident" id="2084282">mode</span>&nbsp;<span class="op" id="2084287">|=</span>&nbsp;<span class="ident" id="2084290"><a href="/os/types.go.html#2087699">ModeSticky</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2084302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084305">return</span>&nbsp;<span class="ident" id="2084312"><a href="/os/stat_linux.go.html#2083576">fs</a></span><br>
<span class="lineno"></span><span class="op" id="2084315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2084318">func</span>&nbsp;<span class="ident" id="2084323">timespecToTime</span><span class="op" id="2084337">(</span><span class="ident" id="2084338">ts</span>&nbsp;<span class="ident" id="2084341"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2084348">.</span><span class="ident" id="2084349">Timespec</span><span class="op" id="2084357">)</span>&nbsp;<span class="ident" id="2084359"><a href="/os/stat_linux.go.html#2083326">time</a></span><span class="op" id="2084363">.</span><span class="ident" id="2084364">Time</span>&nbsp;<span class="op" id="2084369">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084372">return</span>&nbsp;<span class="ident" id="2084379"><a href="/os/stat_linux.go.html#2083326">time</a></span><span class="op" id="2084383">.</span><span class="ident" id="2084384">Unix</span><span class="op" id="2084388">(</span><span class="ident" id="2084389">int64</span><span class="op" id="2084394">(</span><span class="ident" id="2084395"><a href="/os/stat_linux.go.html#2084338">ts</a></span><span class="op" id="2084397">.</span><span class="ident" id="2084398">Sec</span><span class="op" id="2084401">)</span><span class="op" id="2084402">,</span>&nbsp;<span class="ident" id="2084404">int64</span><span class="op" id="2084409">(</span><span class="ident" id="2084410"><a href="/os/stat_linux.go.html#2084338">ts</a></span><span class="op" id="2084412">.</span><span class="ident" id="2084413">Nsec</span><span class="op" id="2084417">)</span><span class="op" id="2084418">)</span><br>
<span class="lineno"></span><span class="op" id="2084420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2084423">//&nbsp;For&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="2084439">func</span>&nbsp;<span class="ident" id="2084444">atime</span><span class="op" id="2084449">(</span><span class="ident" id="2084450">fi</span>&nbsp;<span class="ident" id="2084453"><a href="/os/types.go.html#2085788">FileInfo</a></span><span class="op" id="2084461">)</span>&nbsp;<span class="ident" id="2084463"><a href="/os/stat_linux.go.html#2083326">time</a></span><span class="op" id="2084467">.</span><span class="ident" id="2084468">Time</span>&nbsp;<span class="op" id="2084473">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084476">return</span>&nbsp;<span class="ident" id="2084483"><a href="/os/stat_linux.go.html#2084323">timespecToTime</a></span><span class="op" id="2084497">(</span><span class="ident" id="2084498"><a href="/os/stat_linux.go.html#2084450">fi</a></span><span class="op" id="2084500">.</span><span class="ident" id="2084501">Sys</span><span class="op" id="2084504">(</span><span class="op" id="2084505">)</span><span class="op" id="2084506">.</span><span class="op" id="2084507">(</span><span class="op" id="2084508">*</span><span class="ident" id="2084509"><a href="/os/stat_linux.go.html#2083315">syscall</a></span><span class="op" id="2084516">.</span><span class="ident" id="2084517">Stat_t</span><span class="op" id="2084523">)</span><span class="op" id="2084524">.</span><span class="ident" id="2084525">Atim</span><span class="op" id="2084529">)</span><br>
<span class="lineno"></span><span class="op" id="2084531">}</span>
</div>
</body>
</html>
