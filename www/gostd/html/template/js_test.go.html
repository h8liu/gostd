<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7435816">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7435871">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7435925">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7435976">package</span>&nbsp;<span class="ident" id="7435984">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7435994">import</span>&nbsp;<span class="op" id="7436001">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7436004">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7436013">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7436021">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7436032">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7436042">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7436045">func</span>&nbsp;<span class="ident" id="7436050">TestNextJsCtx</span><span class="op" id="7436063">(</span><span class="ident" id="7436064">t</span>&nbsp;<span class="op" id="7436066">*</span><span class="ident" id="7436067">testing</span><span class="op" id="7436074">.</span><span class="ident" id="7436075">T</span><span class="op" id="7436076">)</span>&nbsp;<span class="op" id="7436078">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436081">tests</span>&nbsp;<span class="op" id="7436087">:=</span>&nbsp;<span class="op" id="7436090">[</span><span class="op" id="7436091">]</span><span class="keyword" id="7436092">struct</span>&nbsp;<span class="op" id="7436099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436103">jsCtx</span>&nbsp;<span class="ident" id="7436109">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436117">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7436123">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436131">}</span><span class="op" id="7436132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436136">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436180">{</span><span class="ident" id="7436181">jsCtxRegexp</span><span class="op" id="7436192">,</span>&nbsp;<span class="string" id="7436194">&#34;;&#34;</span><span class="op" id="7436197">}</span><span class="op" id="7436198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436202">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436229">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436282">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436345">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436408">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436431">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436481">{</span><span class="ident" id="7436482">jsCtxRegexp</span><span class="op" id="7436493">,</span>&nbsp;<span class="string" id="7436495">&#34;}&#34;</span><span class="op" id="7436498">}</span><span class="op" id="7436499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436503">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436569">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436591">{</span><span class="ident" id="7436592">jsCtxDivOp</span><span class="op" id="7436602">,</span>&nbsp;<span class="string" id="7436604">&#34;)&#34;</span><span class="op" id="7436607">}</span><span class="op" id="7436608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436612">{</span><span class="ident" id="7436613">jsCtxDivOp</span><span class="op" id="7436623">,</span>&nbsp;<span class="string" id="7436625">&#34;]&#34;</span><span class="op" id="7436628">}</span><span class="op" id="7436629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436633">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436697">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436730">{</span><span class="ident" id="7436731">jsCtxRegexp</span><span class="op" id="7436742">,</span>&nbsp;<span class="string" id="7436744">&#34;(&#34;</span><span class="op" id="7436747">}</span><span class="op" id="7436748">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436752">{</span><span class="ident" id="7436753">jsCtxRegexp</span><span class="op" id="7436764">,</span>&nbsp;<span class="string" id="7436766">&#34;[&#34;</span><span class="op" id="7436769">}</span><span class="op" id="7436770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436774">{</span><span class="ident" id="7436775">jsCtxRegexp</span><span class="op" id="7436786">,</span>&nbsp;<span class="string" id="7436788">&#34;{&#34;</span><span class="op" id="7436791">}</span><span class="op" id="7436792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436796">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7436860">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436894">{</span><span class="ident" id="7436895">jsCtxRegexp</span><span class="op" id="7436906">,</span>&nbsp;<span class="string" id="7436908">&#34;=&#34;</span><span class="op" id="7436911">}</span><span class="op" id="7436912">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436916">{</span><span class="ident" id="7436917">jsCtxRegexp</span><span class="op" id="7436928">,</span>&nbsp;<span class="string" id="7436930">&#34;+=&#34;</span><span class="op" id="7436934">}</span><span class="op" id="7436935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436939">{</span><span class="ident" id="7436940">jsCtxRegexp</span><span class="op" id="7436951">,</span>&nbsp;<span class="string" id="7436953">&#34;*=&#34;</span><span class="op" id="7436957">}</span><span class="op" id="7436958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436962">{</span><span class="ident" id="7436963">jsCtxRegexp</span><span class="op" id="7436974">,</span>&nbsp;<span class="string" id="7436976">&#34;*&#34;</span><span class="op" id="7436979">}</span><span class="op" id="7436980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436984">{</span><span class="ident" id="7436985">jsCtxRegexp</span><span class="op" id="7436996">,</span>&nbsp;<span class="string" id="7436998">&#34;!&#34;</span><span class="op" id="7437001">}</span><span class="op" id="7437002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437006">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437070">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437083">{</span><span class="ident" id="7437084">jsCtxRegexp</span><span class="op" id="7437095">,</span>&nbsp;<span class="string" id="7437097">&#34;+&#34;</span><span class="op" id="7437100">}</span><span class="op" id="7437101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437105">{</span><span class="ident" id="7437106">jsCtxRegexp</span><span class="op" id="7437117">,</span>&nbsp;<span class="string" id="7437119">&#34;-&#34;</span><span class="op" id="7437122">}</span><span class="op" id="7437123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437127">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437173">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437235">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437299">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437348">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437412">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437425">{</span><span class="ident" id="7437426">jsCtxDivOp</span><span class="op" id="7437436">,</span>&nbsp;<span class="string" id="7437438">&#34;--&#34;</span><span class="op" id="7437442">}</span><span class="op" id="7437443">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437447">{</span><span class="ident" id="7437448">jsCtxDivOp</span><span class="op" id="7437458">,</span>&nbsp;<span class="string" id="7437460">&#34;++&#34;</span><span class="op" id="7437464">}</span><span class="op" id="7437465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437469">{</span><span class="ident" id="7437470">jsCtxDivOp</span><span class="op" id="7437480">,</span>&nbsp;<span class="string" id="7437482">&#34;x--&#34;</span><span class="op" id="7437487">}</span><span class="op" id="7437488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437492">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437555">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437575">{</span><span class="ident" id="7437576">jsCtxRegexp</span><span class="op" id="7437587">,</span>&nbsp;<span class="string" id="7437589">&#34;x---&#34;</span><span class="op" id="7437595">}</span><span class="op" id="7437596">,</span>&nbsp;<span class="comment" id="7437598">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437626">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437692">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437759">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437778">{</span><span class="ident" id="7437779">jsCtxRegexp</span><span class="op" id="7437790">,</span>&nbsp;<span class="string" id="7437792">&#34;return&#34;</span><span class="op" id="7437800">}</span><span class="op" id="7437801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437805">{</span><span class="ident" id="7437806">jsCtxRegexp</span><span class="op" id="7437817">,</span>&nbsp;<span class="string" id="7437819">&#34;return&nbsp;&#34;</span><span class="op" id="7437828">}</span><span class="op" id="7437829">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437833">{</span><span class="ident" id="7437834">jsCtxRegexp</span><span class="op" id="7437845">,</span>&nbsp;<span class="string" id="7437847">&#34;return\t&#34;</span><span class="op" id="7437857">}</span><span class="op" id="7437858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437862">{</span><span class="ident" id="7437863">jsCtxRegexp</span><span class="op" id="7437874">,</span>&nbsp;<span class="string" id="7437876">&#34;return\n&#34;</span><span class="op" id="7437886">}</span><span class="op" id="7437887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437891">{</span><span class="ident" id="7437892">jsCtxRegexp</span><span class="op" id="7437903">,</span>&nbsp;<span class="string" id="7437905">&#34;return\u2028&#34;</span><span class="op" id="7437919">}</span><span class="op" id="7437920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437924">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7437990">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7438052">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7438118">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7438183">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7438249">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438260">{</span><span class="ident" id="7438261">jsCtxDivOp</span><span class="op" id="7438271">,</span>&nbsp;<span class="string" id="7438273">&#34;x&#34;</span><span class="op" id="7438276">}</span><span class="op" id="7438277">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438281">{</span><span class="ident" id="7438282">jsCtxDivOp</span><span class="op" id="7438292">,</span>&nbsp;<span class="string" id="7438294">&#34;x&nbsp;&#34;</span><span class="op" id="7438298">}</span><span class="op" id="7438299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438303">{</span><span class="ident" id="7438304">jsCtxDivOp</span><span class="op" id="7438314">,</span>&nbsp;<span class="string" id="7438316">&#34;x\t&#34;</span><span class="op" id="7438321">}</span><span class="op" id="7438322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438326">{</span><span class="ident" id="7438327">jsCtxDivOp</span><span class="op" id="7438337">,</span>&nbsp;<span class="string" id="7438339">&#34;x\n&#34;</span><span class="op" id="7438344">}</span><span class="op" id="7438345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438349">{</span><span class="ident" id="7438350">jsCtxDivOp</span><span class="op" id="7438360">,</span>&nbsp;<span class="string" id="7438362">&#34;x\u2028&#34;</span><span class="op" id="7438371">}</span><span class="op" id="7438372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438376">{</span><span class="ident" id="7438377">jsCtxDivOp</span><span class="op" id="7438387">,</span>&nbsp;<span class="string" id="7438389">&#34;preturn&#34;</span><span class="op" id="7438398">}</span><span class="op" id="7438399">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7438403">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438433">{</span><span class="ident" id="7438434">jsCtxDivOp</span><span class="op" id="7438444">,</span>&nbsp;<span class="string" id="7438446">&#34;0&#34;</span><span class="op" id="7438449">}</span><span class="op" id="7438450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7438454">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438509">{</span><span class="ident" id="7438510">jsCtxDivOp</span><span class="op" id="7438520">,</span>&nbsp;<span class="string" id="7438522">&#34;0.&#34;</span><span class="op" id="7438526">}</span><span class="op" id="7438527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438530">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7438534">for</span>&nbsp;<span class="ident" id="7438538">_</span><span class="op" id="7438539">,</span>&nbsp;<span class="ident" id="7438541">test</span>&nbsp;<span class="op" id="7438546">:=</span>&nbsp;<span class="keyword" id="7438549">range</span>&nbsp;<span class="ident" id="7438555">tests</span>&nbsp;<span class="op" id="7438561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7438565">if</span>&nbsp;<span class="ident" id="7438568">nextJSCtx</span><span class="op" id="7438577">(</span><span class="op" id="7438578">[</span><span class="op" id="7438579">]</span><span class="builtintype" id="7438580">byte</span><span class="op" id="7438584">(</span><span class="ident" id="7438585">test</span><span class="op" id="7438589">.</span><span class="ident" id="7438590">s</span><span class="op" id="7438591">)</span><span class="op" id="7438592">,</span>&nbsp;<span class="ident" id="7438594">jsCtxRegexp</span><span class="op" id="7438605">)</span>&nbsp;<span class="op" id="7438607">!=</span>&nbsp;<span class="ident" id="7438610">test</span><span class="op" id="7438614">.</span><span class="ident" id="7438615">jsCtx</span>&nbsp;<span class="op" id="7438621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7438626">t</span><span class="op" id="7438627">.</span><span class="ident" id="7438628">Errorf</span><span class="op" id="7438634">(</span><span class="string" id="7438635">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7438651">,</span>&nbsp;<span class="ident" id="7438653">test</span><span class="op" id="7438657">.</span><span class="ident" id="7438658">jsCtx</span><span class="op" id="7438663">,</span>&nbsp;<span class="ident" id="7438665">test</span><span class="op" id="7438669">.</span><span class="ident" id="7438670">s</span><span class="op" id="7438671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438675">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7438679">if</span>&nbsp;<span class="ident" id="7438682">nextJSCtx</span><span class="op" id="7438691">(</span><span class="op" id="7438692">[</span><span class="op" id="7438693">]</span><span class="builtintype" id="7438694">byte</span><span class="op" id="7438698">(</span><span class="ident" id="7438699">test</span><span class="op" id="7438703">.</span><span class="ident" id="7438704">s</span><span class="op" id="7438705">)</span><span class="op" id="7438706">,</span>&nbsp;<span class="ident" id="7438708">jsCtxDivOp</span><span class="op" id="7438718">)</span>&nbsp;<span class="op" id="7438720">!=</span>&nbsp;<span class="ident" id="7438723">test</span><span class="op" id="7438727">.</span><span class="ident" id="7438728">jsCtx</span>&nbsp;<span class="op" id="7438734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7438739">t</span><span class="op" id="7438740">.</span><span class="ident" id="7438741">Errorf</span><span class="op" id="7438747">(</span><span class="string" id="7438748">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7438764">,</span>&nbsp;<span class="ident" id="7438766">test</span><span class="op" id="7438770">.</span><span class="ident" id="7438771">jsCtx</span><span class="op" id="7438776">,</span>&nbsp;<span class="ident" id="7438778">test</span><span class="op" id="7438782">.</span><span class="ident" id="7438783">s</span><span class="op" id="7438784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7438795">if</span>&nbsp;<span class="ident" id="7438798">nextJSCtx</span><span class="op" id="7438807">(</span><span class="op" id="7438808">[</span><span class="op" id="7438809">]</span><span class="builtintype" id="7438810">byte</span><span class="op" id="7438814">(</span><span class="string" id="7438815">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7438820">)</span><span class="op" id="7438821">,</span>&nbsp;<span class="ident" id="7438823">jsCtxRegexp</span><span class="op" id="7438834">)</span>&nbsp;<span class="op" id="7438836">!=</span>&nbsp;<span class="ident" id="7438839">jsCtxRegexp</span>&nbsp;<span class="op" id="7438851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7438855">t</span><span class="op" id="7438856">.</span><span class="ident" id="7438857">Error</span><span class="op" id="7438862">(</span><span class="string" id="7438863">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7438877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7438884">if</span>&nbsp;<span class="ident" id="7438887">nextJSCtx</span><span class="op" id="7438896">(</span><span class="op" id="7438897">[</span><span class="op" id="7438898">]</span><span class="builtintype" id="7438899">byte</span><span class="op" id="7438903">(</span><span class="string" id="7438904">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7438909">)</span><span class="op" id="7438910">,</span>&nbsp;<span class="ident" id="7438912">jsCtxDivOp</span><span class="op" id="7438922">)</span>&nbsp;<span class="op" id="7438924">!=</span>&nbsp;<span class="ident" id="7438927">jsCtxDivOp</span>&nbsp;<span class="op" id="7438938">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7438942">t</span><span class="op" id="7438943">.</span><span class="ident" id="7438944">Error</span><span class="op" id="7438949">(</span><span class="string" id="7438950">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7438964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7438967">}</span><br>
<span class="lineno"></span><span class="op" id="7438969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7438972">func</span>&nbsp;<span class="ident" id="7438977">TestJSValEscaper</span><span class="op" id="7438993">(</span><span class="ident" id="7438994">t</span>&nbsp;<span class="op" id="7438996">*</span><span class="ident" id="7438997">testing</span><span class="op" id="7439004">.</span><span class="ident" id="7439005">T</span><span class="op" id="7439006">)</span>&nbsp;<span class="op" id="7439008">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439011">tests</span>&nbsp;<span class="op" id="7439017">:=</span>&nbsp;<span class="op" id="7439020">[</span><span class="op" id="7439021">]</span><span class="keyword" id="7439022">struct</span>&nbsp;<span class="op" id="7439029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439033">x</span>&nbsp;&nbsp;<span class="keyword" id="7439036">interface</span><span class="op" id="7439045">{</span><span class="op" id="7439046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439050">js</span>&nbsp;<span class="builtintype" id="7439053">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439061">}</span><span class="op" id="7439062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439066">{</span><span class="builtintype" id="7439067">int</span><span class="op" id="7439070">(</span><span class="num" id="7439071">42</span><span class="op" id="7439073">)</span><span class="op" id="7439074">,</span>&nbsp;<span class="string" id="7439076">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7439082">}</span><span class="op" id="7439083">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439087">{</span><span class="builtintype" id="7439088">uint</span><span class="op" id="7439092">(</span><span class="num" id="7439093">42</span><span class="op" id="7439095">)</span><span class="op" id="7439096">,</span>&nbsp;<span class="string" id="7439098">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7439104">}</span><span class="op" id="7439105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439109">{</span><span class="builtintype" id="7439110">int16</span><span class="op" id="7439115">(</span><span class="num" id="7439116">42</span><span class="op" id="7439118">)</span><span class="op" id="7439119">,</span>&nbsp;<span class="string" id="7439121">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7439127">}</span><span class="op" id="7439128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439132">{</span><span class="builtintype" id="7439133">uint16</span><span class="op" id="7439139">(</span><span class="num" id="7439140">42</span><span class="op" id="7439142">)</span><span class="op" id="7439143">,</span>&nbsp;<span class="string" id="7439145">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7439151">}</span><span class="op" id="7439152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439156">{</span><span class="builtintype" id="7439157">int32</span><span class="op" id="7439162">(</span><span class="op" id="7439163">-</span><span class="num" id="7439164">42</span><span class="op" id="7439166">)</span><span class="op" id="7439167">,</span>&nbsp;<span class="string" id="7439169">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7439176">}</span><span class="op" id="7439177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439181">{</span><span class="builtintype" id="7439182">uint32</span><span class="op" id="7439188">(</span><span class="num" id="7439189">42</span><span class="op" id="7439191">)</span><span class="op" id="7439192">,</span>&nbsp;<span class="string" id="7439194">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7439200">}</span><span class="op" id="7439201">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439205">{</span><span class="builtintype" id="7439206">int16</span><span class="op" id="7439211">(</span><span class="op" id="7439212">-</span><span class="num" id="7439213">42</span><span class="op" id="7439215">)</span><span class="op" id="7439216">,</span>&nbsp;<span class="string" id="7439218">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7439225">}</span><span class="op" id="7439226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439230">{</span><span class="builtintype" id="7439231">uint16</span><span class="op" id="7439237">(</span><span class="num" id="7439238">42</span><span class="op" id="7439240">)</span><span class="op" id="7439241">,</span>&nbsp;<span class="string" id="7439243">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7439249">}</span><span class="op" id="7439250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439254">{</span><span class="ident" id="7439255">int64</span><span class="op" id="7439260">(</span><span class="op" id="7439261">-</span><span class="num" id="7439262">42</span><span class="op" id="7439264">)</span><span class="op" id="7439265">,</span>&nbsp;<span class="string" id="7439267">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7439274">}</span><span class="op" id="7439275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439279">{</span><span class="ident" id="7439280">uint64</span><span class="op" id="7439286">(</span><span class="num" id="7439287">42</span><span class="op" id="7439289">)</span><span class="op" id="7439290">,</span>&nbsp;<span class="string" id="7439292">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7439298">}</span><span class="op" id="7439299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439303">{</span><span class="ident" id="7439304">uint64</span><span class="op" id="7439310">(</span><span class="num" id="7439311">1</span><span class="op" id="7439312">)</span>&nbsp;<span class="op" id="7439314">&lt;&lt;</span>&nbsp;<span class="num" id="7439317">53</span><span class="op" id="7439319">,</span>&nbsp;<span class="string" id="7439321">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="7439341">}</span><span class="op" id="7439342">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7439346">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7439398">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439452">{</span><span class="ident" id="7439453">uint64</span><span class="op" id="7439459">(</span><span class="num" id="7439460">1</span><span class="op" id="7439461">)</span><span class="op" id="7439462">&lt;&lt;</span><span class="num" id="7439464">53</span>&nbsp;<span class="op" id="7439467">+</span>&nbsp;<span class="num" id="7439469">1</span><span class="op" id="7439470">,</span>&nbsp;<span class="string" id="7439472">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="7439492">}</span><span class="op" id="7439493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439497">{</span><span class="builtintype" id="7439498">float32</span><span class="op" id="7439505">(</span><span class="num" id="7439506">1.0</span><span class="op" id="7439509">)</span><span class="op" id="7439510">,</span>&nbsp;<span class="string" id="7439512">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7439517">}</span><span class="op" id="7439518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439522">{</span><span class="builtintype" id="7439523">float32</span><span class="op" id="7439530">(</span><span class="op" id="7439531">-</span><span class="num" id="7439532">1.0</span><span class="op" id="7439535">)</span><span class="op" id="7439536">,</span>&nbsp;<span class="string" id="7439538">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7439544">}</span><span class="op" id="7439545">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439549">{</span><span class="builtintype" id="7439550">float32</span><span class="op" id="7439557">(</span><span class="num" id="7439558">0.5</span><span class="op" id="7439561">)</span><span class="op" id="7439562">,</span>&nbsp;<span class="string" id="7439564">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7439571">}</span><span class="op" id="7439572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439576">{</span><span class="builtintype" id="7439577">float32</span><span class="op" id="7439584">(</span><span class="op" id="7439585">-</span><span class="num" id="7439586">0.5</span><span class="op" id="7439589">)</span><span class="op" id="7439590">,</span>&nbsp;<span class="string" id="7439592">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7439600">}</span><span class="op" id="7439601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439605">{</span><span class="builtintype" id="7439606">float32</span><span class="op" id="7439613">(</span><span class="num" id="7439614">1.0</span><span class="op" id="7439617">)</span>&nbsp;<span class="op" id="7439619">/</span>&nbsp;<span class="builtintype" id="7439621">float32</span><span class="op" id="7439628">(</span><span class="num" id="7439629">256</span><span class="op" id="7439632">)</span><span class="op" id="7439633">,</span>&nbsp;<span class="string" id="7439635">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="7439649">}</span><span class="op" id="7439650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439654">{</span><span class="builtintype" id="7439655">float32</span><span class="op" id="7439662">(</span><span class="num" id="7439663">0</span><span class="op" id="7439664">)</span><span class="op" id="7439665">,</span>&nbsp;<span class="string" id="7439667">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7439672">}</span><span class="op" id="7439673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439677">{</span><span class="ident" id="7439678">math</span><span class="op" id="7439682">.</span><span class="ident" id="7439683">Copysign</span><span class="op" id="7439691">(</span><span class="num" id="7439692">0</span><span class="op" id="7439693">,</span>&nbsp;<span class="op" id="7439695">-</span><span class="num" id="7439696">1</span><span class="op" id="7439697">)</span><span class="op" id="7439698">,</span>&nbsp;<span class="string" id="7439700">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7439706">}</span><span class="op" id="7439707">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439711">{</span><span class="builtintype" id="7439712">float64</span><span class="op" id="7439719">(</span><span class="num" id="7439720">1.0</span><span class="op" id="7439723">)</span><span class="op" id="7439724">,</span>&nbsp;<span class="string" id="7439726">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7439731">}</span><span class="op" id="7439732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439736">{</span><span class="builtintype" id="7439737">float64</span><span class="op" id="7439744">(</span><span class="op" id="7439745">-</span><span class="num" id="7439746">1.0</span><span class="op" id="7439749">)</span><span class="op" id="7439750">,</span>&nbsp;<span class="string" id="7439752">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7439758">}</span><span class="op" id="7439759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439763">{</span><span class="builtintype" id="7439764">float64</span><span class="op" id="7439771">(</span><span class="num" id="7439772">0.5</span><span class="op" id="7439775">)</span><span class="op" id="7439776">,</span>&nbsp;<span class="string" id="7439778">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7439785">}</span><span class="op" id="7439786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439790">{</span><span class="builtintype" id="7439791">float64</span><span class="op" id="7439798">(</span><span class="op" id="7439799">-</span><span class="num" id="7439800">0.5</span><span class="op" id="7439803">)</span><span class="op" id="7439804">,</span>&nbsp;<span class="string" id="7439806">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7439814">}</span><span class="op" id="7439815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439819">{</span><span class="builtintype" id="7439820">float64</span><span class="op" id="7439827">(</span><span class="num" id="7439828">0</span><span class="op" id="7439829">)</span><span class="op" id="7439830">,</span>&nbsp;<span class="string" id="7439832">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7439837">}</span><span class="op" id="7439838">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439842">{</span><span class="ident" id="7439843">math</span><span class="op" id="7439847">.</span><span class="ident" id="7439848">Copysign</span><span class="op" id="7439856">(</span><span class="num" id="7439857">0</span><span class="op" id="7439858">,</span>&nbsp;<span class="op" id="7439860">-</span><span class="num" id="7439861">1</span><span class="op" id="7439862">)</span><span class="op" id="7439863">,</span>&nbsp;<span class="string" id="7439865">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7439871">}</span><span class="op" id="7439872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439876">{</span><span class="string" id="7439877">&#34;&#34;</span><span class="op" id="7439879">,</span>&nbsp;<span class="string" id="7439881">`&#34;&#34;`</span><span class="op" id="7439885">}</span><span class="op" id="7439886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439890">{</span><span class="string" id="7439891">&#34;foo&#34;</span><span class="op" id="7439896">,</span>&nbsp;<span class="string" id="7439898">`&#34;foo&#34;`</span><span class="op" id="7439905">}</span><span class="op" id="7439906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7439910">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439925">{</span><span class="string" id="7439926">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="7439944">,</span>&nbsp;<span class="string" id="7439946">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="7439966">}</span><span class="op" id="7439967">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7439971">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440019">{</span><span class="string" id="7440020">&#34;\t\x0b&#34;</span><span class="op" id="7440028">,</span>&nbsp;<span class="string" id="7440030">`&#34;\t\u000b&#34;`</span><span class="op" id="7440042">}</span><span class="op" id="7440043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440047">{</span><span class="keyword" id="7440048">struct</span><span class="op" id="7440054">{</span>&nbsp;<span class="ident" id="7440056">X</span><span class="op" id="7440057">,</span>&nbsp;<span class="ident" id="7440059">Y</span>&nbsp;<span class="builtintype" id="7440061">int</span>&nbsp;<span class="op" id="7440065">}</span><span class="op" id="7440066">{</span><span class="num" id="7440067">1</span><span class="op" id="7440068">,</span>&nbsp;<span class="num" id="7440070">2</span><span class="op" id="7440071">}</span><span class="op" id="7440072">,</span>&nbsp;<span class="string" id="7440074">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="7440089">}</span><span class="op" id="7440090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440094">{</span><span class="op" id="7440095">[</span><span class="op" id="7440096">]</span><span class="keyword" id="7440097">interface</span><span class="op" id="7440106">{</span><span class="op" id="7440107">}</span><span class="op" id="7440108">{</span><span class="op" id="7440109">}</span><span class="op" id="7440110">,</span>&nbsp;<span class="string" id="7440112">&#34;[]&#34;</span><span class="op" id="7440116">}</span><span class="op" id="7440117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440121">{</span><span class="op" id="7440122">[</span><span class="op" id="7440123">]</span><span class="keyword" id="7440124">interface</span><span class="op" id="7440133">{</span><span class="op" id="7440134">}</span><span class="op" id="7440135">{</span><span class="num" id="7440136">42</span><span class="op" id="7440138">,</span>&nbsp;<span class="string" id="7440140">&#34;foo&#34;</span><span class="op" id="7440145">,</span>&nbsp;<span class="ident" id="7440147">nil</span><span class="op" id="7440150">}</span><span class="op" id="7440151">,</span>&nbsp;<span class="string" id="7440153">`[42,&#34;foo&#34;,null]`</span><span class="op" id="7440170">}</span><span class="op" id="7440171">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440175">{</span><span class="op" id="7440176">[</span><span class="op" id="7440177">]</span><span class="builtintype" id="7440178">string</span><span class="op" id="7440184">{</span><span class="string" id="7440185">&#34;&lt;!--&#34;</span><span class="op" id="7440191">,</span>&nbsp;<span class="string" id="7440193">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7440204">,</span>&nbsp;<span class="string" id="7440206">&#34;--&gt;&#34;</span><span class="op" id="7440211">}</span><span class="op" id="7440212">,</span>&nbsp;<span class="string" id="7440214">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="7440262">}</span><span class="op" id="7440263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440267">{</span><span class="string" id="7440268">&#34;&lt;!--&#34;</span><span class="op" id="7440274">,</span>&nbsp;<span class="string" id="7440276">`&#34;\u003c!--&#34;`</span><span class="op" id="7440289">}</span><span class="op" id="7440290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440294">{</span><span class="string" id="7440295">&#34;--&gt;&#34;</span><span class="op" id="7440300">,</span>&nbsp;<span class="string" id="7440302">`&#34;--\u003e&#34;`</span><span class="op" id="7440314">}</span><span class="op" id="7440315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440319">{</span><span class="string" id="7440320">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7440331">,</span>&nbsp;<span class="string" id="7440333">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="7440351">}</span><span class="op" id="7440352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440356">{</span><span class="string" id="7440357">&#34;]]&gt;&#34;</span><span class="op" id="7440362">,</span>&nbsp;<span class="string" id="7440364">`&#34;]]\u003e&#34;`</span><span class="op" id="7440376">}</span><span class="op" id="7440377">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440381">{</span><span class="string" id="7440382">&#34;&lt;/script&#34;</span><span class="op" id="7440392">,</span>&nbsp;<span class="string" id="7440394">`&#34;\u003c/script&#34;`</span><span class="op" id="7440411">}</span><span class="op" id="7440412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440416">{</span><span class="string" id="7440417">&#34;\U0001D11E&#34;</span><span class="op" id="7440429">,</span>&nbsp;<span class="string" id="7440431">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="7440447">}</span><span class="op" id="7440448">,</span>&nbsp;<span class="comment" id="7440450">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7440476">for</span>&nbsp;<span class="ident" id="7440480">_</span><span class="op" id="7440481">,</span>&nbsp;<span class="ident" id="7440483">test</span>&nbsp;<span class="op" id="7440488">:=</span>&nbsp;<span class="keyword" id="7440491">range</span>&nbsp;<span class="ident" id="7440497">tests</span>&nbsp;<span class="op" id="7440503">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7440507">if</span>&nbsp;<span class="ident" id="7440510">js</span>&nbsp;<span class="op" id="7440513">:=</span>&nbsp;<span class="ident" id="7440516">jsValEscaper</span><span class="op" id="7440528">(</span><span class="ident" id="7440529">test</span><span class="op" id="7440533">.</span><span class="ident" id="7440534">x</span><span class="op" id="7440535">)</span><span class="op" id="7440536">;</span>&nbsp;<span class="ident" id="7440538">js</span>&nbsp;<span class="op" id="7440541">!=</span>&nbsp;<span class="ident" id="7440544">test</span><span class="op" id="7440548">.</span><span class="ident" id="7440549">js</span>&nbsp;<span class="op" id="7440552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440557">t</span><span class="op" id="7440558">.</span><span class="ident" id="7440559">Errorf</span><span class="op" id="7440565">(</span><span class="string" id="7440566">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7440594">,</span>&nbsp;<span class="ident" id="7440596">test</span><span class="op" id="7440600">.</span><span class="ident" id="7440601">x</span><span class="op" id="7440602">,</span>&nbsp;<span class="ident" id="7440604">test</span><span class="op" id="7440608">.</span><span class="ident" id="7440609">js</span><span class="op" id="7440611">,</span>&nbsp;<span class="ident" id="7440613">js</span><span class="op" id="7440615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7440623">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7440680">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440697">a</span>&nbsp;<span class="op" id="7440699">:=</span>&nbsp;<span class="op" id="7440702">[</span><span class="op" id="7440703">]</span><span class="keyword" id="7440704">interface</span><span class="op" id="7440713">{</span><span class="op" id="7440714">}</span><span class="op" id="7440715">{</span><span class="ident" id="7440716">test</span><span class="op" id="7440720">.</span><span class="ident" id="7440721">x</span><span class="op" id="7440722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440726">want</span>&nbsp;<span class="op" id="7440731">:=</span>&nbsp;<span class="string" id="7440734">&#34;[&#34;</span>&nbsp;<span class="op" id="7440738">+</span>&nbsp;<span class="ident" id="7440740">strings</span><span class="op" id="7440747">.</span><span class="ident" id="7440748">TrimSpace</span><span class="op" id="7440757">(</span><span class="ident" id="7440758">test</span><span class="op" id="7440762">.</span><span class="ident" id="7440763">js</span><span class="op" id="7440765">)</span>&nbsp;<span class="op" id="7440767">+</span>&nbsp;<span class="string" id="7440769">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7440775">if</span>&nbsp;<span class="ident" id="7440778">js</span>&nbsp;<span class="op" id="7440781">:=</span>&nbsp;<span class="ident" id="7440784">jsValEscaper</span><span class="op" id="7440796">(</span><span class="ident" id="7440797">a</span><span class="op" id="7440798">)</span><span class="op" id="7440799">;</span>&nbsp;<span class="ident" id="7440801">js</span>&nbsp;<span class="op" id="7440804">!=</span>&nbsp;<span class="ident" id="7440807">want</span>&nbsp;<span class="op" id="7440812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440817">t</span><span class="op" id="7440818">.</span><span class="ident" id="7440819">Errorf</span><span class="op" id="7440825">(</span><span class="string" id="7440826">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7440854">,</span>&nbsp;<span class="ident" id="7440856">a</span><span class="op" id="7440857">,</span>&nbsp;<span class="ident" id="7440859">want</span><span class="op" id="7440863">,</span>&nbsp;<span class="ident" id="7440865">js</span><span class="op" id="7440867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440871">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440874">}</span><br>
<span class="lineno"></span><span class="op" id="7440876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7440879">func</span>&nbsp;<span class="ident" id="7440884">TestJSStrEscaper</span><span class="op" id="7440900">(</span><span class="ident" id="7440901">t</span>&nbsp;<span class="op" id="7440903">*</span><span class="ident" id="7440904">testing</span><span class="op" id="7440911">.</span><span class="ident" id="7440912">T</span><span class="op" id="7440913">)</span>&nbsp;<span class="op" id="7440915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440918">tests</span>&nbsp;<span class="op" id="7440924">:=</span>&nbsp;<span class="op" id="7440927">[</span><span class="op" id="7440928">]</span><span class="keyword" id="7440929">struct</span>&nbsp;<span class="op" id="7440936">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440940">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7440944">interface</span><span class="op" id="7440953">{</span><span class="op" id="7440954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440958">esc</span>&nbsp;<span class="builtintype" id="7440962">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440970">}</span><span class="op" id="7440971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440975">{</span><span class="string" id="7440976">&#34;&#34;</span><span class="op" id="7440978">,</span>&nbsp;<span class="string" id="7440980">``</span><span class="op" id="7440982">}</span><span class="op" id="7440983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440987">{</span><span class="string" id="7440988">&#34;foo&#34;</span><span class="op" id="7440993">,</span>&nbsp;<span class="string" id="7440995">`foo`</span><span class="op" id="7441000">}</span><span class="op" id="7441001">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441005">{</span><span class="string" id="7441006">&#34;\u0000&#34;</span><span class="op" id="7441014">,</span>&nbsp;<span class="string" id="7441016">`\0`</span><span class="op" id="7441020">}</span><span class="op" id="7441021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441025">{</span><span class="string" id="7441026">&#34;\t&#34;</span><span class="op" id="7441030">,</span>&nbsp;<span class="string" id="7441032">`\t`</span><span class="op" id="7441036">}</span><span class="op" id="7441037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441041">{</span><span class="string" id="7441042">&#34;\n&#34;</span><span class="op" id="7441046">,</span>&nbsp;<span class="string" id="7441048">`\n`</span><span class="op" id="7441052">}</span><span class="op" id="7441053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441057">{</span><span class="string" id="7441058">&#34;\r&#34;</span><span class="op" id="7441062">,</span>&nbsp;<span class="string" id="7441064">`\r`</span><span class="op" id="7441068">}</span><span class="op" id="7441069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441073">{</span><span class="string" id="7441074">&#34;\u2028&#34;</span><span class="op" id="7441082">,</span>&nbsp;<span class="string" id="7441084">`\u2028`</span><span class="op" id="7441092">}</span><span class="op" id="7441093">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441097">{</span><span class="string" id="7441098">&#34;\u2029&#34;</span><span class="op" id="7441106">,</span>&nbsp;<span class="string" id="7441108">`\u2029`</span><span class="op" id="7441116">}</span><span class="op" id="7441117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441121">{</span><span class="string" id="7441122">&#34;\\&#34;</span><span class="op" id="7441126">,</span>&nbsp;<span class="string" id="7441128">`\\`</span><span class="op" id="7441132">}</span><span class="op" id="7441133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441137">{</span><span class="string" id="7441138">&#34;\\n&#34;</span><span class="op" id="7441143">,</span>&nbsp;<span class="string" id="7441145">`\\n`</span><span class="op" id="7441150">}</span><span class="op" id="7441151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441155">{</span><span class="string" id="7441156">&#34;foo\r\nbar&#34;</span><span class="op" id="7441168">,</span>&nbsp;<span class="string" id="7441170">`foo\r\nbar`</span><span class="op" id="7441182">}</span><span class="op" id="7441183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441187">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441223">{</span><span class="string" id="7441224">`&#34;`</span><span class="op" id="7441227">,</span>&nbsp;<span class="string" id="7441229">`\x22`</span><span class="op" id="7441235">}</span><span class="op" id="7441236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441240">{</span><span class="string" id="7441241">`&#39;`</span><span class="op" id="7441244">,</span>&nbsp;<span class="string" id="7441246">`\x27`</span><span class="op" id="7441252">}</span><span class="op" id="7441253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441257">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441312">{</span><span class="string" id="7441313">`&amp;amp;`</span><span class="op" id="7441320">,</span>&nbsp;<span class="string" id="7441322">`\x26amp;`</span><span class="op" id="7441332">}</span><span class="op" id="7441333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441337">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441400">{</span><span class="string" id="7441401">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7441412">,</span>&nbsp;<span class="string" id="7441414">`\x3c\/script\x3e`</span><span class="op" id="7441432">}</span><span class="op" id="7441433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441437">{</span><span class="string" id="7441438">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7441449">,</span>&nbsp;<span class="string" id="7441451">`\x3c![CDATA[`</span><span class="op" id="7441465">}</span><span class="op" id="7441466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441470">{</span><span class="string" id="7441471">&#34;]]&gt;&#34;</span><span class="op" id="7441476">,</span>&nbsp;<span class="string" id="7441478">`]]\x3e`</span><span class="op" id="7441486">}</span><span class="op" id="7441487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441491">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441563">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441627">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441688">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441735">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441799">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441866">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441932">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7441992">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7442056">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442107">{</span><span class="string" id="7442108">&#34;&lt;!--&#34;</span><span class="op" id="7442114">,</span>&nbsp;<span class="string" id="7442116">`\x3c!--`</span><span class="op" id="7442125">}</span><span class="op" id="7442126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442130">{</span><span class="string" id="7442131">&#34;--&gt;&#34;</span><span class="op" id="7442136">,</span>&nbsp;<span class="string" id="7442138">`--\x3e`</span><span class="op" id="7442146">}</span><span class="op" id="7442147">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7442151">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442211">{</span><span class="string" id="7442212">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="7442255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7442260">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="7442316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442320">}</span><span class="op" id="7442321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7442325">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442353">{</span><span class="string" id="7442354">&#34;foo\xA0bar&#34;</span><span class="op" id="7442366">,</span>&nbsp;<span class="string" id="7442368">&#34;foo\xA0bar&#34;</span><span class="op" id="7442380">}</span><span class="op" id="7442381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7442385">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442420">{</span><span class="string" id="7442421">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7442441">,</span>&nbsp;<span class="string" id="7442443">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7442463">}</span><span class="op" id="7442464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7442471">for</span>&nbsp;<span class="ident" id="7442475">_</span><span class="op" id="7442476">,</span>&nbsp;<span class="ident" id="7442478">test</span>&nbsp;<span class="op" id="7442483">:=</span>&nbsp;<span class="keyword" id="7442486">range</span>&nbsp;<span class="ident" id="7442492">tests</span>&nbsp;<span class="op" id="7442498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7442502">esc</span>&nbsp;<span class="op" id="7442506">:=</span>&nbsp;<span class="ident" id="7442509">jsStrEscaper</span><span class="op" id="7442521">(</span><span class="ident" id="7442522">test</span><span class="op" id="7442526">.</span><span class="ident" id="7442527">x</span><span class="op" id="7442528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7442532">if</span>&nbsp;<span class="ident" id="7442535">esc</span>&nbsp;<span class="op" id="7442539">!=</span>&nbsp;<span class="ident" id="7442542">test</span><span class="op" id="7442546">.</span><span class="ident" id="7442547">esc</span>&nbsp;<span class="op" id="7442551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7442556">t</span><span class="op" id="7442557">.</span><span class="ident" id="7442558">Errorf</span><span class="op" id="7442564">(</span><span class="string" id="7442565">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7442585">,</span>&nbsp;<span class="ident" id="7442587">test</span><span class="op" id="7442591">.</span><span class="ident" id="7442592">x</span><span class="op" id="7442593">,</span>&nbsp;<span class="ident" id="7442595">test</span><span class="op" id="7442599">.</span><span class="ident" id="7442600">esc</span><span class="op" id="7442603">,</span>&nbsp;<span class="ident" id="7442605">esc</span><span class="op" id="7442608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442612">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442615">}</span><br>
<span class="lineno"></span><span class="op" id="7442617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7442620">func</span>&nbsp;<span class="ident" id="7442625">TestJSRegexpEscaper</span><span class="op" id="7442644">(</span><span class="ident" id="7442645">t</span>&nbsp;<span class="op" id="7442647">*</span><span class="ident" id="7442648">testing</span><span class="op" id="7442655">.</span><span class="ident" id="7442656">T</span><span class="op" id="7442657">)</span>&nbsp;<span class="op" id="7442659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7442662">tests</span>&nbsp;<span class="op" id="7442668">:=</span>&nbsp;<span class="op" id="7442671">[</span><span class="op" id="7442672">]</span><span class="keyword" id="7442673">struct</span>&nbsp;<span class="op" id="7442680">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7442684">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7442688">interface</span><span class="op" id="7442697">{</span><span class="op" id="7442698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7442702">esc</span>&nbsp;<span class="builtintype" id="7442706">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442714">}</span><span class="op" id="7442715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442719">{</span><span class="string" id="7442720">&#34;&#34;</span><span class="op" id="7442722">,</span>&nbsp;<span class="string" id="7442724">`(?:)`</span><span class="op" id="7442730">}</span><span class="op" id="7442731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442735">{</span><span class="string" id="7442736">&#34;foo&#34;</span><span class="op" id="7442741">,</span>&nbsp;<span class="string" id="7442743">`foo`</span><span class="op" id="7442748">}</span><span class="op" id="7442749">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442753">{</span><span class="string" id="7442754">&#34;\u0000&#34;</span><span class="op" id="7442762">,</span>&nbsp;<span class="string" id="7442764">`\0`</span><span class="op" id="7442768">}</span><span class="op" id="7442769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442773">{</span><span class="string" id="7442774">&#34;\t&#34;</span><span class="op" id="7442778">,</span>&nbsp;<span class="string" id="7442780">`\t`</span><span class="op" id="7442784">}</span><span class="op" id="7442785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442789">{</span><span class="string" id="7442790">&#34;\n&#34;</span><span class="op" id="7442794">,</span>&nbsp;<span class="string" id="7442796">`\n`</span><span class="op" id="7442800">}</span><span class="op" id="7442801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442805">{</span><span class="string" id="7442806">&#34;\r&#34;</span><span class="op" id="7442810">,</span>&nbsp;<span class="string" id="7442812">`\r`</span><span class="op" id="7442816">}</span><span class="op" id="7442817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442821">{</span><span class="string" id="7442822">&#34;\u2028&#34;</span><span class="op" id="7442830">,</span>&nbsp;<span class="string" id="7442832">`\u2028`</span><span class="op" id="7442840">}</span><span class="op" id="7442841">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442845">{</span><span class="string" id="7442846">&#34;\u2029&#34;</span><span class="op" id="7442854">,</span>&nbsp;<span class="string" id="7442856">`\u2029`</span><span class="op" id="7442864">}</span><span class="op" id="7442865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442869">{</span><span class="string" id="7442870">&#34;\\&#34;</span><span class="op" id="7442874">,</span>&nbsp;<span class="string" id="7442876">`\\`</span><span class="op" id="7442880">}</span><span class="op" id="7442881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442885">{</span><span class="string" id="7442886">&#34;\\n&#34;</span><span class="op" id="7442891">,</span>&nbsp;<span class="string" id="7442893">`\\n`</span><span class="op" id="7442898">}</span><span class="op" id="7442899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442903">{</span><span class="string" id="7442904">&#34;foo\r\nbar&#34;</span><span class="op" id="7442916">,</span>&nbsp;<span class="string" id="7442918">`foo\r\nbar`</span><span class="op" id="7442930">}</span><span class="op" id="7442931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7442935">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442971">{</span><span class="string" id="7442972">`&#34;`</span><span class="op" id="7442975">,</span>&nbsp;<span class="string" id="7442977">`\x22`</span><span class="op" id="7442983">}</span><span class="op" id="7442984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7442988">{</span><span class="string" id="7442989">`&#39;`</span><span class="op" id="7442992">,</span>&nbsp;<span class="string" id="7442994">`\x27`</span><span class="op" id="7443000">}</span><span class="op" id="7443001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7443005">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443060">{</span><span class="string" id="7443061">`&amp;amp;`</span><span class="op" id="7443068">,</span>&nbsp;<span class="string" id="7443070">`\x26amp;`</span><span class="op" id="7443080">}</span><span class="op" id="7443081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7443085">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443148">{</span><span class="string" id="7443149">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7443160">,</span>&nbsp;<span class="string" id="7443162">`\x3c\/script\x3e`</span><span class="op" id="7443180">}</span><span class="op" id="7443181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443185">{</span><span class="string" id="7443186">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7443197">,</span>&nbsp;<span class="string" id="7443199">`\x3c!\[CDATA\[`</span><span class="op" id="7443215">}</span><span class="op" id="7443216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443220">{</span><span class="string" id="7443221">&#34;]]&gt;&#34;</span><span class="op" id="7443226">,</span>&nbsp;<span class="string" id="7443228">`\]\]\x3e`</span><span class="op" id="7443238">}</span><span class="op" id="7443239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7443243">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443269">{</span><span class="string" id="7443270">&#34;&lt;!--&#34;</span><span class="op" id="7443276">,</span>&nbsp;<span class="string" id="7443278">`\x3c!\-\-`</span><span class="op" id="7443289">}</span><span class="op" id="7443290">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443294">{</span><span class="string" id="7443295">&#34;--&gt;&#34;</span><span class="op" id="7443300">,</span>&nbsp;<span class="string" id="7443302">`\-\-\x3e`</span><span class="op" id="7443312">}</span><span class="op" id="7443313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443317">{</span><span class="string" id="7443318">&#34;*&#34;</span><span class="op" id="7443321">,</span>&nbsp;<span class="string" id="7443323">`\*`</span><span class="op" id="7443327">}</span><span class="op" id="7443328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443332">{</span><span class="string" id="7443333">&#34;+&#34;</span><span class="op" id="7443336">,</span>&nbsp;<span class="string" id="7443338">`\x2b`</span><span class="op" id="7443344">}</span><span class="op" id="7443345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443349">{</span><span class="string" id="7443350">&#34;?&#34;</span><span class="op" id="7443353">,</span>&nbsp;<span class="string" id="7443355">`\?`</span><span class="op" id="7443359">}</span><span class="op" id="7443360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443364">{</span><span class="string" id="7443365">&#34;[](){}&#34;</span><span class="op" id="7443373">,</span>&nbsp;<span class="string" id="7443375">`\[\]\(\)\{\}`</span><span class="op" id="7443389">}</span><span class="op" id="7443390">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443394">{</span><span class="string" id="7443395">&#34;$foo|x.y&#34;</span><span class="op" id="7443405">,</span>&nbsp;<span class="string" id="7443407">`\$foo\|x\.y`</span><span class="op" id="7443420">}</span><span class="op" id="7443421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443425">{</span><span class="string" id="7443426">&#34;x^y&#34;</span><span class="op" id="7443431">,</span>&nbsp;<span class="string" id="7443433">`x\^y`</span><span class="op" id="7443439">}</span><span class="op" id="7443440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7443447">for</span>&nbsp;<span class="ident" id="7443451">_</span><span class="op" id="7443452">,</span>&nbsp;<span class="ident" id="7443454">test</span>&nbsp;<span class="op" id="7443459">:=</span>&nbsp;<span class="keyword" id="7443462">range</span>&nbsp;<span class="ident" id="7443468">tests</span>&nbsp;<span class="op" id="7443474">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7443478">esc</span>&nbsp;<span class="op" id="7443482">:=</span>&nbsp;<span class="ident" id="7443485">jsRegexpEscaper</span><span class="op" id="7443500">(</span><span class="ident" id="7443501">test</span><span class="op" id="7443505">.</span><span class="ident" id="7443506">x</span><span class="op" id="7443507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7443511">if</span>&nbsp;<span class="ident" id="7443514">esc</span>&nbsp;<span class="op" id="7443518">!=</span>&nbsp;<span class="ident" id="7443521">test</span><span class="op" id="7443525">.</span><span class="ident" id="7443526">esc</span>&nbsp;<span class="op" id="7443530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7443535">t</span><span class="op" id="7443536">.</span><span class="ident" id="7443537">Errorf</span><span class="op" id="7443543">(</span><span class="string" id="7443544">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7443564">,</span>&nbsp;<span class="ident" id="7443566">test</span><span class="op" id="7443570">.</span><span class="ident" id="7443571">x</span><span class="op" id="7443572">,</span>&nbsp;<span class="ident" id="7443574">test</span><span class="op" id="7443578">.</span><span class="ident" id="7443579">esc</span><span class="op" id="7443582">,</span>&nbsp;<span class="ident" id="7443584">esc</span><span class="op" id="7443587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7443594">}</span><br>
<span class="lineno">265</span><span class="op" id="7443596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7443599">func</span>&nbsp;<span class="ident" id="7443604">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="7443647">(</span><span class="ident" id="7443648">t</span>&nbsp;<span class="op" id="7443650">*</span><span class="ident" id="7443651">testing</span><span class="op" id="7443658">.</span><span class="ident" id="7443659">T</span><span class="op" id="7443660">)</span>&nbsp;<span class="op" id="7443662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7443665">input</span>&nbsp;<span class="op" id="7443671">:=</span>&nbsp;<span class="op" id="7443674">(</span><span class="string" id="7443675">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="7443736">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7443740">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7443807">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7443811">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="7443830">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7443834">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="7443853">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7443857">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7443876">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7443880">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="7443899">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7443903">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7443922">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7443926">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7443948">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7443952">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7443994">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7443998">tests</span>&nbsp;<span class="op" id="7444004">:=</span>&nbsp;<span class="op" id="7444007">[</span><span class="op" id="7444008">]</span><span class="keyword" id="7444009">struct</span>&nbsp;<span class="op" id="7444016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7444020">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7444028">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7444037">escaper</span>&nbsp;<span class="keyword" id="7444045">func</span><span class="op" id="7444049">(</span><span class="op" id="7444050">...</span><span class="keyword" id="7444053">interface</span><span class="op" id="7444062">{</span><span class="op" id="7444063">}</span><span class="op" id="7444064">)</span>&nbsp;<span class="builtintype" id="7444066">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7444075">escaped</span>&nbsp;<span class="builtintype" id="7444083">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7444091">}</span><span class="op" id="7444092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7444096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444101">&#34;jsStrEscaper&#34;</span><span class="op" id="7444115">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7444120">jsStrEscaper</span><span class="op" id="7444132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444137">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7444171">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444177">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7444209">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444215">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7444250">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444256">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7444291">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444297">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="7444329">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444335">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="7444360">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444366">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7444385">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444391">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="7444411">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444417">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7444436">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444442">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7444464">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444470">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7444514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7444518">}</span><span class="op" id="7444519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7444523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444528">&#34;jsRegexpEscaper&#34;</span><span class="op" id="7444545">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7444550">jsRegexpEscaper</span><span class="op" id="7444565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444570">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7444604">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444610">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7444642">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444648">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7444683">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444689">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7444724">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444730">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="7444768">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444774">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="7444800">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444806">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7444825">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444831">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="7444854">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444860">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7444879">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444885">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="7444906">+</span>&nbsp;<span class="string" id="7444908">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="7444917">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7444923">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7444967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7444971">}</span><span class="op" id="7444972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7444975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7444979">for</span>&nbsp;<span class="ident" id="7444983">_</span><span class="op" id="7444984">,</span>&nbsp;<span class="ident" id="7444986">test</span>&nbsp;<span class="op" id="7444991">:=</span>&nbsp;<span class="keyword" id="7444994">range</span>&nbsp;<span class="ident" id="7445000">tests</span>&nbsp;<span class="op" id="7445006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445010">if</span>&nbsp;<span class="ident" id="7445013">s</span>&nbsp;<span class="op" id="7445015">:=</span>&nbsp;<span class="ident" id="7445018">test</span><span class="op" id="7445022">.</span><span class="ident" id="7445023">escaper</span><span class="op" id="7445030">(</span><span class="ident" id="7445031">input</span><span class="op" id="7445036">)</span><span class="op" id="7445037">;</span>&nbsp;<span class="ident" id="7445039">s</span>&nbsp;<span class="op" id="7445041">!=</span>&nbsp;<span class="ident" id="7445044">test</span><span class="op" id="7445048">.</span><span class="ident" id="7445049">escaped</span>&nbsp;<span class="op" id="7445057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7445062">t</span><span class="op" id="7445063">.</span><span class="ident" id="7445064">Errorf</span><span class="op" id="7445070">(</span><span class="string" id="7445071">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7445103">,</span>&nbsp;<span class="ident" id="7445105">test</span><span class="op" id="7445109">.</span><span class="ident" id="7445110">name</span><span class="op" id="7445114">,</span>&nbsp;<span class="ident" id="7445116">test</span><span class="op" id="7445120">.</span><span class="ident" id="7445121">escaped</span><span class="op" id="7445128">,</span>&nbsp;<span class="ident" id="7445130">s</span><span class="op" id="7445131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445136">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7445147">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7445152">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7445202">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445251">var</span>&nbsp;<span class="ident" id="7445255">buf</span>&nbsp;<span class="ident" id="7445259">bytes</span><span class="op" id="7445264">.</span><span class="ident" id="7445265">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445274">for</span>&nbsp;<span class="ident" id="7445278">_</span><span class="op" id="7445279">,</span>&nbsp;<span class="ident" id="7445281">c</span>&nbsp;<span class="op" id="7445283">:=</span>&nbsp;<span class="keyword" id="7445286">range</span>&nbsp;<span class="ident" id="7445292">input</span>&nbsp;<span class="op" id="7445298">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7445303">buf</span><span class="op" id="7445306">.</span><span class="ident" id="7445307">WriteString</span><span class="op" id="7445318">(</span><span class="ident" id="7445319">test</span><span class="op" id="7445323">.</span><span class="ident" id="7445324">escaper</span><span class="op" id="7445331">(</span><span class="builtintype" id="7445332">string</span><span class="op" id="7445338">(</span><span class="ident" id="7445339">c</span><span class="op" id="7445340">)</span><span class="op" id="7445341">)</span><span class="op" id="7445342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7445346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445351">if</span>&nbsp;<span class="ident" id="7445354">s</span>&nbsp;<span class="op" id="7445356">:=</span>&nbsp;<span class="ident" id="7445359">buf</span><span class="op" id="7445362">.</span><span class="ident" id="7445363">String</span><span class="op" id="7445369">(</span><span class="op" id="7445370">)</span><span class="op" id="7445371">;</span>&nbsp;<span class="ident" id="7445373">s</span>&nbsp;<span class="op" id="7445375">!=</span>&nbsp;<span class="ident" id="7445378">test</span><span class="op" id="7445382">.</span><span class="ident" id="7445383">escaped</span>&nbsp;<span class="op" id="7445391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7445396">t</span><span class="op" id="7445397">.</span><span class="ident" id="7445398">Errorf</span><span class="op" id="7445404">(</span><span class="string" id="7445405">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7445442">,</span>&nbsp;<span class="ident" id="7445444">test</span><span class="op" id="7445448">.</span><span class="ident" id="7445449">name</span><span class="op" id="7445453">,</span>&nbsp;<span class="ident" id="7445455">test</span><span class="op" id="7445459">.</span><span class="ident" id="7445460">escaped</span><span class="op" id="7445467">,</span>&nbsp;<span class="ident" id="7445469">s</span><span class="op" id="7445470">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445475">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7445486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7445489">}</span><br>
<span class="lineno"></span><span class="op" id="7445491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="7445494">func</span>&nbsp;<span class="ident" id="7445499">BenchmarkJSValEscaperWithNum</span><span class="op" id="7445527">(</span><span class="ident" id="7445528">b</span>&nbsp;<span class="op" id="7445530">*</span><span class="ident" id="7445531">testing</span><span class="op" id="7445538">.</span><span class="ident" id="7445539">B</span><span class="op" id="7445540">)</span>&nbsp;<span class="op" id="7445542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445545">for</span>&nbsp;<span class="ident" id="7445549">i</span>&nbsp;<span class="op" id="7445551">:=</span>&nbsp;<span class="num" id="7445554">0</span><span class="op" id="7445555">;</span>&nbsp;<span class="ident" id="7445557">i</span>&nbsp;<span class="op" id="7445559">&lt;</span>&nbsp;<span class="ident" id="7445561">b</span><span class="op" id="7445562">.</span><span class="ident" id="7445563">N</span><span class="op" id="7445564">;</span>&nbsp;<span class="ident" id="7445566">i</span><span class="op" id="7445567">++</span>&nbsp;<span class="op" id="7445570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7445574">jsValEscaper</span><span class="op" id="7445586">(</span><span class="num" id="7445587">3.141592654</span><span class="op" id="7445598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7445601">}</span><br>
<span class="lineno"></span><span class="op" id="7445603">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7445606">func</span>&nbsp;<span class="ident" id="7445611">BenchmarkJSValEscaperWithStr</span><span class="op" id="7445639">(</span><span class="ident" id="7445640">b</span>&nbsp;<span class="op" id="7445642">*</span><span class="ident" id="7445643">testing</span><span class="op" id="7445650">.</span><span class="ident" id="7445651">B</span><span class="op" id="7445652">)</span>&nbsp;<span class="op" id="7445654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445657">for</span>&nbsp;<span class="ident" id="7445661">i</span>&nbsp;<span class="op" id="7445663">:=</span>&nbsp;<span class="num" id="7445666">0</span><span class="op" id="7445667">;</span>&nbsp;<span class="ident" id="7445669">i</span>&nbsp;<span class="op" id="7445671">&lt;</span>&nbsp;<span class="ident" id="7445673">b</span><span class="op" id="7445674">.</span><span class="ident" id="7445675">N</span><span class="op" id="7445676">;</span>&nbsp;<span class="ident" id="7445678">i</span><span class="op" id="7445679">++</span>&nbsp;<span class="op" id="7445682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7445686">jsValEscaper</span><span class="op" id="7445698">(</span><span class="string" id="7445699">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7445820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7445823">}</span><br>
<span class="lineno">345</span><span class="op" id="7445825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7445828">func</span>&nbsp;<span class="ident" id="7445833">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="7445871">(</span><span class="ident" id="7445872">b</span>&nbsp;<span class="op" id="7445874">*</span><span class="ident" id="7445875">testing</span><span class="op" id="7445882">.</span><span class="ident" id="7445883">B</span><span class="op" id="7445884">)</span>&nbsp;<span class="op" id="7445886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7445889">for</span>&nbsp;<span class="ident" id="7445893">i</span>&nbsp;<span class="op" id="7445895">:=</span>&nbsp;<span class="num" id="7445898">0</span><span class="op" id="7445899">;</span>&nbsp;<span class="ident" id="7445901">i</span>&nbsp;<span class="op" id="7445903">&lt;</span>&nbsp;<span class="ident" id="7445905">b</span><span class="op" id="7445906">.</span><span class="ident" id="7445907">N</span><span class="op" id="7445908">;</span>&nbsp;<span class="ident" id="7445910">i</span><span class="op" id="7445911">++</span>&nbsp;<span class="op" id="7445914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7445918">jsValEscaper</span><span class="op" id="7445930">(</span><span class="string" id="7445931">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7445977">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7445980">}</span><br>
<span class="lineno"></span><span class="op" id="7445982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7445985">func</span>&nbsp;<span class="ident" id="7445990">BenchmarkJSValEscaperWithObj</span><span class="op" id="7446018">(</span><span class="ident" id="7446019">b</span>&nbsp;<span class="op" id="7446021">*</span><span class="ident" id="7446022">testing</span><span class="op" id="7446029">.</span><span class="ident" id="7446030">B</span><span class="op" id="7446031">)</span>&nbsp;<span class="op" id="7446033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446036">o</span>&nbsp;<span class="op" id="7446038">:=</span>&nbsp;<span class="keyword" id="7446041">struct</span>&nbsp;<span class="op" id="7446048">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446052">S</span>&nbsp;<span class="builtintype" id="7446054">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446063">N</span>&nbsp;<span class="builtintype" id="7446065">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446070">}</span><span class="op" id="7446071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7446075">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="7446202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7446206">42</span><span class="op" id="7446208">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7446214">for</span>&nbsp;<span class="ident" id="7446218">i</span>&nbsp;<span class="op" id="7446220">:=</span>&nbsp;<span class="num" id="7446223">0</span><span class="op" id="7446224">;</span>&nbsp;<span class="ident" id="7446226">i</span>&nbsp;<span class="op" id="7446228">&lt;</span>&nbsp;<span class="ident" id="7446230">b</span><span class="op" id="7446231">.</span><span class="ident" id="7446232">N</span><span class="op" id="7446233">;</span>&nbsp;<span class="ident" id="7446235">i</span><span class="op" id="7446236">++</span>&nbsp;<span class="op" id="7446239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446243">jsValEscaper</span><span class="op" id="7446255">(</span><span class="ident" id="7446256">o</span><span class="op" id="7446257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446260">}</span><br>
<span class="lineno"></span><span class="op" id="7446262">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7446265">func</span>&nbsp;<span class="ident" id="7446270">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="7446308">(</span><span class="ident" id="7446309">b</span>&nbsp;<span class="op" id="7446311">*</span><span class="ident" id="7446312">testing</span><span class="op" id="7446319">.</span><span class="ident" id="7446320">B</span><span class="op" id="7446321">)</span>&nbsp;<span class="op" id="7446323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446326">o</span>&nbsp;<span class="op" id="7446328">:=</span>&nbsp;<span class="keyword" id="7446331">struct</span>&nbsp;<span class="op" id="7446338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446342">S</span>&nbsp;<span class="builtintype" id="7446344">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446353">N</span>&nbsp;<span class="builtintype" id="7446355">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446360">}</span><span class="op" id="7446361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7446365">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7446411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7446415">42</span><span class="op" id="7446417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7446423">for</span>&nbsp;<span class="ident" id="7446427">i</span>&nbsp;<span class="op" id="7446429">:=</span>&nbsp;<span class="num" id="7446432">0</span><span class="op" id="7446433">;</span>&nbsp;<span class="ident" id="7446435">i</span>&nbsp;<span class="op" id="7446437">&lt;</span>&nbsp;<span class="ident" id="7446439">b</span><span class="op" id="7446440">.</span><span class="ident" id="7446441">N</span><span class="op" id="7446442">;</span>&nbsp;<span class="ident" id="7446444">i</span><span class="op" id="7446445">++</span>&nbsp;<span class="op" id="7446448">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446452">jsValEscaper</span><span class="op" id="7446464">(</span><span class="ident" id="7446465">o</span><span class="op" id="7446466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446469">}</span><br>
<span class="lineno"></span><span class="op" id="7446471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7446474">func</span>&nbsp;<span class="ident" id="7446479">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="7446510">(</span><span class="ident" id="7446511">b</span>&nbsp;<span class="op" id="7446513">*</span><span class="ident" id="7446514">testing</span><span class="op" id="7446521">.</span><span class="ident" id="7446522">B</span><span class="op" id="7446523">)</span>&nbsp;<span class="op" id="7446525">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7446528">for</span>&nbsp;<span class="ident" id="7446532">i</span>&nbsp;<span class="op" id="7446534">:=</span>&nbsp;<span class="num" id="7446537">0</span><span class="op" id="7446538">;</span>&nbsp;<span class="ident" id="7446540">i</span>&nbsp;<span class="op" id="7446542">&lt;</span>&nbsp;<span class="ident" id="7446544">b</span><span class="op" id="7446545">.</span><span class="ident" id="7446546">N</span><span class="op" id="7446547">;</span>&nbsp;<span class="ident" id="7446549">i</span><span class="op" id="7446550">++</span>&nbsp;<span class="op" id="7446553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446557">jsStrEscaper</span><span class="op" id="7446569">(</span><span class="string" id="7446570">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="7446617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446620">}</span><br>
<span class="lineno"></span><span class="op" id="7446622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="7446625">func</span>&nbsp;<span class="ident" id="7446630">BenchmarkJSStrEscaper</span><span class="op" id="7446651">(</span><span class="ident" id="7446652">b</span>&nbsp;<span class="op" id="7446654">*</span><span class="ident" id="7446655">testing</span><span class="op" id="7446662">.</span><span class="ident" id="7446663">B</span><span class="op" id="7446664">)</span>&nbsp;<span class="op" id="7446666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7446669">for</span>&nbsp;<span class="ident" id="7446673">i</span>&nbsp;<span class="op" id="7446675">:=</span>&nbsp;<span class="num" id="7446678">0</span><span class="op" id="7446679">;</span>&nbsp;<span class="ident" id="7446681">i</span>&nbsp;<span class="op" id="7446683">&lt;</span>&nbsp;<span class="ident" id="7446685">b</span><span class="op" id="7446686">.</span><span class="ident" id="7446687">N</span><span class="op" id="7446688">;</span>&nbsp;<span class="ident" id="7446690">i</span><span class="op" id="7446691">++</span>&nbsp;<span class="op" id="7446694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446698">jsStrEscaper</span><span class="op" id="7446710">(</span><span class="string" id="7446711">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7446832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446835">}</span><br>
<span class="lineno"></span><span class="op" id="7446837">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7446840">func</span>&nbsp;<span class="ident" id="7446845">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="7446879">(</span><span class="ident" id="7446880">b</span>&nbsp;<span class="op" id="7446882">*</span><span class="ident" id="7446883">testing</span><span class="op" id="7446890">.</span><span class="ident" id="7446891">B</span><span class="op" id="7446892">)</span>&nbsp;<span class="op" id="7446894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7446897">for</span>&nbsp;<span class="ident" id="7446901">i</span>&nbsp;<span class="op" id="7446903">:=</span>&nbsp;<span class="num" id="7446906">0</span><span class="op" id="7446907">;</span>&nbsp;<span class="ident" id="7446909">i</span>&nbsp;<span class="op" id="7446911">&lt;</span>&nbsp;<span class="ident" id="7446913">b</span><span class="op" id="7446914">.</span><span class="ident" id="7446915">N</span><span class="op" id="7446916">;</span>&nbsp;<span class="ident" id="7446918">i</span><span class="op" id="7446919">++</span>&nbsp;<span class="op" id="7446922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7446926">jsRegexpEscaper</span><span class="op" id="7446941">(</span><span class="string" id="7446942">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7446988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7446991">}</span><br>
<span class="lineno">395</span><span class="op" id="7446993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7446996">func</span>&nbsp;<span class="ident" id="7447001">BenchmarkJSRegexpEscaper</span><span class="op" id="7447025">(</span><span class="ident" id="7447026">b</span>&nbsp;<span class="op" id="7447028">*</span><span class="ident" id="7447029">testing</span><span class="op" id="7447036">.</span><span class="ident" id="7447037">B</span><span class="op" id="7447038">)</span>&nbsp;<span class="op" id="7447040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447043">for</span>&nbsp;<span class="ident" id="7447047">i</span>&nbsp;<span class="op" id="7447049">:=</span>&nbsp;<span class="num" id="7447052">0</span><span class="op" id="7447053">;</span>&nbsp;<span class="ident" id="7447055">i</span>&nbsp;<span class="op" id="7447057">&lt;</span>&nbsp;<span class="ident" id="7447059">b</span><span class="op" id="7447060">.</span><span class="ident" id="7447061">N</span><span class="op" id="7447062">;</span>&nbsp;<span class="ident" id="7447064">i</span><span class="op" id="7447065">++</span>&nbsp;<span class="op" id="7447068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7447072">jsRegexpEscaper</span><span class="op" id="7447087">(</span><span class="string" id="7447088">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7447209">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7447212">}</span><br>
<span class="lineno"></span><span class="op" id="7447214">}</span>
</div>
</body>
</html>
