<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html" class="current">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7288044">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7288099">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7288153">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7288204">package</span>&nbsp;<span class="ident" id="7288212">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7288220">import</span>&nbsp;<span class="op" id="7288227">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7288230">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7288239">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7288245">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7288255">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7288258">func</span>&nbsp;<span class="ident" id="7288263">testConstant</span><span class="op" id="7288275">(</span><span class="ident" id="7288276">t</span>&nbsp;<span class="op" id="7288278">*</span><span class="ident" id="7288279">testing</span><span class="op" id="7288286">.</span><span class="ident" id="7288287">T</span><span class="op" id="7288288">,</span>&nbsp;<span class="ident" id="7288290">w</span>&nbsp;<span class="builtintype" id="7288292">uint</span><span class="op" id="7288296">,</span>&nbsp;<span class="ident" id="7288298">max</span>&nbsp;<span class="builtintype" id="7288302">int</span><span class="op" id="7288305">)</span>&nbsp;<span class="op" id="7288307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288310">buf</span>&nbsp;<span class="op" id="7288314">:=</span>&nbsp;<span class="builtinfunc" id="7288317">make</span><span class="op" id="7288321">(</span><span class="op" id="7288322">[</span><span class="op" id="7288323">]</span><span class="builtintype" id="7288324">byte</span><span class="op" id="7288328">,</span>&nbsp;<span class="ident" id="7288330">MaxVarintLen64</span><span class="op" id="7288344">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288347">n</span>&nbsp;<span class="op" id="7288349">:=</span>&nbsp;<span class="ident" id="7288352">PutUvarint</span><span class="op" id="7288362">(</span><span class="ident" id="7288363">buf</span><span class="op" id="7288366">,</span>&nbsp;<span class="num" id="7288368">1</span><span class="op" id="7288369">&lt;&lt;</span><span class="ident" id="7288371">w</span><span class="op" id="7288372">-</span><span class="num" id="7288373">1</span><span class="op" id="7288374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288377">if</span>&nbsp;<span class="ident" id="7288380">n</span>&nbsp;<span class="op" id="7288382">!=</span>&nbsp;<span class="ident" id="7288385">max</span>&nbsp;<span class="op" id="7288389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288393">t</span><span class="op" id="7288394">.</span><span class="ident" id="7288395">Errorf</span><span class="op" id="7288401">(</span><span class="string" id="7288402">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7288432">,</span>&nbsp;<span class="ident" id="7288434">w</span><span class="op" id="7288435">,</span>&nbsp;<span class="ident" id="7288437">max</span><span class="op" id="7288440">,</span>&nbsp;<span class="ident" id="7288442">n</span><span class="op" id="7288443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7288446">}</span><br>
<span class="lineno"></span><span class="op" id="7288448">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7288451">func</span>&nbsp;<span class="ident" id="7288456">TestConstants</span><span class="op" id="7288469">(</span><span class="ident" id="7288470">t</span>&nbsp;<span class="op" id="7288472">*</span><span class="ident" id="7288473">testing</span><span class="op" id="7288480">.</span><span class="ident" id="7288481">T</span><span class="op" id="7288482">)</span>&nbsp;<span class="op" id="7288484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288487">testConstant</span><span class="op" id="7288499">(</span><span class="ident" id="7288500">t</span><span class="op" id="7288501">,</span>&nbsp;<span class="num" id="7288503">16</span><span class="op" id="7288505">,</span>&nbsp;<span class="ident" id="7288507">MaxVarintLen16</span><span class="op" id="7288521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288524">testConstant</span><span class="op" id="7288536">(</span><span class="ident" id="7288537">t</span><span class="op" id="7288538">,</span>&nbsp;<span class="num" id="7288540">32</span><span class="op" id="7288542">,</span>&nbsp;<span class="ident" id="7288544">MaxVarintLen32</span><span class="op" id="7288558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288561">testConstant</span><span class="op" id="7288573">(</span><span class="ident" id="7288574">t</span><span class="op" id="7288575">,</span>&nbsp;<span class="num" id="7288577">64</span><span class="op" id="7288579">,</span>&nbsp;<span class="ident" id="7288581">MaxVarintLen64</span><span class="op" id="7288595">)</span><br>
<span class="lineno">25</span><span class="op" id="7288597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7288600">func</span>&nbsp;<span class="ident" id="7288605">testVarint</span><span class="op" id="7288615">(</span><span class="ident" id="7288616">t</span>&nbsp;<span class="op" id="7288618">*</span><span class="ident" id="7288619">testing</span><span class="op" id="7288626">.</span><span class="ident" id="7288627">T</span><span class="op" id="7288628">,</span>&nbsp;<span class="ident" id="7288630">x</span>&nbsp;<span class="ident" id="7288632">int64</span><span class="op" id="7288637">)</span>&nbsp;<span class="op" id="7288639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288642">buf</span>&nbsp;<span class="op" id="7288646">:=</span>&nbsp;<span class="builtinfunc" id="7288649">make</span><span class="op" id="7288653">(</span><span class="op" id="7288654">[</span><span class="op" id="7288655">]</span><span class="builtintype" id="7288656">byte</span><span class="op" id="7288660">,</span>&nbsp;<span class="ident" id="7288662">MaxVarintLen64</span><span class="op" id="7288676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288679">n</span>&nbsp;<span class="op" id="7288681">:=</span>&nbsp;<span class="ident" id="7288684">PutVarint</span><span class="op" id="7288693">(</span><span class="ident" id="7288694">buf</span><span class="op" id="7288697">,</span>&nbsp;<span class="ident" id="7288699">x</span><span class="op" id="7288700">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288703">y</span><span class="op" id="7288704">,</span>&nbsp;<span class="ident" id="7288706">m</span>&nbsp;<span class="op" id="7288708">:=</span>&nbsp;<span class="ident" id="7288711">Varint</span><span class="op" id="7288717">(</span><span class="ident" id="7288718">buf</span><span class="op" id="7288721">[</span><span class="num" id="7288722">0</span><span class="op" id="7288723">:</span><span class="ident" id="7288724">n</span><span class="op" id="7288725">]</span><span class="op" id="7288726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288729">if</span>&nbsp;<span class="ident" id="7288732">x</span>&nbsp;<span class="op" id="7288734">!=</span>&nbsp;<span class="ident" id="7288737">y</span>&nbsp;<span class="op" id="7288739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288743">t</span><span class="op" id="7288744">.</span><span class="ident" id="7288745">Errorf</span><span class="op" id="7288751">(</span><span class="string" id="7288752">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7288772">,</span>&nbsp;<span class="ident" id="7288774">x</span><span class="op" id="7288775">,</span>&nbsp;<span class="ident" id="7288777">y</span><span class="op" id="7288778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7288781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288784">if</span>&nbsp;<span class="ident" id="7288787">n</span>&nbsp;<span class="op" id="7288789">!=</span>&nbsp;<span class="ident" id="7288792">m</span>&nbsp;<span class="op" id="7288794">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288798">t</span><span class="op" id="7288799">.</span><span class="ident" id="7288800">Errorf</span><span class="op" id="7288806">(</span><span class="string" id="7288807">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7288840">,</span>&nbsp;<span class="ident" id="7288842">x</span><span class="op" id="7288843">,</span>&nbsp;<span class="ident" id="7288845">m</span><span class="op" id="7288846">,</span>&nbsp;<span class="ident" id="7288848">n</span><span class="op" id="7288849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7288852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288856">y</span><span class="op" id="7288857">,</span>&nbsp;<span class="ident" id="7288859">err</span>&nbsp;<span class="op" id="7288863">:=</span>&nbsp;<span class="ident" id="7288866">ReadVarint</span><span class="op" id="7288876">(</span><span class="ident" id="7288877">bytes</span><span class="op" id="7288882">.</span><span class="ident" id="7288883">NewReader</span><span class="op" id="7288892">(</span><span class="ident" id="7288893">buf</span><span class="op" id="7288896">)</span><span class="op" id="7288897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288900">if</span>&nbsp;<span class="ident" id="7288903">err</span>&nbsp;<span class="op" id="7288907">!=</span>&nbsp;<span class="builtintype" id="7288910">nil</span>&nbsp;<span class="op" id="7288914">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288918">t</span><span class="op" id="7288919">.</span><span class="ident" id="7288920">Errorf</span><span class="op" id="7288926">(</span><span class="string" id="7288927">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="7288947">,</span>&nbsp;<span class="ident" id="7288949">x</span><span class="op" id="7288950">,</span>&nbsp;<span class="ident" id="7288952">err</span><span class="op" id="7288955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7288958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288961">if</span>&nbsp;<span class="ident" id="7288964">x</span>&nbsp;<span class="op" id="7288966">!=</span>&nbsp;<span class="ident" id="7288969">y</span>&nbsp;<span class="op" id="7288971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288975">t</span><span class="op" id="7288976">.</span><span class="ident" id="7288977">Errorf</span><span class="op" id="7288983">(</span><span class="string" id="7288984">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7289008">,</span>&nbsp;<span class="ident" id="7289010">x</span><span class="op" id="7289011">,</span>&nbsp;<span class="ident" id="7289013">y</span><span class="op" id="7289014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289017">}</span><br>
<span class="lineno">45</span><span class="op" id="7289019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7289022">func</span>&nbsp;<span class="ident" id="7289027">testUvarint</span><span class="op" id="7289038">(</span><span class="ident" id="7289039">t</span>&nbsp;<span class="op" id="7289041">*</span><span class="ident" id="7289042">testing</span><span class="op" id="7289049">.</span><span class="ident" id="7289050">T</span><span class="op" id="7289051">,</span>&nbsp;<span class="ident" id="7289053">x</span>&nbsp;<span class="ident" id="7289055">uint64</span><span class="op" id="7289061">)</span>&nbsp;<span class="op" id="7289063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289066">buf</span>&nbsp;<span class="op" id="7289070">:=</span>&nbsp;<span class="builtinfunc" id="7289073">make</span><span class="op" id="7289077">(</span><span class="op" id="7289078">[</span><span class="op" id="7289079">]</span><span class="builtintype" id="7289080">byte</span><span class="op" id="7289084">,</span>&nbsp;<span class="ident" id="7289086">MaxVarintLen64</span><span class="op" id="7289100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289103">n</span>&nbsp;<span class="op" id="7289105">:=</span>&nbsp;<span class="ident" id="7289108">PutUvarint</span><span class="op" id="7289118">(</span><span class="ident" id="7289119">buf</span><span class="op" id="7289122">,</span>&nbsp;<span class="ident" id="7289124">x</span><span class="op" id="7289125">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289128">y</span><span class="op" id="7289129">,</span>&nbsp;<span class="ident" id="7289131">m</span>&nbsp;<span class="op" id="7289133">:=</span>&nbsp;<span class="ident" id="7289136">Uvarint</span><span class="op" id="7289143">(</span><span class="ident" id="7289144">buf</span><span class="op" id="7289147">[</span><span class="num" id="7289148">0</span><span class="op" id="7289149">:</span><span class="ident" id="7289150">n</span><span class="op" id="7289151">]</span><span class="op" id="7289152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7289155">if</span>&nbsp;<span class="ident" id="7289158">x</span>&nbsp;<span class="op" id="7289160">!=</span>&nbsp;<span class="ident" id="7289163">y</span>&nbsp;<span class="op" id="7289165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289169">t</span><span class="op" id="7289170">.</span><span class="ident" id="7289171">Errorf</span><span class="op" id="7289177">(</span><span class="string" id="7289178">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7289199">,</span>&nbsp;<span class="ident" id="7289201">x</span><span class="op" id="7289202">,</span>&nbsp;<span class="ident" id="7289204">y</span><span class="op" id="7289205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7289211">if</span>&nbsp;<span class="ident" id="7289214">n</span>&nbsp;<span class="op" id="7289216">!=</span>&nbsp;<span class="ident" id="7289219">m</span>&nbsp;<span class="op" id="7289221">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289225">t</span><span class="op" id="7289226">.</span><span class="ident" id="7289227">Errorf</span><span class="op" id="7289233">(</span><span class="string" id="7289234">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7289268">,</span>&nbsp;<span class="ident" id="7289270">x</span><span class="op" id="7289271">,</span>&nbsp;<span class="ident" id="7289273">m</span><span class="op" id="7289274">,</span>&nbsp;<span class="ident" id="7289276">n</span><span class="op" id="7289277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289284">y</span><span class="op" id="7289285">,</span>&nbsp;<span class="ident" id="7289287">err</span>&nbsp;<span class="op" id="7289291">:=</span>&nbsp;<span class="ident" id="7289294">ReadUvarint</span><span class="op" id="7289305">(</span><span class="ident" id="7289306">bytes</span><span class="op" id="7289311">.</span><span class="ident" id="7289312">NewReader</span><span class="op" id="7289321">(</span><span class="ident" id="7289322">buf</span><span class="op" id="7289325">)</span><span class="op" id="7289326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7289329">if</span>&nbsp;<span class="ident" id="7289332">err</span>&nbsp;<span class="op" id="7289336">!=</span>&nbsp;<span class="builtintype" id="7289339">nil</span>&nbsp;<span class="op" id="7289343">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289347">t</span><span class="op" id="7289348">.</span><span class="ident" id="7289349">Errorf</span><span class="op" id="7289355">(</span><span class="string" id="7289356">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="7289377">,</span>&nbsp;<span class="ident" id="7289379">x</span><span class="op" id="7289380">,</span>&nbsp;<span class="ident" id="7289382">err</span><span class="op" id="7289385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7289391">if</span>&nbsp;<span class="ident" id="7289394">x</span>&nbsp;<span class="op" id="7289396">!=</span>&nbsp;<span class="ident" id="7289399">y</span>&nbsp;<span class="op" id="7289401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289405">t</span><span class="op" id="7289406">.</span><span class="ident" id="7289407">Errorf</span><span class="op" id="7289413">(</span><span class="string" id="7289414">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7289439">,</span>&nbsp;<span class="ident" id="7289441">x</span><span class="op" id="7289442">,</span>&nbsp;<span class="ident" id="7289444">y</span><span class="op" id="7289445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289448">}</span><br>
<span class="lineno">65</span><span class="op" id="7289450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7289453">var</span>&nbsp;<span class="ident" id="7289457">tests</span>&nbsp;<span class="op" id="7289463">=</span>&nbsp;<span class="op" id="7289465">[</span><span class="op" id="7289466">]</span><span class="ident" id="7289467">int64</span><span class="op" id="7289472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289475">-</span><span class="num" id="7289476">1</span>&nbsp;<span class="op" id="7289478">&lt;&lt;</span>&nbsp;<span class="num" id="7289481">63</span><span class="op" id="7289483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289486">-</span><span class="num" id="7289487">1</span><span class="op" id="7289488">&lt;&lt;</span><span class="num" id="7289490">63</span>&nbsp;<span class="op" id="7289493">+</span>&nbsp;<span class="num" id="7289495">1</span><span class="op" id="7289496">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289499">-</span><span class="num" id="7289500">1</span><span class="op" id="7289501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289504">0</span><span class="op" id="7289505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289508">1</span><span class="op" id="7289509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289512">2</span><span class="op" id="7289513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289516">10</span><span class="op" id="7289518">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289521">20</span><span class="op" id="7289523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289526">63</span><span class="op" id="7289528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289531">64</span><span class="op" id="7289533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289536">65</span><span class="op" id="7289538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289541">127</span><span class="op" id="7289544">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289547">128</span><span class="op" id="7289550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289553">129</span><span class="op" id="7289556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289559">255</span><span class="op" id="7289562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289565">256</span><span class="op" id="7289568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289571">257</span><span class="op" id="7289574">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7289577">1</span><span class="op" id="7289578">&lt;&lt;</span><span class="num" id="7289580">63</span>&nbsp;<span class="op" id="7289583">-</span>&nbsp;<span class="num" id="7289585">1</span><span class="op" id="7289586">,</span><br>
<span class="lineno"></span><span class="op" id="7289588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7289591">func</span>&nbsp;<span class="ident" id="7289596">TestVarint</span><span class="op" id="7289606">(</span><span class="ident" id="7289607">t</span>&nbsp;<span class="op" id="7289609">*</span><span class="ident" id="7289610">testing</span><span class="op" id="7289617">.</span><span class="ident" id="7289618">T</span><span class="op" id="7289619">)</span>&nbsp;<span class="op" id="7289621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7289624">for</span>&nbsp;<span class="ident" id="7289628">_</span><span class="op" id="7289629">,</span>&nbsp;<span class="ident" id="7289631">x</span>&nbsp;<span class="op" id="7289633">:=</span>&nbsp;<span class="keyword" id="7289636">range</span>&nbsp;<span class="ident" id="7289642">tests</span>&nbsp;<span class="op" id="7289648">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289652">testVarint</span><span class="op" id="7289662">(</span><span class="ident" id="7289663">t</span><span class="op" id="7289664">,</span>&nbsp;<span class="ident" id="7289666">x</span><span class="op" id="7289667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289671">testVarint</span><span class="op" id="7289681">(</span><span class="ident" id="7289682">t</span><span class="op" id="7289683">,</span>&nbsp;<span class="op" id="7289685">-</span><span class="ident" id="7289686">x</span><span class="op" id="7289687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7289693">for</span>&nbsp;<span class="ident" id="7289697">x</span>&nbsp;<span class="op" id="7289699">:=</span>&nbsp;<span class="ident" id="7289702">int64</span><span class="op" id="7289707">(</span><span class="num" id="7289708">0x7</span><span class="op" id="7289711">)</span><span class="op" id="7289712">;</span>&nbsp;<span class="ident" id="7289714">x</span>&nbsp;<span class="op" id="7289716">!=</span>&nbsp;<span class="num" id="7289719">0</span><span class="op" id="7289720">;</span>&nbsp;<span class="ident" id="7289722">x</span>&nbsp;<span class="op" id="7289724">&lt;&lt;=</span>&nbsp;<span class="num" id="7289728">1</span>&nbsp;<span class="op" id="7289730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289734">testVarint</span><span class="op" id="7289744">(</span><span class="ident" id="7289745">t</span><span class="op" id="7289746">,</span>&nbsp;<span class="ident" id="7289748">x</span><span class="op" id="7289749">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289753">testVarint</span><span class="op" id="7289763">(</span><span class="ident" id="7289764">t</span><span class="op" id="7289765">,</span>&nbsp;<span class="op" id="7289767">-</span><span class="ident" id="7289768">x</span><span class="op" id="7289769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289772">}</span><br>
<span class="lineno"></span><span class="op" id="7289774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7289777">func</span>&nbsp;<span class="ident" id="7289782">TestUvarint</span><span class="op" id="7289793">(</span><span class="ident" id="7289794">t</span>&nbsp;<span class="op" id="7289796">*</span><span class="ident" id="7289797">testing</span><span class="op" id="7289804">.</span><span class="ident" id="7289805">T</span><span class="op" id="7289806">)</span>&nbsp;<span class="op" id="7289808">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7289811">for</span>&nbsp;<span class="ident" id="7289815">_</span><span class="op" id="7289816">,</span>&nbsp;<span class="ident" id="7289818">x</span>&nbsp;<span class="op" id="7289820">:=</span>&nbsp;<span class="keyword" id="7289823">range</span>&nbsp;<span class="ident" id="7289829">tests</span>&nbsp;<span class="op" id="7289835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289839">testUvarint</span><span class="op" id="7289850">(</span><span class="ident" id="7289851">t</span><span class="op" id="7289852">,</span>&nbsp;<span class="ident" id="7289854">uint64</span><span class="op" id="7289860">(</span><span class="ident" id="7289861">x</span><span class="op" id="7289862">)</span><span class="op" id="7289863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7289869">for</span>&nbsp;<span class="ident" id="7289873">x</span>&nbsp;<span class="op" id="7289875">:=</span>&nbsp;<span class="ident" id="7289878">uint64</span><span class="op" id="7289884">(</span><span class="num" id="7289885">0x7</span><span class="op" id="7289888">)</span><span class="op" id="7289889">;</span>&nbsp;<span class="ident" id="7289891">x</span>&nbsp;<span class="op" id="7289893">!=</span>&nbsp;<span class="num" id="7289896">0</span><span class="op" id="7289897">;</span>&nbsp;<span class="ident" id="7289899">x</span>&nbsp;<span class="op" id="7289901">&lt;&lt;=</span>&nbsp;<span class="num" id="7289905">1</span>&nbsp;<span class="op" id="7289907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289911">testUvarint</span><span class="op" id="7289922">(</span><span class="ident" id="7289923">t</span><span class="op" id="7289924">,</span>&nbsp;<span class="ident" id="7289926">x</span><span class="op" id="7289927">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7289930">}</span><br>
<span class="lineno"></span><span class="op" id="7289932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7289935">func</span>&nbsp;<span class="ident" id="7289940">TestBufferTooSmall</span><span class="op" id="7289958">(</span><span class="ident" id="7289959">t</span>&nbsp;<span class="op" id="7289961">*</span><span class="ident" id="7289962">testing</span><span class="op" id="7289969">.</span><span class="ident" id="7289970">T</span><span class="op" id="7289971">)</span>&nbsp;<span class="op" id="7289973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289976">buf</span>&nbsp;<span class="op" id="7289980">:=</span>&nbsp;<span class="op" id="7289983">[</span><span class="op" id="7289984">]</span><span class="builtintype" id="7289985">byte</span><span class="op" id="7289989">{</span><span class="num" id="7289990">0x80</span><span class="op" id="7289994">,</span>&nbsp;<span class="num" id="7289996">0x80</span><span class="op" id="7290000">,</span>&nbsp;<span class="num" id="7290002">0x80</span><span class="op" id="7290006">,</span>&nbsp;<span class="num" id="7290008">0x80</span><span class="op" id="7290012">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7290015">for</span>&nbsp;<span class="ident" id="7290019">i</span>&nbsp;<span class="op" id="7290021">:=</span>&nbsp;<span class="num" id="7290024">0</span><span class="op" id="7290025">;</span>&nbsp;<span class="ident" id="7290027">i</span>&nbsp;<span class="op" id="7290029">&lt;=</span>&nbsp;<span class="builtinfunc" id="7290032">len</span><span class="op" id="7290035">(</span><span class="ident" id="7290036">buf</span><span class="op" id="7290039">)</span><span class="op" id="7290040">;</span>&nbsp;<span class="ident" id="7290042">i</span><span class="op" id="7290043">++</span>&nbsp;<span class="op" id="7290046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290050">buf</span>&nbsp;<span class="op" id="7290054">:=</span>&nbsp;<span class="ident" id="7290057">buf</span><span class="op" id="7290060">[</span><span class="num" id="7290061">0</span><span class="op" id="7290062">:</span><span class="ident" id="7290063">i</span><span class="op" id="7290064">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290068">x</span><span class="op" id="7290069">,</span>&nbsp;<span class="ident" id="7290071">n</span>&nbsp;<span class="op" id="7290073">:=</span>&nbsp;<span class="ident" id="7290076">Uvarint</span><span class="op" id="7290083">(</span><span class="ident" id="7290084">buf</span><span class="op" id="7290087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7290091">if</span>&nbsp;<span class="ident" id="7290094">x</span>&nbsp;<span class="op" id="7290096">!=</span>&nbsp;<span class="num" id="7290099">0</span>&nbsp;<span class="op" id="7290101">||</span>&nbsp;<span class="ident" id="7290104">n</span>&nbsp;<span class="op" id="7290106">!=</span>&nbsp;<span class="num" id="7290109">0</span>&nbsp;<span class="op" id="7290111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290116">t</span><span class="op" id="7290117">.</span><span class="ident" id="7290118">Errorf</span><span class="op" id="7290124">(</span><span class="string" id="7290125">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7290158">,</span>&nbsp;<span class="ident" id="7290160">buf</span><span class="op" id="7290163">,</span>&nbsp;<span class="ident" id="7290165">x</span><span class="op" id="7290166">,</span>&nbsp;<span class="ident" id="7290168">n</span><span class="op" id="7290169">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7290173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290178">x</span><span class="op" id="7290179">,</span>&nbsp;<span class="ident" id="7290181">err</span>&nbsp;<span class="op" id="7290185">:=</span>&nbsp;<span class="ident" id="7290188">ReadUvarint</span><span class="op" id="7290199">(</span><span class="ident" id="7290200">bytes</span><span class="op" id="7290205">.</span><span class="ident" id="7290206">NewReader</span><span class="op" id="7290215">(</span><span class="ident" id="7290216">buf</span><span class="op" id="7290219">)</span><span class="op" id="7290220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7290224">if</span>&nbsp;<span class="ident" id="7290227">x</span>&nbsp;<span class="op" id="7290229">!=</span>&nbsp;<span class="num" id="7290232">0</span>&nbsp;<span class="op" id="7290234">||</span>&nbsp;<span class="ident" id="7290237">err</span>&nbsp;<span class="op" id="7290241">!=</span>&nbsp;<span class="ident" id="7290244">io</span><span class="op" id="7290246">.</span><span class="ident" id="7290247">EOF</span>&nbsp;<span class="op" id="7290251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290256">t</span><span class="op" id="7290257">.</span><span class="ident" id="7290258">Errorf</span><span class="op" id="7290264">(</span><span class="string" id="7290265">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7290304">,</span>&nbsp;<span class="ident" id="7290306">buf</span><span class="op" id="7290309">,</span>&nbsp;<span class="ident" id="7290311">x</span><span class="op" id="7290312">,</span>&nbsp;<span class="ident" id="7290314">err</span><span class="op" id="7290317">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7290321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7290324">}</span><br>
<span class="lineno"></span><span class="op" id="7290326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7290329">func</span>&nbsp;<span class="ident" id="7290334">testOverflow</span><span class="op" id="7290346">(</span><span class="ident" id="7290347">t</span>&nbsp;<span class="op" id="7290349">*</span><span class="ident" id="7290350">testing</span><span class="op" id="7290357">.</span><span class="ident" id="7290358">T</span><span class="op" id="7290359">,</span>&nbsp;<span class="ident" id="7290361">buf</span>&nbsp;<span class="op" id="7290365">[</span><span class="op" id="7290366">]</span><span class="builtintype" id="7290367">byte</span><span class="op" id="7290371">,</span>&nbsp;<span class="ident" id="7290373">n0</span>&nbsp;<span class="builtintype" id="7290376">int</span><span class="op" id="7290379">,</span>&nbsp;<span class="ident" id="7290381">err0</span>&nbsp;<span class="builtintype" id="7290386">error</span><span class="op" id="7290391">)</span>&nbsp;<span class="op" id="7290393">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290396">x</span><span class="op" id="7290397">,</span>&nbsp;<span class="ident" id="7290399">n</span>&nbsp;<span class="op" id="7290401">:=</span>&nbsp;<span class="ident" id="7290404">Uvarint</span><span class="op" id="7290411">(</span><span class="ident" id="7290412">buf</span><span class="op" id="7290415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7290418">if</span>&nbsp;<span class="ident" id="7290421">x</span>&nbsp;<span class="op" id="7290423">!=</span>&nbsp;<span class="num" id="7290426">0</span>&nbsp;<span class="op" id="7290428">||</span>&nbsp;<span class="ident" id="7290431">n</span>&nbsp;<span class="op" id="7290433">!=</span>&nbsp;<span class="ident" id="7290436">n0</span>&nbsp;<span class="op" id="7290439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290443">t</span><span class="op" id="7290444">.</span><span class="ident" id="7290445">Errorf</span><span class="op" id="7290451">(</span><span class="string" id="7290452">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="7290497">,</span>&nbsp;<span class="ident" id="7290499">buf</span><span class="op" id="7290502">,</span>&nbsp;<span class="ident" id="7290504">x</span><span class="op" id="7290505">,</span>&nbsp;<span class="ident" id="7290507">n</span><span class="op" id="7290508">,</span>&nbsp;<span class="ident" id="7290510">n0</span><span class="op" id="7290512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7290515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290519">x</span><span class="op" id="7290520">,</span>&nbsp;<span class="ident" id="7290522">err</span>&nbsp;<span class="op" id="7290526">:=</span>&nbsp;<span class="ident" id="7290529">ReadUvarint</span><span class="op" id="7290540">(</span><span class="ident" id="7290541">bytes</span><span class="op" id="7290546">.</span><span class="ident" id="7290547">NewReader</span><span class="op" id="7290556">(</span><span class="ident" id="7290557">buf</span><span class="op" id="7290560">)</span><span class="op" id="7290561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7290564">if</span>&nbsp;<span class="ident" id="7290567">x</span>&nbsp;<span class="op" id="7290569">!=</span>&nbsp;<span class="num" id="7290572">0</span>&nbsp;<span class="op" id="7290574">||</span>&nbsp;<span class="ident" id="7290577">err</span>&nbsp;<span class="op" id="7290581">!=</span>&nbsp;<span class="ident" id="7290584">err0</span>&nbsp;<span class="op" id="7290589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290593">t</span><span class="op" id="7290594">.</span><span class="ident" id="7290595">Errorf</span><span class="op" id="7290601">(</span><span class="string" id="7290602">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="7290653">,</span>&nbsp;<span class="ident" id="7290655">buf</span><span class="op" id="7290658">,</span>&nbsp;<span class="ident" id="7290660">x</span><span class="op" id="7290661">,</span>&nbsp;<span class="ident" id="7290663">err</span><span class="op" id="7290666">,</span>&nbsp;<span class="ident" id="7290668">err0</span><span class="op" id="7290672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7290675">}</span><br>
<span class="lineno"></span><span class="op" id="7290677">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="7290680">func</span>&nbsp;<span class="ident" id="7290685">TestOverflow</span><span class="op" id="7290697">(</span><span class="ident" id="7290698">t</span>&nbsp;<span class="op" id="7290700">*</span><span class="ident" id="7290701">testing</span><span class="op" id="7290708">.</span><span class="ident" id="7290709">T</span><span class="op" id="7290710">)</span>&nbsp;<span class="op" id="7290712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290715">testOverflow</span><span class="op" id="7290727">(</span><span class="ident" id="7290728">t</span><span class="op" id="7290729">,</span>&nbsp;<span class="op" id="7290731">[</span><span class="op" id="7290732">]</span><span class="builtintype" id="7290733">byte</span><span class="op" id="7290737">{</span><span class="num" id="7290738">0x80</span><span class="op" id="7290742">,</span>&nbsp;<span class="num" id="7290744">0x80</span><span class="op" id="7290748">,</span>&nbsp;<span class="num" id="7290750">0x80</span><span class="op" id="7290754">,</span>&nbsp;<span class="num" id="7290756">0x80</span><span class="op" id="7290760">,</span>&nbsp;<span class="num" id="7290762">0x80</span><span class="op" id="7290766">,</span>&nbsp;<span class="num" id="7290768">0x80</span><span class="op" id="7290772">,</span>&nbsp;<span class="num" id="7290774">0x80</span><span class="op" id="7290778">,</span>&nbsp;<span class="num" id="7290780">0x80</span><span class="op" id="7290784">,</span>&nbsp;<span class="num" id="7290786">0x80</span><span class="op" id="7290790">,</span>&nbsp;<span class="num" id="7290792">0x2</span><span class="op" id="7290795">}</span><span class="op" id="7290796">,</span>&nbsp;<span class="op" id="7290798">-</span><span class="num" id="7290799">10</span><span class="op" id="7290801">,</span>&nbsp;<span class="ident" id="7290803">overflow</span><span class="op" id="7290811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290814">testOverflow</span><span class="op" id="7290826">(</span><span class="ident" id="7290827">t</span><span class="op" id="7290828">,</span>&nbsp;<span class="op" id="7290830">[</span><span class="op" id="7290831">]</span><span class="builtintype" id="7290832">byte</span><span class="op" id="7290836">{</span><span class="num" id="7290837">0x80</span><span class="op" id="7290841">,</span>&nbsp;<span class="num" id="7290843">0x80</span><span class="op" id="7290847">,</span>&nbsp;<span class="num" id="7290849">0x80</span><span class="op" id="7290853">,</span>&nbsp;<span class="num" id="7290855">0x80</span><span class="op" id="7290859">,</span>&nbsp;<span class="num" id="7290861">0x80</span><span class="op" id="7290865">,</span>&nbsp;<span class="num" id="7290867">0x80</span><span class="op" id="7290871">,</span>&nbsp;<span class="num" id="7290873">0x80</span><span class="op" id="7290877">,</span>&nbsp;<span class="num" id="7290879">0x80</span><span class="op" id="7290883">,</span>&nbsp;<span class="num" id="7290885">0x80</span><span class="op" id="7290889">,</span>&nbsp;<span class="num" id="7290891">0x80</span><span class="op" id="7290895">,</span>&nbsp;<span class="num" id="7290897">0x80</span><span class="op" id="7290901">,</span>&nbsp;<span class="num" id="7290903">0x80</span><span class="op" id="7290907">,</span>&nbsp;<span class="num" id="7290909">0x1</span><span class="op" id="7290912">,</span>&nbsp;<span class="num" id="7290914">0</span><span class="op" id="7290915">,</span>&nbsp;<span class="num" id="7290917">0</span><span class="op" id="7290918">}</span><span class="op" id="7290919">,</span>&nbsp;<span class="op" id="7290921">-</span><span class="num" id="7290922">13</span><span class="op" id="7290924">,</span>&nbsp;<span class="ident" id="7290926">overflow</span><span class="op" id="7290934">)</span><br>
<span class="lineno"></span><span class="op" id="7290936">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7290939">func</span>&nbsp;<span class="ident" id="7290944">TestNonCanonicalZero</span><span class="op" id="7290964">(</span><span class="ident" id="7290965">t</span>&nbsp;<span class="op" id="7290967">*</span><span class="ident" id="7290968">testing</span><span class="op" id="7290975">.</span><span class="ident" id="7290976">T</span><span class="op" id="7290977">)</span>&nbsp;<span class="op" id="7290979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290982">buf</span>&nbsp;<span class="op" id="7290986">:=</span>&nbsp;<span class="op" id="7290989">[</span><span class="op" id="7290990">]</span><span class="builtintype" id="7290991">byte</span><span class="op" id="7290995">{</span><span class="num" id="7290996">0x80</span><span class="op" id="7291000">,</span>&nbsp;<span class="num" id="7291002">0x80</span><span class="op" id="7291006">,</span>&nbsp;<span class="num" id="7291008">0x80</span><span class="op" id="7291012">,</span>&nbsp;<span class="num" id="7291014">0</span><span class="op" id="7291015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291018">x</span><span class="op" id="7291019">,</span>&nbsp;<span class="ident" id="7291021">n</span>&nbsp;<span class="op" id="7291023">:=</span>&nbsp;<span class="ident" id="7291026">Uvarint</span><span class="op" id="7291033">(</span><span class="ident" id="7291034">buf</span><span class="op" id="7291037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291040">if</span>&nbsp;<span class="ident" id="7291043">x</span>&nbsp;<span class="op" id="7291045">!=</span>&nbsp;<span class="num" id="7291048">0</span>&nbsp;<span class="op" id="7291050">||</span>&nbsp;<span class="ident" id="7291053">n</span>&nbsp;<span class="op" id="7291055">!=</span>&nbsp;<span class="num" id="7291058">4</span>&nbsp;<span class="op" id="7291060">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291064">t</span><span class="op" id="7291065">.</span><span class="ident" id="7291066">Errorf</span><span class="op" id="7291072">(</span><span class="string" id="7291073">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="7291117">,</span>&nbsp;<span class="ident" id="7291119">buf</span><span class="op" id="7291122">,</span>&nbsp;<span class="ident" id="7291124">x</span><span class="op" id="7291125">,</span>&nbsp;<span class="ident" id="7291127">n</span><span class="op" id="7291128">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291132">}</span><br>
<span class="lineno"></span><span class="op" id="7291134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="7291137">func</span>&nbsp;<span class="ident" id="7291142">BenchmarkPutUvarint32</span><span class="op" id="7291163">(</span><span class="ident" id="7291164">b</span>&nbsp;<span class="op" id="7291166">*</span><span class="ident" id="7291167">testing</span><span class="op" id="7291174">.</span><span class="ident" id="7291175">B</span><span class="op" id="7291176">)</span>&nbsp;<span class="op" id="7291178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291181">buf</span>&nbsp;<span class="op" id="7291185">:=</span>&nbsp;<span class="builtinfunc" id="7291188">make</span><span class="op" id="7291192">(</span><span class="op" id="7291193">[</span><span class="op" id="7291194">]</span><span class="builtintype" id="7291195">byte</span><span class="op" id="7291199">,</span>&nbsp;<span class="ident" id="7291201">MaxVarintLen32</span><span class="op" id="7291215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291218">b</span><span class="op" id="7291219">.</span><span class="ident" id="7291220">SetBytes</span><span class="op" id="7291228">(</span><span class="num" id="7291229">4</span><span class="op" id="7291230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291233">for</span>&nbsp;<span class="ident" id="7291237">i</span>&nbsp;<span class="op" id="7291239">:=</span>&nbsp;<span class="num" id="7291242">0</span><span class="op" id="7291243">;</span>&nbsp;<span class="ident" id="7291245">i</span>&nbsp;<span class="op" id="7291247">&lt;</span>&nbsp;<span class="ident" id="7291249">b</span><span class="op" id="7291250">.</span><span class="ident" id="7291251">N</span><span class="op" id="7291252">;</span>&nbsp;<span class="ident" id="7291254">i</span><span class="op" id="7291255">++</span>&nbsp;<span class="op" id="7291258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291262">for</span>&nbsp;<span class="ident" id="7291266">j</span>&nbsp;<span class="op" id="7291268">:=</span>&nbsp;<span class="builtintype" id="7291271">uint</span><span class="op" id="7291275">(</span><span class="num" id="7291276">0</span><span class="op" id="7291277">)</span><span class="op" id="7291278">;</span>&nbsp;<span class="ident" id="7291280">j</span>&nbsp;<span class="op" id="7291282">&lt;</span>&nbsp;<span class="ident" id="7291284">MaxVarintLen32</span><span class="op" id="7291298">;</span>&nbsp;<span class="ident" id="7291300">j</span><span class="op" id="7291301">++</span>&nbsp;<span class="op" id="7291304">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291309">PutUvarint</span><span class="op" id="7291319">(</span><span class="ident" id="7291320">buf</span><span class="op" id="7291323">,</span>&nbsp;<span class="num" id="7291325">1</span><span class="op" id="7291326">&lt;&lt;</span><span class="op" id="7291328">(</span><span class="ident" id="7291329">j</span><span class="op" id="7291330">*</span><span class="num" id="7291331">7</span><span class="op" id="7291332">)</span><span class="op" id="7291333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291340">}</span><br>
<span class="lineno"></span><span class="op" id="7291342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7291345">func</span>&nbsp;<span class="ident" id="7291350">BenchmarkPutUvarint64</span><span class="op" id="7291371">(</span><span class="ident" id="7291372">b</span>&nbsp;<span class="op" id="7291374">*</span><span class="ident" id="7291375">testing</span><span class="op" id="7291382">.</span><span class="ident" id="7291383">B</span><span class="op" id="7291384">)</span>&nbsp;<span class="op" id="7291386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291389">buf</span>&nbsp;<span class="op" id="7291393">:=</span>&nbsp;<span class="builtinfunc" id="7291396">make</span><span class="op" id="7291400">(</span><span class="op" id="7291401">[</span><span class="op" id="7291402">]</span><span class="builtintype" id="7291403">byte</span><span class="op" id="7291407">,</span>&nbsp;<span class="ident" id="7291409">MaxVarintLen64</span><span class="op" id="7291423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291426">b</span><span class="op" id="7291427">.</span><span class="ident" id="7291428">SetBytes</span><span class="op" id="7291436">(</span><span class="num" id="7291437">8</span><span class="op" id="7291438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291441">for</span>&nbsp;<span class="ident" id="7291445">i</span>&nbsp;<span class="op" id="7291447">:=</span>&nbsp;<span class="num" id="7291450">0</span><span class="op" id="7291451">;</span>&nbsp;<span class="ident" id="7291453">i</span>&nbsp;<span class="op" id="7291455">&lt;</span>&nbsp;<span class="ident" id="7291457">b</span><span class="op" id="7291458">.</span><span class="ident" id="7291459">N</span><span class="op" id="7291460">;</span>&nbsp;<span class="ident" id="7291462">i</span><span class="op" id="7291463">++</span>&nbsp;<span class="op" id="7291466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291470">for</span>&nbsp;<span class="ident" id="7291474">j</span>&nbsp;<span class="op" id="7291476">:=</span>&nbsp;<span class="builtintype" id="7291479">uint</span><span class="op" id="7291483">(</span><span class="num" id="7291484">0</span><span class="op" id="7291485">)</span><span class="op" id="7291486">;</span>&nbsp;<span class="ident" id="7291488">j</span>&nbsp;<span class="op" id="7291490">&lt;</span>&nbsp;<span class="ident" id="7291492">MaxVarintLen64</span><span class="op" id="7291506">;</span>&nbsp;<span class="ident" id="7291508">j</span><span class="op" id="7291509">++</span>&nbsp;<span class="op" id="7291512">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291517">PutUvarint</span><span class="op" id="7291527">(</span><span class="ident" id="7291528">buf</span><span class="op" id="7291531">,</span>&nbsp;<span class="num" id="7291533">1</span><span class="op" id="7291534">&lt;&lt;</span><span class="op" id="7291536">(</span><span class="ident" id="7291537">j</span><span class="op" id="7291538">*</span><span class="num" id="7291539">7</span><span class="op" id="7291540">)</span><span class="op" id="7291541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291548">}</span><br>
<span class="lineno"></span><span class="op" id="7291550">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
