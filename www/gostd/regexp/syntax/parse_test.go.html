<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>regexp/syntax</h2>
<ul>
<li><a href="/gostd/regexp/syntax/compile.go.html">compile.go</a></li>
<li><a href="/gostd/regexp/syntax/doc.go.html">doc.go</a></li>
<li><a href="/gostd/regexp/syntax/parse.go.html">parse.go</a></li>
<li><a href="/gostd/regexp/syntax/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/regexp/syntax/perl_groups.go.html">perl_groups.go</a></li>
<li><a href="/gostd/regexp/syntax/prog.go.html">prog.go</a></li>
<li><a href="/gostd/regexp/syntax/prog_test.go.html">prog_test.go</a></li>
<li><a href="/gostd/regexp/syntax/regexp.go.html">regexp.go</a></li>
<li><a href="/gostd/regexp/syntax/simplify.go.html">simplify.go</a></li>
<li><a href="/gostd/regexp/syntax/simplify_test.go.html">simplify_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7349240">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7349296">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7349350">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7349401">package</span>&nbsp;<span class="ident" id="7349409">syntax</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7349417">import</span>&nbsp;<span class="op" id="7349424">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349427">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349436">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349443">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349454">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="7349464">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7349467">type</span>&nbsp;<span class="ident" id="7349472">parseTest</span>&nbsp;<span class="keyword" id="7349482">struct</span>&nbsp;<span class="op" id="7349489">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349492">Regexp</span>&nbsp;<span class="builtintype" id="7349499">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349507">Dump</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7349514">string</span><br>
<span class="lineno"></span><span class="op" id="7349521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7349524">var</span>&nbsp;<span class="ident" id="7349528">parseTests</span>&nbsp;<span class="op" id="7349539">=</span>&nbsp;<span class="op" id="7349541">[</span><span class="op" id="7349542">]</span><span class="ident" id="7349543">parseTest</span><span class="op" id="7349552">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7349555">//&nbsp;Base&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349570">{</span><span class="string" id="7349571">`a`</span><span class="op" id="7349574">,</span>&nbsp;<span class="string" id="7349576">`lit{a}`</span><span class="op" id="7349584">}</span><span class="op" id="7349585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349588">{</span><span class="string" id="7349589">`a.`</span><span class="op" id="7349593">,</span>&nbsp;<span class="string" id="7349595">`cat{lit{a}dot{}}`</span><span class="op" id="7349613">}</span><span class="op" id="7349614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349617">{</span><span class="string" id="7349618">`a.b`</span><span class="op" id="7349623">,</span>&nbsp;<span class="string" id="7349625">`cat{lit{a}dot{}lit{b}}`</span><span class="op" id="7349649">}</span><span class="op" id="7349650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349653">{</span><span class="string" id="7349654">`ab`</span><span class="op" id="7349658">,</span>&nbsp;<span class="string" id="7349660">`str{ab}`</span><span class="op" id="7349669">}</span><span class="op" id="7349670">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349673">{</span><span class="string" id="7349674">`a.b.c`</span><span class="op" id="7349681">,</span>&nbsp;<span class="string" id="7349683">`cat{lit{a}dot{}lit{b}dot{}lit{c}}`</span><span class="op" id="7349718">}</span><span class="op" id="7349719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349722">{</span><span class="string" id="7349723">`abc`</span><span class="op" id="7349728">,</span>&nbsp;<span class="string" id="7349730">`str{abc}`</span><span class="op" id="7349740">}</span><span class="op" id="7349741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349744">{</span><span class="string" id="7349745">`a|^`</span><span class="op" id="7349750">,</span>&nbsp;<span class="string" id="7349752">`alt{lit{a}bol{}}`</span><span class="op" id="7349770">}</span><span class="op" id="7349771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349774">{</span><span class="string" id="7349775">`a|b`</span><span class="op" id="7349780">,</span>&nbsp;<span class="string" id="7349782">`cc{0x61-0x62}`</span><span class="op" id="7349797">}</span><span class="op" id="7349798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349801">{</span><span class="string" id="7349802">`(a)`</span><span class="op" id="7349807">,</span>&nbsp;<span class="string" id="7349809">`cap{lit{a}}`</span><span class="op" id="7349822">}</span><span class="op" id="7349823">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349826">{</span><span class="string" id="7349827">`(a)|b`</span><span class="op" id="7349834">,</span>&nbsp;<span class="string" id="7349836">`alt{cap{lit{a}}lit{b}}`</span><span class="op" id="7349860">}</span><span class="op" id="7349861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349864">{</span><span class="string" id="7349865">`a*`</span><span class="op" id="7349869">,</span>&nbsp;<span class="string" id="7349871">`star{lit{a}}`</span><span class="op" id="7349885">}</span><span class="op" id="7349886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349889">{</span><span class="string" id="7349890">`a+`</span><span class="op" id="7349894">,</span>&nbsp;<span class="string" id="7349896">`plus{lit{a}}`</span><span class="op" id="7349910">}</span><span class="op" id="7349911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349914">{</span><span class="string" id="7349915">`a?`</span><span class="op" id="7349919">,</span>&nbsp;<span class="string" id="7349921">`que{lit{a}}`</span><span class="op" id="7349934">}</span><span class="op" id="7349935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349938">{</span><span class="string" id="7349939">`a{2}`</span><span class="op" id="7349945">,</span>&nbsp;<span class="string" id="7349947">`rep{2,2&nbsp;lit{a}}`</span><span class="op" id="7349964">}</span><span class="op" id="7349965">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349968">{</span><span class="string" id="7349969">`a{2,3}`</span><span class="op" id="7349977">,</span>&nbsp;<span class="string" id="7349979">`rep{2,3&nbsp;lit{a}}`</span><span class="op" id="7349996">}</span><span class="op" id="7349997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350000">{</span><span class="string" id="7350001">`a{2,}`</span><span class="op" id="7350008">,</span>&nbsp;<span class="string" id="7350010">`rep{2,-1&nbsp;lit{a}}`</span><span class="op" id="7350028">}</span><span class="op" id="7350029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350032">{</span><span class="string" id="7350033">`a*?`</span><span class="op" id="7350038">,</span>&nbsp;<span class="string" id="7350040">`nstar{lit{a}}`</span><span class="op" id="7350055">}</span><span class="op" id="7350056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350059">{</span><span class="string" id="7350060">`a+?`</span><span class="op" id="7350065">,</span>&nbsp;<span class="string" id="7350067">`nplus{lit{a}}`</span><span class="op" id="7350082">}</span><span class="op" id="7350083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350086">{</span><span class="string" id="7350087">`a??`</span><span class="op" id="7350092">,</span>&nbsp;<span class="string" id="7350094">`nque{lit{a}}`</span><span class="op" id="7350108">}</span><span class="op" id="7350109">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350112">{</span><span class="string" id="7350113">`a{2}?`</span><span class="op" id="7350120">,</span>&nbsp;<span class="string" id="7350122">`nrep{2,2&nbsp;lit{a}}`</span><span class="op" id="7350140">}</span><span class="op" id="7350141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350144">{</span><span class="string" id="7350145">`a{2,3}?`</span><span class="op" id="7350154">,</span>&nbsp;<span class="string" id="7350156">`nrep{2,3&nbsp;lit{a}}`</span><span class="op" id="7350174">}</span><span class="op" id="7350175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350178">{</span><span class="string" id="7350179">`a{2,}?`</span><span class="op" id="7350187">,</span>&nbsp;<span class="string" id="7350189">`nrep{2,-1&nbsp;lit{a}}`</span><span class="op" id="7350208">}</span><span class="op" id="7350209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7350212">//&nbsp;Malformed&nbsp;{&nbsp;}&nbsp;are&nbsp;treated&nbsp;as&nbsp;literals.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350255">{</span><span class="string" id="7350256">`x{1001`</span><span class="op" id="7350264">,</span>&nbsp;<span class="string" id="7350266">`str{x{1001}`</span><span class="op" id="7350279">}</span><span class="op" id="7350280">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350283">{</span><span class="string" id="7350284">`x{9876543210`</span><span class="op" id="7350298">,</span>&nbsp;<span class="string" id="7350300">`str{x{9876543210}`</span><span class="op" id="7350319">}</span><span class="op" id="7350320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350323">{</span><span class="string" id="7350324">`x{9876543210,`</span><span class="op" id="7350339">,</span>&nbsp;<span class="string" id="7350341">`str{x{9876543210,}`</span><span class="op" id="7350361">}</span><span class="op" id="7350362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350365">{</span><span class="string" id="7350366">`x{2,1`</span><span class="op" id="7350373">,</span>&nbsp;<span class="string" id="7350375">`str{x{2,1}`</span><span class="op" id="7350387">}</span><span class="op" id="7350388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350391">{</span><span class="string" id="7350392">`x{1,9876543210`</span><span class="op" id="7350408">,</span>&nbsp;<span class="string" id="7350410">`str{x{1,9876543210}`</span><span class="op" id="7350431">}</span><span class="op" id="7350432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350435">{</span><span class="string" id="7350436">``</span><span class="op" id="7350438">,</span>&nbsp;<span class="string" id="7350440">`emp{}`</span><span class="op" id="7350447">}</span><span class="op" id="7350448">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350451">{</span><span class="string" id="7350452">`|`</span><span class="op" id="7350455">,</span>&nbsp;<span class="string" id="7350457">`emp{}`</span><span class="op" id="7350464">}</span><span class="op" id="7350465">,</span>&nbsp;<span class="comment" id="7350467">//&nbsp;alt{emp{}emp{}}&nbsp;but&nbsp;got&nbsp;factored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350504">{</span><span class="string" id="7350505">`|x|`</span><span class="op" id="7350510">,</span>&nbsp;<span class="string" id="7350512">`alt{emp{}lit{x}emp{}}`</span><span class="op" id="7350535">}</span><span class="op" id="7350536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350539">{</span><span class="string" id="7350540">`.`</span><span class="op" id="7350543">,</span>&nbsp;<span class="string" id="7350545">`dot{}`</span><span class="op" id="7350552">}</span><span class="op" id="7350553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350556">{</span><span class="string" id="7350557">`^`</span><span class="op" id="7350560">,</span>&nbsp;<span class="string" id="7350562">`bol{}`</span><span class="op" id="7350569">}</span><span class="op" id="7350570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350573">{</span><span class="string" id="7350574">`$`</span><span class="op" id="7350577">,</span>&nbsp;<span class="string" id="7350579">`eol{}`</span><span class="op" id="7350586">}</span><span class="op" id="7350587">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350590">{</span><span class="string" id="7350591">`\|`</span><span class="op" id="7350595">,</span>&nbsp;<span class="string" id="7350597">`lit{|}`</span><span class="op" id="7350605">}</span><span class="op" id="7350606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350609">{</span><span class="string" id="7350610">`\(`</span><span class="op" id="7350614">,</span>&nbsp;<span class="string" id="7350616">`lit{(}`</span><span class="op" id="7350624">}</span><span class="op" id="7350625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350628">{</span><span class="string" id="7350629">`\)`</span><span class="op" id="7350633">,</span>&nbsp;<span class="string" id="7350635">`lit{)}`</span><span class="op" id="7350643">}</span><span class="op" id="7350644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350647">{</span><span class="string" id="7350648">`\*`</span><span class="op" id="7350652">,</span>&nbsp;<span class="string" id="7350654">`lit{*}`</span><span class="op" id="7350662">}</span><span class="op" id="7350663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350666">{</span><span class="string" id="7350667">`\+`</span><span class="op" id="7350671">,</span>&nbsp;<span class="string" id="7350673">`lit{+}`</span><span class="op" id="7350681">}</span><span class="op" id="7350682">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350685">{</span><span class="string" id="7350686">`\?`</span><span class="op" id="7350690">,</span>&nbsp;<span class="string" id="7350692">`lit{?}`</span><span class="op" id="7350700">}</span><span class="op" id="7350701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350704">{</span><span class="string" id="7350705">`{`</span><span class="op" id="7350708">,</span>&nbsp;<span class="string" id="7350710">`lit{{}`</span><span class="op" id="7350718">}</span><span class="op" id="7350719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350722">{</span><span class="string" id="7350723">`}`</span><span class="op" id="7350726">,</span>&nbsp;<span class="string" id="7350728">`lit{}}`</span><span class="op" id="7350736">}</span><span class="op" id="7350737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350740">{</span><span class="string" id="7350741">`\.`</span><span class="op" id="7350745">,</span>&nbsp;<span class="string" id="7350747">`lit{.}`</span><span class="op" id="7350755">}</span><span class="op" id="7350756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350759">{</span><span class="string" id="7350760">`\^`</span><span class="op" id="7350764">,</span>&nbsp;<span class="string" id="7350766">`lit{^}`</span><span class="op" id="7350774">}</span><span class="op" id="7350775">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350778">{</span><span class="string" id="7350779">`\$`</span><span class="op" id="7350783">,</span>&nbsp;<span class="string" id="7350785">`lit{$}`</span><span class="op" id="7350793">}</span><span class="op" id="7350794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350797">{</span><span class="string" id="7350798">`\\`</span><span class="op" id="7350802">,</span>&nbsp;<span class="string" id="7350804">`lit{\}`</span><span class="op" id="7350812">}</span><span class="op" id="7350813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350816">{</span><span class="string" id="7350817">`[ace]`</span><span class="op" id="7350824">,</span>&nbsp;<span class="string" id="7350826">`cc{0x61&nbsp;0x63&nbsp;0x65}`</span><span class="op" id="7350846">}</span><span class="op" id="7350847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350850">{</span><span class="string" id="7350851">`[abc]`</span><span class="op" id="7350858">,</span>&nbsp;<span class="string" id="7350860">`cc{0x61-0x63}`</span><span class="op" id="7350875">}</span><span class="op" id="7350876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350879">{</span><span class="string" id="7350880">`[a-z]`</span><span class="op" id="7350887">,</span>&nbsp;<span class="string" id="7350889">`cc{0x61-0x7a}`</span><span class="op" id="7350904">}</span><span class="op" id="7350905">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350908">{</span><span class="string" id="7350909">`[a]`</span><span class="op" id="7350914">,</span>&nbsp;<span class="string" id="7350916">`lit{a}`</span><span class="op" id="7350924">}</span><span class="op" id="7350925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350928">{</span><span class="string" id="7350929">`\-`</span><span class="op" id="7350933">,</span>&nbsp;<span class="string" id="7350935">`lit{-}`</span><span class="op" id="7350943">}</span><span class="op" id="7350944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350947">{</span><span class="string" id="7350948">`-`</span><span class="op" id="7350951">,</span>&nbsp;<span class="string" id="7350953">`lit{-}`</span><span class="op" id="7350961">}</span><span class="op" id="7350962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350965">{</span><span class="string" id="7350966">`\_`</span><span class="op" id="7350970">,</span>&nbsp;<span class="string" id="7350972">`lit{_}`</span><span class="op" id="7350980">}</span><span class="op" id="7350981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350984">{</span><span class="string" id="7350985">`abc`</span><span class="op" id="7350990">,</span>&nbsp;<span class="string" id="7350992">`str{abc}`</span><span class="op" id="7351002">}</span><span class="op" id="7351003">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351006">{</span><span class="string" id="7351007">`abc|def`</span><span class="op" id="7351016">,</span>&nbsp;<span class="string" id="7351018">`alt{str{abc}str{def}}`</span><span class="op" id="7351041">}</span><span class="op" id="7351042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351045">{</span><span class="string" id="7351046">`abc|def|ghi`</span><span class="op" id="7351059">,</span>&nbsp;<span class="string" id="7351061">`alt{str{abc}str{def}str{ghi}}`</span><span class="op" id="7351092">}</span><span class="op" id="7351093">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351097">//&nbsp;Posix&nbsp;and&nbsp;Perl&nbsp;extensions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351127">{</span><span class="string" id="7351128">`[[:lower:]]`</span><span class="op" id="7351141">,</span>&nbsp;<span class="string" id="7351143">`cc{0x61-0x7a}`</span><span class="op" id="7351158">}</span><span class="op" id="7351159">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351162">{</span><span class="string" id="7351163">`[a-z]`</span><span class="op" id="7351170">,</span>&nbsp;<span class="string" id="7351172">`cc{0x61-0x7a}`</span><span class="op" id="7351187">}</span><span class="op" id="7351188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351191">{</span><span class="string" id="7351192">`[^[:lower:]]`</span><span class="op" id="7351206">,</span>&nbsp;<span class="string" id="7351208">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7351236">}</span><span class="op" id="7351237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351240">{</span><span class="string" id="7351241">`[[:^lower:]]`</span><span class="op" id="7351255">,</span>&nbsp;<span class="string" id="7351257">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7351285">}</span><span class="op" id="7351286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351289">{</span><span class="string" id="7351290">`(?i)[[:lower:]]`</span><span class="op" id="7351307">,</span>&nbsp;<span class="string" id="7351309">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7351347">}</span><span class="op" id="7351348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351351">{</span><span class="string" id="7351352">`(?i)[a-z]`</span><span class="op" id="7351363">,</span>&nbsp;<span class="string" id="7351365">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7351403">}</span><span class="op" id="7351404">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351407">{</span><span class="string" id="7351408">`(?i)[^[:lower:]]`</span><span class="op" id="7351426">,</span>&nbsp;<span class="string" id="7351428">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7351492">}</span><span class="op" id="7351493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351496">{</span><span class="string" id="7351497">`(?i)[[:^lower:]]`</span><span class="op" id="7351515">,</span>&nbsp;<span class="string" id="7351517">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7351581">}</span><span class="op" id="7351582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351585">{</span><span class="string" id="7351586">`\d`</span><span class="op" id="7351590">,</span>&nbsp;<span class="string" id="7351592">`cc{0x30-0x39}`</span><span class="op" id="7351607">}</span><span class="op" id="7351608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351611">{</span><span class="string" id="7351612">`\D`</span><span class="op" id="7351616">,</span>&nbsp;<span class="string" id="7351618">`cc{0x0-0x2f&nbsp;0x3a-0x10ffff}`</span><span class="op" id="7351646">}</span><span class="op" id="7351647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351650">{</span><span class="string" id="7351651">`\s`</span><span class="op" id="7351655">,</span>&nbsp;<span class="string" id="7351657">`cc{0x9-0xa&nbsp;0xc-0xd&nbsp;0x20}`</span><span class="op" id="7351683">}</span><span class="op" id="7351684">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351687">{</span><span class="string" id="7351688">`\S`</span><span class="op" id="7351692">,</span>&nbsp;<span class="string" id="7351694">`cc{0x0-0x8&nbsp;0xb&nbsp;0xe-0x1f&nbsp;0x21-0x10ffff}`</span><span class="op" id="7351734">}</span><span class="op" id="7351735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351738">{</span><span class="string" id="7351739">`\w`</span><span class="op" id="7351743">,</span>&nbsp;<span class="string" id="7351745">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a}`</span><span class="op" id="7351785">}</span><span class="op" id="7351786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351789">{</span><span class="string" id="7351790">`\W`</span><span class="op" id="7351794">,</span>&nbsp;<span class="string" id="7351796">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7351849">}</span><span class="op" id="7351850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351853">{</span><span class="string" id="7351854">`(?i)\w`</span><span class="op" id="7351862">,</span>&nbsp;<span class="string" id="7351864">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7351917">}</span><span class="op" id="7351918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351921">{</span><span class="string" id="7351922">`(?i)\W`</span><span class="op" id="7351930">,</span>&nbsp;<span class="string" id="7351932">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7352011">}</span><span class="op" id="7352012">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352015">{</span><span class="string" id="7352016">`[^\\]`</span><span class="op" id="7352023">,</span>&nbsp;<span class="string" id="7352025">`cc{0x0-0x5b&nbsp;0x5d-0x10ffff}`</span><span class="op" id="7352053">}</span><span class="op" id="7352054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7352057">//&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;`\C`,&nbsp;`byte{}`&nbsp;},&nbsp;&nbsp;//&nbsp;probably&nbsp;never</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7352101">//&nbsp;Unicode,&nbsp;negatives,&nbsp;and&nbsp;a&nbsp;double&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352148">{</span><span class="string" id="7352149">`\p{Braille}`</span><span class="op" id="7352162">,</span>&nbsp;<span class="string" id="7352164">`cc{0x2800-0x28ff}`</span><span class="op" id="7352183">}</span><span class="op" id="7352184">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352187">{</span><span class="string" id="7352188">`\P{Braille}`</span><span class="op" id="7352201">,</span>&nbsp;<span class="string" id="7352203">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7352235">}</span><span class="op" id="7352236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352239">{</span><span class="string" id="7352240">`\p{^Braille}`</span><span class="op" id="7352254">,</span>&nbsp;<span class="string" id="7352256">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7352288">}</span><span class="op" id="7352289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352292">{</span><span class="string" id="7352293">`\P{^Braille}`</span><span class="op" id="7352307">,</span>&nbsp;<span class="string" id="7352309">`cc{0x2800-0x28ff}`</span><span class="op" id="7352328">}</span><span class="op" id="7352329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352332">{</span><span class="string" id="7352333">`\pZ`</span><span class="op" id="7352338">,</span>&nbsp;<span class="string" id="7352340">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="7352411">}</span><span class="op" id="7352412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352415">{</span><span class="string" id="7352416">`[\p{Braille}]`</span><span class="op" id="7352431">,</span>&nbsp;<span class="string" id="7352433">`cc{0x2800-0x28ff}`</span><span class="op" id="7352452">}</span><span class="op" id="7352453">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352456">{</span><span class="string" id="7352457">`[\P{Braille}]`</span><span class="op" id="7352472">,</span>&nbsp;<span class="string" id="7352474">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7352506">}</span><span class="op" id="7352507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352510">{</span><span class="string" id="7352511">`[\p{^Braille}]`</span><span class="op" id="7352527">,</span>&nbsp;<span class="string" id="7352529">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7352561">}</span><span class="op" id="7352562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352565">{</span><span class="string" id="7352566">`[\P{^Braille}]`</span><span class="op" id="7352582">,</span>&nbsp;<span class="string" id="7352584">`cc{0x2800-0x28ff}`</span><span class="op" id="7352603">}</span><span class="op" id="7352604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352607">{</span><span class="string" id="7352608">`[\pZ]`</span><span class="op" id="7352615">,</span>&nbsp;<span class="string" id="7352617">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="7352688">}</span><span class="op" id="7352689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352692">{</span><span class="string" id="7352693">`\p{Lu}`</span><span class="op" id="7352701">,</span>&nbsp;<span class="ident" id="7352703">mkCharClass</span><span class="op" id="7352714">(</span><span class="ident" id="7352715">unicode</span><span class="op" id="7352722">.</span><span class="ident" id="7352723">IsUpper</span><span class="op" id="7352730">)</span><span class="op" id="7352731">}</span><span class="op" id="7352732">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352735">{</span><span class="string" id="7352736">`[\p{Lu}]`</span><span class="op" id="7352746">,</span>&nbsp;<span class="ident" id="7352748">mkCharClass</span><span class="op" id="7352759">(</span><span class="ident" id="7352760">unicode</span><span class="op" id="7352767">.</span><span class="ident" id="7352768">IsUpper</span><span class="op" id="7352775">)</span><span class="op" id="7352776">}</span><span class="op" id="7352777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352780">{</span><span class="string" id="7352781">`(?i)[\p{Lu}]`</span><span class="op" id="7352795">,</span>&nbsp;<span class="ident" id="7352797">mkCharClass</span><span class="op" id="7352808">(</span><span class="ident" id="7352809">isUpperFold</span><span class="op" id="7352820">)</span><span class="op" id="7352821">}</span><span class="op" id="7352822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352825">{</span><span class="string" id="7352826">`\p{Any}`</span><span class="op" id="7352835">,</span>&nbsp;<span class="string" id="7352837">`dot{}`</span><span class="op" id="7352844">}</span><span class="op" id="7352845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352848">{</span><span class="string" id="7352849">`\p{^Any}`</span><span class="op" id="7352859">,</span>&nbsp;<span class="string" id="7352861">`cc{}`</span><span class="op" id="7352867">}</span><span class="op" id="7352868">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7352872">//&nbsp;Hex,&nbsp;octal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352888">{</span><span class="string" id="7352889">`[\012-\234]\141`</span><span class="op" id="7352906">,</span>&nbsp;<span class="string" id="7352908">`cat{cc{0xa-0x9c}lit{a}}`</span><span class="op" id="7352933">}</span><span class="op" id="7352934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352937">{</span><span class="string" id="7352938">`[\x{41}-\x7a]\x61`</span><span class="op" id="7352957">,</span>&nbsp;<span class="string" id="7352959">`cat{cc{0x41-0x7a}lit{a}}`</span><span class="op" id="7352985">}</span><span class="op" id="7352986">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7352990">//&nbsp;More&nbsp;interesting&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353032">{</span><span class="string" id="7353033">`a{,2}`</span><span class="op" id="7353040">,</span>&nbsp;<span class="string" id="7353042">`str{a{,2}}`</span><span class="op" id="7353054">}</span><span class="op" id="7353055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353058">{</span><span class="string" id="7353059">`\.\^\$\\`</span><span class="op" id="7353069">,</span>&nbsp;<span class="string" id="7353071">`str{.^$\}`</span><span class="op" id="7353082">}</span><span class="op" id="7353083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353086">{</span><span class="string" id="7353087">`[a-zABC]`</span><span class="op" id="7353097">,</span>&nbsp;<span class="string" id="7353099">`cc{0x41-0x43&nbsp;0x61-0x7a}`</span><span class="op" id="7353124">}</span><span class="op" id="7353125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353128">{</span><span class="string" id="7353129">`[^a]`</span><span class="op" id="7353135">,</span>&nbsp;<span class="string" id="7353137">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7353165">}</span><span class="op" id="7353166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353169">{</span><span class="string" id="7353170">`[α-ε☺]`</span><span class="op" id="7353182">,</span>&nbsp;<span class="string" id="7353184">`cc{0x3b1-0x3b5&nbsp;0x263a}`</span><span class="op" id="7353208">}</span><span class="op" id="7353209">,</span>&nbsp;<span class="comment" id="7353211">//&nbsp;utf-8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353221">{</span><span class="string" id="7353222">`a*{`</span><span class="op" id="7353227">,</span>&nbsp;<span class="string" id="7353229">`cat{star{lit{a}}lit{{}}`</span><span class="op" id="7353254">}</span><span class="op" id="7353255">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7353259">//&nbsp;Test&nbsp;precedences</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353280">{</span><span class="string" id="7353281">`(?:ab)*`</span><span class="op" id="7353290">,</span>&nbsp;<span class="string" id="7353292">`star{str{ab}}`</span><span class="op" id="7353307">}</span><span class="op" id="7353308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353311">{</span><span class="string" id="7353312">`(ab)*`</span><span class="op" id="7353319">,</span>&nbsp;<span class="string" id="7353321">`star{cap{str{ab}}}`</span><span class="op" id="7353341">}</span><span class="op" id="7353342">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353345">{</span><span class="string" id="7353346">`ab|cd`</span><span class="op" id="7353353">,</span>&nbsp;<span class="string" id="7353355">`alt{str{ab}str{cd}}`</span><span class="op" id="7353376">}</span><span class="op" id="7353377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353380">{</span><span class="string" id="7353381">`a(b|c)d`</span><span class="op" id="7353390">,</span>&nbsp;<span class="string" id="7353392">`cat{lit{a}cap{cc{0x62-0x63}}lit{d}}`</span><span class="op" id="7353429">}</span><span class="op" id="7353430">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7353434">//&nbsp;Test&nbsp;flattening.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353455">{</span><span class="string" id="7353456">`(?:a)`</span><span class="op" id="7353463">,</span>&nbsp;<span class="string" id="7353465">`lit{a}`</span><span class="op" id="7353473">}</span><span class="op" id="7353474">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353477">{</span><span class="string" id="7353478">`(?:ab)(?:cd)`</span><span class="op" id="7353492">,</span>&nbsp;<span class="string" id="7353494">`str{abcd}`</span><span class="op" id="7353505">}</span><span class="op" id="7353506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353509">{</span><span class="string" id="7353510">`(?:a+b+)(?:c+d+)`</span><span class="op" id="7353528">,</span>&nbsp;<span class="string" id="7353530">`cat{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="7353585">}</span><span class="op" id="7353586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353589">{</span><span class="string" id="7353590">`(?:a+|b+)|(?:c+|d+)`</span><span class="op" id="7353611">,</span>&nbsp;<span class="string" id="7353613">`alt{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="7353668">}</span><span class="op" id="7353669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353672">{</span><span class="string" id="7353673">`(?:a|b)|(?:c|d)`</span><span class="op" id="7353690">,</span>&nbsp;<span class="string" id="7353692">`cc{0x61-0x64}`</span><span class="op" id="7353707">}</span><span class="op" id="7353708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353711">{</span><span class="string" id="7353712">`a|.`</span><span class="op" id="7353717">,</span>&nbsp;<span class="string" id="7353719">`dot{}`</span><span class="op" id="7353726">}</span><span class="op" id="7353727">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353730">{</span><span class="string" id="7353731">`.|a`</span><span class="op" id="7353736">,</span>&nbsp;<span class="string" id="7353738">`dot{}`</span><span class="op" id="7353745">}</span><span class="op" id="7353746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353749">{</span><span class="string" id="7353750">`(?:[abc]|A|Z|hello|world)`</span><span class="op" id="7353777">,</span>&nbsp;<span class="string" id="7353779">`alt{cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}str{hello}str{world}}`</span><span class="op" id="7353829">}</span><span class="op" id="7353830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353833">{</span><span class="string" id="7353834">`(?:[abc]|A|Z)`</span><span class="op" id="7353849">,</span>&nbsp;<span class="string" id="7353851">`cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}`</span><span class="op" id="7353876">}</span><span class="op" id="7353877">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7353881">//&nbsp;Test&nbsp;Perl&nbsp;quoted&nbsp;literals</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353911">{</span><span class="string" id="7353912">`\Q+|*?{[\E`</span><span class="op" id="7353924">,</span>&nbsp;<span class="string" id="7353926">`str{+|*?{[}`</span><span class="op" id="7353939">}</span><span class="op" id="7353940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353943">{</span><span class="string" id="7353944">`\Q+\E+`</span><span class="op" id="7353952">,</span>&nbsp;<span class="string" id="7353954">`plus{lit{+}}`</span><span class="op" id="7353968">}</span><span class="op" id="7353969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353972">{</span><span class="string" id="7353973">`\Q\\E`</span><span class="op" id="7353980">,</span>&nbsp;<span class="string" id="7353982">`lit{\}`</span><span class="op" id="7353990">}</span><span class="op" id="7353991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353994">{</span><span class="string" id="7353995">`\Q\\\E`</span><span class="op" id="7354003">,</span>&nbsp;<span class="string" id="7354005">`str{\\}`</span><span class="op" id="7354014">}</span><span class="op" id="7354015">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7354019">//&nbsp;Test&nbsp;Perl&nbsp;\A&nbsp;and&nbsp;\z</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354043">{</span><span class="string" id="7354044">`(?m)^`</span><span class="op" id="7354051">,</span>&nbsp;<span class="string" id="7354053">`bol{}`</span><span class="op" id="7354060">}</span><span class="op" id="7354061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354064">{</span><span class="string" id="7354065">`(?m)$`</span><span class="op" id="7354072">,</span>&nbsp;<span class="string" id="7354074">`eol{}`</span><span class="op" id="7354081">}</span><span class="op" id="7354082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354085">{</span><span class="string" id="7354086">`(?-m)^`</span><span class="op" id="7354094">,</span>&nbsp;<span class="string" id="7354096">`bot{}`</span><span class="op" id="7354103">}</span><span class="op" id="7354104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354107">{</span><span class="string" id="7354108">`(?-m)$`</span><span class="op" id="7354116">,</span>&nbsp;<span class="string" id="7354118">`eot{}`</span><span class="op" id="7354125">}</span><span class="op" id="7354126">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354129">{</span><span class="string" id="7354130">`(?m)\A`</span><span class="op" id="7354138">,</span>&nbsp;<span class="string" id="7354140">`bot{}`</span><span class="op" id="7354147">}</span><span class="op" id="7354148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354151">{</span><span class="string" id="7354152">`(?m)\z`</span><span class="op" id="7354160">,</span>&nbsp;<span class="string" id="7354162">`eot{\z}`</span><span class="op" id="7354171">}</span><span class="op" id="7354172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354175">{</span><span class="string" id="7354176">`(?-m)\A`</span><span class="op" id="7354185">,</span>&nbsp;<span class="string" id="7354187">`bot{}`</span><span class="op" id="7354194">}</span><span class="op" id="7354195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354198">{</span><span class="string" id="7354199">`(?-m)\z`</span><span class="op" id="7354208">,</span>&nbsp;<span class="string" id="7354210">`eot{\z}`</span><span class="op" id="7354219">}</span><span class="op" id="7354220">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7354224">//&nbsp;Test&nbsp;named&nbsp;captures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354248">{</span><span class="string" id="7354249">`(?P&lt;name&gt;a)`</span><span class="op" id="7354262">,</span>&nbsp;<span class="string" id="7354264">`cap{name:lit{a}}`</span><span class="op" id="7354282">}</span><span class="op" id="7354283">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7354287">//&nbsp;Case-folded&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354312">{</span><span class="string" id="7354313">`[Aa]`</span><span class="op" id="7354319">,</span>&nbsp;<span class="string" id="7354321">`litfold{A}`</span><span class="op" id="7354333">}</span><span class="op" id="7354334">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354337">{</span><span class="string" id="7354338">`[\x{100}\x{101}]`</span><span class="op" id="7354356">,</span>&nbsp;<span class="string" id="7354358">`litfold{Ā}`</span><span class="op" id="7354371">}</span><span class="op" id="7354372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354375">{</span><span class="string" id="7354376">`[Δδ]`</span><span class="op" id="7354384">,</span>&nbsp;<span class="string" id="7354386">`litfold{Δ}`</span><span class="op" id="7354399">}</span><span class="op" id="7354400">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7354404">//&nbsp;Strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354416">{</span><span class="string" id="7354417">`abcde`</span><span class="op" id="7354424">,</span>&nbsp;<span class="string" id="7354426">`str{abcde}`</span><span class="op" id="7354438">}</span><span class="op" id="7354439">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354442">{</span><span class="string" id="7354443">`[Aa][Bb]cd`</span><span class="op" id="7354455">,</span>&nbsp;<span class="string" id="7354457">`cat{strfold{AB}str{cd}}`</span><span class="op" id="7354482">}</span><span class="op" id="7354483">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7354487">//&nbsp;Factoring.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354502">{</span><span class="string" id="7354503">`abc|abd|aef|bcx|bcy`</span><span class="op" id="7354524">,</span>&nbsp;<span class="string" id="7354526">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="7354605">}</span><span class="op" id="7354606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354609">{</span><span class="string" id="7354610">`ax+y|ax+z|ay+w`</span><span class="op" id="7354626">,</span>&nbsp;<span class="string" id="7354628">`cat{lit{a}alt{cat{plus{lit{x}}cc{0x79-0x7a}}cat{plus{lit{y}}lit{w}}}}`</span><span class="op" id="7354699">}</span><span class="op" id="7354700">,</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7354704">//&nbsp;Bug&nbsp;fixes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354719">{</span><span class="string" id="7354720">`(?:.)`</span><span class="op" id="7354727">,</span>&nbsp;<span class="string" id="7354729">`dot{}`</span><span class="op" id="7354736">}</span><span class="op" id="7354737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354740">{</span><span class="string" id="7354741">`(?:x|(?:xa))`</span><span class="op" id="7354755">,</span>&nbsp;<span class="string" id="7354757">`cat{lit{x}alt{emp{}lit{a}}}`</span><span class="op" id="7354786">}</span><span class="op" id="7354787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354790">{</span><span class="string" id="7354791">`(?:.|(?:.a))`</span><span class="op" id="7354805">,</span>&nbsp;<span class="string" id="7354807">`cat{dot{}alt{emp{}lit{a}}}`</span><span class="op" id="7354835">}</span><span class="op" id="7354836">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354839">{</span><span class="string" id="7354840">`(?:A(?:A|a))`</span><span class="op" id="7354854">,</span>&nbsp;<span class="string" id="7354856">`cat{lit{A}litfold{A}}`</span><span class="op" id="7354879">}</span><span class="op" id="7354880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354883">{</span><span class="string" id="7354884">`(?:A|a)`</span><span class="op" id="7354893">,</span>&nbsp;<span class="string" id="7354895">`litfold{A}`</span><span class="op" id="7354907">}</span><span class="op" id="7354908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354911">{</span><span class="string" id="7354912">`A|(?:A|a)`</span><span class="op" id="7354923">,</span>&nbsp;<span class="string" id="7354925">`litfold{A}`</span><span class="op" id="7354937">}</span><span class="op" id="7354938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354941">{</span><span class="string" id="7354942">`(?s).`</span><span class="op" id="7354949">,</span>&nbsp;<span class="string" id="7354951">`dot{}`</span><span class="op" id="7354958">}</span><span class="op" id="7354959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354962">{</span><span class="string" id="7354963">`(?-s).`</span><span class="op" id="7354971">,</span>&nbsp;<span class="string" id="7354973">`dnl{}`</span><span class="op" id="7354980">}</span><span class="op" id="7354981">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354984">{</span><span class="string" id="7354985">`(?:(?:^).)`</span><span class="op" id="7354997">,</span>&nbsp;<span class="string" id="7354999">`cat{bol{}dot{}}`</span><span class="op" id="7355016">}</span><span class="op" id="7355017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355020">{</span><span class="string" id="7355021">`(?-s)(?:(?:^).)`</span><span class="op" id="7355038">,</span>&nbsp;<span class="string" id="7355040">`cat{bol{}dnl{}}`</span><span class="op" id="7355057">}</span><span class="op" id="7355058">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7355062">//&nbsp;RE2&nbsp;prefix_tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355083">{</span><span class="string" id="7355084">`abc|abd`</span><span class="op" id="7355093">,</span>&nbsp;<span class="string" id="7355095">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="7355122">}</span><span class="op" id="7355123">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355126">{</span><span class="string" id="7355127">`a(?:b)c|abd`</span><span class="op" id="7355140">,</span>&nbsp;<span class="string" id="7355142">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="7355169">}</span><span class="op" id="7355170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355173">{</span><span class="string" id="7355174">`abc|abd|aef|bcx|bcy`</span><span class="op" id="7355195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355199">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}`</span>&nbsp;<span class="op" id="7355253">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355258">`cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="7355286">}</span><span class="op" id="7355287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355290">{</span><span class="string" id="7355291">`abc|x|abd`</span><span class="op" id="7355302">,</span>&nbsp;<span class="string" id="7355304">`alt{str{abc}lit{x}str{abd}}`</span><span class="op" id="7355333">}</span><span class="op" id="7355334">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355337">{</span><span class="string" id="7355338">`(?i)abc|ABD`</span><span class="op" id="7355351">,</span>&nbsp;<span class="string" id="7355353">`cat{strfold{AB}cc{0x43-0x44&nbsp;0x63-0x64}}`</span><span class="op" id="7355394">}</span><span class="op" id="7355395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355398">{</span><span class="string" id="7355399">`[ab]c|[ab]d`</span><span class="op" id="7355412">,</span>&nbsp;<span class="string" id="7355414">`cat{cc{0x61-0x62}cc{0x63-0x64}}`</span><span class="op" id="7355447">}</span><span class="op" id="7355448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355451">{</span><span class="string" id="7355452">`(?:xx|yy)c|(?:xx|yy)d`</span><span class="op" id="7355475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355479">`cat{alt{str{xx}str{yy}}cc{0x63-0x64}}`</span><span class="op" id="7355518">}</span><span class="op" id="7355519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355522">{</span><span class="string" id="7355523">`x{2}|x{2}[0-9]`</span><span class="op" id="7355539">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355543">`cat{rep{2,2&nbsp;lit{x}}alt{emp{}cc{0x30-0x39}}}`</span><span class="op" id="7355588">}</span><span class="op" id="7355589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355592">{</span><span class="string" id="7355593">`x{2}y|x{2}[0-9]y`</span><span class="op" id="7355611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355615">`cat{rep{2,2&nbsp;lit{x}}alt{lit{y}cat{cc{0x30-0x39}lit{y}}}}`</span><span class="op" id="7355672">}</span><span class="op" id="7355673">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7355677">//&nbsp;Valid&nbsp;repetitions.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355700">{</span><span class="string" id="7355701">`((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}))`</span><span class="op" id="7355751">,</span>&nbsp;<span class="string" id="7355753">``</span><span class="op" id="7355755">}</span><span class="op" id="7355756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355759">{</span><span class="string" id="7355760">`((((((((((x{1}){2}){2}){2}){2}){2}){2}){2}){2}){2})`</span><span class="op" id="7355813">,</span>&nbsp;<span class="string" id="7355815">``</span><span class="op" id="7355817">}</span><span class="op" id="7355818">,</span><br>
<span class="lineno"></span><span class="op" id="7355820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355823">const</span>&nbsp;<span class="ident" id="7355829">testFlags</span>&nbsp;<span class="op" id="7355839">=</span>&nbsp;<span class="ident" id="7355841">MatchNL</span>&nbsp;<span class="op" id="7355849">|</span>&nbsp;<span class="ident" id="7355851">PerlX</span>&nbsp;<span class="op" id="7355857">|</span>&nbsp;<span class="ident" id="7355859">UnicodeGroups</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="7355874">func</span>&nbsp;<span class="ident" id="7355879">TestParseSimple</span><span class="op" id="7355894">(</span><span class="ident" id="7355895">t</span>&nbsp;<span class="op" id="7355897">*</span><span class="ident" id="7355898">testing</span><span class="op" id="7355905">.</span><span class="ident" id="7355906">T</span><span class="op" id="7355907">)</span>&nbsp;<span class="op" id="7355909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355912">testParseDump</span><span class="op" id="7355925">(</span><span class="ident" id="7355926">t</span><span class="op" id="7355927">,</span>&nbsp;<span class="ident" id="7355929">parseTests</span><span class="op" id="7355939">,</span>&nbsp;<span class="ident" id="7355941">testFlags</span><span class="op" id="7355950">)</span><br>
<span class="lineno"></span><span class="op" id="7355952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7355955">var</span>&nbsp;<span class="ident" id="7355959">foldcaseTests</span>&nbsp;<span class="op" id="7355973">=</span>&nbsp;<span class="op" id="7355975">[</span><span class="op" id="7355976">]</span><span class="ident" id="7355977">parseTest</span><span class="op" id="7355986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355989">{</span><span class="string" id="7355990">`AbCdE`</span><span class="op" id="7355997">,</span>&nbsp;<span class="string" id="7355999">`strfold{ABCDE}`</span><span class="op" id="7356015">}</span><span class="op" id="7356016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356019">{</span><span class="string" id="7356020">`[Aa]`</span><span class="op" id="7356026">,</span>&nbsp;<span class="string" id="7356028">`litfold{A}`</span><span class="op" id="7356040">}</span><span class="op" id="7356041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356044">{</span><span class="string" id="7356045">`a`</span><span class="op" id="7356048">,</span>&nbsp;<span class="string" id="7356050">`litfold{A}`</span><span class="op" id="7356062">}</span><span class="op" id="7356063">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7356067">//&nbsp;0x17F&nbsp;is&nbsp;an&nbsp;old&nbsp;English&nbsp;long&nbsp;s&nbsp;(looks&nbsp;like&nbsp;an&nbsp;f)&nbsp;and&nbsp;folds&nbsp;to&nbsp;s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7356136">//&nbsp;0x212A&nbsp;is&nbsp;the&nbsp;Kelvin&nbsp;symbol&nbsp;and&nbsp;folds&nbsp;to&nbsp;k.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356184">{</span><span class="string" id="7356185">`A[F-g]`</span><span class="op" id="7356193">,</span>&nbsp;<span class="string" id="7356195">`cat{litfold{A}cc{0x41-0x7a&nbsp;0x17f&nbsp;0x212a}}`</span><span class="op" id="7356238">}</span><span class="op" id="7356239">,</span>&nbsp;<span class="comment" id="7356241">//&nbsp;[Aa][A-z...]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356258">{</span><span class="string" id="7356259">`[[:upper:]]`</span><span class="op" id="7356272">,</span>&nbsp;<span class="string" id="7356274">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7356312">}</span><span class="op" id="7356313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356316">{</span><span class="string" id="7356317">`[[:lower:]]`</span><span class="op" id="7356330">,</span>&nbsp;<span class="string" id="7356332">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7356370">}</span><span class="op" id="7356371">,</span><br>
<span class="lineno">225</span><span class="op" id="7356373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356376">func</span>&nbsp;<span class="ident" id="7356381">TestParseFoldCase</span><span class="op" id="7356398">(</span><span class="ident" id="7356399">t</span>&nbsp;<span class="op" id="7356401">*</span><span class="ident" id="7356402">testing</span><span class="op" id="7356409">.</span><span class="ident" id="7356410">T</span><span class="op" id="7356411">)</span>&nbsp;<span class="op" id="7356413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356416">testParseDump</span><span class="op" id="7356429">(</span><span class="ident" id="7356430">t</span><span class="op" id="7356431">,</span>&nbsp;<span class="ident" id="7356433">foldcaseTests</span><span class="op" id="7356446">,</span>&nbsp;<span class="ident" id="7356448">FoldCase</span><span class="op" id="7356456">)</span><br>
<span class="lineno"></span><span class="op" id="7356458">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7356461">var</span>&nbsp;<span class="ident" id="7356465">literalTests</span>&nbsp;<span class="op" id="7356478">=</span>&nbsp;<span class="op" id="7356480">[</span><span class="op" id="7356481">]</span><span class="ident" id="7356482">parseTest</span><span class="op" id="7356491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356494">{</span><span class="string" id="7356495">&#34;(|)^$.[*+?]{5,10},\\&#34;</span><span class="op" id="7356517">,</span>&nbsp;<span class="string" id="7356519">&#34;str{(|)^$.[*+?]{5,10},\\}&#34;</span><span class="op" id="7356546">}</span><span class="op" id="7356547">,</span><br>
<span class="lineno"></span><span class="op" id="7356549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7356552">func</span>&nbsp;<span class="ident" id="7356557">TestParseLiteral</span><span class="op" id="7356573">(</span><span class="ident" id="7356574">t</span>&nbsp;<span class="op" id="7356576">*</span><span class="ident" id="7356577">testing</span><span class="op" id="7356584">.</span><span class="ident" id="7356585">T</span><span class="op" id="7356586">)</span>&nbsp;<span class="op" id="7356588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356591">testParseDump</span><span class="op" id="7356604">(</span><span class="ident" id="7356605">t</span><span class="op" id="7356606">,</span>&nbsp;<span class="ident" id="7356608">literalTests</span><span class="op" id="7356620">,</span>&nbsp;<span class="ident" id="7356622">Literal</span><span class="op" id="7356629">)</span><br>
<span class="lineno"></span><span class="op" id="7356631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356634">var</span>&nbsp;<span class="ident" id="7356638">matchnlTests</span>&nbsp;<span class="op" id="7356651">=</span>&nbsp;<span class="op" id="7356653">[</span><span class="op" id="7356654">]</span><span class="ident" id="7356655">parseTest</span><span class="op" id="7356664">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356667">{</span><span class="string" id="7356668">`.`</span><span class="op" id="7356671">,</span>&nbsp;<span class="string" id="7356673">`dot{}`</span><span class="op" id="7356680">}</span><span class="op" id="7356681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356684">{</span><span class="string" id="7356685">&#34;\n&#34;</span><span class="op" id="7356689">,</span>&nbsp;<span class="string" id="7356691">&#34;lit{\n}&#34;</span><span class="op" id="7356700">}</span><span class="op" id="7356701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356704">{</span><span class="string" id="7356705">`[^a]`</span><span class="op" id="7356711">,</span>&nbsp;<span class="string" id="7356713">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7356741">}</span><span class="op" id="7356742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356745">{</span><span class="string" id="7356746">`[a\n]`</span><span class="op" id="7356753">,</span>&nbsp;<span class="string" id="7356755">`cc{0xa&nbsp;0x61}`</span><span class="op" id="7356769">}</span><span class="op" id="7356770">,</span><br>
<span class="lineno"></span><span class="op" id="7356772">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="7356775">func</span>&nbsp;<span class="ident" id="7356780">TestParseMatchNL</span><span class="op" id="7356796">(</span><span class="ident" id="7356797">t</span>&nbsp;<span class="op" id="7356799">*</span><span class="ident" id="7356800">testing</span><span class="op" id="7356807">.</span><span class="ident" id="7356808">T</span><span class="op" id="7356809">)</span>&nbsp;<span class="op" id="7356811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356814">testParseDump</span><span class="op" id="7356827">(</span><span class="ident" id="7356828">t</span><span class="op" id="7356829">,</span>&nbsp;<span class="ident" id="7356831">matchnlTests</span><span class="op" id="7356843">,</span>&nbsp;<span class="ident" id="7356845">MatchNL</span><span class="op" id="7356852">)</span><br>
<span class="lineno"></span><span class="op" id="7356854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7356857">var</span>&nbsp;<span class="ident" id="7356861">nomatchnlTests</span>&nbsp;<span class="op" id="7356876">=</span>&nbsp;<span class="op" id="7356878">[</span><span class="op" id="7356879">]</span><span class="ident" id="7356880">parseTest</span><span class="op" id="7356889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356892">{</span><span class="string" id="7356893">`.`</span><span class="op" id="7356896">,</span>&nbsp;<span class="string" id="7356898">`dnl{}`</span><span class="op" id="7356905">}</span><span class="op" id="7356906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356909">{</span><span class="string" id="7356910">&#34;\n&#34;</span><span class="op" id="7356914">,</span>&nbsp;<span class="string" id="7356916">&#34;lit{\n}&#34;</span><span class="op" id="7356925">}</span><span class="op" id="7356926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356929">{</span><span class="string" id="7356930">`[^a]`</span><span class="op" id="7356936">,</span>&nbsp;<span class="string" id="7356938">`cc{0x0-0x9&nbsp;0xb-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7356974">}</span><span class="op" id="7356975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356978">{</span><span class="string" id="7356979">`[a\n]`</span><span class="op" id="7356986">,</span>&nbsp;<span class="string" id="7356988">`cc{0xa&nbsp;0x61}`</span><span class="op" id="7357002">}</span><span class="op" id="7357003">,</span><br>
<span class="lineno">255</span><span class="op" id="7357005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357008">func</span>&nbsp;<span class="ident" id="7357013">TestParseNoMatchNL</span><span class="op" id="7357031">(</span><span class="ident" id="7357032">t</span>&nbsp;<span class="op" id="7357034">*</span><span class="ident" id="7357035">testing</span><span class="op" id="7357042">.</span><span class="ident" id="7357043">T</span><span class="op" id="7357044">)</span>&nbsp;<span class="op" id="7357046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357049">testParseDump</span><span class="op" id="7357062">(</span><span class="ident" id="7357063">t</span><span class="op" id="7357064">,</span>&nbsp;<span class="ident" id="7357066">nomatchnlTests</span><span class="op" id="7357080">,</span>&nbsp;<span class="num" id="7357082">0</span><span class="op" id="7357083">)</span><br>
<span class="lineno"></span><span class="op" id="7357085">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="7357088">//&nbsp;Test&nbsp;Parse&nbsp;-&gt;&nbsp;Dump.</span><br>
<span class="lineno"></span><span class="keyword" id="7357111">func</span>&nbsp;<span class="ident" id="7357116">testParseDump</span><span class="op" id="7357129">(</span><span class="ident" id="7357130">t</span>&nbsp;<span class="op" id="7357132">*</span><span class="ident" id="7357133">testing</span><span class="op" id="7357140">.</span><span class="ident" id="7357141">T</span><span class="op" id="7357142">,</span>&nbsp;<span class="ident" id="7357144">tests</span>&nbsp;<span class="op" id="7357150">[</span><span class="op" id="7357151">]</span><span class="ident" id="7357152">parseTest</span><span class="op" id="7357161">,</span>&nbsp;<span class="ident" id="7357163">flags</span>&nbsp;<span class="ident" id="7357169">Flags</span><span class="op" id="7357174">)</span>&nbsp;<span class="op" id="7357176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357179">for</span>&nbsp;<span class="ident" id="7357183">_</span><span class="op" id="7357184">,</span>&nbsp;<span class="ident" id="7357186">tt</span>&nbsp;<span class="op" id="7357189">:=</span>&nbsp;<span class="keyword" id="7357192">range</span>&nbsp;<span class="ident" id="7357198">tests</span>&nbsp;<span class="op" id="7357204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357208">re</span><span class="op" id="7357210">,</span>&nbsp;<span class="ident" id="7357212">err</span>&nbsp;<span class="op" id="7357216">:=</span>&nbsp;<span class="ident" id="7357219">Parse</span><span class="op" id="7357224">(</span><span class="ident" id="7357225">tt</span><span class="op" id="7357227">.</span><span class="ident" id="7357228">Regexp</span><span class="op" id="7357234">,</span>&nbsp;<span class="ident" id="7357236">flags</span><span class="op" id="7357241">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357245">if</span>&nbsp;<span class="ident" id="7357248">err</span>&nbsp;<span class="op" id="7357252">!=</span>&nbsp;<span class="ident" id="7357255">nil</span>&nbsp;<span class="op" id="7357259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357264">t</span><span class="op" id="7357265">.</span><span class="ident" id="7357266">Errorf</span><span class="op" id="7357272">(</span><span class="string" id="7357273">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="7357289">,</span>&nbsp;<span class="ident" id="7357291">tt</span><span class="op" id="7357293">.</span><span class="ident" id="7357294">Regexp</span><span class="op" id="7357300">,</span>&nbsp;<span class="ident" id="7357302">err</span><span class="op" id="7357305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357310">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357325">if</span>&nbsp;<span class="ident" id="7357328">tt</span><span class="op" id="7357330">.</span><span class="ident" id="7357331">Dump</span>&nbsp;<span class="op" id="7357336">==</span>&nbsp;<span class="string" id="7357339">&#34;&#34;</span>&nbsp;<span class="op" id="7357342">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7357347">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357390">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357405">d</span>&nbsp;<span class="op" id="7357407">:=</span>&nbsp;<span class="ident" id="7357410">dump</span><span class="op" id="7357414">(</span><span class="ident" id="7357415">re</span><span class="op" id="7357417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357421">if</span>&nbsp;<span class="ident" id="7357424">d</span>&nbsp;<span class="op" id="7357426">!=</span>&nbsp;<span class="ident" id="7357429">tt</span><span class="op" id="7357431">.</span><span class="ident" id="7357432">Dump</span>&nbsp;<span class="op" id="7357437">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357442">t</span><span class="op" id="7357443">.</span><span class="ident" id="7357444">Errorf</span><span class="op" id="7357450">(</span><span class="string" id="7357451">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7357485">,</span>&nbsp;<span class="ident" id="7357487">tt</span><span class="op" id="7357489">.</span><span class="ident" id="7357490">Regexp</span><span class="op" id="7357496">,</span>&nbsp;<span class="ident" id="7357498">d</span><span class="op" id="7357499">,</span>&nbsp;<span class="ident" id="7357501">tt</span><span class="op" id="7357503">.</span><span class="ident" id="7357504">Dump</span><span class="op" id="7357508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357515">}</span><br>
<span class="lineno"></span><span class="op" id="7357517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="comment" id="7357520">//&nbsp;dump&nbsp;prints&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;the&nbsp;regexp&nbsp;showing</span><br>
<span class="lineno"></span><span class="comment" id="7357581">//&nbsp;the&nbsp;structure&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="keyword" id="7357610">func</span>&nbsp;<span class="ident" id="7357615">dump</span><span class="op" id="7357619">(</span><span class="ident" id="7357620">re</span>&nbsp;<span class="op" id="7357623">*</span><span class="ident" id="7357624">Regexp</span><span class="op" id="7357630">)</span>&nbsp;<span class="builtintype" id="7357632">string</span>&nbsp;<span class="op" id="7357639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357642">var</span>&nbsp;<span class="ident" id="7357646">b</span>&nbsp;<span class="ident" id="7357648">bytes</span><span class="op" id="7357653">.</span><span class="ident" id="7357654">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357662">dumpRegexp</span><span class="op" id="7357672">(</span><span class="op" id="7357673">&amp;</span><span class="ident" id="7357674">b</span><span class="op" id="7357675">,</span>&nbsp;<span class="ident" id="7357677">re</span><span class="op" id="7357679">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357682">return</span>&nbsp;<span class="ident" id="7357689">b</span><span class="op" id="7357690">.</span><span class="ident" id="7357691">String</span><span class="op" id="7357697">(</span><span class="op" id="7357698">)</span><br>
<span class="lineno"></span><span class="op" id="7357700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357703">var</span>&nbsp;<span class="ident" id="7357707">opNames</span>&nbsp;<span class="op" id="7357715">=</span>&nbsp;<span class="op" id="7357717">[</span><span class="op" id="7357718">]</span><span class="builtintype" id="7357719">string</span><span class="op" id="7357725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357728">OpNoMatch</span><span class="op" id="7357737">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357746">&#34;no&#34;</span><span class="op" id="7357750">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357753">OpEmptyMatch</span><span class="op" id="7357765">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357771">&#34;emp&#34;</span><span class="op" id="7357776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357779">OpLiteral</span><span class="op" id="7357788">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357797">&#34;lit&#34;</span><span class="op" id="7357802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357805">OpCharClass</span><span class="op" id="7357816">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357823">&#34;cc&#34;</span><span class="op" id="7357827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357830">OpAnyCharNotNL</span><span class="op" id="7357844">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7357848">&#34;dnl&#34;</span><span class="op" id="7357853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357856">OpAnyChar</span><span class="op" id="7357865">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357874">&#34;dot&#34;</span><span class="op" id="7357879">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357882">OpBeginLine</span><span class="op" id="7357893">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357900">&#34;bol&#34;</span><span class="op" id="7357905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357908">OpEndLine</span><span class="op" id="7357917">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357926">&#34;eol&#34;</span><span class="op" id="7357931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357934">OpBeginText</span><span class="op" id="7357945">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357952">&#34;bot&#34;</span><span class="op" id="7357957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357960">OpEndText</span><span class="op" id="7357969">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357978">&#34;eot&#34;</span><span class="op" id="7357983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357986">OpWordBoundary</span><span class="op" id="7358000">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7358004">&#34;wb&#34;</span><span class="op" id="7358008">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358011">OpNoWordBoundary</span><span class="op" id="7358027">:</span>&nbsp;<span class="string" id="7358029">&#34;nwb&#34;</span><span class="op" id="7358034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358037">OpCapture</span><span class="op" id="7358046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7358055">&#34;cap&#34;</span><span class="op" id="7358060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358063">OpStar</span><span class="op" id="7358069">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7358081">&#34;star&#34;</span><span class="op" id="7358087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358090">OpPlus</span><span class="op" id="7358096">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7358108">&#34;plus&#34;</span><span class="op" id="7358114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358117">OpQuest</span><span class="op" id="7358124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7358135">&#34;que&#34;</span><span class="op" id="7358140">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358143">OpRepeat</span><span class="op" id="7358151">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7358161">&#34;rep&#34;</span><span class="op" id="7358166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358169">OpConcat</span><span class="op" id="7358177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7358187">&#34;cat&#34;</span><span class="op" id="7358192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358195">OpAlternate</span><span class="op" id="7358206">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7358213">&#34;alt&#34;</span><span class="op" id="7358218">,</span><br>
<span class="lineno"></span><span class="op" id="7358220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="7358223">//&nbsp;dumpRegexp&nbsp;writes&nbsp;an&nbsp;encoding&nbsp;of&nbsp;the&nbsp;syntax&nbsp;tree&nbsp;for&nbsp;the&nbsp;regexp&nbsp;re&nbsp;to&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="7358299">//&nbsp;It&nbsp;is&nbsp;used&nbsp;during&nbsp;testing&nbsp;to&nbsp;distinguish&nbsp;between&nbsp;parses&nbsp;that&nbsp;might&nbsp;print</span><br>
<span class="lineno"></span><span class="comment" id="7358375">//&nbsp;the&nbsp;same&nbsp;using&nbsp;re&#39;s&nbsp;String&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="7358413">func</span>&nbsp;<span class="ident" id="7358418">dumpRegexp</span><span class="op" id="7358428">(</span><span class="ident" id="7358429">b</span>&nbsp;<span class="op" id="7358431">*</span><span class="ident" id="7358432">bytes</span><span class="op" id="7358437">.</span><span class="ident" id="7358438">Buffer</span><span class="op" id="7358444">,</span>&nbsp;<span class="ident" id="7358446">re</span>&nbsp;<span class="op" id="7358449">*</span><span class="ident" id="7358450">Regexp</span><span class="op" id="7358456">)</span>&nbsp;<span class="op" id="7358458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358461">if</span>&nbsp;<span class="builtintype" id="7358464">int</span><span class="op" id="7358467">(</span><span class="ident" id="7358468">re</span><span class="op" id="7358470">.</span><span class="ident" id="7358471">Op</span><span class="op" id="7358473">)</span>&nbsp;<span class="op" id="7358475">&gt;=</span>&nbsp;<span class="builtinfunc" id="7358478">len</span><span class="op" id="7358481">(</span><span class="ident" id="7358482">opNames</span><span class="op" id="7358489">)</span>&nbsp;<span class="op" id="7358491">||</span>&nbsp;<span class="ident" id="7358494">opNames</span><span class="op" id="7358501">[</span><span class="ident" id="7358502">re</span><span class="op" id="7358504">.</span><span class="ident" id="7358505">Op</span><span class="op" id="7358507">]</span>&nbsp;<span class="op" id="7358509">==</span>&nbsp;<span class="string" id="7358512">&#34;&#34;</span>&nbsp;<span class="op" id="7358515">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358519">fmt</span><span class="op" id="7358522">.</span><span class="ident" id="7358523">Fprintf</span><span class="op" id="7358530">(</span><span class="ident" id="7358531">b</span><span class="op" id="7358532">,</span>&nbsp;<span class="string" id="7358534">&#34;op%d&#34;</span><span class="op" id="7358540">,</span>&nbsp;<span class="ident" id="7358542">re</span><span class="op" id="7358544">.</span><span class="ident" id="7358545">Op</span><span class="op" id="7358547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358550">}</span>&nbsp;<span class="keyword" id="7358552">else</span>&nbsp;<span class="op" id="7358557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358561">switch</span>&nbsp;<span class="ident" id="7358568">re</span><span class="op" id="7358570">.</span><span class="ident" id="7358571">Op</span>&nbsp;<span class="op" id="7358574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358578">default</span><span class="op" id="7358585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358590">b</span><span class="op" id="7358591">.</span><span class="ident" id="7358592">WriteString</span><span class="op" id="7358603">(</span><span class="ident" id="7358604">opNames</span><span class="op" id="7358611">[</span><span class="ident" id="7358612">re</span><span class="op" id="7358614">.</span><span class="ident" id="7358615">Op</span><span class="op" id="7358617">]</span><span class="op" id="7358618">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358622">case</span>&nbsp;<span class="ident" id="7358627">OpStar</span><span class="op" id="7358633">,</span>&nbsp;<span class="ident" id="7358635">OpPlus</span><span class="op" id="7358641">,</span>&nbsp;<span class="ident" id="7358643">OpQuest</span><span class="op" id="7358650">,</span>&nbsp;<span class="ident" id="7358652">OpRepeat</span><span class="op" id="7358660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358665">if</span>&nbsp;<span class="ident" id="7358668">re</span><span class="op" id="7358670">.</span><span class="ident" id="7358671">Flags</span><span class="op" id="7358676">&amp;</span><span class="ident" id="7358677">NonGreedy</span>&nbsp;<span class="op" id="7358687">!=</span>&nbsp;<span class="num" id="7358690">0</span>&nbsp;<span class="op" id="7358692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358698">b</span><span class="op" id="7358699">.</span><span class="ident" id="7358700">WriteByte</span><span class="op" id="7358709">(</span><span class="string" id="7358710">&#39;n&#39;</span><span class="op" id="7358713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358723">b</span><span class="op" id="7358724">.</span><span class="ident" id="7358725">WriteString</span><span class="op" id="7358736">(</span><span class="ident" id="7358737">opNames</span><span class="op" id="7358744">[</span><span class="ident" id="7358745">re</span><span class="op" id="7358747">.</span><span class="ident" id="7358748">Op</span><span class="op" id="7358750">]</span><span class="op" id="7358751">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358755">case</span>&nbsp;<span class="ident" id="7358760">OpLiteral</span><span class="op" id="7358769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358774">if</span>&nbsp;<span class="builtinfunc" id="7358777">len</span><span class="op" id="7358780">(</span><span class="ident" id="7358781">re</span><span class="op" id="7358783">.</span><span class="ident" id="7358784">Rune</span><span class="op" id="7358788">)</span>&nbsp;<span class="op" id="7358790">&gt;</span>&nbsp;<span class="num" id="7358792">1</span>&nbsp;<span class="op" id="7358794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358800">b</span><span class="op" id="7358801">.</span><span class="ident" id="7358802">WriteString</span><span class="op" id="7358813">(</span><span class="string" id="7358814">&#34;str&#34;</span><span class="op" id="7358819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358824">}</span>&nbsp;<span class="keyword" id="7358826">else</span>&nbsp;<span class="op" id="7358831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358837">b</span><span class="op" id="7358838">.</span><span class="ident" id="7358839">WriteString</span><span class="op" id="7358850">(</span><span class="string" id="7358851">&#34;lit&#34;</span><span class="op" id="7358856">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358866">if</span>&nbsp;<span class="ident" id="7358869">re</span><span class="op" id="7358871">.</span><span class="ident" id="7358872">Flags</span><span class="op" id="7358877">&amp;</span><span class="ident" id="7358878">FoldCase</span>&nbsp;<span class="op" id="7358887">!=</span>&nbsp;<span class="num" id="7358890">0</span>&nbsp;<span class="op" id="7358892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358898">for</span>&nbsp;<span class="ident" id="7358902">_</span><span class="op" id="7358903">,</span>&nbsp;<span class="ident" id="7358905">r</span>&nbsp;<span class="op" id="7358907">:=</span>&nbsp;<span class="keyword" id="7358910">range</span>&nbsp;<span class="ident" id="7358916">re</span><span class="op" id="7358918">.</span><span class="ident" id="7358919">Rune</span>&nbsp;<span class="op" id="7358924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358931">if</span>&nbsp;<span class="ident" id="7358934">unicode</span><span class="op" id="7358941">.</span><span class="ident" id="7358942">SimpleFold</span><span class="op" id="7358952">(</span><span class="ident" id="7358953">r</span><span class="op" id="7358954">)</span>&nbsp;<span class="op" id="7358956">!=</span>&nbsp;<span class="ident" id="7358959">r</span>&nbsp;<span class="op" id="7358961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358969">b</span><span class="op" id="7358970">.</span><span class="ident" id="7358971">WriteString</span><span class="op" id="7358982">(</span><span class="string" id="7358983">&#34;fold&#34;</span><span class="op" id="7358989">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358997">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359023">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359029">b</span><span class="op" id="7359030">.</span><span class="ident" id="7359031">WriteByte</span><span class="op" id="7359040">(</span><span class="string" id="7359041">&#39;{&#39;</span><span class="op" id="7359044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359047">switch</span>&nbsp;<span class="ident" id="7359054">re</span><span class="op" id="7359056">.</span><span class="ident" id="7359057">Op</span>&nbsp;<span class="op" id="7359060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359063">case</span>&nbsp;<span class="ident" id="7359068">OpEndText</span><span class="op" id="7359077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359081">if</span>&nbsp;<span class="ident" id="7359084">re</span><span class="op" id="7359086">.</span><span class="ident" id="7359087">Flags</span><span class="op" id="7359092">&amp;</span><span class="ident" id="7359093">WasDollar</span>&nbsp;<span class="op" id="7359103">==</span>&nbsp;<span class="num" id="7359106">0</span>&nbsp;<span class="op" id="7359108">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359113">b</span><span class="op" id="7359114">.</span><span class="ident" id="7359115">WriteString</span><span class="op" id="7359126">(</span><span class="string" id="7359127">`\z`</span><span class="op" id="7359131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359138">case</span>&nbsp;<span class="ident" id="7359143">OpLiteral</span><span class="op" id="7359152">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359156">for</span>&nbsp;<span class="ident" id="7359160">_</span><span class="op" id="7359161">,</span>&nbsp;<span class="ident" id="7359163">r</span>&nbsp;<span class="op" id="7359165">:=</span>&nbsp;<span class="keyword" id="7359168">range</span>&nbsp;<span class="ident" id="7359174">re</span><span class="op" id="7359176">.</span><span class="ident" id="7359177">Rune</span>&nbsp;<span class="op" id="7359182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359187">b</span><span class="op" id="7359188">.</span><span class="ident" id="7359189">WriteRune</span><span class="op" id="7359198">(</span><span class="ident" id="7359199">r</span><span class="op" id="7359200">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359207">case</span>&nbsp;<span class="ident" id="7359212">OpConcat</span><span class="op" id="7359220">,</span>&nbsp;<span class="ident" id="7359222">OpAlternate</span><span class="op" id="7359233">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359237">for</span>&nbsp;<span class="ident" id="7359241">_</span><span class="op" id="7359242">,</span>&nbsp;<span class="ident" id="7359244">sub</span>&nbsp;<span class="op" id="7359248">:=</span>&nbsp;<span class="keyword" id="7359251">range</span>&nbsp;<span class="ident" id="7359257">re</span><span class="op" id="7359259">.</span><span class="ident" id="7359260">Sub</span>&nbsp;<span class="op" id="7359264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359269">dumpRegexp</span><span class="op" id="7359279">(</span><span class="ident" id="7359280">b</span><span class="op" id="7359281">,</span>&nbsp;<span class="ident" id="7359283">sub</span><span class="op" id="7359286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359290">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359293">case</span>&nbsp;<span class="ident" id="7359298">OpStar</span><span class="op" id="7359304">,</span>&nbsp;<span class="ident" id="7359306">OpPlus</span><span class="op" id="7359312">,</span>&nbsp;<span class="ident" id="7359314">OpQuest</span><span class="op" id="7359321">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359325">dumpRegexp</span><span class="op" id="7359335">(</span><span class="ident" id="7359336">b</span><span class="op" id="7359337">,</span>&nbsp;<span class="ident" id="7359339">re</span><span class="op" id="7359341">.</span><span class="ident" id="7359342">Sub</span><span class="op" id="7359345">[</span><span class="num" id="7359346">0</span><span class="op" id="7359347">]</span><span class="op" id="7359348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359351">case</span>&nbsp;<span class="ident" id="7359356">OpRepeat</span><span class="op" id="7359364">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359368">fmt</span><span class="op" id="7359371">.</span><span class="ident" id="7359372">Fprintf</span><span class="op" id="7359379">(</span><span class="ident" id="7359380">b</span><span class="op" id="7359381">,</span>&nbsp;<span class="string" id="7359383">&#34;%d,%d&nbsp;&#34;</span><span class="op" id="7359391">,</span>&nbsp;<span class="ident" id="7359393">re</span><span class="op" id="7359395">.</span><span class="ident" id="7359396">Min</span><span class="op" id="7359399">,</span>&nbsp;<span class="ident" id="7359401">re</span><span class="op" id="7359403">.</span><span class="ident" id="7359404">Max</span><span class="op" id="7359407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359411">dumpRegexp</span><span class="op" id="7359421">(</span><span class="ident" id="7359422">b</span><span class="op" id="7359423">,</span>&nbsp;<span class="ident" id="7359425">re</span><span class="op" id="7359427">.</span><span class="ident" id="7359428">Sub</span><span class="op" id="7359431">[</span><span class="num" id="7359432">0</span><span class="op" id="7359433">]</span><span class="op" id="7359434">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359437">case</span>&nbsp;<span class="ident" id="7359442">OpCapture</span><span class="op" id="7359451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359455">if</span>&nbsp;<span class="ident" id="7359458">re</span><span class="op" id="7359460">.</span><span class="ident" id="7359461">Name</span>&nbsp;<span class="op" id="7359466">!=</span>&nbsp;<span class="string" id="7359469">&#34;&#34;</span>&nbsp;<span class="op" id="7359472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359477">b</span><span class="op" id="7359478">.</span><span class="ident" id="7359479">WriteString</span><span class="op" id="7359490">(</span><span class="ident" id="7359491">re</span><span class="op" id="7359493">.</span><span class="ident" id="7359494">Name</span><span class="op" id="7359498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359503">b</span><span class="op" id="7359504">.</span><span class="ident" id="7359505">WriteByte</span><span class="op" id="7359514">(</span><span class="string" id="7359515">&#39;:&#39;</span><span class="op" id="7359518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359522">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359526">dumpRegexp</span><span class="op" id="7359536">(</span><span class="ident" id="7359537">b</span><span class="op" id="7359538">,</span>&nbsp;<span class="ident" id="7359540">re</span><span class="op" id="7359542">.</span><span class="ident" id="7359543">Sub</span><span class="op" id="7359546">[</span><span class="num" id="7359547">0</span><span class="op" id="7359548">]</span><span class="op" id="7359549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359552">case</span>&nbsp;<span class="ident" id="7359557">OpCharClass</span><span class="op" id="7359568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359572">sep</span>&nbsp;<span class="op" id="7359576">:=</span>&nbsp;<span class="string" id="7359579">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359584">for</span>&nbsp;<span class="ident" id="7359588">i</span>&nbsp;<span class="op" id="7359590">:=</span>&nbsp;<span class="num" id="7359593">0</span><span class="op" id="7359594">;</span>&nbsp;<span class="ident" id="7359596">i</span>&nbsp;<span class="op" id="7359598">&lt;</span>&nbsp;<span class="builtinfunc" id="7359600">len</span><span class="op" id="7359603">(</span><span class="ident" id="7359604">re</span><span class="op" id="7359606">.</span><span class="ident" id="7359607">Rune</span><span class="op" id="7359611">)</span><span class="op" id="7359612">;</span>&nbsp;<span class="ident" id="7359614">i</span>&nbsp;<span class="op" id="7359616">+=</span>&nbsp;<span class="num" id="7359619">2</span>&nbsp;<span class="op" id="7359621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359626">b</span><span class="op" id="7359627">.</span><span class="ident" id="7359628">WriteString</span><span class="op" id="7359639">(</span><span class="ident" id="7359640">sep</span><span class="op" id="7359643">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359648">sep</span>&nbsp;<span class="op" id="7359652">=</span>&nbsp;<span class="string" id="7359654">&#34;&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359661">lo</span><span class="op" id="7359663">,</span>&nbsp;<span class="ident" id="7359665">hi</span>&nbsp;<span class="op" id="7359668">:=</span>&nbsp;<span class="ident" id="7359671">re</span><span class="op" id="7359673">.</span><span class="ident" id="7359674">Rune</span><span class="op" id="7359678">[</span><span class="ident" id="7359679">i</span><span class="op" id="7359680">]</span><span class="op" id="7359681">,</span>&nbsp;<span class="ident" id="7359683">re</span><span class="op" id="7359685">.</span><span class="ident" id="7359686">Rune</span><span class="op" id="7359690">[</span><span class="ident" id="7359691">i</span><span class="op" id="7359692">+</span><span class="num" id="7359693">1</span><span class="op" id="7359694">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359699">if</span>&nbsp;<span class="ident" id="7359702">lo</span>&nbsp;<span class="op" id="7359705">==</span>&nbsp;<span class="ident" id="7359708">hi</span>&nbsp;<span class="op" id="7359711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359717">fmt</span><span class="op" id="7359720">.</span><span class="ident" id="7359721">Fprintf</span><span class="op" id="7359728">(</span><span class="ident" id="7359729">b</span><span class="op" id="7359730">,</span>&nbsp;<span class="string" id="7359732">&#34;%#x&#34;</span><span class="op" id="7359737">,</span>&nbsp;<span class="ident" id="7359739">lo</span><span class="op" id="7359741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359746">}</span>&nbsp;<span class="keyword" id="7359748">else</span>&nbsp;<span class="op" id="7359753">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359759">fmt</span><span class="op" id="7359762">.</span><span class="ident" id="7359763">Fprintf</span><span class="op" id="7359770">(</span><span class="ident" id="7359771">b</span><span class="op" id="7359772">,</span>&nbsp;<span class="string" id="7359774">&#34;%#x-%#x&#34;</span><span class="op" id="7359783">,</span>&nbsp;<span class="ident" id="7359785">lo</span><span class="op" id="7359787">,</span>&nbsp;<span class="ident" id="7359789">hi</span><span class="op" id="7359791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359806">b</span><span class="op" id="7359807">.</span><span class="ident" id="7359808">WriteByte</span><span class="op" id="7359817">(</span><span class="string" id="7359818">&#39;}&#39;</span><span class="op" id="7359821">)</span><br>
<span class="lineno">380</span><span class="op" id="7359823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359826">func</span>&nbsp;<span class="ident" id="7359831">mkCharClass</span><span class="op" id="7359842">(</span><span class="ident" id="7359843">f</span>&nbsp;<span class="keyword" id="7359845">func</span><span class="op" id="7359849">(</span><span class="builtintype" id="7359850">rune</span><span class="op" id="7359854">)</span>&nbsp;<span class="builtintype" id="7359856">bool</span><span class="op" id="7359860">)</span>&nbsp;<span class="builtintype" id="7359862">string</span>&nbsp;<span class="op" id="7359869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359872">re</span>&nbsp;<span class="op" id="7359875">:=</span>&nbsp;<span class="op" id="7359878">&amp;</span><span class="ident" id="7359879">Regexp</span><span class="op" id="7359885">{</span><span class="ident" id="7359886">Op</span><span class="op" id="7359888">:</span>&nbsp;<span class="ident" id="7359890">OpCharClass</span><span class="op" id="7359901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359904">lo</span>&nbsp;<span class="op" id="7359907">:=</span>&nbsp;<span class="builtintype" id="7359910">rune</span><span class="op" id="7359914">(</span><span class="op" id="7359915">-</span><span class="num" id="7359916">1</span><span class="op" id="7359917">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359920">for</span>&nbsp;<span class="ident" id="7359924">i</span>&nbsp;<span class="op" id="7359926">:=</span>&nbsp;<span class="builtintype" id="7359929">rune</span><span class="op" id="7359933">(</span><span class="num" id="7359934">0</span><span class="op" id="7359935">)</span><span class="op" id="7359936">;</span>&nbsp;<span class="ident" id="7359938">i</span>&nbsp;<span class="op" id="7359940">&lt;=</span>&nbsp;<span class="ident" id="7359943">unicode</span><span class="op" id="7359950">.</span><span class="ident" id="7359951">MaxRune</span><span class="op" id="7359958">;</span>&nbsp;<span class="ident" id="7359960">i</span><span class="op" id="7359961">++</span>&nbsp;<span class="op" id="7359964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359968">if</span>&nbsp;<span class="ident" id="7359971">f</span><span class="op" id="7359972">(</span><span class="ident" id="7359973">i</span><span class="op" id="7359974">)</span>&nbsp;<span class="op" id="7359976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359981">if</span>&nbsp;<span class="ident" id="7359984">lo</span>&nbsp;<span class="op" id="7359987">&lt;</span>&nbsp;<span class="num" id="7359989">0</span>&nbsp;<span class="op" id="7359991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359997">lo</span>&nbsp;<span class="op" id="7360000">=</span>&nbsp;<span class="ident" id="7360002">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360007">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360011">}</span>&nbsp;<span class="keyword" id="7360013">else</span>&nbsp;<span class="op" id="7360018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360023">if</span>&nbsp;<span class="ident" id="7360026">lo</span>&nbsp;<span class="op" id="7360029">&gt;=</span>&nbsp;<span class="num" id="7360032">0</span>&nbsp;<span class="op" id="7360034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360040">re</span><span class="op" id="7360042">.</span><span class="ident" id="7360043">Rune</span>&nbsp;<span class="op" id="7360048">=</span>&nbsp;<span class="builtinfunc" id="7360050">append</span><span class="op" id="7360056">(</span><span class="ident" id="7360057">re</span><span class="op" id="7360059">.</span><span class="ident" id="7360060">Rune</span><span class="op" id="7360064">,</span>&nbsp;<span class="ident" id="7360066">lo</span><span class="op" id="7360068">,</span>&nbsp;<span class="ident" id="7360070">i</span><span class="op" id="7360071">-</span><span class="num" id="7360072">1</span><span class="op" id="7360073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360079">lo</span>&nbsp;<span class="op" id="7360082">=</span>&nbsp;<span class="op" id="7360084">-</span><span class="num" id="7360085">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360090">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360100">if</span>&nbsp;<span class="ident" id="7360103">lo</span>&nbsp;<span class="op" id="7360106">&gt;=</span>&nbsp;<span class="num" id="7360109">0</span>&nbsp;<span class="op" id="7360111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360115">re</span><span class="op" id="7360117">.</span><span class="ident" id="7360118">Rune</span>&nbsp;<span class="op" id="7360123">=</span>&nbsp;<span class="builtinfunc" id="7360125">append</span><span class="op" id="7360131">(</span><span class="ident" id="7360132">re</span><span class="op" id="7360134">.</span><span class="ident" id="7360135">Rune</span><span class="op" id="7360139">,</span>&nbsp;<span class="ident" id="7360141">lo</span><span class="op" id="7360143">,</span>&nbsp;<span class="ident" id="7360145">unicode</span><span class="op" id="7360152">.</span><span class="ident" id="7360153">MaxRune</span><span class="op" id="7360160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360163">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360166">return</span>&nbsp;<span class="ident" id="7360173">dump</span><span class="op" id="7360177">(</span><span class="ident" id="7360178">re</span><span class="op" id="7360180">)</span><br>
<span class="lineno"></span><span class="op" id="7360182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360185">func</span>&nbsp;<span class="ident" id="7360190">isUpperFold</span><span class="op" id="7360201">(</span><span class="ident" id="7360202">r</span>&nbsp;<span class="builtintype" id="7360204">rune</span><span class="op" id="7360208">)</span>&nbsp;<span class="builtintype" id="7360210">bool</span>&nbsp;<span class="op" id="7360215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360218">if</span>&nbsp;<span class="ident" id="7360221">unicode</span><span class="op" id="7360228">.</span><span class="ident" id="7360229">IsUpper</span><span class="op" id="7360236">(</span><span class="ident" id="7360237">r</span><span class="op" id="7360238">)</span>&nbsp;<span class="op" id="7360240">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360244">return</span>&nbsp;<span class="builtintype" id="7360251">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360260">c</span>&nbsp;<span class="op" id="7360262">:=</span>&nbsp;<span class="ident" id="7360265">unicode</span><span class="op" id="7360272">.</span><span class="ident" id="7360273">SimpleFold</span><span class="op" id="7360283">(</span><span class="ident" id="7360284">r</span><span class="op" id="7360285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360288">for</span>&nbsp;<span class="ident" id="7360292">c</span>&nbsp;<span class="op" id="7360294">!=</span>&nbsp;<span class="ident" id="7360297">r</span>&nbsp;<span class="op" id="7360299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360303">if</span>&nbsp;<span class="ident" id="7360306">unicode</span><span class="op" id="7360313">.</span><span class="ident" id="7360314">IsUpper</span><span class="op" id="7360321">(</span><span class="ident" id="7360322">c</span><span class="op" id="7360323">)</span>&nbsp;<span class="op" id="7360325">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360330">return</span>&nbsp;<span class="builtintype" id="7360337">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360348">c</span>&nbsp;<span class="op" id="7360350">=</span>&nbsp;<span class="ident" id="7360352">unicode</span><span class="op" id="7360359">.</span><span class="ident" id="7360360">SimpleFold</span><span class="op" id="7360370">(</span><span class="ident" id="7360371">c</span><span class="op" id="7360372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360378">return</span>&nbsp;<span class="builtintype" id="7360385">false</span><br>
<span class="lineno">415</span><span class="op" id="7360391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360394">func</span>&nbsp;<span class="ident" id="7360399">TestFoldConstants</span><span class="op" id="7360416">(</span><span class="ident" id="7360417">t</span>&nbsp;<span class="op" id="7360419">*</span><span class="ident" id="7360420">testing</span><span class="op" id="7360427">.</span><span class="ident" id="7360428">T</span><span class="op" id="7360429">)</span>&nbsp;<span class="op" id="7360431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360434">last</span>&nbsp;<span class="op" id="7360439">:=</span>&nbsp;<span class="builtintype" id="7360442">rune</span><span class="op" id="7360446">(</span><span class="op" id="7360447">-</span><span class="num" id="7360448">1</span><span class="op" id="7360449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360452">for</span>&nbsp;<span class="ident" id="7360456">i</span>&nbsp;<span class="op" id="7360458">:=</span>&nbsp;<span class="builtintype" id="7360461">rune</span><span class="op" id="7360465">(</span><span class="num" id="7360466">0</span><span class="op" id="7360467">)</span><span class="op" id="7360468">;</span>&nbsp;<span class="ident" id="7360470">i</span>&nbsp;<span class="op" id="7360472">&lt;=</span>&nbsp;<span class="ident" id="7360475">unicode</span><span class="op" id="7360482">.</span><span class="ident" id="7360483">MaxRune</span><span class="op" id="7360490">;</span>&nbsp;<span class="ident" id="7360492">i</span><span class="op" id="7360493">++</span>&nbsp;<span class="op" id="7360496">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360500">if</span>&nbsp;<span class="ident" id="7360503">unicode</span><span class="op" id="7360510">.</span><span class="ident" id="7360511">SimpleFold</span><span class="op" id="7360521">(</span><span class="ident" id="7360522">i</span><span class="op" id="7360523">)</span>&nbsp;<span class="op" id="7360525">==</span>&nbsp;<span class="ident" id="7360528">i</span>&nbsp;<span class="op" id="7360530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360535">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360550">if</span>&nbsp;<span class="ident" id="7360553">last</span>&nbsp;<span class="op" id="7360558">==</span>&nbsp;<span class="op" id="7360561">-</span><span class="num" id="7360562">1</span>&nbsp;<span class="op" id="7360564">&amp;&amp;</span>&nbsp;<span class="ident" id="7360567">minFold</span>&nbsp;<span class="op" id="7360575">!=</span>&nbsp;<span class="ident" id="7360578">i</span>&nbsp;<span class="op" id="7360580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360585">t</span><span class="op" id="7360586">.</span><span class="ident" id="7360587">Errorf</span><span class="op" id="7360593">(</span><span class="string" id="7360594">&#34;minFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="7360621">,</span>&nbsp;<span class="ident" id="7360623">minFold</span><span class="op" id="7360630">,</span>&nbsp;<span class="ident" id="7360632">i</span><span class="op" id="7360633">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360641">last</span>&nbsp;<span class="op" id="7360646">=</span>&nbsp;<span class="ident" id="7360648">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360654">if</span>&nbsp;<span class="ident" id="7360657">maxFold</span>&nbsp;<span class="op" id="7360665">!=</span>&nbsp;<span class="ident" id="7360668">last</span>&nbsp;<span class="op" id="7360673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360677">t</span><span class="op" id="7360678">.</span><span class="ident" id="7360679">Errorf</span><span class="op" id="7360685">(</span><span class="string" id="7360686">&#34;maxFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="7360713">,</span>&nbsp;<span class="ident" id="7360715">maxFold</span><span class="op" id="7360722">,</span>&nbsp;<span class="ident" id="7360724">last</span><span class="op" id="7360728">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360731">}</span><br>
<span class="lineno"></span><span class="op" id="7360733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360736">func</span>&nbsp;<span class="ident" id="7360741">TestAppendRangeCollapse</span><span class="op" id="7360764">(</span><span class="ident" id="7360765">t</span>&nbsp;<span class="op" id="7360767">*</span><span class="ident" id="7360768">testing</span><span class="op" id="7360775">.</span><span class="ident" id="7360776">T</span><span class="op" id="7360777">)</span>&nbsp;<span class="op" id="7360779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360782">//&nbsp;AppendRange&nbsp;should&nbsp;collapse&nbsp;each&nbsp;of&nbsp;the&nbsp;new&nbsp;ranges</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360837">//&nbsp;into&nbsp;the&nbsp;earlier&nbsp;ones&nbsp;(it&nbsp;looks&nbsp;back&nbsp;two&nbsp;ranges),&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360899">//&nbsp;the&nbsp;slice&nbsp;never&nbsp;grows&nbsp;very&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360937">//&nbsp;Note&nbsp;that&nbsp;we&nbsp;are&nbsp;not&nbsp;calling&nbsp;cleanClass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360982">var</span>&nbsp;<span class="ident" id="7360986">r</span>&nbsp;<span class="op" id="7360988">[</span><span class="op" id="7360989">]</span><span class="builtintype" id="7360990">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360996">for</span>&nbsp;<span class="ident" id="7361000">i</span>&nbsp;<span class="op" id="7361002">:=</span>&nbsp;<span class="builtintype" id="7361005">rune</span><span class="op" id="7361009">(</span><span class="string" id="7361010">&#39;A&#39;</span><span class="op" id="7361013">)</span><span class="op" id="7361014">;</span>&nbsp;<span class="ident" id="7361016">i</span>&nbsp;<span class="op" id="7361018">&lt;=</span>&nbsp;<span class="string" id="7361021">&#39;Z&#39;</span><span class="op" id="7361024">;</span>&nbsp;<span class="ident" id="7361026">i</span><span class="op" id="7361027">++</span>&nbsp;<span class="op" id="7361030">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361034">r</span>&nbsp;<span class="op" id="7361036">=</span>&nbsp;<span class="ident" id="7361038">appendRange</span><span class="op" id="7361049">(</span><span class="ident" id="7361050">r</span><span class="op" id="7361051">,</span>&nbsp;<span class="ident" id="7361053">i</span><span class="op" id="7361054">,</span>&nbsp;<span class="ident" id="7361056">i</span><span class="op" id="7361057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361061">r</span>&nbsp;<span class="op" id="7361063">=</span>&nbsp;<span class="ident" id="7361065">appendRange</span><span class="op" id="7361076">(</span><span class="ident" id="7361077">r</span><span class="op" id="7361078">,</span>&nbsp;<span class="ident" id="7361080">i</span><span class="op" id="7361081">+</span><span class="string" id="7361082">&#39;a&#39;</span><span class="op" id="7361085">-</span><span class="string" id="7361086">&#39;A&#39;</span><span class="op" id="7361089">,</span>&nbsp;<span class="ident" id="7361091">i</span><span class="op" id="7361092">+</span><span class="string" id="7361093">&#39;a&#39;</span><span class="op" id="7361096">-</span><span class="string" id="7361097">&#39;A&#39;</span><span class="op" id="7361100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361106">if</span>&nbsp;<span class="builtintype" id="7361109">string</span><span class="op" id="7361115">(</span><span class="ident" id="7361116">r</span><span class="op" id="7361117">)</span>&nbsp;<span class="op" id="7361119">!=</span>&nbsp;<span class="string" id="7361122">&#34;AZaz&#34;</span>&nbsp;<span class="op" id="7361129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361133">t</span><span class="op" id="7361134">.</span><span class="ident" id="7361135">Errorf</span><span class="op" id="7361141">(</span><span class="string" id="7361142">&#34;appendRange&nbsp;interlaced&nbsp;A-Z&nbsp;a-z&nbsp;=&nbsp;%s,&nbsp;want&nbsp;AZaz&#34;</span><span class="op" id="7361190">,</span>&nbsp;<span class="builtintype" id="7361192">string</span><span class="op" id="7361198">(</span><span class="ident" id="7361199">r</span><span class="op" id="7361200">)</span><span class="op" id="7361201">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361204">}</span><br>
<span class="lineno"></span><span class="op" id="7361206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7361209">var</span>&nbsp;<span class="ident" id="7361213">invalidRegexps</span>&nbsp;<span class="op" id="7361228">=</span>&nbsp;<span class="op" id="7361230">[</span><span class="op" id="7361231">]</span><span class="builtintype" id="7361232">string</span><span class="op" id="7361238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361241">`(`</span><span class="op" id="7361244">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361247">`)`</span><span class="op" id="7361250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361253">`(a`</span><span class="op" id="7361257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361260">`a)`</span><span class="op" id="7361264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361267">`(a))`</span><span class="op" id="7361273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361276">`(a|b|`</span><span class="op" id="7361283">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361286">`a|b|)`</span><span class="op" id="7361293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361296">`(a|b|))`</span><span class="op" id="7361305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361308">`(a|b`</span><span class="op" id="7361314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361317">`a|b)`</span><span class="op" id="7361323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361326">`(a|b))`</span><span class="op" id="7361334">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361337">`[a-z`</span><span class="op" id="7361343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361346">`([a-z)`</span><span class="op" id="7361354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361357">`[a-z)`</span><span class="op" id="7361364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361367">`([a-z]))`</span><span class="op" id="7361377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361380">`x{1001}`</span><span class="op" id="7361389">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361392">`x{9876543210}`</span><span class="op" id="7361407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361410">`x{2,1}`</span><span class="op" id="7361418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361421">`x{1,9876543210}`</span><span class="op" id="7361438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361441">&#34;\xff&#34;</span><span class="op" id="7361447">,</span>&nbsp;<span class="comment" id="7361449">//&nbsp;Invalid&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361467">&#34;[\xff]&#34;</span><span class="op" id="7361475">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361478">&#34;[\\\xff]&#34;</span><span class="op" id="7361488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361491">&#34;\\\xff&#34;</span><span class="op" id="7361499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361502">`(?P&lt;name&gt;a`</span><span class="op" id="7361514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361517">`(?P&lt;name&gt;`</span><span class="op" id="7361528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361531">`(?P&lt;name`</span><span class="op" id="7361541">,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361544">`(?P&lt;x&nbsp;y&gt;a)`</span><span class="op" id="7361556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361559">`(?P&lt;&gt;a)`</span><span class="op" id="7361568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361571">`[a-Z]`</span><span class="op" id="7361578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361581">`(?i)[a-Z]`</span><span class="op" id="7361592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361595">`a{100000}`</span><span class="op" id="7361606">,</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361609">`a{100000,}`</span><span class="op" id="7361621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361624">&#34;((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}){2})&#34;</span><span class="op" id="7361677">,</span><br>
<span class="lineno"></span><span class="op" id="7361679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7361682">var</span>&nbsp;<span class="ident" id="7361686">onlyPerl</span>&nbsp;<span class="op" id="7361695">=</span>&nbsp;<span class="op" id="7361697">[</span><span class="op" id="7361698">]</span><span class="builtintype" id="7361699">string</span><span class="op" id="7361705">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361708">`[a-b-c]`</span><span class="op" id="7361717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361720">`\Qabc\E`</span><span class="op" id="7361729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361732">`\Q*+?{[\E`</span><span class="op" id="7361743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361746">`\Q\\E`</span><span class="op" id="7361753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361756">`\Q\\\E`</span><span class="op" id="7361764">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361767">`\Q\\\\E`</span><span class="op" id="7361776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361779">`\Q\\\\\E`</span><span class="op" id="7361789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361792">`(?:a)`</span><span class="op" id="7361799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361802">`(?P&lt;name&gt;a)`</span><span class="op" id="7361815">,</span><br>
<span class="lineno"></span><span class="op" id="7361817">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="7361820">var</span>&nbsp;<span class="ident" id="7361824">onlyPOSIX</span>&nbsp;<span class="op" id="7361834">=</span>&nbsp;<span class="op" id="7361836">[</span><span class="op" id="7361837">]</span><span class="builtintype" id="7361838">string</span><span class="op" id="7361844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361847">&#34;a++&#34;</span><span class="op" id="7361852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361855">&#34;a**&#34;</span><span class="op" id="7361860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361863">&#34;a?*&#34;</span><span class="op" id="7361868">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361871">&#34;a+*&#34;</span><span class="op" id="7361876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361879">&#34;a{1}*&#34;</span><span class="op" id="7361886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7361889">&#34;.{1}{2}.{3}&#34;</span><span class="op" id="7361902">,</span><br>
<span class="lineno"></span><span class="op" id="7361904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="keyword" id="7361907">func</span>&nbsp;<span class="ident" id="7361912">TestParseInvalidRegexps</span><span class="op" id="7361935">(</span><span class="ident" id="7361936">t</span>&nbsp;<span class="op" id="7361938">*</span><span class="ident" id="7361939">testing</span><span class="op" id="7361946">.</span><span class="ident" id="7361947">T</span><span class="op" id="7361948">)</span>&nbsp;<span class="op" id="7361950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361953">for</span>&nbsp;<span class="ident" id="7361957">_</span><span class="op" id="7361958">,</span>&nbsp;<span class="ident" id="7361960">regexp</span>&nbsp;<span class="op" id="7361967">:=</span>&nbsp;<span class="keyword" id="7361970">range</span>&nbsp;<span class="ident" id="7361976">invalidRegexps</span>&nbsp;<span class="op" id="7361991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361995">if</span>&nbsp;<span class="ident" id="7361998">re</span><span class="op" id="7362000">,</span>&nbsp;<span class="ident" id="7362002">err</span>&nbsp;<span class="op" id="7362006">:=</span>&nbsp;<span class="ident" id="7362009">Parse</span><span class="op" id="7362014">(</span><span class="ident" id="7362015">regexp</span><span class="op" id="7362021">,</span>&nbsp;<span class="ident" id="7362023">Perl</span><span class="op" id="7362027">)</span><span class="op" id="7362028">;</span>&nbsp;<span class="ident" id="7362030">err</span>&nbsp;<span class="op" id="7362034">==</span>&nbsp;<span class="ident" id="7362037">nil</span>&nbsp;<span class="op" id="7362041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362046">t</span><span class="op" id="7362047">.</span><span class="ident" id="7362048">Errorf</span><span class="op" id="7362054">(</span><span class="string" id="7362055">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7362098">,</span>&nbsp;<span class="ident" id="7362100">regexp</span><span class="op" id="7362106">,</span>&nbsp;<span class="ident" id="7362108">dump</span><span class="op" id="7362112">(</span><span class="ident" id="7362113">re</span><span class="op" id="7362115">)</span><span class="op" id="7362116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362120">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362124">if</span>&nbsp;<span class="ident" id="7362127">re</span><span class="op" id="7362129">,</span>&nbsp;<span class="ident" id="7362131">err</span>&nbsp;<span class="op" id="7362135">:=</span>&nbsp;<span class="ident" id="7362138">Parse</span><span class="op" id="7362143">(</span><span class="ident" id="7362144">regexp</span><span class="op" id="7362150">,</span>&nbsp;<span class="ident" id="7362152">POSIX</span><span class="op" id="7362157">)</span><span class="op" id="7362158">;</span>&nbsp;<span class="ident" id="7362160">err</span>&nbsp;<span class="op" id="7362164">==</span>&nbsp;<span class="ident" id="7362167">nil</span>&nbsp;<span class="op" id="7362171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362176">t</span><span class="op" id="7362177">.</span><span class="ident" id="7362178">Errorf</span><span class="op" id="7362184">(</span><span class="string" id="7362185">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7362229">,</span>&nbsp;<span class="ident" id="7362231">regexp</span><span class="op" id="7362237">,</span>&nbsp;<span class="ident" id="7362239">dump</span><span class="op" id="7362243">(</span><span class="ident" id="7362244">re</span><span class="op" id="7362246">)</span><span class="op" id="7362247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362257">for</span>&nbsp;<span class="ident" id="7362261">_</span><span class="op" id="7362262">,</span>&nbsp;<span class="ident" id="7362264">regexp</span>&nbsp;<span class="op" id="7362271">:=</span>&nbsp;<span class="keyword" id="7362274">range</span>&nbsp;<span class="ident" id="7362280">onlyPerl</span>&nbsp;<span class="op" id="7362289">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362293">if</span>&nbsp;<span class="ident" id="7362296">_</span><span class="op" id="7362297">,</span>&nbsp;<span class="ident" id="7362299">err</span>&nbsp;<span class="op" id="7362303">:=</span>&nbsp;<span class="ident" id="7362306">Parse</span><span class="op" id="7362311">(</span><span class="ident" id="7362312">regexp</span><span class="op" id="7362318">,</span>&nbsp;<span class="ident" id="7362320">Perl</span><span class="op" id="7362324">)</span><span class="op" id="7362325">;</span>&nbsp;<span class="ident" id="7362327">err</span>&nbsp;<span class="op" id="7362331">!=</span>&nbsp;<span class="ident" id="7362334">nil</span>&nbsp;<span class="op" id="7362338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362343">t</span><span class="op" id="7362344">.</span><span class="ident" id="7362345">Errorf</span><span class="op" id="7362351">(</span><span class="string" id="7362352">&#34;Parse(%#q,&nbsp;Perl):&nbsp;%v&#34;</span><span class="op" id="7362374">,</span>&nbsp;<span class="ident" id="7362376">regexp</span><span class="op" id="7362382">,</span>&nbsp;<span class="ident" id="7362384">err</span><span class="op" id="7362387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362395">if</span>&nbsp;<span class="ident" id="7362398">re</span><span class="op" id="7362400">,</span>&nbsp;<span class="ident" id="7362402">err</span>&nbsp;<span class="op" id="7362406">:=</span>&nbsp;<span class="ident" id="7362409">Parse</span><span class="op" id="7362414">(</span><span class="ident" id="7362415">regexp</span><span class="op" id="7362421">,</span>&nbsp;<span class="ident" id="7362423">POSIX</span><span class="op" id="7362428">)</span><span class="op" id="7362429">;</span>&nbsp;<span class="ident" id="7362431">err</span>&nbsp;<span class="op" id="7362435">==</span>&nbsp;<span class="ident" id="7362438">nil</span>&nbsp;<span class="op" id="7362442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362447">t</span><span class="op" id="7362448">.</span><span class="ident" id="7362449">Errorf</span><span class="op" id="7362455">(</span><span class="string" id="7362456">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7362500">,</span>&nbsp;<span class="ident" id="7362502">regexp</span><span class="op" id="7362508">,</span>&nbsp;<span class="ident" id="7362510">dump</span><span class="op" id="7362514">(</span><span class="ident" id="7362515">re</span><span class="op" id="7362517">)</span><span class="op" id="7362518">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362528">for</span>&nbsp;<span class="ident" id="7362532">_</span><span class="op" id="7362533">,</span>&nbsp;<span class="ident" id="7362535">regexp</span>&nbsp;<span class="op" id="7362542">:=</span>&nbsp;<span class="keyword" id="7362545">range</span>&nbsp;<span class="ident" id="7362551">onlyPOSIX</span>&nbsp;<span class="op" id="7362561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362565">if</span>&nbsp;<span class="ident" id="7362568">re</span><span class="op" id="7362570">,</span>&nbsp;<span class="ident" id="7362572">err</span>&nbsp;<span class="op" id="7362576">:=</span>&nbsp;<span class="ident" id="7362579">Parse</span><span class="op" id="7362584">(</span><span class="ident" id="7362585">regexp</span><span class="op" id="7362591">,</span>&nbsp;<span class="ident" id="7362593">Perl</span><span class="op" id="7362597">)</span><span class="op" id="7362598">;</span>&nbsp;<span class="ident" id="7362600">err</span>&nbsp;<span class="op" id="7362604">==</span>&nbsp;<span class="ident" id="7362607">nil</span>&nbsp;<span class="op" id="7362611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362616">t</span><span class="op" id="7362617">.</span><span class="ident" id="7362618">Errorf</span><span class="op" id="7362624">(</span><span class="string" id="7362625">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7362668">,</span>&nbsp;<span class="ident" id="7362670">regexp</span><span class="op" id="7362676">,</span>&nbsp;<span class="ident" id="7362678">dump</span><span class="op" id="7362682">(</span><span class="ident" id="7362683">re</span><span class="op" id="7362685">)</span><span class="op" id="7362686">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362694">if</span>&nbsp;<span class="ident" id="7362697">_</span><span class="op" id="7362698">,</span>&nbsp;<span class="ident" id="7362700">err</span>&nbsp;<span class="op" id="7362704">:=</span>&nbsp;<span class="ident" id="7362707">Parse</span><span class="op" id="7362712">(</span><span class="ident" id="7362713">regexp</span><span class="op" id="7362719">,</span>&nbsp;<span class="ident" id="7362721">POSIX</span><span class="op" id="7362726">)</span><span class="op" id="7362727">;</span>&nbsp;<span class="ident" id="7362729">err</span>&nbsp;<span class="op" id="7362733">!=</span>&nbsp;<span class="ident" id="7362736">nil</span>&nbsp;<span class="op" id="7362740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362745">t</span><span class="op" id="7362746">.</span><span class="ident" id="7362747">Errorf</span><span class="op" id="7362753">(</span><span class="string" id="7362754">&#34;Parse(%#q,&nbsp;POSIX):&nbsp;%v&#34;</span><span class="op" id="7362777">,</span>&nbsp;<span class="ident" id="7362779">regexp</span><span class="op" id="7362785">,</span>&nbsp;<span class="ident" id="7362787">err</span><span class="op" id="7362790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362797">}</span><br>
<span class="lineno">530</span><span class="op" id="7362799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7362802">func</span>&nbsp;<span class="ident" id="7362807">TestToStringEquivalentParse</span><span class="op" id="7362834">(</span><span class="ident" id="7362835">t</span>&nbsp;<span class="op" id="7362837">*</span><span class="ident" id="7362838">testing</span><span class="op" id="7362845">.</span><span class="ident" id="7362846">T</span><span class="op" id="7362847">)</span>&nbsp;<span class="op" id="7362849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362852">for</span>&nbsp;<span class="ident" id="7362856">_</span><span class="op" id="7362857">,</span>&nbsp;<span class="ident" id="7362859">tt</span>&nbsp;<span class="op" id="7362862">:=</span>&nbsp;<span class="keyword" id="7362865">range</span>&nbsp;<span class="ident" id="7362871">parseTests</span>&nbsp;<span class="op" id="7362882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362886">re</span><span class="op" id="7362888">,</span>&nbsp;<span class="ident" id="7362890">err</span>&nbsp;<span class="op" id="7362894">:=</span>&nbsp;<span class="ident" id="7362897">Parse</span><span class="op" id="7362902">(</span><span class="ident" id="7362903">tt</span><span class="op" id="7362905">.</span><span class="ident" id="7362906">Regexp</span><span class="op" id="7362912">,</span>&nbsp;<span class="ident" id="7362914">testFlags</span><span class="op" id="7362923">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362927">if</span>&nbsp;<span class="ident" id="7362930">err</span>&nbsp;<span class="op" id="7362934">!=</span>&nbsp;<span class="ident" id="7362937">nil</span>&nbsp;<span class="op" id="7362941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362946">t</span><span class="op" id="7362947">.</span><span class="ident" id="7362948">Errorf</span><span class="op" id="7362954">(</span><span class="string" id="7362955">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="7362971">,</span>&nbsp;<span class="ident" id="7362973">tt</span><span class="op" id="7362975">.</span><span class="ident" id="7362976">Regexp</span><span class="op" id="7362982">,</span>&nbsp;<span class="ident" id="7362984">err</span><span class="op" id="7362987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362992">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363007">if</span>&nbsp;<span class="ident" id="7363010">tt</span><span class="op" id="7363012">.</span><span class="ident" id="7363013">Dump</span>&nbsp;<span class="op" id="7363018">==</span>&nbsp;<span class="string" id="7363021">&#34;&#34;</span>&nbsp;<span class="op" id="7363024">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363029">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363072">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363087">d</span>&nbsp;<span class="op" id="7363089">:=</span>&nbsp;<span class="ident" id="7363092">dump</span><span class="op" id="7363096">(</span><span class="ident" id="7363097">re</span><span class="op" id="7363099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363103">if</span>&nbsp;<span class="ident" id="7363106">d</span>&nbsp;<span class="op" id="7363108">!=</span>&nbsp;<span class="ident" id="7363111">tt</span><span class="op" id="7363113">.</span><span class="ident" id="7363114">Dump</span>&nbsp;<span class="op" id="7363119">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363124">t</span><span class="op" id="7363125">.</span><span class="ident" id="7363126">Errorf</span><span class="op" id="7363132">(</span><span class="string" id="7363133">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7363167">,</span>&nbsp;<span class="ident" id="7363169">tt</span><span class="op" id="7363171">.</span><span class="ident" id="7363172">Regexp</span><span class="op" id="7363178">,</span>&nbsp;<span class="ident" id="7363180">d</span><span class="op" id="7363181">,</span>&nbsp;<span class="ident" id="7363183">tt</span><span class="op" id="7363185">.</span><span class="ident" id="7363186">Dump</span><span class="op" id="7363190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363195">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363211">s</span>&nbsp;<span class="op" id="7363213">:=</span>&nbsp;<span class="ident" id="7363216">re</span><span class="op" id="7363218">.</span><span class="ident" id="7363219">String</span><span class="op" id="7363225">(</span><span class="op" id="7363226">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363230">if</span>&nbsp;<span class="ident" id="7363233">s</span>&nbsp;<span class="op" id="7363235">!=</span>&nbsp;<span class="ident" id="7363238">tt</span><span class="op" id="7363240">.</span><span class="ident" id="7363241">Regexp</span>&nbsp;<span class="op" id="7363248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363253">//&nbsp;If&nbsp;ToString&nbsp;didn&#39;t&nbsp;return&nbsp;the&nbsp;original&nbsp;regexp,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363306">//&nbsp;it&nbsp;must&nbsp;have&nbsp;found&nbsp;one&nbsp;with&nbsp;fewer&nbsp;parens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363354">//&nbsp;Unfortunately&nbsp;we&nbsp;can&#39;t&nbsp;check&nbsp;the&nbsp;length&nbsp;here,&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363414">//&nbsp;ToString&nbsp;produces&nbsp;&#34;\\{&#34;&nbsp;for&nbsp;a&nbsp;literal&nbsp;brace,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363465">//&nbsp;but&nbsp;&#34;{&#34;&nbsp;is&nbsp;a&nbsp;shorter&nbsp;equivalent&nbsp;in&nbsp;some&nbsp;contexts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363521">nre</span><span class="op" id="7363524">,</span>&nbsp;<span class="ident" id="7363526">err</span>&nbsp;<span class="op" id="7363530">:=</span>&nbsp;<span class="ident" id="7363533">Parse</span><span class="op" id="7363538">(</span><span class="ident" id="7363539">s</span><span class="op" id="7363540">,</span>&nbsp;<span class="ident" id="7363542">testFlags</span><span class="op" id="7363551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363556">if</span>&nbsp;<span class="ident" id="7363559">err</span>&nbsp;<span class="op" id="7363563">!=</span>&nbsp;<span class="ident" id="7363566">nil</span>&nbsp;<span class="op" id="7363570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363576">t</span><span class="op" id="7363577">.</span><span class="ident" id="7363578">Errorf</span><span class="op" id="7363584">(</span><span class="string" id="7363585">&#34;Parse(%#q.String()&nbsp;=&nbsp;%#q):&nbsp;%v&#34;</span><span class="op" id="7363616">,</span>&nbsp;<span class="ident" id="7363618">tt</span><span class="op" id="7363620">.</span><span class="ident" id="7363621">Regexp</span><span class="op" id="7363627">,</span>&nbsp;<span class="ident" id="7363629">s</span><span class="op" id="7363630">,</span>&nbsp;<span class="ident" id="7363632">err</span><span class="op" id="7363635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363641">continue</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363658">nd</span>&nbsp;<span class="op" id="7363661">:=</span>&nbsp;<span class="ident" id="7363664">dump</span><span class="op" id="7363668">(</span><span class="ident" id="7363669">nre</span><span class="op" id="7363672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363677">if</span>&nbsp;<span class="ident" id="7363680">d</span>&nbsp;<span class="op" id="7363682">!=</span>&nbsp;<span class="ident" id="7363685">nd</span>&nbsp;<span class="op" id="7363688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363694">t</span><span class="op" id="7363695">.</span><span class="ident" id="7363696">Errorf</span><span class="op" id="7363702">(</span><span class="string" id="7363703">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q;&nbsp;%#q&nbsp;vs&nbsp;%#q&#34;</span><span class="op" id="7363734">,</span>&nbsp;<span class="ident" id="7363736">tt</span><span class="op" id="7363738">.</span><span class="ident" id="7363739">Regexp</span><span class="op" id="7363745">,</span>&nbsp;<span class="ident" id="7363747">s</span><span class="op" id="7363748">,</span>&nbsp;<span class="ident" id="7363750">d</span><span class="op" id="7363751">,</span>&nbsp;<span class="ident" id="7363753">nd</span><span class="op" id="7363755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363760">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363766">ns</span>&nbsp;<span class="op" id="7363769">:=</span>&nbsp;<span class="ident" id="7363772">nre</span><span class="op" id="7363775">.</span><span class="ident" id="7363776">String</span><span class="op" id="7363782">(</span><span class="op" id="7363783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363788">if</span>&nbsp;<span class="ident" id="7363791">s</span>&nbsp;<span class="op" id="7363793">!=</span>&nbsp;<span class="ident" id="7363796">ns</span>&nbsp;<span class="op" id="7363799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363805">t</span><span class="op" id="7363806">.</span><span class="ident" id="7363807">Errorf</span><span class="op" id="7363813">(</span><span class="string" id="7363814">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q&nbsp;-&gt;&nbsp;%#q&#34;</span><span class="op" id="7363840">,</span>&nbsp;<span class="ident" id="7363842">tt</span><span class="op" id="7363844">.</span><span class="ident" id="7363845">Regexp</span><span class="op" id="7363851">,</span>&nbsp;<span class="ident" id="7363853">s</span><span class="op" id="7363854">,</span>&nbsp;<span class="ident" id="7363856">ns</span><span class="op" id="7363858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363863">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363870">}</span><br>
<span class="lineno"></span><span class="op" id="7363872">}</span>
</div>
</body>
</html>
