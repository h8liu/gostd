<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3994270">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3994326">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3994380">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3994431">package</span>&nbsp;<span class="ident" id="3994439">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3994445">import</span>&nbsp;<span class="string" id="3994452">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3994461">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="3994513">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="3994555">func</span>&nbsp;<span class="ident" id="3994560">Compact</span><span class="op" id="3994567">(</span><span class="ident" id="3994568">dst</span>&nbsp;<span class="op" id="3994572">*</span><span class="ident" id="3994573">bytes</span><span class="op" id="3994578">.</span><span class="ident" id="3994579">Buffer</span><span class="op" id="3994585">,</span>&nbsp;<span class="ident" id="3994587">src</span>&nbsp;<span class="op" id="3994591">[</span><span class="op" id="3994592">]</span><span class="builtintype" id="3994593">byte</span><span class="op" id="3994597">)</span>&nbsp;<span class="builtintype" id="3994599">error</span>&nbsp;<span class="op" id="3994605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3994608">return</span>&nbsp;<span class="ident" id="3994615">compact</span><span class="op" id="3994622">(</span><span class="ident" id="3994623">dst</span><span class="op" id="3994626">,</span>&nbsp;<span class="ident" id="3994628">src</span><span class="op" id="3994631">,</span>&nbsp;<span class="builtintype" id="3994633">false</span><span class="op" id="3994638">)</span><br>
<span class="lineno"></span><span class="op" id="3994640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3994643">func</span>&nbsp;<span class="ident" id="3994648">compact</span><span class="op" id="3994655">(</span><span class="ident" id="3994656">dst</span>&nbsp;<span class="op" id="3994660">*</span><span class="ident" id="3994661">bytes</span><span class="op" id="3994666">.</span><span class="ident" id="3994667">Buffer</span><span class="op" id="3994673">,</span>&nbsp;<span class="ident" id="3994675">src</span>&nbsp;<span class="op" id="3994679">[</span><span class="op" id="3994680">]</span><span class="builtintype" id="3994681">byte</span><span class="op" id="3994685">,</span>&nbsp;<span class="ident" id="3994687">escape</span>&nbsp;<span class="builtintype" id="3994694">bool</span><span class="op" id="3994698">)</span>&nbsp;<span class="builtintype" id="3994700">error</span>&nbsp;<span class="op" id="3994706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3994709">origLen</span>&nbsp;<span class="op" id="3994717">:=</span>&nbsp;<span class="ident" id="3994720">dst</span><span class="op" id="3994723">.</span><span class="ident" id="3994724">Len</span><span class="op" id="3994727">(</span><span class="op" id="3994728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3994731">var</span>&nbsp;<span class="ident" id="3994735">scan</span>&nbsp;<span class="ident" id="3994740">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3994749">scan</span><span class="op" id="3994753">.</span><span class="ident" id="3994754">reset</span><span class="op" id="3994759">(</span><span class="op" id="3994760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3994763">start</span>&nbsp;<span class="op" id="3994769">:=</span>&nbsp;<span class="num" id="3994772">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3994775">for</span>&nbsp;<span class="ident" id="3994779">i</span><span class="op" id="3994780">,</span>&nbsp;<span class="ident" id="3994782">c</span>&nbsp;<span class="op" id="3994784">:=</span>&nbsp;<span class="keyword" id="3994787">range</span>&nbsp;<span class="ident" id="3994793">src</span>&nbsp;<span class="op" id="3994797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3994801">if</span>&nbsp;<span class="ident" id="3994804">escape</span>&nbsp;<span class="op" id="3994811">&amp;&amp;</span>&nbsp;<span class="op" id="3994814">(</span><span class="ident" id="3994815">c</span>&nbsp;<span class="op" id="3994817">==</span>&nbsp;<span class="string" id="3994820">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="3994824">||</span>&nbsp;<span class="ident" id="3994827">c</span>&nbsp;<span class="op" id="3994829">==</span>&nbsp;<span class="string" id="3994832">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="3994836">||</span>&nbsp;<span class="ident" id="3994839">c</span>&nbsp;<span class="op" id="3994841">==</span>&nbsp;<span class="string" id="3994844">&#39;&amp;&#39;</span><span class="op" id="3994847">)</span>&nbsp;<span class="op" id="3994849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3994854">if</span>&nbsp;<span class="ident" id="3994857">start</span>&nbsp;<span class="op" id="3994863">&lt;</span>&nbsp;<span class="ident" id="3994865">i</span>&nbsp;<span class="op" id="3994867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3994873">dst</span><span class="op" id="3994876">.</span><span class="ident" id="3994877">Write</span><span class="op" id="3994882">(</span><span class="ident" id="3994883">src</span><span class="op" id="3994886">[</span><span class="ident" id="3994887">start</span><span class="op" id="3994892">:</span><span class="ident" id="3994893">i</span><span class="op" id="3994894">]</span><span class="op" id="3994895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3994900">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3994905">dst</span><span class="op" id="3994908">.</span><span class="ident" id="3994909">WriteString</span><span class="op" id="3994920">(</span><span class="string" id="3994921">`\u00`</span><span class="op" id="3994927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3994932">dst</span><span class="op" id="3994935">.</span><span class="ident" id="3994936">WriteByte</span><span class="op" id="3994945">(</span><span class="ident" id="3994946">hex</span><span class="op" id="3994949">[</span><span class="ident" id="3994950">c</span><span class="op" id="3994951">&gt;&gt;</span><span class="num" id="3994953">4</span><span class="op" id="3994954">]</span><span class="op" id="3994955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3994960">dst</span><span class="op" id="3994963">.</span><span class="ident" id="3994964">WriteByte</span><span class="op" id="3994973">(</span><span class="ident" id="3994974">hex</span><span class="op" id="3994977">[</span><span class="ident" id="3994978">c</span><span class="op" id="3994979">&amp;</span><span class="num" id="3994980">0xF</span><span class="op" id="3994983">]</span><span class="op" id="3994984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3994989">start</span>&nbsp;<span class="op" id="3994995">=</span>&nbsp;<span class="ident" id="3994997">i</span>&nbsp;<span class="op" id="3994999">+</span>&nbsp;<span class="num" id="3995001">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995005">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3995009">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995065">if</span>&nbsp;<span class="ident" id="3995068">c</span>&nbsp;<span class="op" id="3995070">==</span>&nbsp;<span class="num" id="3995073">0xE2</span>&nbsp;<span class="op" id="3995078">&amp;&amp;</span>&nbsp;<span class="ident" id="3995081">i</span><span class="op" id="3995082">+</span><span class="num" id="3995083">2</span>&nbsp;<span class="op" id="3995085">&lt;</span>&nbsp;<span class="builtinfunc" id="3995087">len</span><span class="op" id="3995090">(</span><span class="ident" id="3995091">src</span><span class="op" id="3995094">)</span>&nbsp;<span class="op" id="3995096">&amp;&amp;</span>&nbsp;<span class="ident" id="3995099">src</span><span class="op" id="3995102">[</span><span class="ident" id="3995103">i</span><span class="op" id="3995104">+</span><span class="num" id="3995105">1</span><span class="op" id="3995106">]</span>&nbsp;<span class="op" id="3995108">==</span>&nbsp;<span class="num" id="3995111">0x80</span>&nbsp;<span class="op" id="3995116">&amp;&amp;</span>&nbsp;<span class="ident" id="3995119">src</span><span class="op" id="3995122">[</span><span class="ident" id="3995123">i</span><span class="op" id="3995124">+</span><span class="num" id="3995125">2</span><span class="op" id="3995126">]</span><span class="op" id="3995127">&amp;^</span><span class="num" id="3995129">1</span>&nbsp;<span class="op" id="3995131">==</span>&nbsp;<span class="num" id="3995134">0xA8</span>&nbsp;<span class="op" id="3995139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995144">if</span>&nbsp;<span class="ident" id="3995147">start</span>&nbsp;<span class="op" id="3995153">&lt;</span>&nbsp;<span class="ident" id="3995155">i</span>&nbsp;<span class="op" id="3995157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995163">dst</span><span class="op" id="3995166">.</span><span class="ident" id="3995167">Write</span><span class="op" id="3995172">(</span><span class="ident" id="3995173">src</span><span class="op" id="3995176">[</span><span class="ident" id="3995177">start</span><span class="op" id="3995182">:</span><span class="ident" id="3995183">i</span><span class="op" id="3995184">]</span><span class="op" id="3995185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995190">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995195">dst</span><span class="op" id="3995198">.</span><span class="ident" id="3995199">WriteString</span><span class="op" id="3995210">(</span><span class="string" id="3995211">`\u202`</span><span class="op" id="3995218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995223">dst</span><span class="op" id="3995226">.</span><span class="ident" id="3995227">WriteByte</span><span class="op" id="3995236">(</span><span class="ident" id="3995237">hex</span><span class="op" id="3995240">[</span><span class="ident" id="3995241">src</span><span class="op" id="3995244">[</span><span class="ident" id="3995245">i</span><span class="op" id="3995246">+</span><span class="num" id="3995247">2</span><span class="op" id="3995248">]</span><span class="op" id="3995249">&amp;</span><span class="num" id="3995250">0xF</span><span class="op" id="3995253">]</span><span class="op" id="3995254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995259">start</span>&nbsp;<span class="op" id="3995265">=</span>&nbsp;<span class="ident" id="3995267">i</span>&nbsp;<span class="op" id="3995269">+</span>&nbsp;<span class="num" id="3995271">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995279">v</span>&nbsp;<span class="op" id="3995281">:=</span>&nbsp;<span class="ident" id="3995284">scan</span><span class="op" id="3995288">.</span><span class="ident" id="3995289">step</span><span class="op" id="3995293">(</span><span class="op" id="3995294">&amp;</span><span class="ident" id="3995295">scan</span><span class="op" id="3995299">,</span>&nbsp;<span class="builtintype" id="3995301">int</span><span class="op" id="3995304">(</span><span class="ident" id="3995305">c</span><span class="op" id="3995306">)</span><span class="op" id="3995307">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995311">if</span>&nbsp;<span class="ident" id="3995314">v</span>&nbsp;<span class="op" id="3995316">&gt;=</span>&nbsp;<span class="ident" id="3995319">scanSkipSpace</span>&nbsp;<span class="op" id="3995333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995338">if</span>&nbsp;<span class="ident" id="3995341">v</span>&nbsp;<span class="op" id="3995343">==</span>&nbsp;<span class="ident" id="3995346">scanError</span>&nbsp;<span class="op" id="3995356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995362">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995376">if</span>&nbsp;<span class="ident" id="3995379">start</span>&nbsp;<span class="op" id="3995385">&lt;</span>&nbsp;<span class="ident" id="3995387">i</span>&nbsp;<span class="op" id="3995389">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995395">dst</span><span class="op" id="3995398">.</span><span class="ident" id="3995399">Write</span><span class="op" id="3995404">(</span><span class="ident" id="3995405">src</span><span class="op" id="3995408">[</span><span class="ident" id="3995409">start</span><span class="op" id="3995414">:</span><span class="ident" id="3995415">i</span><span class="op" id="3995416">]</span><span class="op" id="3995417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995427">start</span>&nbsp;<span class="op" id="3995433">=</span>&nbsp;<span class="ident" id="3995435">i</span>&nbsp;<span class="op" id="3995437">+</span>&nbsp;<span class="num" id="3995439">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995446">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995449">if</span>&nbsp;<span class="ident" id="3995452">scan</span><span class="op" id="3995456">.</span><span class="ident" id="3995457">eof</span><span class="op" id="3995460">(</span><span class="op" id="3995461">)</span>&nbsp;<span class="op" id="3995463">==</span>&nbsp;<span class="ident" id="3995466">scanError</span>&nbsp;<span class="op" id="3995476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995480">dst</span><span class="op" id="3995483">.</span><span class="ident" id="3995484">Truncate</span><span class="op" id="3995492">(</span><span class="ident" id="3995493">origLen</span><span class="op" id="3995500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995504">return</span>&nbsp;<span class="ident" id="3995511">scan</span><span class="op" id="3995515">.</span><span class="ident" id="3995516">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995524">if</span>&nbsp;<span class="ident" id="3995527">start</span>&nbsp;<span class="op" id="3995533">&lt;</span>&nbsp;<span class="builtinfunc" id="3995535">len</span><span class="op" id="3995538">(</span><span class="ident" id="3995539">src</span><span class="op" id="3995542">)</span>&nbsp;<span class="op" id="3995544">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995548">dst</span><span class="op" id="3995551">.</span><span class="ident" id="3995552">Write</span><span class="op" id="3995557">(</span><span class="ident" id="3995558">src</span><span class="op" id="3995561">[</span><span class="ident" id="3995562">start</span><span class="op" id="3995567">:</span><span class="op" id="3995568">]</span><span class="op" id="3995569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995575">return</span>&nbsp;<span class="ident" id="3995582">nil</span><br>
<span class="lineno"></span><span class="op" id="3995586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="3995589">func</span>&nbsp;<span class="ident" id="3995594">newline</span><span class="op" id="3995601">(</span><span class="ident" id="3995602">dst</span>&nbsp;<span class="op" id="3995606">*</span><span class="ident" id="3995607">bytes</span><span class="op" id="3995612">.</span><span class="ident" id="3995613">Buffer</span><span class="op" id="3995619">,</span>&nbsp;<span class="ident" id="3995621">prefix</span><span class="op" id="3995627">,</span>&nbsp;<span class="ident" id="3995629">indent</span>&nbsp;<span class="builtintype" id="3995636">string</span><span class="op" id="3995642">,</span>&nbsp;<span class="ident" id="3995644">depth</span>&nbsp;<span class="builtintype" id="3995650">int</span><span class="op" id="3995653">)</span>&nbsp;<span class="op" id="3995655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995658">dst</span><span class="op" id="3995661">.</span><span class="ident" id="3995662">WriteByte</span><span class="op" id="3995671">(</span><span class="string" id="3995672">&#39;\n&#39;</span><span class="op" id="3995676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995679">dst</span><span class="op" id="3995682">.</span><span class="ident" id="3995683">WriteString</span><span class="op" id="3995694">(</span><span class="ident" id="3995695">prefix</span><span class="op" id="3995701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3995704">for</span>&nbsp;<span class="ident" id="3995708">i</span>&nbsp;<span class="op" id="3995710">:=</span>&nbsp;<span class="num" id="3995713">0</span><span class="op" id="3995714">;</span>&nbsp;<span class="ident" id="3995716">i</span>&nbsp;<span class="op" id="3995718">&lt;</span>&nbsp;<span class="ident" id="3995720">depth</span><span class="op" id="3995725">;</span>&nbsp;<span class="ident" id="3995727">i</span><span class="op" id="3995728">++</span>&nbsp;<span class="op" id="3995731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3995735">dst</span><span class="op" id="3995738">.</span><span class="ident" id="3995739">WriteString</span><span class="op" id="3995750">(</span><span class="ident" id="3995751">indent</span><span class="op" id="3995757">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3995760">}</span><br>
<span class="lineno"></span><span class="op" id="3995762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3995765">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="3995832">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="3995891">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="3995954">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="3996012">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="3996075">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3996135">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="3996188">func</span>&nbsp;<span class="ident" id="3996193">Indent</span><span class="op" id="3996199">(</span><span class="ident" id="3996200">dst</span>&nbsp;<span class="op" id="3996204">*</span><span class="ident" id="3996205">bytes</span><span class="op" id="3996210">.</span><span class="ident" id="3996211">Buffer</span><span class="op" id="3996217">,</span>&nbsp;<span class="ident" id="3996219">src</span>&nbsp;<span class="op" id="3996223">[</span><span class="op" id="3996224">]</span><span class="builtintype" id="3996225">byte</span><span class="op" id="3996229">,</span>&nbsp;<span class="ident" id="3996231">prefix</span><span class="op" id="3996237">,</span>&nbsp;<span class="ident" id="3996239">indent</span>&nbsp;<span class="builtintype" id="3996246">string</span><span class="op" id="3996252">)</span>&nbsp;<span class="builtintype" id="3996254">error</span>&nbsp;<span class="op" id="3996260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996263">origLen</span>&nbsp;<span class="op" id="3996271">:=</span>&nbsp;<span class="ident" id="3996274">dst</span><span class="op" id="3996277">.</span><span class="ident" id="3996278">Len</span><span class="op" id="3996281">(</span><span class="op" id="3996282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996285">var</span>&nbsp;<span class="ident" id="3996289">scan</span>&nbsp;<span class="ident" id="3996294">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996303">scan</span><span class="op" id="3996307">.</span><span class="ident" id="3996308">reset</span><span class="op" id="3996313">(</span><span class="op" id="3996314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996317">needIndent</span>&nbsp;<span class="op" id="3996328">:=</span>&nbsp;<span class="builtintype" id="3996331">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996338">depth</span>&nbsp;<span class="op" id="3996344">:=</span>&nbsp;<span class="num" id="3996347">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996350">for</span>&nbsp;<span class="ident" id="3996354">_</span><span class="op" id="3996355">,</span>&nbsp;<span class="ident" id="3996357">c</span>&nbsp;<span class="op" id="3996359">:=</span>&nbsp;<span class="keyword" id="3996362">range</span>&nbsp;<span class="ident" id="3996368">src</span>&nbsp;<span class="op" id="3996372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996376">scan</span><span class="op" id="3996380">.</span><span class="ident" id="3996381">bytes</span><span class="op" id="3996386">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996391">v</span>&nbsp;<span class="op" id="3996393">:=</span>&nbsp;<span class="ident" id="3996396">scan</span><span class="op" id="3996400">.</span><span class="ident" id="3996401">step</span><span class="op" id="3996405">(</span><span class="op" id="3996406">&amp;</span><span class="ident" id="3996407">scan</span><span class="op" id="3996411">,</span>&nbsp;<span class="builtintype" id="3996413">int</span><span class="op" id="3996416">(</span><span class="ident" id="3996417">c</span><span class="op" id="3996418">)</span><span class="op" id="3996419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996423">if</span>&nbsp;<span class="ident" id="3996426">v</span>&nbsp;<span class="op" id="3996428">==</span>&nbsp;<span class="ident" id="3996431">scanSkipSpace</span>&nbsp;<span class="op" id="3996445">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996450">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3996461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996465">if</span>&nbsp;<span class="ident" id="3996468">v</span>&nbsp;<span class="op" id="3996470">==</span>&nbsp;<span class="ident" id="3996473">scanError</span>&nbsp;<span class="op" id="3996483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996488">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3996496">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996500">if</span>&nbsp;<span class="ident" id="3996503">needIndent</span>&nbsp;<span class="op" id="3996514">&amp;&amp;</span>&nbsp;<span class="ident" id="3996517">v</span>&nbsp;<span class="op" id="3996519">!=</span>&nbsp;<span class="ident" id="3996522">scanEndObject</span>&nbsp;<span class="op" id="3996536">&amp;&amp;</span>&nbsp;<span class="ident" id="3996539">v</span>&nbsp;<span class="op" id="3996541">!=</span>&nbsp;<span class="ident" id="3996544">scanEndArray</span>&nbsp;<span class="op" id="3996557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996562">needIndent</span>&nbsp;<span class="op" id="3996573">=</span>&nbsp;<span class="builtintype" id="3996575">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996584">depth</span><span class="op" id="3996589">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996595">newline</span><span class="op" id="3996602">(</span><span class="ident" id="3996603">dst</span><span class="op" id="3996606">,</span>&nbsp;<span class="ident" id="3996608">prefix</span><span class="op" id="3996614">,</span>&nbsp;<span class="ident" id="3996616">indent</span><span class="op" id="3996622">,</span>&nbsp;<span class="ident" id="3996624">depth</span><span class="op" id="3996629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3996633">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3996638">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3996681">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996738">if</span>&nbsp;<span class="ident" id="3996741">v</span>&nbsp;<span class="op" id="3996743">==</span>&nbsp;<span class="ident" id="3996746">scanContinue</span>&nbsp;<span class="op" id="3996759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996764">dst</span><span class="op" id="3996767">.</span><span class="ident" id="3996768">WriteByte</span><span class="op" id="3996777">(</span><span class="ident" id="3996778">c</span><span class="op" id="3996779">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996784">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3996795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3996800">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996842">switch</span>&nbsp;<span class="ident" id="3996849">c</span>&nbsp;<span class="op" id="3996851">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996855">case</span>&nbsp;<span class="string" id="3996860">&#39;{&#39;</span><span class="op" id="3996863">,</span>&nbsp;<span class="string" id="3996865">&#39;[&#39;</span><span class="op" id="3996868">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3996873">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996951">needIndent</span>&nbsp;<span class="op" id="3996962">=</span>&nbsp;<span class="builtintype" id="3996964">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3996972">dst</span><span class="op" id="3996975">.</span><span class="ident" id="3996976">WriteByte</span><span class="op" id="3996985">(</span><span class="ident" id="3996986">c</span><span class="op" id="3996987">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3996992">case</span>&nbsp;<span class="string" id="3996997">&#39;,&#39;</span><span class="op" id="3997000">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997005">dst</span><span class="op" id="3997008">.</span><span class="ident" id="3997009">WriteByte</span><span class="op" id="3997018">(</span><span class="ident" id="3997019">c</span><span class="op" id="3997020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997025">newline</span><span class="op" id="3997032">(</span><span class="ident" id="3997033">dst</span><span class="op" id="3997036">,</span>&nbsp;<span class="ident" id="3997038">prefix</span><span class="op" id="3997044">,</span>&nbsp;<span class="ident" id="3997046">indent</span><span class="op" id="3997052">,</span>&nbsp;<span class="ident" id="3997054">depth</span><span class="op" id="3997059">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3997064">case</span>&nbsp;<span class="string" id="3997069">&#39;:&#39;</span><span class="op" id="3997072">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997077">dst</span><span class="op" id="3997080">.</span><span class="ident" id="3997081">WriteByte</span><span class="op" id="3997090">(</span><span class="ident" id="3997091">c</span><span class="op" id="3997092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997097">dst</span><span class="op" id="3997100">.</span><span class="ident" id="3997101">WriteByte</span><span class="op" id="3997110">(</span><span class="string" id="3997111">&#39;&nbsp;&#39;</span><span class="op" id="3997114">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3997119">case</span>&nbsp;<span class="string" id="3997124">&#39;}&#39;</span><span class="op" id="3997127">,</span>&nbsp;<span class="string" id="3997129">&#39;]&#39;</span><span class="op" id="3997132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3997137">if</span>&nbsp;<span class="ident" id="3997140">needIndent</span>&nbsp;<span class="op" id="3997151">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3997157">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997202">needIndent</span>&nbsp;<span class="op" id="3997213">=</span>&nbsp;<span class="builtintype" id="3997215">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3997224">}</span>&nbsp;<span class="keyword" id="3997226">else</span>&nbsp;<span class="op" id="3997231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997237">depth</span><span class="op" id="3997242">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997249">newline</span><span class="op" id="3997256">(</span><span class="ident" id="3997257">dst</span><span class="op" id="3997260">,</span>&nbsp;<span class="ident" id="3997262">prefix</span><span class="op" id="3997268">,</span>&nbsp;<span class="ident" id="3997270">indent</span><span class="op" id="3997276">,</span>&nbsp;<span class="ident" id="3997278">depth</span><span class="op" id="3997283">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3997288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997293">dst</span><span class="op" id="3997296">.</span><span class="ident" id="3997297">WriteByte</span><span class="op" id="3997306">(</span><span class="ident" id="3997307">c</span><span class="op" id="3997308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3997313">default</span><span class="op" id="3997320">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997325">dst</span><span class="op" id="3997328">.</span><span class="ident" id="3997329">WriteByte</span><span class="op" id="3997338">(</span><span class="ident" id="3997339">c</span><span class="op" id="3997340">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3997344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3997347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3997350">if</span>&nbsp;<span class="ident" id="3997353">scan</span><span class="op" id="3997357">.</span><span class="ident" id="3997358">eof</span><span class="op" id="3997361">(</span><span class="op" id="3997362">)</span>&nbsp;<span class="op" id="3997364">==</span>&nbsp;<span class="ident" id="3997367">scanError</span>&nbsp;<span class="op" id="3997377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3997381">dst</span><span class="op" id="3997384">.</span><span class="ident" id="3997385">Truncate</span><span class="op" id="3997393">(</span><span class="ident" id="3997394">origLen</span><span class="op" id="3997401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3997405">return</span>&nbsp;<span class="ident" id="3997412">scan</span><span class="op" id="3997416">.</span><span class="ident" id="3997417">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3997422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3997425">return</span>&nbsp;<span class="ident" id="3997432">nil</span><br>
<span class="lineno"></span><span class="op" id="3997436">}</span>
</div>
</body>
</html>
