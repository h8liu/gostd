<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html" class="current">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5289020">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5289076">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5289130">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5289181">package</span>&nbsp;<span class="ident" id="5289189">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5289195">import</span>&nbsp;<span class="string" id="5289202">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5289211">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="5289263">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="5289305">func</span>&nbsp;<span class="ident" id="5289310">Compact</span><span class="op" id="5289317">(</span><span class="ident" id="5289318">dst</span>&nbsp;<span class="op" id="5289322">*</span><span class="ident" id="5289323">bytes</span><span class="op" id="5289328">.</span><span class="ident" id="5289329">Buffer</span><span class="op" id="5289335">,</span>&nbsp;<span class="ident" id="5289337">src</span>&nbsp;<span class="op" id="5289341">[</span><span class="op" id="5289342">]</span><span class="builtintype" id="5289343">byte</span><span class="op" id="5289347">)</span>&nbsp;<span class="builtintype" id="5289349">error</span>&nbsp;<span class="op" id="5289355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289358">return</span>&nbsp;<span class="ident" id="5289365">compact</span><span class="op" id="5289372">(</span><span class="ident" id="5289373">dst</span><span class="op" id="5289376">,</span>&nbsp;<span class="ident" id="5289378">src</span><span class="op" id="5289381">,</span>&nbsp;<span class="builtintype" id="5289383">false</span><span class="op" id="5289388">)</span><br>
<span class="lineno"></span><span class="op" id="5289390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5289393">func</span>&nbsp;<span class="ident" id="5289398">compact</span><span class="op" id="5289405">(</span><span class="ident" id="5289406">dst</span>&nbsp;<span class="op" id="5289410">*</span><span class="ident" id="5289411">bytes</span><span class="op" id="5289416">.</span><span class="ident" id="5289417">Buffer</span><span class="op" id="5289423">,</span>&nbsp;<span class="ident" id="5289425">src</span>&nbsp;<span class="op" id="5289429">[</span><span class="op" id="5289430">]</span><span class="builtintype" id="5289431">byte</span><span class="op" id="5289435">,</span>&nbsp;<span class="ident" id="5289437">escape</span>&nbsp;<span class="builtintype" id="5289444">bool</span><span class="op" id="5289448">)</span>&nbsp;<span class="builtintype" id="5289450">error</span>&nbsp;<span class="op" id="5289456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289459">origLen</span>&nbsp;<span class="op" id="5289467">:=</span>&nbsp;<span class="ident" id="5289470">dst</span><span class="op" id="5289473">.</span><span class="ident" id="5289474">Len</span><span class="op" id="5289477">(</span><span class="op" id="5289478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289481">var</span>&nbsp;<span class="ident" id="5289485">scan</span>&nbsp;<span class="ident" id="5289490">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289499">scan</span><span class="op" id="5289503">.</span><span class="ident" id="5289504">reset</span><span class="op" id="5289509">(</span><span class="op" id="5289510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289513">start</span>&nbsp;<span class="op" id="5289519">:=</span>&nbsp;<span class="num" id="5289522">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289525">for</span>&nbsp;<span class="ident" id="5289529">i</span><span class="op" id="5289530">,</span>&nbsp;<span class="ident" id="5289532">c</span>&nbsp;<span class="op" id="5289534">:=</span>&nbsp;<span class="keyword" id="5289537">range</span>&nbsp;<span class="ident" id="5289543">src</span>&nbsp;<span class="op" id="5289547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289551">if</span>&nbsp;<span class="ident" id="5289554">escape</span>&nbsp;<span class="op" id="5289561">&amp;&amp;</span>&nbsp;<span class="op" id="5289564">(</span><span class="ident" id="5289565">c</span>&nbsp;<span class="op" id="5289567">==</span>&nbsp;<span class="string" id="5289570">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="5289574">||</span>&nbsp;<span class="ident" id="5289577">c</span>&nbsp;<span class="op" id="5289579">==</span>&nbsp;<span class="string" id="5289582">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="5289586">||</span>&nbsp;<span class="ident" id="5289589">c</span>&nbsp;<span class="op" id="5289591">==</span>&nbsp;<span class="string" id="5289594">&#39;&amp;&#39;</span><span class="op" id="5289597">)</span>&nbsp;<span class="op" id="5289599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289604">if</span>&nbsp;<span class="ident" id="5289607">start</span>&nbsp;<span class="op" id="5289613">&lt;</span>&nbsp;<span class="ident" id="5289615">i</span>&nbsp;<span class="op" id="5289617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289623">dst</span><span class="op" id="5289626">.</span><span class="ident" id="5289627">Write</span><span class="op" id="5289632">(</span><span class="ident" id="5289633">src</span><span class="op" id="5289636">[</span><span class="ident" id="5289637">start</span><span class="op" id="5289642">:</span><span class="ident" id="5289643">i</span><span class="op" id="5289644">]</span><span class="op" id="5289645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289650">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289655">dst</span><span class="op" id="5289658">.</span><span class="ident" id="5289659">WriteString</span><span class="op" id="5289670">(</span><span class="string" id="5289671">`\u00`</span><span class="op" id="5289677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289682">dst</span><span class="op" id="5289685">.</span><span class="ident" id="5289686">WriteByte</span><span class="op" id="5289695">(</span><span class="ident" id="5289696">hex</span><span class="op" id="5289699">[</span><span class="ident" id="5289700">c</span><span class="op" id="5289701">&gt;&gt;</span><span class="num" id="5289703">4</span><span class="op" id="5289704">]</span><span class="op" id="5289705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289710">dst</span><span class="op" id="5289713">.</span><span class="ident" id="5289714">WriteByte</span><span class="op" id="5289723">(</span><span class="ident" id="5289724">hex</span><span class="op" id="5289727">[</span><span class="ident" id="5289728">c</span><span class="op" id="5289729">&amp;</span><span class="num" id="5289730">0xF</span><span class="op" id="5289733">]</span><span class="op" id="5289734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289739">start</span>&nbsp;<span class="op" id="5289745">=</span>&nbsp;<span class="ident" id="5289747">i</span>&nbsp;<span class="op" id="5289749">+</span>&nbsp;<span class="num" id="5289751">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289755">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5289759">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289815">if</span>&nbsp;<span class="ident" id="5289818">c</span>&nbsp;<span class="op" id="5289820">==</span>&nbsp;<span class="num" id="5289823">0xE2</span>&nbsp;<span class="op" id="5289828">&amp;&amp;</span>&nbsp;<span class="ident" id="5289831">i</span><span class="op" id="5289832">+</span><span class="num" id="5289833">2</span>&nbsp;<span class="op" id="5289835">&lt;</span>&nbsp;<span class="builtinfunc" id="5289837">len</span><span class="op" id="5289840">(</span><span class="ident" id="5289841">src</span><span class="op" id="5289844">)</span>&nbsp;<span class="op" id="5289846">&amp;&amp;</span>&nbsp;<span class="ident" id="5289849">src</span><span class="op" id="5289852">[</span><span class="ident" id="5289853">i</span><span class="op" id="5289854">+</span><span class="num" id="5289855">1</span><span class="op" id="5289856">]</span>&nbsp;<span class="op" id="5289858">==</span>&nbsp;<span class="num" id="5289861">0x80</span>&nbsp;<span class="op" id="5289866">&amp;&amp;</span>&nbsp;<span class="ident" id="5289869">src</span><span class="op" id="5289872">[</span><span class="ident" id="5289873">i</span><span class="op" id="5289874">+</span><span class="num" id="5289875">2</span><span class="op" id="5289876">]</span><span class="op" id="5289877">&amp;^</span><span class="num" id="5289879">1</span>&nbsp;<span class="op" id="5289881">==</span>&nbsp;<span class="num" id="5289884">0xA8</span>&nbsp;<span class="op" id="5289889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289894">if</span>&nbsp;<span class="ident" id="5289897">start</span>&nbsp;<span class="op" id="5289903">&lt;</span>&nbsp;<span class="ident" id="5289905">i</span>&nbsp;<span class="op" id="5289907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289913">dst</span><span class="op" id="5289916">.</span><span class="ident" id="5289917">Write</span><span class="op" id="5289922">(</span><span class="ident" id="5289923">src</span><span class="op" id="5289926">[</span><span class="ident" id="5289927">start</span><span class="op" id="5289932">:</span><span class="ident" id="5289933">i</span><span class="op" id="5289934">]</span><span class="op" id="5289935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289940">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289945">dst</span><span class="op" id="5289948">.</span><span class="ident" id="5289949">WriteString</span><span class="op" id="5289960">(</span><span class="string" id="5289961">`\u202`</span><span class="op" id="5289968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289973">dst</span><span class="op" id="5289976">.</span><span class="ident" id="5289977">WriteByte</span><span class="op" id="5289986">(</span><span class="ident" id="5289987">hex</span><span class="op" id="5289990">[</span><span class="ident" id="5289991">src</span><span class="op" id="5289994">[</span><span class="ident" id="5289995">i</span><span class="op" id="5289996">+</span><span class="num" id="5289997">2</span><span class="op" id="5289998">]</span><span class="op" id="5289999">&amp;</span><span class="num" id="5290000">0xF</span><span class="op" id="5290003">]</span><span class="op" id="5290004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290009">start</span>&nbsp;<span class="op" id="5290015">=</span>&nbsp;<span class="ident" id="5290017">i</span>&nbsp;<span class="op" id="5290019">+</span>&nbsp;<span class="num" id="5290021">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290029">v</span>&nbsp;<span class="op" id="5290031">:=</span>&nbsp;<span class="ident" id="5290034">scan</span><span class="op" id="5290038">.</span><span class="ident" id="5290039">step</span><span class="op" id="5290043">(</span><span class="op" id="5290044">&amp;</span><span class="ident" id="5290045">scan</span><span class="op" id="5290049">,</span>&nbsp;<span class="builtintype" id="5290051">int</span><span class="op" id="5290054">(</span><span class="ident" id="5290055">c</span><span class="op" id="5290056">)</span><span class="op" id="5290057">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290061">if</span>&nbsp;<span class="ident" id="5290064">v</span>&nbsp;<span class="op" id="5290066">&gt;=</span>&nbsp;<span class="ident" id="5290069">scanSkipSpace</span>&nbsp;<span class="op" id="5290083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290088">if</span>&nbsp;<span class="ident" id="5290091">v</span>&nbsp;<span class="op" id="5290093">==</span>&nbsp;<span class="ident" id="5290096">scanError</span>&nbsp;<span class="op" id="5290106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290112">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290126">if</span>&nbsp;<span class="ident" id="5290129">start</span>&nbsp;<span class="op" id="5290135">&lt;</span>&nbsp;<span class="ident" id="5290137">i</span>&nbsp;<span class="op" id="5290139">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290145">dst</span><span class="op" id="5290148">.</span><span class="ident" id="5290149">Write</span><span class="op" id="5290154">(</span><span class="ident" id="5290155">src</span><span class="op" id="5290158">[</span><span class="ident" id="5290159">start</span><span class="op" id="5290164">:</span><span class="ident" id="5290165">i</span><span class="op" id="5290166">]</span><span class="op" id="5290167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290177">start</span>&nbsp;<span class="op" id="5290183">=</span>&nbsp;<span class="ident" id="5290185">i</span>&nbsp;<span class="op" id="5290187">+</span>&nbsp;<span class="num" id="5290189">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290196">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290199">if</span>&nbsp;<span class="ident" id="5290202">scan</span><span class="op" id="5290206">.</span><span class="ident" id="5290207">eof</span><span class="op" id="5290210">(</span><span class="op" id="5290211">)</span>&nbsp;<span class="op" id="5290213">==</span>&nbsp;<span class="ident" id="5290216">scanError</span>&nbsp;<span class="op" id="5290226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290230">dst</span><span class="op" id="5290233">.</span><span class="ident" id="5290234">Truncate</span><span class="op" id="5290242">(</span><span class="ident" id="5290243">origLen</span><span class="op" id="5290250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290254">return</span>&nbsp;<span class="ident" id="5290261">scan</span><span class="op" id="5290265">.</span><span class="ident" id="5290266">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290274">if</span>&nbsp;<span class="ident" id="5290277">start</span>&nbsp;<span class="op" id="5290283">&lt;</span>&nbsp;<span class="builtinfunc" id="5290285">len</span><span class="op" id="5290288">(</span><span class="ident" id="5290289">src</span><span class="op" id="5290292">)</span>&nbsp;<span class="op" id="5290294">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290298">dst</span><span class="op" id="5290301">.</span><span class="ident" id="5290302">Write</span><span class="op" id="5290307">(</span><span class="ident" id="5290308">src</span><span class="op" id="5290311">[</span><span class="ident" id="5290312">start</span><span class="op" id="5290317">:</span><span class="op" id="5290318">]</span><span class="op" id="5290319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290325">return</span>&nbsp;<span class="ident" id="5290332">nil</span><br>
<span class="lineno"></span><span class="op" id="5290336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5290339">func</span>&nbsp;<span class="ident" id="5290344">newline</span><span class="op" id="5290351">(</span><span class="ident" id="5290352">dst</span>&nbsp;<span class="op" id="5290356">*</span><span class="ident" id="5290357">bytes</span><span class="op" id="5290362">.</span><span class="ident" id="5290363">Buffer</span><span class="op" id="5290369">,</span>&nbsp;<span class="ident" id="5290371">prefix</span><span class="op" id="5290377">,</span>&nbsp;<span class="ident" id="5290379">indent</span>&nbsp;<span class="builtintype" id="5290386">string</span><span class="op" id="5290392">,</span>&nbsp;<span class="ident" id="5290394">depth</span>&nbsp;<span class="builtintype" id="5290400">int</span><span class="op" id="5290403">)</span>&nbsp;<span class="op" id="5290405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290408">dst</span><span class="op" id="5290411">.</span><span class="ident" id="5290412">WriteByte</span><span class="op" id="5290421">(</span><span class="string" id="5290422">&#39;\n&#39;</span><span class="op" id="5290426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290429">dst</span><span class="op" id="5290432">.</span><span class="ident" id="5290433">WriteString</span><span class="op" id="5290444">(</span><span class="ident" id="5290445">prefix</span><span class="op" id="5290451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290454">for</span>&nbsp;<span class="ident" id="5290458">i</span>&nbsp;<span class="op" id="5290460">:=</span>&nbsp;<span class="num" id="5290463">0</span><span class="op" id="5290464">;</span>&nbsp;<span class="ident" id="5290466">i</span>&nbsp;<span class="op" id="5290468">&lt;</span>&nbsp;<span class="ident" id="5290470">depth</span><span class="op" id="5290475">;</span>&nbsp;<span class="ident" id="5290477">i</span><span class="op" id="5290478">++</span>&nbsp;<span class="op" id="5290481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290485">dst</span><span class="op" id="5290488">.</span><span class="ident" id="5290489">WriteString</span><span class="op" id="5290500">(</span><span class="ident" id="5290501">indent</span><span class="op" id="5290507">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290510">}</span><br>
<span class="lineno"></span><span class="op" id="5290512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5290515">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="5290582">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="5290641">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="5290704">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="5290762">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="5290825">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5290885">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="5290938">func</span>&nbsp;<span class="ident" id="5290943">Indent</span><span class="op" id="5290949">(</span><span class="ident" id="5290950">dst</span>&nbsp;<span class="op" id="5290954">*</span><span class="ident" id="5290955">bytes</span><span class="op" id="5290960">.</span><span class="ident" id="5290961">Buffer</span><span class="op" id="5290967">,</span>&nbsp;<span class="ident" id="5290969">src</span>&nbsp;<span class="op" id="5290973">[</span><span class="op" id="5290974">]</span><span class="builtintype" id="5290975">byte</span><span class="op" id="5290979">,</span>&nbsp;<span class="ident" id="5290981">prefix</span><span class="op" id="5290987">,</span>&nbsp;<span class="ident" id="5290989">indent</span>&nbsp;<span class="builtintype" id="5290996">string</span><span class="op" id="5291002">)</span>&nbsp;<span class="builtintype" id="5291004">error</span>&nbsp;<span class="op" id="5291010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291013">origLen</span>&nbsp;<span class="op" id="5291021">:=</span>&nbsp;<span class="ident" id="5291024">dst</span><span class="op" id="5291027">.</span><span class="ident" id="5291028">Len</span><span class="op" id="5291031">(</span><span class="op" id="5291032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291035">var</span>&nbsp;<span class="ident" id="5291039">scan</span>&nbsp;<span class="ident" id="5291044">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291053">scan</span><span class="op" id="5291057">.</span><span class="ident" id="5291058">reset</span><span class="op" id="5291063">(</span><span class="op" id="5291064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291067">needIndent</span>&nbsp;<span class="op" id="5291078">:=</span>&nbsp;<span class="builtintype" id="5291081">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291088">depth</span>&nbsp;<span class="op" id="5291094">:=</span>&nbsp;<span class="num" id="5291097">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291100">for</span>&nbsp;<span class="ident" id="5291104">_</span><span class="op" id="5291105">,</span>&nbsp;<span class="ident" id="5291107">c</span>&nbsp;<span class="op" id="5291109">:=</span>&nbsp;<span class="keyword" id="5291112">range</span>&nbsp;<span class="ident" id="5291118">src</span>&nbsp;<span class="op" id="5291122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291126">scan</span><span class="op" id="5291130">.</span><span class="ident" id="5291131">bytes</span><span class="op" id="5291136">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291141">v</span>&nbsp;<span class="op" id="5291143">:=</span>&nbsp;<span class="ident" id="5291146">scan</span><span class="op" id="5291150">.</span><span class="ident" id="5291151">step</span><span class="op" id="5291155">(</span><span class="op" id="5291156">&amp;</span><span class="ident" id="5291157">scan</span><span class="op" id="5291161">,</span>&nbsp;<span class="builtintype" id="5291163">int</span><span class="op" id="5291166">(</span><span class="ident" id="5291167">c</span><span class="op" id="5291168">)</span><span class="op" id="5291169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291173">if</span>&nbsp;<span class="ident" id="5291176">v</span>&nbsp;<span class="op" id="5291178">==</span>&nbsp;<span class="ident" id="5291181">scanSkipSpace</span>&nbsp;<span class="op" id="5291195">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291200">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291215">if</span>&nbsp;<span class="ident" id="5291218">v</span>&nbsp;<span class="op" id="5291220">==</span>&nbsp;<span class="ident" id="5291223">scanError</span>&nbsp;<span class="op" id="5291233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291238">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291246">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291250">if</span>&nbsp;<span class="ident" id="5291253">needIndent</span>&nbsp;<span class="op" id="5291264">&amp;&amp;</span>&nbsp;<span class="ident" id="5291267">v</span>&nbsp;<span class="op" id="5291269">!=</span>&nbsp;<span class="ident" id="5291272">scanEndObject</span>&nbsp;<span class="op" id="5291286">&amp;&amp;</span>&nbsp;<span class="ident" id="5291289">v</span>&nbsp;<span class="op" id="5291291">!=</span>&nbsp;<span class="ident" id="5291294">scanEndArray</span>&nbsp;<span class="op" id="5291307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291312">needIndent</span>&nbsp;<span class="op" id="5291323">=</span>&nbsp;<span class="builtintype" id="5291325">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291334">depth</span><span class="op" id="5291339">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291345">newline</span><span class="op" id="5291352">(</span><span class="ident" id="5291353">dst</span><span class="op" id="5291356">,</span>&nbsp;<span class="ident" id="5291358">prefix</span><span class="op" id="5291364">,</span>&nbsp;<span class="ident" id="5291366">indent</span><span class="op" id="5291372">,</span>&nbsp;<span class="ident" id="5291374">depth</span><span class="op" id="5291379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291383">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291388">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291431">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291488">if</span>&nbsp;<span class="ident" id="5291491">v</span>&nbsp;<span class="op" id="5291493">==</span>&nbsp;<span class="ident" id="5291496">scanContinue</span>&nbsp;<span class="op" id="5291509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291514">dst</span><span class="op" id="5291517">.</span><span class="ident" id="5291518">WriteByte</span><span class="op" id="5291527">(</span><span class="ident" id="5291528">c</span><span class="op" id="5291529">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291534">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291550">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291592">switch</span>&nbsp;<span class="ident" id="5291599">c</span>&nbsp;<span class="op" id="5291601">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291605">case</span>&nbsp;<span class="string" id="5291610">&#39;{&#39;</span><span class="op" id="5291613">,</span>&nbsp;<span class="string" id="5291615">&#39;[&#39;</span><span class="op" id="5291618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291623">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291701">needIndent</span>&nbsp;<span class="op" id="5291712">=</span>&nbsp;<span class="builtintype" id="5291714">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291722">dst</span><span class="op" id="5291725">.</span><span class="ident" id="5291726">WriteByte</span><span class="op" id="5291735">(</span><span class="ident" id="5291736">c</span><span class="op" id="5291737">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291742">case</span>&nbsp;<span class="string" id="5291747">&#39;,&#39;</span><span class="op" id="5291750">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291755">dst</span><span class="op" id="5291758">.</span><span class="ident" id="5291759">WriteByte</span><span class="op" id="5291768">(</span><span class="ident" id="5291769">c</span><span class="op" id="5291770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291775">newline</span><span class="op" id="5291782">(</span><span class="ident" id="5291783">dst</span><span class="op" id="5291786">,</span>&nbsp;<span class="ident" id="5291788">prefix</span><span class="op" id="5291794">,</span>&nbsp;<span class="ident" id="5291796">indent</span><span class="op" id="5291802">,</span>&nbsp;<span class="ident" id="5291804">depth</span><span class="op" id="5291809">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291814">case</span>&nbsp;<span class="string" id="5291819">&#39;:&#39;</span><span class="op" id="5291822">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291827">dst</span><span class="op" id="5291830">.</span><span class="ident" id="5291831">WriteByte</span><span class="op" id="5291840">(</span><span class="ident" id="5291841">c</span><span class="op" id="5291842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291847">dst</span><span class="op" id="5291850">.</span><span class="ident" id="5291851">WriteByte</span><span class="op" id="5291860">(</span><span class="string" id="5291861">&#39;&nbsp;&#39;</span><span class="op" id="5291864">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291869">case</span>&nbsp;<span class="string" id="5291874">&#39;}&#39;</span><span class="op" id="5291877">,</span>&nbsp;<span class="string" id="5291879">&#39;]&#39;</span><span class="op" id="5291882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291887">if</span>&nbsp;<span class="ident" id="5291890">needIndent</span>&nbsp;<span class="op" id="5291901">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291907">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291952">needIndent</span>&nbsp;<span class="op" id="5291963">=</span>&nbsp;<span class="builtintype" id="5291965">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291974">}</span>&nbsp;<span class="keyword" id="5291976">else</span>&nbsp;<span class="op" id="5291981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291987">depth</span><span class="op" id="5291992">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291999">newline</span><span class="op" id="5292006">(</span><span class="ident" id="5292007">dst</span><span class="op" id="5292010">,</span>&nbsp;<span class="ident" id="5292012">prefix</span><span class="op" id="5292018">,</span>&nbsp;<span class="ident" id="5292020">indent</span><span class="op" id="5292026">,</span>&nbsp;<span class="ident" id="5292028">depth</span><span class="op" id="5292033">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292043">dst</span><span class="op" id="5292046">.</span><span class="ident" id="5292047">WriteByte</span><span class="op" id="5292056">(</span><span class="ident" id="5292057">c</span><span class="op" id="5292058">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292063">default</span><span class="op" id="5292070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292075">dst</span><span class="op" id="5292078">.</span><span class="ident" id="5292079">WriteByte</span><span class="op" id="5292088">(</span><span class="ident" id="5292089">c</span><span class="op" id="5292090">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292100">if</span>&nbsp;<span class="ident" id="5292103">scan</span><span class="op" id="5292107">.</span><span class="ident" id="5292108">eof</span><span class="op" id="5292111">(</span><span class="op" id="5292112">)</span>&nbsp;<span class="op" id="5292114">==</span>&nbsp;<span class="ident" id="5292117">scanError</span>&nbsp;<span class="op" id="5292127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292131">dst</span><span class="op" id="5292134">.</span><span class="ident" id="5292135">Truncate</span><span class="op" id="5292143">(</span><span class="ident" id="5292144">origLen</span><span class="op" id="5292151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292155">return</span>&nbsp;<span class="ident" id="5292162">scan</span><span class="op" id="5292166">.</span><span class="ident" id="5292167">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292175">return</span>&nbsp;<span class="ident" id="5292182">nil</span><br>
<span class="lineno"></span><span class="op" id="5292186">}</span>
</div>
</body>
</html>
