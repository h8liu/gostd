<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5766311">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5766367">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5766421">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5766472">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5766531">package</span>&nbsp;<span class="ident" id="5766539">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5766546">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5766598">import</span>&nbsp;<span class="op" id="5766605">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5766608">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5766617">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5766632">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5766651">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5766658">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5766664">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5766669">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5766672">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="5766714">type</span>&nbsp;<span class="ident" id="5766719">File</span>&nbsp;<span class="keyword" id="5766724">struct</span>&nbsp;<span class="op" id="5766731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766734">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766746">ByteOrder</span>&nbsp;<span class="ident" id="5766756">binary</span><span class="op" id="5766762">.</span><span class="ident" id="5766763">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766774">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5766784">[</span><span class="op" id="5766785">]</span><span class="ident" id="5766786">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766792">Sections</span>&nbsp;&nbsp;<span class="op" id="5766802">[</span><span class="op" id="5766803">]</span><span class="op" id="5766804">*</span><span class="ident" id="5766805">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766815">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5766824">*</span><span class="ident" id="5766825">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766833">Dysymtab</span>&nbsp;<span class="op" id="5766842">*</span><span class="ident" id="5766843">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766854">closer</span>&nbsp;<span class="ident" id="5766861">io</span><span class="op" id="5766863">.</span><span class="ident" id="5766864">Closer</span><br>
<span class="lineno">30</span><span class="op" id="5766871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5766874">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5766920">type</span>&nbsp;<span class="ident" id="5766925">Load</span>&nbsp;<span class="keyword" id="5766930">interface</span>&nbsp;<span class="op" id="5766940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766943">Raw</span><span class="op" id="5766946">(</span><span class="op" id="5766947">)</span>&nbsp;<span class="op" id="5766949">[</span><span class="op" id="5766950">]</span><span class="builtintype" id="5766951">byte</span><br>
<span class="lineno">35</span><span class="op" id="5766956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5766959">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5767027">type</span>&nbsp;<span class="ident" id="5767032">LoadBytes</span>&nbsp;<span class="op" id="5767042">[</span><span class="op" id="5767043">]</span><span class="builtintype" id="5767044">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="5767050">func</span>&nbsp;<span class="op" id="5767055">(</span><span class="ident" id="5767056">b</span>&nbsp;<span class="ident" id="5767058">LoadBytes</span><span class="op" id="5767067">)</span>&nbsp;<span class="ident" id="5767069">Raw</span><span class="op" id="5767072">(</span><span class="op" id="5767073">)</span>&nbsp;<span class="op" id="5767075">[</span><span class="op" id="5767076">]</span><span class="builtintype" id="5767077">byte</span>&nbsp;<span class="op" id="5767082">{</span>&nbsp;<span class="keyword" id="5767084">return</span>&nbsp;<span class="ident" id="5767091">b</span>&nbsp;<span class="op" id="5767093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5767096">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5767181">type</span>&nbsp;<span class="ident" id="5767186">SegmentHeader</span>&nbsp;<span class="keyword" id="5767200">struct</span>&nbsp;<span class="op" id="5767207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767210">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767218">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767227">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5767235">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767243">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5767251">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767259">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767267">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767275">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5767283">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767291">Offset</span>&nbsp;&nbsp;<span class="ident" id="5767299">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767307">Filesz</span>&nbsp;&nbsp;<span class="ident" id="5767315">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767323">Maxprot</span>&nbsp;<span class="builtintype" id="5767331">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767339">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5767347">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767355">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5767363">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767371">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5767379">uint32</span><br>
<span class="lineno">55</span><span class="op" id="5767386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5767389">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5767461">type</span>&nbsp;<span class="ident" id="5767466">Segment</span>&nbsp;<span class="keyword" id="5767474">struct</span>&nbsp;<span class="op" id="5767481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767484">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767495">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767511">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767549">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767589">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767624">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767672">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767722">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767746">io</span><span class="op" id="5767748">.</span><span class="ident" id="5767749">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767759">sr</span>&nbsp;<span class="op" id="5767762">*</span><span class="ident" id="5767763">io</span><span class="op" id="5767765">.</span><span class="ident" id="5767766">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="5767780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5767783">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5767838">func</span>&nbsp;<span class="op" id="5767843">(</span><span class="ident" id="5767844">s</span>&nbsp;<span class="op" id="5767846">*</span><span class="ident" id="5767847">Segment</span><span class="op" id="5767854">)</span>&nbsp;<span class="ident" id="5767856">Data</span><span class="op" id="5767860">(</span><span class="op" id="5767861">)</span>&nbsp;<span class="op" id="5767863">(</span><span class="op" id="5767864">[</span><span class="op" id="5767865">]</span><span class="builtintype" id="5767866">byte</span><span class="op" id="5767870">,</span>&nbsp;<span class="builtintype" id="5767872">error</span><span class="op" id="5767877">)</span>&nbsp;<span class="op" id="5767879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767882">dat</span>&nbsp;<span class="op" id="5767886">:=</span>&nbsp;<span class="builtinfunc" id="5767889">make</span><span class="op" id="5767893">(</span><span class="op" id="5767894">[</span><span class="op" id="5767895">]</span><span class="builtintype" id="5767896">byte</span><span class="op" id="5767900">,</span>&nbsp;<span class="ident" id="5767902">s</span><span class="op" id="5767903">.</span><span class="ident" id="5767904">sr</span><span class="op" id="5767906">.</span><span class="ident" id="5767907">Size</span><span class="op" id="5767911">(</span><span class="op" id="5767912">)</span><span class="op" id="5767913">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767916">n</span><span class="op" id="5767917">,</span>&nbsp;<span class="ident" id="5767919">err</span>&nbsp;<span class="op" id="5767923">:=</span>&nbsp;<span class="ident" id="5767926">s</span><span class="op" id="5767927">.</span><span class="ident" id="5767928">sr</span><span class="op" id="5767930">.</span><span class="ident" id="5767931">ReadAt</span><span class="op" id="5767937">(</span><span class="ident" id="5767938">dat</span><span class="op" id="5767941">,</span>&nbsp;<span class="num" id="5767943">0</span><span class="op" id="5767944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5767947">if</span>&nbsp;<span class="ident" id="5767950">n</span>&nbsp;<span class="op" id="5767952">==</span>&nbsp;<span class="builtinfunc" id="5767955">len</span><span class="op" id="5767958">(</span><span class="ident" id="5767959">dat</span><span class="op" id="5767962">)</span>&nbsp;<span class="op" id="5767964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767968">err</span>&nbsp;<span class="op" id="5767972">=</span>&nbsp;<span class="ident" id="5767974">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5767979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5767982">return</span>&nbsp;<span class="ident" id="5767989">dat</span><span class="op" id="5767992">[</span><span class="num" id="5767993">0</span><span class="op" id="5767994">:</span><span class="ident" id="5767995">n</span><span class="op" id="5767996">]</span><span class="op" id="5767997">,</span>&nbsp;<span class="ident" id="5767999">err</span><br>
<span class="lineno">80</span><span class="op" id="5768003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5768006">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5768060">func</span>&nbsp;<span class="op" id="5768065">(</span><span class="ident" id="5768066">s</span>&nbsp;<span class="op" id="5768068">*</span><span class="ident" id="5768069">Segment</span><span class="op" id="5768076">)</span>&nbsp;<span class="ident" id="5768078">Open</span><span class="op" id="5768082">(</span><span class="op" id="5768083">)</span>&nbsp;<span class="ident" id="5768085">io</span><span class="op" id="5768087">.</span><span class="ident" id="5768088">ReadSeeker</span>&nbsp;<span class="op" id="5768099">{</span>&nbsp;<span class="keyword" id="5768101">return</span>&nbsp;<span class="ident" id="5768108">io</span><span class="op" id="5768110">.</span><span class="ident" id="5768111">NewSectionReader</span><span class="op" id="5768127">(</span><span class="ident" id="5768128">s</span><span class="op" id="5768129">.</span><span class="ident" id="5768130">sr</span><span class="op" id="5768132">,</span>&nbsp;<span class="num" id="5768134">0</span><span class="op" id="5768135">,</span>&nbsp;<span class="num" id="5768137">1</span><span class="op" id="5768138">&lt;&lt;</span><span class="num" id="5768140">63</span><span class="op" id="5768142">-</span><span class="num" id="5768143">1</span><span class="op" id="5768144">)</span>&nbsp;<span class="op" id="5768146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="5768149">type</span>&nbsp;<span class="ident" id="5768154">SectionHeader</span>&nbsp;<span class="keyword" id="5768168">struct</span>&nbsp;<span class="op" id="5768175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768178">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5768185">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768193">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5768200">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768208">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5768215">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768223">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5768230">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768238">Offset</span>&nbsp;<span class="builtintype" id="5768245">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768253">Align</span>&nbsp;&nbsp;<span class="builtintype" id="5768260">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768268">Reloff</span>&nbsp;<span class="builtintype" id="5768275">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768283">Nreloc</span>&nbsp;<span class="builtintype" id="5768290">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768298">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="5768305">uint32</span><br>
<span class="lineno">95</span><span class="op" id="5768312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5768315">type</span>&nbsp;<span class="ident" id="5768320">Section</span>&nbsp;<span class="keyword" id="5768328">struct</span>&nbsp;<span class="op" id="5768335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768338">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5768354">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5768392">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5768432">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5768467">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5768515">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5768565">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768589">io</span><span class="op" id="5768591">.</span><span class="ident" id="5768592">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768602">sr</span>&nbsp;<span class="op" id="5768605">*</span><span class="ident" id="5768606">io</span><span class="op" id="5768608">.</span><span class="ident" id="5768609">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="5768623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5768626">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5768688">func</span>&nbsp;<span class="op" id="5768693">(</span><span class="ident" id="5768694">s</span>&nbsp;<span class="op" id="5768696">*</span><span class="ident" id="5768697">Section</span><span class="op" id="5768704">)</span>&nbsp;<span class="ident" id="5768706">Data</span><span class="op" id="5768710">(</span><span class="op" id="5768711">)</span>&nbsp;<span class="op" id="5768713">(</span><span class="op" id="5768714">[</span><span class="op" id="5768715">]</span><span class="builtintype" id="5768716">byte</span><span class="op" id="5768720">,</span>&nbsp;<span class="builtintype" id="5768722">error</span><span class="op" id="5768727">)</span>&nbsp;<span class="op" id="5768729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768732">dat</span>&nbsp;<span class="op" id="5768736">:=</span>&nbsp;<span class="builtinfunc" id="5768739">make</span><span class="op" id="5768743">(</span><span class="op" id="5768744">[</span><span class="op" id="5768745">]</span><span class="builtintype" id="5768746">byte</span><span class="op" id="5768750">,</span>&nbsp;<span class="ident" id="5768752">s</span><span class="op" id="5768753">.</span><span class="ident" id="5768754">sr</span><span class="op" id="5768756">.</span><span class="ident" id="5768757">Size</span><span class="op" id="5768761">(</span><span class="op" id="5768762">)</span><span class="op" id="5768763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768766">n</span><span class="op" id="5768767">,</span>&nbsp;<span class="ident" id="5768769">err</span>&nbsp;<span class="op" id="5768773">:=</span>&nbsp;<span class="ident" id="5768776">s</span><span class="op" id="5768777">.</span><span class="ident" id="5768778">sr</span><span class="op" id="5768780">.</span><span class="ident" id="5768781">ReadAt</span><span class="op" id="5768787">(</span><span class="ident" id="5768788">dat</span><span class="op" id="5768791">,</span>&nbsp;<span class="num" id="5768793">0</span><span class="op" id="5768794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5768797">if</span>&nbsp;<span class="ident" id="5768800">n</span>&nbsp;<span class="op" id="5768802">==</span>&nbsp;<span class="builtinfunc" id="5768805">len</span><span class="op" id="5768808">(</span><span class="ident" id="5768809">dat</span><span class="op" id="5768812">)</span>&nbsp;<span class="op" id="5768814">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768818">err</span>&nbsp;<span class="op" id="5768822">=</span>&nbsp;<span class="ident" id="5768824">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5768832">return</span>&nbsp;<span class="ident" id="5768839">dat</span><span class="op" id="5768842">[</span><span class="num" id="5768843">0</span><span class="op" id="5768844">:</span><span class="ident" id="5768845">n</span><span class="op" id="5768846">]</span><span class="op" id="5768847">,</span>&nbsp;<span class="ident" id="5768849">err</span><br>
<span class="lineno"></span><span class="op" id="5768853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="5768856">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5768917">func</span>&nbsp;<span class="op" id="5768922">(</span><span class="ident" id="5768923">s</span>&nbsp;<span class="op" id="5768925">*</span><span class="ident" id="5768926">Section</span><span class="op" id="5768933">)</span>&nbsp;<span class="ident" id="5768935">Open</span><span class="op" id="5768939">(</span><span class="op" id="5768940">)</span>&nbsp;<span class="ident" id="5768942">io</span><span class="op" id="5768944">.</span><span class="ident" id="5768945">ReadSeeker</span>&nbsp;<span class="op" id="5768956">{</span>&nbsp;<span class="keyword" id="5768958">return</span>&nbsp;<span class="ident" id="5768965">io</span><span class="op" id="5768967">.</span><span class="ident" id="5768968">NewSectionReader</span><span class="op" id="5768984">(</span><span class="ident" id="5768985">s</span><span class="op" id="5768986">.</span><span class="ident" id="5768987">sr</span><span class="op" id="5768989">,</span>&nbsp;<span class="num" id="5768991">0</span><span class="op" id="5768992">,</span>&nbsp;<span class="num" id="5768994">1</span><span class="op" id="5768995">&lt;&lt;</span><span class="num" id="5768997">63</span><span class="op" id="5768999">-</span><span class="num" id="5769000">1</span><span class="op" id="5769001">)</span>&nbsp;<span class="op" id="5769003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5769006">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5769067">type</span>&nbsp;<span class="ident" id="5769072">Dylib</span>&nbsp;<span class="keyword" id="5769078">struct</span>&nbsp;<span class="op" id="5769085">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769088">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769099">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769114">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769122">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769137">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769145">CurrentVersion</span>&nbsp;<span class="builtintype" id="5769160">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769168">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="5769183">uint32</span><br>
<span class="lineno">130</span><span class="op" id="5769190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5769193">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5769247">type</span>&nbsp;<span class="ident" id="5769252">Symtab</span>&nbsp;<span class="keyword" id="5769259">struct</span>&nbsp;<span class="op" id="5769266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769269">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769280">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769291">Syms</span>&nbsp;<span class="op" id="5769296">[</span><span class="op" id="5769297">]</span><span class="ident" id="5769298">Symbol</span><br>
<span class="lineno"></span><span class="op" id="5769305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5769308">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="5769372">type</span>&nbsp;<span class="ident" id="5769377">Dysymtab</span>&nbsp;<span class="keyword" id="5769386">struct</span>&nbsp;<span class="op" id="5769393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769396">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769407">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769420">IndirectSyms</span>&nbsp;<span class="op" id="5769433">[</span><span class="op" id="5769434">]</span><span class="builtintype" id="5769435">uint32</span>&nbsp;<span class="comment" id="5769442">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="5769470">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="5769473">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="5769498">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="5769561">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5769612">type</span>&nbsp;<span class="ident" id="5769617">FormatError</span>&nbsp;<span class="keyword" id="5769629">struct</span>&nbsp;<span class="op" id="5769636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769639">off</span>&nbsp;<span class="ident" id="5769643">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769650">msg</span>&nbsp;<span class="builtintype" id="5769654">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769662">val</span>&nbsp;<span class="keyword" id="5769666">interface</span><span class="op" id="5769675">{</span><span class="op" id="5769676">}</span><br>
<span class="lineno"></span><span class="op" id="5769678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5769681">func</span>&nbsp;<span class="op" id="5769686">(</span><span class="ident" id="5769687">e</span>&nbsp;<span class="op" id="5769689">*</span><span class="ident" id="5769690">FormatError</span><span class="op" id="5769701">)</span>&nbsp;<span class="ident" id="5769703">Error</span><span class="op" id="5769708">(</span><span class="op" id="5769709">)</span>&nbsp;<span class="builtintype" id="5769711">string</span>&nbsp;<span class="op" id="5769718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769721">msg</span>&nbsp;<span class="op" id="5769725">:=</span>&nbsp;<span class="ident" id="5769728">e</span><span class="op" id="5769729">.</span><span class="ident" id="5769730">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769735">if</span>&nbsp;<span class="ident" id="5769738">e</span><span class="op" id="5769739">.</span><span class="ident" id="5769740">val</span>&nbsp;<span class="op" id="5769744">!=</span>&nbsp;<span class="ident" id="5769747">nil</span>&nbsp;<span class="op" id="5769751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769755">msg</span>&nbsp;<span class="op" id="5769759">+=</span>&nbsp;<span class="ident" id="5769762">fmt</span><span class="op" id="5769765">.</span><span class="ident" id="5769766">Sprintf</span><span class="op" id="5769773">(</span><span class="string" id="5769774">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="5769781">,</span>&nbsp;<span class="ident" id="5769783">e</span><span class="op" id="5769784">.</span><span class="ident" id="5769785">val</span><span class="op" id="5769788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5769791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769794">msg</span>&nbsp;<span class="op" id="5769798">+=</span>&nbsp;<span class="ident" id="5769801">fmt</span><span class="op" id="5769804">.</span><span class="ident" id="5769805">Sprintf</span><span class="op" id="5769812">(</span><span class="string" id="5769813">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="5769837">,</span>&nbsp;<span class="ident" id="5769839">e</span><span class="op" id="5769840">.</span><span class="ident" id="5769841">off</span><span class="op" id="5769844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769847">return</span>&nbsp;<span class="ident" id="5769854">msg</span><br>
<span class="lineno">165</span><span class="op" id="5769858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5769861">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="5769948">func</span>&nbsp;<span class="ident" id="5769953">Open</span><span class="op" id="5769957">(</span><span class="ident" id="5769958">name</span>&nbsp;<span class="builtintype" id="5769963">string</span><span class="op" id="5769969">)</span>&nbsp;<span class="op" id="5769971">(</span><span class="op" id="5769972">*</span><span class="ident" id="5769973">File</span><span class="op" id="5769977">,</span>&nbsp;<span class="builtintype" id="5769979">error</span><span class="op" id="5769984">)</span>&nbsp;<span class="op" id="5769986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769989">f</span><span class="op" id="5769990">,</span>&nbsp;<span class="ident" id="5769992">err</span>&nbsp;<span class="op" id="5769996">:=</span>&nbsp;<span class="ident" id="5769999">os</span><span class="op" id="5770001">.</span><span class="ident" id="5770002">Open</span><span class="op" id="5770006">(</span><span class="ident" id="5770007">name</span><span class="op" id="5770011">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770014">if</span>&nbsp;<span class="ident" id="5770017">err</span>&nbsp;<span class="op" id="5770021">!=</span>&nbsp;<span class="ident" id="5770024">nil</span>&nbsp;<span class="op" id="5770028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770032">return</span>&nbsp;<span class="ident" id="5770039">nil</span><span class="op" id="5770042">,</span>&nbsp;<span class="ident" id="5770044">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770052">ff</span><span class="op" id="5770054">,</span>&nbsp;<span class="ident" id="5770056">err</span>&nbsp;<span class="op" id="5770060">:=</span>&nbsp;<span class="ident" id="5770063">NewFile</span><span class="op" id="5770070">(</span><span class="ident" id="5770071">f</span><span class="op" id="5770072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770075">if</span>&nbsp;<span class="ident" id="5770078">err</span>&nbsp;<span class="op" id="5770082">!=</span>&nbsp;<span class="ident" id="5770085">nil</span>&nbsp;<span class="op" id="5770089">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770093">f</span><span class="op" id="5770094">.</span><span class="ident" id="5770095">Close</span><span class="op" id="5770100">(</span><span class="op" id="5770101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770105">return</span>&nbsp;<span class="ident" id="5770112">nil</span><span class="op" id="5770115">,</span>&nbsp;<span class="ident" id="5770117">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770125">ff</span><span class="op" id="5770127">.</span><span class="ident" id="5770128">closer</span>&nbsp;<span class="op" id="5770135">=</span>&nbsp;<span class="ident" id="5770137">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770140">return</span>&nbsp;<span class="ident" id="5770147">ff</span><span class="op" id="5770149">,</span>&nbsp;<span class="ident" id="5770151">nil</span><br>
<span class="lineno">180</span><span class="op" id="5770155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5770158">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="5770184">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="5770251">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="5770275">func</span>&nbsp;<span class="op" id="5770280">(</span><span class="ident" id="5770281">f</span>&nbsp;<span class="op" id="5770283">*</span><span class="ident" id="5770284">File</span><span class="op" id="5770288">)</span>&nbsp;<span class="ident" id="5770290">Close</span><span class="op" id="5770295">(</span><span class="op" id="5770296">)</span>&nbsp;<span class="builtintype" id="5770298">error</span>&nbsp;<span class="op" id="5770304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770307">var</span>&nbsp;<span class="ident" id="5770311">err</span>&nbsp;<span class="builtintype" id="5770315">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770322">if</span>&nbsp;<span class="ident" id="5770325">f</span><span class="op" id="5770326">.</span><span class="ident" id="5770327">closer</span>&nbsp;<span class="op" id="5770334">!=</span>&nbsp;<span class="ident" id="5770337">nil</span>&nbsp;<span class="op" id="5770341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770345">err</span>&nbsp;<span class="op" id="5770349">=</span>&nbsp;<span class="ident" id="5770351">f</span><span class="op" id="5770352">.</span><span class="ident" id="5770353">closer</span><span class="op" id="5770359">.</span><span class="ident" id="5770360">Close</span><span class="op" id="5770365">(</span><span class="op" id="5770366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770370">f</span><span class="op" id="5770371">.</span><span class="ident" id="5770372">closer</span>&nbsp;<span class="op" id="5770379">=</span>&nbsp;<span class="ident" id="5770381">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770389">return</span>&nbsp;<span class="ident" id="5770396">err</span><br>
<span class="lineno"></span><span class="op" id="5770400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5770403">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="5770488">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="5770561">func</span>&nbsp;<span class="ident" id="5770566">NewFile</span><span class="op" id="5770573">(</span><span class="ident" id="5770574">r</span>&nbsp;<span class="ident" id="5770576">io</span><span class="op" id="5770578">.</span><span class="ident" id="5770579">ReaderAt</span><span class="op" id="5770587">)</span>&nbsp;<span class="op" id="5770589">(</span><span class="op" id="5770590">*</span><span class="ident" id="5770591">File</span><span class="op" id="5770595">,</span>&nbsp;<span class="builtintype" id="5770597">error</span><span class="op" id="5770602">)</span>&nbsp;<span class="op" id="5770604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770607">f</span>&nbsp;<span class="op" id="5770609">:=</span>&nbsp;<span class="builtinfunc" id="5770612">new</span><span class="op" id="5770615">(</span><span class="ident" id="5770616">File</span><span class="op" id="5770620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770623">sr</span>&nbsp;<span class="op" id="5770626">:=</span>&nbsp;<span class="ident" id="5770629">io</span><span class="op" id="5770631">.</span><span class="ident" id="5770632">NewSectionReader</span><span class="op" id="5770648">(</span><span class="ident" id="5770649">r</span><span class="op" id="5770650">,</span>&nbsp;<span class="num" id="5770652">0</span><span class="op" id="5770653">,</span>&nbsp;<span class="num" id="5770655">1</span><span class="op" id="5770656">&lt;&lt;</span><span class="num" id="5770658">63</span><span class="op" id="5770660">-</span><span class="num" id="5770661">1</span><span class="op" id="5770662">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5770666">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5770728">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770783">var</span>&nbsp;<span class="ident" id="5770787">ident</span>&nbsp;<span class="op" id="5770793">[</span><span class="num" id="5770794">4</span><span class="op" id="5770795">]</span><span class="builtintype" id="5770796">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770802">if</span>&nbsp;<span class="ident" id="5770805">_</span><span class="op" id="5770806">,</span>&nbsp;<span class="ident" id="5770808">err</span>&nbsp;<span class="op" id="5770812">:=</span>&nbsp;<span class="ident" id="5770815">r</span><span class="op" id="5770816">.</span><span class="ident" id="5770817">ReadAt</span><span class="op" id="5770823">(</span><span class="ident" id="5770824">ident</span><span class="op" id="5770829">[</span><span class="num" id="5770830">0</span><span class="op" id="5770831">:</span><span class="op" id="5770832">]</span><span class="op" id="5770833">,</span>&nbsp;<span class="num" id="5770835">0</span><span class="op" id="5770836">)</span><span class="op" id="5770837">;</span>&nbsp;<span class="ident" id="5770839">err</span>&nbsp;<span class="op" id="5770843">!=</span>&nbsp;<span class="ident" id="5770846">nil</span>&nbsp;<span class="op" id="5770850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770854">return</span>&nbsp;<span class="ident" id="5770861">nil</span><span class="op" id="5770864">,</span>&nbsp;<span class="ident" id="5770866">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770874">be</span>&nbsp;<span class="op" id="5770877">:=</span>&nbsp;<span class="ident" id="5770880">binary</span><span class="op" id="5770886">.</span><span class="ident" id="5770887">BigEndian</span><span class="op" id="5770896">.</span><span class="ident" id="5770897">Uint32</span><span class="op" id="5770903">(</span><span class="ident" id="5770904">ident</span><span class="op" id="5770909">[</span><span class="num" id="5770910">0</span><span class="op" id="5770911">:</span><span class="op" id="5770912">]</span><span class="op" id="5770913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770916">le</span>&nbsp;<span class="op" id="5770919">:=</span>&nbsp;<span class="ident" id="5770922">binary</span><span class="op" id="5770928">.</span><span class="ident" id="5770929">LittleEndian</span><span class="op" id="5770941">.</span><span class="ident" id="5770942">Uint32</span><span class="op" id="5770948">(</span><span class="ident" id="5770949">ident</span><span class="op" id="5770954">[</span><span class="num" id="5770955">0</span><span class="op" id="5770956">:</span><span class="op" id="5770957">]</span><span class="op" id="5770958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770961">switch</span>&nbsp;<span class="ident" id="5770968">Magic32</span>&nbsp;<span class="op" id="5770976">&amp;^</span>&nbsp;<span class="num" id="5770979">1</span>&nbsp;<span class="op" id="5770981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770984">case</span>&nbsp;<span class="ident" id="5770989">be</span>&nbsp;<span class="op" id="5770992">&amp;^</span>&nbsp;<span class="num" id="5770995">1</span><span class="op" id="5770996">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771000">f</span><span class="op" id="5771001">.</span><span class="ident" id="5771002">ByteOrder</span>&nbsp;<span class="op" id="5771012">=</span>&nbsp;<span class="ident" id="5771014">binary</span><span class="op" id="5771020">.</span><span class="ident" id="5771021">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771033">f</span><span class="op" id="5771034">.</span><span class="ident" id="5771035">Magic</span>&nbsp;<span class="op" id="5771041">=</span>&nbsp;<span class="ident" id="5771043">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771047">case</span>&nbsp;<span class="ident" id="5771052">le</span>&nbsp;<span class="op" id="5771055">&amp;^</span>&nbsp;<span class="num" id="5771058">1</span><span class="op" id="5771059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771063">f</span><span class="op" id="5771064">.</span><span class="ident" id="5771065">ByteOrder</span>&nbsp;<span class="op" id="5771075">=</span>&nbsp;<span class="ident" id="5771077">binary</span><span class="op" id="5771083">.</span><span class="ident" id="5771084">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771099">f</span><span class="op" id="5771100">.</span><span class="ident" id="5771101">Magic</span>&nbsp;<span class="op" id="5771107">=</span>&nbsp;<span class="ident" id="5771109">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771113">default</span><span class="op" id="5771120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771124">return</span>&nbsp;<span class="ident" id="5771131">nil</span><span class="op" id="5771134">,</span>&nbsp;<span class="op" id="5771136">&amp;</span><span class="ident" id="5771137">FormatError</span><span class="op" id="5771148">{</span><span class="num" id="5771149">0</span><span class="op" id="5771150">,</span>&nbsp;<span class="string" id="5771152">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5771174">,</span>&nbsp;<span class="ident" id="5771176">nil</span><span class="op" id="5771179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5771186">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771215">if</span>&nbsp;<span class="ident" id="5771218">err</span>&nbsp;<span class="op" id="5771222">:=</span>&nbsp;<span class="ident" id="5771225">binary</span><span class="op" id="5771231">.</span><span class="ident" id="5771232">Read</span><span class="op" id="5771236">(</span><span class="ident" id="5771237">sr</span><span class="op" id="5771239">,</span>&nbsp;<span class="ident" id="5771241">f</span><span class="op" id="5771242">.</span><span class="ident" id="5771243">ByteOrder</span><span class="op" id="5771252">,</span>&nbsp;<span class="op" id="5771254">&amp;</span><span class="ident" id="5771255">f</span><span class="op" id="5771256">.</span><span class="ident" id="5771257">FileHeader</span><span class="op" id="5771267">)</span><span class="op" id="5771268">;</span>&nbsp;<span class="ident" id="5771270">err</span>&nbsp;<span class="op" id="5771274">!=</span>&nbsp;<span class="ident" id="5771277">nil</span>&nbsp;<span class="op" id="5771281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771285">return</span>&nbsp;<span class="ident" id="5771292">nil</span><span class="op" id="5771295">,</span>&nbsp;<span class="ident" id="5771297">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5771306">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771330">offset</span>&nbsp;<span class="op" id="5771337">:=</span>&nbsp;<span class="ident" id="5771340">int64</span><span class="op" id="5771345">(</span><span class="ident" id="5771346">fileHeaderSize32</span><span class="op" id="5771362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771365">if</span>&nbsp;<span class="ident" id="5771368">f</span><span class="op" id="5771369">.</span><span class="ident" id="5771370">Magic</span>&nbsp;<span class="op" id="5771376">==</span>&nbsp;<span class="ident" id="5771379">Magic64</span>&nbsp;<span class="op" id="5771387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771391">offset</span>&nbsp;<span class="op" id="5771398">=</span>&nbsp;<span class="ident" id="5771400">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771421">dat</span>&nbsp;<span class="op" id="5771425">:=</span>&nbsp;<span class="builtinfunc" id="5771428">make</span><span class="op" id="5771432">(</span><span class="op" id="5771433">[</span><span class="op" id="5771434">]</span><span class="builtintype" id="5771435">byte</span><span class="op" id="5771439">,</span>&nbsp;<span class="ident" id="5771441">f</span><span class="op" id="5771442">.</span><span class="ident" id="5771443">Cmdsz</span><span class="op" id="5771448">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771451">if</span>&nbsp;<span class="ident" id="5771454">_</span><span class="op" id="5771455">,</span>&nbsp;<span class="ident" id="5771457">err</span>&nbsp;<span class="op" id="5771461">:=</span>&nbsp;<span class="ident" id="5771464">r</span><span class="op" id="5771465">.</span><span class="ident" id="5771466">ReadAt</span><span class="op" id="5771472">(</span><span class="ident" id="5771473">dat</span><span class="op" id="5771476">,</span>&nbsp;<span class="ident" id="5771478">offset</span><span class="op" id="5771484">)</span><span class="op" id="5771485">;</span>&nbsp;<span class="ident" id="5771487">err</span>&nbsp;<span class="op" id="5771491">!=</span>&nbsp;<span class="ident" id="5771494">nil</span>&nbsp;<span class="op" id="5771498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771502">return</span>&nbsp;<span class="ident" id="5771509">nil</span><span class="op" id="5771512">,</span>&nbsp;<span class="ident" id="5771514">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771522">f</span><span class="op" id="5771523">.</span><span class="ident" id="5771524">Loads</span>&nbsp;<span class="op" id="5771530">=</span>&nbsp;<span class="builtinfunc" id="5771532">make</span><span class="op" id="5771536">(</span><span class="op" id="5771537">[</span><span class="op" id="5771538">]</span><span class="ident" id="5771539">Load</span><span class="op" id="5771543">,</span>&nbsp;<span class="ident" id="5771545">f</span><span class="op" id="5771546">.</span><span class="ident" id="5771547">Ncmd</span><span class="op" id="5771551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771554">bo</span>&nbsp;<span class="op" id="5771557">:=</span>&nbsp;<span class="ident" id="5771560">f</span><span class="op" id="5771561">.</span><span class="ident" id="5771562">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771573">for</span>&nbsp;<span class="ident" id="5771577">i</span>&nbsp;<span class="op" id="5771579">:=</span>&nbsp;<span class="keyword" id="5771582">range</span>&nbsp;<span class="ident" id="5771588">f</span><span class="op" id="5771589">.</span><span class="ident" id="5771590">Loads</span>&nbsp;<span class="op" id="5771596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5771600">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771662">if</span>&nbsp;<span class="builtinfunc" id="5771665">len</span><span class="op" id="5771668">(</span><span class="ident" id="5771669">dat</span><span class="op" id="5771672">)</span>&nbsp;<span class="op" id="5771674">&lt;</span>&nbsp;<span class="num" id="5771676">8</span>&nbsp;<span class="op" id="5771678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771683">return</span>&nbsp;<span class="ident" id="5771690">nil</span><span class="op" id="5771693">,</span>&nbsp;<span class="op" id="5771695">&amp;</span><span class="ident" id="5771696">FormatError</span><span class="op" id="5771707">{</span><span class="ident" id="5771708">offset</span><span class="op" id="5771714">,</span>&nbsp;<span class="string" id="5771716">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="5771741">,</span>&nbsp;<span class="ident" id="5771743">nil</span><span class="op" id="5771746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771750">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771754">cmd</span><span class="op" id="5771757">,</span>&nbsp;<span class="ident" id="5771759">siz</span>&nbsp;<span class="op" id="5771763">:=</span>&nbsp;<span class="ident" id="5771766">LoadCmd</span><span class="op" id="5771773">(</span><span class="ident" id="5771774">bo</span><span class="op" id="5771776">.</span><span class="ident" id="5771777">Uint32</span><span class="op" id="5771783">(</span><span class="ident" id="5771784">dat</span><span class="op" id="5771787">[</span><span class="num" id="5771788">0</span><span class="op" id="5771789">:</span><span class="num" id="5771790">4</span><span class="op" id="5771791">]</span><span class="op" id="5771792">)</span><span class="op" id="5771793">)</span><span class="op" id="5771794">,</span>&nbsp;<span class="ident" id="5771796">bo</span><span class="op" id="5771798">.</span><span class="ident" id="5771799">Uint32</span><span class="op" id="5771805">(</span><span class="ident" id="5771806">dat</span><span class="op" id="5771809">[</span><span class="num" id="5771810">4</span><span class="op" id="5771811">:</span><span class="num" id="5771812">8</span><span class="op" id="5771813">]</span><span class="op" id="5771814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771818">if</span>&nbsp;<span class="ident" id="5771821">siz</span>&nbsp;<span class="op" id="5771825">&lt;</span>&nbsp;<span class="num" id="5771827">8</span>&nbsp;<span class="op" id="5771829">||</span>&nbsp;<span class="ident" id="5771832">siz</span>&nbsp;<span class="op" id="5771836">&gt;</span>&nbsp;<span class="builtintype" id="5771838">uint32</span><span class="op" id="5771844">(</span><span class="builtinfunc" id="5771845">len</span><span class="op" id="5771848">(</span><span class="ident" id="5771849">dat</span><span class="op" id="5771852">)</span><span class="op" id="5771853">)</span>&nbsp;<span class="op" id="5771855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771860">return</span>&nbsp;<span class="ident" id="5771867">nil</span><span class="op" id="5771870">,</span>&nbsp;<span class="op" id="5771872">&amp;</span><span class="ident" id="5771873">FormatError</span><span class="op" id="5771884">{</span><span class="ident" id="5771885">offset</span><span class="op" id="5771891">,</span>&nbsp;<span class="string" id="5771893">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="5771921">,</span>&nbsp;<span class="ident" id="5771923">nil</span><span class="op" id="5771926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771934">var</span>&nbsp;<span class="ident" id="5771938">cmddat</span>&nbsp;<span class="op" id="5771945">[</span><span class="op" id="5771946">]</span><span class="builtintype" id="5771947">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771954">cmddat</span><span class="op" id="5771960">,</span>&nbsp;<span class="ident" id="5771962">dat</span>&nbsp;<span class="op" id="5771966">=</span>&nbsp;<span class="ident" id="5771968">dat</span><span class="op" id="5771971">[</span><span class="num" id="5771972">0</span><span class="op" id="5771973">:</span><span class="ident" id="5771974">siz</span><span class="op" id="5771977">]</span><span class="op" id="5771978">,</span>&nbsp;<span class="ident" id="5771980">dat</span><span class="op" id="5771983">[</span><span class="ident" id="5771984">siz</span><span class="op" id="5771987">:</span><span class="op" id="5771988">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771992">offset</span>&nbsp;<span class="op" id="5771999">+=</span>&nbsp;<span class="ident" id="5772002">int64</span><span class="op" id="5772007">(</span><span class="ident" id="5772008">siz</span><span class="op" id="5772011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772015">var</span>&nbsp;<span class="ident" id="5772019">s</span>&nbsp;<span class="op" id="5772021">*</span><span class="ident" id="5772022">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772032">switch</span>&nbsp;<span class="ident" id="5772039">cmd</span>&nbsp;<span class="op" id="5772043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772047">default</span><span class="op" id="5772054">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772059">f</span><span class="op" id="5772060">.</span><span class="ident" id="5772061">Loads</span><span class="op" id="5772066">[</span><span class="ident" id="5772067">i</span><span class="op" id="5772068">]</span>&nbsp;<span class="op" id="5772070">=</span>&nbsp;<span class="ident" id="5772072">LoadBytes</span><span class="op" id="5772081">(</span><span class="ident" id="5772082">cmddat</span><span class="op" id="5772088">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772093">case</span>&nbsp;<span class="ident" id="5772098">LoadCmdDylib</span><span class="op" id="5772110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772115">var</span>&nbsp;<span class="ident" id="5772119">hdr</span>&nbsp;<span class="ident" id="5772123">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772135">b</span>&nbsp;<span class="op" id="5772137">:=</span>&nbsp;<span class="ident" id="5772140">bytes</span><span class="op" id="5772145">.</span><span class="ident" id="5772146">NewReader</span><span class="op" id="5772155">(</span><span class="ident" id="5772156">cmddat</span><span class="op" id="5772162">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772167">if</span>&nbsp;<span class="ident" id="5772170">err</span>&nbsp;<span class="op" id="5772174">:=</span>&nbsp;<span class="ident" id="5772177">binary</span><span class="op" id="5772183">.</span><span class="ident" id="5772184">Read</span><span class="op" id="5772188">(</span><span class="ident" id="5772189">b</span><span class="op" id="5772190">,</span>&nbsp;<span class="ident" id="5772192">bo</span><span class="op" id="5772194">,</span>&nbsp;<span class="op" id="5772196">&amp;</span><span class="ident" id="5772197">hdr</span><span class="op" id="5772200">)</span><span class="op" id="5772201">;</span>&nbsp;<span class="ident" id="5772203">err</span>&nbsp;<span class="op" id="5772207">!=</span>&nbsp;<span class="ident" id="5772210">nil</span>&nbsp;<span class="op" id="5772214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772220">return</span>&nbsp;<span class="ident" id="5772227">nil</span><span class="op" id="5772230">,</span>&nbsp;<span class="ident" id="5772232">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772244">l</span>&nbsp;<span class="op" id="5772246">:=</span>&nbsp;<span class="builtinfunc" id="5772249">new</span><span class="op" id="5772252">(</span><span class="ident" id="5772253">Dylib</span><span class="op" id="5772258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772263">if</span>&nbsp;<span class="ident" id="5772266">hdr</span><span class="op" id="5772269">.</span><span class="ident" id="5772270">Name</span>&nbsp;<span class="op" id="5772275">&gt;=</span>&nbsp;<span class="builtintype" id="5772278">uint32</span><span class="op" id="5772284">(</span><span class="builtinfunc" id="5772285">len</span><span class="op" id="5772288">(</span><span class="ident" id="5772289">cmddat</span><span class="op" id="5772295">)</span><span class="op" id="5772296">)</span>&nbsp;<span class="op" id="5772298">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772304">return</span>&nbsp;<span class="ident" id="5772311">nil</span><span class="op" id="5772314">,</span>&nbsp;<span class="op" id="5772316">&amp;</span><span class="ident" id="5772317">FormatError</span><span class="op" id="5772328">{</span><span class="ident" id="5772329">offset</span><span class="op" id="5772335">,</span>&nbsp;<span class="string" id="5772337">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="5772378">,</span>&nbsp;<span class="ident" id="5772380">hdr</span><span class="op" id="5772383">.</span><span class="ident" id="5772384">Name</span><span class="op" id="5772388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772398">l</span><span class="op" id="5772399">.</span><span class="ident" id="5772400">Name</span>&nbsp;<span class="op" id="5772405">=</span>&nbsp;<span class="ident" id="5772407">cstring</span><span class="op" id="5772414">(</span><span class="ident" id="5772415">cmddat</span><span class="op" id="5772421">[</span><span class="ident" id="5772422">hdr</span><span class="op" id="5772425">.</span><span class="ident" id="5772426">Name</span><span class="op" id="5772430">:</span><span class="op" id="5772431">]</span><span class="op" id="5772432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772437">l</span><span class="op" id="5772438">.</span><span class="ident" id="5772439">Time</span>&nbsp;<span class="op" id="5772444">=</span>&nbsp;<span class="ident" id="5772446">hdr</span><span class="op" id="5772449">.</span><span class="ident" id="5772450">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772458">l</span><span class="op" id="5772459">.</span><span class="ident" id="5772460">CurrentVersion</span>&nbsp;<span class="op" id="5772475">=</span>&nbsp;<span class="ident" id="5772477">hdr</span><span class="op" id="5772480">.</span><span class="ident" id="5772481">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772499">l</span><span class="op" id="5772500">.</span><span class="ident" id="5772501">CompatVersion</span>&nbsp;<span class="op" id="5772515">=</span>&nbsp;<span class="ident" id="5772517">hdr</span><span class="op" id="5772520">.</span><span class="ident" id="5772521">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772538">l</span><span class="op" id="5772539">.</span><span class="ident" id="5772540">LoadBytes</span>&nbsp;<span class="op" id="5772550">=</span>&nbsp;<span class="ident" id="5772552">LoadBytes</span><span class="op" id="5772561">(</span><span class="ident" id="5772562">cmddat</span><span class="op" id="5772568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772573">f</span><span class="op" id="5772574">.</span><span class="ident" id="5772575">Loads</span><span class="op" id="5772580">[</span><span class="ident" id="5772581">i</span><span class="op" id="5772582">]</span>&nbsp;<span class="op" id="5772584">=</span>&nbsp;<span class="ident" id="5772586">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772591">case</span>&nbsp;<span class="ident" id="5772596">LoadCmdSymtab</span><span class="op" id="5772609">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772614">var</span>&nbsp;<span class="ident" id="5772618">hdr</span>&nbsp;<span class="ident" id="5772622">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772635">b</span>&nbsp;<span class="op" id="5772637">:=</span>&nbsp;<span class="ident" id="5772640">bytes</span><span class="op" id="5772645">.</span><span class="ident" id="5772646">NewReader</span><span class="op" id="5772655">(</span><span class="ident" id="5772656">cmddat</span><span class="op" id="5772662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772667">if</span>&nbsp;<span class="ident" id="5772670">err</span>&nbsp;<span class="op" id="5772674">:=</span>&nbsp;<span class="ident" id="5772677">binary</span><span class="op" id="5772683">.</span><span class="ident" id="5772684">Read</span><span class="op" id="5772688">(</span><span class="ident" id="5772689">b</span><span class="op" id="5772690">,</span>&nbsp;<span class="ident" id="5772692">bo</span><span class="op" id="5772694">,</span>&nbsp;<span class="op" id="5772696">&amp;</span><span class="ident" id="5772697">hdr</span><span class="op" id="5772700">)</span><span class="op" id="5772701">;</span>&nbsp;<span class="ident" id="5772703">err</span>&nbsp;<span class="op" id="5772707">!=</span>&nbsp;<span class="ident" id="5772710">nil</span>&nbsp;<span class="op" id="5772714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772720">return</span>&nbsp;<span class="ident" id="5772727">nil</span><span class="op" id="5772730">,</span>&nbsp;<span class="ident" id="5772732">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772739">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772744">strtab</span>&nbsp;<span class="op" id="5772751">:=</span>&nbsp;<span class="builtinfunc" id="5772754">make</span><span class="op" id="5772758">(</span><span class="op" id="5772759">[</span><span class="op" id="5772760">]</span><span class="builtintype" id="5772761">byte</span><span class="op" id="5772765">,</span>&nbsp;<span class="ident" id="5772767">hdr</span><span class="op" id="5772770">.</span><span class="ident" id="5772771">Strsize</span><span class="op" id="5772778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772783">if</span>&nbsp;<span class="ident" id="5772786">_</span><span class="op" id="5772787">,</span>&nbsp;<span class="ident" id="5772789">err</span>&nbsp;<span class="op" id="5772793">:=</span>&nbsp;<span class="ident" id="5772796">r</span><span class="op" id="5772797">.</span><span class="ident" id="5772798">ReadAt</span><span class="op" id="5772804">(</span><span class="ident" id="5772805">strtab</span><span class="op" id="5772811">,</span>&nbsp;<span class="ident" id="5772813">int64</span><span class="op" id="5772818">(</span><span class="ident" id="5772819">hdr</span><span class="op" id="5772822">.</span><span class="ident" id="5772823">Stroff</span><span class="op" id="5772829">)</span><span class="op" id="5772830">)</span><span class="op" id="5772831">;</span>&nbsp;<span class="ident" id="5772833">err</span>&nbsp;<span class="op" id="5772837">!=</span>&nbsp;<span class="ident" id="5772840">nil</span>&nbsp;<span class="op" id="5772844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772850">return</span>&nbsp;<span class="ident" id="5772857">nil</span><span class="op" id="5772860">,</span>&nbsp;<span class="ident" id="5772862">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772874">var</span>&nbsp;<span class="ident" id="5772878">symsz</span>&nbsp;<span class="builtintype" id="5772884">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772891">if</span>&nbsp;<span class="ident" id="5772894">f</span><span class="op" id="5772895">.</span><span class="ident" id="5772896">Magic</span>&nbsp;<span class="op" id="5772902">==</span>&nbsp;<span class="ident" id="5772905">Magic64</span>&nbsp;<span class="op" id="5772913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772919">symsz</span>&nbsp;<span class="op" id="5772925">=</span>&nbsp;<span class="num" id="5772927">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772933">}</span>&nbsp;<span class="keyword" id="5772935">else</span>&nbsp;<span class="op" id="5772940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772946">symsz</span>&nbsp;<span class="op" id="5772952">=</span>&nbsp;<span class="num" id="5772954">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772960">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772965">symdat</span>&nbsp;<span class="op" id="5772972">:=</span>&nbsp;<span class="builtinfunc" id="5772975">make</span><span class="op" id="5772979">(</span><span class="op" id="5772980">[</span><span class="op" id="5772981">]</span><span class="builtintype" id="5772982">byte</span><span class="op" id="5772986">,</span>&nbsp;<span class="builtintype" id="5772988">int</span><span class="op" id="5772991">(</span><span class="ident" id="5772992">hdr</span><span class="op" id="5772995">.</span><span class="ident" id="5772996">Nsyms</span><span class="op" id="5773001">)</span><span class="op" id="5773002">*</span><span class="ident" id="5773003">symsz</span><span class="op" id="5773008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773013">if</span>&nbsp;<span class="ident" id="5773016">_</span><span class="op" id="5773017">,</span>&nbsp;<span class="ident" id="5773019">err</span>&nbsp;<span class="op" id="5773023">:=</span>&nbsp;<span class="ident" id="5773026">r</span><span class="op" id="5773027">.</span><span class="ident" id="5773028">ReadAt</span><span class="op" id="5773034">(</span><span class="ident" id="5773035">symdat</span><span class="op" id="5773041">,</span>&nbsp;<span class="ident" id="5773043">int64</span><span class="op" id="5773048">(</span><span class="ident" id="5773049">hdr</span><span class="op" id="5773052">.</span><span class="ident" id="5773053">Symoff</span><span class="op" id="5773059">)</span><span class="op" id="5773060">)</span><span class="op" id="5773061">;</span>&nbsp;<span class="ident" id="5773063">err</span>&nbsp;<span class="op" id="5773067">!=</span>&nbsp;<span class="ident" id="5773070">nil</span>&nbsp;<span class="op" id="5773074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773080">return</span>&nbsp;<span class="ident" id="5773087">nil</span><span class="op" id="5773090">,</span>&nbsp;<span class="ident" id="5773092">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773104">st</span><span class="op" id="5773106">,</span>&nbsp;<span class="ident" id="5773108">err</span>&nbsp;<span class="op" id="5773112">:=</span>&nbsp;<span class="ident" id="5773115">f</span><span class="op" id="5773116">.</span><span class="ident" id="5773117">parseSymtab</span><span class="op" id="5773128">(</span><span class="ident" id="5773129">symdat</span><span class="op" id="5773135">,</span>&nbsp;<span class="ident" id="5773137">strtab</span><span class="op" id="5773143">,</span>&nbsp;<span class="ident" id="5773145">cmddat</span><span class="op" id="5773151">,</span>&nbsp;<span class="op" id="5773153">&amp;</span><span class="ident" id="5773154">hdr</span><span class="op" id="5773157">,</span>&nbsp;<span class="ident" id="5773159">offset</span><span class="op" id="5773165">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773170">if</span>&nbsp;<span class="ident" id="5773173">err</span>&nbsp;<span class="op" id="5773177">!=</span>&nbsp;<span class="ident" id="5773180">nil</span>&nbsp;<span class="op" id="5773184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773190">return</span>&nbsp;<span class="ident" id="5773197">nil</span><span class="op" id="5773200">,</span>&nbsp;<span class="ident" id="5773202">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773214">f</span><span class="op" id="5773215">.</span><span class="ident" id="5773216">Loads</span><span class="op" id="5773221">[</span><span class="ident" id="5773222">i</span><span class="op" id="5773223">]</span>&nbsp;<span class="op" id="5773225">=</span>&nbsp;<span class="ident" id="5773227">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773233">f</span><span class="op" id="5773234">.</span><span class="ident" id="5773235">Symtab</span>&nbsp;<span class="op" id="5773242">=</span>&nbsp;<span class="ident" id="5773244">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773250">case</span>&nbsp;<span class="ident" id="5773255">LoadCmdDysymtab</span><span class="op" id="5773270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773275">var</span>&nbsp;<span class="ident" id="5773279">hdr</span>&nbsp;<span class="ident" id="5773283">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773298">b</span>&nbsp;<span class="op" id="5773300">:=</span>&nbsp;<span class="ident" id="5773303">bytes</span><span class="op" id="5773308">.</span><span class="ident" id="5773309">NewReader</span><span class="op" id="5773318">(</span><span class="ident" id="5773319">cmddat</span><span class="op" id="5773325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773330">if</span>&nbsp;<span class="ident" id="5773333">err</span>&nbsp;<span class="op" id="5773337">:=</span>&nbsp;<span class="ident" id="5773340">binary</span><span class="op" id="5773346">.</span><span class="ident" id="5773347">Read</span><span class="op" id="5773351">(</span><span class="ident" id="5773352">b</span><span class="op" id="5773353">,</span>&nbsp;<span class="ident" id="5773355">bo</span><span class="op" id="5773357">,</span>&nbsp;<span class="op" id="5773359">&amp;</span><span class="ident" id="5773360">hdr</span><span class="op" id="5773363">)</span><span class="op" id="5773364">;</span>&nbsp;<span class="ident" id="5773366">err</span>&nbsp;<span class="op" id="5773370">!=</span>&nbsp;<span class="ident" id="5773373">nil</span>&nbsp;<span class="op" id="5773377">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773383">return</span>&nbsp;<span class="ident" id="5773390">nil</span><span class="op" id="5773393">,</span>&nbsp;<span class="ident" id="5773395">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773407">dat</span>&nbsp;<span class="op" id="5773411">:=</span>&nbsp;<span class="builtinfunc" id="5773414">make</span><span class="op" id="5773418">(</span><span class="op" id="5773419">[</span><span class="op" id="5773420">]</span><span class="builtintype" id="5773421">byte</span><span class="op" id="5773425">,</span>&nbsp;<span class="ident" id="5773427">hdr</span><span class="op" id="5773430">.</span><span class="ident" id="5773431">Nindirectsyms</span><span class="op" id="5773444">*</span><span class="num" id="5773445">4</span><span class="op" id="5773446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773451">if</span>&nbsp;<span class="ident" id="5773454">_</span><span class="op" id="5773455">,</span>&nbsp;<span class="ident" id="5773457">err</span>&nbsp;<span class="op" id="5773461">:=</span>&nbsp;<span class="ident" id="5773464">r</span><span class="op" id="5773465">.</span><span class="ident" id="5773466">ReadAt</span><span class="op" id="5773472">(</span><span class="ident" id="5773473">dat</span><span class="op" id="5773476">,</span>&nbsp;<span class="ident" id="5773478">int64</span><span class="op" id="5773483">(</span><span class="ident" id="5773484">hdr</span><span class="op" id="5773487">.</span><span class="ident" id="5773488">Indirectsymoff</span><span class="op" id="5773502">)</span><span class="op" id="5773503">)</span><span class="op" id="5773504">;</span>&nbsp;<span class="ident" id="5773506">err</span>&nbsp;<span class="op" id="5773510">!=</span>&nbsp;<span class="ident" id="5773513">nil</span>&nbsp;<span class="op" id="5773517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773523">return</span>&nbsp;<span class="ident" id="5773530">nil</span><span class="op" id="5773533">,</span>&nbsp;<span class="ident" id="5773535">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773547">x</span>&nbsp;<span class="op" id="5773549">:=</span>&nbsp;<span class="builtinfunc" id="5773552">make</span><span class="op" id="5773556">(</span><span class="op" id="5773557">[</span><span class="op" id="5773558">]</span><span class="builtintype" id="5773559">uint32</span><span class="op" id="5773565">,</span>&nbsp;<span class="ident" id="5773567">hdr</span><span class="op" id="5773570">.</span><span class="ident" id="5773571">Nindirectsyms</span><span class="op" id="5773584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773589">if</span>&nbsp;<span class="ident" id="5773592">err</span>&nbsp;<span class="op" id="5773596">:=</span>&nbsp;<span class="ident" id="5773599">binary</span><span class="op" id="5773605">.</span><span class="ident" id="5773606">Read</span><span class="op" id="5773610">(</span><span class="ident" id="5773611">bytes</span><span class="op" id="5773616">.</span><span class="ident" id="5773617">NewReader</span><span class="op" id="5773626">(</span><span class="ident" id="5773627">dat</span><span class="op" id="5773630">)</span><span class="op" id="5773631">,</span>&nbsp;<span class="ident" id="5773633">bo</span><span class="op" id="5773635">,</span>&nbsp;<span class="ident" id="5773637">x</span><span class="op" id="5773638">)</span><span class="op" id="5773639">;</span>&nbsp;<span class="ident" id="5773641">err</span>&nbsp;<span class="op" id="5773645">!=</span>&nbsp;<span class="ident" id="5773648">nil</span>&nbsp;<span class="op" id="5773652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773658">return</span>&nbsp;<span class="ident" id="5773665">nil</span><span class="op" id="5773668">,</span>&nbsp;<span class="ident" id="5773670">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773677">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773682">st</span>&nbsp;<span class="op" id="5773685">:=</span>&nbsp;<span class="builtinfunc" id="5773688">new</span><span class="op" id="5773691">(</span><span class="ident" id="5773692">Dysymtab</span><span class="op" id="5773700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773705">st</span><span class="op" id="5773707">.</span><span class="ident" id="5773708">LoadBytes</span>&nbsp;<span class="op" id="5773718">=</span>&nbsp;<span class="ident" id="5773720">LoadBytes</span><span class="op" id="5773729">(</span><span class="ident" id="5773730">cmddat</span><span class="op" id="5773736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773741">st</span><span class="op" id="5773743">.</span><span class="ident" id="5773744">DysymtabCmd</span>&nbsp;<span class="op" id="5773756">=</span>&nbsp;<span class="ident" id="5773758">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773765">st</span><span class="op" id="5773767">.</span><span class="ident" id="5773768">IndirectSyms</span>&nbsp;<span class="op" id="5773781">=</span>&nbsp;<span class="ident" id="5773783">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773788">f</span><span class="op" id="5773789">.</span><span class="ident" id="5773790">Loads</span><span class="op" id="5773795">[</span><span class="ident" id="5773796">i</span><span class="op" id="5773797">]</span>&nbsp;<span class="op" id="5773799">=</span>&nbsp;<span class="ident" id="5773801">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773807">f</span><span class="op" id="5773808">.</span><span class="ident" id="5773809">Dysymtab</span>&nbsp;<span class="op" id="5773818">=</span>&nbsp;<span class="ident" id="5773820">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773826">case</span>&nbsp;<span class="ident" id="5773831">LoadCmdSegment</span><span class="op" id="5773845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773850">var</span>&nbsp;<span class="ident" id="5773854">seg32</span>&nbsp;<span class="ident" id="5773860">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773873">b</span>&nbsp;<span class="op" id="5773875">:=</span>&nbsp;<span class="ident" id="5773878">bytes</span><span class="op" id="5773883">.</span><span class="ident" id="5773884">NewReader</span><span class="op" id="5773893">(</span><span class="ident" id="5773894">cmddat</span><span class="op" id="5773900">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773905">if</span>&nbsp;<span class="ident" id="5773908">err</span>&nbsp;<span class="op" id="5773912">:=</span>&nbsp;<span class="ident" id="5773915">binary</span><span class="op" id="5773921">.</span><span class="ident" id="5773922">Read</span><span class="op" id="5773926">(</span><span class="ident" id="5773927">b</span><span class="op" id="5773928">,</span>&nbsp;<span class="ident" id="5773930">bo</span><span class="op" id="5773932">,</span>&nbsp;<span class="op" id="5773934">&amp;</span><span class="ident" id="5773935">seg32</span><span class="op" id="5773940">)</span><span class="op" id="5773941">;</span>&nbsp;<span class="ident" id="5773943">err</span>&nbsp;<span class="op" id="5773947">!=</span>&nbsp;<span class="ident" id="5773950">nil</span>&nbsp;<span class="op" id="5773954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773960">return</span>&nbsp;<span class="ident" id="5773967">nil</span><span class="op" id="5773970">,</span>&nbsp;<span class="ident" id="5773972">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773984">s</span>&nbsp;<span class="op" id="5773986">=</span>&nbsp;<span class="builtinfunc" id="5773988">new</span><span class="op" id="5773991">(</span><span class="ident" id="5773992">Segment</span><span class="op" id="5773999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774004">s</span><span class="op" id="5774005">.</span><span class="ident" id="5774006">LoadBytes</span>&nbsp;<span class="op" id="5774016">=</span>&nbsp;<span class="ident" id="5774018">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774028">s</span><span class="op" id="5774029">.</span><span class="ident" id="5774030">Cmd</span>&nbsp;<span class="op" id="5774034">=</span>&nbsp;<span class="ident" id="5774036">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774043">s</span><span class="op" id="5774044">.</span><span class="ident" id="5774045">Len</span>&nbsp;<span class="op" id="5774049">=</span>&nbsp;<span class="ident" id="5774051">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774058">s</span><span class="op" id="5774059">.</span><span class="ident" id="5774060">Name</span>&nbsp;<span class="op" id="5774065">=</span>&nbsp;<span class="ident" id="5774067">cstring</span><span class="op" id="5774074">(</span><span class="ident" id="5774075">seg32</span><span class="op" id="5774080">.</span><span class="ident" id="5774081">Name</span><span class="op" id="5774085">[</span><span class="num" id="5774086">0</span><span class="op" id="5774087">:</span><span class="op" id="5774088">]</span><span class="op" id="5774089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774094">s</span><span class="op" id="5774095">.</span><span class="ident" id="5774096">Addr</span>&nbsp;<span class="op" id="5774101">=</span>&nbsp;<span class="ident" id="5774103">uint64</span><span class="op" id="5774109">(</span><span class="ident" id="5774110">seg32</span><span class="op" id="5774115">.</span><span class="ident" id="5774116">Addr</span><span class="op" id="5774120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774125">s</span><span class="op" id="5774126">.</span><span class="ident" id="5774127">Memsz</span>&nbsp;<span class="op" id="5774133">=</span>&nbsp;<span class="ident" id="5774135">uint64</span><span class="op" id="5774141">(</span><span class="ident" id="5774142">seg32</span><span class="op" id="5774147">.</span><span class="ident" id="5774148">Memsz</span><span class="op" id="5774153">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774158">s</span><span class="op" id="5774159">.</span><span class="ident" id="5774160">Offset</span>&nbsp;<span class="op" id="5774167">=</span>&nbsp;<span class="ident" id="5774169">uint64</span><span class="op" id="5774175">(</span><span class="ident" id="5774176">seg32</span><span class="op" id="5774181">.</span><span class="ident" id="5774182">Offset</span><span class="op" id="5774188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774193">s</span><span class="op" id="5774194">.</span><span class="ident" id="5774195">Filesz</span>&nbsp;<span class="op" id="5774202">=</span>&nbsp;<span class="ident" id="5774204">uint64</span><span class="op" id="5774210">(</span><span class="ident" id="5774211">seg32</span><span class="op" id="5774216">.</span><span class="ident" id="5774217">Filesz</span><span class="op" id="5774223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774228">s</span><span class="op" id="5774229">.</span><span class="ident" id="5774230">Maxprot</span>&nbsp;<span class="op" id="5774238">=</span>&nbsp;<span class="ident" id="5774240">seg32</span><span class="op" id="5774245">.</span><span class="ident" id="5774246">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774257">s</span><span class="op" id="5774258">.</span><span class="ident" id="5774259">Prot</span>&nbsp;<span class="op" id="5774264">=</span>&nbsp;<span class="ident" id="5774266">seg32</span><span class="op" id="5774271">.</span><span class="ident" id="5774272">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774280">s</span><span class="op" id="5774281">.</span><span class="ident" id="5774282">Nsect</span>&nbsp;<span class="op" id="5774288">=</span>&nbsp;<span class="ident" id="5774290">seg32</span><span class="op" id="5774295">.</span><span class="ident" id="5774296">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774305">s</span><span class="op" id="5774306">.</span><span class="ident" id="5774307">Flag</span>&nbsp;<span class="op" id="5774312">=</span>&nbsp;<span class="ident" id="5774314">seg32</span><span class="op" id="5774319">.</span><span class="ident" id="5774320">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774328">f</span><span class="op" id="5774329">.</span><span class="ident" id="5774330">Loads</span><span class="op" id="5774335">[</span><span class="ident" id="5774336">i</span><span class="op" id="5774337">]</span>&nbsp;<span class="op" id="5774339">=</span>&nbsp;<span class="ident" id="5774341">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774346">for</span>&nbsp;<span class="ident" id="5774350">i</span>&nbsp;<span class="op" id="5774352">:=</span>&nbsp;<span class="num" id="5774355">0</span><span class="op" id="5774356">;</span>&nbsp;<span class="ident" id="5774358">i</span>&nbsp;<span class="op" id="5774360">&lt;</span>&nbsp;<span class="builtintype" id="5774362">int</span><span class="op" id="5774365">(</span><span class="ident" id="5774366">s</span><span class="op" id="5774367">.</span><span class="ident" id="5774368">Nsect</span><span class="op" id="5774373">)</span><span class="op" id="5774374">;</span>&nbsp;<span class="ident" id="5774376">i</span><span class="op" id="5774377">++</span>&nbsp;<span class="op" id="5774380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774386">var</span>&nbsp;<span class="ident" id="5774390">sh32</span>&nbsp;<span class="ident" id="5774395">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774409">if</span>&nbsp;<span class="ident" id="5774412">err</span>&nbsp;<span class="op" id="5774416">:=</span>&nbsp;<span class="ident" id="5774419">binary</span><span class="op" id="5774425">.</span><span class="ident" id="5774426">Read</span><span class="op" id="5774430">(</span><span class="ident" id="5774431">b</span><span class="op" id="5774432">,</span>&nbsp;<span class="ident" id="5774434">bo</span><span class="op" id="5774436">,</span>&nbsp;<span class="op" id="5774438">&amp;</span><span class="ident" id="5774439">sh32</span><span class="op" id="5774443">)</span><span class="op" id="5774444">;</span>&nbsp;<span class="ident" id="5774446">err</span>&nbsp;<span class="op" id="5774450">!=</span>&nbsp;<span class="ident" id="5774453">nil</span>&nbsp;<span class="op" id="5774457">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774464">return</span>&nbsp;<span class="ident" id="5774471">nil</span><span class="op" id="5774474">,</span>&nbsp;<span class="ident" id="5774476">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5774484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774490">sh</span>&nbsp;<span class="op" id="5774493">:=</span>&nbsp;<span class="builtinfunc" id="5774496">new</span><span class="op" id="5774499">(</span><span class="ident" id="5774500">Section</span><span class="op" id="5774507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774513">sh</span><span class="op" id="5774515">.</span><span class="ident" id="5774516">Name</span>&nbsp;<span class="op" id="5774521">=</span>&nbsp;<span class="ident" id="5774523">cstring</span><span class="op" id="5774530">(</span><span class="ident" id="5774531">sh32</span><span class="op" id="5774535">.</span><span class="ident" id="5774536">Name</span><span class="op" id="5774540">[</span><span class="num" id="5774541">0</span><span class="op" id="5774542">:</span><span class="op" id="5774543">]</span><span class="op" id="5774544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774550">sh</span><span class="op" id="5774552">.</span><span class="ident" id="5774553">Seg</span>&nbsp;<span class="op" id="5774557">=</span>&nbsp;<span class="ident" id="5774559">cstring</span><span class="op" id="5774566">(</span><span class="ident" id="5774567">sh32</span><span class="op" id="5774571">.</span><span class="ident" id="5774572">Seg</span><span class="op" id="5774575">[</span><span class="num" id="5774576">0</span><span class="op" id="5774577">:</span><span class="op" id="5774578">]</span><span class="op" id="5774579">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774585">sh</span><span class="op" id="5774587">.</span><span class="ident" id="5774588">Addr</span>&nbsp;<span class="op" id="5774593">=</span>&nbsp;<span class="ident" id="5774595">uint64</span><span class="op" id="5774601">(</span><span class="ident" id="5774602">sh32</span><span class="op" id="5774606">.</span><span class="ident" id="5774607">Addr</span><span class="op" id="5774611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774617">sh</span><span class="op" id="5774619">.</span><span class="ident" id="5774620">Size</span>&nbsp;<span class="op" id="5774625">=</span>&nbsp;<span class="ident" id="5774627">uint64</span><span class="op" id="5774633">(</span><span class="ident" id="5774634">sh32</span><span class="op" id="5774638">.</span><span class="ident" id="5774639">Size</span><span class="op" id="5774643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774649">sh</span><span class="op" id="5774651">.</span><span class="ident" id="5774652">Offset</span>&nbsp;<span class="op" id="5774659">=</span>&nbsp;<span class="ident" id="5774661">sh32</span><span class="op" id="5774665">.</span><span class="ident" id="5774666">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774677">sh</span><span class="op" id="5774679">.</span><span class="ident" id="5774680">Align</span>&nbsp;<span class="op" id="5774686">=</span>&nbsp;<span class="ident" id="5774688">sh32</span><span class="op" id="5774692">.</span><span class="ident" id="5774693">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774703">sh</span><span class="op" id="5774705">.</span><span class="ident" id="5774706">Reloff</span>&nbsp;<span class="op" id="5774713">=</span>&nbsp;<span class="ident" id="5774715">sh32</span><span class="op" id="5774719">.</span><span class="ident" id="5774720">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774731">sh</span><span class="op" id="5774733">.</span><span class="ident" id="5774734">Nreloc</span>&nbsp;<span class="op" id="5774741">=</span>&nbsp;<span class="ident" id="5774743">sh32</span><span class="op" id="5774747">.</span><span class="ident" id="5774748">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774759">sh</span><span class="op" id="5774761">.</span><span class="ident" id="5774762">Flags</span>&nbsp;<span class="op" id="5774768">=</span>&nbsp;<span class="ident" id="5774770">sh32</span><span class="op" id="5774774">.</span><span class="ident" id="5774775">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774785">f</span><span class="op" id="5774786">.</span><span class="ident" id="5774787">pushSection</span><span class="op" id="5774798">(</span><span class="ident" id="5774799">sh</span><span class="op" id="5774801">,</span>&nbsp;<span class="ident" id="5774803">r</span><span class="op" id="5774804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5774809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774814">case</span>&nbsp;<span class="ident" id="5774819">LoadCmdSegment64</span><span class="op" id="5774835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774840">var</span>&nbsp;<span class="ident" id="5774844">seg64</span>&nbsp;<span class="ident" id="5774850">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774863">b</span>&nbsp;<span class="op" id="5774865">:=</span>&nbsp;<span class="ident" id="5774868">bytes</span><span class="op" id="5774873">.</span><span class="ident" id="5774874">NewReader</span><span class="op" id="5774883">(</span><span class="ident" id="5774884">cmddat</span><span class="op" id="5774890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774895">if</span>&nbsp;<span class="ident" id="5774898">err</span>&nbsp;<span class="op" id="5774902">:=</span>&nbsp;<span class="ident" id="5774905">binary</span><span class="op" id="5774911">.</span><span class="ident" id="5774912">Read</span><span class="op" id="5774916">(</span><span class="ident" id="5774917">b</span><span class="op" id="5774918">,</span>&nbsp;<span class="ident" id="5774920">bo</span><span class="op" id="5774922">,</span>&nbsp;<span class="op" id="5774924">&amp;</span><span class="ident" id="5774925">seg64</span><span class="op" id="5774930">)</span><span class="op" id="5774931">;</span>&nbsp;<span class="ident" id="5774933">err</span>&nbsp;<span class="op" id="5774937">!=</span>&nbsp;<span class="ident" id="5774940">nil</span>&nbsp;<span class="op" id="5774944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774950">return</span>&nbsp;<span class="ident" id="5774957">nil</span><span class="op" id="5774960">,</span>&nbsp;<span class="ident" id="5774962">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5774969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774974">s</span>&nbsp;<span class="op" id="5774976">=</span>&nbsp;<span class="builtinfunc" id="5774978">new</span><span class="op" id="5774981">(</span><span class="ident" id="5774982">Segment</span><span class="op" id="5774989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774994">s</span><span class="op" id="5774995">.</span><span class="ident" id="5774996">LoadBytes</span>&nbsp;<span class="op" id="5775006">=</span>&nbsp;<span class="ident" id="5775008">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775018">s</span><span class="op" id="5775019">.</span><span class="ident" id="5775020">Cmd</span>&nbsp;<span class="op" id="5775024">=</span>&nbsp;<span class="ident" id="5775026">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775033">s</span><span class="op" id="5775034">.</span><span class="ident" id="5775035">Len</span>&nbsp;<span class="op" id="5775039">=</span>&nbsp;<span class="ident" id="5775041">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775048">s</span><span class="op" id="5775049">.</span><span class="ident" id="5775050">Name</span>&nbsp;<span class="op" id="5775055">=</span>&nbsp;<span class="ident" id="5775057">cstring</span><span class="op" id="5775064">(</span><span class="ident" id="5775065">seg64</span><span class="op" id="5775070">.</span><span class="ident" id="5775071">Name</span><span class="op" id="5775075">[</span><span class="num" id="5775076">0</span><span class="op" id="5775077">:</span><span class="op" id="5775078">]</span><span class="op" id="5775079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775084">s</span><span class="op" id="5775085">.</span><span class="ident" id="5775086">Addr</span>&nbsp;<span class="op" id="5775091">=</span>&nbsp;<span class="ident" id="5775093">seg64</span><span class="op" id="5775098">.</span><span class="ident" id="5775099">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775107">s</span><span class="op" id="5775108">.</span><span class="ident" id="5775109">Memsz</span>&nbsp;<span class="op" id="5775115">=</span>&nbsp;<span class="ident" id="5775117">seg64</span><span class="op" id="5775122">.</span><span class="ident" id="5775123">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775132">s</span><span class="op" id="5775133">.</span><span class="ident" id="5775134">Offset</span>&nbsp;<span class="op" id="5775141">=</span>&nbsp;<span class="ident" id="5775143">seg64</span><span class="op" id="5775148">.</span><span class="ident" id="5775149">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775159">s</span><span class="op" id="5775160">.</span><span class="ident" id="5775161">Filesz</span>&nbsp;<span class="op" id="5775168">=</span>&nbsp;<span class="ident" id="5775170">seg64</span><span class="op" id="5775175">.</span><span class="ident" id="5775176">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775186">s</span><span class="op" id="5775187">.</span><span class="ident" id="5775188">Maxprot</span>&nbsp;<span class="op" id="5775196">=</span>&nbsp;<span class="ident" id="5775198">seg64</span><span class="op" id="5775203">.</span><span class="ident" id="5775204">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775215">s</span><span class="op" id="5775216">.</span><span class="ident" id="5775217">Prot</span>&nbsp;<span class="op" id="5775222">=</span>&nbsp;<span class="ident" id="5775224">seg64</span><span class="op" id="5775229">.</span><span class="ident" id="5775230">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775238">s</span><span class="op" id="5775239">.</span><span class="ident" id="5775240">Nsect</span>&nbsp;<span class="op" id="5775246">=</span>&nbsp;<span class="ident" id="5775248">seg64</span><span class="op" id="5775253">.</span><span class="ident" id="5775254">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775263">s</span><span class="op" id="5775264">.</span><span class="ident" id="5775265">Flag</span>&nbsp;<span class="op" id="5775270">=</span>&nbsp;<span class="ident" id="5775272">seg64</span><span class="op" id="5775277">.</span><span class="ident" id="5775278">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775286">f</span><span class="op" id="5775287">.</span><span class="ident" id="5775288">Loads</span><span class="op" id="5775293">[</span><span class="ident" id="5775294">i</span><span class="op" id="5775295">]</span>&nbsp;<span class="op" id="5775297">=</span>&nbsp;<span class="ident" id="5775299">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775304">for</span>&nbsp;<span class="ident" id="5775308">i</span>&nbsp;<span class="op" id="5775310">:=</span>&nbsp;<span class="num" id="5775313">0</span><span class="op" id="5775314">;</span>&nbsp;<span class="ident" id="5775316">i</span>&nbsp;<span class="op" id="5775318">&lt;</span>&nbsp;<span class="builtintype" id="5775320">int</span><span class="op" id="5775323">(</span><span class="ident" id="5775324">s</span><span class="op" id="5775325">.</span><span class="ident" id="5775326">Nsect</span><span class="op" id="5775331">)</span><span class="op" id="5775332">;</span>&nbsp;<span class="ident" id="5775334">i</span><span class="op" id="5775335">++</span>&nbsp;<span class="op" id="5775338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775344">var</span>&nbsp;<span class="ident" id="5775348">sh64</span>&nbsp;<span class="ident" id="5775353">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775367">if</span>&nbsp;<span class="ident" id="5775370">err</span>&nbsp;<span class="op" id="5775374">:=</span>&nbsp;<span class="ident" id="5775377">binary</span><span class="op" id="5775383">.</span><span class="ident" id="5775384">Read</span><span class="op" id="5775388">(</span><span class="ident" id="5775389">b</span><span class="op" id="5775390">,</span>&nbsp;<span class="ident" id="5775392">bo</span><span class="op" id="5775394">,</span>&nbsp;<span class="op" id="5775396">&amp;</span><span class="ident" id="5775397">sh64</span><span class="op" id="5775401">)</span><span class="op" id="5775402">;</span>&nbsp;<span class="ident" id="5775404">err</span>&nbsp;<span class="op" id="5775408">!=</span>&nbsp;<span class="ident" id="5775411">nil</span>&nbsp;<span class="op" id="5775415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775422">return</span>&nbsp;<span class="ident" id="5775429">nil</span><span class="op" id="5775432">,</span>&nbsp;<span class="ident" id="5775434">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775442">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775448">sh</span>&nbsp;<span class="op" id="5775451">:=</span>&nbsp;<span class="builtinfunc" id="5775454">new</span><span class="op" id="5775457">(</span><span class="ident" id="5775458">Section</span><span class="op" id="5775465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775471">sh</span><span class="op" id="5775473">.</span><span class="ident" id="5775474">Name</span>&nbsp;<span class="op" id="5775479">=</span>&nbsp;<span class="ident" id="5775481">cstring</span><span class="op" id="5775488">(</span><span class="ident" id="5775489">sh64</span><span class="op" id="5775493">.</span><span class="ident" id="5775494">Name</span><span class="op" id="5775498">[</span><span class="num" id="5775499">0</span><span class="op" id="5775500">:</span><span class="op" id="5775501">]</span><span class="op" id="5775502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775508">sh</span><span class="op" id="5775510">.</span><span class="ident" id="5775511">Seg</span>&nbsp;<span class="op" id="5775515">=</span>&nbsp;<span class="ident" id="5775517">cstring</span><span class="op" id="5775524">(</span><span class="ident" id="5775525">sh64</span><span class="op" id="5775529">.</span><span class="ident" id="5775530">Seg</span><span class="op" id="5775533">[</span><span class="num" id="5775534">0</span><span class="op" id="5775535">:</span><span class="op" id="5775536">]</span><span class="op" id="5775537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775543">sh</span><span class="op" id="5775545">.</span><span class="ident" id="5775546">Addr</span>&nbsp;<span class="op" id="5775551">=</span>&nbsp;<span class="ident" id="5775553">sh64</span><span class="op" id="5775557">.</span><span class="ident" id="5775558">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775567">sh</span><span class="op" id="5775569">.</span><span class="ident" id="5775570">Size</span>&nbsp;<span class="op" id="5775575">=</span>&nbsp;<span class="ident" id="5775577">sh64</span><span class="op" id="5775581">.</span><span class="ident" id="5775582">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775591">sh</span><span class="op" id="5775593">.</span><span class="ident" id="5775594">Offset</span>&nbsp;<span class="op" id="5775601">=</span>&nbsp;<span class="ident" id="5775603">sh64</span><span class="op" id="5775607">.</span><span class="ident" id="5775608">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775619">sh</span><span class="op" id="5775621">.</span><span class="ident" id="5775622">Align</span>&nbsp;<span class="op" id="5775628">=</span>&nbsp;<span class="ident" id="5775630">sh64</span><span class="op" id="5775634">.</span><span class="ident" id="5775635">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775645">sh</span><span class="op" id="5775647">.</span><span class="ident" id="5775648">Reloff</span>&nbsp;<span class="op" id="5775655">=</span>&nbsp;<span class="ident" id="5775657">sh64</span><span class="op" id="5775661">.</span><span class="ident" id="5775662">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775673">sh</span><span class="op" id="5775675">.</span><span class="ident" id="5775676">Nreloc</span>&nbsp;<span class="op" id="5775683">=</span>&nbsp;<span class="ident" id="5775685">sh64</span><span class="op" id="5775689">.</span><span class="ident" id="5775690">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775701">sh</span><span class="op" id="5775703">.</span><span class="ident" id="5775704">Flags</span>&nbsp;<span class="op" id="5775710">=</span>&nbsp;<span class="ident" id="5775712">sh64</span><span class="op" id="5775716">.</span><span class="ident" id="5775717">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775727">f</span><span class="op" id="5775728">.</span><span class="ident" id="5775729">pushSection</span><span class="op" id="5775740">(</span><span class="ident" id="5775741">sh</span><span class="op" id="5775743">,</span>&nbsp;<span class="ident" id="5775745">r</span><span class="op" id="5775746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775759">if</span>&nbsp;<span class="ident" id="5775762">s</span>&nbsp;<span class="op" id="5775764">!=</span>&nbsp;<span class="ident" id="5775767">nil</span>&nbsp;<span class="op" id="5775771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775776">s</span><span class="op" id="5775777">.</span><span class="ident" id="5775778">sr</span>&nbsp;<span class="op" id="5775781">=</span>&nbsp;<span class="ident" id="5775783">io</span><span class="op" id="5775785">.</span><span class="ident" id="5775786">NewSectionReader</span><span class="op" id="5775802">(</span><span class="ident" id="5775803">r</span><span class="op" id="5775804">,</span>&nbsp;<span class="ident" id="5775806">int64</span><span class="op" id="5775811">(</span><span class="ident" id="5775812">s</span><span class="op" id="5775813">.</span><span class="ident" id="5775814">Offset</span><span class="op" id="5775820">)</span><span class="op" id="5775821">,</span>&nbsp;<span class="ident" id="5775823">int64</span><span class="op" id="5775828">(</span><span class="ident" id="5775829">s</span><span class="op" id="5775830">.</span><span class="ident" id="5775831">Filesz</span><span class="op" id="5775837">)</span><span class="op" id="5775838">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775843">s</span><span class="op" id="5775844">.</span><span class="ident" id="5775845">ReaderAt</span>&nbsp;<span class="op" id="5775854">=</span>&nbsp;<span class="ident" id="5775856">s</span><span class="op" id="5775857">.</span><span class="ident" id="5775858">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775869">return</span>&nbsp;<span class="ident" id="5775876">f</span><span class="op" id="5775877">,</span>&nbsp;<span class="ident" id="5775879">nil</span><br>
<span class="lineno"></span><span class="op" id="5775883">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="5775886">func</span>&nbsp;<span class="op" id="5775891">(</span><span class="ident" id="5775892">f</span>&nbsp;<span class="op" id="5775894">*</span><span class="ident" id="5775895">File</span><span class="op" id="5775899">)</span>&nbsp;<span class="ident" id="5775901">parseSymtab</span><span class="op" id="5775912">(</span><span class="ident" id="5775913">symdat</span><span class="op" id="5775919">,</span>&nbsp;<span class="ident" id="5775921">strtab</span><span class="op" id="5775927">,</span>&nbsp;<span class="ident" id="5775929">cmddat</span>&nbsp;<span class="op" id="5775936">[</span><span class="op" id="5775937">]</span><span class="builtintype" id="5775938">byte</span><span class="op" id="5775942">,</span>&nbsp;<span class="ident" id="5775944">hdr</span>&nbsp;<span class="op" id="5775948">*</span><span class="ident" id="5775949">SymtabCmd</span><span class="op" id="5775958">,</span>&nbsp;<span class="ident" id="5775960">offset</span>&nbsp;<span class="ident" id="5775967">int64</span><span class="op" id="5775972">)</span>&nbsp;<span class="op" id="5775974">(</span><span class="op" id="5775975">*</span><span class="ident" id="5775976">Symtab</span><span class="op" id="5775982">,</span>&nbsp;<span class="builtintype" id="5775984">error</span><span class="op" id="5775989">)</span>&nbsp;<span class="op" id="5775991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775994">bo</span>&nbsp;<span class="op" id="5775997">:=</span>&nbsp;<span class="ident" id="5776000">f</span><span class="op" id="5776001">.</span><span class="ident" id="5776002">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776013">symtab</span>&nbsp;<span class="op" id="5776020">:=</span>&nbsp;<span class="builtinfunc" id="5776023">make</span><span class="op" id="5776027">(</span><span class="op" id="5776028">[</span><span class="op" id="5776029">]</span><span class="ident" id="5776030">Symbol</span><span class="op" id="5776036">,</span>&nbsp;<span class="ident" id="5776038">hdr</span><span class="op" id="5776041">.</span><span class="ident" id="5776042">Nsyms</span><span class="op" id="5776047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776050">b</span>&nbsp;<span class="op" id="5776052">:=</span>&nbsp;<span class="ident" id="5776055">bytes</span><span class="op" id="5776060">.</span><span class="ident" id="5776061">NewReader</span><span class="op" id="5776070">(</span><span class="ident" id="5776071">symdat</span><span class="op" id="5776077">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776080">for</span>&nbsp;<span class="ident" id="5776084">i</span>&nbsp;<span class="op" id="5776086">:=</span>&nbsp;<span class="keyword" id="5776089">range</span>&nbsp;<span class="ident" id="5776095">symtab</span>&nbsp;<span class="op" id="5776102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776106">var</span>&nbsp;<span class="ident" id="5776110">n</span>&nbsp;<span class="ident" id="5776112">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776122">if</span>&nbsp;<span class="ident" id="5776125">f</span><span class="op" id="5776126">.</span><span class="ident" id="5776127">Magic</span>&nbsp;<span class="op" id="5776133">==</span>&nbsp;<span class="ident" id="5776136">Magic64</span>&nbsp;<span class="op" id="5776144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776149">if</span>&nbsp;<span class="ident" id="5776152">err</span>&nbsp;<span class="op" id="5776156">:=</span>&nbsp;<span class="ident" id="5776159">binary</span><span class="op" id="5776165">.</span><span class="ident" id="5776166">Read</span><span class="op" id="5776170">(</span><span class="ident" id="5776171">b</span><span class="op" id="5776172">,</span>&nbsp;<span class="ident" id="5776174">bo</span><span class="op" id="5776176">,</span>&nbsp;<span class="op" id="5776178">&amp;</span><span class="ident" id="5776179">n</span><span class="op" id="5776180">)</span><span class="op" id="5776181">;</span>&nbsp;<span class="ident" id="5776183">err</span>&nbsp;<span class="op" id="5776187">!=</span>&nbsp;<span class="ident" id="5776190">nil</span>&nbsp;<span class="op" id="5776194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776200">return</span>&nbsp;<span class="ident" id="5776207">nil</span><span class="op" id="5776210">,</span>&nbsp;<span class="ident" id="5776212">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5776219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5776223">}</span>&nbsp;<span class="keyword" id="5776225">else</span>&nbsp;<span class="op" id="5776230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776235">var</span>&nbsp;<span class="ident" id="5776239">n32</span>&nbsp;<span class="ident" id="5776243">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776254">if</span>&nbsp;<span class="ident" id="5776257">err</span>&nbsp;<span class="op" id="5776261">:=</span>&nbsp;<span class="ident" id="5776264">binary</span><span class="op" id="5776270">.</span><span class="ident" id="5776271">Read</span><span class="op" id="5776275">(</span><span class="ident" id="5776276">b</span><span class="op" id="5776277">,</span>&nbsp;<span class="ident" id="5776279">bo</span><span class="op" id="5776281">,</span>&nbsp;<span class="op" id="5776283">&amp;</span><span class="ident" id="5776284">n32</span><span class="op" id="5776287">)</span><span class="op" id="5776288">;</span>&nbsp;<span class="ident" id="5776290">err</span>&nbsp;<span class="op" id="5776294">!=</span>&nbsp;<span class="ident" id="5776297">nil</span>&nbsp;<span class="op" id="5776301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776307">return</span>&nbsp;<span class="ident" id="5776314">nil</span><span class="op" id="5776317">,</span>&nbsp;<span class="ident" id="5776319">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5776326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776331">n</span><span class="op" id="5776332">.</span><span class="ident" id="5776333">Name</span>&nbsp;<span class="op" id="5776338">=</span>&nbsp;<span class="ident" id="5776340">n32</span><span class="op" id="5776343">.</span><span class="ident" id="5776344">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776352">n</span><span class="op" id="5776353">.</span><span class="ident" id="5776354">Type</span>&nbsp;<span class="op" id="5776359">=</span>&nbsp;<span class="ident" id="5776361">n32</span><span class="op" id="5776364">.</span><span class="ident" id="5776365">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776373">n</span><span class="op" id="5776374">.</span><span class="ident" id="5776375">Sect</span>&nbsp;<span class="op" id="5776380">=</span>&nbsp;<span class="ident" id="5776382">n32</span><span class="op" id="5776385">.</span><span class="ident" id="5776386">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776394">n</span><span class="op" id="5776395">.</span><span class="ident" id="5776396">Desc</span>&nbsp;<span class="op" id="5776401">=</span>&nbsp;<span class="ident" id="5776403">n32</span><span class="op" id="5776406">.</span><span class="ident" id="5776407">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776415">n</span><span class="op" id="5776416">.</span><span class="ident" id="5776417">Value</span>&nbsp;<span class="op" id="5776423">=</span>&nbsp;<span class="ident" id="5776425">uint64</span><span class="op" id="5776431">(</span><span class="ident" id="5776432">n32</span><span class="op" id="5776435">.</span><span class="ident" id="5776436">Value</span><span class="op" id="5776441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5776445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776449">sym</span>&nbsp;<span class="op" id="5776453">:=</span>&nbsp;<span class="op" id="5776456">&amp;</span><span class="ident" id="5776457">symtab</span><span class="op" id="5776463">[</span><span class="ident" id="5776464">i</span><span class="op" id="5776465">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776469">if</span>&nbsp;<span class="ident" id="5776472">n</span><span class="op" id="5776473">.</span><span class="ident" id="5776474">Name</span>&nbsp;<span class="op" id="5776479">&gt;=</span>&nbsp;<span class="builtintype" id="5776482">uint32</span><span class="op" id="5776488">(</span><span class="builtinfunc" id="5776489">len</span><span class="op" id="5776492">(</span><span class="ident" id="5776493">strtab</span><span class="op" id="5776499">)</span><span class="op" id="5776500">)</span>&nbsp;<span class="op" id="5776502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776507">return</span>&nbsp;<span class="ident" id="5776514">nil</span><span class="op" id="5776517">,</span>&nbsp;<span class="op" id="5776519">&amp;</span><span class="ident" id="5776520">FormatError</span><span class="op" id="5776531">{</span><span class="ident" id="5776532">offset</span><span class="op" id="5776538">,</span>&nbsp;<span class="string" id="5776540">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="5776570">,</span>&nbsp;<span class="ident" id="5776572">n</span><span class="op" id="5776573">.</span><span class="ident" id="5776574">Name</span><span class="op" id="5776578">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5776582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776586">sym</span><span class="op" id="5776589">.</span><span class="ident" id="5776590">Name</span>&nbsp;<span class="op" id="5776595">=</span>&nbsp;<span class="ident" id="5776597">cstring</span><span class="op" id="5776604">(</span><span class="ident" id="5776605">strtab</span><span class="op" id="5776611">[</span><span class="ident" id="5776612">n</span><span class="op" id="5776613">.</span><span class="ident" id="5776614">Name</span><span class="op" id="5776618">:</span><span class="op" id="5776619">]</span><span class="op" id="5776620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776624">sym</span><span class="op" id="5776627">.</span><span class="ident" id="5776628">Type</span>&nbsp;<span class="op" id="5776633">=</span>&nbsp;<span class="ident" id="5776635">n</span><span class="op" id="5776636">.</span><span class="ident" id="5776637">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776644">sym</span><span class="op" id="5776647">.</span><span class="ident" id="5776648">Sect</span>&nbsp;<span class="op" id="5776653">=</span>&nbsp;<span class="ident" id="5776655">n</span><span class="op" id="5776656">.</span><span class="ident" id="5776657">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776664">sym</span><span class="op" id="5776667">.</span><span class="ident" id="5776668">Desc</span>&nbsp;<span class="op" id="5776673">=</span>&nbsp;<span class="ident" id="5776675">n</span><span class="op" id="5776676">.</span><span class="ident" id="5776677">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776684">sym</span><span class="op" id="5776687">.</span><span class="ident" id="5776688">Value</span>&nbsp;<span class="op" id="5776694">=</span>&nbsp;<span class="ident" id="5776696">n</span><span class="op" id="5776697">.</span><span class="ident" id="5776698">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5776705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776708">st</span>&nbsp;<span class="op" id="5776711">:=</span>&nbsp;<span class="builtinfunc" id="5776714">new</span><span class="op" id="5776717">(</span><span class="ident" id="5776718">Symtab</span><span class="op" id="5776724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776727">st</span><span class="op" id="5776729">.</span><span class="ident" id="5776730">LoadBytes</span>&nbsp;<span class="op" id="5776740">=</span>&nbsp;<span class="ident" id="5776742">LoadBytes</span><span class="op" id="5776751">(</span><span class="ident" id="5776752">cmddat</span><span class="op" id="5776758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776761">st</span><span class="op" id="5776763">.</span><span class="ident" id="5776764">Syms</span>&nbsp;<span class="op" id="5776769">=</span>&nbsp;<span class="ident" id="5776771">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776779">return</span>&nbsp;<span class="ident" id="5776786">st</span><span class="op" id="5776788">,</span>&nbsp;<span class="ident" id="5776790">nil</span><br>
<span class="lineno"></span><span class="op" id="5776794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5776797">func</span>&nbsp;<span class="op" id="5776802">(</span><span class="ident" id="5776803">f</span>&nbsp;<span class="op" id="5776805">*</span><span class="ident" id="5776806">File</span><span class="op" id="5776810">)</span>&nbsp;<span class="ident" id="5776812">pushSection</span><span class="op" id="5776823">(</span><span class="ident" id="5776824">sh</span>&nbsp;<span class="op" id="5776827">*</span><span class="ident" id="5776828">Section</span><span class="op" id="5776835">,</span>&nbsp;<span class="ident" id="5776837">r</span>&nbsp;<span class="ident" id="5776839">io</span><span class="op" id="5776841">.</span><span class="ident" id="5776842">ReaderAt</span><span class="op" id="5776850">)</span>&nbsp;<span class="op" id="5776852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776855">f</span><span class="op" id="5776856">.</span><span class="ident" id="5776857">Sections</span>&nbsp;<span class="op" id="5776866">=</span>&nbsp;<span class="builtinfunc" id="5776868">append</span><span class="op" id="5776874">(</span><span class="ident" id="5776875">f</span><span class="op" id="5776876">.</span><span class="ident" id="5776877">Sections</span><span class="op" id="5776885">,</span>&nbsp;<span class="ident" id="5776887">sh</span><span class="op" id="5776889">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776892">sh</span><span class="op" id="5776894">.</span><span class="ident" id="5776895">sr</span>&nbsp;<span class="op" id="5776898">=</span>&nbsp;<span class="ident" id="5776900">io</span><span class="op" id="5776902">.</span><span class="ident" id="5776903">NewSectionReader</span><span class="op" id="5776919">(</span><span class="ident" id="5776920">r</span><span class="op" id="5776921">,</span>&nbsp;<span class="ident" id="5776923">int64</span><span class="op" id="5776928">(</span><span class="ident" id="5776929">sh</span><span class="op" id="5776931">.</span><span class="ident" id="5776932">Offset</span><span class="op" id="5776938">)</span><span class="op" id="5776939">,</span>&nbsp;<span class="ident" id="5776941">int64</span><span class="op" id="5776946">(</span><span class="ident" id="5776947">sh</span><span class="op" id="5776949">.</span><span class="ident" id="5776950">Size</span><span class="op" id="5776954">)</span><span class="op" id="5776955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776958">sh</span><span class="op" id="5776960">.</span><span class="ident" id="5776961">ReaderAt</span>&nbsp;<span class="op" id="5776970">=</span>&nbsp;<span class="ident" id="5776972">sh</span><span class="op" id="5776974">.</span><span class="ident" id="5776975">sr</span><br>
<span class="lineno"></span><span class="op" id="5776978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5776981">func</span>&nbsp;<span class="ident" id="5776986">cstring</span><span class="op" id="5776993">(</span><span class="ident" id="5776994">b</span>&nbsp;<span class="op" id="5776996">[</span><span class="op" id="5776997">]</span><span class="builtintype" id="5776998">byte</span><span class="op" id="5777002">)</span>&nbsp;<span class="builtintype" id="5777004">string</span>&nbsp;<span class="op" id="5777011">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777014">var</span>&nbsp;<span class="ident" id="5777018">i</span>&nbsp;<span class="builtintype" id="5777020">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777025">for</span>&nbsp;<span class="ident" id="5777029">i</span>&nbsp;<span class="op" id="5777031">=</span>&nbsp;<span class="num" id="5777033">0</span><span class="op" id="5777034">;</span>&nbsp;<span class="ident" id="5777036">i</span>&nbsp;<span class="op" id="5777038">&lt;</span>&nbsp;<span class="builtinfunc" id="5777040">len</span><span class="op" id="5777043">(</span><span class="ident" id="5777044">b</span><span class="op" id="5777045">)</span>&nbsp;<span class="op" id="5777047">&amp;&amp;</span>&nbsp;<span class="ident" id="5777050">b</span><span class="op" id="5777051">[</span><span class="ident" id="5777052">i</span><span class="op" id="5777053">]</span>&nbsp;<span class="op" id="5777055">!=</span>&nbsp;<span class="num" id="5777058">0</span><span class="op" id="5777059">;</span>&nbsp;<span class="ident" id="5777061">i</span><span class="op" id="5777062">++</span>&nbsp;<span class="op" id="5777065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5777068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777071">return</span>&nbsp;<span class="builtintype" id="5777078">string</span><span class="op" id="5777084">(</span><span class="ident" id="5777085">b</span><span class="op" id="5777086">[</span><span class="num" id="5777087">0</span><span class="op" id="5777088">:</span><span class="ident" id="5777089">i</span><span class="op" id="5777090">]</span><span class="op" id="5777091">)</span><br>
<span class="lineno"></span><span class="op" id="5777093">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="5777096">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5777188">func</span>&nbsp;<span class="op" id="5777193">(</span><span class="ident" id="5777194">f</span>&nbsp;<span class="op" id="5777196">*</span><span class="ident" id="5777197">File</span><span class="op" id="5777201">)</span>&nbsp;<span class="ident" id="5777203">Segment</span><span class="op" id="5777210">(</span><span class="ident" id="5777211">name</span>&nbsp;<span class="builtintype" id="5777216">string</span><span class="op" id="5777222">)</span>&nbsp;<span class="op" id="5777224">*</span><span class="ident" id="5777225">Segment</span>&nbsp;<span class="op" id="5777233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777236">for</span>&nbsp;<span class="ident" id="5777240">_</span><span class="op" id="5777241">,</span>&nbsp;<span class="ident" id="5777243">l</span>&nbsp;<span class="op" id="5777245">:=</span>&nbsp;<span class="keyword" id="5777248">range</span>&nbsp;<span class="ident" id="5777254">f</span><span class="op" id="5777255">.</span><span class="ident" id="5777256">Loads</span>&nbsp;<span class="op" id="5777262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777266">if</span>&nbsp;<span class="ident" id="5777269">s</span><span class="op" id="5777270">,</span>&nbsp;<span class="ident" id="5777272">ok</span>&nbsp;<span class="op" id="5777275">:=</span>&nbsp;<span class="ident" id="5777278">l</span><span class="op" id="5777279">.</span><span class="op" id="5777280">(</span><span class="op" id="5777281">*</span><span class="ident" id="5777282">Segment</span><span class="op" id="5777289">)</span><span class="op" id="5777290">;</span>&nbsp;<span class="ident" id="5777292">ok</span>&nbsp;<span class="op" id="5777295">&amp;&amp;</span>&nbsp;<span class="ident" id="5777298">s</span><span class="op" id="5777299">.</span><span class="ident" id="5777300">Name</span>&nbsp;<span class="op" id="5777305">==</span>&nbsp;<span class="ident" id="5777308">name</span>&nbsp;<span class="op" id="5777313">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777318">return</span>&nbsp;<span class="ident" id="5777325">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5777329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5777332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777335">return</span>&nbsp;<span class="ident" id="5777342">nil</span><br>
<span class="lineno"></span><span class="op" id="5777346">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="5777349">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="5777425">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5777444">func</span>&nbsp;<span class="op" id="5777449">(</span><span class="ident" id="5777450">f</span>&nbsp;<span class="op" id="5777452">*</span><span class="ident" id="5777453">File</span><span class="op" id="5777457">)</span>&nbsp;<span class="ident" id="5777459">Section</span><span class="op" id="5777466">(</span><span class="ident" id="5777467">name</span>&nbsp;<span class="builtintype" id="5777472">string</span><span class="op" id="5777478">)</span>&nbsp;<span class="op" id="5777480">*</span><span class="ident" id="5777481">Section</span>&nbsp;<span class="op" id="5777489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777492">for</span>&nbsp;<span class="ident" id="5777496">_</span><span class="op" id="5777497">,</span>&nbsp;<span class="ident" id="5777499">s</span>&nbsp;<span class="op" id="5777501">:=</span>&nbsp;<span class="keyword" id="5777504">range</span>&nbsp;<span class="ident" id="5777510">f</span><span class="op" id="5777511">.</span><span class="ident" id="5777512">Sections</span>&nbsp;<span class="op" id="5777521">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777525">if</span>&nbsp;<span class="ident" id="5777528">s</span><span class="op" id="5777529">.</span><span class="ident" id="5777530">Name</span>&nbsp;<span class="op" id="5777535">==</span>&nbsp;<span class="ident" id="5777538">name</span>&nbsp;<span class="op" id="5777543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777548">return</span>&nbsp;<span class="ident" id="5777555">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5777559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5777562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777565">return</span>&nbsp;<span class="ident" id="5777572">nil</span><br>
<span class="lineno">470</span><span class="op" id="5777576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5777579">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5777645">func</span>&nbsp;<span class="op" id="5777650">(</span><span class="ident" id="5777651">f</span>&nbsp;<span class="op" id="5777653">*</span><span class="ident" id="5777654">File</span><span class="op" id="5777658">)</span>&nbsp;<span class="ident" id="5777660">DWARF</span><span class="op" id="5777665">(</span><span class="op" id="5777666">)</span>&nbsp;<span class="op" id="5777668">(</span><span class="op" id="5777669">*</span><span class="ident" id="5777670">dwarf</span><span class="op" id="5777675">.</span><span class="ident" id="5777676">Data</span><span class="op" id="5777680">,</span>&nbsp;<span class="builtintype" id="5777682">error</span><span class="op" id="5777687">)</span>&nbsp;<span class="op" id="5777689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5777692">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5777743">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5777798">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777857">var</span>&nbsp;<span class="ident" id="5777861">names</span>&nbsp;<span class="op" id="5777867">=</span>&nbsp;<span class="op" id="5777869">[</span><span class="op" id="5777870">...</span><span class="op" id="5777873">]</span><span class="builtintype" id="5777874">string</span><span class="op" id="5777880">{</span><span class="string" id="5777881">&#34;abbrev&#34;</span><span class="op" id="5777889">,</span>&nbsp;<span class="string" id="5777891">&#34;info&#34;</span><span class="op" id="5777897">,</span>&nbsp;<span class="string" id="5777899">&#34;str&#34;</span><span class="op" id="5777904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777907">var</span>&nbsp;<span class="ident" id="5777911">dat</span>&nbsp;<span class="op" id="5777915">[</span><span class="builtinfunc" id="5777916">len</span><span class="op" id="5777919">(</span><span class="ident" id="5777920">names</span><span class="op" id="5777925">)</span><span class="op" id="5777926">]</span><span class="op" id="5777927">[</span><span class="op" id="5777928">]</span><span class="builtintype" id="5777929">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777935">for</span>&nbsp;<span class="ident" id="5777939">i</span><span class="op" id="5777940">,</span>&nbsp;<span class="ident" id="5777942">name</span>&nbsp;<span class="op" id="5777947">:=</span>&nbsp;<span class="keyword" id="5777950">range</span>&nbsp;<span class="ident" id="5777956">names</span>&nbsp;<span class="op" id="5777962">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777966">name</span>&nbsp;<span class="op" id="5777971">=</span>&nbsp;<span class="string" id="5777973">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="5777984">+</span>&nbsp;<span class="ident" id="5777986">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777993">s</span>&nbsp;<span class="op" id="5777995">:=</span>&nbsp;<span class="ident" id="5777998">f</span><span class="op" id="5777999">.</span><span class="ident" id="5778000">Section</span><span class="op" id="5778007">(</span><span class="ident" id="5778008">name</span><span class="op" id="5778012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778016">if</span>&nbsp;<span class="ident" id="5778019">s</span>&nbsp;<span class="op" id="5778021">==</span>&nbsp;<span class="ident" id="5778024">nil</span>&nbsp;<span class="op" id="5778028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778033">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5778044">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778048">b</span><span class="op" id="5778049">,</span>&nbsp;<span class="ident" id="5778051">err</span>&nbsp;<span class="op" id="5778055">:=</span>&nbsp;<span class="ident" id="5778058">s</span><span class="op" id="5778059">.</span><span class="ident" id="5778060">Data</span><span class="op" id="5778064">(</span><span class="op" id="5778065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778069">if</span>&nbsp;<span class="ident" id="5778072">err</span>&nbsp;<span class="op" id="5778076">!=</span>&nbsp;<span class="ident" id="5778079">nil</span>&nbsp;<span class="op" id="5778083">&amp;&amp;</span>&nbsp;<span class="ident" id="5778086">uint64</span><span class="op" id="5778092">(</span><span class="builtinfunc" id="5778093">len</span><span class="op" id="5778096">(</span><span class="ident" id="5778097">b</span><span class="op" id="5778098">)</span><span class="op" id="5778099">)</span>&nbsp;<span class="op" id="5778101">&lt;</span>&nbsp;<span class="ident" id="5778103">s</span><span class="op" id="5778104">.</span><span class="ident" id="5778105">Size</span>&nbsp;<span class="op" id="5778110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778115">return</span>&nbsp;<span class="ident" id="5778122">nil</span><span class="op" id="5778125">,</span>&nbsp;<span class="ident" id="5778127">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5778133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778137">dat</span><span class="op" id="5778140">[</span><span class="ident" id="5778141">i</span><span class="op" id="5778142">]</span>&nbsp;<span class="op" id="5778144">=</span>&nbsp;<span class="ident" id="5778146">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5778149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778153">abbrev</span><span class="op" id="5778159">,</span>&nbsp;<span class="ident" id="5778161">info</span><span class="op" id="5778165">,</span>&nbsp;<span class="ident" id="5778167">str</span>&nbsp;<span class="op" id="5778171">:=</span>&nbsp;<span class="ident" id="5778174">dat</span><span class="op" id="5778177">[</span><span class="num" id="5778178">0</span><span class="op" id="5778179">]</span><span class="op" id="5778180">,</span>&nbsp;<span class="ident" id="5778182">dat</span><span class="op" id="5778185">[</span><span class="num" id="5778186">1</span><span class="op" id="5778187">]</span><span class="op" id="5778188">,</span>&nbsp;<span class="ident" id="5778190">dat</span><span class="op" id="5778193">[</span><span class="num" id="5778194">2</span><span class="op" id="5778195">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778198">return</span>&nbsp;<span class="ident" id="5778205">dwarf</span><span class="op" id="5778210">.</span><span class="ident" id="5778211">New</span><span class="op" id="5778214">(</span><span class="ident" id="5778215">abbrev</span><span class="op" id="5778221">,</span>&nbsp;<span class="ident" id="5778223">nil</span><span class="op" id="5778226">,</span>&nbsp;<span class="ident" id="5778228">nil</span><span class="op" id="5778231">,</span>&nbsp;<span class="ident" id="5778233">info</span><span class="op" id="5778237">,</span>&nbsp;<span class="ident" id="5778239">nil</span><span class="op" id="5778242">,</span>&nbsp;<span class="ident" id="5778244">nil</span><span class="op" id="5778247">,</span>&nbsp;<span class="ident" id="5778249">nil</span><span class="op" id="5778252">,</span>&nbsp;<span class="ident" id="5778254">str</span><span class="op" id="5778257">)</span><br>
<span class="lineno"></span><span class="op" id="5778259">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="5778262">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="5778314">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5778369">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="5778423">func</span>&nbsp;<span class="op" id="5778428">(</span><span class="ident" id="5778429">f</span>&nbsp;<span class="op" id="5778431">*</span><span class="ident" id="5778432">File</span><span class="op" id="5778436">)</span>&nbsp;<span class="ident" id="5778438">ImportedSymbols</span><span class="op" id="5778453">(</span><span class="op" id="5778454">)</span>&nbsp;<span class="op" id="5778456">(</span><span class="op" id="5778457">[</span><span class="op" id="5778458">]</span><span class="builtintype" id="5778459">string</span><span class="op" id="5778465">,</span>&nbsp;<span class="builtintype" id="5778467">error</span><span class="op" id="5778472">)</span>&nbsp;<span class="op" id="5778474">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778477">if</span>&nbsp;<span class="ident" id="5778480">f</span><span class="op" id="5778481">.</span><span class="ident" id="5778482">Dysymtab</span>&nbsp;<span class="op" id="5778491">==</span>&nbsp;<span class="ident" id="5778494">nil</span>&nbsp;<span class="op" id="5778498">||</span>&nbsp;<span class="ident" id="5778501">f</span><span class="op" id="5778502">.</span><span class="ident" id="5778503">Symtab</span>&nbsp;<span class="op" id="5778510">==</span>&nbsp;<span class="ident" id="5778513">nil</span>&nbsp;<span class="op" id="5778517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778521">return</span>&nbsp;<span class="ident" id="5778528">nil</span><span class="op" id="5778531">,</span>&nbsp;<span class="op" id="5778533">&amp;</span><span class="ident" id="5778534">FormatError</span><span class="op" id="5778545">{</span><span class="num" id="5778546">0</span><span class="op" id="5778547">,</span>&nbsp;<span class="string" id="5778549">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="5778571">,</span>&nbsp;<span class="ident" id="5778573">nil</span><span class="op" id="5778576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5778579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778583">st</span>&nbsp;<span class="op" id="5778586">:=</span>&nbsp;<span class="ident" id="5778589">f</span><span class="op" id="5778590">.</span><span class="ident" id="5778591">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778599">dt</span>&nbsp;<span class="op" id="5778602">:=</span>&nbsp;<span class="ident" id="5778605">f</span><span class="op" id="5778606">.</span><span class="ident" id="5778607">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778617">var</span>&nbsp;<span class="ident" id="5778621">all</span>&nbsp;<span class="op" id="5778625">[</span><span class="op" id="5778626">]</span><span class="builtintype" id="5778627">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778635">for</span>&nbsp;<span class="ident" id="5778639">_</span><span class="op" id="5778640">,</span>&nbsp;<span class="ident" id="5778642">s</span>&nbsp;<span class="op" id="5778644">:=</span>&nbsp;<span class="keyword" id="5778647">range</span>&nbsp;<span class="ident" id="5778653">st</span><span class="op" id="5778655">.</span><span class="ident" id="5778656">Syms</span><span class="op" id="5778660">[</span><span class="ident" id="5778661">dt</span><span class="op" id="5778663">.</span><span class="ident" id="5778664">Iundefsym</span>&nbsp;<span class="op" id="5778674">:</span>&nbsp;<span class="ident" id="5778676">dt</span><span class="op" id="5778678">.</span><span class="ident" id="5778679">Iundefsym</span><span class="op" id="5778688">+</span><span class="ident" id="5778689">dt</span><span class="op" id="5778691">.</span><span class="ident" id="5778692">Nundefsym</span><span class="op" id="5778701">]</span>&nbsp;<span class="op" id="5778703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778707">all</span>&nbsp;<span class="op" id="5778711">=</span>&nbsp;<span class="builtinfunc" id="5778713">append</span><span class="op" id="5778719">(</span><span class="ident" id="5778720">all</span><span class="op" id="5778723">,</span>&nbsp;<span class="ident" id="5778725">s</span><span class="op" id="5778726">.</span><span class="ident" id="5778727">Name</span><span class="op" id="5778731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5778734">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778737">return</span>&nbsp;<span class="ident" id="5778744">all</span><span class="op" id="5778747">,</span>&nbsp;<span class="ident" id="5778749">nil</span><br>
<span class="lineno"></span><span class="op" id="5778753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5778756">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="5778812">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="5778867">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="5778915">func</span>&nbsp;<span class="op" id="5778920">(</span><span class="ident" id="5778921">f</span>&nbsp;<span class="op" id="5778923">*</span><span class="ident" id="5778924">File</span><span class="op" id="5778928">)</span>&nbsp;<span class="ident" id="5778930">ImportedLibraries</span><span class="op" id="5778947">(</span><span class="op" id="5778948">)</span>&nbsp;<span class="op" id="5778950">(</span><span class="op" id="5778951">[</span><span class="op" id="5778952">]</span><span class="builtintype" id="5778953">string</span><span class="op" id="5778959">,</span>&nbsp;<span class="builtintype" id="5778961">error</span><span class="op" id="5778966">)</span>&nbsp;<span class="op" id="5778968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778971">var</span>&nbsp;<span class="ident" id="5778975">all</span>&nbsp;<span class="op" id="5778979">[</span><span class="op" id="5778980">]</span><span class="builtintype" id="5778981">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778989">for</span>&nbsp;<span class="ident" id="5778993">_</span><span class="op" id="5778994">,</span>&nbsp;<span class="ident" id="5778996">l</span>&nbsp;<span class="op" id="5778998">:=</span>&nbsp;<span class="keyword" id="5779001">range</span>&nbsp;<span class="ident" id="5779007">f</span><span class="op" id="5779008">.</span><span class="ident" id="5779009">Loads</span>&nbsp;<span class="op" id="5779015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5779019">if</span>&nbsp;<span class="ident" id="5779022">lib</span><span class="op" id="5779025">,</span>&nbsp;<span class="ident" id="5779027">ok</span>&nbsp;<span class="op" id="5779030">:=</span>&nbsp;<span class="ident" id="5779033">l</span><span class="op" id="5779034">.</span><span class="op" id="5779035">(</span><span class="op" id="5779036">*</span><span class="ident" id="5779037">Dylib</span><span class="op" id="5779042">)</span><span class="op" id="5779043">;</span>&nbsp;<span class="ident" id="5779045">ok</span>&nbsp;<span class="op" id="5779048">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779053">all</span>&nbsp;<span class="op" id="5779057">=</span>&nbsp;<span class="builtinfunc" id="5779059">append</span><span class="op" id="5779065">(</span><span class="ident" id="5779066">all</span><span class="op" id="5779069">,</span>&nbsp;<span class="ident" id="5779071">lib</span><span class="op" id="5779074">.</span><span class="ident" id="5779075">Name</span><span class="op" id="5779079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5779083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5779086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5779089">return</span>&nbsp;<span class="ident" id="5779096">all</span><span class="op" id="5779099">,</span>&nbsp;<span class="ident" id="5779101">nil</span><br>
<span class="lineno"></span><span class="op" id="5779105">}</span>
</div>
</body>
</html>
