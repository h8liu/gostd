<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html" class="current">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4857207">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4857262">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4857316">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4857367">//&nbsp;Package&nbsp;crc32&nbsp;implements&nbsp;the&nbsp;32-bit&nbsp;cyclic&nbsp;redundancy&nbsp;check,&nbsp;or&nbsp;CRC-32,</span><br>
<span class="lineno"></span><span class="comment" id="4857442">//&nbsp;checksum.&nbsp;See&nbsp;http://en.wikipedia.org/wiki/Cyclic_redundancy_check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="4857516">//&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="4857532">package</span>&nbsp;<span class="ident" id="4857540">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4857547">import</span>&nbsp;<span class="op" id="4857554">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4857557">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4857565">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="4857572">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4857575">//&nbsp;The&nbsp;size&nbsp;of&nbsp;a&nbsp;CRC-32&nbsp;checksum&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="4857618">const</span>&nbsp;<span class="ident" id="4857624">Size</span>&nbsp;<span class="op" id="4857629">=</span>&nbsp;<span class="num" id="4857631">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4857634">//&nbsp;Predefined&nbsp;polynomials.</span><br>
<span class="lineno"></span><span class="keyword" id="4857661">const</span>&nbsp;<span class="op" id="4857667">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4857670">//&nbsp;IEEE&nbsp;is&nbsp;by&nbsp;far&nbsp;and&nbsp;away&nbsp;the&nbsp;most&nbsp;common&nbsp;CRC-32&nbsp;polynomial.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4857733">//&nbsp;Used&nbsp;by&nbsp;ethernet&nbsp;(IEEE&nbsp;802.3),&nbsp;v.42,&nbsp;fddi,&nbsp;gzip,&nbsp;zip,&nbsp;png,&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4857800">IEEE</span>&nbsp;<span class="op" id="4857805">=</span>&nbsp;<span class="num" id="4857807">0xedb88320</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4857820">//&nbsp;Castagnoli&#39;s&nbsp;polynomial,&nbsp;used&nbsp;in&nbsp;iSCSI.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4857864">//&nbsp;Has&nbsp;better&nbsp;error&nbsp;detection&nbsp;characteristics&nbsp;than&nbsp;IEEE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4857922">//&nbsp;http://dx.doi.org/10.1109/26.231911</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4857962">Castagnoli</span>&nbsp;<span class="op" id="4857973">=</span>&nbsp;<span class="num" id="4857975">0x82f63b78</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4857988">//&nbsp;Koopman&#39;s&nbsp;polynomial.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4858014">//&nbsp;Also&nbsp;has&nbsp;better&nbsp;error&nbsp;detection&nbsp;characteristics&nbsp;than&nbsp;IEEE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4858077">//&nbsp;http://dx.doi.org/10.1109/DSN.2002.1028931</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4858124">Koopman</span>&nbsp;<span class="op" id="4858132">=</span>&nbsp;<span class="num" id="4858134">0xeb31d82e</span><br>
<span class="lineno"></span><span class="op" id="4858145">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4858148">//&nbsp;Table&nbsp;is&nbsp;a&nbsp;256-word&nbsp;table&nbsp;representing&nbsp;the&nbsp;polynomial&nbsp;for&nbsp;efficient&nbsp;processing.</span><br>
<span class="lineno"></span><span class="keyword" id="4858231">type</span>&nbsp;<span class="ident" id="4858236">Table</span>&nbsp;<span class="op" id="4858242">[</span><span class="num" id="4858243">256</span><span class="op" id="4858246">]</span><span class="builtintype" id="4858247">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4858255">//&nbsp;castagnoliTable&nbsp;points&nbsp;to&nbsp;a&nbsp;lazily&nbsp;initialized&nbsp;Table&nbsp;for&nbsp;the&nbsp;Castagnoli</span><br>
<span class="lineno"></span><span class="comment" id="4858330">//&nbsp;polynomial.&nbsp;MakeTable&nbsp;will&nbsp;always&nbsp;return&nbsp;this&nbsp;value&nbsp;when&nbsp;asked&nbsp;to&nbsp;make&nbsp;a</span><br>
<span class="lineno">40</span><span class="comment" id="4858406">//&nbsp;Castagnoli&nbsp;table&nbsp;so&nbsp;we&nbsp;can&nbsp;compare&nbsp;against&nbsp;it&nbsp;to&nbsp;find&nbsp;when&nbsp;the&nbsp;caller&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4858482">//&nbsp;using&nbsp;this&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="4858508">var</span>&nbsp;<span class="ident" id="4858512">castagnoliTable</span>&nbsp;<span class="op" id="4858528">*</span><span class="ident" id="4858529"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span><br>
<span class="lineno"></span><span class="keyword" id="4858535">var</span>&nbsp;<span class="ident" id="4858539">castagnoliOnce</span>&nbsp;<span class="ident" id="4858554"><a href="/gostd/hash/crc32/crc32.go.html#4857565">sync</a></span><span class="op" id="4858558">.</span><span class="ident" id="4858559"><a href="/gostd/sync/once.go.html#1446221">Once</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="4858565">func</span>&nbsp;<span class="ident" id="4858570">castagnoliInit</span><span class="op" id="4858584">(</span><span class="op" id="4858585">)</span>&nbsp;<span class="op" id="4858587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4858590"><a href="/gostd/hash/crc32/crc32.go.html#4858512">castagnoliTable</a></span>&nbsp;<span class="op" id="4858606">=</span>&nbsp;<span class="ident" id="4858608"><a href="/gostd/hash/crc32/crc32.go.html#4859062">makeTable</a></span><span class="op" id="4858617">(</span><span class="ident" id="4858618"><a href="/gostd/hash/crc32/crc32.go.html#4857962">Castagnoli</a></span><span class="op" id="4858628">)</span><br>
<span class="lineno"></span><span class="op" id="4858630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4858633">//&nbsp;IEEETable&nbsp;is&nbsp;the&nbsp;table&nbsp;for&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno">50</span><span class="keyword" id="4858684">var</span>&nbsp;<span class="ident" id="4858688">IEEETable</span>&nbsp;<span class="op" id="4858698">=</span>&nbsp;<span class="ident" id="4858700"><a href="/gostd/hash/crc32/crc32.go.html#4859062">makeTable</a></span><span class="op" id="4858709">(</span><span class="ident" id="4858710"><a href="/gostd/hash/crc32/crc32.go.html#4857800">IEEE</a></span><span class="op" id="4858714">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4858717">//&nbsp;MakeTable&nbsp;returns&nbsp;the&nbsp;Table&nbsp;constructed&nbsp;from&nbsp;the&nbsp;specified&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="4858791">func</span>&nbsp;<span class="ident" id="4858796">MakeTable</span><span class="op" id="4858805">(</span><span class="ident" id="4858806">poly</span>&nbsp;<span class="builtintype" id="4858811">uint32</span><span class="op" id="4858817">)</span>&nbsp;<span class="op" id="4858819">*</span><span class="ident" id="4858820"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span>&nbsp;<span class="op" id="4858826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4858829">switch</span>&nbsp;<span class="ident" id="4858836"><a href="/gostd/hash/crc32/crc32.go.html#4858806">poly</a></span>&nbsp;<span class="op" id="4858841">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4858844">case</span>&nbsp;<span class="ident" id="4858849"><a href="/gostd/hash/crc32/crc32.go.html#4857800">IEEE</a></span><span class="op" id="4858853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4858857">return</span>&nbsp;<span class="ident" id="4858864"><a href="/gostd/hash/crc32/crc32.go.html#4858688">IEEETable</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4858875">case</span>&nbsp;<span class="ident" id="4858880"><a href="/gostd/hash/crc32/crc32.go.html#4857962">Castagnoli</a></span><span class="op" id="4858890">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4858894"><a href="/gostd/hash/crc32/crc32.go.html#4858539">castagnoliOnce</a></span><span class="op" id="4858908">.</span><span class="ident" id="4858909"><a href="/gostd/sync/once.go.html#1447110">Do</a></span><span class="op" id="4858911">(</span><span class="ident" id="4858912"><a href="/gostd/hash/crc32/crc32.go.html#4858570">castagnoliInit</a></span><span class="op" id="4858926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4858930">return</span>&nbsp;<span class="ident" id="4858937"><a href="/gostd/hash/crc32/crc32.go.html#4858512">castagnoliTable</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4858954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4858957">return</span>&nbsp;<span class="ident" id="4858964"><a href="/gostd/hash/crc32/crc32.go.html#4859062">makeTable</a></span><span class="op" id="4858973">(</span><span class="ident" id="4858974"><a href="/gostd/hash/crc32/crc32.go.html#4858806">poly</a></span><span class="op" id="4858978">)</span><br>
<span class="lineno"></span><span class="op" id="4858980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4858983">//&nbsp;makeTable&nbsp;returns&nbsp;the&nbsp;Table&nbsp;constructed&nbsp;from&nbsp;the&nbsp;specified&nbsp;polynomial.</span><br>
<span class="lineno">65</span><span class="keyword" id="4859057">func</span>&nbsp;<span class="ident" id="4859062">makeTable</span><span class="op" id="4859071">(</span><span class="ident" id="4859072">poly</span>&nbsp;<span class="builtintype" id="4859077">uint32</span><span class="op" id="4859083">)</span>&nbsp;<span class="op" id="4859085">*</span><span class="ident" id="4859086"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span>&nbsp;<span class="op" id="4859092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859095">t</span>&nbsp;<span class="op" id="4859097">:=</span>&nbsp;<span class="builtinfunc" id="4859100">new</span><span class="op" id="4859103">(</span><span class="ident" id="4859104"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span><span class="op" id="4859109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4859112">for</span>&nbsp;<span class="ident" id="4859116">i</span>&nbsp;<span class="op" id="4859118">:=</span>&nbsp;<span class="num" id="4859121">0</span><span class="op" id="4859122">;</span>&nbsp;<span class="ident" id="4859124"><a href="/gostd/hash/crc32/crc32.go.html#4859116">i</a></span>&nbsp;<span class="op" id="4859126">&lt;</span>&nbsp;<span class="num" id="4859128">256</span><span class="op" id="4859131">;</span>&nbsp;<span class="ident" id="4859133"><a href="/gostd/hash/crc32/crc32.go.html#4859116">i</a></span><span class="op" id="4859134">++</span>&nbsp;<span class="op" id="4859137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859141">crc</span>&nbsp;<span class="op" id="4859145">:=</span>&nbsp;<span class="builtintype" id="4859148">uint32</span><span class="op" id="4859154">(</span><span class="ident" id="4859155"><a href="/gostd/hash/crc32/crc32.go.html#4859116">i</a></span><span class="op" id="4859156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4859160">for</span>&nbsp;<span class="ident" id="4859164">j</span>&nbsp;<span class="op" id="4859166">:=</span>&nbsp;<span class="num" id="4859169">0</span><span class="op" id="4859170">;</span>&nbsp;<span class="ident" id="4859172"><a href="/gostd/hash/crc32/crc32.go.html#4859164">j</a></span>&nbsp;<span class="op" id="4859174">&lt;</span>&nbsp;<span class="num" id="4859176">8</span><span class="op" id="4859177">;</span>&nbsp;<span class="ident" id="4859179"><a href="/gostd/hash/crc32/crc32.go.html#4859164">j</a></span><span class="op" id="4859180">++</span>&nbsp;<span class="op" id="4859183">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4859188">if</span>&nbsp;<span class="ident" id="4859191"><a href="/gostd/hash/crc32/crc32.go.html#4859141">crc</a></span><span class="op" id="4859194">&amp;</span><span class="num" id="4859195">1</span>&nbsp;<span class="op" id="4859197">==</span>&nbsp;<span class="num" id="4859200">1</span>&nbsp;<span class="op" id="4859202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859208"><a href="/gostd/hash/crc32/crc32.go.html#4859141">crc</a></span>&nbsp;<span class="op" id="4859212">=</span>&nbsp;<span class="op" id="4859214">(</span><span class="ident" id="4859215"><a href="/gostd/hash/crc32/crc32.go.html#4859141">crc</a></span>&nbsp;<span class="op" id="4859219">&gt;&gt;</span>&nbsp;<span class="num" id="4859222">1</span><span class="op" id="4859223">)</span>&nbsp;<span class="op" id="4859225">^</span>&nbsp;<span class="ident" id="4859227"><a href="/gostd/hash/crc32/crc32.go.html#4859072">poly</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4859235">}</span>&nbsp;<span class="keyword" id="4859237">else</span>&nbsp;<span class="op" id="4859242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859248"><a href="/gostd/hash/crc32/crc32.go.html#4859141">crc</a></span>&nbsp;<span class="op" id="4859252">&gt;&gt;=</span>&nbsp;<span class="num" id="4859256">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4859261">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4859265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859269"><a href="/gostd/hash/crc32/crc32.go.html#4859095">t</a></span><span class="op" id="4859270">[</span><span class="ident" id="4859271"><a href="/gostd/hash/crc32/crc32.go.html#4859116">i</a></span><span class="op" id="4859272">]</span>&nbsp;<span class="op" id="4859274">=</span>&nbsp;<span class="ident" id="4859276"><a href="/gostd/hash/crc32/crc32.go.html#4859141">crc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4859281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4859284">return</span>&nbsp;<span class="ident" id="4859291"><a href="/gostd/hash/crc32/crc32.go.html#4859095">t</a></span><br>
<span class="lineno"></span><span class="op" id="4859293">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="4859296">//&nbsp;digest&nbsp;represents&nbsp;the&nbsp;partial&nbsp;evaluation&nbsp;of&nbsp;a&nbsp;checksum.</span><br>
<span class="lineno"></span><span class="keyword" id="4859355">type</span>&nbsp;<span class="ident" id="4859360">digest</span>&nbsp;<span class="keyword" id="4859367">struct</span>&nbsp;<span class="op" id="4859374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859377">crc</span>&nbsp;<span class="builtintype" id="4859381">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859389">tab</span>&nbsp;<span class="op" id="4859393">*</span><span class="ident" id="4859394"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span><br>
<span class="lineno">85</span><span class="op" id="4859400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4859403">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;new&nbsp;hash.Hash32&nbsp;computing&nbsp;the&nbsp;CRC-32&nbsp;checksum</span><br>
<span class="lineno"></span><span class="comment" id="4859466">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="4859516">func</span>&nbsp;<span class="ident" id="4859521">New</span><span class="op" id="4859524">(</span><span class="ident" id="4859525">tab</span>&nbsp;<span class="op" id="4859529">*</span><span class="ident" id="4859530"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span><span class="op" id="4859535">)</span>&nbsp;<span class="ident" id="4859537"><a href="/gostd/hash/crc32/crc32.go.html#4857557">hash</a></span><span class="op" id="4859541">.</span><span class="ident" id="4859542"><a href="/gostd/hash/hash.go.html#3014832">Hash32</a></span>&nbsp;<span class="op" id="4859549">{</span>&nbsp;<span class="keyword" id="4859551">return</span>&nbsp;<span class="op" id="4859558">&amp;</span><span class="ident" id="4859559"><a href="/gostd/hash/crc32/crc32.go.html#4859360">digest</a></span><span class="op" id="4859565">{</span><span class="num" id="4859566">0</span><span class="op" id="4859567">,</span>&nbsp;<span class="ident" id="4859569"><a href="/gostd/hash/crc32/crc32.go.html#4859525">tab</a></span><span class="op" id="4859572">}</span>&nbsp;<span class="op" id="4859574">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4859577">//&nbsp;NewIEEE&nbsp;creates&nbsp;a&nbsp;new&nbsp;hash.Hash32&nbsp;computing&nbsp;the&nbsp;CRC-32&nbsp;checksum</span><br>
<span class="lineno"></span><span class="comment" id="4859644">//&nbsp;using&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="4859674">func</span>&nbsp;<span class="ident" id="4859679">NewIEEE</span><span class="op" id="4859686">(</span><span class="op" id="4859687">)</span>&nbsp;<span class="ident" id="4859689"><a href="/gostd/hash/crc32/crc32.go.html#4857557">hash</a></span><span class="op" id="4859693">.</span><span class="ident" id="4859694"><a href="/gostd/hash/hash.go.html#3014832">Hash32</a></span>&nbsp;<span class="op" id="4859701">{</span>&nbsp;<span class="keyword" id="4859703">return</span>&nbsp;<span class="ident" id="4859710"><a href="/gostd/hash/crc32/crc32.go.html#4859521">New</a></span><span class="op" id="4859713">(</span><span class="ident" id="4859714"><a href="/gostd/hash/crc32/crc32.go.html#4858688">IEEETable</a></span><span class="op" id="4859723">)</span>&nbsp;<span class="op" id="4859725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="4859728">func</span>&nbsp;<span class="op" id="4859733">(</span><span class="ident" id="4859734">d</span>&nbsp;<span class="op" id="4859736">*</span><span class="ident" id="4859737"><a href="/gostd/hash/crc32/crc32.go.html#4859360">digest</a></span><span class="op" id="4859743">)</span>&nbsp;<span class="ident" id="4859745">Size</span><span class="op" id="4859749">(</span><span class="op" id="4859750">)</span>&nbsp;<span class="builtintype" id="4859752">int</span>&nbsp;<span class="op" id="4859756">{</span>&nbsp;<span class="keyword" id="4859758">return</span>&nbsp;<span class="ident" id="4859765"><a href="/gostd/hash/crc32/crc32.go.html#4857624">Size</a></span>&nbsp;<span class="op" id="4859770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4859773">func</span>&nbsp;<span class="op" id="4859778">(</span><span class="ident" id="4859779">d</span>&nbsp;<span class="op" id="4859781">*</span><span class="ident" id="4859782"><a href="/gostd/hash/crc32/crc32.go.html#4859360">digest</a></span><span class="op" id="4859788">)</span>&nbsp;<span class="ident" id="4859790">BlockSize</span><span class="op" id="4859799">(</span><span class="op" id="4859800">)</span>&nbsp;<span class="builtintype" id="4859802">int</span>&nbsp;<span class="op" id="4859806">{</span>&nbsp;<span class="keyword" id="4859808">return</span>&nbsp;<span class="num" id="4859815">1</span>&nbsp;<span class="op" id="4859817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4859820">func</span>&nbsp;<span class="op" id="4859825">(</span><span class="ident" id="4859826">d</span>&nbsp;<span class="op" id="4859828">*</span><span class="ident" id="4859829"><a href="/gostd/hash/crc32/crc32.go.html#4859360">digest</a></span><span class="op" id="4859835">)</span>&nbsp;<span class="ident" id="4859837">Reset</span><span class="op" id="4859842">(</span><span class="op" id="4859843">)</span>&nbsp;<span class="op" id="4859845">{</span>&nbsp;<span class="ident" id="4859847"><a href="/gostd/hash/crc32/crc32.go.html#4859826">d</a></span><span class="op" id="4859848">.</span><span class="ident" id="4859849"><a href="/gostd/hash/crc32/crc32.go.html#4859377">crc</a></span>&nbsp;<span class="op" id="4859853">=</span>&nbsp;<span class="num" id="4859855">0</span>&nbsp;<span class="op" id="4859857">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="4859860">func</span>&nbsp;<span class="ident" id="4859865">update</span><span class="op" id="4859871">(</span><span class="ident" id="4859872">crc</span>&nbsp;<span class="builtintype" id="4859876">uint32</span><span class="op" id="4859882">,</span>&nbsp;<span class="ident" id="4859884">tab</span>&nbsp;<span class="op" id="4859888">*</span><span class="ident" id="4859889"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span><span class="op" id="4859894">,</span>&nbsp;<span class="ident" id="4859896">p</span>&nbsp;<span class="op" id="4859898">[</span><span class="op" id="4859899">]</span><span class="builtintype" id="4859900">byte</span><span class="op" id="4859904">)</span>&nbsp;<span class="builtintype" id="4859906">uint32</span>&nbsp;<span class="op" id="4859913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859916"><a href="/gostd/hash/crc32/crc32.go.html#4859872">crc</a></span>&nbsp;<span class="op" id="4859920">=</span>&nbsp;<span class="op" id="4859922">^</span><span class="ident" id="4859923"><a href="/gostd/hash/crc32/crc32.go.html#4859872">crc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4859928">for</span>&nbsp;<span class="ident" id="4859932">_</span><span class="op" id="4859933">,</span>&nbsp;<span class="ident" id="4859935">v</span>&nbsp;<span class="op" id="4859937">:=</span>&nbsp;<span class="keyword" id="4859940">range</span>&nbsp;<span class="ident" id="4859946"><a href="/gostd/hash/crc32/crc32.go.html#4859896">p</a></span>&nbsp;<span class="op" id="4859948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4859952"><a href="/gostd/hash/crc32/crc32.go.html#4859872">crc</a></span>&nbsp;<span class="op" id="4859956">=</span>&nbsp;<span class="ident" id="4859958"><a href="/gostd/hash/crc32/crc32.go.html#4859884">tab</a></span><span class="op" id="4859961">[</span><span class="builtintype" id="4859962">byte</span><span class="op" id="4859966">(</span><span class="ident" id="4859967"><a href="/gostd/hash/crc32/crc32.go.html#4859872">crc</a></span><span class="op" id="4859970">)</span><span class="op" id="4859971">^</span><span class="ident" id="4859972"><a href="/gostd/hash/crc32/crc32.go.html#4859935">v</a></span><span class="op" id="4859973">]</span>&nbsp;<span class="op" id="4859975">^</span>&nbsp;<span class="op" id="4859977">(</span><span class="ident" id="4859978"><a href="/gostd/hash/crc32/crc32.go.html#4859872">crc</a></span>&nbsp;<span class="op" id="4859982">&gt;&gt;</span>&nbsp;<span class="num" id="4859985">8</span><span class="op" id="4859986">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4859989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4859992">return</span>&nbsp;<span class="op" id="4859999">^</span><span class="ident" id="4860000"><a href="/gostd/hash/crc32/crc32.go.html#4859872">crc</a></span><br>
<span class="lineno"></span><span class="op" id="4860004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4860007">//&nbsp;Update&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;adding&nbsp;the&nbsp;bytes&nbsp;in&nbsp;p&nbsp;to&nbsp;the&nbsp;crc.</span><br>
<span class="lineno">110</span><span class="keyword" id="4860073">func</span>&nbsp;<span class="ident" id="4860078">Update</span><span class="op" id="4860084">(</span><span class="ident" id="4860085">crc</span>&nbsp;<span class="builtintype" id="4860089">uint32</span><span class="op" id="4860095">,</span>&nbsp;<span class="ident" id="4860097">tab</span>&nbsp;<span class="op" id="4860101">*</span><span class="ident" id="4860102"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span><span class="op" id="4860107">,</span>&nbsp;<span class="ident" id="4860109">p</span>&nbsp;<span class="op" id="4860111">[</span><span class="op" id="4860112">]</span><span class="builtintype" id="4860113">byte</span><span class="op" id="4860117">)</span>&nbsp;<span class="builtintype" id="4860119">uint32</span>&nbsp;<span class="op" id="4860126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4860129">if</span>&nbsp;<span class="ident" id="4860132"><a href="/gostd/hash/crc32/crc32.go.html#4860097">tab</a></span>&nbsp;<span class="op" id="4860136">==</span>&nbsp;<span class="ident" id="4860139"><a href="/gostd/hash/crc32/crc32.go.html#4858512">castagnoliTable</a></span>&nbsp;<span class="op" id="4860155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4860159">return</span>&nbsp;<span class="ident" id="4860166"><a href="/gostd/hash/crc32/crc32_amd64x.go.html#4861411">updateCastagnoli</a></span><span class="op" id="4860182">(</span><span class="ident" id="4860183"><a href="/gostd/hash/crc32/crc32.go.html#4860085">crc</a></span><span class="op" id="4860186">,</span>&nbsp;<span class="ident" id="4860188"><a href="/gostd/hash/crc32/crc32.go.html#4860109">p</a></span><span class="op" id="4860189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4860192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4860195">return</span>&nbsp;<span class="ident" id="4860202"><a href="/gostd/hash/crc32/crc32.go.html#4859865">update</a></span><span class="op" id="4860208">(</span><span class="ident" id="4860209"><a href="/gostd/hash/crc32/crc32.go.html#4860085">crc</a></span><span class="op" id="4860212">,</span>&nbsp;<span class="ident" id="4860214"><a href="/gostd/hash/crc32/crc32.go.html#4860097">tab</a></span><span class="op" id="4860217">,</span>&nbsp;<span class="ident" id="4860219"><a href="/gostd/hash/crc32/crc32.go.html#4860109">p</a></span><span class="op" id="4860220">)</span><br>
<span class="lineno">115</span><span class="op" id="4860222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4860225">func</span>&nbsp;<span class="op" id="4860230">(</span><span class="ident" id="4860231">d</span>&nbsp;<span class="op" id="4860233">*</span><span class="ident" id="4860234"><a href="/gostd/hash/crc32/crc32.go.html#4859360">digest</a></span><span class="op" id="4860240">)</span>&nbsp;<span class="ident" id="4860242">Write</span><span class="op" id="4860247">(</span><span class="ident" id="4860248">p</span>&nbsp;<span class="op" id="4860250">[</span><span class="op" id="4860251">]</span><span class="builtintype" id="4860252">byte</span><span class="op" id="4860256">)</span>&nbsp;<span class="op" id="4860258">(</span><span class="ident" id="4860259">n</span>&nbsp;<span class="builtintype" id="4860261">int</span><span class="op" id="4860264">,</span>&nbsp;<span class="ident" id="4860266">err</span>&nbsp;<span class="builtintype" id="4860270">error</span><span class="op" id="4860275">)</span>&nbsp;<span class="op" id="4860277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4860280"><a href="/gostd/hash/crc32/crc32.go.html#4860231">d</a></span><span class="op" id="4860281">.</span><span class="ident" id="4860282"><a href="/gostd/hash/crc32/crc32.go.html#4859377">crc</a></span>&nbsp;<span class="op" id="4860286">=</span>&nbsp;<span class="ident" id="4860288"><a href="/gostd/hash/crc32/crc32.go.html#4860078">Update</a></span><span class="op" id="4860294">(</span><span class="ident" id="4860295"><a href="/gostd/hash/crc32/crc32.go.html#4860231">d</a></span><span class="op" id="4860296">.</span><span class="ident" id="4860297"><a href="/gostd/hash/crc32/crc32.go.html#4859377">crc</a></span><span class="op" id="4860300">,</span>&nbsp;<span class="ident" id="4860302"><a href="/gostd/hash/crc32/crc32.go.html#4860231">d</a></span><span class="op" id="4860303">.</span><span class="ident" id="4860304"><a href="/gostd/hash/crc32/crc32.go.html#4859389">tab</a></span><span class="op" id="4860307">,</span>&nbsp;<span class="ident" id="4860309"><a href="/gostd/hash/crc32/crc32.go.html#4860248">p</a></span><span class="op" id="4860310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4860313">return</span>&nbsp;<span class="builtinfunc" id="4860320">len</span><span class="op" id="4860323">(</span><span class="ident" id="4860324"><a href="/gostd/hash/crc32/crc32.go.html#4860248">p</a></span><span class="op" id="4860325">)</span><span class="op" id="4860326">,</span>&nbsp;<span class="builtintype" id="4860328">nil</span><br>
<span class="lineno">120</span><span class="op" id="4860332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4860335">func</span>&nbsp;<span class="op" id="4860340">(</span><span class="ident" id="4860341">d</span>&nbsp;<span class="op" id="4860343">*</span><span class="ident" id="4860344"><a href="/gostd/hash/crc32/crc32.go.html#4859360">digest</a></span><span class="op" id="4860350">)</span>&nbsp;<span class="ident" id="4860352">Sum32</span><span class="op" id="4860357">(</span><span class="op" id="4860358">)</span>&nbsp;<span class="builtintype" id="4860360">uint32</span>&nbsp;<span class="op" id="4860367">{</span>&nbsp;<span class="keyword" id="4860369">return</span>&nbsp;<span class="ident" id="4860376"><a href="/gostd/hash/crc32/crc32.go.html#4860341">d</a></span><span class="op" id="4860377">.</span><span class="ident" id="4860378"><a href="/gostd/hash/crc32/crc32.go.html#4859377">crc</a></span>&nbsp;<span class="op" id="4860382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4860385">func</span>&nbsp;<span class="op" id="4860390">(</span><span class="ident" id="4860391">d</span>&nbsp;<span class="op" id="4860393">*</span><span class="ident" id="4860394"><a href="/gostd/hash/crc32/crc32.go.html#4859360">digest</a></span><span class="op" id="4860400">)</span>&nbsp;<span class="ident" id="4860402">Sum</span><span class="op" id="4860405">(</span><span class="ident" id="4860406">in</span>&nbsp;<span class="op" id="4860409">[</span><span class="op" id="4860410">]</span><span class="builtintype" id="4860411">byte</span><span class="op" id="4860415">)</span>&nbsp;<span class="op" id="4860417">[</span><span class="op" id="4860418">]</span><span class="builtintype" id="4860419">byte</span>&nbsp;<span class="op" id="4860424">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4860427">s</span>&nbsp;<span class="op" id="4860429">:=</span>&nbsp;<span class="ident" id="4860432"><a href="/gostd/hash/crc32/crc32.go.html#4860391">d</a></span><span class="op" id="4860433">.</span><span class="ident" id="4860434"><a href="/gostd/hash/crc32/crc32.go.html#4860352">Sum32</a></span><span class="op" id="4860439">(</span><span class="op" id="4860440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4860443">return</span>&nbsp;<span class="builtinfunc" id="4860450">append</span><span class="op" id="4860456">(</span><span class="ident" id="4860457"><a href="/gostd/hash/crc32/crc32.go.html#4860406">in</a></span><span class="op" id="4860459">,</span>&nbsp;<span class="builtintype" id="4860461">byte</span><span class="op" id="4860465">(</span><span class="ident" id="4860466"><a href="/gostd/hash/crc32/crc32.go.html#4860427">s</a></span><span class="op" id="4860467">&gt;&gt;</span><span class="num" id="4860469">24</span><span class="op" id="4860471">)</span><span class="op" id="4860472">,</span>&nbsp;<span class="builtintype" id="4860474">byte</span><span class="op" id="4860478">(</span><span class="ident" id="4860479"><a href="/gostd/hash/crc32/crc32.go.html#4860427">s</a></span><span class="op" id="4860480">&gt;&gt;</span><span class="num" id="4860482">16</span><span class="op" id="4860484">)</span><span class="op" id="4860485">,</span>&nbsp;<span class="builtintype" id="4860487">byte</span><span class="op" id="4860491">(</span><span class="ident" id="4860492"><a href="/gostd/hash/crc32/crc32.go.html#4860427">s</a></span><span class="op" id="4860493">&gt;&gt;</span><span class="num" id="4860495">8</span><span class="op" id="4860496">)</span><span class="op" id="4860497">,</span>&nbsp;<span class="builtintype" id="4860499">byte</span><span class="op" id="4860503">(</span><span class="ident" id="4860504"><a href="/gostd/hash/crc32/crc32.go.html#4860427">s</a></span><span class="op" id="4860505">)</span><span class="op" id="4860506">)</span><br>
<span class="lineno"></span><span class="op" id="4860508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4860511">//&nbsp;Checksum&nbsp;returns&nbsp;the&nbsp;CRC-32&nbsp;checksum&nbsp;of&nbsp;data</span><br>
<span class="lineno">130</span><span class="comment" id="4860559">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="4860609">func</span>&nbsp;<span class="ident" id="4860614">Checksum</span><span class="op" id="4860622">(</span><span class="ident" id="4860623">data</span>&nbsp;<span class="op" id="4860628">[</span><span class="op" id="4860629">]</span><span class="builtintype" id="4860630">byte</span><span class="op" id="4860634">,</span>&nbsp;<span class="ident" id="4860636">tab</span>&nbsp;<span class="op" id="4860640">*</span><span class="ident" id="4860641"><a href="/gostd/hash/crc32/crc32.go.html#4858236">Table</a></span><span class="op" id="4860646">)</span>&nbsp;<span class="builtintype" id="4860648">uint32</span>&nbsp;<span class="op" id="4860655">{</span>&nbsp;<span class="keyword" id="4860657">return</span>&nbsp;<span class="ident" id="4860664"><a href="/gostd/hash/crc32/crc32.go.html#4860078">Update</a></span><span class="op" id="4860670">(</span><span class="num" id="4860671">0</span><span class="op" id="4860672">,</span>&nbsp;<span class="ident" id="4860674"><a href="/gostd/hash/crc32/crc32.go.html#4860636">tab</a></span><span class="op" id="4860677">,</span>&nbsp;<span class="ident" id="4860679"><a href="/gostd/hash/crc32/crc32.go.html#4860623">data</a></span><span class="op" id="4860683">)</span>&nbsp;<span class="op" id="4860685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4860688">//&nbsp;ChecksumIEEE&nbsp;returns&nbsp;the&nbsp;CRC-32&nbsp;checksum&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="4860740">//&nbsp;using&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno">135</span><span class="keyword" id="4860770">func</span>&nbsp;<span class="ident" id="4860775">ChecksumIEEE</span><span class="op" id="4860787">(</span><span class="ident" id="4860788">data</span>&nbsp;<span class="op" id="4860793">[</span><span class="op" id="4860794">]</span><span class="builtintype" id="4860795">byte</span><span class="op" id="4860799">)</span>&nbsp;<span class="builtintype" id="4860801">uint32</span>&nbsp;<span class="op" id="4860808">{</span>&nbsp;<span class="keyword" id="4860810">return</span>&nbsp;<span class="ident" id="4860817"><a href="/gostd/hash/crc32/crc32.go.html#4859865">update</a></span><span class="op" id="4860823">(</span><span class="num" id="4860824">0</span><span class="op" id="4860825">,</span>&nbsp;<span class="ident" id="4860827"><a href="/gostd/hash/crc32/crc32.go.html#4858688">IEEETable</a></span><span class="op" id="4860836">,</span>&nbsp;<span class="ident" id="4860838"><a href="/gostd/hash/crc32/crc32.go.html#4860788">data</a></span><span class="op" id="4860842">)</span>&nbsp;<span class="op" id="4860844">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
