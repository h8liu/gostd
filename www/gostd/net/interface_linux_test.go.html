<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6601752">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6601808">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6601862">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6601913">package</span>&nbsp;<span class="ident" id="6601921">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6601926">import</span>&nbsp;<span class="op" id="6601933">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6601936">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6601943">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6601954">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6601964">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6601967">func</span>&nbsp;<span class="op" id="6601972">(</span><span class="ident" id="6601973">ti</span>&nbsp;<span class="op" id="6601976">*</span><span class="ident" id="6601977">testInterface</span><span class="op" id="6601990">)</span>&nbsp;<span class="ident" id="6601992">setBroadcast</span><span class="op" id="6602004">(</span><span class="ident" id="6602005">suffix</span>&nbsp;<span class="builtintype" id="6602012">int</span><span class="op" id="6602015">)</span>&nbsp;<span class="builtintype" id="6602017">error</span>&nbsp;<span class="op" id="6602023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602026">ti</span><span class="op" id="6602028">.</span><span class="ident" id="6602029">name</span>&nbsp;<span class="op" id="6602034">=</span>&nbsp;<span class="ident" id="6602036">fmt</span><span class="op" id="6602039">.</span><span class="ident" id="6602040">Sprintf</span><span class="op" id="6602047">(</span><span class="string" id="6602048">&#34;gotest%d&#34;</span><span class="op" id="6602058">,</span>&nbsp;<span class="ident" id="6602060">suffix</span><span class="op" id="6602066">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602069">xname</span><span class="op" id="6602074">,</span>&nbsp;<span class="ident" id="6602076">err</span>&nbsp;<span class="op" id="6602080">:=</span>&nbsp;<span class="ident" id="6602083">exec</span><span class="op" id="6602087">.</span><span class="ident" id="6602088">LookPath</span><span class="op" id="6602096">(</span><span class="string" id="6602097">&#34;ip&#34;</span><span class="op" id="6602101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6602104">if</span>&nbsp;<span class="ident" id="6602107">err</span>&nbsp;<span class="op" id="6602111">!=</span>&nbsp;<span class="ident" id="6602114">nil</span>&nbsp;<span class="op" id="6602118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6602122">return</span>&nbsp;<span class="ident" id="6602129">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6602134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602137">ti</span><span class="op" id="6602139">.</span><span class="ident" id="6602140">setupCmds</span>&nbsp;<span class="op" id="6602150">=</span>&nbsp;<span class="builtinfunc" id="6602152">append</span><span class="op" id="6602158">(</span><span class="ident" id="6602159">ti</span><span class="op" id="6602161">.</span><span class="ident" id="6602162">setupCmds</span><span class="op" id="6602171">,</span>&nbsp;<span class="op" id="6602173">&amp;</span><span class="ident" id="6602174">exec</span><span class="op" id="6602178">.</span><span class="ident" id="6602179">Cmd</span><span class="op" id="6602182">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602186">Path</span><span class="op" id="6602190">:</span>&nbsp;<span class="ident" id="6602192">xname</span><span class="op" id="6602197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602201">Args</span><span class="op" id="6602205">:</span>&nbsp;<span class="op" id="6602207">[</span><span class="op" id="6602208">]</span><span class="builtintype" id="6602209">string</span><span class="op" id="6602215">{</span><span class="string" id="6602216">&#34;ip&#34;</span><span class="op" id="6602220">,</span>&nbsp;<span class="string" id="6602222">&#34;link&#34;</span><span class="op" id="6602228">,</span>&nbsp;<span class="string" id="6602230">&#34;add&#34;</span><span class="op" id="6602235">,</span>&nbsp;<span class="ident" id="6602237">ti</span><span class="op" id="6602239">.</span><span class="ident" id="6602240">name</span><span class="op" id="6602244">,</span>&nbsp;<span class="string" id="6602246">&#34;type&#34;</span><span class="op" id="6602252">,</span>&nbsp;<span class="string" id="6602254">&#34;dummy&#34;</span><span class="op" id="6602261">}</span><span class="op" id="6602262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6602265">}</span><span class="op" id="6602266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602269">ti</span><span class="op" id="6602271">.</span><span class="ident" id="6602272">teardownCmds</span>&nbsp;<span class="op" id="6602285">=</span>&nbsp;<span class="builtinfunc" id="6602287">append</span><span class="op" id="6602293">(</span><span class="ident" id="6602294">ti</span><span class="op" id="6602296">.</span><span class="ident" id="6602297">teardownCmds</span><span class="op" id="6602309">,</span>&nbsp;<span class="op" id="6602311">&amp;</span><span class="ident" id="6602312">exec</span><span class="op" id="6602316">.</span><span class="ident" id="6602317">Cmd</span><span class="op" id="6602320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602324">Path</span><span class="op" id="6602328">:</span>&nbsp;<span class="ident" id="6602330">xname</span><span class="op" id="6602335">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602339">Args</span><span class="op" id="6602343">:</span>&nbsp;<span class="op" id="6602345">[</span><span class="op" id="6602346">]</span><span class="builtintype" id="6602347">string</span><span class="op" id="6602353">{</span><span class="string" id="6602354">&#34;ip&#34;</span><span class="op" id="6602358">,</span>&nbsp;<span class="string" id="6602360">&#34;link&#34;</span><span class="op" id="6602366">,</span>&nbsp;<span class="string" id="6602368">&#34;delete&#34;</span><span class="op" id="6602376">,</span>&nbsp;<span class="ident" id="6602378">ti</span><span class="op" id="6602380">.</span><span class="ident" id="6602381">name</span><span class="op" id="6602385">,</span>&nbsp;<span class="string" id="6602387">&#34;type&#34;</span><span class="op" id="6602393">,</span>&nbsp;<span class="string" id="6602395">&#34;dummy&#34;</span><span class="op" id="6602402">}</span><span class="op" id="6602403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6602406">}</span><span class="op" id="6602407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6602410">return</span>&nbsp;<span class="ident" id="6602417">nil</span><br>
<span class="lineno"></span><span class="op" id="6602421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6602424">func</span>&nbsp;<span class="op" id="6602429">(</span><span class="ident" id="6602430">ti</span>&nbsp;<span class="op" id="6602433">*</span><span class="ident" id="6602434">testInterface</span><span class="op" id="6602447">)</span>&nbsp;<span class="ident" id="6602449">setPointToPoint</span><span class="op" id="6602464">(</span><span class="ident" id="6602465">suffix</span>&nbsp;<span class="builtintype" id="6602472">int</span><span class="op" id="6602475">,</span>&nbsp;<span class="ident" id="6602477">local</span><span class="op" id="6602482">,</span>&nbsp;<span class="ident" id="6602484">remote</span>&nbsp;<span class="builtintype" id="6602491">string</span><span class="op" id="6602497">)</span>&nbsp;<span class="builtintype" id="6602499">error</span>&nbsp;<span class="op" id="6602505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602508">ti</span><span class="op" id="6602510">.</span><span class="ident" id="6602511">name</span>&nbsp;<span class="op" id="6602516">=</span>&nbsp;<span class="ident" id="6602518">fmt</span><span class="op" id="6602521">.</span><span class="ident" id="6602522">Sprintf</span><span class="op" id="6602529">(</span><span class="string" id="6602530">&#34;gotest%d&#34;</span><span class="op" id="6602540">,</span>&nbsp;<span class="ident" id="6602542">suffix</span><span class="op" id="6602548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602551">ti</span><span class="op" id="6602553">.</span><span class="ident" id="6602554">local</span>&nbsp;<span class="op" id="6602560">=</span>&nbsp;<span class="ident" id="6602562">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602569">ti</span><span class="op" id="6602571">.</span><span class="ident" id="6602572">remote</span>&nbsp;<span class="op" id="6602579">=</span>&nbsp;<span class="ident" id="6602581">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602589">xname</span><span class="op" id="6602594">,</span>&nbsp;<span class="ident" id="6602596">err</span>&nbsp;<span class="op" id="6602600">:=</span>&nbsp;<span class="ident" id="6602603">exec</span><span class="op" id="6602607">.</span><span class="ident" id="6602608">LookPath</span><span class="op" id="6602616">(</span><span class="string" id="6602617">&#34;ip&#34;</span><span class="op" id="6602621">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6602624">if</span>&nbsp;<span class="ident" id="6602627">err</span>&nbsp;<span class="op" id="6602631">!=</span>&nbsp;<span class="ident" id="6602634">nil</span>&nbsp;<span class="op" id="6602638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6602642">return</span>&nbsp;<span class="ident" id="6602649">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6602654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602657">ti</span><span class="op" id="6602659">.</span><span class="ident" id="6602660">setupCmds</span>&nbsp;<span class="op" id="6602670">=</span>&nbsp;<span class="builtinfunc" id="6602672">append</span><span class="op" id="6602678">(</span><span class="ident" id="6602679">ti</span><span class="op" id="6602681">.</span><span class="ident" id="6602682">setupCmds</span><span class="op" id="6602691">,</span>&nbsp;<span class="op" id="6602693">&amp;</span><span class="ident" id="6602694">exec</span><span class="op" id="6602698">.</span><span class="ident" id="6602699">Cmd</span><span class="op" id="6602702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602706">Path</span><span class="op" id="6602710">:</span>&nbsp;<span class="ident" id="6602712">xname</span><span class="op" id="6602717">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602721">Args</span><span class="op" id="6602725">:</span>&nbsp;<span class="op" id="6602727">[</span><span class="op" id="6602728">]</span><span class="builtintype" id="6602729">string</span><span class="op" id="6602735">{</span><span class="string" id="6602736">&#34;ip&#34;</span><span class="op" id="6602740">,</span>&nbsp;<span class="string" id="6602742">&#34;tunnel&#34;</span><span class="op" id="6602750">,</span>&nbsp;<span class="string" id="6602752">&#34;add&#34;</span><span class="op" id="6602757">,</span>&nbsp;<span class="ident" id="6602759">ti</span><span class="op" id="6602761">.</span><span class="ident" id="6602762">name</span><span class="op" id="6602766">,</span>&nbsp;<span class="string" id="6602768">&#34;mode&#34;</span><span class="op" id="6602774">,</span>&nbsp;<span class="string" id="6602776">&#34;gre&#34;</span><span class="op" id="6602781">,</span>&nbsp;<span class="string" id="6602783">&#34;local&#34;</span><span class="op" id="6602790">,</span>&nbsp;<span class="ident" id="6602792">local</span><span class="op" id="6602797">,</span>&nbsp;<span class="string" id="6602799">&#34;remote&#34;</span><span class="op" id="6602807">,</span>&nbsp;<span class="ident" id="6602809">remote</span><span class="op" id="6602815">}</span><span class="op" id="6602816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6602819">}</span><span class="op" id="6602820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602823">ti</span><span class="op" id="6602825">.</span><span class="ident" id="6602826">teardownCmds</span>&nbsp;<span class="op" id="6602839">=</span>&nbsp;<span class="builtinfunc" id="6602841">append</span><span class="op" id="6602847">(</span><span class="ident" id="6602848">ti</span><span class="op" id="6602850">.</span><span class="ident" id="6602851">teardownCmds</span><span class="op" id="6602863">,</span>&nbsp;<span class="op" id="6602865">&amp;</span><span class="ident" id="6602866">exec</span><span class="op" id="6602870">.</span><span class="ident" id="6602871">Cmd</span><span class="op" id="6602874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602878">Path</span><span class="op" id="6602882">:</span>&nbsp;<span class="ident" id="6602884">xname</span><span class="op" id="6602889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602893">Args</span><span class="op" id="6602897">:</span>&nbsp;<span class="op" id="6602899">[</span><span class="op" id="6602900">]</span><span class="builtintype" id="6602901">string</span><span class="op" id="6602907">{</span><span class="string" id="6602908">&#34;ip&#34;</span><span class="op" id="6602912">,</span>&nbsp;<span class="string" id="6602914">&#34;tunnel&#34;</span><span class="op" id="6602922">,</span>&nbsp;<span class="string" id="6602924">&#34;del&#34;</span><span class="op" id="6602929">,</span>&nbsp;<span class="ident" id="6602931">ti</span><span class="op" id="6602933">.</span><span class="ident" id="6602934">name</span><span class="op" id="6602938">,</span>&nbsp;<span class="string" id="6602940">&#34;mode&#34;</span><span class="op" id="6602946">,</span>&nbsp;<span class="string" id="6602948">&#34;gre&#34;</span><span class="op" id="6602953">,</span>&nbsp;<span class="string" id="6602955">&#34;local&#34;</span><span class="op" id="6602962">,</span>&nbsp;<span class="ident" id="6602964">local</span><span class="op" id="6602969">,</span>&nbsp;<span class="string" id="6602971">&#34;remote&#34;</span><span class="op" id="6602979">,</span>&nbsp;<span class="ident" id="6602981">remote</span><span class="op" id="6602987">}</span><span class="op" id="6602988">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6602991">}</span><span class="op" id="6602992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6602995">xname</span><span class="op" id="6603000">,</span>&nbsp;<span class="ident" id="6603002">err</span>&nbsp;<span class="op" id="6603006">=</span>&nbsp;<span class="ident" id="6603008">exec</span><span class="op" id="6603012">.</span><span class="ident" id="6603013">LookPath</span><span class="op" id="6603021">(</span><span class="string" id="6603022">&#34;ifconfig&#34;</span><span class="op" id="6603032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6603035">if</span>&nbsp;<span class="ident" id="6603038">err</span>&nbsp;<span class="op" id="6603042">!=</span>&nbsp;<span class="ident" id="6603045">nil</span>&nbsp;<span class="op" id="6603049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6603053">return</span>&nbsp;<span class="ident" id="6603060">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603065">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603068">ti</span><span class="op" id="6603070">.</span><span class="ident" id="6603071">setupCmds</span>&nbsp;<span class="op" id="6603081">=</span>&nbsp;<span class="builtinfunc" id="6603083">append</span><span class="op" id="6603089">(</span><span class="ident" id="6603090">ti</span><span class="op" id="6603092">.</span><span class="ident" id="6603093">setupCmds</span><span class="op" id="6603102">,</span>&nbsp;<span class="op" id="6603104">&amp;</span><span class="ident" id="6603105">exec</span><span class="op" id="6603109">.</span><span class="ident" id="6603110">Cmd</span><span class="op" id="6603113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603117">Path</span><span class="op" id="6603121">:</span>&nbsp;<span class="ident" id="6603123">xname</span><span class="op" id="6603128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603132">Args</span><span class="op" id="6603136">:</span>&nbsp;<span class="op" id="6603138">[</span><span class="op" id="6603139">]</span><span class="builtintype" id="6603140">string</span><span class="op" id="6603146">{</span><span class="string" id="6603147">&#34;ifconfig&#34;</span><span class="op" id="6603157">,</span>&nbsp;<span class="ident" id="6603159">ti</span><span class="op" id="6603161">.</span><span class="ident" id="6603162">name</span><span class="op" id="6603166">,</span>&nbsp;<span class="string" id="6603168">&#34;inet&#34;</span><span class="op" id="6603174">,</span>&nbsp;<span class="ident" id="6603176">local</span><span class="op" id="6603181">,</span>&nbsp;<span class="string" id="6603183">&#34;dstaddr&#34;</span><span class="op" id="6603192">,</span>&nbsp;<span class="ident" id="6603194">remote</span><span class="op" id="6603200">}</span><span class="op" id="6603201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603204">}</span><span class="op" id="6603205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6603208">return</span>&nbsp;<span class="ident" id="6603215">nil</span><br>
<span class="lineno">55</span><span class="op" id="6603219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6603222">const</span>&nbsp;<span class="op" id="6603228">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603231">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="6603252">=</span>&nbsp;<span class="num" id="6603254">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603258">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="6603279">=</span>&nbsp;<span class="num" id="6603281">18</span><br>
<span class="lineno">60</span><span class="op" id="6603284">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6603287">var</span>&nbsp;<span class="op" id="6603291">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603294">igmpInterfaceTable</span>&nbsp;<span class="op" id="6603313">=</span>&nbsp;<span class="op" id="6603315">[</span><span class="op" id="6603316">]</span><span class="ident" id="6603317">Interface</span><span class="op" id="6603326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603330">{</span><span class="ident" id="6603331">Name</span><span class="op" id="6603335">:</span>&nbsp;<span class="string" id="6603337">&#34;lo&#34;</span><span class="op" id="6603341">}</span><span class="op" id="6603342">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603346">{</span><span class="ident" id="6603347">Name</span><span class="op" id="6603351">:</span>&nbsp;<span class="string" id="6603353">&#34;eth0&#34;</span><span class="op" id="6603359">}</span><span class="op" id="6603360">,</span>&nbsp;<span class="op" id="6603362">{</span><span class="ident" id="6603363">Name</span><span class="op" id="6603367">:</span>&nbsp;<span class="string" id="6603369">&#34;eth1&#34;</span><span class="op" id="6603375">}</span><span class="op" id="6603376">,</span>&nbsp;<span class="op" id="6603378">{</span><span class="ident" id="6603379">Name</span><span class="op" id="6603383">:</span>&nbsp;<span class="string" id="6603385">&#34;eth2&#34;</span><span class="op" id="6603391">}</span><span class="op" id="6603392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603396">{</span><span class="ident" id="6603397">Name</span><span class="op" id="6603401">:</span>&nbsp;<span class="string" id="6603403">&#34;eth0.100&#34;</span><span class="op" id="6603413">}</span><span class="op" id="6603414">,</span>&nbsp;<span class="op" id="6603416">{</span><span class="ident" id="6603417">Name</span><span class="op" id="6603421">:</span>&nbsp;<span class="string" id="6603423">&#34;eth0.101&#34;</span><span class="op" id="6603433">}</span><span class="op" id="6603434">,</span>&nbsp;<span class="op" id="6603436">{</span><span class="ident" id="6603437">Name</span><span class="op" id="6603441">:</span>&nbsp;<span class="string" id="6603443">&#34;eth0.102&#34;</span><span class="op" id="6603453">}</span><span class="op" id="6603454">,</span>&nbsp;<span class="op" id="6603456">{</span><span class="ident" id="6603457">Name</span><span class="op" id="6603461">:</span>&nbsp;<span class="string" id="6603463">&#34;eth0.103&#34;</span><span class="op" id="6603473">}</span><span class="op" id="6603474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603478">{</span><span class="ident" id="6603479">Name</span><span class="op" id="6603483">:</span>&nbsp;<span class="string" id="6603485">&#34;device1tap2&#34;</span><span class="op" id="6603498">}</span><span class="op" id="6603499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603505">igmp6InterfaceTable</span>&nbsp;<span class="op" id="6603525">=</span>&nbsp;<span class="op" id="6603527">[</span><span class="op" id="6603528">]</span><span class="ident" id="6603529">Interface</span><span class="op" id="6603538">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603542">{</span><span class="ident" id="6603543">Name</span><span class="op" id="6603547">:</span>&nbsp;<span class="string" id="6603549">&#34;lo&#34;</span><span class="op" id="6603553">}</span><span class="op" id="6603554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603558">{</span><span class="ident" id="6603559">Name</span><span class="op" id="6603563">:</span>&nbsp;<span class="string" id="6603565">&#34;eth0&#34;</span><span class="op" id="6603571">}</span><span class="op" id="6603572">,</span>&nbsp;<span class="op" id="6603574">{</span><span class="ident" id="6603575">Name</span><span class="op" id="6603579">:</span>&nbsp;<span class="string" id="6603581">&#34;eth1&#34;</span><span class="op" id="6603587">}</span><span class="op" id="6603588">,</span>&nbsp;<span class="op" id="6603590">{</span><span class="ident" id="6603591">Name</span><span class="op" id="6603595">:</span>&nbsp;<span class="string" id="6603597">&#34;eth2&#34;</span><span class="op" id="6603603">}</span><span class="op" id="6603604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603608">{</span><span class="ident" id="6603609">Name</span><span class="op" id="6603613">:</span>&nbsp;<span class="string" id="6603615">&#34;eth0.100&#34;</span><span class="op" id="6603625">}</span><span class="op" id="6603626">,</span>&nbsp;<span class="op" id="6603628">{</span><span class="ident" id="6603629">Name</span><span class="op" id="6603633">:</span>&nbsp;<span class="string" id="6603635">&#34;eth0.101&#34;</span><span class="op" id="6603645">}</span><span class="op" id="6603646">,</span>&nbsp;<span class="op" id="6603648">{</span><span class="ident" id="6603649">Name</span><span class="op" id="6603653">:</span>&nbsp;<span class="string" id="6603655">&#34;eth0.102&#34;</span><span class="op" id="6603665">}</span><span class="op" id="6603666">,</span>&nbsp;<span class="op" id="6603668">{</span><span class="ident" id="6603669">Name</span><span class="op" id="6603673">:</span>&nbsp;<span class="string" id="6603675">&#34;eth0.103&#34;</span><span class="op" id="6603685">}</span><span class="op" id="6603686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603690">{</span><span class="ident" id="6603691">Name</span><span class="op" id="6603695">:</span>&nbsp;<span class="string" id="6603697">&#34;device1tap2&#34;</span><span class="op" id="6603710">}</span><span class="op" id="6603711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603715">{</span><span class="ident" id="6603716">Name</span><span class="op" id="6603720">:</span>&nbsp;<span class="string" id="6603722">&#34;pan0&#34;</span><span class="op" id="6603728">}</span><span class="op" id="6603729">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603732">}</span><br>
<span class="lineno"></span><span class="op" id="6603734">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6603737">func</span>&nbsp;<span class="ident" id="6603742">TestParseProcNet</span><span class="op" id="6603758">(</span><span class="ident" id="6603759">t</span>&nbsp;<span class="op" id="6603761">*</span><span class="ident" id="6603762">testing</span><span class="op" id="6603769">.</span><span class="ident" id="6603770">T</span><span class="op" id="6603771">)</span>&nbsp;<span class="op" id="6603773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6603776">defer</span>&nbsp;<span class="keyword" id="6603782">func</span><span class="op" id="6603786">(</span><span class="op" id="6603787">)</span>&nbsp;<span class="op" id="6603789">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6603793">if</span>&nbsp;<span class="ident" id="6603796">p</span>&nbsp;<span class="op" id="6603798">:=</span>&nbsp;<span class="builtinfunc" id="6603801">recover</span><span class="op" id="6603808">(</span><span class="op" id="6603809">)</span><span class="op" id="6603810">;</span>&nbsp;<span class="ident" id="6603812">p</span>&nbsp;<span class="op" id="6603814">!=</span>&nbsp;<span class="ident" id="6603817">nil</span>&nbsp;<span class="op" id="6603821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603826">t</span><span class="op" id="6603827">.</span><span class="ident" id="6603828">Fatalf</span><span class="op" id="6603834">(</span><span class="string" id="6603835">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="6603887">,</span>&nbsp;<span class="ident" id="6603889">p</span><span class="op" id="6603890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6603897">}</span><span class="op" id="6603898">(</span><span class="op" id="6603899">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6603903">var</span>&nbsp;<span class="ident" id="6603907">ifmat4</span>&nbsp;<span class="op" id="6603914">[</span><span class="op" id="6603915">]</span><span class="ident" id="6603916">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6603922">for</span>&nbsp;<span class="ident" id="6603926">_</span><span class="op" id="6603927">,</span>&nbsp;<span class="ident" id="6603929">ifi</span>&nbsp;<span class="op" id="6603933">:=</span>&nbsp;<span class="keyword" id="6603936">range</span>&nbsp;<span class="ident" id="6603942">igmpInterfaceTable</span>&nbsp;<span class="op" id="6603961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6603965">ifmat</span>&nbsp;<span class="op" id="6603971">:=</span>&nbsp;<span class="ident" id="6603974">parseProcNetIGMP</span><span class="op" id="6603990">(</span><span class="string" id="6603991">&#34;testdata/igmp&#34;</span><span class="op" id="6604006">,</span>&nbsp;<span class="op" id="6604008">&amp;</span><span class="ident" id="6604009">ifi</span><span class="op" id="6604012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6604016">ifmat4</span>&nbsp;<span class="op" id="6604023">=</span>&nbsp;<span class="builtinfunc" id="6604025">append</span><span class="op" id="6604031">(</span><span class="ident" id="6604032">ifmat4</span><span class="op" id="6604038">,</span>&nbsp;<span class="ident" id="6604040">ifmat</span><span class="op" id="6604045">...</span><span class="op" id="6604048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6604051">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6604054">if</span>&nbsp;<span class="builtinfunc" id="6604057">len</span><span class="op" id="6604060">(</span><span class="ident" id="6604061">ifmat4</span><span class="op" id="6604067">)</span>&nbsp;<span class="op" id="6604069">!=</span>&nbsp;<span class="ident" id="6604072">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="6604093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6604097">t</span><span class="op" id="6604098">.</span><span class="ident" id="6604099">Fatalf</span><span class="op" id="6604105">(</span><span class="string" id="6604106">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6604158">,</span>&nbsp;<span class="builtinfunc" id="6604160">len</span><span class="op" id="6604163">(</span><span class="ident" id="6604164">ifmat4</span><span class="op" id="6604170">)</span><span class="op" id="6604171">,</span>&nbsp;<span class="ident" id="6604173">numOfTestIPv4MCAddrs</span><span class="op" id="6604193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6604196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6604200">var</span>&nbsp;<span class="ident" id="6604204">ifmat6</span>&nbsp;<span class="op" id="6604211">[</span><span class="op" id="6604212">]</span><span class="ident" id="6604213">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6604219">for</span>&nbsp;<span class="ident" id="6604223">_</span><span class="op" id="6604224">,</span>&nbsp;<span class="ident" id="6604226">ifi</span>&nbsp;<span class="op" id="6604230">:=</span>&nbsp;<span class="keyword" id="6604233">range</span>&nbsp;<span class="ident" id="6604239">igmp6InterfaceTable</span>&nbsp;<span class="op" id="6604259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6604263">ifmat</span>&nbsp;<span class="op" id="6604269">:=</span>&nbsp;<span class="ident" id="6604272">parseProcNetIGMP6</span><span class="op" id="6604289">(</span><span class="string" id="6604290">&#34;testdata/igmp6&#34;</span><span class="op" id="6604306">,</span>&nbsp;<span class="op" id="6604308">&amp;</span><span class="ident" id="6604309">ifi</span><span class="op" id="6604312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6604316">ifmat6</span>&nbsp;<span class="op" id="6604323">=</span>&nbsp;<span class="builtinfunc" id="6604325">append</span><span class="op" id="6604331">(</span><span class="ident" id="6604332">ifmat6</span><span class="op" id="6604338">,</span>&nbsp;<span class="ident" id="6604340">ifmat</span><span class="op" id="6604345">...</span><span class="op" id="6604348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6604351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6604354">if</span>&nbsp;<span class="builtinfunc" id="6604357">len</span><span class="op" id="6604360">(</span><span class="ident" id="6604361">ifmat6</span><span class="op" id="6604367">)</span>&nbsp;<span class="op" id="6604369">!=</span>&nbsp;<span class="ident" id="6604372">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="6604393">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6604397">t</span><span class="op" id="6604398">.</span><span class="ident" id="6604399">Fatalf</span><span class="op" id="6604405">(</span><span class="string" id="6604406">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6604459">,</span>&nbsp;<span class="builtinfunc" id="6604461">len</span><span class="op" id="6604464">(</span><span class="ident" id="6604465">ifmat6</span><span class="op" id="6604471">)</span><span class="op" id="6604472">,</span>&nbsp;<span class="ident" id="6604474">numOfTestIPv6MCAddrs</span><span class="op" id="6604494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6604497">}</span><br>
<span class="lineno"></span><span class="op" id="6604499">}</span>
</div>
</body>
</html>
