<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2430848">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2430903">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2430957">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2431008">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2431084">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2431158">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2431239">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2431310">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2431385">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2431456">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2431515">//</span><br>
<span class="lineno"></span><span class="comment" id="2431518">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2431594">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2431677">//</span><br>
<span class="lineno"></span><span class="comment" id="2431680">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2431748">//</span><br>
<span class="lineno"></span><span class="comment" id="2431751">//&nbsp;&nbsp;&nbsp;&nbsp;file,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2431806">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2431825">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2431844">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2431849">//</span><br>
<span class="lineno"></span><span class="comment" id="2431852">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2431922">//</span><br>
<span class="lineno">25</span><span class="comment" id="2431925">//&nbsp;&nbsp;&nbsp;&nbsp;open&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2431968">//</span><br>
<span class="lineno"></span><span class="comment" id="2431971">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2432039">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2432110">//</span><br>
<span class="lineno">30</span><span class="comment" id="2432113">//&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2432142">//&nbsp;&nbsp;&nbsp;&nbsp;count,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2432175">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2432194">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2432213">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">35</span><span class="comment" id="2432218">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2432276">//</span><br>
<span class="lineno"></span><span class="keyword" id="2432279">package</span>&nbsp;<span class="ident" id="2432287">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2432291">import</span>&nbsp;<span class="op" id="2432298">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2432301">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2432307">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2432317">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2432320">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2432379">func</span>&nbsp;<span class="op" id="2432384">(</span><span class="ident" id="2432385">f</span>&nbsp;<span class="op" id="2432387">*</span><span class="ident" id="2432388">File</span><span class="op" id="2432392">)</span>&nbsp;<span class="ident" id="2432394">Name</span><span class="op" id="2432398">(</span><span class="op" id="2432399">)</span>&nbsp;<span class="builtintype" id="2432401">string</span>&nbsp;<span class="op" id="2432408">{</span>&nbsp;<span class="keyword" id="2432410">return</span>&nbsp;<span class="ident" id="2432417">f</span><span class="op" id="2432418">.</span><span class="ident" id="2432419">name</span>&nbsp;<span class="op" id="2432424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2432427">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2432503">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2432560">var</span>&nbsp;<span class="op" id="2432564">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432567">Stdin</span>&nbsp;&nbsp;<span class="op" id="2432574">=</span>&nbsp;<span class="ident" id="2432576">NewFile</span><span class="op" id="2432583">(</span><span class="builtintype" id="2432584">uintptr</span><span class="op" id="2432591">(</span><span class="ident" id="2432592">syscall</span><span class="op" id="2432599">.</span><span class="ident" id="2432600">Stdin</span><span class="op" id="2432605">)</span><span class="op" id="2432606">,</span>&nbsp;<span class="string" id="2432608">&#34;/dev/stdin&#34;</span><span class="op" id="2432620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432623">Stdout</span>&nbsp;<span class="op" id="2432630">=</span>&nbsp;<span class="ident" id="2432632">NewFile</span><span class="op" id="2432639">(</span><span class="builtintype" id="2432640">uintptr</span><span class="op" id="2432647">(</span><span class="ident" id="2432648">syscall</span><span class="op" id="2432655">.</span><span class="ident" id="2432656">Stdout</span><span class="op" id="2432662">)</span><span class="op" id="2432663">,</span>&nbsp;<span class="string" id="2432665">&#34;/dev/stdout&#34;</span><span class="op" id="2432678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432681">Stderr</span>&nbsp;<span class="op" id="2432688">=</span>&nbsp;<span class="ident" id="2432690">NewFile</span><span class="op" id="2432697">(</span><span class="builtintype" id="2432698">uintptr</span><span class="op" id="2432705">(</span><span class="ident" id="2432706">syscall</span><span class="op" id="2432713">.</span><span class="ident" id="2432714">Stderr</span><span class="op" id="2432720">)</span><span class="op" id="2432721">,</span>&nbsp;<span class="string" id="2432723">&#34;/dev/stderr&#34;</span><span class="op" id="2432736">)</span><br>
<span class="lineno"></span><span class="op" id="2432738">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2432741">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2432813">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2432854">const</span>&nbsp;<span class="op" id="2432860">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432863">O_RDONLY</span>&nbsp;<span class="builtintype" id="2432872">int</span>&nbsp;<span class="op" id="2432876">=</span>&nbsp;<span class="ident" id="2432878">syscall</span><span class="op" id="2432885">.</span><span class="ident" id="2432886">O_RDONLY</span>&nbsp;<span class="comment" id="2432895">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432924">O_WRONLY</span>&nbsp;<span class="builtintype" id="2432933">int</span>&nbsp;<span class="op" id="2432937">=</span>&nbsp;<span class="ident" id="2432939">syscall</span><span class="op" id="2432946">.</span><span class="ident" id="2432947">O_WRONLY</span>&nbsp;<span class="comment" id="2432956">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432986">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2432995">int</span>&nbsp;<span class="op" id="2432999">=</span>&nbsp;<span class="ident" id="2433001">syscall</span><span class="op" id="2433008">.</span><span class="ident" id="2433009">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2433018">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433048">O_APPEND</span>&nbsp;<span class="builtintype" id="2433057">int</span>&nbsp;<span class="op" id="2433061">=</span>&nbsp;<span class="ident" id="2433063">syscall</span><span class="op" id="2433070">.</span><span class="ident" id="2433071">O_APPEND</span>&nbsp;<span class="comment" id="2433080">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433122">O_CREATE</span>&nbsp;<span class="builtintype" id="2433131">int</span>&nbsp;<span class="op" id="2433135">=</span>&nbsp;<span class="ident" id="2433137">syscall</span><span class="op" id="2433144">.</span><span class="ident" id="2433145">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2433154">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433192">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2433201">int</span>&nbsp;<span class="op" id="2433205">=</span>&nbsp;<span class="ident" id="2433207">syscall</span><span class="op" id="2433214">.</span><span class="ident" id="2433215">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2433224">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433268">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2433277">int</span>&nbsp;<span class="op" id="2433281">=</span>&nbsp;<span class="ident" id="2433283">syscall</span><span class="op" id="2433290">.</span><span class="ident" id="2433291">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2433300">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433330">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2433339">int</span>&nbsp;<span class="op" id="2433343">=</span>&nbsp;<span class="ident" id="2433345">syscall</span><span class="op" id="2433352">.</span><span class="ident" id="2433353">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2433362">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2433405">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2433408">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2433431">const</span>&nbsp;<span class="op" id="2433437">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433440">SEEK_SET</span>&nbsp;<span class="builtintype" id="2433449">int</span>&nbsp;<span class="op" id="2433453">=</span>&nbsp;<span class="num" id="2433455">0</span>&nbsp;<span class="comment" id="2433457">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433501">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2433510">int</span>&nbsp;<span class="op" id="2433514">=</span>&nbsp;<span class="num" id="2433516">1</span>&nbsp;<span class="comment" id="2433518">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433558">SEEK_END</span>&nbsp;<span class="builtintype" id="2433567">int</span>&nbsp;<span class="op" id="2433571">=</span>&nbsp;<span class="num" id="2433573">2</span>&nbsp;<span class="comment" id="2433575">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2433603">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2433606">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2433671">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2433716">type</span>&nbsp;<span class="ident" id="2433721">LinkError</span>&nbsp;<span class="keyword" id="2433731">struct</span>&nbsp;<span class="op" id="2433738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433741">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2433745">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433753">Old</span>&nbsp;<span class="builtintype" id="2433757">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433765">New</span>&nbsp;<span class="builtintype" id="2433769">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433777">Err</span>&nbsp;<span class="builtintype" id="2433781">error</span><br>
<span class="lineno"></span><span class="op" id="2433787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2433790">func</span>&nbsp;<span class="op" id="2433795">(</span><span class="ident" id="2433796">e</span>&nbsp;<span class="op" id="2433798">*</span><span class="ident" id="2433799">LinkError</span><span class="op" id="2433808">)</span>&nbsp;<span class="ident" id="2433810">Error</span><span class="op" id="2433815">(</span><span class="op" id="2433816">)</span>&nbsp;<span class="builtintype" id="2433818">string</span>&nbsp;<span class="op" id="2433825">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433828">return</span>&nbsp;<span class="ident" id="2433835">e</span><span class="op" id="2433836">.</span><span class="ident" id="2433837">Op</span>&nbsp;<span class="op" id="2433840">+</span>&nbsp;<span class="string" id="2433842">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2433846">+</span>&nbsp;<span class="ident" id="2433848">e</span><span class="op" id="2433849">.</span><span class="ident" id="2433850">Old</span>&nbsp;<span class="op" id="2433854">+</span>&nbsp;<span class="string" id="2433856">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2433860">+</span>&nbsp;<span class="ident" id="2433862">e</span><span class="op" id="2433863">.</span><span class="ident" id="2433864">New</span>&nbsp;<span class="op" id="2433868">+</span>&nbsp;<span class="string" id="2433870">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2433875">+</span>&nbsp;<span class="ident" id="2433877">e</span><span class="op" id="2433878">.</span><span class="ident" id="2433879">Err</span><span class="op" id="2433882">.</span><span class="ident" id="2433883">Error</span><span class="op" id="2433888">(</span><span class="op" id="2433889">)</span><br>
<span class="lineno"></span><span class="op" id="2433891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2433894">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2433942">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2434003">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2434062">func</span>&nbsp;<span class="op" id="2434067">(</span><span class="ident" id="2434068">f</span>&nbsp;<span class="op" id="2434070">*</span><span class="ident" id="2434071">File</span><span class="op" id="2434075">)</span>&nbsp;<span class="ident" id="2434077">Read</span><span class="op" id="2434081">(</span><span class="ident" id="2434082">b</span>&nbsp;<span class="op" id="2434084">[</span><span class="op" id="2434085">]</span><span class="builtintype" id="2434086">byte</span><span class="op" id="2434090">)</span>&nbsp;<span class="op" id="2434092">(</span><span class="ident" id="2434093">n</span>&nbsp;<span class="builtintype" id="2434095">int</span><span class="op" id="2434098">,</span>&nbsp;<span class="ident" id="2434100">err</span>&nbsp;<span class="builtintype" id="2434104">error</span><span class="op" id="2434109">)</span>&nbsp;<span class="op" id="2434111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434114">if</span>&nbsp;<span class="ident" id="2434117">f</span>&nbsp;<span class="op" id="2434119">==</span>&nbsp;<span class="builtintype" id="2434122">nil</span>&nbsp;<span class="op" id="2434126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434130">return</span>&nbsp;<span class="num" id="2434137">0</span><span class="op" id="2434138">,</span>&nbsp;<span class="ident" id="2434140">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434152">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434155">n</span><span class="op" id="2434156">,</span>&nbsp;<span class="ident" id="2434158">e</span>&nbsp;<span class="op" id="2434160">:=</span>&nbsp;<span class="ident" id="2434163">f</span><span class="op" id="2434164">.</span><span class="ident" id="2434165">read</span><span class="op" id="2434169">(</span><span class="ident" id="2434170">b</span><span class="op" id="2434171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434174">if</span>&nbsp;<span class="ident" id="2434177">n</span>&nbsp;<span class="op" id="2434179">&lt;</span>&nbsp;<span class="num" id="2434181">0</span>&nbsp;<span class="op" id="2434183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434187">n</span>&nbsp;<span class="op" id="2434189">=</span>&nbsp;<span class="num" id="2434191">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434197">if</span>&nbsp;<span class="ident" id="2434200">n</span>&nbsp;<span class="op" id="2434202">==</span>&nbsp;<span class="num" id="2434205">0</span>&nbsp;<span class="op" id="2434207">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2434210">len</span><span class="op" id="2434213">(</span><span class="ident" id="2434214">b</span><span class="op" id="2434215">)</span>&nbsp;<span class="op" id="2434217">&gt;</span>&nbsp;<span class="num" id="2434219">0</span>&nbsp;<span class="op" id="2434221">&amp;&amp;</span>&nbsp;<span class="ident" id="2434224">e</span>&nbsp;<span class="op" id="2434226">==</span>&nbsp;<span class="builtintype" id="2434229">nil</span>&nbsp;<span class="op" id="2434233">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434237">return</span>&nbsp;<span class="num" id="2434244">0</span><span class="op" id="2434245">,</span>&nbsp;<span class="ident" id="2434247">io</span><span class="op" id="2434249">.</span><span class="ident" id="2434250">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434258">if</span>&nbsp;<span class="ident" id="2434261">e</span>&nbsp;<span class="op" id="2434263">!=</span>&nbsp;<span class="builtintype" id="2434266">nil</span>&nbsp;<span class="op" id="2434270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434274">err</span>&nbsp;<span class="op" id="2434278">=</span>&nbsp;<span class="op" id="2434280">&amp;</span><span class="ident" id="2434281">PathError</span><span class="op" id="2434290">{</span><span class="string" id="2434291">&#34;read&#34;</span><span class="op" id="2434297">,</span>&nbsp;<span class="ident" id="2434299">f</span><span class="op" id="2434300">.</span><span class="ident" id="2434301">name</span><span class="op" id="2434305">,</span>&nbsp;<span class="ident" id="2434307">e</span><span class="op" id="2434308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434311">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434314">return</span>&nbsp;<span class="ident" id="2434321">n</span><span class="op" id="2434322">,</span>&nbsp;<span class="ident" id="2434324">err</span><br>
<span class="lineno"></span><span class="op" id="2434328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2434331">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2434403">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2434465">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2434523">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2434564">func</span>&nbsp;<span class="op" id="2434569">(</span><span class="ident" id="2434570">f</span>&nbsp;<span class="op" id="2434572">*</span><span class="ident" id="2434573">File</span><span class="op" id="2434577">)</span>&nbsp;<span class="ident" id="2434579">ReadAt</span><span class="op" id="2434585">(</span><span class="ident" id="2434586">b</span>&nbsp;<span class="op" id="2434588">[</span><span class="op" id="2434589">]</span><span class="builtintype" id="2434590">byte</span><span class="op" id="2434594">,</span>&nbsp;<span class="ident" id="2434596">off</span>&nbsp;<span class="ident" id="2434600">int64</span><span class="op" id="2434605">)</span>&nbsp;<span class="op" id="2434607">(</span><span class="ident" id="2434608">n</span>&nbsp;<span class="builtintype" id="2434610">int</span><span class="op" id="2434613">,</span>&nbsp;<span class="ident" id="2434615">err</span>&nbsp;<span class="builtintype" id="2434619">error</span><span class="op" id="2434624">)</span>&nbsp;<span class="op" id="2434626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434629">if</span>&nbsp;<span class="ident" id="2434632">f</span>&nbsp;<span class="op" id="2434634">==</span>&nbsp;<span class="builtintype" id="2434637">nil</span>&nbsp;<span class="op" id="2434641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434645">return</span>&nbsp;<span class="num" id="2434652">0</span><span class="op" id="2434653">,</span>&nbsp;<span class="ident" id="2434655">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434670">for</span>&nbsp;<span class="builtinfunc" id="2434674">len</span><span class="op" id="2434677">(</span><span class="ident" id="2434678">b</span><span class="op" id="2434679">)</span>&nbsp;<span class="op" id="2434681">&gt;</span>&nbsp;<span class="num" id="2434683">0</span>&nbsp;<span class="op" id="2434685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434689">m</span><span class="op" id="2434690">,</span>&nbsp;<span class="ident" id="2434692">e</span>&nbsp;<span class="op" id="2434694">:=</span>&nbsp;<span class="ident" id="2434697">f</span><span class="op" id="2434698">.</span><span class="ident" id="2434699">pread</span><span class="op" id="2434704">(</span><span class="ident" id="2434705">b</span><span class="op" id="2434706">,</span>&nbsp;<span class="ident" id="2434708">off</span><span class="op" id="2434711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434715">if</span>&nbsp;<span class="ident" id="2434718">m</span>&nbsp;<span class="op" id="2434720">==</span>&nbsp;<span class="num" id="2434723">0</span>&nbsp;<span class="op" id="2434725">&amp;&amp;</span>&nbsp;<span class="ident" id="2434728">e</span>&nbsp;<span class="op" id="2434730">==</span>&nbsp;<span class="builtintype" id="2434733">nil</span>&nbsp;<span class="op" id="2434737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434742">return</span>&nbsp;<span class="ident" id="2434749">n</span><span class="op" id="2434750">,</span>&nbsp;<span class="ident" id="2434752">io</span><span class="op" id="2434754">.</span><span class="ident" id="2434755">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434765">if</span>&nbsp;<span class="ident" id="2434768">e</span>&nbsp;<span class="op" id="2434770">!=</span>&nbsp;<span class="builtintype" id="2434773">nil</span>&nbsp;<span class="op" id="2434777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434782">err</span>&nbsp;<span class="op" id="2434786">=</span>&nbsp;<span class="op" id="2434788">&amp;</span><span class="ident" id="2434789">PathError</span><span class="op" id="2434798">{</span><span class="string" id="2434799">&#34;read&#34;</span><span class="op" id="2434805">,</span>&nbsp;<span class="ident" id="2434807">f</span><span class="op" id="2434808">.</span><span class="ident" id="2434809">name</span><span class="op" id="2434813">,</span>&nbsp;<span class="ident" id="2434815">e</span><span class="op" id="2434816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434821">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434829">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434833">n</span>&nbsp;<span class="op" id="2434835">+=</span>&nbsp;<span class="ident" id="2434838">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434842">b</span>&nbsp;<span class="op" id="2434844">=</span>&nbsp;<span class="ident" id="2434846">b</span><span class="op" id="2434847">[</span><span class="ident" id="2434848">m</span><span class="op" id="2434849">:</span><span class="op" id="2434850">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434854">off</span>&nbsp;<span class="op" id="2434858">+=</span>&nbsp;<span class="ident" id="2434861">int64</span><span class="op" id="2434866">(</span><span class="ident" id="2434867">m</span><span class="op" id="2434868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434874">return</span><br>
<span class="lineno">130</span><span class="op" id="2434881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2434884">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2434926">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2434990">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2435041">func</span>&nbsp;<span class="op" id="2435046">(</span><span class="ident" id="2435047">f</span>&nbsp;<span class="op" id="2435049">*</span><span class="ident" id="2435050">File</span><span class="op" id="2435054">)</span>&nbsp;<span class="ident" id="2435056">Write</span><span class="op" id="2435061">(</span><span class="ident" id="2435062">b</span>&nbsp;<span class="op" id="2435064">[</span><span class="op" id="2435065">]</span><span class="builtintype" id="2435066">byte</span><span class="op" id="2435070">)</span>&nbsp;<span class="op" id="2435072">(</span><span class="ident" id="2435073">n</span>&nbsp;<span class="builtintype" id="2435075">int</span><span class="op" id="2435078">,</span>&nbsp;<span class="ident" id="2435080">err</span>&nbsp;<span class="builtintype" id="2435084">error</span><span class="op" id="2435089">)</span>&nbsp;<span class="op" id="2435091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435094">if</span>&nbsp;<span class="ident" id="2435097">f</span>&nbsp;<span class="op" id="2435099">==</span>&nbsp;<span class="builtintype" id="2435102">nil</span>&nbsp;<span class="op" id="2435106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435110">return</span>&nbsp;<span class="num" id="2435117">0</span><span class="op" id="2435118">,</span>&nbsp;<span class="ident" id="2435120">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435135">n</span><span class="op" id="2435136">,</span>&nbsp;<span class="ident" id="2435138">e</span>&nbsp;<span class="op" id="2435140">:=</span>&nbsp;<span class="ident" id="2435143">f</span><span class="op" id="2435144">.</span><span class="ident" id="2435145">write</span><span class="op" id="2435150">(</span><span class="ident" id="2435151">b</span><span class="op" id="2435152">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435155">if</span>&nbsp;<span class="ident" id="2435158">n</span>&nbsp;<span class="op" id="2435160">&lt;</span>&nbsp;<span class="num" id="2435162">0</span>&nbsp;<span class="op" id="2435164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435168">n</span>&nbsp;<span class="op" id="2435170">=</span>&nbsp;<span class="num" id="2435172">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435178">if</span>&nbsp;<span class="ident" id="2435181">n</span>&nbsp;<span class="op" id="2435183">!=</span>&nbsp;<span class="builtinfunc" id="2435186">len</span><span class="op" id="2435189">(</span><span class="ident" id="2435190">b</span><span class="op" id="2435191">)</span>&nbsp;<span class="op" id="2435193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435197">err</span>&nbsp;<span class="op" id="2435201">=</span>&nbsp;<span class="ident" id="2435203">io</span><span class="op" id="2435205">.</span><span class="ident" id="2435206">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435225">epipecheck</span><span class="op" id="2435235">(</span><span class="ident" id="2435236">f</span><span class="op" id="2435237">,</span>&nbsp;<span class="ident" id="2435239">e</span><span class="op" id="2435240">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435244">if</span>&nbsp;<span class="ident" id="2435247">e</span>&nbsp;<span class="op" id="2435249">!=</span>&nbsp;<span class="builtintype" id="2435252">nil</span>&nbsp;<span class="op" id="2435256">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435260">err</span>&nbsp;<span class="op" id="2435264">=</span>&nbsp;<span class="op" id="2435266">&amp;</span><span class="ident" id="2435267">PathError</span><span class="op" id="2435276">{</span><span class="string" id="2435277">&#34;write&#34;</span><span class="op" id="2435284">,</span>&nbsp;<span class="ident" id="2435286">f</span><span class="op" id="2435287">.</span><span class="ident" id="2435288">name</span><span class="op" id="2435292">,</span>&nbsp;<span class="ident" id="2435294">e</span><span class="op" id="2435295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435301">return</span>&nbsp;<span class="ident" id="2435308">n</span><span class="op" id="2435309">,</span>&nbsp;<span class="ident" id="2435311">err</span><br>
<span class="lineno"></span><span class="op" id="2435315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2435318">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2435390">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2435454">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2435507">func</span>&nbsp;<span class="op" id="2435512">(</span><span class="ident" id="2435513">f</span>&nbsp;<span class="op" id="2435515">*</span><span class="ident" id="2435516">File</span><span class="op" id="2435520">)</span>&nbsp;<span class="ident" id="2435522">WriteAt</span><span class="op" id="2435529">(</span><span class="ident" id="2435530">b</span>&nbsp;<span class="op" id="2435532">[</span><span class="op" id="2435533">]</span><span class="builtintype" id="2435534">byte</span><span class="op" id="2435538">,</span>&nbsp;<span class="ident" id="2435540">off</span>&nbsp;<span class="ident" id="2435544">int64</span><span class="op" id="2435549">)</span>&nbsp;<span class="op" id="2435551">(</span><span class="ident" id="2435552">n</span>&nbsp;<span class="builtintype" id="2435554">int</span><span class="op" id="2435557">,</span>&nbsp;<span class="ident" id="2435559">err</span>&nbsp;<span class="builtintype" id="2435563">error</span><span class="op" id="2435568">)</span>&nbsp;<span class="op" id="2435570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435573">if</span>&nbsp;<span class="ident" id="2435576">f</span>&nbsp;<span class="op" id="2435578">==</span>&nbsp;<span class="builtintype" id="2435581">nil</span>&nbsp;<span class="op" id="2435585">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435589">return</span>&nbsp;<span class="num" id="2435596">0</span><span class="op" id="2435597">,</span>&nbsp;<span class="ident" id="2435599">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435614">for</span>&nbsp;<span class="builtinfunc" id="2435618">len</span><span class="op" id="2435621">(</span><span class="ident" id="2435622">b</span><span class="op" id="2435623">)</span>&nbsp;<span class="op" id="2435625">&gt;</span>&nbsp;<span class="num" id="2435627">0</span>&nbsp;<span class="op" id="2435629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435633">m</span><span class="op" id="2435634">,</span>&nbsp;<span class="ident" id="2435636">e</span>&nbsp;<span class="op" id="2435638">:=</span>&nbsp;<span class="ident" id="2435641">f</span><span class="op" id="2435642">.</span><span class="ident" id="2435643">pwrite</span><span class="op" id="2435649">(</span><span class="ident" id="2435650">b</span><span class="op" id="2435651">,</span>&nbsp;<span class="ident" id="2435653">off</span><span class="op" id="2435656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435660">if</span>&nbsp;<span class="ident" id="2435663">e</span>&nbsp;<span class="op" id="2435665">!=</span>&nbsp;<span class="builtintype" id="2435668">nil</span>&nbsp;<span class="op" id="2435672">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435677">err</span>&nbsp;<span class="op" id="2435681">=</span>&nbsp;<span class="op" id="2435683">&amp;</span><span class="ident" id="2435684">PathError</span><span class="op" id="2435693">{</span><span class="string" id="2435694">&#34;write&#34;</span><span class="op" id="2435701">,</span>&nbsp;<span class="ident" id="2435703">f</span><span class="op" id="2435704">.</span><span class="ident" id="2435705">name</span><span class="op" id="2435709">,</span>&nbsp;<span class="ident" id="2435711">e</span><span class="op" id="2435712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435717">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435729">n</span>&nbsp;<span class="op" id="2435731">+=</span>&nbsp;<span class="ident" id="2435734">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435738">b</span>&nbsp;<span class="op" id="2435740">=</span>&nbsp;<span class="ident" id="2435742">b</span><span class="op" id="2435743">[</span><span class="ident" id="2435744">m</span><span class="op" id="2435745">:</span><span class="op" id="2435746">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435750">off</span>&nbsp;<span class="op" id="2435754">+=</span>&nbsp;<span class="ident" id="2435757">int64</span><span class="op" id="2435762">(</span><span class="ident" id="2435763">m</span><span class="op" id="2435764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435770">return</span><br>
<span class="lineno"></span><span class="op" id="2435777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2435780">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2435862">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2435938">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2436006">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2436057">func</span>&nbsp;<span class="op" id="2436062">(</span><span class="ident" id="2436063">f</span>&nbsp;<span class="op" id="2436065">*</span><span class="ident" id="2436066">File</span><span class="op" id="2436070">)</span>&nbsp;<span class="ident" id="2436072">Seek</span><span class="op" id="2436076">(</span><span class="ident" id="2436077">offset</span>&nbsp;<span class="ident" id="2436084">int64</span><span class="op" id="2436089">,</span>&nbsp;<span class="ident" id="2436091">whence</span>&nbsp;<span class="builtintype" id="2436098">int</span><span class="op" id="2436101">)</span>&nbsp;<span class="op" id="2436103">(</span><span class="ident" id="2436104">ret</span>&nbsp;<span class="ident" id="2436108">int64</span><span class="op" id="2436113">,</span>&nbsp;<span class="ident" id="2436115">err</span>&nbsp;<span class="builtintype" id="2436119">error</span><span class="op" id="2436124">)</span>&nbsp;<span class="op" id="2436126">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436129">if</span>&nbsp;<span class="ident" id="2436132">f</span>&nbsp;<span class="op" id="2436134">==</span>&nbsp;<span class="builtintype" id="2436137">nil</span>&nbsp;<span class="op" id="2436141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436145">return</span>&nbsp;<span class="num" id="2436152">0</span><span class="op" id="2436153">,</span>&nbsp;<span class="ident" id="2436155">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436170">r</span><span class="op" id="2436171">,</span>&nbsp;<span class="ident" id="2436173">e</span>&nbsp;<span class="op" id="2436175">:=</span>&nbsp;<span class="ident" id="2436178">f</span><span class="op" id="2436179">.</span><span class="ident" id="2436180">seek</span><span class="op" id="2436184">(</span><span class="ident" id="2436185">offset</span><span class="op" id="2436191">,</span>&nbsp;<span class="ident" id="2436193">whence</span><span class="op" id="2436199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436202">if</span>&nbsp;<span class="ident" id="2436205">e</span>&nbsp;<span class="op" id="2436207">==</span>&nbsp;<span class="builtintype" id="2436210">nil</span>&nbsp;<span class="op" id="2436214">&amp;&amp;</span>&nbsp;<span class="ident" id="2436217">f</span><span class="op" id="2436218">.</span><span class="ident" id="2436219">dirinfo</span>&nbsp;<span class="op" id="2436227">!=</span>&nbsp;<span class="builtintype" id="2436230">nil</span>&nbsp;<span class="op" id="2436234">&amp;&amp;</span>&nbsp;<span class="ident" id="2436237">r</span>&nbsp;<span class="op" id="2436239">!=</span>&nbsp;<span class="num" id="2436242">0</span>&nbsp;<span class="op" id="2436244">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436248">e</span>&nbsp;<span class="op" id="2436250">=</span>&nbsp;<span class="ident" id="2436252">syscall</span><span class="op" id="2436259">.</span><span class="ident" id="2436260">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436271">if</span>&nbsp;<span class="ident" id="2436274">e</span>&nbsp;<span class="op" id="2436276">!=</span>&nbsp;<span class="builtintype" id="2436279">nil</span>&nbsp;<span class="op" id="2436283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436287">return</span>&nbsp;<span class="num" id="2436294">0</span><span class="op" id="2436295">,</span>&nbsp;<span class="op" id="2436297">&amp;</span><span class="ident" id="2436298">PathError</span><span class="op" id="2436307">{</span><span class="string" id="2436308">&#34;seek&#34;</span><span class="op" id="2436314">,</span>&nbsp;<span class="ident" id="2436316">f</span><span class="op" id="2436317">.</span><span class="ident" id="2436318">name</span><span class="op" id="2436322">,</span>&nbsp;<span class="ident" id="2436324">e</span><span class="op" id="2436325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436328">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436331">return</span>&nbsp;<span class="ident" id="2436338">r</span><span class="op" id="2436339">,</span>&nbsp;<span class="builtintype" id="2436341">nil</span><br>
<span class="lineno"></span><span class="op" id="2436345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2436348">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2436426">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2436447">func</span>&nbsp;<span class="op" id="2436452">(</span><span class="ident" id="2436453">f</span>&nbsp;<span class="op" id="2436455">*</span><span class="ident" id="2436456">File</span><span class="op" id="2436460">)</span>&nbsp;<span class="ident" id="2436462">WriteString</span><span class="op" id="2436473">(</span><span class="ident" id="2436474">s</span>&nbsp;<span class="builtintype" id="2436476">string</span><span class="op" id="2436482">)</span>&nbsp;<span class="op" id="2436484">(</span><span class="ident" id="2436485">ret</span>&nbsp;<span class="builtintype" id="2436489">int</span><span class="op" id="2436492">,</span>&nbsp;<span class="ident" id="2436494">err</span>&nbsp;<span class="builtintype" id="2436498">error</span><span class="op" id="2436503">)</span>&nbsp;<span class="op" id="2436505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436508">if</span>&nbsp;<span class="ident" id="2436511">f</span>&nbsp;<span class="op" id="2436513">==</span>&nbsp;<span class="builtintype" id="2436516">nil</span>&nbsp;<span class="op" id="2436520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436524">return</span>&nbsp;<span class="num" id="2436531">0</span><span class="op" id="2436532">,</span>&nbsp;<span class="ident" id="2436534">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436549">return</span>&nbsp;<span class="ident" id="2436556">f</span><span class="op" id="2436557">.</span><span class="ident" id="2436558">Write</span><span class="op" id="2436563">(</span><span class="op" id="2436564">[</span><span class="op" id="2436565">]</span><span class="builtintype" id="2436566">byte</span><span class="op" id="2436570">(</span><span class="ident" id="2436571">s</span><span class="op" id="2436572">)</span><span class="op" id="2436573">)</span><br>
<span class="lineno">200</span><span class="op" id="2436575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2436578">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2436656">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2436712">func</span>&nbsp;<span class="ident" id="2436717">Mkdir</span><span class="op" id="2436722">(</span><span class="ident" id="2436723">name</span>&nbsp;<span class="builtintype" id="2436728">string</span><span class="op" id="2436734">,</span>&nbsp;<span class="ident" id="2436736">perm</span>&nbsp;<span class="ident" id="2436741">FileMode</span><span class="op" id="2436749">)</span>&nbsp;<span class="builtintype" id="2436751">error</span>&nbsp;<span class="op" id="2436757">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436760">e</span>&nbsp;<span class="op" id="2436762">:=</span>&nbsp;<span class="ident" id="2436765">syscall</span><span class="op" id="2436772">.</span><span class="ident" id="2436773">Mkdir</span><span class="op" id="2436778">(</span><span class="ident" id="2436779">name</span><span class="op" id="2436783">,</span>&nbsp;<span class="ident" id="2436785">syscallMode</span><span class="op" id="2436796">(</span><span class="ident" id="2436797">perm</span><span class="op" id="2436801">)</span><span class="op" id="2436802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436805">if</span>&nbsp;<span class="ident" id="2436808">e</span>&nbsp;<span class="op" id="2436810">!=</span>&nbsp;<span class="builtintype" id="2436813">nil</span>&nbsp;<span class="op" id="2436817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436821">return</span>&nbsp;<span class="op" id="2436828">&amp;</span><span class="ident" id="2436829">PathError</span><span class="op" id="2436838">{</span><span class="string" id="2436839">&#34;mkdir&#34;</span><span class="op" id="2436846">,</span>&nbsp;<span class="ident" id="2436848">name</span><span class="op" id="2436852">,</span>&nbsp;<span class="ident" id="2436854">e</span><span class="op" id="2436855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436861">return</span>&nbsp;<span class="builtintype" id="2436868">nil</span><br>
<span class="lineno">210</span><span class="op" id="2436872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2436875">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2436946">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2437002">func</span>&nbsp;<span class="ident" id="2437007">Chdir</span><span class="op" id="2437012">(</span><span class="ident" id="2437013">dir</span>&nbsp;<span class="builtintype" id="2437017">string</span><span class="op" id="2437023">)</span>&nbsp;<span class="builtintype" id="2437025">error</span>&nbsp;<span class="op" id="2437031">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437034">if</span>&nbsp;<span class="ident" id="2437037">e</span>&nbsp;<span class="op" id="2437039">:=</span>&nbsp;<span class="ident" id="2437042">syscall</span><span class="op" id="2437049">.</span><span class="ident" id="2437050">Chdir</span><span class="op" id="2437055">(</span><span class="ident" id="2437056">dir</span><span class="op" id="2437059">)</span><span class="op" id="2437060">;</span>&nbsp;<span class="ident" id="2437062">e</span>&nbsp;<span class="op" id="2437064">!=</span>&nbsp;<span class="builtintype" id="2437067">nil</span>&nbsp;<span class="op" id="2437071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437075">return</span>&nbsp;<span class="op" id="2437082">&amp;</span><span class="ident" id="2437083">PathError</span><span class="op" id="2437092">{</span><span class="string" id="2437093">&#34;chdir&#34;</span><span class="op" id="2437100">,</span>&nbsp;<span class="ident" id="2437102">dir</span><span class="op" id="2437105">,</span>&nbsp;<span class="ident" id="2437107">e</span><span class="op" id="2437108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437114">return</span>&nbsp;<span class="builtintype" id="2437121">nil</span><br>
<span class="lineno"></span><span class="op" id="2437125">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2437128">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2437188">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2437218">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2437274">func</span>&nbsp;<span class="op" id="2437279">(</span><span class="ident" id="2437280">f</span>&nbsp;<span class="op" id="2437282">*</span><span class="ident" id="2437283">File</span><span class="op" id="2437287">)</span>&nbsp;<span class="ident" id="2437289">Chdir</span><span class="op" id="2437294">(</span><span class="op" id="2437295">)</span>&nbsp;<span class="builtintype" id="2437297">error</span>&nbsp;<span class="op" id="2437303">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437306">if</span>&nbsp;<span class="ident" id="2437309">f</span>&nbsp;<span class="op" id="2437311">==</span>&nbsp;<span class="builtintype" id="2437314">nil</span>&nbsp;<span class="op" id="2437318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437322">return</span>&nbsp;<span class="ident" id="2437329">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437344">if</span>&nbsp;<span class="ident" id="2437347">e</span>&nbsp;<span class="op" id="2437349">:=</span>&nbsp;<span class="ident" id="2437352">syscall</span><span class="op" id="2437359">.</span><span class="ident" id="2437360">Fchdir</span><span class="op" id="2437366">(</span><span class="ident" id="2437367">f</span><span class="op" id="2437368">.</span><span class="ident" id="2437369">fd</span><span class="op" id="2437371">)</span><span class="op" id="2437372">;</span>&nbsp;<span class="ident" id="2437374">e</span>&nbsp;<span class="op" id="2437376">!=</span>&nbsp;<span class="builtintype" id="2437379">nil</span>&nbsp;<span class="op" id="2437383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437387">return</span>&nbsp;<span class="op" id="2437394">&amp;</span><span class="ident" id="2437395">PathError</span><span class="op" id="2437404">{</span><span class="string" id="2437405">&#34;chdir&#34;</span><span class="op" id="2437412">,</span>&nbsp;<span class="ident" id="2437414">f</span><span class="op" id="2437415">.</span><span class="ident" id="2437416">name</span><span class="op" id="2437420">,</span>&nbsp;<span class="ident" id="2437422">e</span><span class="op" id="2437423">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437429">return</span>&nbsp;<span class="builtintype" id="2437436">nil</span><br>
<span class="lineno"></span><span class="op" id="2437440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2437443">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2437512">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2437578">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2437611">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2437667">func</span>&nbsp;<span class="ident" id="2437672">Open</span><span class="op" id="2437676">(</span><span class="ident" id="2437677">name</span>&nbsp;<span class="builtintype" id="2437682">string</span><span class="op" id="2437688">)</span>&nbsp;<span class="op" id="2437690">(</span><span class="ident" id="2437691">file</span>&nbsp;<span class="op" id="2437696">*</span><span class="ident" id="2437697">File</span><span class="op" id="2437701">,</span>&nbsp;<span class="ident" id="2437703">err</span>&nbsp;<span class="builtintype" id="2437707">error</span><span class="op" id="2437712">)</span>&nbsp;<span class="op" id="2437714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437717">return</span>&nbsp;<span class="ident" id="2437724">OpenFile</span><span class="op" id="2437732">(</span><span class="ident" id="2437733">name</span><span class="op" id="2437737">,</span>&nbsp;<span class="ident" id="2437739">O_RDONLY</span><span class="op" id="2437747">,</span>&nbsp;<span class="num" id="2437749">0</span><span class="op" id="2437750">)</span><br>
<span class="lineno">240</span><span class="op" id="2437752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2437755">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2437825">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2437893">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2437962">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2437973">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2438029">func</span>&nbsp;<span class="ident" id="2438034">Create</span><span class="op" id="2438040">(</span><span class="ident" id="2438041">name</span>&nbsp;<span class="builtintype" id="2438046">string</span><span class="op" id="2438052">)</span>&nbsp;<span class="op" id="2438054">(</span><span class="ident" id="2438055">file</span>&nbsp;<span class="op" id="2438060">*</span><span class="ident" id="2438061">File</span><span class="op" id="2438065">,</span>&nbsp;<span class="ident" id="2438067">err</span>&nbsp;<span class="builtintype" id="2438071">error</span><span class="op" id="2438076">)</span>&nbsp;<span class="op" id="2438078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438081">return</span>&nbsp;<span class="ident" id="2438088">OpenFile</span><span class="op" id="2438096">(</span><span class="ident" id="2438097">name</span><span class="op" id="2438101">,</span>&nbsp;<span class="ident" id="2438103">O_RDWR</span><span class="op" id="2438109">|</span><span class="ident" id="2438110">O_CREATE</span><span class="op" id="2438118">|</span><span class="ident" id="2438119">O_TRUNC</span><span class="op" id="2438126">,</span>&nbsp;<span class="num" id="2438128">0666</span><span class="op" id="2438132">)</span><br>
<span class="lineno"></span><span class="op" id="2438134">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2438137">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2438170">var</span>&nbsp;<span class="ident" id="2438174">lstat</span>&nbsp;<span class="op" id="2438180">=</span>&nbsp;<span class="ident" id="2438182">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2438189">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2438261">func</span>&nbsp;<span class="ident" id="2438266">Rename</span><span class="op" id="2438272">(</span><span class="ident" id="2438273">oldpath</span><span class="op" id="2438280">,</span>&nbsp;<span class="ident" id="2438282">newpath</span>&nbsp;<span class="builtintype" id="2438290">string</span><span class="op" id="2438296">)</span>&nbsp;<span class="builtintype" id="2438298">error</span>&nbsp;<span class="op" id="2438304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438307">return</span>&nbsp;<span class="ident" id="2438314">rename</span><span class="op" id="2438320">(</span><span class="ident" id="2438321">oldpath</span><span class="op" id="2438328">,</span>&nbsp;<span class="ident" id="2438330">newpath</span><span class="op" id="2438337">)</span><br>
<span class="lineno"></span><span class="op" id="2438339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2438342">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2438414">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2438478">func</span>&nbsp;<span class="ident" id="2438483">fixCount</span><span class="op" id="2438491">(</span><span class="ident" id="2438492">n</span>&nbsp;<span class="builtintype" id="2438494">int</span><span class="op" id="2438497">,</span>&nbsp;<span class="ident" id="2438499">err</span>&nbsp;<span class="builtintype" id="2438503">error</span><span class="op" id="2438508">)</span>&nbsp;<span class="op" id="2438510">(</span><span class="builtintype" id="2438511">int</span><span class="op" id="2438514">,</span>&nbsp;<span class="builtintype" id="2438516">error</span><span class="op" id="2438521">)</span>&nbsp;<span class="op" id="2438523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438526">if</span>&nbsp;<span class="ident" id="2438529">n</span>&nbsp;<span class="op" id="2438531">&lt;</span>&nbsp;<span class="num" id="2438533">0</span>&nbsp;<span class="op" id="2438535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2438539">n</span>&nbsp;<span class="op" id="2438541">=</span>&nbsp;<span class="num" id="2438543">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438546">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438549">return</span>&nbsp;<span class="ident" id="2438556">n</span><span class="op" id="2438557">,</span>&nbsp;<span class="ident" id="2438559">err</span><br>
<span class="lineno"></span><span class="op" id="2438563">}</span>
</div>
</body>
</html>
