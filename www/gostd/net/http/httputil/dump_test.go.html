<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/httputil</h2>
<ul>
<li><a href="/gostd/net/http/httputil/dump.go.html">dump.go</a></li>
<li><a href="/gostd/net/http/httputil/dump_test.go.html">dump_test.go</a></li>
<li><a href="/gostd/net/http/httputil/httputil.go.html">httputil.go</a></li>
<li><a href="/gostd/net/http/httputil/persist.go.html">persist.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy.go.html">reverseproxy.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy_test.go.html">reverseproxy_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7700482">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7700537">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7700591">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7700642">package</span>&nbsp;<span class="ident" id="7700650">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700660">import</span>&nbsp;<span class="op" id="7700667">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700670">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700679">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700686">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700692">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700705">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700717">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700728">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700739">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700750">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7700760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700763">type</span>&nbsp;<span class="ident" id="7700768">dumpTest</span>&nbsp;<span class="keyword" id="7700777">struct</span>&nbsp;<span class="op" id="7700784">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700787">Req</span>&nbsp;&nbsp;<span class="ident" id="7700792">http</span><span class="op" id="7700796">.</span><span class="ident" id="7700797">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700806">Body</span>&nbsp;<span class="keyword" id="7700811">interface</span><span class="op" id="7700820">{</span><span class="op" id="7700821">}</span>&nbsp;<span class="comment" id="7700823">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700889">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7700901">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700909">WantDumpOut</span>&nbsp;<span class="builtintype" id="7700921">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700929">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7700941">bool</span>&nbsp;<span class="comment" id="7700946">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="7700994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700997">var</span>&nbsp;<span class="ident" id="7701001">dumpTests</span>&nbsp;<span class="op" id="7701011">=</span>&nbsp;<span class="op" id="7701013">[</span><span class="op" id="7701014">]</span><span class="ident" id="7701015">dumpTest</span><span class="op" id="7701023">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7701027">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701083">Req</span><span class="op" id="7701086">:</span>&nbsp;<span class="ident" id="7701088">http</span><span class="op" id="7701092">.</span><span class="ident" id="7701093">Request</span><span class="op" id="7701100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701105">Method</span><span class="op" id="7701111">:</span>&nbsp;<span class="string" id="7701113">&#34;GET&#34;</span><span class="op" id="7701118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701123">URL</span><span class="op" id="7701126">:</span>&nbsp;<span class="op" id="7701128">&amp;</span><span class="ident" id="7701129">url</span><span class="op" id="7701132">.</span><span class="ident" id="7701133">URL</span><span class="op" id="7701136">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701142">Scheme</span><span class="op" id="7701148">:</span>&nbsp;<span class="string" id="7701150">&#34;http&#34;</span><span class="op" id="7701156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701162">Host</span><span class="op" id="7701166">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7701170">&#34;www.google.com&#34;</span><span class="op" id="7701186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701192">Path</span><span class="op" id="7701196">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7701200">&#34;/search&#34;</span><span class="op" id="7701209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701214">}</span><span class="op" id="7701215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701220">ProtoMajor</span><span class="op" id="7701230">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701238">1</span><span class="op" id="7701239">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701244">ProtoMinor</span><span class="op" id="7701254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701262">1</span><span class="op" id="7701263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701268">TransferEncoding</span><span class="op" id="7701284">:</span>&nbsp;<span class="op" id="7701286">[</span><span class="op" id="7701287">]</span><span class="builtintype" id="7701288">string</span><span class="op" id="7701294">{</span><span class="string" id="7701295">&#34;chunked&#34;</span><span class="op" id="7701304">}</span><span class="op" id="7701305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701309">}</span><span class="op" id="7701310">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701315">Body</span><span class="op" id="7701319">:</span>&nbsp;<span class="op" id="7701321">[</span><span class="op" id="7701322">]</span><span class="builtintype" id="7701323">byte</span><span class="op" id="7701327">(</span><span class="string" id="7701328">&#34;abcdef&#34;</span><span class="op" id="7701336">)</span><span class="op" id="7701337">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701342">WantDump</span><span class="op" id="7701350">:</span>&nbsp;<span class="string" id="7701352">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7701379">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701384">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7701411">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701416">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7701453">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701458">chunk</span><span class="op" id="7701463">(</span><span class="string" id="7701464">&#34;abcdef&#34;</span><span class="op" id="7701472">)</span>&nbsp;<span class="op" id="7701474">+</span>&nbsp;<span class="ident" id="7701476">chunk</span><span class="op" id="7701481">(</span><span class="string" id="7701482">&#34;&#34;</span><span class="op" id="7701484">)</span><span class="op" id="7701485">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701488">}</span><span class="op" id="7701489">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7701493">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7701576">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701610">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701614">Req</span><span class="op" id="7701617">:</span>&nbsp;<span class="ident" id="7701619">http</span><span class="op" id="7701623">.</span><span class="ident" id="7701624">Request</span><span class="op" id="7701631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701636">Method</span><span class="op" id="7701642">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701648">&#34;GET&#34;</span><span class="op" id="7701653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701658">URL</span><span class="op" id="7701661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701670">mustParseURL</span><span class="op" id="7701682">(</span><span class="string" id="7701683">&#34;/foo&#34;</span><span class="op" id="7701689">)</span><span class="op" id="7701690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701695">ProtoMajor</span><span class="op" id="7701705">:</span>&nbsp;<span class="num" id="7701707">1</span><span class="op" id="7701708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701713">ProtoMinor</span><span class="op" id="7701723">:</span>&nbsp;<span class="num" id="7701725">0</span><span class="op" id="7701726">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701731">Header</span><span class="op" id="7701737">:</span>&nbsp;<span class="ident" id="7701739">http</span><span class="op" id="7701743">.</span><span class="ident" id="7701744">Header</span><span class="op" id="7701750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701756">&#34;X-Foo&#34;</span><span class="op" id="7701763">:</span>&nbsp;<span class="op" id="7701765">[</span><span class="op" id="7701766">]</span><span class="builtintype" id="7701767">string</span><span class="op" id="7701773">{</span><span class="string" id="7701774">&#34;X-Bar&#34;</span><span class="op" id="7701781">}</span><span class="op" id="7701782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701787">}</span><span class="op" id="7701788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701792">}</span><span class="op" id="7701793">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701798">WantDump</span><span class="op" id="7701806">:</span>&nbsp;<span class="string" id="7701808">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="7701832">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701837">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="7701859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701862">}</span><span class="op" id="7701863">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701867">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701871">Req</span><span class="op" id="7701874">:</span>&nbsp;<span class="op" id="7701876">*</span><span class="ident" id="7701877">mustNewRequest</span><span class="op" id="7701891">(</span><span class="string" id="7701892">&#34;GET&#34;</span><span class="op" id="7701897">,</span>&nbsp;<span class="string" id="7701899">&#34;http://example.com/foo&#34;</span><span class="op" id="7701923">,</span>&nbsp;<span class="ident" id="7701925">nil</span><span class="op" id="7701928">)</span><span class="op" id="7701929">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701934">WantDumpOut</span><span class="op" id="7701945">:</span>&nbsp;<span class="string" id="7701947">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7701971">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701976">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7702000">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702005">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7702043">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702048">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7702079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702082">}</span><span class="op" id="7702083">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7702087">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7702151">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7702208">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702226">Req</span><span class="op" id="7702229">:</span>&nbsp;<span class="op" id="7702231">*</span><span class="ident" id="7702232">mustNewRequest</span><span class="op" id="7702246">(</span><span class="string" id="7702247">&#34;GET&#34;</span><span class="op" id="7702252">,</span>&nbsp;<span class="string" id="7702254">&#34;https://example.com/foo&#34;</span><span class="op" id="7702279">,</span>&nbsp;<span class="ident" id="7702281">nil</span><span class="op" id="7702284">)</span><span class="op" id="7702285">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702290">WantDumpOut</span><span class="op" id="7702301">:</span>&nbsp;<span class="string" id="7702303">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7702327">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702332">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7702356">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702361">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7702399">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702404">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7702435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702438">}</span><span class="op" id="7702439">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7702443">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702501">Req</span><span class="op" id="7702504">:</span>&nbsp;<span class="ident" id="7702506">http</span><span class="op" id="7702510">.</span><span class="ident" id="7702511">Request</span><span class="op" id="7702518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702523">Method</span><span class="op" id="7702529">:</span>&nbsp;<span class="string" id="7702531">&#34;POST&#34;</span><span class="op" id="7702537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702542">URL</span><span class="op" id="7702545">:</span>&nbsp;<span class="op" id="7702547">&amp;</span><span class="ident" id="7702548">url</span><span class="op" id="7702551">.</span><span class="ident" id="7702552">URL</span><span class="op" id="7702555">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702561">Scheme</span><span class="op" id="7702567">:</span>&nbsp;<span class="string" id="7702569">&#34;http&#34;</span><span class="op" id="7702575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702581">Host</span><span class="op" id="7702585">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7702589">&#34;post.tld&#34;</span><span class="op" id="7702599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702605">Path</span><span class="op" id="7702609">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7702613">&#34;/&#34;</span><span class="op" id="7702616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702621">}</span><span class="op" id="7702622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702627">ContentLength</span><span class="op" id="7702640">:</span>&nbsp;<span class="num" id="7702642">6</span><span class="op" id="7702643">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702648">ProtoMajor</span><span class="op" id="7702658">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702663">1</span><span class="op" id="7702664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702669">ProtoMinor</span><span class="op" id="7702679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702684">1</span><span class="op" id="7702685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702689">}</span><span class="op" id="7702690">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702695">Body</span><span class="op" id="7702699">:</span>&nbsp;<span class="op" id="7702701">[</span><span class="op" id="7702702">]</span><span class="builtintype" id="7702703">byte</span><span class="op" id="7702707">(</span><span class="string" id="7702708">&#34;abcdef&#34;</span><span class="op" id="7702716">)</span><span class="op" id="7702717">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702722">WantDumpOut</span><span class="op" id="7702733">:</span>&nbsp;<span class="string" id="7702735">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7702757">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702762">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7702783">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702788">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7702826">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702831">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7702855">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702860">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7702891">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702896">NoBody</span><span class="op" id="7702902">:</span>&nbsp;<span class="builtintype" id="7702904">true</span><span class="op" id="7702908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702911">}</span><span class="op" id="7702912">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7702916">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702971">Req</span><span class="op" id="7702974">:</span>&nbsp;<span class="ident" id="7702976">http</span><span class="op" id="7702980">.</span><span class="ident" id="7702981">Request</span><span class="op" id="7702988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702993">Method</span><span class="op" id="7702999">:</span>&nbsp;<span class="string" id="7703001">&#34;POST&#34;</span><span class="op" id="7703007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703012">URL</span><span class="op" id="7703015">:</span>&nbsp;<span class="op" id="7703017">&amp;</span><span class="ident" id="7703018">url</span><span class="op" id="7703021">.</span><span class="ident" id="7703022">URL</span><span class="op" id="7703025">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703031">Scheme</span><span class="op" id="7703037">:</span>&nbsp;<span class="string" id="7703039">&#34;http&#34;</span><span class="op" id="7703045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703051">Host</span><span class="op" id="7703055">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7703059">&#34;post.tld&#34;</span><span class="op" id="7703069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703075">Path</span><span class="op" id="7703079">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7703083">&#34;/&#34;</span><span class="op" id="7703086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703091">}</span><span class="op" id="7703092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703097">ContentLength</span><span class="op" id="7703110">:</span>&nbsp;<span class="num" id="7703112">8193</span><span class="op" id="7703116">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703121">ProtoMajor</span><span class="op" id="7703131">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703136">1</span><span class="op" id="7703137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703142">ProtoMinor</span><span class="op" id="7703152">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703157">1</span><span class="op" id="7703158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703162">}</span><span class="op" id="7703163">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703168">Body</span><span class="op" id="7703172">:</span>&nbsp;<span class="ident" id="7703174">bytes</span><span class="op" id="7703179">.</span><span class="ident" id="7703180">Repeat</span><span class="op" id="7703186">(</span><span class="op" id="7703187">[</span><span class="op" id="7703188">]</span><span class="builtintype" id="7703189">byte</span><span class="op" id="7703193">(</span><span class="string" id="7703194">&#34;a&#34;</span><span class="op" id="7703197">)</span><span class="op" id="7703198">,</span>&nbsp;<span class="num" id="7703200">8193</span><span class="op" id="7703204">)</span><span class="op" id="7703205">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703210">WantDumpOut</span><span class="op" id="7703221">:</span>&nbsp;<span class="string" id="7703223">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7703245">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7703250">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7703271">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7703276">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7703314">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7703319">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="7703346">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7703351">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7703383">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703388">strings</span><span class="op" id="7703395">.</span><span class="ident" id="7703396">Repeat</span><span class="op" id="7703402">(</span><span class="string" id="7703403">&#34;a&#34;</span><span class="op" id="7703406">,</span>&nbsp;<span class="num" id="7703408">8193</span><span class="op" id="7703412">)</span><span class="op" id="7703413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703416">}</span><span class="op" id="7703417">,</span><br>
<span class="lineno"></span><span class="op" id="7703419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7703422">func</span>&nbsp;<span class="ident" id="7703427">TestDumpRequest</span><span class="op" id="7703442">(</span><span class="ident" id="7703443">t</span>&nbsp;<span class="op" id="7703445">*</span><span class="ident" id="7703446">testing</span><span class="op" id="7703453">.</span><span class="ident" id="7703454">T</span><span class="op" id="7703455">)</span>&nbsp;<span class="op" id="7703457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703460">numg0</span>&nbsp;<span class="op" id="7703466">:=</span>&nbsp;<span class="ident" id="7703469">runtime</span><span class="op" id="7703476">.</span><span class="ident" id="7703477">NumGoroutine</span><span class="op" id="7703489">(</span><span class="op" id="7703490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703493">for</span>&nbsp;<span class="ident" id="7703497">i</span><span class="op" id="7703498">,</span>&nbsp;<span class="ident" id="7703500">tt</span>&nbsp;<span class="op" id="7703503">:=</span>&nbsp;<span class="keyword" id="7703506">range</span>&nbsp;<span class="ident" id="7703512">dumpTests</span>&nbsp;<span class="op" id="7703522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703526">setBody</span>&nbsp;<span class="op" id="7703534">:=</span>&nbsp;<span class="keyword" id="7703537">func</span><span class="op" id="7703541">(</span><span class="op" id="7703542">)</span>&nbsp;<span class="op" id="7703544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703549">if</span>&nbsp;<span class="ident" id="7703552">tt</span><span class="op" id="7703554">.</span><span class="ident" id="7703555">Body</span>&nbsp;<span class="op" id="7703560">==</span>&nbsp;<span class="ident" id="7703563">nil</span>&nbsp;<span class="op" id="7703567">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703573">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703588">switch</span>&nbsp;<span class="ident" id="7703595">b</span>&nbsp;<span class="op" id="7703597">:=</span>&nbsp;<span class="ident" id="7703600">tt</span><span class="op" id="7703602">.</span><span class="ident" id="7703603">Body</span><span class="op" id="7703607">.</span><span class="op" id="7703608">(</span><span class="keyword" id="7703609">type</span><span class="op" id="7703613">)</span>&nbsp;<span class="op" id="7703615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703620">case</span>&nbsp;<span class="op" id="7703625">[</span><span class="op" id="7703626">]</span><span class="builtintype" id="7703627">byte</span><span class="op" id="7703631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703637">tt</span><span class="op" id="7703639">.</span><span class="ident" id="7703640">Req</span><span class="op" id="7703643">.</span><span class="ident" id="7703644">Body</span>&nbsp;<span class="op" id="7703649">=</span>&nbsp;<span class="ident" id="7703651">ioutil</span><span class="op" id="7703657">.</span><span class="ident" id="7703658">NopCloser</span><span class="op" id="7703667">(</span><span class="ident" id="7703668">bytes</span><span class="op" id="7703673">.</span><span class="ident" id="7703674">NewReader</span><span class="op" id="7703683">(</span><span class="ident" id="7703684">b</span><span class="op" id="7703685">)</span><span class="op" id="7703686">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703691">case</span>&nbsp;<span class="keyword" id="7703696">func</span><span class="op" id="7703700">(</span><span class="op" id="7703701">)</span>&nbsp;<span class="ident" id="7703703">io</span><span class="op" id="7703705">.</span><span class="ident" id="7703706">ReadCloser</span><span class="op" id="7703716">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703722">tt</span><span class="op" id="7703724">.</span><span class="ident" id="7703725">Req</span><span class="op" id="7703728">.</span><span class="ident" id="7703729">Body</span>&nbsp;<span class="op" id="7703734">=</span>&nbsp;<span class="ident" id="7703736">b</span><span class="op" id="7703737">(</span><span class="op" id="7703738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703743">default</span><span class="op" id="7703750">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703756">t</span><span class="op" id="7703757">.</span><span class="ident" id="7703758">Fatalf</span><span class="op" id="7703764">(</span><span class="string" id="7703765">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="7703798">,</span>&nbsp;<span class="ident" id="7703800">i</span><span class="op" id="7703801">,</span>&nbsp;<span class="ident" id="7703803">tt</span><span class="op" id="7703805">.</span><span class="ident" id="7703806">Body</span><span class="op" id="7703810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703815">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703823">setBody</span><span class="op" id="7703830">(</span><span class="op" id="7703831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703835">if</span>&nbsp;<span class="ident" id="7703838">tt</span><span class="op" id="7703840">.</span><span class="ident" id="7703841">Req</span><span class="op" id="7703844">.</span><span class="ident" id="7703845">Header</span>&nbsp;<span class="op" id="7703852">==</span>&nbsp;<span class="ident" id="7703855">nil</span>&nbsp;<span class="op" id="7703859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703864">tt</span><span class="op" id="7703866">.</span><span class="ident" id="7703867">Req</span><span class="op" id="7703870">.</span><span class="ident" id="7703871">Header</span>&nbsp;<span class="op" id="7703878">=</span>&nbsp;<span class="builtinfunc" id="7703880">make</span><span class="op" id="7703884">(</span><span class="ident" id="7703885">http</span><span class="op" id="7703889">.</span><span class="ident" id="7703890">Header</span><span class="op" id="7703896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703900">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703905">if</span>&nbsp;<span class="ident" id="7703908">tt</span><span class="op" id="7703910">.</span><span class="ident" id="7703911">WantDump</span>&nbsp;<span class="op" id="7703920">!=</span>&nbsp;<span class="string" id="7703923">&#34;&#34;</span>&nbsp;<span class="op" id="7703926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703931">setBody</span><span class="op" id="7703938">(</span><span class="op" id="7703939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703944">dump</span><span class="op" id="7703948">,</span>&nbsp;<span class="ident" id="7703950">err</span>&nbsp;<span class="op" id="7703954">:=</span>&nbsp;<span class="ident" id="7703957">DumpRequest</span><span class="op" id="7703968">(</span><span class="op" id="7703969">&amp;</span><span class="ident" id="7703970">tt</span><span class="op" id="7703972">.</span><span class="ident" id="7703973">Req</span><span class="op" id="7703976">,</span>&nbsp;<span class="op" id="7703978">!</span><span class="ident" id="7703979">tt</span><span class="op" id="7703981">.</span><span class="ident" id="7703982">NoBody</span><span class="op" id="7703988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703993">if</span>&nbsp;<span class="ident" id="7703996">err</span>&nbsp;<span class="op" id="7704000">!=</span>&nbsp;<span class="ident" id="7704003">nil</span>&nbsp;<span class="op" id="7704007">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704013">t</span><span class="op" id="7704014">.</span><span class="ident" id="7704015">Errorf</span><span class="op" id="7704021">(</span><span class="string" id="7704022">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7704043">,</span>&nbsp;<span class="ident" id="7704045">i</span><span class="op" id="7704046">,</span>&nbsp;<span class="ident" id="7704048">err</span><span class="op" id="7704051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704057">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704074">if</span>&nbsp;<span class="builtintype" id="7704077">string</span><span class="op" id="7704083">(</span><span class="ident" id="7704084">dump</span><span class="op" id="7704088">)</span>&nbsp;<span class="op" id="7704090">!=</span>&nbsp;<span class="ident" id="7704093">tt</span><span class="op" id="7704095">.</span><span class="ident" id="7704096">WantDump</span>&nbsp;<span class="op" id="7704105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704111">t</span><span class="op" id="7704112">.</span><span class="ident" id="7704113">Errorf</span><span class="op" id="7704119">(</span><span class="string" id="7704120">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7704164">,</span>&nbsp;<span class="ident" id="7704166">i</span><span class="op" id="7704167">,</span>&nbsp;<span class="ident" id="7704169">tt</span><span class="op" id="7704171">.</span><span class="ident" id="7704172">WantDump</span><span class="op" id="7704180">,</span>&nbsp;<span class="builtintype" id="7704182">string</span><span class="op" id="7704188">(</span><span class="ident" id="7704189">dump</span><span class="op" id="7704193">)</span><span class="op" id="7704194">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704200">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704221">if</span>&nbsp;<span class="ident" id="7704224">tt</span><span class="op" id="7704226">.</span><span class="ident" id="7704227">WantDumpOut</span>&nbsp;<span class="op" id="7704239">!=</span>&nbsp;<span class="string" id="7704242">&#34;&#34;</span>&nbsp;<span class="op" id="7704245">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704250">setBody</span><span class="op" id="7704257">(</span><span class="op" id="7704258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704263">dump</span><span class="op" id="7704267">,</span>&nbsp;<span class="ident" id="7704269">err</span>&nbsp;<span class="op" id="7704273">:=</span>&nbsp;<span class="ident" id="7704276">DumpRequestOut</span><span class="op" id="7704290">(</span><span class="op" id="7704291">&amp;</span><span class="ident" id="7704292">tt</span><span class="op" id="7704294">.</span><span class="ident" id="7704295">Req</span><span class="op" id="7704298">,</span>&nbsp;<span class="op" id="7704300">!</span><span class="ident" id="7704301">tt</span><span class="op" id="7704303">.</span><span class="ident" id="7704304">NoBody</span><span class="op" id="7704310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704315">if</span>&nbsp;<span class="ident" id="7704318">err</span>&nbsp;<span class="op" id="7704322">!=</span>&nbsp;<span class="ident" id="7704325">nil</span>&nbsp;<span class="op" id="7704329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704335">t</span><span class="op" id="7704336">.</span><span class="ident" id="7704337">Errorf</span><span class="op" id="7704343">(</span><span class="string" id="7704344">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7704368">,</span>&nbsp;<span class="ident" id="7704370">i</span><span class="op" id="7704371">,</span>&nbsp;<span class="ident" id="7704373">err</span><span class="op" id="7704376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704382">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704399">if</span>&nbsp;<span class="builtintype" id="7704402">string</span><span class="op" id="7704408">(</span><span class="ident" id="7704409">dump</span><span class="op" id="7704413">)</span>&nbsp;<span class="op" id="7704415">!=</span>&nbsp;<span class="ident" id="7704418">tt</span><span class="op" id="7704420">.</span><span class="ident" id="7704421">WantDumpOut</span>&nbsp;<span class="op" id="7704433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704439">t</span><span class="op" id="7704440">.</span><span class="ident" id="7704441">Errorf</span><span class="op" id="7704447">(</span><span class="string" id="7704448">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7704495">,</span>&nbsp;<span class="ident" id="7704497">i</span><span class="op" id="7704498">,</span>&nbsp;<span class="ident" id="7704500">tt</span><span class="op" id="7704502">.</span><span class="ident" id="7704503">WantDumpOut</span><span class="op" id="7704514">,</span>&nbsp;<span class="builtintype" id="7704516">string</span><span class="op" id="7704522">(</span><span class="ident" id="7704523">dump</span><span class="op" id="7704527">)</span><span class="op" id="7704528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704534">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704546">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704556">if</span>&nbsp;<span class="ident" id="7704559">dg</span>&nbsp;<span class="op" id="7704562">:=</span>&nbsp;<span class="ident" id="7704565">runtime</span><span class="op" id="7704572">.</span><span class="ident" id="7704573">NumGoroutine</span><span class="op" id="7704585">(</span><span class="op" id="7704586">)</span>&nbsp;<span class="op" id="7704588">-</span>&nbsp;<span class="ident" id="7704590">numg0</span><span class="op" id="7704595">;</span>&nbsp;<span class="ident" id="7704597">dg</span>&nbsp;<span class="op" id="7704600">&gt;</span>&nbsp;<span class="num" id="7704602">4</span>&nbsp;<span class="op" id="7704604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704608">buf</span>&nbsp;<span class="op" id="7704612">:=</span>&nbsp;<span class="builtinfunc" id="7704615">make</span><span class="op" id="7704619">(</span><span class="op" id="7704620">[</span><span class="op" id="7704621">]</span><span class="builtintype" id="7704622">byte</span><span class="op" id="7704626">,</span>&nbsp;<span class="num" id="7704628">4096</span><span class="op" id="7704632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704636">buf</span>&nbsp;<span class="op" id="7704640">=</span>&nbsp;<span class="ident" id="7704642">buf</span><span class="op" id="7704645">[</span><span class="op" id="7704646">:</span><span class="ident" id="7704647">runtime</span><span class="op" id="7704654">.</span><span class="ident" id="7704655">Stack</span><span class="op" id="7704660">(</span><span class="ident" id="7704661">buf</span><span class="op" id="7704664">,</span>&nbsp;<span class="builtintype" id="7704666">true</span><span class="op" id="7704670">)</span><span class="op" id="7704671">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704675">t</span><span class="op" id="7704676">.</span><span class="ident" id="7704677">Errorf</span><span class="op" id="7704683">(</span><span class="string" id="7704684">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="7704741">,</span>&nbsp;<span class="ident" id="7704743">dg</span><span class="op" id="7704745">,</span>&nbsp;<span class="ident" id="7704747">buf</span><span class="op" id="7704750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704753">}</span><br>
<span class="lineno"></span><span class="op" id="7704755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7704758">func</span>&nbsp;<span class="ident" id="7704763">chunk</span><span class="op" id="7704768">(</span><span class="ident" id="7704769">s</span>&nbsp;<span class="builtintype" id="7704771">string</span><span class="op" id="7704777">)</span>&nbsp;<span class="builtintype" id="7704779">string</span>&nbsp;<span class="op" id="7704786">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704789">return</span>&nbsp;<span class="ident" id="7704796">fmt</span><span class="op" id="7704799">.</span><span class="ident" id="7704800">Sprintf</span><span class="op" id="7704807">(</span><span class="string" id="7704808">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="7704822">,</span>&nbsp;<span class="builtinfunc" id="7704824">len</span><span class="op" id="7704827">(</span><span class="ident" id="7704828">s</span><span class="op" id="7704829">)</span><span class="op" id="7704830">,</span>&nbsp;<span class="ident" id="7704832">s</span><span class="op" id="7704833">)</span><br>
<span class="lineno"></span><span class="op" id="7704835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7704838">func</span>&nbsp;<span class="ident" id="7704843">mustParseURL</span><span class="op" id="7704855">(</span><span class="ident" id="7704856">s</span>&nbsp;<span class="builtintype" id="7704858">string</span><span class="op" id="7704864">)</span>&nbsp;<span class="op" id="7704866">*</span><span class="ident" id="7704867">url</span><span class="op" id="7704870">.</span><span class="ident" id="7704871">URL</span>&nbsp;<span class="op" id="7704875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704878">u</span><span class="op" id="7704879">,</span>&nbsp;<span class="ident" id="7704881">err</span>&nbsp;<span class="op" id="7704885">:=</span>&nbsp;<span class="ident" id="7704888">url</span><span class="op" id="7704891">.</span><span class="ident" id="7704892">Parse</span><span class="op" id="7704897">(</span><span class="ident" id="7704898">s</span><span class="op" id="7704899">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704902">if</span>&nbsp;<span class="ident" id="7704905">err</span>&nbsp;<span class="op" id="7704909">!=</span>&nbsp;<span class="ident" id="7704912">nil</span>&nbsp;<span class="op" id="7704916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7704920">panic</span><span class="op" id="7704925">(</span><span class="ident" id="7704926">fmt</span><span class="op" id="7704929">.</span><span class="ident" id="7704930">Sprintf</span><span class="op" id="7704937">(</span><span class="string" id="7704938">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7704964">,</span>&nbsp;<span class="ident" id="7704966">s</span><span class="op" id="7704967">,</span>&nbsp;<span class="ident" id="7704969">err</span><span class="op" id="7704972">)</span><span class="op" id="7704973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704979">return</span>&nbsp;<span class="ident" id="7704986">u</span><br>
<span class="lineno"></span><span class="op" id="7704988">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7704991">func</span>&nbsp;<span class="ident" id="7704996">mustNewRequest</span><span class="op" id="7705010">(</span><span class="ident" id="7705011">method</span><span class="op" id="7705017">,</span>&nbsp;<span class="ident" id="7705019">url</span>&nbsp;<span class="builtintype" id="7705023">string</span><span class="op" id="7705029">,</span>&nbsp;<span class="ident" id="7705031">body</span>&nbsp;<span class="ident" id="7705036">io</span><span class="op" id="7705038">.</span><span class="ident" id="7705039">Reader</span><span class="op" id="7705045">)</span>&nbsp;<span class="op" id="7705047">*</span><span class="ident" id="7705048">http</span><span class="op" id="7705052">.</span><span class="ident" id="7705053">Request</span>&nbsp;<span class="op" id="7705061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705064">req</span><span class="op" id="7705067">,</span>&nbsp;<span class="ident" id="7705069">err</span>&nbsp;<span class="op" id="7705073">:=</span>&nbsp;<span class="ident" id="7705076">http</span><span class="op" id="7705080">.</span><span class="ident" id="7705081">NewRequest</span><span class="op" id="7705091">(</span><span class="ident" id="7705092">method</span><span class="op" id="7705098">,</span>&nbsp;<span class="ident" id="7705100">url</span><span class="op" id="7705103">,</span>&nbsp;<span class="ident" id="7705105">body</span><span class="op" id="7705109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705112">if</span>&nbsp;<span class="ident" id="7705115">err</span>&nbsp;<span class="op" id="7705119">!=</span>&nbsp;<span class="ident" id="7705122">nil</span>&nbsp;<span class="op" id="7705126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7705130">panic</span><span class="op" id="7705135">(</span><span class="ident" id="7705136">fmt</span><span class="op" id="7705139">.</span><span class="ident" id="7705140">Sprintf</span><span class="op" id="7705147">(</span><span class="string" id="7705148">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7705181">,</span>&nbsp;<span class="ident" id="7705183">method</span><span class="op" id="7705189">,</span>&nbsp;<span class="ident" id="7705191">url</span><span class="op" id="7705194">,</span>&nbsp;<span class="ident" id="7705196">body</span><span class="op" id="7705200">,</span>&nbsp;<span class="ident" id="7705202">err</span><span class="op" id="7705205">)</span><span class="op" id="7705206">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705212">return</span>&nbsp;<span class="ident" id="7705219">req</span><br>
<span class="lineno"></span><span class="op" id="7705223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7705226">var</span>&nbsp;<span class="ident" id="7705230">dumpResTests</span>&nbsp;<span class="op" id="7705243">=</span>&nbsp;<span class="op" id="7705245">[</span><span class="op" id="7705246">]</span><span class="keyword" id="7705247">struct</span>&nbsp;<span class="op" id="7705254">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705257">res</span>&nbsp;&nbsp;<span class="op" id="7705262">*</span><span class="ident" id="7705263">http</span><span class="op" id="7705267">.</span><span class="ident" id="7705268">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705278">body</span>&nbsp;<span class="builtintype" id="7705283">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705289">want</span>&nbsp;<span class="builtintype" id="7705294">string</span><br>
<span class="lineno"></span><span class="op" id="7705301">}</span><span class="op" id="7705302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705305">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705309">res</span><span class="op" id="7705312">:</span>&nbsp;<span class="op" id="7705314">&amp;</span><span class="ident" id="7705315">http</span><span class="op" id="7705319">.</span><span class="ident" id="7705320">Response</span><span class="op" id="7705328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705333">Status</span><span class="op" id="7705339">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705348">&#34;200&nbsp;OK&#34;</span><span class="op" id="7705356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705361">StatusCode</span><span class="op" id="7705371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705376">200</span><span class="op" id="7705379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705384">Proto</span><span class="op" id="7705389">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705399">&#34;HTTP/1.1&#34;</span><span class="op" id="7705409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705414">ProtoMajor</span><span class="op" id="7705424">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705429">1</span><span class="op" id="7705430">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705435">ProtoMinor</span><span class="op" id="7705445">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705450">1</span><span class="op" id="7705451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705456">ContentLength</span><span class="op" id="7705469">:</span>&nbsp;<span class="num" id="7705471">50</span><span class="op" id="7705473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705478">Header</span><span class="op" id="7705484">:</span>&nbsp;<span class="ident" id="7705486">http</span><span class="op" id="7705490">.</span><span class="ident" id="7705491">Header</span><span class="op" id="7705497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7705503">&#34;Foo&#34;</span><span class="op" id="7705508">:</span>&nbsp;<span class="op" id="7705510">[</span><span class="op" id="7705511">]</span><span class="builtintype" id="7705512">string</span><span class="op" id="7705518">{</span><span class="string" id="7705519">&#34;Bar&#34;</span><span class="op" id="7705524">}</span><span class="op" id="7705525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705530">}</span><span class="op" id="7705531">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705536">Body</span><span class="op" id="7705540">:</span>&nbsp;<span class="ident" id="7705542">ioutil</span><span class="op" id="7705548">.</span><span class="ident" id="7705549">NopCloser</span><span class="op" id="7705558">(</span><span class="ident" id="7705559">strings</span><span class="op" id="7705566">.</span><span class="ident" id="7705567">NewReader</span><span class="op" id="7705576">(</span><span class="string" id="7705577">&#34;foo&#34;</span><span class="op" id="7705582">)</span><span class="op" id="7705583">)</span><span class="op" id="7705584">,</span>&nbsp;<span class="comment" id="7705586">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705609">}</span><span class="op" id="7705610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705614">body</span><span class="op" id="7705618">:</span>&nbsp;<span class="builtintype" id="7705620">false</span><span class="op" id="7705625">,</span>&nbsp;<span class="comment" id="7705627">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705669">want</span><span class="op" id="7705673">:</span>&nbsp;<span class="string" id="7705675">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="7705720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705723">}</span><span class="op" id="7705724">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705732">res</span><span class="op" id="7705735">:</span>&nbsp;<span class="op" id="7705737">&amp;</span><span class="ident" id="7705738">http</span><span class="op" id="7705742">.</span><span class="ident" id="7705743">Response</span><span class="op" id="7705751">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705756">Status</span><span class="op" id="7705762">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705771">&#34;200&nbsp;OK&#34;</span><span class="op" id="7705779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705784">StatusCode</span><span class="op" id="7705794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705799">200</span><span class="op" id="7705802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705807">Proto</span><span class="op" id="7705812">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705822">&#34;HTTP/1.1&#34;</span><span class="op" id="7705832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705837">ProtoMajor</span><span class="op" id="7705847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705852">1</span><span class="op" id="7705853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705858">ProtoMinor</span><span class="op" id="7705868">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705873">1</span><span class="op" id="7705874">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705879">ContentLength</span><span class="op" id="7705892">:</span>&nbsp;<span class="num" id="7705894">3</span><span class="op" id="7705895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705900">Body</span><span class="op" id="7705904">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705915">ioutil</span><span class="op" id="7705921">.</span><span class="ident" id="7705922">NopCloser</span><span class="op" id="7705931">(</span><span class="ident" id="7705932">strings</span><span class="op" id="7705939">.</span><span class="ident" id="7705940">NewReader</span><span class="op" id="7705949">(</span><span class="string" id="7705950">&#34;foo&#34;</span><span class="op" id="7705955">)</span><span class="op" id="7705956">)</span><span class="op" id="7705957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705961">}</span><span class="op" id="7705962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705966">body</span><span class="op" id="7705970">:</span>&nbsp;<span class="builtintype" id="7705972">true</span><span class="op" id="7705976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705980">want</span><span class="op" id="7705984">:</span>&nbsp;<span class="string" id="7705986">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="7706026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706029">}</span><span class="op" id="7706030">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706038">res</span><span class="op" id="7706041">:</span>&nbsp;<span class="op" id="7706043">&amp;</span><span class="ident" id="7706044">http</span><span class="op" id="7706048">.</span><span class="ident" id="7706049">Response</span><span class="op" id="7706057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706062">Status</span><span class="op" id="7706068">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706080">&#34;200&nbsp;OK&#34;</span><span class="op" id="7706088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706093">StatusCode</span><span class="op" id="7706103">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7706111">200</span><span class="op" id="7706114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706119">Proto</span><span class="op" id="7706124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706137">&#34;HTTP/1.1&#34;</span><span class="op" id="7706147">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706152">ProtoMajor</span><span class="op" id="7706162">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7706170">1</span><span class="op" id="7706171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706176">ProtoMinor</span><span class="op" id="7706186">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7706194">1</span><span class="op" id="7706195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706200">ContentLength</span><span class="op" id="7706213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706218">-</span><span class="num" id="7706219">1</span><span class="op" id="7706220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706225">Body</span><span class="op" id="7706229">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706243">ioutil</span><span class="op" id="7706249">.</span><span class="ident" id="7706250">NopCloser</span><span class="op" id="7706259">(</span><span class="ident" id="7706260">strings</span><span class="op" id="7706267">.</span><span class="ident" id="7706268">NewReader</span><span class="op" id="7706277">(</span><span class="string" id="7706278">&#34;foo&#34;</span><span class="op" id="7706283">)</span><span class="op" id="7706284">)</span><span class="op" id="7706285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706290">TransferEncoding</span><span class="op" id="7706306">:</span>&nbsp;<span class="op" id="7706308">[</span><span class="op" id="7706309">]</span><span class="builtintype" id="7706310">string</span><span class="op" id="7706316">{</span><span class="string" id="7706317">&#34;chunked&#34;</span><span class="op" id="7706326">}</span><span class="op" id="7706327">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706331">}</span><span class="op" id="7706332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706336">body</span><span class="op" id="7706340">:</span>&nbsp;<span class="builtintype" id="7706342">true</span><span class="op" id="7706346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706350">want</span><span class="op" id="7706354">:</span>&nbsp;<span class="string" id="7706356">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="7706409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706412">}</span><span class="op" id="7706413">,</span><br>
<span class="lineno"></span><span class="op" id="7706415">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7706418">func</span>&nbsp;<span class="ident" id="7706423">TestDumpResponse</span><span class="op" id="7706439">(</span><span class="ident" id="7706440">t</span>&nbsp;<span class="op" id="7706442">*</span><span class="ident" id="7706443">testing</span><span class="op" id="7706450">.</span><span class="ident" id="7706451">T</span><span class="op" id="7706452">)</span>&nbsp;<span class="op" id="7706454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706457">for</span>&nbsp;<span class="ident" id="7706461">i</span><span class="op" id="7706462">,</span>&nbsp;<span class="ident" id="7706464">tt</span>&nbsp;<span class="op" id="7706467">:=</span>&nbsp;<span class="keyword" id="7706470">range</span>&nbsp;<span class="ident" id="7706476">dumpResTests</span>&nbsp;<span class="op" id="7706489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706493">gotb</span><span class="op" id="7706497">,</span>&nbsp;<span class="ident" id="7706499">err</span>&nbsp;<span class="op" id="7706503">:=</span>&nbsp;<span class="ident" id="7706506">DumpResponse</span><span class="op" id="7706518">(</span><span class="ident" id="7706519">tt</span><span class="op" id="7706521">.</span><span class="ident" id="7706522">res</span><span class="op" id="7706525">,</span>&nbsp;<span class="ident" id="7706527">tt</span><span class="op" id="7706529">.</span><span class="ident" id="7706530">body</span><span class="op" id="7706534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706538">if</span>&nbsp;<span class="ident" id="7706541">err</span>&nbsp;<span class="op" id="7706545">!=</span>&nbsp;<span class="ident" id="7706548">nil</span>&nbsp;<span class="op" id="7706552">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706557">t</span><span class="op" id="7706558">.</span><span class="ident" id="7706559">Errorf</span><span class="op" id="7706565">(</span><span class="string" id="7706566">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7706589">,</span>&nbsp;<span class="ident" id="7706591">i</span><span class="op" id="7706592">,</span>&nbsp;<span class="ident" id="7706594">err</span><span class="op" id="7706597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706602">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706617">got</span>&nbsp;<span class="op" id="7706621">:=</span>&nbsp;<span class="builtintype" id="7706624">string</span><span class="op" id="7706630">(</span><span class="ident" id="7706631">gotb</span><span class="op" id="7706635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706639">got</span>&nbsp;<span class="op" id="7706643">=</span>&nbsp;<span class="ident" id="7706645">strings</span><span class="op" id="7706652">.</span><span class="ident" id="7706653">TrimSpace</span><span class="op" id="7706662">(</span><span class="ident" id="7706663">got</span><span class="op" id="7706666">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706670">got</span>&nbsp;<span class="op" id="7706674">=</span>&nbsp;<span class="ident" id="7706676">strings</span><span class="op" id="7706683">.</span><span class="ident" id="7706684">Replace</span><span class="op" id="7706691">(</span><span class="ident" id="7706692">got</span><span class="op" id="7706695">,</span>&nbsp;<span class="string" id="7706697">&#34;\r&#34;</span><span class="op" id="7706701">,</span>&nbsp;<span class="string" id="7706703">&#34;&#34;</span><span class="op" id="7706705">,</span>&nbsp;<span class="op" id="7706707">-</span><span class="num" id="7706708">1</span><span class="op" id="7706709">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706714">if</span>&nbsp;<span class="ident" id="7706717">got</span>&nbsp;<span class="op" id="7706721">!=</span>&nbsp;<span class="ident" id="7706724">tt</span><span class="op" id="7706726">.</span><span class="ident" id="7706727">want</span>&nbsp;<span class="op" id="7706732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706737">t</span><span class="op" id="7706738">.</span><span class="ident" id="7706739">Errorf</span><span class="op" id="7706745">(</span><span class="string" id="7706746">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="7706789">,</span>&nbsp;<span class="ident" id="7706791">i</span><span class="op" id="7706792">,</span>&nbsp;<span class="ident" id="7706794">got</span><span class="op" id="7706797">,</span>&nbsp;<span class="ident" id="7706799">tt</span><span class="op" id="7706801">.</span><span class="ident" id="7706802">want</span><span class="op" id="7706806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706810">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706813">}</span><br>
<span class="lineno"></span><span class="op" id="7706815">}</span>
</div>
</body>
</html>
