<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html" class="current">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2451948">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2452003">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2452057">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2452108">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2452178">package</span>&nbsp;<span class="ident" id="2452186">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2452190">import</span>&nbsp;<span class="op" id="2452197">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2452200">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2452211">&#34;sync/atomic&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2452226">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2452236">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2452239">//&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;file&nbsp;descriptor.</span><br>
<span class="lineno"></span><span class="keyword" id="2452283">type</span>&nbsp;<span class="ident" id="2452288">File</span>&nbsp;<span class="keyword" id="2452293">struct</span>&nbsp;<span class="op" id="2452300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2452303">*</span><span class="ident" id="2452304"><a href="/gostd/os/file_unix.go.html#2452525">file</a></span><br>
<span class="lineno"></span><span class="op" id="2452309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="2452312">//&nbsp;file&nbsp;is&nbsp;the&nbsp;real&nbsp;representation&nbsp;of&nbsp;*File.</span><br>
<span class="lineno"></span><span class="comment" id="2452357">//&nbsp;The&nbsp;extra&nbsp;level&nbsp;of&nbsp;indirection&nbsp;ensures&nbsp;that&nbsp;no&nbsp;clients&nbsp;of&nbsp;os</span><br>
<span class="lineno"></span><span class="comment" id="2452421">//&nbsp;can&nbsp;overwrite&nbsp;this&nbsp;data,&nbsp;which&nbsp;could&nbsp;cause&nbsp;the&nbsp;finalizer</span><br>
<span class="lineno"></span><span class="comment" id="2452481">//&nbsp;to&nbsp;close&nbsp;the&nbsp;wrong&nbsp;file&nbsp;descriptor.</span><br>
<span class="lineno"></span><span class="keyword" id="2452520">type</span>&nbsp;<span class="ident" id="2452525">file</span>&nbsp;<span class="keyword" id="2452530">struct</span>&nbsp;<span class="op" id="2452537">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452540">fd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2452548">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452553">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2452561">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452569">dirinfo</span>&nbsp;<span class="op" id="2452577">*</span><span class="ident" id="2452578"><a href="/gostd/os/file_unix.go.html#2453265">dirInfo</a></span>&nbsp;<span class="comment" id="2452586">//&nbsp;nil&nbsp;unless&nbsp;directory&nbsp;being&nbsp;read</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452622">nepipe</span>&nbsp;&nbsp;<span class="builtintype" id="2452630">int32</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2452639">//&nbsp;number&nbsp;of&nbsp;consecutive&nbsp;EPIPE&nbsp;in&nbsp;Write</span><br>
<span class="lineno"></span><span class="op" id="2452679">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="2452682">//&nbsp;Fd&nbsp;returns&nbsp;the&nbsp;integer&nbsp;Unix&nbsp;file&nbsp;descriptor&nbsp;referencing&nbsp;the&nbsp;open&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2452756">//&nbsp;The&nbsp;file&nbsp;descriptor&nbsp;is&nbsp;valid&nbsp;only&nbsp;until&nbsp;f.Close&nbsp;is&nbsp;called&nbsp;or&nbsp;f&nbsp;is&nbsp;garbage&nbsp;collected.</span><br>
<span class="lineno"></span><span class="keyword" id="2452844">func</span>&nbsp;<span class="op" id="2452849">(</span><span class="ident" id="2452850">f</span>&nbsp;<span class="op" id="2452852">*</span><span class="ident" id="2452853"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2452857">)</span>&nbsp;<span class="ident" id="2452859">Fd</span><span class="op" id="2452861">(</span><span class="op" id="2452862">)</span>&nbsp;<span class="builtintype" id="2452864">uintptr</span>&nbsp;<span class="op" id="2452872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452875">if</span>&nbsp;<span class="ident" id="2452878"><a href="/gostd/os/file_unix.go.html#2452850">f</a></span>&nbsp;<span class="op" id="2452880">==</span>&nbsp;<span class="builtintype" id="2452883">nil</span>&nbsp;<span class="op" id="2452887">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452891">return</span>&nbsp;<span class="op" id="2452898">^</span><span class="op" id="2452899">(</span><span class="builtintype" id="2452900">uintptr</span><span class="op" id="2452907">(</span><span class="num" id="2452908">0</span><span class="op" id="2452909">)</span><span class="op" id="2452910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2452913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452916">return</span>&nbsp;<span class="builtintype" id="2452923">uintptr</span><span class="op" id="2452930">(</span><span class="ident" id="2452931"><a href="/gostd/os/file_unix.go.html#2452850">f</a></span><span class="op" id="2452932">.</span><span class="ident" id="2452933"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2452935">)</span><br>
<span class="lineno"></span><span class="op" id="2452937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="2452940">//&nbsp;NewFile&nbsp;returns&nbsp;a&nbsp;new&nbsp;File&nbsp;with&nbsp;the&nbsp;given&nbsp;file&nbsp;descriptor&nbsp;and&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2453011">func</span>&nbsp;<span class="ident" id="2453016">NewFile</span><span class="op" id="2453023">(</span><span class="ident" id="2453024">fd</span>&nbsp;<span class="builtintype" id="2453027">uintptr</span><span class="op" id="2453034">,</span>&nbsp;<span class="ident" id="2453036">name</span>&nbsp;<span class="builtintype" id="2453041">string</span><span class="op" id="2453047">)</span>&nbsp;<span class="op" id="2453049">*</span><span class="ident" id="2453050"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span>&nbsp;<span class="op" id="2453055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453058">fdi</span>&nbsp;<span class="op" id="2453062">:=</span>&nbsp;<span class="builtintype" id="2453065">int</span><span class="op" id="2453068">(</span><span class="ident" id="2453069"><a href="/gostd/os/file_unix.go.html#2453024">fd</a></span><span class="op" id="2453071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453074">if</span>&nbsp;<span class="ident" id="2453077"><a href="/gostd/os/file_unix.go.html#2453058">fdi</a></span>&nbsp;<span class="op" id="2453081">&lt;</span>&nbsp;<span class="num" id="2453083">0</span>&nbsp;<span class="op" id="2453085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453089">return</span>&nbsp;<span class="builtintype" id="2453096">nil</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453104">f</span>&nbsp;<span class="op" id="2453106">:=</span>&nbsp;<span class="op" id="2453109">&amp;</span><span class="ident" id="2453110"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2453114">{</span><span class="op" id="2453115">&amp;</span><span class="ident" id="2453116"><a href="/gostd/os/file_unix.go.html#2452525">file</a></span><span class="op" id="2453120">{</span><span class="ident" id="2453121"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2453123">:</span>&nbsp;<span class="ident" id="2453125"><a href="/gostd/os/file_unix.go.html#2453058">fdi</a></span><span class="op" id="2453128">,</span>&nbsp;<span class="ident" id="2453130"><a href="/gostd/os/file_unix.go.html#2452553">name</a></span><span class="op" id="2453134">:</span>&nbsp;<span class="ident" id="2453136"><a href="/gostd/os/file_unix.go.html#2453036">name</a></span><span class="op" id="2453140">}</span><span class="op" id="2453141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453144"><a href="/gostd/os/file_unix.go.html#2452200">runtime</a></span><span class="op" id="2453151">.</span><span class="ident" id="2453152"><a href="/gostd/runtime/malloc.go.html#1604775">SetFinalizer</a></span><span class="op" id="2453164">(</span><span class="ident" id="2453165"><a href="/gostd/os/file_unix.go.html#2453104">f</a></span><span class="op" id="2453166">.</span><span class="ident" id="2453167"><a href="/gostd/os/file_unix.go.html#2452303">file</a></span><span class="op" id="2453171">,</span>&nbsp;<span class="op" id="2453173">(</span><span class="op" id="2453174">*</span><span class="ident" id="2453175"><a href="/gostd/os/file_unix.go.html#2452525">file</a></span><span class="op" id="2453179">)</span><span class="op" id="2453180">.</span><span class="builtinfunc" id="2453181"><a href="/gostd/os/file_unix.go.html#2454709">close</a></span><span class="op" id="2453186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453189">return</span>&nbsp;<span class="ident" id="2453196"><a href="/gostd/os/file_unix.go.html#2453104">f</a></span><br>
<span class="lineno"></span><span class="op" id="2453198">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2453201">//&nbsp;Auxiliary&nbsp;information&nbsp;if&nbsp;the&nbsp;File&nbsp;describes&nbsp;a&nbsp;directory</span><br>
<span class="lineno"></span><span class="keyword" id="2453260">type</span>&nbsp;<span class="ident" id="2453265">dirInfo</span>&nbsp;<span class="keyword" id="2453273">struct</span>&nbsp;<span class="op" id="2453280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453283">buf</span>&nbsp;&nbsp;<span class="op" id="2453288">[</span><span class="op" id="2453289">]</span><span class="builtintype" id="2453290">byte</span>&nbsp;<span class="comment" id="2453295">//&nbsp;buffer&nbsp;for&nbsp;directory&nbsp;I/O</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453324">nbuf</span>&nbsp;<span class="builtintype" id="2453329">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2453336">//&nbsp;length&nbsp;of&nbsp;buf;&nbsp;return&nbsp;value&nbsp;from&nbsp;Getdirentries</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453387">bufp</span>&nbsp;<span class="builtintype" id="2453392">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2453399">//&nbsp;location&nbsp;of&nbsp;next&nbsp;record&nbsp;in&nbsp;buf.</span><br>
<span class="lineno"></span><span class="op" id="2453434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2453437">func</span>&nbsp;<span class="ident" id="2453442">epipecheck</span><span class="op" id="2453452">(</span><span class="ident" id="2453453">file</span>&nbsp;<span class="op" id="2453458">*</span><span class="ident" id="2453459"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2453463">,</span>&nbsp;<span class="ident" id="2453465">e</span>&nbsp;<span class="builtintype" id="2453467">error</span><span class="op" id="2453472">)</span>&nbsp;<span class="op" id="2453474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453477">if</span>&nbsp;<span class="ident" id="2453480"><a href="/gostd/os/file_unix.go.html#2453465">e</a></span>&nbsp;<span class="op" id="2453482">==</span>&nbsp;<span class="ident" id="2453485"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2453492">.</span><span class="ident" id="2453493"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2603370">EPIPE</a></span>&nbsp;<span class="op" id="2453499">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453503">if</span>&nbsp;<span class="ident" id="2453506"><a href="/gostd/os/file_unix.go.html#2452211">atomic</a></span><span class="op" id="2453512">.</span><span class="ident" id="2453513"><a href="/gostd/sync/atomic/doc.go.html#1466936">AddInt32</a></span><span class="op" id="2453521">(</span><span class="op" id="2453522">&amp;</span><span class="ident" id="2453523"><a href="/gostd/os/file_unix.go.html#2453453">file</a></span><span class="op" id="2453527">.</span><span class="ident" id="2453528"><a href="/gostd/os/file_unix.go.html#2452622">nepipe</a></span><span class="op" id="2453534">,</span>&nbsp;<span class="num" id="2453536">1</span><span class="op" id="2453537">)</span>&nbsp;<span class="op" id="2453539">&gt;=</span>&nbsp;<span class="num" id="2453542">10</span>&nbsp;<span class="op" id="2453545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453550"><a href="/gostd/os/file_posix.go.html#2448043">sigpipe</a></span><span class="op" id="2453557">(</span><span class="op" id="2453558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453565">}</span>&nbsp;<span class="keyword" id="2453567">else</span>&nbsp;<span class="op" id="2453572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453576"><a href="/gostd/os/file_unix.go.html#2452211">atomic</a></span><span class="op" id="2453582">.</span><span class="ident" id="2453583"><a href="/gostd/sync/atomic/doc.go.html#1468363">StoreInt32</a></span><span class="op" id="2453593">(</span><span class="op" id="2453594">&amp;</span><span class="ident" id="2453595"><a href="/gostd/os/file_unix.go.html#2453453">file</a></span><span class="op" id="2453599">.</span><span class="ident" id="2453600"><a href="/gostd/os/file_unix.go.html#2452622">nepipe</a></span><span class="op" id="2453606">,</span>&nbsp;<span class="num" id="2453608">0</span><span class="op" id="2453609">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453612">}</span><br>
<span class="lineno"></span><span class="op" id="2453614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2453617">//&nbsp;DevNull&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s&nbsp;``null&nbsp;device.&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2453683">//&nbsp;On&nbsp;Unix-like&nbsp;systems,&nbsp;it&nbsp;is&nbsp;&#34;/dev/null&#34;;&nbsp;on&nbsp;Windows,&nbsp;&#34;NUL&#34;.</span><br>
<span class="lineno">70</span><span class="keyword" id="2453746">const</span>&nbsp;<span class="ident" id="2453752">DevNull</span>&nbsp;<span class="op" id="2453760">=</span>&nbsp;<span class="string" id="2453762">&#34;/dev/null&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2453775">//&nbsp;OpenFile&nbsp;is&nbsp;the&nbsp;generalized&nbsp;open&nbsp;call;&nbsp;most&nbsp;users&nbsp;will&nbsp;use&nbsp;Open</span><br>
<span class="lineno"></span><span class="comment" id="2453842">//&nbsp;or&nbsp;Create&nbsp;instead.&nbsp;&nbsp;It&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;with&nbsp;specified&nbsp;flag</span><br>
<span class="lineno"></span><span class="comment" id="2453909">//&nbsp;(O_RDONLY&nbsp;etc.)&nbsp;and&nbsp;perm,&nbsp;(0666&nbsp;etc.)&nbsp;if&nbsp;applicable.&nbsp;&nbsp;If&nbsp;successful,</span><br>
<span class="lineno">75</span><span class="comment" id="2453981">//&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O.</span><br>
<span class="lineno"></span><span class="comment" id="2454034">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2454090">func</span>&nbsp;<span class="ident" id="2454095">OpenFile</span><span class="op" id="2454103">(</span><span class="ident" id="2454104">name</span>&nbsp;<span class="builtintype" id="2454109">string</span><span class="op" id="2454115">,</span>&nbsp;<span class="ident" id="2454117">flag</span>&nbsp;<span class="builtintype" id="2454122">int</span><span class="op" id="2454125">,</span>&nbsp;<span class="ident" id="2454127">perm</span>&nbsp;<span class="ident" id="2454132"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="2454140">)</span>&nbsp;<span class="op" id="2454142">(</span><span class="ident" id="2454143">file</span>&nbsp;<span class="op" id="2454148">*</span><span class="ident" id="2454149"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2454153">,</span>&nbsp;<span class="ident" id="2454155">err</span>&nbsp;<span class="builtintype" id="2454159">error</span><span class="op" id="2454164">)</span>&nbsp;<span class="op" id="2454166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454169">r</span><span class="op" id="2454170">,</span>&nbsp;<span class="ident" id="2454172">e</span>&nbsp;<span class="op" id="2454174">:=</span>&nbsp;<span class="ident" id="2454177"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2454184">.</span><span class="ident" id="2454185"><a href="/gostd/syscall/syscall_linux.go.html#2512590">Open</a></span><span class="op" id="2454189">(</span><span class="ident" id="2454190"><a href="/gostd/os/file_unix.go.html#2454104">name</a></span><span class="op" id="2454194">,</span>&nbsp;<span class="ident" id="2454196"><a href="/gostd/os/file_unix.go.html#2454117">flag</a></span><span class="op" id="2454200">|</span><span class="ident" id="2454201"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2454208">.</span><span class="ident" id="2454209"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2576992">O_CLOEXEC</a></span><span class="op" id="2454218">,</span>&nbsp;<span class="ident" id="2454220"><a href="/gostd/os/file_posix.go.html#2448732">syscallMode</a></span><span class="op" id="2454231">(</span><span class="ident" id="2454232"><a href="/gostd/os/file_unix.go.html#2454127">perm</a></span><span class="op" id="2454236">)</span><span class="op" id="2454237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454240">if</span>&nbsp;<span class="ident" id="2454243"><a href="/gostd/os/file_unix.go.html#2454172">e</a></span>&nbsp;<span class="op" id="2454245">!=</span>&nbsp;<span class="builtintype" id="2454248">nil</span>&nbsp;<span class="op" id="2454252">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454256">return</span>&nbsp;<span class="builtintype" id="2454263">nil</span><span class="op" id="2454266">,</span>&nbsp;<span class="op" id="2454268">&amp;</span><span class="ident" id="2454269"><a href="/gostd/os/error.go.html#2430932">PathError</a></span><span class="op" id="2454278">{</span><span class="string" id="2454279">&#34;open&#34;</span><span class="op" id="2454285">,</span>&nbsp;<span class="ident" id="2454287"><a href="/gostd/os/file_unix.go.html#2454104">name</a></span><span class="op" id="2454291">,</span>&nbsp;<span class="ident" id="2454293"><a href="/gostd/os/file_unix.go.html#2454172">e</a></span><span class="op" id="2454294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2454297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2454301">//&nbsp;There&#39;s&nbsp;a&nbsp;race&nbsp;here&nbsp;with&nbsp;fork/exec,&nbsp;which&nbsp;we&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2454354">//&nbsp;content&nbsp;to&nbsp;live&nbsp;with.&nbsp;&nbsp;See&nbsp;../syscall/exec_unix.go.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454410">if</span>&nbsp;<span class="op" id="2454413">!</span><span class="ident" id="2454414"><a href="/gostd/os/sys_unix.go.html#2472036">supportsCloseOnExec</a></span>&nbsp;<span class="op" id="2454434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454438"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2454445">.</span><span class="ident" id="2454446"><a href="/gostd/syscall/exec_unix.go.html#2492669">CloseOnExec</a></span><span class="op" id="2454457">(</span><span class="ident" id="2454458"><a href="/gostd/os/file_unix.go.html#2454169">r</a></span><span class="op" id="2454459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2454462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454466">return</span>&nbsp;<span class="ident" id="2454473"><a href="/gostd/os/file_unix.go.html#2453016">NewFile</a></span><span class="op" id="2454480">(</span><span class="builtintype" id="2454481">uintptr</span><span class="op" id="2454488">(</span><span class="ident" id="2454489"><a href="/gostd/os/file_unix.go.html#2454169">r</a></span><span class="op" id="2454490">)</span><span class="op" id="2454491">,</span>&nbsp;<span class="ident" id="2454493"><a href="/gostd/os/file_unix.go.html#2454104">name</a></span><span class="op" id="2454497">)</span><span class="op" id="2454498">,</span>&nbsp;<span class="builtintype" id="2454500">nil</span><br>
<span class="lineno">90</span><span class="op" id="2454504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2454507">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File,&nbsp;rendering&nbsp;it&nbsp;unusable&nbsp;for&nbsp;I/O.</span><br>
<span class="lineno"></span><span class="comment" id="2454564">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2454596">func</span>&nbsp;<span class="op" id="2454601">(</span><span class="ident" id="2454602">f</span>&nbsp;<span class="op" id="2454604">*</span><span class="ident" id="2454605"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2454609">)</span>&nbsp;<span class="ident" id="2454611">Close</span><span class="op" id="2454616">(</span><span class="op" id="2454617">)</span>&nbsp;<span class="builtintype" id="2454619">error</span>&nbsp;<span class="op" id="2454625">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454628">if</span>&nbsp;<span class="ident" id="2454631"><a href="/gostd/os/file_unix.go.html#2454602">f</a></span>&nbsp;<span class="op" id="2454633">==</span>&nbsp;<span class="builtintype" id="2454636">nil</span>&nbsp;<span class="op" id="2454640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454644">return</span>&nbsp;<span class="ident" id="2454651"><a href="/gostd/os/error.go.html#2430648">ErrInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2454663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454666">return</span>&nbsp;<span class="ident" id="2454673"><a href="/gostd/os/file_unix.go.html#2454602">f</a></span><span class="op" id="2454674">.</span><span class="ident" id="2454675"><a href="/gostd/os/file_unix.go.html#2452303">file</a></span><span class="op" id="2454679">.</span><span class="builtinfunc" id="2454680"><a href="/gostd/os/file_unix.go.html#2454709">close</a></span><span class="op" id="2454685">(</span><span class="op" id="2454686">)</span><br>
<span class="lineno"></span><span class="op" id="2454688">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="2454691">func</span>&nbsp;<span class="op" id="2454696">(</span><span class="ident" id="2454697">file</span>&nbsp;<span class="op" id="2454702">*</span><span class="ident" id="2454703"><a href="/gostd/os/file_unix.go.html#2452525">file</a></span><span class="op" id="2454707">)</span>&nbsp;<span class="builtinfunc" id="2454709">close</span><span class="op" id="2454714">(</span><span class="op" id="2454715">)</span>&nbsp;<span class="builtintype" id="2454717">error</span>&nbsp;<span class="op" id="2454723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454726">if</span>&nbsp;<span class="ident" id="2454729"><a href="/gostd/os/file_unix.go.html#2454697">file</a></span>&nbsp;<span class="op" id="2454734">==</span>&nbsp;<span class="builtintype" id="2454737">nil</span>&nbsp;<span class="op" id="2454741">||</span>&nbsp;<span class="ident" id="2454744"><a href="/gostd/os/file_unix.go.html#2454697">file</a></span><span class="op" id="2454748">.</span><span class="ident" id="2454749"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span>&nbsp;<span class="op" id="2454752">&lt;</span>&nbsp;<span class="num" id="2454754">0</span>&nbsp;<span class="op" id="2454756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454760">return</span>&nbsp;<span class="ident" id="2454767"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2454774">.</span><span class="ident" id="2454775"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2454783">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454786">var</span>&nbsp;<span class="ident" id="2454790">err</span>&nbsp;<span class="builtintype" id="2454794">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454801">if</span>&nbsp;<span class="ident" id="2454804">e</span>&nbsp;<span class="op" id="2454806">:=</span>&nbsp;<span class="ident" id="2454809"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2454816">.</span><span class="ident" id="2454817"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2616725">Close</a></span><span class="op" id="2454822">(</span><span class="ident" id="2454823"><a href="/gostd/os/file_unix.go.html#2454697">file</a></span><span class="op" id="2454827">.</span><span class="ident" id="2454828"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2454830">)</span><span class="op" id="2454831">;</span>&nbsp;<span class="ident" id="2454833"><a href="/gostd/os/file_unix.go.html#2454804">e</a></span>&nbsp;<span class="op" id="2454835">!=</span>&nbsp;<span class="builtintype" id="2454838">nil</span>&nbsp;<span class="op" id="2454842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454846"><a href="/gostd/os/file_unix.go.html#2454790">err</a></span>&nbsp;<span class="op" id="2454850">=</span>&nbsp;<span class="op" id="2454852">&amp;</span><span class="ident" id="2454853"><a href="/gostd/os/error.go.html#2430932">PathError</a></span><span class="op" id="2454862">{</span><span class="string" id="2454863">&#34;close&#34;</span><span class="op" id="2454870">,</span>&nbsp;<span class="ident" id="2454872"><a href="/gostd/os/file_unix.go.html#2454697">file</a></span><span class="op" id="2454876">.</span><span class="ident" id="2454877"><a href="/gostd/os/file_unix.go.html#2452553">name</a></span><span class="op" id="2454881">,</span>&nbsp;<span class="ident" id="2454883"><a href="/gostd/os/file_unix.go.html#2454804">e</a></span><span class="op" id="2454884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2454887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454890"><a href="/gostd/os/file_unix.go.html#2454697">file</a></span><span class="op" id="2454894">.</span><span class="ident" id="2454895"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span>&nbsp;<span class="op" id="2454898">=</span>&nbsp;<span class="op" id="2454900">-</span><span class="num" id="2454901">1</span>&nbsp;<span class="comment" id="2454903">//&nbsp;so&nbsp;it&nbsp;can&#39;t&nbsp;be&nbsp;closed&nbsp;again</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2454936">//&nbsp;no&nbsp;need&nbsp;for&nbsp;a&nbsp;finalizer&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454972"><a href="/gostd/os/file_unix.go.html#2452200">runtime</a></span><span class="op" id="2454979">.</span><span class="ident" id="2454980"><a href="/gostd/runtime/malloc.go.html#1604775">SetFinalizer</a></span><span class="op" id="2454992">(</span><span class="ident" id="2454993"><a href="/gostd/os/file_unix.go.html#2454697">file</a></span><span class="op" id="2454997">,</span>&nbsp;<span class="builtintype" id="2454999">nil</span><span class="op" id="2455002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455005">return</span>&nbsp;<span class="ident" id="2455012"><a href="/gostd/os/file_unix.go.html#2454790">err</a></span><br>
<span class="lineno"></span><span class="op" id="2455016">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="2455019">//&nbsp;Stat&nbsp;returns&nbsp;the&nbsp;FileInfo&nbsp;structure&nbsp;describing&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2455075">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2455131">func</span>&nbsp;<span class="op" id="2455136">(</span><span class="ident" id="2455137">f</span>&nbsp;<span class="op" id="2455139">*</span><span class="ident" id="2455140"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2455144">)</span>&nbsp;<span class="ident" id="2455146">Stat</span><span class="op" id="2455150">(</span><span class="op" id="2455151">)</span>&nbsp;<span class="op" id="2455153">(</span><span class="ident" id="2455154">fi</span>&nbsp;<span class="ident" id="2455157"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="2455165">,</span>&nbsp;<span class="ident" id="2455167">err</span>&nbsp;<span class="builtintype" id="2455171">error</span><span class="op" id="2455176">)</span>&nbsp;<span class="op" id="2455178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455181">if</span>&nbsp;<span class="ident" id="2455184"><a href="/gostd/os/file_unix.go.html#2455137">f</a></span>&nbsp;<span class="op" id="2455186">==</span>&nbsp;<span class="builtintype" id="2455189">nil</span>&nbsp;<span class="op" id="2455193">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455197">return</span>&nbsp;<span class="builtintype" id="2455204">nil</span><span class="op" id="2455207">,</span>&nbsp;<span class="ident" id="2455209"><a href="/gostd/os/error.go.html#2430648">ErrInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455224">var</span>&nbsp;<span class="ident" id="2455228">stat</span>&nbsp;<span class="ident" id="2455233"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2455240">.</span><span class="ident" id="2455241"><a href="/gostd/syscall/ztypes_linux_amd64.go.html#2667552">Stat_t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455249"><a href="/gostd/os/file_unix.go.html#2455167">err</a></span>&nbsp;<span class="op" id="2455253">=</span>&nbsp;<span class="ident" id="2455255"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2455262">.</span><span class="ident" id="2455263"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2642303">Fstat</a></span><span class="op" id="2455268">(</span><span class="ident" id="2455269"><a href="/gostd/os/file_unix.go.html#2455137">f</a></span><span class="op" id="2455270">.</span><span class="ident" id="2455271"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2455273">,</span>&nbsp;<span class="op" id="2455275">&amp;</span><span class="ident" id="2455276"><a href="/gostd/os/file_unix.go.html#2455228">stat</a></span><span class="op" id="2455280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455283">if</span>&nbsp;<span class="ident" id="2455286"><a href="/gostd/os/file_unix.go.html#2455167">err</a></span>&nbsp;<span class="op" id="2455290">!=</span>&nbsp;<span class="builtintype" id="2455293">nil</span>&nbsp;<span class="op" id="2455297">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455301">return</span>&nbsp;<span class="builtintype" id="2455308">nil</span><span class="op" id="2455311">,</span>&nbsp;<span class="op" id="2455313">&amp;</span><span class="ident" id="2455314"><a href="/gostd/os/error.go.html#2430932">PathError</a></span><span class="op" id="2455323">{</span><span class="string" id="2455324">&#34;stat&#34;</span><span class="op" id="2455330">,</span>&nbsp;<span class="ident" id="2455332"><a href="/gostd/os/file_unix.go.html#2455137">f</a></span><span class="op" id="2455333">.</span><span class="ident" id="2455334"><a href="/gostd/os/file_unix.go.html#2452553">name</a></span><span class="op" id="2455338">,</span>&nbsp;<span class="ident" id="2455340"><a href="/gostd/os/file_unix.go.html#2455167">err</a></span><span class="op" id="2455343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455349">return</span>&nbsp;<span class="ident" id="2455356"><a href="/gostd/os/stat_linux.go.html#2470186">fileInfoFromStat</a></span><span class="op" id="2455372">(</span><span class="op" id="2455373">&amp;</span><span class="ident" id="2455374"><a href="/gostd/os/file_unix.go.html#2455228">stat</a></span><span class="op" id="2455378">,</span>&nbsp;<span class="ident" id="2455380"><a href="/gostd/os/file_unix.go.html#2455137">f</a></span><span class="op" id="2455381">.</span><span class="ident" id="2455382"><a href="/gostd/os/file_unix.go.html#2452553">name</a></span><span class="op" id="2455386">)</span><span class="op" id="2455387">,</span>&nbsp;<span class="builtintype" id="2455389">nil</span><br>
<span class="lineno"></span><span class="op" id="2455393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="2455396">//&nbsp;Stat&nbsp;returns&nbsp;a&nbsp;FileInfo&nbsp;describing&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2455450">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2455506">func</span>&nbsp;<span class="ident" id="2455511">Stat</span><span class="op" id="2455515">(</span><span class="ident" id="2455516">name</span>&nbsp;<span class="builtintype" id="2455521">string</span><span class="op" id="2455527">)</span>&nbsp;<span class="op" id="2455529">(</span><span class="ident" id="2455530">fi</span>&nbsp;<span class="ident" id="2455533"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="2455541">,</span>&nbsp;<span class="ident" id="2455543">err</span>&nbsp;<span class="builtintype" id="2455547">error</span><span class="op" id="2455552">)</span>&nbsp;<span class="op" id="2455554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455557">var</span>&nbsp;<span class="ident" id="2455561">stat</span>&nbsp;<span class="ident" id="2455566"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2455573">.</span><span class="ident" id="2455574"><a href="/gostd/syscall/ztypes_linux_amd64.go.html#2667552">Stat_t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455582"><a href="/gostd/os/file_unix.go.html#2455543">err</a></span>&nbsp;<span class="op" id="2455586">=</span>&nbsp;<span class="ident" id="2455588"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2455595">.</span><span class="ident" id="2455596"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2649224">Stat</a></span><span class="op" id="2455600">(</span><span class="ident" id="2455601"><a href="/gostd/os/file_unix.go.html#2455516">name</a></span><span class="op" id="2455605">,</span>&nbsp;<span class="op" id="2455607">&amp;</span><span class="ident" id="2455608"><a href="/gostd/os/file_unix.go.html#2455561">stat</a></span><span class="op" id="2455612">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455615">if</span>&nbsp;<span class="ident" id="2455618"><a href="/gostd/os/file_unix.go.html#2455543">err</a></span>&nbsp;<span class="op" id="2455622">!=</span>&nbsp;<span class="builtintype" id="2455625">nil</span>&nbsp;<span class="op" id="2455629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455633">return</span>&nbsp;<span class="builtintype" id="2455640">nil</span><span class="op" id="2455643">,</span>&nbsp;<span class="op" id="2455645">&amp;</span><span class="ident" id="2455646"><a href="/gostd/os/error.go.html#2430932">PathError</a></span><span class="op" id="2455655">{</span><span class="string" id="2455656">&#34;stat&#34;</span><span class="op" id="2455662">,</span>&nbsp;<span class="ident" id="2455664"><a href="/gostd/os/file_unix.go.html#2455516">name</a></span><span class="op" id="2455668">,</span>&nbsp;<span class="ident" id="2455670"><a href="/gostd/os/file_unix.go.html#2455543">err</a></span><span class="op" id="2455673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455679">return</span>&nbsp;<span class="ident" id="2455686"><a href="/gostd/os/stat_linux.go.html#2470186">fileInfoFromStat</a></span><span class="op" id="2455702">(</span><span class="op" id="2455703">&amp;</span><span class="ident" id="2455704"><a href="/gostd/os/file_unix.go.html#2455561">stat</a></span><span class="op" id="2455708">,</span>&nbsp;<span class="ident" id="2455710"><a href="/gostd/os/file_unix.go.html#2455516">name</a></span><span class="op" id="2455714">)</span><span class="op" id="2455715">,</span>&nbsp;<span class="builtintype" id="2455717">nil</span><br>
<span class="lineno"></span><span class="op" id="2455721">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2455724">//&nbsp;Lstat&nbsp;returns&nbsp;a&nbsp;FileInfo&nbsp;describing&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2455779">//&nbsp;If&nbsp;the&nbsp;file&nbsp;is&nbsp;a&nbsp;symbolic&nbsp;link,&nbsp;the&nbsp;returned&nbsp;FileInfo</span><br>
<span class="lineno"></span><span class="comment" id="2455836">//&nbsp;describes&nbsp;the&nbsp;symbolic&nbsp;link.&nbsp;&nbsp;Lstat&nbsp;makes&nbsp;no&nbsp;attempt&nbsp;to&nbsp;follow&nbsp;the&nbsp;link.</span><br>
<span class="lineno"></span><span class="comment" id="2455912">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno">145</span><span class="keyword" id="2455968">func</span>&nbsp;<span class="ident" id="2455973">Lstat</span><span class="op" id="2455978">(</span><span class="ident" id="2455979">name</span>&nbsp;<span class="builtintype" id="2455984">string</span><span class="op" id="2455990">)</span>&nbsp;<span class="op" id="2455992">(</span><span class="ident" id="2455993">fi</span>&nbsp;<span class="ident" id="2455996"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="2456004">,</span>&nbsp;<span class="ident" id="2456006">err</span>&nbsp;<span class="builtintype" id="2456010">error</span><span class="op" id="2456015">)</span>&nbsp;<span class="op" id="2456017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456020">var</span>&nbsp;<span class="ident" id="2456024">stat</span>&nbsp;<span class="ident" id="2456029"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2456036">.</span><span class="ident" id="2456037"><a href="/gostd/syscall/ztypes_linux_amd64.go.html#2667552">Stat_t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456045"><a href="/gostd/os/file_unix.go.html#2456006">err</a></span>&nbsp;<span class="op" id="2456049">=</span>&nbsp;<span class="ident" id="2456051"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2456058">.</span><span class="ident" id="2456059"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2644898">Lstat</a></span><span class="op" id="2456064">(</span><span class="ident" id="2456065"><a href="/gostd/os/file_unix.go.html#2455979">name</a></span><span class="op" id="2456069">,</span>&nbsp;<span class="op" id="2456071">&amp;</span><span class="ident" id="2456072"><a href="/gostd/os/file_unix.go.html#2456024">stat</a></span><span class="op" id="2456076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456079">if</span>&nbsp;<span class="ident" id="2456082"><a href="/gostd/os/file_unix.go.html#2456006">err</a></span>&nbsp;<span class="op" id="2456086">!=</span>&nbsp;<span class="builtintype" id="2456089">nil</span>&nbsp;<span class="op" id="2456093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456097">return</span>&nbsp;<span class="builtintype" id="2456104">nil</span><span class="op" id="2456107">,</span>&nbsp;<span class="op" id="2456109">&amp;</span><span class="ident" id="2456110"><a href="/gostd/os/error.go.html#2430932">PathError</a></span><span class="op" id="2456119">{</span><span class="string" id="2456120">&#34;lstat&#34;</span><span class="op" id="2456127">,</span>&nbsp;<span class="ident" id="2456129"><a href="/gostd/os/file_unix.go.html#2455979">name</a></span><span class="op" id="2456133">,</span>&nbsp;<span class="ident" id="2456135"><a href="/gostd/os/file_unix.go.html#2456006">err</a></span><span class="op" id="2456138">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456144">return</span>&nbsp;<span class="ident" id="2456151"><a href="/gostd/os/stat_linux.go.html#2470186">fileInfoFromStat</a></span><span class="op" id="2456167">(</span><span class="op" id="2456168">&amp;</span><span class="ident" id="2456169"><a href="/gostd/os/file_unix.go.html#2456024">stat</a></span><span class="op" id="2456173">,</span>&nbsp;<span class="ident" id="2456175"><a href="/gostd/os/file_unix.go.html#2455979">name</a></span><span class="op" id="2456179">)</span><span class="op" id="2456180">,</span>&nbsp;<span class="builtintype" id="2456182">nil</span><br>
<span class="lineno"></span><span class="op" id="2456186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2456189">func</span>&nbsp;<span class="op" id="2456194">(</span><span class="ident" id="2456195">f</span>&nbsp;<span class="op" id="2456197">*</span><span class="ident" id="2456198"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2456202">)</span>&nbsp;<span class="ident" id="2456204">readdir</span><span class="op" id="2456211">(</span><span class="ident" id="2456212">n</span>&nbsp;<span class="builtintype" id="2456214">int</span><span class="op" id="2456217">)</span>&nbsp;<span class="op" id="2456219">(</span><span class="ident" id="2456220">fi</span>&nbsp;<span class="op" id="2456223">[</span><span class="op" id="2456224">]</span><span class="ident" id="2456225"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="2456233">,</span>&nbsp;<span class="ident" id="2456235">err</span>&nbsp;<span class="builtintype" id="2456239">error</span><span class="op" id="2456244">)</span>&nbsp;<span class="op" id="2456246">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456249">dirname</span>&nbsp;<span class="op" id="2456257">:=</span>&nbsp;<span class="ident" id="2456260"><a href="/gostd/os/file_unix.go.html#2456195">f</a></span><span class="op" id="2456261">.</span><span class="ident" id="2456262"><a href="/gostd/os/file_unix.go.html#2452553">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456268">if</span>&nbsp;<span class="ident" id="2456271"><a href="/gostd/os/file_unix.go.html#2456249">dirname</a></span>&nbsp;<span class="op" id="2456279">==</span>&nbsp;<span class="string" id="2456282">&#34;&#34;</span>&nbsp;<span class="op" id="2456285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456289"><a href="/gostd/os/file_unix.go.html#2456249">dirname</a></span>&nbsp;<span class="op" id="2456297">=</span>&nbsp;<span class="string" id="2456299">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456307">names</span><span class="op" id="2456312">,</span>&nbsp;<span class="ident" id="2456314"><a href="/gostd/os/file_unix.go.html#2456235">err</a></span>&nbsp;<span class="op" id="2456318">:=</span>&nbsp;<span class="ident" id="2456321"><a href="/gostd/os/file_unix.go.html#2456195">f</a></span><span class="op" id="2456322">.</span><span class="ident" id="2456323"><a href="/gostd/os/doc.go.html#2427225">Readdirnames</a></span><span class="op" id="2456335">(</span><span class="ident" id="2456336"><a href="/gostd/os/file_unix.go.html#2456212">n</a></span><span class="op" id="2456337">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456340"><a href="/gostd/os/file_unix.go.html#2456220">fi</a></span>&nbsp;<span class="op" id="2456343">=</span>&nbsp;<span class="builtinfunc" id="2456345">make</span><span class="op" id="2456349">(</span><span class="op" id="2456350">[</span><span class="op" id="2456351">]</span><span class="ident" id="2456352"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="2456360">,</span>&nbsp;<span class="num" id="2456362">0</span><span class="op" id="2456363">,</span>&nbsp;<span class="builtinfunc" id="2456365">len</span><span class="op" id="2456368">(</span><span class="ident" id="2456369"><a href="/gostd/os/file_unix.go.html#2456307">names</a></span><span class="op" id="2456374">)</span><span class="op" id="2456375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456378">for</span>&nbsp;<span class="ident" id="2456382">_</span><span class="op" id="2456383">,</span>&nbsp;<span class="ident" id="2456385">filename</span>&nbsp;<span class="op" id="2456394">:=</span>&nbsp;<span class="keyword" id="2456397">range</span>&nbsp;<span class="ident" id="2456403"><a href="/gostd/os/file_unix.go.html#2456307">names</a></span>&nbsp;<span class="op" id="2456409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456413">fip</span><span class="op" id="2456416">,</span>&nbsp;<span class="ident" id="2456418">lerr</span>&nbsp;<span class="op" id="2456423">:=</span>&nbsp;<span class="ident" id="2456426"><a href="/gostd/os/file.go.html#2447365">lstat</a></span><span class="op" id="2456431">(</span><span class="ident" id="2456432"><a href="/gostd/os/file_unix.go.html#2456249">dirname</a></span>&nbsp;<span class="op" id="2456440">+</span>&nbsp;<span class="string" id="2456442">&#34;/&#34;</span>&nbsp;<span class="op" id="2456446">+</span>&nbsp;<span class="ident" id="2456448"><a href="/gostd/os/file_unix.go.html#2456385">filename</a></span><span class="op" id="2456456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456460">if</span>&nbsp;<span class="ident" id="2456463"><a href="/gostd/os/error.go.html#2432029">IsNotExist</a></span><span class="op" id="2456473">(</span><span class="ident" id="2456474"><a href="/gostd/os/file_unix.go.html#2456418">lerr</a></span><span class="op" id="2456478">)</span>&nbsp;<span class="op" id="2456480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2456485">//&nbsp;File&nbsp;disappeared&nbsp;between&nbsp;readdir&nbsp;+&nbsp;stat.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2456532">//&nbsp;Just&nbsp;treat&nbsp;it&nbsp;as&nbsp;if&nbsp;it&nbsp;didn&#39;t&nbsp;exist.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456575">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456590">if</span>&nbsp;<span class="ident" id="2456593"><a href="/gostd/os/file_unix.go.html#2456418">lerr</a></span>&nbsp;<span class="op" id="2456598">!=</span>&nbsp;<span class="builtintype" id="2456601">nil</span>&nbsp;<span class="op" id="2456605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456610">return</span>&nbsp;<span class="ident" id="2456617"><a href="/gostd/os/file_unix.go.html#2456220">fi</a></span><span class="op" id="2456619">,</span>&nbsp;<span class="ident" id="2456621"><a href="/gostd/os/file_unix.go.html#2456418">lerr</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456632"><a href="/gostd/os/file_unix.go.html#2456220">fi</a></span>&nbsp;<span class="op" id="2456635">=</span>&nbsp;<span class="builtinfunc" id="2456637">append</span><span class="op" id="2456643">(</span><span class="ident" id="2456644"><a href="/gostd/os/file_unix.go.html#2456220">fi</a></span><span class="op" id="2456646">,</span>&nbsp;<span class="ident" id="2456648"><a href="/gostd/os/file_unix.go.html#2456413">fip</a></span><span class="op" id="2456651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456657">return</span>&nbsp;<span class="ident" id="2456664"><a href="/gostd/os/file_unix.go.html#2456220">fi</a></span><span class="op" id="2456666">,</span>&nbsp;<span class="ident" id="2456668"><a href="/gostd/os/file_unix.go.html#2456235">err</a></span><br>
<span class="lineno"></span><span class="op" id="2456672">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="2456675">//&nbsp;Darwin&nbsp;and&nbsp;FreeBSD&nbsp;can&#39;t&nbsp;read&nbsp;or&nbsp;write&nbsp;2GB+&nbsp;at&nbsp;a&nbsp;time,</span><br>
<span class="lineno"></span><span class="comment" id="2456733">//&nbsp;even&nbsp;on&nbsp;64-bit&nbsp;systems.&nbsp;See&nbsp;golang.org/issue/7812.</span><br>
<span class="lineno"></span><span class="comment" id="2456787">//&nbsp;Use&nbsp;1GB&nbsp;instead&nbsp;of,&nbsp;say,&nbsp;2GB-1,&nbsp;to&nbsp;keep&nbsp;subsequent</span><br>
<span class="lineno"></span><span class="comment" id="2456841">//&nbsp;reads&nbsp;aligned.</span><br>
<span class="lineno">180</span><span class="keyword" id="2456859">const</span>&nbsp;<span class="op" id="2456865">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456868">needsMaxRW</span>&nbsp;<span class="op" id="2456879">=</span>&nbsp;<span class="ident" id="2456881"><a href="/gostd/os/file_unix.go.html#2452200">runtime</a></span><span class="op" id="2456888">.</span><span class="ident" id="2456889"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="2456894">==</span>&nbsp;<span class="string" id="2456897">&#34;darwin&#34;</span>&nbsp;<span class="op" id="2456906">||</span>&nbsp;<span class="ident" id="2456909"><a href="/gostd/os/file_unix.go.html#2452200">runtime</a></span><span class="op" id="2456916">.</span><span class="ident" id="2456917"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="2456922">==</span>&nbsp;<span class="string" id="2456925">&#34;freebsd&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456936">maxRW</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456947">=</span>&nbsp;<span class="num" id="2456949">1</span>&nbsp;<span class="op" id="2456951">&lt;&lt;</span>&nbsp;<span class="num" id="2456954">30</span><br>
<span class="lineno"></span><span class="op" id="2456957">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="2456960">//&nbsp;read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2457008">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2457069">func</span>&nbsp;<span class="op" id="2457074">(</span><span class="ident" id="2457075">f</span>&nbsp;<span class="op" id="2457077">*</span><span class="ident" id="2457078"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2457082">)</span>&nbsp;<span class="ident" id="2457084">read</span><span class="op" id="2457088">(</span><span class="ident" id="2457089">b</span>&nbsp;<span class="op" id="2457091">[</span><span class="op" id="2457092">]</span><span class="builtintype" id="2457093">byte</span><span class="op" id="2457097">)</span>&nbsp;<span class="op" id="2457099">(</span><span class="ident" id="2457100">n</span>&nbsp;<span class="builtintype" id="2457102">int</span><span class="op" id="2457105">,</span>&nbsp;<span class="ident" id="2457107">err</span>&nbsp;<span class="builtintype" id="2457111">error</span><span class="op" id="2457116">)</span>&nbsp;<span class="op" id="2457118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2457121">if</span>&nbsp;<span class="ident" id="2457124"><a href="/gostd/os/file_unix.go.html#2456868">needsMaxRW</a></span>&nbsp;<span class="op" id="2457135">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2457138">len</span><span class="op" id="2457141">(</span><span class="ident" id="2457142"><a href="/gostd/os/file_unix.go.html#2457089">b</a></span><span class="op" id="2457143">)</span>&nbsp;<span class="op" id="2457145">&gt;</span>&nbsp;<span class="ident" id="2457147"><a href="/gostd/os/file_unix.go.html#2456936">maxRW</a></span>&nbsp;<span class="op" id="2457153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2457157"><a href="/gostd/os/file_unix.go.html#2457089">b</a></span>&nbsp;<span class="op" id="2457159">=</span>&nbsp;<span class="ident" id="2457161"><a href="/gostd/os/file_unix.go.html#2457089">b</a></span><span class="op" id="2457162">[</span><span class="op" id="2457163">:</span><span class="ident" id="2457164"><a href="/gostd/os/file_unix.go.html#2456936">maxRW</a></span><span class="op" id="2457169">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2457172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2457175">return</span>&nbsp;<span class="ident" id="2457182"><a href="/gostd/os/file.go.html#2447674">fixCount</a></span><span class="op" id="2457190">(</span><span class="ident" id="2457191"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2457198">.</span><span class="ident" id="2457199"><a href="/gostd/syscall/syscall_unix.go.html#2546497">Read</a></span><span class="op" id="2457203">(</span><span class="ident" id="2457204"><a href="/gostd/os/file_unix.go.html#2457075">f</a></span><span class="op" id="2457205">.</span><span class="ident" id="2457206"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2457208">,</span>&nbsp;<span class="ident" id="2457210"><a href="/gostd/os/file_unix.go.html#2457089">b</a></span><span class="op" id="2457211">)</span><span class="op" id="2457212">)</span><br>
<span class="lineno"></span><span class="op" id="2457214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2457217">//&nbsp;pread&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno">195</span><span class="comment" id="2457288">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2457350">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2457406">func</span>&nbsp;<span class="op" id="2457411">(</span><span class="ident" id="2457412">f</span>&nbsp;<span class="op" id="2457414">*</span><span class="ident" id="2457415"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2457419">)</span>&nbsp;<span class="ident" id="2457421">pread</span><span class="op" id="2457426">(</span><span class="ident" id="2457427">b</span>&nbsp;<span class="op" id="2457429">[</span><span class="op" id="2457430">]</span><span class="builtintype" id="2457431">byte</span><span class="op" id="2457435">,</span>&nbsp;<span class="ident" id="2457437">off</span>&nbsp;<span class="builtintype" id="2457441">int64</span><span class="op" id="2457446">)</span>&nbsp;<span class="op" id="2457448">(</span><span class="ident" id="2457449">n</span>&nbsp;<span class="builtintype" id="2457451">int</span><span class="op" id="2457454">,</span>&nbsp;<span class="ident" id="2457456">err</span>&nbsp;<span class="builtintype" id="2457460">error</span><span class="op" id="2457465">)</span>&nbsp;<span class="op" id="2457467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2457470">if</span>&nbsp;<span class="ident" id="2457473"><a href="/gostd/os/file_unix.go.html#2456868">needsMaxRW</a></span>&nbsp;<span class="op" id="2457484">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2457487">len</span><span class="op" id="2457490">(</span><span class="ident" id="2457491"><a href="/gostd/os/file_unix.go.html#2457427">b</a></span><span class="op" id="2457492">)</span>&nbsp;<span class="op" id="2457494">&gt;</span>&nbsp;<span class="ident" id="2457496"><a href="/gostd/os/file_unix.go.html#2456936">maxRW</a></span>&nbsp;<span class="op" id="2457502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2457506"><a href="/gostd/os/file_unix.go.html#2457427">b</a></span>&nbsp;<span class="op" id="2457508">=</span>&nbsp;<span class="ident" id="2457510"><a href="/gostd/os/file_unix.go.html#2457427">b</a></span><span class="op" id="2457511">[</span><span class="op" id="2457512">:</span><span class="ident" id="2457513"><a href="/gostd/os/file_unix.go.html#2456936">maxRW</a></span><span class="op" id="2457518">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2457521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2457524">return</span>&nbsp;<span class="ident" id="2457531"><a href="/gostd/os/file.go.html#2447674">fixCount</a></span><span class="op" id="2457539">(</span><span class="ident" id="2457540"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2457547">.</span><span class="ident" id="2457548"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2645257">Pread</a></span><span class="op" id="2457553">(</span><span class="ident" id="2457554"><a href="/gostd/os/file_unix.go.html#2457412">f</a></span><span class="op" id="2457555">.</span><span class="ident" id="2457556"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2457558">,</span>&nbsp;<span class="ident" id="2457560"><a href="/gostd/os/file_unix.go.html#2457427">b</a></span><span class="op" id="2457561">,</span>&nbsp;<span class="ident" id="2457563"><a href="/gostd/os/file_unix.go.html#2457437">off</a></span><span class="op" id="2457566">)</span><span class="op" id="2457567">)</span><br>
<span class="lineno"></span><span class="op" id="2457569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2457572">//&nbsp;write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno">205</span><span class="comment" id="2457614">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2457678">func</span>&nbsp;<span class="op" id="2457683">(</span><span class="ident" id="2457684">f</span>&nbsp;<span class="op" id="2457686">*</span><span class="ident" id="2457687"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2457691">)</span>&nbsp;<span class="ident" id="2457693">write</span><span class="op" id="2457698">(</span><span class="ident" id="2457699">b</span>&nbsp;<span class="op" id="2457701">[</span><span class="op" id="2457702">]</span><span class="builtintype" id="2457703">byte</span><span class="op" id="2457707">)</span>&nbsp;<span class="op" id="2457709">(</span><span class="ident" id="2457710">n</span>&nbsp;<span class="builtintype" id="2457712">int</span><span class="op" id="2457715">,</span>&nbsp;<span class="ident" id="2457717">err</span>&nbsp;<span class="builtintype" id="2457721">error</span><span class="op" id="2457726">)</span>&nbsp;<span class="op" id="2457728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2457731">for</span>&nbsp;<span class="op" id="2457735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2457739">bcap</span>&nbsp;<span class="op" id="2457744">:=</span>&nbsp;<span class="ident" id="2457747"><a href="/gostd/os/file_unix.go.html#2457699">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2457751">if</span>&nbsp;<span class="ident" id="2457754"><a href="/gostd/os/file_unix.go.html#2456868">needsMaxRW</a></span>&nbsp;<span class="op" id="2457765">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2457768">len</span><span class="op" id="2457771">(</span><span class="ident" id="2457772"><a href="/gostd/os/file_unix.go.html#2457739">bcap</a></span><span class="op" id="2457776">)</span>&nbsp;<span class="op" id="2457778">&gt;</span>&nbsp;<span class="ident" id="2457780"><a href="/gostd/os/file_unix.go.html#2456936">maxRW</a></span>&nbsp;<span class="op" id="2457786">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2457791"><a href="/gostd/os/file_unix.go.html#2457739">bcap</a></span>&nbsp;<span class="op" id="2457796">=</span>&nbsp;<span class="ident" id="2457798"><a href="/gostd/os/file_unix.go.html#2457739">bcap</a></span><span class="op" id="2457802">[</span><span class="op" id="2457803">:</span><span class="ident" id="2457804"><a href="/gostd/os/file_unix.go.html#2456936">maxRW</a></span><span class="op" id="2457809">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2457813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2457817">m</span><span class="op" id="2457818">,</span>&nbsp;<span class="ident" id="2457820">err</span>&nbsp;<span class="op" id="2457824">:=</span>&nbsp;<span class="ident" id="2457827"><a href="/gostd/os/file.go.html#2447674">fixCount</a></span><span class="op" id="2457835">(</span><span class="ident" id="2457836"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2457843">.</span><span class="ident" id="2457844"><a href="/gostd/syscall/syscall_unix.go.html#2546723">Write</a></span><span class="op" id="2457849">(</span><span class="ident" id="2457850"><a href="/gostd/os/file_unix.go.html#2457684">f</a></span><span class="op" id="2457851">.</span><span class="ident" id="2457852"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2457854">,</span>&nbsp;<span class="ident" id="2457856"><a href="/gostd/os/file_unix.go.html#2457739">bcap</a></span><span class="op" id="2457860">)</span><span class="op" id="2457861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2457865"><a href="/gostd/os/file_unix.go.html#2457710">n</a></span>&nbsp;<span class="op" id="2457867">+=</span>&nbsp;<span class="ident" id="2457870"><a href="/gostd/os/file_unix.go.html#2457817">m</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2457875">//&nbsp;If&nbsp;the&nbsp;syscall&nbsp;wrote&nbsp;some&nbsp;data&nbsp;but&nbsp;not&nbsp;all&nbsp;(short&nbsp;write)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2457937">//&nbsp;or&nbsp;it&nbsp;returned&nbsp;EINTR,&nbsp;then&nbsp;assume&nbsp;it&nbsp;stopped&nbsp;early&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2457997">//&nbsp;reasons&nbsp;that&nbsp;are&nbsp;uninteresting&nbsp;to&nbsp;the&nbsp;caller,&nbsp;and&nbsp;try&nbsp;again.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2458063">if</span>&nbsp;<span class="num" id="2458066">0</span>&nbsp;<span class="op" id="2458068">&lt;</span>&nbsp;<span class="ident" id="2458070"><a href="/gostd/os/file_unix.go.html#2457817">m</a></span>&nbsp;<span class="op" id="2458072">&amp;&amp;</span>&nbsp;<span class="ident" id="2458075"><a href="/gostd/os/file_unix.go.html#2457817">m</a></span>&nbsp;<span class="op" id="2458077">&lt;</span>&nbsp;<span class="builtinfunc" id="2458079">len</span><span class="op" id="2458082">(</span><span class="ident" id="2458083"><a href="/gostd/os/file_unix.go.html#2457739">bcap</a></span><span class="op" id="2458087">)</span>&nbsp;<span class="op" id="2458089">||</span>&nbsp;<span class="ident" id="2458092"><a href="/gostd/os/file_unix.go.html#2457820">err</a></span>&nbsp;<span class="op" id="2458096">==</span>&nbsp;<span class="ident" id="2458099"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2458106">.</span><span class="ident" id="2458107"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601301">EINTR</a></span>&nbsp;<span class="op" id="2458113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2458118"><a href="/gostd/os/file_unix.go.html#2457699">b</a></span>&nbsp;<span class="op" id="2458120">=</span>&nbsp;<span class="ident" id="2458122"><a href="/gostd/os/file_unix.go.html#2457699">b</a></span><span class="op" id="2458123">[</span><span class="ident" id="2458124"><a href="/gostd/os/file_unix.go.html#2457817">m</a></span><span class="op" id="2458125">:</span><span class="op" id="2458126">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2458131">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2458142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2458147">if</span>&nbsp;<span class="ident" id="2458150"><a href="/gostd/os/file_unix.go.html#2456868">needsMaxRW</a></span>&nbsp;<span class="op" id="2458161">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2458164">len</span><span class="op" id="2458167">(</span><span class="ident" id="2458168"><a href="/gostd/os/file_unix.go.html#2457739">bcap</a></span><span class="op" id="2458172">)</span>&nbsp;<span class="op" id="2458174">!=</span>&nbsp;<span class="builtinfunc" id="2458177">len</span><span class="op" id="2458180">(</span><span class="ident" id="2458181"><a href="/gostd/os/file_unix.go.html#2457699">b</a></span><span class="op" id="2458182">)</span>&nbsp;<span class="op" id="2458184">&amp;&amp;</span>&nbsp;<span class="ident" id="2458187"><a href="/gostd/os/file_unix.go.html#2457820">err</a></span>&nbsp;<span class="op" id="2458191">==</span>&nbsp;<span class="builtintype" id="2458194">nil</span>&nbsp;<span class="op" id="2458198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2458203"><a href="/gostd/os/file_unix.go.html#2457699">b</a></span>&nbsp;<span class="op" id="2458205">=</span>&nbsp;<span class="ident" id="2458207"><a href="/gostd/os/file_unix.go.html#2457699">b</a></span><span class="op" id="2458208">[</span><span class="ident" id="2458209"><a href="/gostd/os/file_unix.go.html#2457817">m</a></span><span class="op" id="2458210">:</span><span class="op" id="2458211">]</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2458216">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2458227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2458232">return</span>&nbsp;<span class="ident" id="2458239"><a href="/gostd/os/file_unix.go.html#2457710">n</a></span><span class="op" id="2458240">,</span>&nbsp;<span class="ident" id="2458242"><a href="/gostd/os/file_unix.go.html#2457820">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2458247">}</span><br>
<span class="lineno">230</span><span class="op" id="2458249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2458252">//&nbsp;pwrite&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2458323">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2458387">func</span>&nbsp;<span class="op" id="2458392">(</span><span class="ident" id="2458393">f</span>&nbsp;<span class="op" id="2458395">*</span><span class="ident" id="2458396"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2458400">)</span>&nbsp;<span class="ident" id="2458402">pwrite</span><span class="op" id="2458408">(</span><span class="ident" id="2458409">b</span>&nbsp;<span class="op" id="2458411">[</span><span class="op" id="2458412">]</span><span class="builtintype" id="2458413">byte</span><span class="op" id="2458417">,</span>&nbsp;<span class="ident" id="2458419">off</span>&nbsp;<span class="builtintype" id="2458423">int64</span><span class="op" id="2458428">)</span>&nbsp;<span class="op" id="2458430">(</span><span class="ident" id="2458431">n</span>&nbsp;<span class="builtintype" id="2458433">int</span><span class="op" id="2458436">,</span>&nbsp;<span class="ident" id="2458438">err</span>&nbsp;<span class="builtintype" id="2458442">error</span><span class="op" id="2458447">)</span>&nbsp;<span class="op" id="2458449">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2458452">if</span>&nbsp;<span class="ident" id="2458455"><a href="/gostd/os/file_unix.go.html#2456868">needsMaxRW</a></span>&nbsp;<span class="op" id="2458466">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2458469">len</span><span class="op" id="2458472">(</span><span class="ident" id="2458473"><a href="/gostd/os/file_unix.go.html#2458409">b</a></span><span class="op" id="2458474">)</span>&nbsp;<span class="op" id="2458476">&gt;</span>&nbsp;<span class="ident" id="2458478"><a href="/gostd/os/file_unix.go.html#2456936">maxRW</a></span>&nbsp;<span class="op" id="2458484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2458488"><a href="/gostd/os/file_unix.go.html#2458409">b</a></span>&nbsp;<span class="op" id="2458490">=</span>&nbsp;<span class="ident" id="2458492"><a href="/gostd/os/file_unix.go.html#2458409">b</a></span><span class="op" id="2458493">[</span><span class="op" id="2458494">:</span><span class="ident" id="2458495"><a href="/gostd/os/file_unix.go.html#2456936">maxRW</a></span><span class="op" id="2458500">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2458503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2458506">return</span>&nbsp;<span class="ident" id="2458513"><a href="/gostd/os/file.go.html#2447674">fixCount</a></span><span class="op" id="2458521">(</span><span class="ident" id="2458522"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2458529">.</span><span class="ident" id="2458530"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2645657">Pwrite</a></span><span class="op" id="2458536">(</span><span class="ident" id="2458537"><a href="/gostd/os/file_unix.go.html#2458393">f</a></span><span class="op" id="2458538">.</span><span class="ident" id="2458539"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2458541">,</span>&nbsp;<span class="ident" id="2458543"><a href="/gostd/os/file_unix.go.html#2458409">b</a></span><span class="op" id="2458544">,</span>&nbsp;<span class="ident" id="2458546"><a href="/gostd/os/file_unix.go.html#2458419">off</a></span><span class="op" id="2458549">)</span><span class="op" id="2458550">)</span><br>
<span class="lineno"></span><span class="op" id="2458552">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="comment" id="2458555">//&nbsp;seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2458637">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2458713">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2458781">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">245</span><span class="keyword" id="2458832">func</span>&nbsp;<span class="op" id="2458837">(</span><span class="ident" id="2458838">f</span>&nbsp;<span class="op" id="2458840">*</span><span class="ident" id="2458841"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="2458845">)</span>&nbsp;<span class="ident" id="2458847">seek</span><span class="op" id="2458851">(</span><span class="ident" id="2458852">offset</span>&nbsp;<span class="builtintype" id="2458859">int64</span><span class="op" id="2458864">,</span>&nbsp;<span class="ident" id="2458866">whence</span>&nbsp;<span class="builtintype" id="2458873">int</span><span class="op" id="2458876">)</span>&nbsp;<span class="op" id="2458878">(</span><span class="ident" id="2458879">ret</span>&nbsp;<span class="builtintype" id="2458883">int64</span><span class="op" id="2458888">,</span>&nbsp;<span class="ident" id="2458890">err</span>&nbsp;<span class="builtintype" id="2458894">error</span><span class="op" id="2458899">)</span>&nbsp;<span class="op" id="2458901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2458904">return</span>&nbsp;<span class="ident" id="2458911"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2458918">.</span><span class="ident" id="2458919"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2646059">Seek</a></span><span class="op" id="2458923">(</span><span class="ident" id="2458924"><a href="/gostd/os/file_unix.go.html#2458838">f</a></span><span class="op" id="2458925">.</span><span class="ident" id="2458926"><a href="/gostd/os/file_unix.go.html#2452540">fd</a></span><span class="op" id="2458928">,</span>&nbsp;<span class="ident" id="2458930"><a href="/gostd/os/file_unix.go.html#2458852">offset</a></span><span class="op" id="2458936">,</span>&nbsp;<span class="ident" id="2458938"><a href="/gostd/os/file_unix.go.html#2458866">whence</a></span><span class="op" id="2458944">)</span><br>
<span class="lineno"></span><span class="op" id="2458946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2458949">//&nbsp;Truncate&nbsp;changes&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno">250</span><span class="comment" id="2458997">//&nbsp;If&nbsp;the&nbsp;file&nbsp;is&nbsp;a&nbsp;symbolic&nbsp;link,&nbsp;it&nbsp;changes&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;link&#39;s&nbsp;target.</span><br>
<span class="lineno"></span><span class="comment" id="2459074">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2459130">func</span>&nbsp;<span class="ident" id="2459135">Truncate</span><span class="op" id="2459143">(</span><span class="ident" id="2459144">name</span>&nbsp;<span class="builtintype" id="2459149">string</span><span class="op" id="2459155">,</span>&nbsp;<span class="ident" id="2459157">size</span>&nbsp;<span class="builtintype" id="2459162">int64</span><span class="op" id="2459167">)</span>&nbsp;<span class="builtintype" id="2459169">error</span>&nbsp;<span class="op" id="2459175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2459178">if</span>&nbsp;<span class="ident" id="2459181">e</span>&nbsp;<span class="op" id="2459183">:=</span>&nbsp;<span class="ident" id="2459186"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2459193">.</span><span class="ident" id="2459194"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2650223">Truncate</a></span><span class="op" id="2459202">(</span><span class="ident" id="2459203"><a href="/gostd/os/file_unix.go.html#2459144">name</a></span><span class="op" id="2459207">,</span>&nbsp;<span class="ident" id="2459209"><a href="/gostd/os/file_unix.go.html#2459157">size</a></span><span class="op" id="2459213">)</span><span class="op" id="2459214">;</span>&nbsp;<span class="ident" id="2459216"><a href="/gostd/os/file_unix.go.html#2459181">e</a></span>&nbsp;<span class="op" id="2459218">!=</span>&nbsp;<span class="builtintype" id="2459221">nil</span>&nbsp;<span class="op" id="2459225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2459229">return</span>&nbsp;<span class="op" id="2459236">&amp;</span><span class="ident" id="2459237"><a href="/gostd/os/error.go.html#2430932">PathError</a></span><span class="op" id="2459246">{</span><span class="string" id="2459247">&#34;truncate&#34;</span><span class="op" id="2459257">,</span>&nbsp;<span class="ident" id="2459259"><a href="/gostd/os/file_unix.go.html#2459144">name</a></span><span class="op" id="2459263">,</span>&nbsp;<span class="ident" id="2459265"><a href="/gostd/os/file_unix.go.html#2459181">e</a></span><span class="op" id="2459266">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2459269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2459272">return</span>&nbsp;<span class="builtintype" id="2459279">nil</span><br>
<span class="lineno"></span><span class="op" id="2459283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2459286">//&nbsp;Remove&nbsp;removes&nbsp;the&nbsp;named&nbsp;file&nbsp;or&nbsp;directory.</span><br>
<span class="lineno">260</span><span class="comment" id="2459333">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2459389">func</span>&nbsp;<span class="ident" id="2459394">Remove</span><span class="op" id="2459400">(</span><span class="ident" id="2459401">name</span>&nbsp;<span class="builtintype" id="2459406">string</span><span class="op" id="2459412">)</span>&nbsp;<span class="builtintype" id="2459414">error</span>&nbsp;<span class="op" id="2459420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459423">//&nbsp;System&nbsp;call&nbsp;interface&nbsp;forces&nbsp;us&nbsp;to&nbsp;know</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459467">//&nbsp;whether&nbsp;name&nbsp;is&nbsp;a&nbsp;file&nbsp;or&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459508">//&nbsp;Try&nbsp;both:&nbsp;it&nbsp;is&nbsp;cheaper&nbsp;on&nbsp;average&nbsp;than</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459552">//&nbsp;doing&nbsp;a&nbsp;Stat&nbsp;plus&nbsp;the&nbsp;right&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2459589">e</span>&nbsp;<span class="op" id="2459591">:=</span>&nbsp;<span class="ident" id="2459594"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2459601">.</span><span class="ident" id="2459602"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2636865">Unlink</a></span><span class="op" id="2459608">(</span><span class="ident" id="2459609"><a href="/gostd/os/file_unix.go.html#2459401">name</a></span><span class="op" id="2459613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2459616">if</span>&nbsp;<span class="ident" id="2459619"><a href="/gostd/os/file_unix.go.html#2459589">e</a></span>&nbsp;<span class="op" id="2459621">==</span>&nbsp;<span class="builtintype" id="2459624">nil</span>&nbsp;<span class="op" id="2459628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2459632">return</span>&nbsp;<span class="builtintype" id="2459639">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2459644">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2459647">e1</span>&nbsp;<span class="op" id="2459650">:=</span>&nbsp;<span class="ident" id="2459653"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2459660">.</span><span class="ident" id="2459661"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2632314">Rmdir</a></span><span class="op" id="2459666">(</span><span class="ident" id="2459667"><a href="/gostd/os/file_unix.go.html#2459401">name</a></span><span class="op" id="2459671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2459674">if</span>&nbsp;<span class="ident" id="2459677"><a href="/gostd/os/file_unix.go.html#2459647">e1</a></span>&nbsp;<span class="op" id="2459680">==</span>&nbsp;<span class="builtintype" id="2459683">nil</span>&nbsp;<span class="op" id="2459687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2459691">return</span>&nbsp;<span class="builtintype" id="2459698">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2459703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459707">//&nbsp;Both&nbsp;failed:&nbsp;figure&nbsp;out&nbsp;which&nbsp;error&nbsp;to&nbsp;return.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459758">//&nbsp;OS&nbsp;X&nbsp;and&nbsp;Linux&nbsp;differ&nbsp;on&nbsp;whether&nbsp;unlink(dir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459807">//&nbsp;returns&nbsp;EISDIR,&nbsp;so&nbsp;can&#39;t&nbsp;use&nbsp;that.&nbsp;&nbsp;However,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459856">//&nbsp;both&nbsp;agree&nbsp;that&nbsp;rmdir(file)&nbsp;returns&nbsp;ENOTDIR,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459905">//&nbsp;so&nbsp;we&nbsp;can&nbsp;use&nbsp;that&nbsp;to&nbsp;decide&nbsp;which&nbsp;error&nbsp;is&nbsp;real.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2459959">//&nbsp;Rmdir&nbsp;might&nbsp;also&nbsp;return&nbsp;ENOTDIR&nbsp;if&nbsp;given&nbsp;a&nbsp;bad</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2460010">//&nbsp;file&nbsp;path,&nbsp;like&nbsp;/etc/passwd/foo,&nbsp;but&nbsp;in&nbsp;that&nbsp;case,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2460065">//&nbsp;both&nbsp;errors&nbsp;will&nbsp;be&nbsp;ENOTDIR,&nbsp;so&nbsp;it&#39;s&nbsp;okay&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2460114">//&nbsp;use&nbsp;the&nbsp;error&nbsp;from&nbsp;unlink.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460145">if</span>&nbsp;<span class="ident" id="2460148"><a href="/gostd/os/file_unix.go.html#2459647">e1</a></span>&nbsp;<span class="op" id="2460151">!=</span>&nbsp;<span class="ident" id="2460154"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2460161">.</span><span class="ident" id="2460162"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2602938">ENOTDIR</a></span>&nbsp;<span class="op" id="2460170">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2460174"><a href="/gostd/os/file_unix.go.html#2459589">e</a></span>&nbsp;<span class="op" id="2460176">=</span>&nbsp;<span class="ident" id="2460178"><a href="/gostd/os/file_unix.go.html#2459647">e1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2460182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460185">return</span>&nbsp;<span class="op" id="2460192">&amp;</span><span class="ident" id="2460193"><a href="/gostd/os/error.go.html#2430932">PathError</a></span><span class="op" id="2460202">{</span><span class="string" id="2460203">&#34;remove&#34;</span><span class="op" id="2460211">,</span>&nbsp;<span class="ident" id="2460213"><a href="/gostd/os/file_unix.go.html#2459401">name</a></span><span class="op" id="2460217">,</span>&nbsp;<span class="ident" id="2460219"><a href="/gostd/os/file_unix.go.html#2459589">e</a></span><span class="op" id="2460220">}</span><br>
<span class="lineno"></span><span class="op" id="2460222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="comment" id="2460225">//&nbsp;basename&nbsp;removes&nbsp;trailing&nbsp;slashes&nbsp;and&nbsp;the&nbsp;leading&nbsp;directory&nbsp;name&nbsp;from&nbsp;path&nbsp;name</span><br>
<span class="lineno"></span><span class="keyword" id="2460308">func</span>&nbsp;<span class="ident" id="2460313">basename</span><span class="op" id="2460321">(</span><span class="ident" id="2460322">name</span>&nbsp;<span class="builtintype" id="2460327">string</span><span class="op" id="2460333">)</span>&nbsp;<span class="builtintype" id="2460335">string</span>&nbsp;<span class="op" id="2460342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2460345">i</span>&nbsp;<span class="op" id="2460347">:=</span>&nbsp;<span class="builtinfunc" id="2460350">len</span><span class="op" id="2460353">(</span><span class="ident" id="2460354"><a href="/gostd/os/file_unix.go.html#2460322">name</a></span><span class="op" id="2460358">)</span>&nbsp;<span class="op" id="2460360">-</span>&nbsp;<span class="num" id="2460362">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2460365">//&nbsp;Remove&nbsp;trailing&nbsp;slashes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460393">for</span>&nbsp;<span class="op" id="2460397">;</span>&nbsp;<span class="ident" id="2460399"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span>&nbsp;<span class="op" id="2460401">&gt;</span>&nbsp;<span class="num" id="2460403">0</span>&nbsp;<span class="op" id="2460405">&amp;&amp;</span>&nbsp;<span class="ident" id="2460408"><a href="/gostd/os/file_unix.go.html#2460322">name</a></span><span class="op" id="2460412">[</span><span class="ident" id="2460413"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span><span class="op" id="2460414">]</span>&nbsp;<span class="op" id="2460416">==</span>&nbsp;<span class="string" id="2460419">&#39;/&#39;</span><span class="op" id="2460422">;</span>&nbsp;<span class="ident" id="2460424"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span><span class="op" id="2460425">--</span>&nbsp;<span class="op" id="2460428">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2460432"><a href="/gostd/os/file_unix.go.html#2460322">name</a></span>&nbsp;<span class="op" id="2460437">=</span>&nbsp;<span class="ident" id="2460439"><a href="/gostd/os/file_unix.go.html#2460322">name</a></span><span class="op" id="2460443">[</span><span class="op" id="2460444">:</span><span class="ident" id="2460445"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span><span class="op" id="2460446">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2460449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2460452">//&nbsp;Remove&nbsp;leading&nbsp;directory&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460486">for</span>&nbsp;<span class="ident" id="2460490"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span><span class="op" id="2460491">--</span><span class="op" id="2460493">;</span>&nbsp;<span class="ident" id="2460495"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span>&nbsp;<span class="op" id="2460497">&gt;=</span>&nbsp;<span class="num" id="2460500">0</span><span class="op" id="2460501">;</span>&nbsp;<span class="ident" id="2460503"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span><span class="op" id="2460504">--</span>&nbsp;<span class="op" id="2460507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460511">if</span>&nbsp;<span class="ident" id="2460514"><a href="/gostd/os/file_unix.go.html#2460322">name</a></span><span class="op" id="2460518">[</span><span class="ident" id="2460519"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span><span class="op" id="2460520">]</span>&nbsp;<span class="op" id="2460522">==</span>&nbsp;<span class="string" id="2460525">&#39;/&#39;</span>&nbsp;<span class="op" id="2460529">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2460534"><a href="/gostd/os/file_unix.go.html#2460322">name</a></span>&nbsp;<span class="op" id="2460539">=</span>&nbsp;<span class="ident" id="2460541"><a href="/gostd/os/file_unix.go.html#2460322">name</a></span><span class="op" id="2460545">[</span><span class="ident" id="2460546"><a href="/gostd/os/file_unix.go.html#2460345">i</a></span><span class="op" id="2460547">+</span><span class="num" id="2460548">1</span><span class="op" id="2460549">:</span><span class="op" id="2460550">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460555">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2460563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2460566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460570">return</span>&nbsp;<span class="ident" id="2460577"><a href="/gostd/os/file_unix.go.html#2460322">name</a></span><br>
<span class="lineno"></span><span class="op" id="2460582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2460585">//&nbsp;TempDir&nbsp;returns&nbsp;the&nbsp;default&nbsp;directory&nbsp;to&nbsp;use&nbsp;for&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="2460654">func</span>&nbsp;<span class="ident" id="2460659">TempDir</span><span class="op" id="2460666">(</span><span class="op" id="2460667">)</span>&nbsp;<span class="builtintype" id="2460669">string</span>&nbsp;<span class="op" id="2460676">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2460679">dir</span>&nbsp;<span class="op" id="2460683">:=</span>&nbsp;<span class="ident" id="2460686"><a href="/gostd/os/env.go.html#2429715">Getenv</a></span><span class="op" id="2460692">(</span><span class="string" id="2460693">&#34;TMPDIR&#34;</span><span class="op" id="2460701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460704">if</span>&nbsp;<span class="ident" id="2460707"><a href="/gostd/os/file_unix.go.html#2460679">dir</a></span>&nbsp;<span class="op" id="2460711">==</span>&nbsp;<span class="string" id="2460714">&#34;&#34;</span>&nbsp;<span class="op" id="2460717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460721">if</span>&nbsp;<span class="ident" id="2460724"><a href="/gostd/os/file_unix.go.html#2452200">runtime</a></span><span class="op" id="2460731">.</span><span class="ident" id="2460732"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="2460737">==</span>&nbsp;<span class="string" id="2460740">&#34;android&#34;</span>&nbsp;<span class="op" id="2460750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2460755"><a href="/gostd/os/file_unix.go.html#2460679">dir</a></span>&nbsp;<span class="op" id="2460759">=</span>&nbsp;<span class="string" id="2460761">&#34;/data/local/tmp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2460781">}</span>&nbsp;<span class="keyword" id="2460783">else</span>&nbsp;<span class="op" id="2460788">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2460793"><a href="/gostd/os/file_unix.go.html#2460679">dir</a></span>&nbsp;<span class="op" id="2460797">=</span>&nbsp;<span class="string" id="2460799">&#34;/tmp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2460808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2460811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2460814">return</span>&nbsp;<span class="ident" id="2460821"><a href="/gostd/os/file_unix.go.html#2460679">dir</a></span><br>
<span class="lineno"></span><span class="op" id="2460825">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="2460828">//&nbsp;Link&nbsp;creates&nbsp;newname&nbsp;as&nbsp;a&nbsp;hard&nbsp;link&nbsp;to&nbsp;the&nbsp;oldname&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2460888">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*LinkError.</span><br>
<span class="lineno"></span><span class="keyword" id="2460944">func</span>&nbsp;<span class="ident" id="2460949">Link</span><span class="op" id="2460953">(</span><span class="ident" id="2460954">oldname</span><span class="op" id="2460961">,</span>&nbsp;<span class="ident" id="2460963">newname</span>&nbsp;<span class="builtintype" id="2460971">string</span><span class="op" id="2460977">)</span>&nbsp;<span class="builtintype" id="2460979">error</span>&nbsp;<span class="op" id="2460985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2460988">e</span>&nbsp;<span class="op" id="2460990">:=</span>&nbsp;<span class="ident" id="2460993"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2461000">.</span><span class="ident" id="2461001"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2626234">Link</a></span><span class="op" id="2461005">(</span><span class="ident" id="2461006"><a href="/gostd/os/file_unix.go.html#2460954">oldname</a></span><span class="op" id="2461013">,</span>&nbsp;<span class="ident" id="2461015"><a href="/gostd/os/file_unix.go.html#2460963">newname</a></span><span class="op" id="2461022">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2461025">if</span>&nbsp;<span class="ident" id="2461028"><a href="/gostd/os/file_unix.go.html#2460988">e</a></span>&nbsp;<span class="op" id="2461030">!=</span>&nbsp;<span class="builtintype" id="2461033">nil</span>&nbsp;<span class="op" id="2461037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2461041">return</span>&nbsp;<span class="op" id="2461048">&amp;</span><span class="ident" id="2461049"><a href="/gostd/os/file.go.html#2442912">LinkError</a></span><span class="op" id="2461058">{</span><span class="string" id="2461059">&#34;link&#34;</span><span class="op" id="2461065">,</span>&nbsp;<span class="ident" id="2461067"><a href="/gostd/os/file_unix.go.html#2460954">oldname</a></span><span class="op" id="2461074">,</span>&nbsp;<span class="ident" id="2461076"><a href="/gostd/os/file_unix.go.html#2460963">newname</a></span><span class="op" id="2461083">,</span>&nbsp;<span class="ident" id="2461085"><a href="/gostd/os/file_unix.go.html#2460988">e</a></span><span class="op" id="2461086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2461089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2461092">return</span>&nbsp;<span class="builtintype" id="2461099">nil</span><br>
<span class="lineno"></span><span class="op" id="2461103">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="comment" id="2461106">//&nbsp;Symlink&nbsp;creates&nbsp;newname&nbsp;as&nbsp;a&nbsp;symbolic&nbsp;link&nbsp;to&nbsp;oldname.</span><br>
<span class="lineno"></span><span class="comment" id="2461164">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*LinkError.</span><br>
<span class="lineno"></span><span class="keyword" id="2461220">func</span>&nbsp;<span class="ident" id="2461225">Symlink</span><span class="op" id="2461232">(</span><span class="ident" id="2461233">oldname</span><span class="op" id="2461240">,</span>&nbsp;<span class="ident" id="2461242">newname</span>&nbsp;<span class="builtintype" id="2461250">string</span><span class="op" id="2461256">)</span>&nbsp;<span class="builtintype" id="2461258">error</span>&nbsp;<span class="op" id="2461264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2461267">e</span>&nbsp;<span class="op" id="2461269">:=</span>&nbsp;<span class="ident" id="2461272"><a href="/gostd/os/file_unix.go.html#2452226">syscall</a></span><span class="op" id="2461279">.</span><span class="ident" id="2461280"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2634865">Symlink</a></span><span class="op" id="2461287">(</span><span class="ident" id="2461288"><a href="/gostd/os/file_unix.go.html#2461233">oldname</a></span><span class="op" id="2461295">,</span>&nbsp;<span class="ident" id="2461297"><a href="/gostd/os/file_unix.go.html#2461242">newname</a></span><span class="op" id="2461304">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2461307">if</span>&nbsp;<span class="ident" id="2461310"><a href="/gostd/os/file_unix.go.html#2461267">e</a></span>&nbsp;<span class="op" id="2461312">!=</span>&nbsp;<span class="builtintype" id="2461315">nil</span>&nbsp;<span class="op" id="2461319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2461323">return</span>&nbsp;<span class="op" id="2461330">&amp;</span><span class="ident" id="2461331"><a href="/gostd/os/file.go.html#2442912">LinkError</a></span><span class="op" id="2461340">{</span><span class="string" id="2461341">&#34;symlink&#34;</span><span class="op" id="2461350">,</span>&nbsp;<span class="ident" id="2461352"><a href="/gostd/os/file_unix.go.html#2461233">oldname</a></span><span class="op" id="2461359">,</span>&nbsp;<span class="ident" id="2461361"><a href="/gostd/os/file_unix.go.html#2461242">newname</a></span><span class="op" id="2461368">,</span>&nbsp;<span class="ident" id="2461370"><a href="/gostd/os/file_unix.go.html#2461267">e</a></span><span class="op" id="2461371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2461374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2461377">return</span>&nbsp;<span class="builtintype" id="2461384">nil</span><br>
<span class="lineno"></span><span class="op" id="2461388">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
