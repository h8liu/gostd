<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6611267">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6611322">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6611376">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6611427">package</span>&nbsp;<span class="ident" id="6611435">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6611441">import</span>&nbsp;<span class="op" id="6611448">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6611451">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6611460">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6611466">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6611477">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6611487">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6611490">func</span>&nbsp;<span class="ident" id="6611495">TestBodyReadBadTrailer</span><span class="op" id="6611517">(</span><span class="ident" id="6611518">t</span>&nbsp;<span class="op" id="6611520">*</span><span class="ident" id="6611521">testing</span><span class="op" id="6611528">.</span><span class="ident" id="6611529">T</span><span class="op" id="6611530">)</span>&nbsp;<span class="op" id="6611532">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611535">b</span>&nbsp;<span class="op" id="6611537">:=</span>&nbsp;<span class="op" id="6611540">&amp;</span><span class="ident" id="6611541">body</span><span class="op" id="6611545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611549">src</span><span class="op" id="6611552">:</span>&nbsp;<span class="ident" id="6611554">strings</span><span class="op" id="6611561">.</span><span class="ident" id="6611562">NewReader</span><span class="op" id="6611571">(</span><span class="string" id="6611572">&#34;foobar&#34;</span><span class="op" id="6611580">)</span><span class="op" id="6611581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611585">hdr</span><span class="op" id="6611588">:</span>&nbsp;<span class="builtintype" id="6611590">true</span><span class="op" id="6611594">,</span>&nbsp;<span class="comment" id="6611596">//&nbsp;force&nbsp;reading&nbsp;the&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611627">r</span><span class="op" id="6611628">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6611632">bufio</span><span class="op" id="6611637">.</span><span class="ident" id="6611638">NewReader</span><span class="op" id="6611647">(</span><span class="ident" id="6611648">strings</span><span class="op" id="6611655">.</span><span class="ident" id="6611656">NewReader</span><span class="op" id="6611665">(</span><span class="string" id="6611666">&#34;&#34;</span><span class="op" id="6611668">)</span><span class="op" id="6611669">)</span><span class="op" id="6611670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611673">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611676">buf</span>&nbsp;<span class="op" id="6611680">:=</span>&nbsp;<span class="builtinfunc" id="6611683">make</span><span class="op" id="6611687">(</span><span class="op" id="6611688">[</span><span class="op" id="6611689">]</span><span class="builtintype" id="6611690">byte</span><span class="op" id="6611694">,</span>&nbsp;<span class="num" id="6611696">7</span><span class="op" id="6611697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611700">n</span><span class="op" id="6611701">,</span>&nbsp;<span class="ident" id="6611703">err</span>&nbsp;<span class="op" id="6611707">:=</span>&nbsp;<span class="ident" id="6611710">b</span><span class="op" id="6611711">.</span><span class="ident" id="6611712">Read</span><span class="op" id="6611716">(</span><span class="ident" id="6611717">buf</span><span class="op" id="6611720">[</span><span class="op" id="6611721">:</span><span class="num" id="6611722">3</span><span class="op" id="6611723">]</span><span class="op" id="6611724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611727">got</span>&nbsp;<span class="op" id="6611731">:=</span>&nbsp;<span class="builtintype" id="6611734">string</span><span class="op" id="6611740">(</span><span class="ident" id="6611741">buf</span><span class="op" id="6611744">[</span><span class="op" id="6611745">:</span><span class="ident" id="6611746">n</span><span class="op" id="6611747">]</span><span class="op" id="6611748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611751">if</span>&nbsp;<span class="ident" id="6611754">got</span>&nbsp;<span class="op" id="6611758">!=</span>&nbsp;<span class="string" id="6611761">&#34;foo&#34;</span>&nbsp;<span class="op" id="6611767">||</span>&nbsp;<span class="ident" id="6611770">err</span>&nbsp;<span class="op" id="6611774">!=</span>&nbsp;<span class="ident" id="6611777">nil</span>&nbsp;<span class="op" id="6611781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611785">t</span><span class="op" id="6611786">.</span><span class="ident" id="6611787">Fatalf</span><span class="op" id="6611793">(</span><span class="string" id="6611794">`first&nbsp;Read&nbsp;=&nbsp;%d&nbsp;(%q),&nbsp;%v;&nbsp;want&nbsp;3&nbsp;(&#34;foo&#34;)`</span><span class="op" id="6611836">,</span>&nbsp;<span class="ident" id="6611838">n</span><span class="op" id="6611839">,</span>&nbsp;<span class="ident" id="6611841">got</span><span class="op" id="6611844">,</span>&nbsp;<span class="ident" id="6611846">err</span><span class="op" id="6611849">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611856">n</span><span class="op" id="6611857">,</span>&nbsp;<span class="ident" id="6611859">err</span>&nbsp;<span class="op" id="6611863">=</span>&nbsp;<span class="ident" id="6611865">b</span><span class="op" id="6611866">.</span><span class="ident" id="6611867">Read</span><span class="op" id="6611871">(</span><span class="ident" id="6611872">buf</span><span class="op" id="6611875">[</span><span class="op" id="6611876">:</span><span class="op" id="6611877">]</span><span class="op" id="6611878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611881">got</span>&nbsp;<span class="op" id="6611885">=</span>&nbsp;<span class="builtintype" id="6611887">string</span><span class="op" id="6611893">(</span><span class="ident" id="6611894">buf</span><span class="op" id="6611897">[</span><span class="op" id="6611898">:</span><span class="ident" id="6611899">n</span><span class="op" id="6611900">]</span><span class="op" id="6611901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611904">if</span>&nbsp;<span class="ident" id="6611907">got</span>&nbsp;<span class="op" id="6611911">!=</span>&nbsp;<span class="string" id="6611914">&#34;bar&#34;</span>&nbsp;<span class="op" id="6611920">||</span>&nbsp;<span class="ident" id="6611923">err</span>&nbsp;<span class="op" id="6611927">!=</span>&nbsp;<span class="ident" id="6611930">nil</span>&nbsp;<span class="op" id="6611934">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611938">t</span><span class="op" id="6611939">.</span><span class="ident" id="6611940">Fatalf</span><span class="op" id="6611946">(</span><span class="string" id="6611947">`second&nbsp;Read&nbsp;=&nbsp;%d&nbsp;(%q),&nbsp;%v;&nbsp;want&nbsp;3&nbsp;(&#34;bar&#34;)`</span><span class="op" id="6611990">,</span>&nbsp;<span class="ident" id="6611992">n</span><span class="op" id="6611993">,</span>&nbsp;<span class="ident" id="6611995">got</span><span class="op" id="6611998">,</span>&nbsp;<span class="ident" id="6612000">err</span><span class="op" id="6612003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612010">n</span><span class="op" id="6612011">,</span>&nbsp;<span class="ident" id="6612013">err</span>&nbsp;<span class="op" id="6612017">=</span>&nbsp;<span class="ident" id="6612019">b</span><span class="op" id="6612020">.</span><span class="ident" id="6612021">Read</span><span class="op" id="6612025">(</span><span class="ident" id="6612026">buf</span><span class="op" id="6612029">[</span><span class="op" id="6612030">:</span><span class="op" id="6612031">]</span><span class="op" id="6612032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612035">got</span>&nbsp;<span class="op" id="6612039">=</span>&nbsp;<span class="builtintype" id="6612041">string</span><span class="op" id="6612047">(</span><span class="ident" id="6612048">buf</span><span class="op" id="6612051">[</span><span class="op" id="6612052">:</span><span class="ident" id="6612053">n</span><span class="op" id="6612054">]</span><span class="op" id="6612055">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612058">if</span>&nbsp;<span class="ident" id="6612061">err</span>&nbsp;<span class="op" id="6612065">==</span>&nbsp;<span class="ident" id="6612068">nil</span>&nbsp;<span class="op" id="6612072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612076">t</span><span class="op" id="6612077">.</span><span class="ident" id="6612078">Errorf</span><span class="op" id="6612084">(</span><span class="string" id="6612085">&#34;final&nbsp;Read&nbsp;was&nbsp;successful&nbsp;(%q),&nbsp;expected&nbsp;error&nbsp;from&nbsp;trailer&nbsp;read&#34;</span><span class="op" id="6612151">,</span>&nbsp;<span class="ident" id="6612153">got</span><span class="op" id="6612156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612159">}</span><br>
<span class="lineno"></span><span class="op" id="6612161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6612164">func</span>&nbsp;<span class="ident" id="6612169">TestFinalChunkedBodyReadEOF</span><span class="op" id="6612196">(</span><span class="ident" id="6612197">t</span>&nbsp;<span class="op" id="6612199">*</span><span class="ident" id="6612200">testing</span><span class="op" id="6612207">.</span><span class="ident" id="6612208">T</span><span class="op" id="6612209">)</span>&nbsp;<span class="op" id="6612211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612214">res</span><span class="op" id="6612217">,</span>&nbsp;<span class="ident" id="6612219">err</span>&nbsp;<span class="op" id="6612223">:=</span>&nbsp;<span class="ident" id="6612226">ReadResponse</span><span class="op" id="6612238">(</span><span class="ident" id="6612239">bufio</span><span class="op" id="6612244">.</span><span class="ident" id="6612245">NewReader</span><span class="op" id="6612254">(</span><span class="ident" id="6612255">strings</span><span class="op" id="6612262">.</span><span class="ident" id="6612263">NewReader</span><span class="op" id="6612272">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612276">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span><span class="op" id="6612297">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612302">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span><span class="op" id="6612334">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612339">&#34;\r\n&#34;</span><span class="op" id="6612345">+</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612350">&#34;0a\r\n&#34;</span><span class="op" id="6612358">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612363">&#34;Body&nbsp;here\n\r\n&#34;</span><span class="op" id="6612380">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612385">&#34;09\r\n&#34;</span><span class="op" id="6612393">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612398">&#34;continued\r\n&#34;</span><span class="op" id="6612413">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612418">&#34;0\r\n&#34;</span><span class="op" id="6612425">+</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6612430">&#34;\r\n&#34;</span><span class="op" id="6612436">)</span><span class="op" id="6612437">)</span><span class="op" id="6612438">,</span>&nbsp;<span class="ident" id="6612440">nil</span><span class="op" id="6612443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612446">if</span>&nbsp;<span class="ident" id="6612449">err</span>&nbsp;<span class="op" id="6612453">!=</span>&nbsp;<span class="ident" id="6612456">nil</span>&nbsp;<span class="op" id="6612460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612464">t</span><span class="op" id="6612465">.</span><span class="ident" id="6612466">Fatal</span><span class="op" id="6612471">(</span><span class="ident" id="6612472">err</span><span class="op" id="6612475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612481">want</span>&nbsp;<span class="op" id="6612486">:=</span>&nbsp;<span class="string" id="6612489">&#34;Body&nbsp;here\ncontinued&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612513">buf</span>&nbsp;<span class="op" id="6612517">:=</span>&nbsp;<span class="builtinfunc" id="6612520">make</span><span class="op" id="6612524">(</span><span class="op" id="6612525">[</span><span class="op" id="6612526">]</span><span class="builtintype" id="6612527">byte</span><span class="op" id="6612531">,</span>&nbsp;<span class="builtinfunc" id="6612533">len</span><span class="op" id="6612536">(</span><span class="ident" id="6612537">want</span><span class="op" id="6612541">)</span><span class="op" id="6612542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612545">n</span><span class="op" id="6612546">,</span>&nbsp;<span class="ident" id="6612548">err</span>&nbsp;<span class="op" id="6612552">:=</span>&nbsp;<span class="ident" id="6612555">res</span><span class="op" id="6612558">.</span><span class="ident" id="6612559">Body</span><span class="op" id="6612563">.</span><span class="ident" id="6612564">Read</span><span class="op" id="6612568">(</span><span class="ident" id="6612569">buf</span><span class="op" id="6612572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612575">if</span>&nbsp;<span class="ident" id="6612578">n</span>&nbsp;<span class="op" id="6612580">!=</span>&nbsp;<span class="builtinfunc" id="6612583">len</span><span class="op" id="6612586">(</span><span class="ident" id="6612587">want</span><span class="op" id="6612591">)</span>&nbsp;<span class="op" id="6612593">||</span>&nbsp;<span class="ident" id="6612596">err</span>&nbsp;<span class="op" id="6612600">!=</span>&nbsp;<span class="ident" id="6612603">io</span><span class="op" id="6612605">.</span><span class="ident" id="6612606">EOF</span>&nbsp;<span class="op" id="6612610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612614">t</span><span class="op" id="6612615">.</span><span class="ident" id="6612616">Logf</span><span class="op" id="6612620">(</span><span class="string" id="6612621">&#34;body&nbsp;=&nbsp;%#v&#34;</span><span class="op" id="6612633">,</span>&nbsp;<span class="ident" id="6612635">res</span><span class="op" id="6612638">.</span><span class="ident" id="6612639">Body</span><span class="op" id="6612643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612647">t</span><span class="op" id="6612648">.</span><span class="ident" id="6612649">Errorf</span><span class="op" id="6612655">(</span><span class="string" id="6612656">&#34;Read&nbsp;=&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%d,&nbsp;EOF&#34;</span><span class="op" id="6612685">,</span>&nbsp;<span class="ident" id="6612687">n</span><span class="op" id="6612688">,</span>&nbsp;<span class="ident" id="6612690">err</span><span class="op" id="6612693">,</span>&nbsp;<span class="builtinfunc" id="6612695">len</span><span class="op" id="6612698">(</span><span class="ident" id="6612699">want</span><span class="op" id="6612703">)</span><span class="op" id="6612704">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612710">if</span>&nbsp;<span class="builtintype" id="6612713">string</span><span class="op" id="6612719">(</span><span class="ident" id="6612720">buf</span><span class="op" id="6612723">)</span>&nbsp;<span class="op" id="6612725">!=</span>&nbsp;<span class="ident" id="6612728">want</span>&nbsp;<span class="op" id="6612733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612737">t</span><span class="op" id="6612738">.</span><span class="ident" id="6612739">Errorf</span><span class="op" id="6612745">(</span><span class="string" id="6612746">&#34;buf&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6612765">,</span>&nbsp;<span class="ident" id="6612767">buf</span><span class="op" id="6612770">,</span>&nbsp;<span class="ident" id="6612772">want</span><span class="op" id="6612776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612779">}</span><br>
<span class="lineno"></span><span class="op" id="6612781">}</span>
</div>
</body>
</html>
