<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime/debug</h2>
<ul>
<li><a href="/gostd/runtime/debug/garbage.go.html">garbage.go</a></li>
<li><a href="/gostd/runtime/debug/garbage_test.go.html">garbage_test.go</a></li>
<li><a href="/gostd/runtime/debug/heapdump_test.go.html">heapdump_test.go</a></li>
<li><a href="/gostd/runtime/debug/stack.go.html" class="current">stack.go</a></li>
<li><a href="/gostd/runtime/debug/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/debug/stubs.go.html">stubs.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5936116">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5936171">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5936225">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5936276">//&nbsp;Package&nbsp;debug&nbsp;contains&nbsp;facilities&nbsp;for&nbsp;programs&nbsp;to&nbsp;debug&nbsp;themselves&nbsp;while</span><br>
<span class="lineno"></span><span class="comment" id="5936352">//&nbsp;they&nbsp;are&nbsp;running.</span><br>
<span class="lineno"></span><span class="keyword" id="5936373">package</span>&nbsp;<span class="ident" id="5936381">debug</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5936388">import</span>&nbsp;<span class="op" id="5936395">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5936398">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5936407">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5936414">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5936427">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5936433">&#34;runtime&#34;</span><br>
<span class="lineno">15</span><span class="op" id="5936443">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5936446">var</span>&nbsp;<span class="op" id="5936450">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5936453">dunno</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936463">=</span>&nbsp;<span class="op" id="5936465">[</span><span class="op" id="5936466">]</span><span class="builtintype" id="5936467">byte</span><span class="op" id="5936471">(</span><span class="string" id="5936472">&#34;???&#34;</span><span class="op" id="5936477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5936480">centerDot</span>&nbsp;<span class="op" id="5936490">=</span>&nbsp;<span class="op" id="5936492">[</span><span class="op" id="5936493">]</span><span class="builtintype" id="5936494">byte</span><span class="op" id="5936498">(</span><span class="string" id="5936499">&#34;·&#34;</span><span class="op" id="5936503">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5936506">dot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936516">=</span>&nbsp;<span class="op" id="5936518">[</span><span class="op" id="5936519">]</span><span class="builtintype" id="5936520">byte</span><span class="op" id="5936524">(</span><span class="string" id="5936525">&#34;.&#34;</span><span class="op" id="5936528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5936531">slash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936541">=</span>&nbsp;<span class="op" id="5936543">[</span><span class="op" id="5936544">]</span><span class="builtintype" id="5936545">byte</span><span class="op" id="5936549">(</span><span class="string" id="5936550">&#34;/&#34;</span><span class="op" id="5936553">)</span><br>
<span class="lineno"></span><span class="op" id="5936555">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5936558">//&nbsp;PrintStack&nbsp;prints&nbsp;to&nbsp;standard&nbsp;error&nbsp;the&nbsp;stack&nbsp;trace&nbsp;returned&nbsp;by&nbsp;Stack.</span><br>
<span class="lineno">25</span><span class="keyword" id="5936632">func</span>&nbsp;<span class="ident" id="5936637">PrintStack</span><span class="op" id="5936647">(</span><span class="op" id="5936648">)</span>&nbsp;<span class="op" id="5936650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5936653">os</span><span class="op" id="5936655">.</span><span class="ident" id="5936656">Stderr</span><span class="op" id="5936662">.</span><span class="ident" id="5936663">Write</span><span class="op" id="5936668">(</span><span class="ident" id="5936669">stack</span><span class="op" id="5936674">(</span><span class="op" id="5936675">)</span><span class="op" id="5936676">)</span><br>
<span class="lineno"></span><span class="op" id="5936678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5936681">//&nbsp;Stack&nbsp;returns&nbsp;a&nbsp;formatted&nbsp;stack&nbsp;trace&nbsp;of&nbsp;the&nbsp;goroutine&nbsp;that&nbsp;calls&nbsp;it.</span><br>
<span class="lineno">30</span><span class="comment" id="5936754">//&nbsp;For&nbsp;each&nbsp;routine,&nbsp;it&nbsp;includes&nbsp;the&nbsp;source&nbsp;line&nbsp;information&nbsp;and&nbsp;PC&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="5936829">//&nbsp;then&nbsp;attempts&nbsp;to&nbsp;discover,&nbsp;for&nbsp;Go&nbsp;functions,&nbsp;the&nbsp;calling&nbsp;function&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5936901">//&nbsp;method&nbsp;and&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;line&nbsp;containing&nbsp;the&nbsp;invocation.</span><br>
<span class="lineno"></span><span class="comment" id="5936963">//</span><br>
<span class="lineno"></span><span class="comment" id="5936966">//&nbsp;This&nbsp;function&nbsp;is&nbsp;deprecated.&nbsp;Use&nbsp;package&nbsp;runtime&#39;s&nbsp;Stack&nbsp;instead.</span><br>
<span class="lineno">35</span><span class="keyword" id="5937035">func</span>&nbsp;<span class="ident" id="5937040">Stack</span><span class="op" id="5937045">(</span><span class="op" id="5937046">)</span>&nbsp;<span class="op" id="5937048">[</span><span class="op" id="5937049">]</span><span class="builtintype" id="5937050">byte</span>&nbsp;<span class="op" id="5937055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937058">return</span>&nbsp;<span class="ident" id="5937065">stack</span><span class="op" id="5937070">(</span><span class="op" id="5937071">)</span><br>
<span class="lineno"></span><span class="op" id="5937073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5937076">//&nbsp;stack&nbsp;implements&nbsp;Stack,&nbsp;skipping&nbsp;2&nbsp;frames</span><br>
<span class="lineno">40</span><span class="keyword" id="5937121">func</span>&nbsp;<span class="ident" id="5937126">stack</span><span class="op" id="5937131">(</span><span class="op" id="5937132">)</span>&nbsp;<span class="op" id="5937134">[</span><span class="op" id="5937135">]</span><span class="builtintype" id="5937136">byte</span>&nbsp;<span class="op" id="5937141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937144">buf</span>&nbsp;<span class="op" id="5937148">:=</span>&nbsp;<span class="builtinfunc" id="5937151">new</span><span class="op" id="5937154">(</span><span class="ident" id="5937155">bytes</span><span class="op" id="5937160">.</span><span class="ident" id="5937161">Buffer</span><span class="op" id="5937167">)</span>&nbsp;<span class="comment" id="5937169">//&nbsp;the&nbsp;returned&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937191">//&nbsp;As&nbsp;we&nbsp;loop,&nbsp;we&nbsp;open&nbsp;files&nbsp;and&nbsp;read&nbsp;them.&nbsp;These&nbsp;variables&nbsp;record&nbsp;the&nbsp;currently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937273">//&nbsp;loaded&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937290">var</span>&nbsp;<span class="ident" id="5937294">lines</span>&nbsp;<span class="op" id="5937300">[</span><span class="op" id="5937301">]</span><span class="op" id="5937302">[</span><span class="op" id="5937303">]</span><span class="builtintype" id="5937304">byte</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937310">var</span>&nbsp;<span class="ident" id="5937314">lastFile</span>&nbsp;<span class="builtintype" id="5937323">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937331">for</span>&nbsp;<span class="ident" id="5937335">i</span>&nbsp;<span class="op" id="5937337">:=</span>&nbsp;<span class="num" id="5937340">2</span><span class="op" id="5937341">;</span>&nbsp;<span class="op" id="5937343">;</span>&nbsp;<span class="ident" id="5937345">i</span><span class="op" id="5937346">++</span>&nbsp;<span class="op" id="5937349">{</span>&nbsp;<span class="comment" id="5937351">//&nbsp;Caller&nbsp;we&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;user,&nbsp;2&nbsp;frames&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937402">pc</span><span class="op" id="5937404">,</span>&nbsp;<span class="ident" id="5937406">file</span><span class="op" id="5937410">,</span>&nbsp;<span class="ident" id="5937412">line</span><span class="op" id="5937416">,</span>&nbsp;<span class="ident" id="5937418">ok</span>&nbsp;<span class="op" id="5937421">:=</span>&nbsp;<span class="ident" id="5937424">runtime</span><span class="op" id="5937431">.</span><span class="ident" id="5937432">Caller</span><span class="op" id="5937438">(</span><span class="ident" id="5937439">i</span><span class="op" id="5937440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937444">if</span>&nbsp;<span class="op" id="5937447">!</span><span class="ident" id="5937448">ok</span>&nbsp;<span class="op" id="5937451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937456">break</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5937464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937468">//&nbsp;Print&nbsp;this&nbsp;much&nbsp;at&nbsp;least.&nbsp;&nbsp;If&nbsp;we&nbsp;can&#39;t&nbsp;find&nbsp;the&nbsp;source,&nbsp;it&nbsp;won&#39;t&nbsp;show.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937544">fmt</span><span class="op" id="5937547">.</span><span class="ident" id="5937548">Fprintf</span><span class="op" id="5937555">(</span><span class="ident" id="5937556">buf</span><span class="op" id="5937559">,</span>&nbsp;<span class="string" id="5937561">&#34;%s:%d&nbsp;(0x%x)\n&#34;</span><span class="op" id="5937577">,</span>&nbsp;<span class="ident" id="5937579">file</span><span class="op" id="5937583">,</span>&nbsp;<span class="ident" id="5937585">line</span><span class="op" id="5937589">,</span>&nbsp;<span class="ident" id="5937591">pc</span><span class="op" id="5937593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937597">if</span>&nbsp;<span class="ident" id="5937600">file</span>&nbsp;<span class="op" id="5937605">!=</span>&nbsp;<span class="ident" id="5937608">lastFile</span>&nbsp;<span class="op" id="5937617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937622">data</span><span class="op" id="5937626">,</span>&nbsp;<span class="ident" id="5937628">err</span>&nbsp;<span class="op" id="5937632">:=</span>&nbsp;<span class="ident" id="5937635">ioutil</span><span class="op" id="5937641">.</span><span class="ident" id="5937642">ReadFile</span><span class="op" id="5937650">(</span><span class="ident" id="5937651">file</span><span class="op" id="5937655">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937660">if</span>&nbsp;<span class="ident" id="5937663">err</span>&nbsp;<span class="op" id="5937667">!=</span>&nbsp;<span class="builtintype" id="5937670">nil</span>&nbsp;<span class="op" id="5937674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937680">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5937692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937697">lines</span>&nbsp;<span class="op" id="5937703">=</span>&nbsp;<span class="ident" id="5937705">bytes</span><span class="op" id="5937710">.</span><span class="ident" id="5937711">Split</span><span class="op" id="5937716">(</span><span class="ident" id="5937717">data</span><span class="op" id="5937721">,</span>&nbsp;<span class="op" id="5937723">[</span><span class="op" id="5937724">]</span><span class="builtintype" id="5937725">byte</span><span class="op" id="5937729">{</span><span class="string" id="5937730">&#39;\n&#39;</span><span class="op" id="5937734">}</span><span class="op" id="5937735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937740">lastFile</span>&nbsp;<span class="op" id="5937749">=</span>&nbsp;<span class="ident" id="5937751">file</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5937758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937762">line</span><span class="op" id="5937766">--</span>&nbsp;<span class="comment" id="5937769">//&nbsp;in&nbsp;stack&nbsp;trace,&nbsp;lines&nbsp;are&nbsp;1-indexed&nbsp;but&nbsp;our&nbsp;array&nbsp;is&nbsp;0-indexed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937837">fmt</span><span class="op" id="5937840">.</span><span class="ident" id="5937841">Fprintf</span><span class="op" id="5937848">(</span><span class="ident" id="5937849">buf</span><span class="op" id="5937852">,</span>&nbsp;<span class="string" id="5937854">&#34;\t%s:&nbsp;%s\n&#34;</span><span class="op" id="5937866">,</span>&nbsp;<span class="ident" id="5937868">function</span><span class="op" id="5937876">(</span><span class="ident" id="5937877">pc</span><span class="op" id="5937879">)</span><span class="op" id="5937880">,</span>&nbsp;<span class="ident" id="5937882">source</span><span class="op" id="5937888">(</span><span class="ident" id="5937889">lines</span><span class="op" id="5937894">,</span>&nbsp;<span class="ident" id="5937896">line</span><span class="op" id="5937900">)</span><span class="op" id="5937901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5937904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937907">return</span>&nbsp;<span class="ident" id="5937914">buf</span><span class="op" id="5937917">.</span><span class="ident" id="5937918">Bytes</span><span class="op" id="5937923">(</span><span class="op" id="5937924">)</span><br>
<span class="lineno">65</span><span class="op" id="5937926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5937929">//&nbsp;source&nbsp;returns&nbsp;a&nbsp;space-trimmed&nbsp;slice&nbsp;of&nbsp;the&nbsp;n&#39;th&nbsp;line.</span><br>
<span class="lineno"></span><span class="keyword" id="5937987">func</span>&nbsp;<span class="ident" id="5937992">source</span><span class="op" id="5937998">(</span><span class="ident" id="5937999">lines</span>&nbsp;<span class="op" id="5938005">[</span><span class="op" id="5938006">]</span><span class="op" id="5938007">[</span><span class="op" id="5938008">]</span><span class="builtintype" id="5938009">byte</span><span class="op" id="5938013">,</span>&nbsp;<span class="ident" id="5938015">n</span>&nbsp;<span class="builtintype" id="5938017">int</span><span class="op" id="5938020">)</span>&nbsp;<span class="op" id="5938022">[</span><span class="op" id="5938023">]</span><span class="builtintype" id="5938024">byte</span>&nbsp;<span class="op" id="5938029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938032">if</span>&nbsp;<span class="ident" id="5938035">n</span>&nbsp;<span class="op" id="5938037">&lt;</span>&nbsp;<span class="num" id="5938039">0</span>&nbsp;<span class="op" id="5938041">||</span>&nbsp;<span class="ident" id="5938044">n</span>&nbsp;<span class="op" id="5938046">&gt;=</span>&nbsp;<span class="builtinfunc" id="5938049">len</span><span class="op" id="5938052">(</span><span class="ident" id="5938053">lines</span><span class="op" id="5938058">)</span>&nbsp;<span class="op" id="5938060">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938064">return</span>&nbsp;<span class="ident" id="5938071">dunno</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938081">return</span>&nbsp;<span class="ident" id="5938088">bytes</span><span class="op" id="5938093">.</span><span class="ident" id="5938094">Trim</span><span class="op" id="5938098">(</span><span class="ident" id="5938099">lines</span><span class="op" id="5938104">[</span><span class="ident" id="5938105">n</span><span class="op" id="5938106">]</span><span class="op" id="5938107">,</span>&nbsp;<span class="string" id="5938109">&#34;&nbsp;\t&#34;</span><span class="op" id="5938114">)</span><br>
<span class="lineno"></span><span class="op" id="5938116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="5938119">//&nbsp;function&nbsp;returns,&nbsp;if&nbsp;possible,&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function&nbsp;containing&nbsp;the&nbsp;PC.</span><br>
<span class="lineno"></span><span class="keyword" id="5938197">func</span>&nbsp;<span class="ident" id="5938202">function</span><span class="op" id="5938210">(</span><span class="ident" id="5938211">pc</span>&nbsp;<span class="builtintype" id="5938214">uintptr</span><span class="op" id="5938221">)</span>&nbsp;<span class="op" id="5938223">[</span><span class="op" id="5938224">]</span><span class="builtintype" id="5938225">byte</span>&nbsp;<span class="op" id="5938230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938233">fn</span>&nbsp;<span class="op" id="5938236">:=</span>&nbsp;<span class="ident" id="5938239">runtime</span><span class="op" id="5938246">.</span><span class="ident" id="5938247">FuncForPC</span><span class="op" id="5938256">(</span><span class="ident" id="5938257">pc</span><span class="op" id="5938259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938262">if</span>&nbsp;<span class="ident" id="5938265">fn</span>&nbsp;<span class="op" id="5938268">==</span>&nbsp;<span class="builtintype" id="5938271">nil</span>&nbsp;<span class="op" id="5938275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938279">return</span>&nbsp;<span class="ident" id="5938286">dunno</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938296">name</span>&nbsp;<span class="op" id="5938301">:=</span>&nbsp;<span class="op" id="5938304">[</span><span class="op" id="5938305">]</span><span class="builtintype" id="5938306">byte</span><span class="op" id="5938310">(</span><span class="ident" id="5938311">fn</span><span class="op" id="5938313">.</span><span class="ident" id="5938314">Name</span><span class="op" id="5938318">(</span><span class="op" id="5938319">)</span><span class="op" id="5938320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938323">//&nbsp;The&nbsp;name&nbsp;includes&nbsp;the&nbsp;path&nbsp;name&nbsp;to&nbsp;the&nbsp;package,&nbsp;which&nbsp;is&nbsp;unnecessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938396">//&nbsp;since&nbsp;the&nbsp;file&nbsp;name&nbsp;is&nbsp;already&nbsp;included.&nbsp;&nbsp;Plus,&nbsp;it&nbsp;has&nbsp;center&nbsp;dots.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938468">//&nbsp;That&nbsp;is,&nbsp;we&nbsp;see</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938488">//&nbsp;&nbsp;&nbsp;&nbsp;runtime/debug.*T·ptrmethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938520">//&nbsp;and&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938533">//&nbsp;&nbsp;&nbsp;&nbsp;*T.ptrmethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938550">//&nbsp;Since&nbsp;the&nbsp;package&nbsp;path&nbsp;might&nbsp;contains&nbsp;dots&nbsp;(e.g.&nbsp;code.google.com/...),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938625">//&nbsp;we&nbsp;first&nbsp;remove&nbsp;the&nbsp;path&nbsp;prefix&nbsp;if&nbsp;there&nbsp;is&nbsp;one.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938678">if</span>&nbsp;<span class="ident" id="5938681">lastslash</span>&nbsp;<span class="op" id="5938691">:=</span>&nbsp;<span class="ident" id="5938694">bytes</span><span class="op" id="5938699">.</span><span class="ident" id="5938700">LastIndex</span><span class="op" id="5938709">(</span><span class="ident" id="5938710">name</span><span class="op" id="5938714">,</span>&nbsp;<span class="ident" id="5938716">slash</span><span class="op" id="5938721">)</span><span class="op" id="5938722">;</span>&nbsp;<span class="ident" id="5938724">lastslash</span>&nbsp;<span class="op" id="5938734">&gt;=</span>&nbsp;<span class="num" id="5938737">0</span>&nbsp;<span class="op" id="5938739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938743">name</span>&nbsp;<span class="op" id="5938748">=</span>&nbsp;<span class="ident" id="5938750">name</span><span class="op" id="5938754">[</span><span class="ident" id="5938755">lastslash</span><span class="op" id="5938764">+</span><span class="num" id="5938765">1</span><span class="op" id="5938766">:</span><span class="op" id="5938767">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938773">if</span>&nbsp;<span class="ident" id="5938776">period</span>&nbsp;<span class="op" id="5938783">:=</span>&nbsp;<span class="ident" id="5938786">bytes</span><span class="op" id="5938791">.</span><span class="ident" id="5938792">Index</span><span class="op" id="5938797">(</span><span class="ident" id="5938798">name</span><span class="op" id="5938802">,</span>&nbsp;<span class="ident" id="5938804">dot</span><span class="op" id="5938807">)</span><span class="op" id="5938808">;</span>&nbsp;<span class="ident" id="5938810">period</span>&nbsp;<span class="op" id="5938817">&gt;=</span>&nbsp;<span class="num" id="5938820">0</span>&nbsp;<span class="op" id="5938822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938826">name</span>&nbsp;<span class="op" id="5938831">=</span>&nbsp;<span class="ident" id="5938833">name</span><span class="op" id="5938837">[</span><span class="ident" id="5938838">period</span><span class="op" id="5938844">+</span><span class="num" id="5938845">1</span><span class="op" id="5938846">:</span><span class="op" id="5938847">]</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938853">name</span>&nbsp;<span class="op" id="5938858">=</span>&nbsp;<span class="ident" id="5938860">bytes</span><span class="op" id="5938865">.</span><span class="ident" id="5938866">Replace</span><span class="op" id="5938873">(</span><span class="ident" id="5938874">name</span><span class="op" id="5938878">,</span>&nbsp;<span class="ident" id="5938880">centerDot</span><span class="op" id="5938889">,</span>&nbsp;<span class="ident" id="5938891">dot</span><span class="op" id="5938894">,</span>&nbsp;<span class="op" id="5938896">-</span><span class="num" id="5938897">1</span><span class="op" id="5938898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938901">return</span>&nbsp;<span class="ident" id="5938908">name</span><br>
<span class="lineno"></span><span class="op" id="5938913">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
