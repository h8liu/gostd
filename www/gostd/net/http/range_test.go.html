<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7311518">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7311573">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7311627">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7311678">package</span>&nbsp;<span class="ident" id="7311686">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7311692">import</span>&nbsp;<span class="op" id="7311699">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7311702">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7311712">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7311715">var</span>&nbsp;<span class="ident" id="7311719">ParseRangeTests</span>&nbsp;<span class="op" id="7311735">=</span>&nbsp;<span class="op" id="7311737">[</span><span class="op" id="7311738">]</span><span class="keyword" id="7311739">struct</span>&nbsp;<span class="op" id="7311746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311749">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7311756">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311764">length</span>&nbsp;<span class="ident" id="7311771">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311778">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311785">[</span><span class="op" id="7311786">]</span><span class="ident" id="7311787">httpRange</span><br>
<span class="lineno">15</span><span class="op" id="7311797">}</span><span class="op" id="7311798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311801">{</span><span class="string" id="7311802">&#34;&#34;</span><span class="op" id="7311804">,</span>&nbsp;<span class="num" id="7311806">0</span><span class="op" id="7311807">,</span>&nbsp;<span class="ident" id="7311809">nil</span><span class="op" id="7311812">}</span><span class="op" id="7311813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311816">{</span><span class="string" id="7311817">&#34;&#34;</span><span class="op" id="7311819">,</span>&nbsp;<span class="num" id="7311821">1000</span><span class="op" id="7311825">,</span>&nbsp;<span class="ident" id="7311827">nil</span><span class="op" id="7311830">}</span><span class="op" id="7311831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311834">{</span><span class="string" id="7311835">&#34;foo&#34;</span><span class="op" id="7311840">,</span>&nbsp;<span class="num" id="7311842">0</span><span class="op" id="7311843">,</span>&nbsp;<span class="ident" id="7311845">nil</span><span class="op" id="7311848">}</span><span class="op" id="7311849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311852">{</span><span class="string" id="7311853">&#34;bytes=&#34;</span><span class="op" id="7311861">,</span>&nbsp;<span class="num" id="7311863">0</span><span class="op" id="7311864">,</span>&nbsp;<span class="ident" id="7311866">nil</span><span class="op" id="7311869">}</span><span class="op" id="7311870">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311873">{</span><span class="string" id="7311874">&#34;bytes=7&#34;</span><span class="op" id="7311883">,</span>&nbsp;<span class="num" id="7311885">10</span><span class="op" id="7311887">,</span>&nbsp;<span class="ident" id="7311889">nil</span><span class="op" id="7311892">}</span><span class="op" id="7311893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311896">{</span><span class="string" id="7311897">&#34;bytes=&nbsp;7&nbsp;&#34;</span><span class="op" id="7311908">,</span>&nbsp;<span class="num" id="7311910">10</span><span class="op" id="7311912">,</span>&nbsp;<span class="ident" id="7311914">nil</span><span class="op" id="7311917">}</span><span class="op" id="7311918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311921">{</span><span class="string" id="7311922">&#34;bytes=1-&#34;</span><span class="op" id="7311932">,</span>&nbsp;<span class="num" id="7311934">0</span><span class="op" id="7311935">,</span>&nbsp;<span class="ident" id="7311937">nil</span><span class="op" id="7311940">}</span><span class="op" id="7311941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311944">{</span><span class="string" id="7311945">&#34;bytes=5-4&#34;</span><span class="op" id="7311956">,</span>&nbsp;<span class="num" id="7311958">10</span><span class="op" id="7311960">,</span>&nbsp;<span class="ident" id="7311962">nil</span><span class="op" id="7311965">}</span><span class="op" id="7311966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311969">{</span><span class="string" id="7311970">&#34;bytes=0-2,5-4&#34;</span><span class="op" id="7311985">,</span>&nbsp;<span class="num" id="7311987">10</span><span class="op" id="7311989">,</span>&nbsp;<span class="ident" id="7311991">nil</span><span class="op" id="7311994">}</span><span class="op" id="7311995">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311998">{</span><span class="string" id="7311999">&#34;bytes=2-5,4-3&#34;</span><span class="op" id="7312014">,</span>&nbsp;<span class="num" id="7312016">10</span><span class="op" id="7312018">,</span>&nbsp;<span class="ident" id="7312020">nil</span><span class="op" id="7312023">}</span><span class="op" id="7312024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312027">{</span><span class="string" id="7312028">&#34;bytes=--5,4--3&#34;</span><span class="op" id="7312044">,</span>&nbsp;<span class="num" id="7312046">10</span><span class="op" id="7312048">,</span>&nbsp;<span class="ident" id="7312050">nil</span><span class="op" id="7312053">}</span><span class="op" id="7312054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312057">{</span><span class="string" id="7312058">&#34;bytes=A-&#34;</span><span class="op" id="7312068">,</span>&nbsp;<span class="num" id="7312070">10</span><span class="op" id="7312072">,</span>&nbsp;<span class="ident" id="7312074">nil</span><span class="op" id="7312077">}</span><span class="op" id="7312078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312081">{</span><span class="string" id="7312082">&#34;bytes=A-&nbsp;&#34;</span><span class="op" id="7312093">,</span>&nbsp;<span class="num" id="7312095">10</span><span class="op" id="7312097">,</span>&nbsp;<span class="ident" id="7312099">nil</span><span class="op" id="7312102">}</span><span class="op" id="7312103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312106">{</span><span class="string" id="7312107">&#34;bytes=A-Z&#34;</span><span class="op" id="7312118">,</span>&nbsp;<span class="num" id="7312120">10</span><span class="op" id="7312122">,</span>&nbsp;<span class="ident" id="7312124">nil</span><span class="op" id="7312127">}</span><span class="op" id="7312128">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312131">{</span><span class="string" id="7312132">&#34;bytes=&nbsp;-Z&#34;</span><span class="op" id="7312143">,</span>&nbsp;<span class="num" id="7312145">10</span><span class="op" id="7312147">,</span>&nbsp;<span class="ident" id="7312149">nil</span><span class="op" id="7312152">}</span><span class="op" id="7312153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312156">{</span><span class="string" id="7312157">&#34;bytes=5-Z&#34;</span><span class="op" id="7312168">,</span>&nbsp;<span class="num" id="7312170">10</span><span class="op" id="7312172">,</span>&nbsp;<span class="ident" id="7312174">nil</span><span class="op" id="7312177">}</span><span class="op" id="7312178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312181">{</span><span class="string" id="7312182">&#34;bytes=Ran-dom,&nbsp;garbage&#34;</span><span class="op" id="7312206">,</span>&nbsp;<span class="num" id="7312208">10</span><span class="op" id="7312210">,</span>&nbsp;<span class="ident" id="7312212">nil</span><span class="op" id="7312215">}</span><span class="op" id="7312216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312219">{</span><span class="string" id="7312220">&#34;bytes=0x01-0x02&#34;</span><span class="op" id="7312237">,</span>&nbsp;<span class="num" id="7312239">10</span><span class="op" id="7312241">,</span>&nbsp;<span class="ident" id="7312243">nil</span><span class="op" id="7312246">}</span><span class="op" id="7312247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312250">{</span><span class="string" id="7312251">&#34;bytes=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7312268">,</span>&nbsp;<span class="num" id="7312270">10</span><span class="op" id="7312272">,</span>&nbsp;<span class="ident" id="7312274">nil</span><span class="op" id="7312277">}</span><span class="op" id="7312278">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312281">{</span><span class="string" id="7312282">&#34;bytes=&nbsp;,&nbsp;,&nbsp;,&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7312299">,</span>&nbsp;<span class="num" id="7312301">10</span><span class="op" id="7312303">,</span>&nbsp;<span class="ident" id="7312305">nil</span><span class="op" id="7312308">}</span><span class="op" id="7312309">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312313">{</span><span class="string" id="7312314">&#34;bytes=0-9&#34;</span><span class="op" id="7312325">,</span>&nbsp;<span class="num" id="7312327">10</span><span class="op" id="7312329">,</span>&nbsp;<span class="op" id="7312331">[</span><span class="op" id="7312332">]</span><span class="ident" id="7312333">httpRange</span><span class="op" id="7312342">{</span><span class="op" id="7312343">{</span><span class="num" id="7312344">0</span><span class="op" id="7312345">,</span>&nbsp;<span class="num" id="7312347">10</span><span class="op" id="7312349">}</span><span class="op" id="7312350">}</span><span class="op" id="7312351">}</span><span class="op" id="7312352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312355">{</span><span class="string" id="7312356">&#34;bytes=0-&#34;</span><span class="op" id="7312366">,</span>&nbsp;<span class="num" id="7312368">10</span><span class="op" id="7312370">,</span>&nbsp;<span class="op" id="7312372">[</span><span class="op" id="7312373">]</span><span class="ident" id="7312374">httpRange</span><span class="op" id="7312383">{</span><span class="op" id="7312384">{</span><span class="num" id="7312385">0</span><span class="op" id="7312386">,</span>&nbsp;<span class="num" id="7312388">10</span><span class="op" id="7312390">}</span><span class="op" id="7312391">}</span><span class="op" id="7312392">}</span><span class="op" id="7312393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312396">{</span><span class="string" id="7312397">&#34;bytes=5-&#34;</span><span class="op" id="7312407">,</span>&nbsp;<span class="num" id="7312409">10</span><span class="op" id="7312411">,</span>&nbsp;<span class="op" id="7312413">[</span><span class="op" id="7312414">]</span><span class="ident" id="7312415">httpRange</span><span class="op" id="7312424">{</span><span class="op" id="7312425">{</span><span class="num" id="7312426">5</span><span class="op" id="7312427">,</span>&nbsp;<span class="num" id="7312429">5</span><span class="op" id="7312430">}</span><span class="op" id="7312431">}</span><span class="op" id="7312432">}</span><span class="op" id="7312433">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312436">{</span><span class="string" id="7312437">&#34;bytes=0-20&#34;</span><span class="op" id="7312449">,</span>&nbsp;<span class="num" id="7312451">10</span><span class="op" id="7312453">,</span>&nbsp;<span class="op" id="7312455">[</span><span class="op" id="7312456">]</span><span class="ident" id="7312457">httpRange</span><span class="op" id="7312466">{</span><span class="op" id="7312467">{</span><span class="num" id="7312468">0</span><span class="op" id="7312469">,</span>&nbsp;<span class="num" id="7312471">10</span><span class="op" id="7312473">}</span><span class="op" id="7312474">}</span><span class="op" id="7312475">}</span><span class="op" id="7312476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312479">{</span><span class="string" id="7312480">&#34;bytes=15-,0-5&#34;</span><span class="op" id="7312495">,</span>&nbsp;<span class="num" id="7312497">10</span><span class="op" id="7312499">,</span>&nbsp;<span class="ident" id="7312501">nil</span><span class="op" id="7312504">}</span><span class="op" id="7312505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312508">{</span><span class="string" id="7312509">&#34;bytes=1-2,5-&#34;</span><span class="op" id="7312523">,</span>&nbsp;<span class="num" id="7312525">10</span><span class="op" id="7312527">,</span>&nbsp;<span class="op" id="7312529">[</span><span class="op" id="7312530">]</span><span class="ident" id="7312531">httpRange</span><span class="op" id="7312540">{</span><span class="op" id="7312541">{</span><span class="num" id="7312542">1</span><span class="op" id="7312543">,</span>&nbsp;<span class="num" id="7312545">2</span><span class="op" id="7312546">}</span><span class="op" id="7312547">,</span>&nbsp;<span class="op" id="7312549">{</span><span class="num" id="7312550">5</span><span class="op" id="7312551">,</span>&nbsp;<span class="num" id="7312553">5</span><span class="op" id="7312554">}</span><span class="op" id="7312555">}</span><span class="op" id="7312556">}</span><span class="op" id="7312557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312560">{</span><span class="string" id="7312561">&#34;bytes=-2&nbsp;,&nbsp;7-&#34;</span><span class="op" id="7312576">,</span>&nbsp;<span class="num" id="7312578">11</span><span class="op" id="7312580">,</span>&nbsp;<span class="op" id="7312582">[</span><span class="op" id="7312583">]</span><span class="ident" id="7312584">httpRange</span><span class="op" id="7312593">{</span><span class="op" id="7312594">{</span><span class="num" id="7312595">9</span><span class="op" id="7312596">,</span>&nbsp;<span class="num" id="7312598">2</span><span class="op" id="7312599">}</span><span class="op" id="7312600">,</span>&nbsp;<span class="op" id="7312602">{</span><span class="num" id="7312603">7</span><span class="op" id="7312604">,</span>&nbsp;<span class="num" id="7312606">4</span><span class="op" id="7312607">}</span><span class="op" id="7312608">}</span><span class="op" id="7312609">}</span><span class="op" id="7312610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312613">{</span><span class="string" id="7312614">&#34;bytes=0-0&nbsp;,2-2,&nbsp;7-&#34;</span><span class="op" id="7312634">,</span>&nbsp;<span class="num" id="7312636">11</span><span class="op" id="7312638">,</span>&nbsp;<span class="op" id="7312640">[</span><span class="op" id="7312641">]</span><span class="ident" id="7312642">httpRange</span><span class="op" id="7312651">{</span><span class="op" id="7312652">{</span><span class="num" id="7312653">0</span><span class="op" id="7312654">,</span>&nbsp;<span class="num" id="7312656">1</span><span class="op" id="7312657">}</span><span class="op" id="7312658">,</span>&nbsp;<span class="op" id="7312660">{</span><span class="num" id="7312661">2</span><span class="op" id="7312662">,</span>&nbsp;<span class="num" id="7312664">1</span><span class="op" id="7312665">}</span><span class="op" id="7312666">,</span>&nbsp;<span class="op" id="7312668">{</span><span class="num" id="7312669">7</span><span class="op" id="7312670">,</span>&nbsp;<span class="num" id="7312672">4</span><span class="op" id="7312673">}</span><span class="op" id="7312674">}</span><span class="op" id="7312675">}</span><span class="op" id="7312676">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312679">{</span><span class="string" id="7312680">&#34;bytes=-5&#34;</span><span class="op" id="7312690">,</span>&nbsp;<span class="num" id="7312692">10</span><span class="op" id="7312694">,</span>&nbsp;<span class="op" id="7312696">[</span><span class="op" id="7312697">]</span><span class="ident" id="7312698">httpRange</span><span class="op" id="7312707">{</span><span class="op" id="7312708">{</span><span class="num" id="7312709">5</span><span class="op" id="7312710">,</span>&nbsp;<span class="num" id="7312712">5</span><span class="op" id="7312713">}</span><span class="op" id="7312714">}</span><span class="op" id="7312715">}</span><span class="op" id="7312716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312719">{</span><span class="string" id="7312720">&#34;bytes=-15&#34;</span><span class="op" id="7312731">,</span>&nbsp;<span class="num" id="7312733">10</span><span class="op" id="7312735">,</span>&nbsp;<span class="op" id="7312737">[</span><span class="op" id="7312738">]</span><span class="ident" id="7312739">httpRange</span><span class="op" id="7312748">{</span><span class="op" id="7312749">{</span><span class="num" id="7312750">0</span><span class="op" id="7312751">,</span>&nbsp;<span class="num" id="7312753">10</span><span class="op" id="7312755">}</span><span class="op" id="7312756">}</span><span class="op" id="7312757">}</span><span class="op" id="7312758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312761">{</span><span class="string" id="7312762">&#34;bytes=0-499&#34;</span><span class="op" id="7312775">,</span>&nbsp;<span class="num" id="7312777">10000</span><span class="op" id="7312782">,</span>&nbsp;<span class="op" id="7312784">[</span><span class="op" id="7312785">]</span><span class="ident" id="7312786">httpRange</span><span class="op" id="7312795">{</span><span class="op" id="7312796">{</span><span class="num" id="7312797">0</span><span class="op" id="7312798">,</span>&nbsp;<span class="num" id="7312800">500</span><span class="op" id="7312803">}</span><span class="op" id="7312804">}</span><span class="op" id="7312805">}</span><span class="op" id="7312806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312809">{</span><span class="string" id="7312810">&#34;bytes=500-999&#34;</span><span class="op" id="7312825">,</span>&nbsp;<span class="num" id="7312827">10000</span><span class="op" id="7312832">,</span>&nbsp;<span class="op" id="7312834">[</span><span class="op" id="7312835">]</span><span class="ident" id="7312836">httpRange</span><span class="op" id="7312845">{</span><span class="op" id="7312846">{</span><span class="num" id="7312847">500</span><span class="op" id="7312850">,</span>&nbsp;<span class="num" id="7312852">500</span><span class="op" id="7312855">}</span><span class="op" id="7312856">}</span><span class="op" id="7312857">}</span><span class="op" id="7312858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312861">{</span><span class="string" id="7312862">&#34;bytes=-500&#34;</span><span class="op" id="7312874">,</span>&nbsp;<span class="num" id="7312876">10000</span><span class="op" id="7312881">,</span>&nbsp;<span class="op" id="7312883">[</span><span class="op" id="7312884">]</span><span class="ident" id="7312885">httpRange</span><span class="op" id="7312894">{</span><span class="op" id="7312895">{</span><span class="num" id="7312896">9500</span><span class="op" id="7312900">,</span>&nbsp;<span class="num" id="7312902">500</span><span class="op" id="7312905">}</span><span class="op" id="7312906">}</span><span class="op" id="7312907">}</span><span class="op" id="7312908">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312911">{</span><span class="string" id="7312912">&#34;bytes=9500-&#34;</span><span class="op" id="7312925">,</span>&nbsp;<span class="num" id="7312927">10000</span><span class="op" id="7312932">,</span>&nbsp;<span class="op" id="7312934">[</span><span class="op" id="7312935">]</span><span class="ident" id="7312936">httpRange</span><span class="op" id="7312945">{</span><span class="op" id="7312946">{</span><span class="num" id="7312947">9500</span><span class="op" id="7312951">,</span>&nbsp;<span class="num" id="7312953">500</span><span class="op" id="7312956">}</span><span class="op" id="7312957">}</span><span class="op" id="7312958">}</span><span class="op" id="7312959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312962">{</span><span class="string" id="7312963">&#34;bytes=0-0,-1&#34;</span><span class="op" id="7312977">,</span>&nbsp;<span class="num" id="7312979">10000</span><span class="op" id="7312984">,</span>&nbsp;<span class="op" id="7312986">[</span><span class="op" id="7312987">]</span><span class="ident" id="7312988">httpRange</span><span class="op" id="7312997">{</span><span class="op" id="7312998">{</span><span class="num" id="7312999">0</span><span class="op" id="7313000">,</span>&nbsp;<span class="num" id="7313002">1</span><span class="op" id="7313003">}</span><span class="op" id="7313004">,</span>&nbsp;<span class="op" id="7313006">{</span><span class="num" id="7313007">9999</span><span class="op" id="7313011">,</span>&nbsp;<span class="num" id="7313013">1</span><span class="op" id="7313014">}</span><span class="op" id="7313015">}</span><span class="op" id="7313016">}</span><span class="op" id="7313017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313020">{</span><span class="string" id="7313021">&#34;bytes=500-600,601-999&#34;</span><span class="op" id="7313044">,</span>&nbsp;<span class="num" id="7313046">10000</span><span class="op" id="7313051">,</span>&nbsp;<span class="op" id="7313053">[</span><span class="op" id="7313054">]</span><span class="ident" id="7313055">httpRange</span><span class="op" id="7313064">{</span><span class="op" id="7313065">{</span><span class="num" id="7313066">500</span><span class="op" id="7313069">,</span>&nbsp;<span class="num" id="7313071">101</span><span class="op" id="7313074">}</span><span class="op" id="7313075">,</span>&nbsp;<span class="op" id="7313077">{</span><span class="num" id="7313078">601</span><span class="op" id="7313081">,</span>&nbsp;<span class="num" id="7313083">399</span><span class="op" id="7313086">}</span><span class="op" id="7313087">}</span><span class="op" id="7313088">}</span><span class="op" id="7313089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313092">{</span><span class="string" id="7313093">&#34;bytes=500-700,601-999&#34;</span><span class="op" id="7313116">,</span>&nbsp;<span class="num" id="7313118">10000</span><span class="op" id="7313123">,</span>&nbsp;<span class="op" id="7313125">[</span><span class="op" id="7313126">]</span><span class="ident" id="7313127">httpRange</span><span class="op" id="7313136">{</span><span class="op" id="7313137">{</span><span class="num" id="7313138">500</span><span class="op" id="7313141">,</span>&nbsp;<span class="num" id="7313143">201</span><span class="op" id="7313146">}</span><span class="op" id="7313147">,</span>&nbsp;<span class="op" id="7313149">{</span><span class="num" id="7313150">601</span><span class="op" id="7313153">,</span>&nbsp;<span class="num" id="7313155">399</span><span class="op" id="7313158">}</span><span class="op" id="7313159">}</span><span class="op" id="7313160">}</span><span class="op" id="7313161">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7313165">//&nbsp;Match&nbsp;Apache&nbsp;laxity:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313190">{</span><span class="string" id="7313191">&#34;bytes=&nbsp;&nbsp;&nbsp;1&nbsp;-2&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;4-&nbsp;5,&nbsp;7&nbsp;-&nbsp;8&nbsp;,&nbsp;,,&#34;</span><span class="op" id="7313228">,</span>&nbsp;<span class="num" id="7313230">11</span><span class="op" id="7313232">,</span>&nbsp;<span class="op" id="7313234">[</span><span class="op" id="7313235">]</span><span class="ident" id="7313236">httpRange</span><span class="op" id="7313245">{</span><span class="op" id="7313246">{</span><span class="num" id="7313247">1</span><span class="op" id="7313248">,</span>&nbsp;<span class="num" id="7313250">2</span><span class="op" id="7313251">}</span><span class="op" id="7313252">,</span>&nbsp;<span class="op" id="7313254">{</span><span class="num" id="7313255">4</span><span class="op" id="7313256">,</span>&nbsp;<span class="num" id="7313258">2</span><span class="op" id="7313259">}</span><span class="op" id="7313260">,</span>&nbsp;<span class="op" id="7313262">{</span><span class="num" id="7313263">7</span><span class="op" id="7313264">,</span>&nbsp;<span class="num" id="7313266">2</span><span class="op" id="7313267">}</span><span class="op" id="7313268">}</span><span class="op" id="7313269">}</span><span class="op" id="7313270">,</span><br>
<span class="lineno"></span><span class="op" id="7313272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7313275">func</span>&nbsp;<span class="ident" id="7313280">TestParseRange</span><span class="op" id="7313294">(</span><span class="ident" id="7313295">t</span>&nbsp;<span class="op" id="7313297">*</span><span class="ident" id="7313298">testing</span><span class="op" id="7313305">.</span><span class="ident" id="7313306">T</span><span class="op" id="7313307">)</span>&nbsp;<span class="op" id="7313309">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7313312">for</span>&nbsp;<span class="ident" id="7313316">_</span><span class="op" id="7313317">,</span>&nbsp;<span class="ident" id="7313319">test</span>&nbsp;<span class="op" id="7313324">:=</span>&nbsp;<span class="keyword" id="7313327">range</span>&nbsp;<span class="ident" id="7313333">ParseRangeTests</span>&nbsp;<span class="op" id="7313349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313353">r</span>&nbsp;<span class="op" id="7313355">:=</span>&nbsp;<span class="ident" id="7313358">test</span><span class="op" id="7313362">.</span><span class="ident" id="7313363">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313367">ranges</span><span class="op" id="7313373">,</span>&nbsp;<span class="ident" id="7313375">err</span>&nbsp;<span class="op" id="7313379">:=</span>&nbsp;<span class="ident" id="7313382">parseRange</span><span class="op" id="7313392">(</span><span class="ident" id="7313393">test</span><span class="op" id="7313397">.</span><span class="ident" id="7313398">s</span><span class="op" id="7313399">,</span>&nbsp;<span class="ident" id="7313401">test</span><span class="op" id="7313405">.</span><span class="ident" id="7313406">length</span><span class="op" id="7313412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7313416">if</span>&nbsp;<span class="ident" id="7313419">err</span>&nbsp;<span class="op" id="7313423">!=</span>&nbsp;<span class="ident" id="7313426">nil</span>&nbsp;<span class="op" id="7313430">&amp;&amp;</span>&nbsp;<span class="ident" id="7313433">r</span>&nbsp;<span class="op" id="7313435">!=</span>&nbsp;<span class="ident" id="7313438">nil</span>&nbsp;<span class="op" id="7313442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313447">t</span><span class="op" id="7313448">.</span><span class="ident" id="7313449">Errorf</span><span class="op" id="7313455">(</span><span class="string" id="7313456">&#34;parseRange(%q)&nbsp;returned&nbsp;error&nbsp;%q&#34;</span><span class="op" id="7313490">,</span>&nbsp;<span class="ident" id="7313492">test</span><span class="op" id="7313496">.</span><span class="ident" id="7313497">s</span><span class="op" id="7313498">,</span>&nbsp;<span class="ident" id="7313500">err</span><span class="op" id="7313503">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7313511">if</span>&nbsp;<span class="builtinfunc" id="7313514">len</span><span class="op" id="7313517">(</span><span class="ident" id="7313518">ranges</span><span class="op" id="7313524">)</span>&nbsp;<span class="op" id="7313526">!=</span>&nbsp;<span class="builtinfunc" id="7313529">len</span><span class="op" id="7313532">(</span><span class="ident" id="7313533">r</span><span class="op" id="7313534">)</span>&nbsp;<span class="op" id="7313536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313541">t</span><span class="op" id="7313542">.</span><span class="ident" id="7313543">Errorf</span><span class="op" id="7313549">(</span><span class="string" id="7313550">&#34;len(parseRange(%q))&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7313585">,</span>&nbsp;<span class="ident" id="7313587">test</span><span class="op" id="7313591">.</span><span class="ident" id="7313592">s</span><span class="op" id="7313593">,</span>&nbsp;<span class="builtinfunc" id="7313595">len</span><span class="op" id="7313598">(</span><span class="ident" id="7313599">ranges</span><span class="op" id="7313605">)</span><span class="op" id="7313606">,</span>&nbsp;<span class="builtinfunc" id="7313608">len</span><span class="op" id="7313611">(</span><span class="ident" id="7313612">r</span><span class="op" id="7313613">)</span><span class="op" id="7313614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7313619">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313630">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7313634">for</span>&nbsp;<span class="ident" id="7313638">i</span>&nbsp;<span class="op" id="7313640">:=</span>&nbsp;<span class="keyword" id="7313643">range</span>&nbsp;<span class="ident" id="7313649">r</span>&nbsp;<span class="op" id="7313651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7313656">if</span>&nbsp;<span class="ident" id="7313659">ranges</span><span class="op" id="7313665">[</span><span class="ident" id="7313666">i</span><span class="op" id="7313667">]</span><span class="op" id="7313668">.</span><span class="ident" id="7313669">start</span>&nbsp;<span class="op" id="7313675">!=</span>&nbsp;<span class="ident" id="7313678">r</span><span class="op" id="7313679">[</span><span class="ident" id="7313680">i</span><span class="op" id="7313681">]</span><span class="op" id="7313682">.</span><span class="ident" id="7313683">start</span>&nbsp;<span class="op" id="7313689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313695">t</span><span class="op" id="7313696">.</span><span class="ident" id="7313697">Errorf</span><span class="op" id="7313703">(</span><span class="string" id="7313704">&#34;parseRange(%q)[%d].start&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7313744">,</span>&nbsp;<span class="ident" id="7313746">test</span><span class="op" id="7313750">.</span><span class="ident" id="7313751">s</span><span class="op" id="7313752">,</span>&nbsp;<span class="ident" id="7313754">i</span><span class="op" id="7313755">,</span>&nbsp;<span class="ident" id="7313757">ranges</span><span class="op" id="7313763">[</span><span class="ident" id="7313764">i</span><span class="op" id="7313765">]</span><span class="op" id="7313766">.</span><span class="ident" id="7313767">start</span><span class="op" id="7313772">,</span>&nbsp;<span class="ident" id="7313774">r</span><span class="op" id="7313775">[</span><span class="ident" id="7313776">i</span><span class="op" id="7313777">]</span><span class="op" id="7313778">.</span><span class="ident" id="7313779">start</span><span class="op" id="7313784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7313794">if</span>&nbsp;<span class="ident" id="7313797">ranges</span><span class="op" id="7313803">[</span><span class="ident" id="7313804">i</span><span class="op" id="7313805">]</span><span class="op" id="7313806">.</span><span class="ident" id="7313807">length</span>&nbsp;<span class="op" id="7313814">!=</span>&nbsp;<span class="ident" id="7313817">r</span><span class="op" id="7313818">[</span><span class="ident" id="7313819">i</span><span class="op" id="7313820">]</span><span class="op" id="7313821">.</span><span class="ident" id="7313822">length</span>&nbsp;<span class="op" id="7313829">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313835">t</span><span class="op" id="7313836">.</span><span class="ident" id="7313837">Errorf</span><span class="op" id="7313843">(</span><span class="string" id="7313844">&#34;parseRange(%q)[%d].length&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7313885">,</span>&nbsp;<span class="ident" id="7313887">test</span><span class="op" id="7313891">.</span><span class="ident" id="7313892">s</span><span class="op" id="7313893">,</span>&nbsp;<span class="ident" id="7313895">i</span><span class="op" id="7313896">,</span>&nbsp;<span class="ident" id="7313898">ranges</span><span class="op" id="7313904">[</span><span class="ident" id="7313905">i</span><span class="op" id="7313906">]</span><span class="op" id="7313907">.</span><span class="ident" id="7313908">length</span><span class="op" id="7313914">,</span>&nbsp;<span class="ident" id="7313916">r</span><span class="op" id="7313917">[</span><span class="ident" id="7313918">i</span><span class="op" id="7313919">]</span><span class="op" id="7313920">.</span><span class="ident" id="7313921">length</span><span class="op" id="7313927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313939">}</span><br>
<span class="lineno"></span><span class="op" id="7313941">}</span>
</div>
</body>
</html>
