<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2238053">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2238108">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2238162">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2238213">//&nbsp;W.Hormann,&nbsp;G.Derflinger:</span><br>
<span class="lineno"></span><span class="comment" id="2238241">//&nbsp;&#34;Rejection-Inversion&nbsp;to&nbsp;Generate&nbsp;Variates</span><br>
<span class="lineno"></span><span class="comment" id="2238286">//&nbsp;from&nbsp;Monotone&nbsp;Discrete&nbsp;Distributions&#34;</span><br>
<span class="lineno"></span><span class="comment" id="2238327">//&nbsp;http://eeyore.wu-wien.ac.at/papers/96-04-04.wh-der.ps.gz</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2238388">package</span>&nbsp;<span class="ident" id="2238396">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2238402">import</span>&nbsp;<span class="string" id="2238409">&#34;math&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2238417">//&nbsp;A&nbsp;Zipf&nbsp;generates&nbsp;Zipf&nbsp;distributed&nbsp;variates.</span><br>
<span class="lineno">15</span><span class="keyword" id="2238464">type</span>&nbsp;<span class="ident" id="2238469">Zipf</span>&nbsp;<span class="keyword" id="2238474">struct</span>&nbsp;<span class="op" id="2238481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238484">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2238497">*</span><span class="ident" id="2238498"><a href="/math/rand/rand.go.html#2216548">Rand</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238504">imax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2238517">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238526">v</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2238539">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238548">q</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2238561">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238570">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2238583">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238592">oneminusQ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2238605">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238614">oneminusQinv</span>&nbsp;<span class="builtintype" id="2238627">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238636">hxm</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2238649">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238658">hx0minusHxm</span>&nbsp;&nbsp;<span class="builtintype" id="2238671">float64</span><br>
<span class="lineno">25</span><span class="op" id="2238679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2238682">func</span>&nbsp;<span class="op" id="2238687">(</span><span class="ident" id="2238688">z</span>&nbsp;<span class="op" id="2238690">*</span><span class="ident" id="2238691"><a href="/math/rand/zipf.go.html#2238469">Zipf</a></span><span class="op" id="2238695">)</span>&nbsp;<span class="ident" id="2238697">h</span><span class="op" id="2238698">(</span><span class="ident" id="2238699">x</span>&nbsp;<span class="builtintype" id="2238701">float64</span><span class="op" id="2238708">)</span>&nbsp;<span class="builtintype" id="2238710">float64</span>&nbsp;<span class="op" id="2238718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2238721">return</span>&nbsp;<span class="ident" id="2238728"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2238732">.</span><span class="ident" id="2238733">Exp</span><span class="op" id="2238736">(</span><span class="ident" id="2238737"><a href="/math/rand/zipf.go.html#2238688">z</a></span><span class="op" id="2238738">.</span><span class="ident" id="2238739">oneminusQ</span><span class="op" id="2238748">*</span><span class="ident" id="2238749"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2238753">.</span><span class="ident" id="2238754">Log</span><span class="op" id="2238757">(</span><span class="ident" id="2238758"><a href="/math/rand/zipf.go.html#2238688">z</a></span><span class="op" id="2238759">.</span><span class="ident" id="2238760">v</span><span class="op" id="2238761">+</span><span class="ident" id="2238762"><a href="/math/rand/zipf.go.html#2238699">x</a></span><span class="op" id="2238763">)</span><span class="op" id="2238764">)</span>&nbsp;<span class="op" id="2238766">*</span>&nbsp;<span class="ident" id="2238768"><a href="/math/rand/zipf.go.html#2238688">z</a></span><span class="op" id="2238769">.</span><span class="ident" id="2238770">oneminusQinv</span><br>
<span class="lineno"></span><span class="op" id="2238783">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="2238786">func</span>&nbsp;<span class="op" id="2238791">(</span><span class="ident" id="2238792">z</span>&nbsp;<span class="op" id="2238794">*</span><span class="ident" id="2238795"><a href="/math/rand/zipf.go.html#2238469">Zipf</a></span><span class="op" id="2238799">)</span>&nbsp;<span class="ident" id="2238801">hinv</span><span class="op" id="2238805">(</span><span class="ident" id="2238806">x</span>&nbsp;<span class="builtintype" id="2238808">float64</span><span class="op" id="2238815">)</span>&nbsp;<span class="builtintype" id="2238817">float64</span>&nbsp;<span class="op" id="2238825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2238828">return</span>&nbsp;<span class="ident" id="2238835"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2238839">.</span><span class="ident" id="2238840">Exp</span><span class="op" id="2238843">(</span><span class="ident" id="2238844"><a href="/math/rand/zipf.go.html#2238792">z</a></span><span class="op" id="2238845">.</span><span class="ident" id="2238846">oneminusQinv</span><span class="op" id="2238858">*</span><span class="ident" id="2238859"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2238863">.</span><span class="ident" id="2238864">Log</span><span class="op" id="2238867">(</span><span class="ident" id="2238868"><a href="/math/rand/zipf.go.html#2238792">z</a></span><span class="op" id="2238869">.</span><span class="ident" id="2238870">oneminusQ</span><span class="op" id="2238879">*</span><span class="ident" id="2238880"><a href="/math/rand/zipf.go.html#2238806">x</a></span><span class="op" id="2238881">)</span><span class="op" id="2238882">)</span>&nbsp;<span class="op" id="2238884">-</span>&nbsp;<span class="ident" id="2238886"><a href="/math/rand/zipf.go.html#2238792">z</a></span><span class="op" id="2238887">.</span><span class="ident" id="2238888">v</span><br>
<span class="lineno"></span><span class="op" id="2238890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2238893">//&nbsp;NewZipf&nbsp;returns&nbsp;a&nbsp;Zipf&nbsp;generating&nbsp;variates&nbsp;p(k)&nbsp;on&nbsp;[0,&nbsp;imax]</span><br>
<span class="lineno"></span><span class="comment" id="2238957">//&nbsp;proportional&nbsp;to&nbsp;(v+k)**(-s)&nbsp;where&nbsp;s&gt;1&nbsp;and&nbsp;k&gt;=0,&nbsp;and&nbsp;v&gt;=1.</span><br>
<span class="lineno"></span><span class="keyword" id="2239018">func</span>&nbsp;<span class="ident" id="2239023">NewZipf</span><span class="op" id="2239030">(</span><span class="ident" id="2239031">r</span>&nbsp;<span class="op" id="2239033">*</span><span class="ident" id="2239034"><a href="/math/rand/rand.go.html#2216548">Rand</a></span><span class="op" id="2239038">,</span>&nbsp;<span class="ident" id="2239040">s</span>&nbsp;<span class="builtintype" id="2239042">float64</span><span class="op" id="2239049">,</span>&nbsp;<span class="ident" id="2239051">v</span>&nbsp;<span class="builtintype" id="2239053">float64</span><span class="op" id="2239060">,</span>&nbsp;<span class="ident" id="2239062">imax</span>&nbsp;<span class="ident" id="2239067">uint64</span><span class="op" id="2239073">)</span>&nbsp;<span class="op" id="2239075">*</span><span class="ident" id="2239076"><a href="/math/rand/zipf.go.html#2238469">Zipf</a></span>&nbsp;<span class="op" id="2239081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239084">z</span>&nbsp;<span class="op" id="2239086">:=</span>&nbsp;<span class="builtinfunc" id="2239089">new</span><span class="op" id="2239092">(</span><span class="ident" id="2239093"><a href="/math/rand/zipf.go.html#2238469">Zipf</a></span><span class="op" id="2239097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239100">if</span>&nbsp;<span class="ident" id="2239103"><a href="/math/rand/zipf.go.html#2239040">s</a></span>&nbsp;<span class="op" id="2239105">&lt;=</span>&nbsp;<span class="num" id="2239108">1.0</span>&nbsp;<span class="op" id="2239112">||</span>&nbsp;<span class="ident" id="2239115"><a href="/math/rand/zipf.go.html#2239051">v</a></span>&nbsp;<span class="op" id="2239117">&lt;</span>&nbsp;<span class="num" id="2239119">1</span>&nbsp;<span class="op" id="2239121">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239125">return</span>&nbsp;<span class="ident" id="2239132">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239140"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239141">.</span><span class="ident" id="2239142">r</span>&nbsp;<span class="op" id="2239144">=</span>&nbsp;<span class="ident" id="2239146"><a href="/math/rand/zipf.go.html#2239031">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239149"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239150">.</span><span class="ident" id="2239151">imax</span>&nbsp;<span class="op" id="2239156">=</span>&nbsp;<span class="builtintype" id="2239158">float64</span><span class="op" id="2239165">(</span><span class="ident" id="2239166"><a href="/math/rand/zipf.go.html#2239062">imax</a></span><span class="op" id="2239170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239173"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239174">.</span><span class="ident" id="2239175">v</span>&nbsp;<span class="op" id="2239177">=</span>&nbsp;<span class="ident" id="2239179"><a href="/math/rand/zipf.go.html#2239051">v</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239182"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239183">.</span><span class="ident" id="2239184">q</span>&nbsp;<span class="op" id="2239186">=</span>&nbsp;<span class="ident" id="2239188"><a href="/math/rand/zipf.go.html#2239040">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239191"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239192">.</span><span class="ident" id="2239193">oneminusQ</span>&nbsp;<span class="op" id="2239203">=</span>&nbsp;<span class="num" id="2239205">1.0</span>&nbsp;<span class="op" id="2239209">-</span>&nbsp;<span class="ident" id="2239211"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239212">.</span><span class="ident" id="2239213">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239216"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239217">.</span><span class="ident" id="2239218">oneminusQinv</span>&nbsp;<span class="op" id="2239231">=</span>&nbsp;<span class="num" id="2239233">1.0</span>&nbsp;<span class="op" id="2239237">/</span>&nbsp;<span class="ident" id="2239239"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239240">.</span><span class="ident" id="2239241">oneminusQ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239252"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239253">.</span><span class="ident" id="2239254">hxm</span>&nbsp;<span class="op" id="2239258">=</span>&nbsp;<span class="ident" id="2239260"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239261">.</span><span class="ident" id="2239262">h</span><span class="op" id="2239263">(</span><span class="ident" id="2239264"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239265">.</span><span class="ident" id="2239266">imax</span>&nbsp;<span class="op" id="2239271">+</span>&nbsp;<span class="num" id="2239273">0.5</span><span class="op" id="2239276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239279"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239280">.</span><span class="ident" id="2239281">hx0minusHxm</span>&nbsp;<span class="op" id="2239293">=</span>&nbsp;<span class="ident" id="2239295"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239296">.</span><span class="ident" id="2239297">h</span><span class="op" id="2239298">(</span><span class="num" id="2239299">0.5</span><span class="op" id="2239302">)</span>&nbsp;<span class="op" id="2239304">-</span>&nbsp;<span class="ident" id="2239306"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2239310">.</span><span class="ident" id="2239311">Exp</span><span class="op" id="2239314">(</span><span class="ident" id="2239315"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2239319">.</span><span class="ident" id="2239320">Log</span><span class="op" id="2239323">(</span><span class="ident" id="2239324"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239325">.</span><span class="ident" id="2239326">v</span><span class="op" id="2239327">)</span><span class="op" id="2239328">*</span><span class="op" id="2239329">(</span><span class="op" id="2239330">-</span><span class="ident" id="2239331"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239332">.</span><span class="ident" id="2239333">q</span><span class="op" id="2239334">)</span><span class="op" id="2239335">)</span>&nbsp;<span class="op" id="2239337">-</span>&nbsp;<span class="ident" id="2239339"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239340">.</span><span class="ident" id="2239341">hxm</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239346"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239347">.</span><span class="ident" id="2239348">s</span>&nbsp;<span class="op" id="2239350">=</span>&nbsp;<span class="num" id="2239352">1</span>&nbsp;<span class="op" id="2239354">-</span>&nbsp;<span class="ident" id="2239356"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239357">.</span><span class="ident" id="2239358">hinv</span><span class="op" id="2239362">(</span><span class="ident" id="2239363"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239364">.</span><span class="ident" id="2239365">h</span><span class="op" id="2239366">(</span><span class="num" id="2239367">1.5</span><span class="op" id="2239370">)</span><span class="op" id="2239371">-</span><span class="ident" id="2239372"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2239376">.</span><span class="ident" id="2239377">Exp</span><span class="op" id="2239380">(</span><span class="op" id="2239381">-</span><span class="ident" id="2239382"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239383">.</span><span class="ident" id="2239384">q</span><span class="op" id="2239385">*</span><span class="ident" id="2239386"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2239390">.</span><span class="ident" id="2239391">Log</span><span class="op" id="2239394">(</span><span class="ident" id="2239395"><a href="/math/rand/zipf.go.html#2239084">z</a></span><span class="op" id="2239396">.</span><span class="ident" id="2239397">v</span><span class="op" id="2239398">+</span><span class="num" id="2239399">1.0</span><span class="op" id="2239402">)</span><span class="op" id="2239403">)</span><span class="op" id="2239404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239407">return</span>&nbsp;<span class="ident" id="2239414"><a href="/math/rand/zipf.go.html#2239084">z</a></span><br>
<span class="lineno"></span><span class="op" id="2239416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2239419">//&nbsp;Uint64&nbsp;returns&nbsp;a&nbsp;value&nbsp;drawn&nbsp;from&nbsp;the&nbsp;Zipf&nbsp;distribution&nbsp;described</span><br>
<span class="lineno">55</span><span class="comment" id="2239488">//&nbsp;by&nbsp;the&nbsp;Zipf&nbsp;object.</span><br>
<span class="lineno"></span><span class="keyword" id="2239511">func</span>&nbsp;<span class="op" id="2239516">(</span><span class="ident" id="2239517">z</span>&nbsp;<span class="op" id="2239519">*</span><span class="ident" id="2239520"><a href="/math/rand/zipf.go.html#2238469">Zipf</a></span><span class="op" id="2239524">)</span>&nbsp;<span class="ident" id="2239526">Uint64</span><span class="op" id="2239532">(</span><span class="op" id="2239533">)</span>&nbsp;<span class="ident" id="2239535">uint64</span>&nbsp;<span class="op" id="2239542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239545">if</span>&nbsp;<span class="ident" id="2239548"><a href="/math/rand/zipf.go.html#2239517">z</a></span>&nbsp;<span class="op" id="2239550">==</span>&nbsp;<span class="ident" id="2239553">nil</span>&nbsp;<span class="op" id="2239557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2239561">panic</span><span class="op" id="2239566">(</span><span class="string" id="2239567">&#34;rand:&nbsp;nil&nbsp;Zipf&#34;</span><span class="op" id="2239583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239586">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239589">k</span>&nbsp;<span class="op" id="2239591">:=</span>&nbsp;<span class="num" id="2239594">0.0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239600">for</span>&nbsp;<span class="op" id="2239604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239608">r</span>&nbsp;<span class="op" id="2239610">:=</span>&nbsp;<span class="ident" id="2239613"><a href="/math/rand/zipf.go.html#2239517">z</a></span><span class="op" id="2239614">.</span><span class="ident" id="2239615">r</span><span class="op" id="2239616">.</span><span class="ident" id="2239617">Float64</span><span class="op" id="2239624">(</span><span class="op" id="2239625">)</span>&nbsp;<span class="comment" id="2239627">//&nbsp;r&nbsp;on&nbsp;[0,1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239643">ur</span>&nbsp;<span class="op" id="2239646">:=</span>&nbsp;<span class="ident" id="2239649"><a href="/math/rand/zipf.go.html#2239517">z</a></span><span class="op" id="2239650">.</span><span class="ident" id="2239651">hxm</span>&nbsp;<span class="op" id="2239655">+</span>&nbsp;<span class="ident" id="2239657"><a href="/math/rand/zipf.go.html#2239608">r</a></span><span class="op" id="2239658">*</span><span class="ident" id="2239659"><a href="/math/rand/zipf.go.html#2239517">z</a></span><span class="op" id="2239660">.</span><span class="ident" id="2239661">hx0minusHxm</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239675">x</span>&nbsp;<span class="op" id="2239677">:=</span>&nbsp;<span class="ident" id="2239680"><a href="/math/rand/zipf.go.html#2239517">z</a></span><span class="op" id="2239681">.</span><span class="ident" id="2239682">hinv</span><span class="op" id="2239686">(</span><span class="ident" id="2239687"><a href="/math/rand/zipf.go.html#2239643">ur</a></span><span class="op" id="2239689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239693"><a href="/math/rand/zipf.go.html#2239589">k</a></span>&nbsp;<span class="op" id="2239695">=</span>&nbsp;<span class="ident" id="2239697"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2239701">.</span><span class="ident" id="2239702">Floor</span><span class="op" id="2239707">(</span><span class="ident" id="2239708"><a href="/math/rand/zipf.go.html#2239675">x</a></span>&nbsp;<span class="op" id="2239710">+</span>&nbsp;<span class="num" id="2239712">0.5</span><span class="op" id="2239715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239719">if</span>&nbsp;<span class="ident" id="2239722"><a href="/math/rand/zipf.go.html#2239589">k</a></span><span class="op" id="2239723">-</span><span class="ident" id="2239724"><a href="/math/rand/zipf.go.html#2239675">x</a></span>&nbsp;<span class="op" id="2239726">&lt;=</span>&nbsp;<span class="ident" id="2239729"><a href="/math/rand/zipf.go.html#2239517">z</a></span><span class="op" id="2239730">.</span><span class="ident" id="2239731">s</span>&nbsp;<span class="op" id="2239733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239738">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239746">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239750">if</span>&nbsp;<span class="ident" id="2239753"><a href="/math/rand/zipf.go.html#2239643">ur</a></span>&nbsp;<span class="op" id="2239756">&gt;=</span>&nbsp;<span class="ident" id="2239759"><a href="/math/rand/zipf.go.html#2239517">z</a></span><span class="op" id="2239760">.</span><span class="ident" id="2239761">h</span><span class="op" id="2239762">(</span><span class="ident" id="2239763"><a href="/math/rand/zipf.go.html#2239589">k</a></span><span class="op" id="2239764">+</span><span class="num" id="2239765">0.5</span><span class="op" id="2239768">)</span><span class="op" id="2239769">-</span><span class="ident" id="2239770"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2239774">.</span><span class="ident" id="2239775">Exp</span><span class="op" id="2239778">(</span><span class="op" id="2239779">-</span><span class="ident" id="2239780"><a href="/math/rand/zipf.go.html#2238409">math</a></span><span class="op" id="2239784">.</span><span class="ident" id="2239785">Log</span><span class="op" id="2239788">(</span><span class="ident" id="2239789"><a href="/math/rand/zipf.go.html#2239589">k</a></span><span class="op" id="2239790">+</span><span class="ident" id="2239791"><a href="/math/rand/zipf.go.html#2239517">z</a></span><span class="op" id="2239792">.</span><span class="ident" id="2239793">v</span><span class="op" id="2239794">)</span><span class="op" id="2239795">*</span><span class="ident" id="2239796"><a href="/math/rand/zipf.go.html#2239517">z</a></span><span class="op" id="2239797">.</span><span class="ident" id="2239798">q</span><span class="op" id="2239799">)</span>&nbsp;<span class="op" id="2239801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239806">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239820">return</span>&nbsp;<span class="ident" id="2239827">uint64</span><span class="op" id="2239833">(</span><span class="ident" id="2239834"><a href="/math/rand/zipf.go.html#2239589">k</a></span><span class="op" id="2239835">)</span><br>
<span class="lineno">75</span><span class="op" id="2239837">}</span>
</div>
</body>
</html>
