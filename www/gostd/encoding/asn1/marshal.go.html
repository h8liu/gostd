<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4114990">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4115045">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4115099">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4115150">package</span>&nbsp;<span class="ident" id="4115158">asn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4115164">import</span>&nbsp;<span class="op" id="4115171">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4115174">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4115183">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4115193">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4115200">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4115206">&#34;math/big&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4115218">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4115229">&#34;time&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4115237">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4115252">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4115255">//&nbsp;A&nbsp;forkableWriter&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;buffer&nbsp;that&nbsp;can&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4115310">//&nbsp;&#39;forked&#39;&nbsp;to&nbsp;create&nbsp;new&nbsp;forkableWriters&nbsp;that&nbsp;bracket&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="4115369">//&nbsp;original.&nbsp;&nbsp;After</span><br>
<span class="lineno"></span><span class="comment" id="4115389">//&nbsp;&nbsp;&nbsp;&nbsp;pre,&nbsp;post&nbsp;:=&nbsp;w.fork();</span><br>
<span class="lineno"></span><span class="comment" id="4115418">//&nbsp;the&nbsp;overall&nbsp;sequence&nbsp;of&nbsp;bytes&nbsp;represented&nbsp;is&nbsp;logically&nbsp;w+pre+post.</span><br>
<span class="lineno"></span><span class="keyword" id="4115488">type</span>&nbsp;<span class="ident" id="4115493">forkableWriter</span>&nbsp;<span class="keyword" id="4115508">struct</span>&nbsp;<span class="op" id="4115515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4115518">*</span><span class="ident" id="4115519">bytes</span><span class="op" id="4115524">.</span><span class="ident" id="4115525">Buffer</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4115533">pre</span><span class="op" id="4115536">,</span>&nbsp;<span class="ident" id="4115538">post</span>&nbsp;<span class="op" id="4115543">*</span><span class="ident" id="4115544">forkableWriter</span><br>
<span class="lineno"></span><span class="op" id="4115559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4115562">func</span>&nbsp;<span class="ident" id="4115567">newForkableWriter</span><span class="op" id="4115584">(</span><span class="op" id="4115585">)</span>&nbsp;<span class="op" id="4115587">*</span><span class="ident" id="4115588">forkableWriter</span>&nbsp;<span class="op" id="4115603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4115606">return</span>&nbsp;<span class="op" id="4115613">&amp;</span><span class="ident" id="4115614">forkableWriter</span><span class="op" id="4115628">{</span><span class="builtinfunc" id="4115629">new</span><span class="op" id="4115632">(</span><span class="ident" id="4115633">bytes</span><span class="op" id="4115638">.</span><span class="ident" id="4115639">Buffer</span><span class="op" id="4115645">)</span><span class="op" id="4115646">,</span>&nbsp;<span class="ident" id="4115648">nil</span><span class="op" id="4115651">,</span>&nbsp;<span class="ident" id="4115653">nil</span><span class="op" id="4115656">}</span><br>
<span class="lineno">30</span><span class="op" id="4115658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4115661">func</span>&nbsp;<span class="op" id="4115666">(</span><span class="ident" id="4115667">f</span>&nbsp;<span class="op" id="4115669">*</span><span class="ident" id="4115670">forkableWriter</span><span class="op" id="4115684">)</span>&nbsp;<span class="ident" id="4115686">fork</span><span class="op" id="4115690">(</span><span class="op" id="4115691">)</span>&nbsp;<span class="op" id="4115693">(</span><span class="ident" id="4115694">pre</span><span class="op" id="4115697">,</span>&nbsp;<span class="ident" id="4115699">post</span>&nbsp;<span class="op" id="4115704">*</span><span class="ident" id="4115705">forkableWriter</span><span class="op" id="4115719">)</span>&nbsp;<span class="op" id="4115721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4115724">if</span>&nbsp;<span class="ident" id="4115727">f</span><span class="op" id="4115728">.</span><span class="ident" id="4115729">pre</span>&nbsp;<span class="op" id="4115733">!=</span>&nbsp;<span class="ident" id="4115736">nil</span>&nbsp;<span class="op" id="4115740">||</span>&nbsp;<span class="ident" id="4115743">f</span><span class="op" id="4115744">.</span><span class="ident" id="4115745">post</span>&nbsp;<span class="op" id="4115750">!=</span>&nbsp;<span class="ident" id="4115753">nil</span>&nbsp;<span class="op" id="4115757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4115761">panic</span><span class="op" id="4115766">(</span><span class="string" id="4115767">&#34;have&nbsp;already&nbsp;forked&#34;</span><span class="op" id="4115788">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4115791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4115794">f</span><span class="op" id="4115795">.</span><span class="ident" id="4115796">pre</span>&nbsp;<span class="op" id="4115800">=</span>&nbsp;<span class="ident" id="4115802">newForkableWriter</span><span class="op" id="4115819">(</span><span class="op" id="4115820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4115823">f</span><span class="op" id="4115824">.</span><span class="ident" id="4115825">post</span>&nbsp;<span class="op" id="4115830">=</span>&nbsp;<span class="ident" id="4115832">newForkableWriter</span><span class="op" id="4115849">(</span><span class="op" id="4115850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4115853">return</span>&nbsp;<span class="ident" id="4115860">f</span><span class="op" id="4115861">.</span><span class="ident" id="4115862">pre</span><span class="op" id="4115865">,</span>&nbsp;<span class="ident" id="4115867">f</span><span class="op" id="4115868">.</span><span class="ident" id="4115869">post</span><br>
<span class="lineno"></span><span class="op" id="4115874">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="4115877">func</span>&nbsp;<span class="op" id="4115882">(</span><span class="ident" id="4115883">f</span>&nbsp;<span class="op" id="4115885">*</span><span class="ident" id="4115886">forkableWriter</span><span class="op" id="4115900">)</span>&nbsp;<span class="ident" id="4115902">Len</span><span class="op" id="4115905">(</span><span class="op" id="4115906">)</span>&nbsp;<span class="op" id="4115908">(</span><span class="ident" id="4115909">l</span>&nbsp;<span class="builtintype" id="4115911">int</span><span class="op" id="4115914">)</span>&nbsp;<span class="op" id="4115916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4115919">l</span>&nbsp;<span class="op" id="4115921">+=</span>&nbsp;<span class="ident" id="4115924">f</span><span class="op" id="4115925">.</span><span class="ident" id="4115926">Buffer</span><span class="op" id="4115932">.</span><span class="ident" id="4115933">Len</span><span class="op" id="4115936">(</span><span class="op" id="4115937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4115940">if</span>&nbsp;<span class="ident" id="4115943">f</span><span class="op" id="4115944">.</span><span class="ident" id="4115945">pre</span>&nbsp;<span class="op" id="4115949">!=</span>&nbsp;<span class="ident" id="4115952">nil</span>&nbsp;<span class="op" id="4115956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4115960">l</span>&nbsp;<span class="op" id="4115962">+=</span>&nbsp;<span class="ident" id="4115965">f</span><span class="op" id="4115966">.</span><span class="ident" id="4115967">pre</span><span class="op" id="4115970">.</span><span class="ident" id="4115971">Len</span><span class="op" id="4115974">(</span><span class="op" id="4115975">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4115978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4115981">if</span>&nbsp;<span class="ident" id="4115984">f</span><span class="op" id="4115985">.</span><span class="ident" id="4115986">post</span>&nbsp;<span class="op" id="4115991">!=</span>&nbsp;<span class="ident" id="4115994">nil</span>&nbsp;<span class="op" id="4115998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116002">l</span>&nbsp;<span class="op" id="4116004">+=</span>&nbsp;<span class="ident" id="4116007">f</span><span class="op" id="4116008">.</span><span class="ident" id="4116009">post</span><span class="op" id="4116013">.</span><span class="ident" id="4116014">Len</span><span class="op" id="4116017">(</span><span class="op" id="4116018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116024">return</span><br>
<span class="lineno">50</span><span class="op" id="4116031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4116034">func</span>&nbsp;<span class="op" id="4116039">(</span><span class="ident" id="4116040">f</span>&nbsp;<span class="op" id="4116042">*</span><span class="ident" id="4116043">forkableWriter</span><span class="op" id="4116057">)</span>&nbsp;<span class="ident" id="4116059">writeTo</span><span class="op" id="4116066">(</span><span class="ident" id="4116067">out</span>&nbsp;<span class="ident" id="4116071">io</span><span class="op" id="4116073">.</span><span class="ident" id="4116074">Writer</span><span class="op" id="4116080">)</span>&nbsp;<span class="op" id="4116082">(</span><span class="ident" id="4116083">n</span>&nbsp;<span class="builtintype" id="4116085">int</span><span class="op" id="4116088">,</span>&nbsp;<span class="ident" id="4116090">err</span>&nbsp;<span class="builtintype" id="4116094">error</span><span class="op" id="4116099">)</span>&nbsp;<span class="op" id="4116101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116104">n</span><span class="op" id="4116105">,</span>&nbsp;<span class="ident" id="4116107">err</span>&nbsp;<span class="op" id="4116111">=</span>&nbsp;<span class="ident" id="4116113">out</span><span class="op" id="4116116">.</span><span class="ident" id="4116117">Write</span><span class="op" id="4116122">(</span><span class="ident" id="4116123">f</span><span class="op" id="4116124">.</span><span class="ident" id="4116125">Bytes</span><span class="op" id="4116130">(</span><span class="op" id="4116131">)</span><span class="op" id="4116132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116135">if</span>&nbsp;<span class="ident" id="4116138">err</span>&nbsp;<span class="op" id="4116142">!=</span>&nbsp;<span class="ident" id="4116145">nil</span>&nbsp;<span class="op" id="4116149">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116153">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116165">var</span>&nbsp;<span class="ident" id="4116169">nn</span>&nbsp;<span class="builtintype" id="4116172">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116178">if</span>&nbsp;<span class="ident" id="4116181">f</span><span class="op" id="4116182">.</span><span class="ident" id="4116183">pre</span>&nbsp;<span class="op" id="4116187">!=</span>&nbsp;<span class="ident" id="4116190">nil</span>&nbsp;<span class="op" id="4116194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116198">nn</span><span class="op" id="4116200">,</span>&nbsp;<span class="ident" id="4116202">err</span>&nbsp;<span class="op" id="4116206">=</span>&nbsp;<span class="ident" id="4116208">f</span><span class="op" id="4116209">.</span><span class="ident" id="4116210">pre</span><span class="op" id="4116213">.</span><span class="ident" id="4116214">writeTo</span><span class="op" id="4116221">(</span><span class="ident" id="4116222">out</span><span class="op" id="4116225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116229">n</span>&nbsp;<span class="op" id="4116231">+=</span>&nbsp;<span class="ident" id="4116234">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116239">if</span>&nbsp;<span class="ident" id="4116242">err</span>&nbsp;<span class="op" id="4116246">!=</span>&nbsp;<span class="ident" id="4116249">nil</span>&nbsp;<span class="op" id="4116253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116258">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116274">if</span>&nbsp;<span class="ident" id="4116277">f</span><span class="op" id="4116278">.</span><span class="ident" id="4116279">post</span>&nbsp;<span class="op" id="4116284">!=</span>&nbsp;<span class="ident" id="4116287">nil</span>&nbsp;<span class="op" id="4116291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116295">nn</span><span class="op" id="4116297">,</span>&nbsp;<span class="ident" id="4116299">err</span>&nbsp;<span class="op" id="4116303">=</span>&nbsp;<span class="ident" id="4116305">f</span><span class="op" id="4116306">.</span><span class="ident" id="4116307">post</span><span class="op" id="4116311">.</span><span class="ident" id="4116312">writeTo</span><span class="op" id="4116319">(</span><span class="ident" id="4116320">out</span><span class="op" id="4116323">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116327">n</span>&nbsp;<span class="op" id="4116329">+=</span>&nbsp;<span class="ident" id="4116332">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116339">return</span><br>
<span class="lineno"></span><span class="op" id="4116346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="4116349">func</span>&nbsp;<span class="ident" id="4116354">marshalBase128Int</span><span class="op" id="4116371">(</span><span class="ident" id="4116372">out</span>&nbsp;<span class="op" id="4116376">*</span><span class="ident" id="4116377">forkableWriter</span><span class="op" id="4116391">,</span>&nbsp;<span class="ident" id="4116393">n</span>&nbsp;<span class="ident" id="4116395">int64</span><span class="op" id="4116400">)</span>&nbsp;<span class="op" id="4116402">(</span><span class="ident" id="4116403">err</span>&nbsp;<span class="builtintype" id="4116407">error</span><span class="op" id="4116412">)</span>&nbsp;<span class="op" id="4116414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116417">if</span>&nbsp;<span class="ident" id="4116420">n</span>&nbsp;<span class="op" id="4116422">==</span>&nbsp;<span class="num" id="4116425">0</span>&nbsp;<span class="op" id="4116427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116431">err</span>&nbsp;<span class="op" id="4116435">=</span>&nbsp;<span class="ident" id="4116437">out</span><span class="op" id="4116440">.</span><span class="ident" id="4116441">WriteByte</span><span class="op" id="4116450">(</span><span class="num" id="4116451">0</span><span class="op" id="4116452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116456">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116464">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116468">l</span>&nbsp;<span class="op" id="4116470">:=</span>&nbsp;<span class="num" id="4116473">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116476">for</span>&nbsp;<span class="ident" id="4116480">i</span>&nbsp;<span class="op" id="4116482">:=</span>&nbsp;<span class="ident" id="4116485">n</span><span class="op" id="4116486">;</span>&nbsp;<span class="ident" id="4116488">i</span>&nbsp;<span class="op" id="4116490">&gt;</span>&nbsp;<span class="num" id="4116492">0</span><span class="op" id="4116493">;</span>&nbsp;<span class="ident" id="4116495">i</span>&nbsp;<span class="op" id="4116497">&gt;&gt;=</span>&nbsp;<span class="num" id="4116501">7</span>&nbsp;<span class="op" id="4116503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116507">l</span><span class="op" id="4116508">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116512">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116516">for</span>&nbsp;<span class="ident" id="4116520">i</span>&nbsp;<span class="op" id="4116522">:=</span>&nbsp;<span class="ident" id="4116525">l</span>&nbsp;<span class="op" id="4116527">-</span>&nbsp;<span class="num" id="4116529">1</span><span class="op" id="4116530">;</span>&nbsp;<span class="ident" id="4116532">i</span>&nbsp;<span class="op" id="4116534">&gt;=</span>&nbsp;<span class="num" id="4116537">0</span><span class="op" id="4116538">;</span>&nbsp;<span class="ident" id="4116540">i</span><span class="op" id="4116541">--</span>&nbsp;<span class="op" id="4116544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116548">o</span>&nbsp;<span class="op" id="4116550">:=</span>&nbsp;<span class="builtintype" id="4116553">byte</span><span class="op" id="4116557">(</span><span class="ident" id="4116558">n</span>&nbsp;<span class="op" id="4116560">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4116563">uint</span><span class="op" id="4116567">(</span><span class="ident" id="4116568">i</span><span class="op" id="4116569">*</span><span class="num" id="4116570">7</span><span class="op" id="4116571">)</span><span class="op" id="4116572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116576">o</span>&nbsp;<span class="op" id="4116578">&amp;=</span>&nbsp;<span class="num" id="4116581">0x7f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116588">if</span>&nbsp;<span class="ident" id="4116591">i</span>&nbsp;<span class="op" id="4116593">!=</span>&nbsp;<span class="num" id="4116596">0</span>&nbsp;<span class="op" id="4116598">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116603">o</span>&nbsp;<span class="op" id="4116605">|=</span>&nbsp;<span class="num" id="4116608">0x80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116619">err</span>&nbsp;<span class="op" id="4116623">=</span>&nbsp;<span class="ident" id="4116625">out</span><span class="op" id="4116628">.</span><span class="ident" id="4116629">WriteByte</span><span class="op" id="4116638">(</span><span class="ident" id="4116639">o</span><span class="op" id="4116640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116644">if</span>&nbsp;<span class="ident" id="4116647">err</span>&nbsp;<span class="op" id="4116651">!=</span>&nbsp;<span class="ident" id="4116654">nil</span>&nbsp;<span class="op" id="4116658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116663">return</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116679">return</span>&nbsp;<span class="ident" id="4116686">nil</span><br>
<span class="lineno"></span><span class="op" id="4116690">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="4116693">func</span>&nbsp;<span class="ident" id="4116698">marshalInt64</span><span class="op" id="4116710">(</span><span class="ident" id="4116711">out</span>&nbsp;<span class="op" id="4116715">*</span><span class="ident" id="4116716">forkableWriter</span><span class="op" id="4116730">,</span>&nbsp;<span class="ident" id="4116732">i</span>&nbsp;<span class="ident" id="4116734">int64</span><span class="op" id="4116739">)</span>&nbsp;<span class="op" id="4116741">(</span><span class="ident" id="4116742">err</span>&nbsp;<span class="builtintype" id="4116746">error</span><span class="op" id="4116751">)</span>&nbsp;<span class="op" id="4116753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116756">n</span>&nbsp;<span class="op" id="4116758">:=</span>&nbsp;<span class="ident" id="4116761">int64Length</span><span class="op" id="4116772">(</span><span class="ident" id="4116773">i</span><span class="op" id="4116774">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116778">for</span>&nbsp;<span class="op" id="4116782">;</span>&nbsp;<span class="ident" id="4116784">n</span>&nbsp;<span class="op" id="4116786">&gt;</span>&nbsp;<span class="num" id="4116788">0</span><span class="op" id="4116789">;</span>&nbsp;<span class="ident" id="4116791">n</span><span class="op" id="4116792">--</span>&nbsp;<span class="op" id="4116795">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116799">err</span>&nbsp;<span class="op" id="4116803">=</span>&nbsp;<span class="ident" id="4116805">out</span><span class="op" id="4116808">.</span><span class="ident" id="4116809">WriteByte</span><span class="op" id="4116818">(</span><span class="builtintype" id="4116819">byte</span><span class="op" id="4116823">(</span><span class="ident" id="4116824">i</span>&nbsp;<span class="op" id="4116826">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4116829">uint</span><span class="op" id="4116833">(</span><span class="op" id="4116834">(</span><span class="ident" id="4116835">n</span><span class="op" id="4116836">-</span><span class="num" id="4116837">1</span><span class="op" id="4116838">)</span><span class="op" id="4116839">*</span><span class="num" id="4116840">8</span><span class="op" id="4116841">)</span><span class="op" id="4116842">)</span><span class="op" id="4116843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116847">if</span>&nbsp;<span class="ident" id="4116850">err</span>&nbsp;<span class="op" id="4116854">!=</span>&nbsp;<span class="ident" id="4116857">nil</span>&nbsp;<span class="op" id="4116861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116866">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116878">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116882">return</span>&nbsp;<span class="ident" id="4116889">nil</span><br>
<span class="lineno"></span><span class="op" id="4116893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4116896">func</span>&nbsp;<span class="ident" id="4116901">int64Length</span><span class="op" id="4116912">(</span><span class="ident" id="4116913">i</span>&nbsp;<span class="ident" id="4116915">int64</span><span class="op" id="4116920">)</span>&nbsp;<span class="op" id="4116922">(</span><span class="ident" id="4116923">numBytes</span>&nbsp;<span class="builtintype" id="4116932">int</span><span class="op" id="4116935">)</span>&nbsp;<span class="op" id="4116937">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116940">numBytes</span>&nbsp;<span class="op" id="4116949">=</span>&nbsp;<span class="num" id="4116951">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116955">for</span>&nbsp;<span class="ident" id="4116959">i</span>&nbsp;<span class="op" id="4116961">&gt;</span>&nbsp;<span class="num" id="4116963">127</span>&nbsp;<span class="op" id="4116967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116971">numBytes</span><span class="op" id="4116979">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4116984">i</span>&nbsp;<span class="op" id="4116986">&gt;&gt;=</span>&nbsp;<span class="num" id="4116990">8</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4116993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4116997">for</span>&nbsp;<span class="ident" id="4117001">i</span>&nbsp;<span class="op" id="4117003">&lt;</span>&nbsp;<span class="op" id="4117005">-</span><span class="num" id="4117006">128</span>&nbsp;<span class="op" id="4117010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117014">numBytes</span><span class="op" id="4117022">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117027">i</span>&nbsp;<span class="op" id="4117029">&gt;&gt;=</span>&nbsp;<span class="num" id="4117033">8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4117036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117040">return</span><br>
<span class="lineno"></span><span class="op" id="4117047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="4117050">func</span>&nbsp;<span class="ident" id="4117055">marshalBigInt</span><span class="op" id="4117068">(</span><span class="ident" id="4117069">out</span>&nbsp;<span class="op" id="4117073">*</span><span class="ident" id="4117074">forkableWriter</span><span class="op" id="4117088">,</span>&nbsp;<span class="ident" id="4117090">n</span>&nbsp;<span class="op" id="4117092">*</span><span class="ident" id="4117093">big</span><span class="op" id="4117096">.</span><span class="ident" id="4117097">Int</span><span class="op" id="4117100">)</span>&nbsp;<span class="op" id="4117102">(</span><span class="ident" id="4117103">err</span>&nbsp;<span class="builtintype" id="4117107">error</span><span class="op" id="4117112">)</span>&nbsp;<span class="op" id="4117114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117117">if</span>&nbsp;<span class="ident" id="4117120">n</span><span class="op" id="4117121">.</span><span class="ident" id="4117122">Sign</span><span class="op" id="4117126">(</span><span class="op" id="4117127">)</span>&nbsp;<span class="op" id="4117129">&lt;</span>&nbsp;<span class="num" id="4117131">0</span>&nbsp;<span class="op" id="4117133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4117137">//&nbsp;A&nbsp;negative&nbsp;number&nbsp;has&nbsp;to&nbsp;be&nbsp;converted&nbsp;to&nbsp;two&#39;s-complement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4117200">//&nbsp;form.&nbsp;So&nbsp;we&#39;ll&nbsp;subtract&nbsp;1&nbsp;and&nbsp;invert.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4117250">//&nbsp;most-significant-bit&nbsp;isn&#39;t&nbsp;set&nbsp;then&nbsp;we&#39;ll&nbsp;need&nbsp;to&nbsp;pad&nbsp;the</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4117313">//&nbsp;beginning&nbsp;with&nbsp;0xff&nbsp;in&nbsp;order&nbsp;to&nbsp;keep&nbsp;the&nbsp;number&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117376">nMinus1</span>&nbsp;<span class="op" id="4117384">:=</span>&nbsp;<span class="builtinfunc" id="4117387">new</span><span class="op" id="4117390">(</span><span class="ident" id="4117391">big</span><span class="op" id="4117394">.</span><span class="ident" id="4117395">Int</span><span class="op" id="4117398">)</span><span class="op" id="4117399">.</span><span class="ident" id="4117400">Neg</span><span class="op" id="4117403">(</span><span class="ident" id="4117404">n</span><span class="op" id="4117405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117409">nMinus1</span><span class="op" id="4117416">.</span><span class="ident" id="4117417">Sub</span><span class="op" id="4117420">(</span><span class="ident" id="4117421">nMinus1</span><span class="op" id="4117428">,</span>&nbsp;<span class="ident" id="4117430">bigOne</span><span class="op" id="4117436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117440">bytes</span>&nbsp;<span class="op" id="4117446">:=</span>&nbsp;<span class="ident" id="4117449">nMinus1</span><span class="op" id="4117456">.</span><span class="ident" id="4117457">Bytes</span><span class="op" id="4117462">(</span><span class="op" id="4117463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117467">for</span>&nbsp;<span class="ident" id="4117471">i</span>&nbsp;<span class="op" id="4117473">:=</span>&nbsp;<span class="keyword" id="4117476">range</span>&nbsp;<span class="ident" id="4117482">bytes</span>&nbsp;<span class="op" id="4117488">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117493">bytes</span><span class="op" id="4117498">[</span><span class="ident" id="4117499">i</span><span class="op" id="4117500">]</span>&nbsp;<span class="op" id="4117502">^=</span>&nbsp;<span class="num" id="4117505">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4117512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117516">if</span>&nbsp;<span class="builtinfunc" id="4117519">len</span><span class="op" id="4117522">(</span><span class="ident" id="4117523">bytes</span><span class="op" id="4117528">)</span>&nbsp;<span class="op" id="4117530">==</span>&nbsp;<span class="num" id="4117533">0</span>&nbsp;<span class="op" id="4117535">||</span>&nbsp;<span class="ident" id="4117538">bytes</span><span class="op" id="4117543">[</span><span class="num" id="4117544">0</span><span class="op" id="4117545">]</span><span class="op" id="4117546">&amp;</span><span class="num" id="4117547">0x80</span>&nbsp;<span class="op" id="4117552">==</span>&nbsp;<span class="num" id="4117555">0</span>&nbsp;<span class="op" id="4117557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117562">err</span>&nbsp;<span class="op" id="4117566">=</span>&nbsp;<span class="ident" id="4117568">out</span><span class="op" id="4117571">.</span><span class="ident" id="4117572">WriteByte</span><span class="op" id="4117581">(</span><span class="num" id="4117582">0xff</span><span class="op" id="4117586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117591">if</span>&nbsp;<span class="ident" id="4117594">err</span>&nbsp;<span class="op" id="4117598">!=</span>&nbsp;<span class="ident" id="4117601">nil</span>&nbsp;<span class="op" id="4117605">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117611">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4117621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4117625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117629">_</span><span class="op" id="4117630">,</span>&nbsp;<span class="ident" id="4117632">err</span>&nbsp;<span class="op" id="4117636">=</span>&nbsp;<span class="ident" id="4117638">out</span><span class="op" id="4117641">.</span><span class="ident" id="4117642">Write</span><span class="op" id="4117647">(</span><span class="ident" id="4117648">bytes</span><span class="op" id="4117653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4117656">}</span>&nbsp;<span class="keyword" id="4117658">else</span>&nbsp;<span class="keyword" id="4117663">if</span>&nbsp;<span class="ident" id="4117666">n</span><span class="op" id="4117667">.</span><span class="ident" id="4117668">Sign</span><span class="op" id="4117672">(</span><span class="op" id="4117673">)</span>&nbsp;<span class="op" id="4117675">==</span>&nbsp;<span class="num" id="4117678">0</span>&nbsp;<span class="op" id="4117680">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4117684">//&nbsp;Zero&nbsp;is&nbsp;written&nbsp;as&nbsp;a&nbsp;single&nbsp;0&nbsp;zero&nbsp;rather&nbsp;than&nbsp;no&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117746">err</span>&nbsp;<span class="op" id="4117750">=</span>&nbsp;<span class="ident" id="4117752">out</span><span class="op" id="4117755">.</span><span class="ident" id="4117756">WriteByte</span><span class="op" id="4117765">(</span><span class="num" id="4117766">0x00</span><span class="op" id="4117770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4117773">}</span>&nbsp;<span class="keyword" id="4117775">else</span>&nbsp;<span class="op" id="4117780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117784">bytes</span>&nbsp;<span class="op" id="4117790">:=</span>&nbsp;<span class="ident" id="4117793">n</span><span class="op" id="4117794">.</span><span class="ident" id="4117795">Bytes</span><span class="op" id="4117800">(</span><span class="op" id="4117801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117805">if</span>&nbsp;<span class="builtinfunc" id="4117808">len</span><span class="op" id="4117811">(</span><span class="ident" id="4117812">bytes</span><span class="op" id="4117817">)</span>&nbsp;<span class="op" id="4117819">&gt;</span>&nbsp;<span class="num" id="4117821">0</span>&nbsp;<span class="op" id="4117823">&amp;&amp;</span>&nbsp;<span class="ident" id="4117826">bytes</span><span class="op" id="4117831">[</span><span class="num" id="4117832">0</span><span class="op" id="4117833">]</span><span class="op" id="4117834">&amp;</span><span class="num" id="4117835">0x80</span>&nbsp;<span class="op" id="4117840">!=</span>&nbsp;<span class="num" id="4117843">0</span>&nbsp;<span class="op" id="4117845">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4117850">//&nbsp;We&#39;ll&nbsp;have&nbsp;to&nbsp;pad&nbsp;this&nbsp;with&nbsp;0x00&nbsp;in&nbsp;order&nbsp;to&nbsp;stop&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4117909">//&nbsp;looking&nbsp;like&nbsp;a&nbsp;negative&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4117947">err</span>&nbsp;<span class="op" id="4117951">=</span>&nbsp;<span class="ident" id="4117953">out</span><span class="op" id="4117956">.</span><span class="ident" id="4117957">WriteByte</span><span class="op" id="4117966">(</span><span class="num" id="4117967">0</span><span class="op" id="4117968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117973">if</span>&nbsp;<span class="ident" id="4117976">err</span>&nbsp;<span class="op" id="4117980">!=</span>&nbsp;<span class="ident" id="4117983">nil</span>&nbsp;<span class="op" id="4117987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4117993">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118011">_</span><span class="op" id="4118012">,</span>&nbsp;<span class="ident" id="4118014">err</span>&nbsp;<span class="op" id="4118018">=</span>&nbsp;<span class="ident" id="4118020">out</span><span class="op" id="4118023">.</span><span class="ident" id="4118024">Write</span><span class="op" id="4118029">(</span><span class="ident" id="4118030">bytes</span><span class="op" id="4118035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118041">return</span><br>
<span class="lineno">165</span><span class="op" id="4118048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4118051">func</span>&nbsp;<span class="ident" id="4118056">marshalLength</span><span class="op" id="4118069">(</span><span class="ident" id="4118070">out</span>&nbsp;<span class="op" id="4118074">*</span><span class="ident" id="4118075">forkableWriter</span><span class="op" id="4118089">,</span>&nbsp;<span class="ident" id="4118091">i</span>&nbsp;<span class="builtintype" id="4118093">int</span><span class="op" id="4118096">)</span>&nbsp;<span class="op" id="4118098">(</span><span class="ident" id="4118099">err</span>&nbsp;<span class="builtintype" id="4118103">error</span><span class="op" id="4118108">)</span>&nbsp;<span class="op" id="4118110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118113">n</span>&nbsp;<span class="op" id="4118115">:=</span>&nbsp;<span class="ident" id="4118118">lengthLength</span><span class="op" id="4118130">(</span><span class="ident" id="4118131">i</span><span class="op" id="4118132">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118136">for</span>&nbsp;<span class="op" id="4118140">;</span>&nbsp;<span class="ident" id="4118142">n</span>&nbsp;<span class="op" id="4118144">&gt;</span>&nbsp;<span class="num" id="4118146">0</span><span class="op" id="4118147">;</span>&nbsp;<span class="ident" id="4118149">n</span><span class="op" id="4118150">--</span>&nbsp;<span class="op" id="4118153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118157">err</span>&nbsp;<span class="op" id="4118161">=</span>&nbsp;<span class="ident" id="4118163">out</span><span class="op" id="4118166">.</span><span class="ident" id="4118167">WriteByte</span><span class="op" id="4118176">(</span><span class="builtintype" id="4118177">byte</span><span class="op" id="4118181">(</span><span class="ident" id="4118182">i</span>&nbsp;<span class="op" id="4118184">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4118187">uint</span><span class="op" id="4118191">(</span><span class="op" id="4118192">(</span><span class="ident" id="4118193">n</span><span class="op" id="4118194">-</span><span class="num" id="4118195">1</span><span class="op" id="4118196">)</span><span class="op" id="4118197">*</span><span class="num" id="4118198">8</span><span class="op" id="4118199">)</span><span class="op" id="4118200">)</span><span class="op" id="4118201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118205">if</span>&nbsp;<span class="ident" id="4118208">err</span>&nbsp;<span class="op" id="4118212">!=</span>&nbsp;<span class="ident" id="4118215">nil</span>&nbsp;<span class="op" id="4118219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118224">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118233">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118240">return</span>&nbsp;<span class="ident" id="4118247">nil</span><br>
<span class="lineno"></span><span class="op" id="4118251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="4118254">func</span>&nbsp;<span class="ident" id="4118259">lengthLength</span><span class="op" id="4118271">(</span><span class="ident" id="4118272">i</span>&nbsp;<span class="builtintype" id="4118274">int</span><span class="op" id="4118277">)</span>&nbsp;<span class="op" id="4118279">(</span><span class="ident" id="4118280">numBytes</span>&nbsp;<span class="builtintype" id="4118289">int</span><span class="op" id="4118292">)</span>&nbsp;<span class="op" id="4118294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118297">numBytes</span>&nbsp;<span class="op" id="4118306">=</span>&nbsp;<span class="num" id="4118308">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118311">for</span>&nbsp;<span class="ident" id="4118315">i</span>&nbsp;<span class="op" id="4118317">&gt;</span>&nbsp;<span class="num" id="4118319">255</span>&nbsp;<span class="op" id="4118323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118327">numBytes</span><span class="op" id="4118335">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118340">i</span>&nbsp;<span class="op" id="4118342">&gt;&gt;=</span>&nbsp;<span class="num" id="4118346">8</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118352">return</span><br>
<span class="lineno"></span><span class="op" id="4118359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4118362">func</span>&nbsp;<span class="ident" id="4118367">marshalTagAndLength</span><span class="op" id="4118386">(</span><span class="ident" id="4118387">out</span>&nbsp;<span class="op" id="4118391">*</span><span class="ident" id="4118392">forkableWriter</span><span class="op" id="4118406">,</span>&nbsp;<span class="ident" id="4118408">t</span>&nbsp;<span class="ident" id="4118410">tagAndLength</span><span class="op" id="4118422">)</span>&nbsp;<span class="op" id="4118424">(</span><span class="ident" id="4118425">err</span>&nbsp;<span class="builtintype" id="4118429">error</span><span class="op" id="4118434">)</span>&nbsp;<span class="op" id="4118436">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118439">b</span>&nbsp;<span class="op" id="4118441">:=</span>&nbsp;<span class="builtintype" id="4118444">uint8</span><span class="op" id="4118449">(</span><span class="ident" id="4118450">t</span><span class="op" id="4118451">.</span><span class="ident" id="4118452">class</span><span class="op" id="4118457">)</span>&nbsp;<span class="op" id="4118459">&lt;&lt;</span>&nbsp;<span class="num" id="4118462">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118465">if</span>&nbsp;<span class="ident" id="4118468">t</span><span class="op" id="4118469">.</span><span class="ident" id="4118470">isCompound</span>&nbsp;<span class="op" id="4118481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118485">b</span>&nbsp;<span class="op" id="4118487">|=</span>&nbsp;<span class="num" id="4118490">0x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118499">if</span>&nbsp;<span class="ident" id="4118502">t</span><span class="op" id="4118503">.</span><span class="ident" id="4118504">tag</span>&nbsp;<span class="op" id="4118508">&gt;=</span>&nbsp;<span class="num" id="4118511">31</span>&nbsp;<span class="op" id="4118514">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118518">b</span>&nbsp;<span class="op" id="4118520">|=</span>&nbsp;<span class="num" id="4118523">0x1f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118530">err</span>&nbsp;<span class="op" id="4118534">=</span>&nbsp;<span class="ident" id="4118536">out</span><span class="op" id="4118539">.</span><span class="ident" id="4118540">WriteByte</span><span class="op" id="4118549">(</span><span class="ident" id="4118550">b</span><span class="op" id="4118551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118555">if</span>&nbsp;<span class="ident" id="4118558">err</span>&nbsp;<span class="op" id="4118562">!=</span>&nbsp;<span class="ident" id="4118565">nil</span>&nbsp;<span class="op" id="4118569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118574">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118583">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118587">err</span>&nbsp;<span class="op" id="4118591">=</span>&nbsp;<span class="ident" id="4118593">marshalBase128Int</span><span class="op" id="4118610">(</span><span class="ident" id="4118611">out</span><span class="op" id="4118614">,</span>&nbsp;<span class="ident" id="4118616">int64</span><span class="op" id="4118621">(</span><span class="ident" id="4118622">t</span><span class="op" id="4118623">.</span><span class="ident" id="4118624">tag</span><span class="op" id="4118627">)</span><span class="op" id="4118628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118632">if</span>&nbsp;<span class="ident" id="4118635">err</span>&nbsp;<span class="op" id="4118639">!=</span>&nbsp;<span class="ident" id="4118642">nil</span>&nbsp;<span class="op" id="4118646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118651">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118663">}</span>&nbsp;<span class="keyword" id="4118665">else</span>&nbsp;<span class="op" id="4118670">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118674">b</span>&nbsp;<span class="op" id="4118676">|=</span>&nbsp;<span class="builtintype" id="4118679">uint8</span><span class="op" id="4118684">(</span><span class="ident" id="4118685">t</span><span class="op" id="4118686">.</span><span class="ident" id="4118687">tag</span><span class="op" id="4118690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118694">err</span>&nbsp;<span class="op" id="4118698">=</span>&nbsp;<span class="ident" id="4118700">out</span><span class="op" id="4118703">.</span><span class="ident" id="4118704">WriteByte</span><span class="op" id="4118713">(</span><span class="ident" id="4118714">b</span><span class="op" id="4118715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118719">if</span>&nbsp;<span class="ident" id="4118722">err</span>&nbsp;<span class="op" id="4118726">!=</span>&nbsp;<span class="ident" id="4118729">nil</span>&nbsp;<span class="op" id="4118733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118738">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118747">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118754">if</span>&nbsp;<span class="ident" id="4118757">t</span><span class="op" id="4118758">.</span><span class="ident" id="4118759">length</span>&nbsp;<span class="op" id="4118766">&gt;=</span>&nbsp;<span class="num" id="4118769">128</span>&nbsp;<span class="op" id="4118773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118777">l</span>&nbsp;<span class="op" id="4118779">:=</span>&nbsp;<span class="ident" id="4118782">lengthLength</span><span class="op" id="4118794">(</span><span class="ident" id="4118795">t</span><span class="op" id="4118796">.</span><span class="ident" id="4118797">length</span><span class="op" id="4118803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118807">err</span>&nbsp;<span class="op" id="4118811">=</span>&nbsp;<span class="ident" id="4118813">out</span><span class="op" id="4118816">.</span><span class="ident" id="4118817">WriteByte</span><span class="op" id="4118826">(</span><span class="num" id="4118827">0x80</span>&nbsp;<span class="op" id="4118832">|</span>&nbsp;<span class="builtintype" id="4118834">byte</span><span class="op" id="4118838">(</span><span class="ident" id="4118839">l</span><span class="op" id="4118840">)</span><span class="op" id="4118841">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118845">if</span>&nbsp;<span class="ident" id="4118848">err</span>&nbsp;<span class="op" id="4118852">!=</span>&nbsp;<span class="ident" id="4118855">nil</span>&nbsp;<span class="op" id="4118859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118864">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118877">err</span>&nbsp;<span class="op" id="4118881">=</span>&nbsp;<span class="ident" id="4118883">marshalLength</span><span class="op" id="4118896">(</span><span class="ident" id="4118897">out</span><span class="op" id="4118900">,</span>&nbsp;<span class="ident" id="4118902">t</span><span class="op" id="4118903">.</span><span class="ident" id="4118904">length</span><span class="op" id="4118910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118914">if</span>&nbsp;<span class="ident" id="4118917">err</span>&nbsp;<span class="op" id="4118921">!=</span>&nbsp;<span class="ident" id="4118924">nil</span>&nbsp;<span class="op" id="4118928">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118933">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4118945">}</span>&nbsp;<span class="keyword" id="4118947">else</span>&nbsp;<span class="op" id="4118952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4118956">err</span>&nbsp;<span class="op" id="4118960">=</span>&nbsp;<span class="ident" id="4118962">out</span><span class="op" id="4118965">.</span><span class="ident" id="4118966">WriteByte</span><span class="op" id="4118975">(</span><span class="builtintype" id="4118976">byte</span><span class="op" id="4118980">(</span><span class="ident" id="4118981">t</span><span class="op" id="4118982">.</span><span class="ident" id="4118983">length</span><span class="op" id="4118989">)</span><span class="op" id="4118990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4118994">if</span>&nbsp;<span class="ident" id="4118997">err</span>&nbsp;<span class="op" id="4119001">!=</span>&nbsp;<span class="ident" id="4119004">nil</span>&nbsp;<span class="op" id="4119008">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119013">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119029">return</span>&nbsp;<span class="ident" id="4119036">nil</span><br>
<span class="lineno">230</span><span class="op" id="4119040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4119043">func</span>&nbsp;<span class="ident" id="4119048">marshalBitString</span><span class="op" id="4119064">(</span><span class="ident" id="4119065">out</span>&nbsp;<span class="op" id="4119069">*</span><span class="ident" id="4119070">forkableWriter</span><span class="op" id="4119084">,</span>&nbsp;<span class="ident" id="4119086">b</span>&nbsp;<span class="ident" id="4119088">BitString</span><span class="op" id="4119097">)</span>&nbsp;<span class="op" id="4119099">(</span><span class="ident" id="4119100">err</span>&nbsp;<span class="builtintype" id="4119104">error</span><span class="op" id="4119109">)</span>&nbsp;<span class="op" id="4119111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4119114">paddingBits</span>&nbsp;<span class="op" id="4119126">:=</span>&nbsp;<span class="builtintype" id="4119129">byte</span><span class="op" id="4119133">(</span><span class="op" id="4119134">(</span><span class="num" id="4119135">8</span>&nbsp;<span class="op" id="4119137">-</span>&nbsp;<span class="ident" id="4119139">b</span><span class="op" id="4119140">.</span><span class="ident" id="4119141">BitLength</span><span class="op" id="4119150">%</span><span class="num" id="4119151">8</span><span class="op" id="4119152">)</span>&nbsp;<span class="op" id="4119154">%</span>&nbsp;<span class="num" id="4119156">8</span><span class="op" id="4119157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4119160">err</span>&nbsp;<span class="op" id="4119164">=</span>&nbsp;<span class="ident" id="4119166">out</span><span class="op" id="4119169">.</span><span class="ident" id="4119170">WriteByte</span><span class="op" id="4119179">(</span><span class="ident" id="4119180">paddingBits</span><span class="op" id="4119191">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119194">if</span>&nbsp;<span class="ident" id="4119197">err</span>&nbsp;<span class="op" id="4119201">!=</span>&nbsp;<span class="ident" id="4119204">nil</span>&nbsp;<span class="op" id="4119208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119212">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4119223">_</span><span class="op" id="4119224">,</span>&nbsp;<span class="ident" id="4119226">err</span>&nbsp;<span class="op" id="4119230">=</span>&nbsp;<span class="ident" id="4119232">out</span><span class="op" id="4119235">.</span><span class="ident" id="4119236">Write</span><span class="op" id="4119241">(</span><span class="ident" id="4119242">b</span><span class="op" id="4119243">.</span><span class="ident" id="4119244">Bytes</span><span class="op" id="4119249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119252">return</span><br>
<span class="lineno">240</span><span class="op" id="4119259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4119262">func</span>&nbsp;<span class="ident" id="4119267">marshalObjectIdentifier</span><span class="op" id="4119290">(</span><span class="ident" id="4119291">out</span>&nbsp;<span class="op" id="4119295">*</span><span class="ident" id="4119296">forkableWriter</span><span class="op" id="4119310">,</span>&nbsp;<span class="ident" id="4119312">oid</span>&nbsp;<span class="op" id="4119316">[</span><span class="op" id="4119317">]</span><span class="builtintype" id="4119318">int</span><span class="op" id="4119321">)</span>&nbsp;<span class="op" id="4119323">(</span><span class="ident" id="4119324">err</span>&nbsp;<span class="builtintype" id="4119328">error</span><span class="op" id="4119333">)</span>&nbsp;<span class="op" id="4119335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119338">if</span>&nbsp;<span class="builtinfunc" id="4119341">len</span><span class="op" id="4119344">(</span><span class="ident" id="4119345">oid</span><span class="op" id="4119348">)</span>&nbsp;<span class="op" id="4119350">&lt;</span>&nbsp;<span class="num" id="4119352">2</span>&nbsp;<span class="op" id="4119354">||</span>&nbsp;<span class="ident" id="4119357">oid</span><span class="op" id="4119360">[</span><span class="num" id="4119361">0</span><span class="op" id="4119362">]</span>&nbsp;<span class="op" id="4119364">&gt;</span>&nbsp;<span class="num" id="4119366">2</span>&nbsp;<span class="op" id="4119368">||</span>&nbsp;<span class="op" id="4119371">(</span><span class="ident" id="4119372">oid</span><span class="op" id="4119375">[</span><span class="num" id="4119376">0</span><span class="op" id="4119377">]</span>&nbsp;<span class="op" id="4119379">&lt;</span>&nbsp;<span class="num" id="4119381">2</span>&nbsp;<span class="op" id="4119383">&amp;&amp;</span>&nbsp;<span class="ident" id="4119386">oid</span><span class="op" id="4119389">[</span><span class="num" id="4119390">1</span><span class="op" id="4119391">]</span>&nbsp;<span class="op" id="4119393">&gt;=</span>&nbsp;<span class="num" id="4119396">40</span><span class="op" id="4119398">)</span>&nbsp;<span class="op" id="4119400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119404">return</span>&nbsp;<span class="ident" id="4119411">StructuralError</span><span class="op" id="4119426">{</span><span class="string" id="4119427">&#34;invalid&nbsp;object&nbsp;identifier&#34;</span><span class="op" id="4119454">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4119461">err</span>&nbsp;<span class="op" id="4119465">=</span>&nbsp;<span class="ident" id="4119467">marshalBase128Int</span><span class="op" id="4119484">(</span><span class="ident" id="4119485">out</span><span class="op" id="4119488">,</span>&nbsp;<span class="ident" id="4119490">int64</span><span class="op" id="4119495">(</span><span class="ident" id="4119496">oid</span><span class="op" id="4119499">[</span><span class="num" id="4119500">0</span><span class="op" id="4119501">]</span><span class="op" id="4119502">*</span><span class="num" id="4119503">40</span><span class="op" id="4119505">+</span><span class="ident" id="4119506">oid</span><span class="op" id="4119509">[</span><span class="num" id="4119510">1</span><span class="op" id="4119511">]</span><span class="op" id="4119512">)</span><span class="op" id="4119513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119516">if</span>&nbsp;<span class="ident" id="4119519">err</span>&nbsp;<span class="op" id="4119523">!=</span>&nbsp;<span class="ident" id="4119526">nil</span>&nbsp;<span class="op" id="4119530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119534">return</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119545">for</span>&nbsp;<span class="ident" id="4119549">i</span>&nbsp;<span class="op" id="4119551">:=</span>&nbsp;<span class="num" id="4119554">2</span><span class="op" id="4119555">;</span>&nbsp;<span class="ident" id="4119557">i</span>&nbsp;<span class="op" id="4119559">&lt;</span>&nbsp;<span class="builtinfunc" id="4119561">len</span><span class="op" id="4119564">(</span><span class="ident" id="4119565">oid</span><span class="op" id="4119568">)</span><span class="op" id="4119569">;</span>&nbsp;<span class="ident" id="4119571">i</span><span class="op" id="4119572">++</span>&nbsp;<span class="op" id="4119575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4119579">err</span>&nbsp;<span class="op" id="4119583">=</span>&nbsp;<span class="ident" id="4119585">marshalBase128Int</span><span class="op" id="4119602">(</span><span class="ident" id="4119603">out</span><span class="op" id="4119606">,</span>&nbsp;<span class="ident" id="4119608">int64</span><span class="op" id="4119613">(</span><span class="ident" id="4119614">oid</span><span class="op" id="4119617">[</span><span class="ident" id="4119618">i</span><span class="op" id="4119619">]</span><span class="op" id="4119620">)</span><span class="op" id="4119621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119625">if</span>&nbsp;<span class="ident" id="4119628">err</span>&nbsp;<span class="op" id="4119632">!=</span>&nbsp;<span class="ident" id="4119635">nil</span>&nbsp;<span class="op" id="4119639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119644">return</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119660">return</span><br>
<span class="lineno"></span><span class="op" id="4119667">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4119670">func</span>&nbsp;<span class="ident" id="4119675">marshalPrintableString</span><span class="op" id="4119697">(</span><span class="ident" id="4119698">out</span>&nbsp;<span class="op" id="4119702">*</span><span class="ident" id="4119703">forkableWriter</span><span class="op" id="4119717">,</span>&nbsp;<span class="ident" id="4119719">s</span>&nbsp;<span class="builtintype" id="4119721">string</span><span class="op" id="4119727">)</span>&nbsp;<span class="op" id="4119729">(</span><span class="ident" id="4119730">err</span>&nbsp;<span class="builtintype" id="4119734">error</span><span class="op" id="4119739">)</span>&nbsp;<span class="op" id="4119741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4119744">b</span>&nbsp;<span class="op" id="4119746">:=</span>&nbsp;<span class="op" id="4119749">[</span><span class="op" id="4119750">]</span><span class="builtintype" id="4119751">byte</span><span class="op" id="4119755">(</span><span class="ident" id="4119756">s</span><span class="op" id="4119757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119760">for</span>&nbsp;<span class="ident" id="4119764">_</span><span class="op" id="4119765">,</span>&nbsp;<span class="ident" id="4119767">c</span>&nbsp;<span class="op" id="4119769">:=</span>&nbsp;<span class="keyword" id="4119772">range</span>&nbsp;<span class="ident" id="4119778">b</span>&nbsp;<span class="op" id="4119780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119784">if</span>&nbsp;<span class="op" id="4119787">!</span><span class="ident" id="4119788">isPrintable</span><span class="op" id="4119799">(</span><span class="ident" id="4119800">c</span><span class="op" id="4119801">)</span>&nbsp;<span class="op" id="4119803">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119808">return</span>&nbsp;<span class="ident" id="4119815">StructuralError</span><span class="op" id="4119830">{</span><span class="string" id="4119831">&#34;PrintableString&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4119875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4119882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4119886">_</span><span class="op" id="4119887">,</span>&nbsp;<span class="ident" id="4119889">err</span>&nbsp;<span class="op" id="4119893">=</span>&nbsp;<span class="ident" id="4119895">out</span><span class="op" id="4119898">.</span><span class="ident" id="4119899">Write</span><span class="op" id="4119904">(</span><span class="ident" id="4119905">b</span><span class="op" id="4119906">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4119909">return</span><br>
<span class="lineno"></span><span class="op" id="4119916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4119919">func</span>&nbsp;<span class="ident" id="4119924">marshalIA5String</span><span class="op" id="4119940">(</span><span class="ident" id="4119941">out</span>&nbsp;<span class="op" id="4119945">*</span><span class="ident" id="4119946">forkableWriter</span><span class="op" id="4119960">,</span>&nbsp;<span class="ident" id="4119962">s</span>&nbsp;<span class="builtintype" id="4119964">string</span><span class="op" id="4119970">)</span>&nbsp;<span class="op" id="4119972">(</span><span class="ident" id="4119973">err</span>&nbsp;<span class="builtintype" id="4119977">error</span><span class="op" id="4119982">)</span>&nbsp;<span class="op" id="4119984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4119987">b</span>&nbsp;<span class="op" id="4119989">:=</span>&nbsp;<span class="op" id="4119992">[</span><span class="op" id="4119993">]</span><span class="builtintype" id="4119994">byte</span><span class="op" id="4119998">(</span><span class="ident" id="4119999">s</span><span class="op" id="4120000">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120003">for</span>&nbsp;<span class="ident" id="4120007">_</span><span class="op" id="4120008">,</span>&nbsp;<span class="ident" id="4120010">c</span>&nbsp;<span class="op" id="4120012">:=</span>&nbsp;<span class="keyword" id="4120015">range</span>&nbsp;<span class="ident" id="4120021">b</span>&nbsp;<span class="op" id="4120023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120027">if</span>&nbsp;<span class="ident" id="4120030">c</span>&nbsp;<span class="op" id="4120032">&gt;</span>&nbsp;<span class="num" id="4120034">127</span>&nbsp;<span class="op" id="4120038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120043">return</span>&nbsp;<span class="ident" id="4120050">StructuralError</span><span class="op" id="4120065">{</span><span class="string" id="4120066">&#34;IA5String&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4120104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4120108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4120111">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120115">_</span><span class="op" id="4120116">,</span>&nbsp;<span class="ident" id="4120118">err</span>&nbsp;<span class="op" id="4120122">=</span>&nbsp;<span class="ident" id="4120124">out</span><span class="op" id="4120127">.</span><span class="ident" id="4120128">Write</span><span class="op" id="4120133">(</span><span class="ident" id="4120134">b</span><span class="op" id="4120135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120138">return</span><br>
<span class="lineno"></span><span class="op" id="4120145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4120148">func</span>&nbsp;<span class="ident" id="4120153">marshalUTF8String</span><span class="op" id="4120170">(</span><span class="ident" id="4120171">out</span>&nbsp;<span class="op" id="4120175">*</span><span class="ident" id="4120176">forkableWriter</span><span class="op" id="4120190">,</span>&nbsp;<span class="ident" id="4120192">s</span>&nbsp;<span class="builtintype" id="4120194">string</span><span class="op" id="4120200">)</span>&nbsp;<span class="op" id="4120202">(</span><span class="ident" id="4120203">err</span>&nbsp;<span class="builtintype" id="4120207">error</span><span class="op" id="4120212">)</span>&nbsp;<span class="op" id="4120214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120217">_</span><span class="op" id="4120218">,</span>&nbsp;<span class="ident" id="4120220">err</span>&nbsp;<span class="op" id="4120224">=</span>&nbsp;<span class="ident" id="4120226">out</span><span class="op" id="4120229">.</span><span class="ident" id="4120230">Write</span><span class="op" id="4120235">(</span><span class="op" id="4120236">[</span><span class="op" id="4120237">]</span><span class="builtintype" id="4120238">byte</span><span class="op" id="4120242">(</span><span class="ident" id="4120243">s</span><span class="op" id="4120244">)</span><span class="op" id="4120245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120248">return</span><br>
<span class="lineno"></span><span class="op" id="4120255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4120258">func</span>&nbsp;<span class="ident" id="4120263">marshalTwoDigits</span><span class="op" id="4120279">(</span><span class="ident" id="4120280">out</span>&nbsp;<span class="op" id="4120284">*</span><span class="ident" id="4120285">forkableWriter</span><span class="op" id="4120299">,</span>&nbsp;<span class="ident" id="4120301">v</span>&nbsp;<span class="builtintype" id="4120303">int</span><span class="op" id="4120306">)</span>&nbsp;<span class="op" id="4120308">(</span><span class="ident" id="4120309">err</span>&nbsp;<span class="builtintype" id="4120313">error</span><span class="op" id="4120318">)</span>&nbsp;<span class="op" id="4120320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120323">err</span>&nbsp;<span class="op" id="4120327">=</span>&nbsp;<span class="ident" id="4120329">out</span><span class="op" id="4120332">.</span><span class="ident" id="4120333">WriteByte</span><span class="op" id="4120342">(</span><span class="builtintype" id="4120343">byte</span><span class="op" id="4120347">(</span><span class="string" id="4120348">&#39;0&#39;</span>&nbsp;<span class="op" id="4120352">+</span>&nbsp;<span class="op" id="4120354">(</span><span class="ident" id="4120355">v</span><span class="op" id="4120356">/</span><span class="num" id="4120357">10</span><span class="op" id="4120359">)</span><span class="op" id="4120360">%</span><span class="num" id="4120361">10</span><span class="op" id="4120363">)</span><span class="op" id="4120364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120367">if</span>&nbsp;<span class="ident" id="4120370">err</span>&nbsp;<span class="op" id="4120374">!=</span>&nbsp;<span class="ident" id="4120377">nil</span>&nbsp;<span class="op" id="4120381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120385">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4120393">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120396">return</span>&nbsp;<span class="ident" id="4120403">out</span><span class="op" id="4120406">.</span><span class="ident" id="4120407">WriteByte</span><span class="op" id="4120416">(</span><span class="builtintype" id="4120417">byte</span><span class="op" id="4120421">(</span><span class="string" id="4120422">&#39;0&#39;</span>&nbsp;<span class="op" id="4120426">+</span>&nbsp;<span class="ident" id="4120428">v</span><span class="op" id="4120429">%</span><span class="num" id="4120430">10</span><span class="op" id="4120432">)</span><span class="op" id="4120433">)</span><br>
<span class="lineno"></span><span class="op" id="4120435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4120438">func</span>&nbsp;<span class="ident" id="4120443">marshalFourDigits</span><span class="op" id="4120460">(</span><span class="ident" id="4120461">out</span>&nbsp;<span class="op" id="4120465">*</span><span class="ident" id="4120466">forkableWriter</span><span class="op" id="4120480">,</span>&nbsp;<span class="ident" id="4120482">v</span>&nbsp;<span class="builtintype" id="4120484">int</span><span class="op" id="4120487">)</span>&nbsp;<span class="op" id="4120489">(</span><span class="ident" id="4120490">err</span>&nbsp;<span class="builtintype" id="4120494">error</span><span class="op" id="4120499">)</span>&nbsp;<span class="op" id="4120501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120504">var</span>&nbsp;<span class="ident" id="4120508">bytes</span>&nbsp;<span class="op" id="4120514">[</span><span class="num" id="4120515">4</span><span class="op" id="4120516">]</span><span class="builtintype" id="4120517">byte</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120523">for</span>&nbsp;<span class="ident" id="4120527">i</span>&nbsp;<span class="op" id="4120529">:=</span>&nbsp;<span class="keyword" id="4120532">range</span>&nbsp;<span class="ident" id="4120538">bytes</span>&nbsp;<span class="op" id="4120544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120548">bytes</span><span class="op" id="4120553">[</span><span class="num" id="4120554">3</span><span class="op" id="4120555">-</span><span class="ident" id="4120556">i</span><span class="op" id="4120557">]</span>&nbsp;<span class="op" id="4120559">=</span>&nbsp;<span class="string" id="4120561">&#39;0&#39;</span>&nbsp;<span class="op" id="4120565">+</span>&nbsp;<span class="builtintype" id="4120567">byte</span><span class="op" id="4120571">(</span><span class="ident" id="4120572">v</span><span class="op" id="4120573">%</span><span class="num" id="4120574">10</span><span class="op" id="4120576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120580">v</span>&nbsp;<span class="op" id="4120582">/=</span>&nbsp;<span class="num" id="4120585">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4120589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120592">_</span><span class="op" id="4120593">,</span>&nbsp;<span class="ident" id="4120595">err</span>&nbsp;<span class="op" id="4120599">=</span>&nbsp;<span class="ident" id="4120601">out</span><span class="op" id="4120604">.</span><span class="ident" id="4120605">Write</span><span class="op" id="4120610">(</span><span class="ident" id="4120611">bytes</span><span class="op" id="4120616">[</span><span class="op" id="4120617">:</span><span class="op" id="4120618">]</span><span class="op" id="4120619">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120622">return</span><br>
<span class="lineno"></span><span class="op" id="4120629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4120632">func</span>&nbsp;<span class="ident" id="4120637">outsideUTCRange</span><span class="op" id="4120652">(</span><span class="ident" id="4120653">t</span>&nbsp;<span class="ident" id="4120655">time</span><span class="op" id="4120659">.</span><span class="ident" id="4120660">Time</span><span class="op" id="4120664">)</span>&nbsp;<span class="builtintype" id="4120666">bool</span>&nbsp;<span class="op" id="4120671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120674">year</span>&nbsp;<span class="op" id="4120679">:=</span>&nbsp;<span class="ident" id="4120682">t</span><span class="op" id="4120683">.</span><span class="ident" id="4120684">Year</span><span class="op" id="4120688">(</span><span class="op" id="4120689">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120692">return</span>&nbsp;<span class="ident" id="4120699">year</span>&nbsp;<span class="op" id="4120704">&lt;</span>&nbsp;<span class="num" id="4120706">1950</span>&nbsp;<span class="op" id="4120711">||</span>&nbsp;<span class="ident" id="4120714">year</span>&nbsp;<span class="op" id="4120719">&gt;=</span>&nbsp;<span class="num" id="4120722">2050</span><br>
<span class="lineno"></span><span class="op" id="4120727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4120730">func</span>&nbsp;<span class="ident" id="4120735">marshalUTCTime</span><span class="op" id="4120749">(</span><span class="ident" id="4120750">out</span>&nbsp;<span class="op" id="4120754">*</span><span class="ident" id="4120755">forkableWriter</span><span class="op" id="4120769">,</span>&nbsp;<span class="ident" id="4120771">t</span>&nbsp;<span class="ident" id="4120773">time</span><span class="op" id="4120777">.</span><span class="ident" id="4120778">Time</span><span class="op" id="4120782">)</span>&nbsp;<span class="op" id="4120784">(</span><span class="ident" id="4120785">err</span>&nbsp;<span class="builtintype" id="4120789">error</span><span class="op" id="4120794">)</span>&nbsp;<span class="op" id="4120796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120799">year</span>&nbsp;<span class="op" id="4120804">:=</span>&nbsp;<span class="ident" id="4120807">t</span><span class="op" id="4120808">.</span><span class="ident" id="4120809">Year</span><span class="op" id="4120813">(</span><span class="op" id="4120814">)</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120818">switch</span>&nbsp;<span class="op" id="4120825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120828">case</span>&nbsp;<span class="num" id="4120833">1950</span>&nbsp;<span class="op" id="4120838">&lt;=</span>&nbsp;<span class="ident" id="4120841">year</span>&nbsp;<span class="op" id="4120846">&amp;&amp;</span>&nbsp;<span class="ident" id="4120849">year</span>&nbsp;<span class="op" id="4120854">&lt;</span>&nbsp;<span class="num" id="4120856">2000</span><span class="op" id="4120860">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120864">err</span>&nbsp;<span class="op" id="4120868">=</span>&nbsp;<span class="ident" id="4120870">marshalTwoDigits</span><span class="op" id="4120886">(</span><span class="ident" id="4120887">out</span><span class="op" id="4120890">,</span>&nbsp;<span class="builtintype" id="4120892">int</span><span class="op" id="4120895">(</span><span class="ident" id="4120896">year</span><span class="op" id="4120900">-</span><span class="num" id="4120901">1900</span><span class="op" id="4120905">)</span><span class="op" id="4120906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120909">case</span>&nbsp;<span class="num" id="4120914">2000</span>&nbsp;<span class="op" id="4120919">&lt;=</span>&nbsp;<span class="ident" id="4120922">year</span>&nbsp;<span class="op" id="4120927">&amp;&amp;</span>&nbsp;<span class="ident" id="4120930">year</span>&nbsp;<span class="op" id="4120935">&lt;</span>&nbsp;<span class="num" id="4120937">2050</span><span class="op" id="4120941">:</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4120945">err</span>&nbsp;<span class="op" id="4120949">=</span>&nbsp;<span class="ident" id="4120951">marshalTwoDigits</span><span class="op" id="4120967">(</span><span class="ident" id="4120968">out</span><span class="op" id="4120971">,</span>&nbsp;<span class="builtintype" id="4120973">int</span><span class="op" id="4120976">(</span><span class="ident" id="4120977">year</span><span class="op" id="4120981">-</span><span class="num" id="4120982">2000</span><span class="op" id="4120986">)</span><span class="op" id="4120987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4120990">default</span><span class="op" id="4120997">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121001">return</span>&nbsp;<span class="ident" id="4121008">StructuralError</span><span class="op" id="4121023">{</span><span class="string" id="4121024">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;UTCTime&#34;</span><span class="op" id="4121058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121064">if</span>&nbsp;<span class="ident" id="4121067">err</span>&nbsp;<span class="op" id="4121071">!=</span>&nbsp;<span class="ident" id="4121074">nil</span>&nbsp;<span class="op" id="4121078">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121082">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121094">return</span>&nbsp;<span class="ident" id="4121101">marshalTimeCommon</span><span class="op" id="4121118">(</span><span class="ident" id="4121119">out</span><span class="op" id="4121122">,</span>&nbsp;<span class="ident" id="4121124">t</span><span class="op" id="4121125">)</span><br>
<span class="lineno"></span><span class="op" id="4121127">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="4121130">func</span>&nbsp;<span class="ident" id="4121135">marshalGeneralizedTime</span><span class="op" id="4121157">(</span><span class="ident" id="4121158">out</span>&nbsp;<span class="op" id="4121162">*</span><span class="ident" id="4121163">forkableWriter</span><span class="op" id="4121177">,</span>&nbsp;<span class="ident" id="4121179">t</span>&nbsp;<span class="ident" id="4121181">time</span><span class="op" id="4121185">.</span><span class="ident" id="4121186">Time</span><span class="op" id="4121190">)</span>&nbsp;<span class="op" id="4121192">(</span><span class="ident" id="4121193">err</span>&nbsp;<span class="builtintype" id="4121197">error</span><span class="op" id="4121202">)</span>&nbsp;<span class="op" id="4121204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121207">year</span>&nbsp;<span class="op" id="4121212">:=</span>&nbsp;<span class="ident" id="4121215">t</span><span class="op" id="4121216">.</span><span class="ident" id="4121217">Year</span><span class="op" id="4121221">(</span><span class="op" id="4121222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121225">if</span>&nbsp;<span class="ident" id="4121228">year</span>&nbsp;<span class="op" id="4121233">&lt;</span>&nbsp;<span class="num" id="4121235">0</span>&nbsp;<span class="op" id="4121237">||</span>&nbsp;<span class="ident" id="4121240">year</span>&nbsp;<span class="op" id="4121245">&gt;</span>&nbsp;<span class="num" id="4121247">9999</span>&nbsp;<span class="op" id="4121252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121256">return</span>&nbsp;<span class="ident" id="4121263">StructuralError</span><span class="op" id="4121278">{</span><span class="string" id="4121279">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;GeneralizedTime&#34;</span><span class="op" id="4121321">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121327">if</span>&nbsp;<span class="ident" id="4121330">err</span>&nbsp;<span class="op" id="4121334">=</span>&nbsp;<span class="ident" id="4121336">marshalFourDigits</span><span class="op" id="4121353">(</span><span class="ident" id="4121354">out</span><span class="op" id="4121357">,</span>&nbsp;<span class="ident" id="4121359">year</span><span class="op" id="4121363">)</span><span class="op" id="4121364">;</span>&nbsp;<span class="ident" id="4121366">err</span>&nbsp;<span class="op" id="4121370">!=</span>&nbsp;<span class="ident" id="4121373">nil</span>&nbsp;<span class="op" id="4121377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121381">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121393">return</span>&nbsp;<span class="ident" id="4121400">marshalTimeCommon</span><span class="op" id="4121417">(</span><span class="ident" id="4121418">out</span><span class="op" id="4121421">,</span>&nbsp;<span class="ident" id="4121423">t</span><span class="op" id="4121424">)</span><br>
<span class="lineno"></span><span class="op" id="4121426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4121429">func</span>&nbsp;<span class="ident" id="4121434">marshalTimeCommon</span><span class="op" id="4121451">(</span><span class="ident" id="4121452">out</span>&nbsp;<span class="op" id="4121456">*</span><span class="ident" id="4121457">forkableWriter</span><span class="op" id="4121471">,</span>&nbsp;<span class="ident" id="4121473">t</span>&nbsp;<span class="ident" id="4121475">time</span><span class="op" id="4121479">.</span><span class="ident" id="4121480">Time</span><span class="op" id="4121484">)</span>&nbsp;<span class="op" id="4121486">(</span><span class="ident" id="4121487">err</span>&nbsp;<span class="builtintype" id="4121491">error</span><span class="op" id="4121496">)</span>&nbsp;<span class="op" id="4121498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121501">_</span><span class="op" id="4121502">,</span>&nbsp;<span class="ident" id="4121504">month</span><span class="op" id="4121509">,</span>&nbsp;<span class="ident" id="4121511">day</span>&nbsp;<span class="op" id="4121515">:=</span>&nbsp;<span class="ident" id="4121518">t</span><span class="op" id="4121519">.</span><span class="ident" id="4121520">Date</span><span class="op" id="4121524">(</span><span class="op" id="4121525">)</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121529">err</span>&nbsp;<span class="op" id="4121533">=</span>&nbsp;<span class="ident" id="4121535">marshalTwoDigits</span><span class="op" id="4121551">(</span><span class="ident" id="4121552">out</span><span class="op" id="4121555">,</span>&nbsp;<span class="builtintype" id="4121557">int</span><span class="op" id="4121560">(</span><span class="ident" id="4121561">month</span><span class="op" id="4121566">)</span><span class="op" id="4121567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121570">if</span>&nbsp;<span class="ident" id="4121573">err</span>&nbsp;<span class="op" id="4121577">!=</span>&nbsp;<span class="ident" id="4121580">nil</span>&nbsp;<span class="op" id="4121584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121588">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121596">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121600">err</span>&nbsp;<span class="op" id="4121604">=</span>&nbsp;<span class="ident" id="4121606">marshalTwoDigits</span><span class="op" id="4121622">(</span><span class="ident" id="4121623">out</span><span class="op" id="4121626">,</span>&nbsp;<span class="ident" id="4121628">day</span><span class="op" id="4121631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121634">if</span>&nbsp;<span class="ident" id="4121637">err</span>&nbsp;<span class="op" id="4121641">!=</span>&nbsp;<span class="ident" id="4121644">nil</span>&nbsp;<span class="op" id="4121648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121652">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121660">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121664">hour</span><span class="op" id="4121668">,</span>&nbsp;<span class="ident" id="4121670">min</span><span class="op" id="4121673">,</span>&nbsp;<span class="ident" id="4121675">sec</span>&nbsp;<span class="op" id="4121679">:=</span>&nbsp;<span class="ident" id="4121682">t</span><span class="op" id="4121683">.</span><span class="ident" id="4121684">Clock</span><span class="op" id="4121689">(</span><span class="op" id="4121690">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121694">err</span>&nbsp;<span class="op" id="4121698">=</span>&nbsp;<span class="ident" id="4121700">marshalTwoDigits</span><span class="op" id="4121716">(</span><span class="ident" id="4121717">out</span><span class="op" id="4121720">,</span>&nbsp;<span class="ident" id="4121722">hour</span><span class="op" id="4121726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121729">if</span>&nbsp;<span class="ident" id="4121732">err</span>&nbsp;<span class="op" id="4121736">!=</span>&nbsp;<span class="ident" id="4121739">nil</span>&nbsp;<span class="op" id="4121743">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121747">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121759">err</span>&nbsp;<span class="op" id="4121763">=</span>&nbsp;<span class="ident" id="4121765">marshalTwoDigits</span><span class="op" id="4121781">(</span><span class="ident" id="4121782">out</span><span class="op" id="4121785">,</span>&nbsp;<span class="ident" id="4121787">min</span><span class="op" id="4121790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121793">if</span>&nbsp;<span class="ident" id="4121796">err</span>&nbsp;<span class="op" id="4121800">!=</span>&nbsp;<span class="ident" id="4121803">nil</span>&nbsp;<span class="op" id="4121807">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121811">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121823">err</span>&nbsp;<span class="op" id="4121827">=</span>&nbsp;<span class="ident" id="4121829">marshalTwoDigits</span><span class="op" id="4121845">(</span><span class="ident" id="4121846">out</span><span class="op" id="4121849">,</span>&nbsp;<span class="ident" id="4121851">sec</span><span class="op" id="4121854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121857">if</span>&nbsp;<span class="ident" id="4121860">err</span>&nbsp;<span class="op" id="4121864">!=</span>&nbsp;<span class="ident" id="4121867">nil</span>&nbsp;<span class="op" id="4121871">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121875">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4121883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121887">_</span><span class="op" id="4121888">,</span>&nbsp;<span class="ident" id="4121890">offset</span>&nbsp;<span class="op" id="4121897">:=</span>&nbsp;<span class="ident" id="4121900">t</span><span class="op" id="4121901">.</span><span class="ident" id="4121902">Zone</span><span class="op" id="4121906">(</span><span class="op" id="4121907">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121911">switch</span>&nbsp;<span class="op" id="4121918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121921">case</span>&nbsp;<span class="ident" id="4121926">offset</span><span class="op" id="4121932">/</span><span class="num" id="4121933">60</span>&nbsp;<span class="op" id="4121936">==</span>&nbsp;<span class="num" id="4121939">0</span><span class="op" id="4121940">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121944">err</span>&nbsp;<span class="op" id="4121948">=</span>&nbsp;<span class="ident" id="4121950">out</span><span class="op" id="4121953">.</span><span class="ident" id="4121954">WriteByte</span><span class="op" id="4121963">(</span><span class="string" id="4121964">&#39;Z&#39;</span><span class="op" id="4121967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121971">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4121979">case</span>&nbsp;<span class="ident" id="4121984">offset</span>&nbsp;<span class="op" id="4121991">&gt;</span>&nbsp;<span class="num" id="4121993">0</span><span class="op" id="4121994">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4121998">err</span>&nbsp;<span class="op" id="4122002">=</span>&nbsp;<span class="ident" id="4122004">out</span><span class="op" id="4122007">.</span><span class="ident" id="4122008">WriteByte</span><span class="op" id="4122017">(</span><span class="string" id="4122018">&#39;+&#39;</span><span class="op" id="4122021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122024">case</span>&nbsp;<span class="ident" id="4122029">offset</span>&nbsp;<span class="op" id="4122036">&lt;</span>&nbsp;<span class="num" id="4122038">0</span><span class="op" id="4122039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4122043">err</span>&nbsp;<span class="op" id="4122047">=</span>&nbsp;<span class="ident" id="4122049">out</span><span class="op" id="4122052">.</span><span class="ident" id="4122053">WriteByte</span><span class="op" id="4122062">(</span><span class="string" id="4122063">&#39;-&#39;</span><span class="op" id="4122066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4122069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122073">if</span>&nbsp;<span class="ident" id="4122076">err</span>&nbsp;<span class="op" id="4122080">!=</span>&nbsp;<span class="ident" id="4122083">nil</span>&nbsp;<span class="op" id="4122087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122091">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4122099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4122103">offsetMinutes</span>&nbsp;<span class="op" id="4122117">:=</span>&nbsp;<span class="ident" id="4122120">offset</span>&nbsp;<span class="op" id="4122127">/</span>&nbsp;<span class="num" id="4122129">60</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122133">if</span>&nbsp;<span class="ident" id="4122136">offsetMinutes</span>&nbsp;<span class="op" id="4122150">&lt;</span>&nbsp;<span class="num" id="4122152">0</span>&nbsp;<span class="op" id="4122154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4122158">offsetMinutes</span>&nbsp;<span class="op" id="4122172">=</span>&nbsp;<span class="op" id="4122174">-</span><span class="ident" id="4122175">offsetMinutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4122190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4122194">err</span>&nbsp;<span class="op" id="4122198">=</span>&nbsp;<span class="ident" id="4122200">marshalTwoDigits</span><span class="op" id="4122216">(</span><span class="ident" id="4122217">out</span><span class="op" id="4122220">,</span>&nbsp;<span class="ident" id="4122222">offsetMinutes</span><span class="op" id="4122235">/</span><span class="num" id="4122236">60</span><span class="op" id="4122238">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122241">if</span>&nbsp;<span class="ident" id="4122244">err</span>&nbsp;<span class="op" id="4122248">!=</span>&nbsp;<span class="ident" id="4122251">nil</span>&nbsp;<span class="op" id="4122255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122259">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4122267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4122271">err</span>&nbsp;<span class="op" id="4122275">=</span>&nbsp;<span class="ident" id="4122277">marshalTwoDigits</span><span class="op" id="4122293">(</span><span class="ident" id="4122294">out</span><span class="op" id="4122297">,</span>&nbsp;<span class="ident" id="4122299">offsetMinutes</span><span class="op" id="4122312">%</span><span class="num" id="4122313">60</span><span class="op" id="4122315">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122318">return</span><br>
<span class="lineno"></span><span class="op" id="4122325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4122328">func</span>&nbsp;<span class="ident" id="4122333">stripTagAndLength</span><span class="op" id="4122350">(</span><span class="ident" id="4122351">in</span>&nbsp;<span class="op" id="4122354">[</span><span class="op" id="4122355">]</span><span class="builtintype" id="4122356">byte</span><span class="op" id="4122360">)</span>&nbsp;<span class="op" id="4122362">[</span><span class="op" id="4122363">]</span><span class="builtintype" id="4122364">byte</span>&nbsp;<span class="op" id="4122369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4122372">_</span><span class="op" id="4122373">,</span>&nbsp;<span class="ident" id="4122375">offset</span><span class="op" id="4122381">,</span>&nbsp;<span class="ident" id="4122383">err</span>&nbsp;<span class="op" id="4122387">:=</span>&nbsp;<span class="ident" id="4122390">parseTagAndLength</span><span class="op" id="4122407">(</span><span class="ident" id="4122408">in</span><span class="op" id="4122410">,</span>&nbsp;<span class="num" id="4122412">0</span><span class="op" id="4122413">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122416">if</span>&nbsp;<span class="ident" id="4122419">err</span>&nbsp;<span class="op" id="4122423">!=</span>&nbsp;<span class="ident" id="4122426">nil</span>&nbsp;<span class="op" id="4122430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122434">return</span>&nbsp;<span class="ident" id="4122441">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4122445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122448">return</span>&nbsp;<span class="ident" id="4122455">in</span><span class="op" id="4122457">[</span><span class="ident" id="4122458">offset</span><span class="op" id="4122464">:</span><span class="op" id="4122465">]</span><br>
<span class="lineno"></span><span class="op" id="4122467">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span><span class="keyword" id="4122470">func</span>&nbsp;<span class="ident" id="4122475">marshalBody</span><span class="op" id="4122486">(</span><span class="ident" id="4122487">out</span>&nbsp;<span class="op" id="4122491">*</span><span class="ident" id="4122492">forkableWriter</span><span class="op" id="4122506">,</span>&nbsp;<span class="ident" id="4122508">value</span>&nbsp;<span class="ident" id="4122514">reflect</span><span class="op" id="4122521">.</span><span class="ident" id="4122522">Value</span><span class="op" id="4122527">,</span>&nbsp;<span class="ident" id="4122529">params</span>&nbsp;<span class="ident" id="4122536">fieldParameters</span><span class="op" id="4122551">)</span>&nbsp;<span class="op" id="4122553">(</span><span class="ident" id="4122554">err</span>&nbsp;<span class="builtintype" id="4122558">error</span><span class="op" id="4122563">)</span>&nbsp;<span class="op" id="4122565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122568">switch</span>&nbsp;<span class="ident" id="4122575">value</span><span class="op" id="4122580">.</span><span class="ident" id="4122581">Type</span><span class="op" id="4122585">(</span><span class="op" id="4122586">)</span>&nbsp;<span class="op" id="4122588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122591">case</span>&nbsp;<span class="ident" id="4122596">timeType</span><span class="op" id="4122604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4122608">t</span>&nbsp;<span class="op" id="4122610">:=</span>&nbsp;<span class="ident" id="4122613">value</span><span class="op" id="4122618">.</span><span class="ident" id="4122619">Interface</span><span class="op" id="4122628">(</span><span class="op" id="4122629">)</span><span class="op" id="4122630">.</span><span class="op" id="4122631">(</span><span class="ident" id="4122632">time</span><span class="op" id="4122636">.</span><span class="ident" id="4122637">Time</span><span class="op" id="4122641">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122645">if</span>&nbsp;<span class="ident" id="4122648">outsideUTCRange</span><span class="op" id="4122663">(</span><span class="ident" id="4122664">t</span><span class="op" id="4122665">)</span>&nbsp;<span class="op" id="4122667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122672">return</span>&nbsp;<span class="ident" id="4122679">marshalGeneralizedTime</span><span class="op" id="4122701">(</span><span class="ident" id="4122702">out</span><span class="op" id="4122705">,</span>&nbsp;<span class="ident" id="4122707">t</span><span class="op" id="4122708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4122712">}</span>&nbsp;<span class="keyword" id="4122714">else</span>&nbsp;<span class="op" id="4122719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122724">return</span>&nbsp;<span class="ident" id="4122731">marshalUTCTime</span><span class="op" id="4122745">(</span><span class="ident" id="4122746">out</span><span class="op" id="4122749">,</span>&nbsp;<span class="ident" id="4122751">t</span><span class="op" id="4122752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4122756">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122759">case</span>&nbsp;<span class="ident" id="4122764">bitStringType</span><span class="op" id="4122777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122781">return</span>&nbsp;<span class="ident" id="4122788">marshalBitString</span><span class="op" id="4122804">(</span><span class="ident" id="4122805">out</span><span class="op" id="4122808">,</span>&nbsp;<span class="ident" id="4122810">value</span><span class="op" id="4122815">.</span><span class="ident" id="4122816">Interface</span><span class="op" id="4122825">(</span><span class="op" id="4122826">)</span><span class="op" id="4122827">.</span><span class="op" id="4122828">(</span><span class="ident" id="4122829">BitString</span><span class="op" id="4122838">)</span><span class="op" id="4122839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122842">case</span>&nbsp;<span class="ident" id="4122847">objectIdentifierType</span><span class="op" id="4122867">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122871">return</span>&nbsp;<span class="ident" id="4122878">marshalObjectIdentifier</span><span class="op" id="4122901">(</span><span class="ident" id="4122902">out</span><span class="op" id="4122905">,</span>&nbsp;<span class="ident" id="4122907">value</span><span class="op" id="4122912">.</span><span class="ident" id="4122913">Interface</span><span class="op" id="4122922">(</span><span class="op" id="4122923">)</span><span class="op" id="4122924">.</span><span class="op" id="4122925">(</span><span class="ident" id="4122926">ObjectIdentifier</span><span class="op" id="4122942">)</span><span class="op" id="4122943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122946">case</span>&nbsp;<span class="ident" id="4122951">bigIntType</span><span class="op" id="4122961">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4122965">return</span>&nbsp;<span class="ident" id="4122972">marshalBigInt</span><span class="op" id="4122985">(</span><span class="ident" id="4122986">out</span><span class="op" id="4122989">,</span>&nbsp;<span class="ident" id="4122991">value</span><span class="op" id="4122996">.</span><span class="ident" id="4122997">Interface</span><span class="op" id="4123006">(</span><span class="op" id="4123007">)</span><span class="op" id="4123008">.</span><span class="op" id="4123009">(</span><span class="op" id="4123010">*</span><span class="ident" id="4123011">big</span><span class="op" id="4123014">.</span><span class="ident" id="4123015">Int</span><span class="op" id="4123018">)</span><span class="op" id="4123019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4123022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123026">switch</span>&nbsp;<span class="ident" id="4123033">v</span>&nbsp;<span class="op" id="4123035">:=</span>&nbsp;<span class="ident" id="4123038">value</span><span class="op" id="4123043">;</span>&nbsp;<span class="ident" id="4123045">v</span><span class="op" id="4123046">.</span><span class="ident" id="4123047">Kind</span><span class="op" id="4123051">(</span><span class="op" id="4123052">)</span>&nbsp;<span class="op" id="4123054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123057">case</span>&nbsp;<span class="ident" id="4123062">reflect</span><span class="op" id="4123069">.</span><span class="ident" id="4123070">Bool</span><span class="op" id="4123074">:</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123078">if</span>&nbsp;<span class="ident" id="4123081">v</span><span class="op" id="4123082">.</span><span class="ident" id="4123083">Bool</span><span class="op" id="4123087">(</span><span class="op" id="4123088">)</span>&nbsp;<span class="op" id="4123090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123095">return</span>&nbsp;<span class="ident" id="4123102">out</span><span class="op" id="4123105">.</span><span class="ident" id="4123106">WriteByte</span><span class="op" id="4123115">(</span><span class="num" id="4123116">255</span><span class="op" id="4123119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4123123">}</span>&nbsp;<span class="keyword" id="4123125">else</span>&nbsp;<span class="op" id="4123130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123135">return</span>&nbsp;<span class="ident" id="4123142">out</span><span class="op" id="4123145">.</span><span class="ident" id="4123146">WriteByte</span><span class="op" id="4123155">(</span><span class="num" id="4123156">0</span><span class="op" id="4123157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4123161">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123164">case</span>&nbsp;<span class="ident" id="4123169">reflect</span><span class="op" id="4123176">.</span><span class="ident" id="4123177">Int</span><span class="op" id="4123180">,</span>&nbsp;<span class="ident" id="4123182">reflect</span><span class="op" id="4123189">.</span><span class="ident" id="4123190">Int8</span><span class="op" id="4123194">,</span>&nbsp;<span class="ident" id="4123196">reflect</span><span class="op" id="4123203">.</span><span class="ident" id="4123204">Int16</span><span class="op" id="4123209">,</span>&nbsp;<span class="ident" id="4123211">reflect</span><span class="op" id="4123218">.</span><span class="ident" id="4123219">Int32</span><span class="op" id="4123224">,</span>&nbsp;<span class="ident" id="4123226">reflect</span><span class="op" id="4123233">.</span><span class="ident" id="4123234">Int64</span><span class="op" id="4123239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123243">return</span>&nbsp;<span class="ident" id="4123250">marshalInt64</span><span class="op" id="4123262">(</span><span class="ident" id="4123263">out</span><span class="op" id="4123266">,</span>&nbsp;<span class="ident" id="4123268">int64</span><span class="op" id="4123273">(</span><span class="ident" id="4123274">v</span><span class="op" id="4123275">.</span><span class="ident" id="4123276">Int</span><span class="op" id="4123279">(</span><span class="op" id="4123280">)</span><span class="op" id="4123281">)</span><span class="op" id="4123282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123285">case</span>&nbsp;<span class="ident" id="4123290">reflect</span><span class="op" id="4123297">.</span><span class="ident" id="4123298">Struct</span><span class="op" id="4123304">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4123308">t</span>&nbsp;<span class="op" id="4123310">:=</span>&nbsp;<span class="ident" id="4123313">v</span><span class="op" id="4123314">.</span><span class="ident" id="4123315">Type</span><span class="op" id="4123319">(</span><span class="op" id="4123320">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4123325">startingField</span>&nbsp;<span class="op" id="4123339">:=</span>&nbsp;<span class="num" id="4123342">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4123347">//&nbsp;If&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;the&nbsp;structure&nbsp;is&nbsp;a&nbsp;non-empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4123405">//&nbsp;RawContents,&nbsp;then&nbsp;we&nbsp;don&#39;t&nbsp;bother&nbsp;serializing&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123466">if</span>&nbsp;<span class="ident" id="4123469">t</span><span class="op" id="4123470">.</span><span class="ident" id="4123471">NumField</span><span class="op" id="4123479">(</span><span class="op" id="4123480">)</span>&nbsp;<span class="op" id="4123482">&gt;</span>&nbsp;<span class="num" id="4123484">0</span>&nbsp;<span class="op" id="4123486">&amp;&amp;</span>&nbsp;<span class="ident" id="4123489">t</span><span class="op" id="4123490">.</span><span class="ident" id="4123491">Field</span><span class="op" id="4123496">(</span><span class="num" id="4123497">0</span><span class="op" id="4123498">)</span><span class="op" id="4123499">.</span><span class="ident" id="4123500">Type</span>&nbsp;<span class="op" id="4123505">==</span>&nbsp;<span class="ident" id="4123508">rawContentsType</span>&nbsp;<span class="op" id="4123524">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4123529">s</span>&nbsp;<span class="op" id="4123531">:=</span>&nbsp;<span class="ident" id="4123534">v</span><span class="op" id="4123535">.</span><span class="ident" id="4123536">Field</span><span class="op" id="4123541">(</span><span class="num" id="4123542">0</span><span class="op" id="4123543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123548">if</span>&nbsp;<span class="ident" id="4123551">s</span><span class="op" id="4123552">.</span><span class="ident" id="4123553">Len</span><span class="op" id="4123556">(</span><span class="op" id="4123557">)</span>&nbsp;<span class="op" id="4123559">&gt;</span>&nbsp;<span class="num" id="4123561">0</span>&nbsp;<span class="op" id="4123563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4123569">bytes</span>&nbsp;<span class="op" id="4123575">:=</span>&nbsp;<span class="builtinfunc" id="4123578">make</span><span class="op" id="4123582">(</span><span class="op" id="4123583">[</span><span class="op" id="4123584">]</span><span class="builtintype" id="4123585">byte</span><span class="op" id="4123589">,</span>&nbsp;<span class="ident" id="4123591">s</span><span class="op" id="4123592">.</span><span class="ident" id="4123593">Len</span><span class="op" id="4123596">(</span><span class="op" id="4123597">)</span><span class="op" id="4123598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123604">for</span>&nbsp;<span class="ident" id="4123608">i</span>&nbsp;<span class="op" id="4123610">:=</span>&nbsp;<span class="num" id="4123613">0</span><span class="op" id="4123614">;</span>&nbsp;<span class="ident" id="4123616">i</span>&nbsp;<span class="op" id="4123618">&lt;</span>&nbsp;<span class="ident" id="4123620">s</span><span class="op" id="4123621">.</span><span class="ident" id="4123622">Len</span><span class="op" id="4123625">(</span><span class="op" id="4123626">)</span><span class="op" id="4123627">;</span>&nbsp;<span class="ident" id="4123629">i</span><span class="op" id="4123630">++</span>&nbsp;<span class="op" id="4123633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4123640">bytes</span><span class="op" id="4123645">[</span><span class="ident" id="4123646">i</span><span class="op" id="4123647">]</span>&nbsp;<span class="op" id="4123649">=</span>&nbsp;<span class="builtintype" id="4123651">uint8</span><span class="op" id="4123656">(</span><span class="ident" id="4123657">s</span><span class="op" id="4123658">.</span><span class="ident" id="4123659">Index</span><span class="op" id="4123664">(</span><span class="ident" id="4123665">i</span><span class="op" id="4123666">)</span><span class="op" id="4123667">.</span><span class="ident" id="4123668">Uint</span><span class="op" id="4123672">(</span><span class="op" id="4123673">)</span><span class="op" id="4123674">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4123680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4123686">/*&nbsp;The&nbsp;RawContents&nbsp;will&nbsp;contain&nbsp;the&nbsp;tag&nbsp;and<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;length&nbsp;fields&nbsp;but&nbsp;we&#39;ll&nbsp;also&nbsp;be&nbsp;writing<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;those&nbsp;ourselves,&nbsp;so&nbsp;we&nbsp;strip&nbsp;them&nbsp;out&nbsp;of<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;bytes&nbsp;*/</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4123845">_</span><span class="op" id="4123846">,</span>&nbsp;<span class="ident" id="4123848">err</span>&nbsp;<span class="op" id="4123852">=</span>&nbsp;<span class="ident" id="4123854">out</span><span class="op" id="4123857">.</span><span class="ident" id="4123858">Write</span><span class="op" id="4123863">(</span><span class="ident" id="4123864">stripTagAndLength</span><span class="op" id="4123881">(</span><span class="ident" id="4123882">bytes</span><span class="op" id="4123887">)</span><span class="op" id="4123888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123894">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4123904">}</span>&nbsp;<span class="keyword" id="4123906">else</span>&nbsp;<span class="op" id="4123911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4123917">startingField</span>&nbsp;<span class="op" id="4123931">=</span>&nbsp;<span class="num" id="4123933">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4123938">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4123942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123947">for</span>&nbsp;<span class="ident" id="4123951">i</span>&nbsp;<span class="op" id="4123953">:=</span>&nbsp;<span class="ident" id="4123956">startingField</span><span class="op" id="4123969">;</span>&nbsp;<span class="ident" id="4123971">i</span>&nbsp;<span class="op" id="4123973">&lt;</span>&nbsp;<span class="ident" id="4123975">t</span><span class="op" id="4123976">.</span><span class="ident" id="4123977">NumField</span><span class="op" id="4123985">(</span><span class="op" id="4123986">)</span><span class="op" id="4123987">;</span>&nbsp;<span class="ident" id="4123989">i</span><span class="op" id="4123990">++</span>&nbsp;<span class="op" id="4123993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4123998">var</span>&nbsp;<span class="ident" id="4124002">pre</span>&nbsp;<span class="op" id="4124006">*</span><span class="ident" id="4124007">forkableWriter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4124025">pre</span><span class="op" id="4124028">,</span>&nbsp;<span class="ident" id="4124030">out</span>&nbsp;<span class="op" id="4124034">=</span>&nbsp;<span class="ident" id="4124036">out</span><span class="op" id="4124039">.</span><span class="ident" id="4124040">fork</span><span class="op" id="4124044">(</span><span class="op" id="4124045">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4124050">err</span>&nbsp;<span class="op" id="4124054">=</span>&nbsp;<span class="ident" id="4124056">marshalField</span><span class="op" id="4124068">(</span><span class="ident" id="4124069">pre</span><span class="op" id="4124072">,</span>&nbsp;<span class="ident" id="4124074">v</span><span class="op" id="4124075">.</span><span class="ident" id="4124076">Field</span><span class="op" id="4124081">(</span><span class="ident" id="4124082">i</span><span class="op" id="4124083">)</span><span class="op" id="4124084">,</span>&nbsp;<span class="ident" id="4124086">parseFieldParameters</span><span class="op" id="4124106">(</span><span class="ident" id="4124107">t</span><span class="op" id="4124108">.</span><span class="ident" id="4124109">Field</span><span class="op" id="4124114">(</span><span class="ident" id="4124115">i</span><span class="op" id="4124116">)</span><span class="op" id="4124117">.</span><span class="ident" id="4124118">Tag</span><span class="op" id="4124121">.</span><span class="ident" id="4124122">Get</span><span class="op" id="4124125">(</span><span class="string" id="4124126">&#34;asn1&#34;</span><span class="op" id="4124132">)</span><span class="op" id="4124133">)</span><span class="op" id="4124134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124139">if</span>&nbsp;<span class="ident" id="4124142">err</span>&nbsp;<span class="op" id="4124146">!=</span>&nbsp;<span class="ident" id="4124149">nil</span>&nbsp;<span class="op" id="4124153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124159">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4124169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4124173">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124177">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124185">case</span>&nbsp;<span class="ident" id="4124190">reflect</span><span class="op" id="4124197">.</span><span class="ident" id="4124198">Slice</span><span class="op" id="4124203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4124207">sliceType</span>&nbsp;<span class="op" id="4124217">:=</span>&nbsp;<span class="ident" id="4124220">v</span><span class="op" id="4124221">.</span><span class="ident" id="4124222">Type</span><span class="op" id="4124226">(</span><span class="op" id="4124227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124231">if</span>&nbsp;<span class="ident" id="4124234">sliceType</span><span class="op" id="4124243">.</span><span class="ident" id="4124244">Elem</span><span class="op" id="4124248">(</span><span class="op" id="4124249">)</span><span class="op" id="4124250">.</span><span class="ident" id="4124251">Kind</span><span class="op" id="4124255">(</span><span class="op" id="4124256">)</span>&nbsp;<span class="op" id="4124258">==</span>&nbsp;<span class="ident" id="4124261">reflect</span><span class="op" id="4124268">.</span><span class="ident" id="4124269">Uint8</span>&nbsp;<span class="op" id="4124275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4124280">bytes</span>&nbsp;<span class="op" id="4124286">:=</span>&nbsp;<span class="builtinfunc" id="4124289">make</span><span class="op" id="4124293">(</span><span class="op" id="4124294">[</span><span class="op" id="4124295">]</span><span class="builtintype" id="4124296">byte</span><span class="op" id="4124300">,</span>&nbsp;<span class="ident" id="4124302">v</span><span class="op" id="4124303">.</span><span class="ident" id="4124304">Len</span><span class="op" id="4124307">(</span><span class="op" id="4124308">)</span><span class="op" id="4124309">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124314">for</span>&nbsp;<span class="ident" id="4124318">i</span>&nbsp;<span class="op" id="4124320">:=</span>&nbsp;<span class="num" id="4124323">0</span><span class="op" id="4124324">;</span>&nbsp;<span class="ident" id="4124326">i</span>&nbsp;<span class="op" id="4124328">&lt;</span>&nbsp;<span class="ident" id="4124330">v</span><span class="op" id="4124331">.</span><span class="ident" id="4124332">Len</span><span class="op" id="4124335">(</span><span class="op" id="4124336">)</span><span class="op" id="4124337">;</span>&nbsp;<span class="ident" id="4124339">i</span><span class="op" id="4124340">++</span>&nbsp;<span class="op" id="4124343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4124349">bytes</span><span class="op" id="4124354">[</span><span class="ident" id="4124355">i</span><span class="op" id="4124356">]</span>&nbsp;<span class="op" id="4124358">=</span>&nbsp;<span class="builtintype" id="4124360">uint8</span><span class="op" id="4124365">(</span><span class="ident" id="4124366">v</span><span class="op" id="4124367">.</span><span class="ident" id="4124368">Index</span><span class="op" id="4124373">(</span><span class="ident" id="4124374">i</span><span class="op" id="4124375">)</span><span class="op" id="4124376">.</span><span class="ident" id="4124377">Uint</span><span class="op" id="4124381">(</span><span class="op" id="4124382">)</span><span class="op" id="4124383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4124388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4124393">_</span><span class="op" id="4124394">,</span>&nbsp;<span class="ident" id="4124396">err</span>&nbsp;<span class="op" id="4124400">=</span>&nbsp;<span class="ident" id="4124402">out</span><span class="op" id="4124405">.</span><span class="ident" id="4124406">Write</span><span class="op" id="4124411">(</span><span class="ident" id="4124412">bytes</span><span class="op" id="4124417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124422">return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4124431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124436">var</span>&nbsp;<span class="ident" id="4124440">fp</span>&nbsp;<span class="ident" id="4124443">fieldParameters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124461">for</span>&nbsp;<span class="ident" id="4124465">i</span>&nbsp;<span class="op" id="4124467">:=</span>&nbsp;<span class="num" id="4124470">0</span><span class="op" id="4124471">;</span>&nbsp;<span class="ident" id="4124473">i</span>&nbsp;<span class="op" id="4124475">&lt;</span>&nbsp;<span class="ident" id="4124477">v</span><span class="op" id="4124478">.</span><span class="ident" id="4124479">Len</span><span class="op" id="4124482">(</span><span class="op" id="4124483">)</span><span class="op" id="4124484">;</span>&nbsp;<span class="ident" id="4124486">i</span><span class="op" id="4124487">++</span>&nbsp;<span class="op" id="4124490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124495">var</span>&nbsp;<span class="ident" id="4124499">pre</span>&nbsp;<span class="op" id="4124503">*</span><span class="ident" id="4124504">forkableWriter</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4124522">pre</span><span class="op" id="4124525">,</span>&nbsp;<span class="ident" id="4124527">out</span>&nbsp;<span class="op" id="4124531">=</span>&nbsp;<span class="ident" id="4124533">out</span><span class="op" id="4124536">.</span><span class="ident" id="4124537">fork</span><span class="op" id="4124541">(</span><span class="op" id="4124542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4124547">err</span>&nbsp;<span class="op" id="4124551">=</span>&nbsp;<span class="ident" id="4124553">marshalField</span><span class="op" id="4124565">(</span><span class="ident" id="4124566">pre</span><span class="op" id="4124569">,</span>&nbsp;<span class="ident" id="4124571">v</span><span class="op" id="4124572">.</span><span class="ident" id="4124573">Index</span><span class="op" id="4124578">(</span><span class="ident" id="4124579">i</span><span class="op" id="4124580">)</span><span class="op" id="4124581">,</span>&nbsp;<span class="ident" id="4124583">fp</span><span class="op" id="4124585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124590">if</span>&nbsp;<span class="ident" id="4124593">err</span>&nbsp;<span class="op" id="4124597">!=</span>&nbsp;<span class="ident" id="4124600">nil</span>&nbsp;<span class="op" id="4124604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124610">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4124620">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4124624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124628">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124636">case</span>&nbsp;<span class="ident" id="4124641">reflect</span><span class="op" id="4124648">.</span><span class="ident" id="4124649">String</span><span class="op" id="4124655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124659">switch</span>&nbsp;<span class="ident" id="4124666">params</span><span class="op" id="4124672">.</span><span class="ident" id="4124673">stringType</span>&nbsp;<span class="op" id="4124684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124688">case</span>&nbsp;<span class="ident" id="4124693">tagIA5String</span><span class="op" id="4124705">:</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124710">return</span>&nbsp;<span class="ident" id="4124717">marshalIA5String</span><span class="op" id="4124733">(</span><span class="ident" id="4124734">out</span><span class="op" id="4124737">,</span>&nbsp;<span class="ident" id="4124739">v</span><span class="op" id="4124740">.</span><span class="ident" id="4124741">String</span><span class="op" id="4124747">(</span><span class="op" id="4124748">)</span><span class="op" id="4124749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124753">case</span>&nbsp;<span class="ident" id="4124758">tagPrintableString</span><span class="op" id="4124776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124781">return</span>&nbsp;<span class="ident" id="4124788">marshalPrintableString</span><span class="op" id="4124810">(</span><span class="ident" id="4124811">out</span><span class="op" id="4124814">,</span>&nbsp;<span class="ident" id="4124816">v</span><span class="op" id="4124817">.</span><span class="ident" id="4124818">String</span><span class="op" id="4124824">(</span><span class="op" id="4124825">)</span><span class="op" id="4124826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124830">default</span><span class="op" id="4124837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124842">return</span>&nbsp;<span class="ident" id="4124849">marshalUTF8String</span><span class="op" id="4124866">(</span><span class="ident" id="4124867">out</span><span class="op" id="4124870">,</span>&nbsp;<span class="ident" id="4124872">v</span><span class="op" id="4124873">.</span><span class="ident" id="4124874">String</span><span class="op" id="4124880">(</span><span class="op" id="4124881">)</span><span class="op" id="4124882">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4124886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4124889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4124893">return</span>&nbsp;<span class="ident" id="4124900">StructuralError</span><span class="op" id="4124915">{</span><span class="string" id="4124916">&#34;unknown&nbsp;Go&nbsp;type&#34;</span><span class="op" id="4124933">}</span><br>
<span class="lineno"></span><span class="op" id="4124935">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="keyword" id="4124938">func</span>&nbsp;<span class="ident" id="4124943">marshalField</span><span class="op" id="4124955">(</span><span class="ident" id="4124956">out</span>&nbsp;<span class="op" id="4124960">*</span><span class="ident" id="4124961">forkableWriter</span><span class="op" id="4124975">,</span>&nbsp;<span class="ident" id="4124977">v</span>&nbsp;<span class="ident" id="4124979">reflect</span><span class="op" id="4124986">.</span><span class="ident" id="4124987">Value</span><span class="op" id="4124992">,</span>&nbsp;<span class="ident" id="4124994">params</span>&nbsp;<span class="ident" id="4125001">fieldParameters</span><span class="op" id="4125016">)</span>&nbsp;<span class="op" id="4125018">(</span><span class="ident" id="4125019">err</span>&nbsp;<span class="builtintype" id="4125023">error</span><span class="op" id="4125028">)</span>&nbsp;<span class="op" id="4125030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4125033">//&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;an&nbsp;interface{}&nbsp;then&nbsp;recurse&nbsp;into&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125090">if</span>&nbsp;<span class="ident" id="4125093">v</span><span class="op" id="4125094">.</span><span class="ident" id="4125095">Kind</span><span class="op" id="4125099">(</span><span class="op" id="4125100">)</span>&nbsp;<span class="op" id="4125102">==</span>&nbsp;<span class="ident" id="4125105">reflect</span><span class="op" id="4125112">.</span><span class="ident" id="4125113">Interface</span>&nbsp;<span class="op" id="4125123">&amp;&amp;</span>&nbsp;<span class="ident" id="4125126">v</span><span class="op" id="4125127">.</span><span class="ident" id="4125128">Type</span><span class="op" id="4125132">(</span><span class="op" id="4125133">)</span><span class="op" id="4125134">.</span><span class="ident" id="4125135">NumMethod</span><span class="op" id="4125144">(</span><span class="op" id="4125145">)</span>&nbsp;<span class="op" id="4125147">==</span>&nbsp;<span class="num" id="4125150">0</span>&nbsp;<span class="op" id="4125152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125156">return</span>&nbsp;<span class="ident" id="4125163">marshalField</span><span class="op" id="4125175">(</span><span class="ident" id="4125176">out</span><span class="op" id="4125179">,</span>&nbsp;<span class="ident" id="4125181">v</span><span class="op" id="4125182">.</span><span class="ident" id="4125183">Elem</span><span class="op" id="4125187">(</span><span class="op" id="4125188">)</span><span class="op" id="4125189">,</span>&nbsp;<span class="ident" id="4125191">params</span><span class="op" id="4125197">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4125200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125204">if</span>&nbsp;<span class="ident" id="4125207">v</span><span class="op" id="4125208">.</span><span class="ident" id="4125209">Kind</span><span class="op" id="4125213">(</span><span class="op" id="4125214">)</span>&nbsp;<span class="op" id="4125216">==</span>&nbsp;<span class="ident" id="4125219">reflect</span><span class="op" id="4125226">.</span><span class="ident" id="4125227">Slice</span>&nbsp;<span class="op" id="4125233">&amp;&amp;</span>&nbsp;<span class="ident" id="4125236">v</span><span class="op" id="4125237">.</span><span class="ident" id="4125238">Len</span><span class="op" id="4125241">(</span><span class="op" id="4125242">)</span>&nbsp;<span class="op" id="4125244">==</span>&nbsp;<span class="num" id="4125247">0</span>&nbsp;<span class="op" id="4125249">&amp;&amp;</span>&nbsp;<span class="ident" id="4125252">params</span><span class="op" id="4125258">.</span><span class="ident" id="4125259">omitEmpty</span>&nbsp;<span class="op" id="4125269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125273">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4125281">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125285">if</span>&nbsp;<span class="ident" id="4125288">params</span><span class="op" id="4125294">.</span><span class="ident" id="4125295">optional</span>&nbsp;<span class="op" id="4125304">&amp;&amp;</span>&nbsp;<span class="ident" id="4125307">params</span><span class="op" id="4125313">.</span><span class="ident" id="4125314">defaultValue</span>&nbsp;<span class="op" id="4125327">!=</span>&nbsp;<span class="ident" id="4125330">nil</span>&nbsp;<span class="op" id="4125334">&amp;&amp;</span>&nbsp;<span class="ident" id="4125337">canHaveDefaultValue</span><span class="op" id="4125356">(</span><span class="ident" id="4125357">v</span><span class="op" id="4125358">.</span><span class="ident" id="4125359">Kind</span><span class="op" id="4125363">(</span><span class="op" id="4125364">)</span><span class="op" id="4125365">)</span>&nbsp;<span class="op" id="4125367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4125371">defaultValue</span>&nbsp;<span class="op" id="4125384">:=</span>&nbsp;<span class="ident" id="4125387">reflect</span><span class="op" id="4125394">.</span><span class="ident" id="4125395">New</span><span class="op" id="4125398">(</span><span class="ident" id="4125399">v</span><span class="op" id="4125400">.</span><span class="ident" id="4125401">Type</span><span class="op" id="4125405">(</span><span class="op" id="4125406">)</span><span class="op" id="4125407">)</span><span class="op" id="4125408">.</span><span class="ident" id="4125409">Elem</span><span class="op" id="4125413">(</span><span class="op" id="4125414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4125418">defaultValue</span><span class="op" id="4125430">.</span><span class="ident" id="4125431">SetInt</span><span class="op" id="4125437">(</span><span class="op" id="4125438">*</span><span class="ident" id="4125439">params</span><span class="op" id="4125445">.</span><span class="ident" id="4125446">defaultValue</span><span class="op" id="4125458">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125463">if</span>&nbsp;<span class="ident" id="4125466">reflect</span><span class="op" id="4125473">.</span><span class="ident" id="4125474">DeepEqual</span><span class="op" id="4125483">(</span><span class="ident" id="4125484">v</span><span class="op" id="4125485">.</span><span class="ident" id="4125486">Interface</span><span class="op" id="4125495">(</span><span class="op" id="4125496">)</span><span class="op" id="4125497">,</span>&nbsp;<span class="ident" id="4125499">defaultValue</span><span class="op" id="4125511">.</span><span class="ident" id="4125512">Interface</span><span class="op" id="4125521">(</span><span class="op" id="4125522">)</span><span class="op" id="4125523">)</span>&nbsp;<span class="op" id="4125525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125530">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4125539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4125542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4125546">//&nbsp;If&nbsp;no&nbsp;default&nbsp;value&nbsp;is&nbsp;given&nbsp;then&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;type&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4125615">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;the&nbsp;default&nbsp;value.&nbsp;This&nbsp;isn&#39;t&nbsp;obviously&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4125685">//&nbsp;behaviour,&nbsp;but&nbsp;it&#39;s&nbsp;what&nbsp;Go&nbsp;has&nbsp;traditionally&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125741">if</span>&nbsp;<span class="ident" id="4125744">params</span><span class="op" id="4125750">.</span><span class="ident" id="4125751">optional</span>&nbsp;<span class="op" id="4125760">&amp;&amp;</span>&nbsp;<span class="ident" id="4125763">params</span><span class="op" id="4125769">.</span><span class="ident" id="4125770">defaultValue</span>&nbsp;<span class="op" id="4125783">==</span>&nbsp;<span class="ident" id="4125786">nil</span>&nbsp;<span class="op" id="4125790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125794">if</span>&nbsp;<span class="ident" id="4125797">reflect</span><span class="op" id="4125804">.</span><span class="ident" id="4125805">DeepEqual</span><span class="op" id="4125814">(</span><span class="ident" id="4125815">v</span><span class="op" id="4125816">.</span><span class="ident" id="4125817">Interface</span><span class="op" id="4125826">(</span><span class="op" id="4125827">)</span><span class="op" id="4125828">,</span>&nbsp;<span class="ident" id="4125830">reflect</span><span class="op" id="4125837">.</span><span class="ident" id="4125838">Zero</span><span class="op" id="4125842">(</span><span class="ident" id="4125843">v</span><span class="op" id="4125844">.</span><span class="ident" id="4125845">Type</span><span class="op" id="4125849">(</span><span class="op" id="4125850">)</span><span class="op" id="4125851">)</span><span class="op" id="4125852">.</span><span class="ident" id="4125853">Interface</span><span class="op" id="4125862">(</span><span class="op" id="4125863">)</span><span class="op" id="4125864">)</span>&nbsp;<span class="op" id="4125866">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125871">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4125880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4125883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125887">if</span>&nbsp;<span class="ident" id="4125890">v</span><span class="op" id="4125891">.</span><span class="ident" id="4125892">Type</span><span class="op" id="4125896">(</span><span class="op" id="4125897">)</span>&nbsp;<span class="op" id="4125899">==</span>&nbsp;<span class="ident" id="4125902">rawValueType</span>&nbsp;<span class="op" id="4125915">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4125919">rv</span>&nbsp;<span class="op" id="4125922">:=</span>&nbsp;<span class="ident" id="4125925">v</span><span class="op" id="4125926">.</span><span class="ident" id="4125927">Interface</span><span class="op" id="4125936">(</span><span class="op" id="4125937">)</span><span class="op" id="4125938">.</span><span class="op" id="4125939">(</span><span class="ident" id="4125940">RawValue</span><span class="op" id="4125948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4125952">if</span>&nbsp;<span class="builtinfunc" id="4125955">len</span><span class="op" id="4125958">(</span><span class="ident" id="4125959">rv</span><span class="op" id="4125961">.</span><span class="ident" id="4125962">FullBytes</span><span class="op" id="4125971">)</span>&nbsp;<span class="op" id="4125973">!=</span>&nbsp;<span class="num" id="4125976">0</span>&nbsp;<span class="op" id="4125978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4125983">_</span><span class="op" id="4125984">,</span>&nbsp;<span class="ident" id="4125986">err</span>&nbsp;<span class="op" id="4125990">=</span>&nbsp;<span class="ident" id="4125992">out</span><span class="op" id="4125995">.</span><span class="ident" id="4125996">Write</span><span class="op" id="4126001">(</span><span class="ident" id="4126002">rv</span><span class="op" id="4126004">.</span><span class="ident" id="4126005">FullBytes</span><span class="op" id="4126014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4126018">}</span>&nbsp;<span class="keyword" id="4126020">else</span>&nbsp;<span class="op" id="4126025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4126030">err</span>&nbsp;<span class="op" id="4126034">=</span>&nbsp;<span class="ident" id="4126036">marshalTagAndLength</span><span class="op" id="4126055">(</span><span class="ident" id="4126056">out</span><span class="op" id="4126059">,</span>&nbsp;<span class="ident" id="4126061">tagAndLength</span><span class="op" id="4126073">{</span><span class="ident" id="4126074">rv</span><span class="op" id="4126076">.</span><span class="ident" id="4126077">Class</span><span class="op" id="4126082">,</span>&nbsp;<span class="ident" id="4126084">rv</span><span class="op" id="4126086">.</span><span class="ident" id="4126087">Tag</span><span class="op" id="4126090">,</span>&nbsp;<span class="builtinfunc" id="4126092">len</span><span class="op" id="4126095">(</span><span class="ident" id="4126096">rv</span><span class="op" id="4126098">.</span><span class="ident" id="4126099">Bytes</span><span class="op" id="4126104">)</span><span class="op" id="4126105">,</span>&nbsp;<span class="ident" id="4126107">rv</span><span class="op" id="4126109">.</span><span class="ident" id="4126110">IsCompound</span><span class="op" id="4126120">}</span><span class="op" id="4126121">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126126">if</span>&nbsp;<span class="ident" id="4126129">err</span>&nbsp;<span class="op" id="4126133">!=</span>&nbsp;<span class="ident" id="4126136">nil</span>&nbsp;<span class="op" id="4126140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126146">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4126156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4126161">_</span><span class="op" id="4126162">,</span>&nbsp;<span class="ident" id="4126164">err</span>&nbsp;<span class="op" id="4126168">=</span>&nbsp;<span class="ident" id="4126170">out</span><span class="op" id="4126173">.</span><span class="ident" id="4126174">Write</span><span class="op" id="4126179">(</span><span class="ident" id="4126180">rv</span><span class="op" id="4126182">.</span><span class="ident" id="4126183">Bytes</span><span class="op" id="4126188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4126192">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126196">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4126204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4126208">tag</span><span class="op" id="4126211">,</span>&nbsp;<span class="ident" id="4126213">isCompound</span><span class="op" id="4126223">,</span>&nbsp;<span class="ident" id="4126225">ok</span>&nbsp;<span class="op" id="4126228">:=</span>&nbsp;<span class="ident" id="4126231">getUniversalType</span><span class="op" id="4126247">(</span><span class="ident" id="4126248">v</span><span class="op" id="4126249">.</span><span class="ident" id="4126250">Type</span><span class="op" id="4126254">(</span><span class="op" id="4126255">)</span><span class="op" id="4126256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126259">if</span>&nbsp;<span class="op" id="4126262">!</span><span class="ident" id="4126263">ok</span>&nbsp;<span class="op" id="4126266">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4126270">err</span>&nbsp;<span class="op" id="4126274">=</span>&nbsp;<span class="ident" id="4126276">StructuralError</span><span class="op" id="4126291">{</span><span class="ident" id="4126292">fmt</span><span class="op" id="4126295">.</span><span class="ident" id="4126296">Sprintf</span><span class="op" id="4126303">(</span><span class="string" id="4126304">&#34;unknown&nbsp;Go&nbsp;type:&nbsp;%v&#34;</span><span class="op" id="4126325">,</span>&nbsp;<span class="ident" id="4126327">v</span><span class="op" id="4126328">.</span><span class="ident" id="4126329">Type</span><span class="op" id="4126333">(</span><span class="op" id="4126334">)</span><span class="op" id="4126335">)</span><span class="op" id="4126336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126340">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4126348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4126351">class</span>&nbsp;<span class="op" id="4126357">:=</span>&nbsp;<span class="ident" id="4126360">classUniversal</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126377">if</span>&nbsp;<span class="ident" id="4126380">params</span><span class="op" id="4126386">.</span><span class="ident" id="4126387">stringType</span>&nbsp;<span class="op" id="4126398">!=</span>&nbsp;<span class="num" id="4126401">0</span>&nbsp;<span class="op" id="4126403">&amp;&amp;</span>&nbsp;<span class="ident" id="4126406">tag</span>&nbsp;<span class="op" id="4126410">!=</span>&nbsp;<span class="ident" id="4126413">tagPrintableString</span>&nbsp;<span class="op" id="4126432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126436">return</span>&nbsp;<span class="ident" id="4126443">StructuralError</span><span class="op" id="4126458">{</span><span class="string" id="4126459">&#34;explicit&nbsp;string&nbsp;type&nbsp;given&nbsp;to&nbsp;non-string&nbsp;member&#34;</span><span class="op" id="4126508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4126511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126515">switch</span>&nbsp;<span class="ident" id="4126522">tag</span>&nbsp;<span class="op" id="4126526">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126529">case</span>&nbsp;<span class="ident" id="4126534">tagPrintableString</span><span class="op" id="4126552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126556">if</span>&nbsp;<span class="ident" id="4126559">params</span><span class="op" id="4126565">.</span><span class="ident" id="4126566">stringType</span>&nbsp;<span class="op" id="4126577">==</span>&nbsp;<span class="num" id="4126580">0</span>&nbsp;<span class="op" id="4126582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4126587">//&nbsp;This&nbsp;is&nbsp;a&nbsp;string&nbsp;without&nbsp;an&nbsp;explicit&nbsp;string&nbsp;type.&nbsp;We&#39;ll&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4126653">//&nbsp;a&nbsp;PrintableString&nbsp;if&nbsp;the&nbsp;character&nbsp;set&nbsp;in&nbsp;the&nbsp;string&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4126715">//&nbsp;sufficiently&nbsp;limited,&nbsp;otherwise&nbsp;we&#39;ll&nbsp;use&nbsp;a&nbsp;UTF8String.</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126777">for</span>&nbsp;<span class="ident" id="4126781">_</span><span class="op" id="4126782">,</span>&nbsp;<span class="ident" id="4126784">r</span>&nbsp;<span class="op" id="4126786">:=</span>&nbsp;<span class="keyword" id="4126789">range</span>&nbsp;<span class="ident" id="4126795">v</span><span class="op" id="4126796">.</span><span class="ident" id="4126797">String</span><span class="op" id="4126803">(</span><span class="op" id="4126804">)</span>&nbsp;<span class="op" id="4126806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126812">if</span>&nbsp;<span class="ident" id="4126815">r</span>&nbsp;<span class="op" id="4126817">&gt;=</span>&nbsp;<span class="ident" id="4126820">utf8</span><span class="op" id="4126824">.</span><span class="ident" id="4126825">RuneSelf</span>&nbsp;<span class="op" id="4126834">||</span>&nbsp;<span class="op" id="4126837">!</span><span class="ident" id="4126838">isPrintable</span><span class="op" id="4126849">(</span><span class="builtintype" id="4126850">byte</span><span class="op" id="4126854">(</span><span class="ident" id="4126855">r</span><span class="op" id="4126856">)</span><span class="op" id="4126857">)</span>&nbsp;<span class="op" id="4126859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126866">if</span>&nbsp;<span class="op" id="4126869">!</span><span class="ident" id="4126870">utf8</span><span class="op" id="4126874">.</span><span class="ident" id="4126875">ValidString</span><span class="op" id="4126886">(</span><span class="ident" id="4126887">v</span><span class="op" id="4126888">.</span><span class="ident" id="4126889">String</span><span class="op" id="4126895">(</span><span class="op" id="4126896">)</span><span class="op" id="4126897">)</span>&nbsp;<span class="op" id="4126899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126907">return</span>&nbsp;<span class="ident" id="4126914">errors</span><span class="op" id="4126920">.</span><span class="ident" id="4126921">New</span><span class="op" id="4126924">(</span><span class="string" id="4126925">&#34;asn1:&nbsp;string&nbsp;not&nbsp;valid&nbsp;UTF-8&#34;</span><span class="op" id="4126955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4126962">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4126969">tag</span>&nbsp;<span class="op" id="4126973">=</span>&nbsp;<span class="ident" id="4126975">tagUTF8String</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4126994">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127013">}</span>&nbsp;<span class="keyword" id="4127015">else</span>&nbsp;<span class="op" id="4127020">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127025">tag</span>&nbsp;<span class="op" id="4127029">=</span>&nbsp;<span class="ident" id="4127031">params</span><span class="op" id="4127037">.</span><span class="ident" id="4127038">stringType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127054">case</span>&nbsp;<span class="ident" id="4127059">tagUTCTime</span><span class="op" id="4127069">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127073">if</span>&nbsp;<span class="ident" id="4127076">outsideUTCRange</span><span class="op" id="4127091">(</span><span class="ident" id="4127092">v</span><span class="op" id="4127093">.</span><span class="ident" id="4127094">Interface</span><span class="op" id="4127103">(</span><span class="op" id="4127104">)</span><span class="op" id="4127105">.</span><span class="op" id="4127106">(</span><span class="ident" id="4127107">time</span><span class="op" id="4127111">.</span><span class="ident" id="4127112">Time</span><span class="op" id="4127116">)</span><span class="op" id="4127117">)</span>&nbsp;<span class="op" id="4127119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127124">tag</span>&nbsp;<span class="op" id="4127128">=</span>&nbsp;<span class="ident" id="4127130">tagGeneralizedTime</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127158">if</span>&nbsp;<span class="ident" id="4127161">params</span><span class="op" id="4127167">.</span><span class="ident" id="4127168">set</span>&nbsp;<span class="op" id="4127172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127176">if</span>&nbsp;<span class="ident" id="4127179">tag</span>&nbsp;<span class="op" id="4127183">!=</span>&nbsp;<span class="ident" id="4127186">tagSequence</span>&nbsp;<span class="op" id="4127198">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127203">return</span>&nbsp;<span class="ident" id="4127210">StructuralError</span><span class="op" id="4127225">{</span><span class="string" id="4127226">&#34;non&nbsp;sequence&nbsp;tagged&nbsp;as&nbsp;set&#34;</span><span class="op" id="4127254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127262">tag</span>&nbsp;<span class="op" id="4127266">=</span>&nbsp;<span class="ident" id="4127268">tagSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127280">tags</span><span class="op" id="4127284">,</span>&nbsp;<span class="ident" id="4127286">body</span>&nbsp;<span class="op" id="4127291">:=</span>&nbsp;<span class="ident" id="4127294">out</span><span class="op" id="4127297">.</span><span class="ident" id="4127298">fork</span><span class="op" id="4127302">(</span><span class="op" id="4127303">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127307">err</span>&nbsp;<span class="op" id="4127311">=</span>&nbsp;<span class="ident" id="4127313">marshalBody</span><span class="op" id="4127324">(</span><span class="ident" id="4127325">body</span><span class="op" id="4127329">,</span>&nbsp;<span class="ident" id="4127331">v</span><span class="op" id="4127332">,</span>&nbsp;<span class="ident" id="4127334">params</span><span class="op" id="4127340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127343">if</span>&nbsp;<span class="ident" id="4127346">err</span>&nbsp;<span class="op" id="4127350">!=</span>&nbsp;<span class="ident" id="4127353">nil</span>&nbsp;<span class="op" id="4127357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127361">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127373">bodyLen</span>&nbsp;<span class="op" id="4127381">:=</span>&nbsp;<span class="ident" id="4127384">body</span><span class="op" id="4127388">.</span><span class="ident" id="4127389">Len</span><span class="op" id="4127392">(</span><span class="op" id="4127393">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127397">var</span>&nbsp;<span class="ident" id="4127401">explicitTag</span>&nbsp;<span class="op" id="4127413">*</span><span class="ident" id="4127414">forkableWriter</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127430">if</span>&nbsp;<span class="ident" id="4127433">params</span><span class="op" id="4127439">.</span><span class="ident" id="4127440">explicit</span>&nbsp;<span class="op" id="4127449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127453">explicitTag</span><span class="op" id="4127464">,</span>&nbsp;<span class="ident" id="4127466">tags</span>&nbsp;<span class="op" id="4127471">=</span>&nbsp;<span class="ident" id="4127473">tags</span><span class="op" id="4127477">.</span><span class="ident" id="4127478">fork</span><span class="op" id="4127482">(</span><span class="op" id="4127483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127490">if</span>&nbsp;<span class="op" id="4127493">!</span><span class="ident" id="4127494">params</span><span class="op" id="4127500">.</span><span class="ident" id="4127501">explicit</span>&nbsp;<span class="op" id="4127510">&amp;&amp;</span>&nbsp;<span class="ident" id="4127513">params</span><span class="op" id="4127519">.</span><span class="ident" id="4127520">tag</span>&nbsp;<span class="op" id="4127524">!=</span>&nbsp;<span class="ident" id="4127527">nil</span>&nbsp;<span class="op" id="4127531">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4127535">//&nbsp;implicit&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127554">tag</span>&nbsp;<span class="op" id="4127558">=</span>&nbsp;<span class="op" id="4127560">*</span><span class="ident" id="4127561">params</span><span class="op" id="4127567">.</span><span class="ident" id="4127568">tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127574">class</span>&nbsp;<span class="op" id="4127580">=</span>&nbsp;<span class="ident" id="4127582">classContextSpecific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127608">err</span>&nbsp;<span class="op" id="4127612">=</span>&nbsp;<span class="ident" id="4127614">marshalTagAndLength</span><span class="op" id="4127633">(</span><span class="ident" id="4127634">tags</span><span class="op" id="4127638">,</span>&nbsp;<span class="ident" id="4127640">tagAndLength</span><span class="op" id="4127652">{</span><span class="ident" id="4127653">class</span><span class="op" id="4127658">,</span>&nbsp;<span class="ident" id="4127660">tag</span><span class="op" id="4127663">,</span>&nbsp;<span class="ident" id="4127665">bodyLen</span><span class="op" id="4127672">,</span>&nbsp;<span class="ident" id="4127674">isCompound</span><span class="op" id="4127684">}</span><span class="op" id="4127685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127688">if</span>&nbsp;<span class="ident" id="4127691">err</span>&nbsp;<span class="op" id="4127695">!=</span>&nbsp;<span class="ident" id="4127698">nil</span>&nbsp;<span class="op" id="4127702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127706">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127718">if</span>&nbsp;<span class="ident" id="4127721">params</span><span class="op" id="4127727">.</span><span class="ident" id="4127728">explicit</span>&nbsp;<span class="op" id="4127737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127741">err</span>&nbsp;<span class="op" id="4127745">=</span>&nbsp;<span class="ident" id="4127747">marshalTagAndLength</span><span class="op" id="4127766">(</span><span class="ident" id="4127767">explicitTag</span><span class="op" id="4127778">,</span>&nbsp;<span class="ident" id="4127780">tagAndLength</span><span class="op" id="4127792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127797">class</span><span class="op" id="4127802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127809">classContextSpecific</span><span class="op" id="4127829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127834">tag</span><span class="op" id="4127837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4127846">*</span><span class="ident" id="4127847">params</span><span class="op" id="4127853">.</span><span class="ident" id="4127854">tag</span><span class="op" id="4127857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127862">length</span><span class="op" id="4127868">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127874">bodyLen</span>&nbsp;<span class="op" id="4127882">+</span>&nbsp;<span class="ident" id="4127884">tags</span><span class="op" id="4127888">.</span><span class="ident" id="4127889">Len</span><span class="op" id="4127892">(</span><span class="op" id="4127893">)</span><span class="op" id="4127894">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4127899">isCompound</span><span class="op" id="4127909">:</span>&nbsp;<span class="builtintype" id="4127911">true</span><span class="op" id="4127915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127919">}</span><span class="op" id="4127920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4127923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127927">return</span>&nbsp;<span class="ident" id="4127934">nil</span><br>
<span class="lineno">625</span><span class="op" id="4127938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4127941">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;ASN.1&nbsp;encoding&nbsp;of&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="4127987">//</span><br>
<span class="lineno"></span><span class="comment" id="4127990">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;struct&nbsp;tags&nbsp;recognised&nbsp;by&nbsp;Unmarshal,&nbsp;the&nbsp;following&nbsp;can&nbsp;be</span><br>
<span class="lineno">630</span><span class="comment" id="4128070">//&nbsp;used:</span><br>
<span class="lineno"></span><span class="comment" id="4128079">//</span><br>
<span class="lineno"></span><span class="comment" id="4128082">//&nbsp;&nbsp;&nbsp;&nbspia5:&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcauses&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;IA5&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="4128144">//&nbsp;&nbsp;&nbsp;&nbspomitempty:&nbsp;&nbsp;&nbsp;&nbspcauses&nbsp;empty&nbsp;slices&nbsp;to&nbsp;be&nbsp;skipped</span><br>
<span class="lineno"></span><span class="comment" id="4128192">//&nbsp;&nbsp;&nbsp;&nbspprintable:&nbsp;&nbsp;&nbsp;&nbspcauses&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;PrintableString&nbsp;strings.</span><br>
<span class="lineno">635</span><span class="comment" id="4128272">//&nbsp;&nbsp;&nbsp;&nbsputf8:&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcauses&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;UTF8&nbsp;strings</span><br>
<span class="lineno"></span><span class="keyword" id="4128336">func</span>&nbsp;<span class="ident" id="4128341">Marshal</span><span class="op" id="4128348">(</span><span class="ident" id="4128349">val</span>&nbsp;<span class="keyword" id="4128353">interface</span><span class="op" id="4128362">{</span><span class="op" id="4128363">}</span><span class="op" id="4128364">)</span>&nbsp;<span class="op" id="4128366">(</span><span class="op" id="4128367">[</span><span class="op" id="4128368">]</span><span class="builtintype" id="4128369">byte</span><span class="op" id="4128373">,</span>&nbsp;<span class="builtintype" id="4128375">error</span><span class="op" id="4128380">)</span>&nbsp;<span class="op" id="4128382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4128385">var</span>&nbsp;<span class="ident" id="4128389">out</span>&nbsp;<span class="ident" id="4128393">bytes</span><span class="op" id="4128398">.</span><span class="ident" id="4128399">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4128407">v</span>&nbsp;<span class="op" id="4128409">:=</span>&nbsp;<span class="ident" id="4128412">reflect</span><span class="op" id="4128419">.</span><span class="ident" id="4128420">ValueOf</span><span class="op" id="4128427">(</span><span class="ident" id="4128428">val</span><span class="op" id="4128431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4128434">f</span>&nbsp;<span class="op" id="4128436">:=</span>&nbsp;<span class="ident" id="4128439">newForkableWriter</span><span class="op" id="4128456">(</span><span class="op" id="4128457">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4128460">err</span>&nbsp;<span class="op" id="4128464">:=</span>&nbsp;<span class="ident" id="4128467">marshalField</span><span class="op" id="4128479">(</span><span class="ident" id="4128480">f</span><span class="op" id="4128481">,</span>&nbsp;<span class="ident" id="4128483">v</span><span class="op" id="4128484">,</span>&nbsp;<span class="ident" id="4128486">fieldParameters</span><span class="op" id="4128501">{</span><span class="op" id="4128502">}</span><span class="op" id="4128503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4128506">if</span>&nbsp;<span class="ident" id="4128509">err</span>&nbsp;<span class="op" id="4128513">!=</span>&nbsp;<span class="ident" id="4128516">nil</span>&nbsp;<span class="op" id="4128520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4128524">return</span>&nbsp;<span class="ident" id="4128531">nil</span><span class="op" id="4128534">,</span>&nbsp;<span class="ident" id="4128536">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4128541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4128544">_</span><span class="op" id="4128545">,</span>&nbsp;<span class="ident" id="4128547">err</span>&nbsp;<span class="op" id="4128551">=</span>&nbsp;<span class="ident" id="4128553">f</span><span class="op" id="4128554">.</span><span class="ident" id="4128555">writeTo</span><span class="op" id="4128562">(</span><span class="op" id="4128563">&amp;</span><span class="ident" id="4128564">out</span><span class="op" id="4128567">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4128570">return</span>&nbsp;<span class="ident" id="4128577">out</span><span class="op" id="4128580">.</span><span class="ident" id="4128581">Bytes</span><span class="op" id="4128586">(</span><span class="op" id="4128587">)</span><span class="op" id="4128588">,</span>&nbsp;<span class="ident" id="4128590">nil</span><br>
<span class="lineno"></span><span class="op" id="4128594">}</span>
</div>
</body>
</html>
