<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5400862">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5400917">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5400971">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5401022">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5401090">//</span><br>
<span class="lineno"></span><span class="comment" id="5401093">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="5401171">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="5401246">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="5401296">//</span><br>
<span class="lineno"></span><span class="comment" id="5401299">//&nbsp;&nbsp;&nbsp;&nbspfield1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="5401323">//</span><br>
<span class="lineno"></span><span class="comment" id="5401326">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5401372">//</span><br>
<span class="lineno">15</span><span class="comment" id="5401375">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="5401443">//</span><br>
<span class="lineno"></span><span class="comment" id="5401446">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="5401525">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="5401590">//</span><br>
<span class="lineno">20</span><span class="comment" id="5401593">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="5401662">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5401732">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5401742">//</span><br>
<span class="lineno"></span><span class="comment" id="5401745">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="5401760">//</span><br>
<span class="lineno"></span><span class="comment" id="5401763">//&nbsp;&nbsp;&nbsp;&nbspnormal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5401795">//</span><br>
<span class="lineno"></span><span class="comment" id="5401798">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="5401823">//</span><br>
<span class="lineno">30</span><span class="comment" id="5401826">//&nbsp;&nbsp;&nbsp;&nbsp{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="5401863">//</span><br>
<span class="lineno"></span><span class="comment" id="5401866">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="5401936">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="5401979">//</span><br>
<span class="lineno">35</span><span class="comment" id="5401982">//&nbsp;&nbsp;&nbsp;&nbsp&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5402029">//</span><br>
<span class="lineno"></span><span class="comment" id="5402032">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5402046">//</span><br>
<span class="lineno"></span><span class="comment" id="5402049">//&nbsp;&nbsp;&nbsp;&nbsp{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="5402095">//</span><br>
<span class="lineno"></span><span class="comment" id="5402098">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="5402155">//</span><br>
<span class="lineno"></span><span class="comment" id="5402158">//&nbsp;&nbsp;&nbsp;&nbsp&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="5402173">//&nbsp;&nbsp;&nbsp;&nbspfield&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="5402196">//</span><br>
<span class="lineno"></span><span class="comment" id="5402199">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5402213">//</span><br>
<span class="lineno"></span><span class="comment" id="5402216">//&nbsp;&nbsp;&nbsp;&nbsp{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="5402232">//&nbsp;&nbsp;&nbsp;&nbspfield`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="5402257">package</span>&nbsp;<span class="ident" id="5402265">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5402270">import</span>&nbsp;<span class="op" id="5402277">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5402280">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5402289">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5402298">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5402308">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5402315">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5402321">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="5402331">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="5402334">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="5402382">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="5402430">type</span>&nbsp;<span class="ident" id="5402435">ParseError</span>&nbsp;<span class="keyword" id="5402446">struct</span>&nbsp;<span class="op" id="5402453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402456">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5402463">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5402469">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402503">Column</span>&nbsp;<span class="builtintype" id="5402510">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5402516">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402565">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5402572">error</span>&nbsp;<span class="comment" id="5402578">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="5402598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5402601">func</span>&nbsp;<span class="op" id="5402606">(</span><span class="ident" id="5402607">e</span>&nbsp;<span class="op" id="5402609">*</span><span class="ident" id="5402610">ParseError</span><span class="op" id="5402620">)</span>&nbsp;<span class="ident" id="5402622">Error</span><span class="op" id="5402627">(</span><span class="op" id="5402628">)</span>&nbsp;<span class="builtintype" id="5402630">string</span>&nbsp;<span class="op" id="5402637">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5402640">return</span>&nbsp;<span class="ident" id="5402647">fmt</span><span class="op" id="5402650">.</span><span class="ident" id="5402651">Sprintf</span><span class="op" id="5402658">(</span><span class="string" id="5402659">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="5402683">,</span>&nbsp;<span class="ident" id="5402685">e</span><span class="op" id="5402686">.</span><span class="ident" id="5402687">Line</span><span class="op" id="5402691">,</span>&nbsp;<span class="ident" id="5402693">e</span><span class="op" id="5402694">.</span><span class="ident" id="5402695">Column</span><span class="op" id="5402701">,</span>&nbsp;<span class="ident" id="5402703">e</span><span class="op" id="5402704">.</span><span class="ident" id="5402705">Err</span><span class="op" id="5402708">)</span><br>
<span class="lineno"></span><span class="op" id="5402710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5402713">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="5402778">var</span>&nbsp;<span class="op" id="5402782">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402785">ErrTrailingComma</span>&nbsp;<span class="op" id="5402802">=</span>&nbsp;<span class="ident" id="5402804">errors</span><span class="op" id="5402810">.</span><span class="ident" id="5402811">New</span><span class="op" id="5402814">(</span><span class="string" id="5402815">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="5402847">)</span>&nbsp;<span class="comment" id="5402849">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402868">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5402885">=</span>&nbsp;<span class="ident" id="5402887">errors</span><span class="op" id="5402893">.</span><span class="ident" id="5402894">New</span><span class="op" id="5402897">(</span><span class="string" id="5402898">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="5402927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402930">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5402947">=</span>&nbsp;<span class="ident" id="5402949">errors</span><span class="op" id="5402955">.</span><span class="ident" id="5402956">New</span><span class="op" id="5402959">(</span><span class="string" id="5402960">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="5402984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402987">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5403004">=</span>&nbsp;<span class="ident" id="5403006">errors</span><span class="op" id="5403012">.</span><span class="ident" id="5403013">New</span><span class="op" id="5403016">(</span><span class="string" id="5403017">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="5403049">)</span><br>
<span class="lineno"></span><span class="op" id="5403051">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5403054">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5403105">//</span><br>
<span class="lineno"></span><span class="comment" id="5403108">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="5403184">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="5403258">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="5403292">//</span><br>
<span class="lineno"></span><span class="comment" id="5403295">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5403349">//</span><br>
<span class="lineno"></span><span class="comment" id="5403352">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="5403425">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5403459">//</span><br>
<span class="lineno"></span><span class="comment" id="5403462">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5403526">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5403604">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="5403677">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5403752">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="5403810">//</span><br>
<span class="lineno"></span><span class="comment" id="5403813">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5403885">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="5403936">//</span><br>
<span class="lineno"></span><span class="comment" id="5403939">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="5404014">type</span>&nbsp;<span class="ident" id="5404019">Reader</span>&nbsp;<span class="keyword" id="5404026">struct</span>&nbsp;<span class="op" id="5404033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404036">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5404053">rune</span>&nbsp;<span class="comment" id="5404058">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404104">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5404121">rune</span>&nbsp;<span class="comment" id="5404126">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404166">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="5404183">int</span>&nbsp;&nbsp;<span class="comment" id="5404188">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404229">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5404246">bool</span>&nbsp;<span class="comment" id="5404251">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404273">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5404290">bool</span>&nbsp;<span class="comment" id="5404295">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404341">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="5404358">bool</span>&nbsp;<span class="comment" id="5404363">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404386">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5404403">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404408">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5404425">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404430">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5404447">*</span><span class="ident" id="5404448">bufio</span><span class="op" id="5404453">.</span><span class="ident" id="5404454">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404462">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5404479">bytes</span><span class="op" id="5404484">.</span><span class="ident" id="5404485">Buffer</span><br>
<span class="lineno"></span><span class="op" id="5404492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="5404495">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="5404548">func</span>&nbsp;<span class="ident" id="5404553">NewReader</span><span class="op" id="5404562">(</span><span class="ident" id="5404563">r</span>&nbsp;<span class="ident" id="5404565">io</span><span class="op" id="5404567">.</span><span class="ident" id="5404568">Reader</span><span class="op" id="5404574">)</span>&nbsp;<span class="op" id="5404576">*</span><span class="ident" id="5404577">Reader</span>&nbsp;<span class="op" id="5404584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5404587">return</span>&nbsp;<span class="op" id="5404594">&amp;</span><span class="ident" id="5404595">Reader</span><span class="op" id="5404601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404605">Comma</span><span class="op" id="5404610">:</span>&nbsp;<span class="string" id="5404612">&#39;,&#39;</span><span class="op" id="5404615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404619">r</span><span class="op" id="5404620">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5404626">bufio</span><span class="op" id="5404631">.</span><span class="ident" id="5404632">NewReader</span><span class="op" id="5404641">(</span><span class="ident" id="5404642">r</span><span class="op" id="5404643">)</span><span class="op" id="5404644">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5404647">}</span><br>
<span class="lineno"></span><span class="op" id="5404649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5404652">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="5404700">func</span>&nbsp;<span class="op" id="5404705">(</span><span class="ident" id="5404706">r</span>&nbsp;<span class="op" id="5404708">*</span><span class="ident" id="5404709">Reader</span><span class="op" id="5404715">)</span>&nbsp;<span class="builtintype" id="5404717">error</span><span class="op" id="5404722">(</span><span class="ident" id="5404723">err</span>&nbsp;<span class="builtintype" id="5404727">error</span><span class="op" id="5404732">)</span>&nbsp;<span class="builtintype" id="5404734">error</span>&nbsp;<span class="op" id="5404740">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5404743">return</span>&nbsp;<span class="op" id="5404750">&amp;</span><span class="ident" id="5404751">ParseError</span><span class="op" id="5404761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404765">Line</span><span class="op" id="5404769">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5404773">r</span><span class="op" id="5404774">.</span><span class="ident" id="5404775">line</span><span class="op" id="5404779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404783">Column</span><span class="op" id="5404789">:</span>&nbsp;<span class="ident" id="5404791">r</span><span class="op" id="5404792">.</span><span class="ident" id="5404793">column</span><span class="op" id="5404799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404803">Err</span><span class="op" id="5404806">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5404811">err</span><span class="op" id="5404814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5404817">}</span><br>
<span class="lineno">130</span><span class="op" id="5404819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5404822">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="5404899">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="5404933">func</span>&nbsp;<span class="op" id="5404938">(</span><span class="ident" id="5404939">r</span>&nbsp;<span class="op" id="5404941">*</span><span class="ident" id="5404942">Reader</span><span class="op" id="5404948">)</span>&nbsp;<span class="ident" id="5404950">Read</span><span class="op" id="5404954">(</span><span class="op" id="5404955">)</span>&nbsp;<span class="op" id="5404957">(</span><span class="ident" id="5404958">record</span>&nbsp;<span class="op" id="5404965">[</span><span class="op" id="5404966">]</span><span class="builtintype" id="5404967">string</span><span class="op" id="5404973">,</span>&nbsp;<span class="ident" id="5404975">err</span>&nbsp;<span class="builtintype" id="5404979">error</span><span class="op" id="5404984">)</span>&nbsp;<span class="op" id="5404986">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5404989">for</span>&nbsp;<span class="op" id="5404993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5404997">record</span><span class="op" id="5405003">,</span>&nbsp;<span class="ident" id="5405005">err</span>&nbsp;<span class="op" id="5405009">=</span>&nbsp;<span class="ident" id="5405011">r</span><span class="op" id="5405012">.</span><span class="ident" id="5405013">parseRecord</span><span class="op" id="5405024">(</span><span class="op" id="5405025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405029">if</span>&nbsp;<span class="ident" id="5405032">record</span>&nbsp;<span class="op" id="5405039">!=</span>&nbsp;<span class="ident" id="5405042">nil</span>&nbsp;<span class="op" id="5405046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405051">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405059">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405063">if</span>&nbsp;<span class="ident" id="5405066">err</span>&nbsp;<span class="op" id="5405070">!=</span>&nbsp;<span class="ident" id="5405073">nil</span>&nbsp;<span class="op" id="5405077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405082">return</span>&nbsp;<span class="ident" id="5405089">nil</span><span class="op" id="5405092">,</span>&nbsp;<span class="ident" id="5405094">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405107">if</span>&nbsp;<span class="ident" id="5405110">r</span><span class="op" id="5405111">.</span><span class="ident" id="5405112">FieldsPerRecord</span>&nbsp;<span class="op" id="5405128">&gt;</span>&nbsp;<span class="num" id="5405130">0</span>&nbsp;<span class="op" id="5405132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405136">if</span>&nbsp;<span class="builtinfunc" id="5405139">len</span><span class="op" id="5405142">(</span><span class="ident" id="5405143">record</span><span class="op" id="5405149">)</span>&nbsp;<span class="op" id="5405151">!=</span>&nbsp;<span class="ident" id="5405154">r</span><span class="op" id="5405155">.</span><span class="ident" id="5405156">FieldsPerRecord</span>&nbsp;<span class="op" id="5405172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405177">r</span><span class="op" id="5405178">.</span><span class="ident" id="5405179">column</span>&nbsp;<span class="op" id="5405186">=</span>&nbsp;<span class="num" id="5405188">0</span>&nbsp;<span class="comment" id="5405190">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405222">return</span>&nbsp;<span class="ident" id="5405229">record</span><span class="op" id="5405235">,</span>&nbsp;<span class="ident" id="5405237">r</span><span class="op" id="5405238">.</span><span class="builtintype" id="5405239">error</span><span class="op" id="5405244">(</span><span class="ident" id="5405245">ErrFieldCount</span><span class="op" id="5405258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405262">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405265">}</span>&nbsp;<span class="keyword" id="5405267">else</span>&nbsp;<span class="keyword" id="5405272">if</span>&nbsp;<span class="ident" id="5405275">r</span><span class="op" id="5405276">.</span><span class="ident" id="5405277">FieldsPerRecord</span>&nbsp;<span class="op" id="5405293">==</span>&nbsp;<span class="num" id="5405296">0</span>&nbsp;<span class="op" id="5405298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405302">r</span><span class="op" id="5405303">.</span><span class="ident" id="5405304">FieldsPerRecord</span>&nbsp;<span class="op" id="5405320">=</span>&nbsp;<span class="builtinfunc" id="5405322">len</span><span class="op" id="5405325">(</span><span class="ident" id="5405326">record</span><span class="op" id="5405332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405338">return</span>&nbsp;<span class="ident" id="5405345">record</span><span class="op" id="5405351">,</span>&nbsp;<span class="ident" id="5405353">nil</span><br>
<span class="lineno"></span><span class="op" id="5405357">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="5405360">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5405411">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="5405448">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5405524">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="5405602">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="5405615">func</span>&nbsp;<span class="op" id="5405620">(</span><span class="ident" id="5405621">r</span>&nbsp;<span class="op" id="5405623">*</span><span class="ident" id="5405624">Reader</span><span class="op" id="5405630">)</span>&nbsp;<span class="ident" id="5405632">ReadAll</span><span class="op" id="5405639">(</span><span class="op" id="5405640">)</span>&nbsp;<span class="op" id="5405642">(</span><span class="ident" id="5405643">records</span>&nbsp;<span class="op" id="5405651">[</span><span class="op" id="5405652">]</span><span class="op" id="5405653">[</span><span class="op" id="5405654">]</span><span class="builtintype" id="5405655">string</span><span class="op" id="5405661">,</span>&nbsp;<span class="ident" id="5405663">err</span>&nbsp;<span class="builtintype" id="5405667">error</span><span class="op" id="5405672">)</span>&nbsp;<span class="op" id="5405674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405677">for</span>&nbsp;<span class="op" id="5405681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405685">record</span><span class="op" id="5405691">,</span>&nbsp;<span class="ident" id="5405693">err</span>&nbsp;<span class="op" id="5405697">:=</span>&nbsp;<span class="ident" id="5405700">r</span><span class="op" id="5405701">.</span><span class="ident" id="5405702">Read</span><span class="op" id="5405706">(</span><span class="op" id="5405707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405711">if</span>&nbsp;<span class="ident" id="5405714">err</span>&nbsp;<span class="op" id="5405718">==</span>&nbsp;<span class="ident" id="5405721">io</span><span class="op" id="5405723">.</span><span class="ident" id="5405724">EOF</span>&nbsp;<span class="op" id="5405728">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405733">return</span>&nbsp;<span class="ident" id="5405740">records</span><span class="op" id="5405747">,</span>&nbsp;<span class="ident" id="5405749">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405759">if</span>&nbsp;<span class="ident" id="5405762">err</span>&nbsp;<span class="op" id="5405766">!=</span>&nbsp;<span class="ident" id="5405769">nil</span>&nbsp;<span class="op" id="5405773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5405778">return</span>&nbsp;<span class="ident" id="5405785">nil</span><span class="op" id="5405788">,</span>&nbsp;<span class="ident" id="5405790">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405796">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405800">records</span>&nbsp;<span class="op" id="5405808">=</span>&nbsp;<span class="builtinfunc" id="5405810">append</span><span class="op" id="5405816">(</span><span class="ident" id="5405817">records</span><span class="op" id="5405824">,</span>&nbsp;<span class="ident" id="5405826">record</span><span class="op" id="5405832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5405835">}</span><br>
<span class="lineno"></span><span class="op" id="5405837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5405840">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="5405912">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="5405988">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="5406031">func</span>&nbsp;<span class="op" id="5406036">(</span><span class="ident" id="5406037">r</span>&nbsp;<span class="op" id="5406039">*</span><span class="ident" id="5406040">Reader</span><span class="op" id="5406046">)</span>&nbsp;<span class="ident" id="5406048">readRune</span><span class="op" id="5406056">(</span><span class="op" id="5406057">)</span>&nbsp;<span class="op" id="5406059">(</span><span class="builtintype" id="5406060">rune</span><span class="op" id="5406064">,</span>&nbsp;<span class="builtintype" id="5406066">error</span><span class="op" id="5406071">)</span>&nbsp;<span class="op" id="5406073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406076">r1</span><span class="op" id="5406078">,</span>&nbsp;<span class="ident" id="5406080">_</span><span class="op" id="5406081">,</span>&nbsp;<span class="ident" id="5406083">err</span>&nbsp;<span class="op" id="5406087">:=</span>&nbsp;<span class="ident" id="5406090">r</span><span class="op" id="5406091">.</span><span class="ident" id="5406092">r</span><span class="op" id="5406093">.</span><span class="ident" id="5406094">ReadRune</span><span class="op" id="5406102">(</span><span class="op" id="5406103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5406107">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5406170">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5406232">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406298">if</span>&nbsp;<span class="ident" id="5406301">r1</span>&nbsp;<span class="op" id="5406304">==</span>&nbsp;<span class="string" id="5406307">&#39;\r&#39;</span>&nbsp;<span class="op" id="5406312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406316">r1</span><span class="op" id="5406318">,</span>&nbsp;<span class="ident" id="5406320">_</span><span class="op" id="5406321">,</span>&nbsp;<span class="ident" id="5406323">err</span>&nbsp;<span class="op" id="5406327">=</span>&nbsp;<span class="ident" id="5406329">r</span><span class="op" id="5406330">.</span><span class="ident" id="5406331">r</span><span class="op" id="5406332">.</span><span class="ident" id="5406333">ReadRune</span><span class="op" id="5406341">(</span><span class="op" id="5406342">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406346">if</span>&nbsp;<span class="ident" id="5406349">err</span>&nbsp;<span class="op" id="5406353">==</span>&nbsp;<span class="ident" id="5406356">nil</span>&nbsp;<span class="op" id="5406360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406365">if</span>&nbsp;<span class="ident" id="5406368">r1</span>&nbsp;<span class="op" id="5406371">!=</span>&nbsp;<span class="string" id="5406374">&#39;\n&#39;</span>&nbsp;<span class="op" id="5406379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406385">r</span><span class="op" id="5406386">.</span><span class="ident" id="5406387">r</span><span class="op" id="5406388">.</span><span class="ident" id="5406389">UnreadRune</span><span class="op" id="5406399">(</span><span class="op" id="5406400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406406">r1</span>&nbsp;<span class="op" id="5406409">=</span>&nbsp;<span class="string" id="5406411">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5406419">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5406423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5406426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406429">r</span><span class="op" id="5406430">.</span><span class="ident" id="5406431">column</span><span class="op" id="5406437">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406441">return</span>&nbsp;<span class="ident" id="5406448">r1</span><span class="op" id="5406450">,</span>&nbsp;<span class="ident" id="5406452">err</span><br>
<span class="lineno"></span><span class="op" id="5406456">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="5406459">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5406530">func</span>&nbsp;<span class="op" id="5406535">(</span><span class="ident" id="5406536">r</span>&nbsp;<span class="op" id="5406538">*</span><span class="ident" id="5406539">Reader</span><span class="op" id="5406545">)</span>&nbsp;<span class="ident" id="5406547">skip</span><span class="op" id="5406551">(</span><span class="ident" id="5406552">delim</span>&nbsp;<span class="builtintype" id="5406558">rune</span><span class="op" id="5406562">)</span>&nbsp;<span class="builtintype" id="5406564">error</span>&nbsp;<span class="op" id="5406570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406573">for</span>&nbsp;<span class="op" id="5406577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406581">r1</span><span class="op" id="5406583">,</span>&nbsp;<span class="ident" id="5406585">err</span>&nbsp;<span class="op" id="5406589">:=</span>&nbsp;<span class="ident" id="5406592">r</span><span class="op" id="5406593">.</span><span class="ident" id="5406594">readRune</span><span class="op" id="5406602">(</span><span class="op" id="5406603">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406607">if</span>&nbsp;<span class="ident" id="5406610">err</span>&nbsp;<span class="op" id="5406614">!=</span>&nbsp;<span class="ident" id="5406617">nil</span>&nbsp;<span class="op" id="5406621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406626">return</span>&nbsp;<span class="ident" id="5406633">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5406639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406643">if</span>&nbsp;<span class="ident" id="5406646">r1</span>&nbsp;<span class="op" id="5406649">==</span>&nbsp;<span class="ident" id="5406652">delim</span>&nbsp;<span class="op" id="5406658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406663">return</span>&nbsp;<span class="ident" id="5406670">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5406676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5406679">}</span><br>
<span class="lineno"></span><span class="op" id="5406681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5406684">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="5406744">func</span>&nbsp;<span class="op" id="5406749">(</span><span class="ident" id="5406750">r</span>&nbsp;<span class="op" id="5406752">*</span><span class="ident" id="5406753">Reader</span><span class="op" id="5406759">)</span>&nbsp;<span class="ident" id="5406761">parseRecord</span><span class="op" id="5406772">(</span><span class="op" id="5406773">)</span>&nbsp;<span class="op" id="5406775">(</span><span class="ident" id="5406776">fields</span>&nbsp;<span class="op" id="5406783">[</span><span class="op" id="5406784">]</span><span class="builtintype" id="5406785">string</span><span class="op" id="5406791">,</span>&nbsp;<span class="ident" id="5406793">err</span>&nbsp;<span class="builtintype" id="5406797">error</span><span class="op" id="5406802">)</span>&nbsp;<span class="op" id="5406804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5406807">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5406868">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5406926">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406997">r</span><span class="op" id="5406998">.</span><span class="ident" id="5406999">line</span><span class="op" id="5407003">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5407007">r</span><span class="op" id="5407008">.</span><span class="ident" id="5407009">column</span>&nbsp;<span class="op" id="5407016">=</span>&nbsp;<span class="op" id="5407018">-</span><span class="num" id="5407019">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5407023">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5407083">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5407146">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5407181">r1</span><span class="op" id="5407183">,</span>&nbsp;<span class="ident" id="5407185">_</span><span class="op" id="5407186">,</span>&nbsp;<span class="ident" id="5407188">err</span>&nbsp;<span class="op" id="5407192">:=</span>&nbsp;<span class="ident" id="5407195">r</span><span class="op" id="5407196">.</span><span class="ident" id="5407197">r</span><span class="op" id="5407198">.</span><span class="ident" id="5407199">ReadRune</span><span class="op" id="5407207">(</span><span class="op" id="5407208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407211">if</span>&nbsp;<span class="ident" id="5407214">err</span>&nbsp;<span class="op" id="5407218">!=</span>&nbsp;<span class="ident" id="5407221">nil</span>&nbsp;<span class="op" id="5407225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407229">return</span>&nbsp;<span class="ident" id="5407236">nil</span><span class="op" id="5407239">,</span>&nbsp;<span class="ident" id="5407241">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5407246">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407250">if</span>&nbsp;<span class="ident" id="5407253">r</span><span class="op" id="5407254">.</span><span class="ident" id="5407255">Comment</span>&nbsp;<span class="op" id="5407263">!=</span>&nbsp;<span class="num" id="5407266">0</span>&nbsp;<span class="op" id="5407268">&amp;&amp;</span>&nbsp;<span class="ident" id="5407271">r1</span>&nbsp;<span class="op" id="5407274">==</span>&nbsp;<span class="ident" id="5407277">r</span><span class="op" id="5407278">.</span><span class="ident" id="5407279">Comment</span>&nbsp;<span class="op" id="5407287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407291">return</span>&nbsp;<span class="ident" id="5407298">nil</span><span class="op" id="5407301">,</span>&nbsp;<span class="ident" id="5407303">r</span><span class="op" id="5407304">.</span><span class="ident" id="5407305">skip</span><span class="op" id="5407309">(</span><span class="string" id="5407310">&#39;\n&#39;</span><span class="op" id="5407314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5407317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5407320">r</span><span class="op" id="5407321">.</span><span class="ident" id="5407322">r</span><span class="op" id="5407323">.</span><span class="ident" id="5407324">UnreadRune</span><span class="op" id="5407334">(</span><span class="op" id="5407335">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5407339">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407385">for</span>&nbsp;<span class="op" id="5407389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5407393">haveField</span><span class="op" id="5407402">,</span>&nbsp;<span class="ident" id="5407404">delim</span><span class="op" id="5407409">,</span>&nbsp;<span class="ident" id="5407411">err</span>&nbsp;<span class="op" id="5407415">:=</span>&nbsp;<span class="ident" id="5407418">r</span><span class="op" id="5407419">.</span><span class="ident" id="5407420">parseField</span><span class="op" id="5407430">(</span><span class="op" id="5407431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407435">if</span>&nbsp;<span class="ident" id="5407438">haveField</span>&nbsp;<span class="op" id="5407448">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5407453">fields</span>&nbsp;<span class="op" id="5407460">=</span>&nbsp;<span class="builtinfunc" id="5407462">append</span><span class="op" id="5407468">(</span><span class="ident" id="5407469">fields</span><span class="op" id="5407475">,</span>&nbsp;<span class="ident" id="5407477">r</span><span class="op" id="5407478">.</span><span class="ident" id="5407479">field</span><span class="op" id="5407484">.</span><span class="ident" id="5407485">String</span><span class="op" id="5407491">(</span><span class="op" id="5407492">)</span><span class="op" id="5407493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5407497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407501">if</span>&nbsp;<span class="ident" id="5407504">delim</span>&nbsp;<span class="op" id="5407510">==</span>&nbsp;<span class="string" id="5407513">&#39;\n&#39;</span>&nbsp;<span class="op" id="5407518">||</span>&nbsp;<span class="ident" id="5407521">err</span>&nbsp;<span class="op" id="5407525">==</span>&nbsp;<span class="ident" id="5407528">io</span><span class="op" id="5407530">.</span><span class="ident" id="5407531">EOF</span>&nbsp;<span class="op" id="5407535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407540">return</span>&nbsp;<span class="ident" id="5407547">fields</span><span class="op" id="5407553">,</span>&nbsp;<span class="ident" id="5407555">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5407561">}</span>&nbsp;<span class="keyword" id="5407563">else</span>&nbsp;<span class="keyword" id="5407568">if</span>&nbsp;<span class="ident" id="5407571">err</span>&nbsp;<span class="op" id="5407575">!=</span>&nbsp;<span class="ident" id="5407578">nil</span>&nbsp;<span class="op" id="5407582">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407587">return</span>&nbsp;<span class="ident" id="5407594">nil</span><span class="op" id="5407597">,</span>&nbsp;<span class="ident" id="5407599">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5407605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5407608">}</span><br>
<span class="lineno"></span><span class="op" id="5407610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="5407613">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5407683">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5407758">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="5407780">func</span>&nbsp;<span class="op" id="5407785">(</span><span class="ident" id="5407786">r</span>&nbsp;<span class="op" id="5407788">*</span><span class="ident" id="5407789">Reader</span><span class="op" id="5407795">)</span>&nbsp;<span class="ident" id="5407797">parseField</span><span class="op" id="5407807">(</span><span class="op" id="5407808">)</span>&nbsp;<span class="op" id="5407810">(</span><span class="ident" id="5407811">haveField</span>&nbsp;<span class="builtintype" id="5407821">bool</span><span class="op" id="5407825">,</span>&nbsp;<span class="ident" id="5407827">delim</span>&nbsp;<span class="builtintype" id="5407833">rune</span><span class="op" id="5407837">,</span>&nbsp;<span class="ident" id="5407839">err</span>&nbsp;<span class="builtintype" id="5407843">error</span><span class="op" id="5407848">)</span>&nbsp;<span class="op" id="5407850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5407853">r</span><span class="op" id="5407854">.</span><span class="ident" id="5407855">field</span><span class="op" id="5407860">.</span><span class="ident" id="5407861">Reset</span><span class="op" id="5407866">(</span><span class="op" id="5407867">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5407871">r1</span><span class="op" id="5407873">,</span>&nbsp;<span class="ident" id="5407875">err</span>&nbsp;<span class="op" id="5407879">:=</span>&nbsp;<span class="ident" id="5407882">r</span><span class="op" id="5407883">.</span><span class="ident" id="5407884">readRune</span><span class="op" id="5407892">(</span><span class="op" id="5407893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5407896">for</span>&nbsp;<span class="ident" id="5407900">err</span>&nbsp;<span class="op" id="5407904">==</span>&nbsp;<span class="ident" id="5407907">nil</span>&nbsp;<span class="op" id="5407911">&amp;&amp;</span>&nbsp;<span class="ident" id="5407914">r</span><span class="op" id="5407915">.</span><span class="ident" id="5407916">TrimLeadingSpace</span>&nbsp;<span class="op" id="5407933">&amp;&amp;</span>&nbsp;<span class="ident" id="5407936">r1</span>&nbsp;<span class="op" id="5407939">!=</span>&nbsp;<span class="string" id="5407942">&#39;\n&#39;</span>&nbsp;<span class="op" id="5407947">&amp;&amp;</span>&nbsp;<span class="ident" id="5407950">unicode</span><span class="op" id="5407957">.</span><span class="ident" id="5407958">IsSpace</span><span class="op" id="5407965">(</span><span class="ident" id="5407966">r1</span><span class="op" id="5407968">)</span>&nbsp;<span class="op" id="5407970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5407974">r1</span><span class="op" id="5407976">,</span>&nbsp;<span class="ident" id="5407978">err</span>&nbsp;<span class="op" id="5407982">=</span>&nbsp;<span class="ident" id="5407984">r</span><span class="op" id="5407985">.</span><span class="ident" id="5407986">readRune</span><span class="op" id="5407994">(</span><span class="op" id="5407995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5407998">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408002">if</span>&nbsp;<span class="ident" id="5408005">err</span>&nbsp;<span class="op" id="5408009">==</span>&nbsp;<span class="ident" id="5408012">io</span><span class="op" id="5408014">.</span><span class="ident" id="5408015">EOF</span>&nbsp;<span class="op" id="5408019">&amp;&amp;</span>&nbsp;<span class="ident" id="5408022">r</span><span class="op" id="5408023">.</span><span class="ident" id="5408024">column</span>&nbsp;<span class="op" id="5408031">!=</span>&nbsp;<span class="num" id="5408034">0</span>&nbsp;<span class="op" id="5408036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408040">return</span>&nbsp;<span class="builtintype" id="5408047">true</span><span class="op" id="5408051">,</span>&nbsp;<span class="num" id="5408053">0</span><span class="op" id="5408054">,</span>&nbsp;<span class="ident" id="5408056">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408064">if</span>&nbsp;<span class="ident" id="5408067">err</span>&nbsp;<span class="op" id="5408071">!=</span>&nbsp;<span class="ident" id="5408074">nil</span>&nbsp;<span class="op" id="5408078">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408082">return</span>&nbsp;<span class="builtintype" id="5408089">false</span><span class="op" id="5408094">,</span>&nbsp;<span class="num" id="5408096">0</span><span class="op" id="5408097">,</span>&nbsp;<span class="ident" id="5408099">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408108">switch</span>&nbsp;<span class="ident" id="5408115">r1</span>&nbsp;<span class="op" id="5408118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408121">case</span>&nbsp;<span class="ident" id="5408126">r</span><span class="op" id="5408127">.</span><span class="ident" id="5408128">Comma</span><span class="op" id="5408133">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5408137">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408159">case</span>&nbsp;<span class="string" id="5408164">&#39;\n&#39;</span><span class="op" id="5408168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5408172">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408223">if</span>&nbsp;<span class="ident" id="5408226">r</span><span class="op" id="5408227">.</span><span class="ident" id="5408228">column</span>&nbsp;<span class="op" id="5408235">==</span>&nbsp;<span class="num" id="5408238">0</span>&nbsp;<span class="op" id="5408240">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408245">return</span>&nbsp;<span class="builtintype" id="5408252">false</span><span class="op" id="5408257">,</span>&nbsp;<span class="ident" id="5408259">r1</span><span class="op" id="5408261">,</span>&nbsp;<span class="ident" id="5408263">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408273">return</span>&nbsp;<span class="builtintype" id="5408280">true</span><span class="op" id="5408284">,</span>&nbsp;<span class="ident" id="5408286">r1</span><span class="op" id="5408288">,</span>&nbsp;<span class="ident" id="5408290">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408296">case</span>&nbsp;<span class="string" id="5408301">&#39;&#34;&#39;</span><span class="op" id="5408304">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5408308">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408325">Quoted</span><span class="op" id="5408331">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408335">for</span>&nbsp;<span class="op" id="5408339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408344">r1</span><span class="op" id="5408346">,</span>&nbsp;<span class="ident" id="5408348">err</span>&nbsp;<span class="op" id="5408352">=</span>&nbsp;<span class="ident" id="5408354">r</span><span class="op" id="5408355">.</span><span class="ident" id="5408356">readRune</span><span class="op" id="5408364">(</span><span class="op" id="5408365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408370">if</span>&nbsp;<span class="ident" id="5408373">err</span>&nbsp;<span class="op" id="5408377">!=</span>&nbsp;<span class="ident" id="5408380">nil</span>&nbsp;<span class="op" id="5408384">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408390">if</span>&nbsp;<span class="ident" id="5408393">err</span>&nbsp;<span class="op" id="5408397">==</span>&nbsp;<span class="ident" id="5408400">io</span><span class="op" id="5408402">.</span><span class="ident" id="5408403">EOF</span>&nbsp;<span class="op" id="5408407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408414">if</span>&nbsp;<span class="ident" id="5408417">r</span><span class="op" id="5408418">.</span><span class="ident" id="5408419">LazyQuotes</span>&nbsp;<span class="op" id="5408430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408438">return</span>&nbsp;<span class="builtintype" id="5408445">true</span><span class="op" id="5408449">,</span>&nbsp;<span class="num" id="5408451">0</span><span class="op" id="5408452">,</span>&nbsp;<span class="ident" id="5408454">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408470">return</span>&nbsp;<span class="builtintype" id="5408477">false</span><span class="op" id="5408482">,</span>&nbsp;<span class="num" id="5408484">0</span><span class="op" id="5408485">,</span>&nbsp;<span class="ident" id="5408487">r</span><span class="op" id="5408488">.</span><span class="builtintype" id="5408489">error</span><span class="op" id="5408494">(</span><span class="ident" id="5408495">ErrQuote</span><span class="op" id="5408503">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408515">return</span>&nbsp;<span class="builtintype" id="5408522">false</span><span class="op" id="5408527">,</span>&nbsp;<span class="num" id="5408529">0</span><span class="op" id="5408530">,</span>&nbsp;<span class="ident" id="5408532">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408544">switch</span>&nbsp;<span class="ident" id="5408551">r1</span>&nbsp;<span class="op" id="5408554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408559">case</span>&nbsp;<span class="string" id="5408564">&#39;&#34;&#39;</span><span class="op" id="5408567">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408573">r1</span><span class="op" id="5408575">,</span>&nbsp;<span class="ident" id="5408577">err</span>&nbsp;<span class="op" id="5408581">=</span>&nbsp;<span class="ident" id="5408583">r</span><span class="op" id="5408584">.</span><span class="ident" id="5408585">readRune</span><span class="op" id="5408593">(</span><span class="op" id="5408594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408600">if</span>&nbsp;<span class="ident" id="5408603">err</span>&nbsp;<span class="op" id="5408607">!=</span>&nbsp;<span class="ident" id="5408610">nil</span>&nbsp;<span class="op" id="5408614">||</span>&nbsp;<span class="ident" id="5408617">r1</span>&nbsp;<span class="op" id="5408620">==</span>&nbsp;<span class="ident" id="5408623">r</span><span class="op" id="5408624">.</span><span class="ident" id="5408625">Comma</span>&nbsp;<span class="op" id="5408631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408638">break</span>&nbsp;<span class="ident" id="5408644">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408661">if</span>&nbsp;<span class="ident" id="5408664">r1</span>&nbsp;<span class="op" id="5408667">==</span>&nbsp;<span class="string" id="5408670">&#39;\n&#39;</span>&nbsp;<span class="op" id="5408675">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408682">return</span>&nbsp;<span class="builtintype" id="5408689">true</span><span class="op" id="5408693">,</span>&nbsp;<span class="ident" id="5408695">r1</span><span class="op" id="5408697">,</span>&nbsp;<span class="ident" id="5408699">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408713">if</span>&nbsp;<span class="ident" id="5408716">r1</span>&nbsp;<span class="op" id="5408719">!=</span>&nbsp;<span class="string" id="5408722">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5408726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408733">if</span>&nbsp;<span class="op" id="5408736">!</span><span class="ident" id="5408737">r</span><span class="op" id="5408738">.</span><span class="ident" id="5408739">LazyQuotes</span>&nbsp;<span class="op" id="5408750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408758">r</span><span class="op" id="5408759">.</span><span class="ident" id="5408760">column</span><span class="op" id="5408766">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408775">return</span>&nbsp;<span class="builtintype" id="5408782">false</span><span class="op" id="5408787">,</span>&nbsp;<span class="num" id="5408789">0</span><span class="op" id="5408790">,</span>&nbsp;<span class="ident" id="5408792">r</span><span class="op" id="5408793">.</span><span class="builtintype" id="5408794">error</span><span class="op" id="5408799">(</span><span class="ident" id="5408800">ErrQuote</span><span class="op" id="5408808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5408822">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408852">r</span><span class="op" id="5408853">.</span><span class="ident" id="5408854">field</span><span class="op" id="5408859">.</span><span class="ident" id="5408860">WriteRune</span><span class="op" id="5408869">(</span><span class="string" id="5408870">&#39;&#34;&#39;</span><span class="op" id="5408873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408879">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408884">case</span>&nbsp;<span class="string" id="5408889">&#39;\n&#39;</span><span class="op" id="5408893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408899">r</span><span class="op" id="5408900">.</span><span class="ident" id="5408901">line</span><span class="op" id="5408905">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408912">r</span><span class="op" id="5408913">.</span><span class="ident" id="5408914">column</span>&nbsp;<span class="op" id="5408921">=</span>&nbsp;<span class="op" id="5408923">-</span><span class="num" id="5408924">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408934">r</span><span class="op" id="5408935">.</span><span class="ident" id="5408936">field</span><span class="op" id="5408941">.</span><span class="ident" id="5408942">WriteRune</span><span class="op" id="5408951">(</span><span class="ident" id="5408952">r1</span><span class="op" id="5408954">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408962">default</span><span class="op" id="5408969">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5408973">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408993">for</span>&nbsp;<span class="op" id="5408997">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409002">r</span><span class="op" id="5409003">.</span><span class="ident" id="5409004">field</span><span class="op" id="5409009">.</span><span class="ident" id="5409010">WriteRune</span><span class="op" id="5409019">(</span><span class="ident" id="5409020">r1</span><span class="op" id="5409022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409027">r1</span><span class="op" id="5409029">,</span>&nbsp;<span class="ident" id="5409031">err</span>&nbsp;<span class="op" id="5409035">=</span>&nbsp;<span class="ident" id="5409037">r</span><span class="op" id="5409038">.</span><span class="ident" id="5409039">readRune</span><span class="op" id="5409047">(</span><span class="op" id="5409048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409053">if</span>&nbsp;<span class="ident" id="5409056">err</span>&nbsp;<span class="op" id="5409060">!=</span>&nbsp;<span class="ident" id="5409063">nil</span>&nbsp;<span class="op" id="5409067">||</span>&nbsp;<span class="ident" id="5409070">r1</span>&nbsp;<span class="op" id="5409073">==</span>&nbsp;<span class="ident" id="5409076">r</span><span class="op" id="5409077">.</span><span class="ident" id="5409078">Comma</span>&nbsp;<span class="op" id="5409084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409090">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409099">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409104">if</span>&nbsp;<span class="ident" id="5409107">r1</span>&nbsp;<span class="op" id="5409110">==</span>&nbsp;<span class="string" id="5409113">&#39;\n&#39;</span>&nbsp;<span class="op" id="5409118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409124">return</span>&nbsp;<span class="builtintype" id="5409131">true</span><span class="op" id="5409135">,</span>&nbsp;<span class="ident" id="5409137">r1</span><span class="op" id="5409139">,</span>&nbsp;<span class="ident" id="5409141">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409153">if</span>&nbsp;<span class="op" id="5409156">!</span><span class="ident" id="5409157">r</span><span class="op" id="5409158">.</span><span class="ident" id="5409159">LazyQuotes</span>&nbsp;<span class="op" id="5409170">&amp;&amp;</span>&nbsp;<span class="ident" id="5409173">r1</span>&nbsp;<span class="op" id="5409176">==</span>&nbsp;<span class="string" id="5409179">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5409183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409189">return</span>&nbsp;<span class="builtintype" id="5409196">false</span><span class="op" id="5409201">,</span>&nbsp;<span class="num" id="5409203">0</span><span class="op" id="5409204">,</span>&nbsp;<span class="ident" id="5409206">r</span><span class="op" id="5409207">.</span><span class="builtintype" id="5409208">error</span><span class="op" id="5409213">(</span><span class="ident" id="5409214">ErrBareQuote</span><span class="op" id="5409226">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409242">if</span>&nbsp;<span class="ident" id="5409245">err</span>&nbsp;<span class="op" id="5409249">!=</span>&nbsp;<span class="ident" id="5409252">nil</span>&nbsp;<span class="op" id="5409256">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409260">if</span>&nbsp;<span class="ident" id="5409263">err</span>&nbsp;<span class="op" id="5409267">==</span>&nbsp;<span class="ident" id="5409270">io</span><span class="op" id="5409272">.</span><span class="ident" id="5409273">EOF</span>&nbsp;<span class="op" id="5409277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409282">return</span>&nbsp;<span class="builtintype" id="5409289">true</span><span class="op" id="5409293">,</span>&nbsp;<span class="num" id="5409295">0</span><span class="op" id="5409296">,</span>&nbsp;<span class="ident" id="5409298">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409308">return</span>&nbsp;<span class="builtintype" id="5409315">false</span><span class="op" id="5409320">,</span>&nbsp;<span class="num" id="5409322">0</span><span class="op" id="5409323">,</span>&nbsp;<span class="ident" id="5409325">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409330">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409334">return</span>&nbsp;<span class="builtintype" id="5409341">true</span><span class="op" id="5409345">,</span>&nbsp;<span class="ident" id="5409347">r1</span><span class="op" id="5409349">,</span>&nbsp;<span class="ident" id="5409351">nil</span><br>
<span class="lineno"></span><span class="op" id="5409355">}</span>
</div>
</body>
</html>
