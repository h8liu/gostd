<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7869912">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7869968">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7870022">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7870073">package</span>&nbsp;<span class="ident" id="7870081">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870086">import</span>&nbsp;<span class="op" id="7870093">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7870096">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7870103">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7870114">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7870124">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870127">func</span>&nbsp;<span class="op" id="7870132">(</span><span class="ident" id="7870133">ti</span>&nbsp;<span class="op" id="7870136">*</span><span class="ident" id="7870137">testInterface</span><span class="op" id="7870150">)</span>&nbsp;<span class="ident" id="7870152">setBroadcast</span><span class="op" id="7870164">(</span><span class="ident" id="7870165">suffix</span>&nbsp;<span class="builtintype" id="7870172">int</span><span class="op" id="7870175">)</span>&nbsp;<span class="builtintype" id="7870177">error</span>&nbsp;<span class="op" id="7870183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870186">ti</span><span class="op" id="7870188">.</span><span class="ident" id="7870189">name</span>&nbsp;<span class="op" id="7870194">=</span>&nbsp;<span class="ident" id="7870196">fmt</span><span class="op" id="7870199">.</span><span class="ident" id="7870200">Sprintf</span><span class="op" id="7870207">(</span><span class="string" id="7870208">&#34;gotest%d&#34;</span><span class="op" id="7870218">,</span>&nbsp;<span class="ident" id="7870220">suffix</span><span class="op" id="7870226">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870229">xname</span><span class="op" id="7870234">,</span>&nbsp;<span class="ident" id="7870236">err</span>&nbsp;<span class="op" id="7870240">:=</span>&nbsp;<span class="ident" id="7870243">exec</span><span class="op" id="7870247">.</span><span class="ident" id="7870248">LookPath</span><span class="op" id="7870256">(</span><span class="string" id="7870257">&#34;ip&#34;</span><span class="op" id="7870261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870264">if</span>&nbsp;<span class="ident" id="7870267">err</span>&nbsp;<span class="op" id="7870271">!=</span>&nbsp;<span class="ident" id="7870274">nil</span>&nbsp;<span class="op" id="7870278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870282">return</span>&nbsp;<span class="ident" id="7870289">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870297">ti</span><span class="op" id="7870299">.</span><span class="ident" id="7870300">setupCmds</span>&nbsp;<span class="op" id="7870310">=</span>&nbsp;<span class="builtinfunc" id="7870312">append</span><span class="op" id="7870318">(</span><span class="ident" id="7870319">ti</span><span class="op" id="7870321">.</span><span class="ident" id="7870322">setupCmds</span><span class="op" id="7870331">,</span>&nbsp;<span class="op" id="7870333">&amp;</span><span class="ident" id="7870334">exec</span><span class="op" id="7870338">.</span><span class="ident" id="7870339">Cmd</span><span class="op" id="7870342">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870346">Path</span><span class="op" id="7870350">:</span>&nbsp;<span class="ident" id="7870352">xname</span><span class="op" id="7870357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870361">Args</span><span class="op" id="7870365">:</span>&nbsp;<span class="op" id="7870367">[</span><span class="op" id="7870368">]</span><span class="builtintype" id="7870369">string</span><span class="op" id="7870375">{</span><span class="string" id="7870376">&#34;ip&#34;</span><span class="op" id="7870380">,</span>&nbsp;<span class="string" id="7870382">&#34;link&#34;</span><span class="op" id="7870388">,</span>&nbsp;<span class="string" id="7870390">&#34;add&#34;</span><span class="op" id="7870395">,</span>&nbsp;<span class="ident" id="7870397">ti</span><span class="op" id="7870399">.</span><span class="ident" id="7870400">name</span><span class="op" id="7870404">,</span>&nbsp;<span class="string" id="7870406">&#34;type&#34;</span><span class="op" id="7870412">,</span>&nbsp;<span class="string" id="7870414">&#34;dummy&#34;</span><span class="op" id="7870421">}</span><span class="op" id="7870422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870425">}</span><span class="op" id="7870426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870429">ti</span><span class="op" id="7870431">.</span><span class="ident" id="7870432">teardownCmds</span>&nbsp;<span class="op" id="7870445">=</span>&nbsp;<span class="builtinfunc" id="7870447">append</span><span class="op" id="7870453">(</span><span class="ident" id="7870454">ti</span><span class="op" id="7870456">.</span><span class="ident" id="7870457">teardownCmds</span><span class="op" id="7870469">,</span>&nbsp;<span class="op" id="7870471">&amp;</span><span class="ident" id="7870472">exec</span><span class="op" id="7870476">.</span><span class="ident" id="7870477">Cmd</span><span class="op" id="7870480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870484">Path</span><span class="op" id="7870488">:</span>&nbsp;<span class="ident" id="7870490">xname</span><span class="op" id="7870495">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870499">Args</span><span class="op" id="7870503">:</span>&nbsp;<span class="op" id="7870505">[</span><span class="op" id="7870506">]</span><span class="builtintype" id="7870507">string</span><span class="op" id="7870513">{</span><span class="string" id="7870514">&#34;ip&#34;</span><span class="op" id="7870518">,</span>&nbsp;<span class="string" id="7870520">&#34;link&#34;</span><span class="op" id="7870526">,</span>&nbsp;<span class="string" id="7870528">&#34;delete&#34;</span><span class="op" id="7870536">,</span>&nbsp;<span class="ident" id="7870538">ti</span><span class="op" id="7870540">.</span><span class="ident" id="7870541">name</span><span class="op" id="7870545">,</span>&nbsp;<span class="string" id="7870547">&#34;type&#34;</span><span class="op" id="7870553">,</span>&nbsp;<span class="string" id="7870555">&#34;dummy&#34;</span><span class="op" id="7870562">}</span><span class="op" id="7870563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870566">}</span><span class="op" id="7870567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870570">return</span>&nbsp;<span class="ident" id="7870577">nil</span><br>
<span class="lineno"></span><span class="op" id="7870581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7870584">func</span>&nbsp;<span class="op" id="7870589">(</span><span class="ident" id="7870590">ti</span>&nbsp;<span class="op" id="7870593">*</span><span class="ident" id="7870594">testInterface</span><span class="op" id="7870607">)</span>&nbsp;<span class="ident" id="7870609">setPointToPoint</span><span class="op" id="7870624">(</span><span class="ident" id="7870625">suffix</span>&nbsp;<span class="builtintype" id="7870632">int</span><span class="op" id="7870635">,</span>&nbsp;<span class="ident" id="7870637">local</span><span class="op" id="7870642">,</span>&nbsp;<span class="ident" id="7870644">remote</span>&nbsp;<span class="builtintype" id="7870651">string</span><span class="op" id="7870657">)</span>&nbsp;<span class="builtintype" id="7870659">error</span>&nbsp;<span class="op" id="7870665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870668">ti</span><span class="op" id="7870670">.</span><span class="ident" id="7870671">name</span>&nbsp;<span class="op" id="7870676">=</span>&nbsp;<span class="ident" id="7870678">fmt</span><span class="op" id="7870681">.</span><span class="ident" id="7870682">Sprintf</span><span class="op" id="7870689">(</span><span class="string" id="7870690">&#34;gotest%d&#34;</span><span class="op" id="7870700">,</span>&nbsp;<span class="ident" id="7870702">suffix</span><span class="op" id="7870708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870711">ti</span><span class="op" id="7870713">.</span><span class="ident" id="7870714">local</span>&nbsp;<span class="op" id="7870720">=</span>&nbsp;<span class="ident" id="7870722">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870729">ti</span><span class="op" id="7870731">.</span><span class="ident" id="7870732">remote</span>&nbsp;<span class="op" id="7870739">=</span>&nbsp;<span class="ident" id="7870741">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870749">xname</span><span class="op" id="7870754">,</span>&nbsp;<span class="ident" id="7870756">err</span>&nbsp;<span class="op" id="7870760">:=</span>&nbsp;<span class="ident" id="7870763">exec</span><span class="op" id="7870767">.</span><span class="ident" id="7870768">LookPath</span><span class="op" id="7870776">(</span><span class="string" id="7870777">&#34;ip&#34;</span><span class="op" id="7870781">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870784">if</span>&nbsp;<span class="ident" id="7870787">err</span>&nbsp;<span class="op" id="7870791">!=</span>&nbsp;<span class="ident" id="7870794">nil</span>&nbsp;<span class="op" id="7870798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870802">return</span>&nbsp;<span class="ident" id="7870809">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870817">ti</span><span class="op" id="7870819">.</span><span class="ident" id="7870820">setupCmds</span>&nbsp;<span class="op" id="7870830">=</span>&nbsp;<span class="builtinfunc" id="7870832">append</span><span class="op" id="7870838">(</span><span class="ident" id="7870839">ti</span><span class="op" id="7870841">.</span><span class="ident" id="7870842">setupCmds</span><span class="op" id="7870851">,</span>&nbsp;<span class="op" id="7870853">&amp;</span><span class="ident" id="7870854">exec</span><span class="op" id="7870858">.</span><span class="ident" id="7870859">Cmd</span><span class="op" id="7870862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870866">Path</span><span class="op" id="7870870">:</span>&nbsp;<span class="ident" id="7870872">xname</span><span class="op" id="7870877">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870881">Args</span><span class="op" id="7870885">:</span>&nbsp;<span class="op" id="7870887">[</span><span class="op" id="7870888">]</span><span class="builtintype" id="7870889">string</span><span class="op" id="7870895">{</span><span class="string" id="7870896">&#34;ip&#34;</span><span class="op" id="7870900">,</span>&nbsp;<span class="string" id="7870902">&#34;tunnel&#34;</span><span class="op" id="7870910">,</span>&nbsp;<span class="string" id="7870912">&#34;add&#34;</span><span class="op" id="7870917">,</span>&nbsp;<span class="ident" id="7870919">ti</span><span class="op" id="7870921">.</span><span class="ident" id="7870922">name</span><span class="op" id="7870926">,</span>&nbsp;<span class="string" id="7870928">&#34;mode&#34;</span><span class="op" id="7870934">,</span>&nbsp;<span class="string" id="7870936">&#34;gre&#34;</span><span class="op" id="7870941">,</span>&nbsp;<span class="string" id="7870943">&#34;local&#34;</span><span class="op" id="7870950">,</span>&nbsp;<span class="ident" id="7870952">local</span><span class="op" id="7870957">,</span>&nbsp;<span class="string" id="7870959">&#34;remote&#34;</span><span class="op" id="7870967">,</span>&nbsp;<span class="ident" id="7870969">remote</span><span class="op" id="7870975">}</span><span class="op" id="7870976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870979">}</span><span class="op" id="7870980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870983">ti</span><span class="op" id="7870985">.</span><span class="ident" id="7870986">teardownCmds</span>&nbsp;<span class="op" id="7870999">=</span>&nbsp;<span class="builtinfunc" id="7871001">append</span><span class="op" id="7871007">(</span><span class="ident" id="7871008">ti</span><span class="op" id="7871010">.</span><span class="ident" id="7871011">teardownCmds</span><span class="op" id="7871023">,</span>&nbsp;<span class="op" id="7871025">&amp;</span><span class="ident" id="7871026">exec</span><span class="op" id="7871030">.</span><span class="ident" id="7871031">Cmd</span><span class="op" id="7871034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871038">Path</span><span class="op" id="7871042">:</span>&nbsp;<span class="ident" id="7871044">xname</span><span class="op" id="7871049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871053">Args</span><span class="op" id="7871057">:</span>&nbsp;<span class="op" id="7871059">[</span><span class="op" id="7871060">]</span><span class="builtintype" id="7871061">string</span><span class="op" id="7871067">{</span><span class="string" id="7871068">&#34;ip&#34;</span><span class="op" id="7871072">,</span>&nbsp;<span class="string" id="7871074">&#34;tunnel&#34;</span><span class="op" id="7871082">,</span>&nbsp;<span class="string" id="7871084">&#34;del&#34;</span><span class="op" id="7871089">,</span>&nbsp;<span class="ident" id="7871091">ti</span><span class="op" id="7871093">.</span><span class="ident" id="7871094">name</span><span class="op" id="7871098">,</span>&nbsp;<span class="string" id="7871100">&#34;mode&#34;</span><span class="op" id="7871106">,</span>&nbsp;<span class="string" id="7871108">&#34;gre&#34;</span><span class="op" id="7871113">,</span>&nbsp;<span class="string" id="7871115">&#34;local&#34;</span><span class="op" id="7871122">,</span>&nbsp;<span class="ident" id="7871124">local</span><span class="op" id="7871129">,</span>&nbsp;<span class="string" id="7871131">&#34;remote&#34;</span><span class="op" id="7871139">,</span>&nbsp;<span class="ident" id="7871141">remote</span><span class="op" id="7871147">}</span><span class="op" id="7871148">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871151">}</span><span class="op" id="7871152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871155">xname</span><span class="op" id="7871160">,</span>&nbsp;<span class="ident" id="7871162">err</span>&nbsp;<span class="op" id="7871166">=</span>&nbsp;<span class="ident" id="7871168">exec</span><span class="op" id="7871172">.</span><span class="ident" id="7871173">LookPath</span><span class="op" id="7871181">(</span><span class="string" id="7871182">&#34;ifconfig&#34;</span><span class="op" id="7871192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871195">if</span>&nbsp;<span class="ident" id="7871198">err</span>&nbsp;<span class="op" id="7871202">!=</span>&nbsp;<span class="ident" id="7871205">nil</span>&nbsp;<span class="op" id="7871209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871213">return</span>&nbsp;<span class="ident" id="7871220">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871225">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871228">ti</span><span class="op" id="7871230">.</span><span class="ident" id="7871231">setupCmds</span>&nbsp;<span class="op" id="7871241">=</span>&nbsp;<span class="builtinfunc" id="7871243">append</span><span class="op" id="7871249">(</span><span class="ident" id="7871250">ti</span><span class="op" id="7871252">.</span><span class="ident" id="7871253">setupCmds</span><span class="op" id="7871262">,</span>&nbsp;<span class="op" id="7871264">&amp;</span><span class="ident" id="7871265">exec</span><span class="op" id="7871269">.</span><span class="ident" id="7871270">Cmd</span><span class="op" id="7871273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871277">Path</span><span class="op" id="7871281">:</span>&nbsp;<span class="ident" id="7871283">xname</span><span class="op" id="7871288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871292">Args</span><span class="op" id="7871296">:</span>&nbsp;<span class="op" id="7871298">[</span><span class="op" id="7871299">]</span><span class="builtintype" id="7871300">string</span><span class="op" id="7871306">{</span><span class="string" id="7871307">&#34;ifconfig&#34;</span><span class="op" id="7871317">,</span>&nbsp;<span class="ident" id="7871319">ti</span><span class="op" id="7871321">.</span><span class="ident" id="7871322">name</span><span class="op" id="7871326">,</span>&nbsp;<span class="string" id="7871328">&#34;inet&#34;</span><span class="op" id="7871334">,</span>&nbsp;<span class="ident" id="7871336">local</span><span class="op" id="7871341">,</span>&nbsp;<span class="string" id="7871343">&#34;dstaddr&#34;</span><span class="op" id="7871352">,</span>&nbsp;<span class="ident" id="7871354">remote</span><span class="op" id="7871360">}</span><span class="op" id="7871361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871364">}</span><span class="op" id="7871365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871368">return</span>&nbsp;<span class="ident" id="7871375">nil</span><br>
<span class="lineno">55</span><span class="op" id="7871379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871382">const</span>&nbsp;<span class="op" id="7871388">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871391">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="7871412">=</span>&nbsp;<span class="num" id="7871414">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871418">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="7871439">=</span>&nbsp;<span class="num" id="7871441">18</span><br>
<span class="lineno">60</span><span class="op" id="7871444">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871447">var</span>&nbsp;<span class="op" id="7871451">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871454">igmpInterfaceTable</span>&nbsp;<span class="op" id="7871473">=</span>&nbsp;<span class="op" id="7871475">[</span><span class="op" id="7871476">]</span><span class="ident" id="7871477">Interface</span><span class="op" id="7871486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871490">{</span><span class="ident" id="7871491">Name</span><span class="op" id="7871495">:</span>&nbsp;<span class="string" id="7871497">&#34;lo&#34;</span><span class="op" id="7871501">}</span><span class="op" id="7871502">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871506">{</span><span class="ident" id="7871507">Name</span><span class="op" id="7871511">:</span>&nbsp;<span class="string" id="7871513">&#34;eth0&#34;</span><span class="op" id="7871519">}</span><span class="op" id="7871520">,</span>&nbsp;<span class="op" id="7871522">{</span><span class="ident" id="7871523">Name</span><span class="op" id="7871527">:</span>&nbsp;<span class="string" id="7871529">&#34;eth1&#34;</span><span class="op" id="7871535">}</span><span class="op" id="7871536">,</span>&nbsp;<span class="op" id="7871538">{</span><span class="ident" id="7871539">Name</span><span class="op" id="7871543">:</span>&nbsp;<span class="string" id="7871545">&#34;eth2&#34;</span><span class="op" id="7871551">}</span><span class="op" id="7871552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871556">{</span><span class="ident" id="7871557">Name</span><span class="op" id="7871561">:</span>&nbsp;<span class="string" id="7871563">&#34;eth0.100&#34;</span><span class="op" id="7871573">}</span><span class="op" id="7871574">,</span>&nbsp;<span class="op" id="7871576">{</span><span class="ident" id="7871577">Name</span><span class="op" id="7871581">:</span>&nbsp;<span class="string" id="7871583">&#34;eth0.101&#34;</span><span class="op" id="7871593">}</span><span class="op" id="7871594">,</span>&nbsp;<span class="op" id="7871596">{</span><span class="ident" id="7871597">Name</span><span class="op" id="7871601">:</span>&nbsp;<span class="string" id="7871603">&#34;eth0.102&#34;</span><span class="op" id="7871613">}</span><span class="op" id="7871614">,</span>&nbsp;<span class="op" id="7871616">{</span><span class="ident" id="7871617">Name</span><span class="op" id="7871621">:</span>&nbsp;<span class="string" id="7871623">&#34;eth0.103&#34;</span><span class="op" id="7871633">}</span><span class="op" id="7871634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871638">{</span><span class="ident" id="7871639">Name</span><span class="op" id="7871643">:</span>&nbsp;<span class="string" id="7871645">&#34;device1tap2&#34;</span><span class="op" id="7871658">}</span><span class="op" id="7871659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871665">igmp6InterfaceTable</span>&nbsp;<span class="op" id="7871685">=</span>&nbsp;<span class="op" id="7871687">[</span><span class="op" id="7871688">]</span><span class="ident" id="7871689">Interface</span><span class="op" id="7871698">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871702">{</span><span class="ident" id="7871703">Name</span><span class="op" id="7871707">:</span>&nbsp;<span class="string" id="7871709">&#34;lo&#34;</span><span class="op" id="7871713">}</span><span class="op" id="7871714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871718">{</span><span class="ident" id="7871719">Name</span><span class="op" id="7871723">:</span>&nbsp;<span class="string" id="7871725">&#34;eth0&#34;</span><span class="op" id="7871731">}</span><span class="op" id="7871732">,</span>&nbsp;<span class="op" id="7871734">{</span><span class="ident" id="7871735">Name</span><span class="op" id="7871739">:</span>&nbsp;<span class="string" id="7871741">&#34;eth1&#34;</span><span class="op" id="7871747">}</span><span class="op" id="7871748">,</span>&nbsp;<span class="op" id="7871750">{</span><span class="ident" id="7871751">Name</span><span class="op" id="7871755">:</span>&nbsp;<span class="string" id="7871757">&#34;eth2&#34;</span><span class="op" id="7871763">}</span><span class="op" id="7871764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871768">{</span><span class="ident" id="7871769">Name</span><span class="op" id="7871773">:</span>&nbsp;<span class="string" id="7871775">&#34;eth0.100&#34;</span><span class="op" id="7871785">}</span><span class="op" id="7871786">,</span>&nbsp;<span class="op" id="7871788">{</span><span class="ident" id="7871789">Name</span><span class="op" id="7871793">:</span>&nbsp;<span class="string" id="7871795">&#34;eth0.101&#34;</span><span class="op" id="7871805">}</span><span class="op" id="7871806">,</span>&nbsp;<span class="op" id="7871808">{</span><span class="ident" id="7871809">Name</span><span class="op" id="7871813">:</span>&nbsp;<span class="string" id="7871815">&#34;eth0.102&#34;</span><span class="op" id="7871825">}</span><span class="op" id="7871826">,</span>&nbsp;<span class="op" id="7871828">{</span><span class="ident" id="7871829">Name</span><span class="op" id="7871833">:</span>&nbsp;<span class="string" id="7871835">&#34;eth0.103&#34;</span><span class="op" id="7871845">}</span><span class="op" id="7871846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871850">{</span><span class="ident" id="7871851">Name</span><span class="op" id="7871855">:</span>&nbsp;<span class="string" id="7871857">&#34;device1tap2&#34;</span><span class="op" id="7871870">}</span><span class="op" id="7871871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871875">{</span><span class="ident" id="7871876">Name</span><span class="op" id="7871880">:</span>&nbsp;<span class="string" id="7871882">&#34;pan0&#34;</span><span class="op" id="7871888">}</span><span class="op" id="7871889">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871892">}</span><br>
<span class="lineno"></span><span class="op" id="7871894">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871897">func</span>&nbsp;<span class="ident" id="7871902">TestParseProcNet</span><span class="op" id="7871918">(</span><span class="ident" id="7871919">t</span>&nbsp;<span class="op" id="7871921">*</span><span class="ident" id="7871922">testing</span><span class="op" id="7871929">.</span><span class="ident" id="7871930">T</span><span class="op" id="7871931">)</span>&nbsp;<span class="op" id="7871933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871936">defer</span>&nbsp;<span class="keyword" id="7871942">func</span><span class="op" id="7871946">(</span><span class="op" id="7871947">)</span>&nbsp;<span class="op" id="7871949">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871953">if</span>&nbsp;<span class="ident" id="7871956">p</span>&nbsp;<span class="op" id="7871958">:=</span>&nbsp;<span class="builtinfunc" id="7871961">recover</span><span class="op" id="7871968">(</span><span class="op" id="7871969">)</span><span class="op" id="7871970">;</span>&nbsp;<span class="ident" id="7871972">p</span>&nbsp;<span class="op" id="7871974">!=</span>&nbsp;<span class="ident" id="7871977">nil</span>&nbsp;<span class="op" id="7871981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871986">t</span><span class="op" id="7871987">.</span><span class="ident" id="7871988">Fatalf</span><span class="op" id="7871994">(</span><span class="string" id="7871995">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="7872047">,</span>&nbsp;<span class="ident" id="7872049">p</span><span class="op" id="7872050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872057">}</span><span class="op" id="7872058">(</span><span class="op" id="7872059">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872063">var</span>&nbsp;<span class="ident" id="7872067">ifmat4</span>&nbsp;<span class="op" id="7872074">[</span><span class="op" id="7872075">]</span><span class="ident" id="7872076">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872082">for</span>&nbsp;<span class="ident" id="7872086">_</span><span class="op" id="7872087">,</span>&nbsp;<span class="ident" id="7872089">ifi</span>&nbsp;<span class="op" id="7872093">:=</span>&nbsp;<span class="keyword" id="7872096">range</span>&nbsp;<span class="ident" id="7872102">igmpInterfaceTable</span>&nbsp;<span class="op" id="7872121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872125">ifmat</span>&nbsp;<span class="op" id="7872131">:=</span>&nbsp;<span class="ident" id="7872134">parseProcNetIGMP</span><span class="op" id="7872150">(</span><span class="string" id="7872151">&#34;testdata/igmp&#34;</span><span class="op" id="7872166">,</span>&nbsp;<span class="op" id="7872168">&amp;</span><span class="ident" id="7872169">ifi</span><span class="op" id="7872172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872176">ifmat4</span>&nbsp;<span class="op" id="7872183">=</span>&nbsp;<span class="builtinfunc" id="7872185">append</span><span class="op" id="7872191">(</span><span class="ident" id="7872192">ifmat4</span><span class="op" id="7872198">,</span>&nbsp;<span class="ident" id="7872200">ifmat</span><span class="op" id="7872205">...</span><span class="op" id="7872208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872211">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872214">if</span>&nbsp;<span class="builtinfunc" id="7872217">len</span><span class="op" id="7872220">(</span><span class="ident" id="7872221">ifmat4</span><span class="op" id="7872227">)</span>&nbsp;<span class="op" id="7872229">!=</span>&nbsp;<span class="ident" id="7872232">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="7872253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872257">t</span><span class="op" id="7872258">.</span><span class="ident" id="7872259">Fatalf</span><span class="op" id="7872265">(</span><span class="string" id="7872266">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7872318">,</span>&nbsp;<span class="builtinfunc" id="7872320">len</span><span class="op" id="7872323">(</span><span class="ident" id="7872324">ifmat4</span><span class="op" id="7872330">)</span><span class="op" id="7872331">,</span>&nbsp;<span class="ident" id="7872333">numOfTestIPv4MCAddrs</span><span class="op" id="7872353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872360">var</span>&nbsp;<span class="ident" id="7872364">ifmat6</span>&nbsp;<span class="op" id="7872371">[</span><span class="op" id="7872372">]</span><span class="ident" id="7872373">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872379">for</span>&nbsp;<span class="ident" id="7872383">_</span><span class="op" id="7872384">,</span>&nbsp;<span class="ident" id="7872386">ifi</span>&nbsp;<span class="op" id="7872390">:=</span>&nbsp;<span class="keyword" id="7872393">range</span>&nbsp;<span class="ident" id="7872399">igmp6InterfaceTable</span>&nbsp;<span class="op" id="7872419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872423">ifmat</span>&nbsp;<span class="op" id="7872429">:=</span>&nbsp;<span class="ident" id="7872432">parseProcNetIGMP6</span><span class="op" id="7872449">(</span><span class="string" id="7872450">&#34;testdata/igmp6&#34;</span><span class="op" id="7872466">,</span>&nbsp;<span class="op" id="7872468">&amp;</span><span class="ident" id="7872469">ifi</span><span class="op" id="7872472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872476">ifmat6</span>&nbsp;<span class="op" id="7872483">=</span>&nbsp;<span class="builtinfunc" id="7872485">append</span><span class="op" id="7872491">(</span><span class="ident" id="7872492">ifmat6</span><span class="op" id="7872498">,</span>&nbsp;<span class="ident" id="7872500">ifmat</span><span class="op" id="7872505">...</span><span class="op" id="7872508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872514">if</span>&nbsp;<span class="builtinfunc" id="7872517">len</span><span class="op" id="7872520">(</span><span class="ident" id="7872521">ifmat6</span><span class="op" id="7872527">)</span>&nbsp;<span class="op" id="7872529">!=</span>&nbsp;<span class="ident" id="7872532">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="7872553">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872557">t</span><span class="op" id="7872558">.</span><span class="ident" id="7872559">Fatalf</span><span class="op" id="7872565">(</span><span class="string" id="7872566">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7872619">,</span>&nbsp;<span class="builtinfunc" id="7872621">len</span><span class="op" id="7872624">(</span><span class="ident" id="7872625">ifmat6</span><span class="op" id="7872631">)</span><span class="op" id="7872632">,</span>&nbsp;<span class="ident" id="7872634">numOfTestIPv6MCAddrs</span><span class="op" id="7872654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872657">}</span><br>
<span class="lineno"></span><span class="op" id="7872659">}</span>
</div>
</body>
</html>
