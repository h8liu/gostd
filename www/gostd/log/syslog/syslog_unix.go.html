<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6312069">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6312124">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6312178">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6312229">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6312262">package</span>&nbsp;<span class="ident" id="6312270">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6312278">import</span>&nbsp;<span class="op" id="6312285">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6312288">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6312298">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6312304">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6312307">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6312376">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6312422">func</span>&nbsp;<span class="ident" id="6312427">unixSyslog</span><span class="op" id="6312437">(</span><span class="op" id="6312438">)</span>&nbsp;<span class="op" id="6312440">(</span><span class="ident" id="6312441">conn</span>&nbsp;<span class="ident" id="6312446">serverConn</span><span class="op" id="6312456">,</span>&nbsp;<span class="ident" id="6312458">err</span>&nbsp;<span class="builtintype" id="6312462">error</span><span class="op" id="6312467">)</span>&nbsp;<span class="op" id="6312469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312472">logTypes</span>&nbsp;<span class="op" id="6312481">:=</span>&nbsp;<span class="op" id="6312484">[</span><span class="op" id="6312485">]</span><span class="builtintype" id="6312486">string</span><span class="op" id="6312492">{</span><span class="string" id="6312493">&#34;unixgram&#34;</span><span class="op" id="6312503">,</span>&nbsp;<span class="string" id="6312505">&#34;unix&#34;</span><span class="op" id="6312511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312514">logPaths</span>&nbsp;<span class="op" id="6312523">:=</span>&nbsp;<span class="op" id="6312526">[</span><span class="op" id="6312527">]</span><span class="builtintype" id="6312528">string</span><span class="op" id="6312534">{</span><span class="string" id="6312535">&#34;/dev/log&#34;</span><span class="op" id="6312545">,</span>&nbsp;<span class="string" id="6312547">&#34;/var/run/syslog&#34;</span><span class="op" id="6312564">,</span>&nbsp;<span class="string" id="6312566">&#34;/var/run/log&#34;</span><span class="op" id="6312580">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312583">for</span>&nbsp;<span class="ident" id="6312587">_</span><span class="op" id="6312588">,</span>&nbsp;<span class="ident" id="6312590">network</span>&nbsp;<span class="op" id="6312598">:=</span>&nbsp;<span class="keyword" id="6312601">range</span>&nbsp;<span class="ident" id="6312607">logTypes</span>&nbsp;<span class="op" id="6312616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312620">for</span>&nbsp;<span class="ident" id="6312624">_</span><span class="op" id="6312625">,</span>&nbsp;<span class="ident" id="6312627">path</span>&nbsp;<span class="op" id="6312632">:=</span>&nbsp;<span class="keyword" id="6312635">range</span>&nbsp;<span class="ident" id="6312641">logPaths</span>&nbsp;<span class="op" id="6312650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312655">conn</span><span class="op" id="6312659">,</span>&nbsp;<span class="ident" id="6312661">err</span>&nbsp;<span class="op" id="6312665">:=</span>&nbsp;<span class="ident" id="6312668">net</span><span class="op" id="6312671">.</span><span class="ident" id="6312672">Dial</span><span class="op" id="6312676">(</span><span class="ident" id="6312677">network</span><span class="op" id="6312684">,</span>&nbsp;<span class="ident" id="6312686">path</span><span class="op" id="6312690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312695">if</span>&nbsp;<span class="ident" id="6312698">err</span>&nbsp;<span class="op" id="6312702">!=</span>&nbsp;<span class="ident" id="6312705">nil</span>&nbsp;<span class="op" id="6312709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312715">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312727">}</span>&nbsp;<span class="keyword" id="6312729">else</span>&nbsp;<span class="op" id="6312734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312740">return</span>&nbsp;<span class="op" id="6312747">&amp;</span><span class="ident" id="6312748">netConn</span><span class="op" id="6312755">{</span><span class="ident" id="6312756">conn</span><span class="op" id="6312760">:</span>&nbsp;<span class="ident" id="6312762">conn</span><span class="op" id="6312766">,</span>&nbsp;<span class="ident" id="6312768">local</span><span class="op" id="6312773">:</span>&nbsp;<span class="builtintype" id="6312775">true</span><span class="op" id="6312779">}</span><span class="op" id="6312780">,</span>&nbsp;<span class="ident" id="6312782">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312796">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312799">return</span>&nbsp;<span class="ident" id="6312806">nil</span><span class="op" id="6312809">,</span>&nbsp;<span class="ident" id="6312811">errors</span><span class="op" id="6312817">.</span><span class="ident" id="6312818">New</span><span class="op" id="6312821">(</span><span class="string" id="6312822">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6312850">)</span><br>
<span class="lineno"></span><span class="op" id="6312852">}</span>
</div>
</body>
</html>
