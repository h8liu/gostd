<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7824015">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7824071">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7824125">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7824176">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="7824255">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7824264">package</span>&nbsp;<span class="ident" id="7824272">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7824277">import</span>&nbsp;<span class="op" id="7824284">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7824287">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7824293">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7824304">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7824315">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7824322">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7824325">var</span>&nbsp;<span class="ident" id="7824329">connTests</span>&nbsp;<span class="op" id="7824339">=</span>&nbsp;<span class="op" id="7824341">[</span><span class="op" id="7824342">]</span><span class="keyword" id="7824343">struct</span>&nbsp;<span class="op" id="7824350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7824353">net</span>&nbsp;&nbsp;<span class="builtintype" id="7824358">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7824366">addr</span>&nbsp;<span class="builtintype" id="7824371">string</span><br>
<span class="lineno">20</span><span class="op" id="7824378">}</span><span class="op" id="7824379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7824382">{</span><span class="string" id="7824383">&#34;tcp&#34;</span><span class="op" id="7824388">,</span>&nbsp;<span class="string" id="7824390">&#34;127.0.0.1:0&#34;</span><span class="op" id="7824403">}</span><span class="op" id="7824404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7824407">{</span><span class="string" id="7824408">&#34;unix&#34;</span><span class="op" id="7824414">,</span>&nbsp;<span class="ident" id="7824416"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7824428">(</span><span class="op" id="7824429">)</span><span class="op" id="7824430">}</span><span class="op" id="7824431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7824434">{</span><span class="string" id="7824435">&#34;unixpacket&#34;</span><span class="op" id="7824447">,</span>&nbsp;<span class="ident" id="7824449"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7824461">(</span><span class="op" id="7824462">)</span><span class="op" id="7824463">}</span><span class="op" id="7824464">,</span><br>
<span class="lineno"></span><span class="op" id="7824466">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="7824469">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="7824535">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="7824598">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="7824646">const</span>&nbsp;<span class="ident" id="7824652">someTimeout</span>&nbsp;<span class="op" id="7824664">=</span>&nbsp;<span class="num" id="7824666">10</span>&nbsp;<span class="op" id="7824669">*</span>&nbsp;<span class="ident" id="7824671"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7824675">.</span><span class="ident" id="7824676">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="7824684">func</span>&nbsp;<span class="ident" id="7824689">TestConnAndListener</span><span class="op" id="7824708">(</span><span class="ident" id="7824709">t</span>&nbsp;<span class="op" id="7824711">*</span><span class="ident" id="7824712"><a href="/net/conn_test.go.html#7824304">testing</a></span><span class="op" id="7824719">.</span><span class="ident" id="7824720">T</span><span class="op" id="7824721">)</span>&nbsp;<span class="op" id="7824723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824726">for</span>&nbsp;<span class="ident" id="7824730">_</span><span class="op" id="7824731">,</span>&nbsp;<span class="ident" id="7824733">tt</span>&nbsp;<span class="op" id="7824736">:=</span>&nbsp;<span class="keyword" id="7824739">range</span>&nbsp;<span class="ident" id="7824745"><a href="/net/conn_test.go.html#7824329">connTests</a></span>&nbsp;<span class="op" id="7824755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824759">switch</span>&nbsp;<span class="ident" id="7824766"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7824768">.</span><span class="ident" id="7824769">net</span>&nbsp;<span class="op" id="7824773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824777">case</span>&nbsp;<span class="string" id="7824782">&#34;unix&#34;</span><span class="op" id="7824788">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824793">switch</span>&nbsp;<span class="ident" id="7824800"><a href="/net/conn_test.go.html#7824293">runtime</a></span><span class="op" id="7824807">.</span><span class="ident" id="7824808">GOOS</span>&nbsp;<span class="op" id="7824813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824818">case</span>&nbsp;<span class="string" id="7824823">&#34;nacl&#34;</span><span class="op" id="7824829">,</span>&nbsp;<span class="string" id="7824831">&#34;plan9&#34;</span><span class="op" id="7824838">,</span>&nbsp;<span class="string" id="7824840">&#34;windows&#34;</span><span class="op" id="7824849">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824855">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7824867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824871">case</span>&nbsp;<span class="string" id="7824876">&#34;unixpacket&#34;</span><span class="op" id="7824888">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824893">switch</span>&nbsp;<span class="ident" id="7824900"><a href="/net/conn_test.go.html#7824293">runtime</a></span><span class="op" id="7824907">.</span><span class="ident" id="7824908">GOOS</span>&nbsp;<span class="op" id="7824913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824918">case</span>&nbsp;<span class="string" id="7824923">&#34;android&#34;</span><span class="op" id="7824932">,</span>&nbsp;<span class="string" id="7824934">&#34;darwin&#34;</span><span class="op" id="7824942">,</span>&nbsp;<span class="string" id="7824944">&#34;nacl&#34;</span><span class="op" id="7824950">,</span>&nbsp;<span class="string" id="7824952">&#34;openbsd&#34;</span><span class="op" id="7824961">,</span>&nbsp;<span class="string" id="7824963">&#34;plan9&#34;</span><span class="op" id="7824970">,</span>&nbsp;<span class="string" id="7824972">&#34;windows&#34;</span><span class="op" id="7824981">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824987">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7824999">case</span>&nbsp;<span class="string" id="7825004">&#34;freebsd&#34;</span><span class="op" id="7825013">:</span>&nbsp;<span class="comment" id="7825015">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825059">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7825071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7825075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825080">ln</span><span class="op" id="7825082">,</span>&nbsp;<span class="ident" id="7825084">err</span>&nbsp;<span class="op" id="7825088">:=</span>&nbsp;<span class="ident" id="7825091"><a href="/net/dial.go.html#1338035">Listen</a></span><span class="op" id="7825097">(</span><span class="ident" id="7825098"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825100">.</span><span class="ident" id="7825101">net</span><span class="op" id="7825104">,</span>&nbsp;<span class="ident" id="7825106"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825108">.</span><span class="ident" id="7825109">addr</span><span class="op" id="7825113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825117">if</span>&nbsp;<span class="ident" id="7825120"><a href="/net/conn_test.go.html#7825084">err</a></span>&nbsp;<span class="op" id="7825124">!=</span>&nbsp;<span class="ident" id="7825127">nil</span>&nbsp;<span class="op" id="7825131">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825136"><a href="/net/conn_test.go.html#7824709">t</a></span><span class="op" id="7825137">.</span><span class="ident" id="7825138">Fatalf</span><span class="op" id="7825144">(</span><span class="string" id="7825145">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7825164">,</span>&nbsp;<span class="ident" id="7825166"><a href="/net/conn_test.go.html#7825084">err</a></span><span class="op" id="7825169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7825173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825177">defer</span>&nbsp;<span class="keyword" id="7825183">func</span><span class="op" id="7825187">(</span><span class="ident" id="7825188">ln</span>&nbsp;<span class="ident" id="7825191"><a href="/net/net.go.html#1471621">Listener</a></span><span class="op" id="7825199">,</span>&nbsp;<span class="ident" id="7825201">net</span><span class="op" id="7825204">,</span>&nbsp;<span class="ident" id="7825206">addr</span>&nbsp;<span class="builtintype" id="7825211">string</span><span class="op" id="7825217">)</span>&nbsp;<span class="op" id="7825219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825224"><a href="/net/conn_test.go.html#7825188">ln</a></span><span class="op" id="7825226">.</span><span class="ident" id="7825227">Close</span><span class="op" id="7825232">(</span><span class="op" id="7825233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825238">switch</span>&nbsp;<span class="ident" id="7825245"><a href="/net/conn_test.go.html#7825201">net</a></span>&nbsp;<span class="op" id="7825249">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825254">case</span>&nbsp;<span class="string" id="7825259">&#34;unix&#34;</span><span class="op" id="7825265">,</span>&nbsp;<span class="string" id="7825267">&#34;unixpacket&#34;</span><span class="op" id="7825279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825285"><a href="/net/conn_test.go.html#7824287">os</a></span><span class="op" id="7825287">.</span><span class="ident" id="7825288">Remove</span><span class="op" id="7825294">(</span><span class="ident" id="7825295"><a href="/net/conn_test.go.html#7825206">addr</a></span><span class="op" id="7825299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7825304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7825308">}</span><span class="op" id="7825309">(</span><span class="ident" id="7825310"><a href="/net/conn_test.go.html#7825080">ln</a></span><span class="op" id="7825312">,</span>&nbsp;<span class="ident" id="7825314"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825316">.</span><span class="ident" id="7825317">net</span><span class="op" id="7825320">,</span>&nbsp;<span class="ident" id="7825322"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825324">.</span><span class="ident" id="7825325">addr</span><span class="op" id="7825329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825333">if</span>&nbsp;<span class="ident" id="7825336"><a href="/net/conn_test.go.html#7825080">ln</a></span><span class="op" id="7825338">.</span><span class="ident" id="7825339">Addr</span><span class="op" id="7825343">(</span><span class="op" id="7825344">)</span><span class="op" id="7825345">.</span><span class="ident" id="7825346">Network</span><span class="op" id="7825353">(</span><span class="op" id="7825354">)</span>&nbsp;<span class="op" id="7825356">!=</span>&nbsp;<span class="ident" id="7825359"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825361">.</span><span class="ident" id="7825362">net</span>&nbsp;<span class="op" id="7825366">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825371"><a href="/net/conn_test.go.html#7824709">t</a></span><span class="op" id="7825372">.</span><span class="ident" id="7825373">Fatalf</span><span class="op" id="7825379">(</span><span class="string" id="7825380">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7825401">,</span>&nbsp;<span class="ident" id="7825403"><a href="/net/conn_test.go.html#7825080">ln</a></span><span class="op" id="7825405">.</span><span class="ident" id="7825406">Addr</span><span class="op" id="7825410">(</span><span class="op" id="7825411">)</span><span class="op" id="7825412">.</span><span class="ident" id="7825413">Network</span><span class="op" id="7825420">(</span><span class="op" id="7825421">)</span><span class="op" id="7825422">,</span>&nbsp;<span class="ident" id="7825424"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825426">.</span><span class="ident" id="7825427">net</span><span class="op" id="7825430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7825434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825439">done</span>&nbsp;<span class="op" id="7825444">:=</span>&nbsp;<span class="builtinfunc" id="7825447">make</span><span class="op" id="7825451">(</span><span class="keyword" id="7825452">chan</span>&nbsp;<span class="builtintype" id="7825457">int</span><span class="op" id="7825460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825464">go</span>&nbsp;<span class="ident" id="7825467"><a href="/net/conn_test.go.html#7826187">transponder</a></span><span class="op" id="7825478">(</span><span class="ident" id="7825479"><a href="/net/conn_test.go.html#7824709">t</a></span><span class="op" id="7825480">,</span>&nbsp;<span class="ident" id="7825482"><a href="/net/conn_test.go.html#7825080">ln</a></span><span class="op" id="7825484">,</span>&nbsp;<span class="ident" id="7825486"><a href="/net/conn_test.go.html#7825439">done</a></span><span class="op" id="7825490">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825495">c</span><span class="op" id="7825496">,</span>&nbsp;<span class="ident" id="7825498"><a href="/net/conn_test.go.html#7825084">err</a></span>&nbsp;<span class="op" id="7825502">:=</span>&nbsp;<span class="ident" id="7825505"><a href="/net/dial.go.html#1334377">Dial</a></span><span class="op" id="7825509">(</span><span class="ident" id="7825510"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825512">.</span><span class="ident" id="7825513">net</span><span class="op" id="7825516">,</span>&nbsp;<span class="ident" id="7825518"><a href="/net/conn_test.go.html#7825080">ln</a></span><span class="op" id="7825520">.</span><span class="ident" id="7825521">Addr</span><span class="op" id="7825525">(</span><span class="op" id="7825526">)</span><span class="op" id="7825527">.</span><span class="ident" id="7825528">String</span><span class="op" id="7825534">(</span><span class="op" id="7825535">)</span><span class="op" id="7825536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825540">if</span>&nbsp;<span class="ident" id="7825543"><a href="/net/conn_test.go.html#7825084">err</a></span>&nbsp;<span class="op" id="7825547">!=</span>&nbsp;<span class="ident" id="7825550">nil</span>&nbsp;<span class="op" id="7825554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825559"><a href="/net/conn_test.go.html#7824709">t</a></span><span class="op" id="7825560">.</span><span class="ident" id="7825561">Fatalf</span><span class="op" id="7825567">(</span><span class="string" id="7825568">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7825585">,</span>&nbsp;<span class="ident" id="7825587"><a href="/net/conn_test.go.html#7825084">err</a></span><span class="op" id="7825590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7825594">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825598">defer</span>&nbsp;<span class="ident" id="7825604"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825605">.</span><span class="ident" id="7825606">Close</span><span class="op" id="7825611">(</span><span class="op" id="7825612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825616">if</span>&nbsp;<span class="ident" id="7825619"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825620">.</span><span class="ident" id="7825621">LocalAddr</span><span class="op" id="7825630">(</span><span class="op" id="7825631">)</span><span class="op" id="7825632">.</span><span class="ident" id="7825633">Network</span><span class="op" id="7825640">(</span><span class="op" id="7825641">)</span>&nbsp;<span class="op" id="7825643">!=</span>&nbsp;<span class="ident" id="7825646"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825648">.</span><span class="ident" id="7825649">net</span>&nbsp;<span class="op" id="7825653">||</span>&nbsp;<span class="ident" id="7825656"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825657">.</span><span class="ident" id="7825658">LocalAddr</span><span class="op" id="7825667">(</span><span class="op" id="7825668">)</span><span class="op" id="7825669">.</span><span class="ident" id="7825670">Network</span><span class="op" id="7825677">(</span><span class="op" id="7825678">)</span>&nbsp;<span class="op" id="7825680">!=</span>&nbsp;<span class="ident" id="7825683"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825685">.</span><span class="ident" id="7825686">net</span>&nbsp;<span class="op" id="7825690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825695"><a href="/net/conn_test.go.html#7824709">t</a></span><span class="op" id="7825696">.</span><span class="ident" id="7825697">Fatalf</span><span class="op" id="7825703">(</span><span class="string" id="7825704">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="7825733">,</span>&nbsp;<span class="ident" id="7825735"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825736">.</span><span class="ident" id="7825737">LocalAddr</span><span class="op" id="7825746">(</span><span class="op" id="7825747">)</span><span class="op" id="7825748">.</span><span class="ident" id="7825749">Network</span><span class="op" id="7825756">(</span><span class="op" id="7825757">)</span><span class="op" id="7825758">,</span>&nbsp;<span class="ident" id="7825760"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825761">.</span><span class="ident" id="7825762">RemoteAddr</span><span class="op" id="7825772">(</span><span class="op" id="7825773">)</span><span class="op" id="7825774">.</span><span class="ident" id="7825775">Network</span><span class="op" id="7825782">(</span><span class="op" id="7825783">)</span><span class="op" id="7825784">,</span>&nbsp;<span class="ident" id="7825786"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825788">.</span><span class="ident" id="7825789">net</span><span class="op" id="7825792">,</span>&nbsp;<span class="ident" id="7825794"><a href="/net/conn_test.go.html#7824733">tt</a></span><span class="op" id="7825796">.</span><span class="ident" id="7825797">net</span><span class="op" id="7825800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7825804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825808"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825809">.</span><span class="ident" id="7825810">SetDeadline</span><span class="op" id="7825821">(</span><span class="ident" id="7825822"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7825826">.</span><span class="ident" id="7825827">Now</span><span class="op" id="7825830">(</span><span class="op" id="7825831">)</span><span class="op" id="7825832">.</span><span class="ident" id="7825833">Add</span><span class="op" id="7825836">(</span><span class="ident" id="7825837"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7825848">)</span><span class="op" id="7825849">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825853"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825854">.</span><span class="ident" id="7825855">SetReadDeadline</span><span class="op" id="7825870">(</span><span class="ident" id="7825871"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7825875">.</span><span class="ident" id="7825876">Now</span><span class="op" id="7825879">(</span><span class="op" id="7825880">)</span><span class="op" id="7825881">.</span><span class="ident" id="7825882">Add</span><span class="op" id="7825885">(</span><span class="ident" id="7825886"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7825897">)</span><span class="op" id="7825898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7825902"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825903">.</span><span class="ident" id="7825904">SetWriteDeadline</span><span class="op" id="7825920">(</span><span class="ident" id="7825921"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7825925">.</span><span class="ident" id="7825926">Now</span><span class="op" id="7825929">(</span><span class="op" id="7825930">)</span><span class="op" id="7825931">.</span><span class="ident" id="7825932">Add</span><span class="op" id="7825935">(</span><span class="ident" id="7825936"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7825947">)</span><span class="op" id="7825948">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7825953">if</span>&nbsp;<span class="ident" id="7825956">_</span><span class="op" id="7825957">,</span>&nbsp;<span class="ident" id="7825959">err</span>&nbsp;<span class="op" id="7825963">:=</span>&nbsp;<span class="ident" id="7825966"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7825967">.</span><span class="ident" id="7825968">Write</span><span class="op" id="7825973">(</span><span class="op" id="7825974">[</span><span class="op" id="7825975">]</span><span class="builtintype" id="7825976">byte</span><span class="op" id="7825980">(</span><span class="string" id="7825981">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="7825992">)</span><span class="op" id="7825993">)</span><span class="op" id="7825994">;</span>&nbsp;<span class="ident" id="7825996"><a href="/net/conn_test.go.html#7825959">err</a></span>&nbsp;<span class="op" id="7826000">!=</span>&nbsp;<span class="ident" id="7826003">nil</span>&nbsp;<span class="op" id="7826007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826012"><a href="/net/conn_test.go.html#7824709">t</a></span><span class="op" id="7826013">.</span><span class="ident" id="7826014">Fatalf</span><span class="op" id="7826020">(</span><span class="string" id="7826021">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7826044">,</span>&nbsp;<span class="ident" id="7826046"><a href="/net/conn_test.go.html#7825959">err</a></span><span class="op" id="7826049">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7826053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826057">rb</span>&nbsp;<span class="op" id="7826060">:=</span>&nbsp;<span class="builtinfunc" id="7826063">make</span><span class="op" id="7826067">(</span><span class="op" id="7826068">[</span><span class="op" id="7826069">]</span><span class="builtintype" id="7826070">byte</span><span class="op" id="7826074">,</span>&nbsp;<span class="num" id="7826076">128</span><span class="op" id="7826079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826083">if</span>&nbsp;<span class="ident" id="7826086">_</span><span class="op" id="7826087">,</span>&nbsp;<span class="ident" id="7826089">err</span>&nbsp;<span class="op" id="7826093">:=</span>&nbsp;<span class="ident" id="7826096"><a href="/net/conn_test.go.html#7825495">c</a></span><span class="op" id="7826097">.</span><span class="ident" id="7826098">Read</span><span class="op" id="7826102">(</span><span class="ident" id="7826103"><a href="/net/conn_test.go.html#7826057">rb</a></span><span class="op" id="7826105">)</span><span class="op" id="7826106">;</span>&nbsp;<span class="ident" id="7826108"><a href="/net/conn_test.go.html#7826089">err</a></span>&nbsp;<span class="op" id="7826112">!=</span>&nbsp;<span class="ident" id="7826115">nil</span>&nbsp;<span class="op" id="7826119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826124"><a href="/net/conn_test.go.html#7824709">t</a></span><span class="op" id="7826125">.</span><span class="ident" id="7826126">Fatalf</span><span class="op" id="7826132">(</span><span class="string" id="7826133">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7826155">,</span>&nbsp;<span class="ident" id="7826157"><a href="/net/conn_test.go.html#7826089">err</a></span><span class="op" id="7826160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7826164">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7826169">&lt;-</span><span class="ident" id="7826171"><a href="/net/conn_test.go.html#7825439">done</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7826177">}</span><br>
<span class="lineno"></span><span class="op" id="7826179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7826182">func</span>&nbsp;<span class="ident" id="7826187">transponder</span><span class="op" id="7826198">(</span><span class="ident" id="7826199">t</span>&nbsp;<span class="op" id="7826201">*</span><span class="ident" id="7826202"><a href="/net/conn_test.go.html#7824304">testing</a></span><span class="op" id="7826209">.</span><span class="ident" id="7826210">T</span><span class="op" id="7826211">,</span>&nbsp;<span class="ident" id="7826213">ln</span>&nbsp;<span class="ident" id="7826216"><a href="/net/net.go.html#1471621">Listener</a></span><span class="op" id="7826224">,</span>&nbsp;<span class="ident" id="7826226">done</span>&nbsp;<span class="keyword" id="7826231">chan</span><span class="op" id="7826235">&lt;-</span>&nbsp;<span class="builtintype" id="7826238">int</span><span class="op" id="7826241">)</span>&nbsp;<span class="op" id="7826243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826246">defer</span>&nbsp;<span class="keyword" id="7826252">func</span><span class="op" id="7826256">(</span><span class="op" id="7826257">)</span>&nbsp;<span class="op" id="7826259">{</span>&nbsp;<span class="ident" id="7826261"><a href="/net/conn_test.go.html#7826226">done</a></span>&nbsp;<span class="op" id="7826266">&lt;-</span>&nbsp;<span class="num" id="7826269">1</span>&nbsp;<span class="op" id="7826271">}</span><span class="op" id="7826272">(</span><span class="op" id="7826273">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826277">switch</span>&nbsp;<span class="ident" id="7826284">ln</span>&nbsp;<span class="op" id="7826287">:=</span>&nbsp;<span class="ident" id="7826290"><a href="/net/conn_test.go.html#7826213">ln</a></span><span class="op" id="7826292">.</span><span class="op" id="7826293">(</span><span class="keyword" id="7826294">type</span><span class="op" id="7826298">)</span>&nbsp;<span class="op" id="7826300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826303">case</span>&nbsp;<span class="op" id="7826308">*</span><span class="ident" id="7826309"><a href="/net/tcpsock_posix.go.html#1512824">TCPListener</a></span><span class="op" id="7826320">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826324"><a href="/net/conn_test.go.html#7826284">ln</a></span><span class="op" id="7826326">.</span><span class="ident" id="7826327">SetDeadline</span><span class="op" id="7826338">(</span><span class="ident" id="7826339"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7826343">.</span><span class="ident" id="7826344">Now</span><span class="op" id="7826347">(</span><span class="op" id="7826348">)</span><span class="op" id="7826349">.</span><span class="ident" id="7826350">Add</span><span class="op" id="7826353">(</span><span class="ident" id="7826354"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7826365">)</span><span class="op" id="7826366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826369">case</span>&nbsp;<span class="op" id="7826374">*</span><span class="ident" id="7826375"><a href="/net/unixsock_posix.go.html#1534130">UnixListener</a></span><span class="op" id="7826387">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826391"><a href="/net/conn_test.go.html#7826284">ln</a></span><span class="op" id="7826393">.</span><span class="ident" id="7826394">SetDeadline</span><span class="op" id="7826405">(</span><span class="ident" id="7826406"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7826410">.</span><span class="ident" id="7826411">Now</span><span class="op" id="7826414">(</span><span class="op" id="7826415">)</span><span class="op" id="7826416">.</span><span class="ident" id="7826417">Add</span><span class="op" id="7826420">(</span><span class="ident" id="7826421"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7826432">)</span><span class="op" id="7826433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7826436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826439">c</span><span class="op" id="7826440">,</span>&nbsp;<span class="ident" id="7826442">err</span>&nbsp;<span class="op" id="7826446">:=</span>&nbsp;<span class="ident" id="7826449"><a href="/net/conn_test.go.html#7826213">ln</a></span><span class="op" id="7826451">.</span><span class="ident" id="7826452">Accept</span><span class="op" id="7826458">(</span><span class="op" id="7826459">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826462">if</span>&nbsp;<span class="ident" id="7826465"><a href="/net/conn_test.go.html#7826442">err</a></span>&nbsp;<span class="op" id="7826469">!=</span>&nbsp;<span class="ident" id="7826472">nil</span>&nbsp;<span class="op" id="7826476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826480"><a href="/net/conn_test.go.html#7826199">t</a></span><span class="op" id="7826481">.</span><span class="ident" id="7826482">Errorf</span><span class="op" id="7826488">(</span><span class="string" id="7826489">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7826517">,</span>&nbsp;<span class="ident" id="7826519"><a href="/net/conn_test.go.html#7826442">err</a></span><span class="op" id="7826522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826526">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7826534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826537">defer</span>&nbsp;<span class="ident" id="7826543"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826544">.</span><span class="ident" id="7826545">Close</span><span class="op" id="7826550">(</span><span class="op" id="7826551">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826554">network</span>&nbsp;<span class="op" id="7826562">:=</span>&nbsp;<span class="ident" id="7826565"><a href="/net/conn_test.go.html#7826213">ln</a></span><span class="op" id="7826567">.</span><span class="ident" id="7826568">Addr</span><span class="op" id="7826572">(</span><span class="op" id="7826573">)</span><span class="op" id="7826574">.</span><span class="ident" id="7826575">Network</span><span class="op" id="7826582">(</span><span class="op" id="7826583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826586">if</span>&nbsp;<span class="ident" id="7826589"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826590">.</span><span class="ident" id="7826591">LocalAddr</span><span class="op" id="7826600">(</span><span class="op" id="7826601">)</span><span class="op" id="7826602">.</span><span class="ident" id="7826603">Network</span><span class="op" id="7826610">(</span><span class="op" id="7826611">)</span>&nbsp;<span class="op" id="7826613">!=</span>&nbsp;<span class="ident" id="7826616"><a href="/net/conn_test.go.html#7826554">network</a></span>&nbsp;<span class="op" id="7826624">||</span>&nbsp;<span class="ident" id="7826627"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826628">.</span><span class="ident" id="7826629">LocalAddr</span><span class="op" id="7826638">(</span><span class="op" id="7826639">)</span><span class="op" id="7826640">.</span><span class="ident" id="7826641">Network</span><span class="op" id="7826648">(</span><span class="op" id="7826649">)</span>&nbsp;<span class="op" id="7826651">!=</span>&nbsp;<span class="ident" id="7826654"><a href="/net/conn_test.go.html#7826554">network</a></span>&nbsp;<span class="op" id="7826662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826666"><a href="/net/conn_test.go.html#7826199">t</a></span><span class="op" id="7826667">.</span><span class="ident" id="7826668">Errorf</span><span class="op" id="7826674">(</span><span class="string" id="7826675">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="7826704">,</span>&nbsp;<span class="ident" id="7826706"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826707">.</span><span class="ident" id="7826708">LocalAddr</span><span class="op" id="7826717">(</span><span class="op" id="7826718">)</span><span class="op" id="7826719">.</span><span class="ident" id="7826720">Network</span><span class="op" id="7826727">(</span><span class="op" id="7826728">)</span><span class="op" id="7826729">,</span>&nbsp;<span class="ident" id="7826731"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826732">.</span><span class="ident" id="7826733">RemoteAddr</span><span class="op" id="7826743">(</span><span class="op" id="7826744">)</span><span class="op" id="7826745">.</span><span class="ident" id="7826746">Network</span><span class="op" id="7826753">(</span><span class="op" id="7826754">)</span><span class="op" id="7826755">,</span>&nbsp;<span class="ident" id="7826757"><a href="/net/conn_test.go.html#7826554">network</a></span><span class="op" id="7826764">,</span>&nbsp;<span class="ident" id="7826766"><a href="/net/conn_test.go.html#7826554">network</a></span><span class="op" id="7826773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826777">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7826785">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826788"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826789">.</span><span class="ident" id="7826790">SetDeadline</span><span class="op" id="7826801">(</span><span class="ident" id="7826802"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7826806">.</span><span class="ident" id="7826807">Now</span><span class="op" id="7826810">(</span><span class="op" id="7826811">)</span><span class="op" id="7826812">.</span><span class="ident" id="7826813">Add</span><span class="op" id="7826816">(</span><span class="ident" id="7826817"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7826828">)</span><span class="op" id="7826829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826832"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826833">.</span><span class="ident" id="7826834">SetReadDeadline</span><span class="op" id="7826849">(</span><span class="ident" id="7826850"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7826854">.</span><span class="ident" id="7826855">Now</span><span class="op" id="7826858">(</span><span class="op" id="7826859">)</span><span class="op" id="7826860">.</span><span class="ident" id="7826861">Add</span><span class="op" id="7826864">(</span><span class="ident" id="7826865"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7826876">)</span><span class="op" id="7826877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826880"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826881">.</span><span class="ident" id="7826882">SetWriteDeadline</span><span class="op" id="7826898">(</span><span class="ident" id="7826899"><a href="/net/conn_test.go.html#7824315">time</a></span><span class="op" id="7826903">.</span><span class="ident" id="7826904">Now</span><span class="op" id="7826907">(</span><span class="op" id="7826908">)</span><span class="op" id="7826909">.</span><span class="ident" id="7826910">Add</span><span class="op" id="7826913">(</span><span class="ident" id="7826914"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7826925">)</span><span class="op" id="7826926">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826930">b</span>&nbsp;<span class="op" id="7826932">:=</span>&nbsp;<span class="builtinfunc" id="7826935">make</span><span class="op" id="7826939">(</span><span class="op" id="7826940">[</span><span class="op" id="7826941">]</span><span class="builtintype" id="7826942">byte</span><span class="op" id="7826946">,</span>&nbsp;<span class="num" id="7826948">128</span><span class="op" id="7826951">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826954">n</span><span class="op" id="7826955">,</span>&nbsp;<span class="ident" id="7826957"><a href="/net/conn_test.go.html#7826442">err</a></span>&nbsp;<span class="op" id="7826961">:=</span>&nbsp;<span class="ident" id="7826964"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7826965">.</span><span class="ident" id="7826966">Read</span><span class="op" id="7826970">(</span><span class="ident" id="7826971"><a href="/net/conn_test.go.html#7826930">b</a></span><span class="op" id="7826972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7826975">if</span>&nbsp;<span class="ident" id="7826978"><a href="/net/conn_test.go.html#7826442">err</a></span>&nbsp;<span class="op" id="7826982">!=</span>&nbsp;<span class="ident" id="7826985">nil</span>&nbsp;<span class="op" id="7826989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7826993"><a href="/net/conn_test.go.html#7826199">t</a></span><span class="op" id="7826994">.</span><span class="ident" id="7826995">Errorf</span><span class="op" id="7827001">(</span><span class="string" id="7827002">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7827024">,</span>&nbsp;<span class="ident" id="7827026"><a href="/net/conn_test.go.html#7826442">err</a></span><span class="op" id="7827029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7827033">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7827041">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7827044">if</span>&nbsp;<span class="ident" id="7827047">_</span><span class="op" id="7827048">,</span>&nbsp;<span class="ident" id="7827050">err</span>&nbsp;<span class="op" id="7827054">:=</span>&nbsp;<span class="ident" id="7827057"><a href="/net/conn_test.go.html#7826439">c</a></span><span class="op" id="7827058">.</span><span class="ident" id="7827059">Write</span><span class="op" id="7827064">(</span><span class="ident" id="7827065"><a href="/net/conn_test.go.html#7826930">b</a></span><span class="op" id="7827066">[</span><span class="op" id="7827067">:</span><span class="ident" id="7827068"><a href="/net/conn_test.go.html#7826954">n</a></span><span class="op" id="7827069">]</span><span class="op" id="7827070">)</span><span class="op" id="7827071">;</span>&nbsp;<span class="ident" id="7827073"><a href="/net/conn_test.go.html#7827050">err</a></span>&nbsp;<span class="op" id="7827077">!=</span>&nbsp;<span class="ident" id="7827080">nil</span>&nbsp;<span class="op" id="7827084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7827088"><a href="/net/conn_test.go.html#7826199">t</a></span><span class="op" id="7827089">.</span><span class="ident" id="7827090">Errorf</span><span class="op" id="7827096">(</span><span class="string" id="7827097">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7827120">,</span>&nbsp;<span class="ident" id="7827122"><a href="/net/conn_test.go.html#7827050">err</a></span><span class="op" id="7827125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7827129">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7827137">}</span><br>
<span class="lineno"></span><span class="op" id="7827139">}</span>
</div>
</body>
</html>
