<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html" class="current">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5981906">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5981962">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5982016">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5982067">package</span>&nbsp;<span class="ident" id="5982075">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5982082">import</span>&nbsp;<span class="op" id="5982089">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5982092">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5982101">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5982111">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5982116">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5982119">type</span>&nbsp;<span class="ident" id="5982124">importReader</span>&nbsp;<span class="keyword" id="5982137">struct</span>&nbsp;<span class="op" id="5982144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982147">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5982152">*</span><span class="ident" id="5982153">bufio</span><span class="op" id="5982158">.</span><span class="ident" id="5982159">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982167">buf</span>&nbsp;&nbsp;<span class="op" id="5982172">[</span><span class="op" id="5982173">]</span><span class="builtintype" id="5982174">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982180">peek</span>&nbsp;<span class="builtintype" id="5982185">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982191">err</span>&nbsp;&nbsp;<span class="builtintype" id="5982196">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982203">eof</span>&nbsp;&nbsp;<span class="builtintype" id="5982208">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982214">nerr</span>&nbsp;<span class="builtintype" id="5982219">int</span><br>
<span class="lineno">20</span><span class="op" id="5982223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5982226">func</span>&nbsp;<span class="ident" id="5982231">isIdent</span><span class="op" id="5982238">(</span><span class="ident" id="5982239">c</span>&nbsp;<span class="builtintype" id="5982241">byte</span><span class="op" id="5982245">)</span>&nbsp;<span class="builtintype" id="5982247">bool</span>&nbsp;<span class="op" id="5982252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5982255">return</span>&nbsp;<span class="string" id="5982262">&#39;A&#39;</span>&nbsp;<span class="op" id="5982266">&lt;=</span>&nbsp;<span class="ident" id="5982269">c</span>&nbsp;<span class="op" id="5982271">&amp;&amp;</span>&nbsp;<span class="ident" id="5982274">c</span>&nbsp;<span class="op" id="5982276">&lt;=</span>&nbsp;<span class="string" id="5982279">&#39;Z&#39;</span>&nbsp;<span class="op" id="5982283">||</span>&nbsp;<span class="string" id="5982286">&#39;a&#39;</span>&nbsp;<span class="op" id="5982290">&lt;=</span>&nbsp;<span class="ident" id="5982293">c</span>&nbsp;<span class="op" id="5982295">&amp;&amp;</span>&nbsp;<span class="ident" id="5982298">c</span>&nbsp;<span class="op" id="5982300">&lt;=</span>&nbsp;<span class="string" id="5982303">&#39;z&#39;</span>&nbsp;<span class="op" id="5982307">||</span>&nbsp;<span class="string" id="5982310">&#39;0&#39;</span>&nbsp;<span class="op" id="5982314">&lt;=</span>&nbsp;<span class="ident" id="5982317">c</span>&nbsp;<span class="op" id="5982319">&amp;&amp;</span>&nbsp;<span class="ident" id="5982322">c</span>&nbsp;<span class="op" id="5982324">&lt;=</span>&nbsp;<span class="string" id="5982327">&#39;9&#39;</span>&nbsp;<span class="op" id="5982331">||</span>&nbsp;<span class="ident" id="5982334">c</span>&nbsp;<span class="op" id="5982336">==</span>&nbsp;<span class="string" id="5982339">&#39;_&#39;</span>&nbsp;<span class="op" id="5982343">||</span>&nbsp;<span class="ident" id="5982346">c</span>&nbsp;<span class="op" id="5982348">&gt;=</span>&nbsp;<span class="num" id="5982351">0x80</span><br>
<span class="lineno"></span><span class="op" id="5982356">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5982359">var</span>&nbsp;<span class="op" id="5982363">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982366">errSyntax</span>&nbsp;<span class="op" id="5982376">=</span>&nbsp;<span class="ident" id="5982378">errors</span><span class="op" id="5982384">.</span><span class="ident" id="5982385">New</span><span class="op" id="5982388">(</span><span class="string" id="5982389">&#34;syntax&nbsp;error&#34;</span><span class="op" id="5982403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982406">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5982416">=</span>&nbsp;<span class="ident" id="5982418">errors</span><span class="op" id="5982424">.</span><span class="ident" id="5982425">New</span><span class="op" id="5982428">(</span><span class="string" id="5982429">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="5982454">)</span><br>
<span class="lineno"></span><span class="op" id="5982456">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="5982459">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="5982554">func</span>&nbsp;<span class="op" id="5982559">(</span><span class="ident" id="5982560">r</span>&nbsp;<span class="op" id="5982562">*</span><span class="ident" id="5982563">importReader</span><span class="op" id="5982575">)</span>&nbsp;<span class="ident" id="5982577">syntaxError</span><span class="op" id="5982588">(</span><span class="op" id="5982589">)</span>&nbsp;<span class="op" id="5982591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5982594">if</span>&nbsp;<span class="ident" id="5982597">r</span><span class="op" id="5982598">.</span><span class="ident" id="5982599">err</span>&nbsp;<span class="op" id="5982603">==</span>&nbsp;<span class="ident" id="5982606">nil</span>&nbsp;<span class="op" id="5982610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982614">r</span><span class="op" id="5982615">.</span><span class="ident" id="5982616">err</span>&nbsp;<span class="op" id="5982620">=</span>&nbsp;<span class="ident" id="5982622">errSyntax</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5982633">}</span><br>
<span class="lineno"></span><span class="op" id="5982635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5982638">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5982719">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="5982793">func</span>&nbsp;<span class="op" id="5982798">(</span><span class="ident" id="5982799">r</span>&nbsp;<span class="op" id="5982801">*</span><span class="ident" id="5982802">importReader</span><span class="op" id="5982814">)</span>&nbsp;<span class="ident" id="5982816">readByte</span><span class="op" id="5982824">(</span><span class="op" id="5982825">)</span>&nbsp;<span class="builtintype" id="5982827">byte</span>&nbsp;<span class="op" id="5982832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982835">c</span><span class="op" id="5982836">,</span>&nbsp;<span class="ident" id="5982838">err</span>&nbsp;<span class="op" id="5982842">:=</span>&nbsp;<span class="ident" id="5982845">r</span><span class="op" id="5982846">.</span><span class="ident" id="5982847">b</span><span class="op" id="5982848">.</span><span class="ident" id="5982849">ReadByte</span><span class="op" id="5982857">(</span><span class="op" id="5982858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5982861">if</span>&nbsp;<span class="ident" id="5982864">err</span>&nbsp;<span class="op" id="5982868">==</span>&nbsp;<span class="ident" id="5982871">nil</span>&nbsp;<span class="op" id="5982875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982879">r</span><span class="op" id="5982880">.</span><span class="ident" id="5982881">buf</span>&nbsp;<span class="op" id="5982885">=</span>&nbsp;<span class="builtinfunc" id="5982887">append</span><span class="op" id="5982893">(</span><span class="ident" id="5982894">r</span><span class="op" id="5982895">.</span><span class="ident" id="5982896">buf</span><span class="op" id="5982899">,</span>&nbsp;<span class="ident" id="5982901">c</span><span class="op" id="5982902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5982906">if</span>&nbsp;<span class="ident" id="5982909">c</span>&nbsp;<span class="op" id="5982911">==</span>&nbsp;<span class="num" id="5982914">0</span>&nbsp;<span class="op" id="5982916">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982921">err</span>&nbsp;<span class="op" id="5982925">=</span>&nbsp;<span class="ident" id="5982927">errNUL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5982936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5982939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5982942">if</span>&nbsp;<span class="ident" id="5982945">err</span>&nbsp;<span class="op" id="5982949">!=</span>&nbsp;<span class="ident" id="5982952">nil</span>&nbsp;<span class="op" id="5982956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5982960">if</span>&nbsp;<span class="ident" id="5982963">err</span>&nbsp;<span class="op" id="5982967">==</span>&nbsp;<span class="ident" id="5982970">io</span><span class="op" id="5982972">.</span><span class="ident" id="5982973">EOF</span>&nbsp;<span class="op" id="5982977">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5982982">r</span><span class="op" id="5982983">.</span><span class="ident" id="5982984">eof</span>&nbsp;<span class="op" id="5982988">=</span>&nbsp;<span class="builtintype" id="5982990">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5982997">}</span>&nbsp;<span class="keyword" id="5982999">else</span>&nbsp;<span class="keyword" id="5983004">if</span>&nbsp;<span class="ident" id="5983007">r</span><span class="op" id="5983008">.</span><span class="ident" id="5983009">err</span>&nbsp;<span class="op" id="5983013">==</span>&nbsp;<span class="ident" id="5983016">nil</span>&nbsp;<span class="op" id="5983020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5983025">r</span><span class="op" id="5983026">.</span><span class="ident" id="5983027">err</span>&nbsp;<span class="op" id="5983031">=</span>&nbsp;<span class="ident" id="5983033">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5983039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5983043">c</span>&nbsp;<span class="op" id="5983045">=</span>&nbsp;<span class="num" id="5983047">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5983050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983053">return</span>&nbsp;<span class="ident" id="5983060">c</span><br>
<span class="lineno"></span><span class="op" id="5983062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5983065">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="5983153">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="5983221">func</span>&nbsp;<span class="op" id="5983226">(</span><span class="ident" id="5983227">r</span>&nbsp;<span class="op" id="5983229">*</span><span class="ident" id="5983230">importReader</span><span class="op" id="5983242">)</span>&nbsp;<span class="ident" id="5983244">peekByte</span><span class="op" id="5983252">(</span><span class="ident" id="5983253">skipSpace</span>&nbsp;<span class="builtintype" id="5983263">bool</span><span class="op" id="5983267">)</span>&nbsp;<span class="builtintype" id="5983269">byte</span>&nbsp;<span class="op" id="5983274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983277">if</span>&nbsp;<span class="ident" id="5983280">r</span><span class="op" id="5983281">.</span><span class="ident" id="5983282">err</span>&nbsp;<span class="op" id="5983286">!=</span>&nbsp;<span class="ident" id="5983289">nil</span>&nbsp;<span class="op" id="5983293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983297">if</span>&nbsp;<span class="ident" id="5983300">r</span><span class="op" id="5983301">.</span><span class="ident" id="5983302">nerr</span><span class="op" id="5983306">++</span><span class="op" id="5983308">;</span>&nbsp;<span class="ident" id="5983310">r</span><span class="op" id="5983311">.</span><span class="ident" id="5983312">nerr</span>&nbsp;<span class="op" id="5983317">&gt;</span>&nbsp;<span class="num" id="5983319">10000</span>&nbsp;<span class="op" id="5983325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5983330">panic</span><span class="op" id="5983335">(</span><span class="string" id="5983336">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="5983369">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5983373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983377">return</span>&nbsp;<span class="num" id="5983384">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5983387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5983391">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5983427">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5983505">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5983543">c</span>&nbsp;<span class="op" id="5983545">:=</span>&nbsp;<span class="ident" id="5983548">r</span><span class="op" id="5983549">.</span><span class="ident" id="5983550">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983556">if</span>&nbsp;<span class="ident" id="5983559">c</span>&nbsp;<span class="op" id="5983561">==</span>&nbsp;<span class="num" id="5983564">0</span>&nbsp;<span class="op" id="5983566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5983570">c</span>&nbsp;<span class="op" id="5983572">=</span>&nbsp;<span class="ident" id="5983574">r</span><span class="op" id="5983575">.</span><span class="ident" id="5983576">readByte</span><span class="op" id="5983584">(</span><span class="op" id="5983585">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5983588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983591">for</span>&nbsp;<span class="ident" id="5983595">r</span><span class="op" id="5983596">.</span><span class="ident" id="5983597">err</span>&nbsp;<span class="op" id="5983601">==</span>&nbsp;<span class="ident" id="5983604">nil</span>&nbsp;<span class="op" id="5983608">&amp;&amp;</span>&nbsp;<span class="op" id="5983611">!</span><span class="ident" id="5983612">r</span><span class="op" id="5983613">.</span><span class="ident" id="5983614">eof</span>&nbsp;<span class="op" id="5983618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983622">if</span>&nbsp;<span class="ident" id="5983625">skipSpace</span>&nbsp;<span class="op" id="5983635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5983640">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5983713">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983767">switch</span>&nbsp;<span class="ident" id="5983774">c</span>&nbsp;<span class="op" id="5983776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983781">case</span>&nbsp;<span class="string" id="5983786">&#39;&nbsp;&#39;</span><span class="op" id="5983789">,</span>&nbsp;<span class="string" id="5983791">&#39;\f&#39;</span><span class="op" id="5983795">,</span>&nbsp;<span class="string" id="5983797">&#39;\t&#39;</span><span class="op" id="5983801">,</span>&nbsp;<span class="string" id="5983803">&#39;\r&#39;</span><span class="op" id="5983807">,</span>&nbsp;<span class="string" id="5983809">&#39;\n&#39;</span><span class="op" id="5983813">,</span>&nbsp;<span class="string" id="5983815">&#39;;&#39;</span><span class="op" id="5983818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5983824">c</span>&nbsp;<span class="op" id="5983826">=</span>&nbsp;<span class="ident" id="5983828">r</span><span class="op" id="5983829">.</span><span class="ident" id="5983830">readByte</span><span class="op" id="5983838">(</span><span class="op" id="5983839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983845">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983858">case</span>&nbsp;<span class="string" id="5983863">&#39;/&#39;</span><span class="op" id="5983866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5983872">c</span>&nbsp;<span class="op" id="5983874">=</span>&nbsp;<span class="ident" id="5983876">r</span><span class="op" id="5983877">.</span><span class="ident" id="5983878">readByte</span><span class="op" id="5983886">(</span><span class="op" id="5983887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983893">if</span>&nbsp;<span class="ident" id="5983896">c</span>&nbsp;<span class="op" id="5983898">==</span>&nbsp;<span class="string" id="5983901">&#39;/&#39;</span>&nbsp;<span class="op" id="5983905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5983912">for</span>&nbsp;<span class="ident" id="5983916">c</span>&nbsp;<span class="op" id="5983918">!=</span>&nbsp;<span class="string" id="5983921">&#39;\n&#39;</span>&nbsp;<span class="op" id="5983926">&amp;&amp;</span>&nbsp;<span class="ident" id="5983929">r</span><span class="op" id="5983930">.</span><span class="ident" id="5983931">err</span>&nbsp;<span class="op" id="5983935">==</span>&nbsp;<span class="ident" id="5983938">nil</span>&nbsp;<span class="op" id="5983942">&amp;&amp;</span>&nbsp;<span class="op" id="5983945">!</span><span class="ident" id="5983946">r</span><span class="op" id="5983947">.</span><span class="ident" id="5983948">eof</span>&nbsp;<span class="op" id="5983952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5983960">c</span>&nbsp;<span class="op" id="5983962">=</span>&nbsp;<span class="ident" id="5983964">r</span><span class="op" id="5983965">.</span><span class="ident" id="5983966">readByte</span><span class="op" id="5983974">(</span><span class="op" id="5983975">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5983982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5983988">}</span>&nbsp;<span class="keyword" id="5983990">else</span>&nbsp;<span class="keyword" id="5983995">if</span>&nbsp;<span class="ident" id="5983998">c</span>&nbsp;<span class="op" id="5984000">==</span>&nbsp;<span class="string" id="5984003">&#39;*&#39;</span>&nbsp;<span class="op" id="5984007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984014">var</span>&nbsp;<span class="ident" id="5984018">c1</span>&nbsp;<span class="builtintype" id="5984021">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984031">for</span>&nbsp;<span class="op" id="5984035">(</span><span class="ident" id="5984036">c</span>&nbsp;<span class="op" id="5984038">!=</span>&nbsp;<span class="string" id="5984041">&#39;*&#39;</span>&nbsp;<span class="op" id="5984045">||</span>&nbsp;<span class="ident" id="5984048">c1</span>&nbsp;<span class="op" id="5984051">!=</span>&nbsp;<span class="string" id="5984054">&#39;/&#39;</span><span class="op" id="5984057">)</span>&nbsp;<span class="op" id="5984059">&amp;&amp;</span>&nbsp;<span class="ident" id="5984062">r</span><span class="op" id="5984063">.</span><span class="ident" id="5984064">err</span>&nbsp;<span class="op" id="5984068">==</span>&nbsp;<span class="ident" id="5984071">nil</span>&nbsp;<span class="op" id="5984075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984083">if</span>&nbsp;<span class="ident" id="5984086">r</span><span class="op" id="5984087">.</span><span class="ident" id="5984088">eof</span>&nbsp;<span class="op" id="5984092">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984101">r</span><span class="op" id="5984102">.</span><span class="ident" id="5984103">syntaxError</span><span class="op" id="5984114">(</span><span class="op" id="5984115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984131">c</span><span class="op" id="5984132">,</span>&nbsp;<span class="ident" id="5984134">c1</span>&nbsp;<span class="op" id="5984137">=</span>&nbsp;<span class="ident" id="5984139">c1</span><span class="op" id="5984141">,</span>&nbsp;<span class="ident" id="5984143">r</span><span class="op" id="5984144">.</span><span class="ident" id="5984145">readByte</span><span class="op" id="5984153">(</span><span class="op" id="5984154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984167">}</span>&nbsp;<span class="keyword" id="5984169">else</span>&nbsp;<span class="op" id="5984174">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984181">r</span><span class="op" id="5984182">.</span><span class="ident" id="5984183">syntaxError</span><span class="op" id="5984194">(</span><span class="op" id="5984195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984207">c</span>&nbsp;<span class="op" id="5984209">=</span>&nbsp;<span class="ident" id="5984211">r</span><span class="op" id="5984212">.</span><span class="ident" id="5984213">readByte</span><span class="op" id="5984221">(</span><span class="op" id="5984222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984228">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984240">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984248">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984258">r</span><span class="op" id="5984259">.</span><span class="ident" id="5984260">peek</span>&nbsp;<span class="op" id="5984265">=</span>&nbsp;<span class="ident" id="5984267">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984270">return</span>&nbsp;<span class="ident" id="5984277">r</span><span class="op" id="5984278">.</span><span class="ident" id="5984279">peek</span><br>
<span class="lineno">110</span><span class="op" id="5984284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5984287">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="5984355">func</span>&nbsp;<span class="op" id="5984360">(</span><span class="ident" id="5984361">r</span>&nbsp;<span class="op" id="5984363">*</span><span class="ident" id="5984364">importReader</span><span class="op" id="5984376">)</span>&nbsp;<span class="ident" id="5984378">nextByte</span><span class="op" id="5984386">(</span><span class="ident" id="5984387">skipSpace</span>&nbsp;<span class="builtintype" id="5984397">bool</span><span class="op" id="5984401">)</span>&nbsp;<span class="builtintype" id="5984403">byte</span>&nbsp;<span class="op" id="5984408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984411">c</span>&nbsp;<span class="op" id="5984413">:=</span>&nbsp;<span class="ident" id="5984416">r</span><span class="op" id="5984417">.</span><span class="ident" id="5984418">peekByte</span><span class="op" id="5984426">(</span><span class="ident" id="5984427">skipSpace</span><span class="op" id="5984436">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984439">r</span><span class="op" id="5984440">.</span><span class="ident" id="5984441">peek</span>&nbsp;<span class="op" id="5984446">=</span>&nbsp;<span class="num" id="5984448">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984451">return</span>&nbsp;<span class="ident" id="5984458">c</span><br>
<span class="lineno"></span><span class="op" id="5984460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5984463">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="5984518">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5984588">func</span>&nbsp;<span class="op" id="5984593">(</span><span class="ident" id="5984594">r</span>&nbsp;<span class="op" id="5984596">*</span><span class="ident" id="5984597">importReader</span><span class="op" id="5984609">)</span>&nbsp;<span class="ident" id="5984611">readKeyword</span><span class="op" id="5984622">(</span><span class="ident" id="5984623">kw</span>&nbsp;<span class="builtintype" id="5984626">string</span><span class="op" id="5984632">)</span>&nbsp;<span class="op" id="5984634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984637">r</span><span class="op" id="5984638">.</span><span class="ident" id="5984639">peekByte</span><span class="op" id="5984647">(</span><span class="builtintype" id="5984648">true</span><span class="op" id="5984652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984655">for</span>&nbsp;<span class="ident" id="5984659">i</span>&nbsp;<span class="op" id="5984661">:=</span>&nbsp;<span class="num" id="5984664">0</span><span class="op" id="5984665">;</span>&nbsp;<span class="ident" id="5984667">i</span>&nbsp;<span class="op" id="5984669">&lt;</span>&nbsp;<span class="builtinfunc" id="5984671">len</span><span class="op" id="5984674">(</span><span class="ident" id="5984675">kw</span><span class="op" id="5984677">)</span><span class="op" id="5984678">;</span>&nbsp;<span class="ident" id="5984680">i</span><span class="op" id="5984681">++</span>&nbsp;<span class="op" id="5984684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984688">if</span>&nbsp;<span class="ident" id="5984691">r</span><span class="op" id="5984692">.</span><span class="ident" id="5984693">nextByte</span><span class="op" id="5984701">(</span><span class="builtintype" id="5984702">false</span><span class="op" id="5984707">)</span>&nbsp;<span class="op" id="5984709">!=</span>&nbsp;<span class="ident" id="5984712">kw</span><span class="op" id="5984714">[</span><span class="ident" id="5984715">i</span><span class="op" id="5984716">]</span>&nbsp;<span class="op" id="5984718">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984723">r</span><span class="op" id="5984724">.</span><span class="ident" id="5984725">syntaxError</span><span class="op" id="5984736">(</span><span class="op" id="5984737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984742">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984757">if</span>&nbsp;<span class="ident" id="5984760">isIdent</span><span class="op" id="5984767">(</span><span class="ident" id="5984768">r</span><span class="op" id="5984769">.</span><span class="ident" id="5984770">peekByte</span><span class="op" id="5984778">(</span><span class="builtintype" id="5984779">false</span><span class="op" id="5984784">)</span><span class="op" id="5984785">)</span>&nbsp;<span class="op" id="5984787">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984791">r</span><span class="op" id="5984792">.</span><span class="ident" id="5984793">syntaxError</span><span class="op" id="5984804">(</span><span class="op" id="5984805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5984808">}</span><br>
<span class="lineno"></span><span class="op" id="5984810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5984813">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="5984862">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5984932">func</span>&nbsp;<span class="op" id="5984937">(</span><span class="ident" id="5984938">r</span>&nbsp;<span class="op" id="5984940">*</span><span class="ident" id="5984941">importReader</span><span class="op" id="5984953">)</span>&nbsp;<span class="ident" id="5984955">readIdent</span><span class="op" id="5984964">(</span><span class="op" id="5984965">)</span>&nbsp;<span class="op" id="5984967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5984970">c</span>&nbsp;<span class="op" id="5984972">:=</span>&nbsp;<span class="ident" id="5984975">r</span><span class="op" id="5984976">.</span><span class="ident" id="5984977">peekByte</span><span class="op" id="5984985">(</span><span class="builtintype" id="5984986">true</span><span class="op" id="5984990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5984993">if</span>&nbsp;<span class="op" id="5984996">!</span><span class="ident" id="5984997">isIdent</span><span class="op" id="5985004">(</span><span class="ident" id="5985005">c</span><span class="op" id="5985006">)</span>&nbsp;<span class="op" id="5985008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985012">r</span><span class="op" id="5985013">.</span><span class="ident" id="5985014">syntaxError</span><span class="op" id="5985025">(</span><span class="op" id="5985026">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985030">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985041">for</span>&nbsp;<span class="ident" id="5985045">isIdent</span><span class="op" id="5985052">(</span><span class="ident" id="5985053">r</span><span class="op" id="5985054">.</span><span class="ident" id="5985055">peekByte</span><span class="op" id="5985063">(</span><span class="builtintype" id="5985064">false</span><span class="op" id="5985069">)</span><span class="op" id="5985070">)</span>&nbsp;<span class="op" id="5985072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985076">r</span><span class="op" id="5985077">.</span><span class="ident" id="5985078">peek</span>&nbsp;<span class="op" id="5985083">=</span>&nbsp;<span class="num" id="5985085">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985088">}</span><br>
<span class="lineno">145</span><span class="op" id="5985090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5985093">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="5985153">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5985224">func</span>&nbsp;<span class="op" id="5985229">(</span><span class="ident" id="5985230">r</span>&nbsp;<span class="op" id="5985232">*</span><span class="ident" id="5985233">importReader</span><span class="op" id="5985245">)</span>&nbsp;<span class="ident" id="5985247">readString</span><span class="op" id="5985257">(</span><span class="op" id="5985258">)</span>&nbsp;<span class="op" id="5985260">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985263">switch</span>&nbsp;<span class="ident" id="5985270">r</span><span class="op" id="5985271">.</span><span class="ident" id="5985272">nextByte</span><span class="op" id="5985280">(</span><span class="builtintype" id="5985281">true</span><span class="op" id="5985285">)</span>&nbsp;<span class="op" id="5985287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985290">case</span>&nbsp;<span class="string" id="5985295">&#39;`&#39;</span><span class="op" id="5985298">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985302">for</span>&nbsp;<span class="ident" id="5985306">r</span><span class="op" id="5985307">.</span><span class="ident" id="5985308">err</span>&nbsp;<span class="op" id="5985312">==</span>&nbsp;<span class="ident" id="5985315">nil</span>&nbsp;<span class="op" id="5985319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985324">if</span>&nbsp;<span class="ident" id="5985327">r</span><span class="op" id="5985328">.</span><span class="ident" id="5985329">nextByte</span><span class="op" id="5985337">(</span><span class="builtintype" id="5985338">false</span><span class="op" id="5985343">)</span>&nbsp;<span class="op" id="5985345">==</span>&nbsp;<span class="string" id="5985348">&#39;`&#39;</span>&nbsp;<span class="op" id="5985352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985358">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985372">if</span>&nbsp;<span class="ident" id="5985375">r</span><span class="op" id="5985376">.</span><span class="ident" id="5985377">eof</span>&nbsp;<span class="op" id="5985381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985387">r</span><span class="op" id="5985388">.</span><span class="ident" id="5985389">syntaxError</span><span class="op" id="5985400">(</span><span class="op" id="5985401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985410">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985413">case</span>&nbsp;<span class="string" id="5985418">&#39;&#34;&#39;</span><span class="op" id="5985421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985425">for</span>&nbsp;<span class="ident" id="5985429">r</span><span class="op" id="5985430">.</span><span class="ident" id="5985431">err</span>&nbsp;<span class="op" id="5985435">==</span>&nbsp;<span class="ident" id="5985438">nil</span>&nbsp;<span class="op" id="5985442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985447">c</span>&nbsp;<span class="op" id="5985449">:=</span>&nbsp;<span class="ident" id="5985452">r</span><span class="op" id="5985453">.</span><span class="ident" id="5985454">nextByte</span><span class="op" id="5985462">(</span><span class="builtintype" id="5985463">false</span><span class="op" id="5985468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985473">if</span>&nbsp;<span class="ident" id="5985476">c</span>&nbsp;<span class="op" id="5985478">==</span>&nbsp;<span class="string" id="5985481">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5985485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985491">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985505">if</span>&nbsp;<span class="ident" id="5985508">r</span><span class="op" id="5985509">.</span><span class="ident" id="5985510">eof</span>&nbsp;<span class="op" id="5985514">||</span>&nbsp;<span class="ident" id="5985517">c</span>&nbsp;<span class="op" id="5985519">==</span>&nbsp;<span class="string" id="5985522">&#39;\n&#39;</span>&nbsp;<span class="op" id="5985527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985533">r</span><span class="op" id="5985534">.</span><span class="ident" id="5985535">syntaxError</span><span class="op" id="5985546">(</span><span class="op" id="5985547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985557">if</span>&nbsp;<span class="ident" id="5985560">c</span>&nbsp;<span class="op" id="5985562">==</span>&nbsp;<span class="string" id="5985565">&#39;\\&#39;</span>&nbsp;<span class="op" id="5985570">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985576">r</span><span class="op" id="5985577">.</span><span class="ident" id="5985578">nextByte</span><span class="op" id="5985586">(</span><span class="builtintype" id="5985587">false</span><span class="op" id="5985592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985604">default</span><span class="op" id="5985611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985615">r</span><span class="op" id="5985616">.</span><span class="ident" id="5985617">syntaxError</span><span class="op" id="5985628">(</span><span class="op" id="5985629">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985632">}</span><br>
<span class="lineno"></span><span class="op" id="5985634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5985637">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="5985724">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="5985743">func</span>&nbsp;<span class="op" id="5985748">(</span><span class="ident" id="5985749">r</span>&nbsp;<span class="op" id="5985751">*</span><span class="ident" id="5985752">importReader</span><span class="op" id="5985764">)</span>&nbsp;<span class="ident" id="5985766">readImport</span><span class="op" id="5985776">(</span><span class="op" id="5985777">)</span>&nbsp;<span class="op" id="5985779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985782">c</span>&nbsp;<span class="op" id="5985784">:=</span>&nbsp;<span class="ident" id="5985787">r</span><span class="op" id="5985788">.</span><span class="ident" id="5985789">peekByte</span><span class="op" id="5985797">(</span><span class="builtintype" id="5985798">true</span><span class="op" id="5985802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5985805">if</span>&nbsp;<span class="ident" id="5985808">c</span>&nbsp;<span class="op" id="5985810">==</span>&nbsp;<span class="string" id="5985813">&#39;.&#39;</span>&nbsp;<span class="op" id="5985817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985821">r</span><span class="op" id="5985822">.</span><span class="ident" id="5985823">peek</span>&nbsp;<span class="op" id="5985828">=</span>&nbsp;<span class="num" id="5985830">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985833">}</span>&nbsp;<span class="keyword" id="5985835">else</span>&nbsp;<span class="keyword" id="5985840">if</span>&nbsp;<span class="ident" id="5985843">isIdent</span><span class="op" id="5985850">(</span><span class="ident" id="5985851">c</span><span class="op" id="5985852">)</span>&nbsp;<span class="op" id="5985854">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985858">r</span><span class="op" id="5985859">.</span><span class="ident" id="5985860">readIdent</span><span class="op" id="5985869">(</span><span class="op" id="5985870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5985873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5985876">r</span><span class="op" id="5985877">.</span><span class="ident" id="5985878">readString</span><span class="op" id="5985888">(</span><span class="op" id="5985889">)</span><br>
<span class="lineno"></span><span class="op" id="5985891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="5985894">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="5985972">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5986006">func</span>&nbsp;<span class="ident" id="5986011">readComments</span><span class="op" id="5986023">(</span><span class="ident" id="5986024">f</span>&nbsp;<span class="ident" id="5986026">io</span><span class="op" id="5986028">.</span><span class="ident" id="5986029">Reader</span><span class="op" id="5986035">)</span>&nbsp;<span class="op" id="5986037">(</span><span class="op" id="5986038">[</span><span class="op" id="5986039">]</span><span class="builtintype" id="5986040">byte</span><span class="op" id="5986044">,</span>&nbsp;<span class="builtintype" id="5986046">error</span><span class="op" id="5986051">)</span>&nbsp;<span class="op" id="5986053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986056">r</span>&nbsp;<span class="op" id="5986058">:=</span>&nbsp;<span class="op" id="5986061">&amp;</span><span class="ident" id="5986062">importReader</span><span class="op" id="5986074">{</span><span class="ident" id="5986075">b</span><span class="op" id="5986076">:</span>&nbsp;<span class="ident" id="5986078">bufio</span><span class="op" id="5986083">.</span><span class="ident" id="5986084">NewReader</span><span class="op" id="5986093">(</span><span class="ident" id="5986094">f</span><span class="op" id="5986095">)</span><span class="op" id="5986096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986099">r</span><span class="op" id="5986100">.</span><span class="ident" id="5986101">peekByte</span><span class="op" id="5986109">(</span><span class="builtintype" id="5986110">true</span><span class="op" id="5986114">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5986117">if</span>&nbsp;<span class="ident" id="5986120">r</span><span class="op" id="5986121">.</span><span class="ident" id="5986122">err</span>&nbsp;<span class="op" id="5986126">==</span>&nbsp;<span class="ident" id="5986129">nil</span>&nbsp;<span class="op" id="5986133">&amp;&amp;</span>&nbsp;<span class="op" id="5986136">!</span><span class="ident" id="5986137">r</span><span class="op" id="5986138">.</span><span class="ident" id="5986139">eof</span>&nbsp;<span class="op" id="5986143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5986147">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986218">r</span><span class="op" id="5986219">.</span><span class="ident" id="5986220">buf</span>&nbsp;<span class="op" id="5986224">=</span>&nbsp;<span class="ident" id="5986226">r</span><span class="op" id="5986227">.</span><span class="ident" id="5986228">buf</span><span class="op" id="5986231">[</span><span class="op" id="5986232">:</span><span class="builtinfunc" id="5986233">len</span><span class="op" id="5986236">(</span><span class="ident" id="5986237">r</span><span class="op" id="5986238">.</span><span class="ident" id="5986239">buf</span><span class="op" id="5986242">)</span><span class="op" id="5986243">-</span><span class="num" id="5986244">1</span><span class="op" id="5986245">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5986248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5986251">return</span>&nbsp;<span class="ident" id="5986258">r</span><span class="op" id="5986259">.</span><span class="ident" id="5986260">buf</span><span class="op" id="5986263">,</span>&nbsp;<span class="ident" id="5986265">r</span><span class="op" id="5986266">.</span><span class="ident" id="5986267">err</span><br>
<span class="lineno">200</span><span class="op" id="5986271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5986274">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="5986355">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="5986419">func</span>&nbsp;<span class="ident" id="5986424">readImports</span><span class="op" id="5986435">(</span><span class="ident" id="5986436">f</span>&nbsp;<span class="ident" id="5986438">io</span><span class="op" id="5986440">.</span><span class="ident" id="5986441">Reader</span><span class="op" id="5986447">,</span>&nbsp;<span class="ident" id="5986449">reportSyntaxError</span>&nbsp;<span class="builtintype" id="5986467">bool</span><span class="op" id="5986471">)</span>&nbsp;<span class="op" id="5986473">(</span><span class="op" id="5986474">[</span><span class="op" id="5986475">]</span><span class="builtintype" id="5986476">byte</span><span class="op" id="5986480">,</span>&nbsp;<span class="builtintype" id="5986482">error</span><span class="op" id="5986487">)</span>&nbsp;<span class="op" id="5986489">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986492">r</span>&nbsp;<span class="op" id="5986494">:=</span>&nbsp;<span class="op" id="5986497">&amp;</span><span class="ident" id="5986498">importReader</span><span class="op" id="5986510">{</span><span class="ident" id="5986511">b</span><span class="op" id="5986512">:</span>&nbsp;<span class="ident" id="5986514">bufio</span><span class="op" id="5986519">.</span><span class="ident" id="5986520">NewReader</span><span class="op" id="5986529">(</span><span class="ident" id="5986530">f</span><span class="op" id="5986531">)</span><span class="op" id="5986532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986536">r</span><span class="op" id="5986537">.</span><span class="ident" id="5986538">readKeyword</span><span class="op" id="5986549">(</span><span class="string" id="5986550">&#34;package&#34;</span><span class="op" id="5986559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986562">r</span><span class="op" id="5986563">.</span><span class="ident" id="5986564">readIdent</span><span class="op" id="5986573">(</span><span class="op" id="5986574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5986577">for</span>&nbsp;<span class="ident" id="5986581">r</span><span class="op" id="5986582">.</span><span class="ident" id="5986583">peekByte</span><span class="op" id="5986591">(</span><span class="builtintype" id="5986592">true</span><span class="op" id="5986596">)</span>&nbsp;<span class="op" id="5986598">==</span>&nbsp;<span class="string" id="5986601">&#39;i&#39;</span>&nbsp;<span class="op" id="5986605">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986609">r</span><span class="op" id="5986610">.</span><span class="ident" id="5986611">readKeyword</span><span class="op" id="5986622">(</span><span class="string" id="5986623">&#34;import&#34;</span><span class="op" id="5986631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5986635">if</span>&nbsp;<span class="ident" id="5986638">r</span><span class="op" id="5986639">.</span><span class="ident" id="5986640">peekByte</span><span class="op" id="5986648">(</span><span class="builtintype" id="5986649">true</span><span class="op" id="5986653">)</span>&nbsp;<span class="op" id="5986655">==</span>&nbsp;<span class="string" id="5986658">&#39;(&#39;</span>&nbsp;<span class="op" id="5986662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986667">r</span><span class="op" id="5986668">.</span><span class="ident" id="5986669">nextByte</span><span class="op" id="5986677">(</span><span class="builtintype" id="5986678">false</span><span class="op" id="5986683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5986688">for</span>&nbsp;<span class="ident" id="5986692">r</span><span class="op" id="5986693">.</span><span class="ident" id="5986694">peekByte</span><span class="op" id="5986702">(</span><span class="builtintype" id="5986703">true</span><span class="op" id="5986707">)</span>&nbsp;<span class="op" id="5986709">!=</span>&nbsp;<span class="string" id="5986712">&#39;)&#39;</span>&nbsp;<span class="op" id="5986716">&amp;&amp;</span>&nbsp;<span class="ident" id="5986719">r</span><span class="op" id="5986720">.</span><span class="ident" id="5986721">err</span>&nbsp;<span class="op" id="5986725">==</span>&nbsp;<span class="ident" id="5986728">nil</span>&nbsp;<span class="op" id="5986732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986738">r</span><span class="op" id="5986739">.</span><span class="ident" id="5986740">readImport</span><span class="op" id="5986750">(</span><span class="op" id="5986751">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5986756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986761">r</span><span class="op" id="5986762">.</span><span class="ident" id="5986763">nextByte</span><span class="op" id="5986771">(</span><span class="builtintype" id="5986772">false</span><span class="op" id="5986777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5986781">}</span>&nbsp;<span class="keyword" id="5986783">else</span>&nbsp;<span class="op" id="5986788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5986793">r</span><span class="op" id="5986794">.</span><span class="ident" id="5986795">readImport</span><span class="op" id="5986805">(</span><span class="op" id="5986806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5986810">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5986813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5986817">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5986902">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5986992">if</span>&nbsp;<span class="ident" id="5986995">r</span><span class="op" id="5986996">.</span><span class="ident" id="5986997">err</span>&nbsp;<span class="op" id="5987001">==</span>&nbsp;<span class="ident" id="5987004">nil</span>&nbsp;<span class="op" id="5987008">&amp;&amp;</span>&nbsp;<span class="op" id="5987011">!</span><span class="ident" id="5987012">r</span><span class="op" id="5987013">.</span><span class="ident" id="5987014">eof</span>&nbsp;<span class="op" id="5987018">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5987022">return</span>&nbsp;<span class="ident" id="5987029">r</span><span class="op" id="5987030">.</span><span class="ident" id="5987031">buf</span><span class="op" id="5987034">[</span><span class="op" id="5987035">:</span><span class="builtinfunc" id="5987036">len</span><span class="op" id="5987039">(</span><span class="ident" id="5987040">r</span><span class="op" id="5987041">.</span><span class="ident" id="5987042">buf</span><span class="op" id="5987045">)</span><span class="op" id="5987046">-</span><span class="num" id="5987047">1</span><span class="op" id="5987048">]</span><span class="op" id="5987049">,</span>&nbsp;<span class="ident" id="5987051">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5987056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5987060">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5987129">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5987196">if</span>&nbsp;<span class="ident" id="5987199">r</span><span class="op" id="5987200">.</span><span class="ident" id="5987201">err</span>&nbsp;<span class="op" id="5987205">==</span>&nbsp;<span class="ident" id="5987208">errSyntax</span>&nbsp;<span class="op" id="5987218">&amp;&amp;</span>&nbsp;<span class="op" id="5987221">!</span><span class="ident" id="5987222">reportSyntaxError</span>&nbsp;<span class="op" id="5987240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5987244">r</span><span class="op" id="5987245">.</span><span class="ident" id="5987246">err</span>&nbsp;<span class="op" id="5987250">=</span>&nbsp;<span class="ident" id="5987252">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5987258">for</span>&nbsp;<span class="ident" id="5987262">r</span><span class="op" id="5987263">.</span><span class="ident" id="5987264">err</span>&nbsp;<span class="op" id="5987268">==</span>&nbsp;<span class="ident" id="5987271">nil</span>&nbsp;<span class="op" id="5987275">&amp;&amp;</span>&nbsp;<span class="op" id="5987278">!</span><span class="ident" id="5987279">r</span><span class="op" id="5987280">.</span><span class="ident" id="5987281">eof</span>&nbsp;<span class="op" id="5987285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5987290">r</span><span class="op" id="5987291">.</span><span class="ident" id="5987292">readByte</span><span class="op" id="5987300">(</span><span class="op" id="5987301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5987305">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5987308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5987312">return</span>&nbsp;<span class="ident" id="5987319">r</span><span class="op" id="5987320">.</span><span class="ident" id="5987321">buf</span><span class="op" id="5987324">,</span>&nbsp;<span class="ident" id="5987326">r</span><span class="op" id="5987327">.</span><span class="ident" id="5987328">err</span><br>
<span class="lineno"></span><span class="op" id="5987332">}</span>
</div>
</body>
</html>
