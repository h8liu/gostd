<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html" class="current">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6535958">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6536013">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6536067">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6536118">package</span>&nbsp;<span class="ident" id="6536126">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6536131">import</span>&nbsp;<span class="op" id="6536138">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6536141">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6536149">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6536155">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6536161">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6536172">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6536183">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6536190">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6536193">func</span>&nbsp;<span class="ident" id="6536198">skipServerTest</span><span class="op" id="6536212">(</span><span class="ident" id="6536213">net</span><span class="op" id="6536216">,</span>&nbsp;<span class="ident" id="6536218">unixsotype</span><span class="op" id="6536228">,</span>&nbsp;<span class="ident" id="6536230">addr</span>&nbsp;<span class="builtintype" id="6536235">string</span><span class="op" id="6536241">,</span>&nbsp;<span class="ident" id="6536243">ipv6</span><span class="op" id="6536247">,</span>&nbsp;<span class="ident" id="6536249">ipv4map</span><span class="op" id="6536256">,</span>&nbsp;<span class="ident" id="6536258">linuxOnly</span>&nbsp;<span class="builtintype" id="6536268">bool</span><span class="op" id="6536272">)</span>&nbsp;<span class="builtintype" id="6536274">bool</span>&nbsp;<span class="op" id="6536279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536282">switch</span>&nbsp;<span class="ident" id="6536289">runtime</span><span class="op" id="6536296">.</span><span class="ident" id="6536297">GOOS</span>&nbsp;<span class="op" id="6536302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536305">case</span>&nbsp;<span class="string" id="6536310">&#34;linux&#34;</span><span class="op" id="6536317">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536320">case</span>&nbsp;<span class="string" id="6536325">&#34;nacl&#34;</span><span class="op" id="6536331">,</span>&nbsp;<span class="string" id="6536333">&#34;plan9&#34;</span><span class="op" id="6536340">,</span>&nbsp;<span class="string" id="6536342">&#34;windows&#34;</span><span class="op" id="6536351">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6536355">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536416">if</span>&nbsp;<span class="ident" id="6536419">net</span>&nbsp;<span class="op" id="6536423">==</span>&nbsp;<span class="ident" id="6536426">unixsotype</span>&nbsp;<span class="op" id="6536437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536442">return</span>&nbsp;<span class="builtintype" id="6536449">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536459">default</span><span class="op" id="6536466">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536470">if</span>&nbsp;<span class="ident" id="6536473">net</span>&nbsp;<span class="op" id="6536477">==</span>&nbsp;<span class="ident" id="6536480">unixsotype</span>&nbsp;<span class="op" id="6536491">&amp;&amp;</span>&nbsp;<span class="ident" id="6536494">linuxOnly</span>&nbsp;<span class="op" id="6536504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536509">return</span>&nbsp;<span class="builtintype" id="6536516">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536529">switch</span>&nbsp;<span class="ident" id="6536536">addr</span>&nbsp;<span class="op" id="6536541">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536544">case</span>&nbsp;<span class="string" id="6536549">&#34;&#34;</span><span class="op" id="6536551">,</span>&nbsp;<span class="string" id="6536553">&#34;0.0.0.0&#34;</span><span class="op" id="6536562">,</span>&nbsp;<span class="string" id="6536564">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6536582">,</span>&nbsp;<span class="string" id="6536584">&#34;[::]&#34;</span><span class="op" id="6536590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536594">if</span>&nbsp;<span class="ident" id="6536597">testing</span><span class="op" id="6536604">.</span><span class="ident" id="6536605">Short</span><span class="op" id="6536610">(</span><span class="op" id="6536611">)</span>&nbsp;<span class="op" id="6536613">||</span>&nbsp;<span class="op" id="6536616">!</span><span class="op" id="6536617">*</span><span class="ident" id="6536618">testExternal</span>&nbsp;<span class="op" id="6536631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536636">return</span>&nbsp;<span class="builtintype" id="6536643">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536653">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536656">if</span>&nbsp;<span class="ident" id="6536659">ipv6</span>&nbsp;<span class="op" id="6536664">&amp;&amp;</span>&nbsp;<span class="op" id="6536667">!</span><span class="ident" id="6536668">supportsIPv6</span>&nbsp;<span class="op" id="6536681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536685">return</span>&nbsp;<span class="builtintype" id="6536692">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536701">if</span>&nbsp;<span class="ident" id="6536704">ipv4map</span>&nbsp;<span class="op" id="6536712">&amp;&amp;</span>&nbsp;<span class="op" id="6536715">!</span><span class="ident" id="6536716">supportsIPv4map</span>&nbsp;<span class="op" id="6536732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536736">return</span>&nbsp;<span class="builtintype" id="6536743">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536752">return</span>&nbsp;<span class="builtintype" id="6536759">false</span><br>
<span class="lineno"></span><span class="op" id="6536765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6536768">var</span>&nbsp;<span class="ident" id="6536772">streamConnServerTests</span>&nbsp;<span class="op" id="6536794">=</span>&nbsp;<span class="op" id="6536796">[</span><span class="op" id="6536797">]</span><span class="keyword" id="6536798">struct</span>&nbsp;<span class="op" id="6536805">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536808">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6536818">string</span>&nbsp;<span class="comment" id="6536825">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536841">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6536851">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536859">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6536869">string</span>&nbsp;<span class="comment" id="6536876">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536892">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6536902">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536910">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6536920">bool</span>&nbsp;<span class="comment" id="6536925">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536966">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6536976">bool</span>&nbsp;<span class="comment" id="6536981">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537027">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6537037">bool</span>&nbsp;<span class="comment" id="6537042">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537067">linuxOnly</span>&nbsp;<span class="builtintype" id="6537077">bool</span>&nbsp;<span class="comment" id="6537082">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6537136">}</span><span class="op" id="6537137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537140">{</span><span class="ident" id="6537141">snet</span><span class="op" id="6537145">:</span>&nbsp;<span class="string" id="6537147">&#34;tcp&#34;</span><span class="op" id="6537152">,</span>&nbsp;<span class="ident" id="6537154">saddr</span><span class="op" id="6537159">:</span>&nbsp;<span class="string" id="6537161">&#34;&#34;</span><span class="op" id="6537163">,</span>&nbsp;<span class="ident" id="6537165">cnet</span><span class="op" id="6537169">:</span>&nbsp;<span class="string" id="6537171">&#34;tcp&#34;</span><span class="op" id="6537176">,</span>&nbsp;<span class="ident" id="6537178">caddr</span><span class="op" id="6537183">:</span>&nbsp;<span class="string" id="6537185">&#34;127.0.0.1&#34;</span><span class="op" id="6537196">}</span><span class="op" id="6537197">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537200">{</span><span class="ident" id="6537201">snet</span><span class="op" id="6537205">:</span>&nbsp;<span class="string" id="6537207">&#34;tcp&#34;</span><span class="op" id="6537212">,</span>&nbsp;<span class="ident" id="6537214">saddr</span><span class="op" id="6537219">:</span>&nbsp;<span class="string" id="6537221">&#34;0.0.0.0&#34;</span><span class="op" id="6537230">,</span>&nbsp;<span class="ident" id="6537232">cnet</span><span class="op" id="6537236">:</span>&nbsp;<span class="string" id="6537238">&#34;tcp&#34;</span><span class="op" id="6537243">,</span>&nbsp;<span class="ident" id="6537245">caddr</span><span class="op" id="6537250">:</span>&nbsp;<span class="string" id="6537252">&#34;127.0.0.1&#34;</span><span class="op" id="6537263">}</span><span class="op" id="6537264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537267">{</span><span class="ident" id="6537268">snet</span><span class="op" id="6537272">:</span>&nbsp;<span class="string" id="6537274">&#34;tcp&#34;</span><span class="op" id="6537279">,</span>&nbsp;<span class="ident" id="6537281">saddr</span><span class="op" id="6537286">:</span>&nbsp;<span class="string" id="6537288">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6537306">,</span>&nbsp;<span class="ident" id="6537308">cnet</span><span class="op" id="6537312">:</span>&nbsp;<span class="string" id="6537314">&#34;tcp&#34;</span><span class="op" id="6537319">,</span>&nbsp;<span class="ident" id="6537321">caddr</span><span class="op" id="6537326">:</span>&nbsp;<span class="string" id="6537328">&#34;127.0.0.1&#34;</span><span class="op" id="6537339">}</span><span class="op" id="6537340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537343">{</span><span class="ident" id="6537344">snet</span><span class="op" id="6537348">:</span>&nbsp;<span class="string" id="6537350">&#34;tcp&#34;</span><span class="op" id="6537355">,</span>&nbsp;<span class="ident" id="6537357">saddr</span><span class="op" id="6537362">:</span>&nbsp;<span class="string" id="6537364">&#34;[::]&#34;</span><span class="op" id="6537370">,</span>&nbsp;<span class="ident" id="6537372">cnet</span><span class="op" id="6537376">:</span>&nbsp;<span class="string" id="6537378">&#34;tcp&#34;</span><span class="op" id="6537383">,</span>&nbsp;<span class="ident" id="6537385">caddr</span><span class="op" id="6537390">:</span>&nbsp;<span class="string" id="6537392">&#34;[::1]&#34;</span><span class="op" id="6537399">,</span>&nbsp;<span class="ident" id="6537401">ipv6</span><span class="op" id="6537405">:</span>&nbsp;<span class="builtintype" id="6537407">true</span><span class="op" id="6537411">}</span><span class="op" id="6537412">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537416">{</span><span class="ident" id="6537417">snet</span><span class="op" id="6537421">:</span>&nbsp;<span class="string" id="6537423">&#34;tcp&#34;</span><span class="op" id="6537428">,</span>&nbsp;<span class="ident" id="6537430">saddr</span><span class="op" id="6537435">:</span>&nbsp;<span class="string" id="6537437">&#34;&#34;</span><span class="op" id="6537439">,</span>&nbsp;<span class="ident" id="6537441">cnet</span><span class="op" id="6537445">:</span>&nbsp;<span class="string" id="6537447">&#34;tcp&#34;</span><span class="op" id="6537452">,</span>&nbsp;<span class="ident" id="6537454">caddr</span><span class="op" id="6537459">:</span>&nbsp;<span class="string" id="6537461">&#34;[::1]&#34;</span><span class="op" id="6537468">,</span>&nbsp;<span class="ident" id="6537470">ipv4map</span><span class="op" id="6537477">:</span>&nbsp;<span class="builtintype" id="6537479">true</span><span class="op" id="6537483">}</span><span class="op" id="6537484">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537487">{</span><span class="ident" id="6537488">snet</span><span class="op" id="6537492">:</span>&nbsp;<span class="string" id="6537494">&#34;tcp&#34;</span><span class="op" id="6537499">,</span>&nbsp;<span class="ident" id="6537501">saddr</span><span class="op" id="6537506">:</span>&nbsp;<span class="string" id="6537508">&#34;0.0.0.0&#34;</span><span class="op" id="6537517">,</span>&nbsp;<span class="ident" id="6537519">cnet</span><span class="op" id="6537523">:</span>&nbsp;<span class="string" id="6537525">&#34;tcp&#34;</span><span class="op" id="6537530">,</span>&nbsp;<span class="ident" id="6537532">caddr</span><span class="op" id="6537537">:</span>&nbsp;<span class="string" id="6537539">&#34;[::1]&#34;</span><span class="op" id="6537546">,</span>&nbsp;<span class="ident" id="6537548">ipv4map</span><span class="op" id="6537555">:</span>&nbsp;<span class="builtintype" id="6537557">true</span><span class="op" id="6537561">}</span><span class="op" id="6537562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537565">{</span><span class="ident" id="6537566">snet</span><span class="op" id="6537570">:</span>&nbsp;<span class="string" id="6537572">&#34;tcp&#34;</span><span class="op" id="6537577">,</span>&nbsp;<span class="ident" id="6537579">saddr</span><span class="op" id="6537584">:</span>&nbsp;<span class="string" id="6537586">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6537604">,</span>&nbsp;<span class="ident" id="6537606">cnet</span><span class="op" id="6537610">:</span>&nbsp;<span class="string" id="6537612">&#34;tcp&#34;</span><span class="op" id="6537617">,</span>&nbsp;<span class="ident" id="6537619">caddr</span><span class="op" id="6537624">:</span>&nbsp;<span class="string" id="6537626">&#34;[::1]&#34;</span><span class="op" id="6537633">,</span>&nbsp;<span class="ident" id="6537635">ipv4map</span><span class="op" id="6537642">:</span>&nbsp;<span class="builtintype" id="6537644">true</span><span class="op" id="6537648">}</span><span class="op" id="6537649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537652">{</span><span class="ident" id="6537653">snet</span><span class="op" id="6537657">:</span>&nbsp;<span class="string" id="6537659">&#34;tcp&#34;</span><span class="op" id="6537664">,</span>&nbsp;<span class="ident" id="6537666">saddr</span><span class="op" id="6537671">:</span>&nbsp;<span class="string" id="6537673">&#34;[::]&#34;</span><span class="op" id="6537679">,</span>&nbsp;<span class="ident" id="6537681">cnet</span><span class="op" id="6537685">:</span>&nbsp;<span class="string" id="6537687">&#34;tcp&#34;</span><span class="op" id="6537692">,</span>&nbsp;<span class="ident" id="6537694">caddr</span><span class="op" id="6537699">:</span>&nbsp;<span class="string" id="6537701">&#34;127.0.0.1&#34;</span><span class="op" id="6537712">,</span>&nbsp;<span class="ident" id="6537714">ipv4map</span><span class="op" id="6537721">:</span>&nbsp;<span class="builtintype" id="6537723">true</span><span class="op" id="6537727">}</span><span class="op" id="6537728">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537732">{</span><span class="ident" id="6537733">snet</span><span class="op" id="6537737">:</span>&nbsp;<span class="string" id="6537739">&#34;tcp&#34;</span><span class="op" id="6537744">,</span>&nbsp;<span class="ident" id="6537746">saddr</span><span class="op" id="6537751">:</span>&nbsp;<span class="string" id="6537753">&#34;&#34;</span><span class="op" id="6537755">,</span>&nbsp;<span class="ident" id="6537757">cnet</span><span class="op" id="6537761">:</span>&nbsp;<span class="string" id="6537763">&#34;tcp4&#34;</span><span class="op" id="6537769">,</span>&nbsp;<span class="ident" id="6537771">caddr</span><span class="op" id="6537776">:</span>&nbsp;<span class="string" id="6537778">&#34;127.0.0.1&#34;</span><span class="op" id="6537789">}</span><span class="op" id="6537790">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537793">{</span><span class="ident" id="6537794">snet</span><span class="op" id="6537798">:</span>&nbsp;<span class="string" id="6537800">&#34;tcp&#34;</span><span class="op" id="6537805">,</span>&nbsp;<span class="ident" id="6537807">saddr</span><span class="op" id="6537812">:</span>&nbsp;<span class="string" id="6537814">&#34;0.0.0.0&#34;</span><span class="op" id="6537823">,</span>&nbsp;<span class="ident" id="6537825">cnet</span><span class="op" id="6537829">:</span>&nbsp;<span class="string" id="6537831">&#34;tcp4&#34;</span><span class="op" id="6537837">,</span>&nbsp;<span class="ident" id="6537839">caddr</span><span class="op" id="6537844">:</span>&nbsp;<span class="string" id="6537846">&#34;127.0.0.1&#34;</span><span class="op" id="6537857">}</span><span class="op" id="6537858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537861">{</span><span class="ident" id="6537862">snet</span><span class="op" id="6537866">:</span>&nbsp;<span class="string" id="6537868">&#34;tcp&#34;</span><span class="op" id="6537873">,</span>&nbsp;<span class="ident" id="6537875">saddr</span><span class="op" id="6537880">:</span>&nbsp;<span class="string" id="6537882">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6537900">,</span>&nbsp;<span class="ident" id="6537902">cnet</span><span class="op" id="6537906">:</span>&nbsp;<span class="string" id="6537908">&#34;tcp4&#34;</span><span class="op" id="6537914">,</span>&nbsp;<span class="ident" id="6537916">caddr</span><span class="op" id="6537921">:</span>&nbsp;<span class="string" id="6537923">&#34;127.0.0.1&#34;</span><span class="op" id="6537934">}</span><span class="op" id="6537935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537938">{</span><span class="ident" id="6537939">snet</span><span class="op" id="6537943">:</span>&nbsp;<span class="string" id="6537945">&#34;tcp&#34;</span><span class="op" id="6537950">,</span>&nbsp;<span class="ident" id="6537952">saddr</span><span class="op" id="6537957">:</span>&nbsp;<span class="string" id="6537959">&#34;[::]&#34;</span><span class="op" id="6537965">,</span>&nbsp;<span class="ident" id="6537967">cnet</span><span class="op" id="6537971">:</span>&nbsp;<span class="string" id="6537973">&#34;tcp6&#34;</span><span class="op" id="6537979">,</span>&nbsp;<span class="ident" id="6537981">caddr</span><span class="op" id="6537986">:</span>&nbsp;<span class="string" id="6537988">&#34;[::1]&#34;</span><span class="op" id="6537995">,</span>&nbsp;<span class="ident" id="6537997">ipv6</span><span class="op" id="6538001">:</span>&nbsp;<span class="builtintype" id="6538003">true</span><span class="op" id="6538007">}</span><span class="op" id="6538008">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538012">{</span><span class="ident" id="6538013">snet</span><span class="op" id="6538017">:</span>&nbsp;<span class="string" id="6538019">&#34;tcp&#34;</span><span class="op" id="6538024">,</span>&nbsp;<span class="ident" id="6538026">saddr</span><span class="op" id="6538031">:</span>&nbsp;<span class="string" id="6538033">&#34;&#34;</span><span class="op" id="6538035">,</span>&nbsp;<span class="ident" id="6538037">cnet</span><span class="op" id="6538041">:</span>&nbsp;<span class="string" id="6538043">&#34;tcp6&#34;</span><span class="op" id="6538049">,</span>&nbsp;<span class="ident" id="6538051">caddr</span><span class="op" id="6538056">:</span>&nbsp;<span class="string" id="6538058">&#34;[::1]&#34;</span><span class="op" id="6538065">,</span>&nbsp;<span class="ident" id="6538067">ipv4map</span><span class="op" id="6538074">:</span>&nbsp;<span class="builtintype" id="6538076">true</span><span class="op" id="6538080">}</span><span class="op" id="6538081">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538084">{</span><span class="ident" id="6538085">snet</span><span class="op" id="6538089">:</span>&nbsp;<span class="string" id="6538091">&#34;tcp&#34;</span><span class="op" id="6538096">,</span>&nbsp;<span class="ident" id="6538098">saddr</span><span class="op" id="6538103">:</span>&nbsp;<span class="string" id="6538105">&#34;0.0.0.0&#34;</span><span class="op" id="6538114">,</span>&nbsp;<span class="ident" id="6538116">cnet</span><span class="op" id="6538120">:</span>&nbsp;<span class="string" id="6538122">&#34;tcp6&#34;</span><span class="op" id="6538128">,</span>&nbsp;<span class="ident" id="6538130">caddr</span><span class="op" id="6538135">:</span>&nbsp;<span class="string" id="6538137">&#34;[::1]&#34;</span><span class="op" id="6538144">,</span>&nbsp;<span class="ident" id="6538146">ipv4map</span><span class="op" id="6538153">:</span>&nbsp;<span class="builtintype" id="6538155">true</span><span class="op" id="6538159">}</span><span class="op" id="6538160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538163">{</span><span class="ident" id="6538164">snet</span><span class="op" id="6538168">:</span>&nbsp;<span class="string" id="6538170">&#34;tcp&#34;</span><span class="op" id="6538175">,</span>&nbsp;<span class="ident" id="6538177">saddr</span><span class="op" id="6538182">:</span>&nbsp;<span class="string" id="6538184">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6538202">,</span>&nbsp;<span class="ident" id="6538204">cnet</span><span class="op" id="6538208">:</span>&nbsp;<span class="string" id="6538210">&#34;tcp6&#34;</span><span class="op" id="6538216">,</span>&nbsp;<span class="ident" id="6538218">caddr</span><span class="op" id="6538223">:</span>&nbsp;<span class="string" id="6538225">&#34;[::1]&#34;</span><span class="op" id="6538232">,</span>&nbsp;<span class="ident" id="6538234">ipv4map</span><span class="op" id="6538241">:</span>&nbsp;<span class="builtintype" id="6538243">true</span><span class="op" id="6538247">}</span><span class="op" id="6538248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538251">{</span><span class="ident" id="6538252">snet</span><span class="op" id="6538256">:</span>&nbsp;<span class="string" id="6538258">&#34;tcp&#34;</span><span class="op" id="6538263">,</span>&nbsp;<span class="ident" id="6538265">saddr</span><span class="op" id="6538270">:</span>&nbsp;<span class="string" id="6538272">&#34;[::]&#34;</span><span class="op" id="6538278">,</span>&nbsp;<span class="ident" id="6538280">cnet</span><span class="op" id="6538284">:</span>&nbsp;<span class="string" id="6538286">&#34;tcp4&#34;</span><span class="op" id="6538292">,</span>&nbsp;<span class="ident" id="6538294">caddr</span><span class="op" id="6538299">:</span>&nbsp;<span class="string" id="6538301">&#34;127.0.0.1&#34;</span><span class="op" id="6538312">,</span>&nbsp;<span class="ident" id="6538314">ipv4map</span><span class="op" id="6538321">:</span>&nbsp;<span class="builtintype" id="6538323">true</span><span class="op" id="6538327">}</span><span class="op" id="6538328">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538332">{</span><span class="ident" id="6538333">snet</span><span class="op" id="6538337">:</span>&nbsp;<span class="string" id="6538339">&#34;tcp&#34;</span><span class="op" id="6538344">,</span>&nbsp;<span class="ident" id="6538346">saddr</span><span class="op" id="6538351">:</span>&nbsp;<span class="string" id="6538353">&#34;127.0.0.1&#34;</span><span class="op" id="6538364">,</span>&nbsp;<span class="ident" id="6538366">cnet</span><span class="op" id="6538370">:</span>&nbsp;<span class="string" id="6538372">&#34;tcp&#34;</span><span class="op" id="6538377">,</span>&nbsp;<span class="ident" id="6538379">caddr</span><span class="op" id="6538384">:</span>&nbsp;<span class="string" id="6538386">&#34;127.0.0.1&#34;</span><span class="op" id="6538397">}</span><span class="op" id="6538398">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538401">{</span><span class="ident" id="6538402">snet</span><span class="op" id="6538406">:</span>&nbsp;<span class="string" id="6538408">&#34;tcp&#34;</span><span class="op" id="6538413">,</span>&nbsp;<span class="ident" id="6538415">saddr</span><span class="op" id="6538420">:</span>&nbsp;<span class="string" id="6538422">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6538442">,</span>&nbsp;<span class="ident" id="6538444">cnet</span><span class="op" id="6538448">:</span>&nbsp;<span class="string" id="6538450">&#34;tcp&#34;</span><span class="op" id="6538455">,</span>&nbsp;<span class="ident" id="6538457">caddr</span><span class="op" id="6538462">:</span>&nbsp;<span class="string" id="6538464">&#34;127.0.0.1&#34;</span><span class="op" id="6538475">}</span><span class="op" id="6538476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538479">{</span><span class="ident" id="6538480">snet</span><span class="op" id="6538484">:</span>&nbsp;<span class="string" id="6538486">&#34;tcp&#34;</span><span class="op" id="6538491">,</span>&nbsp;<span class="ident" id="6538493">saddr</span><span class="op" id="6538498">:</span>&nbsp;<span class="string" id="6538500">&#34;[::1]&#34;</span><span class="op" id="6538507">,</span>&nbsp;<span class="ident" id="6538509">cnet</span><span class="op" id="6538513">:</span>&nbsp;<span class="string" id="6538515">&#34;tcp&#34;</span><span class="op" id="6538520">,</span>&nbsp;<span class="ident" id="6538522">caddr</span><span class="op" id="6538527">:</span>&nbsp;<span class="string" id="6538529">&#34;[::1]&#34;</span><span class="op" id="6538536">,</span>&nbsp;<span class="ident" id="6538538">ipv6</span><span class="op" id="6538542">:</span>&nbsp;<span class="builtintype" id="6538544">true</span><span class="op" id="6538548">}</span><span class="op" id="6538549">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538553">{</span><span class="ident" id="6538554">snet</span><span class="op" id="6538558">:</span>&nbsp;<span class="string" id="6538560">&#34;tcp4&#34;</span><span class="op" id="6538566">,</span>&nbsp;<span class="ident" id="6538568">saddr</span><span class="op" id="6538573">:</span>&nbsp;<span class="string" id="6538575">&#34;&#34;</span><span class="op" id="6538577">,</span>&nbsp;<span class="ident" id="6538579">cnet</span><span class="op" id="6538583">:</span>&nbsp;<span class="string" id="6538585">&#34;tcp4&#34;</span><span class="op" id="6538591">,</span>&nbsp;<span class="ident" id="6538593">caddr</span><span class="op" id="6538598">:</span>&nbsp;<span class="string" id="6538600">&#34;127.0.0.1&#34;</span><span class="op" id="6538611">}</span><span class="op" id="6538612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538615">{</span><span class="ident" id="6538616">snet</span><span class="op" id="6538620">:</span>&nbsp;<span class="string" id="6538622">&#34;tcp4&#34;</span><span class="op" id="6538628">,</span>&nbsp;<span class="ident" id="6538630">saddr</span><span class="op" id="6538635">:</span>&nbsp;<span class="string" id="6538637">&#34;0.0.0.0&#34;</span><span class="op" id="6538646">,</span>&nbsp;<span class="ident" id="6538648">cnet</span><span class="op" id="6538652">:</span>&nbsp;<span class="string" id="6538654">&#34;tcp4&#34;</span><span class="op" id="6538660">,</span>&nbsp;<span class="ident" id="6538662">caddr</span><span class="op" id="6538667">:</span>&nbsp;<span class="string" id="6538669">&#34;127.0.0.1&#34;</span><span class="op" id="6538680">}</span><span class="op" id="6538681">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538684">{</span><span class="ident" id="6538685">snet</span><span class="op" id="6538689">:</span>&nbsp;<span class="string" id="6538691">&#34;tcp4&#34;</span><span class="op" id="6538697">,</span>&nbsp;<span class="ident" id="6538699">saddr</span><span class="op" id="6538704">:</span>&nbsp;<span class="string" id="6538706">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6538724">,</span>&nbsp;<span class="ident" id="6538726">cnet</span><span class="op" id="6538730">:</span>&nbsp;<span class="string" id="6538732">&#34;tcp4&#34;</span><span class="op" id="6538738">,</span>&nbsp;<span class="ident" id="6538740">caddr</span><span class="op" id="6538745">:</span>&nbsp;<span class="string" id="6538747">&#34;127.0.0.1&#34;</span><span class="op" id="6538758">}</span><span class="op" id="6538759">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538763">{</span><span class="ident" id="6538764">snet</span><span class="op" id="6538768">:</span>&nbsp;<span class="string" id="6538770">&#34;tcp4&#34;</span><span class="op" id="6538776">,</span>&nbsp;<span class="ident" id="6538778">saddr</span><span class="op" id="6538783">:</span>&nbsp;<span class="string" id="6538785">&#34;127.0.0.1&#34;</span><span class="op" id="6538796">,</span>&nbsp;<span class="ident" id="6538798">cnet</span><span class="op" id="6538802">:</span>&nbsp;<span class="string" id="6538804">&#34;tcp4&#34;</span><span class="op" id="6538810">,</span>&nbsp;<span class="ident" id="6538812">caddr</span><span class="op" id="6538817">:</span>&nbsp;<span class="string" id="6538819">&#34;127.0.0.1&#34;</span><span class="op" id="6538830">}</span><span class="op" id="6538831">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538835">{</span><span class="ident" id="6538836">snet</span><span class="op" id="6538840">:</span>&nbsp;<span class="string" id="6538842">&#34;tcp6&#34;</span><span class="op" id="6538848">,</span>&nbsp;<span class="ident" id="6538850">saddr</span><span class="op" id="6538855">:</span>&nbsp;<span class="string" id="6538857">&#34;&#34;</span><span class="op" id="6538859">,</span>&nbsp;<span class="ident" id="6538861">cnet</span><span class="op" id="6538865">:</span>&nbsp;<span class="string" id="6538867">&#34;tcp6&#34;</span><span class="op" id="6538873">,</span>&nbsp;<span class="ident" id="6538875">caddr</span><span class="op" id="6538880">:</span>&nbsp;<span class="string" id="6538882">&#34;[::1]&#34;</span><span class="op" id="6538889">,</span>&nbsp;<span class="ident" id="6538891">ipv6</span><span class="op" id="6538895">:</span>&nbsp;<span class="builtintype" id="6538897">true</span><span class="op" id="6538901">}</span><span class="op" id="6538902">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538905">{</span><span class="ident" id="6538906">snet</span><span class="op" id="6538910">:</span>&nbsp;<span class="string" id="6538912">&#34;tcp6&#34;</span><span class="op" id="6538918">,</span>&nbsp;<span class="ident" id="6538920">saddr</span><span class="op" id="6538925">:</span>&nbsp;<span class="string" id="6538927">&#34;[::]&#34;</span><span class="op" id="6538933">,</span>&nbsp;<span class="ident" id="6538935">cnet</span><span class="op" id="6538939">:</span>&nbsp;<span class="string" id="6538941">&#34;tcp6&#34;</span><span class="op" id="6538947">,</span>&nbsp;<span class="ident" id="6538949">caddr</span><span class="op" id="6538954">:</span>&nbsp;<span class="string" id="6538956">&#34;[::1]&#34;</span><span class="op" id="6538963">,</span>&nbsp;<span class="ident" id="6538965">ipv6</span><span class="op" id="6538969">:</span>&nbsp;<span class="builtintype" id="6538971">true</span><span class="op" id="6538975">}</span><span class="op" id="6538976">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538980">{</span><span class="ident" id="6538981">snet</span><span class="op" id="6538985">:</span>&nbsp;<span class="string" id="6538987">&#34;tcp6&#34;</span><span class="op" id="6538993">,</span>&nbsp;<span class="ident" id="6538995">saddr</span><span class="op" id="6539000">:</span>&nbsp;<span class="string" id="6539002">&#34;[::1]&#34;</span><span class="op" id="6539009">,</span>&nbsp;<span class="ident" id="6539011">cnet</span><span class="op" id="6539015">:</span>&nbsp;<span class="string" id="6539017">&#34;tcp6&#34;</span><span class="op" id="6539023">,</span>&nbsp;<span class="ident" id="6539025">caddr</span><span class="op" id="6539030">:</span>&nbsp;<span class="string" id="6539032">&#34;[::1]&#34;</span><span class="op" id="6539039">,</span>&nbsp;<span class="ident" id="6539041">ipv6</span><span class="op" id="6539045">:</span>&nbsp;<span class="builtintype" id="6539047">true</span><span class="op" id="6539051">}</span><span class="op" id="6539052">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539056">{</span><span class="ident" id="6539057">snet</span><span class="op" id="6539061">:</span>&nbsp;<span class="string" id="6539063">&#34;unix&#34;</span><span class="op" id="6539069">,</span>&nbsp;<span class="ident" id="6539071">saddr</span><span class="op" id="6539076">:</span>&nbsp;<span class="ident" id="6539078">testUnixAddr</span><span class="op" id="6539090">(</span><span class="op" id="6539091">)</span><span class="op" id="6539092">,</span>&nbsp;<span class="ident" id="6539094">cnet</span><span class="op" id="6539098">:</span>&nbsp;<span class="string" id="6539100">&#34;unix&#34;</span><span class="op" id="6539106">,</span>&nbsp;<span class="ident" id="6539108">caddr</span><span class="op" id="6539113">:</span>&nbsp;<span class="ident" id="6539115">testUnixAddr</span><span class="op" id="6539127">(</span><span class="op" id="6539128">)</span><span class="op" id="6539129">}</span><span class="op" id="6539130">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539133">{</span><span class="ident" id="6539134">snet</span><span class="op" id="6539138">:</span>&nbsp;<span class="string" id="6539140">&#34;unix&#34;</span><span class="op" id="6539146">,</span>&nbsp;<span class="ident" id="6539148">saddr</span><span class="op" id="6539153">:</span>&nbsp;<span class="string" id="6539155">&#34;@gotest2/net&#34;</span><span class="op" id="6539169">,</span>&nbsp;<span class="ident" id="6539171">cnet</span><span class="op" id="6539175">:</span>&nbsp;<span class="string" id="6539177">&#34;unix&#34;</span><span class="op" id="6539183">,</span>&nbsp;<span class="ident" id="6539185">caddr</span><span class="op" id="6539190">:</span>&nbsp;<span class="string" id="6539192">&#34;@gotest2/net.local&#34;</span><span class="op" id="6539212">,</span>&nbsp;<span class="ident" id="6539214">linuxOnly</span><span class="op" id="6539223">:</span>&nbsp;<span class="builtintype" id="6539225">true</span><span class="op" id="6539229">}</span><span class="op" id="6539230">,</span><br>
<span class="lineno"></span><span class="op" id="6539232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6539235">func</span>&nbsp;<span class="ident" id="6539240">TestStreamConnServer</span><span class="op" id="6539260">(</span><span class="ident" id="6539261">t</span>&nbsp;<span class="op" id="6539263">*</span><span class="ident" id="6539264">testing</span><span class="op" id="6539271">.</span><span class="ident" id="6539272">T</span><span class="op" id="6539273">)</span>&nbsp;<span class="op" id="6539275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539278">for</span>&nbsp;<span class="ident" id="6539282">_</span><span class="op" id="6539283">,</span>&nbsp;<span class="ident" id="6539285">tt</span>&nbsp;<span class="op" id="6539288">:=</span>&nbsp;<span class="keyword" id="6539291">range</span>&nbsp;<span class="ident" id="6539297">streamConnServerTests</span>&nbsp;<span class="op" id="6539319">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539323">if</span>&nbsp;<span class="ident" id="6539326">skipServerTest</span><span class="op" id="6539340">(</span><span class="ident" id="6539341">tt</span><span class="op" id="6539343">.</span><span class="ident" id="6539344">snet</span><span class="op" id="6539348">,</span>&nbsp;<span class="string" id="6539350">&#34;unix&#34;</span><span class="op" id="6539356">,</span>&nbsp;<span class="ident" id="6539358">tt</span><span class="op" id="6539360">.</span><span class="ident" id="6539361">saddr</span><span class="op" id="6539366">,</span>&nbsp;<span class="ident" id="6539368">tt</span><span class="op" id="6539370">.</span><span class="ident" id="6539371">ipv6</span><span class="op" id="6539375">,</span>&nbsp;<span class="ident" id="6539377">tt</span><span class="op" id="6539379">.</span><span class="ident" id="6539380">ipv4map</span><span class="op" id="6539387">,</span>&nbsp;<span class="ident" id="6539389">tt</span><span class="op" id="6539391">.</span><span class="ident" id="6539392">linuxOnly</span><span class="op" id="6539401">)</span>&nbsp;<span class="op" id="6539403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539408">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539424">listening</span>&nbsp;<span class="op" id="6539434">:=</span>&nbsp;<span class="builtinfunc" id="6539437">make</span><span class="op" id="6539441">(</span><span class="keyword" id="6539442">chan</span>&nbsp;<span class="builtintype" id="6539447">string</span><span class="op" id="6539453">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539457">done</span>&nbsp;<span class="op" id="6539462">:=</span>&nbsp;<span class="builtinfunc" id="6539465">make</span><span class="op" id="6539469">(</span><span class="keyword" id="6539470">chan</span>&nbsp;<span class="builtintype" id="6539475">int</span><span class="op" id="6539478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539482">switch</span>&nbsp;<span class="ident" id="6539489">tt</span><span class="op" id="6539491">.</span><span class="ident" id="6539492">snet</span>&nbsp;<span class="op" id="6539497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539501">case</span>&nbsp;<span class="string" id="6539506">&#34;tcp&#34;</span><span class="op" id="6539511">,</span>&nbsp;<span class="string" id="6539513">&#34;tcp4&#34;</span><span class="op" id="6539519">,</span>&nbsp;<span class="string" id="6539521">&#34;tcp6&#34;</span><span class="op" id="6539527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539532">tt</span><span class="op" id="6539534">.</span><span class="ident" id="6539535">saddr</span>&nbsp;<span class="op" id="6539541">+=</span>&nbsp;<span class="string" id="6539544">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539551">case</span>&nbsp;<span class="string" id="6539556">&#34;unix&#34;</span><span class="op" id="6539562">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539567">os</span><span class="op" id="6539569">.</span><span class="ident" id="6539570">Remove</span><span class="op" id="6539576">(</span><span class="ident" id="6539577">tt</span><span class="op" id="6539579">.</span><span class="ident" id="6539580">saddr</span><span class="op" id="6539585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539590">os</span><span class="op" id="6539592">.</span><span class="ident" id="6539593">Remove</span><span class="op" id="6539599">(</span><span class="ident" id="6539600">tt</span><span class="op" id="6539602">.</span><span class="ident" id="6539603">caddr</span><span class="op" id="6539608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539617">go</span>&nbsp;<span class="ident" id="6539620">runStreamConnServer</span><span class="op" id="6539639">(</span><span class="ident" id="6539640">t</span><span class="op" id="6539641">,</span>&nbsp;<span class="ident" id="6539643">tt</span><span class="op" id="6539645">.</span><span class="ident" id="6539646">snet</span><span class="op" id="6539650">,</span>&nbsp;<span class="ident" id="6539652">tt</span><span class="op" id="6539654">.</span><span class="ident" id="6539655">saddr</span><span class="op" id="6539660">,</span>&nbsp;<span class="ident" id="6539662">listening</span><span class="op" id="6539671">,</span>&nbsp;<span class="ident" id="6539673">done</span><span class="op" id="6539677">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539681">taddr</span>&nbsp;<span class="op" id="6539687">:=</span>&nbsp;<span class="op" id="6539690">&lt;-</span><span class="ident" id="6539692">listening</span>&nbsp;<span class="comment" id="6539702">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539733">switch</span>&nbsp;<span class="ident" id="6539740">tt</span><span class="op" id="6539742">.</span><span class="ident" id="6539743">cnet</span>&nbsp;<span class="op" id="6539748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539752">case</span>&nbsp;<span class="string" id="6539757">&#34;tcp&#34;</span><span class="op" id="6539762">,</span>&nbsp;<span class="string" id="6539764">&#34;tcp4&#34;</span><span class="op" id="6539770">,</span>&nbsp;<span class="string" id="6539772">&#34;tcp6&#34;</span><span class="op" id="6539778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539783">_</span><span class="op" id="6539784">,</span>&nbsp;<span class="ident" id="6539786">port</span><span class="op" id="6539790">,</span>&nbsp;<span class="ident" id="6539792">err</span>&nbsp;<span class="op" id="6539796">:=</span>&nbsp;<span class="ident" id="6539799">SplitHostPort</span><span class="op" id="6539812">(</span><span class="ident" id="6539813">taddr</span><span class="op" id="6539818">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539823">if</span>&nbsp;<span class="ident" id="6539826">err</span>&nbsp;<span class="op" id="6539830">!=</span>&nbsp;<span class="builtintype" id="6539833">nil</span>&nbsp;<span class="op" id="6539837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539843">t</span><span class="op" id="6539844">.</span><span class="ident" id="6539845">Fatalf</span><span class="op" id="6539851">(</span><span class="string" id="6539852">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6539882">,</span>&nbsp;<span class="ident" id="6539884">taddr</span><span class="op" id="6539889">,</span>&nbsp;<span class="ident" id="6539891">err</span><span class="op" id="6539894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539904">taddr</span>&nbsp;<span class="op" id="6539910">=</span>&nbsp;<span class="ident" id="6539912">tt</span><span class="op" id="6539914">.</span><span class="ident" id="6539915">caddr</span>&nbsp;<span class="op" id="6539921">+</span>&nbsp;<span class="string" id="6539923">&#34;:&#34;</span>&nbsp;<span class="op" id="6539927">+</span>&nbsp;<span class="ident" id="6539929">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539936">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539941">runStreamConnClient</span><span class="op" id="6539960">(</span><span class="ident" id="6539961">t</span><span class="op" id="6539962">,</span>&nbsp;<span class="ident" id="6539964">tt</span><span class="op" id="6539966">.</span><span class="ident" id="6539967">cnet</span><span class="op" id="6539971">,</span>&nbsp;<span class="ident" id="6539973">taddr</span><span class="op" id="6539978">,</span>&nbsp;<span class="ident" id="6539980">tt</span><span class="op" id="6539982">.</span><span class="ident" id="6539983">empty</span><span class="op" id="6539988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539992">&lt;-</span><span class="ident" id="6539994">done</span>&nbsp;<span class="comment" id="6539999">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540030">switch</span>&nbsp;<span class="ident" id="6540037">tt</span><span class="op" id="6540039">.</span><span class="ident" id="6540040">snet</span>&nbsp;<span class="op" id="6540045">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540049">case</span>&nbsp;<span class="string" id="6540054">&#34;unix&#34;</span><span class="op" id="6540060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540065">os</span><span class="op" id="6540067">.</span><span class="ident" id="6540068">Remove</span><span class="op" id="6540074">(</span><span class="ident" id="6540075">tt</span><span class="op" id="6540077">.</span><span class="ident" id="6540078">saddr</span><span class="op" id="6540083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540088">os</span><span class="op" id="6540090">.</span><span class="ident" id="6540091">Remove</span><span class="op" id="6540097">(</span><span class="ident" id="6540098">tt</span><span class="op" id="6540100">.</span><span class="ident" id="6540101">caddr</span><span class="op" id="6540106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540113">}</span><br>
<span class="lineno">130</span><span class="op" id="6540115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6540118">var</span>&nbsp;<span class="ident" id="6540122">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6540147">=</span>&nbsp;<span class="op" id="6540149">[</span><span class="op" id="6540150">]</span><span class="keyword" id="6540151">struct</span>&nbsp;<span class="op" id="6540158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540161">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6540171">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540179">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6540189">string</span>&nbsp;<span class="comment" id="6540196">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540215">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6540225">string</span>&nbsp;<span class="comment" id="6540232">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540251">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6540261">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6540268">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540293">linuxOnly</span>&nbsp;<span class="builtintype" id="6540303">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6540310">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6540364">}</span><span class="op" id="6540365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540368">{</span><span class="ident" id="6540369">net</span><span class="op" id="6540372">:</span>&nbsp;<span class="string" id="6540374">&#34;unixpacket&#34;</span><span class="op" id="6540386">,</span>&nbsp;<span class="ident" id="6540388">saddr</span><span class="op" id="6540393">:</span>&nbsp;<span class="ident" id="6540395">testUnixAddr</span><span class="op" id="6540407">(</span><span class="op" id="6540408">)</span><span class="op" id="6540409">,</span>&nbsp;<span class="ident" id="6540411">caddr</span><span class="op" id="6540416">:</span>&nbsp;<span class="ident" id="6540418">testUnixAddr</span><span class="op" id="6540430">(</span><span class="op" id="6540431">)</span><span class="op" id="6540432">}</span><span class="op" id="6540433">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540436">{</span><span class="ident" id="6540437">net</span><span class="op" id="6540440">:</span>&nbsp;<span class="string" id="6540442">&#34;unixpacket&#34;</span><span class="op" id="6540454">,</span>&nbsp;<span class="ident" id="6540456">saddr</span><span class="op" id="6540461">:</span>&nbsp;<span class="string" id="6540463">&#34;@gotest4/net&#34;</span><span class="op" id="6540477">,</span>&nbsp;<span class="ident" id="6540479">caddr</span><span class="op" id="6540484">:</span>&nbsp;<span class="string" id="6540486">&#34;@gotest4/net.local&#34;</span><span class="op" id="6540506">,</span>&nbsp;<span class="ident" id="6540508">linuxOnly</span><span class="op" id="6540517">:</span>&nbsp;<span class="builtintype" id="6540519">true</span><span class="op" id="6540523">}</span><span class="op" id="6540524">,</span><br>
<span class="lineno"></span><span class="op" id="6540526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6540529">func</span>&nbsp;<span class="ident" id="6540534">TestSeqpacketConnServer</span><span class="op" id="6540557">(</span><span class="ident" id="6540558">t</span>&nbsp;<span class="op" id="6540560">*</span><span class="ident" id="6540561">testing</span><span class="op" id="6540568">.</span><span class="ident" id="6540569">T</span><span class="op" id="6540570">)</span>&nbsp;<span class="op" id="6540572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540575">switch</span>&nbsp;<span class="ident" id="6540582">runtime</span><span class="op" id="6540589">.</span><span class="ident" id="6540590">GOOS</span>&nbsp;<span class="op" id="6540595">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540598">case</span>&nbsp;<span class="string" id="6540603">&#34;darwin&#34;</span><span class="op" id="6540611">,</span>&nbsp;<span class="string" id="6540613">&#34;nacl&#34;</span><span class="op" id="6540619">,</span>&nbsp;<span class="string" id="6540621">&#34;openbsd&#34;</span><span class="op" id="6540630">,</span>&nbsp;<span class="string" id="6540632">&#34;plan9&#34;</span><span class="op" id="6540639">,</span>&nbsp;<span class="string" id="6540641">&#34;windows&#34;</span><span class="op" id="6540650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540654">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540667">case</span>&nbsp;<span class="string" id="6540672">&#34;freebsd&#34;</span><span class="op" id="6540681">:</span>&nbsp;<span class="comment" id="6540683">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540725">t</span><span class="op" id="6540726">.</span><span class="ident" id="6540727">Skipf</span><span class="op" id="6540732">(</span><span class="string" id="6540733">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6540754">,</span>&nbsp;<span class="ident" id="6540756">runtime</span><span class="op" id="6540763">.</span><span class="ident" id="6540764">GOOS</span><span class="op" id="6540768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540771">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540775">for</span>&nbsp;<span class="ident" id="6540779">_</span><span class="op" id="6540780">,</span>&nbsp;<span class="ident" id="6540782">tt</span>&nbsp;<span class="op" id="6540785">:=</span>&nbsp;<span class="keyword" id="6540788">range</span>&nbsp;<span class="ident" id="6540794">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6540819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540823">if</span>&nbsp;<span class="ident" id="6540826">runtime</span><span class="op" id="6540833">.</span><span class="ident" id="6540834">GOOS</span>&nbsp;<span class="op" id="6540839">!=</span>&nbsp;<span class="string" id="6540842">&#34;linux&#34;</span>&nbsp;<span class="op" id="6540850">&amp;&amp;</span>&nbsp;<span class="ident" id="6540853">tt</span><span class="op" id="6540855">.</span><span class="ident" id="6540856">linuxOnly</span>&nbsp;<span class="op" id="6540866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540871">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540882">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540886">listening</span>&nbsp;<span class="op" id="6540896">:=</span>&nbsp;<span class="builtinfunc" id="6540899">make</span><span class="op" id="6540903">(</span><span class="keyword" id="6540904">chan</span>&nbsp;<span class="builtintype" id="6540909">string</span><span class="op" id="6540915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540919">done</span>&nbsp;<span class="op" id="6540924">:=</span>&nbsp;<span class="builtinfunc" id="6540927">make</span><span class="op" id="6540931">(</span><span class="keyword" id="6540932">chan</span>&nbsp;<span class="builtintype" id="6540937">int</span><span class="op" id="6540940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540944">switch</span>&nbsp;<span class="ident" id="6540951">tt</span><span class="op" id="6540953">.</span><span class="ident" id="6540954">net</span>&nbsp;<span class="op" id="6540958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540962">case</span>&nbsp;<span class="string" id="6540967">&#34;unixpacket&#34;</span><span class="op" id="6540979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540984">os</span><span class="op" id="6540986">.</span><span class="ident" id="6540987">Remove</span><span class="op" id="6540993">(</span><span class="ident" id="6540994">tt</span><span class="op" id="6540996">.</span><span class="ident" id="6540997">saddr</span><span class="op" id="6541002">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541007">os</span><span class="op" id="6541009">.</span><span class="ident" id="6541010">Remove</span><span class="op" id="6541016">(</span><span class="ident" id="6541017">tt</span><span class="op" id="6541019">.</span><span class="ident" id="6541020">caddr</span><span class="op" id="6541025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541034">go</span>&nbsp;<span class="ident" id="6541037">runStreamConnServer</span><span class="op" id="6541056">(</span><span class="ident" id="6541057">t</span><span class="op" id="6541058">,</span>&nbsp;<span class="ident" id="6541060">tt</span><span class="op" id="6541062">.</span><span class="ident" id="6541063">net</span><span class="op" id="6541066">,</span>&nbsp;<span class="ident" id="6541068">tt</span><span class="op" id="6541070">.</span><span class="ident" id="6541071">saddr</span><span class="op" id="6541076">,</span>&nbsp;<span class="ident" id="6541078">listening</span><span class="op" id="6541087">,</span>&nbsp;<span class="ident" id="6541089">done</span><span class="op" id="6541093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541097">taddr</span>&nbsp;<span class="op" id="6541103">:=</span>&nbsp;<span class="op" id="6541106">&lt;-</span><span class="ident" id="6541108">listening</span>&nbsp;<span class="comment" id="6541118">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541149">runStreamConnClient</span><span class="op" id="6541168">(</span><span class="ident" id="6541169">t</span><span class="op" id="6541170">,</span>&nbsp;<span class="ident" id="6541172">tt</span><span class="op" id="6541174">.</span><span class="ident" id="6541175">net</span><span class="op" id="6541178">,</span>&nbsp;<span class="ident" id="6541180">taddr</span><span class="op" id="6541185">,</span>&nbsp;<span class="ident" id="6541187">tt</span><span class="op" id="6541189">.</span><span class="ident" id="6541190">empty</span><span class="op" id="6541195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541199">&lt;-</span><span class="ident" id="6541201">done</span>&nbsp;<span class="comment" id="6541206">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541237">switch</span>&nbsp;<span class="ident" id="6541244">tt</span><span class="op" id="6541246">.</span><span class="ident" id="6541247">net</span>&nbsp;<span class="op" id="6541251">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541255">case</span>&nbsp;<span class="string" id="6541260">&#34;unixpacket&#34;</span><span class="op" id="6541272">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541277">os</span><span class="op" id="6541279">.</span><span class="ident" id="6541280">Remove</span><span class="op" id="6541286">(</span><span class="ident" id="6541287">tt</span><span class="op" id="6541289">.</span><span class="ident" id="6541290">saddr</span><span class="op" id="6541295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541300">os</span><span class="op" id="6541302">.</span><span class="ident" id="6541303">Remove</span><span class="op" id="6541309">(</span><span class="ident" id="6541310">tt</span><span class="op" id="6541312">.</span><span class="ident" id="6541313">caddr</span><span class="op" id="6541318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541325">}</span><br>
<span class="lineno">175</span><span class="op" id="6541327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6541330">func</span>&nbsp;<span class="ident" id="6541335">runStreamConnServer</span><span class="op" id="6541354">(</span><span class="ident" id="6541355">t</span>&nbsp;<span class="op" id="6541357">*</span><span class="ident" id="6541358">testing</span><span class="op" id="6541365">.</span><span class="ident" id="6541366">T</span><span class="op" id="6541367">,</span>&nbsp;<span class="ident" id="6541369">net</span><span class="op" id="6541372">,</span>&nbsp;<span class="ident" id="6541374">laddr</span>&nbsp;<span class="builtintype" id="6541380">string</span><span class="op" id="6541386">,</span>&nbsp;<span class="ident" id="6541388">listening</span>&nbsp;<span class="keyword" id="6541398">chan</span><span class="op" id="6541402">&lt;-</span>&nbsp;<span class="builtintype" id="6541405">string</span><span class="op" id="6541411">,</span>&nbsp;<span class="ident" id="6541413">done</span>&nbsp;<span class="keyword" id="6541418">chan</span><span class="op" id="6541422">&lt;-</span>&nbsp;<span class="builtintype" id="6541425">int</span><span class="op" id="6541428">)</span>&nbsp;<span class="op" id="6541430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541433">defer</span>&nbsp;<span class="builtinfunc" id="6541439">close</span><span class="op" id="6541444">(</span><span class="ident" id="6541445">done</span><span class="op" id="6541449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541452">l</span><span class="op" id="6541453">,</span>&nbsp;<span class="ident" id="6541455">err</span>&nbsp;<span class="op" id="6541459">:=</span>&nbsp;<span class="ident" id="6541462">Listen</span><span class="op" id="6541468">(</span><span class="ident" id="6541469">net</span><span class="op" id="6541472">,</span>&nbsp;<span class="ident" id="6541474">laddr</span><span class="op" id="6541479">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541482">if</span>&nbsp;<span class="ident" id="6541485">err</span>&nbsp;<span class="op" id="6541489">!=</span>&nbsp;<span class="builtintype" id="6541492">nil</span>&nbsp;<span class="op" id="6541496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541500">t</span><span class="op" id="6541501">.</span><span class="ident" id="6541502">Errorf</span><span class="op" id="6541508">(</span><span class="string" id="6541509">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6541536">,</span>&nbsp;<span class="ident" id="6541538">net</span><span class="op" id="6541541">,</span>&nbsp;<span class="ident" id="6541543">laddr</span><span class="op" id="6541548">,</span>&nbsp;<span class="ident" id="6541550">err</span><span class="op" id="6541553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541557">listening</span>&nbsp;<span class="op" id="6541567">&lt;-</span>&nbsp;<span class="string" id="6541570">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541580">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541588">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541591">defer</span>&nbsp;<span class="ident" id="6541597">l</span><span class="op" id="6541598">.</span><span class="ident" id="6541599">Close</span><span class="op" id="6541604">(</span><span class="op" id="6541605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541608">listening</span>&nbsp;<span class="op" id="6541618">&lt;-</span>&nbsp;<span class="ident" id="6541621">l</span><span class="op" id="6541622">.</span><span class="ident" id="6541623">Addr</span><span class="op" id="6541627">(</span><span class="op" id="6541628">)</span><span class="op" id="6541629">.</span><span class="ident" id="6541630">String</span><span class="op" id="6541636">(</span><span class="op" id="6541637">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541641">echo</span>&nbsp;<span class="op" id="6541646">:=</span>&nbsp;<span class="keyword" id="6541649">func</span><span class="op" id="6541653">(</span><span class="ident" id="6541654">rw</span>&nbsp;<span class="ident" id="6541657">io</span><span class="op" id="6541659">.</span><span class="ident" id="6541660">ReadWriter</span><span class="op" id="6541670">,</span>&nbsp;<span class="ident" id="6541672">done</span>&nbsp;<span class="keyword" id="6541677">chan</span><span class="op" id="6541681">&lt;-</span>&nbsp;<span class="builtintype" id="6541684">int</span><span class="op" id="6541687">)</span>&nbsp;<span class="op" id="6541689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541693">buf</span>&nbsp;<span class="op" id="6541697">:=</span>&nbsp;<span class="builtinfunc" id="6541700">make</span><span class="op" id="6541704">(</span><span class="op" id="6541705">[</span><span class="op" id="6541706">]</span><span class="builtintype" id="6541707">byte</span><span class="op" id="6541711">,</span>&nbsp;<span class="num" id="6541713">1024</span><span class="op" id="6541717">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541721">for</span>&nbsp;<span class="op" id="6541725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541730">n</span><span class="op" id="6541731">,</span>&nbsp;<span class="ident" id="6541733">err</span>&nbsp;<span class="op" id="6541737">:=</span>&nbsp;<span class="ident" id="6541740">rw</span><span class="op" id="6541742">.</span><span class="ident" id="6541743">Read</span><span class="op" id="6541747">(</span><span class="ident" id="6541748">buf</span><span class="op" id="6541751">[</span><span class="num" id="6541752">0</span><span class="op" id="6541753">:</span><span class="op" id="6541754">]</span><span class="op" id="6541755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541760">if</span>&nbsp;<span class="ident" id="6541763">err</span>&nbsp;<span class="op" id="6541767">!=</span>&nbsp;<span class="builtintype" id="6541770">nil</span>&nbsp;<span class="op" id="6541774">||</span>&nbsp;<span class="ident" id="6541777">n</span>&nbsp;<span class="op" id="6541779">==</span>&nbsp;<span class="num" id="6541782">0</span>&nbsp;<span class="op" id="6541784">||</span>&nbsp;<span class="builtintype" id="6541787">string</span><span class="op" id="6541793">(</span><span class="ident" id="6541794">buf</span><span class="op" id="6541797">[</span><span class="op" id="6541798">:</span><span class="ident" id="6541799">n</span><span class="op" id="6541800">]</span><span class="op" id="6541801">)</span>&nbsp;<span class="op" id="6541803">==</span>&nbsp;<span class="string" id="6541806">&#34;END&#34;</span>&nbsp;<span class="op" id="6541812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541818">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541827">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541832">rw</span><span class="op" id="6541834">.</span><span class="ident" id="6541835">Write</span><span class="op" id="6541840">(</span><span class="ident" id="6541841">buf</span><span class="op" id="6541844">[</span><span class="num" id="6541845">0</span><span class="op" id="6541846">:</span><span class="ident" id="6541847">n</span><span class="op" id="6541848">]</span><span class="op" id="6541849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6541857">close</span><span class="op" id="6541862">(</span><span class="ident" id="6541863">done</span><span class="op" id="6541867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="6541873">run</span><span class="op" id="6541876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541879">for</span>&nbsp;<span class="op" id="6541883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541887">c</span><span class="op" id="6541888">,</span>&nbsp;<span class="ident" id="6541890">err</span>&nbsp;<span class="op" id="6541894">:=</span>&nbsp;<span class="ident" id="6541897">l</span><span class="op" id="6541898">.</span><span class="ident" id="6541899">Accept</span><span class="op" id="6541905">(</span><span class="op" id="6541906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541910">if</span>&nbsp;<span class="ident" id="6541913">err</span>&nbsp;<span class="op" id="6541917">!=</span>&nbsp;<span class="builtintype" id="6541920">nil</span>&nbsp;<span class="op" id="6541924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541929">t</span><span class="op" id="6541930">.</span><span class="ident" id="6541931">Logf</span><span class="op" id="6541935">(</span><span class="string" id="6541936">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6541955">,</span>&nbsp;<span class="ident" id="6541957">err</span><span class="op" id="6541960">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541965">continue</span>&nbsp;<span class="ident" id="6541974">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541984">echodone</span>&nbsp;<span class="op" id="6541993">:=</span>&nbsp;<span class="builtinfunc" id="6541996">make</span><span class="op" id="6542000">(</span><span class="keyword" id="6542001">chan</span>&nbsp;<span class="builtintype" id="6542006">int</span><span class="op" id="6542009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542013">go</span>&nbsp;<span class="ident" id="6542016">echo</span><span class="op" id="6542020">(</span><span class="ident" id="6542021">c</span><span class="op" id="6542022">,</span>&nbsp;<span class="ident" id="6542024">echodone</span><span class="op" id="6542032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542036">&lt;-</span><span class="ident" id="6542038">echodone</span>&nbsp;<span class="comment" id="6542047">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542075">c</span><span class="op" id="6542076">.</span><span class="ident" id="6542077">Close</span><span class="op" id="6542082">(</span><span class="op" id="6542083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542087">break</span>&nbsp;<span class="ident" id="6542093">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542098">}</span><br>
<span class="lineno"></span><span class="op" id="6542100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6542103">func</span>&nbsp;<span class="ident" id="6542108">runStreamConnClient</span><span class="op" id="6542127">(</span><span class="ident" id="6542128">t</span>&nbsp;<span class="op" id="6542130">*</span><span class="ident" id="6542131">testing</span><span class="op" id="6542138">.</span><span class="ident" id="6542139">T</span><span class="op" id="6542140">,</span>&nbsp;<span class="ident" id="6542142">net</span><span class="op" id="6542145">,</span>&nbsp;<span class="ident" id="6542147">taddr</span>&nbsp;<span class="builtintype" id="6542153">string</span><span class="op" id="6542159">,</span>&nbsp;<span class="ident" id="6542161">isEmpty</span>&nbsp;<span class="builtintype" id="6542169">bool</span><span class="op" id="6542173">)</span>&nbsp;<span class="op" id="6542175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542178">c</span><span class="op" id="6542179">,</span>&nbsp;<span class="ident" id="6542181">err</span>&nbsp;<span class="op" id="6542185">:=</span>&nbsp;<span class="ident" id="6542188">Dial</span><span class="op" id="6542192">(</span><span class="ident" id="6542193">net</span><span class="op" id="6542196">,</span>&nbsp;<span class="ident" id="6542198">taddr</span><span class="op" id="6542203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542206">if</span>&nbsp;<span class="ident" id="6542209">err</span>&nbsp;<span class="op" id="6542213">!=</span>&nbsp;<span class="builtintype" id="6542216">nil</span>&nbsp;<span class="op" id="6542220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542224">t</span><span class="op" id="6542225">.</span><span class="ident" id="6542226">Fatalf</span><span class="op" id="6542232">(</span><span class="string" id="6542233">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6542258">,</span>&nbsp;<span class="ident" id="6542260">net</span><span class="op" id="6542263">,</span>&nbsp;<span class="ident" id="6542265">taddr</span><span class="op" id="6542270">,</span>&nbsp;<span class="ident" id="6542272">err</span><span class="op" id="6542275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542278">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542281">defer</span>&nbsp;<span class="ident" id="6542287">c</span><span class="op" id="6542288">.</span><span class="ident" id="6542289">Close</span><span class="op" id="6542294">(</span><span class="op" id="6542295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542298">c</span><span class="op" id="6542299">.</span><span class="ident" id="6542300">SetReadDeadline</span><span class="op" id="6542315">(</span><span class="ident" id="6542316">time</span><span class="op" id="6542320">.</span><span class="ident" id="6542321">Now</span><span class="op" id="6542324">(</span><span class="op" id="6542325">)</span><span class="op" id="6542326">.</span><span class="ident" id="6542327">Add</span><span class="op" id="6542330">(</span><span class="num" id="6542331">1</span>&nbsp;<span class="op" id="6542333">*</span>&nbsp;<span class="ident" id="6542335">time</span><span class="op" id="6542339">.</span><span class="ident" id="6542340">Second</span><span class="op" id="6542346">)</span><span class="op" id="6542347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542351">var</span>&nbsp;<span class="ident" id="6542355">wb</span>&nbsp;<span class="op" id="6542358">[</span><span class="op" id="6542359">]</span><span class="builtintype" id="6542360">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542366">if</span>&nbsp;<span class="op" id="6542369">!</span><span class="ident" id="6542370">isEmpty</span>&nbsp;<span class="op" id="6542378">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542382">wb</span>&nbsp;<span class="op" id="6542385">=</span>&nbsp;<span class="op" id="6542387">[</span><span class="op" id="6542388">]</span><span class="builtintype" id="6542389">byte</span><span class="op" id="6542393">(</span><span class="string" id="6542394">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6542422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542428">if</span>&nbsp;<span class="ident" id="6542431">n</span><span class="op" id="6542432">,</span>&nbsp;<span class="ident" id="6542434">err</span>&nbsp;<span class="op" id="6542438">:=</span>&nbsp;<span class="ident" id="6542441">c</span><span class="op" id="6542442">.</span><span class="ident" id="6542443">Write</span><span class="op" id="6542448">(</span><span class="ident" id="6542449">wb</span><span class="op" id="6542451">)</span><span class="op" id="6542452">;</span>&nbsp;<span class="ident" id="6542454">err</span>&nbsp;<span class="op" id="6542458">!=</span>&nbsp;<span class="builtintype" id="6542461">nil</span>&nbsp;<span class="op" id="6542465">||</span>&nbsp;<span class="ident" id="6542468">n</span>&nbsp;<span class="op" id="6542470">!=</span>&nbsp;<span class="builtinfunc" id="6542473">len</span><span class="op" id="6542476">(</span><span class="ident" id="6542477">wb</span><span class="op" id="6542479">)</span>&nbsp;<span class="op" id="6542481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542485">t</span><span class="op" id="6542486">.</span><span class="ident" id="6542487">Fatalf</span><span class="op" id="6542493">(</span><span class="string" id="6542494">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6542532">,</span>&nbsp;<span class="ident" id="6542534">n</span><span class="op" id="6542535">,</span>&nbsp;<span class="ident" id="6542537">err</span><span class="op" id="6542540">,</span>&nbsp;<span class="builtinfunc" id="6542542">len</span><span class="op" id="6542545">(</span><span class="ident" id="6542546">wb</span><span class="op" id="6542548">)</span><span class="op" id="6542549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542552">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542556">rb</span>&nbsp;<span class="op" id="6542559">:=</span>&nbsp;<span class="builtinfunc" id="6542562">make</span><span class="op" id="6542566">(</span><span class="op" id="6542567">[</span><span class="op" id="6542568">]</span><span class="builtintype" id="6542569">byte</span><span class="op" id="6542573">,</span>&nbsp;<span class="num" id="6542575">1024</span><span class="op" id="6542579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542582">if</span>&nbsp;<span class="ident" id="6542585">n</span><span class="op" id="6542586">,</span>&nbsp;<span class="ident" id="6542588">err</span>&nbsp;<span class="op" id="6542592">:=</span>&nbsp;<span class="ident" id="6542595">c</span><span class="op" id="6542596">.</span><span class="ident" id="6542597">Read</span><span class="op" id="6542601">(</span><span class="ident" id="6542602">rb</span><span class="op" id="6542604">[</span><span class="num" id="6542605">0</span><span class="op" id="6542606">:</span><span class="op" id="6542607">]</span><span class="op" id="6542608">)</span><span class="op" id="6542609">;</span>&nbsp;<span class="ident" id="6542611">err</span>&nbsp;<span class="op" id="6542615">!=</span>&nbsp;<span class="builtintype" id="6542618">nil</span>&nbsp;<span class="op" id="6542622">||</span>&nbsp;<span class="ident" id="6542625">n</span>&nbsp;<span class="op" id="6542627">!=</span>&nbsp;<span class="builtinfunc" id="6542630">len</span><span class="op" id="6542633">(</span><span class="ident" id="6542634">wb</span><span class="op" id="6542636">)</span>&nbsp;<span class="op" id="6542638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542642">t</span><span class="op" id="6542643">.</span><span class="ident" id="6542644">Fatalf</span><span class="op" id="6542650">(</span><span class="string" id="6542651">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6542688">,</span>&nbsp;<span class="ident" id="6542690">n</span><span class="op" id="6542691">,</span>&nbsp;<span class="ident" id="6542693">err</span><span class="op" id="6542696">,</span>&nbsp;<span class="builtinfunc" id="6542698">len</span><span class="op" id="6542701">(</span><span class="ident" id="6542702">wb</span><span class="op" id="6542704">)</span><span class="op" id="6542705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542708">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6542712">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6542753">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542805">switch</span>&nbsp;<span class="ident" id="6542812">net</span>&nbsp;<span class="op" id="6542816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542819">case</span>&nbsp;<span class="string" id="6542824">&#34;unixpacket&#34;</span><span class="op" id="6542836">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542840">c</span><span class="op" id="6542841">.</span><span class="ident" id="6542842">Write</span><span class="op" id="6542847">(</span><span class="op" id="6542848">[</span><span class="op" id="6542849">]</span><span class="builtintype" id="6542850">byte</span><span class="op" id="6542854">(</span><span class="string" id="6542855">&#34;END&#34;</span><span class="op" id="6542860">)</span><span class="op" id="6542861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542864">}</span><br>
<span class="lineno"></span><span class="op" id="6542866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6542869">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="6542912">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="6542963">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="6543015">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="6543045">var</span>&nbsp;<span class="ident" id="6543049">testDatagram</span>&nbsp;<span class="op" id="6543062">=</span>&nbsp;<span class="ident" id="6543064">flag</span><span class="op" id="6543068">.</span><span class="ident" id="6543069">Bool</span><span class="op" id="6543073">(</span><span class="string" id="6543074">&#34;datagram&#34;</span><span class="op" id="6543084">,</span>&nbsp;<span class="builtintype" id="6543086">false</span><span class="op" id="6543091">,</span>&nbsp;<span class="string" id="6543093">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="6543127">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6543130">var</span>&nbsp;<span class="ident" id="6543134">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6543164">=</span>&nbsp;<span class="op" id="6543166">[</span><span class="op" id="6543167">]</span><span class="keyword" id="6543168">struct</span>&nbsp;<span class="op" id="6543175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543178">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6543188">string</span>&nbsp;<span class="comment" id="6543195">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543211">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6543221">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543229">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6543239">string</span>&nbsp;<span class="comment" id="6543246">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543262">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6543272">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543280">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6543290">bool</span>&nbsp;<span class="comment" id="6543295">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543336">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6543346">bool</span>&nbsp;<span class="comment" id="6543351">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543397">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6543407">bool</span>&nbsp;<span class="comment" id="6543412">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543443">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6543453">bool</span>&nbsp;<span class="comment" id="6543458">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543483">linuxOnly</span>&nbsp;<span class="builtintype" id="6543493">bool</span>&nbsp;<span class="comment" id="6543498">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="6543552">}</span><span class="op" id="6543553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543556">{</span><span class="ident" id="6543557">snet</span><span class="op" id="6543561">:</span>&nbsp;<span class="string" id="6543563">&#34;udp&#34;</span><span class="op" id="6543568">,</span>&nbsp;<span class="ident" id="6543570">saddr</span><span class="op" id="6543575">:</span>&nbsp;<span class="string" id="6543577">&#34;&#34;</span><span class="op" id="6543579">,</span>&nbsp;<span class="ident" id="6543581">cnet</span><span class="op" id="6543585">:</span>&nbsp;<span class="string" id="6543587">&#34;udp&#34;</span><span class="op" id="6543592">,</span>&nbsp;<span class="ident" id="6543594">caddr</span><span class="op" id="6543599">:</span>&nbsp;<span class="string" id="6543601">&#34;127.0.0.1&#34;</span><span class="op" id="6543612">}</span><span class="op" id="6543613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543616">{</span><span class="ident" id="6543617">snet</span><span class="op" id="6543621">:</span>&nbsp;<span class="string" id="6543623">&#34;udp&#34;</span><span class="op" id="6543628">,</span>&nbsp;<span class="ident" id="6543630">saddr</span><span class="op" id="6543635">:</span>&nbsp;<span class="string" id="6543637">&#34;0.0.0.0&#34;</span><span class="op" id="6543646">,</span>&nbsp;<span class="ident" id="6543648">cnet</span><span class="op" id="6543652">:</span>&nbsp;<span class="string" id="6543654">&#34;udp&#34;</span><span class="op" id="6543659">,</span>&nbsp;<span class="ident" id="6543661">caddr</span><span class="op" id="6543666">:</span>&nbsp;<span class="string" id="6543668">&#34;127.0.0.1&#34;</span><span class="op" id="6543679">}</span><span class="op" id="6543680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543683">{</span><span class="ident" id="6543684">snet</span><span class="op" id="6543688">:</span>&nbsp;<span class="string" id="6543690">&#34;udp&#34;</span><span class="op" id="6543695">,</span>&nbsp;<span class="ident" id="6543697">saddr</span><span class="op" id="6543702">:</span>&nbsp;<span class="string" id="6543704">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6543722">,</span>&nbsp;<span class="ident" id="6543724">cnet</span><span class="op" id="6543728">:</span>&nbsp;<span class="string" id="6543730">&#34;udp&#34;</span><span class="op" id="6543735">,</span>&nbsp;<span class="ident" id="6543737">caddr</span><span class="op" id="6543742">:</span>&nbsp;<span class="string" id="6543744">&#34;127.0.0.1&#34;</span><span class="op" id="6543755">}</span><span class="op" id="6543756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543759">{</span><span class="ident" id="6543760">snet</span><span class="op" id="6543764">:</span>&nbsp;<span class="string" id="6543766">&#34;udp&#34;</span><span class="op" id="6543771">,</span>&nbsp;<span class="ident" id="6543773">saddr</span><span class="op" id="6543778">:</span>&nbsp;<span class="string" id="6543780">&#34;[::]&#34;</span><span class="op" id="6543786">,</span>&nbsp;<span class="ident" id="6543788">cnet</span><span class="op" id="6543792">:</span>&nbsp;<span class="string" id="6543794">&#34;udp&#34;</span><span class="op" id="6543799">,</span>&nbsp;<span class="ident" id="6543801">caddr</span><span class="op" id="6543806">:</span>&nbsp;<span class="string" id="6543808">&#34;[::1]&#34;</span><span class="op" id="6543815">,</span>&nbsp;<span class="ident" id="6543817">ipv6</span><span class="op" id="6543821">:</span>&nbsp;<span class="builtintype" id="6543823">true</span><span class="op" id="6543827">}</span><span class="op" id="6543828">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543832">{</span><span class="ident" id="6543833">snet</span><span class="op" id="6543837">:</span>&nbsp;<span class="string" id="6543839">&#34;udp&#34;</span><span class="op" id="6543844">,</span>&nbsp;<span class="ident" id="6543846">saddr</span><span class="op" id="6543851">:</span>&nbsp;<span class="string" id="6543853">&#34;&#34;</span><span class="op" id="6543855">,</span>&nbsp;<span class="ident" id="6543857">cnet</span><span class="op" id="6543861">:</span>&nbsp;<span class="string" id="6543863">&#34;udp&#34;</span><span class="op" id="6543868">,</span>&nbsp;<span class="ident" id="6543870">caddr</span><span class="op" id="6543875">:</span>&nbsp;<span class="string" id="6543877">&#34;[::1]&#34;</span><span class="op" id="6543884">,</span>&nbsp;<span class="ident" id="6543886">ipv4map</span><span class="op" id="6543893">:</span>&nbsp;<span class="builtintype" id="6543895">true</span><span class="op" id="6543899">}</span><span class="op" id="6543900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543903">{</span><span class="ident" id="6543904">snet</span><span class="op" id="6543908">:</span>&nbsp;<span class="string" id="6543910">&#34;udp&#34;</span><span class="op" id="6543915">,</span>&nbsp;<span class="ident" id="6543917">saddr</span><span class="op" id="6543922">:</span>&nbsp;<span class="string" id="6543924">&#34;0.0.0.0&#34;</span><span class="op" id="6543933">,</span>&nbsp;<span class="ident" id="6543935">cnet</span><span class="op" id="6543939">:</span>&nbsp;<span class="string" id="6543941">&#34;udp&#34;</span><span class="op" id="6543946">,</span>&nbsp;<span class="ident" id="6543948">caddr</span><span class="op" id="6543953">:</span>&nbsp;<span class="string" id="6543955">&#34;[::1]&#34;</span><span class="op" id="6543962">,</span>&nbsp;<span class="ident" id="6543964">ipv4map</span><span class="op" id="6543971">:</span>&nbsp;<span class="builtintype" id="6543973">true</span><span class="op" id="6543977">}</span><span class="op" id="6543978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543981">{</span><span class="ident" id="6543982">snet</span><span class="op" id="6543986">:</span>&nbsp;<span class="string" id="6543988">&#34;udp&#34;</span><span class="op" id="6543993">,</span>&nbsp;<span class="ident" id="6543995">saddr</span><span class="op" id="6544000">:</span>&nbsp;<span class="string" id="6544002">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6544020">,</span>&nbsp;<span class="ident" id="6544022">cnet</span><span class="op" id="6544026">:</span>&nbsp;<span class="string" id="6544028">&#34;udp&#34;</span><span class="op" id="6544033">,</span>&nbsp;<span class="ident" id="6544035">caddr</span><span class="op" id="6544040">:</span>&nbsp;<span class="string" id="6544042">&#34;[::1]&#34;</span><span class="op" id="6544049">,</span>&nbsp;<span class="ident" id="6544051">ipv4map</span><span class="op" id="6544058">:</span>&nbsp;<span class="builtintype" id="6544060">true</span><span class="op" id="6544064">}</span><span class="op" id="6544065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544068">{</span><span class="ident" id="6544069">snet</span><span class="op" id="6544073">:</span>&nbsp;<span class="string" id="6544075">&#34;udp&#34;</span><span class="op" id="6544080">,</span>&nbsp;<span class="ident" id="6544082">saddr</span><span class="op" id="6544087">:</span>&nbsp;<span class="string" id="6544089">&#34;[::]&#34;</span><span class="op" id="6544095">,</span>&nbsp;<span class="ident" id="6544097">cnet</span><span class="op" id="6544101">:</span>&nbsp;<span class="string" id="6544103">&#34;udp&#34;</span><span class="op" id="6544108">,</span>&nbsp;<span class="ident" id="6544110">caddr</span><span class="op" id="6544115">:</span>&nbsp;<span class="string" id="6544117">&#34;127.0.0.1&#34;</span><span class="op" id="6544128">,</span>&nbsp;<span class="ident" id="6544130">ipv4map</span><span class="op" id="6544137">:</span>&nbsp;<span class="builtintype" id="6544139">true</span><span class="op" id="6544143">}</span><span class="op" id="6544144">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544148">{</span><span class="ident" id="6544149">snet</span><span class="op" id="6544153">:</span>&nbsp;<span class="string" id="6544155">&#34;udp&#34;</span><span class="op" id="6544160">,</span>&nbsp;<span class="ident" id="6544162">saddr</span><span class="op" id="6544167">:</span>&nbsp;<span class="string" id="6544169">&#34;&#34;</span><span class="op" id="6544171">,</span>&nbsp;<span class="ident" id="6544173">cnet</span><span class="op" id="6544177">:</span>&nbsp;<span class="string" id="6544179">&#34;udp4&#34;</span><span class="op" id="6544185">,</span>&nbsp;<span class="ident" id="6544187">caddr</span><span class="op" id="6544192">:</span>&nbsp;<span class="string" id="6544194">&#34;127.0.0.1&#34;</span><span class="op" id="6544205">}</span><span class="op" id="6544206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544209">{</span><span class="ident" id="6544210">snet</span><span class="op" id="6544214">:</span>&nbsp;<span class="string" id="6544216">&#34;udp&#34;</span><span class="op" id="6544221">,</span>&nbsp;<span class="ident" id="6544223">saddr</span><span class="op" id="6544228">:</span>&nbsp;<span class="string" id="6544230">&#34;0.0.0.0&#34;</span><span class="op" id="6544239">,</span>&nbsp;<span class="ident" id="6544241">cnet</span><span class="op" id="6544245">:</span>&nbsp;<span class="string" id="6544247">&#34;udp4&#34;</span><span class="op" id="6544253">,</span>&nbsp;<span class="ident" id="6544255">caddr</span><span class="op" id="6544260">:</span>&nbsp;<span class="string" id="6544262">&#34;127.0.0.1&#34;</span><span class="op" id="6544273">}</span><span class="op" id="6544274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544277">{</span><span class="ident" id="6544278">snet</span><span class="op" id="6544282">:</span>&nbsp;<span class="string" id="6544284">&#34;udp&#34;</span><span class="op" id="6544289">,</span>&nbsp;<span class="ident" id="6544291">saddr</span><span class="op" id="6544296">:</span>&nbsp;<span class="string" id="6544298">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6544316">,</span>&nbsp;<span class="ident" id="6544318">cnet</span><span class="op" id="6544322">:</span>&nbsp;<span class="string" id="6544324">&#34;udp4&#34;</span><span class="op" id="6544330">,</span>&nbsp;<span class="ident" id="6544332">caddr</span><span class="op" id="6544337">:</span>&nbsp;<span class="string" id="6544339">&#34;127.0.0.1&#34;</span><span class="op" id="6544350">}</span><span class="op" id="6544351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544354">{</span><span class="ident" id="6544355">snet</span><span class="op" id="6544359">:</span>&nbsp;<span class="string" id="6544361">&#34;udp&#34;</span><span class="op" id="6544366">,</span>&nbsp;<span class="ident" id="6544368">saddr</span><span class="op" id="6544373">:</span>&nbsp;<span class="string" id="6544375">&#34;[::]&#34;</span><span class="op" id="6544381">,</span>&nbsp;<span class="ident" id="6544383">cnet</span><span class="op" id="6544387">:</span>&nbsp;<span class="string" id="6544389">&#34;udp6&#34;</span><span class="op" id="6544395">,</span>&nbsp;<span class="ident" id="6544397">caddr</span><span class="op" id="6544402">:</span>&nbsp;<span class="string" id="6544404">&#34;[::1]&#34;</span><span class="op" id="6544411">,</span>&nbsp;<span class="ident" id="6544413">ipv6</span><span class="op" id="6544417">:</span>&nbsp;<span class="builtintype" id="6544419">true</span><span class="op" id="6544423">}</span><span class="op" id="6544424">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544428">{</span><span class="ident" id="6544429">snet</span><span class="op" id="6544433">:</span>&nbsp;<span class="string" id="6544435">&#34;udp&#34;</span><span class="op" id="6544440">,</span>&nbsp;<span class="ident" id="6544442">saddr</span><span class="op" id="6544447">:</span>&nbsp;<span class="string" id="6544449">&#34;&#34;</span><span class="op" id="6544451">,</span>&nbsp;<span class="ident" id="6544453">cnet</span><span class="op" id="6544457">:</span>&nbsp;<span class="string" id="6544459">&#34;udp6&#34;</span><span class="op" id="6544465">,</span>&nbsp;<span class="ident" id="6544467">caddr</span><span class="op" id="6544472">:</span>&nbsp;<span class="string" id="6544474">&#34;[::1]&#34;</span><span class="op" id="6544481">,</span>&nbsp;<span class="ident" id="6544483">ipv4map</span><span class="op" id="6544490">:</span>&nbsp;<span class="builtintype" id="6544492">true</span><span class="op" id="6544496">}</span><span class="op" id="6544497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544500">{</span><span class="ident" id="6544501">snet</span><span class="op" id="6544505">:</span>&nbsp;<span class="string" id="6544507">&#34;udp&#34;</span><span class="op" id="6544512">,</span>&nbsp;<span class="ident" id="6544514">saddr</span><span class="op" id="6544519">:</span>&nbsp;<span class="string" id="6544521">&#34;0.0.0.0&#34;</span><span class="op" id="6544530">,</span>&nbsp;<span class="ident" id="6544532">cnet</span><span class="op" id="6544536">:</span>&nbsp;<span class="string" id="6544538">&#34;udp6&#34;</span><span class="op" id="6544544">,</span>&nbsp;<span class="ident" id="6544546">caddr</span><span class="op" id="6544551">:</span>&nbsp;<span class="string" id="6544553">&#34;[::1]&#34;</span><span class="op" id="6544560">,</span>&nbsp;<span class="ident" id="6544562">ipv4map</span><span class="op" id="6544569">:</span>&nbsp;<span class="builtintype" id="6544571">true</span><span class="op" id="6544575">}</span><span class="op" id="6544576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544579">{</span><span class="ident" id="6544580">snet</span><span class="op" id="6544584">:</span>&nbsp;<span class="string" id="6544586">&#34;udp&#34;</span><span class="op" id="6544591">,</span>&nbsp;<span class="ident" id="6544593">saddr</span><span class="op" id="6544598">:</span>&nbsp;<span class="string" id="6544600">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6544618">,</span>&nbsp;<span class="ident" id="6544620">cnet</span><span class="op" id="6544624">:</span>&nbsp;<span class="string" id="6544626">&#34;udp6&#34;</span><span class="op" id="6544632">,</span>&nbsp;<span class="ident" id="6544634">caddr</span><span class="op" id="6544639">:</span>&nbsp;<span class="string" id="6544641">&#34;[::1]&#34;</span><span class="op" id="6544648">,</span>&nbsp;<span class="ident" id="6544650">ipv4map</span><span class="op" id="6544657">:</span>&nbsp;<span class="builtintype" id="6544659">true</span><span class="op" id="6544663">}</span><span class="op" id="6544664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544667">{</span><span class="ident" id="6544668">snet</span><span class="op" id="6544672">:</span>&nbsp;<span class="string" id="6544674">&#34;udp&#34;</span><span class="op" id="6544679">,</span>&nbsp;<span class="ident" id="6544681">saddr</span><span class="op" id="6544686">:</span>&nbsp;<span class="string" id="6544688">&#34;[::]&#34;</span><span class="op" id="6544694">,</span>&nbsp;<span class="ident" id="6544696">cnet</span><span class="op" id="6544700">:</span>&nbsp;<span class="string" id="6544702">&#34;udp4&#34;</span><span class="op" id="6544708">,</span>&nbsp;<span class="ident" id="6544710">caddr</span><span class="op" id="6544715">:</span>&nbsp;<span class="string" id="6544717">&#34;127.0.0.1&#34;</span><span class="op" id="6544728">,</span>&nbsp;<span class="ident" id="6544730">ipv4map</span><span class="op" id="6544737">:</span>&nbsp;<span class="builtintype" id="6544739">true</span><span class="op" id="6544743">}</span><span class="op" id="6544744">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544748">{</span><span class="ident" id="6544749">snet</span><span class="op" id="6544753">:</span>&nbsp;<span class="string" id="6544755">&#34;udp&#34;</span><span class="op" id="6544760">,</span>&nbsp;<span class="ident" id="6544762">saddr</span><span class="op" id="6544767">:</span>&nbsp;<span class="string" id="6544769">&#34;127.0.0.1&#34;</span><span class="op" id="6544780">,</span>&nbsp;<span class="ident" id="6544782">cnet</span><span class="op" id="6544786">:</span>&nbsp;<span class="string" id="6544788">&#34;udp&#34;</span><span class="op" id="6544793">,</span>&nbsp;<span class="ident" id="6544795">caddr</span><span class="op" id="6544800">:</span>&nbsp;<span class="string" id="6544802">&#34;127.0.0.1&#34;</span><span class="op" id="6544813">}</span><span class="op" id="6544814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544817">{</span><span class="ident" id="6544818">snet</span><span class="op" id="6544822">:</span>&nbsp;<span class="string" id="6544824">&#34;udp&#34;</span><span class="op" id="6544829">,</span>&nbsp;<span class="ident" id="6544831">saddr</span><span class="op" id="6544836">:</span>&nbsp;<span class="string" id="6544838">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6544858">,</span>&nbsp;<span class="ident" id="6544860">cnet</span><span class="op" id="6544864">:</span>&nbsp;<span class="string" id="6544866">&#34;udp&#34;</span><span class="op" id="6544871">,</span>&nbsp;<span class="ident" id="6544873">caddr</span><span class="op" id="6544878">:</span>&nbsp;<span class="string" id="6544880">&#34;127.0.0.1&#34;</span><span class="op" id="6544891">}</span><span class="op" id="6544892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544895">{</span><span class="ident" id="6544896">snet</span><span class="op" id="6544900">:</span>&nbsp;<span class="string" id="6544902">&#34;udp&#34;</span><span class="op" id="6544907">,</span>&nbsp;<span class="ident" id="6544909">saddr</span><span class="op" id="6544914">:</span>&nbsp;<span class="string" id="6544916">&#34;[::1]&#34;</span><span class="op" id="6544923">,</span>&nbsp;<span class="ident" id="6544925">cnet</span><span class="op" id="6544929">:</span>&nbsp;<span class="string" id="6544931">&#34;udp&#34;</span><span class="op" id="6544936">,</span>&nbsp;<span class="ident" id="6544938">caddr</span><span class="op" id="6544943">:</span>&nbsp;<span class="string" id="6544945">&#34;[::1]&#34;</span><span class="op" id="6544952">,</span>&nbsp;<span class="ident" id="6544954">ipv6</span><span class="op" id="6544958">:</span>&nbsp;<span class="builtintype" id="6544960">true</span><span class="op" id="6544964">}</span><span class="op" id="6544965">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544969">{</span><span class="ident" id="6544970">snet</span><span class="op" id="6544974">:</span>&nbsp;<span class="string" id="6544976">&#34;udp4&#34;</span><span class="op" id="6544982">,</span>&nbsp;<span class="ident" id="6544984">saddr</span><span class="op" id="6544989">:</span>&nbsp;<span class="string" id="6544991">&#34;&#34;</span><span class="op" id="6544993">,</span>&nbsp;<span class="ident" id="6544995">cnet</span><span class="op" id="6544999">:</span>&nbsp;<span class="string" id="6545001">&#34;udp4&#34;</span><span class="op" id="6545007">,</span>&nbsp;<span class="ident" id="6545009">caddr</span><span class="op" id="6545014">:</span>&nbsp;<span class="string" id="6545016">&#34;127.0.0.1&#34;</span><span class="op" id="6545027">}</span><span class="op" id="6545028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545031">{</span><span class="ident" id="6545032">snet</span><span class="op" id="6545036">:</span>&nbsp;<span class="string" id="6545038">&#34;udp4&#34;</span><span class="op" id="6545044">,</span>&nbsp;<span class="ident" id="6545046">saddr</span><span class="op" id="6545051">:</span>&nbsp;<span class="string" id="6545053">&#34;0.0.0.0&#34;</span><span class="op" id="6545062">,</span>&nbsp;<span class="ident" id="6545064">cnet</span><span class="op" id="6545068">:</span>&nbsp;<span class="string" id="6545070">&#34;udp4&#34;</span><span class="op" id="6545076">,</span>&nbsp;<span class="ident" id="6545078">caddr</span><span class="op" id="6545083">:</span>&nbsp;<span class="string" id="6545085">&#34;127.0.0.1&#34;</span><span class="op" id="6545096">}</span><span class="op" id="6545097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545100">{</span><span class="ident" id="6545101">snet</span><span class="op" id="6545105">:</span>&nbsp;<span class="string" id="6545107">&#34;udp4&#34;</span><span class="op" id="6545113">,</span>&nbsp;<span class="ident" id="6545115">saddr</span><span class="op" id="6545120">:</span>&nbsp;<span class="string" id="6545122">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6545140">,</span>&nbsp;<span class="ident" id="6545142">cnet</span><span class="op" id="6545146">:</span>&nbsp;<span class="string" id="6545148">&#34;udp4&#34;</span><span class="op" id="6545154">,</span>&nbsp;<span class="ident" id="6545156">caddr</span><span class="op" id="6545161">:</span>&nbsp;<span class="string" id="6545163">&#34;127.0.0.1&#34;</span><span class="op" id="6545174">}</span><span class="op" id="6545175">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545179">{</span><span class="ident" id="6545180">snet</span><span class="op" id="6545184">:</span>&nbsp;<span class="string" id="6545186">&#34;udp4&#34;</span><span class="op" id="6545192">,</span>&nbsp;<span class="ident" id="6545194">saddr</span><span class="op" id="6545199">:</span>&nbsp;<span class="string" id="6545201">&#34;127.0.0.1&#34;</span><span class="op" id="6545212">,</span>&nbsp;<span class="ident" id="6545214">cnet</span><span class="op" id="6545218">:</span>&nbsp;<span class="string" id="6545220">&#34;udp4&#34;</span><span class="op" id="6545226">,</span>&nbsp;<span class="ident" id="6545228">caddr</span><span class="op" id="6545233">:</span>&nbsp;<span class="string" id="6545235">&#34;127.0.0.1&#34;</span><span class="op" id="6545246">}</span><span class="op" id="6545247">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545251">{</span><span class="ident" id="6545252">snet</span><span class="op" id="6545256">:</span>&nbsp;<span class="string" id="6545258">&#34;udp6&#34;</span><span class="op" id="6545264">,</span>&nbsp;<span class="ident" id="6545266">saddr</span><span class="op" id="6545271">:</span>&nbsp;<span class="string" id="6545273">&#34;&#34;</span><span class="op" id="6545275">,</span>&nbsp;<span class="ident" id="6545277">cnet</span><span class="op" id="6545281">:</span>&nbsp;<span class="string" id="6545283">&#34;udp6&#34;</span><span class="op" id="6545289">,</span>&nbsp;<span class="ident" id="6545291">caddr</span><span class="op" id="6545296">:</span>&nbsp;<span class="string" id="6545298">&#34;[::1]&#34;</span><span class="op" id="6545305">,</span>&nbsp;<span class="ident" id="6545307">ipv6</span><span class="op" id="6545311">:</span>&nbsp;<span class="builtintype" id="6545313">true</span><span class="op" id="6545317">}</span><span class="op" id="6545318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545321">{</span><span class="ident" id="6545322">snet</span><span class="op" id="6545326">:</span>&nbsp;<span class="string" id="6545328">&#34;udp6&#34;</span><span class="op" id="6545334">,</span>&nbsp;<span class="ident" id="6545336">saddr</span><span class="op" id="6545341">:</span>&nbsp;<span class="string" id="6545343">&#34;[::]&#34;</span><span class="op" id="6545349">,</span>&nbsp;<span class="ident" id="6545351">cnet</span><span class="op" id="6545355">:</span>&nbsp;<span class="string" id="6545357">&#34;udp6&#34;</span><span class="op" id="6545363">,</span>&nbsp;<span class="ident" id="6545365">caddr</span><span class="op" id="6545370">:</span>&nbsp;<span class="string" id="6545372">&#34;[::1]&#34;</span><span class="op" id="6545379">,</span>&nbsp;<span class="ident" id="6545381">ipv6</span><span class="op" id="6545385">:</span>&nbsp;<span class="builtintype" id="6545387">true</span><span class="op" id="6545391">}</span><span class="op" id="6545392">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545396">{</span><span class="ident" id="6545397">snet</span><span class="op" id="6545401">:</span>&nbsp;<span class="string" id="6545403">&#34;udp6&#34;</span><span class="op" id="6545409">,</span>&nbsp;<span class="ident" id="6545411">saddr</span><span class="op" id="6545416">:</span>&nbsp;<span class="string" id="6545418">&#34;[::1]&#34;</span><span class="op" id="6545425">,</span>&nbsp;<span class="ident" id="6545427">cnet</span><span class="op" id="6545431">:</span>&nbsp;<span class="string" id="6545433">&#34;udp6&#34;</span><span class="op" id="6545439">,</span>&nbsp;<span class="ident" id="6545441">caddr</span><span class="op" id="6545446">:</span>&nbsp;<span class="string" id="6545448">&#34;[::1]&#34;</span><span class="op" id="6545455">,</span>&nbsp;<span class="ident" id="6545457">ipv6</span><span class="op" id="6545461">:</span>&nbsp;<span class="builtintype" id="6545463">true</span><span class="op" id="6545467">}</span><span class="op" id="6545468">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545472">{</span><span class="ident" id="6545473">snet</span><span class="op" id="6545477">:</span>&nbsp;<span class="string" id="6545479">&#34;udp&#34;</span><span class="op" id="6545484">,</span>&nbsp;<span class="ident" id="6545486">saddr</span><span class="op" id="6545491">:</span>&nbsp;<span class="string" id="6545493">&#34;127.0.0.1&#34;</span><span class="op" id="6545504">,</span>&nbsp;<span class="ident" id="6545506">cnet</span><span class="op" id="6545510">:</span>&nbsp;<span class="string" id="6545512">&#34;udp&#34;</span><span class="op" id="6545517">,</span>&nbsp;<span class="ident" id="6545519">caddr</span><span class="op" id="6545524">:</span>&nbsp;<span class="string" id="6545526">&#34;127.0.0.1&#34;</span><span class="op" id="6545537">,</span>&nbsp;<span class="ident" id="6545539">dial</span><span class="op" id="6545543">:</span>&nbsp;<span class="builtintype" id="6545545">true</span><span class="op" id="6545549">}</span><span class="op" id="6545550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545553">{</span><span class="ident" id="6545554">snet</span><span class="op" id="6545558">:</span>&nbsp;<span class="string" id="6545560">&#34;udp&#34;</span><span class="op" id="6545565">,</span>&nbsp;<span class="ident" id="6545567">saddr</span><span class="op" id="6545572">:</span>&nbsp;<span class="string" id="6545574">&#34;127.0.0.1&#34;</span><span class="op" id="6545585">,</span>&nbsp;<span class="ident" id="6545587">cnet</span><span class="op" id="6545591">:</span>&nbsp;<span class="string" id="6545593">&#34;udp&#34;</span><span class="op" id="6545598">,</span>&nbsp;<span class="ident" id="6545600">caddr</span><span class="op" id="6545605">:</span>&nbsp;<span class="string" id="6545607">&#34;127.0.0.1&#34;</span><span class="op" id="6545618">,</span>&nbsp;<span class="ident" id="6545620">empty</span><span class="op" id="6545625">:</span>&nbsp;<span class="builtintype" id="6545627">true</span><span class="op" id="6545631">}</span><span class="op" id="6545632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545635">{</span><span class="ident" id="6545636">snet</span><span class="op" id="6545640">:</span>&nbsp;<span class="string" id="6545642">&#34;udp&#34;</span><span class="op" id="6545647">,</span>&nbsp;<span class="ident" id="6545649">saddr</span><span class="op" id="6545654">:</span>&nbsp;<span class="string" id="6545656">&#34;127.0.0.1&#34;</span><span class="op" id="6545667">,</span>&nbsp;<span class="ident" id="6545669">cnet</span><span class="op" id="6545673">:</span>&nbsp;<span class="string" id="6545675">&#34;udp&#34;</span><span class="op" id="6545680">,</span>&nbsp;<span class="ident" id="6545682">caddr</span><span class="op" id="6545687">:</span>&nbsp;<span class="string" id="6545689">&#34;127.0.0.1&#34;</span><span class="op" id="6545700">,</span>&nbsp;<span class="ident" id="6545702">dial</span><span class="op" id="6545706">:</span>&nbsp;<span class="builtintype" id="6545708">true</span><span class="op" id="6545712">,</span>&nbsp;<span class="ident" id="6545714">empty</span><span class="op" id="6545719">:</span>&nbsp;<span class="builtintype" id="6545721">true</span><span class="op" id="6545725">}</span><span class="op" id="6545726">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545730">{</span><span class="ident" id="6545731">snet</span><span class="op" id="6545735">:</span>&nbsp;<span class="string" id="6545737">&#34;udp&#34;</span><span class="op" id="6545742">,</span>&nbsp;<span class="ident" id="6545744">saddr</span><span class="op" id="6545749">:</span>&nbsp;<span class="string" id="6545751">&#34;[::1]&#34;</span><span class="op" id="6545758">,</span>&nbsp;<span class="ident" id="6545760">cnet</span><span class="op" id="6545764">:</span>&nbsp;<span class="string" id="6545766">&#34;udp&#34;</span><span class="op" id="6545771">,</span>&nbsp;<span class="ident" id="6545773">caddr</span><span class="op" id="6545778">:</span>&nbsp;<span class="string" id="6545780">&#34;[::1]&#34;</span><span class="op" id="6545787">,</span>&nbsp;<span class="ident" id="6545789">ipv6</span><span class="op" id="6545793">:</span>&nbsp;<span class="builtintype" id="6545795">true</span><span class="op" id="6545799">,</span>&nbsp;<span class="ident" id="6545801">dial</span><span class="op" id="6545805">:</span>&nbsp;<span class="builtintype" id="6545807">true</span><span class="op" id="6545811">}</span><span class="op" id="6545812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545815">{</span><span class="ident" id="6545816">snet</span><span class="op" id="6545820">:</span>&nbsp;<span class="string" id="6545822">&#34;udp&#34;</span><span class="op" id="6545827">,</span>&nbsp;<span class="ident" id="6545829">saddr</span><span class="op" id="6545834">:</span>&nbsp;<span class="string" id="6545836">&#34;[::1]&#34;</span><span class="op" id="6545843">,</span>&nbsp;<span class="ident" id="6545845">cnet</span><span class="op" id="6545849">:</span>&nbsp;<span class="string" id="6545851">&#34;udp&#34;</span><span class="op" id="6545856">,</span>&nbsp;<span class="ident" id="6545858">caddr</span><span class="op" id="6545863">:</span>&nbsp;<span class="string" id="6545865">&#34;[::1]&#34;</span><span class="op" id="6545872">,</span>&nbsp;<span class="ident" id="6545874">ipv6</span><span class="op" id="6545878">:</span>&nbsp;<span class="builtintype" id="6545880">true</span><span class="op" id="6545884">,</span>&nbsp;<span class="ident" id="6545886">empty</span><span class="op" id="6545891">:</span>&nbsp;<span class="builtintype" id="6545893">true</span><span class="op" id="6545897">}</span><span class="op" id="6545898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545901">{</span><span class="ident" id="6545902">snet</span><span class="op" id="6545906">:</span>&nbsp;<span class="string" id="6545908">&#34;udp&#34;</span><span class="op" id="6545913">,</span>&nbsp;<span class="ident" id="6545915">saddr</span><span class="op" id="6545920">:</span>&nbsp;<span class="string" id="6545922">&#34;[::1]&#34;</span><span class="op" id="6545929">,</span>&nbsp;<span class="ident" id="6545931">cnet</span><span class="op" id="6545935">:</span>&nbsp;<span class="string" id="6545937">&#34;udp&#34;</span><span class="op" id="6545942">,</span>&nbsp;<span class="ident" id="6545944">caddr</span><span class="op" id="6545949">:</span>&nbsp;<span class="string" id="6545951">&#34;[::1]&#34;</span><span class="op" id="6545958">,</span>&nbsp;<span class="ident" id="6545960">ipv6</span><span class="op" id="6545964">:</span>&nbsp;<span class="builtintype" id="6545966">true</span><span class="op" id="6545970">,</span>&nbsp;<span class="ident" id="6545972">dial</span><span class="op" id="6545976">:</span>&nbsp;<span class="builtintype" id="6545978">true</span><span class="op" id="6545982">,</span>&nbsp;<span class="ident" id="6545984">empty</span><span class="op" id="6545989">:</span>&nbsp;<span class="builtintype" id="6545991">true</span><span class="op" id="6545995">}</span><span class="op" id="6545996">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546000">{</span><span class="ident" id="6546001">snet</span><span class="op" id="6546005">:</span>&nbsp;<span class="string" id="6546007">&#34;unixgram&#34;</span><span class="op" id="6546017">,</span>&nbsp;<span class="ident" id="6546019">saddr</span><span class="op" id="6546024">:</span>&nbsp;<span class="ident" id="6546026">testUnixAddr</span><span class="op" id="6546038">(</span><span class="op" id="6546039">)</span><span class="op" id="6546040">,</span>&nbsp;<span class="ident" id="6546042">cnet</span><span class="op" id="6546046">:</span>&nbsp;<span class="string" id="6546048">&#34;unixgram&#34;</span><span class="op" id="6546058">,</span>&nbsp;<span class="ident" id="6546060">caddr</span><span class="op" id="6546065">:</span>&nbsp;<span class="ident" id="6546067">testUnixAddr</span><span class="op" id="6546079">(</span><span class="op" id="6546080">)</span><span class="op" id="6546081">}</span><span class="op" id="6546082">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546085">{</span><span class="ident" id="6546086">snet</span><span class="op" id="6546090">:</span>&nbsp;<span class="string" id="6546092">&#34;unixgram&#34;</span><span class="op" id="6546102">,</span>&nbsp;<span class="ident" id="6546104">saddr</span><span class="op" id="6546109">:</span>&nbsp;<span class="ident" id="6546111">testUnixAddr</span><span class="op" id="6546123">(</span><span class="op" id="6546124">)</span><span class="op" id="6546125">,</span>&nbsp;<span class="ident" id="6546127">cnet</span><span class="op" id="6546131">:</span>&nbsp;<span class="string" id="6546133">&#34;unixgram&#34;</span><span class="op" id="6546143">,</span>&nbsp;<span class="ident" id="6546145">caddr</span><span class="op" id="6546150">:</span>&nbsp;<span class="ident" id="6546152">testUnixAddr</span><span class="op" id="6546164">(</span><span class="op" id="6546165">)</span><span class="op" id="6546166">,</span>&nbsp;<span class="ident" id="6546168">dial</span><span class="op" id="6546172">:</span>&nbsp;<span class="builtintype" id="6546174">true</span><span class="op" id="6546178">}</span><span class="op" id="6546179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546182">{</span><span class="ident" id="6546183">snet</span><span class="op" id="6546187">:</span>&nbsp;<span class="string" id="6546189">&#34;unixgram&#34;</span><span class="op" id="6546199">,</span>&nbsp;<span class="ident" id="6546201">saddr</span><span class="op" id="6546206">:</span>&nbsp;<span class="ident" id="6546208">testUnixAddr</span><span class="op" id="6546220">(</span><span class="op" id="6546221">)</span><span class="op" id="6546222">,</span>&nbsp;<span class="ident" id="6546224">cnet</span><span class="op" id="6546228">:</span>&nbsp;<span class="string" id="6546230">&#34;unixgram&#34;</span><span class="op" id="6546240">,</span>&nbsp;<span class="ident" id="6546242">caddr</span><span class="op" id="6546247">:</span>&nbsp;<span class="ident" id="6546249">testUnixAddr</span><span class="op" id="6546261">(</span><span class="op" id="6546262">)</span><span class="op" id="6546263">,</span>&nbsp;<span class="ident" id="6546265">empty</span><span class="op" id="6546270">:</span>&nbsp;<span class="builtintype" id="6546272">true</span><span class="op" id="6546276">}</span><span class="op" id="6546277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546280">{</span><span class="ident" id="6546281">snet</span><span class="op" id="6546285">:</span>&nbsp;<span class="string" id="6546287">&#34;unixgram&#34;</span><span class="op" id="6546297">,</span>&nbsp;<span class="ident" id="6546299">saddr</span><span class="op" id="6546304">:</span>&nbsp;<span class="ident" id="6546306">testUnixAddr</span><span class="op" id="6546318">(</span><span class="op" id="6546319">)</span><span class="op" id="6546320">,</span>&nbsp;<span class="ident" id="6546322">cnet</span><span class="op" id="6546326">:</span>&nbsp;<span class="string" id="6546328">&#34;unixgram&#34;</span><span class="op" id="6546338">,</span>&nbsp;<span class="ident" id="6546340">caddr</span><span class="op" id="6546345">:</span>&nbsp;<span class="ident" id="6546347">testUnixAddr</span><span class="op" id="6546359">(</span><span class="op" id="6546360">)</span><span class="op" id="6546361">,</span>&nbsp;<span class="ident" id="6546363">dial</span><span class="op" id="6546367">:</span>&nbsp;<span class="builtintype" id="6546369">true</span><span class="op" id="6546373">,</span>&nbsp;<span class="ident" id="6546375">empty</span><span class="op" id="6546380">:</span>&nbsp;<span class="builtintype" id="6546382">true</span><span class="op" id="6546386">}</span><span class="op" id="6546387">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546391">{</span><span class="ident" id="6546392">snet</span><span class="op" id="6546396">:</span>&nbsp;<span class="string" id="6546398">&#34;unixgram&#34;</span><span class="op" id="6546408">,</span>&nbsp;<span class="ident" id="6546410">saddr</span><span class="op" id="6546415">:</span>&nbsp;<span class="string" id="6546417">&#34;@gotest6/net&#34;</span><span class="op" id="6546431">,</span>&nbsp;<span class="ident" id="6546433">cnet</span><span class="op" id="6546437">:</span>&nbsp;<span class="string" id="6546439">&#34;unixgram&#34;</span><span class="op" id="6546449">,</span>&nbsp;<span class="ident" id="6546451">caddr</span><span class="op" id="6546456">:</span>&nbsp;<span class="string" id="6546458">&#34;@gotest6/net.local&#34;</span><span class="op" id="6546478">,</span>&nbsp;<span class="ident" id="6546480">linuxOnly</span><span class="op" id="6546489">:</span>&nbsp;<span class="builtintype" id="6546491">true</span><span class="op" id="6546495">}</span><span class="op" id="6546496">,</span><br>
<span class="lineno">310</span><span class="op" id="6546498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6546501">func</span>&nbsp;<span class="ident" id="6546506">TestDatagramPacketConnServer</span><span class="op" id="6546534">(</span><span class="ident" id="6546535">t</span>&nbsp;<span class="op" id="6546537">*</span><span class="ident" id="6546538">testing</span><span class="op" id="6546545">.</span><span class="ident" id="6546546">T</span><span class="op" id="6546547">)</span>&nbsp;<span class="op" id="6546549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546552">if</span>&nbsp;<span class="op" id="6546555">!</span><span class="op" id="6546556">*</span><span class="ident" id="6546557">testDatagram</span>&nbsp;<span class="op" id="6546570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546574">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546586">for</span>&nbsp;<span class="ident" id="6546590">_</span><span class="op" id="6546591">,</span>&nbsp;<span class="ident" id="6546593">tt</span>&nbsp;<span class="op" id="6546596">:=</span>&nbsp;<span class="keyword" id="6546599">range</span>&nbsp;<span class="ident" id="6546605">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6546635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546639">if</span>&nbsp;<span class="ident" id="6546642">skipServerTest</span><span class="op" id="6546656">(</span><span class="ident" id="6546657">tt</span><span class="op" id="6546659">.</span><span class="ident" id="6546660">snet</span><span class="op" id="6546664">,</span>&nbsp;<span class="string" id="6546666">&#34;unixgram&#34;</span><span class="op" id="6546676">,</span>&nbsp;<span class="ident" id="6546678">tt</span><span class="op" id="6546680">.</span><span class="ident" id="6546681">saddr</span><span class="op" id="6546686">,</span>&nbsp;<span class="ident" id="6546688">tt</span><span class="op" id="6546690">.</span><span class="ident" id="6546691">ipv6</span><span class="op" id="6546695">,</span>&nbsp;<span class="ident" id="6546697">tt</span><span class="op" id="6546699">.</span><span class="ident" id="6546700">ipv4map</span><span class="op" id="6546707">,</span>&nbsp;<span class="ident" id="6546709">tt</span><span class="op" id="6546711">.</span><span class="ident" id="6546712">linuxOnly</span><span class="op" id="6546721">)</span>&nbsp;<span class="op" id="6546723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546728">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546744">listening</span>&nbsp;<span class="op" id="6546754">:=</span>&nbsp;<span class="builtinfunc" id="6546757">make</span><span class="op" id="6546761">(</span><span class="keyword" id="6546762">chan</span>&nbsp;<span class="builtintype" id="6546767">string</span><span class="op" id="6546773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546777">done</span>&nbsp;<span class="op" id="6546782">:=</span>&nbsp;<span class="builtinfunc" id="6546785">make</span><span class="op" id="6546789">(</span><span class="keyword" id="6546790">chan</span>&nbsp;<span class="builtintype" id="6546795">int</span><span class="op" id="6546798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546802">switch</span>&nbsp;<span class="ident" id="6546809">tt</span><span class="op" id="6546811">.</span><span class="ident" id="6546812">snet</span>&nbsp;<span class="op" id="6546817">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546821">case</span>&nbsp;<span class="string" id="6546826">&#34;udp&#34;</span><span class="op" id="6546831">,</span>&nbsp;<span class="string" id="6546833">&#34;udp4&#34;</span><span class="op" id="6546839">,</span>&nbsp;<span class="string" id="6546841">&#34;udp6&#34;</span><span class="op" id="6546847">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546852">tt</span><span class="op" id="6546854">.</span><span class="ident" id="6546855">saddr</span>&nbsp;<span class="op" id="6546861">+=</span>&nbsp;<span class="string" id="6546864">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546871">case</span>&nbsp;<span class="string" id="6546876">&#34;unixgram&#34;</span><span class="op" id="6546886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546891">os</span><span class="op" id="6546893">.</span><span class="ident" id="6546894">Remove</span><span class="op" id="6546900">(</span><span class="ident" id="6546901">tt</span><span class="op" id="6546903">.</span><span class="ident" id="6546904">saddr</span><span class="op" id="6546909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546914">os</span><span class="op" id="6546916">.</span><span class="ident" id="6546917">Remove</span><span class="op" id="6546923">(</span><span class="ident" id="6546924">tt</span><span class="op" id="6546926">.</span><span class="ident" id="6546927">caddr</span><span class="op" id="6546932">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546941">go</span>&nbsp;<span class="ident" id="6546944">runDatagramPacketConnServer</span><span class="op" id="6546971">(</span><span class="ident" id="6546972">t</span><span class="op" id="6546973">,</span>&nbsp;<span class="ident" id="6546975">tt</span><span class="op" id="6546977">.</span><span class="ident" id="6546978">snet</span><span class="op" id="6546982">,</span>&nbsp;<span class="ident" id="6546984">tt</span><span class="op" id="6546986">.</span><span class="ident" id="6546987">saddr</span><span class="op" id="6546992">,</span>&nbsp;<span class="ident" id="6546994">listening</span><span class="op" id="6547003">,</span>&nbsp;<span class="ident" id="6547005">done</span><span class="op" id="6547009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547013">taddr</span>&nbsp;<span class="op" id="6547019">:=</span>&nbsp;<span class="op" id="6547022">&lt;-</span><span class="ident" id="6547024">listening</span>&nbsp;<span class="comment" id="6547034">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547065">switch</span>&nbsp;<span class="ident" id="6547072">tt</span><span class="op" id="6547074">.</span><span class="ident" id="6547075">cnet</span>&nbsp;<span class="op" id="6547080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547084">case</span>&nbsp;<span class="string" id="6547089">&#34;udp&#34;</span><span class="op" id="6547094">,</span>&nbsp;<span class="string" id="6547096">&#34;udp4&#34;</span><span class="op" id="6547102">,</span>&nbsp;<span class="string" id="6547104">&#34;udp6&#34;</span><span class="op" id="6547110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547115">_</span><span class="op" id="6547116">,</span>&nbsp;<span class="ident" id="6547118">port</span><span class="op" id="6547122">,</span>&nbsp;<span class="ident" id="6547124">err</span>&nbsp;<span class="op" id="6547128">:=</span>&nbsp;<span class="ident" id="6547131">SplitHostPort</span><span class="op" id="6547144">(</span><span class="ident" id="6547145">taddr</span><span class="op" id="6547150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547155">if</span>&nbsp;<span class="ident" id="6547158">err</span>&nbsp;<span class="op" id="6547162">!=</span>&nbsp;<span class="builtintype" id="6547165">nil</span>&nbsp;<span class="op" id="6547169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547175">t</span><span class="op" id="6547176">.</span><span class="ident" id="6547177">Fatalf</span><span class="op" id="6547183">(</span><span class="string" id="6547184">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6547214">,</span>&nbsp;<span class="ident" id="6547216">taddr</span><span class="op" id="6547221">,</span>&nbsp;<span class="ident" id="6547223">err</span><span class="op" id="6547226">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547236">taddr</span>&nbsp;<span class="op" id="6547242">=</span>&nbsp;<span class="ident" id="6547244">tt</span><span class="op" id="6547246">.</span><span class="ident" id="6547247">caddr</span>&nbsp;<span class="op" id="6547253">+</span>&nbsp;<span class="string" id="6547255">&#34;:&#34;</span>&nbsp;<span class="op" id="6547259">+</span>&nbsp;<span class="ident" id="6547261">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547269">tt</span><span class="op" id="6547271">.</span><span class="ident" id="6547272">caddr</span>&nbsp;<span class="op" id="6547278">+=</span>&nbsp;<span class="string" id="6547281">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547292">if</span>&nbsp;<span class="ident" id="6547295">tt</span><span class="op" id="6547297">.</span><span class="ident" id="6547298">dial</span>&nbsp;<span class="op" id="6547303">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547308">runDatagramConnClient</span><span class="op" id="6547329">(</span><span class="ident" id="6547330">t</span><span class="op" id="6547331">,</span>&nbsp;<span class="ident" id="6547333">tt</span><span class="op" id="6547335">.</span><span class="ident" id="6547336">cnet</span><span class="op" id="6547340">,</span>&nbsp;<span class="ident" id="6547342">tt</span><span class="op" id="6547344">.</span><span class="ident" id="6547345">caddr</span><span class="op" id="6547350">,</span>&nbsp;<span class="ident" id="6547352">taddr</span><span class="op" id="6547357">,</span>&nbsp;<span class="ident" id="6547359">tt</span><span class="op" id="6547361">.</span><span class="ident" id="6547362">empty</span><span class="op" id="6547367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547371">}</span>&nbsp;<span class="keyword" id="6547373">else</span>&nbsp;<span class="op" id="6547378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547383">runDatagramPacketConnClient</span><span class="op" id="6547410">(</span><span class="ident" id="6547411">t</span><span class="op" id="6547412">,</span>&nbsp;<span class="ident" id="6547414">tt</span><span class="op" id="6547416">.</span><span class="ident" id="6547417">cnet</span><span class="op" id="6547421">,</span>&nbsp;<span class="ident" id="6547423">tt</span><span class="op" id="6547425">.</span><span class="ident" id="6547426">caddr</span><span class="op" id="6547431">,</span>&nbsp;<span class="ident" id="6547433">taddr</span><span class="op" id="6547438">,</span>&nbsp;<span class="ident" id="6547440">tt</span><span class="op" id="6547442">.</span><span class="ident" id="6547443">empty</span><span class="op" id="6547448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547456">&lt;-</span><span class="ident" id="6547458">done</span>&nbsp;<span class="comment" id="6547463">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547488">&lt;-</span><span class="ident" id="6547490">done</span>&nbsp;<span class="comment" id="6547495">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547526">switch</span>&nbsp;<span class="ident" id="6547533">tt</span><span class="op" id="6547535">.</span><span class="ident" id="6547536">snet</span>&nbsp;<span class="op" id="6547541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547545">case</span>&nbsp;<span class="string" id="6547550">&#34;unixgram&#34;</span><span class="op" id="6547560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547565">os</span><span class="op" id="6547567">.</span><span class="ident" id="6547568">Remove</span><span class="op" id="6547574">(</span><span class="ident" id="6547575">tt</span><span class="op" id="6547577">.</span><span class="ident" id="6547578">saddr</span><span class="op" id="6547583">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547588">os</span><span class="op" id="6547590">.</span><span class="ident" id="6547591">Remove</span><span class="op" id="6547597">(</span><span class="ident" id="6547598">tt</span><span class="op" id="6547600">.</span><span class="ident" id="6547601">caddr</span><span class="op" id="6547606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547613">}</span><br>
<span class="lineno"></span><span class="op" id="6547615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="6547618">func</span>&nbsp;<span class="ident" id="6547623">runDatagramPacketConnServer</span><span class="op" id="6547650">(</span><span class="ident" id="6547651">t</span>&nbsp;<span class="op" id="6547653">*</span><span class="ident" id="6547654">testing</span><span class="op" id="6547661">.</span><span class="ident" id="6547662">T</span><span class="op" id="6547663">,</span>&nbsp;<span class="ident" id="6547665">net</span><span class="op" id="6547668">,</span>&nbsp;<span class="ident" id="6547670">laddr</span>&nbsp;<span class="builtintype" id="6547676">string</span><span class="op" id="6547682">,</span>&nbsp;<span class="ident" id="6547684">listening</span>&nbsp;<span class="keyword" id="6547694">chan</span><span class="op" id="6547698">&lt;-</span>&nbsp;<span class="builtintype" id="6547701">string</span><span class="op" id="6547707">,</span>&nbsp;<span class="ident" id="6547709">done</span>&nbsp;<span class="keyword" id="6547714">chan</span><span class="op" id="6547718">&lt;-</span>&nbsp;<span class="builtintype" id="6547721">int</span><span class="op" id="6547724">)</span>&nbsp;<span class="op" id="6547726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547729">c</span><span class="op" id="6547730">,</span>&nbsp;<span class="ident" id="6547732">err</span>&nbsp;<span class="op" id="6547736">:=</span>&nbsp;<span class="ident" id="6547739">ListenPacket</span><span class="op" id="6547751">(</span><span class="ident" id="6547752">net</span><span class="op" id="6547755">,</span>&nbsp;<span class="ident" id="6547757">laddr</span><span class="op" id="6547762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547765">if</span>&nbsp;<span class="ident" id="6547768">err</span>&nbsp;<span class="op" id="6547772">!=</span>&nbsp;<span class="builtintype" id="6547775">nil</span>&nbsp;<span class="op" id="6547779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547783">t</span><span class="op" id="6547784">.</span><span class="ident" id="6547785">Errorf</span><span class="op" id="6547791">(</span><span class="string" id="6547792">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6547825">,</span>&nbsp;<span class="ident" id="6547827">net</span><span class="op" id="6547830">,</span>&nbsp;<span class="ident" id="6547832">laddr</span><span class="op" id="6547837">,</span>&nbsp;<span class="ident" id="6547839">err</span><span class="op" id="6547842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547846">listening</span>&nbsp;<span class="op" id="6547856">&lt;-</span>&nbsp;<span class="string" id="6547859">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547869">done</span>&nbsp;<span class="op" id="6547874">&lt;-</span>&nbsp;<span class="num" id="6547877">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547881">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547892">defer</span>&nbsp;<span class="ident" id="6547898">c</span><span class="op" id="6547899">.</span><span class="ident" id="6547900">Close</span><span class="op" id="6547905">(</span><span class="op" id="6547906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547909">listening</span>&nbsp;<span class="op" id="6547919">&lt;-</span>&nbsp;<span class="ident" id="6547922">c</span><span class="op" id="6547923">.</span><span class="ident" id="6547924">LocalAddr</span><span class="op" id="6547933">(</span><span class="op" id="6547934">)</span><span class="op" id="6547935">.</span><span class="ident" id="6547936">String</span><span class="op" id="6547942">(</span><span class="op" id="6547943">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547947">buf</span>&nbsp;<span class="op" id="6547951">:=</span>&nbsp;<span class="builtinfunc" id="6547954">make</span><span class="op" id="6547958">(</span><span class="op" id="6547959">[</span><span class="op" id="6547960">]</span><span class="builtintype" id="6547961">byte</span><span class="op" id="6547965">,</span>&nbsp;<span class="num" id="6547967">1024</span><span class="op" id="6547971">)</span><br>
<span class="lineno"></span><span class="ident" id="6547973">run</span><span class="op" id="6547976">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547979">for</span>&nbsp;<span class="op" id="6547983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547987">c</span><span class="op" id="6547988">.</span><span class="ident" id="6547989">SetReadDeadline</span><span class="op" id="6548004">(</span><span class="ident" id="6548005">time</span><span class="op" id="6548009">.</span><span class="ident" id="6548010">Now</span><span class="op" id="6548013">(</span><span class="op" id="6548014">)</span><span class="op" id="6548015">.</span><span class="ident" id="6548016">Add</span><span class="op" id="6548019">(</span><span class="num" id="6548020">10</span>&nbsp;<span class="op" id="6548023">*</span>&nbsp;<span class="ident" id="6548025">time</span><span class="op" id="6548029">.</span><span class="ident" id="6548030">Millisecond</span><span class="op" id="6548041">)</span><span class="op" id="6548042">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548046">n</span><span class="op" id="6548047">,</span>&nbsp;<span class="ident" id="6548049">ra</span><span class="op" id="6548051">,</span>&nbsp;<span class="ident" id="6548053">err</span>&nbsp;<span class="op" id="6548057">:=</span>&nbsp;<span class="ident" id="6548060">c</span><span class="op" id="6548061">.</span><span class="ident" id="6548062">ReadFrom</span><span class="op" id="6548070">(</span><span class="ident" id="6548071">buf</span><span class="op" id="6548074">[</span><span class="num" id="6548075">0</span><span class="op" id="6548076">:</span><span class="op" id="6548077">]</span><span class="op" id="6548078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548082">if</span>&nbsp;<span class="ident" id="6548085">nerr</span><span class="op" id="6548089">,</span>&nbsp;<span class="ident" id="6548091">ok</span>&nbsp;<span class="op" id="6548094">:=</span>&nbsp;<span class="ident" id="6548097">err</span><span class="op" id="6548100">.</span><span class="op" id="6548101">(</span><span class="ident" id="6548102">Error</span><span class="op" id="6548107">)</span><span class="op" id="6548108">;</span>&nbsp;<span class="ident" id="6548110">ok</span>&nbsp;<span class="op" id="6548113">&amp;&amp;</span>&nbsp;<span class="ident" id="6548116">nerr</span><span class="op" id="6548120">.</span><span class="ident" id="6548121">Timeout</span><span class="op" id="6548128">(</span><span class="op" id="6548129">)</span>&nbsp;<span class="op" id="6548131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548136">select</span>&nbsp;<span class="op" id="6548143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548148">case</span>&nbsp;<span class="ident" id="6548153">done</span>&nbsp;<span class="op" id="6548158">&lt;-</span>&nbsp;<span class="num" id="6548161">1</span><span class="op" id="6548162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548168">break</span>&nbsp;<span class="ident" id="6548174">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548181">default</span><span class="op" id="6548188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548194">continue</span>&nbsp;<span class="ident" id="6548203">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548218">if</span>&nbsp;<span class="ident" id="6548221">err</span>&nbsp;<span class="op" id="6548225">!=</span>&nbsp;<span class="builtintype" id="6548228">nil</span>&nbsp;<span class="op" id="6548232">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548237">break</span>&nbsp;<span class="ident" id="6548243">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548253">if</span>&nbsp;<span class="ident" id="6548256">_</span><span class="op" id="6548257">,</span>&nbsp;<span class="ident" id="6548259">err</span>&nbsp;<span class="op" id="6548263">=</span>&nbsp;<span class="ident" id="6548265">c</span><span class="op" id="6548266">.</span><span class="ident" id="6548267">WriteTo</span><span class="op" id="6548274">(</span><span class="ident" id="6548275">buf</span><span class="op" id="6548278">[</span><span class="num" id="6548279">0</span><span class="op" id="6548280">:</span><span class="ident" id="6548281">n</span><span class="op" id="6548282">]</span><span class="op" id="6548283">,</span>&nbsp;<span class="ident" id="6548285">ra</span><span class="op" id="6548287">)</span><span class="op" id="6548288">;</span>&nbsp;<span class="ident" id="6548290">err</span>&nbsp;<span class="op" id="6548294">!=</span>&nbsp;<span class="builtintype" id="6548297">nil</span>&nbsp;<span class="op" id="6548301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548306">t</span><span class="op" id="6548307">.</span><span class="ident" id="6548308">Errorf</span><span class="op" id="6548314">(</span><span class="string" id="6548315">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6548339">,</span>&nbsp;<span class="ident" id="6548341">ra</span><span class="op" id="6548343">,</span>&nbsp;<span class="ident" id="6548345">err</span><span class="op" id="6548348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548353">break</span>&nbsp;<span class="ident" id="6548359">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548371">done</span>&nbsp;<span class="op" id="6548376">&lt;-</span>&nbsp;<span class="num" id="6548379">1</span><br>
<span class="lineno"></span><span class="op" id="6548381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="6548384">func</span>&nbsp;<span class="ident" id="6548389">runDatagramConnClient</span><span class="op" id="6548410">(</span><span class="ident" id="6548411">t</span>&nbsp;<span class="op" id="6548413">*</span><span class="ident" id="6548414">testing</span><span class="op" id="6548421">.</span><span class="ident" id="6548422">T</span><span class="op" id="6548423">,</span>&nbsp;<span class="ident" id="6548425">net</span><span class="op" id="6548428">,</span>&nbsp;<span class="ident" id="6548430">laddr</span><span class="op" id="6548435">,</span>&nbsp;<span class="ident" id="6548437">taddr</span>&nbsp;<span class="builtintype" id="6548443">string</span><span class="op" id="6548449">,</span>&nbsp;<span class="ident" id="6548451">isEmpty</span>&nbsp;<span class="builtintype" id="6548459">bool</span><span class="op" id="6548463">)</span>&nbsp;<span class="op" id="6548465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548468">var</span>&nbsp;<span class="ident" id="6548472">c</span>&nbsp;<span class="ident" id="6548474">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548480">var</span>&nbsp;<span class="ident" id="6548484">err</span>&nbsp;<span class="builtintype" id="6548488">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548495">switch</span>&nbsp;<span class="ident" id="6548502">net</span>&nbsp;<span class="op" id="6548506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548509">case</span>&nbsp;<span class="string" id="6548514">&#34;udp&#34;</span><span class="op" id="6548519">,</span>&nbsp;<span class="string" id="6548521">&#34;udp4&#34;</span><span class="op" id="6548527">,</span>&nbsp;<span class="string" id="6548529">&#34;udp6&#34;</span><span class="op" id="6548535">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548539">c</span><span class="op" id="6548540">,</span>&nbsp;<span class="ident" id="6548542">err</span>&nbsp;<span class="op" id="6548546">=</span>&nbsp;<span class="ident" id="6548548">Dial</span><span class="op" id="6548552">(</span><span class="ident" id="6548553">net</span><span class="op" id="6548556">,</span>&nbsp;<span class="ident" id="6548558">taddr</span><span class="op" id="6548563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548567">if</span>&nbsp;<span class="ident" id="6548570">err</span>&nbsp;<span class="op" id="6548574">!=</span>&nbsp;<span class="builtintype" id="6548577">nil</span>&nbsp;<span class="op" id="6548581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548586">t</span><span class="op" id="6548587">.</span><span class="ident" id="6548588">Fatalf</span><span class="op" id="6548594">(</span><span class="string" id="6548595">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6548620">,</span>&nbsp;<span class="ident" id="6548622">net</span><span class="op" id="6548625">,</span>&nbsp;<span class="ident" id="6548627">taddr</span><span class="op" id="6548632">,</span>&nbsp;<span class="ident" id="6548634">err</span><span class="op" id="6548637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548644">case</span>&nbsp;<span class="string" id="6548649">&#34;unixgram&#34;</span><span class="op" id="6548659">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548663">c</span><span class="op" id="6548664">,</span>&nbsp;<span class="ident" id="6548666">err</span>&nbsp;<span class="op" id="6548670">=</span>&nbsp;<span class="ident" id="6548672">DialUnix</span><span class="op" id="6548680">(</span><span class="ident" id="6548681">net</span><span class="op" id="6548684">,</span>&nbsp;<span class="op" id="6548686">&amp;</span><span class="ident" id="6548687">UnixAddr</span><span class="op" id="6548695">{</span><span class="ident" id="6548696">Name</span><span class="op" id="6548700">:</span>&nbsp;<span class="ident" id="6548702">laddr</span><span class="op" id="6548707">,</span>&nbsp;<span class="ident" id="6548709">Net</span><span class="op" id="6548712">:</span>&nbsp;<span class="ident" id="6548714">net</span><span class="op" id="6548717">}</span><span class="op" id="6548718">,</span>&nbsp;<span class="op" id="6548720">&amp;</span><span class="ident" id="6548721">UnixAddr</span><span class="op" id="6548729">{</span><span class="ident" id="6548730">Name</span><span class="op" id="6548734">:</span>&nbsp;<span class="ident" id="6548736">taddr</span><span class="op" id="6548741">,</span>&nbsp;<span class="ident" id="6548743">Net</span><span class="op" id="6548746">:</span>&nbsp;<span class="ident" id="6548748">net</span><span class="op" id="6548751">}</span><span class="op" id="6548752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548756">if</span>&nbsp;<span class="ident" id="6548759">err</span>&nbsp;<span class="op" id="6548763">!=</span>&nbsp;<span class="builtintype" id="6548766">nil</span>&nbsp;<span class="op" id="6548770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548775">t</span><span class="op" id="6548776">.</span><span class="ident" id="6548777">Fatalf</span><span class="op" id="6548783">(</span><span class="string" id="6548784">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6548819">,</span>&nbsp;<span class="ident" id="6548821">net</span><span class="op" id="6548824">,</span>&nbsp;<span class="ident" id="6548826">laddr</span><span class="op" id="6548831">,</span>&nbsp;<span class="ident" id="6548833">taddr</span><span class="op" id="6548838">,</span>&nbsp;<span class="ident" id="6548840">err</span><span class="op" id="6548843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548850">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548853">defer</span>&nbsp;<span class="ident" id="6548859">c</span><span class="op" id="6548860">.</span><span class="ident" id="6548861">Close</span><span class="op" id="6548866">(</span><span class="op" id="6548867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548870">c</span><span class="op" id="6548871">.</span><span class="ident" id="6548872">SetReadDeadline</span><span class="op" id="6548887">(</span><span class="ident" id="6548888">time</span><span class="op" id="6548892">.</span><span class="ident" id="6548893">Now</span><span class="op" id="6548896">(</span><span class="op" id="6548897">)</span><span class="op" id="6548898">.</span><span class="ident" id="6548899">Add</span><span class="op" id="6548902">(</span><span class="num" id="6548903">1</span>&nbsp;<span class="op" id="6548905">*</span>&nbsp;<span class="ident" id="6548907">time</span><span class="op" id="6548911">.</span><span class="ident" id="6548912">Second</span><span class="op" id="6548918">)</span><span class="op" id="6548919">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548923">var</span>&nbsp;<span class="ident" id="6548927">wb</span>&nbsp;<span class="op" id="6548930">[</span><span class="op" id="6548931">]</span><span class="builtintype" id="6548932">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548938">if</span>&nbsp;<span class="op" id="6548941">!</span><span class="ident" id="6548942">isEmpty</span>&nbsp;<span class="op" id="6548950">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548954">wb</span>&nbsp;<span class="op" id="6548957">=</span>&nbsp;<span class="op" id="6548959">[</span><span class="op" id="6548960">]</span><span class="builtintype" id="6548961">byte</span><span class="op" id="6548965">(</span><span class="string" id="6548966">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6548996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549002">if</span>&nbsp;<span class="ident" id="6549005">n</span><span class="op" id="6549006">,</span>&nbsp;<span class="ident" id="6549008">err</span>&nbsp;<span class="op" id="6549012">:=</span>&nbsp;<span class="ident" id="6549015">c</span><span class="op" id="6549016">.</span><span class="ident" id="6549017">Write</span><span class="op" id="6549022">(</span><span class="ident" id="6549023">wb</span><span class="op" id="6549025">[</span><span class="num" id="6549026">0</span><span class="op" id="6549027">:</span><span class="op" id="6549028">]</span><span class="op" id="6549029">)</span><span class="op" id="6549030">;</span>&nbsp;<span class="ident" id="6549032">err</span>&nbsp;<span class="op" id="6549036">!=</span>&nbsp;<span class="builtintype" id="6549039">nil</span>&nbsp;<span class="op" id="6549043">||</span>&nbsp;<span class="ident" id="6549046">n</span>&nbsp;<span class="op" id="6549048">!=</span>&nbsp;<span class="builtinfunc" id="6549051">len</span><span class="op" id="6549054">(</span><span class="ident" id="6549055">wb</span><span class="op" id="6549057">)</span>&nbsp;<span class="op" id="6549059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549063">t</span><span class="op" id="6549064">.</span><span class="ident" id="6549065">Fatalf</span><span class="op" id="6549071">(</span><span class="string" id="6549072">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6549110">,</span>&nbsp;<span class="ident" id="6549112">n</span><span class="op" id="6549113">,</span>&nbsp;<span class="ident" id="6549115">err</span><span class="op" id="6549118">,</span>&nbsp;<span class="builtinfunc" id="6549120">len</span><span class="op" id="6549123">(</span><span class="ident" id="6549124">wb</span><span class="op" id="6549126">)</span><span class="op" id="6549127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549130">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549134">rb</span>&nbsp;<span class="op" id="6549137">:=</span>&nbsp;<span class="builtinfunc" id="6549140">make</span><span class="op" id="6549144">(</span><span class="op" id="6549145">[</span><span class="op" id="6549146">]</span><span class="builtintype" id="6549147">byte</span><span class="op" id="6549151">,</span>&nbsp;<span class="num" id="6549153">1024</span><span class="op" id="6549157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549160">if</span>&nbsp;<span class="ident" id="6549163">n</span><span class="op" id="6549164">,</span>&nbsp;<span class="ident" id="6549166">err</span>&nbsp;<span class="op" id="6549170">:=</span>&nbsp;<span class="ident" id="6549173">c</span><span class="op" id="6549174">.</span><span class="ident" id="6549175">Read</span><span class="op" id="6549179">(</span><span class="ident" id="6549180">rb</span><span class="op" id="6549182">[</span><span class="num" id="6549183">0</span><span class="op" id="6549184">:</span><span class="op" id="6549185">]</span><span class="op" id="6549186">)</span><span class="op" id="6549187">;</span>&nbsp;<span class="ident" id="6549189">err</span>&nbsp;<span class="op" id="6549193">!=</span>&nbsp;<span class="builtintype" id="6549196">nil</span>&nbsp;<span class="op" id="6549200">||</span>&nbsp;<span class="ident" id="6549203">n</span>&nbsp;<span class="op" id="6549205">!=</span>&nbsp;<span class="builtinfunc" id="6549208">len</span><span class="op" id="6549211">(</span><span class="ident" id="6549212">wb</span><span class="op" id="6549214">)</span>&nbsp;<span class="op" id="6549216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549220">t</span><span class="op" id="6549221">.</span><span class="ident" id="6549222">Fatalf</span><span class="op" id="6549228">(</span><span class="string" id="6549229">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6549266">,</span>&nbsp;<span class="ident" id="6549268">n</span><span class="op" id="6549269">,</span>&nbsp;<span class="ident" id="6549271">err</span><span class="op" id="6549274">,</span>&nbsp;<span class="builtinfunc" id="6549276">len</span><span class="op" id="6549279">(</span><span class="ident" id="6549280">wb</span><span class="op" id="6549282">)</span><span class="op" id="6549283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549286">}</span><br>
<span class="lineno">425</span><span class="op" id="6549288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6549291">func</span>&nbsp;<span class="ident" id="6549296">runDatagramPacketConnClient</span><span class="op" id="6549323">(</span><span class="ident" id="6549324">t</span>&nbsp;<span class="op" id="6549326">*</span><span class="ident" id="6549327">testing</span><span class="op" id="6549334">.</span><span class="ident" id="6549335">T</span><span class="op" id="6549336">,</span>&nbsp;<span class="ident" id="6549338">net</span><span class="op" id="6549341">,</span>&nbsp;<span class="ident" id="6549343">laddr</span><span class="op" id="6549348">,</span>&nbsp;<span class="ident" id="6549350">taddr</span>&nbsp;<span class="builtintype" id="6549356">string</span><span class="op" id="6549362">,</span>&nbsp;<span class="ident" id="6549364">isEmpty</span>&nbsp;<span class="builtintype" id="6549372">bool</span><span class="op" id="6549376">)</span>&nbsp;<span class="op" id="6549378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549381">var</span>&nbsp;<span class="ident" id="6549385">ra</span>&nbsp;<span class="ident" id="6549388">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549394">var</span>&nbsp;<span class="ident" id="6549398">err</span>&nbsp;<span class="builtintype" id="6549402">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549409">switch</span>&nbsp;<span class="ident" id="6549416">net</span>&nbsp;<span class="op" id="6549420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549423">case</span>&nbsp;<span class="string" id="6549428">&#34;udp&#34;</span><span class="op" id="6549433">,</span>&nbsp;<span class="string" id="6549435">&#34;udp4&#34;</span><span class="op" id="6549441">,</span>&nbsp;<span class="string" id="6549443">&#34;udp6&#34;</span><span class="op" id="6549449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549453">ra</span><span class="op" id="6549455">,</span>&nbsp;<span class="ident" id="6549457">err</span>&nbsp;<span class="op" id="6549461">=</span>&nbsp;<span class="ident" id="6549463">ResolveUDPAddr</span><span class="op" id="6549477">(</span><span class="ident" id="6549478">net</span><span class="op" id="6549481">,</span>&nbsp;<span class="ident" id="6549483">taddr</span><span class="op" id="6549488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549492">if</span>&nbsp;<span class="ident" id="6549495">err</span>&nbsp;<span class="op" id="6549499">!=</span>&nbsp;<span class="builtintype" id="6549502">nil</span>&nbsp;<span class="op" id="6549506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549511">t</span><span class="op" id="6549512">.</span><span class="ident" id="6549513">Fatalf</span><span class="op" id="6549519">(</span><span class="string" id="6549520">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6549555">,</span>&nbsp;<span class="ident" id="6549557">net</span><span class="op" id="6549560">,</span>&nbsp;<span class="ident" id="6549562">taddr</span><span class="op" id="6549567">,</span>&nbsp;<span class="ident" id="6549569">err</span><span class="op" id="6549572">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549579">case</span>&nbsp;<span class="string" id="6549584">&#34;unixgram&#34;</span><span class="op" id="6549594">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549598">ra</span><span class="op" id="6549600">,</span>&nbsp;<span class="ident" id="6549602">err</span>&nbsp;<span class="op" id="6549606">=</span>&nbsp;<span class="ident" id="6549608">ResolveUnixAddr</span><span class="op" id="6549623">(</span><span class="ident" id="6549624">net</span><span class="op" id="6549627">,</span>&nbsp;<span class="ident" id="6549629">taddr</span><span class="op" id="6549634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549638">if</span>&nbsp;<span class="ident" id="6549641">err</span>&nbsp;<span class="op" id="6549645">!=</span>&nbsp;<span class="builtintype" id="6549648">nil</span>&nbsp;<span class="op" id="6549652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549657">t</span><span class="op" id="6549658">.</span><span class="ident" id="6549659">Fatalf</span><span class="op" id="6549665">(</span><span class="string" id="6549666">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6549702">,</span>&nbsp;<span class="ident" id="6549704">net</span><span class="op" id="6549707">,</span>&nbsp;<span class="ident" id="6549709">taddr</span><span class="op" id="6549714">,</span>&nbsp;<span class="ident" id="6549716">err</span><span class="op" id="6549719">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549729">c</span><span class="op" id="6549730">,</span>&nbsp;<span class="ident" id="6549732">err</span>&nbsp;<span class="op" id="6549736">:=</span>&nbsp;<span class="ident" id="6549739">ListenPacket</span><span class="op" id="6549751">(</span><span class="ident" id="6549752">net</span><span class="op" id="6549755">,</span>&nbsp;<span class="ident" id="6549757">laddr</span><span class="op" id="6549762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549765">if</span>&nbsp;<span class="ident" id="6549768">err</span>&nbsp;<span class="op" id="6549772">!=</span>&nbsp;<span class="builtintype" id="6549775">nil</span>&nbsp;<span class="op" id="6549779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549783">t</span><span class="op" id="6549784">.</span><span class="ident" id="6549785">Fatalf</span><span class="op" id="6549791">(</span><span class="string" id="6549792">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="6549824">,</span>&nbsp;<span class="ident" id="6549826">net</span><span class="op" id="6549829">,</span>&nbsp;<span class="ident" id="6549831">laddr</span><span class="op" id="6549836">,</span>&nbsp;<span class="ident" id="6549838">err</span><span class="op" id="6549841">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549847">defer</span>&nbsp;<span class="ident" id="6549853">c</span><span class="op" id="6549854">.</span><span class="ident" id="6549855">Close</span><span class="op" id="6549860">(</span><span class="op" id="6549861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549864">c</span><span class="op" id="6549865">.</span><span class="ident" id="6549866">SetReadDeadline</span><span class="op" id="6549881">(</span><span class="ident" id="6549882">time</span><span class="op" id="6549886">.</span><span class="ident" id="6549887">Now</span><span class="op" id="6549890">(</span><span class="op" id="6549891">)</span><span class="op" id="6549892">.</span><span class="ident" id="6549893">Add</span><span class="op" id="6549896">(</span><span class="num" id="6549897">1</span>&nbsp;<span class="op" id="6549899">*</span>&nbsp;<span class="ident" id="6549901">time</span><span class="op" id="6549905">.</span><span class="ident" id="6549906">Second</span><span class="op" id="6549912">)</span><span class="op" id="6549913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549917">var</span>&nbsp;<span class="ident" id="6549921">wb</span>&nbsp;<span class="op" id="6549924">[</span><span class="op" id="6549925">]</span><span class="builtintype" id="6549926">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549932">if</span>&nbsp;<span class="op" id="6549935">!</span><span class="ident" id="6549936">isEmpty</span>&nbsp;<span class="op" id="6549944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549948">wb</span>&nbsp;<span class="op" id="6549951">=</span>&nbsp;<span class="op" id="6549953">[</span><span class="op" id="6549954">]</span><span class="builtintype" id="6549955">byte</span><span class="op" id="6549959">(</span><span class="string" id="6549960">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="6550004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550010">if</span>&nbsp;<span class="ident" id="6550013">n</span><span class="op" id="6550014">,</span>&nbsp;<span class="ident" id="6550016">err</span>&nbsp;<span class="op" id="6550020">:=</span>&nbsp;<span class="ident" id="6550023">c</span><span class="op" id="6550024">.</span><span class="ident" id="6550025">WriteTo</span><span class="op" id="6550032">(</span><span class="ident" id="6550033">wb</span><span class="op" id="6550035">[</span><span class="num" id="6550036">0</span><span class="op" id="6550037">:</span><span class="op" id="6550038">]</span><span class="op" id="6550039">,</span>&nbsp;<span class="ident" id="6550041">ra</span><span class="op" id="6550043">)</span><span class="op" id="6550044">;</span>&nbsp;<span class="ident" id="6550046">err</span>&nbsp;<span class="op" id="6550050">!=</span>&nbsp;<span class="builtintype" id="6550053">nil</span>&nbsp;<span class="op" id="6550057">||</span>&nbsp;<span class="ident" id="6550060">n</span>&nbsp;<span class="op" id="6550062">!=</span>&nbsp;<span class="builtinfunc" id="6550065">len</span><span class="op" id="6550068">(</span><span class="ident" id="6550069">wb</span><span class="op" id="6550071">)</span>&nbsp;<span class="op" id="6550073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550077">t</span><span class="op" id="6550078">.</span><span class="ident" id="6550079">Fatalf</span><span class="op" id="6550085">(</span><span class="string" id="6550086">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6550130">,</span>&nbsp;<span class="ident" id="6550132">ra</span><span class="op" id="6550134">,</span>&nbsp;<span class="ident" id="6550136">n</span><span class="op" id="6550137">,</span>&nbsp;<span class="ident" id="6550139">err</span><span class="op" id="6550142">,</span>&nbsp;<span class="builtinfunc" id="6550144">len</span><span class="op" id="6550147">(</span><span class="ident" id="6550148">wb</span><span class="op" id="6550150">)</span><span class="op" id="6550151">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550158">rb</span>&nbsp;<span class="op" id="6550161">:=</span>&nbsp;<span class="builtinfunc" id="6550164">make</span><span class="op" id="6550168">(</span><span class="op" id="6550169">[</span><span class="op" id="6550170">]</span><span class="builtintype" id="6550171">byte</span><span class="op" id="6550175">,</span>&nbsp;<span class="num" id="6550177">1024</span><span class="op" id="6550181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550184">if</span>&nbsp;<span class="ident" id="6550187">n</span><span class="op" id="6550188">,</span>&nbsp;<span class="ident" id="6550190">_</span><span class="op" id="6550191">,</span>&nbsp;<span class="ident" id="6550193">err</span>&nbsp;<span class="op" id="6550197">:=</span>&nbsp;<span class="ident" id="6550200">c</span><span class="op" id="6550201">.</span><span class="ident" id="6550202">ReadFrom</span><span class="op" id="6550210">(</span><span class="ident" id="6550211">rb</span><span class="op" id="6550213">[</span><span class="num" id="6550214">0</span><span class="op" id="6550215">:</span><span class="op" id="6550216">]</span><span class="op" id="6550217">)</span><span class="op" id="6550218">;</span>&nbsp;<span class="ident" id="6550220">err</span>&nbsp;<span class="op" id="6550224">!=</span>&nbsp;<span class="builtintype" id="6550227">nil</span>&nbsp;<span class="op" id="6550231">||</span>&nbsp;<span class="ident" id="6550234">n</span>&nbsp;<span class="op" id="6550236">!=</span>&nbsp;<span class="builtinfunc" id="6550239">len</span><span class="op" id="6550242">(</span><span class="ident" id="6550243">wb</span><span class="op" id="6550245">)</span>&nbsp;<span class="op" id="6550247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550251">t</span><span class="op" id="6550252">.</span><span class="ident" id="6550253">Fatalf</span><span class="op" id="6550259">(</span><span class="string" id="6550260">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6550301">,</span>&nbsp;<span class="ident" id="6550303">n</span><span class="op" id="6550304">,</span>&nbsp;<span class="ident" id="6550306">err</span><span class="op" id="6550309">,</span>&nbsp;<span class="builtinfunc" id="6550311">len</span><span class="op" id="6550314">(</span><span class="ident" id="6550315">wb</span><span class="op" id="6550317">)</span><span class="op" id="6550318">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550321">}</span><br>
<span class="lineno"></span><span class="op" id="6550323">}</span>
</div>
</body>
</html>
