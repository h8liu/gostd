<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5118917">package</span>&nbsp;<span class="ident" id="5118925">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5118931">//&nbsp;SymTable&nbsp;save&nbsp;the&nbsp;symbol</span><br>
<span class="lineno"></span><span class="keyword" id="5118959">type</span>&nbsp;<span class="ident" id="5118964">symTabel</span>&nbsp;<span class="keyword" id="5118973">struct</span>&nbsp;<span class="op" id="5118980">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118983">m</span>&nbsp;<span class="keyword" id="5118985">map</span><span class="op" id="5118988">[</span><span class="builtintype" id="5118989">string</span><span class="op" id="5118995">]</span><span class="op" id="5118996">*</span><span class="ident" id="5118997">symbol</span><br>
<span class="lineno"></span><span class="op" id="5119004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5119007">//&nbsp;NewSymTable&nbsp;creates&nbsp;an&nbsp;empty&nbsp;symbol&nbsp;table</span><br>
<span class="lineno"></span><span class="keyword" id="5119052">func</span>&nbsp;<span class="ident" id="5119057">newSymTable</span><span class="op" id="5119068">(</span><span class="op" id="5119069">)</span>&nbsp;<span class="op" id="5119071">*</span><span class="ident" id="5119072">symTabel</span>&nbsp;<span class="op" id="5119081">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119084">ret</span>&nbsp;<span class="op" id="5119088">:=</span>&nbsp;<span class="builtinfunc" id="5119091">new</span><span class="op" id="5119094">(</span><span class="ident" id="5119095">symTabel</span><span class="op" id="5119103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119106">ret</span><span class="op" id="5119109">.</span><span class="ident" id="5119110">m</span>&nbsp;<span class="op" id="5119112">=</span>&nbsp;<span class="builtinfunc" id="5119114">make</span><span class="op" id="5119118">(</span><span class="keyword" id="5119119">map</span><span class="op" id="5119122">[</span><span class="builtintype" id="5119123">string</span><span class="op" id="5119129">]</span><span class="op" id="5119130">*</span><span class="ident" id="5119131">symbol</span><span class="op" id="5119137">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119141">return</span>&nbsp;<span class="ident" id="5119148">ret</span><br>
<span class="lineno"></span><span class="op" id="5119152">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5119155">//&nbsp;Query&nbsp;searches&nbsp;for&nbsp;a&nbsp;symbol&nbsp;with&nbsp;a&nbsp;particular&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="5119210">func</span>&nbsp;<span class="op" id="5119215">(</span><span class="ident" id="5119216">tab</span>&nbsp;<span class="op" id="5119220">*</span><span class="ident" id="5119221">symTabel</span><span class="op" id="5119229">)</span>&nbsp;<span class="ident" id="5119231">Query</span><span class="op" id="5119236">(</span><span class="ident" id="5119237">n</span>&nbsp;<span class="builtintype" id="5119239">string</span><span class="op" id="5119245">)</span>&nbsp;<span class="op" id="5119247">*</span><span class="ident" id="5119248">symbol</span>&nbsp;<span class="op" id="5119255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119258">s</span>&nbsp;<span class="op" id="5119260">:=</span>&nbsp;<span class="ident" id="5119263">tab</span><span class="op" id="5119266">.</span><span class="ident" id="5119267">m</span><span class="op" id="5119268">[</span><span class="ident" id="5119269">n</span><span class="op" id="5119270">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119273">if</span>&nbsp;<span class="ident" id="5119276">s</span>&nbsp;<span class="op" id="5119278">==</span>&nbsp;<span class="ident" id="5119281">nil</span>&nbsp;<span class="op" id="5119285">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119289">return</span>&nbsp;<span class="ident" id="5119296">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5119301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119305">return</span>&nbsp;<span class="ident" id="5119312">s</span><span class="op" id="5119313">.</span><span class="ident" id="5119314">clone</span><span class="op" id="5119319">(</span><span class="op" id="5119320">)</span><br>
<span class="lineno"></span><span class="op" id="5119322">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5119325">//&nbsp;Declare&nbsp;adds&nbsp;a&nbsp;symbol&nbsp;into&nbsp;the&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="5119366">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;on&nbsp;successful,&nbsp;and&nbsp;returns&nbsp;the&nbsp;conflict&nbsp;symbol</span><br>
<span class="lineno"></span><span class="comment" id="5119431">//&nbsp;when&nbsp;it&nbsp;is&nbsp;already&nbsp;declared.</span><br>
<span class="lineno"></span><span class="keyword" id="5119463">func</span>&nbsp;<span class="op" id="5119468">(</span><span class="ident" id="5119469">tab</span>&nbsp;<span class="op" id="5119473">*</span><span class="ident" id="5119474">symTabel</span><span class="op" id="5119482">)</span>&nbsp;<span class="ident" id="5119484">Declare</span><span class="op" id="5119491">(</span><span class="ident" id="5119492">s</span>&nbsp;<span class="op" id="5119494">*</span><span class="ident" id="5119495">symbol</span><span class="op" id="5119501">)</span>&nbsp;<span class="op" id="5119503">*</span><span class="ident" id="5119504">symbol</span>&nbsp;<span class="op" id="5119511">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119514">n</span>&nbsp;<span class="op" id="5119516">:=</span>&nbsp;<span class="ident" id="5119519">s</span><span class="op" id="5119520">.</span><span class="ident" id="5119521">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119527">p</span>&nbsp;<span class="op" id="5119529">:=</span>&nbsp;<span class="ident" id="5119532">tab</span><span class="op" id="5119535">.</span><span class="ident" id="5119536">m</span><span class="op" id="5119537">[</span><span class="ident" id="5119538">n</span><span class="op" id="5119539">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119542">if</span>&nbsp;<span class="ident" id="5119545">p</span>&nbsp;<span class="op" id="5119547">!=</span>&nbsp;<span class="ident" id="5119550">nil</span>&nbsp;<span class="op" id="5119554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119558">return</span>&nbsp;<span class="ident" id="5119565">p</span><span class="op" id="5119566">.</span><span class="ident" id="5119567">clone</span><span class="op" id="5119572">(</span><span class="op" id="5119573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5119576">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119580">tab</span><span class="op" id="5119583">.</span><span class="ident" id="5119584">m</span><span class="op" id="5119585">[</span><span class="ident" id="5119586">n</span><span class="op" id="5119587">]</span>&nbsp;<span class="op" id="5119589">=</span>&nbsp;<span class="ident" id="5119591">s</span><span class="op" id="5119592">.</span><span class="ident" id="5119593">clone</span><span class="op" id="5119598">(</span><span class="op" id="5119599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119602">return</span>&nbsp;<span class="ident" id="5119609">nil</span><br>
<span class="lineno"></span><span class="op" id="5119613">}</span>
</div>
</body>
</html>
