<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2497183">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2497238">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2497292">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2497343">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2497419">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2497493">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2497574">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2497645">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2497720">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2497791">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2497850">//</span><br>
<span class="lineno"></span><span class="comment" id="2497853">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2497929">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2498012">//</span><br>
<span class="lineno"></span><span class="comment" id="2498015">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2498083">//</span><br>
<span class="lineno"></span><span class="comment" id="2498086">//&nbsp;&nbsp;&nbsp;&nbsp;file,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2498141">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2498160">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2498179">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2498184">//</span><br>
<span class="lineno"></span><span class="comment" id="2498187">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2498257">//</span><br>
<span class="lineno">25</span><span class="comment" id="2498260">//&nbsp;&nbsp;&nbsp;&nbsp;open&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2498303">//</span><br>
<span class="lineno"></span><span class="comment" id="2498306">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2498374">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2498445">//</span><br>
<span class="lineno">30</span><span class="comment" id="2498448">//&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2498477">//&nbsp;&nbsp;&nbsp;&nbsp;count,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2498510">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2498529">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2498548">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">35</span><span class="comment" id="2498553">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2498611">//</span><br>
<span class="lineno"></span><span class="keyword" id="2498614">package</span>&nbsp;<span class="ident" id="2498622">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2498626">import</span>&nbsp;<span class="op" id="2498633">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2498636">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2498642">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2498652">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2498655">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2498714">func</span>&nbsp;<span class="op" id="2498719">(</span><span class="ident" id="2498720">f</span>&nbsp;<span class="op" id="2498722">*</span><span class="ident" id="2498723">File</span><span class="op" id="2498727">)</span>&nbsp;<span class="ident" id="2498729">Name</span><span class="op" id="2498733">(</span><span class="op" id="2498734">)</span>&nbsp;<span class="builtintype" id="2498736">string</span>&nbsp;<span class="op" id="2498743">{</span>&nbsp;<span class="keyword" id="2498745">return</span>&nbsp;<span class="ident" id="2498752">f</span><span class="op" id="2498753">.</span><span class="ident" id="2498754">name</span>&nbsp;<span class="op" id="2498759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2498762">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2498838">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2498895">var</span>&nbsp;<span class="op" id="2498899">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2498902">Stdin</span>&nbsp;&nbsp;<span class="op" id="2498909">=</span>&nbsp;<span class="ident" id="2498911">NewFile</span><span class="op" id="2498918">(</span><span class="builtintype" id="2498919">uintptr</span><span class="op" id="2498926">(</span><span class="ident" id="2498927">syscall</span><span class="op" id="2498934">.</span><span class="ident" id="2498935">Stdin</span><span class="op" id="2498940">)</span><span class="op" id="2498941">,</span>&nbsp;<span class="string" id="2498943">&#34;/dev/stdin&#34;</span><span class="op" id="2498955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2498958">Stdout</span>&nbsp;<span class="op" id="2498965">=</span>&nbsp;<span class="ident" id="2498967">NewFile</span><span class="op" id="2498974">(</span><span class="builtintype" id="2498975">uintptr</span><span class="op" id="2498982">(</span><span class="ident" id="2498983">syscall</span><span class="op" id="2498990">.</span><span class="ident" id="2498991">Stdout</span><span class="op" id="2498997">)</span><span class="op" id="2498998">,</span>&nbsp;<span class="string" id="2499000">&#34;/dev/stdout&#34;</span><span class="op" id="2499013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499016">Stderr</span>&nbsp;<span class="op" id="2499023">=</span>&nbsp;<span class="ident" id="2499025">NewFile</span><span class="op" id="2499032">(</span><span class="builtintype" id="2499033">uintptr</span><span class="op" id="2499040">(</span><span class="ident" id="2499041">syscall</span><span class="op" id="2499048">.</span><span class="ident" id="2499049">Stderr</span><span class="op" id="2499055">)</span><span class="op" id="2499056">,</span>&nbsp;<span class="string" id="2499058">&#34;/dev/stderr&#34;</span><span class="op" id="2499071">)</span><br>
<span class="lineno"></span><span class="op" id="2499073">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2499076">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2499148">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2499189">const</span>&nbsp;<span class="op" id="2499195">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499198">O_RDONLY</span>&nbsp;<span class="builtintype" id="2499207">int</span>&nbsp;<span class="op" id="2499211">=</span>&nbsp;<span class="ident" id="2499213">syscall</span><span class="op" id="2499220">.</span><span class="ident" id="2499221">O_RDONLY</span>&nbsp;<span class="comment" id="2499230">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499259">O_WRONLY</span>&nbsp;<span class="builtintype" id="2499268">int</span>&nbsp;<span class="op" id="2499272">=</span>&nbsp;<span class="ident" id="2499274">syscall</span><span class="op" id="2499281">.</span><span class="ident" id="2499282">O_WRONLY</span>&nbsp;<span class="comment" id="2499291">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499321">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2499330">int</span>&nbsp;<span class="op" id="2499334">=</span>&nbsp;<span class="ident" id="2499336">syscall</span><span class="op" id="2499343">.</span><span class="ident" id="2499344">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2499353">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499383">O_APPEND</span>&nbsp;<span class="builtintype" id="2499392">int</span>&nbsp;<span class="op" id="2499396">=</span>&nbsp;<span class="ident" id="2499398">syscall</span><span class="op" id="2499405">.</span><span class="ident" id="2499406">O_APPEND</span>&nbsp;<span class="comment" id="2499415">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499457">O_CREATE</span>&nbsp;<span class="builtintype" id="2499466">int</span>&nbsp;<span class="op" id="2499470">=</span>&nbsp;<span class="ident" id="2499472">syscall</span><span class="op" id="2499479">.</span><span class="ident" id="2499480">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2499489">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499527">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2499536">int</span>&nbsp;<span class="op" id="2499540">=</span>&nbsp;<span class="ident" id="2499542">syscall</span><span class="op" id="2499549">.</span><span class="ident" id="2499550">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2499559">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499603">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2499612">int</span>&nbsp;<span class="op" id="2499616">=</span>&nbsp;<span class="ident" id="2499618">syscall</span><span class="op" id="2499625">.</span><span class="ident" id="2499626">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2499635">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499665">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2499674">int</span>&nbsp;<span class="op" id="2499678">=</span>&nbsp;<span class="ident" id="2499680">syscall</span><span class="op" id="2499687">.</span><span class="ident" id="2499688">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2499697">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2499740">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2499743">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2499766">const</span>&nbsp;<span class="op" id="2499772">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499775">SEEK_SET</span>&nbsp;<span class="builtintype" id="2499784">int</span>&nbsp;<span class="op" id="2499788">=</span>&nbsp;<span class="num" id="2499790">0</span>&nbsp;<span class="comment" id="2499792">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499836">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2499845">int</span>&nbsp;<span class="op" id="2499849">=</span>&nbsp;<span class="num" id="2499851">1</span>&nbsp;<span class="comment" id="2499853">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499893">SEEK_END</span>&nbsp;<span class="builtintype" id="2499902">int</span>&nbsp;<span class="op" id="2499906">=</span>&nbsp;<span class="num" id="2499908">2</span>&nbsp;<span class="comment" id="2499910">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2499938">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2499941">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2500006">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2500051">type</span>&nbsp;<span class="ident" id="2500056">LinkError</span>&nbsp;<span class="keyword" id="2500066">struct</span>&nbsp;<span class="op" id="2500073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500076">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2500080">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500088">Old</span>&nbsp;<span class="builtintype" id="2500092">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500100">New</span>&nbsp;<span class="builtintype" id="2500104">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500112">Err</span>&nbsp;<span class="builtintype" id="2500116">error</span><br>
<span class="lineno"></span><span class="op" id="2500122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2500125">func</span>&nbsp;<span class="op" id="2500130">(</span><span class="ident" id="2500131">e</span>&nbsp;<span class="op" id="2500133">*</span><span class="ident" id="2500134">LinkError</span><span class="op" id="2500143">)</span>&nbsp;<span class="ident" id="2500145">Error</span><span class="op" id="2500150">(</span><span class="op" id="2500151">)</span>&nbsp;<span class="builtintype" id="2500153">string</span>&nbsp;<span class="op" id="2500160">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500163">return</span>&nbsp;<span class="ident" id="2500170">e</span><span class="op" id="2500171">.</span><span class="ident" id="2500172">Op</span>&nbsp;<span class="op" id="2500175">+</span>&nbsp;<span class="string" id="2500177">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2500181">+</span>&nbsp;<span class="ident" id="2500183">e</span><span class="op" id="2500184">.</span><span class="ident" id="2500185">Old</span>&nbsp;<span class="op" id="2500189">+</span>&nbsp;<span class="string" id="2500191">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2500195">+</span>&nbsp;<span class="ident" id="2500197">e</span><span class="op" id="2500198">.</span><span class="ident" id="2500199">New</span>&nbsp;<span class="op" id="2500203">+</span>&nbsp;<span class="string" id="2500205">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2500210">+</span>&nbsp;<span class="ident" id="2500212">e</span><span class="op" id="2500213">.</span><span class="ident" id="2500214">Err</span><span class="op" id="2500217">.</span><span class="ident" id="2500218">Error</span><span class="op" id="2500223">(</span><span class="op" id="2500224">)</span><br>
<span class="lineno"></span><span class="op" id="2500226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2500229">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2500277">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2500338">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2500397">func</span>&nbsp;<span class="op" id="2500402">(</span><span class="ident" id="2500403">f</span>&nbsp;<span class="op" id="2500405">*</span><span class="ident" id="2500406">File</span><span class="op" id="2500410">)</span>&nbsp;<span class="ident" id="2500412">Read</span><span class="op" id="2500416">(</span><span class="ident" id="2500417">b</span>&nbsp;<span class="op" id="2500419">[</span><span class="op" id="2500420">]</span><span class="builtintype" id="2500421">byte</span><span class="op" id="2500425">)</span>&nbsp;<span class="op" id="2500427">(</span><span class="ident" id="2500428">n</span>&nbsp;<span class="builtintype" id="2500430">int</span><span class="op" id="2500433">,</span>&nbsp;<span class="ident" id="2500435">err</span>&nbsp;<span class="builtintype" id="2500439">error</span><span class="op" id="2500444">)</span>&nbsp;<span class="op" id="2500446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500449">if</span>&nbsp;<span class="ident" id="2500452">f</span>&nbsp;<span class="op" id="2500454">==</span>&nbsp;<span class="ident" id="2500457">nil</span>&nbsp;<span class="op" id="2500461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500465">return</span>&nbsp;<span class="num" id="2500472">0</span><span class="op" id="2500473">,</span>&nbsp;<span class="ident" id="2500475">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500487">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500490">n</span><span class="op" id="2500491">,</span>&nbsp;<span class="ident" id="2500493">e</span>&nbsp;<span class="op" id="2500495">:=</span>&nbsp;<span class="ident" id="2500498">f</span><span class="op" id="2500499">.</span><span class="ident" id="2500500">read</span><span class="op" id="2500504">(</span><span class="ident" id="2500505">b</span><span class="op" id="2500506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500509">if</span>&nbsp;<span class="ident" id="2500512">n</span>&nbsp;<span class="op" id="2500514">&lt;</span>&nbsp;<span class="num" id="2500516">0</span>&nbsp;<span class="op" id="2500518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500522">n</span>&nbsp;<span class="op" id="2500524">=</span>&nbsp;<span class="num" id="2500526">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500532">if</span>&nbsp;<span class="ident" id="2500535">n</span>&nbsp;<span class="op" id="2500537">==</span>&nbsp;<span class="num" id="2500540">0</span>&nbsp;<span class="op" id="2500542">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2500545">len</span><span class="op" id="2500548">(</span><span class="ident" id="2500549">b</span><span class="op" id="2500550">)</span>&nbsp;<span class="op" id="2500552">&gt;</span>&nbsp;<span class="num" id="2500554">0</span>&nbsp;<span class="op" id="2500556">&amp;&amp;</span>&nbsp;<span class="ident" id="2500559">e</span>&nbsp;<span class="op" id="2500561">==</span>&nbsp;<span class="ident" id="2500564">nil</span>&nbsp;<span class="op" id="2500568">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500572">return</span>&nbsp;<span class="num" id="2500579">0</span><span class="op" id="2500580">,</span>&nbsp;<span class="ident" id="2500582">io</span><span class="op" id="2500584">.</span><span class="ident" id="2500585">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500593">if</span>&nbsp;<span class="ident" id="2500596">e</span>&nbsp;<span class="op" id="2500598">!=</span>&nbsp;<span class="ident" id="2500601">nil</span>&nbsp;<span class="op" id="2500605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500609">err</span>&nbsp;<span class="op" id="2500613">=</span>&nbsp;<span class="op" id="2500615">&amp;</span><span class="ident" id="2500616">PathError</span><span class="op" id="2500625">{</span><span class="string" id="2500626">&#34;read&#34;</span><span class="op" id="2500632">,</span>&nbsp;<span class="ident" id="2500634">f</span><span class="op" id="2500635">.</span><span class="ident" id="2500636">name</span><span class="op" id="2500640">,</span>&nbsp;<span class="ident" id="2500642">e</span><span class="op" id="2500643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500646">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500649">return</span>&nbsp;<span class="ident" id="2500656">n</span><span class="op" id="2500657">,</span>&nbsp;<span class="ident" id="2500659">err</span><br>
<span class="lineno"></span><span class="op" id="2500663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2500666">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2500738">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2500800">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2500858">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2500899">func</span>&nbsp;<span class="op" id="2500904">(</span><span class="ident" id="2500905">f</span>&nbsp;<span class="op" id="2500907">*</span><span class="ident" id="2500908">File</span><span class="op" id="2500912">)</span>&nbsp;<span class="ident" id="2500914">ReadAt</span><span class="op" id="2500920">(</span><span class="ident" id="2500921">b</span>&nbsp;<span class="op" id="2500923">[</span><span class="op" id="2500924">]</span><span class="builtintype" id="2500925">byte</span><span class="op" id="2500929">,</span>&nbsp;<span class="ident" id="2500931">off</span>&nbsp;<span class="ident" id="2500935">int64</span><span class="op" id="2500940">)</span>&nbsp;<span class="op" id="2500942">(</span><span class="ident" id="2500943">n</span>&nbsp;<span class="builtintype" id="2500945">int</span><span class="op" id="2500948">,</span>&nbsp;<span class="ident" id="2500950">err</span>&nbsp;<span class="builtintype" id="2500954">error</span><span class="op" id="2500959">)</span>&nbsp;<span class="op" id="2500961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500964">if</span>&nbsp;<span class="ident" id="2500967">f</span>&nbsp;<span class="op" id="2500969">==</span>&nbsp;<span class="ident" id="2500972">nil</span>&nbsp;<span class="op" id="2500976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500980">return</span>&nbsp;<span class="num" id="2500987">0</span><span class="op" id="2500988">,</span>&nbsp;<span class="ident" id="2500990">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501005">for</span>&nbsp;<span class="builtinfunc" id="2501009">len</span><span class="op" id="2501012">(</span><span class="ident" id="2501013">b</span><span class="op" id="2501014">)</span>&nbsp;<span class="op" id="2501016">&gt;</span>&nbsp;<span class="num" id="2501018">0</span>&nbsp;<span class="op" id="2501020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501024">m</span><span class="op" id="2501025">,</span>&nbsp;<span class="ident" id="2501027">e</span>&nbsp;<span class="op" id="2501029">:=</span>&nbsp;<span class="ident" id="2501032">f</span><span class="op" id="2501033">.</span><span class="ident" id="2501034">pread</span><span class="op" id="2501039">(</span><span class="ident" id="2501040">b</span><span class="op" id="2501041">,</span>&nbsp;<span class="ident" id="2501043">off</span><span class="op" id="2501046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501050">if</span>&nbsp;<span class="ident" id="2501053">m</span>&nbsp;<span class="op" id="2501055">==</span>&nbsp;<span class="num" id="2501058">0</span>&nbsp;<span class="op" id="2501060">&amp;&amp;</span>&nbsp;<span class="ident" id="2501063">e</span>&nbsp;<span class="op" id="2501065">==</span>&nbsp;<span class="ident" id="2501068">nil</span>&nbsp;<span class="op" id="2501072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501077">return</span>&nbsp;<span class="ident" id="2501084">n</span><span class="op" id="2501085">,</span>&nbsp;<span class="ident" id="2501087">io</span><span class="op" id="2501089">.</span><span class="ident" id="2501090">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501100">if</span>&nbsp;<span class="ident" id="2501103">e</span>&nbsp;<span class="op" id="2501105">!=</span>&nbsp;<span class="ident" id="2501108">nil</span>&nbsp;<span class="op" id="2501112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501117">err</span>&nbsp;<span class="op" id="2501121">=</span>&nbsp;<span class="op" id="2501123">&amp;</span><span class="ident" id="2501124">PathError</span><span class="op" id="2501133">{</span><span class="string" id="2501134">&#34;read&#34;</span><span class="op" id="2501140">,</span>&nbsp;<span class="ident" id="2501142">f</span><span class="op" id="2501143">.</span><span class="ident" id="2501144">name</span><span class="op" id="2501148">,</span>&nbsp;<span class="ident" id="2501150">e</span><span class="op" id="2501151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501156">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501164">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501168">n</span>&nbsp;<span class="op" id="2501170">+=</span>&nbsp;<span class="ident" id="2501173">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501177">b</span>&nbsp;<span class="op" id="2501179">=</span>&nbsp;<span class="ident" id="2501181">b</span><span class="op" id="2501182">[</span><span class="ident" id="2501183">m</span><span class="op" id="2501184">:</span><span class="op" id="2501185">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501189">off</span>&nbsp;<span class="op" id="2501193">+=</span>&nbsp;<span class="ident" id="2501196">int64</span><span class="op" id="2501201">(</span><span class="ident" id="2501202">m</span><span class="op" id="2501203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501209">return</span><br>
<span class="lineno">130</span><span class="op" id="2501216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2501219">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2501261">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2501325">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2501376">func</span>&nbsp;<span class="op" id="2501381">(</span><span class="ident" id="2501382">f</span>&nbsp;<span class="op" id="2501384">*</span><span class="ident" id="2501385">File</span><span class="op" id="2501389">)</span>&nbsp;<span class="ident" id="2501391">Write</span><span class="op" id="2501396">(</span><span class="ident" id="2501397">b</span>&nbsp;<span class="op" id="2501399">[</span><span class="op" id="2501400">]</span><span class="builtintype" id="2501401">byte</span><span class="op" id="2501405">)</span>&nbsp;<span class="op" id="2501407">(</span><span class="ident" id="2501408">n</span>&nbsp;<span class="builtintype" id="2501410">int</span><span class="op" id="2501413">,</span>&nbsp;<span class="ident" id="2501415">err</span>&nbsp;<span class="builtintype" id="2501419">error</span><span class="op" id="2501424">)</span>&nbsp;<span class="op" id="2501426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501429">if</span>&nbsp;<span class="ident" id="2501432">f</span>&nbsp;<span class="op" id="2501434">==</span>&nbsp;<span class="ident" id="2501437">nil</span>&nbsp;<span class="op" id="2501441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501445">return</span>&nbsp;<span class="num" id="2501452">0</span><span class="op" id="2501453">,</span>&nbsp;<span class="ident" id="2501455">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501470">n</span><span class="op" id="2501471">,</span>&nbsp;<span class="ident" id="2501473">e</span>&nbsp;<span class="op" id="2501475">:=</span>&nbsp;<span class="ident" id="2501478">f</span><span class="op" id="2501479">.</span><span class="ident" id="2501480">write</span><span class="op" id="2501485">(</span><span class="ident" id="2501486">b</span><span class="op" id="2501487">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501490">if</span>&nbsp;<span class="ident" id="2501493">n</span>&nbsp;<span class="op" id="2501495">&lt;</span>&nbsp;<span class="num" id="2501497">0</span>&nbsp;<span class="op" id="2501499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501503">n</span>&nbsp;<span class="op" id="2501505">=</span>&nbsp;<span class="num" id="2501507">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501513">if</span>&nbsp;<span class="ident" id="2501516">n</span>&nbsp;<span class="op" id="2501518">!=</span>&nbsp;<span class="builtinfunc" id="2501521">len</span><span class="op" id="2501524">(</span><span class="ident" id="2501525">b</span><span class="op" id="2501526">)</span>&nbsp;<span class="op" id="2501528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501532">err</span>&nbsp;<span class="op" id="2501536">=</span>&nbsp;<span class="ident" id="2501538">io</span><span class="op" id="2501540">.</span><span class="ident" id="2501541">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501560">epipecheck</span><span class="op" id="2501570">(</span><span class="ident" id="2501571">f</span><span class="op" id="2501572">,</span>&nbsp;<span class="ident" id="2501574">e</span><span class="op" id="2501575">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501579">if</span>&nbsp;<span class="ident" id="2501582">e</span>&nbsp;<span class="op" id="2501584">!=</span>&nbsp;<span class="ident" id="2501587">nil</span>&nbsp;<span class="op" id="2501591">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501595">err</span>&nbsp;<span class="op" id="2501599">=</span>&nbsp;<span class="op" id="2501601">&amp;</span><span class="ident" id="2501602">PathError</span><span class="op" id="2501611">{</span><span class="string" id="2501612">&#34;write&#34;</span><span class="op" id="2501619">,</span>&nbsp;<span class="ident" id="2501621">f</span><span class="op" id="2501622">.</span><span class="ident" id="2501623">name</span><span class="op" id="2501627">,</span>&nbsp;<span class="ident" id="2501629">e</span><span class="op" id="2501630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501636">return</span>&nbsp;<span class="ident" id="2501643">n</span><span class="op" id="2501644">,</span>&nbsp;<span class="ident" id="2501646">err</span><br>
<span class="lineno"></span><span class="op" id="2501650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2501653">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2501725">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2501789">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2501842">func</span>&nbsp;<span class="op" id="2501847">(</span><span class="ident" id="2501848">f</span>&nbsp;<span class="op" id="2501850">*</span><span class="ident" id="2501851">File</span><span class="op" id="2501855">)</span>&nbsp;<span class="ident" id="2501857">WriteAt</span><span class="op" id="2501864">(</span><span class="ident" id="2501865">b</span>&nbsp;<span class="op" id="2501867">[</span><span class="op" id="2501868">]</span><span class="builtintype" id="2501869">byte</span><span class="op" id="2501873">,</span>&nbsp;<span class="ident" id="2501875">off</span>&nbsp;<span class="ident" id="2501879">int64</span><span class="op" id="2501884">)</span>&nbsp;<span class="op" id="2501886">(</span><span class="ident" id="2501887">n</span>&nbsp;<span class="builtintype" id="2501889">int</span><span class="op" id="2501892">,</span>&nbsp;<span class="ident" id="2501894">err</span>&nbsp;<span class="builtintype" id="2501898">error</span><span class="op" id="2501903">)</span>&nbsp;<span class="op" id="2501905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501908">if</span>&nbsp;<span class="ident" id="2501911">f</span>&nbsp;<span class="op" id="2501913">==</span>&nbsp;<span class="ident" id="2501916">nil</span>&nbsp;<span class="op" id="2501920">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501924">return</span>&nbsp;<span class="num" id="2501931">0</span><span class="op" id="2501932">,</span>&nbsp;<span class="ident" id="2501934">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501949">for</span>&nbsp;<span class="builtinfunc" id="2501953">len</span><span class="op" id="2501956">(</span><span class="ident" id="2501957">b</span><span class="op" id="2501958">)</span>&nbsp;<span class="op" id="2501960">&gt;</span>&nbsp;<span class="num" id="2501962">0</span>&nbsp;<span class="op" id="2501964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501968">m</span><span class="op" id="2501969">,</span>&nbsp;<span class="ident" id="2501971">e</span>&nbsp;<span class="op" id="2501973">:=</span>&nbsp;<span class="ident" id="2501976">f</span><span class="op" id="2501977">.</span><span class="ident" id="2501978">pwrite</span><span class="op" id="2501984">(</span><span class="ident" id="2501985">b</span><span class="op" id="2501986">,</span>&nbsp;<span class="ident" id="2501988">off</span><span class="op" id="2501991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501995">if</span>&nbsp;<span class="ident" id="2501998">e</span>&nbsp;<span class="op" id="2502000">!=</span>&nbsp;<span class="ident" id="2502003">nil</span>&nbsp;<span class="op" id="2502007">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502012">err</span>&nbsp;<span class="op" id="2502016">=</span>&nbsp;<span class="op" id="2502018">&amp;</span><span class="ident" id="2502019">PathError</span><span class="op" id="2502028">{</span><span class="string" id="2502029">&#34;write&#34;</span><span class="op" id="2502036">,</span>&nbsp;<span class="ident" id="2502038">f</span><span class="op" id="2502039">.</span><span class="ident" id="2502040">name</span><span class="op" id="2502044">,</span>&nbsp;<span class="ident" id="2502046">e</span><span class="op" id="2502047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502052">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502064">n</span>&nbsp;<span class="op" id="2502066">+=</span>&nbsp;<span class="ident" id="2502069">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502073">b</span>&nbsp;<span class="op" id="2502075">=</span>&nbsp;<span class="ident" id="2502077">b</span><span class="op" id="2502078">[</span><span class="ident" id="2502079">m</span><span class="op" id="2502080">:</span><span class="op" id="2502081">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502085">off</span>&nbsp;<span class="op" id="2502089">+=</span>&nbsp;<span class="ident" id="2502092">int64</span><span class="op" id="2502097">(</span><span class="ident" id="2502098">m</span><span class="op" id="2502099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502105">return</span><br>
<span class="lineno"></span><span class="op" id="2502112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2502115">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2502197">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2502273">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2502341">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2502392">func</span>&nbsp;<span class="op" id="2502397">(</span><span class="ident" id="2502398">f</span>&nbsp;<span class="op" id="2502400">*</span><span class="ident" id="2502401">File</span><span class="op" id="2502405">)</span>&nbsp;<span class="ident" id="2502407">Seek</span><span class="op" id="2502411">(</span><span class="ident" id="2502412">offset</span>&nbsp;<span class="ident" id="2502419">int64</span><span class="op" id="2502424">,</span>&nbsp;<span class="ident" id="2502426">whence</span>&nbsp;<span class="builtintype" id="2502433">int</span><span class="op" id="2502436">)</span>&nbsp;<span class="op" id="2502438">(</span><span class="ident" id="2502439">ret</span>&nbsp;<span class="ident" id="2502443">int64</span><span class="op" id="2502448">,</span>&nbsp;<span class="ident" id="2502450">err</span>&nbsp;<span class="builtintype" id="2502454">error</span><span class="op" id="2502459">)</span>&nbsp;<span class="op" id="2502461">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502464">if</span>&nbsp;<span class="ident" id="2502467">f</span>&nbsp;<span class="op" id="2502469">==</span>&nbsp;<span class="ident" id="2502472">nil</span>&nbsp;<span class="op" id="2502476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502480">return</span>&nbsp;<span class="num" id="2502487">0</span><span class="op" id="2502488">,</span>&nbsp;<span class="ident" id="2502490">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502505">r</span><span class="op" id="2502506">,</span>&nbsp;<span class="ident" id="2502508">e</span>&nbsp;<span class="op" id="2502510">:=</span>&nbsp;<span class="ident" id="2502513">f</span><span class="op" id="2502514">.</span><span class="ident" id="2502515">seek</span><span class="op" id="2502519">(</span><span class="ident" id="2502520">offset</span><span class="op" id="2502526">,</span>&nbsp;<span class="ident" id="2502528">whence</span><span class="op" id="2502534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502537">if</span>&nbsp;<span class="ident" id="2502540">e</span>&nbsp;<span class="op" id="2502542">==</span>&nbsp;<span class="ident" id="2502545">nil</span>&nbsp;<span class="op" id="2502549">&amp;&amp;</span>&nbsp;<span class="ident" id="2502552">f</span><span class="op" id="2502553">.</span><span class="ident" id="2502554">dirinfo</span>&nbsp;<span class="op" id="2502562">!=</span>&nbsp;<span class="ident" id="2502565">nil</span>&nbsp;<span class="op" id="2502569">&amp;&amp;</span>&nbsp;<span class="ident" id="2502572">r</span>&nbsp;<span class="op" id="2502574">!=</span>&nbsp;<span class="num" id="2502577">0</span>&nbsp;<span class="op" id="2502579">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502583">e</span>&nbsp;<span class="op" id="2502585">=</span>&nbsp;<span class="ident" id="2502587">syscall</span><span class="op" id="2502594">.</span><span class="ident" id="2502595">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502606">if</span>&nbsp;<span class="ident" id="2502609">e</span>&nbsp;<span class="op" id="2502611">!=</span>&nbsp;<span class="ident" id="2502614">nil</span>&nbsp;<span class="op" id="2502618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502622">return</span>&nbsp;<span class="num" id="2502629">0</span><span class="op" id="2502630">,</span>&nbsp;<span class="op" id="2502632">&amp;</span><span class="ident" id="2502633">PathError</span><span class="op" id="2502642">{</span><span class="string" id="2502643">&#34;seek&#34;</span><span class="op" id="2502649">,</span>&nbsp;<span class="ident" id="2502651">f</span><span class="op" id="2502652">.</span><span class="ident" id="2502653">name</span><span class="op" id="2502657">,</span>&nbsp;<span class="ident" id="2502659">e</span><span class="op" id="2502660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502663">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502666">return</span>&nbsp;<span class="ident" id="2502673">r</span><span class="op" id="2502674">,</span>&nbsp;<span class="ident" id="2502676">nil</span><br>
<span class="lineno"></span><span class="op" id="2502680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2502683">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2502761">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2502782">func</span>&nbsp;<span class="op" id="2502787">(</span><span class="ident" id="2502788">f</span>&nbsp;<span class="op" id="2502790">*</span><span class="ident" id="2502791">File</span><span class="op" id="2502795">)</span>&nbsp;<span class="ident" id="2502797">WriteString</span><span class="op" id="2502808">(</span><span class="ident" id="2502809">s</span>&nbsp;<span class="builtintype" id="2502811">string</span><span class="op" id="2502817">)</span>&nbsp;<span class="op" id="2502819">(</span><span class="ident" id="2502820">ret</span>&nbsp;<span class="builtintype" id="2502824">int</span><span class="op" id="2502827">,</span>&nbsp;<span class="ident" id="2502829">err</span>&nbsp;<span class="builtintype" id="2502833">error</span><span class="op" id="2502838">)</span>&nbsp;<span class="op" id="2502840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502843">if</span>&nbsp;<span class="ident" id="2502846">f</span>&nbsp;<span class="op" id="2502848">==</span>&nbsp;<span class="ident" id="2502851">nil</span>&nbsp;<span class="op" id="2502855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502859">return</span>&nbsp;<span class="num" id="2502866">0</span><span class="op" id="2502867">,</span>&nbsp;<span class="ident" id="2502869">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502884">return</span>&nbsp;<span class="ident" id="2502891">f</span><span class="op" id="2502892">.</span><span class="ident" id="2502893">Write</span><span class="op" id="2502898">(</span><span class="op" id="2502899">[</span><span class="op" id="2502900">]</span><span class="builtintype" id="2502901">byte</span><span class="op" id="2502905">(</span><span class="ident" id="2502906">s</span><span class="op" id="2502907">)</span><span class="op" id="2502908">)</span><br>
<span class="lineno">200</span><span class="op" id="2502910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2502913">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2502991">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2503047">func</span>&nbsp;<span class="ident" id="2503052">Mkdir</span><span class="op" id="2503057">(</span><span class="ident" id="2503058">name</span>&nbsp;<span class="builtintype" id="2503063">string</span><span class="op" id="2503069">,</span>&nbsp;<span class="ident" id="2503071">perm</span>&nbsp;<span class="ident" id="2503076">FileMode</span><span class="op" id="2503084">)</span>&nbsp;<span class="builtintype" id="2503086">error</span>&nbsp;<span class="op" id="2503092">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2503095">e</span>&nbsp;<span class="op" id="2503097">:=</span>&nbsp;<span class="ident" id="2503100">syscall</span><span class="op" id="2503107">.</span><span class="ident" id="2503108">Mkdir</span><span class="op" id="2503113">(</span><span class="ident" id="2503114">name</span><span class="op" id="2503118">,</span>&nbsp;<span class="ident" id="2503120">syscallMode</span><span class="op" id="2503131">(</span><span class="ident" id="2503132">perm</span><span class="op" id="2503136">)</span><span class="op" id="2503137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503140">if</span>&nbsp;<span class="ident" id="2503143">e</span>&nbsp;<span class="op" id="2503145">!=</span>&nbsp;<span class="ident" id="2503148">nil</span>&nbsp;<span class="op" id="2503152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503156">return</span>&nbsp;<span class="op" id="2503163">&amp;</span><span class="ident" id="2503164">PathError</span><span class="op" id="2503173">{</span><span class="string" id="2503174">&#34;mkdir&#34;</span><span class="op" id="2503181">,</span>&nbsp;<span class="ident" id="2503183">name</span><span class="op" id="2503187">,</span>&nbsp;<span class="ident" id="2503189">e</span><span class="op" id="2503190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2503193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503196">return</span>&nbsp;<span class="ident" id="2503203">nil</span><br>
<span class="lineno">210</span><span class="op" id="2503207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2503210">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2503281">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2503337">func</span>&nbsp;<span class="ident" id="2503342">Chdir</span><span class="op" id="2503347">(</span><span class="ident" id="2503348">dir</span>&nbsp;<span class="builtintype" id="2503352">string</span><span class="op" id="2503358">)</span>&nbsp;<span class="builtintype" id="2503360">error</span>&nbsp;<span class="op" id="2503366">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503369">if</span>&nbsp;<span class="ident" id="2503372">e</span>&nbsp;<span class="op" id="2503374">:=</span>&nbsp;<span class="ident" id="2503377">syscall</span><span class="op" id="2503384">.</span><span class="ident" id="2503385">Chdir</span><span class="op" id="2503390">(</span><span class="ident" id="2503391">dir</span><span class="op" id="2503394">)</span><span class="op" id="2503395">;</span>&nbsp;<span class="ident" id="2503397">e</span>&nbsp;<span class="op" id="2503399">!=</span>&nbsp;<span class="ident" id="2503402">nil</span>&nbsp;<span class="op" id="2503406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503410">return</span>&nbsp;<span class="op" id="2503417">&amp;</span><span class="ident" id="2503418">PathError</span><span class="op" id="2503427">{</span><span class="string" id="2503428">&#34;chdir&#34;</span><span class="op" id="2503435">,</span>&nbsp;<span class="ident" id="2503437">dir</span><span class="op" id="2503440">,</span>&nbsp;<span class="ident" id="2503442">e</span><span class="op" id="2503443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2503446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503449">return</span>&nbsp;<span class="ident" id="2503456">nil</span><br>
<span class="lineno"></span><span class="op" id="2503460">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2503463">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2503523">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2503553">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2503609">func</span>&nbsp;<span class="op" id="2503614">(</span><span class="ident" id="2503615">f</span>&nbsp;<span class="op" id="2503617">*</span><span class="ident" id="2503618">File</span><span class="op" id="2503622">)</span>&nbsp;<span class="ident" id="2503624">Chdir</span><span class="op" id="2503629">(</span><span class="op" id="2503630">)</span>&nbsp;<span class="builtintype" id="2503632">error</span>&nbsp;<span class="op" id="2503638">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503641">if</span>&nbsp;<span class="ident" id="2503644">f</span>&nbsp;<span class="op" id="2503646">==</span>&nbsp;<span class="ident" id="2503649">nil</span>&nbsp;<span class="op" id="2503653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503657">return</span>&nbsp;<span class="ident" id="2503664">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2503676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503679">if</span>&nbsp;<span class="ident" id="2503682">e</span>&nbsp;<span class="op" id="2503684">:=</span>&nbsp;<span class="ident" id="2503687">syscall</span><span class="op" id="2503694">.</span><span class="ident" id="2503695">Fchdir</span><span class="op" id="2503701">(</span><span class="ident" id="2503702">f</span><span class="op" id="2503703">.</span><span class="ident" id="2503704">fd</span><span class="op" id="2503706">)</span><span class="op" id="2503707">;</span>&nbsp;<span class="ident" id="2503709">e</span>&nbsp;<span class="op" id="2503711">!=</span>&nbsp;<span class="ident" id="2503714">nil</span>&nbsp;<span class="op" id="2503718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503722">return</span>&nbsp;<span class="op" id="2503729">&amp;</span><span class="ident" id="2503730">PathError</span><span class="op" id="2503739">{</span><span class="string" id="2503740">&#34;chdir&#34;</span><span class="op" id="2503747">,</span>&nbsp;<span class="ident" id="2503749">f</span><span class="op" id="2503750">.</span><span class="ident" id="2503751">name</span><span class="op" id="2503755">,</span>&nbsp;<span class="ident" id="2503757">e</span><span class="op" id="2503758">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2503761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2503764">return</span>&nbsp;<span class="ident" id="2503771">nil</span><br>
<span class="lineno"></span><span class="op" id="2503775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2503778">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2503847">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2503913">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2503946">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2504002">func</span>&nbsp;<span class="ident" id="2504007">Open</span><span class="op" id="2504011">(</span><span class="ident" id="2504012">name</span>&nbsp;<span class="builtintype" id="2504017">string</span><span class="op" id="2504023">)</span>&nbsp;<span class="op" id="2504025">(</span><span class="ident" id="2504026">file</span>&nbsp;<span class="op" id="2504031">*</span><span class="ident" id="2504032">File</span><span class="op" id="2504036">,</span>&nbsp;<span class="ident" id="2504038">err</span>&nbsp;<span class="builtintype" id="2504042">error</span><span class="op" id="2504047">)</span>&nbsp;<span class="op" id="2504049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2504052">return</span>&nbsp;<span class="ident" id="2504059">OpenFile</span><span class="op" id="2504067">(</span><span class="ident" id="2504068">name</span><span class="op" id="2504072">,</span>&nbsp;<span class="ident" id="2504074">O_RDONLY</span><span class="op" id="2504082">,</span>&nbsp;<span class="num" id="2504084">0</span><span class="op" id="2504085">)</span><br>
<span class="lineno">240</span><span class="op" id="2504087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2504090">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2504160">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2504228">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2504297">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2504308">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2504364">func</span>&nbsp;<span class="ident" id="2504369">Create</span><span class="op" id="2504375">(</span><span class="ident" id="2504376">name</span>&nbsp;<span class="builtintype" id="2504381">string</span><span class="op" id="2504387">)</span>&nbsp;<span class="op" id="2504389">(</span><span class="ident" id="2504390">file</span>&nbsp;<span class="op" id="2504395">*</span><span class="ident" id="2504396">File</span><span class="op" id="2504400">,</span>&nbsp;<span class="ident" id="2504402">err</span>&nbsp;<span class="builtintype" id="2504406">error</span><span class="op" id="2504411">)</span>&nbsp;<span class="op" id="2504413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2504416">return</span>&nbsp;<span class="ident" id="2504423">OpenFile</span><span class="op" id="2504431">(</span><span class="ident" id="2504432">name</span><span class="op" id="2504436">,</span>&nbsp;<span class="ident" id="2504438">O_RDWR</span><span class="op" id="2504444">|</span><span class="ident" id="2504445">O_CREATE</span><span class="op" id="2504453">|</span><span class="ident" id="2504454">O_TRUNC</span><span class="op" id="2504461">,</span>&nbsp;<span class="num" id="2504463">0666</span><span class="op" id="2504467">)</span><br>
<span class="lineno"></span><span class="op" id="2504469">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2504472">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2504505">var</span>&nbsp;<span class="ident" id="2504509">lstat</span>&nbsp;<span class="op" id="2504515">=</span>&nbsp;<span class="ident" id="2504517">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2504524">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2504596">func</span>&nbsp;<span class="ident" id="2504601">Rename</span><span class="op" id="2504607">(</span><span class="ident" id="2504608">oldpath</span><span class="op" id="2504615">,</span>&nbsp;<span class="ident" id="2504617">newpath</span>&nbsp;<span class="builtintype" id="2504625">string</span><span class="op" id="2504631">)</span>&nbsp;<span class="builtintype" id="2504633">error</span>&nbsp;<span class="op" id="2504639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2504642">return</span>&nbsp;<span class="ident" id="2504649">rename</span><span class="op" id="2504655">(</span><span class="ident" id="2504656">oldpath</span><span class="op" id="2504663">,</span>&nbsp;<span class="ident" id="2504665">newpath</span><span class="op" id="2504672">)</span><br>
<span class="lineno"></span><span class="op" id="2504674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2504677">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2504749">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2504813">func</span>&nbsp;<span class="ident" id="2504818">fixCount</span><span class="op" id="2504826">(</span><span class="ident" id="2504827">n</span>&nbsp;<span class="builtintype" id="2504829">int</span><span class="op" id="2504832">,</span>&nbsp;<span class="ident" id="2504834">err</span>&nbsp;<span class="builtintype" id="2504838">error</span><span class="op" id="2504843">)</span>&nbsp;<span class="op" id="2504845">(</span><span class="builtintype" id="2504846">int</span><span class="op" id="2504849">,</span>&nbsp;<span class="builtintype" id="2504851">error</span><span class="op" id="2504856">)</span>&nbsp;<span class="op" id="2504858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2504861">if</span>&nbsp;<span class="ident" id="2504864">n</span>&nbsp;<span class="op" id="2504866">&lt;</span>&nbsp;<span class="num" id="2504868">0</span>&nbsp;<span class="op" id="2504870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2504874">n</span>&nbsp;<span class="op" id="2504876">=</span>&nbsp;<span class="num" id="2504878">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2504881">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2504884">return</span>&nbsp;<span class="ident" id="2504891">n</span><span class="op" id="2504892">,</span>&nbsp;<span class="ident" id="2504894">err</span><br>
<span class="lineno"></span><span class="op" id="2504898">}</span>
</div>
</body>
</html>
