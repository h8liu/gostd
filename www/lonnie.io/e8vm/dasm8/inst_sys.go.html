<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="4962740">package</span>&nbsp;<span class="ident" id="4962748">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4962755">import</span>&nbsp;<span class="op" id="4962762">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4962765">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><span class="op" id="4962771">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4962774">var</span>&nbsp;<span class="op" id="4962778">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962781">opSysMap</span>&nbsp;<span class="op" id="4962790">=</span>&nbsp;<span class="keyword" id="4962792">map</span><span class="op" id="4962795">[</span><span class="builtintype" id="4962796">uint32</span><span class="op" id="4962802">]</span><span class="builtintype" id="4962803">string</span><span class="op" id="4962809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4962813">64</span><span class="op" id="4962815">:</span>&nbsp;<span class="string" id="4962817">&#34;halt&#34;</span><span class="op" id="4962823">,</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4962827">65</span><span class="op" id="4962829">:</span>&nbsp;<span class="string" id="4962831">&#34;syscall&#34;</span><span class="op" id="4962840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4962844">66</span><span class="op" id="4962846">:</span>&nbsp;<span class="string" id="4962848">&#34;usermod&#34;</span><span class="op" id="4962857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4962861">68</span><span class="op" id="4962863">:</span>&nbsp;<span class="string" id="4962865">&#34;iret&#34;</span><span class="op" id="4962871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962878">opSys1Map</span>&nbsp;<span class="op" id="4962888">=</span>&nbsp;<span class="keyword" id="4962890">map</span><span class="op" id="4962893">[</span><span class="builtintype" id="4962894">uint32</span><span class="op" id="4962900">]</span><span class="builtintype" id="4962901">string</span><span class="op" id="4962907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4962911">67</span><span class="op" id="4962913">:</span>&nbsp;<span class="string" id="4962915">&#34;vtable&#34;</span><span class="op" id="4962923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4962927">69</span><span class="op" id="4962929">:</span>&nbsp;<span class="string" id="4962931">&#34;cpuid&#34;</span><span class="op" id="4962938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962941">}</span><br>
<span class="lineno"></span><span class="op" id="4962943">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4962946">func</span>&nbsp;<span class="ident" id="4962951">instSys</span><span class="op" id="4962958">(</span><span class="ident" id="4962959">addr</span>&nbsp;<span class="builtintype" id="4962964">uint32</span><span class="op" id="4962970">,</span>&nbsp;<span class="ident" id="4962972">in</span>&nbsp;<span class="builtintype" id="4962975">uint32</span><span class="op" id="4962981">)</span>&nbsp;<span class="op" id="4962983">*</span><span class="ident" id="4962984">Line</span>&nbsp;<span class="op" id="4962989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962992">op</span>&nbsp;<span class="op" id="4962995">:=</span>&nbsp;<span class="op" id="4962998">(</span><span class="ident" id="4962999">in</span>&nbsp;<span class="op" id="4963002">&gt;&gt;</span>&nbsp;<span class="num" id="4963005">24</span><span class="op" id="4963007">)</span>&nbsp;<span class="op" id="4963009">&amp;</span>&nbsp;<span class="num" id="4963011">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963017">src</span>&nbsp;<span class="op" id="4963021">:=</span>&nbsp;<span class="ident" id="4963024">regStr</span><span class="op" id="4963030">(</span><span class="op" id="4963031">(</span><span class="ident" id="4963032">in</span>&nbsp;<span class="op" id="4963035">&gt;&gt;</span>&nbsp;<span class="num" id="4963038">21</span><span class="op" id="4963040">)</span>&nbsp;<span class="op" id="4963042">&amp;</span>&nbsp;<span class="num" id="4963044">0x7</span><span class="op" id="4963047">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963051">var</span>&nbsp;<span class="ident" id="4963055">s</span>&nbsp;<span class="builtintype" id="4963057">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963065">if</span>&nbsp;<span class="ident" id="4963068">opStr</span><span class="op" id="4963073">,</span>&nbsp;<span class="ident" id="4963075">found</span>&nbsp;<span class="op" id="4963081">:=</span>&nbsp;<span class="ident" id="4963084">opSysMap</span><span class="op" id="4963092">[</span><span class="ident" id="4963093">op</span><span class="op" id="4963095">]</span><span class="op" id="4963096">;</span>&nbsp;<span class="ident" id="4963098">found</span>&nbsp;<span class="op" id="4963104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963108">s</span>&nbsp;<span class="op" id="4963110">=</span>&nbsp;<span class="ident" id="4963112">opStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963119">}</span>&nbsp;<span class="keyword" id="4963121">else</span>&nbsp;<span class="keyword" id="4963126">if</span>&nbsp;<span class="ident" id="4963129">opStr</span><span class="op" id="4963134">,</span>&nbsp;<span class="ident" id="4963136">found</span>&nbsp;<span class="op" id="4963142">:=</span>&nbsp;<span class="ident" id="4963145">opSys1Map</span><span class="op" id="4963154">[</span><span class="ident" id="4963155">op</span><span class="op" id="4963157">]</span><span class="op" id="4963158">;</span>&nbsp;<span class="ident" id="4963160">found</span>&nbsp;<span class="op" id="4963166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963170">s</span>&nbsp;<span class="op" id="4963172">=</span>&nbsp;<span class="ident" id="4963174">fmt</span><span class="op" id="4963177">.</span><span class="ident" id="4963178">Sprintf</span><span class="op" id="4963185">(</span><span class="string" id="4963186">&#34;%s&nbsp;%s&#34;</span><span class="op" id="4963193">,</span>&nbsp;<span class="ident" id="4963195">opStr</span><span class="op" id="4963200">,</span>&nbsp;<span class="ident" id="4963202">src</span><span class="op" id="4963205">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963212">ret</span>&nbsp;<span class="op" id="4963216">:=</span>&nbsp;<span class="ident" id="4963219">newLine</span><span class="op" id="4963226">(</span><span class="ident" id="4963227">addr</span><span class="op" id="4963231">,</span>&nbsp;<span class="ident" id="4963233">in</span><span class="op" id="4963235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963238">ret</span><span class="op" id="4963241">.</span><span class="ident" id="4963242">Str</span>&nbsp;<span class="op" id="4963246">=</span>&nbsp;<span class="ident" id="4963248">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963251">return</span>&nbsp;<span class="ident" id="4963258">ret</span><br>
<span class="lineno">35</span><span class="op" id="4963262">}</span>
</div>
</body>
</html>
