<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4302455">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4302510">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4302564">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4302615">package</span>&nbsp;<span class="ident" id="4302623">gzip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4302629">import</span>&nbsp;<span class="op" id="4302636">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4302639">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4302657">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4302667">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4302674">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4302682">&#34;hash/crc32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4302696">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4302701">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4302704">//&nbsp;These&nbsp;constants&nbsp;are&nbsp;copied&nbsp;from&nbsp;the&nbsp;flate&nbsp;package,&nbsp;so&nbsp;that&nbsp;code&nbsp;that&nbsp;imports</span><br>
<span class="lineno"></span><span class="comment" id="4302784">//&nbsp;&#34;compress/gzip&#34;&nbsp;does&nbsp;not&nbsp;also&nbsp;have&nbsp;to&nbsp;import&nbsp;&#34;compress/flate&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4302850">const</span>&nbsp;<span class="op" id="4302856">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4302859">NoCompression</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302878">=</span>&nbsp;<span class="ident" id="4302880"><a href="/compress/gzip/gzip.go.html#4302639">flate</a></span><span class="op" id="4302885">.</span><span class="ident" id="4302886">NoCompression</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4302901">BestSpeed</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302920">=</span>&nbsp;<span class="ident" id="4302922"><a href="/compress/gzip/gzip.go.html#4302639">flate</a></span><span class="op" id="4302927">.</span><span class="ident" id="4302928">BestSpeed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4302939">BestCompression</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302958">=</span>&nbsp;<span class="ident" id="4302960"><a href="/compress/gzip/gzip.go.html#4302639">flate</a></span><span class="op" id="4302965">.</span><span class="ident" id="4302966">BestCompression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4302983">DefaultCompression</span>&nbsp;<span class="op" id="4303002">=</span>&nbsp;<span class="ident" id="4303004"><a href="/compress/gzip/gzip.go.html#4302639">flate</a></span><span class="op" id="4303009">.</span><span class="ident" id="4303010">DefaultCompression</span><br>
<span class="lineno"></span><span class="op" id="4303029">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="4303032">//&nbsp;A&nbsp;Writer&nbsp;is&nbsp;an&nbsp;io.WriteCloser.</span><br>
<span class="lineno"></span><span class="comment" id="4303066">//&nbsp;Writes&nbsp;to&nbsp;a&nbsp;Writer&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="4303121">type</span>&nbsp;<span class="ident" id="4303126">Writer</span>&nbsp;<span class="keyword" id="4303133">struct</span>&nbsp;<span class="op" id="4303140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303143"><a href="/compress/gzip/gunzip.go.html#4296322">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303151">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4303163"><a href="/compress/gzip/gzip.go.html#4302696">io</a></span><span class="op" id="4303165">.</span><span class="ident" id="4303166">Writer</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303174">level</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4303186">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303191">wroteHeader</span>&nbsp;<span class="builtintype" id="4303203">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303209">compressor</span>&nbsp;&nbsp;<span class="op" id="4303221">*</span><span class="ident" id="4303222"><a href="/compress/gzip/gzip.go.html#4302639">flate</a></span><span class="op" id="4303227">.</span><span class="ident" id="4303228">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303236">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4303248"><a href="/compress/gzip/gzip.go.html#4302674">hash</a></span><span class="op" id="4303252">.</span><span class="ident" id="4303253">Hash32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303261">size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4303273">uint32</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303281">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4303293">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303299">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4303311">[</span><span class="num" id="4303312">10</span><span class="op" id="4303314">]</span><span class="builtintype" id="4303315">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303321">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4303333">error</span><br>
<span class="lineno"></span><span class="op" id="4303339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="4303342">//&nbsp;NewWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="comment" id="4303377">//&nbsp;Writes&nbsp;to&nbsp;the&nbsp;returned&nbsp;writer&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="comment" id="4303443">//</span><br>
<span class="lineno"></span><span class="comment" id="4303446">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;WriteCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="4303527">//&nbsp;Writes&nbsp;may&nbsp;be&nbsp;buffered&nbsp;and&nbsp;not&nbsp;flushed&nbsp;until&nbsp;Close.</span><br>
<span class="lineno">45</span><span class="comment" id="4303582">//</span><br>
<span class="lineno"></span><span class="comment" id="4303585">//&nbsp;Callers&nbsp;that&nbsp;wish&nbsp;to&nbsp;set&nbsp;the&nbsp;fields&nbsp;in&nbsp;Writer.Header&nbsp;must&nbsp;do&nbsp;so&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="4303659">//&nbsp;the&nbsp;first&nbsp;call&nbsp;to&nbsp;Write&nbsp;or&nbsp;Close.&nbsp;The&nbsp;Comment&nbsp;and&nbsp;Name&nbsp;header&nbsp;fields&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="4303735">//&nbsp;UTF-8&nbsp;strings&nbsp;in&nbsp;Go,&nbsp;but&nbsp;the&nbsp;underlying&nbsp;format&nbsp;requires&nbsp;NUL-terminated&nbsp;ISO</span><br>
<span class="lineno"></span><span class="comment" id="4303813">//&nbsp;8859-1&nbsp;(Latin-1).&nbsp;NUL&nbsp;or&nbsp;non-Latin-1&nbsp;runes&nbsp;in&nbsp;those&nbsp;strings&nbsp;will&nbsp;lead&nbsp;to&nbsp;an</span><br>
<span class="lineno">50</span><span class="comment" id="4303892">//&nbsp;error&nbsp;on&nbsp;Write.</span><br>
<span class="lineno"></span><span class="keyword" id="4303911">func</span>&nbsp;<span class="ident" id="4303916">NewWriter</span><span class="op" id="4303925">(</span><span class="ident" id="4303926">w</span>&nbsp;<span class="ident" id="4303928"><a href="/compress/gzip/gzip.go.html#4302696">io</a></span><span class="op" id="4303930">.</span><span class="ident" id="4303931">Writer</span><span class="op" id="4303937">)</span>&nbsp;<span class="op" id="4303939">*</span><span class="ident" id="4303940"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span>&nbsp;<span class="op" id="4303947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4303950">z</span><span class="op" id="4303951">,</span>&nbsp;<span class="ident" id="4303953">_</span>&nbsp;<span class="op" id="4303955">:=</span>&nbsp;<span class="ident" id="4303958"><a href="/compress/gzip/gzip.go.html#4304329">NewWriterLevel</a></span><span class="op" id="4303972">(</span><span class="ident" id="4303973"><a href="/compress/gzip/gzip.go.html#4303926">w</a></span><span class="op" id="4303974">,</span>&nbsp;<span class="ident" id="4303976"><a href="/compress/gzip/gzip.go.html#4302983">DefaultCompression</a></span><span class="op" id="4303994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4303997">return</span>&nbsp;<span class="ident" id="4304004"><a href="/compress/gzip/gzip.go.html#4303950">z</a></span><br>
<span class="lineno"></span><span class="op" id="4304006">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="4304009">//&nbsp;NewWriterLevel&nbsp;is&nbsp;like&nbsp;NewWriter&nbsp;but&nbsp;specifies&nbsp;the&nbsp;compression&nbsp;level&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="4304089">//&nbsp;of&nbsp;assuming&nbsp;DefaultCompression.</span><br>
<span class="lineno"></span><span class="comment" id="4304124">//</span><br>
<span class="lineno"></span><span class="comment" id="4304127">//&nbsp;The&nbsp;compression&nbsp;level&nbsp;can&nbsp;be&nbsp;DefaultCompression,&nbsp;NoCompression,&nbsp;or&nbsp;any</span><br>
<span class="lineno">60</span><span class="comment" id="4304201">//&nbsp;integer&nbsp;value&nbsp;between&nbsp;BestSpeed&nbsp;and&nbsp;BestCompression&nbsp;inclusive.&nbsp;The&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="4304277">//&nbsp;returned&nbsp;will&nbsp;be&nbsp;nil&nbsp;if&nbsp;the&nbsp;level&nbsp;is&nbsp;valid.</span><br>
<span class="lineno"></span><span class="keyword" id="4304324">func</span>&nbsp;<span class="ident" id="4304329">NewWriterLevel</span><span class="op" id="4304343">(</span><span class="ident" id="4304344">w</span>&nbsp;<span class="ident" id="4304346"><a href="/compress/gzip/gzip.go.html#4302696">io</a></span><span class="op" id="4304348">.</span><span class="ident" id="4304349">Writer</span><span class="op" id="4304355">,</span>&nbsp;<span class="ident" id="4304357">level</span>&nbsp;<span class="builtintype" id="4304363">int</span><span class="op" id="4304366">)</span>&nbsp;<span class="op" id="4304368">(</span><span class="op" id="4304369">*</span><span class="ident" id="4304370"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4304376">,</span>&nbsp;<span class="builtintype" id="4304378">error</span><span class="op" id="4304383">)</span>&nbsp;<span class="op" id="4304385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4304388">if</span>&nbsp;<span class="ident" id="4304391"><a href="/compress/gzip/gzip.go.html#4304357">level</a></span>&nbsp;<span class="op" id="4304397">&lt;</span>&nbsp;<span class="ident" id="4304399"><a href="/compress/gzip/gzip.go.html#4302983">DefaultCompression</a></span>&nbsp;<span class="op" id="4304418">||</span>&nbsp;<span class="ident" id="4304421"><a href="/compress/gzip/gzip.go.html#4304357">level</a></span>&nbsp;<span class="op" id="4304427">&gt;</span>&nbsp;<span class="ident" id="4304429"><a href="/compress/gzip/gzip.go.html#4302939">BestCompression</a></span>&nbsp;<span class="op" id="4304445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4304449">return</span>&nbsp;<span class="ident" id="4304456">nil</span><span class="op" id="4304459">,</span>&nbsp;<span class="ident" id="4304461"><a href="/compress/gzip/gzip.go.html#4302667">fmt</a></span><span class="op" id="4304464">.</span><span class="ident" id="4304465">Errorf</span><span class="op" id="4304471">(</span><span class="string" id="4304472">&#34;gzip:&nbsp;invalid&nbsp;compression&nbsp;level:&nbsp;%d&#34;</span><span class="op" id="4304509">,</span>&nbsp;<span class="ident" id="4304511"><a href="/compress/gzip/gzip.go.html#4304357">level</a></span><span class="op" id="4304516">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4304519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304522">z</span>&nbsp;<span class="op" id="4304524">:=</span>&nbsp;<span class="builtinfunc" id="4304527">new</span><span class="op" id="4304530">(</span><span class="ident" id="4304531"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4304537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304540"><a href="/compress/gzip/gzip.go.html#4304522">z</a></span><span class="op" id="4304541">.</span><span class="ident" id="4304542">init</span><span class="op" id="4304546">(</span><span class="ident" id="4304547"><a href="/compress/gzip/gzip.go.html#4304344">w</a></span><span class="op" id="4304548">,</span>&nbsp;<span class="ident" id="4304550"><a href="/compress/gzip/gzip.go.html#4304357">level</a></span><span class="op" id="4304555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4304558">return</span>&nbsp;<span class="ident" id="4304565"><a href="/compress/gzip/gzip.go.html#4304522">z</a></span><span class="op" id="4304566">,</span>&nbsp;<span class="ident" id="4304568">nil</span><br>
<span class="lineno"></span><span class="op" id="4304572">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="4304575">func</span>&nbsp;<span class="op" id="4304580">(</span><span class="ident" id="4304581">z</span>&nbsp;<span class="op" id="4304583">*</span><span class="ident" id="4304584"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4304590">)</span>&nbsp;<span class="ident" id="4304592">init</span><span class="op" id="4304596">(</span><span class="ident" id="4304597">w</span>&nbsp;<span class="ident" id="4304599"><a href="/compress/gzip/gzip.go.html#4302696">io</a></span><span class="op" id="4304601">.</span><span class="ident" id="4304602">Writer</span><span class="op" id="4304608">,</span>&nbsp;<span class="ident" id="4304610">level</span>&nbsp;<span class="builtintype" id="4304616">int</span><span class="op" id="4304619">)</span>&nbsp;<span class="op" id="4304621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304624">digest</span>&nbsp;<span class="op" id="4304631">:=</span>&nbsp;<span class="ident" id="4304634"><a href="/compress/gzip/gzip.go.html#4304581">z</a></span><span class="op" id="4304635">.</span><span class="ident" id="4304636">digest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4304644">if</span>&nbsp;<span class="ident" id="4304647"><a href="/compress/gzip/gzip.go.html#4304624">digest</a></span>&nbsp;<span class="op" id="4304654">!=</span>&nbsp;<span class="ident" id="4304657">nil</span>&nbsp;<span class="op" id="4304661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304665"><a href="/compress/gzip/gzip.go.html#4304624">digest</a></span><span class="op" id="4304671">.</span><span class="ident" id="4304672">Reset</span><span class="op" id="4304677">(</span><span class="op" id="4304678">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4304681">}</span>&nbsp;<span class="keyword" id="4304683">else</span>&nbsp;<span class="op" id="4304688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304692"><a href="/compress/gzip/gzip.go.html#4304624">digest</a></span>&nbsp;<span class="op" id="4304699">=</span>&nbsp;<span class="ident" id="4304701"><a href="/compress/gzip/gzip.go.html#4302682">crc32</a></span><span class="op" id="4304706">.</span><span class="ident" id="4304707">NewIEEE</span><span class="op" id="4304714">(</span><span class="op" id="4304715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4304718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304721">compressor</span>&nbsp;<span class="op" id="4304732">:=</span>&nbsp;<span class="ident" id="4304735"><a href="/compress/gzip/gzip.go.html#4304581">z</a></span><span class="op" id="4304736">.</span><span class="ident" id="4304737">compressor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4304749">if</span>&nbsp;<span class="ident" id="4304752"><a href="/compress/gzip/gzip.go.html#4304721">compressor</a></span>&nbsp;<span class="op" id="4304763">!=</span>&nbsp;<span class="ident" id="4304766">nil</span>&nbsp;<span class="op" id="4304770">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304774"><a href="/compress/gzip/gzip.go.html#4304721">compressor</a></span><span class="op" id="4304784">.</span><span class="ident" id="4304785">Reset</span><span class="op" id="4304790">(</span><span class="ident" id="4304791"><a href="/compress/gzip/gzip.go.html#4304597">w</a></span><span class="op" id="4304792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4304795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4304798">*</span><span class="ident" id="4304799"><a href="/compress/gzip/gzip.go.html#4304581">z</a></span>&nbsp;<span class="op" id="4304801">=</span>&nbsp;<span class="ident" id="4304803"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4304809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304813">Header</span><span class="op" id="4304819">:</span>&nbsp;<span class="ident" id="4304821"><a href="/compress/gzip/gunzip.go.html#4296322">Header</a></span><span class="op" id="4304827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304832">OS</span><span class="op" id="4304834">:</span>&nbsp;<span class="num" id="4304836">255</span><span class="op" id="4304839">,</span>&nbsp;<span class="comment" id="4304841">//&nbsp;unknown</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4304854">}</span><span class="op" id="4304855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304859">w</span><span class="op" id="4304860">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4304871"><a href="/compress/gzip/gzip.go.html#4304597">w</a></span><span class="op" id="4304872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304876">level</span><span class="op" id="4304881">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4304888"><a href="/compress/gzip/gzip.go.html#4304610">level</a></span><span class="op" id="4304893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304897">digest</span><span class="op" id="4304903">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4304909"><a href="/compress/gzip/gzip.go.html#4304624">digest</a></span><span class="op" id="4304915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4304919">compressor</span><span class="op" id="4304929">:</span>&nbsp;<span class="ident" id="4304931"><a href="/compress/gzip/gzip.go.html#4304721">compressor</a></span><span class="op" id="4304941">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4304944">}</span><br>
<span class="lineno"></span><span class="op" id="4304946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4304949">//&nbsp;Reset&nbsp;discards&nbsp;the&nbsp;Writer&nbsp;z&#39;s&nbsp;state&nbsp;and&nbsp;makes&nbsp;it&nbsp;equivalent&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4305019">//&nbsp;result&nbsp;of&nbsp;its&nbsp;original&nbsp;state&nbsp;from&nbsp;NewWriter&nbsp;or&nbsp;NewWriterLevel,&nbsp;but</span><br>
<span class="lineno">95</span><span class="comment" id="4305089">//&nbsp;writing&nbsp;to&nbsp;w&nbsp;instead.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;Writer&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="4305156">//&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="4305181">func</span>&nbsp;<span class="op" id="4305186">(</span><span class="ident" id="4305187">z</span>&nbsp;<span class="op" id="4305189">*</span><span class="ident" id="4305190"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4305196">)</span>&nbsp;<span class="ident" id="4305198">Reset</span><span class="op" id="4305203">(</span><span class="ident" id="4305204">w</span>&nbsp;<span class="ident" id="4305206"><a href="/compress/gzip/gzip.go.html#4302696">io</a></span><span class="op" id="4305208">.</span><span class="ident" id="4305209">Writer</span><span class="op" id="4305215">)</span>&nbsp;<span class="op" id="4305217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305220"><a href="/compress/gzip/gzip.go.html#4305187">z</a></span><span class="op" id="4305221">.</span><span class="ident" id="4305222">init</span><span class="op" id="4305226">(</span><span class="ident" id="4305227"><a href="/compress/gzip/gzip.go.html#4305204">w</a></span><span class="op" id="4305228">,</span>&nbsp;<span class="ident" id="4305230"><a href="/compress/gzip/gzip.go.html#4305187">z</a></span><span class="op" id="4305231">.</span><span class="ident" id="4305232">level</span><span class="op" id="4305237">)</span><br>
<span class="lineno"></span><span class="op" id="4305239">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="4305242">//&nbsp;GZIP&nbsp;(RFC&nbsp;1952)&nbsp;is&nbsp;little-endian,&nbsp;unlike&nbsp;ZLIB&nbsp;(RFC&nbsp;1950).</span><br>
<span class="lineno"></span><span class="keyword" id="4305303">func</span>&nbsp;<span class="ident" id="4305308">put2</span><span class="op" id="4305312">(</span><span class="ident" id="4305313">p</span>&nbsp;<span class="op" id="4305315">[</span><span class="op" id="4305316">]</span><span class="builtintype" id="4305317">byte</span><span class="op" id="4305321">,</span>&nbsp;<span class="ident" id="4305323">v</span>&nbsp;<span class="builtintype" id="4305325">uint16</span><span class="op" id="4305331">)</span>&nbsp;<span class="op" id="4305333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305336"><a href="/compress/gzip/gzip.go.html#4305313">p</a></span><span class="op" id="4305337">[</span><span class="num" id="4305338">0</span><span class="op" id="4305339">]</span>&nbsp;<span class="op" id="4305341">=</span>&nbsp;<span class="builtintype" id="4305343">uint8</span><span class="op" id="4305348">(</span><span class="ident" id="4305349"><a href="/compress/gzip/gzip.go.html#4305323">v</a></span>&nbsp;<span class="op" id="4305351">&gt;&gt;</span>&nbsp;<span class="num" id="4305354">0</span><span class="op" id="4305355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305358"><a href="/compress/gzip/gzip.go.html#4305313">p</a></span><span class="op" id="4305359">[</span><span class="num" id="4305360">1</span><span class="op" id="4305361">]</span>&nbsp;<span class="op" id="4305363">=</span>&nbsp;<span class="builtintype" id="4305365">uint8</span><span class="op" id="4305370">(</span><span class="ident" id="4305371"><a href="/compress/gzip/gzip.go.html#4305323">v</a></span>&nbsp;<span class="op" id="4305373">&gt;&gt;</span>&nbsp;<span class="num" id="4305376">8</span><span class="op" id="4305377">)</span><br>
<span class="lineno">105</span><span class="op" id="4305379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4305382">func</span>&nbsp;<span class="ident" id="4305387">put4</span><span class="op" id="4305391">(</span><span class="ident" id="4305392">p</span>&nbsp;<span class="op" id="4305394">[</span><span class="op" id="4305395">]</span><span class="builtintype" id="4305396">byte</span><span class="op" id="4305400">,</span>&nbsp;<span class="ident" id="4305402">v</span>&nbsp;<span class="builtintype" id="4305404">uint32</span><span class="op" id="4305410">)</span>&nbsp;<span class="op" id="4305412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305415"><a href="/compress/gzip/gzip.go.html#4305392">p</a></span><span class="op" id="4305416">[</span><span class="num" id="4305417">0</span><span class="op" id="4305418">]</span>&nbsp;<span class="op" id="4305420">=</span>&nbsp;<span class="builtintype" id="4305422">uint8</span><span class="op" id="4305427">(</span><span class="ident" id="4305428"><a href="/compress/gzip/gzip.go.html#4305402">v</a></span>&nbsp;<span class="op" id="4305430">&gt;&gt;</span>&nbsp;<span class="num" id="4305433">0</span><span class="op" id="4305434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305437"><a href="/compress/gzip/gzip.go.html#4305392">p</a></span><span class="op" id="4305438">[</span><span class="num" id="4305439">1</span><span class="op" id="4305440">]</span>&nbsp;<span class="op" id="4305442">=</span>&nbsp;<span class="builtintype" id="4305444">uint8</span><span class="op" id="4305449">(</span><span class="ident" id="4305450"><a href="/compress/gzip/gzip.go.html#4305402">v</a></span>&nbsp;<span class="op" id="4305452">&gt;&gt;</span>&nbsp;<span class="num" id="4305455">8</span><span class="op" id="4305456">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305459"><a href="/compress/gzip/gzip.go.html#4305392">p</a></span><span class="op" id="4305460">[</span><span class="num" id="4305461">2</span><span class="op" id="4305462">]</span>&nbsp;<span class="op" id="4305464">=</span>&nbsp;<span class="builtintype" id="4305466">uint8</span><span class="op" id="4305471">(</span><span class="ident" id="4305472"><a href="/compress/gzip/gzip.go.html#4305402">v</a></span>&nbsp;<span class="op" id="4305474">&gt;&gt;</span>&nbsp;<span class="num" id="4305477">16</span><span class="op" id="4305479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305482"><a href="/compress/gzip/gzip.go.html#4305392">p</a></span><span class="op" id="4305483">[</span><span class="num" id="4305484">3</span><span class="op" id="4305485">]</span>&nbsp;<span class="op" id="4305487">=</span>&nbsp;<span class="builtintype" id="4305489">uint8</span><span class="op" id="4305494">(</span><span class="ident" id="4305495"><a href="/compress/gzip/gzip.go.html#4305402">v</a></span>&nbsp;<span class="op" id="4305497">&gt;&gt;</span>&nbsp;<span class="num" id="4305500">24</span><span class="op" id="4305502">)</span><br>
<span class="lineno"></span><span class="op" id="4305504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4305507">//&nbsp;writeBytes&nbsp;writes&nbsp;a&nbsp;length-prefixed&nbsp;byte&nbsp;slice&nbsp;to&nbsp;z.w.</span><br>
<span class="lineno">115</span><span class="keyword" id="4305565">func</span>&nbsp;<span class="op" id="4305570">(</span><span class="ident" id="4305571">z</span>&nbsp;<span class="op" id="4305573">*</span><span class="ident" id="4305574"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4305580">)</span>&nbsp;<span class="ident" id="4305582">writeBytes</span><span class="op" id="4305592">(</span><span class="ident" id="4305593">b</span>&nbsp;<span class="op" id="4305595">[</span><span class="op" id="4305596">]</span><span class="builtintype" id="4305597">byte</span><span class="op" id="4305601">)</span>&nbsp;<span class="builtintype" id="4305603">error</span>&nbsp;<span class="op" id="4305609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4305612">if</span>&nbsp;<span class="builtinfunc" id="4305615">len</span><span class="op" id="4305618">(</span><span class="ident" id="4305619"><a href="/compress/gzip/gzip.go.html#4305593">b</a></span><span class="op" id="4305620">)</span>&nbsp;<span class="op" id="4305622">&gt;</span>&nbsp;<span class="num" id="4305624">0xffff</span>&nbsp;<span class="op" id="4305631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4305635">return</span>&nbsp;<span class="ident" id="4305642"><a href="/compress/gzip/gzip.go.html#4302657">errors</a></span><span class="op" id="4305648">.</span><span class="ident" id="4305649">New</span><span class="op" id="4305652">(</span><span class="string" id="4305653">&#34;gzip.Write:&nbsp;Extra&nbsp;data&nbsp;is&nbsp;too&nbsp;large&#34;</span><span class="op" id="4305690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4305693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305696"><a href="/compress/gzip/gzip.go.html#4305308">put2</a></span><span class="op" id="4305700">(</span><span class="ident" id="4305701"><a href="/compress/gzip/gzip.go.html#4305571">z</a></span><span class="op" id="4305702">.</span><span class="ident" id="4305703">buf</span><span class="op" id="4305706">[</span><span class="num" id="4305707">0</span><span class="op" id="4305708">:</span><span class="num" id="4305709">2</span><span class="op" id="4305710">]</span><span class="op" id="4305711">,</span>&nbsp;<span class="builtintype" id="4305713">uint16</span><span class="op" id="4305719">(</span><span class="builtinfunc" id="4305720">len</span><span class="op" id="4305723">(</span><span class="ident" id="4305724"><a href="/compress/gzip/gzip.go.html#4305593">b</a></span><span class="op" id="4305725">)</span><span class="op" id="4305726">)</span><span class="op" id="4305727">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305730">_</span><span class="op" id="4305731">,</span>&nbsp;<span class="ident" id="4305733">err</span>&nbsp;<span class="op" id="4305737">:=</span>&nbsp;<span class="ident" id="4305740"><a href="/compress/gzip/gzip.go.html#4305571">z</a></span><span class="op" id="4305741">.</span><span class="ident" id="4305742">w</span><span class="op" id="4305743">.</span><span class="ident" id="4305744">Write</span><span class="op" id="4305749">(</span><span class="ident" id="4305750"><a href="/compress/gzip/gzip.go.html#4305571">z</a></span><span class="op" id="4305751">.</span><span class="ident" id="4305752">buf</span><span class="op" id="4305755">[</span><span class="num" id="4305756">0</span><span class="op" id="4305757">:</span><span class="num" id="4305758">2</span><span class="op" id="4305759">]</span><span class="op" id="4305760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4305763">if</span>&nbsp;<span class="ident" id="4305766"><a href="/compress/gzip/gzip.go.html#4305733">err</a></span>&nbsp;<span class="op" id="4305770">!=</span>&nbsp;<span class="ident" id="4305773">nil</span>&nbsp;<span class="op" id="4305777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4305781">return</span>&nbsp;<span class="ident" id="4305788"><a href="/compress/gzip/gzip.go.html#4305733">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4305793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4305796">_</span><span class="op" id="4305797">,</span>&nbsp;<span class="ident" id="4305799"><a href="/compress/gzip/gzip.go.html#4305733">err</a></span>&nbsp;<span class="op" id="4305803">=</span>&nbsp;<span class="ident" id="4305805"><a href="/compress/gzip/gzip.go.html#4305571">z</a></span><span class="op" id="4305806">.</span><span class="ident" id="4305807">w</span><span class="op" id="4305808">.</span><span class="ident" id="4305809">Write</span><span class="op" id="4305814">(</span><span class="ident" id="4305815"><a href="/compress/gzip/gzip.go.html#4305593">b</a></span><span class="op" id="4305816">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4305819">return</span>&nbsp;<span class="ident" id="4305826"><a href="/compress/gzip/gzip.go.html#4305733">err</a></span><br>
<span class="lineno"></span><span class="op" id="4305830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4305833">//&nbsp;writeString&nbsp;writes&nbsp;a&nbsp;UTF-8&nbsp;string&nbsp;s&nbsp;in&nbsp;GZIP&#39;s&nbsp;format&nbsp;to&nbsp;z.w.</span><br>
<span class="lineno"></span><span class="comment" id="4305897">//&nbsp;GZIP&nbsp;(RFC&nbsp;1952)&nbsp;specifies&nbsp;that&nbsp;strings&nbsp;are&nbsp;NUL-terminated&nbsp;ISO&nbsp;8859-1&nbsp;(Latin-1).</span><br>
<span class="lineno">130</span><span class="keyword" id="4305980">func</span>&nbsp;<span class="op" id="4305985">(</span><span class="ident" id="4305986">z</span>&nbsp;<span class="op" id="4305988">*</span><span class="ident" id="4305989"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4305995">)</span>&nbsp;<span class="ident" id="4305997">writeString</span><span class="op" id="4306008">(</span><span class="ident" id="4306009">s</span>&nbsp;<span class="builtintype" id="4306011">string</span><span class="op" id="4306017">)</span>&nbsp;<span class="op" id="4306019">(</span><span class="ident" id="4306020">err</span>&nbsp;<span class="builtintype" id="4306024">error</span><span class="op" id="4306029">)</span>&nbsp;<span class="op" id="4306031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4306034">//&nbsp;GZIP&nbsp;stores&nbsp;Latin-1&nbsp;strings;&nbsp;error&nbsp;if&nbsp;non-Latin-1;&nbsp;convert&nbsp;if&nbsp;non-ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306111">needconv</span>&nbsp;<span class="op" id="4306120">:=</span>&nbsp;<span class="builtintype" id="4306123">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306130">for</span>&nbsp;<span class="ident" id="4306134">_</span><span class="op" id="4306135">,</span>&nbsp;<span class="ident" id="4306137">v</span>&nbsp;<span class="op" id="4306139">:=</span>&nbsp;<span class="keyword" id="4306142">range</span>&nbsp;<span class="ident" id="4306148"><a href="/compress/gzip/gzip.go.html#4306009">s</a></span>&nbsp;<span class="op" id="4306150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306154">if</span>&nbsp;<span class="ident" id="4306157"><a href="/compress/gzip/gzip.go.html#4306137">v</a></span>&nbsp;<span class="op" id="4306159">==</span>&nbsp;<span class="num" id="4306162">0</span>&nbsp;<span class="op" id="4306164">||</span>&nbsp;<span class="ident" id="4306167"><a href="/compress/gzip/gzip.go.html#4306137">v</a></span>&nbsp;<span class="op" id="4306169">&gt;</span>&nbsp;<span class="num" id="4306171">0xff</span>&nbsp;<span class="op" id="4306176">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306181">return</span>&nbsp;<span class="ident" id="4306188"><a href="/compress/gzip/gzip.go.html#4302657">errors</a></span><span class="op" id="4306194">.</span><span class="ident" id="4306195">New</span><span class="op" id="4306198">(</span><span class="string" id="4306199">&#34;gzip.Write:&nbsp;non-Latin-1&nbsp;header&nbsp;string&#34;</span><span class="op" id="4306238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4306242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306246">if</span>&nbsp;<span class="ident" id="4306249"><a href="/compress/gzip/gzip.go.html#4306137">v</a></span>&nbsp;<span class="op" id="4306251">&gt;</span>&nbsp;<span class="num" id="4306253">0x7f</span>&nbsp;<span class="op" id="4306258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306263"><a href="/compress/gzip/gzip.go.html#4306111">needconv</a></span>&nbsp;<span class="op" id="4306272">=</span>&nbsp;<span class="builtintype" id="4306274">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4306281">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4306284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306287">if</span>&nbsp;<span class="ident" id="4306290"><a href="/compress/gzip/gzip.go.html#4306111">needconv</a></span>&nbsp;<span class="op" id="4306299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306303">b</span>&nbsp;<span class="op" id="4306305">:=</span>&nbsp;<span class="builtinfunc" id="4306308">make</span><span class="op" id="4306312">(</span><span class="op" id="4306313">[</span><span class="op" id="4306314">]</span><span class="builtintype" id="4306315">byte</span><span class="op" id="4306319">,</span>&nbsp;<span class="num" id="4306321">0</span><span class="op" id="4306322">,</span>&nbsp;<span class="builtinfunc" id="4306324">len</span><span class="op" id="4306327">(</span><span class="ident" id="4306328"><a href="/compress/gzip/gzip.go.html#4306009">s</a></span><span class="op" id="4306329">)</span><span class="op" id="4306330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306334">for</span>&nbsp;<span class="ident" id="4306338">_</span><span class="op" id="4306339">,</span>&nbsp;<span class="ident" id="4306341">v</span>&nbsp;<span class="op" id="4306343">:=</span>&nbsp;<span class="keyword" id="4306346">range</span>&nbsp;<span class="ident" id="4306352"><a href="/compress/gzip/gzip.go.html#4306009">s</a></span>&nbsp;<span class="op" id="4306354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306359"><a href="/compress/gzip/gzip.go.html#4306303">b</a></span>&nbsp;<span class="op" id="4306361">=</span>&nbsp;<span class="builtinfunc" id="4306363">append</span><span class="op" id="4306369">(</span><span class="ident" id="4306370"><a href="/compress/gzip/gzip.go.html#4306303">b</a></span><span class="op" id="4306371">,</span>&nbsp;<span class="builtintype" id="4306373">byte</span><span class="op" id="4306377">(</span><span class="ident" id="4306378"><a href="/compress/gzip/gzip.go.html#4306341">v</a></span><span class="op" id="4306379">)</span><span class="op" id="4306380">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4306384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306388">_</span><span class="op" id="4306389">,</span>&nbsp;<span class="ident" id="4306391"><a href="/compress/gzip/gzip.go.html#4306020">err</a></span>&nbsp;<span class="op" id="4306395">=</span>&nbsp;<span class="ident" id="4306397"><a href="/compress/gzip/gzip.go.html#4305986">z</a></span><span class="op" id="4306398">.</span><span class="ident" id="4306399">w</span><span class="op" id="4306400">.</span><span class="ident" id="4306401">Write</span><span class="op" id="4306406">(</span><span class="ident" id="4306407"><a href="/compress/gzip/gzip.go.html#4306303">b</a></span><span class="op" id="4306408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4306411">}</span>&nbsp;<span class="keyword" id="4306413">else</span>&nbsp;<span class="op" id="4306418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306422">_</span><span class="op" id="4306423">,</span>&nbsp;<span class="ident" id="4306425"><a href="/compress/gzip/gzip.go.html#4306020">err</a></span>&nbsp;<span class="op" id="4306429">=</span>&nbsp;<span class="ident" id="4306431"><a href="/compress/gzip/gzip.go.html#4302696">io</a></span><span class="op" id="4306433">.</span><span class="ident" id="4306434">WriteString</span><span class="op" id="4306445">(</span><span class="ident" id="4306446"><a href="/compress/gzip/gzip.go.html#4305986">z</a></span><span class="op" id="4306447">.</span><span class="ident" id="4306448">w</span><span class="op" id="4306449">,</span>&nbsp;<span class="ident" id="4306451"><a href="/compress/gzip/gzip.go.html#4306009">s</a></span><span class="op" id="4306452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4306455">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306458">if</span>&nbsp;<span class="ident" id="4306461"><a href="/compress/gzip/gzip.go.html#4306020">err</a></span>&nbsp;<span class="op" id="4306465">!=</span>&nbsp;<span class="ident" id="4306468">nil</span>&nbsp;<span class="op" id="4306472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306476">return</span>&nbsp;<span class="ident" id="4306483"><a href="/compress/gzip/gzip.go.html#4306020">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4306488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4306491">//&nbsp;GZIP&nbsp;strings&nbsp;are&nbsp;NUL-terminated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306528"><a href="/compress/gzip/gzip.go.html#4305986">z</a></span><span class="op" id="4306529">.</span><span class="ident" id="4306530">buf</span><span class="op" id="4306533">[</span><span class="num" id="4306534">0</span><span class="op" id="4306535">]</span>&nbsp;<span class="op" id="4306537">=</span>&nbsp;<span class="num" id="4306539">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306542">_</span><span class="op" id="4306543">,</span>&nbsp;<span class="ident" id="4306545"><a href="/compress/gzip/gzip.go.html#4306020">err</a></span>&nbsp;<span class="op" id="4306549">=</span>&nbsp;<span class="ident" id="4306551"><a href="/compress/gzip/gzip.go.html#4305986">z</a></span><span class="op" id="4306552">.</span><span class="ident" id="4306553">w</span><span class="op" id="4306554">.</span><span class="ident" id="4306555">Write</span><span class="op" id="4306560">(</span><span class="ident" id="4306561"><a href="/compress/gzip/gzip.go.html#4305986">z</a></span><span class="op" id="4306562">.</span><span class="ident" id="4306563">buf</span><span class="op" id="4306566">[</span><span class="num" id="4306567">0</span><span class="op" id="4306568">:</span><span class="num" id="4306569">1</span><span class="op" id="4306570">]</span><span class="op" id="4306571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306574">return</span>&nbsp;<span class="ident" id="4306581"><a href="/compress/gzip/gzip.go.html#4306020">err</a></span><br>
<span class="lineno"></span><span class="op" id="4306585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4306588">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;compressed&nbsp;form&nbsp;of&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;io.Writer.&nbsp;The</span><br>
<span class="lineno">160</span><span class="comment" id="4306660">//&nbsp;compressed&nbsp;bytes&nbsp;are&nbsp;not&nbsp;necessarily&nbsp;flushed&nbsp;until&nbsp;the&nbsp;Writer&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="4306736">func</span>&nbsp;<span class="op" id="4306741">(</span><span class="ident" id="4306742">z</span>&nbsp;<span class="op" id="4306744">*</span><span class="ident" id="4306745"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4306751">)</span>&nbsp;<span class="ident" id="4306753">Write</span><span class="op" id="4306758">(</span><span class="ident" id="4306759">p</span>&nbsp;<span class="op" id="4306761">[</span><span class="op" id="4306762">]</span><span class="builtintype" id="4306763">byte</span><span class="op" id="4306767">)</span>&nbsp;<span class="op" id="4306769">(</span><span class="builtintype" id="4306770">int</span><span class="op" id="4306773">,</span>&nbsp;<span class="builtintype" id="4306775">error</span><span class="op" id="4306780">)</span>&nbsp;<span class="op" id="4306782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306785">if</span>&nbsp;<span class="ident" id="4306788"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4306789">.</span><span class="ident" id="4306790">err</span>&nbsp;<span class="op" id="4306794">!=</span>&nbsp;<span class="ident" id="4306797">nil</span>&nbsp;<span class="op" id="4306801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306805">return</span>&nbsp;<span class="num" id="4306812">0</span><span class="op" id="4306813">,</span>&nbsp;<span class="ident" id="4306815"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4306816">.</span><span class="ident" id="4306817">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4306822">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306825">var</span>&nbsp;<span class="ident" id="4306829">n</span>&nbsp;<span class="builtintype" id="4306831">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4306836">//&nbsp;Write&nbsp;the&nbsp;GZIP&nbsp;header&nbsp;lazily.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306870">if</span>&nbsp;<span class="op" id="4306873">!</span><span class="ident" id="4306874"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4306875">.</span><span class="ident" id="4306876">wroteHeader</span>&nbsp;<span class="op" id="4306888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306892"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4306893">.</span><span class="ident" id="4306894">wroteHeader</span>&nbsp;<span class="op" id="4306906">=</span>&nbsp;<span class="builtintype" id="4306908">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306915"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4306916">.</span><span class="ident" id="4306917">buf</span><span class="op" id="4306920">[</span><span class="num" id="4306921">0</span><span class="op" id="4306922">]</span>&nbsp;<span class="op" id="4306924">=</span>&nbsp;<span class="ident" id="4306926"><a href="/compress/gzip/gunzip.go.html#4295605">gzipID1</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306936"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4306937">.</span><span class="ident" id="4306938">buf</span><span class="op" id="4306941">[</span><span class="num" id="4306942">1</span><span class="op" id="4306943">]</span>&nbsp;<span class="op" id="4306945">=</span>&nbsp;<span class="ident" id="4306947"><a href="/compress/gzip/gunzip.go.html#4295625">gzipID2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306957"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4306958">.</span><span class="ident" id="4306959">buf</span><span class="op" id="4306962">[</span><span class="num" id="4306963">2</span><span class="op" id="4306964">]</span>&nbsp;<span class="op" id="4306966">=</span>&nbsp;<span class="ident" id="4306968"><a href="/compress/gzip/gunzip.go.html#4295645">gzipDeflate</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4306982"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4306983">.</span><span class="ident" id="4306984">buf</span><span class="op" id="4306987">[</span><span class="num" id="4306988">3</span><span class="op" id="4306989">]</span>&nbsp;<span class="op" id="4306991">=</span>&nbsp;<span class="num" id="4306993">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4306997">if</span>&nbsp;<span class="ident" id="4307000"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307001">.</span><span class="ident" id="4307002">Extra</span>&nbsp;<span class="op" id="4307008">!=</span>&nbsp;<span class="ident" id="4307011">nil</span>&nbsp;<span class="op" id="4307015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307020"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307021">.</span><span class="ident" id="4307022">buf</span><span class="op" id="4307025">[</span><span class="num" id="4307026">3</span><span class="op" id="4307027">]</span>&nbsp;<span class="op" id="4307029">|=</span>&nbsp;<span class="num" id="4307032">0x04</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307043">if</span>&nbsp;<span class="ident" id="4307046"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307047">.</span><span class="ident" id="4307048">Name</span>&nbsp;<span class="op" id="4307053">!=</span>&nbsp;<span class="string" id="4307056">&#34;&#34;</span>&nbsp;<span class="op" id="4307059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307064"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307065">.</span><span class="ident" id="4307066">buf</span><span class="op" id="4307069">[</span><span class="num" id="4307070">3</span><span class="op" id="4307071">]</span>&nbsp;<span class="op" id="4307073">|=</span>&nbsp;<span class="num" id="4307076">0x08</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307087">if</span>&nbsp;<span class="ident" id="4307090"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307091">.</span><span class="ident" id="4307092">Comment</span>&nbsp;<span class="op" id="4307100">!=</span>&nbsp;<span class="string" id="4307103">&#34;&#34;</span>&nbsp;<span class="op" id="4307106">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307111"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307112">.</span><span class="ident" id="4307113">buf</span><span class="op" id="4307116">[</span><span class="num" id="4307117">3</span><span class="op" id="4307118">]</span>&nbsp;<span class="op" id="4307120">|=</span>&nbsp;<span class="num" id="4307123">0x10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307134"><a href="/compress/gzip/gzip.go.html#4305387">put4</a></span><span class="op" id="4307138">(</span><span class="ident" id="4307139"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307140">.</span><span class="ident" id="4307141">buf</span><span class="op" id="4307144">[</span><span class="num" id="4307145">4</span><span class="op" id="4307146">:</span><span class="num" id="4307147">8</span><span class="op" id="4307148">]</span><span class="op" id="4307149">,</span>&nbsp;<span class="builtintype" id="4307151">uint32</span><span class="op" id="4307157">(</span><span class="ident" id="4307158"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307159">.</span><span class="ident" id="4307160">ModTime</span><span class="op" id="4307167">.</span><span class="ident" id="4307168">Unix</span><span class="op" id="4307172">(</span><span class="op" id="4307173">)</span><span class="op" id="4307174">)</span><span class="op" id="4307175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307179">if</span>&nbsp;<span class="ident" id="4307182"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307183">.</span><span class="ident" id="4307184">level</span>&nbsp;<span class="op" id="4307190">==</span>&nbsp;<span class="ident" id="4307193"><a href="/compress/gzip/gzip.go.html#4302939">BestCompression</a></span>&nbsp;<span class="op" id="4307209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307214"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307215">.</span><span class="ident" id="4307216">buf</span><span class="op" id="4307219">[</span><span class="num" id="4307220">8</span><span class="op" id="4307221">]</span>&nbsp;<span class="op" id="4307223">=</span>&nbsp;<span class="num" id="4307225">2</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307229">}</span>&nbsp;<span class="keyword" id="4307231">else</span>&nbsp;<span class="keyword" id="4307236">if</span>&nbsp;<span class="ident" id="4307239"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307240">.</span><span class="ident" id="4307241">level</span>&nbsp;<span class="op" id="4307247">==</span>&nbsp;<span class="ident" id="4307250"><a href="/compress/gzip/gzip.go.html#4302901">BestSpeed</a></span>&nbsp;<span class="op" id="4307260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307265"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307266">.</span><span class="ident" id="4307267">buf</span><span class="op" id="4307270">[</span><span class="num" id="4307271">8</span><span class="op" id="4307272">]</span>&nbsp;<span class="op" id="4307274">=</span>&nbsp;<span class="num" id="4307276">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307280">}</span>&nbsp;<span class="keyword" id="4307282">else</span>&nbsp;<span class="op" id="4307287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307292"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307293">.</span><span class="ident" id="4307294">buf</span><span class="op" id="4307297">[</span><span class="num" id="4307298">8</span><span class="op" id="4307299">]</span>&nbsp;<span class="op" id="4307301">=</span>&nbsp;<span class="num" id="4307303">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307307">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307311"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307312">.</span><span class="ident" id="4307313">buf</span><span class="op" id="4307316">[</span><span class="num" id="4307317">9</span><span class="op" id="4307318">]</span>&nbsp;<span class="op" id="4307320">=</span>&nbsp;<span class="ident" id="4307322"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307323">.</span><span class="ident" id="4307324">OS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307329"><a href="/compress/gzip/gzip.go.html#4306829">n</a></span><span class="op" id="4307330">,</span>&nbsp;<span class="ident" id="4307332"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307333">.</span><span class="ident" id="4307334">err</span>&nbsp;<span class="op" id="4307338">=</span>&nbsp;<span class="ident" id="4307340"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307341">.</span><span class="ident" id="4307342">w</span><span class="op" id="4307343">.</span><span class="ident" id="4307344">Write</span><span class="op" id="4307349">(</span><span class="ident" id="4307350"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307351">.</span><span class="ident" id="4307352">buf</span><span class="op" id="4307355">[</span><span class="num" id="4307356">0</span><span class="op" id="4307357">:</span><span class="num" id="4307358">10</span><span class="op" id="4307360">]</span><span class="op" id="4307361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307365">if</span>&nbsp;<span class="ident" id="4307368"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307369">.</span><span class="ident" id="4307370">err</span>&nbsp;<span class="op" id="4307374">!=</span>&nbsp;<span class="ident" id="4307377">nil</span>&nbsp;<span class="op" id="4307381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307386">return</span>&nbsp;<span class="ident" id="4307393"><a href="/compress/gzip/gzip.go.html#4306829">n</a></span><span class="op" id="4307394">,</span>&nbsp;<span class="ident" id="4307396"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307397">.</span><span class="ident" id="4307398">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307404">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307408">if</span>&nbsp;<span class="ident" id="4307411"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307412">.</span><span class="ident" id="4307413">Extra</span>&nbsp;<span class="op" id="4307419">!=</span>&nbsp;<span class="ident" id="4307422">nil</span>&nbsp;<span class="op" id="4307426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307431"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307432">.</span><span class="ident" id="4307433">err</span>&nbsp;<span class="op" id="4307437">=</span>&nbsp;<span class="ident" id="4307439"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307440">.</span><span class="ident" id="4307441">writeBytes</span><span class="op" id="4307451">(</span><span class="ident" id="4307452"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307453">.</span><span class="ident" id="4307454">Extra</span><span class="op" id="4307459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307464">if</span>&nbsp;<span class="ident" id="4307467"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307468">.</span><span class="ident" id="4307469">err</span>&nbsp;<span class="op" id="4307473">!=</span>&nbsp;<span class="ident" id="4307476">nil</span>&nbsp;<span class="op" id="4307480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307486">return</span>&nbsp;<span class="ident" id="4307493"><a href="/compress/gzip/gzip.go.html#4306829">n</a></span><span class="op" id="4307494">,</span>&nbsp;<span class="ident" id="4307496"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307497">.</span><span class="ident" id="4307498">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307505">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307513">if</span>&nbsp;<span class="ident" id="4307516"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307517">.</span><span class="ident" id="4307518">Name</span>&nbsp;<span class="op" id="4307523">!=</span>&nbsp;<span class="string" id="4307526">&#34;&#34;</span>&nbsp;<span class="op" id="4307529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307534"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307535">.</span><span class="ident" id="4307536">err</span>&nbsp;<span class="op" id="4307540">=</span>&nbsp;<span class="ident" id="4307542"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307543">.</span><span class="ident" id="4307544">writeString</span><span class="op" id="4307555">(</span><span class="ident" id="4307556"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307557">.</span><span class="ident" id="4307558">Name</span><span class="op" id="4307562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307567">if</span>&nbsp;<span class="ident" id="4307570"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307571">.</span><span class="ident" id="4307572">err</span>&nbsp;<span class="op" id="4307576">!=</span>&nbsp;<span class="ident" id="4307579">nil</span>&nbsp;<span class="op" id="4307583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307589">return</span>&nbsp;<span class="ident" id="4307596"><a href="/compress/gzip/gzip.go.html#4306829">n</a></span><span class="op" id="4307597">,</span>&nbsp;<span class="ident" id="4307599"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307600">.</span><span class="ident" id="4307601">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307616">if</span>&nbsp;<span class="ident" id="4307619"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307620">.</span><span class="ident" id="4307621">Comment</span>&nbsp;<span class="op" id="4307629">!=</span>&nbsp;<span class="string" id="4307632">&#34;&#34;</span>&nbsp;<span class="op" id="4307635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307640"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307641">.</span><span class="ident" id="4307642">err</span>&nbsp;<span class="op" id="4307646">=</span>&nbsp;<span class="ident" id="4307648"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307649">.</span><span class="ident" id="4307650">writeString</span><span class="op" id="4307661">(</span><span class="ident" id="4307662"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307663">.</span><span class="ident" id="4307664">Comment</span><span class="op" id="4307671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307676">if</span>&nbsp;<span class="ident" id="4307679"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307680">.</span><span class="ident" id="4307681">err</span>&nbsp;<span class="op" id="4307685">!=</span>&nbsp;<span class="ident" id="4307688">nil</span>&nbsp;<span class="op" id="4307692">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307698">return</span>&nbsp;<span class="ident" id="4307705"><a href="/compress/gzip/gzip.go.html#4306829">n</a></span><span class="op" id="4307706">,</span>&nbsp;<span class="ident" id="4307708"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307709">.</span><span class="ident" id="4307710">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307725">if</span>&nbsp;<span class="ident" id="4307728"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307729">.</span><span class="ident" id="4307730">compressor</span>&nbsp;<span class="op" id="4307741">==</span>&nbsp;<span class="ident" id="4307744">nil</span>&nbsp;<span class="op" id="4307748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307753"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307754">.</span><span class="ident" id="4307755">compressor</span><span class="op" id="4307765">,</span>&nbsp;<span class="ident" id="4307767">_</span>&nbsp;<span class="op" id="4307769">=</span>&nbsp;<span class="ident" id="4307771"><a href="/compress/gzip/gzip.go.html#4302639">flate</a></span><span class="op" id="4307776">.</span><span class="ident" id="4307777">NewWriter</span><span class="op" id="4307786">(</span><span class="ident" id="4307787"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307788">.</span><span class="ident" id="4307789">w</span><span class="op" id="4307790">,</span>&nbsp;<span class="ident" id="4307792"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307793">.</span><span class="ident" id="4307794">level</span><span class="op" id="4307799">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4307806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307809"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307810">.</span><span class="ident" id="4307811">size</span>&nbsp;<span class="op" id="4307816">+=</span>&nbsp;<span class="builtintype" id="4307819">uint32</span><span class="op" id="4307825">(</span><span class="builtinfunc" id="4307826">len</span><span class="op" id="4307829">(</span><span class="ident" id="4307830"><a href="/compress/gzip/gzip.go.html#4306759">p</a></span><span class="op" id="4307831">)</span><span class="op" id="4307832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307835"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307836">.</span><span class="ident" id="4307837">digest</span><span class="op" id="4307843">.</span><span class="ident" id="4307844">Write</span><span class="op" id="4307849">(</span><span class="ident" id="4307850"><a href="/compress/gzip/gzip.go.html#4306759">p</a></span><span class="op" id="4307851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4307854"><a href="/compress/gzip/gzip.go.html#4306829">n</a></span><span class="op" id="4307855">,</span>&nbsp;<span class="ident" id="4307857"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307858">.</span><span class="ident" id="4307859">err</span>&nbsp;<span class="op" id="4307863">=</span>&nbsp;<span class="ident" id="4307865"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307866">.</span><span class="ident" id="4307867">compressor</span><span class="op" id="4307877">.</span><span class="ident" id="4307878">Write</span><span class="op" id="4307883">(</span><span class="ident" id="4307884"><a href="/compress/gzip/gzip.go.html#4306759">p</a></span><span class="op" id="4307885">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4307888">return</span>&nbsp;<span class="ident" id="4307895"><a href="/compress/gzip/gzip.go.html#4306829">n</a></span><span class="op" id="4307896">,</span>&nbsp;<span class="ident" id="4307898"><a href="/compress/gzip/gzip.go.html#4306742">z</a></span><span class="op" id="4307899">.</span><span class="ident" id="4307900">err</span><br>
<span class="lineno"></span><span class="op" id="4307904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4307907">//&nbsp;Flush&nbsp;flushes&nbsp;any&nbsp;pending&nbsp;compressed&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="4307978">//</span><br>
<span class="lineno">225</span><span class="comment" id="4307981">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;mainly&nbsp;in&nbsp;compressed&nbsp;network&nbsp;protocols,&nbsp;to&nbsp;ensure&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4308052">//&nbsp;a&nbsp;remote&nbsp;reader&nbsp;has&nbsp;enough&nbsp;data&nbsp;to&nbsp;reconstruct&nbsp;a&nbsp;packet.&nbsp;Flush&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="4308123">//&nbsp;not&nbsp;return&nbsp;until&nbsp;the&nbsp;data&nbsp;has&nbsp;been&nbsp;written.&nbsp;If&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="4308188">//&nbsp;writer&nbsp;returns&nbsp;an&nbsp;error,&nbsp;Flush&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4308242">//</span><br>
<span class="lineno">230</span><span class="comment" id="4308245">//&nbsp;In&nbsp;the&nbsp;terminology&nbsp;of&nbsp;the&nbsp;zlib&nbsp;library,&nbsp;Flush&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Z_SYNC_FLUSH.</span><br>
<span class="lineno"></span><span class="keyword" id="4308325">func</span>&nbsp;<span class="op" id="4308330">(</span><span class="ident" id="4308331">z</span>&nbsp;<span class="op" id="4308333">*</span><span class="ident" id="4308334"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4308340">)</span>&nbsp;<span class="ident" id="4308342">Flush</span><span class="op" id="4308347">(</span><span class="op" id="4308348">)</span>&nbsp;<span class="builtintype" id="4308350">error</span>&nbsp;<span class="op" id="4308356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308359">if</span>&nbsp;<span class="ident" id="4308362"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308363">.</span><span class="ident" id="4308364">err</span>&nbsp;<span class="op" id="4308368">!=</span>&nbsp;<span class="ident" id="4308371">nil</span>&nbsp;<span class="op" id="4308375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308379">return</span>&nbsp;<span class="ident" id="4308386"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308387">.</span><span class="ident" id="4308388">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308393">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308396">if</span>&nbsp;<span class="ident" id="4308399"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308400">.</span><span class="ident" id="4308401">closed</span>&nbsp;<span class="op" id="4308408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308412">return</span>&nbsp;<span class="ident" id="4308419">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308427">if</span>&nbsp;<span class="op" id="4308430">!</span><span class="ident" id="4308431"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308432">.</span><span class="ident" id="4308433">wroteHeader</span>&nbsp;<span class="op" id="4308445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4308449"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308450">.</span><span class="ident" id="4308451">Write</span><span class="op" id="4308456">(</span><span class="ident" id="4308457">nil</span><span class="op" id="4308460">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308464">if</span>&nbsp;<span class="ident" id="4308467"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308468">.</span><span class="ident" id="4308469">err</span>&nbsp;<span class="op" id="4308473">!=</span>&nbsp;<span class="ident" id="4308476">nil</span>&nbsp;<span class="op" id="4308480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308485">return</span>&nbsp;<span class="ident" id="4308492"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308493">.</span><span class="ident" id="4308494">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4308506"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308507">.</span><span class="ident" id="4308508">err</span>&nbsp;<span class="op" id="4308512">=</span>&nbsp;<span class="ident" id="4308514"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308515">.</span><span class="ident" id="4308516">compressor</span><span class="op" id="4308526">.</span><span class="ident" id="4308527">Flush</span><span class="op" id="4308532">(</span><span class="op" id="4308533">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308536">return</span>&nbsp;<span class="ident" id="4308543"><a href="/compress/gzip/gzip.go.html#4308331">z</a></span><span class="op" id="4308544">.</span><span class="ident" id="4308545">err</span><br>
<span class="lineno"></span><span class="op" id="4308549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4308552">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;Writer,&nbsp;flushing&nbsp;any&nbsp;unwritten&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="4308626">//&nbsp;io.Writer,&nbsp;but&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno">250</span><span class="keyword" id="4308685">func</span>&nbsp;<span class="op" id="4308690">(</span><span class="ident" id="4308691">z</span>&nbsp;<span class="op" id="4308693">*</span><span class="ident" id="4308694"><a href="/compress/gzip/gzip.go.html#4303126">Writer</a></span><span class="op" id="4308700">)</span>&nbsp;<span class="ident" id="4308702">Close</span><span class="op" id="4308707">(</span><span class="op" id="4308708">)</span>&nbsp;<span class="builtintype" id="4308710">error</span>&nbsp;<span class="op" id="4308716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308719">if</span>&nbsp;<span class="ident" id="4308722"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308723">.</span><span class="ident" id="4308724">err</span>&nbsp;<span class="op" id="4308728">!=</span>&nbsp;<span class="ident" id="4308731">nil</span>&nbsp;<span class="op" id="4308735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308739">return</span>&nbsp;<span class="ident" id="4308746"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308747">.</span><span class="ident" id="4308748">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308756">if</span>&nbsp;<span class="ident" id="4308759"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308760">.</span><span class="ident" id="4308761">closed</span>&nbsp;<span class="op" id="4308768">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308772">return</span>&nbsp;<span class="ident" id="4308779">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4308787"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308788">.</span><span class="ident" id="4308789">closed</span>&nbsp;<span class="op" id="4308796">=</span>&nbsp;<span class="builtintype" id="4308798">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308804">if</span>&nbsp;<span class="op" id="4308807">!</span><span class="ident" id="4308808"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308809">.</span><span class="ident" id="4308810">wroteHeader</span>&nbsp;<span class="op" id="4308822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4308826"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308827">.</span><span class="ident" id="4308828">Write</span><span class="op" id="4308833">(</span><span class="ident" id="4308834">nil</span><span class="op" id="4308837">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308841">if</span>&nbsp;<span class="ident" id="4308844"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308845">.</span><span class="ident" id="4308846">err</span>&nbsp;<span class="op" id="4308850">!=</span>&nbsp;<span class="ident" id="4308853">nil</span>&nbsp;<span class="op" id="4308857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308862">return</span>&nbsp;<span class="ident" id="4308869"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308870">.</span><span class="ident" id="4308871">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4308883"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308884">.</span><span class="ident" id="4308885">err</span>&nbsp;<span class="op" id="4308889">=</span>&nbsp;<span class="ident" id="4308891"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308892">.</span><span class="ident" id="4308893">compressor</span><span class="op" id="4308903">.</span><span class="ident" id="4308904">Close</span><span class="op" id="4308909">(</span><span class="op" id="4308910">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308913">if</span>&nbsp;<span class="ident" id="4308916"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308917">.</span><span class="ident" id="4308918">err</span>&nbsp;<span class="op" id="4308922">!=</span>&nbsp;<span class="ident" id="4308925">nil</span>&nbsp;<span class="op" id="4308929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4308933">return</span>&nbsp;<span class="ident" id="4308940"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308941">.</span><span class="ident" id="4308942">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4308947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4308950"><a href="/compress/gzip/gzip.go.html#4305387">put4</a></span><span class="op" id="4308954">(</span><span class="ident" id="4308955"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308956">.</span><span class="ident" id="4308957">buf</span><span class="op" id="4308960">[</span><span class="num" id="4308961">0</span><span class="op" id="4308962">:</span><span class="num" id="4308963">4</span><span class="op" id="4308964">]</span><span class="op" id="4308965">,</span>&nbsp;<span class="ident" id="4308967"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308968">.</span><span class="ident" id="4308969">digest</span><span class="op" id="4308975">.</span><span class="ident" id="4308976">Sum32</span><span class="op" id="4308981">(</span><span class="op" id="4308982">)</span><span class="op" id="4308983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4308986"><a href="/compress/gzip/gzip.go.html#4305387">put4</a></span><span class="op" id="4308990">(</span><span class="ident" id="4308991"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4308992">.</span><span class="ident" id="4308993">buf</span><span class="op" id="4308996">[</span><span class="num" id="4308997">4</span><span class="op" id="4308998">:</span><span class="num" id="4308999">8</span><span class="op" id="4309000">]</span><span class="op" id="4309001">,</span>&nbsp;<span class="ident" id="4309003"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4309004">.</span><span class="ident" id="4309005">size</span><span class="op" id="4309009">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4309012">_</span><span class="op" id="4309013">,</span>&nbsp;<span class="ident" id="4309015"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4309016">.</span><span class="ident" id="4309017">err</span>&nbsp;<span class="op" id="4309021">=</span>&nbsp;<span class="ident" id="4309023"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4309024">.</span><span class="ident" id="4309025">w</span><span class="op" id="4309026">.</span><span class="ident" id="4309027">Write</span><span class="op" id="4309032">(</span><span class="ident" id="4309033"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4309034">.</span><span class="ident" id="4309035">buf</span><span class="op" id="4309038">[</span><span class="num" id="4309039">0</span><span class="op" id="4309040">:</span><span class="num" id="4309041">8</span><span class="op" id="4309042">]</span><span class="op" id="4309043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4309046">return</span>&nbsp;<span class="ident" id="4309053"><a href="/compress/gzip/gzip.go.html#4308691">z</a></span><span class="op" id="4309054">.</span><span class="ident" id="4309055">err</span><br>
<span class="lineno"></span><span class="op" id="4309059">}</span>
</div>
</body>
</html>
