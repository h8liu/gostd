<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3209389">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3209445">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3209499">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3209550">package</span>&nbsp;<span class="ident" id="3209558">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3209566">import</span>&nbsp;<span class="op" id="3209573">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3209576">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3209582">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3209599">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3209610">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3209618">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3209625">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3209628">//&nbsp;Random&nbsp;number&nbsp;state.</span><br>
<span class="lineno"></span><span class="comment" id="3209652">//&nbsp;We&nbsp;generate&nbsp;random&nbsp;temporary&nbsp;file&nbsp;names&nbsp;so&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;good</span><br>
<span class="lineno"></span><span class="comment" id="3209718">//&nbsp;chance&nbsp;the&nbsp;file&nbsp;doesn&#39;t&nbsp;exist&nbsp;yet&nbsp;-&nbsp;keeps&nbsp;the&nbsp;number&nbsp;of&nbsp;tries&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3209786">//&nbsp;TempFile&nbsp;to&nbsp;a&nbsp;minimum.</span><br>
<span class="lineno"></span><span class="keyword" id="3209812">var</span>&nbsp;<span class="ident" id="3209816">rand</span>&nbsp;<span class="builtintype" id="3209821">uint32</span><br>
<span class="lineno">20</span><span class="keyword" id="3209828">var</span>&nbsp;<span class="ident" id="3209832">randmu</span>&nbsp;<span class="ident" id="3209839">sync</span><span class="op" id="3209843">.</span><span class="ident" id="3209844">Mutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3209851">func</span>&nbsp;<span class="ident" id="3209856">reseed</span><span class="op" id="3209862">(</span><span class="op" id="3209863">)</span>&nbsp;<span class="builtintype" id="3209865">uint32</span>&nbsp;<span class="op" id="3209872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209875">return</span>&nbsp;<span class="builtintype" id="3209882">uint32</span><span class="op" id="3209888">(</span><span class="ident" id="3209889">time</span><span class="op" id="3209893">.</span><span class="ident" id="3209894">Now</span><span class="op" id="3209897">(</span><span class="op" id="3209898">)</span><span class="op" id="3209899">.</span><span class="ident" id="3209900">UnixNano</span><span class="op" id="3209908">(</span><span class="op" id="3209909">)</span>&nbsp;<span class="op" id="3209911">+</span>&nbsp;<span class="ident" id="3209913">int64</span><span class="op" id="3209918">(</span><span class="ident" id="3209919">os</span><span class="op" id="3209921">.</span><span class="ident" id="3209922">Getpid</span><span class="op" id="3209928">(</span><span class="op" id="3209929">)</span><span class="op" id="3209930">)</span><span class="op" id="3209931">)</span><br>
<span class="lineno"></span><span class="op" id="3209933">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3209936">func</span>&nbsp;<span class="ident" id="3209941">nextSuffix</span><span class="op" id="3209951">(</span><span class="op" id="3209952">)</span>&nbsp;<span class="builtintype" id="3209954">string</span>&nbsp;<span class="op" id="3209961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209964">randmu</span><span class="op" id="3209970">.</span><span class="ident" id="3209971">Lock</span><span class="op" id="3209975">(</span><span class="op" id="3209976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209979">r</span>&nbsp;<span class="op" id="3209981">:=</span>&nbsp;<span class="ident" id="3209984">rand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209990">if</span>&nbsp;<span class="ident" id="3209993">r</span>&nbsp;<span class="op" id="3209995">==</span>&nbsp;<span class="num" id="3209998">0</span>&nbsp;<span class="op" id="3210000">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210004">r</span>&nbsp;<span class="op" id="3210006">=</span>&nbsp;<span class="ident" id="3210008">reseed</span><span class="op" id="3210014">(</span><span class="op" id="3210015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3210018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210021">r</span>&nbsp;<span class="op" id="3210023">=</span>&nbsp;<span class="ident" id="3210025">r</span><span class="op" id="3210026">*</span><span class="num" id="3210027">1664525</span>&nbsp;<span class="op" id="3210035">+</span>&nbsp;<span class="num" id="3210037">1013904223</span>&nbsp;<span class="comment" id="3210048">//&nbsp;constants&nbsp;from&nbsp;Numerical&nbsp;Recipes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210085">rand</span>&nbsp;<span class="op" id="3210090">=</span>&nbsp;<span class="ident" id="3210092">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210095">randmu</span><span class="op" id="3210101">.</span><span class="ident" id="3210102">Unlock</span><span class="op" id="3210108">(</span><span class="op" id="3210109">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210112">return</span>&nbsp;<span class="ident" id="3210119">strconv</span><span class="op" id="3210126">.</span><span class="ident" id="3210127">Itoa</span><span class="op" id="3210131">(</span><span class="builtintype" id="3210132">int</span><span class="op" id="3210135">(</span><span class="num" id="3210136">1e9</span>&nbsp;<span class="op" id="3210140">+</span>&nbsp;<span class="ident" id="3210142">r</span><span class="op" id="3210143">%</span><span class="num" id="3210144">1e9</span><span class="op" id="3210147">)</span><span class="op" id="3210148">)</span><span class="op" id="3210149">[</span><span class="num" id="3210150">1</span><span class="op" id="3210151">:</span><span class="op" id="3210152">]</span><br>
<span class="lineno"></span><span class="op" id="3210154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3210157">//&nbsp;TempFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;file&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3210219">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix,&nbsp;opens&nbsp;the&nbsp;file&nbsp;for&nbsp;reading</span><br>
<span class="lineno">40</span><span class="comment" id="3210284">//&nbsp;and&nbsp;writing,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="comment" id="3210336">//&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempFile&nbsp;uses&nbsp;the&nbsp;default&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3210403">//&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3210444">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempFile&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3210497">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;file.&nbsp;&nbsp;The&nbsp;caller&nbsp;can&nbsp;use&nbsp;f.Name()</span><br>
<span class="lineno">45</span><span class="comment" id="3210560">//&nbsp;to&nbsp;find&nbsp;the&nbsp;pathname&nbsp;of&nbsp;the&nbsp;file.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3210632">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;file&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3210677">func</span>&nbsp;<span class="ident" id="3210682">TempFile</span><span class="op" id="3210690">(</span><span class="ident" id="3210691">dir</span><span class="op" id="3210694">,</span>&nbsp;<span class="ident" id="3210696">prefix</span>&nbsp;<span class="builtintype" id="3210703">string</span><span class="op" id="3210709">)</span>&nbsp;<span class="op" id="3210711">(</span><span class="ident" id="3210712">f</span>&nbsp;<span class="op" id="3210714">*</span><span class="ident" id="3210715">os</span><span class="op" id="3210717">.</span><span class="ident" id="3210718">File</span><span class="op" id="3210722">,</span>&nbsp;<span class="ident" id="3210724">err</span>&nbsp;<span class="builtintype" id="3210728">error</span><span class="op" id="3210733">)</span>&nbsp;<span class="op" id="3210735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210738">if</span>&nbsp;<span class="ident" id="3210741">dir</span>&nbsp;<span class="op" id="3210745">==</span>&nbsp;<span class="string" id="3210748">&#34;&#34;</span>&nbsp;<span class="op" id="3210751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210755">dir</span>&nbsp;<span class="op" id="3210759">=</span>&nbsp;<span class="ident" id="3210761">os</span><span class="op" id="3210763">.</span><span class="ident" id="3210764">TempDir</span><span class="op" id="3210771">(</span><span class="op" id="3210772">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3210775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210779">nconflict</span>&nbsp;<span class="op" id="3210789">:=</span>&nbsp;<span class="num" id="3210792">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210795">for</span>&nbsp;<span class="ident" id="3210799">i</span>&nbsp;<span class="op" id="3210801">:=</span>&nbsp;<span class="num" id="3210804">0</span><span class="op" id="3210805">;</span>&nbsp;<span class="ident" id="3210807">i</span>&nbsp;<span class="op" id="3210809">&lt;</span>&nbsp;<span class="num" id="3210811">10000</span><span class="op" id="3210816">;</span>&nbsp;<span class="ident" id="3210818">i</span><span class="op" id="3210819">++</span>&nbsp;<span class="op" id="3210822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210826">name</span>&nbsp;<span class="op" id="3210831">:=</span>&nbsp;<span class="ident" id="3210834">filepath</span><span class="op" id="3210842">.</span><span class="ident" id="3210843">Join</span><span class="op" id="3210847">(</span><span class="ident" id="3210848">dir</span><span class="op" id="3210851">,</span>&nbsp;<span class="ident" id="3210853">prefix</span><span class="op" id="3210859">+</span><span class="ident" id="3210860">nextSuffix</span><span class="op" id="3210870">(</span><span class="op" id="3210871">)</span><span class="op" id="3210872">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210876">f</span><span class="op" id="3210877">,</span>&nbsp;<span class="ident" id="3210879">err</span>&nbsp;<span class="op" id="3210883">=</span>&nbsp;<span class="ident" id="3210885">os</span><span class="op" id="3210887">.</span><span class="ident" id="3210888">OpenFile</span><span class="op" id="3210896">(</span><span class="ident" id="3210897">name</span><span class="op" id="3210901">,</span>&nbsp;<span class="ident" id="3210903">os</span><span class="op" id="3210905">.</span><span class="ident" id="3210906">O_RDWR</span><span class="op" id="3210912">|</span><span class="ident" id="3210913">os</span><span class="op" id="3210915">.</span><span class="ident" id="3210916">O_CREATE</span><span class="op" id="3210924">|</span><span class="ident" id="3210925">os</span><span class="op" id="3210927">.</span><span class="ident" id="3210928">O_EXCL</span><span class="op" id="3210934">,</span>&nbsp;<span class="num" id="3210936">0600</span><span class="op" id="3210940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210944">if</span>&nbsp;<span class="ident" id="3210947">os</span><span class="op" id="3210949">.</span><span class="ident" id="3210950">IsExist</span><span class="op" id="3210957">(</span><span class="ident" id="3210958">err</span><span class="op" id="3210961">)</span>&nbsp;<span class="op" id="3210963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210968">if</span>&nbsp;<span class="ident" id="3210971">nconflict</span><span class="op" id="3210980">++</span><span class="op" id="3210982">;</span>&nbsp;<span class="ident" id="3210984">nconflict</span>&nbsp;<span class="op" id="3210994">&gt;</span>&nbsp;<span class="num" id="3210996">10</span>&nbsp;<span class="op" id="3210999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211005">rand</span>&nbsp;<span class="op" id="3211010">=</span>&nbsp;<span class="ident" id="3211012">reseed</span><span class="op" id="3211018">(</span><span class="op" id="3211019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211024">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211029">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211044">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211054">return</span><br>
<span class="lineno">65</span><span class="op" id="3211061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3211064">//&nbsp;TempDir&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;directory&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3211130">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;and&nbsp;returns&nbsp;the&nbsp;path&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3211195">//&nbsp;new&nbsp;directory.&nbsp;&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempDir&nbsp;uses&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="3211259">//&nbsp;default&nbsp;directory&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3211318">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempDir&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3211370">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;directory.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3211444">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;directory&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3211494">func</span>&nbsp;<span class="ident" id="3211499">TempDir</span><span class="op" id="3211506">(</span><span class="ident" id="3211507">dir</span><span class="op" id="3211510">,</span>&nbsp;<span class="ident" id="3211512">prefix</span>&nbsp;<span class="builtintype" id="3211519">string</span><span class="op" id="3211525">)</span>&nbsp;<span class="op" id="3211527">(</span><span class="ident" id="3211528">name</span>&nbsp;<span class="builtintype" id="3211533">string</span><span class="op" id="3211539">,</span>&nbsp;<span class="ident" id="3211541">err</span>&nbsp;<span class="builtintype" id="3211545">error</span><span class="op" id="3211550">)</span>&nbsp;<span class="op" id="3211552">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211555">if</span>&nbsp;<span class="ident" id="3211558">dir</span>&nbsp;<span class="op" id="3211562">==</span>&nbsp;<span class="string" id="3211565">&#34;&#34;</span>&nbsp;<span class="op" id="3211568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211572">dir</span>&nbsp;<span class="op" id="3211576">=</span>&nbsp;<span class="ident" id="3211578">os</span><span class="op" id="3211580">.</span><span class="ident" id="3211581">TempDir</span><span class="op" id="3211588">(</span><span class="op" id="3211589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211596">nconflict</span>&nbsp;<span class="op" id="3211606">:=</span>&nbsp;<span class="num" id="3211609">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211612">for</span>&nbsp;<span class="ident" id="3211616">i</span>&nbsp;<span class="op" id="3211618">:=</span>&nbsp;<span class="num" id="3211621">0</span><span class="op" id="3211622">;</span>&nbsp;<span class="ident" id="3211624">i</span>&nbsp;<span class="op" id="3211626">&lt;</span>&nbsp;<span class="num" id="3211628">10000</span><span class="op" id="3211633">;</span>&nbsp;<span class="ident" id="3211635">i</span><span class="op" id="3211636">++</span>&nbsp;<span class="op" id="3211639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211643">try</span>&nbsp;<span class="op" id="3211647">:=</span>&nbsp;<span class="ident" id="3211650">filepath</span><span class="op" id="3211658">.</span><span class="ident" id="3211659">Join</span><span class="op" id="3211663">(</span><span class="ident" id="3211664">dir</span><span class="op" id="3211667">,</span>&nbsp;<span class="ident" id="3211669">prefix</span><span class="op" id="3211675">+</span><span class="ident" id="3211676">nextSuffix</span><span class="op" id="3211686">(</span><span class="op" id="3211687">)</span><span class="op" id="3211688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211692">err</span>&nbsp;<span class="op" id="3211696">=</span>&nbsp;<span class="ident" id="3211698">os</span><span class="op" id="3211700">.</span><span class="ident" id="3211701">Mkdir</span><span class="op" id="3211706">(</span><span class="ident" id="3211707">try</span><span class="op" id="3211710">,</span>&nbsp;<span class="num" id="3211712">0700</span><span class="op" id="3211716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211720">if</span>&nbsp;<span class="ident" id="3211723">os</span><span class="op" id="3211725">.</span><span class="ident" id="3211726">IsExist</span><span class="op" id="3211733">(</span><span class="ident" id="3211734">err</span><span class="op" id="3211737">)</span>&nbsp;<span class="op" id="3211739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211744">if</span>&nbsp;<span class="ident" id="3211747">nconflict</span><span class="op" id="3211756">++</span><span class="op" id="3211758">;</span>&nbsp;<span class="ident" id="3211760">nconflict</span>&nbsp;<span class="op" id="3211770">&gt;</span>&nbsp;<span class="num" id="3211772">10</span>&nbsp;<span class="op" id="3211775">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211781">rand</span>&nbsp;<span class="op" id="3211786">=</span>&nbsp;<span class="ident" id="3211788">reseed</span><span class="op" id="3211794">(</span><span class="op" id="3211795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211805">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211820">if</span>&nbsp;<span class="ident" id="3211823">err</span>&nbsp;<span class="op" id="3211827">==</span>&nbsp;<span class="ident" id="3211830">nil</span>&nbsp;<span class="op" id="3211834">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211839">name</span>&nbsp;<span class="op" id="3211844">=</span>&nbsp;<span class="ident" id="3211846">try</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211856">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211866">return</span><br>
<span class="lineno">95</span><span class="op" id="3211873">}</span>
</div>
</body>
</html>
