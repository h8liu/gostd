<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5364983">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5365038">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5365092">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5365143">package</span>&nbsp;<span class="ident" id="5365151">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5365157">import</span>&nbsp;<span class="op" id="5365164">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5365167">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5365177">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="5365180">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5365253">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="5365321">type</span>&nbsp;<span class="ident" id="5365326">tagOptions</span>&nbsp;<span class="builtintype" id="5365337">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5365345">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5365408">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="5365436">func</span>&nbsp;<span class="ident" id="5365441">parseTag</span><span class="op" id="5365449">(</span><span class="ident" id="5365450">tag</span>&nbsp;<span class="builtintype" id="5365454">string</span><span class="op" id="5365460">)</span>&nbsp;<span class="op" id="5365462">(</span><span class="builtintype" id="5365463">string</span><span class="op" id="5365469">,</span>&nbsp;<span class="ident" id="5365471">tagOptions</span><span class="op" id="5365481">)</span>&nbsp;<span class="op" id="5365483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365486">if</span>&nbsp;<span class="ident" id="5365489">idx</span>&nbsp;<span class="op" id="5365493">:=</span>&nbsp;<span class="ident" id="5365496">strings</span><span class="op" id="5365503">.</span><span class="ident" id="5365504">Index</span><span class="op" id="5365509">(</span><span class="ident" id="5365510">tag</span><span class="op" id="5365513">,</span>&nbsp;<span class="string" id="5365515">&#34;,&#34;</span><span class="op" id="5365518">)</span><span class="op" id="5365519">;</span>&nbsp;<span class="ident" id="5365521">idx</span>&nbsp;<span class="op" id="5365525">!=</span>&nbsp;<span class="op" id="5365528">-</span><span class="num" id="5365529">1</span>&nbsp;<span class="op" id="5365531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365535">return</span>&nbsp;<span class="ident" id="5365542">tag</span><span class="op" id="5365545">[</span><span class="op" id="5365546">:</span><span class="ident" id="5365547">idx</span><span class="op" id="5365550">]</span><span class="op" id="5365551">,</span>&nbsp;<span class="ident" id="5365553">tagOptions</span><span class="op" id="5365563">(</span><span class="ident" id="5365564">tag</span><span class="op" id="5365567">[</span><span class="ident" id="5365568">idx</span><span class="op" id="5365571">+</span><span class="num" id="5365572">1</span><span class="op" id="5365573">:</span><span class="op" id="5365574">]</span><span class="op" id="5365575">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5365578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365581">return</span>&nbsp;<span class="ident" id="5365588">tag</span><span class="op" id="5365591">,</span>&nbsp;<span class="ident" id="5365593">tagOptions</span><span class="op" id="5365603">(</span><span class="string" id="5365604">&#34;&#34;</span><span class="op" id="5365606">)</span><br>
<span class="lineno"></span><span class="op" id="5365608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5365611">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="5365673">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5365742">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="5365772">func</span>&nbsp;<span class="op" id="5365777">(</span><span class="ident" id="5365778">o</span>&nbsp;<span class="ident" id="5365780">tagOptions</span><span class="op" id="5365790">)</span>&nbsp;<span class="ident" id="5365792">Contains</span><span class="op" id="5365800">(</span><span class="ident" id="5365801">optionName</span>&nbsp;<span class="builtintype" id="5365812">string</span><span class="op" id="5365818">)</span>&nbsp;<span class="builtintype" id="5365820">bool</span>&nbsp;<span class="op" id="5365825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365828">if</span>&nbsp;<span class="builtinfunc" id="5365831">len</span><span class="op" id="5365834">(</span><span class="ident" id="5365835">o</span><span class="op" id="5365836">)</span>&nbsp;<span class="op" id="5365838">==</span>&nbsp;<span class="num" id="5365841">0</span>&nbsp;<span class="op" id="5365843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365847">return</span>&nbsp;<span class="builtintype" id="5365854">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5365861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365864">s</span>&nbsp;<span class="op" id="5365866">:=</span>&nbsp;<span class="builtintype" id="5365869">string</span><span class="op" id="5365875">(</span><span class="ident" id="5365876">o</span><span class="op" id="5365877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365880">for</span>&nbsp;<span class="ident" id="5365884">s</span>&nbsp;<span class="op" id="5365886">!=</span>&nbsp;<span class="string" id="5365889">&#34;&#34;</span>&nbsp;<span class="op" id="5365892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365896">var</span>&nbsp;<span class="ident" id="5365900">next</span>&nbsp;<span class="builtintype" id="5365905">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365914">i</span>&nbsp;<span class="op" id="5365916">:=</span>&nbsp;<span class="ident" id="5365919">strings</span><span class="op" id="5365926">.</span><span class="ident" id="5365927">Index</span><span class="op" id="5365932">(</span><span class="ident" id="5365933">s</span><span class="op" id="5365934">,</span>&nbsp;<span class="string" id="5365936">&#34;,&#34;</span><span class="op" id="5365939">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365943">if</span>&nbsp;<span class="ident" id="5365946">i</span>&nbsp;<span class="op" id="5365948">&gt;=</span>&nbsp;<span class="num" id="5365951">0</span>&nbsp;<span class="op" id="5365953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365958">s</span><span class="op" id="5365959">,</span>&nbsp;<span class="ident" id="5365961">next</span>&nbsp;<span class="op" id="5365966">=</span>&nbsp;<span class="ident" id="5365968">s</span><span class="op" id="5365969">[</span><span class="op" id="5365970">:</span><span class="ident" id="5365971">i</span><span class="op" id="5365972">]</span><span class="op" id="5365973">,</span>&nbsp;<span class="ident" id="5365975">s</span><span class="op" id="5365976">[</span><span class="ident" id="5365977">i</span><span class="op" id="5365978">+</span><span class="num" id="5365979">1</span><span class="op" id="5365980">:</span><span class="op" id="5365981">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5365985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365989">if</span>&nbsp;<span class="ident" id="5365992">s</span>&nbsp;<span class="op" id="5365994">==</span>&nbsp;<span class="ident" id="5365997">optionName</span>&nbsp;<span class="op" id="5366008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366013">return</span>&nbsp;<span class="builtintype" id="5366020">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5366027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366031">s</span>&nbsp;<span class="op" id="5366033">=</span>&nbsp;<span class="ident" id="5366035">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5366041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366044">return</span>&nbsp;<span class="builtintype" id="5366051">false</span><br>
<span class="lineno"></span><span class="op" id="5366057">}</span>
</div>
</body>
</html>
