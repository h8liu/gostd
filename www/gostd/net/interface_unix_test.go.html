<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8241622">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8241678">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8241732">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8241783">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8241840">package</span>&nbsp;<span class="ident" id="8241848">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8241853">import</span>&nbsp;<span class="op" id="8241860">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241863">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241869">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241880">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241891">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241902">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8241909">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8241912">type</span>&nbsp;<span class="ident" id="8241917">testInterface</span>&nbsp;<span class="keyword" id="8241931">struct</span>&nbsp;<span class="op" id="8241938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241941">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8241954">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241962">local</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8241975">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241983">remote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8241996">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242004">setupCmds</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242017">[</span><span class="op" id="8242018">]</span><span class="op" id="8242019">*</span><span class="ident" id="8242020">exec</span><span class="op" id="8242024">.</span><span class="ident" id="8242025">Cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242030">teardownCmds</span>&nbsp;<span class="op" id="8242043">[</span><span class="op" id="8242044">]</span><span class="op" id="8242045">*</span><span class="ident" id="8242046">exec</span><span class="op" id="8242050">.</span><span class="ident" id="8242051">Cmd</span><br>
<span class="lineno"></span><span class="op" id="8242055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8242058">func</span>&nbsp;<span class="op" id="8242063">(</span><span class="ident" id="8242064">ti</span>&nbsp;<span class="op" id="8242067">*</span><span class="ident" id="8242068">testInterface</span><span class="op" id="8242081">)</span>&nbsp;<span class="ident" id="8242083">setup</span><span class="op" id="8242088">(</span><span class="op" id="8242089">)</span>&nbsp;<span class="builtintype" id="8242091">error</span>&nbsp;<span class="op" id="8242097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242100">for</span>&nbsp;<span class="ident" id="8242104">_</span><span class="op" id="8242105">,</span>&nbsp;<span class="ident" id="8242107">cmd</span>&nbsp;<span class="op" id="8242111">:=</span>&nbsp;<span class="keyword" id="8242114">range</span>&nbsp;<span class="ident" id="8242120">ti</span><span class="op" id="8242122">.</span><span class="ident" id="8242123">setupCmds</span>&nbsp;<span class="op" id="8242133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242137">if</span>&nbsp;<span class="ident" id="8242140">err</span>&nbsp;<span class="op" id="8242144">:=</span>&nbsp;<span class="ident" id="8242147">cmd</span><span class="op" id="8242150">.</span><span class="ident" id="8242151">Run</span><span class="op" id="8242154">(</span><span class="op" id="8242155">)</span><span class="op" id="8242156">;</span>&nbsp;<span class="ident" id="8242158">err</span>&nbsp;<span class="op" id="8242162">!=</span>&nbsp;<span class="ident" id="8242165">nil</span>&nbsp;<span class="op" id="8242169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242174">return</span>&nbsp;<span class="ident" id="8242181">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242187">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242193">return</span>&nbsp;<span class="ident" id="8242200">nil</span><br>
<span class="lineno"></span><span class="op" id="8242204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8242207">func</span>&nbsp;<span class="op" id="8242212">(</span><span class="ident" id="8242213">ti</span>&nbsp;<span class="op" id="8242216">*</span><span class="ident" id="8242217">testInterface</span><span class="op" id="8242230">)</span>&nbsp;<span class="ident" id="8242232">teardown</span><span class="op" id="8242240">(</span><span class="op" id="8242241">)</span>&nbsp;<span class="builtintype" id="8242243">error</span>&nbsp;<span class="op" id="8242249">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242252">for</span>&nbsp;<span class="ident" id="8242256">_</span><span class="op" id="8242257">,</span>&nbsp;<span class="ident" id="8242259">cmd</span>&nbsp;<span class="op" id="8242263">:=</span>&nbsp;<span class="keyword" id="8242266">range</span>&nbsp;<span class="ident" id="8242272">ti</span><span class="op" id="8242274">.</span><span class="ident" id="8242275">teardownCmds</span>&nbsp;<span class="op" id="8242288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242292">if</span>&nbsp;<span class="ident" id="8242295">err</span>&nbsp;<span class="op" id="8242299">:=</span>&nbsp;<span class="ident" id="8242302">cmd</span><span class="op" id="8242305">.</span><span class="ident" id="8242306">Run</span><span class="op" id="8242309">(</span><span class="op" id="8242310">)</span><span class="op" id="8242311">;</span>&nbsp;<span class="ident" id="8242313">err</span>&nbsp;<span class="op" id="8242317">!=</span>&nbsp;<span class="ident" id="8242320">nil</span>&nbsp;<span class="op" id="8242324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242329">return</span>&nbsp;<span class="ident" id="8242336">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242345">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242348">return</span>&nbsp;<span class="ident" id="8242355">nil</span><br>
<span class="lineno"></span><span class="op" id="8242359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8242362">func</span>&nbsp;<span class="ident" id="8242367">TestPointToPointInterface</span><span class="op" id="8242392">(</span><span class="ident" id="8242393">t</span>&nbsp;<span class="op" id="8242395">*</span><span class="ident" id="8242396">testing</span><span class="op" id="8242403">.</span><span class="ident" id="8242404">T</span><span class="op" id="8242405">)</span>&nbsp;<span class="op" id="8242407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242410">if</span>&nbsp;<span class="ident" id="8242413">testing</span><span class="op" id="8242420">.</span><span class="ident" id="8242421">Short</span><span class="op" id="8242426">(</span><span class="op" id="8242427">)</span>&nbsp;<span class="op" id="8242429">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242433">t</span><span class="op" id="8242434">.</span><span class="ident" id="8242435">Skip</span><span class="op" id="8242439">(</span><span class="string" id="8242440">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8242469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242475">switch</span>&nbsp;<span class="op" id="8242482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242485">case</span>&nbsp;<span class="ident" id="8242490">runtime</span><span class="op" id="8242497">.</span><span class="ident" id="8242498">GOOS</span>&nbsp;<span class="op" id="8242503">==</span>&nbsp;<span class="string" id="8242506">&#34;darwin&#34;</span><span class="op" id="8242514">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242518">t</span><span class="op" id="8242519">.</span><span class="ident" id="8242520">Skipf</span><span class="op" id="8242525">(</span><span class="string" id="8242526">&#34;skipping&nbsp;read&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8242552">,</span>&nbsp;<span class="ident" id="8242554">runtime</span><span class="op" id="8242561">.</span><span class="ident" id="8242562">GOOS</span><span class="op" id="8242566">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242572">if</span>&nbsp;<span class="ident" id="8242575">os</span><span class="op" id="8242577">.</span><span class="ident" id="8242578">Getuid</span><span class="op" id="8242584">(</span><span class="op" id="8242585">)</span>&nbsp;<span class="op" id="8242587">!=</span>&nbsp;<span class="num" id="8242590">0</span>&nbsp;<span class="op" id="8242592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242596">t</span><span class="op" id="8242597">.</span><span class="ident" id="8242598">Skip</span><span class="op" id="8242602">(</span><span class="string" id="8242603">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="8242632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242639">local</span><span class="op" id="8242644">,</span>&nbsp;<span class="ident" id="8242646">remote</span>&nbsp;<span class="op" id="8242653">:=</span>&nbsp;<span class="string" id="8242656">&#34;169.254.0.1&#34;</span><span class="op" id="8242669">,</span>&nbsp;<span class="string" id="8242671">&#34;169.254.0.254&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242688">ip</span>&nbsp;<span class="op" id="8242691">:=</span>&nbsp;<span class="ident" id="8242694">ParseIP</span><span class="op" id="8242701">(</span><span class="ident" id="8242702">remote</span><span class="op" id="8242708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242711">for</span>&nbsp;<span class="ident" id="8242715">i</span>&nbsp;<span class="op" id="8242717">:=</span>&nbsp;<span class="num" id="8242720">0</span><span class="op" id="8242721">;</span>&nbsp;<span class="ident" id="8242723">i</span>&nbsp;<span class="op" id="8242725">&lt;</span>&nbsp;<span class="num" id="8242727">3</span><span class="op" id="8242728">;</span>&nbsp;<span class="ident" id="8242730">i</span><span class="op" id="8242731">++</span>&nbsp;<span class="op" id="8242734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242738">ti</span>&nbsp;<span class="op" id="8242741">:=</span>&nbsp;<span class="op" id="8242744">&amp;</span><span class="ident" id="8242745">testInterface</span><span class="op" id="8242758">{</span><span class="op" id="8242759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242763">if</span>&nbsp;<span class="ident" id="8242766">err</span>&nbsp;<span class="op" id="8242770">:=</span>&nbsp;<span class="ident" id="8242773">ti</span><span class="op" id="8242775">.</span><span class="ident" id="8242776">setPointToPoint</span><span class="op" id="8242791">(</span><span class="num" id="8242792">5963</span><span class="op" id="8242796">+</span><span class="ident" id="8242797">i</span><span class="op" id="8242798">,</span>&nbsp;<span class="ident" id="8242800">local</span><span class="op" id="8242805">,</span>&nbsp;<span class="ident" id="8242807">remote</span><span class="op" id="8242813">)</span><span class="op" id="8242814">;</span>&nbsp;<span class="ident" id="8242816">err</span>&nbsp;<span class="op" id="8242820">!=</span>&nbsp;<span class="ident" id="8242823">nil</span>&nbsp;<span class="op" id="8242827">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242832">t</span><span class="op" id="8242833">.</span><span class="ident" id="8242834">Skipf</span><span class="op" id="8242839">(</span><span class="string" id="8242840">&#34;test&nbsp;requries&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="8242876">,</span>&nbsp;<span class="ident" id="8242878">err</span><span class="op" id="8242881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8242889">if</span>&nbsp;<span class="ident" id="8242892">err</span>&nbsp;<span class="op" id="8242896">:=</span>&nbsp;<span class="ident" id="8242899">ti</span><span class="op" id="8242901">.</span><span class="ident" id="8242902">setup</span><span class="op" id="8242907">(</span><span class="op" id="8242908">)</span><span class="op" id="8242909">;</span>&nbsp;<span class="ident" id="8242911">err</span>&nbsp;<span class="op" id="8242915">!=</span>&nbsp;<span class="ident" id="8242918">nil</span>&nbsp;<span class="op" id="8242922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242927">t</span><span class="op" id="8242928">.</span><span class="ident" id="8242929">Fatalf</span><span class="op" id="8242935">(</span><span class="string" id="8242936">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8242968">,</span>&nbsp;<span class="ident" id="8242970">err</span><span class="op" id="8242973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242977">}</span>&nbsp;<span class="keyword" id="8242979">else</span>&nbsp;<span class="op" id="8242984">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8242989">time</span><span class="op" id="8242993">.</span><span class="ident" id="8242994">Sleep</span><span class="op" id="8242999">(</span><span class="num" id="8243000">3</span>&nbsp;<span class="op" id="8243002">*</span>&nbsp;<span class="ident" id="8243004">time</span><span class="op" id="8243008">.</span><span class="ident" id="8243009">Millisecond</span><span class="op" id="8243020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243028">ift</span><span class="op" id="8243031">,</span>&nbsp;<span class="ident" id="8243033">err</span>&nbsp;<span class="op" id="8243037">:=</span>&nbsp;<span class="ident" id="8243040">Interfaces</span><span class="op" id="8243050">(</span><span class="op" id="8243051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243055">if</span>&nbsp;<span class="ident" id="8243058">err</span>&nbsp;<span class="op" id="8243062">!=</span>&nbsp;<span class="ident" id="8243065">nil</span>&nbsp;<span class="op" id="8243069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243074">ti</span><span class="op" id="8243076">.</span><span class="ident" id="8243077">teardown</span><span class="op" id="8243085">(</span><span class="op" id="8243086">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243091">t</span><span class="op" id="8243092">.</span><span class="ident" id="8243093">Fatalf</span><span class="op" id="8243099">(</span><span class="string" id="8243100">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8243123">,</span>&nbsp;<span class="ident" id="8243125">err</span><span class="op" id="8243128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243136">for</span>&nbsp;<span class="ident" id="8243140">_</span><span class="op" id="8243141">,</span>&nbsp;<span class="ident" id="8243143">ifi</span>&nbsp;<span class="op" id="8243147">:=</span>&nbsp;<span class="keyword" id="8243150">range</span>&nbsp;<span class="ident" id="8243156">ift</span>&nbsp;<span class="op" id="8243160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243165">if</span>&nbsp;<span class="ident" id="8243168">ti</span><span class="op" id="8243170">.</span><span class="ident" id="8243171">name</span>&nbsp;<span class="op" id="8243176">==</span>&nbsp;<span class="ident" id="8243179">ifi</span><span class="op" id="8243182">.</span><span class="ident" id="8243183">Name</span>&nbsp;<span class="op" id="8243188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243194">ifat</span><span class="op" id="8243198">,</span>&nbsp;<span class="ident" id="8243200">err</span>&nbsp;<span class="op" id="8243204">:=</span>&nbsp;<span class="ident" id="8243207">ifi</span><span class="op" id="8243210">.</span><span class="ident" id="8243211">Addrs</span><span class="op" id="8243216">(</span><span class="op" id="8243217">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243223">if</span>&nbsp;<span class="ident" id="8243226">err</span>&nbsp;<span class="op" id="8243230">!=</span>&nbsp;<span class="ident" id="8243233">nil</span>&nbsp;<span class="op" id="8243237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243244">ti</span><span class="op" id="8243246">.</span><span class="ident" id="8243247">teardown</span><span class="op" id="8243255">(</span><span class="op" id="8243256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243263">t</span><span class="op" id="8243264">.</span><span class="ident" id="8243265">Fatalf</span><span class="op" id="8243271">(</span><span class="string" id="8243272">&#34;Interface.Addrs&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8243300">,</span>&nbsp;<span class="ident" id="8243302">err</span><span class="op" id="8243305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243317">for</span>&nbsp;<span class="ident" id="8243321">_</span><span class="op" id="8243322">,</span>&nbsp;<span class="ident" id="8243324">ifa</span>&nbsp;<span class="op" id="8243328">:=</span>&nbsp;<span class="keyword" id="8243331">range</span>&nbsp;<span class="ident" id="8243337">ifat</span>&nbsp;<span class="op" id="8243342">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243349">if</span>&nbsp;<span class="ident" id="8243352">ip</span><span class="op" id="8243354">.</span><span class="ident" id="8243355">Equal</span><span class="op" id="8243360">(</span><span class="ident" id="8243361">ifa</span><span class="op" id="8243364">.</span><span class="op" id="8243365">(</span><span class="op" id="8243366">*</span><span class="ident" id="8243367">IPNet</span><span class="op" id="8243372">)</span><span class="op" id="8243373">.</span><span class="ident" id="8243374">IP</span><span class="op" id="8243376">)</span>&nbsp;<span class="op" id="8243378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243386">ti</span><span class="op" id="8243388">.</span><span class="ident" id="8243389">teardown</span><span class="op" id="8243397">(</span><span class="op" id="8243398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243406">t</span><span class="op" id="8243407">.</span><span class="ident" id="8243408">Fatalf</span><span class="op" id="8243414">(</span><span class="string" id="8243415">&#34;got&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8243432">,</span>&nbsp;<span class="ident" id="8243434">ip</span><span class="op" id="8243436">,</span>&nbsp;<span class="ident" id="8243438">local</span><span class="op" id="8243443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243456">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243469">if</span>&nbsp;<span class="ident" id="8243472">err</span>&nbsp;<span class="op" id="8243476">:=</span>&nbsp;<span class="ident" id="8243479">ti</span><span class="op" id="8243481">.</span><span class="ident" id="8243482">teardown</span><span class="op" id="8243490">(</span><span class="op" id="8243491">)</span><span class="op" id="8243492">;</span>&nbsp;<span class="ident" id="8243494">err</span>&nbsp;<span class="op" id="8243498">!=</span>&nbsp;<span class="ident" id="8243501">nil</span>&nbsp;<span class="op" id="8243505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243510">t</span><span class="op" id="8243511">.</span><span class="ident" id="8243512">Fatalf</span><span class="op" id="8243518">(</span><span class="string" id="8243519">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8243554">,</span>&nbsp;<span class="ident" id="8243556">err</span><span class="op" id="8243559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243563">}</span>&nbsp;<span class="keyword" id="8243565">else</span>&nbsp;<span class="op" id="8243570">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243575">time</span><span class="op" id="8243579">.</span><span class="ident" id="8243580">Sleep</span><span class="op" id="8243585">(</span><span class="num" id="8243586">3</span>&nbsp;<span class="op" id="8243588">*</span>&nbsp;<span class="ident" id="8243590">time</span><span class="op" id="8243594">.</span><span class="ident" id="8243595">Millisecond</span><span class="op" id="8243606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243613">}</span><br>
<span class="lineno"></span><span class="op" id="8243615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="8243618">func</span>&nbsp;<span class="ident" id="8243623">TestInterfaceArrivalAndDeparture</span><span class="op" id="8243655">(</span><span class="ident" id="8243656">t</span>&nbsp;<span class="op" id="8243658">*</span><span class="ident" id="8243659">testing</span><span class="op" id="8243666">.</span><span class="ident" id="8243667">T</span><span class="op" id="8243668">)</span>&nbsp;<span class="op" id="8243670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243673">if</span>&nbsp;<span class="ident" id="8243676">testing</span><span class="op" id="8243683">.</span><span class="ident" id="8243684">Short</span><span class="op" id="8243689">(</span><span class="op" id="8243690">)</span>&nbsp;<span class="op" id="8243692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243696">t</span><span class="op" id="8243697">.</span><span class="ident" id="8243698">Skip</span><span class="op" id="8243702">(</span><span class="string" id="8243703">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8243732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243738">if</span>&nbsp;<span class="ident" id="8243741">os</span><span class="op" id="8243743">.</span><span class="ident" id="8243744">Getuid</span><span class="op" id="8243750">(</span><span class="op" id="8243751">)</span>&nbsp;<span class="op" id="8243753">!=</span>&nbsp;<span class="num" id="8243756">0</span>&nbsp;<span class="op" id="8243758">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243762">t</span><span class="op" id="8243763">.</span><span class="ident" id="8243764">Skip</span><span class="op" id="8243768">(</span><span class="string" id="8243769">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="8243798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243805">for</span>&nbsp;<span class="ident" id="8243809">i</span>&nbsp;<span class="op" id="8243811">:=</span>&nbsp;<span class="num" id="8243814">0</span><span class="op" id="8243815">;</span>&nbsp;<span class="ident" id="8243817">i</span>&nbsp;<span class="op" id="8243819">&lt;</span>&nbsp;<span class="num" id="8243821">3</span><span class="op" id="8243822">;</span>&nbsp;<span class="ident" id="8243824">i</span><span class="op" id="8243825">++</span>&nbsp;<span class="op" id="8243828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243832">ift1</span><span class="op" id="8243836">,</span>&nbsp;<span class="ident" id="8243838">err</span>&nbsp;<span class="op" id="8243842">:=</span>&nbsp;<span class="ident" id="8243845">Interfaces</span><span class="op" id="8243855">(</span><span class="op" id="8243856">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243860">if</span>&nbsp;<span class="ident" id="8243863">err</span>&nbsp;<span class="op" id="8243867">!=</span>&nbsp;<span class="ident" id="8243870">nil</span>&nbsp;<span class="op" id="8243874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243879">t</span><span class="op" id="8243880">.</span><span class="ident" id="8243881">Fatalf</span><span class="op" id="8243887">(</span><span class="string" id="8243888">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8243911">,</span>&nbsp;<span class="ident" id="8243913">err</span><span class="op" id="8243916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8243924">ti</span>&nbsp;<span class="op" id="8243927">:=</span>&nbsp;<span class="op" id="8243930">&amp;</span><span class="ident" id="8243931">testInterface</span><span class="op" id="8243944">{</span><span class="op" id="8243945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8243949">if</span>&nbsp;<span class="ident" id="8243952">err</span>&nbsp;<span class="op" id="8243956">:=</span>&nbsp;<span class="ident" id="8243959">ti</span><span class="op" id="8243961">.</span><span class="ident" id="8243962">setBroadcast</span><span class="op" id="8243974">(</span><span class="num" id="8243975">5682</span>&nbsp;<span class="op" id="8243980">+</span>&nbsp;<span class="ident" id="8243982">i</span><span class="op" id="8243983">)</span><span class="op" id="8243984">;</span>&nbsp;<span class="ident" id="8243986">err</span>&nbsp;<span class="op" id="8243990">!=</span>&nbsp;<span class="ident" id="8243993">nil</span>&nbsp;<span class="op" id="8243997">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244002">t</span><span class="op" id="8244003">.</span><span class="ident" id="8244004">Skipf</span><span class="op" id="8244009">(</span><span class="string" id="8244010">&#34;test&nbsp;requires&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="8244046">,</span>&nbsp;<span class="ident" id="8244048">err</span><span class="op" id="8244051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244059">if</span>&nbsp;<span class="ident" id="8244062">err</span>&nbsp;<span class="op" id="8244066">:=</span>&nbsp;<span class="ident" id="8244069">ti</span><span class="op" id="8244071">.</span><span class="ident" id="8244072">setup</span><span class="op" id="8244077">(</span><span class="op" id="8244078">)</span><span class="op" id="8244079">;</span>&nbsp;<span class="ident" id="8244081">err</span>&nbsp;<span class="op" id="8244085">!=</span>&nbsp;<span class="ident" id="8244088">nil</span>&nbsp;<span class="op" id="8244092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244097">t</span><span class="op" id="8244098">.</span><span class="ident" id="8244099">Fatalf</span><span class="op" id="8244105">(</span><span class="string" id="8244106">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8244138">,</span>&nbsp;<span class="ident" id="8244140">err</span><span class="op" id="8244143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244147">}</span>&nbsp;<span class="keyword" id="8244149">else</span>&nbsp;<span class="op" id="8244154">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244159">time</span><span class="op" id="8244163">.</span><span class="ident" id="8244164">Sleep</span><span class="op" id="8244169">(</span><span class="num" id="8244170">3</span>&nbsp;<span class="op" id="8244172">*</span>&nbsp;<span class="ident" id="8244174">time</span><span class="op" id="8244178">.</span><span class="ident" id="8244179">Millisecond</span><span class="op" id="8244190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244198">ift2</span><span class="op" id="8244202">,</span>&nbsp;<span class="ident" id="8244204">err</span>&nbsp;<span class="op" id="8244208">:=</span>&nbsp;<span class="ident" id="8244211">Interfaces</span><span class="op" id="8244221">(</span><span class="op" id="8244222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244226">if</span>&nbsp;<span class="ident" id="8244229">err</span>&nbsp;<span class="op" id="8244233">!=</span>&nbsp;<span class="ident" id="8244236">nil</span>&nbsp;<span class="op" id="8244240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244245">ti</span><span class="op" id="8244247">.</span><span class="ident" id="8244248">teardown</span><span class="op" id="8244256">(</span><span class="op" id="8244257">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244262">t</span><span class="op" id="8244263">.</span><span class="ident" id="8244264">Fatalf</span><span class="op" id="8244270">(</span><span class="string" id="8244271">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8244294">,</span>&nbsp;<span class="ident" id="8244296">err</span><span class="op" id="8244299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244307">if</span>&nbsp;<span class="builtinfunc" id="8244310">len</span><span class="op" id="8244313">(</span><span class="ident" id="8244314">ift2</span><span class="op" id="8244318">)</span>&nbsp;<span class="op" id="8244320">&lt;=</span>&nbsp;<span class="builtinfunc" id="8244323">len</span><span class="op" id="8244326">(</span><span class="ident" id="8244327">ift1</span><span class="op" id="8244331">)</span>&nbsp;<span class="op" id="8244333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244338">for</span>&nbsp;<span class="ident" id="8244342">_</span><span class="op" id="8244343">,</span>&nbsp;<span class="ident" id="8244345">ifi</span>&nbsp;<span class="op" id="8244349">:=</span>&nbsp;<span class="keyword" id="8244352">range</span>&nbsp;<span class="ident" id="8244358">ift1</span>&nbsp;<span class="op" id="8244363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244369">t</span><span class="op" id="8244370">.</span><span class="ident" id="8244371">Logf</span><span class="op" id="8244375">(</span><span class="string" id="8244376">&#34;before:&nbsp;%v&#34;</span><span class="op" id="8244388">,</span>&nbsp;<span class="ident" id="8244390">ifi</span><span class="op" id="8244393">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244403">for</span>&nbsp;<span class="ident" id="8244407">_</span><span class="op" id="8244408">,</span>&nbsp;<span class="ident" id="8244410">ifi</span>&nbsp;<span class="op" id="8244414">:=</span>&nbsp;<span class="keyword" id="8244417">range</span>&nbsp;<span class="ident" id="8244423">ift2</span>&nbsp;<span class="op" id="8244428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244434">t</span><span class="op" id="8244435">.</span><span class="ident" id="8244436">Logf</span><span class="op" id="8244440">(</span><span class="string" id="8244441">&#34;after:&nbsp;%v&#34;</span><span class="op" id="8244452">,</span>&nbsp;<span class="ident" id="8244454">ifi</span><span class="op" id="8244457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244467">ti</span><span class="op" id="8244469">.</span><span class="ident" id="8244470">teardown</span><span class="op" id="8244478">(</span><span class="op" id="8244479">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244484">t</span><span class="op" id="8244485">.</span><span class="ident" id="8244486">Fatalf</span><span class="op" id="8244492">(</span><span class="string" id="8244493">&#34;got&nbsp;%v;&nbsp;want&nbsp;gt&nbsp;%v&#34;</span><span class="op" id="8244513">,</span>&nbsp;<span class="builtinfunc" id="8244515">len</span><span class="op" id="8244518">(</span><span class="ident" id="8244519">ift2</span><span class="op" id="8244523">)</span><span class="op" id="8244524">,</span>&nbsp;<span class="builtinfunc" id="8244526">len</span><span class="op" id="8244529">(</span><span class="ident" id="8244530">ift1</span><span class="op" id="8244534">)</span><span class="op" id="8244535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244543">if</span>&nbsp;<span class="ident" id="8244546">err</span>&nbsp;<span class="op" id="8244550">:=</span>&nbsp;<span class="ident" id="8244553">ti</span><span class="op" id="8244555">.</span><span class="ident" id="8244556">teardown</span><span class="op" id="8244564">(</span><span class="op" id="8244565">)</span><span class="op" id="8244566">;</span>&nbsp;<span class="ident" id="8244568">err</span>&nbsp;<span class="op" id="8244572">!=</span>&nbsp;<span class="ident" id="8244575">nil</span>&nbsp;<span class="op" id="8244579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244584">t</span><span class="op" id="8244585">.</span><span class="ident" id="8244586">Fatalf</span><span class="op" id="8244592">(</span><span class="string" id="8244593">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8244628">,</span>&nbsp;<span class="ident" id="8244630">err</span><span class="op" id="8244633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244637">}</span>&nbsp;<span class="keyword" id="8244639">else</span>&nbsp;<span class="op" id="8244644">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244649">time</span><span class="op" id="8244653">.</span><span class="ident" id="8244654">Sleep</span><span class="op" id="8244659">(</span><span class="num" id="8244660">3</span>&nbsp;<span class="op" id="8244662">*</span>&nbsp;<span class="ident" id="8244664">time</span><span class="op" id="8244668">.</span><span class="ident" id="8244669">Millisecond</span><span class="op" id="8244680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244688">ift3</span><span class="op" id="8244692">,</span>&nbsp;<span class="ident" id="8244694">err</span>&nbsp;<span class="op" id="8244698">:=</span>&nbsp;<span class="ident" id="8244701">Interfaces</span><span class="op" id="8244711">(</span><span class="op" id="8244712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244716">if</span>&nbsp;<span class="ident" id="8244719">err</span>&nbsp;<span class="op" id="8244723">!=</span>&nbsp;<span class="ident" id="8244726">nil</span>&nbsp;<span class="op" id="8244730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244735">t</span><span class="op" id="8244736">.</span><span class="ident" id="8244737">Fatalf</span><span class="op" id="8244743">(</span><span class="string" id="8244744">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8244767">,</span>&nbsp;<span class="ident" id="8244769">err</span><span class="op" id="8244772">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244780">if</span>&nbsp;<span class="builtinfunc" id="8244783">len</span><span class="op" id="8244786">(</span><span class="ident" id="8244787">ift3</span><span class="op" id="8244791">)</span>&nbsp;<span class="op" id="8244793">&gt;=</span>&nbsp;<span class="builtinfunc" id="8244796">len</span><span class="op" id="8244799">(</span><span class="ident" id="8244800">ift2</span><span class="op" id="8244804">)</span>&nbsp;<span class="op" id="8244806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244811">for</span>&nbsp;<span class="ident" id="8244815">_</span><span class="op" id="8244816">,</span>&nbsp;<span class="ident" id="8244818">ifi</span>&nbsp;<span class="op" id="8244822">:=</span>&nbsp;<span class="keyword" id="8244825">range</span>&nbsp;<span class="ident" id="8244831">ift2</span>&nbsp;<span class="op" id="8244836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244842">t</span><span class="op" id="8244843">.</span><span class="ident" id="8244844">Logf</span><span class="op" id="8244848">(</span><span class="string" id="8244849">&#34;before:&nbsp;%v&#34;</span><span class="op" id="8244861">,</span>&nbsp;<span class="ident" id="8244863">ifi</span><span class="op" id="8244866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244871">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244876">for</span>&nbsp;<span class="ident" id="8244880">_</span><span class="op" id="8244881">,</span>&nbsp;<span class="ident" id="8244883">ifi</span>&nbsp;<span class="op" id="8244887">:=</span>&nbsp;<span class="keyword" id="8244890">range</span>&nbsp;<span class="ident" id="8244896">ift3</span>&nbsp;<span class="op" id="8244901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244907">t</span><span class="op" id="8244908">.</span><span class="ident" id="8244909">Logf</span><span class="op" id="8244913">(</span><span class="string" id="8244914">&#34;after:&nbsp;%v&#34;</span><span class="op" id="8244925">,</span>&nbsp;<span class="ident" id="8244927">ifi</span><span class="op" id="8244930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244940">t</span><span class="op" id="8244941">.</span><span class="ident" id="8244942">Fatalf</span><span class="op" id="8244948">(</span><span class="string" id="8244949">&#34;got&nbsp;%v;&nbsp;want&nbsp;lt&nbsp;%v&#34;</span><span class="op" id="8244969">,</span>&nbsp;<span class="builtinfunc" id="8244971">len</span><span class="op" id="8244974">(</span><span class="ident" id="8244975">ift3</span><span class="op" id="8244979">)</span><span class="op" id="8244980">,</span>&nbsp;<span class="builtinfunc" id="8244982">len</span><span class="op" id="8244985">(</span><span class="ident" id="8244986">ift2</span><span class="op" id="8244990">)</span><span class="op" id="8244991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244995">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244998">}</span><br>
<span class="lineno"></span><span class="op" id="8245000">}</span>
</div>
</body>
</html>
