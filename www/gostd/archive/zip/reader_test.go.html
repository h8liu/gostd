<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8089001">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8089056">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8089110">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8089161">package</span>&nbsp;<span class="ident" id="8089169">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8089174">import</span>&nbsp;<span class="op" id="8089181">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089184">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089193">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089212">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089228">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089234">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089247">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089253">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089270">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089280">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089291">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8089302">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8089309">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8089312">type</span>&nbsp;<span class="ident" id="8089317">ZipTest</span>&nbsp;<span class="keyword" id="8089325">struct</span>&nbsp;<span class="op" id="8089332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089335">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8089343">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089351">Source</span>&nbsp;&nbsp;<span class="keyword" id="8089359">func</span><span class="op" id="8089363">(</span><span class="op" id="8089364">)</span>&nbsp;<span class="op" id="8089366">(</span><span class="ident" id="8089367">r</span>&nbsp;<span class="ident" id="8089369">io</span><span class="op" id="8089371">.</span><span class="ident" id="8089372">ReaderAt</span><span class="op" id="8089380">,</span>&nbsp;<span class="ident" id="8089382">size</span>&nbsp;<span class="ident" id="8089387">int64</span><span class="op" id="8089392">)</span>&nbsp;<span class="comment" id="8089394">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089447">Comment</span>&nbsp;<span class="builtintype" id="8089455">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089463">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8089471">[</span><span class="op" id="8089472">]</span><span class="ident" id="8089473">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089486">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8089494">error</span>&nbsp;<span class="comment" id="8089500">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="8089550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8089553">type</span>&nbsp;<span class="ident" id="8089558">ZipTestFile</span>&nbsp;<span class="keyword" id="8089570">struct</span>&nbsp;<span class="op" id="8089577">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089580">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8089591">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089599">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8089610">[</span><span class="op" id="8089611">]</span><span class="builtintype" id="8089612">byte</span>&nbsp;<span class="comment" id="8089617">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089668">ContentErr</span>&nbsp;<span class="builtintype" id="8089679">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089686">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8089697">string</span>&nbsp;<span class="comment" id="8089704">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089759">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8089770">string</span>&nbsp;<span class="comment" id="8089777">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089825">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8089836">os</span><span class="op" id="8089838">.</span><span class="ident" id="8089839">FileMode</span><br>
<span class="lineno"></span><span class="op" id="8089848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8089851">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="8089926">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="8090001">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="8090075">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="8090149">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="8090225">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="8090299">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="8090379">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="8090458">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8090506">var</span>&nbsp;<span class="ident" id="8090510">tests</span>&nbsp;<span class="op" id="8090516">=</span>&nbsp;<span class="op" id="8090518">[</span><span class="op" id="8090519">]</span><span class="ident" id="8090520">ZipTest</span><span class="op" id="8090527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090530">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090534">Name</span><span class="op" id="8090538">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8090543">&#34;test.zip&#34;</span><span class="op" id="8090553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090557">Comment</span><span class="op" id="8090564">:</span>&nbsp;<span class="string" id="8090566">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="8090594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090598">File</span><span class="op" id="8090602">:</span>&nbsp;<span class="op" id="8090604">[</span><span class="op" id="8090605">]</span><span class="ident" id="8090606">ZipTestFile</span><span class="op" id="8090617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090628">Name</span><span class="op" id="8090632">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8090637">&#34;test.txt&#34;</span><span class="op" id="8090647">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090653">Content</span><span class="op" id="8090660">:</span>&nbsp;<span class="op" id="8090662">[</span><span class="op" id="8090663">]</span><span class="builtintype" id="8090664">byte</span><span class="op" id="8090668">(</span><span class="string" id="8090669">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="8090698">)</span><span class="op" id="8090699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090705">Mtime</span><span class="op" id="8090710">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8090714">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="8090733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090739">Mode</span><span class="op" id="8090743">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8090748">0644</span><span class="op" id="8090752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090757">}</span><span class="op" id="8090758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090763">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090769">Name</span><span class="op" id="8090773">:</span>&nbsp;&nbsp;<span class="string" id="8090776">&#34;gophercolor16x16.png&#34;</span><span class="op" id="8090798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090804">File</span><span class="op" id="8090808">:</span>&nbsp;&nbsp;<span class="string" id="8090811">&#34;gophercolor16x16.png&#34;</span><span class="op" id="8090833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090839">Mtime</span><span class="op" id="8090844">:</span>&nbsp;<span class="string" id="8090846">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="8090865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090871">Mode</span><span class="op" id="8090875">:</span>&nbsp;&nbsp;<span class="num" id="8090878">0644</span><span class="op" id="8090882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090887">}</span><span class="op" id="8090888">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090892">}</span><span class="op" id="8090893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090896">}</span><span class="op" id="8090897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090904">Name</span><span class="op" id="8090908">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8090913">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="8090937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090941">Comment</span><span class="op" id="8090948">:</span>&nbsp;<span class="string" id="8090950">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="8090978">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090982">File</span><span class="op" id="8090986">:</span>&nbsp;<span class="op" id="8090988">[</span><span class="op" id="8090989">]</span><span class="ident" id="8090990">ZipTestFile</span><span class="op" id="8091001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091012">Name</span><span class="op" id="8091016">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091021">&#34;test.txt&#34;</span><span class="op" id="8091031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091037">Content</span><span class="op" id="8091044">:</span>&nbsp;<span class="op" id="8091046">[</span><span class="op" id="8091047">]</span><span class="builtintype" id="8091048">byte</span><span class="op" id="8091052">(</span><span class="string" id="8091053">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="8091082">)</span><span class="op" id="8091083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091089">Mtime</span><span class="op" id="8091094">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8091098">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="8091117">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091123">Mode</span><span class="op" id="8091127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8091132">0644</span><span class="op" id="8091136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091141">}</span><span class="op" id="8091142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091153">Name</span><span class="op" id="8091157">:</span>&nbsp;&nbsp;<span class="string" id="8091160">&#34;gophercolor16x16.png&#34;</span><span class="op" id="8091182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091188">File</span><span class="op" id="8091192">:</span>&nbsp;&nbsp;<span class="string" id="8091195">&#34;gophercolor16x16.png&#34;</span><span class="op" id="8091217">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091223">Mtime</span><span class="op" id="8091228">:</span>&nbsp;<span class="string" id="8091230">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="8091249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091255">Mode</span><span class="op" id="8091259">:</span>&nbsp;&nbsp;<span class="num" id="8091262">0644</span><span class="op" id="8091266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091271">}</span><span class="op" id="8091272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091276">}</span><span class="op" id="8091277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091280">}</span><span class="op" id="8091281">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091288">Name</span><span class="op" id="8091292">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8091296">&#34;r.zip&#34;</span><span class="op" id="8091303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091307">Source</span><span class="op" id="8091313">:</span>&nbsp;<span class="ident" id="8091315">returnRecursiveZip</span><span class="op" id="8091333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091337">File</span><span class="op" id="8091341">:</span>&nbsp;<span class="op" id="8091343">[</span><span class="op" id="8091344">]</span><span class="ident" id="8091345">ZipTestFile</span><span class="op" id="8091356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091361">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091367">Name</span><span class="op" id="8091371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091376">&#34;r/r.zip&#34;</span><span class="op" id="8091385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091391">Content</span><span class="op" id="8091398">:</span>&nbsp;<span class="ident" id="8091400">rZipBytes</span><span class="op" id="8091409">(</span><span class="op" id="8091410">)</span><span class="op" id="8091411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091417">Mtime</span><span class="op" id="8091422">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8091426">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="8091445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091451">Mode</span><span class="op" id="8091455">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8091460">0666</span><span class="op" id="8091464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091469">}</span><span class="op" id="8091470">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091474">}</span><span class="op" id="8091475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091478">}</span><span class="op" id="8091479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091486">Name</span><span class="op" id="8091490">:</span>&nbsp;<span class="string" id="8091492">&#34;symlink.zip&#34;</span><span class="op" id="8091505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091509">File</span><span class="op" id="8091513">:</span>&nbsp;<span class="op" id="8091515">[</span><span class="op" id="8091516">]</span><span class="ident" id="8091517">ZipTestFile</span><span class="op" id="8091528">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091539">Name</span><span class="op" id="8091543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091548">&#34;symlink&#34;</span><span class="op" id="8091557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091563">Content</span><span class="op" id="8091570">:</span>&nbsp;<span class="op" id="8091572">[</span><span class="op" id="8091573">]</span><span class="builtintype" id="8091574">byte</span><span class="op" id="8091578">(</span><span class="string" id="8091579">&#34;../target&#34;</span><span class="op" id="8091590">)</span><span class="op" id="8091591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091597">Mode</span><span class="op" id="8091601">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8091606">0777</span>&nbsp;<span class="op" id="8091611">|</span>&nbsp;<span class="ident" id="8091613">os</span><span class="op" id="8091615">.</span><span class="ident" id="8091616">ModeSymlink</span><span class="op" id="8091627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091632">}</span><span class="op" id="8091633">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091637">}</span><span class="op" id="8091638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091641">}</span><span class="op" id="8091642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091649">Name</span><span class="op" id="8091653">:</span>&nbsp;<span class="string" id="8091655">&#34;readme.zip&#34;</span><span class="op" id="8091667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091670">}</span><span class="op" id="8091671">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091678">Name</span><span class="op" id="8091682">:</span>&nbsp;&nbsp;<span class="string" id="8091685">&#34;readme.notzip&#34;</span><span class="op" id="8091700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091704">Error</span><span class="op" id="8091709">:</span>&nbsp;<span class="ident" id="8091711">ErrFormat</span><span class="op" id="8091720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091723">}</span><span class="op" id="8091724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091727">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091731">Name</span><span class="op" id="8091735">:</span>&nbsp;<span class="string" id="8091737">&#34;dd.zip&#34;</span><span class="op" id="8091745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091749">File</span><span class="op" id="8091753">:</span>&nbsp;<span class="op" id="8091755">[</span><span class="op" id="8091756">]</span><span class="ident" id="8091757">ZipTestFile</span><span class="op" id="8091768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091779">Name</span><span class="op" id="8091783">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091788">&#34;filename&#34;</span><span class="op" id="8091798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091804">Content</span><span class="op" id="8091811">:</span>&nbsp;<span class="op" id="8091813">[</span><span class="op" id="8091814">]</span><span class="builtintype" id="8091815">byte</span><span class="op" id="8091819">(</span><span class="string" id="8091820">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="8091848">)</span><span class="op" id="8091849">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091855">Mtime</span><span class="op" id="8091860">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8091864">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="8091883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091889">Mode</span><span class="op" id="8091893">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8091898">0666</span><span class="op" id="8091902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091907">}</span><span class="op" id="8091908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091912">}</span><span class="op" id="8091913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091916">}</span><span class="op" id="8091917">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8091924">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091965">Name</span><span class="op" id="8091969">:</span>&nbsp;<span class="string" id="8091971">&#34;winxp.zip&#34;</span><span class="op" id="8091982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091986">File</span><span class="op" id="8091990">:</span>&nbsp;<span class="ident" id="8091992">crossPlatform</span><span class="op" id="8092005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092008">}</span><span class="op" id="8092009">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8092016">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092052">Name</span><span class="op" id="8092056">:</span>&nbsp;<span class="string" id="8092058">&#34;unix.zip&#34;</span><span class="op" id="8092068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092072">File</span><span class="op" id="8092076">:</span>&nbsp;<span class="ident" id="8092078">crossPlatform</span><span class="op" id="8092091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092094">}</span><span class="op" id="8092095">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8092102">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8092158">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092214">Name</span><span class="op" id="8092218">:</span>&nbsp;<span class="string" id="8092220">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="8092244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092248">File</span><span class="op" id="8092252">:</span>&nbsp;<span class="op" id="8092254">[</span><span class="op" id="8092255">]</span><span class="ident" id="8092256">ZipTestFile</span><span class="op" id="8092267">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092278">Name</span><span class="op" id="8092282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8092287">&#34;foo.txt&#34;</span><span class="op" id="8092296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092302">Content</span><span class="op" id="8092309">:</span>&nbsp;<span class="op" id="8092311">[</span><span class="op" id="8092312">]</span><span class="builtintype" id="8092313">byte</span><span class="op" id="8092317">(</span><span class="string" id="8092318">&#34;foo\n&#34;</span><span class="op" id="8092325">)</span><span class="op" id="8092326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092332">Mtime</span><span class="op" id="8092337">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8092341">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="8092360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092366">Mode</span><span class="op" id="8092370">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8092375">0644</span><span class="op" id="8092379">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092384">}</span><span class="op" id="8092385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092396">Name</span><span class="op" id="8092400">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8092405">&#34;bar.txt&#34;</span><span class="op" id="8092414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092420">Content</span><span class="op" id="8092427">:</span>&nbsp;<span class="op" id="8092429">[</span><span class="op" id="8092430">]</span><span class="builtintype" id="8092431">byte</span><span class="op" id="8092435">(</span><span class="string" id="8092436">&#34;bar\n&#34;</span><span class="op" id="8092443">)</span><span class="op" id="8092444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092450">Mtime</span><span class="op" id="8092455">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8092459">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="8092478">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092484">Mode</span><span class="op" id="8092488">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8092493">0644</span><span class="op" id="8092497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092502">}</span><span class="op" id="8092503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092507">}</span><span class="op" id="8092508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092511">}</span><span class="op" id="8092512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092515">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8092519">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8092574">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092630">Name</span><span class="op" id="8092634">:</span>&nbsp;<span class="string" id="8092636">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="8092662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092666">File</span><span class="op" id="8092670">:</span>&nbsp;<span class="op" id="8092672">[</span><span class="op" id="8092673">]</span><span class="ident" id="8092674">ZipTestFile</span><span class="op" id="8092685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092690">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092696">Name</span><span class="op" id="8092700">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8092705">&#34;foo.txt&#34;</span><span class="op" id="8092714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092720">Content</span><span class="op" id="8092727">:</span>&nbsp;<span class="op" id="8092729">[</span><span class="op" id="8092730">]</span><span class="builtintype" id="8092731">byte</span><span class="op" id="8092735">(</span><span class="string" id="8092736">&#34;foo\n&#34;</span><span class="op" id="8092743">)</span><span class="op" id="8092744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092750">Mode</span><span class="op" id="8092754">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8092759">0666</span><span class="op" id="8092763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092768">}</span><span class="op" id="8092769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092774">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092780">Name</span><span class="op" id="8092784">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8092789">&#34;bar.txt&#34;</span><span class="op" id="8092798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092804">Content</span><span class="op" id="8092811">:</span>&nbsp;<span class="op" id="8092813">[</span><span class="op" id="8092814">]</span><span class="builtintype" id="8092815">byte</span><span class="op" id="8092819">(</span><span class="string" id="8092820">&#34;bar\n&#34;</span><span class="op" id="8092827">)</span><span class="op" id="8092828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092834">Mode</span><span class="op" id="8092838">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8092843">0666</span><span class="op" id="8092847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092852">}</span><span class="op" id="8092853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092857">}</span><span class="op" id="8092858">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092861">}</span><span class="op" id="8092862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092869">Name</span><span class="op" id="8092873">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8092877">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="8092907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092911">Source</span><span class="op" id="8092917">:</span>&nbsp;<span class="ident" id="8092919">returnCorruptCRC32Zip</span><span class="op" id="8092940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092944">File</span><span class="op" id="8092948">:</span>&nbsp;<span class="op" id="8092950">[</span><span class="op" id="8092951">]</span><span class="ident" id="8092952">ZipTestFile</span><span class="op" id="8092963">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092974">Name</span><span class="op" id="8092978">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8092986">&#34;foo.txt&#34;</span><span class="op" id="8092995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093001">Content</span><span class="op" id="8093008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093013">[</span><span class="op" id="8093014">]</span><span class="builtintype" id="8093015">byte</span><span class="op" id="8093019">(</span><span class="string" id="8093020">&#34;foo\n&#34;</span><span class="op" id="8093027">)</span><span class="op" id="8093028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093034">Mode</span><span class="op" id="8093038">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8093046">0666</span><span class="op" id="8093050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093056">ContentErr</span><span class="op" id="8093066">:</span>&nbsp;<span class="ident" id="8093068">ErrChecksum</span><span class="op" id="8093079">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093084">}</span><span class="op" id="8093085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093096">Name</span><span class="op" id="8093100">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8093105">&#34;bar.txt&#34;</span><span class="op" id="8093114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093120">Content</span><span class="op" id="8093127">:</span>&nbsp;<span class="op" id="8093129">[</span><span class="op" id="8093130">]</span><span class="builtintype" id="8093131">byte</span><span class="op" id="8093135">(</span><span class="string" id="8093136">&#34;bar\n&#34;</span><span class="op" id="8093143">)</span><span class="op" id="8093144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093150">Mode</span><span class="op" id="8093154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8093159">0666</span><span class="op" id="8093163">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093168">}</span><span class="op" id="8093169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093173">}</span><span class="op" id="8093174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093177">}</span><span class="op" id="8093178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8093181">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8093241">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093308">Name</span><span class="op" id="8093312">:</span>&nbsp;<span class="string" id="8093314">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="8093338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093342">File</span><span class="op" id="8093346">:</span>&nbsp;<span class="op" id="8093348">[</span><span class="op" id="8093349">]</span><span class="ident" id="8093350">ZipTestFile</span><span class="op" id="8093361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093372">Name</span><span class="op" id="8093376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8093381">&#34;foo.txt&#34;</span><span class="op" id="8093390">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093396">Content</span><span class="op" id="8093403">:</span>&nbsp;<span class="op" id="8093405">[</span><span class="op" id="8093406">]</span><span class="builtintype" id="8093407">byte</span><span class="op" id="8093411">(</span><span class="string" id="8093412">&#34;foo\n&#34;</span><span class="op" id="8093419">)</span><span class="op" id="8093420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093426">Mtime</span><span class="op" id="8093431">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8093435">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="8093454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093460">Mode</span><span class="op" id="8093464">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8093469">0644</span><span class="op" id="8093473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093478">}</span><span class="op" id="8093479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093484">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093490">Name</span><span class="op" id="8093494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8093499">&#34;bar.txt&#34;</span><span class="op" id="8093508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093514">Content</span><span class="op" id="8093521">:</span>&nbsp;<span class="op" id="8093523">[</span><span class="op" id="8093524">]</span><span class="builtintype" id="8093525">byte</span><span class="op" id="8093529">(</span><span class="string" id="8093530">&#34;bar\n&#34;</span><span class="op" id="8093537">)</span><span class="op" id="8093538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093544">Mtime</span><span class="op" id="8093549">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8093553">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="8093572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093578">Mode</span><span class="op" id="8093582">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8093587">0644</span><span class="op" id="8093591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093596">}</span><span class="op" id="8093597">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093601">}</span><span class="op" id="8093602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093605">}</span><span class="op" id="8093606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8093609">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8093671">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093734">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093738">Name</span><span class="op" id="8093742">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8093746">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="8093770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093774">Source</span><span class="op" id="8093780">:</span>&nbsp;<span class="ident" id="8093782">returnCorruptNotStreamedZip</span><span class="op" id="8093809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093813">File</span><span class="op" id="8093817">:</span>&nbsp;<span class="op" id="8093819">[</span><span class="op" id="8093820">]</span><span class="ident" id="8093821">ZipTestFile</span><span class="op" id="8093832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093843">Name</span><span class="op" id="8093847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8093855">&#34;foo.txt&#34;</span><span class="op" id="8093864">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093870">Content</span><span class="op" id="8093877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093882">[</span><span class="op" id="8093883">]</span><span class="builtintype" id="8093884">byte</span><span class="op" id="8093888">(</span><span class="string" id="8093889">&#34;foo\n&#34;</span><span class="op" id="8093896">)</span><span class="op" id="8093897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093903">Mtime</span><span class="op" id="8093908">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8093915">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="8093934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093940">Mode</span><span class="op" id="8093944">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8093952">0644</span><span class="op" id="8093956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093962">ContentErr</span><span class="op" id="8093972">:</span>&nbsp;<span class="ident" id="8093974">ErrChecksum</span><span class="op" id="8093985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093990">}</span><span class="op" id="8093991">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094002">Name</span><span class="op" id="8094006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8094011">&#34;bar.txt&#34;</span><span class="op" id="8094020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094026">Content</span><span class="op" id="8094033">:</span>&nbsp;<span class="op" id="8094035">[</span><span class="op" id="8094036">]</span><span class="builtintype" id="8094037">byte</span><span class="op" id="8094041">(</span><span class="string" id="8094042">&#34;bar\n&#34;</span><span class="op" id="8094049">)</span><span class="op" id="8094050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094056">Mtime</span><span class="op" id="8094061">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8094065">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="8094084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094090">Mode</span><span class="op" id="8094094">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8094099">0644</span><span class="op" id="8094103">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094108">}</span><span class="op" id="8094109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094113">}</span><span class="op" id="8094114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094117">}</span><span class="op" id="8094118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094125">Name</span><span class="op" id="8094129">:</span>&nbsp;<span class="string" id="8094131">&#34;zip64.zip&#34;</span><span class="op" id="8094142">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094146">File</span><span class="op" id="8094150">:</span>&nbsp;<span class="op" id="8094152">[</span><span class="op" id="8094153">]</span><span class="ident" id="8094154">ZipTestFile</span><span class="op" id="8094165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094176">Name</span><span class="op" id="8094180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8094185">&#34;README&#34;</span><span class="op" id="8094193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094199">Content</span><span class="op" id="8094206">:</span>&nbsp;<span class="op" id="8094208">[</span><span class="op" id="8094209">]</span><span class="builtintype" id="8094210">byte</span><span class="op" id="8094214">(</span><span class="string" id="8094215">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="8094254">)</span><span class="op" id="8094255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094261">Mtime</span><span class="op" id="8094266">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8094270">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="8094289">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094295">Mode</span><span class="op" id="8094299">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8094304">0644</span><span class="op" id="8094308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094313">}</span><span class="op" id="8094314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094318">}</span><span class="op" id="8094319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094322">}</span><span class="op" id="8094323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8094326">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094407">Name</span><span class="op" id="8094411">:</span>&nbsp;<span class="string" id="8094413">&#34;zip64-2.zip&#34;</span><span class="op" id="8094426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094430">File</span><span class="op" id="8094434">:</span>&nbsp;<span class="op" id="8094436">[</span><span class="op" id="8094437">]</span><span class="ident" id="8094438">ZipTestFile</span><span class="op" id="8094449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094460">Name</span><span class="op" id="8094464">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8094469">&#34;README&#34;</span><span class="op" id="8094477">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094483">Content</span><span class="op" id="8094490">:</span>&nbsp;<span class="op" id="8094492">[</span><span class="op" id="8094493">]</span><span class="builtintype" id="8094494">byte</span><span class="op" id="8094498">(</span><span class="string" id="8094499">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="8094538">)</span><span class="op" id="8094539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094545">Mtime</span><span class="op" id="8094550">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8094554">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="8094573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094579">Mode</span><span class="op" id="8094583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8094588">0644</span><span class="op" id="8094592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094597">}</span><span class="op" id="8094598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094602">}</span><span class="op" id="8094603">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094606">}</span><span class="op" id="8094607">,</span><br>
<span class="lineno"></span><span class="op" id="8094609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8094612">var</span>&nbsp;<span class="ident" id="8094616">crossPlatform</span>&nbsp;<span class="op" id="8094630">=</span>&nbsp;<span class="op" id="8094632">[</span><span class="op" id="8094633">]</span><span class="ident" id="8094634">ZipTestFile</span><span class="op" id="8094645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094648">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094652">Name</span><span class="op" id="8094656">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8094661">&#34;hello&#34;</span><span class="op" id="8094668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094672">Content</span><span class="op" id="8094679">:</span>&nbsp;<span class="op" id="8094681">[</span><span class="op" id="8094682">]</span><span class="builtintype" id="8094683">byte</span><span class="op" id="8094687">(</span><span class="string" id="8094688">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="8094700">)</span><span class="op" id="8094701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094705">Mode</span><span class="op" id="8094709">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8094714">0666</span><span class="op" id="8094718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094721">}</span><span class="op" id="8094722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094725">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094729">Name</span><span class="op" id="8094733">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8094738">&#34;dir/bar&#34;</span><span class="op" id="8094747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094751">Content</span><span class="op" id="8094758">:</span>&nbsp;<span class="op" id="8094760">[</span><span class="op" id="8094761">]</span><span class="builtintype" id="8094762">byte</span><span class="op" id="8094766">(</span><span class="string" id="8094767">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="8094777">)</span><span class="op" id="8094778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094782">Mode</span><span class="op" id="8094786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8094791">0666</span><span class="op" id="8094795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094798">}</span><span class="op" id="8094799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094802">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094806">Name</span><span class="op" id="8094810">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8094815">&#34;dir/empty/&#34;</span><span class="op" id="8094827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094831">Content</span><span class="op" id="8094838">:</span>&nbsp;<span class="op" id="8094840">[</span><span class="op" id="8094841">]</span><span class="builtintype" id="8094842">byte</span><span class="op" id="8094846">{</span><span class="op" id="8094847">}</span><span class="op" id="8094848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094852">Mode</span><span class="op" id="8094856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8094861">os</span><span class="op" id="8094863">.</span><span class="ident" id="8094864">ModeDir</span>&nbsp;<span class="op" id="8094872">|</span>&nbsp;<span class="num" id="8094874">0777</span><span class="op" id="8094878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094881">}</span><span class="op" id="8094882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094885">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094889">Name</span><span class="op" id="8094893">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8094898">&#34;readonly&#34;</span><span class="op" id="8094908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094912">Content</span><span class="op" id="8094919">:</span>&nbsp;<span class="op" id="8094921">[</span><span class="op" id="8094922">]</span><span class="builtintype" id="8094923">byte</span><span class="op" id="8094927">(</span><span class="string" id="8094928">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="8094944">)</span><span class="op" id="8094945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094949">Mode</span><span class="op" id="8094953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8094958">0444</span><span class="op" id="8094962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094965">}</span><span class="op" id="8094966">,</span><br>
<span class="lineno"></span><span class="op" id="8094968">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="8094971">func</span>&nbsp;<span class="ident" id="8094976">TestReader</span><span class="op" id="8094986">(</span><span class="ident" id="8094987">t</span>&nbsp;<span class="op" id="8094989">*</span><span class="ident" id="8094990">testing</span><span class="op" id="8094997">.</span><span class="ident" id="8094998">T</span><span class="op" id="8094999">)</span>&nbsp;<span class="op" id="8095001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095004">for</span>&nbsp;<span class="ident" id="8095008">_</span><span class="op" id="8095009">,</span>&nbsp;<span class="ident" id="8095011">zt</span>&nbsp;<span class="op" id="8095014">:=</span>&nbsp;<span class="keyword" id="8095017">range</span>&nbsp;<span class="ident" id="8095023">tests</span>&nbsp;<span class="op" id="8095029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095033">readTestZip</span><span class="op" id="8095044">(</span><span class="ident" id="8095045">t</span><span class="op" id="8095046">,</span>&nbsp;<span class="ident" id="8095048">zt</span><span class="op" id="8095050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095053">}</span><br>
<span class="lineno">280</span><span class="op" id="8095055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8095058">func</span>&nbsp;<span class="ident" id="8095063">readTestZip</span><span class="op" id="8095074">(</span><span class="ident" id="8095075">t</span>&nbsp;<span class="op" id="8095077">*</span><span class="ident" id="8095078">testing</span><span class="op" id="8095085">.</span><span class="ident" id="8095086">T</span><span class="op" id="8095087">,</span>&nbsp;<span class="ident" id="8095089">zt</span>&nbsp;<span class="ident" id="8095092">ZipTest</span><span class="op" id="8095099">)</span>&nbsp;<span class="op" id="8095101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095104">var</span>&nbsp;<span class="ident" id="8095108">z</span>&nbsp;<span class="op" id="8095110">*</span><span class="ident" id="8095111">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095119">var</span>&nbsp;<span class="ident" id="8095123">err</span>&nbsp;<span class="builtintype" id="8095127">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095134">if</span>&nbsp;<span class="ident" id="8095137">zt</span><span class="op" id="8095139">.</span><span class="ident" id="8095140">Source</span>&nbsp;<span class="op" id="8095147">!=</span>&nbsp;<span class="ident" id="8095150">nil</span>&nbsp;<span class="op" id="8095154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095158">rat</span><span class="op" id="8095161">,</span>&nbsp;<span class="ident" id="8095163">size</span>&nbsp;<span class="op" id="8095168">:=</span>&nbsp;<span class="ident" id="8095171">zt</span><span class="op" id="8095173">.</span><span class="ident" id="8095174">Source</span><span class="op" id="8095180">(</span><span class="op" id="8095181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095185">z</span><span class="op" id="8095186">,</span>&nbsp;<span class="ident" id="8095188">err</span>&nbsp;<span class="op" id="8095192">=</span>&nbsp;<span class="ident" id="8095194">NewReader</span><span class="op" id="8095203">(</span><span class="ident" id="8095204">rat</span><span class="op" id="8095207">,</span>&nbsp;<span class="ident" id="8095209">size</span><span class="op" id="8095213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095216">}</span>&nbsp;<span class="keyword" id="8095218">else</span>&nbsp;<span class="op" id="8095223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095227">var</span>&nbsp;<span class="ident" id="8095231">rc</span>&nbsp;<span class="op" id="8095234">*</span><span class="ident" id="8095235">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095248">rc</span><span class="op" id="8095250">,</span>&nbsp;<span class="ident" id="8095252">err</span>&nbsp;<span class="op" id="8095256">=</span>&nbsp;<span class="ident" id="8095258">OpenReader</span><span class="op" id="8095268">(</span><span class="ident" id="8095269">filepath</span><span class="op" id="8095277">.</span><span class="ident" id="8095278">Join</span><span class="op" id="8095282">(</span><span class="string" id="8095283">&#34;testdata&#34;</span><span class="op" id="8095293">,</span>&nbsp;<span class="ident" id="8095295">zt</span><span class="op" id="8095297">.</span><span class="ident" id="8095298">Name</span><span class="op" id="8095302">)</span><span class="op" id="8095303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095307">if</span>&nbsp;<span class="ident" id="8095310">err</span>&nbsp;<span class="op" id="8095314">==</span>&nbsp;<span class="ident" id="8095317">nil</span>&nbsp;<span class="op" id="8095321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095326">defer</span>&nbsp;<span class="ident" id="8095332">rc</span><span class="op" id="8095334">.</span><span class="ident" id="8095335">Close</span><span class="op" id="8095340">(</span><span class="op" id="8095341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095346">z</span>&nbsp;<span class="op" id="8095348">=</span>&nbsp;<span class="op" id="8095350">&amp;</span><span class="ident" id="8095351">rc</span><span class="op" id="8095353">.</span><span class="ident" id="8095354">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095363">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095369">if</span>&nbsp;<span class="ident" id="8095372">err</span>&nbsp;<span class="op" id="8095376">!=</span>&nbsp;<span class="ident" id="8095379">zt</span><span class="op" id="8095381">.</span><span class="ident" id="8095382">Error</span>&nbsp;<span class="op" id="8095388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095392">t</span><span class="op" id="8095393">.</span><span class="ident" id="8095394">Errorf</span><span class="op" id="8095400">(</span><span class="string" id="8095401">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8095424">,</span>&nbsp;<span class="ident" id="8095426">zt</span><span class="op" id="8095428">.</span><span class="ident" id="8095429">Name</span><span class="op" id="8095433">,</span>&nbsp;<span class="ident" id="8095435">err</span><span class="op" id="8095438">,</span>&nbsp;<span class="ident" id="8095440">zt</span><span class="op" id="8095442">.</span><span class="ident" id="8095443">Error</span><span class="op" id="8095448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095452">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095460">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8095464">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095492">if</span>&nbsp;<span class="ident" id="8095495">err</span>&nbsp;<span class="op" id="8095499">==</span>&nbsp;<span class="ident" id="8095502">ErrFormat</span>&nbsp;<span class="op" id="8095512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095516">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095524">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8095528">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8095576">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095640">if</span>&nbsp;<span class="ident" id="8095643">zt</span><span class="op" id="8095645">.</span><span class="ident" id="8095646">File</span>&nbsp;<span class="op" id="8095651">==</span>&nbsp;<span class="ident" id="8095654">nil</span>&nbsp;<span class="op" id="8095658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095662">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095674">if</span>&nbsp;<span class="ident" id="8095677">z</span><span class="op" id="8095678">.</span><span class="ident" id="8095679">Comment</span>&nbsp;<span class="op" id="8095687">!=</span>&nbsp;<span class="ident" id="8095690">zt</span><span class="op" id="8095692">.</span><span class="ident" id="8095693">Comment</span>&nbsp;<span class="op" id="8095701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095705">t</span><span class="op" id="8095706">.</span><span class="ident" id="8095707">Errorf</span><span class="op" id="8095713">(</span><span class="string" id="8095714">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8095739">,</span>&nbsp;<span class="ident" id="8095741">zt</span><span class="op" id="8095743">.</span><span class="ident" id="8095744">Name</span><span class="op" id="8095748">,</span>&nbsp;<span class="ident" id="8095750">z</span><span class="op" id="8095751">.</span><span class="ident" id="8095752">Comment</span><span class="op" id="8095759">,</span>&nbsp;<span class="ident" id="8095761">zt</span><span class="op" id="8095763">.</span><span class="ident" id="8095764">Comment</span><span class="op" id="8095771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095774">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095777">if</span>&nbsp;<span class="builtinfunc" id="8095780">len</span><span class="op" id="8095783">(</span><span class="ident" id="8095784">z</span><span class="op" id="8095785">.</span><span class="ident" id="8095786">File</span><span class="op" id="8095790">)</span>&nbsp;<span class="op" id="8095792">!=</span>&nbsp;<span class="builtinfunc" id="8095795">len</span><span class="op" id="8095798">(</span><span class="ident" id="8095799">zt</span><span class="op" id="8095801">.</span><span class="ident" id="8095802">File</span><span class="op" id="8095806">)</span>&nbsp;<span class="op" id="8095808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095812">t</span><span class="op" id="8095813">.</span><span class="ident" id="8095814">Fatalf</span><span class="op" id="8095820">(</span><span class="string" id="8095821">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8095849">,</span>&nbsp;<span class="ident" id="8095851">zt</span><span class="op" id="8095853">.</span><span class="ident" id="8095854">Name</span><span class="op" id="8095858">,</span>&nbsp;<span class="builtinfunc" id="8095860">len</span><span class="op" id="8095863">(</span><span class="ident" id="8095864">z</span><span class="op" id="8095865">.</span><span class="ident" id="8095866">File</span><span class="op" id="8095870">)</span><span class="op" id="8095871">,</span>&nbsp;<span class="builtinfunc" id="8095873">len</span><span class="op" id="8095876">(</span><span class="ident" id="8095877">zt</span><span class="op" id="8095879">.</span><span class="ident" id="8095880">File</span><span class="op" id="8095884">)</span><span class="op" id="8095885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8095892">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095919">for</span>&nbsp;<span class="ident" id="8095923">i</span><span class="op" id="8095924">,</span>&nbsp;<span class="ident" id="8095926">ft</span>&nbsp;<span class="op" id="8095929">:=</span>&nbsp;<span class="keyword" id="8095932">range</span>&nbsp;<span class="ident" id="8095938">zt</span><span class="op" id="8095940">.</span><span class="ident" id="8095941">File</span>&nbsp;<span class="op" id="8095946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095950">readTestFile</span><span class="op" id="8095962">(</span><span class="ident" id="8095963">t</span><span class="op" id="8095964">,</span>&nbsp;<span class="ident" id="8095966">zt</span><span class="op" id="8095968">,</span>&nbsp;<span class="ident" id="8095970">ft</span><span class="op" id="8095972">,</span>&nbsp;<span class="ident" id="8095974">z</span><span class="op" id="8095975">.</span><span class="ident" id="8095976">File</span><span class="op" id="8095980">[</span><span class="ident" id="8095981">i</span><span class="op" id="8095982">]</span><span class="op" id="8095983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8095990">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096018">n</span>&nbsp;<span class="op" id="8096020">:=</span>&nbsp;<span class="num" id="8096023">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096026">done</span>&nbsp;<span class="op" id="8096031">:=</span>&nbsp;<span class="builtinfunc" id="8096034">make</span><span class="op" id="8096038">(</span><span class="keyword" id="8096039">chan</span>&nbsp;<span class="builtintype" id="8096044">bool</span><span class="op" id="8096048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096051">for</span>&nbsp;<span class="ident" id="8096055">i</span>&nbsp;<span class="op" id="8096057">:=</span>&nbsp;<span class="num" id="8096060">0</span><span class="op" id="8096061">;</span>&nbsp;<span class="ident" id="8096063">i</span>&nbsp;<span class="op" id="8096065">&lt;</span>&nbsp;<span class="num" id="8096067">5</span><span class="op" id="8096068">;</span>&nbsp;<span class="ident" id="8096070">i</span><span class="op" id="8096071">++</span>&nbsp;<span class="op" id="8096074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096078">for</span>&nbsp;<span class="ident" id="8096082">j</span><span class="op" id="8096083">,</span>&nbsp;<span class="ident" id="8096085">ft</span>&nbsp;<span class="op" id="8096088">:=</span>&nbsp;<span class="keyword" id="8096091">range</span>&nbsp;<span class="ident" id="8096097">zt</span><span class="op" id="8096099">.</span><span class="ident" id="8096100">File</span>&nbsp;<span class="op" id="8096105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096110">go</span>&nbsp;<span class="keyword" id="8096113">func</span><span class="op" id="8096117">(</span><span class="ident" id="8096118">j</span>&nbsp;<span class="builtintype" id="8096120">int</span><span class="op" id="8096123">,</span>&nbsp;<span class="ident" id="8096125">ft</span>&nbsp;<span class="ident" id="8096128">ZipTestFile</span><span class="op" id="8096139">)</span>&nbsp;<span class="op" id="8096141">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096147">readTestFile</span><span class="op" id="8096159">(</span><span class="ident" id="8096160">t</span><span class="op" id="8096161">,</span>&nbsp;<span class="ident" id="8096163">zt</span><span class="op" id="8096165">,</span>&nbsp;<span class="ident" id="8096167">ft</span><span class="op" id="8096169">,</span>&nbsp;<span class="ident" id="8096171">z</span><span class="op" id="8096172">.</span><span class="ident" id="8096173">File</span><span class="op" id="8096177">[</span><span class="ident" id="8096178">j</span><span class="op" id="8096179">]</span><span class="op" id="8096180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096186">done</span>&nbsp;<span class="op" id="8096191">&lt;-</span>&nbsp;<span class="builtintype" id="8096194">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096202">}</span><span class="op" id="8096203">(</span><span class="ident" id="8096204">j</span><span class="op" id="8096205">,</span>&nbsp;<span class="ident" id="8096207">ft</span><span class="op" id="8096209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096214">n</span><span class="op" id="8096215">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096220">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096226">for</span>&nbsp;<span class="op" id="8096230">;</span>&nbsp;<span class="ident" id="8096232">n</span>&nbsp;<span class="op" id="8096234">&gt;</span>&nbsp;<span class="num" id="8096236">0</span><span class="op" id="8096237">;</span>&nbsp;<span class="ident" id="8096239">n</span><span class="op" id="8096240">--</span>&nbsp;<span class="op" id="8096243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096247">&lt;-</span><span class="ident" id="8096249">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096255">}</span><br>
<span class="lineno"></span><span class="op" id="8096257">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="8096260">func</span>&nbsp;<span class="ident" id="8096265">readTestFile</span><span class="op" id="8096277">(</span><span class="ident" id="8096278">t</span>&nbsp;<span class="op" id="8096280">*</span><span class="ident" id="8096281">testing</span><span class="op" id="8096288">.</span><span class="ident" id="8096289">T</span><span class="op" id="8096290">,</span>&nbsp;<span class="ident" id="8096292">zt</span>&nbsp;<span class="ident" id="8096295">ZipTest</span><span class="op" id="8096302">,</span>&nbsp;<span class="ident" id="8096304">ft</span>&nbsp;<span class="ident" id="8096307">ZipTestFile</span><span class="op" id="8096318">,</span>&nbsp;<span class="ident" id="8096320">f</span>&nbsp;<span class="op" id="8096322">*</span><span class="ident" id="8096323">File</span><span class="op" id="8096327">)</span>&nbsp;<span class="op" id="8096329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096332">if</span>&nbsp;<span class="ident" id="8096335">f</span><span class="op" id="8096336">.</span><span class="ident" id="8096337">Name</span>&nbsp;<span class="op" id="8096342">!=</span>&nbsp;<span class="ident" id="8096345">ft</span><span class="op" id="8096347">.</span><span class="ident" id="8096348">Name</span>&nbsp;<span class="op" id="8096353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096357">t</span><span class="op" id="8096358">.</span><span class="ident" id="8096359">Errorf</span><span class="op" id="8096365">(</span><span class="string" id="8096366">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8096388">,</span>&nbsp;<span class="ident" id="8096390">zt</span><span class="op" id="8096392">.</span><span class="ident" id="8096393">Name</span><span class="op" id="8096397">,</span>&nbsp;<span class="ident" id="8096399">f</span><span class="op" id="8096400">.</span><span class="ident" id="8096401">Name</span><span class="op" id="8096405">,</span>&nbsp;<span class="ident" id="8096407">ft</span><span class="op" id="8096409">.</span><span class="ident" id="8096410">Name</span><span class="op" id="8096414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096417">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096421">if</span>&nbsp;<span class="ident" id="8096424">ft</span><span class="op" id="8096426">.</span><span class="ident" id="8096427">Mtime</span>&nbsp;<span class="op" id="8096433">!=</span>&nbsp;<span class="string" id="8096436">&#34;&#34;</span>&nbsp;<span class="op" id="8096439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096443">mtime</span><span class="op" id="8096448">,</span>&nbsp;<span class="ident" id="8096450">err</span>&nbsp;<span class="op" id="8096454">:=</span>&nbsp;<span class="ident" id="8096457">time</span><span class="op" id="8096461">.</span><span class="ident" id="8096462">Parse</span><span class="op" id="8096467">(</span><span class="string" id="8096468">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="8096487">,</span>&nbsp;<span class="ident" id="8096489">ft</span><span class="op" id="8096491">.</span><span class="ident" id="8096492">Mtime</span><span class="op" id="8096497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096501">if</span>&nbsp;<span class="ident" id="8096504">err</span>&nbsp;<span class="op" id="8096508">!=</span>&nbsp;<span class="ident" id="8096511">nil</span>&nbsp;<span class="op" id="8096515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096520">t</span><span class="op" id="8096521">.</span><span class="ident" id="8096522">Error</span><span class="op" id="8096527">(</span><span class="ident" id="8096528">err</span><span class="op" id="8096531">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096536">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096549">if</span>&nbsp;<span class="ident" id="8096552">ft</span>&nbsp;<span class="op" id="8096555">:=</span>&nbsp;<span class="ident" id="8096558">f</span><span class="op" id="8096559">.</span><span class="ident" id="8096560">ModTime</span><span class="op" id="8096567">(</span><span class="op" id="8096568">)</span><span class="op" id="8096569">;</span>&nbsp;<span class="op" id="8096571">!</span><span class="ident" id="8096572">ft</span><span class="op" id="8096574">.</span><span class="ident" id="8096575">Equal</span><span class="op" id="8096580">(</span><span class="ident" id="8096581">mtime</span><span class="op" id="8096586">)</span>&nbsp;<span class="op" id="8096588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096593">t</span><span class="op" id="8096594">.</span><span class="ident" id="8096595">Errorf</span><span class="op" id="8096601">(</span><span class="string" id="8096602">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8096629">,</span>&nbsp;<span class="ident" id="8096631">zt</span><span class="op" id="8096633">.</span><span class="ident" id="8096634">Name</span><span class="op" id="8096638">,</span>&nbsp;<span class="ident" id="8096640">f</span><span class="op" id="8096641">.</span><span class="ident" id="8096642">Name</span><span class="op" id="8096646">,</span>&nbsp;<span class="ident" id="8096648">ft</span><span class="op" id="8096650">,</span>&nbsp;<span class="ident" id="8096652">mtime</span><span class="op" id="8096657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096661">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096668">testFileMode</span><span class="op" id="8096680">(</span><span class="ident" id="8096681">t</span><span class="op" id="8096682">,</span>&nbsp;<span class="ident" id="8096684">zt</span><span class="op" id="8096686">.</span><span class="ident" id="8096687">Name</span><span class="op" id="8096691">,</span>&nbsp;<span class="ident" id="8096693">f</span><span class="op" id="8096694">,</span>&nbsp;<span class="ident" id="8096696">ft</span><span class="op" id="8096698">.</span><span class="ident" id="8096699">Mode</span><span class="op" id="8096703">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096707">var</span>&nbsp;<span class="ident" id="8096711">b</span>&nbsp;<span class="ident" id="8096713">bytes</span><span class="op" id="8096718">.</span><span class="ident" id="8096719">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096727">r</span><span class="op" id="8096728">,</span>&nbsp;<span class="ident" id="8096730">err</span>&nbsp;<span class="op" id="8096734">:=</span>&nbsp;<span class="ident" id="8096737">f</span><span class="op" id="8096738">.</span><span class="ident" id="8096739">Open</span><span class="op" id="8096743">(</span><span class="op" id="8096744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096747">if</span>&nbsp;<span class="ident" id="8096750">err</span>&nbsp;<span class="op" id="8096754">!=</span>&nbsp;<span class="ident" id="8096757">nil</span>&nbsp;<span class="op" id="8096761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096765">t</span><span class="op" id="8096766">.</span><span class="ident" id="8096767">Errorf</span><span class="op" id="8096773">(</span><span class="string" id="8096774">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="8096782">,</span>&nbsp;<span class="ident" id="8096784">zt</span><span class="op" id="8096786">.</span><span class="ident" id="8096787">Name</span><span class="op" id="8096791">,</span>&nbsp;<span class="ident" id="8096793">err</span><span class="op" id="8096796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096800">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096808">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096812">_</span><span class="op" id="8096813">,</span>&nbsp;<span class="ident" id="8096815">err</span>&nbsp;<span class="op" id="8096819">=</span>&nbsp;<span class="ident" id="8096821">io</span><span class="op" id="8096823">.</span><span class="ident" id="8096824">Copy</span><span class="op" id="8096828">(</span><span class="op" id="8096829">&amp;</span><span class="ident" id="8096830">b</span><span class="op" id="8096831">,</span>&nbsp;<span class="ident" id="8096833">r</span><span class="op" id="8096834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096837">if</span>&nbsp;<span class="ident" id="8096840">err</span>&nbsp;<span class="op" id="8096844">!=</span>&nbsp;<span class="ident" id="8096847">ft</span><span class="op" id="8096849">.</span><span class="ident" id="8096850">ContentErr</span>&nbsp;<span class="op" id="8096861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096865">t</span><span class="op" id="8096866">.</span><span class="ident" id="8096867">Errorf</span><span class="op" id="8096873">(</span><span class="string" id="8096874">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="8096910">,</span>&nbsp;<span class="ident" id="8096912">zt</span><span class="op" id="8096914">.</span><span class="ident" id="8096915">Name</span><span class="op" id="8096919">,</span>&nbsp;<span class="ident" id="8096921">err</span><span class="op" id="8096924">,</span>&nbsp;<span class="ident" id="8096926">ft</span><span class="op" id="8096928">.</span><span class="ident" id="8096929">ContentErr</span><span class="op" id="8096939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096942">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096945">if</span>&nbsp;<span class="ident" id="8096948">err</span>&nbsp;<span class="op" id="8096952">!=</span>&nbsp;<span class="ident" id="8096955">nil</span>&nbsp;<span class="op" id="8096959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096963">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096974">r</span><span class="op" id="8096975">.</span><span class="ident" id="8096976">Close</span><span class="op" id="8096981">(</span><span class="op" id="8096982">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096986">size</span>&nbsp;<span class="op" id="8096991">:=</span>&nbsp;<span class="ident" id="8096994">uint64</span><span class="op" id="8097000">(</span><span class="ident" id="8097001">f</span><span class="op" id="8097002">.</span><span class="ident" id="8097003">UncompressedSize</span><span class="op" id="8097019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097022">if</span>&nbsp;<span class="ident" id="8097025">size</span>&nbsp;<span class="op" id="8097030">==</span>&nbsp;<span class="ident" id="8097033">uint32max</span>&nbsp;<span class="op" id="8097043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097047">size</span>&nbsp;<span class="op" id="8097052">=</span>&nbsp;<span class="ident" id="8097054">f</span><span class="op" id="8097055">.</span><span class="ident" id="8097056">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097079">if</span>&nbsp;<span class="ident" id="8097082">g</span>&nbsp;<span class="op" id="8097084">:=</span>&nbsp;<span class="ident" id="8097087">uint64</span><span class="op" id="8097093">(</span><span class="ident" id="8097094">b</span><span class="op" id="8097095">.</span><span class="ident" id="8097096">Len</span><span class="op" id="8097099">(</span><span class="op" id="8097100">)</span><span class="op" id="8097101">)</span><span class="op" id="8097102">;</span>&nbsp;<span class="ident" id="8097104">g</span>&nbsp;<span class="op" id="8097106">!=</span>&nbsp;<span class="ident" id="8097109">size</span>&nbsp;<span class="op" id="8097114">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097118">t</span><span class="op" id="8097119">.</span><span class="ident" id="8097120">Errorf</span><span class="op" id="8097126">(</span><span class="string" id="8097127">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="8097175">,</span>&nbsp;<span class="ident" id="8097177">f</span><span class="op" id="8097178">.</span><span class="ident" id="8097179">Name</span><span class="op" id="8097183">,</span>&nbsp;<span class="ident" id="8097185">g</span><span class="op" id="8097186">,</span>&nbsp;<span class="ident" id="8097188">size</span><span class="op" id="8097192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097199">var</span>&nbsp;<span class="ident" id="8097203">c</span>&nbsp;<span class="op" id="8097205">[</span><span class="op" id="8097206">]</span><span class="builtintype" id="8097207">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097213">if</span>&nbsp;<span class="ident" id="8097216">ft</span><span class="op" id="8097218">.</span><span class="ident" id="8097219">Content</span>&nbsp;<span class="op" id="8097227">!=</span>&nbsp;<span class="ident" id="8097230">nil</span>&nbsp;<span class="op" id="8097234">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097238">c</span>&nbsp;<span class="op" id="8097240">=</span>&nbsp;<span class="ident" id="8097242">ft</span><span class="op" id="8097244">.</span><span class="ident" id="8097245">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097254">}</span>&nbsp;<span class="keyword" id="8097256">else</span>&nbsp;<span class="keyword" id="8097261">if</span>&nbsp;<span class="ident" id="8097264">c</span><span class="op" id="8097265">,</span>&nbsp;<span class="ident" id="8097267">err</span>&nbsp;<span class="op" id="8097271">=</span>&nbsp;<span class="ident" id="8097273">ioutil</span><span class="op" id="8097279">.</span><span class="ident" id="8097280">ReadFile</span><span class="op" id="8097288">(</span><span class="string" id="8097289">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="8097301">+</span>&nbsp;<span class="ident" id="8097303">ft</span><span class="op" id="8097305">.</span><span class="ident" id="8097306">File</span><span class="op" id="8097310">)</span><span class="op" id="8097311">;</span>&nbsp;<span class="ident" id="8097313">err</span>&nbsp;<span class="op" id="8097317">!=</span>&nbsp;<span class="ident" id="8097320">nil</span>&nbsp;<span class="op" id="8097324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097328">t</span><span class="op" id="8097329">.</span><span class="ident" id="8097330">Error</span><span class="op" id="8097335">(</span><span class="ident" id="8097336">err</span><span class="op" id="8097339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097343">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097351">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097355">if</span>&nbsp;<span class="ident" id="8097358">b</span><span class="op" id="8097359">.</span><span class="ident" id="8097360">Len</span><span class="op" id="8097363">(</span><span class="op" id="8097364">)</span>&nbsp;<span class="op" id="8097366">!=</span>&nbsp;<span class="builtinfunc" id="8097369">len</span><span class="op" id="8097372">(</span><span class="ident" id="8097373">c</span><span class="op" id="8097374">)</span>&nbsp;<span class="op" id="8097376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097380">t</span><span class="op" id="8097381">.</span><span class="ident" id="8097382">Errorf</span><span class="op" id="8097388">(</span><span class="string" id="8097389">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8097410">,</span>&nbsp;<span class="ident" id="8097412">f</span><span class="op" id="8097413">.</span><span class="ident" id="8097414">Name</span><span class="op" id="8097418">,</span>&nbsp;<span class="ident" id="8097420">b</span><span class="op" id="8097421">.</span><span class="ident" id="8097422">Len</span><span class="op" id="8097425">(</span><span class="op" id="8097426">)</span><span class="op" id="8097427">,</span>&nbsp;<span class="builtinfunc" id="8097429">len</span><span class="op" id="8097432">(</span><span class="ident" id="8097433">c</span><span class="op" id="8097434">)</span><span class="op" id="8097435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097439">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097447">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097451">for</span>&nbsp;<span class="ident" id="8097455">i</span><span class="op" id="8097456">,</span>&nbsp;<span class="ident" id="8097458">b</span>&nbsp;<span class="op" id="8097460">:=</span>&nbsp;<span class="keyword" id="8097463">range</span>&nbsp;<span class="ident" id="8097469">b</span><span class="op" id="8097470">.</span><span class="ident" id="8097471">Bytes</span><span class="op" id="8097476">(</span><span class="op" id="8097477">)</span>&nbsp;<span class="op" id="8097479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097483">if</span>&nbsp;<span class="ident" id="8097486">b</span>&nbsp;<span class="op" id="8097488">!=</span>&nbsp;<span class="ident" id="8097491">c</span><span class="op" id="8097492">[</span><span class="ident" id="8097493">i</span><span class="op" id="8097494">]</span>&nbsp;<span class="op" id="8097496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097501">t</span><span class="op" id="8097502">.</span><span class="ident" id="8097503">Errorf</span><span class="op" id="8097509">(</span><span class="string" id="8097510">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8097538">,</span>&nbsp;<span class="ident" id="8097540">f</span><span class="op" id="8097541">.</span><span class="ident" id="8097542">Name</span><span class="op" id="8097546">,</span>&nbsp;<span class="ident" id="8097548">i</span><span class="op" id="8097549">,</span>&nbsp;<span class="ident" id="8097551">b</span><span class="op" id="8097552">,</span>&nbsp;<span class="ident" id="8097554">c</span><span class="op" id="8097555">[</span><span class="ident" id="8097556">i</span><span class="op" id="8097557">]</span><span class="op" id="8097558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097563">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097575">}</span><br>
<span class="lineno"></span><span class="op" id="8097577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8097580">func</span>&nbsp;<span class="ident" id="8097585">testFileMode</span><span class="op" id="8097597">(</span><span class="ident" id="8097598">t</span>&nbsp;<span class="op" id="8097600">*</span><span class="ident" id="8097601">testing</span><span class="op" id="8097608">.</span><span class="ident" id="8097609">T</span><span class="op" id="8097610">,</span>&nbsp;<span class="ident" id="8097612">zipName</span>&nbsp;<span class="builtintype" id="8097620">string</span><span class="op" id="8097626">,</span>&nbsp;<span class="ident" id="8097628">f</span>&nbsp;<span class="op" id="8097630">*</span><span class="ident" id="8097631">File</span><span class="op" id="8097635">,</span>&nbsp;<span class="ident" id="8097637">want</span>&nbsp;<span class="ident" id="8097642">os</span><span class="op" id="8097644">.</span><span class="ident" id="8097645">FileMode</span><span class="op" id="8097653">)</span>&nbsp;<span class="op" id="8097655">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097658">mode</span>&nbsp;<span class="op" id="8097663">:=</span>&nbsp;<span class="ident" id="8097666">f</span><span class="op" id="8097667">.</span><span class="ident" id="8097668">Mode</span><span class="op" id="8097672">(</span><span class="op" id="8097673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097676">if</span>&nbsp;<span class="ident" id="8097679">want</span>&nbsp;<span class="op" id="8097684">==</span>&nbsp;<span class="num" id="8097687">0</span>&nbsp;<span class="op" id="8097689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097693">t</span><span class="op" id="8097694">.</span><span class="ident" id="8097695">Errorf</span><span class="op" id="8097701">(</span><span class="string" id="8097702">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="8097734">,</span>&nbsp;<span class="ident" id="8097736">zipName</span><span class="op" id="8097743">,</span>&nbsp;<span class="ident" id="8097745">f</span><span class="op" id="8097746">.</span><span class="ident" id="8097747">Name</span><span class="op" id="8097751">,</span>&nbsp;<span class="ident" id="8097753">mode</span><span class="op" id="8097757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097760">}</span>&nbsp;<span class="keyword" id="8097762">else</span>&nbsp;<span class="keyword" id="8097767">if</span>&nbsp;<span class="ident" id="8097770">mode</span>&nbsp;<span class="op" id="8097775">!=</span>&nbsp;<span class="ident" id="8097778">want</span>&nbsp;<span class="op" id="8097783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097787">t</span><span class="op" id="8097788">.</span><span class="ident" id="8097789">Errorf</span><span class="op" id="8097795">(</span><span class="string" id="8097796">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8097826">,</span>&nbsp;<span class="ident" id="8097828">zipName</span><span class="op" id="8097835">,</span>&nbsp;<span class="ident" id="8097837">f</span><span class="op" id="8097838">.</span><span class="ident" id="8097839">Name</span><span class="op" id="8097843">,</span>&nbsp;<span class="ident" id="8097845">want</span><span class="op" id="8097849">,</span>&nbsp;<span class="ident" id="8097851">mode</span><span class="op" id="8097855">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097858">}</span><br>
<span class="lineno"></span><span class="op" id="8097860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8097863">func</span>&nbsp;<span class="ident" id="8097868">TestInvalidFiles</span><span class="op" id="8097884">(</span><span class="ident" id="8097885">t</span>&nbsp;<span class="op" id="8097887">*</span><span class="ident" id="8097888">testing</span><span class="op" id="8097895">.</span><span class="ident" id="8097896">T</span><span class="op" id="8097897">)</span>&nbsp;<span class="op" id="8097899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097902">const</span>&nbsp;<span class="ident" id="8097908">size</span>&nbsp;<span class="op" id="8097913">=</span>&nbsp;<span class="num" id="8097915">1024</span>&nbsp;<span class="op" id="8097920">*</span>&nbsp;<span class="num" id="8097922">70</span>&nbsp;<span class="comment" id="8097925">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097934">b</span>&nbsp;<span class="op" id="8097936">:=</span>&nbsp;<span class="builtinfunc" id="8097939">make</span><span class="op" id="8097943">(</span><span class="op" id="8097944">[</span><span class="op" id="8097945">]</span><span class="builtintype" id="8097946">byte</span><span class="op" id="8097950">,</span>&nbsp;<span class="ident" id="8097952">size</span><span class="op" id="8097956">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8097960">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097971">_</span><span class="op" id="8097972">,</span>&nbsp;<span class="ident" id="8097974">err</span>&nbsp;<span class="op" id="8097978">:=</span>&nbsp;<span class="ident" id="8097981">NewReader</span><span class="op" id="8097990">(</span><span class="ident" id="8097991">bytes</span><span class="op" id="8097996">.</span><span class="ident" id="8097997">NewReader</span><span class="op" id="8098006">(</span><span class="ident" id="8098007">b</span><span class="op" id="8098008">)</span><span class="op" id="8098009">,</span>&nbsp;<span class="ident" id="8098011">size</span><span class="op" id="8098015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098018">if</span>&nbsp;<span class="ident" id="8098021">err</span>&nbsp;<span class="op" id="8098025">!=</span>&nbsp;<span class="ident" id="8098028">ErrFormat</span>&nbsp;<span class="op" id="8098038">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098042">t</span><span class="op" id="8098043">.</span><span class="ident" id="8098044">Errorf</span><span class="op" id="8098050">(</span><span class="string" id="8098051">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8098078">,</span>&nbsp;<span class="ident" id="8098080">err</span><span class="op" id="8098083">,</span>&nbsp;<span class="ident" id="8098085">ErrFormat</span><span class="op" id="8098094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8098101">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098137">sig</span>&nbsp;<span class="op" id="8098141">:=</span>&nbsp;<span class="builtinfunc" id="8098144">make</span><span class="op" id="8098148">(</span><span class="op" id="8098149">[</span><span class="op" id="8098150">]</span><span class="builtintype" id="8098151">byte</span><span class="op" id="8098155">,</span>&nbsp;<span class="num" id="8098157">4</span><span class="op" id="8098158">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098161">binary</span><span class="op" id="8098167">.</span><span class="ident" id="8098168">LittleEndian</span><span class="op" id="8098180">.</span><span class="ident" id="8098181">PutUint32</span><span class="op" id="8098190">(</span><span class="ident" id="8098191">sig</span><span class="op" id="8098194">,</span>&nbsp;<span class="ident" id="8098196">directoryEndSignature</span><span class="op" id="8098217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098220">for</span>&nbsp;<span class="ident" id="8098224">i</span>&nbsp;<span class="op" id="8098226">:=</span>&nbsp;<span class="num" id="8098229">0</span><span class="op" id="8098230">;</span>&nbsp;<span class="ident" id="8098232">i</span>&nbsp;<span class="op" id="8098234">&lt;</span>&nbsp;<span class="ident" id="8098236">size</span><span class="op" id="8098240">-</span><span class="num" id="8098241">4</span><span class="op" id="8098242">;</span>&nbsp;<span class="ident" id="8098244">i</span>&nbsp;<span class="op" id="8098246">+=</span>&nbsp;<span class="num" id="8098249">4</span>&nbsp;<span class="op" id="8098251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8098255">copy</span><span class="op" id="8098259">(</span><span class="ident" id="8098260">b</span><span class="op" id="8098261">[</span><span class="ident" id="8098262">i</span><span class="op" id="8098263">:</span><span class="ident" id="8098264">i</span><span class="op" id="8098265">+</span><span class="num" id="8098266">4</span><span class="op" id="8098267">]</span><span class="op" id="8098268">,</span>&nbsp;<span class="ident" id="8098270">sig</span><span class="op" id="8098273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098279">_</span><span class="op" id="8098280">,</span>&nbsp;<span class="ident" id="8098282">err</span>&nbsp;<span class="op" id="8098286">=</span>&nbsp;<span class="ident" id="8098288">NewReader</span><span class="op" id="8098297">(</span><span class="ident" id="8098298">bytes</span><span class="op" id="8098303">.</span><span class="ident" id="8098304">NewReader</span><span class="op" id="8098313">(</span><span class="ident" id="8098314">b</span><span class="op" id="8098315">)</span><span class="op" id="8098316">,</span>&nbsp;<span class="ident" id="8098318">size</span><span class="op" id="8098322">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098325">if</span>&nbsp;<span class="ident" id="8098328">err</span>&nbsp;<span class="op" id="8098332">!=</span>&nbsp;<span class="ident" id="8098335">ErrFormat</span>&nbsp;<span class="op" id="8098345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098349">t</span><span class="op" id="8098350">.</span><span class="ident" id="8098351">Errorf</span><span class="op" id="8098357">(</span><span class="string" id="8098358">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8098383">,</span>&nbsp;<span class="ident" id="8098385">err</span><span class="op" id="8098388">,</span>&nbsp;<span class="ident" id="8098390">ErrFormat</span><span class="op" id="8098399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098402">}</span><br>
<span class="lineno"></span><span class="op" id="8098404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="8098407">func</span>&nbsp;<span class="ident" id="8098412">messWith</span><span class="op" id="8098420">(</span><span class="ident" id="8098421">fileName</span>&nbsp;<span class="builtintype" id="8098430">string</span><span class="op" id="8098436">,</span>&nbsp;<span class="ident" id="8098438">corrupter</span>&nbsp;<span class="keyword" id="8098448">func</span><span class="op" id="8098452">(</span><span class="ident" id="8098453">b</span>&nbsp;<span class="op" id="8098455">[</span><span class="op" id="8098456">]</span><span class="builtintype" id="8098457">byte</span><span class="op" id="8098461">)</span><span class="op" id="8098462">)</span>&nbsp;<span class="op" id="8098464">(</span><span class="ident" id="8098465">r</span>&nbsp;<span class="ident" id="8098467">io</span><span class="op" id="8098469">.</span><span class="ident" id="8098470">ReaderAt</span><span class="op" id="8098478">,</span>&nbsp;<span class="ident" id="8098480">size</span>&nbsp;<span class="ident" id="8098485">int64</span><span class="op" id="8098490">)</span>&nbsp;<span class="op" id="8098492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098495">data</span><span class="op" id="8098499">,</span>&nbsp;<span class="ident" id="8098501">err</span>&nbsp;<span class="op" id="8098505">:=</span>&nbsp;<span class="ident" id="8098508">ioutil</span><span class="op" id="8098514">.</span><span class="ident" id="8098515">ReadFile</span><span class="op" id="8098523">(</span><span class="ident" id="8098524">filepath</span><span class="op" id="8098532">.</span><span class="ident" id="8098533">Join</span><span class="op" id="8098537">(</span><span class="string" id="8098538">&#34;testdata&#34;</span><span class="op" id="8098548">,</span>&nbsp;<span class="ident" id="8098550">fileName</span><span class="op" id="8098558">)</span><span class="op" id="8098559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098562">if</span>&nbsp;<span class="ident" id="8098565">err</span>&nbsp;<span class="op" id="8098569">!=</span>&nbsp;<span class="ident" id="8098572">nil</span>&nbsp;<span class="op" id="8098576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8098580">panic</span><span class="op" id="8098585">(</span><span class="string" id="8098586">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="8098603">+</span>&nbsp;<span class="ident" id="8098605">fileName</span>&nbsp;<span class="op" id="8098614">+</span>&nbsp;<span class="string" id="8098616">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="8098621">+</span>&nbsp;<span class="ident" id="8098623">err</span><span class="op" id="8098626">.</span><span class="ident" id="8098627">Error</span><span class="op" id="8098632">(</span><span class="op" id="8098633">)</span><span class="op" id="8098634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098637">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098640">corrupter</span><span class="op" id="8098649">(</span><span class="ident" id="8098650">data</span><span class="op" id="8098654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098657">return</span>&nbsp;<span class="ident" id="8098664">bytes</span><span class="op" id="8098669">.</span><span class="ident" id="8098670">NewReader</span><span class="op" id="8098679">(</span><span class="ident" id="8098680">data</span><span class="op" id="8098684">)</span><span class="op" id="8098685">,</span>&nbsp;<span class="ident" id="8098687">int64</span><span class="op" id="8098692">(</span><span class="builtinfunc" id="8098693">len</span><span class="op" id="8098696">(</span><span class="ident" id="8098697">data</span><span class="op" id="8098701">)</span><span class="op" id="8098702">)</span><br>
<span class="lineno"></span><span class="op" id="8098704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8098707">func</span>&nbsp;<span class="ident" id="8098712">returnCorruptCRC32Zip</span><span class="op" id="8098733">(</span><span class="op" id="8098734">)</span>&nbsp;<span class="op" id="8098736">(</span><span class="ident" id="8098737">r</span>&nbsp;<span class="ident" id="8098739">io</span><span class="op" id="8098741">.</span><span class="ident" id="8098742">ReaderAt</span><span class="op" id="8098750">,</span>&nbsp;<span class="ident" id="8098752">size</span>&nbsp;<span class="ident" id="8098757">int64</span><span class="op" id="8098762">)</span>&nbsp;<span class="op" id="8098764">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098767">return</span>&nbsp;<span class="ident" id="8098774">messWith</span><span class="op" id="8098782">(</span><span class="string" id="8098783">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="8098809">,</span>&nbsp;<span class="keyword" id="8098811">func</span><span class="op" id="8098815">(</span><span class="ident" id="8098816">b</span>&nbsp;<span class="op" id="8098818">[</span><span class="op" id="8098819">]</span><span class="builtintype" id="8098820">byte</span><span class="op" id="8098824">)</span>&nbsp;<span class="op" id="8098826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8098830">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098885">b</span><span class="op" id="8098886">[</span><span class="num" id="8098887">0x2d</span><span class="op" id="8098891">]</span><span class="op" id="8098892">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098896">}</span><span class="op" id="8098897">)</span><br>
<span class="lineno"></span><span class="op" id="8098899">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="8098902">func</span>&nbsp;<span class="ident" id="8098907">returnCorruptNotStreamedZip</span><span class="op" id="8098934">(</span><span class="op" id="8098935">)</span>&nbsp;<span class="op" id="8098937">(</span><span class="ident" id="8098938">r</span>&nbsp;<span class="ident" id="8098940">io</span><span class="op" id="8098942">.</span><span class="ident" id="8098943">ReaderAt</span><span class="op" id="8098951">,</span>&nbsp;<span class="ident" id="8098953">size</span>&nbsp;<span class="ident" id="8098958">int64</span><span class="op" id="8098963">)</span>&nbsp;<span class="op" id="8098965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098968">return</span>&nbsp;<span class="ident" id="8098975">messWith</span><span class="op" id="8098983">(</span><span class="string" id="8098984">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="8099008">,</span>&nbsp;<span class="keyword" id="8099010">func</span><span class="op" id="8099014">(</span><span class="ident" id="8099015">b</span>&nbsp;<span class="op" id="8099017">[</span><span class="op" id="8099018">]</span><span class="builtintype" id="8099019">byte</span><span class="op" id="8099023">)</span>&nbsp;<span class="op" id="8099025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099029">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099078">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099123">b</span><span class="op" id="8099124">[</span><span class="num" id="8099125">0x11</span><span class="op" id="8099129">]</span><span class="op" id="8099130">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099135">b</span><span class="op" id="8099136">[</span><span class="num" id="8099137">0x9d</span><span class="op" id="8099141">]</span><span class="op" id="8099142">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099148">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099203">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099260">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099318">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099372">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099427">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099448">}</span><span class="op" id="8099449">)</span><br>
<span class="lineno">465</span><span class="op" id="8099451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8099454">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="8099518">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="8099579">func</span>&nbsp;<span class="ident" id="8099584">rZipBytes</span><span class="op" id="8099593">(</span><span class="op" id="8099594">)</span>&nbsp;<span class="op" id="8099596">[</span><span class="op" id="8099597">]</span><span class="builtintype" id="8099598">byte</span>&nbsp;<span class="op" id="8099603">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099606">s</span>&nbsp;<span class="op" id="8099608">:=</span>&nbsp;<span class="string" id="8099611">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101159">s</span>&nbsp;<span class="op" id="8101161">=</span>&nbsp;<span class="ident" id="8101163">regexp</span><span class="op" id="8101169">.</span><span class="ident" id="8101170">MustCompile</span><span class="op" id="8101181">(</span><span class="string" id="8101182">`[0-9a-f]{7}`</span><span class="op" id="8101195">)</span><span class="op" id="8101196">.</span><span class="ident" id="8101197">ReplaceAllString</span><span class="op" id="8101213">(</span><span class="ident" id="8101214">s</span><span class="op" id="8101215">,</span>&nbsp;<span class="string" id="8101217">&#34;&#34;</span><span class="op" id="8101219">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101222">s</span>&nbsp;<span class="op" id="8101224">=</span>&nbsp;<span class="ident" id="8101226">regexp</span><span class="op" id="8101232">.</span><span class="ident" id="8101233">MustCompile</span><span class="op" id="8101244">(</span><span class="string" id="8101245">`\s+`</span><span class="op" id="8101250">)</span><span class="op" id="8101251">.</span><span class="ident" id="8101252">ReplaceAllString</span><span class="op" id="8101268">(</span><span class="ident" id="8101269">s</span><span class="op" id="8101270">,</span>&nbsp;<span class="string" id="8101272">&#34;&#34;</span><span class="op" id="8101274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101277">b</span><span class="op" id="8101278">,</span>&nbsp;<span class="ident" id="8101280">err</span>&nbsp;<span class="op" id="8101284">:=</span>&nbsp;<span class="ident" id="8101287">hex</span><span class="op" id="8101290">.</span><span class="ident" id="8101291">DecodeString</span><span class="op" id="8101303">(</span><span class="ident" id="8101304">s</span><span class="op" id="8101305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101308">if</span>&nbsp;<span class="ident" id="8101311">err</span>&nbsp;<span class="op" id="8101315">!=</span>&nbsp;<span class="ident" id="8101318">nil</span>&nbsp;<span class="op" id="8101322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8101326">panic</span><span class="op" id="8101331">(</span><span class="ident" id="8101332">err</span><span class="op" id="8101335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101338">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101341">return</span>&nbsp;<span class="ident" id="8101348">b</span><br>
<span class="lineno"></span><span class="op" id="8101350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8101353">func</span>&nbsp;<span class="ident" id="8101358">returnRecursiveZip</span><span class="op" id="8101376">(</span><span class="op" id="8101377">)</span>&nbsp;<span class="op" id="8101379">(</span><span class="ident" id="8101380">r</span>&nbsp;<span class="ident" id="8101382">io</span><span class="op" id="8101384">.</span><span class="ident" id="8101385">ReaderAt</span><span class="op" id="8101393">,</span>&nbsp;<span class="ident" id="8101395">size</span>&nbsp;<span class="ident" id="8101400">int64</span><span class="op" id="8101405">)</span>&nbsp;<span class="op" id="8101407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101410">b</span>&nbsp;<span class="op" id="8101412">:=</span>&nbsp;<span class="ident" id="8101415">rZipBytes</span><span class="op" id="8101424">(</span><span class="op" id="8101425">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101428">return</span>&nbsp;<span class="ident" id="8101435">bytes</span><span class="op" id="8101440">.</span><span class="ident" id="8101441">NewReader</span><span class="op" id="8101450">(</span><span class="ident" id="8101451">b</span><span class="op" id="8101452">)</span><span class="op" id="8101453">,</span>&nbsp;<span class="ident" id="8101455">int64</span><span class="op" id="8101460">(</span><span class="builtinfunc" id="8101461">len</span><span class="op" id="8101464">(</span><span class="ident" id="8101465">b</span><span class="op" id="8101466">)</span><span class="op" id="8101467">)</span><br>
<span class="lineno"></span><span class="op" id="8101469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8101472">func</span>&nbsp;<span class="ident" id="8101477">TestIssue8186</span><span class="op" id="8101490">(</span><span class="ident" id="8101491">t</span>&nbsp;<span class="op" id="8101493">*</span><span class="ident" id="8101494">testing</span><span class="op" id="8101501">.</span><span class="ident" id="8101502">T</span><span class="op" id="8101503">)</span>&nbsp;<span class="op" id="8101505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8101508">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101569">dirEnts</span>&nbsp;<span class="op" id="8101577">:=</span>&nbsp;<span class="op" id="8101580">[</span><span class="op" id="8101581">]</span><span class="builtintype" id="8101582">string</span><span class="op" id="8101588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8101592">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="8101819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8101823">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="8102001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8102005">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="8102176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8102180">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="8102348">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8102352">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="8102535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8102539">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?Ļ\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="8102721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8102725">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="8102895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8102899">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98Ьo\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="8103068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8103072">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="8103245">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103251">for</span>&nbsp;<span class="ident" id="8103255">i</span><span class="op" id="8103256">,</span>&nbsp;<span class="ident" id="8103258">s</span>&nbsp;<span class="op" id="8103260">:=</span>&nbsp;<span class="keyword" id="8103263">range</span>&nbsp;<span class="ident" id="8103269">dirEnts</span>&nbsp;<span class="op" id="8103277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103281">var</span>&nbsp;<span class="ident" id="8103285">f</span>&nbsp;<span class="ident" id="8103287">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103294">err</span>&nbsp;<span class="op" id="8103298">:=</span>&nbsp;<span class="ident" id="8103301">readDirectoryHeader</span><span class="op" id="8103320">(</span><span class="op" id="8103321">&amp;</span><span class="ident" id="8103322">f</span><span class="op" id="8103323">,</span>&nbsp;<span class="ident" id="8103325">strings</span><span class="op" id="8103332">.</span><span class="ident" id="8103333">NewReader</span><span class="op" id="8103342">(</span><span class="ident" id="8103343">s</span><span class="op" id="8103344">)</span><span class="op" id="8103345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103349">if</span>&nbsp;<span class="ident" id="8103352">err</span>&nbsp;<span class="op" id="8103356">!=</span>&nbsp;<span class="ident" id="8103359">nil</span>&nbsp;<span class="op" id="8103363">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103368">t</span><span class="op" id="8103369">.</span><span class="ident" id="8103370">Errorf</span><span class="op" id="8103376">(</span><span class="string" id="8103377">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="8103400">,</span>&nbsp;<span class="ident" id="8103402">i</span><span class="op" id="8103403">,</span>&nbsp;<span class="ident" id="8103405">err</span><span class="op" id="8103408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103415">}</span><br>
<span class="lineno"></span><span class="op" id="8103417">}</span>
</div>
</body>
</html>
