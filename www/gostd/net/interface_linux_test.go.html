<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html" class="current">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6615497">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6615553">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6615607">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6615658">package</span>&nbsp;<span class="ident" id="6615666">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6615671">import</span>&nbsp;<span class="op" id="6615678">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6615681">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6615688">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6615699">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6615709">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6615712">func</span>&nbsp;<span class="op" id="6615717">(</span><span class="ident" id="6615718">ti</span>&nbsp;<span class="op" id="6615721">*</span><span class="ident" id="6615722">testInterface</span><span class="op" id="6615735">)</span>&nbsp;<span class="ident" id="6615737">setBroadcast</span><span class="op" id="6615749">(</span><span class="ident" id="6615750">suffix</span>&nbsp;<span class="builtintype" id="6615757">int</span><span class="op" id="6615760">)</span>&nbsp;<span class="builtintype" id="6615762">error</span>&nbsp;<span class="op" id="6615768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615771">ti</span><span class="op" id="6615773">.</span><span class="ident" id="6615774">name</span>&nbsp;<span class="op" id="6615779">=</span>&nbsp;<span class="ident" id="6615781">fmt</span><span class="op" id="6615784">.</span><span class="ident" id="6615785">Sprintf</span><span class="op" id="6615792">(</span><span class="string" id="6615793">&#34;gotest%d&#34;</span><span class="op" id="6615803">,</span>&nbsp;<span class="ident" id="6615805">suffix</span><span class="op" id="6615811">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615814">xname</span><span class="op" id="6615819">,</span>&nbsp;<span class="ident" id="6615821">err</span>&nbsp;<span class="op" id="6615825">:=</span>&nbsp;<span class="ident" id="6615828">exec</span><span class="op" id="6615832">.</span><span class="ident" id="6615833">LookPath</span><span class="op" id="6615841">(</span><span class="string" id="6615842">&#34;ip&#34;</span><span class="op" id="6615846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6615849">if</span>&nbsp;<span class="ident" id="6615852">err</span>&nbsp;<span class="op" id="6615856">!=</span>&nbsp;<span class="ident" id="6615859">nil</span>&nbsp;<span class="op" id="6615863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6615867">return</span>&nbsp;<span class="ident" id="6615874">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6615879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615882">ti</span><span class="op" id="6615884">.</span><span class="ident" id="6615885">setupCmds</span>&nbsp;<span class="op" id="6615895">=</span>&nbsp;<span class="builtinfunc" id="6615897">append</span><span class="op" id="6615903">(</span><span class="ident" id="6615904">ti</span><span class="op" id="6615906">.</span><span class="ident" id="6615907">setupCmds</span><span class="op" id="6615916">,</span>&nbsp;<span class="op" id="6615918">&amp;</span><span class="ident" id="6615919">exec</span><span class="op" id="6615923">.</span><span class="ident" id="6615924">Cmd</span><span class="op" id="6615927">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615931">Path</span><span class="op" id="6615935">:</span>&nbsp;<span class="ident" id="6615937">xname</span><span class="op" id="6615942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615946">Args</span><span class="op" id="6615950">:</span>&nbsp;<span class="op" id="6615952">[</span><span class="op" id="6615953">]</span><span class="builtintype" id="6615954">string</span><span class="op" id="6615960">{</span><span class="string" id="6615961">&#34;ip&#34;</span><span class="op" id="6615965">,</span>&nbsp;<span class="string" id="6615967">&#34;link&#34;</span><span class="op" id="6615973">,</span>&nbsp;<span class="string" id="6615975">&#34;add&#34;</span><span class="op" id="6615980">,</span>&nbsp;<span class="ident" id="6615982">ti</span><span class="op" id="6615984">.</span><span class="ident" id="6615985">name</span><span class="op" id="6615989">,</span>&nbsp;<span class="string" id="6615991">&#34;type&#34;</span><span class="op" id="6615997">,</span>&nbsp;<span class="string" id="6615999">&#34;dummy&#34;</span><span class="op" id="6616006">}</span><span class="op" id="6616007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6616010">}</span><span class="op" id="6616011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616014">ti</span><span class="op" id="6616016">.</span><span class="ident" id="6616017">teardownCmds</span>&nbsp;<span class="op" id="6616030">=</span>&nbsp;<span class="builtinfunc" id="6616032">append</span><span class="op" id="6616038">(</span><span class="ident" id="6616039">ti</span><span class="op" id="6616041">.</span><span class="ident" id="6616042">teardownCmds</span><span class="op" id="6616054">,</span>&nbsp;<span class="op" id="6616056">&amp;</span><span class="ident" id="6616057">exec</span><span class="op" id="6616061">.</span><span class="ident" id="6616062">Cmd</span><span class="op" id="6616065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616069">Path</span><span class="op" id="6616073">:</span>&nbsp;<span class="ident" id="6616075">xname</span><span class="op" id="6616080">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616084">Args</span><span class="op" id="6616088">:</span>&nbsp;<span class="op" id="6616090">[</span><span class="op" id="6616091">]</span><span class="builtintype" id="6616092">string</span><span class="op" id="6616098">{</span><span class="string" id="6616099">&#34;ip&#34;</span><span class="op" id="6616103">,</span>&nbsp;<span class="string" id="6616105">&#34;link&#34;</span><span class="op" id="6616111">,</span>&nbsp;<span class="string" id="6616113">&#34;delete&#34;</span><span class="op" id="6616121">,</span>&nbsp;<span class="ident" id="6616123">ti</span><span class="op" id="6616125">.</span><span class="ident" id="6616126">name</span><span class="op" id="6616130">,</span>&nbsp;<span class="string" id="6616132">&#34;type&#34;</span><span class="op" id="6616138">,</span>&nbsp;<span class="string" id="6616140">&#34;dummy&#34;</span><span class="op" id="6616147">}</span><span class="op" id="6616148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6616151">}</span><span class="op" id="6616152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6616155">return</span>&nbsp;<span class="ident" id="6616162">nil</span><br>
<span class="lineno"></span><span class="op" id="6616166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6616169">func</span>&nbsp;<span class="op" id="6616174">(</span><span class="ident" id="6616175">ti</span>&nbsp;<span class="op" id="6616178">*</span><span class="ident" id="6616179">testInterface</span><span class="op" id="6616192">)</span>&nbsp;<span class="ident" id="6616194">setPointToPoint</span><span class="op" id="6616209">(</span><span class="ident" id="6616210">suffix</span>&nbsp;<span class="builtintype" id="6616217">int</span><span class="op" id="6616220">,</span>&nbsp;<span class="ident" id="6616222">local</span><span class="op" id="6616227">,</span>&nbsp;<span class="ident" id="6616229">remote</span>&nbsp;<span class="builtintype" id="6616236">string</span><span class="op" id="6616242">)</span>&nbsp;<span class="builtintype" id="6616244">error</span>&nbsp;<span class="op" id="6616250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616253">ti</span><span class="op" id="6616255">.</span><span class="ident" id="6616256">name</span>&nbsp;<span class="op" id="6616261">=</span>&nbsp;<span class="ident" id="6616263">fmt</span><span class="op" id="6616266">.</span><span class="ident" id="6616267">Sprintf</span><span class="op" id="6616274">(</span><span class="string" id="6616275">&#34;gotest%d&#34;</span><span class="op" id="6616285">,</span>&nbsp;<span class="ident" id="6616287">suffix</span><span class="op" id="6616293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616296">ti</span><span class="op" id="6616298">.</span><span class="ident" id="6616299">local</span>&nbsp;<span class="op" id="6616305">=</span>&nbsp;<span class="ident" id="6616307">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616314">ti</span><span class="op" id="6616316">.</span><span class="ident" id="6616317">remote</span>&nbsp;<span class="op" id="6616324">=</span>&nbsp;<span class="ident" id="6616326">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616334">xname</span><span class="op" id="6616339">,</span>&nbsp;<span class="ident" id="6616341">err</span>&nbsp;<span class="op" id="6616345">:=</span>&nbsp;<span class="ident" id="6616348">exec</span><span class="op" id="6616352">.</span><span class="ident" id="6616353">LookPath</span><span class="op" id="6616361">(</span><span class="string" id="6616362">&#34;ip&#34;</span><span class="op" id="6616366">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6616369">if</span>&nbsp;<span class="ident" id="6616372">err</span>&nbsp;<span class="op" id="6616376">!=</span>&nbsp;<span class="ident" id="6616379">nil</span>&nbsp;<span class="op" id="6616383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6616387">return</span>&nbsp;<span class="ident" id="6616394">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6616399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616402">ti</span><span class="op" id="6616404">.</span><span class="ident" id="6616405">setupCmds</span>&nbsp;<span class="op" id="6616415">=</span>&nbsp;<span class="builtinfunc" id="6616417">append</span><span class="op" id="6616423">(</span><span class="ident" id="6616424">ti</span><span class="op" id="6616426">.</span><span class="ident" id="6616427">setupCmds</span><span class="op" id="6616436">,</span>&nbsp;<span class="op" id="6616438">&amp;</span><span class="ident" id="6616439">exec</span><span class="op" id="6616443">.</span><span class="ident" id="6616444">Cmd</span><span class="op" id="6616447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616451">Path</span><span class="op" id="6616455">:</span>&nbsp;<span class="ident" id="6616457">xname</span><span class="op" id="6616462">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616466">Args</span><span class="op" id="6616470">:</span>&nbsp;<span class="op" id="6616472">[</span><span class="op" id="6616473">]</span><span class="builtintype" id="6616474">string</span><span class="op" id="6616480">{</span><span class="string" id="6616481">&#34;ip&#34;</span><span class="op" id="6616485">,</span>&nbsp;<span class="string" id="6616487">&#34;tunnel&#34;</span><span class="op" id="6616495">,</span>&nbsp;<span class="string" id="6616497">&#34;add&#34;</span><span class="op" id="6616502">,</span>&nbsp;<span class="ident" id="6616504">ti</span><span class="op" id="6616506">.</span><span class="ident" id="6616507">name</span><span class="op" id="6616511">,</span>&nbsp;<span class="string" id="6616513">&#34;mode&#34;</span><span class="op" id="6616519">,</span>&nbsp;<span class="string" id="6616521">&#34;gre&#34;</span><span class="op" id="6616526">,</span>&nbsp;<span class="string" id="6616528">&#34;local&#34;</span><span class="op" id="6616535">,</span>&nbsp;<span class="ident" id="6616537">local</span><span class="op" id="6616542">,</span>&nbsp;<span class="string" id="6616544">&#34;remote&#34;</span><span class="op" id="6616552">,</span>&nbsp;<span class="ident" id="6616554">remote</span><span class="op" id="6616560">}</span><span class="op" id="6616561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6616564">}</span><span class="op" id="6616565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616568">ti</span><span class="op" id="6616570">.</span><span class="ident" id="6616571">teardownCmds</span>&nbsp;<span class="op" id="6616584">=</span>&nbsp;<span class="builtinfunc" id="6616586">append</span><span class="op" id="6616592">(</span><span class="ident" id="6616593">ti</span><span class="op" id="6616595">.</span><span class="ident" id="6616596">teardownCmds</span><span class="op" id="6616608">,</span>&nbsp;<span class="op" id="6616610">&amp;</span><span class="ident" id="6616611">exec</span><span class="op" id="6616615">.</span><span class="ident" id="6616616">Cmd</span><span class="op" id="6616619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616623">Path</span><span class="op" id="6616627">:</span>&nbsp;<span class="ident" id="6616629">xname</span><span class="op" id="6616634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616638">Args</span><span class="op" id="6616642">:</span>&nbsp;<span class="op" id="6616644">[</span><span class="op" id="6616645">]</span><span class="builtintype" id="6616646">string</span><span class="op" id="6616652">{</span><span class="string" id="6616653">&#34;ip&#34;</span><span class="op" id="6616657">,</span>&nbsp;<span class="string" id="6616659">&#34;tunnel&#34;</span><span class="op" id="6616667">,</span>&nbsp;<span class="string" id="6616669">&#34;del&#34;</span><span class="op" id="6616674">,</span>&nbsp;<span class="ident" id="6616676">ti</span><span class="op" id="6616678">.</span><span class="ident" id="6616679">name</span><span class="op" id="6616683">,</span>&nbsp;<span class="string" id="6616685">&#34;mode&#34;</span><span class="op" id="6616691">,</span>&nbsp;<span class="string" id="6616693">&#34;gre&#34;</span><span class="op" id="6616698">,</span>&nbsp;<span class="string" id="6616700">&#34;local&#34;</span><span class="op" id="6616707">,</span>&nbsp;<span class="ident" id="6616709">local</span><span class="op" id="6616714">,</span>&nbsp;<span class="string" id="6616716">&#34;remote&#34;</span><span class="op" id="6616724">,</span>&nbsp;<span class="ident" id="6616726">remote</span><span class="op" id="6616732">}</span><span class="op" id="6616733">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6616736">}</span><span class="op" id="6616737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616740">xname</span><span class="op" id="6616745">,</span>&nbsp;<span class="ident" id="6616747">err</span>&nbsp;<span class="op" id="6616751">=</span>&nbsp;<span class="ident" id="6616753">exec</span><span class="op" id="6616757">.</span><span class="ident" id="6616758">LookPath</span><span class="op" id="6616766">(</span><span class="string" id="6616767">&#34;ifconfig&#34;</span><span class="op" id="6616777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6616780">if</span>&nbsp;<span class="ident" id="6616783">err</span>&nbsp;<span class="op" id="6616787">!=</span>&nbsp;<span class="ident" id="6616790">nil</span>&nbsp;<span class="op" id="6616794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6616798">return</span>&nbsp;<span class="ident" id="6616805">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6616810">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616813">ti</span><span class="op" id="6616815">.</span><span class="ident" id="6616816">setupCmds</span>&nbsp;<span class="op" id="6616826">=</span>&nbsp;<span class="builtinfunc" id="6616828">append</span><span class="op" id="6616834">(</span><span class="ident" id="6616835">ti</span><span class="op" id="6616837">.</span><span class="ident" id="6616838">setupCmds</span><span class="op" id="6616847">,</span>&nbsp;<span class="op" id="6616849">&amp;</span><span class="ident" id="6616850">exec</span><span class="op" id="6616854">.</span><span class="ident" id="6616855">Cmd</span><span class="op" id="6616858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616862">Path</span><span class="op" id="6616866">:</span>&nbsp;<span class="ident" id="6616868">xname</span><span class="op" id="6616873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616877">Args</span><span class="op" id="6616881">:</span>&nbsp;<span class="op" id="6616883">[</span><span class="op" id="6616884">]</span><span class="builtintype" id="6616885">string</span><span class="op" id="6616891">{</span><span class="string" id="6616892">&#34;ifconfig&#34;</span><span class="op" id="6616902">,</span>&nbsp;<span class="ident" id="6616904">ti</span><span class="op" id="6616906">.</span><span class="ident" id="6616907">name</span><span class="op" id="6616911">,</span>&nbsp;<span class="string" id="6616913">&#34;inet&#34;</span><span class="op" id="6616919">,</span>&nbsp;<span class="ident" id="6616921">local</span><span class="op" id="6616926">,</span>&nbsp;<span class="string" id="6616928">&#34;dstaddr&#34;</span><span class="op" id="6616937">,</span>&nbsp;<span class="ident" id="6616939">remote</span><span class="op" id="6616945">}</span><span class="op" id="6616946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6616949">}</span><span class="op" id="6616950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6616953">return</span>&nbsp;<span class="ident" id="6616960">nil</span><br>
<span class="lineno">55</span><span class="op" id="6616964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6616967">const</span>&nbsp;<span class="op" id="6616973">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6616976">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="6616997">=</span>&nbsp;<span class="num" id="6616999">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6617003">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="6617024">=</span>&nbsp;<span class="num" id="6617026">18</span><br>
<span class="lineno">60</span><span class="op" id="6617029">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6617032">var</span>&nbsp;<span class="op" id="6617036">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6617039">igmpInterfaceTable</span>&nbsp;<span class="op" id="6617058">=</span>&nbsp;<span class="op" id="6617060">[</span><span class="op" id="6617061">]</span><span class="ident" id="6617062">Interface</span><span class="op" id="6617071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617075">{</span><span class="ident" id="6617076">Name</span><span class="op" id="6617080">:</span>&nbsp;<span class="string" id="6617082">&#34;lo&#34;</span><span class="op" id="6617086">}</span><span class="op" id="6617087">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617091">{</span><span class="ident" id="6617092">Name</span><span class="op" id="6617096">:</span>&nbsp;<span class="string" id="6617098">&#34;eth0&#34;</span><span class="op" id="6617104">}</span><span class="op" id="6617105">,</span>&nbsp;<span class="op" id="6617107">{</span><span class="ident" id="6617108">Name</span><span class="op" id="6617112">:</span>&nbsp;<span class="string" id="6617114">&#34;eth1&#34;</span><span class="op" id="6617120">}</span><span class="op" id="6617121">,</span>&nbsp;<span class="op" id="6617123">{</span><span class="ident" id="6617124">Name</span><span class="op" id="6617128">:</span>&nbsp;<span class="string" id="6617130">&#34;eth2&#34;</span><span class="op" id="6617136">}</span><span class="op" id="6617137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617141">{</span><span class="ident" id="6617142">Name</span><span class="op" id="6617146">:</span>&nbsp;<span class="string" id="6617148">&#34;eth0.100&#34;</span><span class="op" id="6617158">}</span><span class="op" id="6617159">,</span>&nbsp;<span class="op" id="6617161">{</span><span class="ident" id="6617162">Name</span><span class="op" id="6617166">:</span>&nbsp;<span class="string" id="6617168">&#34;eth0.101&#34;</span><span class="op" id="6617178">}</span><span class="op" id="6617179">,</span>&nbsp;<span class="op" id="6617181">{</span><span class="ident" id="6617182">Name</span><span class="op" id="6617186">:</span>&nbsp;<span class="string" id="6617188">&#34;eth0.102&#34;</span><span class="op" id="6617198">}</span><span class="op" id="6617199">,</span>&nbsp;<span class="op" id="6617201">{</span><span class="ident" id="6617202">Name</span><span class="op" id="6617206">:</span>&nbsp;<span class="string" id="6617208">&#34;eth0.103&#34;</span><span class="op" id="6617218">}</span><span class="op" id="6617219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617223">{</span><span class="ident" id="6617224">Name</span><span class="op" id="6617228">:</span>&nbsp;<span class="string" id="6617230">&#34;device1tap2&#34;</span><span class="op" id="6617243">}</span><span class="op" id="6617244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6617250">igmp6InterfaceTable</span>&nbsp;<span class="op" id="6617270">=</span>&nbsp;<span class="op" id="6617272">[</span><span class="op" id="6617273">]</span><span class="ident" id="6617274">Interface</span><span class="op" id="6617283">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617287">{</span><span class="ident" id="6617288">Name</span><span class="op" id="6617292">:</span>&nbsp;<span class="string" id="6617294">&#34;lo&#34;</span><span class="op" id="6617298">}</span><span class="op" id="6617299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617303">{</span><span class="ident" id="6617304">Name</span><span class="op" id="6617308">:</span>&nbsp;<span class="string" id="6617310">&#34;eth0&#34;</span><span class="op" id="6617316">}</span><span class="op" id="6617317">,</span>&nbsp;<span class="op" id="6617319">{</span><span class="ident" id="6617320">Name</span><span class="op" id="6617324">:</span>&nbsp;<span class="string" id="6617326">&#34;eth1&#34;</span><span class="op" id="6617332">}</span><span class="op" id="6617333">,</span>&nbsp;<span class="op" id="6617335">{</span><span class="ident" id="6617336">Name</span><span class="op" id="6617340">:</span>&nbsp;<span class="string" id="6617342">&#34;eth2&#34;</span><span class="op" id="6617348">}</span><span class="op" id="6617349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617353">{</span><span class="ident" id="6617354">Name</span><span class="op" id="6617358">:</span>&nbsp;<span class="string" id="6617360">&#34;eth0.100&#34;</span><span class="op" id="6617370">}</span><span class="op" id="6617371">,</span>&nbsp;<span class="op" id="6617373">{</span><span class="ident" id="6617374">Name</span><span class="op" id="6617378">:</span>&nbsp;<span class="string" id="6617380">&#34;eth0.101&#34;</span><span class="op" id="6617390">}</span><span class="op" id="6617391">,</span>&nbsp;<span class="op" id="6617393">{</span><span class="ident" id="6617394">Name</span><span class="op" id="6617398">:</span>&nbsp;<span class="string" id="6617400">&#34;eth0.102&#34;</span><span class="op" id="6617410">}</span><span class="op" id="6617411">,</span>&nbsp;<span class="op" id="6617413">{</span><span class="ident" id="6617414">Name</span><span class="op" id="6617418">:</span>&nbsp;<span class="string" id="6617420">&#34;eth0.103&#34;</span><span class="op" id="6617430">}</span><span class="op" id="6617431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617435">{</span><span class="ident" id="6617436">Name</span><span class="op" id="6617440">:</span>&nbsp;<span class="string" id="6617442">&#34;device1tap2&#34;</span><span class="op" id="6617455">}</span><span class="op" id="6617456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617460">{</span><span class="ident" id="6617461">Name</span><span class="op" id="6617465">:</span>&nbsp;<span class="string" id="6617467">&#34;pan0&#34;</span><span class="op" id="6617473">}</span><span class="op" id="6617474">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617477">}</span><br>
<span class="lineno"></span><span class="op" id="6617479">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6617482">func</span>&nbsp;<span class="ident" id="6617487">TestParseProcNet</span><span class="op" id="6617503">(</span><span class="ident" id="6617504">t</span>&nbsp;<span class="op" id="6617506">*</span><span class="ident" id="6617507">testing</span><span class="op" id="6617514">.</span><span class="ident" id="6617515">T</span><span class="op" id="6617516">)</span>&nbsp;<span class="op" id="6617518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6617521">defer</span>&nbsp;<span class="keyword" id="6617527">func</span><span class="op" id="6617531">(</span><span class="op" id="6617532">)</span>&nbsp;<span class="op" id="6617534">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6617538">if</span>&nbsp;<span class="ident" id="6617541">p</span>&nbsp;<span class="op" id="6617543">:=</span>&nbsp;<span class="builtinfunc" id="6617546">recover</span><span class="op" id="6617553">(</span><span class="op" id="6617554">)</span><span class="op" id="6617555">;</span>&nbsp;<span class="ident" id="6617557">p</span>&nbsp;<span class="op" id="6617559">!=</span>&nbsp;<span class="ident" id="6617562">nil</span>&nbsp;<span class="op" id="6617566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6617571">t</span><span class="op" id="6617572">.</span><span class="ident" id="6617573">Fatalf</span><span class="op" id="6617579">(</span><span class="string" id="6617580">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="6617632">,</span>&nbsp;<span class="ident" id="6617634">p</span><span class="op" id="6617635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617642">}</span><span class="op" id="6617643">(</span><span class="op" id="6617644">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6617648">var</span>&nbsp;<span class="ident" id="6617652">ifmat4</span>&nbsp;<span class="op" id="6617659">[</span><span class="op" id="6617660">]</span><span class="ident" id="6617661">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6617667">for</span>&nbsp;<span class="ident" id="6617671">_</span><span class="op" id="6617672">,</span>&nbsp;<span class="ident" id="6617674">ifi</span>&nbsp;<span class="op" id="6617678">:=</span>&nbsp;<span class="keyword" id="6617681">range</span>&nbsp;<span class="ident" id="6617687">igmpInterfaceTable</span>&nbsp;<span class="op" id="6617706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6617710">ifmat</span>&nbsp;<span class="op" id="6617716">:=</span>&nbsp;<span class="ident" id="6617719">parseProcNetIGMP</span><span class="op" id="6617735">(</span><span class="string" id="6617736">&#34;testdata/igmp&#34;</span><span class="op" id="6617751">,</span>&nbsp;<span class="op" id="6617753">&amp;</span><span class="ident" id="6617754">ifi</span><span class="op" id="6617757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6617761">ifmat4</span>&nbsp;<span class="op" id="6617768">=</span>&nbsp;<span class="builtinfunc" id="6617770">append</span><span class="op" id="6617776">(</span><span class="ident" id="6617777">ifmat4</span><span class="op" id="6617783">,</span>&nbsp;<span class="ident" id="6617785">ifmat</span><span class="op" id="6617790">...</span><span class="op" id="6617793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617796">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6617799">if</span>&nbsp;<span class="builtinfunc" id="6617802">len</span><span class="op" id="6617805">(</span><span class="ident" id="6617806">ifmat4</span><span class="op" id="6617812">)</span>&nbsp;<span class="op" id="6617814">!=</span>&nbsp;<span class="ident" id="6617817">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="6617838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6617842">t</span><span class="op" id="6617843">.</span><span class="ident" id="6617844">Fatalf</span><span class="op" id="6617850">(</span><span class="string" id="6617851">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6617903">,</span>&nbsp;<span class="builtinfunc" id="6617905">len</span><span class="op" id="6617908">(</span><span class="ident" id="6617909">ifmat4</span><span class="op" id="6617915">)</span><span class="op" id="6617916">,</span>&nbsp;<span class="ident" id="6617918">numOfTestIPv4MCAddrs</span><span class="op" id="6617938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6617941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6617945">var</span>&nbsp;<span class="ident" id="6617949">ifmat6</span>&nbsp;<span class="op" id="6617956">[</span><span class="op" id="6617957">]</span><span class="ident" id="6617958">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6617964">for</span>&nbsp;<span class="ident" id="6617968">_</span><span class="op" id="6617969">,</span>&nbsp;<span class="ident" id="6617971">ifi</span>&nbsp;<span class="op" id="6617975">:=</span>&nbsp;<span class="keyword" id="6617978">range</span>&nbsp;<span class="ident" id="6617984">igmp6InterfaceTable</span>&nbsp;<span class="op" id="6618004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6618008">ifmat</span>&nbsp;<span class="op" id="6618014">:=</span>&nbsp;<span class="ident" id="6618017">parseProcNetIGMP6</span><span class="op" id="6618034">(</span><span class="string" id="6618035">&#34;testdata/igmp6&#34;</span><span class="op" id="6618051">,</span>&nbsp;<span class="op" id="6618053">&amp;</span><span class="ident" id="6618054">ifi</span><span class="op" id="6618057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6618061">ifmat6</span>&nbsp;<span class="op" id="6618068">=</span>&nbsp;<span class="builtinfunc" id="6618070">append</span><span class="op" id="6618076">(</span><span class="ident" id="6618077">ifmat6</span><span class="op" id="6618083">,</span>&nbsp;<span class="ident" id="6618085">ifmat</span><span class="op" id="6618090">...</span><span class="op" id="6618093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6618096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6618099">if</span>&nbsp;<span class="builtinfunc" id="6618102">len</span><span class="op" id="6618105">(</span><span class="ident" id="6618106">ifmat6</span><span class="op" id="6618112">)</span>&nbsp;<span class="op" id="6618114">!=</span>&nbsp;<span class="ident" id="6618117">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="6618138">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6618142">t</span><span class="op" id="6618143">.</span><span class="ident" id="6618144">Fatalf</span><span class="op" id="6618150">(</span><span class="string" id="6618151">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6618204">,</span>&nbsp;<span class="builtinfunc" id="6618206">len</span><span class="op" id="6618209">(</span><span class="ident" id="6618210">ifmat6</span><span class="op" id="6618216">)</span><span class="op" id="6618217">,</span>&nbsp;<span class="ident" id="6618219">numOfTestIPv6MCAddrs</span><span class="op" id="6618239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6618242">}</span><br>
<span class="lineno"></span><span class="op" id="6618244">}</span>
</div>
</body>
</html>
