<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3686131">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3686186">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3686240">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3686291">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="3686368">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="3686378">package</span>&nbsp;<span class="ident" id="3686386">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3686392">import</span>&nbsp;<span class="op" id="3686399">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3686402">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3686412">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3686415">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3686465">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="3686523">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3686589">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3686646">type</span>&nbsp;<span class="ident" id="3686651">lazybuf</span>&nbsp;<span class="keyword" id="3686659">struct</span>&nbsp;<span class="op" id="3686666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686669">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3686673">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686681">buf</span>&nbsp;<span class="op" id="3686685">[</span><span class="op" id="3686686">]</span><span class="builtintype" id="3686687">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686693">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3686697">int</span><br>
<span class="lineno"></span><span class="op" id="3686701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3686704">func</span>&nbsp;<span class="op" id="3686709">(</span><span class="ident" id="3686710">b</span>&nbsp;<span class="op" id="3686712">*</span><span class="ident" id="3686713">lazybuf</span><span class="op" id="3686720">)</span>&nbsp;<span class="ident" id="3686722">index</span><span class="op" id="3686727">(</span><span class="ident" id="3686728">i</span>&nbsp;<span class="builtintype" id="3686730">int</span><span class="op" id="3686733">)</span>&nbsp;<span class="builtintype" id="3686735">byte</span>&nbsp;<span class="op" id="3686740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686743">if</span>&nbsp;<span class="ident" id="3686746">b</span><span class="op" id="3686747">.</span><span class="ident" id="3686748">buf</span>&nbsp;<span class="op" id="3686752">!=</span>&nbsp;<span class="ident" id="3686755">nil</span>&nbsp;<span class="op" id="3686759">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686763">return</span>&nbsp;<span class="ident" id="3686770">b</span><span class="op" id="3686771">.</span><span class="ident" id="3686772">buf</span><span class="op" id="3686775">[</span><span class="ident" id="3686776">i</span><span class="op" id="3686777">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686783">return</span>&nbsp;<span class="ident" id="3686790">b</span><span class="op" id="3686791">.</span><span class="ident" id="3686792">s</span><span class="op" id="3686793">[</span><span class="ident" id="3686794">i</span><span class="op" id="3686795">]</span><br>
<span class="lineno"></span><span class="op" id="3686797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3686800">func</span>&nbsp;<span class="op" id="3686805">(</span><span class="ident" id="3686806">b</span>&nbsp;<span class="op" id="3686808">*</span><span class="ident" id="3686809">lazybuf</span><span class="op" id="3686816">)</span>&nbsp;<span class="builtinfunc" id="3686818">append</span><span class="op" id="3686824">(</span><span class="ident" id="3686825">c</span>&nbsp;<span class="builtintype" id="3686827">byte</span><span class="op" id="3686831">)</span>&nbsp;<span class="op" id="3686833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686836">if</span>&nbsp;<span class="ident" id="3686839">b</span><span class="op" id="3686840">.</span><span class="ident" id="3686841">buf</span>&nbsp;<span class="op" id="3686845">==</span>&nbsp;<span class="ident" id="3686848">nil</span>&nbsp;<span class="op" id="3686852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686856">if</span>&nbsp;<span class="ident" id="3686859">b</span><span class="op" id="3686860">.</span><span class="ident" id="3686861">w</span>&nbsp;<span class="op" id="3686863">&lt;</span>&nbsp;<span class="builtinfunc" id="3686865">len</span><span class="op" id="3686868">(</span><span class="ident" id="3686869">b</span><span class="op" id="3686870">.</span><span class="ident" id="3686871">s</span><span class="op" id="3686872">)</span>&nbsp;<span class="op" id="3686874">&amp;&amp;</span>&nbsp;<span class="ident" id="3686877">b</span><span class="op" id="3686878">.</span><span class="ident" id="3686879">s</span><span class="op" id="3686880">[</span><span class="ident" id="3686881">b</span><span class="op" id="3686882">.</span><span class="ident" id="3686883">w</span><span class="op" id="3686884">]</span>&nbsp;<span class="op" id="3686886">==</span>&nbsp;<span class="ident" id="3686889">c</span>&nbsp;<span class="op" id="3686891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686896">b</span><span class="op" id="3686897">.</span><span class="ident" id="3686898">w</span><span class="op" id="3686899">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686905">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686918">b</span><span class="op" id="3686919">.</span><span class="ident" id="3686920">buf</span>&nbsp;<span class="op" id="3686924">=</span>&nbsp;<span class="builtinfunc" id="3686926">make</span><span class="op" id="3686930">(</span><span class="op" id="3686931">[</span><span class="op" id="3686932">]</span><span class="builtintype" id="3686933">byte</span><span class="op" id="3686937">,</span>&nbsp;<span class="builtinfunc" id="3686939">len</span><span class="op" id="3686942">(</span><span class="ident" id="3686943">b</span><span class="op" id="3686944">.</span><span class="ident" id="3686945">s</span><span class="op" id="3686946">)</span><span class="op" id="3686947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3686951">copy</span><span class="op" id="3686955">(</span><span class="ident" id="3686956">b</span><span class="op" id="3686957">.</span><span class="ident" id="3686958">buf</span><span class="op" id="3686961">,</span>&nbsp;<span class="ident" id="3686963">b</span><span class="op" id="3686964">.</span><span class="ident" id="3686965">s</span><span class="op" id="3686966">[</span><span class="op" id="3686967">:</span><span class="ident" id="3686968">b</span><span class="op" id="3686969">.</span><span class="ident" id="3686970">w</span><span class="op" id="3686971">]</span><span class="op" id="3686972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686978">b</span><span class="op" id="3686979">.</span><span class="ident" id="3686980">buf</span><span class="op" id="3686983">[</span><span class="ident" id="3686984">b</span><span class="op" id="3686985">.</span><span class="ident" id="3686986">w</span><span class="op" id="3686987">]</span>&nbsp;<span class="op" id="3686989">=</span>&nbsp;<span class="ident" id="3686991">c</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686994">b</span><span class="op" id="3686995">.</span><span class="ident" id="3686996">w</span><span class="op" id="3686997">++</span><br>
<span class="lineno"></span><span class="op" id="3687000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3687003">func</span>&nbsp;<span class="op" id="3687008">(</span><span class="ident" id="3687009">b</span>&nbsp;<span class="op" id="3687011">*</span><span class="ident" id="3687012">lazybuf</span><span class="op" id="3687019">)</span>&nbsp;<span class="builtintype" id="3687021">string</span><span class="op" id="3687027">(</span><span class="op" id="3687028">)</span>&nbsp;<span class="builtintype" id="3687030">string</span>&nbsp;<span class="op" id="3687037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687040">if</span>&nbsp;<span class="ident" id="3687043">b</span><span class="op" id="3687044">.</span><span class="ident" id="3687045">buf</span>&nbsp;<span class="op" id="3687049">==</span>&nbsp;<span class="ident" id="3687052">nil</span>&nbsp;<span class="op" id="3687056">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687060">return</span>&nbsp;<span class="ident" id="3687067">b</span><span class="op" id="3687068">.</span><span class="ident" id="3687069">s</span><span class="op" id="3687070">[</span><span class="op" id="3687071">:</span><span class="ident" id="3687072">b</span><span class="op" id="3687073">.</span><span class="ident" id="3687074">w</span><span class="op" id="3687075">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3687078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687081">return</span>&nbsp;<span class="builtintype" id="3687088">string</span><span class="op" id="3687094">(</span><span class="ident" id="3687095">b</span><span class="op" id="3687096">.</span><span class="ident" id="3687097">buf</span><span class="op" id="3687100">[</span><span class="op" id="3687101">:</span><span class="ident" id="3687102">b</span><span class="op" id="3687103">.</span><span class="ident" id="3687104">w</span><span class="op" id="3687105">]</span><span class="op" id="3687106">)</span><br>
<span class="lineno"></span><span class="op" id="3687108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3687111">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="3687170">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="3687235">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="3687291">//</span><br>
<span class="lineno"></span><span class="comment" id="3687294">//&nbsp;&nbsp;&nbsp;&nbsp1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="3687346">//&nbsp;&nbsp;&nbsp;&nbsp2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="3687412">//&nbsp;&nbsp;&nbsp;&nbsp3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="3687483">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="3687537">//&nbsp;&nbsp;&nbsp;&nbsp4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="3687591">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="3687655">//</span><br>
<span class="lineno"></span><span class="comment" id="3687658">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3687723">//</span><br>
<span class="lineno"></span><span class="comment" id="3687726">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="3687785">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="3687812">//</span><br>
<span class="lineno"></span><span class="comment" id="3687815">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3687871">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3687899">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="3687951">func</span>&nbsp;<span class="ident" id="3687956">Clean</span><span class="op" id="3687961">(</span><span class="ident" id="3687962">path</span>&nbsp;<span class="builtintype" id="3687967">string</span><span class="op" id="3687973">)</span>&nbsp;<span class="builtintype" id="3687975">string</span>&nbsp;<span class="op" id="3687982">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687985">if</span>&nbsp;<span class="ident" id="3687988">path</span>&nbsp;<span class="op" id="3687993">==</span>&nbsp;<span class="string" id="3687996">&#34;&#34;</span>&nbsp;<span class="op" id="3687999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688003">return</span>&nbsp;<span class="string" id="3688010">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688019">rooted</span>&nbsp;<span class="op" id="3688026">:=</span>&nbsp;<span class="ident" id="3688029">path</span><span class="op" id="3688033">[</span><span class="num" id="3688034">0</span><span class="op" id="3688035">]</span>&nbsp;<span class="op" id="3688037">==</span>&nbsp;<span class="string" id="3688040">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688045">n</span>&nbsp;<span class="op" id="3688047">:=</span>&nbsp;<span class="builtinfunc" id="3688050">len</span><span class="op" id="3688053">(</span><span class="ident" id="3688054">path</span><span class="op" id="3688058">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688062">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688078">//&nbsp;&nbsp;&nbsp;&nbspreading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688137">//&nbsp;&nbsp;&nbsp;&nbspwriting&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688191">//&nbsp;&nbsp;&nbsp;&nbspdotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688253">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspit&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688318">out</span>&nbsp;<span class="op" id="3688322">:=</span>&nbsp;<span class="ident" id="3688325">lazybuf</span><span class="op" id="3688332">{</span><span class="ident" id="3688333">s</span><span class="op" id="3688334">:</span>&nbsp;<span class="ident" id="3688336">path</span><span class="op" id="3688340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688343">r</span><span class="op" id="3688344">,</span>&nbsp;<span class="ident" id="3688346">dotdot</span>&nbsp;<span class="op" id="3688353">:=</span>&nbsp;<span class="num" id="3688356">0</span><span class="op" id="3688357">,</span>&nbsp;<span class="num" id="3688359">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688362">if</span>&nbsp;<span class="ident" id="3688365">rooted</span>&nbsp;<span class="op" id="3688372">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688376">out</span><span class="op" id="3688379">.</span><span class="builtinfunc" id="3688380">append</span><span class="op" id="3688386">(</span><span class="string" id="3688387">&#39;/&#39;</span><span class="op" id="3688390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688394">r</span><span class="op" id="3688395">,</span>&nbsp;<span class="ident" id="3688397">dotdot</span>&nbsp;<span class="op" id="3688404">=</span>&nbsp;<span class="num" id="3688406">1</span><span class="op" id="3688407">,</span>&nbsp;<span class="num" id="3688409">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688416">for</span>&nbsp;<span class="ident" id="3688420">r</span>&nbsp;<span class="op" id="3688422">&lt;</span>&nbsp;<span class="ident" id="3688424">n</span>&nbsp;<span class="op" id="3688426">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688430">switch</span>&nbsp;<span class="op" id="3688437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688441">case</span>&nbsp;<span class="ident" id="3688446">path</span><span class="op" id="3688450">[</span><span class="ident" id="3688451">r</span><span class="op" id="3688452">]</span>&nbsp;<span class="op" id="3688454">==</span>&nbsp;<span class="string" id="3688457">&#39;/&#39;</span><span class="op" id="3688460">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688465">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688490">r</span><span class="op" id="3688491">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688496">case</span>&nbsp;<span class="ident" id="3688501">path</span><span class="op" id="3688505">[</span><span class="ident" id="3688506">r</span><span class="op" id="3688507">]</span>&nbsp;<span class="op" id="3688509">==</span>&nbsp;<span class="string" id="3688512">&#39;.&#39;</span>&nbsp;<span class="op" id="3688516">&amp;&amp;</span>&nbsp;<span class="op" id="3688519">(</span><span class="ident" id="3688520">r</span><span class="op" id="3688521">+</span><span class="num" id="3688522">1</span>&nbsp;<span class="op" id="3688524">==</span>&nbsp;<span class="ident" id="3688527">n</span>&nbsp;<span class="op" id="3688529">||</span>&nbsp;<span class="ident" id="3688532">path</span><span class="op" id="3688536">[</span><span class="ident" id="3688537">r</span><span class="op" id="3688538">+</span><span class="num" id="3688539">1</span><span class="op" id="3688540">]</span>&nbsp;<span class="op" id="3688542">==</span>&nbsp;<span class="string" id="3688545">&#39;/&#39;</span><span class="op" id="3688548">)</span><span class="op" id="3688549">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688554">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688570">r</span><span class="op" id="3688571">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688576">case</span>&nbsp;<span class="ident" id="3688581">path</span><span class="op" id="3688585">[</span><span class="ident" id="3688586">r</span><span class="op" id="3688587">]</span>&nbsp;<span class="op" id="3688589">==</span>&nbsp;<span class="string" id="3688592">&#39;.&#39;</span>&nbsp;<span class="op" id="3688596">&amp;&amp;</span>&nbsp;<span class="ident" id="3688599">path</span><span class="op" id="3688603">[</span><span class="ident" id="3688604">r</span><span class="op" id="3688605">+</span><span class="num" id="3688606">1</span><span class="op" id="3688607">]</span>&nbsp;<span class="op" id="3688609">==</span>&nbsp;<span class="string" id="3688612">&#39;.&#39;</span>&nbsp;<span class="op" id="3688616">&amp;&amp;</span>&nbsp;<span class="op" id="3688619">(</span><span class="ident" id="3688620">r</span><span class="op" id="3688621">+</span><span class="num" id="3688622">2</span>&nbsp;<span class="op" id="3688624">==</span>&nbsp;<span class="ident" id="3688627">n</span>&nbsp;<span class="op" id="3688629">||</span>&nbsp;<span class="ident" id="3688632">path</span><span class="op" id="3688636">[</span><span class="ident" id="3688637">r</span><span class="op" id="3688638">+</span><span class="num" id="3688639">2</span><span class="op" id="3688640">]</span>&nbsp;<span class="op" id="3688642">==</span>&nbsp;<span class="string" id="3688645">&#39;/&#39;</span><span class="op" id="3688648">)</span><span class="op" id="3688649">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688654">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688689">r</span>&nbsp;<span class="op" id="3688691">+=</span>&nbsp;<span class="num" id="3688694">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688699">switch</span>&nbsp;<span class="op" id="3688706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688711">case</span>&nbsp;<span class="ident" id="3688716">out</span><span class="op" id="3688719">.</span><span class="ident" id="3688720">w</span>&nbsp;<span class="op" id="3688722">&gt;</span>&nbsp;<span class="ident" id="3688724">dotdot</span><span class="op" id="3688730">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688736">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688757">out</span><span class="op" id="3688760">.</span><span class="ident" id="3688761">w</span><span class="op" id="3688762">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688769">for</span>&nbsp;<span class="ident" id="3688773">out</span><span class="op" id="3688776">.</span><span class="ident" id="3688777">w</span>&nbsp;<span class="op" id="3688779">&gt;</span>&nbsp;<span class="ident" id="3688781">dotdot</span>&nbsp;<span class="op" id="3688788">&amp;&amp;</span>&nbsp;<span class="ident" id="3688791">out</span><span class="op" id="3688794">.</span><span class="ident" id="3688795">index</span><span class="op" id="3688800">(</span><span class="ident" id="3688801">out</span><span class="op" id="3688804">.</span><span class="ident" id="3688805">w</span><span class="op" id="3688806">)</span>&nbsp;<span class="op" id="3688808">!=</span>&nbsp;<span class="string" id="3688811">&#39;/&#39;</span>&nbsp;<span class="op" id="3688815">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688822">out</span><span class="op" id="3688825">.</span><span class="ident" id="3688826">w</span><span class="op" id="3688827">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688839">case</span>&nbsp;<span class="op" id="3688844">!</span><span class="ident" id="3688845">rooted</span><span class="op" id="3688851">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3688857">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688920">if</span>&nbsp;<span class="ident" id="3688923">out</span><span class="op" id="3688926">.</span><span class="ident" id="3688927">w</span>&nbsp;<span class="op" id="3688929">&gt;</span>&nbsp;<span class="num" id="3688931">0</span>&nbsp;<span class="op" id="3688933">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688940">out</span><span class="op" id="3688943">.</span><span class="builtinfunc" id="3688944">append</span><span class="op" id="3688950">(</span><span class="string" id="3688951">&#39;/&#39;</span><span class="op" id="3688954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688966">out</span><span class="op" id="3688969">.</span><span class="builtinfunc" id="3688970">append</span><span class="op" id="3688976">(</span><span class="string" id="3688977">&#39;.&#39;</span><span class="op" id="3688980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688986">out</span><span class="op" id="3688989">.</span><span class="builtinfunc" id="3688990">append</span><span class="op" id="3688996">(</span><span class="string" id="3688997">&#39;.&#39;</span><span class="op" id="3689000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689006">dotdot</span>&nbsp;<span class="op" id="3689013">=</span>&nbsp;<span class="ident" id="3689015">out</span><span class="op" id="3689018">.</span><span class="ident" id="3689019">w</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689028">default</span><span class="op" id="3689035">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3689040">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3689065">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689091">if</span>&nbsp;<span class="ident" id="3689094">rooted</span>&nbsp;<span class="op" id="3689101">&amp;&amp;</span>&nbsp;<span class="ident" id="3689104">out</span><span class="op" id="3689107">.</span><span class="ident" id="3689108">w</span>&nbsp;<span class="op" id="3689110">!=</span>&nbsp;<span class="num" id="3689113">1</span>&nbsp;<span class="op" id="3689115">||</span>&nbsp;<span class="op" id="3689118">!</span><span class="ident" id="3689119">rooted</span>&nbsp;<span class="op" id="3689126">&amp;&amp;</span>&nbsp;<span class="ident" id="3689129">out</span><span class="op" id="3689132">.</span><span class="ident" id="3689133">w</span>&nbsp;<span class="op" id="3689135">!=</span>&nbsp;<span class="num" id="3689138">0</span>&nbsp;<span class="op" id="3689140">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689146">out</span><span class="op" id="3689149">.</span><span class="builtinfunc" id="3689150">append</span><span class="op" id="3689156">(</span><span class="string" id="3689157">&#39;/&#39;</span><span class="op" id="3689160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3689170">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689189">for</span>&nbsp;<span class="op" id="3689193">;</span>&nbsp;<span class="ident" id="3689195">r</span>&nbsp;<span class="op" id="3689197">&lt;</span>&nbsp;<span class="ident" id="3689199">n</span>&nbsp;<span class="op" id="3689201">&amp;&amp;</span>&nbsp;<span class="ident" id="3689204">path</span><span class="op" id="3689208">[</span><span class="ident" id="3689209">r</span><span class="op" id="3689210">]</span>&nbsp;<span class="op" id="3689212">!=</span>&nbsp;<span class="string" id="3689215">&#39;/&#39;</span><span class="op" id="3689218">;</span>&nbsp;<span class="ident" id="3689220">r</span><span class="op" id="3689221">++</span>&nbsp;<span class="op" id="3689224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689230">out</span><span class="op" id="3689233">.</span><span class="builtinfunc" id="3689234">append</span><span class="op" id="3689240">(</span><span class="ident" id="3689241">path</span><span class="op" id="3689245">[</span><span class="ident" id="3689246">r</span><span class="op" id="3689247">]</span><span class="op" id="3689248">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3689264">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689295">if</span>&nbsp;<span class="ident" id="3689298">out</span><span class="op" id="3689301">.</span><span class="ident" id="3689302">w</span>&nbsp;<span class="op" id="3689304">==</span>&nbsp;<span class="num" id="3689307">0</span>&nbsp;<span class="op" id="3689309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689313">return</span>&nbsp;<span class="string" id="3689320">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689329">return</span>&nbsp;<span class="ident" id="3689336">out</span><span class="op" id="3689339">.</span><span class="builtintype" id="3689340">string</span><span class="op" id="3689346">(</span><span class="op" id="3689347">)</span><br>
<span class="lineno">135</span><span class="op" id="3689349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3689352">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="3689412">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="3689471">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="3689532">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3689553">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="3689616">func</span>&nbsp;<span class="ident" id="3689621">Split</span><span class="op" id="3689626">(</span><span class="ident" id="3689627">path</span>&nbsp;<span class="builtintype" id="3689632">string</span><span class="op" id="3689638">)</span>&nbsp;<span class="op" id="3689640">(</span><span class="ident" id="3689641">dir</span><span class="op" id="3689644">,</span>&nbsp;<span class="ident" id="3689646">file</span>&nbsp;<span class="builtintype" id="3689651">string</span><span class="op" id="3689657">)</span>&nbsp;<span class="op" id="3689659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689662">i</span>&nbsp;<span class="op" id="3689664">:=</span>&nbsp;<span class="ident" id="3689667">strings</span><span class="op" id="3689674">.</span><span class="ident" id="3689675">LastIndex</span><span class="op" id="3689684">(</span><span class="ident" id="3689685">path</span><span class="op" id="3689689">,</span>&nbsp;<span class="string" id="3689691">&#34;/&#34;</span><span class="op" id="3689694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689697">return</span>&nbsp;<span class="ident" id="3689704">path</span><span class="op" id="3689708">[</span><span class="op" id="3689709">:</span><span class="ident" id="3689710">i</span><span class="op" id="3689711">+</span><span class="num" id="3689712">1</span><span class="op" id="3689713">]</span><span class="op" id="3689714">,</span>&nbsp;<span class="ident" id="3689716">path</span><span class="op" id="3689720">[</span><span class="ident" id="3689721">i</span><span class="op" id="3689722">+</span><span class="num" id="3689723">1</span><span class="op" id="3689724">:</span><span class="op" id="3689725">]</span><br>
<span class="lineno">145</span><span class="op" id="3689727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3689730">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3689801">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="3689873">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="3689907">func</span>&nbsp;<span class="ident" id="3689912">Join</span><span class="op" id="3689916">(</span><span class="ident" id="3689917">elem</span>&nbsp;<span class="op" id="3689922">...</span><span class="builtintype" id="3689925">string</span><span class="op" id="3689931">)</span>&nbsp;<span class="builtintype" id="3689933">string</span>&nbsp;<span class="op" id="3689940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689943">for</span>&nbsp;<span class="ident" id="3689947">i</span><span class="op" id="3689948">,</span>&nbsp;<span class="ident" id="3689950">e</span>&nbsp;<span class="op" id="3689952">:=</span>&nbsp;<span class="keyword" id="3689955">range</span>&nbsp;<span class="ident" id="3689961">elem</span>&nbsp;<span class="op" id="3689966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689970">if</span>&nbsp;<span class="ident" id="3689973">e</span>&nbsp;<span class="op" id="3689975">!=</span>&nbsp;<span class="string" id="3689978">&#34;&#34;</span>&nbsp;<span class="op" id="3689981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689986">return</span>&nbsp;<span class="ident" id="3689993">Clean</span><span class="op" id="3689998">(</span><span class="ident" id="3689999">strings</span><span class="op" id="3690006">.</span><span class="ident" id="3690007">Join</span><span class="op" id="3690011">(</span><span class="ident" id="3690012">elem</span><span class="op" id="3690016">[</span><span class="ident" id="3690017">i</span><span class="op" id="3690018">:</span><span class="op" id="3690019">]</span><span class="op" id="3690020">,</span>&nbsp;<span class="string" id="3690022">&#34;/&#34;</span><span class="op" id="3690025">)</span><span class="op" id="3690026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3690030">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3690033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690036">return</span>&nbsp;<span class="string" id="3690043">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3690046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3690049">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="3690102">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="3690160">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="3690209">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="3690244">func</span>&nbsp;<span class="ident" id="3690249">Ext</span><span class="op" id="3690252">(</span><span class="ident" id="3690253">path</span>&nbsp;<span class="builtintype" id="3690258">string</span><span class="op" id="3690264">)</span>&nbsp;<span class="builtintype" id="3690266">string</span>&nbsp;<span class="op" id="3690273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690276">for</span>&nbsp;<span class="ident" id="3690280">i</span>&nbsp;<span class="op" id="3690282">:=</span>&nbsp;<span class="builtinfunc" id="3690285">len</span><span class="op" id="3690288">(</span><span class="ident" id="3690289">path</span><span class="op" id="3690293">)</span>&nbsp;<span class="op" id="3690295">-</span>&nbsp;<span class="num" id="3690297">1</span><span class="op" id="3690298">;</span>&nbsp;<span class="ident" id="3690300">i</span>&nbsp;<span class="op" id="3690302">&gt;=</span>&nbsp;<span class="num" id="3690305">0</span>&nbsp;<span class="op" id="3690307">&amp;&amp;</span>&nbsp;<span class="ident" id="3690310">path</span><span class="op" id="3690314">[</span><span class="ident" id="3690315">i</span><span class="op" id="3690316">]</span>&nbsp;<span class="op" id="3690318">!=</span>&nbsp;<span class="string" id="3690321">&#39;/&#39;</span><span class="op" id="3690324">;</span>&nbsp;<span class="ident" id="3690326">i</span><span class="op" id="3690327">--</span>&nbsp;<span class="op" id="3690330">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690334">if</span>&nbsp;<span class="ident" id="3690337">path</span><span class="op" id="3690341">[</span><span class="ident" id="3690342">i</span><span class="op" id="3690343">]</span>&nbsp;<span class="op" id="3690345">==</span>&nbsp;<span class="string" id="3690348">&#39;.&#39;</span>&nbsp;<span class="op" id="3690352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690357">return</span>&nbsp;<span class="ident" id="3690364">path</span><span class="op" id="3690368">[</span><span class="ident" id="3690369">i</span><span class="op" id="3690370">:</span><span class="op" id="3690371">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3690375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3690378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690381">return</span>&nbsp;<span class="string" id="3690388">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="3690391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3690394">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3690436">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="3690504">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="3690547">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3690610">func</span>&nbsp;<span class="ident" id="3690615">Base</span><span class="op" id="3690619">(</span><span class="ident" id="3690620">path</span>&nbsp;<span class="builtintype" id="3690625">string</span><span class="op" id="3690631">)</span>&nbsp;<span class="builtintype" id="3690633">string</span>&nbsp;<span class="op" id="3690640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690643">if</span>&nbsp;<span class="ident" id="3690646">path</span>&nbsp;<span class="op" id="3690651">==</span>&nbsp;<span class="string" id="3690654">&#34;&#34;</span>&nbsp;<span class="op" id="3690657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690661">return</span>&nbsp;<span class="string" id="3690668">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3690673">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3690676">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690704">for</span>&nbsp;<span class="builtinfunc" id="3690708">len</span><span class="op" id="3690711">(</span><span class="ident" id="3690712">path</span><span class="op" id="3690716">)</span>&nbsp;<span class="op" id="3690718">&gt;</span>&nbsp;<span class="num" id="3690720">0</span>&nbsp;<span class="op" id="3690722">&amp;&amp;</span>&nbsp;<span class="ident" id="3690725">path</span><span class="op" id="3690729">[</span><span class="builtinfunc" id="3690730">len</span><span class="op" id="3690733">(</span><span class="ident" id="3690734">path</span><span class="op" id="3690738">)</span><span class="op" id="3690739">-</span><span class="num" id="3690740">1</span><span class="op" id="3690741">]</span>&nbsp;<span class="op" id="3690743">==</span>&nbsp;<span class="string" id="3690746">&#39;/&#39;</span>&nbsp;<span class="op" id="3690750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3690754">path</span>&nbsp;<span class="op" id="3690759">=</span>&nbsp;<span class="ident" id="3690761">path</span><span class="op" id="3690765">[</span><span class="num" id="3690766">0</span>&nbsp;<span class="op" id="3690768">:</span>&nbsp;<span class="builtinfunc" id="3690770">len</span><span class="op" id="3690773">(</span><span class="ident" id="3690774">path</span><span class="op" id="3690778">)</span><span class="op" id="3690779">-</span><span class="num" id="3690780">1</span><span class="op" id="3690781">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3690784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3690787">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690813">if</span>&nbsp;<span class="ident" id="3690816">i</span>&nbsp;<span class="op" id="3690818">:=</span>&nbsp;<span class="ident" id="3690821">strings</span><span class="op" id="3690828">.</span><span class="ident" id="3690829">LastIndex</span><span class="op" id="3690838">(</span><span class="ident" id="3690839">path</span><span class="op" id="3690843">,</span>&nbsp;<span class="string" id="3690845">&#34;/&#34;</span><span class="op" id="3690848">)</span><span class="op" id="3690849">;</span>&nbsp;<span class="ident" id="3690851">i</span>&nbsp;<span class="op" id="3690853">&gt;=</span>&nbsp;<span class="num" id="3690856">0</span>&nbsp;<span class="op" id="3690858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3690862">path</span>&nbsp;<span class="op" id="3690867">=</span>&nbsp;<span class="ident" id="3690869">path</span><span class="op" id="3690873">[</span><span class="ident" id="3690874">i</span><span class="op" id="3690875">+</span><span class="num" id="3690876">1</span><span class="op" id="3690877">:</span><span class="op" id="3690878">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3690881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3690884">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690923">if</span>&nbsp;<span class="ident" id="3690926">path</span>&nbsp;<span class="op" id="3690931">==</span>&nbsp;<span class="string" id="3690934">&#34;&#34;</span>&nbsp;<span class="op" id="3690937">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690941">return</span>&nbsp;<span class="string" id="3690948">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3690953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3690956">return</span>&nbsp;<span class="ident" id="3690963">path</span><br>
<span class="lineno"></span><span class="op" id="3690968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="3690971">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3691018">func</span>&nbsp;<span class="ident" id="3691023">IsAbs</span><span class="op" id="3691028">(</span><span class="ident" id="3691029">path</span>&nbsp;<span class="builtintype" id="3691034">string</span><span class="op" id="3691040">)</span>&nbsp;<span class="builtintype" id="3691042">bool</span>&nbsp;<span class="op" id="3691047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3691050">return</span>&nbsp;<span class="builtinfunc" id="3691057">len</span><span class="op" id="3691060">(</span><span class="ident" id="3691061">path</span><span class="op" id="3691065">)</span>&nbsp;<span class="op" id="3691067">&gt;</span>&nbsp;<span class="num" id="3691069">0</span>&nbsp;<span class="op" id="3691071">&amp;&amp;</span>&nbsp;<span class="ident" id="3691074">path</span><span class="op" id="3691078">[</span><span class="num" id="3691079">0</span><span class="op" id="3691080">]</span>&nbsp;<span class="op" id="3691082">==</span>&nbsp;<span class="string" id="3691085">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="3691089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="3691092">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="3691173">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="3691255">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3691279">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3691321">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="3691398">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3691480">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="3691490">func</span>&nbsp;<span class="ident" id="3691495">Dir</span><span class="op" id="3691498">(</span><span class="ident" id="3691499">path</span>&nbsp;<span class="builtintype" id="3691504">string</span><span class="op" id="3691510">)</span>&nbsp;<span class="builtintype" id="3691512">string</span>&nbsp;<span class="op" id="3691519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3691522">dir</span><span class="op" id="3691525">,</span>&nbsp;<span class="ident" id="3691527">_</span>&nbsp;<span class="op" id="3691529">:=</span>&nbsp;<span class="ident" id="3691532">Split</span><span class="op" id="3691537">(</span><span class="ident" id="3691538">path</span><span class="op" id="3691542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3691545">return</span>&nbsp;<span class="ident" id="3691552">Clean</span><span class="op" id="3691557">(</span><span class="ident" id="3691558">dir</span><span class="op" id="3691561">)</span><br>
<span class="lineno">210</span><span class="op" id="3691563">}</span>
</div>
</body>
</html>
