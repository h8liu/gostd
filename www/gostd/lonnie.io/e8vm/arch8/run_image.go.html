<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3588960">package</span>&nbsp;<span class="ident" id="3588968">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3588975">import</span>&nbsp;<span class="op" id="3588982">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3588985">&#34;os&#34;</span><br>
<span class="lineno">5</span><span class="op" id="3588990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3588993">//&nbsp;RunImage&nbsp;loads&nbsp;and&nbsp;run&nbsp;a&nbsp;raw&nbsp;image&nbsp;on&nbsp;a&nbsp;single&nbsp;core&nbsp;machine</span><br>
<span class="lineno"></span><span class="comment" id="3589056">//&nbsp;with&nbsp;1GB&nbsp;physical&nbsp;memory&nbsp;until&nbsp;it&nbsp;runs&nbsp;into&nbsp;an&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="3589117">func</span>&nbsp;<span class="ident" id="3589122">RunImage</span><span class="op" id="3589130">(</span><span class="ident" id="3589131">path</span>&nbsp;<span class="builtintype" id="3589136">string</span><span class="op" id="3589142">)</span>&nbsp;<span class="builtintype" id="3589144">error</span>&nbsp;<span class="op" id="3589150">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589153">f</span><span class="op" id="3589154">,</span>&nbsp;<span class="ident" id="3589156">e</span>&nbsp;<span class="op" id="3589158">:=</span>&nbsp;<span class="ident" id="3589161">os</span><span class="op" id="3589163">.</span><span class="ident" id="3589164">Open</span><span class="op" id="3589168">(</span><span class="ident" id="3589169">path</span><span class="op" id="3589173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589176">if</span>&nbsp;<span class="ident" id="3589179">e</span>&nbsp;<span class="op" id="3589181">!=</span>&nbsp;<span class="ident" id="3589184">nil</span>&nbsp;<span class="op" id="3589188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589192">return</span>&nbsp;<span class="ident" id="3589199">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589206">m</span>&nbsp;<span class="op" id="3589208">:=</span>&nbsp;<span class="ident" id="3589211">NewMachine</span><span class="op" id="3589221">(</span><span class="builtintype" id="3589222">uint32</span><span class="op" id="3589228">(</span><span class="num" id="3589229">1</span><span class="op" id="3589230">&lt;&lt;</span><span class="num" id="3589232">30</span><span class="op" id="3589234">)</span><span class="op" id="3589235">,</span>&nbsp;<span class="num" id="3589237">1</span><span class="op" id="3589238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589241">e</span>&nbsp;<span class="op" id="3589243">=</span>&nbsp;<span class="ident" id="3589245">m</span><span class="op" id="3589246">.</span><span class="ident" id="3589247">LoadImage</span><span class="op" id="3589256">(</span><span class="ident" id="3589257">f</span><span class="op" id="3589258">,</span>&nbsp;<span class="ident" id="3589260">InitPC</span><span class="op" id="3589266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589269">if</span>&nbsp;<span class="ident" id="3589272">e</span>&nbsp;<span class="op" id="3589274">!=</span>&nbsp;<span class="ident" id="3589277">nil</span>&nbsp;<span class="op" id="3589281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589285">return</span>&nbsp;<span class="ident" id="3589292">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589295">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589299">_</span><span class="op" id="3589300">,</span>&nbsp;<span class="ident" id="3589302">exp</span>&nbsp;<span class="op" id="3589306">:=</span>&nbsp;<span class="ident" id="3589309">m</span><span class="op" id="3589310">.</span><span class="ident" id="3589311">Run</span><span class="op" id="3589314">(</span><span class="num" id="3589315">0</span><span class="op" id="3589316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589319">if</span>&nbsp;<span class="ident" id="3589322">exp</span>&nbsp;<span class="op" id="3589326">!=</span>&nbsp;<span class="ident" id="3589329">nil</span>&nbsp;<span class="op" id="3589333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589337">return</span>&nbsp;<span class="ident" id="3589344">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589349">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589353">return</span>&nbsp;<span class="ident" id="3589360">nil</span><br>
<span class="lineno"></span><span class="op" id="3589364">}</span>
</div>
</body>
</html>
