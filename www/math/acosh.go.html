<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2240281">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2240336">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2240390">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2240441">package</span>&nbsp;<span class="ident" id="2240449">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2240455">//&nbsp;The&nbsp;original&nbsp;C&nbsp;code,&nbsp;the&nbsp;long&nbsp;comment,&nbsp;and&nbsp;the&nbsp;constants</span><br>
<span class="lineno"></span><span class="comment" id="2240515">//&nbsp;below&nbsp;are&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_acosh.c</span><br>
<span class="lineno"></span><span class="comment" id="2240575">//&nbsp;and&nbsp;came&nbsp;with&nbsp;this&nbsp;notice.&nbsp;&nbsp;The&nbsp;go&nbsp;code&nbsp;is&nbsp;a&nbsp;simplified</span><br>
<span class="lineno">10</span><span class="comment" id="2240634">//&nbsp;version&nbsp;of&nbsp;the&nbsp;original&nbsp;C.</span><br>
<span class="lineno"></span><span class="comment" id="2240664">//</span><br>
<span class="lineno"></span><span class="comment" id="2240667">//&nbsp;====================================================</span><br>
<span class="lineno"></span><span class="comment" id="2240723">//&nbsp;Copyright&nbsp;(C)&nbsp;1993&nbsp;by&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2240792">//</span><br>
<span class="lineno">15</span><span class="comment" id="2240795">//&nbsp;Developed&nbsp;at&nbsp;SunPro,&nbsp;a&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;business.</span><br>
<span class="lineno"></span><span class="comment" id="2240854">//&nbsp;Permission&nbsp;to&nbsp;use,&nbsp;copy,&nbsp;modify,&nbsp;and&nbsp;distribute&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="2240910">//&nbsp;software&nbsp;is&nbsp;freely&nbsp;granted,&nbsp;provided&nbsp;that&nbsp;this&nbsp;notice</span><br>
<span class="lineno"></span><span class="comment" id="2240967">//&nbsp;is&nbsp;preserved.</span><br>
<span class="lineno"></span><span class="comment" id="2240984">//&nbsp;====================================================</span><br>
<span class="lineno">20</span><span class="comment" id="2241040">//</span><br>
<span class="lineno"></span><span class="comment" id="2241043">//</span><br>
<span class="lineno"></span><span class="comment" id="2241046">//&nbsp;__ieee754_acosh(x)</span><br>
<span class="lineno"></span><span class="comment" id="2241068">//&nbsp;Method&nbsp;:</span><br>
<span class="lineno"></span><span class="comment" id="2241080">//&nbsp;&nbsp;&nbsp;&nbspBased&nbsp;on</span><br>
<span class="lineno">25</span><span class="comment" id="2241092">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;=&nbsp;log&nbsp;[&nbsp;x&nbsp;+&nbsp;sqrt(x*x-1)&nbsp;]</span><br>
<span class="lineno"></span><span class="comment" id="2241138">//&nbsp;&nbsp;&nbsp;&nbspwe&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="2241149">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log(x)+ln2,&nbsp;&nbsp;&nbsp;&nbspif&nbsp;x&nbsp;is&nbsp;large;&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="2241204">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log(2x-1/(sqrt(x*x-1)+x))&nbsp;if&nbsp;x&gt;2;&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="2241266">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log1p(t+sqrt(2.0*t+t*t));&nbsp;where&nbsp;t=x-1.</span><br>
<span class="lineno">30</span><span class="comment" id="2241328">//</span><br>
<span class="lineno"></span><span class="comment" id="2241331">//&nbsp;Special&nbsp;cases:</span><br>
<span class="lineno"></span><span class="comment" id="2241349">//&nbsp;&nbsp;&nbsp;&nbspacosh(x)&nbsp;is&nbsp;NaN&nbsp;with&nbsp;signal&nbsp;if&nbsp;x&lt;1.</span><br>
<span class="lineno"></span><span class="comment" id="2241388">//&nbsp;&nbsp;&nbsp;&nbspacosh(NaN)&nbsp;is&nbsp;NaN&nbsp;without&nbsp;signal.</span><br>
<span class="lineno"></span><span class="comment" id="2241425">//</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2241429">//&nbsp;Acosh&nbsp;returns&nbsp;the&nbsp;inverse&nbsp;hyperbolic&nbsp;cosine&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2241482">//</span><br>
<span class="lineno"></span><span class="comment" id="2241485">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="2241507">//&nbsp;&nbsp;&nbsp;&nbspAcosh(+Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">40</span><span class="comment" id="2241529">//&nbsp;&nbsp;&nbsp;&nbspAcosh(x)&nbsp;=&nbsp;NaN&nbsp;if&nbsp;x&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2241556">//&nbsp;&nbsp;&nbsp;&nbspAcosh(NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="2241576">func</span>&nbsp;<span class="ident" id="2241581">Acosh</span><span class="op" id="2241586">(</span><span class="ident" id="2241587">x</span>&nbsp;<span class="builtintype" id="2241589">float64</span><span class="op" id="2241596">)</span>&nbsp;<span class="builtintype" id="2241598">float64</span>&nbsp;<span class="op" id="2241606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241609">const</span>&nbsp;<span class="op" id="2241615">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2241619">Ln2</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2241625">=</span>&nbsp;<span class="num" id="2241627">6.93147180559945286227e-01</span>&nbsp;<span class="comment" id="2241654">//&nbsp;0x3FE62E42FEFA39EF</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2241678">Large</span>&nbsp;<span class="op" id="2241684">=</span>&nbsp;<span class="num" id="2241686">1</span>&nbsp;<span class="op" id="2241688">&lt;&lt;</span>&nbsp;<span class="num" id="2241691">28</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2241713">//&nbsp;2**28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2241723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2241726">//&nbsp;first&nbsp;case&nbsp;is&nbsp;special&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241757">switch</span>&nbsp;<span class="op" id="2241764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241767">case</span>&nbsp;<span class="ident" id="2241772"><a href="/math/acosh.go.html#2241587">x</a></span>&nbsp;<span class="op" id="2241774">&lt;</span>&nbsp;<span class="num" id="2241776">1</span>&nbsp;<span class="op" id="2241778">||</span>&nbsp;<span class="ident" id="2241781"><a href="/math/bits.go.html#2252065">IsNaN</a></span><span class="op" id="2241786">(</span><span class="ident" id="2241787"><a href="/math/acosh.go.html#2241587">x</a></span><span class="op" id="2241788">)</span><span class="op" id="2241789">:</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241793">return</span>&nbsp;<span class="ident" id="2241800"><a href="/math/bits.go.html#2251945">NaN</a></span><span class="op" id="2241803">(</span><span class="op" id="2241804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241807">case</span>&nbsp;<span class="ident" id="2241812"><a href="/math/acosh.go.html#2241587">x</a></span>&nbsp;<span class="op" id="2241814">==</span>&nbsp;<span class="num" id="2241817">1</span><span class="op" id="2241818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241822">return</span>&nbsp;<span class="num" id="2241829">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241832">case</span>&nbsp;<span class="ident" id="2241837"><a href="/math/acosh.go.html#2241587">x</a></span>&nbsp;<span class="op" id="2241839">&gt;=</span>&nbsp;<span class="ident" id="2241842"><a href="/math/acosh.go.html#2241678">Large</a></span><span class="op" id="2241847">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241851">return</span>&nbsp;<span class="ident" id="2241858"><a href="/math/log.go.html#2341364">Log</a></span><span class="op" id="2241861">(</span><span class="ident" id="2241862"><a href="/math/acosh.go.html#2241587">x</a></span><span class="op" id="2241863">)</span>&nbsp;<span class="op" id="2241865">+</span>&nbsp;<span class="ident" id="2241867"><a href="/math/acosh.go.html#2241619">Ln2</a></span>&nbsp;<span class="comment" id="2241871">//&nbsp;x&nbsp;&gt;&nbsp;2**28</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241885">case</span>&nbsp;<span class="ident" id="2241890"><a href="/math/acosh.go.html#2241587">x</a></span>&nbsp;<span class="op" id="2241892">&gt;</span>&nbsp;<span class="num" id="2241894">2</span><span class="op" id="2241895">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241899">return</span>&nbsp;<span class="ident" id="2241906"><a href="/math/log.go.html#2341364">Log</a></span><span class="op" id="2241909">(</span><span class="num" id="2241910">2</span><span class="op" id="2241911">*</span><span class="ident" id="2241912"><a href="/math/acosh.go.html#2241587">x</a></span>&nbsp;<span class="op" id="2241914">-</span>&nbsp;<span class="num" id="2241916">1</span><span class="op" id="2241917">/</span><span class="op" id="2241918">(</span><span class="ident" id="2241919"><a href="/math/acosh.go.html#2241587">x</a></span><span class="op" id="2241920">+</span><span class="ident" id="2241921"><a href="/math/sqrt.go.html#2372684">Sqrt</a></span><span class="op" id="2241925">(</span><span class="ident" id="2241926"><a href="/math/acosh.go.html#2241587">x</a></span><span class="op" id="2241927">*</span><span class="ident" id="2241928"><a href="/math/acosh.go.html#2241587">x</a></span><span class="op" id="2241929">-</span><span class="num" id="2241930">1</span><span class="op" id="2241931">)</span><span class="op" id="2241932">)</span><span class="op" id="2241933">)</span>&nbsp;<span class="comment" id="2241935">//&nbsp;2**28&nbsp;&gt;&nbsp;x&nbsp;&gt;&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2241953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2241956">t</span>&nbsp;<span class="op" id="2241958">:=</span>&nbsp;<span class="ident" id="2241961"><a href="/math/acosh.go.html#2241587">x</a></span>&nbsp;<span class="op" id="2241963">-</span>&nbsp;<span class="num" id="2241965">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2241968">return</span>&nbsp;<span class="ident" id="2241975"><a href="/math/log1p.go.html#2346745">Log1p</a></span><span class="op" id="2241980">(</span><span class="ident" id="2241981"><a href="/math/acosh.go.html#2241956">t</a></span>&nbsp;<span class="op" id="2241983">+</span>&nbsp;<span class="ident" id="2241985"><a href="/math/sqrt.go.html#2372684">Sqrt</a></span><span class="op" id="2241989">(</span><span class="num" id="2241990">2</span><span class="op" id="2241991">*</span><span class="ident" id="2241992"><a href="/math/acosh.go.html#2241956">t</a></span><span class="op" id="2241993">+</span><span class="ident" id="2241994"><a href="/math/acosh.go.html#2241956">t</a></span><span class="op" id="2241995">*</span><span class="ident" id="2241996"><a href="/math/acosh.go.html#2241956">t</a></span><span class="op" id="2241997">)</span><span class="op" id="2241998">)</span>&nbsp;<span class="comment" id="2242000">//&nbsp;2&nbsp;&gt;=&nbsp;x&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno">60</span><span class="op" id="2242014">}</span>
</div>
</body>
</html>
