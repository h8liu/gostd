<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6454083">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6454139">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6454193">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6454244">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6454267">package</span>&nbsp;<span class="ident" id="6454275">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6454282">import</span>&nbsp;<span class="op" id="6454289">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6454292">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6454311">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="6454318">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6454321">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="6454398">//</span><br>
<span class="lineno"></span><span class="comment" id="6454401">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="6454488">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="6454566">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6454644">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6454716">//</span><br>
<span class="lineno"></span><span class="comment" id="6454719">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="6454800">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="6454879">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6454932">//</span><br>
<span class="lineno"></span><span class="comment" id="6454935">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="6455010">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6455085">type</span>&nbsp;<span class="ident" id="6455090">LineTable</span>&nbsp;<span class="keyword" id="6455100">struct</span>&nbsp;<span class="op" id="6455107">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455110">Data</span>&nbsp;<span class="op" id="6455115">[</span><span class="op" id="6455116">]</span><span class="builtintype" id="6455117">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455123">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6455128">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455136">Line</span>&nbsp;<span class="builtintype" id="6455141">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455147">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455164">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455173">sync</span><span class="op" id="6455177">.</span><span class="ident" id="6455178">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455185">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6455194">int</span>&nbsp;<span class="comment" id="6455198">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455252">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6455261">binary</span><span class="op" id="6455267">.</span><span class="ident" id="6455268">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455279">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="6455288">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455296">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="6455305">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455313">functab</span>&nbsp;&nbsp;<span class="op" id="6455322">[</span><span class="op" id="6455323">]</span><span class="builtintype" id="6455324">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455330">nfunctab</span>&nbsp;<span class="builtintype" id="6455339">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455347">filetab</span>&nbsp;&nbsp;<span class="op" id="6455356">[</span><span class="op" id="6455357">]</span><span class="builtintype" id="6455358">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455364">nfiletab</span>&nbsp;<span class="builtintype" id="6455373">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455381">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="6455390">map</span><span class="op" id="6455393">[</span><span class="builtintype" id="6455394">string</span><span class="op" id="6455400">]</span><span class="builtintype" id="6455401">uint32</span><br>
<span class="lineno">45</span><span class="op" id="6455408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6455411">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="6455482">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="6455547">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="6455621">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="6455632">const</span>&nbsp;<span class="ident" id="6455638">oldQuantum</span>&nbsp;<span class="op" id="6455649">=</span>&nbsp;<span class="num" id="6455651">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6455654">func</span>&nbsp;<span class="op" id="6455659">(</span><span class="ident" id="6455660">t</span>&nbsp;<span class="op" id="6455662">*</span><span class="ident" id="6455663">LineTable</span><span class="op" id="6455672">)</span>&nbsp;<span class="ident" id="6455674">parse</span><span class="op" id="6455679">(</span><span class="ident" id="6455680">targetPC</span>&nbsp;<span class="ident" id="6455689">uint64</span><span class="op" id="6455695">,</span>&nbsp;<span class="ident" id="6455697">targetLine</span>&nbsp;<span class="builtintype" id="6455708">int</span><span class="op" id="6455711">)</span>&nbsp;<span class="op" id="6455713">(</span><span class="ident" id="6455714">b</span>&nbsp;<span class="op" id="6455716">[</span><span class="op" id="6455717">]</span><span class="builtintype" id="6455718">byte</span><span class="op" id="6455722">,</span>&nbsp;<span class="ident" id="6455724">pc</span>&nbsp;<span class="ident" id="6455727">uint64</span><span class="op" id="6455733">,</span>&nbsp;<span class="ident" id="6455735">line</span>&nbsp;<span class="builtintype" id="6455740">int</span><span class="op" id="6455743">)</span>&nbsp;<span class="op" id="6455745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455748">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455805">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455837">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455899">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455956">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455995">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455999">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6456062">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456119">b</span><span class="op" id="6456120">,</span>&nbsp;<span class="ident" id="6456122">pc</span><span class="op" id="6456124">,</span>&nbsp;<span class="ident" id="6456126">line</span>&nbsp;<span class="op" id="6456131">=</span>&nbsp;<span class="ident" id="6456133">t</span><span class="op" id="6456134">.</span><span class="ident" id="6456135">Data</span><span class="op" id="6456139">,</span>&nbsp;<span class="ident" id="6456141">t</span><span class="op" id="6456142">.</span><span class="ident" id="6456143">PC</span><span class="op" id="6456145">,</span>&nbsp;<span class="ident" id="6456147">t</span><span class="op" id="6456148">.</span><span class="ident" id="6456149">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456155">for</span>&nbsp;<span class="ident" id="6456159">pc</span>&nbsp;<span class="op" id="6456162">&lt;=</span>&nbsp;<span class="ident" id="6456165">targetPC</span>&nbsp;<span class="op" id="6456174">&amp;&amp;</span>&nbsp;<span class="ident" id="6456177">line</span>&nbsp;<span class="op" id="6456182">!=</span>&nbsp;<span class="ident" id="6456185">targetLine</span>&nbsp;<span class="op" id="6456196">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6456199">len</span><span class="op" id="6456202">(</span><span class="ident" id="6456203">b</span><span class="op" id="6456204">)</span>&nbsp;<span class="op" id="6456206">&gt;</span>&nbsp;<span class="num" id="6456208">0</span>&nbsp;<span class="op" id="6456210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456214">code</span>&nbsp;<span class="op" id="6456219">:=</span>&nbsp;<span class="ident" id="6456222">b</span><span class="op" id="6456223">[</span><span class="num" id="6456224">0</span><span class="op" id="6456225">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456229">b</span>&nbsp;<span class="op" id="6456231">=</span>&nbsp;<span class="ident" id="6456233">b</span><span class="op" id="6456234">[</span><span class="num" id="6456235">1</span><span class="op" id="6456236">:</span><span class="op" id="6456237">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456241">switch</span>&nbsp;<span class="op" id="6456248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456252">case</span>&nbsp;<span class="ident" id="6456257">code</span>&nbsp;<span class="op" id="6456262">==</span>&nbsp;<span class="num" id="6456265">0</span><span class="op" id="6456266">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456271">if</span>&nbsp;<span class="builtinfunc" id="6456274">len</span><span class="op" id="6456277">(</span><span class="ident" id="6456278">b</span><span class="op" id="6456279">)</span>&nbsp;<span class="op" id="6456281">&lt;</span>&nbsp;<span class="num" id="6456283">4</span>&nbsp;<span class="op" id="6456285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456291">b</span>&nbsp;<span class="op" id="6456293">=</span>&nbsp;<span class="ident" id="6456295">b</span><span class="op" id="6456296">[</span><span class="num" id="6456297">0</span><span class="op" id="6456298">:</span><span class="num" id="6456299">0</span><span class="op" id="6456300">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456306">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456320">val</span>&nbsp;<span class="op" id="6456324">:=</span>&nbsp;<span class="ident" id="6456327">binary</span><span class="op" id="6456333">.</span><span class="ident" id="6456334">BigEndian</span><span class="op" id="6456343">.</span><span class="ident" id="6456344">Uint32</span><span class="op" id="6456350">(</span><span class="ident" id="6456351">b</span><span class="op" id="6456352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456357">b</span>&nbsp;<span class="op" id="6456359">=</span>&nbsp;<span class="ident" id="6456361">b</span><span class="op" id="6456362">[</span><span class="num" id="6456363">4</span><span class="op" id="6456364">:</span><span class="op" id="6456365">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456370">line</span>&nbsp;<span class="op" id="6456375">+=</span>&nbsp;<span class="builtintype" id="6456378">int</span><span class="op" id="6456381">(</span><span class="ident" id="6456382">val</span><span class="op" id="6456385">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456389">case</span>&nbsp;<span class="ident" id="6456394">code</span>&nbsp;<span class="op" id="6456399">&lt;=</span>&nbsp;<span class="num" id="6456402">64</span><span class="op" id="6456404">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456409">line</span>&nbsp;<span class="op" id="6456414">+=</span>&nbsp;<span class="builtintype" id="6456417">int</span><span class="op" id="6456420">(</span><span class="ident" id="6456421">code</span><span class="op" id="6456425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456429">case</span>&nbsp;<span class="ident" id="6456434">code</span>&nbsp;<span class="op" id="6456439">&lt;=</span>&nbsp;<span class="num" id="6456442">128</span><span class="op" id="6456445">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456450">line</span>&nbsp;<span class="op" id="6456455">-=</span>&nbsp;<span class="builtintype" id="6456458">int</span><span class="op" id="6456461">(</span><span class="ident" id="6456462">code</span>&nbsp;<span class="op" id="6456467">-</span>&nbsp;<span class="num" id="6456469">64</span><span class="op" id="6456471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456475">default</span><span class="op" id="6456482">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456487">pc</span>&nbsp;<span class="op" id="6456490">+=</span>&nbsp;<span class="ident" id="6456493">oldQuantum</span>&nbsp;<span class="op" id="6456504">*</span>&nbsp;<span class="ident" id="6456506">uint64</span><span class="op" id="6456512">(</span><span class="ident" id="6456513">code</span><span class="op" id="6456517">-</span><span class="num" id="6456518">128</span><span class="op" id="6456521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456526">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456541">pc</span>&nbsp;<span class="op" id="6456544">+=</span>&nbsp;<span class="ident" id="6456547">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456559">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456562">return</span>&nbsp;<span class="ident" id="6456569">b</span><span class="op" id="6456570">,</span>&nbsp;<span class="ident" id="6456572">pc</span><span class="op" id="6456574">,</span>&nbsp;<span class="ident" id="6456576">line</span><br>
<span class="lineno"></span><span class="op" id="6456581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6456584">func</span>&nbsp;<span class="op" id="6456589">(</span><span class="ident" id="6456590">t</span>&nbsp;<span class="op" id="6456592">*</span><span class="ident" id="6456593">LineTable</span><span class="op" id="6456602">)</span>&nbsp;<span class="ident" id="6456604">slice</span><span class="op" id="6456609">(</span><span class="ident" id="6456610">pc</span>&nbsp;<span class="ident" id="6456613">uint64</span><span class="op" id="6456619">)</span>&nbsp;<span class="op" id="6456621">*</span><span class="ident" id="6456622">LineTable</span>&nbsp;<span class="op" id="6456632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456635">data</span><span class="op" id="6456639">,</span>&nbsp;<span class="ident" id="6456641">pc</span><span class="op" id="6456643">,</span>&nbsp;<span class="ident" id="6456645">line</span>&nbsp;<span class="op" id="6456650">:=</span>&nbsp;<span class="ident" id="6456653">t</span><span class="op" id="6456654">.</span><span class="ident" id="6456655">parse</span><span class="op" id="6456660">(</span><span class="ident" id="6456661">pc</span><span class="op" id="6456663">,</span>&nbsp;<span class="op" id="6456665">-</span><span class="num" id="6456666">1</span><span class="op" id="6456667">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456670">return</span>&nbsp;<span class="op" id="6456677">&amp;</span><span class="ident" id="6456678">LineTable</span><span class="op" id="6456687">{</span><span class="ident" id="6456688">Data</span><span class="op" id="6456692">:</span>&nbsp;<span class="ident" id="6456694">data</span><span class="op" id="6456698">,</span>&nbsp;<span class="ident" id="6456700">PC</span><span class="op" id="6456702">:</span>&nbsp;<span class="ident" id="6456704">pc</span><span class="op" id="6456706">,</span>&nbsp;<span class="ident" id="6456708">Line</span><span class="op" id="6456712">:</span>&nbsp;<span class="ident" id="6456714">line</span><span class="op" id="6456718">}</span><br>
<span class="lineno"></span><span class="op" id="6456720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6456723">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="6456790">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="6456845">func</span>&nbsp;<span class="op" id="6456850">(</span><span class="ident" id="6456851">t</span>&nbsp;<span class="op" id="6456853">*</span><span class="ident" id="6456854">LineTable</span><span class="op" id="6456863">)</span>&nbsp;<span class="ident" id="6456865">PCToLine</span><span class="op" id="6456873">(</span><span class="ident" id="6456874">pc</span>&nbsp;<span class="ident" id="6456877">uint64</span><span class="op" id="6456883">)</span>&nbsp;<span class="builtintype" id="6456885">int</span>&nbsp;<span class="op" id="6456889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456892">if</span>&nbsp;<span class="ident" id="6456895">t</span><span class="op" id="6456896">.</span><span class="ident" id="6456897">isGo12</span><span class="op" id="6456903">(</span><span class="op" id="6456904">)</span>&nbsp;<span class="op" id="6456906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456910">return</span>&nbsp;<span class="ident" id="6456917">t</span><span class="op" id="6456918">.</span><span class="ident" id="6456919">go12PCToLine</span><span class="op" id="6456931">(</span><span class="ident" id="6456932">pc</span><span class="op" id="6456934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456940">_</span><span class="op" id="6456941">,</span>&nbsp;<span class="ident" id="6456943">_</span><span class="op" id="6456944">,</span>&nbsp;<span class="ident" id="6456946">line</span>&nbsp;<span class="op" id="6456951">:=</span>&nbsp;<span class="ident" id="6456954">t</span><span class="op" id="6456955">.</span><span class="ident" id="6456956">parse</span><span class="op" id="6456961">(</span><span class="ident" id="6456962">pc</span><span class="op" id="6456964">,</span>&nbsp;<span class="op" id="6456966">-</span><span class="num" id="6456967">1</span><span class="op" id="6456968">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456971">return</span>&nbsp;<span class="ident" id="6456978">line</span><br>
<span class="lineno"></span><span class="op" id="6456983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6456986">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="6457053">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="6457104">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6457159">func</span>&nbsp;<span class="op" id="6457164">(</span><span class="ident" id="6457165">t</span>&nbsp;<span class="op" id="6457167">*</span><span class="ident" id="6457168">LineTable</span><span class="op" id="6457177">)</span>&nbsp;<span class="ident" id="6457179">LineToPC</span><span class="op" id="6457187">(</span><span class="ident" id="6457188">line</span>&nbsp;<span class="builtintype" id="6457193">int</span><span class="op" id="6457196">,</span>&nbsp;<span class="ident" id="6457198">maxpc</span>&nbsp;<span class="ident" id="6457204">uint64</span><span class="op" id="6457210">)</span>&nbsp;<span class="ident" id="6457212">uint64</span>&nbsp;<span class="op" id="6457219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457222">if</span>&nbsp;<span class="ident" id="6457225">t</span><span class="op" id="6457226">.</span><span class="ident" id="6457227">isGo12</span><span class="op" id="6457233">(</span><span class="op" id="6457234">)</span>&nbsp;<span class="op" id="6457236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457240">return</span>&nbsp;<span class="num" id="6457247">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457250">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457253">_</span><span class="op" id="6457254">,</span>&nbsp;<span class="ident" id="6457256">pc</span><span class="op" id="6457258">,</span>&nbsp;<span class="ident" id="6457260">line1</span>&nbsp;<span class="op" id="6457266">:=</span>&nbsp;<span class="ident" id="6457269">t</span><span class="op" id="6457270">.</span><span class="ident" id="6457271">parse</span><span class="op" id="6457276">(</span><span class="ident" id="6457277">maxpc</span><span class="op" id="6457282">,</span>&nbsp;<span class="ident" id="6457284">line</span><span class="op" id="6457288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457291">if</span>&nbsp;<span class="ident" id="6457294">line1</span>&nbsp;<span class="op" id="6457300">!=</span>&nbsp;<span class="ident" id="6457303">line</span>&nbsp;<span class="op" id="6457308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457312">return</span>&nbsp;<span class="num" id="6457319">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457325">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457389">return</span>&nbsp;<span class="ident" id="6457396">pc</span>&nbsp;<span class="op" id="6457399">-</span>&nbsp;<span class="ident" id="6457401">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="6457412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6457415">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="6457459">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="6457497">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6457538">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6457569">func</span>&nbsp;<span class="ident" id="6457574">NewLineTable</span><span class="op" id="6457586">(</span><span class="ident" id="6457587">data</span>&nbsp;<span class="op" id="6457592">[</span><span class="op" id="6457593">]</span><span class="builtintype" id="6457594">byte</span><span class="op" id="6457598">,</span>&nbsp;<span class="ident" id="6457600">text</span>&nbsp;<span class="ident" id="6457605">uint64</span><span class="op" id="6457611">)</span>&nbsp;<span class="op" id="6457613">*</span><span class="ident" id="6457614">LineTable</span>&nbsp;<span class="op" id="6457624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457627">return</span>&nbsp;<span class="op" id="6457634">&amp;</span><span class="ident" id="6457635">LineTable</span><span class="op" id="6457644">{</span><span class="ident" id="6457645">Data</span><span class="op" id="6457649">:</span>&nbsp;<span class="ident" id="6457651">data</span><span class="op" id="6457655">,</span>&nbsp;<span class="ident" id="6457657">PC</span><span class="op" id="6457659">:</span>&nbsp;<span class="ident" id="6457661">text</span><span class="op" id="6457665">,</span>&nbsp;<span class="ident" id="6457667">Line</span><span class="op" id="6457671">:</span>&nbsp;<span class="num" id="6457673">0</span><span class="op" id="6457674">}</span><br>
<span class="lineno"></span><span class="op" id="6457676">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6457679">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="6457710">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="6457742">//</span><br>
<span class="lineno"></span><span class="comment" id="6457745">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="6457812">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="6457880">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="6457954">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="6457978">//</span><br>
<span class="lineno"></span><span class="comment" id="6457981">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="6458051">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6458097">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6458165">func</span>&nbsp;<span class="op" id="6458170">(</span><span class="ident" id="6458171">t</span>&nbsp;<span class="op" id="6458173">*</span><span class="ident" id="6458174">LineTable</span><span class="op" id="6458183">)</span>&nbsp;<span class="ident" id="6458185">isGo12</span><span class="op" id="6458191">(</span><span class="op" id="6458192">)</span>&nbsp;<span class="builtintype" id="6458194">bool</span>&nbsp;<span class="op" id="6458199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458202">t</span><span class="op" id="6458203">.</span><span class="ident" id="6458204">go12Init</span><span class="op" id="6458212">(</span><span class="op" id="6458213">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458216">return</span>&nbsp;<span class="ident" id="6458223">t</span><span class="op" id="6458224">.</span><span class="ident" id="6458225">go12</span>&nbsp;<span class="op" id="6458230">==</span>&nbsp;<span class="num" id="6458233">1</span><br>
<span class="lineno"></span><span class="op" id="6458235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6458238">const</span>&nbsp;<span class="ident" id="6458244">go12magic</span>&nbsp;<span class="op" id="6458254">=</span>&nbsp;<span class="num" id="6458256">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="6458268">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="6458325">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="6458382">func</span>&nbsp;<span class="op" id="6458387">(</span><span class="ident" id="6458388">t</span>&nbsp;<span class="op" id="6458390">*</span><span class="ident" id="6458391">LineTable</span><span class="op" id="6458400">)</span>&nbsp;<span class="builtintype" id="6458402">uintptr</span><span class="op" id="6458409">(</span><span class="ident" id="6458410">b</span>&nbsp;<span class="op" id="6458412">[</span><span class="op" id="6458413">]</span><span class="builtintype" id="6458414">byte</span><span class="op" id="6458418">)</span>&nbsp;<span class="ident" id="6458420">uint64</span>&nbsp;<span class="op" id="6458427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458430">if</span>&nbsp;<span class="ident" id="6458433">t</span><span class="op" id="6458434">.</span><span class="ident" id="6458435">ptrsize</span>&nbsp;<span class="op" id="6458443">==</span>&nbsp;<span class="num" id="6458446">4</span>&nbsp;<span class="op" id="6458448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458452">return</span>&nbsp;<span class="ident" id="6458459">uint64</span><span class="op" id="6458465">(</span><span class="ident" id="6458466">t</span><span class="op" id="6458467">.</span><span class="ident" id="6458468">binary</span><span class="op" id="6458474">.</span><span class="ident" id="6458475">Uint32</span><span class="op" id="6458481">(</span><span class="ident" id="6458482">b</span><span class="op" id="6458483">)</span><span class="op" id="6458484">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458490">return</span>&nbsp;<span class="ident" id="6458497">t</span><span class="op" id="6458498">.</span><span class="ident" id="6458499">binary</span><span class="op" id="6458505">.</span><span class="ident" id="6458506">Uint64</span><span class="op" id="6458512">(</span><span class="ident" id="6458513">b</span><span class="op" id="6458514">)</span><br>
<span class="lineno"></span><span class="op" id="6458516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6458519">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="6458594">func</span>&nbsp;<span class="op" id="6458599">(</span><span class="ident" id="6458600">t</span>&nbsp;<span class="op" id="6458602">*</span><span class="ident" id="6458603">LineTable</span><span class="op" id="6458612">)</span>&nbsp;<span class="ident" id="6458614">go12Init</span><span class="op" id="6458622">(</span><span class="op" id="6458623">)</span>&nbsp;<span class="op" id="6458625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458628">t</span><span class="op" id="6458629">.</span><span class="ident" id="6458630">mu</span><span class="op" id="6458632">.</span><span class="ident" id="6458633">Lock</span><span class="op" id="6458637">(</span><span class="op" id="6458638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458641">defer</span>&nbsp;<span class="ident" id="6458647">t</span><span class="op" id="6458648">.</span><span class="ident" id="6458649">mu</span><span class="op" id="6458651">.</span><span class="ident" id="6458652">Unlock</span><span class="op" id="6458658">(</span><span class="op" id="6458659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458662">if</span>&nbsp;<span class="ident" id="6458665">t</span><span class="op" id="6458666">.</span><span class="ident" id="6458667">go12</span>&nbsp;<span class="op" id="6458672">!=</span>&nbsp;<span class="num" id="6458675">0</span>&nbsp;<span class="op" id="6458677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458681">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458693">defer</span>&nbsp;<span class="keyword" id="6458699">func</span><span class="op" id="6458703">(</span><span class="op" id="6458704">)</span>&nbsp;<span class="op" id="6458706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6458710">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6458775">recover</span><span class="op" id="6458782">(</span><span class="op" id="6458783">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458786">}</span><span class="op" id="6458787">(</span><span class="op" id="6458788">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6458792">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458861">t</span><span class="op" id="6458862">.</span><span class="ident" id="6458863">go12</span>&nbsp;<span class="op" id="6458868">=</span>&nbsp;<span class="op" id="6458870">-</span><span class="num" id="6458871">1</span>&nbsp;<span class="comment" id="6458873">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458911">if</span>&nbsp;<span class="builtinfunc" id="6458914">len</span><span class="op" id="6458917">(</span><span class="ident" id="6458918">t</span><span class="op" id="6458919">.</span><span class="ident" id="6458920">Data</span><span class="op" id="6458924">)</span>&nbsp;<span class="op" id="6458926">&lt;</span>&nbsp;<span class="num" id="6458928">16</span>&nbsp;<span class="op" id="6458931">||</span>&nbsp;<span class="ident" id="6458934">t</span><span class="op" id="6458935">.</span><span class="ident" id="6458936">Data</span><span class="op" id="6458940">[</span><span class="num" id="6458941">4</span><span class="op" id="6458942">]</span>&nbsp;<span class="op" id="6458944">!=</span>&nbsp;<span class="num" id="6458947">0</span>&nbsp;<span class="op" id="6458949">||</span>&nbsp;<span class="ident" id="6458952">t</span><span class="op" id="6458953">.</span><span class="ident" id="6458954">Data</span><span class="op" id="6458958">[</span><span class="num" id="6458959">5</span><span class="op" id="6458960">]</span>&nbsp;<span class="op" id="6458962">!=</span>&nbsp;<span class="num" id="6458965">0</span>&nbsp;<span class="op" id="6458967">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458972">(</span><span class="ident" id="6458973">t</span><span class="op" id="6458974">.</span><span class="ident" id="6458975">Data</span><span class="op" id="6458979">[</span><span class="num" id="6458980">6</span><span class="op" id="6458981">]</span>&nbsp;<span class="op" id="6458983">!=</span>&nbsp;<span class="num" id="6458986">1</span>&nbsp;<span class="op" id="6458988">&amp;&amp;</span>&nbsp;<span class="ident" id="6458991">t</span><span class="op" id="6458992">.</span><span class="ident" id="6458993">Data</span><span class="op" id="6458997">[</span><span class="num" id="6458998">6</span><span class="op" id="6458999">]</span>&nbsp;<span class="op" id="6459001">!=</span>&nbsp;<span class="num" id="6459004">4</span><span class="op" id="6459005">)</span>&nbsp;<span class="op" id="6459007">||</span>&nbsp;<span class="comment" id="6459010">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459026">(</span><span class="ident" id="6459027">t</span><span class="op" id="6459028">.</span><span class="ident" id="6459029">Data</span><span class="op" id="6459033">[</span><span class="num" id="6459034">7</span><span class="op" id="6459035">]</span>&nbsp;<span class="op" id="6459037">!=</span>&nbsp;<span class="num" id="6459040">4</span>&nbsp;<span class="op" id="6459042">&amp;&amp;</span>&nbsp;<span class="ident" id="6459045">t</span><span class="op" id="6459046">.</span><span class="ident" id="6459047">Data</span><span class="op" id="6459051">[</span><span class="num" id="6459052">7</span><span class="op" id="6459053">]</span>&nbsp;<span class="op" id="6459055">!=</span>&nbsp;<span class="num" id="6459058">8</span><span class="op" id="6459059">)</span>&nbsp;<span class="op" id="6459061">{</span>&nbsp;<span class="comment" id="6459063">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459081">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459093">switch</span>&nbsp;<span class="builtintype" id="6459100">uint32</span><span class="op" id="6459106">(</span><span class="ident" id="6459107">go12magic</span><span class="op" id="6459116">)</span>&nbsp;<span class="op" id="6459118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459121">case</span>&nbsp;<span class="ident" id="6459126">binary</span><span class="op" id="6459132">.</span><span class="ident" id="6459133">LittleEndian</span><span class="op" id="6459145">.</span><span class="ident" id="6459146">Uint32</span><span class="op" id="6459152">(</span><span class="ident" id="6459153">t</span><span class="op" id="6459154">.</span><span class="ident" id="6459155">Data</span><span class="op" id="6459159">)</span><span class="op" id="6459160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459164">t</span><span class="op" id="6459165">.</span><span class="ident" id="6459166">binary</span>&nbsp;<span class="op" id="6459173">=</span>&nbsp;<span class="ident" id="6459175">binary</span><span class="op" id="6459181">.</span><span class="ident" id="6459182">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459196">case</span>&nbsp;<span class="ident" id="6459201">binary</span><span class="op" id="6459207">.</span><span class="ident" id="6459208">BigEndian</span><span class="op" id="6459217">.</span><span class="ident" id="6459218">Uint32</span><span class="op" id="6459224">(</span><span class="ident" id="6459225">t</span><span class="op" id="6459226">.</span><span class="ident" id="6459227">Data</span><span class="op" id="6459231">)</span><span class="op" id="6459232">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459236">t</span><span class="op" id="6459237">.</span><span class="ident" id="6459238">binary</span>&nbsp;<span class="op" id="6459245">=</span>&nbsp;<span class="ident" id="6459247">binary</span><span class="op" id="6459253">.</span><span class="ident" id="6459254">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459265">default</span><span class="op" id="6459272">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459276">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459288">t</span><span class="op" id="6459289">.</span><span class="ident" id="6459290">quantum</span>&nbsp;<span class="op" id="6459298">=</span>&nbsp;<span class="builtintype" id="6459300">uint32</span><span class="op" id="6459306">(</span><span class="ident" id="6459307">t</span><span class="op" id="6459308">.</span><span class="ident" id="6459309">Data</span><span class="op" id="6459313">[</span><span class="num" id="6459314">6</span><span class="op" id="6459315">]</span><span class="op" id="6459316">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459319">t</span><span class="op" id="6459320">.</span><span class="ident" id="6459321">ptrsize</span>&nbsp;<span class="op" id="6459329">=</span>&nbsp;<span class="builtintype" id="6459331">uint32</span><span class="op" id="6459337">(</span><span class="ident" id="6459338">t</span><span class="op" id="6459339">.</span><span class="ident" id="6459340">Data</span><span class="op" id="6459344">[</span><span class="num" id="6459345">7</span><span class="op" id="6459346">]</span><span class="op" id="6459347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459351">t</span><span class="op" id="6459352">.</span><span class="ident" id="6459353">nfunctab</span>&nbsp;<span class="op" id="6459362">=</span>&nbsp;<span class="builtintype" id="6459364">uint32</span><span class="op" id="6459370">(</span><span class="ident" id="6459371">t</span><span class="op" id="6459372">.</span><span class="builtintype" id="6459373">uintptr</span><span class="op" id="6459380">(</span><span class="ident" id="6459381">t</span><span class="op" id="6459382">.</span><span class="ident" id="6459383">Data</span><span class="op" id="6459387">[</span><span class="num" id="6459388">8</span><span class="op" id="6459389">:</span><span class="op" id="6459390">]</span><span class="op" id="6459391">)</span><span class="op" id="6459392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459395">t</span><span class="op" id="6459396">.</span><span class="ident" id="6459397">functab</span>&nbsp;<span class="op" id="6459405">=</span>&nbsp;<span class="ident" id="6459407">t</span><span class="op" id="6459408">.</span><span class="ident" id="6459409">Data</span><span class="op" id="6459413">[</span><span class="num" id="6459414">8</span><span class="op" id="6459415">+</span><span class="ident" id="6459416">t</span><span class="op" id="6459417">.</span><span class="ident" id="6459418">ptrsize</span><span class="op" id="6459425">:</span><span class="op" id="6459426">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459429">functabsize</span>&nbsp;<span class="op" id="6459441">:=</span>&nbsp;<span class="ident" id="6459444">t</span><span class="op" id="6459445">.</span><span class="ident" id="6459446">nfunctab</span><span class="op" id="6459454">*</span><span class="num" id="6459455">2</span><span class="op" id="6459456">*</span><span class="ident" id="6459457">t</span><span class="op" id="6459458">.</span><span class="ident" id="6459459">ptrsize</span>&nbsp;<span class="op" id="6459467">+</span>&nbsp;<span class="ident" id="6459469">t</span><span class="op" id="6459470">.</span><span class="ident" id="6459471">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459480">fileoff</span>&nbsp;<span class="op" id="6459488">:=</span>&nbsp;<span class="ident" id="6459491">t</span><span class="op" id="6459492">.</span><span class="ident" id="6459493">binary</span><span class="op" id="6459499">.</span><span class="ident" id="6459500">Uint32</span><span class="op" id="6459506">(</span><span class="ident" id="6459507">t</span><span class="op" id="6459508">.</span><span class="ident" id="6459509">functab</span><span class="op" id="6459516">[</span><span class="ident" id="6459517">functabsize</span><span class="op" id="6459528">:</span><span class="op" id="6459529">]</span><span class="op" id="6459530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459533">t</span><span class="op" id="6459534">.</span><span class="ident" id="6459535">functab</span>&nbsp;<span class="op" id="6459543">=</span>&nbsp;<span class="ident" id="6459545">t</span><span class="op" id="6459546">.</span><span class="ident" id="6459547">functab</span><span class="op" id="6459554">[</span><span class="op" id="6459555">:</span><span class="ident" id="6459556">functabsize</span><span class="op" id="6459567">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459570">t</span><span class="op" id="6459571">.</span><span class="ident" id="6459572">filetab</span>&nbsp;<span class="op" id="6459580">=</span>&nbsp;<span class="ident" id="6459582">t</span><span class="op" id="6459583">.</span><span class="ident" id="6459584">Data</span><span class="op" id="6459588">[</span><span class="ident" id="6459589">fileoff</span><span class="op" id="6459596">:</span><span class="op" id="6459597">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459600">t</span><span class="op" id="6459601">.</span><span class="ident" id="6459602">nfiletab</span>&nbsp;<span class="op" id="6459611">=</span>&nbsp;<span class="ident" id="6459613">t</span><span class="op" id="6459614">.</span><span class="ident" id="6459615">binary</span><span class="op" id="6459621">.</span><span class="ident" id="6459622">Uint32</span><span class="op" id="6459628">(</span><span class="ident" id="6459629">t</span><span class="op" id="6459630">.</span><span class="ident" id="6459631">filetab</span><span class="op" id="6459638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459641">t</span><span class="op" id="6459642">.</span><span class="ident" id="6459643">filetab</span>&nbsp;<span class="op" id="6459651">=</span>&nbsp;<span class="ident" id="6459653">t</span><span class="op" id="6459654">.</span><span class="ident" id="6459655">filetab</span><span class="op" id="6459662">[</span><span class="op" id="6459663">:</span><span class="ident" id="6459664">t</span><span class="op" id="6459665">.</span><span class="ident" id="6459666">nfiletab</span><span class="op" id="6459674">*</span><span class="num" id="6459675">4</span><span class="op" id="6459676">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459680">t</span><span class="op" id="6459681">.</span><span class="ident" id="6459682">go12</span>&nbsp;<span class="op" id="6459687">=</span>&nbsp;<span class="num" id="6459689">1</span>&nbsp;<span class="comment" id="6459691">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="6459709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6459712">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="6459786">func</span>&nbsp;<span class="op" id="6459791">(</span><span class="ident" id="6459792">t</span>&nbsp;<span class="op" id="6459794">*</span><span class="ident" id="6459795">LineTable</span><span class="op" id="6459804">)</span>&nbsp;<span class="ident" id="6459806">go12Funcs</span><span class="op" id="6459815">(</span><span class="op" id="6459816">)</span>&nbsp;<span class="op" id="6459818">[</span><span class="op" id="6459819">]</span><span class="ident" id="6459820">Func</span>&nbsp;<span class="op" id="6459825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6459828">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459880">defer</span>&nbsp;<span class="keyword" id="6459886">func</span><span class="op" id="6459890">(</span><span class="op" id="6459891">)</span>&nbsp;<span class="op" id="6459893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6459897">recover</span><span class="op" id="6459904">(</span><span class="op" id="6459905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459908">}</span><span class="op" id="6459909">(</span><span class="op" id="6459910">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459914">n</span>&nbsp;<span class="op" id="6459916">:=</span>&nbsp;<span class="builtinfunc" id="6459919">len</span><span class="op" id="6459922">(</span><span class="ident" id="6459923">t</span><span class="op" id="6459924">.</span><span class="ident" id="6459925">functab</span><span class="op" id="6459932">)</span>&nbsp;<span class="op" id="6459934">/</span>&nbsp;<span class="builtintype" id="6459936">int</span><span class="op" id="6459939">(</span><span class="ident" id="6459940">t</span><span class="op" id="6459941">.</span><span class="ident" id="6459942">ptrsize</span><span class="op" id="6459949">)</span>&nbsp;<span class="op" id="6459951">/</span>&nbsp;<span class="num" id="6459953">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459956">funcs</span>&nbsp;<span class="op" id="6459962">:=</span>&nbsp;<span class="builtinfunc" id="6459965">make</span><span class="op" id="6459969">(</span><span class="op" id="6459970">[</span><span class="op" id="6459971">]</span><span class="ident" id="6459972">Func</span><span class="op" id="6459976">,</span>&nbsp;<span class="ident" id="6459978">n</span><span class="op" id="6459979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459982">for</span>&nbsp;<span class="ident" id="6459986">i</span>&nbsp;<span class="op" id="6459988">:=</span>&nbsp;<span class="keyword" id="6459991">range</span>&nbsp;<span class="ident" id="6459997">funcs</span>&nbsp;<span class="op" id="6460003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460007">f</span>&nbsp;<span class="op" id="6460009">:=</span>&nbsp;<span class="op" id="6460012">&amp;</span><span class="ident" id="6460013">funcs</span><span class="op" id="6460018">[</span><span class="ident" id="6460019">i</span><span class="op" id="6460020">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460024">f</span><span class="op" id="6460025">.</span><span class="ident" id="6460026">Entry</span>&nbsp;<span class="op" id="6460032">=</span>&nbsp;<span class="ident" id="6460034">uint64</span><span class="op" id="6460040">(</span><span class="ident" id="6460041">t</span><span class="op" id="6460042">.</span><span class="builtintype" id="6460043">uintptr</span><span class="op" id="6460050">(</span><span class="ident" id="6460051">t</span><span class="op" id="6460052">.</span><span class="ident" id="6460053">functab</span><span class="op" id="6460060">[</span><span class="num" id="6460061">2</span><span class="op" id="6460062">*</span><span class="ident" id="6460063">i</span><span class="op" id="6460064">*</span><span class="builtintype" id="6460065">int</span><span class="op" id="6460068">(</span><span class="ident" id="6460069">t</span><span class="op" id="6460070">.</span><span class="ident" id="6460071">ptrsize</span><span class="op" id="6460078">)</span><span class="op" id="6460079">:</span><span class="op" id="6460080">]</span><span class="op" id="6460081">)</span><span class="op" id="6460082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460086">f</span><span class="op" id="6460087">.</span><span class="ident" id="6460088">End</span>&nbsp;<span class="op" id="6460092">=</span>&nbsp;<span class="ident" id="6460094">uint64</span><span class="op" id="6460100">(</span><span class="ident" id="6460101">t</span><span class="op" id="6460102">.</span><span class="builtintype" id="6460103">uintptr</span><span class="op" id="6460110">(</span><span class="ident" id="6460111">t</span><span class="op" id="6460112">.</span><span class="ident" id="6460113">functab</span><span class="op" id="6460120">[</span><span class="op" id="6460121">(</span><span class="num" id="6460122">2</span><span class="op" id="6460123">*</span><span class="ident" id="6460124">i</span><span class="op" id="6460125">+</span><span class="num" id="6460126">2</span><span class="op" id="6460127">)</span><span class="op" id="6460128">*</span><span class="builtintype" id="6460129">int</span><span class="op" id="6460132">(</span><span class="ident" id="6460133">t</span><span class="op" id="6460134">.</span><span class="ident" id="6460135">ptrsize</span><span class="op" id="6460142">)</span><span class="op" id="6460143">:</span><span class="op" id="6460144">]</span><span class="op" id="6460145">)</span><span class="op" id="6460146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460150">info</span>&nbsp;<span class="op" id="6460155">:=</span>&nbsp;<span class="ident" id="6460158">t</span><span class="op" id="6460159">.</span><span class="ident" id="6460160">Data</span><span class="op" id="6460164">[</span><span class="ident" id="6460165">t</span><span class="op" id="6460166">.</span><span class="builtintype" id="6460167">uintptr</span><span class="op" id="6460174">(</span><span class="ident" id="6460175">t</span><span class="op" id="6460176">.</span><span class="ident" id="6460177">functab</span><span class="op" id="6460184">[</span><span class="op" id="6460185">(</span><span class="num" id="6460186">2</span><span class="op" id="6460187">*</span><span class="ident" id="6460188">i</span><span class="op" id="6460189">+</span><span class="num" id="6460190">1</span><span class="op" id="6460191">)</span><span class="op" id="6460192">*</span><span class="builtintype" id="6460193">int</span><span class="op" id="6460196">(</span><span class="ident" id="6460197">t</span><span class="op" id="6460198">.</span><span class="ident" id="6460199">ptrsize</span><span class="op" id="6460206">)</span><span class="op" id="6460207">:</span><span class="op" id="6460208">]</span><span class="op" id="6460209">)</span><span class="op" id="6460210">:</span><span class="op" id="6460211">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460215">f</span><span class="op" id="6460216">.</span><span class="ident" id="6460217">LineTable</span>&nbsp;<span class="op" id="6460227">=</span>&nbsp;<span class="ident" id="6460229">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460233">f</span><span class="op" id="6460234">.</span><span class="ident" id="6460235">FrameSize</span>&nbsp;<span class="op" id="6460245">=</span>&nbsp;<span class="builtintype" id="6460247">int</span><span class="op" id="6460250">(</span><span class="ident" id="6460251">t</span><span class="op" id="6460252">.</span><span class="ident" id="6460253">binary</span><span class="op" id="6460259">.</span><span class="ident" id="6460260">Uint32</span><span class="op" id="6460266">(</span><span class="ident" id="6460267">info</span><span class="op" id="6460271">[</span><span class="ident" id="6460272">t</span><span class="op" id="6460273">.</span><span class="ident" id="6460274">ptrsize</span><span class="op" id="6460281">+</span><span class="num" id="6460282">2</span><span class="op" id="6460283">*</span><span class="num" id="6460284">4</span><span class="op" id="6460285">:</span><span class="op" id="6460286">]</span><span class="op" id="6460287">)</span><span class="op" id="6460288">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460292">f</span><span class="op" id="6460293">.</span><span class="ident" id="6460294">Sym</span>&nbsp;<span class="op" id="6460298">=</span>&nbsp;<span class="op" id="6460300">&amp;</span><span class="ident" id="6460301">Sym</span><span class="op" id="6460304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460309">Value</span><span class="op" id="6460314">:</span>&nbsp;&nbsp;<span class="ident" id="6460317">f</span><span class="op" id="6460318">.</span><span class="ident" id="6460319">Entry</span><span class="op" id="6460324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460329">Type</span><span class="op" id="6460333">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6460337">&#39;T&#39;</span><span class="op" id="6460340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460345">Name</span><span class="op" id="6460349">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6460353">t</span><span class="op" id="6460354">.</span><span class="builtintype" id="6460355">string</span><span class="op" id="6460361">(</span><span class="ident" id="6460362">t</span><span class="op" id="6460363">.</span><span class="ident" id="6460364">binary</span><span class="op" id="6460370">.</span><span class="ident" id="6460371">Uint32</span><span class="op" id="6460377">(</span><span class="ident" id="6460378">info</span><span class="op" id="6460382">[</span><span class="ident" id="6460383">t</span><span class="op" id="6460384">.</span><span class="ident" id="6460385">ptrsize</span><span class="op" id="6460392">:</span><span class="op" id="6460393">]</span><span class="op" id="6460394">)</span><span class="op" id="6460395">)</span><span class="op" id="6460396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460401">GoType</span><span class="op" id="6460407">:</span>&nbsp;<span class="num" id="6460409">0</span><span class="op" id="6460410">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460415">Func</span><span class="op" id="6460419">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6460423">f</span><span class="op" id="6460424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460434">return</span>&nbsp;<span class="ident" id="6460441">funcs</span><br>
<span class="lineno"></span><span class="op" id="6460447">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="6460450">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="6460523">func</span>&nbsp;<span class="op" id="6460528">(</span><span class="ident" id="6460529">t</span>&nbsp;<span class="op" id="6460531">*</span><span class="ident" id="6460532">LineTable</span><span class="op" id="6460541">)</span>&nbsp;<span class="ident" id="6460543">findFunc</span><span class="op" id="6460551">(</span><span class="ident" id="6460552">pc</span>&nbsp;<span class="ident" id="6460555">uint64</span><span class="op" id="6460561">)</span>&nbsp;<span class="op" id="6460563">[</span><span class="op" id="6460564">]</span><span class="builtintype" id="6460565">byte</span>&nbsp;<span class="op" id="6460570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460573">if</span>&nbsp;<span class="ident" id="6460576">pc</span>&nbsp;<span class="op" id="6460579">&lt;</span>&nbsp;<span class="ident" id="6460581">t</span><span class="op" id="6460582">.</span><span class="builtintype" id="6460583">uintptr</span><span class="op" id="6460590">(</span><span class="ident" id="6460591">t</span><span class="op" id="6460592">.</span><span class="ident" id="6460593">functab</span><span class="op" id="6460600">)</span>&nbsp;<span class="op" id="6460602">||</span>&nbsp;<span class="ident" id="6460605">pc</span>&nbsp;<span class="op" id="6460608">&gt;=</span>&nbsp;<span class="ident" id="6460611">t</span><span class="op" id="6460612">.</span><span class="builtintype" id="6460613">uintptr</span><span class="op" id="6460620">(</span><span class="ident" id="6460621">t</span><span class="op" id="6460622">.</span><span class="ident" id="6460623">functab</span><span class="op" id="6460630">[</span><span class="builtinfunc" id="6460631">len</span><span class="op" id="6460634">(</span><span class="ident" id="6460635">t</span><span class="op" id="6460636">.</span><span class="ident" id="6460637">functab</span><span class="op" id="6460644">)</span><span class="op" id="6460645">-</span><span class="builtintype" id="6460646">int</span><span class="op" id="6460649">(</span><span class="ident" id="6460650">t</span><span class="op" id="6460651">.</span><span class="ident" id="6460652">ptrsize</span><span class="op" id="6460659">)</span><span class="op" id="6460660">:</span><span class="op" id="6460661">]</span><span class="op" id="6460662">)</span>&nbsp;<span class="op" id="6460664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460668">return</span>&nbsp;<span class="ident" id="6460675">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6460684">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6460743">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460808">f</span>&nbsp;<span class="op" id="6460810">:=</span>&nbsp;<span class="ident" id="6460813">t</span><span class="op" id="6460814">.</span><span class="ident" id="6460815">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460824">nf</span>&nbsp;<span class="op" id="6460827">:=</span>&nbsp;<span class="ident" id="6460830">t</span><span class="op" id="6460831">.</span><span class="ident" id="6460832">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460842">for</span>&nbsp;<span class="ident" id="6460846">nf</span>&nbsp;<span class="op" id="6460849">&gt;</span>&nbsp;<span class="num" id="6460851">0</span>&nbsp;<span class="op" id="6460853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460857">m</span>&nbsp;<span class="op" id="6460859">:=</span>&nbsp;<span class="ident" id="6460862">nf</span>&nbsp;<span class="op" id="6460865">/</span>&nbsp;<span class="num" id="6460867">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460871">fm</span>&nbsp;<span class="op" id="6460874">:=</span>&nbsp;<span class="ident" id="6460877">f</span><span class="op" id="6460878">[</span><span class="num" id="6460879">2</span><span class="op" id="6460880">*</span><span class="ident" id="6460881">t</span><span class="op" id="6460882">.</span><span class="ident" id="6460883">ptrsize</span><span class="op" id="6460890">*</span><span class="ident" id="6460891">m</span><span class="op" id="6460892">:</span><span class="op" id="6460893">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460897">if</span>&nbsp;<span class="ident" id="6460900">t</span><span class="op" id="6460901">.</span><span class="builtintype" id="6460902">uintptr</span><span class="op" id="6460909">(</span><span class="ident" id="6460910">fm</span><span class="op" id="6460912">)</span>&nbsp;<span class="op" id="6460914">&lt;=</span>&nbsp;<span class="ident" id="6460917">pc</span>&nbsp;<span class="op" id="6460920">&amp;&amp;</span>&nbsp;<span class="ident" id="6460923">pc</span>&nbsp;<span class="op" id="6460926">&lt;</span>&nbsp;<span class="ident" id="6460928">t</span><span class="op" id="6460929">.</span><span class="builtintype" id="6460930">uintptr</span><span class="op" id="6460937">(</span><span class="ident" id="6460938">fm</span><span class="op" id="6460940">[</span><span class="num" id="6460941">2</span><span class="op" id="6460942">*</span><span class="ident" id="6460943">t</span><span class="op" id="6460944">.</span><span class="ident" id="6460945">ptrsize</span><span class="op" id="6460952">:</span><span class="op" id="6460953">]</span><span class="op" id="6460954">)</span>&nbsp;<span class="op" id="6460956">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460961">return</span>&nbsp;<span class="ident" id="6460968">t</span><span class="op" id="6460969">.</span><span class="ident" id="6460970">Data</span><span class="op" id="6460974">[</span><span class="ident" id="6460975">t</span><span class="op" id="6460976">.</span><span class="builtintype" id="6460977">uintptr</span><span class="op" id="6460984">(</span><span class="ident" id="6460985">fm</span><span class="op" id="6460987">[</span><span class="ident" id="6460988">t</span><span class="op" id="6460989">.</span><span class="ident" id="6460990">ptrsize</span><span class="op" id="6460997">:</span><span class="op" id="6460998">]</span><span class="op" id="6460999">)</span><span class="op" id="6461000">:</span><span class="op" id="6461001">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461005">}</span>&nbsp;<span class="keyword" id="6461007">else</span>&nbsp;<span class="keyword" id="6461012">if</span>&nbsp;<span class="ident" id="6461015">pc</span>&nbsp;<span class="op" id="6461018">&lt;</span>&nbsp;<span class="ident" id="6461020">t</span><span class="op" id="6461021">.</span><span class="builtintype" id="6461022">uintptr</span><span class="op" id="6461029">(</span><span class="ident" id="6461030">fm</span><span class="op" id="6461032">)</span>&nbsp;<span class="op" id="6461034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461039">nf</span>&nbsp;<span class="op" id="6461042">=</span>&nbsp;<span class="ident" id="6461044">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461048">}</span>&nbsp;<span class="keyword" id="6461050">else</span>&nbsp;<span class="op" id="6461055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461060">f</span>&nbsp;<span class="op" id="6461062">=</span>&nbsp;<span class="ident" id="6461064">f</span><span class="op" id="6461065">[</span><span class="op" id="6461066">(</span><span class="ident" id="6461067">m</span><span class="op" id="6461068">+</span><span class="num" id="6461069">1</span><span class="op" id="6461070">)</span><span class="op" id="6461071">*</span><span class="num" id="6461072">2</span><span class="op" id="6461073">*</span><span class="ident" id="6461074">t</span><span class="op" id="6461075">.</span><span class="ident" id="6461076">ptrsize</span><span class="op" id="6461083">:</span><span class="op" id="6461084">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461089">nf</span>&nbsp;<span class="op" id="6461092">-=</span>&nbsp;<span class="ident" id="6461095">m</span>&nbsp;<span class="op" id="6461097">+</span>&nbsp;<span class="num" id="6461099">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461109">return</span>&nbsp;<span class="ident" id="6461116">nil</span><br>
<span class="lineno"></span><span class="op" id="6461120">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="6461123">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="6461184">func</span>&nbsp;<span class="op" id="6461189">(</span><span class="ident" id="6461190">t</span>&nbsp;<span class="op" id="6461192">*</span><span class="ident" id="6461193">LineTable</span><span class="op" id="6461202">)</span>&nbsp;<span class="ident" id="6461204">readvarint</span><span class="op" id="6461214">(</span><span class="ident" id="6461215">pp</span>&nbsp;<span class="op" id="6461218">*</span><span class="op" id="6461219">[</span><span class="op" id="6461220">]</span><span class="builtintype" id="6461221">byte</span><span class="op" id="6461225">)</span>&nbsp;<span class="builtintype" id="6461227">uint32</span>&nbsp;<span class="op" id="6461234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461237">var</span>&nbsp;<span class="ident" id="6461241">v</span><span class="op" id="6461242">,</span>&nbsp;<span class="ident" id="6461244">shift</span>&nbsp;<span class="builtintype" id="6461250">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461258">p</span>&nbsp;<span class="op" id="6461260">:=</span>&nbsp;<span class="op" id="6461263">*</span><span class="ident" id="6461264">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461268">for</span>&nbsp;<span class="ident" id="6461272">shift</span>&nbsp;<span class="op" id="6461278">=</span>&nbsp;<span class="num" id="6461280">0</span><span class="op" id="6461281">;</span>&nbsp;<span class="op" id="6461283">;</span>&nbsp;<span class="ident" id="6461285">shift</span>&nbsp;<span class="op" id="6461291">+=</span>&nbsp;<span class="num" id="6461294">7</span>&nbsp;<span class="op" id="6461296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461300">b</span>&nbsp;<span class="op" id="6461302">:=</span>&nbsp;<span class="ident" id="6461305">p</span><span class="op" id="6461306">[</span><span class="num" id="6461307">0</span><span class="op" id="6461308">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461312">p</span>&nbsp;<span class="op" id="6461314">=</span>&nbsp;<span class="ident" id="6461316">p</span><span class="op" id="6461317">[</span><span class="num" id="6461318">1</span><span class="op" id="6461319">:</span><span class="op" id="6461320">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461324">v</span>&nbsp;<span class="op" id="6461326">|=</span>&nbsp;<span class="op" id="6461329">(</span><span class="builtintype" id="6461330">uint32</span><span class="op" id="6461336">(</span><span class="ident" id="6461337">b</span><span class="op" id="6461338">)</span>&nbsp;<span class="op" id="6461340">&amp;</span>&nbsp;<span class="num" id="6461342">0x7F</span><span class="op" id="6461346">)</span>&nbsp;<span class="op" id="6461348">&lt;&lt;</span>&nbsp;<span class="ident" id="6461351">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461359">if</span>&nbsp;<span class="ident" id="6461362">b</span><span class="op" id="6461363">&amp;</span><span class="num" id="6461364">0x80</span>&nbsp;<span class="op" id="6461369">==</span>&nbsp;<span class="num" id="6461372">0</span>&nbsp;<span class="op" id="6461374">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461379">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461393">*</span><span class="ident" id="6461394">pp</span>&nbsp;<span class="op" id="6461397">=</span>&nbsp;<span class="ident" id="6461399">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461402">return</span>&nbsp;<span class="ident" id="6461409">v</span><br>
<span class="lineno">265</span><span class="op" id="6461411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6461414">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="6461458">func</span>&nbsp;<span class="op" id="6461463">(</span><span class="ident" id="6461464">t</span>&nbsp;<span class="op" id="6461466">*</span><span class="ident" id="6461467">LineTable</span><span class="op" id="6461476">)</span>&nbsp;<span class="builtintype" id="6461478">string</span><span class="op" id="6461484">(</span><span class="ident" id="6461485">off</span>&nbsp;<span class="builtintype" id="6461489">uint32</span><span class="op" id="6461495">)</span>&nbsp;<span class="builtintype" id="6461497">string</span>&nbsp;<span class="op" id="6461504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461507">for</span>&nbsp;<span class="ident" id="6461511">i</span>&nbsp;<span class="op" id="6461513">:=</span>&nbsp;<span class="ident" id="6461516">off</span><span class="op" id="6461519">;</span>&nbsp;<span class="op" id="6461521">;</span>&nbsp;<span class="ident" id="6461523">i</span><span class="op" id="6461524">++</span>&nbsp;<span class="op" id="6461527">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461531">if</span>&nbsp;<span class="ident" id="6461534">t</span><span class="op" id="6461535">.</span><span class="ident" id="6461536">Data</span><span class="op" id="6461540">[</span><span class="ident" id="6461541">i</span><span class="op" id="6461542">]</span>&nbsp;<span class="op" id="6461544">==</span>&nbsp;<span class="num" id="6461547">0</span>&nbsp;<span class="op" id="6461549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461554">return</span>&nbsp;<span class="builtintype" id="6461561">string</span><span class="op" id="6461567">(</span><span class="ident" id="6461568">t</span><span class="op" id="6461569">.</span><span class="ident" id="6461570">Data</span><span class="op" id="6461574">[</span><span class="ident" id="6461575">off</span><span class="op" id="6461578">:</span><span class="ident" id="6461579">i</span><span class="op" id="6461580">]</span><span class="op" id="6461581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461588">}</span><br>
<span class="lineno"></span><span class="op" id="6461590">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6461593">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6461659">func</span>&nbsp;<span class="op" id="6461664">(</span><span class="ident" id="6461665">t</span>&nbsp;<span class="op" id="6461667">*</span><span class="ident" id="6461668">LineTable</span><span class="op" id="6461677">)</span>&nbsp;<span class="ident" id="6461679">step</span><span class="op" id="6461683">(</span><span class="ident" id="6461684">p</span>&nbsp;<span class="op" id="6461686">*</span><span class="op" id="6461687">[</span><span class="op" id="6461688">]</span><span class="builtintype" id="6461689">byte</span><span class="op" id="6461693">,</span>&nbsp;<span class="ident" id="6461695">pc</span>&nbsp;<span class="op" id="6461698">*</span><span class="ident" id="6461699">uint64</span><span class="op" id="6461705">,</span>&nbsp;<span class="ident" id="6461707">val</span>&nbsp;<span class="op" id="6461711">*</span><span class="builtintype" id="6461712">int32</span><span class="op" id="6461717">,</span>&nbsp;<span class="ident" id="6461719">first</span>&nbsp;<span class="builtintype" id="6461725">bool</span><span class="op" id="6461729">)</span>&nbsp;<span class="builtintype" id="6461731">bool</span>&nbsp;<span class="op" id="6461736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461739">uvdelta</span>&nbsp;<span class="op" id="6461747">:=</span>&nbsp;<span class="ident" id="6461750">t</span><span class="op" id="6461751">.</span><span class="ident" id="6461752">readvarint</span><span class="op" id="6461762">(</span><span class="ident" id="6461763">p</span><span class="op" id="6461764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461767">if</span>&nbsp;<span class="ident" id="6461770">uvdelta</span>&nbsp;<span class="op" id="6461778">==</span>&nbsp;<span class="num" id="6461781">0</span>&nbsp;<span class="op" id="6461783">&amp;&amp;</span>&nbsp;<span class="op" id="6461786">!</span><span class="ident" id="6461787">first</span>&nbsp;<span class="op" id="6461793">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461797">return</span>&nbsp;<span class="builtintype" id="6461804">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461814">if</span>&nbsp;<span class="ident" id="6461817">uvdelta</span><span class="op" id="6461824">&amp;</span><span class="num" id="6461825">1</span>&nbsp;<span class="op" id="6461827">!=</span>&nbsp;<span class="num" id="6461830">0</span>&nbsp;<span class="op" id="6461832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461836">uvdelta</span>&nbsp;<span class="op" id="6461844">=</span>&nbsp;<span class="op" id="6461846">^</span><span class="op" id="6461847">(</span><span class="ident" id="6461848">uvdelta</span>&nbsp;<span class="op" id="6461856">&gt;&gt;</span>&nbsp;<span class="num" id="6461859">1</span><span class="op" id="6461860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461863">}</span>&nbsp;<span class="keyword" id="6461865">else</span>&nbsp;<span class="op" id="6461870">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461874">uvdelta</span>&nbsp;<span class="op" id="6461882">&gt;&gt;=</span>&nbsp;<span class="num" id="6461886">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461892">vdelta</span>&nbsp;<span class="op" id="6461899">:=</span>&nbsp;<span class="builtintype" id="6461902">int32</span><span class="op" id="6461907">(</span><span class="ident" id="6461908">uvdelta</span><span class="op" id="6461915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461918">pcdelta</span>&nbsp;<span class="op" id="6461926">:=</span>&nbsp;<span class="ident" id="6461929">t</span><span class="op" id="6461930">.</span><span class="ident" id="6461931">readvarint</span><span class="op" id="6461941">(</span><span class="ident" id="6461942">p</span><span class="op" id="6461943">)</span>&nbsp;<span class="op" id="6461945">*</span>&nbsp;<span class="ident" id="6461947">t</span><span class="op" id="6461948">.</span><span class="ident" id="6461949">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461958">*</span><span class="ident" id="6461959">pc</span>&nbsp;<span class="op" id="6461962">+=</span>&nbsp;<span class="ident" id="6461965">uint64</span><span class="op" id="6461971">(</span><span class="ident" id="6461972">pcdelta</span><span class="op" id="6461979">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461982">*</span><span class="ident" id="6461983">val</span>&nbsp;<span class="op" id="6461987">+=</span>&nbsp;<span class="ident" id="6461990">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461998">return</span>&nbsp;<span class="builtintype" id="6462005">true</span><br>
<span class="lineno"></span><span class="op" id="6462010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6462013">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="6462073">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="6462134">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="6462195">func</span>&nbsp;<span class="op" id="6462200">(</span><span class="ident" id="6462201">t</span>&nbsp;<span class="op" id="6462203">*</span><span class="ident" id="6462204">LineTable</span><span class="op" id="6462213">)</span>&nbsp;<span class="ident" id="6462215">pcvalue</span><span class="op" id="6462222">(</span><span class="ident" id="6462223">off</span>&nbsp;<span class="builtintype" id="6462227">uint32</span><span class="op" id="6462233">,</span>&nbsp;<span class="ident" id="6462235">entry</span><span class="op" id="6462240">,</span>&nbsp;<span class="ident" id="6462242">targetpc</span>&nbsp;<span class="ident" id="6462251">uint64</span><span class="op" id="6462257">)</span>&nbsp;<span class="builtintype" id="6462259">int32</span>&nbsp;<span class="op" id="6462265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462268">if</span>&nbsp;<span class="ident" id="6462271">off</span>&nbsp;<span class="op" id="6462275">==</span>&nbsp;<span class="num" id="6462278">0</span>&nbsp;<span class="op" id="6462280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462284">return</span>&nbsp;<span class="op" id="6462291">-</span><span class="num" id="6462292">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462298">p</span>&nbsp;<span class="op" id="6462300">:=</span>&nbsp;<span class="ident" id="6462303">t</span><span class="op" id="6462304">.</span><span class="ident" id="6462305">Data</span><span class="op" id="6462309">[</span><span class="ident" id="6462310">off</span><span class="op" id="6462313">:</span><span class="op" id="6462314">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462318">val</span>&nbsp;<span class="op" id="6462322">:=</span>&nbsp;<span class="builtintype" id="6462325">int32</span><span class="op" id="6462330">(</span><span class="op" id="6462331">-</span><span class="num" id="6462332">1</span><span class="op" id="6462333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462336">pc</span>&nbsp;<span class="op" id="6462339">:=</span>&nbsp;<span class="ident" id="6462342">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462349">for</span>&nbsp;<span class="ident" id="6462353">t</span><span class="op" id="6462354">.</span><span class="ident" id="6462355">step</span><span class="op" id="6462359">(</span><span class="op" id="6462360">&amp;</span><span class="ident" id="6462361">p</span><span class="op" id="6462362">,</span>&nbsp;<span class="op" id="6462364">&amp;</span><span class="ident" id="6462365">pc</span><span class="op" id="6462367">,</span>&nbsp;<span class="op" id="6462369">&amp;</span><span class="ident" id="6462370">val</span><span class="op" id="6462373">,</span>&nbsp;<span class="ident" id="6462375">pc</span>&nbsp;<span class="op" id="6462378">==</span>&nbsp;<span class="ident" id="6462381">entry</span><span class="op" id="6462386">)</span>&nbsp;<span class="op" id="6462388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462392">if</span>&nbsp;<span class="ident" id="6462395">targetpc</span>&nbsp;<span class="op" id="6462404">&lt;</span>&nbsp;<span class="ident" id="6462406">pc</span>&nbsp;<span class="op" id="6462409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462414">return</span>&nbsp;<span class="ident" id="6462421">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462430">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462433">return</span>&nbsp;<span class="op" id="6462440">-</span><span class="num" id="6462441">1</span><br>
<span class="lineno"></span><span class="op" id="6462443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6462446">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6462509">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="6462565">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="6462634">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6462705">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6462780">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="6462857">func</span>&nbsp;<span class="op" id="6462862">(</span><span class="ident" id="6462863">t</span>&nbsp;<span class="op" id="6462865">*</span><span class="ident" id="6462866">LineTable</span><span class="op" id="6462875">)</span>&nbsp;<span class="ident" id="6462877">findFileLine</span><span class="op" id="6462889">(</span><span class="ident" id="6462890">entry</span>&nbsp;<span class="ident" id="6462896">uint64</span><span class="op" id="6462902">,</span>&nbsp;<span class="ident" id="6462904">filetab</span><span class="op" id="6462911">,</span>&nbsp;<span class="ident" id="6462913">linetab</span>&nbsp;<span class="builtintype" id="6462921">uint32</span><span class="op" id="6462927">,</span>&nbsp;<span class="ident" id="6462929">filenum</span><span class="op" id="6462936">,</span>&nbsp;<span class="ident" id="6462938">line</span>&nbsp;<span class="builtintype" id="6462943">int32</span><span class="op" id="6462948">)</span>&nbsp;<span class="ident" id="6462950">uint64</span>&nbsp;<span class="op" id="6462957">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462960">if</span>&nbsp;<span class="ident" id="6462963">filetab</span>&nbsp;<span class="op" id="6462971">==</span>&nbsp;<span class="num" id="6462974">0</span>&nbsp;<span class="op" id="6462976">||</span>&nbsp;<span class="ident" id="6462979">linetab</span>&nbsp;<span class="op" id="6462987">==</span>&nbsp;<span class="num" id="6462990">0</span>&nbsp;<span class="op" id="6462992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462996">return</span>&nbsp;<span class="num" id="6463003">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463010">fp</span>&nbsp;<span class="op" id="6463013">:=</span>&nbsp;<span class="ident" id="6463016">t</span><span class="op" id="6463017">.</span><span class="ident" id="6463018">Data</span><span class="op" id="6463022">[</span><span class="ident" id="6463023">filetab</span><span class="op" id="6463030">:</span><span class="op" id="6463031">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463034">fl</span>&nbsp;<span class="op" id="6463037">:=</span>&nbsp;<span class="ident" id="6463040">t</span><span class="op" id="6463041">.</span><span class="ident" id="6463042">Data</span><span class="op" id="6463046">[</span><span class="ident" id="6463047">linetab</span><span class="op" id="6463054">:</span><span class="op" id="6463055">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463058">fileVal</span>&nbsp;<span class="op" id="6463066">:=</span>&nbsp;<span class="builtintype" id="6463069">int32</span><span class="op" id="6463074">(</span><span class="op" id="6463075">-</span><span class="num" id="6463076">1</span><span class="op" id="6463077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463080">filePC</span>&nbsp;<span class="op" id="6463087">:=</span>&nbsp;<span class="ident" id="6463090">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463097">lineVal</span>&nbsp;<span class="op" id="6463105">:=</span>&nbsp;<span class="builtintype" id="6463108">int32</span><span class="op" id="6463113">(</span><span class="op" id="6463114">-</span><span class="num" id="6463115">1</span><span class="op" id="6463116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463119">linePC</span>&nbsp;<span class="op" id="6463126">:=</span>&nbsp;<span class="ident" id="6463129">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463136">fileStartPC</span>&nbsp;<span class="op" id="6463148">:=</span>&nbsp;<span class="ident" id="6463151">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463159">for</span>&nbsp;<span class="ident" id="6463163">t</span><span class="op" id="6463164">.</span><span class="ident" id="6463165">step</span><span class="op" id="6463169">(</span><span class="op" id="6463170">&amp;</span><span class="ident" id="6463171">fp</span><span class="op" id="6463173">,</span>&nbsp;<span class="op" id="6463175">&amp;</span><span class="ident" id="6463176">filePC</span><span class="op" id="6463182">,</span>&nbsp;<span class="op" id="6463184">&amp;</span><span class="ident" id="6463185">fileVal</span><span class="op" id="6463192">,</span>&nbsp;<span class="ident" id="6463194">filePC</span>&nbsp;<span class="op" id="6463201">==</span>&nbsp;<span class="ident" id="6463204">entry</span><span class="op" id="6463209">)</span>&nbsp;<span class="op" id="6463211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463215">if</span>&nbsp;<span class="ident" id="6463218">fileVal</span>&nbsp;<span class="op" id="6463226">==</span>&nbsp;<span class="ident" id="6463229">filenum</span>&nbsp;<span class="op" id="6463237">&amp;&amp;</span>&nbsp;<span class="ident" id="6463240">fileStartPC</span>&nbsp;<span class="op" id="6463252">&lt;</span>&nbsp;<span class="ident" id="6463254">filePC</span>&nbsp;<span class="op" id="6463261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463266">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463323">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463382">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463440">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463472">lineStartPC</span>&nbsp;<span class="op" id="6463484">:=</span>&nbsp;<span class="ident" id="6463487">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463497">for</span>&nbsp;<span class="ident" id="6463501">linePC</span>&nbsp;<span class="op" id="6463508">&lt;</span>&nbsp;<span class="ident" id="6463510">filePC</span>&nbsp;<span class="op" id="6463517">&amp;&amp;</span>&nbsp;<span class="ident" id="6463520">t</span><span class="op" id="6463521">.</span><span class="ident" id="6463522">step</span><span class="op" id="6463526">(</span><span class="op" id="6463527">&amp;</span><span class="ident" id="6463528">fl</span><span class="op" id="6463530">,</span>&nbsp;<span class="op" id="6463532">&amp;</span><span class="ident" id="6463533">linePC</span><span class="op" id="6463539">,</span>&nbsp;<span class="op" id="6463541">&amp;</span><span class="ident" id="6463542">lineVal</span><span class="op" id="6463549">,</span>&nbsp;<span class="ident" id="6463551">linePC</span>&nbsp;<span class="op" id="6463558">==</span>&nbsp;<span class="ident" id="6463561">entry</span><span class="op" id="6463566">)</span>&nbsp;<span class="op" id="6463568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463574">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463642">if</span>&nbsp;<span class="ident" id="6463645">lineVal</span>&nbsp;<span class="op" id="6463653">==</span>&nbsp;<span class="ident" id="6463656">line</span>&nbsp;<span class="op" id="6463661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463668">if</span>&nbsp;<span class="ident" id="6463671">fileStartPC</span>&nbsp;<span class="op" id="6463683">&lt;=</span>&nbsp;<span class="ident" id="6463686">lineStartPC</span>&nbsp;<span class="op" id="6463698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463706">return</span>&nbsp;<span class="ident" id="6463713">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463737">if</span>&nbsp;<span class="ident" id="6463740">fileStartPC</span>&nbsp;<span class="op" id="6463752">&lt;</span>&nbsp;<span class="ident" id="6463754">linePC</span>&nbsp;<span class="op" id="6463761">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463769">return</span>&nbsp;<span class="ident" id="6463776">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463805">lineStartPC</span>&nbsp;<span class="op" id="6463817">=</span>&nbsp;<span class="ident" id="6463819">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463829">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463837">fileStartPC</span>&nbsp;<span class="op" id="6463849">=</span>&nbsp;<span class="ident" id="6463851">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463862">return</span>&nbsp;<span class="num" id="6463869">0</span><br>
<span class="lineno"></span><span class="op" id="6463871">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="6463874">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6463953">func</span>&nbsp;<span class="op" id="6463958">(</span><span class="ident" id="6463959">t</span>&nbsp;<span class="op" id="6463961">*</span><span class="ident" id="6463962">LineTable</span><span class="op" id="6463971">)</span>&nbsp;<span class="ident" id="6463973">go12PCToLine</span><span class="op" id="6463985">(</span><span class="ident" id="6463986">pc</span>&nbsp;<span class="ident" id="6463989">uint64</span><span class="op" id="6463995">)</span>&nbsp;<span class="op" id="6463997">(</span><span class="ident" id="6463998">line</span>&nbsp;<span class="builtintype" id="6464003">int</span><span class="op" id="6464006">)</span>&nbsp;<span class="op" id="6464008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464011">defer</span>&nbsp;<span class="keyword" id="6464017">func</span><span class="op" id="6464021">(</span><span class="op" id="6464022">)</span>&nbsp;<span class="op" id="6464024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464028">if</span>&nbsp;<span class="builtinfunc" id="6464031">recover</span><span class="op" id="6464038">(</span><span class="op" id="6464039">)</span>&nbsp;<span class="op" id="6464041">!=</span>&nbsp;<span class="ident" id="6464044">nil</span>&nbsp;<span class="op" id="6464048">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464053">line</span>&nbsp;<span class="op" id="6464058">=</span>&nbsp;<span class="op" id="6464060">-</span><span class="num" id="6464061">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464068">}</span><span class="op" id="6464069">(</span><span class="op" id="6464070">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464074">f</span>&nbsp;<span class="op" id="6464076">:=</span>&nbsp;<span class="ident" id="6464079">t</span><span class="op" id="6464080">.</span><span class="ident" id="6464081">findFunc</span><span class="op" id="6464089">(</span><span class="ident" id="6464090">pc</span><span class="op" id="6464092">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464095">if</span>&nbsp;<span class="ident" id="6464098">f</span>&nbsp;<span class="op" id="6464100">==</span>&nbsp;<span class="ident" id="6464103">nil</span>&nbsp;<span class="op" id="6464107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464111">return</span>&nbsp;<span class="op" id="6464118">-</span><span class="num" id="6464119">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464125">entry</span>&nbsp;<span class="op" id="6464131">:=</span>&nbsp;<span class="ident" id="6464134">t</span><span class="op" id="6464135">.</span><span class="builtintype" id="6464136">uintptr</span><span class="op" id="6464143">(</span><span class="ident" id="6464144">f</span><span class="op" id="6464145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464148">linetab</span>&nbsp;<span class="op" id="6464156">:=</span>&nbsp;<span class="ident" id="6464159">t</span><span class="op" id="6464160">.</span><span class="ident" id="6464161">binary</span><span class="op" id="6464167">.</span><span class="ident" id="6464168">Uint32</span><span class="op" id="6464174">(</span><span class="ident" id="6464175">f</span><span class="op" id="6464176">[</span><span class="ident" id="6464177">t</span><span class="op" id="6464178">.</span><span class="ident" id="6464179">ptrsize</span><span class="op" id="6464186">+</span><span class="num" id="6464187">5</span><span class="op" id="6464188">*</span><span class="num" id="6464189">4</span><span class="op" id="6464190">:</span><span class="op" id="6464191">]</span><span class="op" id="6464192">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464195">return</span>&nbsp;<span class="builtintype" id="6464202">int</span><span class="op" id="6464205">(</span><span class="ident" id="6464206">t</span><span class="op" id="6464207">.</span><span class="ident" id="6464208">pcvalue</span><span class="op" id="6464215">(</span><span class="ident" id="6464216">linetab</span><span class="op" id="6464223">,</span>&nbsp;<span class="ident" id="6464225">entry</span><span class="op" id="6464230">,</span>&nbsp;<span class="ident" id="6464232">pc</span><span class="op" id="6464234">)</span><span class="op" id="6464235">)</span><br>
<span class="lineno"></span><span class="op" id="6464237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6464240">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6464317">func</span>&nbsp;<span class="op" id="6464322">(</span><span class="ident" id="6464323">t</span>&nbsp;<span class="op" id="6464325">*</span><span class="ident" id="6464326">LineTable</span><span class="op" id="6464335">)</span>&nbsp;<span class="ident" id="6464337">go12PCToFile</span><span class="op" id="6464349">(</span><span class="ident" id="6464350">pc</span>&nbsp;<span class="ident" id="6464353">uint64</span><span class="op" id="6464359">)</span>&nbsp;<span class="op" id="6464361">(</span><span class="ident" id="6464362">file</span>&nbsp;<span class="builtintype" id="6464367">string</span><span class="op" id="6464373">)</span>&nbsp;<span class="op" id="6464375">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464378">defer</span>&nbsp;<span class="keyword" id="6464384">func</span><span class="op" id="6464388">(</span><span class="op" id="6464389">)</span>&nbsp;<span class="op" id="6464391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464395">if</span>&nbsp;<span class="builtinfunc" id="6464398">recover</span><span class="op" id="6464405">(</span><span class="op" id="6464406">)</span>&nbsp;<span class="op" id="6464408">!=</span>&nbsp;<span class="ident" id="6464411">nil</span>&nbsp;<span class="op" id="6464415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464420">file</span>&nbsp;<span class="op" id="6464425">=</span>&nbsp;<span class="string" id="6464427">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464435">}</span><span class="op" id="6464436">(</span><span class="op" id="6464437">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464441">f</span>&nbsp;<span class="op" id="6464443">:=</span>&nbsp;<span class="ident" id="6464446">t</span><span class="op" id="6464447">.</span><span class="ident" id="6464448">findFunc</span><span class="op" id="6464456">(</span><span class="ident" id="6464457">pc</span><span class="op" id="6464459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464462">if</span>&nbsp;<span class="ident" id="6464465">f</span>&nbsp;<span class="op" id="6464467">==</span>&nbsp;<span class="ident" id="6464470">nil</span>&nbsp;<span class="op" id="6464474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464478">return</span>&nbsp;<span class="string" id="6464485">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464489">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464492">entry</span>&nbsp;<span class="op" id="6464498">:=</span>&nbsp;<span class="ident" id="6464501">t</span><span class="op" id="6464502">.</span><span class="builtintype" id="6464503">uintptr</span><span class="op" id="6464510">(</span><span class="ident" id="6464511">f</span><span class="op" id="6464512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464515">filetab</span>&nbsp;<span class="op" id="6464523">:=</span>&nbsp;<span class="ident" id="6464526">t</span><span class="op" id="6464527">.</span><span class="ident" id="6464528">binary</span><span class="op" id="6464534">.</span><span class="ident" id="6464535">Uint32</span><span class="op" id="6464541">(</span><span class="ident" id="6464542">f</span><span class="op" id="6464543">[</span><span class="ident" id="6464544">t</span><span class="op" id="6464545">.</span><span class="ident" id="6464546">ptrsize</span><span class="op" id="6464553">+</span><span class="num" id="6464554">4</span><span class="op" id="6464555">*</span><span class="num" id="6464556">4</span><span class="op" id="6464557">:</span><span class="op" id="6464558">]</span><span class="op" id="6464559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464562">fno</span>&nbsp;<span class="op" id="6464566">:=</span>&nbsp;<span class="ident" id="6464569">t</span><span class="op" id="6464570">.</span><span class="ident" id="6464571">pcvalue</span><span class="op" id="6464578">(</span><span class="ident" id="6464579">filetab</span><span class="op" id="6464586">,</span>&nbsp;<span class="ident" id="6464588">entry</span><span class="op" id="6464593">,</span>&nbsp;<span class="ident" id="6464595">pc</span><span class="op" id="6464597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464600">if</span>&nbsp;<span class="ident" id="6464603">fno</span>&nbsp;<span class="op" id="6464607">&lt;=</span>&nbsp;<span class="num" id="6464610">0</span>&nbsp;<span class="op" id="6464612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464616">return</span>&nbsp;<span class="string" id="6464623">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464630">return</span>&nbsp;<span class="ident" id="6464637">t</span><span class="op" id="6464638">.</span><span class="builtintype" id="6464639">string</span><span class="op" id="6464645">(</span><span class="ident" id="6464646">t</span><span class="op" id="6464647">.</span><span class="ident" id="6464648">binary</span><span class="op" id="6464654">.</span><span class="ident" id="6464655">Uint32</span><span class="op" id="6464661">(</span><span class="ident" id="6464662">t</span><span class="op" id="6464663">.</span><span class="ident" id="6464664">filetab</span><span class="op" id="6464671">[</span><span class="num" id="6464672">4</span><span class="op" id="6464673">*</span><span class="ident" id="6464674">fno</span><span class="op" id="6464677">:</span><span class="op" id="6464678">]</span><span class="op" id="6464679">)</span><span class="op" id="6464680">)</span><br>
<span class="lineno"></span><span class="op" id="6464682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6464685">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="6464774">func</span>&nbsp;<span class="op" id="6464779">(</span><span class="ident" id="6464780">t</span>&nbsp;<span class="op" id="6464782">*</span><span class="ident" id="6464783">LineTable</span><span class="op" id="6464792">)</span>&nbsp;<span class="ident" id="6464794">go12LineToPC</span><span class="op" id="6464806">(</span><span class="ident" id="6464807">file</span>&nbsp;<span class="builtintype" id="6464812">string</span><span class="op" id="6464818">,</span>&nbsp;<span class="ident" id="6464820">line</span>&nbsp;<span class="builtintype" id="6464825">int</span><span class="op" id="6464828">)</span>&nbsp;<span class="op" id="6464830">(</span><span class="ident" id="6464831">pc</span>&nbsp;<span class="ident" id="6464834">uint64</span><span class="op" id="6464840">)</span>&nbsp;<span class="op" id="6464842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464845">defer</span>&nbsp;<span class="keyword" id="6464851">func</span><span class="op" id="6464855">(</span><span class="op" id="6464856">)</span>&nbsp;<span class="op" id="6464858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464862">if</span>&nbsp;<span class="builtinfunc" id="6464865">recover</span><span class="op" id="6464872">(</span><span class="op" id="6464873">)</span>&nbsp;<span class="op" id="6464875">!=</span>&nbsp;<span class="ident" id="6464878">nil</span>&nbsp;<span class="op" id="6464882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464887">pc</span>&nbsp;<span class="op" id="6464890">=</span>&nbsp;<span class="num" id="6464892">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464896">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464899">}</span><span class="op" id="6464900">(</span><span class="op" id="6464901">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464905">t</span><span class="op" id="6464906">.</span><span class="ident" id="6464907">initFileMap</span><span class="op" id="6464918">(</span><span class="op" id="6464919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464922">filenum</span>&nbsp;<span class="op" id="6464930">:=</span>&nbsp;<span class="ident" id="6464933">t</span><span class="op" id="6464934">.</span><span class="ident" id="6464935">fileMap</span><span class="op" id="6464942">[</span><span class="ident" id="6464943">file</span><span class="op" id="6464947">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464950">if</span>&nbsp;<span class="ident" id="6464953">filenum</span>&nbsp;<span class="op" id="6464961">==</span>&nbsp;<span class="num" id="6464964">0</span>&nbsp;<span class="op" id="6464966">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464970">return</span>&nbsp;<span class="num" id="6464977">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6464984">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6465008">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6465085">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465158">for</span>&nbsp;<span class="ident" id="6465162">i</span>&nbsp;<span class="op" id="6465164">:=</span>&nbsp;<span class="builtintype" id="6465167">uint32</span><span class="op" id="6465173">(</span><span class="num" id="6465174">0</span><span class="op" id="6465175">)</span><span class="op" id="6465176">;</span>&nbsp;<span class="ident" id="6465178">i</span>&nbsp;<span class="op" id="6465180">&lt;</span>&nbsp;<span class="ident" id="6465182">t</span><span class="op" id="6465183">.</span><span class="ident" id="6465184">nfunctab</span><span class="op" id="6465192">;</span>&nbsp;<span class="ident" id="6465194">i</span><span class="op" id="6465195">++</span>&nbsp;<span class="op" id="6465198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465202">f</span>&nbsp;<span class="op" id="6465204">:=</span>&nbsp;<span class="ident" id="6465207">t</span><span class="op" id="6465208">.</span><span class="ident" id="6465209">Data</span><span class="op" id="6465213">[</span><span class="ident" id="6465214">t</span><span class="op" id="6465215">.</span><span class="builtintype" id="6465216">uintptr</span><span class="op" id="6465223">(</span><span class="ident" id="6465224">t</span><span class="op" id="6465225">.</span><span class="ident" id="6465226">functab</span><span class="op" id="6465233">[</span><span class="num" id="6465234">2</span><span class="op" id="6465235">*</span><span class="ident" id="6465236">t</span><span class="op" id="6465237">.</span><span class="ident" id="6465238">ptrsize</span><span class="op" id="6465245">*</span><span class="ident" id="6465246">i</span><span class="op" id="6465247">+</span><span class="ident" id="6465248">t</span><span class="op" id="6465249">.</span><span class="ident" id="6465250">ptrsize</span><span class="op" id="6465257">:</span><span class="op" id="6465258">]</span><span class="op" id="6465259">)</span><span class="op" id="6465260">:</span><span class="op" id="6465261">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465265">entry</span>&nbsp;<span class="op" id="6465271">:=</span>&nbsp;<span class="ident" id="6465274">t</span><span class="op" id="6465275">.</span><span class="builtintype" id="6465276">uintptr</span><span class="op" id="6465283">(</span><span class="ident" id="6465284">f</span><span class="op" id="6465285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465289">filetab</span>&nbsp;<span class="op" id="6465297">:=</span>&nbsp;<span class="ident" id="6465300">t</span><span class="op" id="6465301">.</span><span class="ident" id="6465302">binary</span><span class="op" id="6465308">.</span><span class="ident" id="6465309">Uint32</span><span class="op" id="6465315">(</span><span class="ident" id="6465316">f</span><span class="op" id="6465317">[</span><span class="ident" id="6465318">t</span><span class="op" id="6465319">.</span><span class="ident" id="6465320">ptrsize</span><span class="op" id="6465327">+</span><span class="num" id="6465328">4</span><span class="op" id="6465329">*</span><span class="num" id="6465330">4</span><span class="op" id="6465331">:</span><span class="op" id="6465332">]</span><span class="op" id="6465333">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465337">linetab</span>&nbsp;<span class="op" id="6465345">:=</span>&nbsp;<span class="ident" id="6465348">t</span><span class="op" id="6465349">.</span><span class="ident" id="6465350">binary</span><span class="op" id="6465356">.</span><span class="ident" id="6465357">Uint32</span><span class="op" id="6465363">(</span><span class="ident" id="6465364">f</span><span class="op" id="6465365">[</span><span class="ident" id="6465366">t</span><span class="op" id="6465367">.</span><span class="ident" id="6465368">ptrsize</span><span class="op" id="6465375">+</span><span class="num" id="6465376">5</span><span class="op" id="6465377">*</span><span class="num" id="6465378">4</span><span class="op" id="6465379">:</span><span class="op" id="6465380">]</span><span class="op" id="6465381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465385">pc</span>&nbsp;<span class="op" id="6465388">:=</span>&nbsp;<span class="ident" id="6465391">t</span><span class="op" id="6465392">.</span><span class="ident" id="6465393">findFileLine</span><span class="op" id="6465405">(</span><span class="ident" id="6465406">entry</span><span class="op" id="6465411">,</span>&nbsp;<span class="ident" id="6465413">filetab</span><span class="op" id="6465420">,</span>&nbsp;<span class="ident" id="6465422">linetab</span><span class="op" id="6465429">,</span>&nbsp;<span class="builtintype" id="6465431">int32</span><span class="op" id="6465436">(</span><span class="ident" id="6465437">filenum</span><span class="op" id="6465444">)</span><span class="op" id="6465445">,</span>&nbsp;<span class="builtintype" id="6465447">int32</span><span class="op" id="6465452">(</span><span class="ident" id="6465453">line</span><span class="op" id="6465457">)</span><span class="op" id="6465458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465462">if</span>&nbsp;<span class="ident" id="6465465">pc</span>&nbsp;<span class="op" id="6465468">!=</span>&nbsp;<span class="num" id="6465471">0</span>&nbsp;<span class="op" id="6465473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465478">return</span>&nbsp;<span class="ident" id="6465485">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465490">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465496">return</span>&nbsp;<span class="num" id="6465503">0</span><br>
<span class="lineno"></span><span class="op" id="6465505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6465508">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="6465574">func</span>&nbsp;<span class="op" id="6465579">(</span><span class="ident" id="6465580">t</span>&nbsp;<span class="op" id="6465582">*</span><span class="ident" id="6465583">LineTable</span><span class="op" id="6465592">)</span>&nbsp;<span class="ident" id="6465594">initFileMap</span><span class="op" id="6465605">(</span><span class="op" id="6465606">)</span>&nbsp;<span class="op" id="6465608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465611">t</span><span class="op" id="6465612">.</span><span class="ident" id="6465613">mu</span><span class="op" id="6465615">.</span><span class="ident" id="6465616">Lock</span><span class="op" id="6465620">(</span><span class="op" id="6465621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465624">defer</span>&nbsp;<span class="ident" id="6465630">t</span><span class="op" id="6465631">.</span><span class="ident" id="6465632">mu</span><span class="op" id="6465634">.</span><span class="ident" id="6465635">Unlock</span><span class="op" id="6465641">(</span><span class="op" id="6465642">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465646">if</span>&nbsp;<span class="ident" id="6465649">t</span><span class="op" id="6465650">.</span><span class="ident" id="6465651">fileMap</span>&nbsp;<span class="op" id="6465659">!=</span>&nbsp;<span class="ident" id="6465662">nil</span>&nbsp;<span class="op" id="6465666">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465670">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465681">m</span>&nbsp;<span class="op" id="6465683">:=</span>&nbsp;<span class="builtinfunc" id="6465686">make</span><span class="op" id="6465690">(</span><span class="keyword" id="6465691">map</span><span class="op" id="6465694">[</span><span class="builtintype" id="6465695">string</span><span class="op" id="6465701">]</span><span class="builtintype" id="6465702">uint32</span><span class="op" id="6465708">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465712">for</span>&nbsp;<span class="ident" id="6465716">i</span>&nbsp;<span class="op" id="6465718">:=</span>&nbsp;<span class="builtintype" id="6465721">uint32</span><span class="op" id="6465727">(</span><span class="num" id="6465728">1</span><span class="op" id="6465729">)</span><span class="op" id="6465730">;</span>&nbsp;<span class="ident" id="6465732">i</span>&nbsp;<span class="op" id="6465734">&lt;</span>&nbsp;<span class="ident" id="6465736">t</span><span class="op" id="6465737">.</span><span class="ident" id="6465738">nfiletab</span><span class="op" id="6465746">;</span>&nbsp;<span class="ident" id="6465748">i</span><span class="op" id="6465749">++</span>&nbsp;<span class="op" id="6465752">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465756">s</span>&nbsp;<span class="op" id="6465758">:=</span>&nbsp;<span class="ident" id="6465761">t</span><span class="op" id="6465762">.</span><span class="builtintype" id="6465763">string</span><span class="op" id="6465769">(</span><span class="ident" id="6465770">t</span><span class="op" id="6465771">.</span><span class="ident" id="6465772">binary</span><span class="op" id="6465778">.</span><span class="ident" id="6465779">Uint32</span><span class="op" id="6465785">(</span><span class="ident" id="6465786">t</span><span class="op" id="6465787">.</span><span class="ident" id="6465788">filetab</span><span class="op" id="6465795">[</span><span class="num" id="6465796">4</span><span class="op" id="6465797">*</span><span class="ident" id="6465798">i</span><span class="op" id="6465799">:</span><span class="op" id="6465800">]</span><span class="op" id="6465801">)</span><span class="op" id="6465802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465806">m</span><span class="op" id="6465807">[</span><span class="ident" id="6465808">s</span><span class="op" id="6465809">]</span>&nbsp;<span class="op" id="6465811">=</span>&nbsp;<span class="ident" id="6465813">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465819">t</span><span class="op" id="6465820">.</span><span class="ident" id="6465821">fileMap</span>&nbsp;<span class="op" id="6465829">=</span>&nbsp;<span class="ident" id="6465831">m</span><br>
<span class="lineno"></span><span class="op" id="6465833">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="6465836">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="6465908">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="6465985">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="6466050">func</span>&nbsp;<span class="op" id="6466055">(</span><span class="ident" id="6466056">t</span>&nbsp;<span class="op" id="6466058">*</span><span class="ident" id="6466059">LineTable</span><span class="op" id="6466068">)</span>&nbsp;<span class="ident" id="6466070">go12MapFiles</span><span class="op" id="6466082">(</span><span class="ident" id="6466083">m</span>&nbsp;<span class="keyword" id="6466085">map</span><span class="op" id="6466088">[</span><span class="builtintype" id="6466089">string</span><span class="op" id="6466095">]</span><span class="op" id="6466096">*</span><span class="ident" id="6466097">Obj</span><span class="op" id="6466100">,</span>&nbsp;<span class="ident" id="6466102">obj</span>&nbsp;<span class="op" id="6466106">*</span><span class="ident" id="6466107">Obj</span><span class="op" id="6466110">)</span>&nbsp;<span class="op" id="6466112">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466115">defer</span>&nbsp;<span class="keyword" id="6466121">func</span><span class="op" id="6466125">(</span><span class="op" id="6466126">)</span>&nbsp;<span class="op" id="6466128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6466132">recover</span><span class="op" id="6466139">(</span><span class="op" id="6466140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466143">}</span><span class="op" id="6466144">(</span><span class="op" id="6466145">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466149">t</span><span class="op" id="6466150">.</span><span class="ident" id="6466151">initFileMap</span><span class="op" id="6466162">(</span><span class="op" id="6466163">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466166">for</span>&nbsp;<span class="ident" id="6466170">file</span>&nbsp;<span class="op" id="6466175">:=</span>&nbsp;<span class="keyword" id="6466178">range</span>&nbsp;<span class="ident" id="6466184">t</span><span class="op" id="6466185">.</span><span class="ident" id="6466186">fileMap</span>&nbsp;<span class="op" id="6466194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466198">m</span><span class="op" id="6466199">[</span><span class="ident" id="6466200">file</span><span class="op" id="6466204">]</span>&nbsp;<span class="op" id="6466206">=</span>&nbsp;<span class="ident" id="6466208">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466213">}</span><br>
<span class="lineno"></span><span class="op" id="6466215">}</span>
</div>
</body>
</html>
