<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2449138">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2449194">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2449248">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2449299">//&nbsp;General&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2449334">package</span>&nbsp;<span class="ident" id="2449342">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2449346">import</span>&nbsp;<span class="string" id="2449353">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2449364">//&nbsp;Expand&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;based&nbsp;on&nbsp;the&nbsp;mapping&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2449443">//&nbsp;For&nbsp;example,&nbsp;os.ExpandEnv(s)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;os.Expand(s,&nbsp;os.Getenv).</span><br>
<span class="lineno"></span><span class="keyword" id="2449517">func</span>&nbsp;<span class="ident" id="2449522">Expand</span><span class="op" id="2449528">(</span><span class="ident" id="2449529">s</span>&nbsp;<span class="builtintype" id="2449531">string</span><span class="op" id="2449537">,</span>&nbsp;<span class="ident" id="2449539">mapping</span>&nbsp;<span class="keyword" id="2449547">func</span><span class="op" id="2449551">(</span><span class="builtintype" id="2449552">string</span><span class="op" id="2449558">)</span>&nbsp;<span class="builtintype" id="2449560">string</span><span class="op" id="2449566">)</span>&nbsp;<span class="builtintype" id="2449568">string</span>&nbsp;<span class="op" id="2449575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2449578">buf</span>&nbsp;<span class="op" id="2449582">:=</span>&nbsp;<span class="builtinfunc" id="2449585">make</span><span class="op" id="2449589">(</span><span class="op" id="2449590">[</span><span class="op" id="2449591">]</span><span class="builtintype" id="2449592">byte</span><span class="op" id="2449596">,</span>&nbsp;<span class="num" id="2449598">0</span><span class="op" id="2449599">,</span>&nbsp;<span class="num" id="2449601">2</span><span class="op" id="2449602">*</span><span class="builtinfunc" id="2449603">len</span><span class="op" id="2449606">(</span><span class="ident" id="2449607">s</span><span class="op" id="2449608">)</span><span class="op" id="2449609">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2449612">//&nbsp;${}&nbsp;is&nbsp;all&nbsp;ASCII,&nbsp;so&nbsp;bytes&nbsp;are&nbsp;fine&nbsp;for&nbsp;this&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2449672">i</span>&nbsp;<span class="op" id="2449674">:=</span>&nbsp;<span class="num" id="2449677">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2449680">for</span>&nbsp;<span class="ident" id="2449684">j</span>&nbsp;<span class="op" id="2449686">:=</span>&nbsp;<span class="num" id="2449689">0</span><span class="op" id="2449690">;</span>&nbsp;<span class="ident" id="2449692">j</span>&nbsp;<span class="op" id="2449694">&lt;</span>&nbsp;<span class="builtinfunc" id="2449696">len</span><span class="op" id="2449699">(</span><span class="ident" id="2449700">s</span><span class="op" id="2449701">)</span><span class="op" id="2449702">;</span>&nbsp;<span class="ident" id="2449704">j</span><span class="op" id="2449705">++</span>&nbsp;<span class="op" id="2449708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2449712">if</span>&nbsp;<span class="ident" id="2449715">s</span><span class="op" id="2449716">[</span><span class="ident" id="2449717">j</span><span class="op" id="2449718">]</span>&nbsp;<span class="op" id="2449720">==</span>&nbsp;<span class="string" id="2449723">&#39;$&#39;</span>&nbsp;<span class="op" id="2449727">&amp;&amp;</span>&nbsp;<span class="ident" id="2449730">j</span><span class="op" id="2449731">+</span><span class="num" id="2449732">1</span>&nbsp;<span class="op" id="2449734">&lt;</span>&nbsp;<span class="builtinfunc" id="2449736">len</span><span class="op" id="2449739">(</span><span class="ident" id="2449740">s</span><span class="op" id="2449741">)</span>&nbsp;<span class="op" id="2449743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2449748">buf</span>&nbsp;<span class="op" id="2449752">=</span>&nbsp;<span class="builtinfunc" id="2449754">append</span><span class="op" id="2449760">(</span><span class="ident" id="2449761">buf</span><span class="op" id="2449764">,</span>&nbsp;<span class="ident" id="2449766">s</span><span class="op" id="2449767">[</span><span class="ident" id="2449768">i</span><span class="op" id="2449769">:</span><span class="ident" id="2449770">j</span><span class="op" id="2449771">]</span><span class="op" id="2449772">...</span><span class="op" id="2449775">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2449780">name</span><span class="op" id="2449784">,</span>&nbsp;<span class="ident" id="2449786">w</span>&nbsp;<span class="op" id="2449788">:=</span>&nbsp;<span class="ident" id="2449791">getShellName</span><span class="op" id="2449803">(</span><span class="ident" id="2449804">s</span><span class="op" id="2449805">[</span><span class="ident" id="2449806">j</span><span class="op" id="2449807">+</span><span class="num" id="2449808">1</span><span class="op" id="2449809">:</span><span class="op" id="2449810">]</span><span class="op" id="2449811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2449816">buf</span>&nbsp;<span class="op" id="2449820">=</span>&nbsp;<span class="builtinfunc" id="2449822">append</span><span class="op" id="2449828">(</span><span class="ident" id="2449829">buf</span><span class="op" id="2449832">,</span>&nbsp;<span class="ident" id="2449834">mapping</span><span class="op" id="2449841">(</span><span class="ident" id="2449842">name</span><span class="op" id="2449846">)</span><span class="op" id="2449847">...</span><span class="op" id="2449850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2449855">j</span>&nbsp;<span class="op" id="2449857">+=</span>&nbsp;<span class="ident" id="2449860">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2449865">i</span>&nbsp;<span class="op" id="2449867">=</span>&nbsp;<span class="ident" id="2449869">j</span>&nbsp;<span class="op" id="2449871">+</span>&nbsp;<span class="num" id="2449873">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2449877">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2449880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2449883">return</span>&nbsp;<span class="builtintype" id="2449890">string</span><span class="op" id="2449896">(</span><span class="ident" id="2449897">buf</span><span class="op" id="2449900">)</span>&nbsp;<span class="op" id="2449902">+</span>&nbsp;<span class="ident" id="2449904">s</span><span class="op" id="2449905">[</span><span class="ident" id="2449906">i</span><span class="op" id="2449907">:</span><span class="op" id="2449908">]</span><br>
<span class="lineno"></span><span class="op" id="2449910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2449913">//&nbsp;ExpandEnv&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;according&nbsp;to&nbsp;the&nbsp;values</span><br>
<span class="lineno">30</span><span class="comment" id="2449988">//&nbsp;of&nbsp;the&nbsp;current&nbsp;environment&nbsp;variables.&nbsp;&nbsp;References&nbsp;to&nbsp;undefined</span><br>
<span class="lineno"></span><span class="comment" id="2450054">//&nbsp;variables&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2450101">func</span>&nbsp;<span class="ident" id="2450106">ExpandEnv</span><span class="op" id="2450115">(</span><span class="ident" id="2450116">s</span>&nbsp;<span class="builtintype" id="2450118">string</span><span class="op" id="2450124">)</span>&nbsp;<span class="builtintype" id="2450126">string</span>&nbsp;<span class="op" id="2450133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450136">return</span>&nbsp;<span class="ident" id="2450143">Expand</span><span class="op" id="2450149">(</span><span class="ident" id="2450150">s</span><span class="op" id="2450151">,</span>&nbsp;<span class="ident" id="2450153">Getenv</span><span class="op" id="2450159">)</span><br>
<span class="lineno"></span><span class="op" id="2450161">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2450164">//&nbsp;isSpellSpecialVar&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;identifies&nbsp;a&nbsp;special</span><br>
<span class="lineno"></span><span class="comment" id="2450236">//&nbsp;shell&nbsp;variable&nbsp;such&nbsp;as&nbsp;$*.</span><br>
<span class="lineno"></span><span class="keyword" id="2450266">func</span>&nbsp;<span class="ident" id="2450271">isShellSpecialVar</span><span class="op" id="2450288">(</span><span class="ident" id="2450289">c</span>&nbsp;<span class="builtintype" id="2450291">uint8</span><span class="op" id="2450296">)</span>&nbsp;<span class="builtintype" id="2450298">bool</span>&nbsp;<span class="op" id="2450303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450306">switch</span>&nbsp;<span class="ident" id="2450313">c</span>&nbsp;<span class="op" id="2450315">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450318">case</span>&nbsp;<span class="string" id="2450323">&#39;*&#39;</span><span class="op" id="2450326">,</span>&nbsp;<span class="string" id="2450328">&#39;#&#39;</span><span class="op" id="2450331">,</span>&nbsp;<span class="string" id="2450333">&#39;$&#39;</span><span class="op" id="2450336">,</span>&nbsp;<span class="string" id="2450338">&#39;@&#39;</span><span class="op" id="2450341">,</span>&nbsp;<span class="string" id="2450343">&#39;!&#39;</span><span class="op" id="2450346">,</span>&nbsp;<span class="string" id="2450348">&#39;?&#39;</span><span class="op" id="2450351">,</span>&nbsp;<span class="string" id="2450353">&#39;0&#39;</span><span class="op" id="2450356">,</span>&nbsp;<span class="string" id="2450358">&#39;1&#39;</span><span class="op" id="2450361">,</span>&nbsp;<span class="string" id="2450363">&#39;2&#39;</span><span class="op" id="2450366">,</span>&nbsp;<span class="string" id="2450368">&#39;3&#39;</span><span class="op" id="2450371">,</span>&nbsp;<span class="string" id="2450373">&#39;4&#39;</span><span class="op" id="2450376">,</span>&nbsp;<span class="string" id="2450378">&#39;5&#39;</span><span class="op" id="2450381">,</span>&nbsp;<span class="string" id="2450383">&#39;6&#39;</span><span class="op" id="2450386">,</span>&nbsp;<span class="string" id="2450388">&#39;7&#39;</span><span class="op" id="2450391">,</span>&nbsp;<span class="string" id="2450393">&#39;8&#39;</span><span class="op" id="2450396">,</span>&nbsp;<span class="string" id="2450398">&#39;9&#39;</span><span class="op" id="2450401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450405">return</span>&nbsp;<span class="builtintype" id="2450412">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2450418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450421">return</span>&nbsp;<span class="builtintype" id="2450428">false</span><br>
<span class="lineno"></span><span class="op" id="2450434">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2450437">//&nbsp;isAlphaNum&nbsp;reports&nbsp;whether&nbsp;the&nbsp;byte&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter,&nbsp;number,&nbsp;or&nbsp;underscore</span><br>
<span class="lineno"></span><span class="keyword" id="2450518">func</span>&nbsp;<span class="ident" id="2450523">isAlphaNum</span><span class="op" id="2450533">(</span><span class="ident" id="2450534">c</span>&nbsp;<span class="builtintype" id="2450536">uint8</span><span class="op" id="2450541">)</span>&nbsp;<span class="builtintype" id="2450543">bool</span>&nbsp;<span class="op" id="2450548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450551">return</span>&nbsp;<span class="ident" id="2450558">c</span>&nbsp;<span class="op" id="2450560">==</span>&nbsp;<span class="string" id="2450563">&#39;_&#39;</span>&nbsp;<span class="op" id="2450567">||</span>&nbsp;<span class="string" id="2450570">&#39;0&#39;</span>&nbsp;<span class="op" id="2450574">&lt;=</span>&nbsp;<span class="ident" id="2450577">c</span>&nbsp;<span class="op" id="2450579">&amp;&amp;</span>&nbsp;<span class="ident" id="2450582">c</span>&nbsp;<span class="op" id="2450584">&lt;=</span>&nbsp;<span class="string" id="2450587">&#39;9&#39;</span>&nbsp;<span class="op" id="2450591">||</span>&nbsp;<span class="string" id="2450594">&#39;a&#39;</span>&nbsp;<span class="op" id="2450598">&lt;=</span>&nbsp;<span class="ident" id="2450601">c</span>&nbsp;<span class="op" id="2450603">&amp;&amp;</span>&nbsp;<span class="ident" id="2450606">c</span>&nbsp;<span class="op" id="2450608">&lt;=</span>&nbsp;<span class="string" id="2450611">&#39;z&#39;</span>&nbsp;<span class="op" id="2450615">||</span>&nbsp;<span class="string" id="2450618">&#39;A&#39;</span>&nbsp;<span class="op" id="2450622">&lt;=</span>&nbsp;<span class="ident" id="2450625">c</span>&nbsp;<span class="op" id="2450627">&amp;&amp;</span>&nbsp;<span class="ident" id="2450630">c</span>&nbsp;<span class="op" id="2450632">&lt;=</span>&nbsp;<span class="string" id="2450635">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2450639">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2450642">//&nbsp;getName&nbsp;returns&nbsp;the&nbsp;name&nbsp;that&nbsp;begins&nbsp;the&nbsp;string&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="2450717">//&nbsp;consumed&nbsp;to&nbsp;extract&nbsp;it.&nbsp;&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;enclosed&nbsp;in&nbsp;{},&nbsp;it&#39;s&nbsp;part&nbsp;of&nbsp;a&nbsp;${}</span><br>
<span class="lineno"></span><span class="comment" id="2450795">//&nbsp;expansion&nbsp;and&nbsp;two&nbsp;more&nbsp;bytes&nbsp;are&nbsp;needed&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2450867">func</span>&nbsp;<span class="ident" id="2450872">getShellName</span><span class="op" id="2450884">(</span><span class="ident" id="2450885">s</span>&nbsp;<span class="builtintype" id="2450887">string</span><span class="op" id="2450893">)</span>&nbsp;<span class="op" id="2450895">(</span><span class="builtintype" id="2450896">string</span><span class="op" id="2450902">,</span>&nbsp;<span class="builtintype" id="2450904">int</span><span class="op" id="2450907">)</span>&nbsp;<span class="op" id="2450909">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450912">switch</span>&nbsp;<span class="op" id="2450919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450922">case</span>&nbsp;<span class="ident" id="2450927">s</span><span class="op" id="2450928">[</span><span class="num" id="2450929">0</span><span class="op" id="2450930">]</span>&nbsp;<span class="op" id="2450932">==</span>&nbsp;<span class="string" id="2450935">&#39;{&#39;</span><span class="op" id="2450938">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2450942">if</span>&nbsp;<span class="builtinfunc" id="2450945">len</span><span class="op" id="2450948">(</span><span class="ident" id="2450949">s</span><span class="op" id="2450950">)</span>&nbsp;<span class="op" id="2450952">&gt;</span>&nbsp;<span class="num" id="2450954">2</span>&nbsp;<span class="op" id="2450956">&amp;&amp;</span>&nbsp;<span class="ident" id="2450959">isShellSpecialVar</span><span class="op" id="2450976">(</span><span class="ident" id="2450977">s</span><span class="op" id="2450978">[</span><span class="num" id="2450979">1</span><span class="op" id="2450980">]</span><span class="op" id="2450981">)</span>&nbsp;<span class="op" id="2450983">&amp;&amp;</span>&nbsp;<span class="ident" id="2450986">s</span><span class="op" id="2450987">[</span><span class="num" id="2450988">2</span><span class="op" id="2450989">]</span>&nbsp;<span class="op" id="2450991">==</span>&nbsp;<span class="string" id="2450994">&#39;}&#39;</span>&nbsp;<span class="op" id="2450998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451003">return</span>&nbsp;<span class="ident" id="2451010">s</span><span class="op" id="2451011">[</span><span class="num" id="2451012">1</span><span class="op" id="2451013">:</span><span class="num" id="2451014">2</span><span class="op" id="2451015">]</span><span class="op" id="2451016">,</span>&nbsp;<span class="num" id="2451018">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2451022">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2451026">//&nbsp;Scan&nbsp;to&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451053">for</span>&nbsp;<span class="ident" id="2451057">i</span>&nbsp;<span class="op" id="2451059">:=</span>&nbsp;<span class="num" id="2451062">1</span><span class="op" id="2451063">;</span>&nbsp;<span class="ident" id="2451065">i</span>&nbsp;<span class="op" id="2451067">&lt;</span>&nbsp;<span class="builtinfunc" id="2451069">len</span><span class="op" id="2451072">(</span><span class="ident" id="2451073">s</span><span class="op" id="2451074">)</span><span class="op" id="2451075">;</span>&nbsp;<span class="ident" id="2451077">i</span><span class="op" id="2451078">++</span>&nbsp;<span class="op" id="2451081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451086">if</span>&nbsp;<span class="ident" id="2451089">s</span><span class="op" id="2451090">[</span><span class="ident" id="2451091">i</span><span class="op" id="2451092">]</span>&nbsp;<span class="op" id="2451094">==</span>&nbsp;<span class="string" id="2451097">&#39;}&#39;</span>&nbsp;<span class="op" id="2451101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451107">return</span>&nbsp;<span class="ident" id="2451114">s</span><span class="op" id="2451115">[</span><span class="num" id="2451116">1</span><span class="op" id="2451117">:</span><span class="ident" id="2451118">i</span><span class="op" id="2451119">]</span><span class="op" id="2451120">,</span>&nbsp;<span class="ident" id="2451122">i</span>&nbsp;<span class="op" id="2451124">+</span>&nbsp;<span class="num" id="2451126">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2451131">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2451135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451139">return</span>&nbsp;<span class="string" id="2451146">&#34;&#34;</span><span class="op" id="2451148">,</span>&nbsp;<span class="num" id="2451150">1</span>&nbsp;<span class="comment" id="2451152">//&nbsp;Bad&nbsp;syntax;&nbsp;just&nbsp;eat&nbsp;the&nbsp;brace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451188">case</span>&nbsp;<span class="ident" id="2451193">isShellSpecialVar</span><span class="op" id="2451210">(</span><span class="ident" id="2451211">s</span><span class="op" id="2451212">[</span><span class="num" id="2451213">0</span><span class="op" id="2451214">]</span><span class="op" id="2451215">)</span><span class="op" id="2451216">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451220">return</span>&nbsp;<span class="ident" id="2451227">s</span><span class="op" id="2451228">[</span><span class="num" id="2451229">0</span><span class="op" id="2451230">:</span><span class="num" id="2451231">1</span><span class="op" id="2451232">]</span><span class="op" id="2451233">,</span>&nbsp;<span class="num" id="2451235">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2451238">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2451241">//&nbsp;Scan&nbsp;alphanumerics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451265">var</span>&nbsp;<span class="ident" id="2451269">i</span>&nbsp;<span class="builtintype" id="2451271">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451276">for</span>&nbsp;<span class="ident" id="2451280">i</span>&nbsp;<span class="op" id="2451282">=</span>&nbsp;<span class="num" id="2451284">0</span><span class="op" id="2451285">;</span>&nbsp;<span class="ident" id="2451287">i</span>&nbsp;<span class="op" id="2451289">&lt;</span>&nbsp;<span class="builtinfunc" id="2451291">len</span><span class="op" id="2451294">(</span><span class="ident" id="2451295">s</span><span class="op" id="2451296">)</span>&nbsp;<span class="op" id="2451298">&amp;&amp;</span>&nbsp;<span class="ident" id="2451301">isAlphaNum</span><span class="op" id="2451311">(</span><span class="ident" id="2451312">s</span><span class="op" id="2451313">[</span><span class="ident" id="2451314">i</span><span class="op" id="2451315">]</span><span class="op" id="2451316">)</span><span class="op" id="2451317">;</span>&nbsp;<span class="ident" id="2451319">i</span><span class="op" id="2451320">++</span>&nbsp;<span class="op" id="2451323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2451326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451329">return</span>&nbsp;<span class="ident" id="2451336">s</span><span class="op" id="2451337">[</span><span class="op" id="2451338">:</span><span class="ident" id="2451339">i</span><span class="op" id="2451340">]</span><span class="op" id="2451341">,</span>&nbsp;<span class="ident" id="2451343">i</span><br>
<span class="lineno">75</span><span class="op" id="2451345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2451348">//&nbsp;Getenv&nbsp;retrieves&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="2451424">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;value,&nbsp;which&nbsp;will&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;variable&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2451501">func</span>&nbsp;<span class="ident" id="2451506">Getenv</span><span class="op" id="2451512">(</span><span class="ident" id="2451513">key</span>&nbsp;<span class="builtintype" id="2451517">string</span><span class="op" id="2451523">)</span>&nbsp;<span class="builtintype" id="2451525">string</span>&nbsp;<span class="op" id="2451532">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2451535">v</span><span class="op" id="2451536">,</span>&nbsp;<span class="ident" id="2451538">_</span>&nbsp;<span class="op" id="2451540">:=</span>&nbsp;<span class="ident" id="2451543">syscall</span><span class="op" id="2451550">.</span><span class="ident" id="2451551">Getenv</span><span class="op" id="2451557">(</span><span class="ident" id="2451558">key</span><span class="op" id="2451561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451564">return</span>&nbsp;<span class="ident" id="2451571">v</span><br>
<span class="lineno"></span><span class="op" id="2451573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2451576">//&nbsp;Setenv&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno">85</span><span class="comment" id="2451647">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2451679">func</span>&nbsp;<span class="ident" id="2451684">Setenv</span><span class="op" id="2451690">(</span><span class="ident" id="2451691">key</span><span class="op" id="2451694">,</span>&nbsp;<span class="ident" id="2451696">value</span>&nbsp;<span class="builtintype" id="2451702">string</span><span class="op" id="2451708">)</span>&nbsp;<span class="builtintype" id="2451710">error</span>&nbsp;<span class="op" id="2451716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2451719">err</span>&nbsp;<span class="op" id="2451723">:=</span>&nbsp;<span class="ident" id="2451726">syscall</span><span class="op" id="2451733">.</span><span class="ident" id="2451734">Setenv</span><span class="op" id="2451740">(</span><span class="ident" id="2451741">key</span><span class="op" id="2451744">,</span>&nbsp;<span class="ident" id="2451746">value</span><span class="op" id="2451751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451754">if</span>&nbsp;<span class="ident" id="2451757">err</span>&nbsp;<span class="op" id="2451761">!=</span>&nbsp;<span class="ident" id="2451764">nil</span>&nbsp;<span class="op" id="2451768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451772">return</span>&nbsp;<span class="ident" id="2451779">NewSyscallError</span><span class="op" id="2451794">(</span><span class="string" id="2451795">&#34;setenv&#34;</span><span class="op" id="2451803">,</span>&nbsp;<span class="ident" id="2451805">err</span><span class="op" id="2451808">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2451811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451814">return</span>&nbsp;<span class="ident" id="2451821">nil</span><br>
<span class="lineno"></span><span class="op" id="2451825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2451828">//&nbsp;Unsetenv&nbsp;unsets&nbsp;a&nbsp;single&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno">95</span><span class="keyword" id="2451878">func</span>&nbsp;<span class="ident" id="2451883">Unsetenv</span><span class="op" id="2451891">(</span><span class="ident" id="2451892">key</span>&nbsp;<span class="builtintype" id="2451896">string</span><span class="op" id="2451902">)</span>&nbsp;<span class="builtintype" id="2451904">error</span>&nbsp;<span class="op" id="2451910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2451913">return</span>&nbsp;<span class="ident" id="2451920">syscall</span><span class="op" id="2451927">.</span><span class="ident" id="2451928">Unsetenv</span><span class="op" id="2451936">(</span><span class="ident" id="2451937">key</span><span class="op" id="2451940">)</span><br>
<span class="lineno"></span><span class="op" id="2451942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2451945">//&nbsp;Clearenv&nbsp;deletes&nbsp;all&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno">100</span><span class="keyword" id="2451992">func</span>&nbsp;<span class="ident" id="2451997">Clearenv</span><span class="op" id="2452005">(</span><span class="op" id="2452006">)</span>&nbsp;<span class="op" id="2452008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2452011">syscall</span><span class="op" id="2452018">.</span><span class="ident" id="2452019">Clearenv</span><span class="op" id="2452027">(</span><span class="op" id="2452028">)</span><br>
<span class="lineno"></span><span class="op" id="2452030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2452033">//&nbsp;Environ&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;strings&nbsp;representing&nbsp;the&nbsp;environment,</span><br>
<span class="lineno">105</span><span class="comment" id="2452100">//&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2452128">func</span>&nbsp;<span class="ident" id="2452133">Environ</span><span class="op" id="2452140">(</span><span class="op" id="2452141">)</span>&nbsp;<span class="op" id="2452143">[</span><span class="op" id="2452144">]</span><span class="builtintype" id="2452145">string</span>&nbsp;<span class="op" id="2452152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2452155">return</span>&nbsp;<span class="ident" id="2452162">syscall</span><span class="op" id="2452169">.</span><span class="ident" id="2452170">Environ</span><span class="op" id="2452177">(</span><span class="op" id="2452178">)</span><br>
<span class="lineno"></span><span class="op" id="2452180">}</span>
</div>
</body>
</html>
