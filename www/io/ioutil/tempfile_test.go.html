<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8237054">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8237109">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8237163">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8237214">package</span>&nbsp;<span class="ident" id="8237222">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8237230">import</span>&nbsp;<span class="op" id="8237237">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8237240">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8237246">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8237263">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8237273">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8237283">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8237286">func</span>&nbsp;<span class="ident" id="8237291">TestTempFile</span><span class="op" id="8237303">(</span><span class="ident" id="8237304">t</span>&nbsp;<span class="op" id="8237306">*</span><span class="ident" id="8237307"><a href="/io/ioutil/tempfile_test.go.html#8237273">testing</a></span><span class="op" id="8237314">.</span><span class="ident" id="8237315">T</span><span class="op" id="8237316">)</span>&nbsp;<span class="op" id="8237318">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237321">f</span><span class="op" id="8237322">,</span>&nbsp;<span class="ident" id="8237324">err</span>&nbsp;<span class="op" id="8237328">:=</span>&nbsp;<span class="ident" id="8237331"><a href="/io/ioutil/tempfile.go.html#3610588">TempFile</a></span><span class="op" id="8237339">(</span><span class="string" id="8237340">&#34;/_not_exists_&#34;</span><span class="op" id="8237355">,</span>&nbsp;<span class="string" id="8237357">&#34;foo&#34;</span><span class="op" id="8237362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237365">if</span>&nbsp;<span class="ident" id="8237368"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span>&nbsp;<span class="op" id="8237370">!=</span>&nbsp;<span class="ident" id="8237373">nil</span>&nbsp;<span class="op" id="8237377">||</span>&nbsp;<span class="ident" id="8237380"><a href="/io/ioutil/tempfile_test.go.html#8237324">err</a></span>&nbsp;<span class="op" id="8237384">==</span>&nbsp;<span class="ident" id="8237387">nil</span>&nbsp;<span class="op" id="8237391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237395"><a href="/io/ioutil/tempfile_test.go.html#8237304">t</a></span><span class="op" id="8237396">.</span><span class="ident" id="8237397">Errorf</span><span class="op" id="8237403">(</span><span class="string" id="8237404">&#34;TempFile(`/_not_exists_`,&nbsp;`foo`)&nbsp;=&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8237447">,</span>&nbsp;<span class="ident" id="8237449"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span><span class="op" id="8237450">,</span>&nbsp;<span class="ident" id="8237452"><a href="/io/ioutil/tempfile_test.go.html#8237324">err</a></span><span class="op" id="8237455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237462">dir</span>&nbsp;<span class="op" id="8237466">:=</span>&nbsp;<span class="ident" id="8237469"><a href="/io/ioutil/tempfile_test.go.html#8237240">os</a></span><span class="op" id="8237471">.</span><span class="ident" id="8237472">TempDir</span><span class="op" id="8237479">(</span><span class="op" id="8237480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237483"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span><span class="op" id="8237484">,</span>&nbsp;<span class="ident" id="8237486"><a href="/io/ioutil/tempfile_test.go.html#8237324">err</a></span>&nbsp;<span class="op" id="8237490">=</span>&nbsp;<span class="ident" id="8237492"><a href="/io/ioutil/tempfile.go.html#3610588">TempFile</a></span><span class="op" id="8237500">(</span><span class="ident" id="8237501"><a href="/io/ioutil/tempfile_test.go.html#8237462">dir</a></span><span class="op" id="8237504">,</span>&nbsp;<span class="string" id="8237506">&#34;ioutil_test&#34;</span><span class="op" id="8237519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237522">if</span>&nbsp;<span class="ident" id="8237525"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span>&nbsp;<span class="op" id="8237527">==</span>&nbsp;<span class="ident" id="8237530">nil</span>&nbsp;<span class="op" id="8237534">||</span>&nbsp;<span class="ident" id="8237537"><a href="/io/ioutil/tempfile_test.go.html#8237324">err</a></span>&nbsp;<span class="op" id="8237541">!=</span>&nbsp;<span class="ident" id="8237544">nil</span>&nbsp;<span class="op" id="8237548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237552"><a href="/io/ioutil/tempfile_test.go.html#8237304">t</a></span><span class="op" id="8237553">.</span><span class="ident" id="8237554">Errorf</span><span class="op" id="8237560">(</span><span class="string" id="8237561">&#34;TempFile(dir,&nbsp;`ioutil_test`)&nbsp;=&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8237600">,</span>&nbsp;<span class="ident" id="8237602"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span><span class="op" id="8237603">,</span>&nbsp;<span class="ident" id="8237605"><a href="/io/ioutil/tempfile_test.go.html#8237324">err</a></span><span class="op" id="8237608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237611">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237614">if</span>&nbsp;<span class="ident" id="8237617"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span>&nbsp;<span class="op" id="8237619">!=</span>&nbsp;<span class="ident" id="8237622">nil</span>&nbsp;<span class="op" id="8237626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237630"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span><span class="op" id="8237631">.</span><span class="ident" id="8237632">Close</span><span class="op" id="8237637">(</span><span class="op" id="8237638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237642"><a href="/io/ioutil/tempfile_test.go.html#8237240">os</a></span><span class="op" id="8237644">.</span><span class="ident" id="8237645">Remove</span><span class="op" id="8237651">(</span><span class="ident" id="8237652"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span><span class="op" id="8237653">.</span><span class="ident" id="8237654">Name</span><span class="op" id="8237658">(</span><span class="op" id="8237659">)</span><span class="op" id="8237660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237664">re</span>&nbsp;<span class="op" id="8237667">:=</span>&nbsp;<span class="ident" id="8237670"><a href="/io/ioutil/tempfile_test.go.html#8237263">regexp</a></span><span class="op" id="8237676">.</span><span class="ident" id="8237677">MustCompile</span><span class="op" id="8237688">(</span><span class="string" id="8237689">&#34;^&#34;</span>&nbsp;<span class="op" id="8237693">+</span>&nbsp;<span class="ident" id="8237695"><a href="/io/ioutil/tempfile_test.go.html#8237263">regexp</a></span><span class="op" id="8237701">.</span><span class="ident" id="8237702">QuoteMeta</span><span class="op" id="8237711">(</span><span class="ident" id="8237712"><a href="/io/ioutil/tempfile_test.go.html#8237246">filepath</a></span><span class="op" id="8237720">.</span><span class="ident" id="8237721">Join</span><span class="op" id="8237725">(</span><span class="ident" id="8237726"><a href="/io/ioutil/tempfile_test.go.html#8237462">dir</a></span><span class="op" id="8237729">,</span>&nbsp;<span class="string" id="8237731">&#34;ioutil_test&#34;</span><span class="op" id="8237744">)</span><span class="op" id="8237745">)</span>&nbsp;<span class="op" id="8237747">+</span>&nbsp;<span class="string" id="8237749">&#34;[0-9]+$&#34;</span><span class="op" id="8237758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237762">if</span>&nbsp;<span class="op" id="8237765">!</span><span class="ident" id="8237766"><a href="/io/ioutil/tempfile_test.go.html#8237664">re</a></span><span class="op" id="8237768">.</span><span class="ident" id="8237769">MatchString</span><span class="op" id="8237780">(</span><span class="ident" id="8237781"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span><span class="op" id="8237782">.</span><span class="ident" id="8237783">Name</span><span class="op" id="8237787">(</span><span class="op" id="8237788">)</span><span class="op" id="8237789">)</span>&nbsp;<span class="op" id="8237791">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237796"><a href="/io/ioutil/tempfile_test.go.html#8237304">t</a></span><span class="op" id="8237797">.</span><span class="ident" id="8237798">Errorf</span><span class="op" id="8237804">(</span><span class="string" id="8237805">&#34;TempFile(`&#34;</span><span class="op" id="8237817">+</span><span class="ident" id="8237818"><a href="/io/ioutil/tempfile_test.go.html#8237462">dir</a></span><span class="op" id="8237821">+</span><span class="string" id="8237822">&#34;`,&nbsp;`ioutil_test`)&nbsp;created&nbsp;bad&nbsp;name&nbsp;%s&#34;</span><span class="op" id="8237861">,</span>&nbsp;<span class="ident" id="8237863"><a href="/io/ioutil/tempfile_test.go.html#8237321">f</a></span><span class="op" id="8237864">.</span><span class="ident" id="8237865">Name</span><span class="op" id="8237869">(</span><span class="op" id="8237870">)</span><span class="op" id="8237871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237878">}</span><br>
<span class="lineno"></span><span class="op" id="8237880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8237883">func</span>&nbsp;<span class="ident" id="8237888">TestTempDir</span><span class="op" id="8237899">(</span><span class="ident" id="8237900">t</span>&nbsp;<span class="op" id="8237902">*</span><span class="ident" id="8237903"><a href="/io/ioutil/tempfile_test.go.html#8237273">testing</a></span><span class="op" id="8237910">.</span><span class="ident" id="8237911">T</span><span class="op" id="8237912">)</span>&nbsp;<span class="op" id="8237914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237917">name</span><span class="op" id="8237921">,</span>&nbsp;<span class="ident" id="8237923">err</span>&nbsp;<span class="op" id="8237927">:=</span>&nbsp;<span class="ident" id="8237930"><a href="/io/ioutil/tempfile.go.html#3611405">TempDir</a></span><span class="op" id="8237937">(</span><span class="string" id="8237938">&#34;/_not_exists_&#34;</span><span class="op" id="8237953">,</span>&nbsp;<span class="string" id="8237955">&#34;foo&#34;</span><span class="op" id="8237960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237963">if</span>&nbsp;<span class="ident" id="8237966"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span>&nbsp;<span class="op" id="8237971">!=</span>&nbsp;<span class="string" id="8237974">&#34;&#34;</span>&nbsp;<span class="op" id="8237977">||</span>&nbsp;<span class="ident" id="8237980"><a href="/io/ioutil/tempfile_test.go.html#8237923">err</a></span>&nbsp;<span class="op" id="8237984">==</span>&nbsp;<span class="ident" id="8237987">nil</span>&nbsp;<span class="op" id="8237991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237995"><a href="/io/ioutil/tempfile_test.go.html#8237900">t</a></span><span class="op" id="8237996">.</span><span class="ident" id="8237997">Errorf</span><span class="op" id="8238003">(</span><span class="string" id="8238004">&#34;TempDir(`/_not_exists_`,&nbsp;`foo`)&nbsp;=&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8238046">,</span>&nbsp;<span class="ident" id="8238048"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span><span class="op" id="8238052">,</span>&nbsp;<span class="ident" id="8238054"><a href="/io/ioutil/tempfile_test.go.html#8237923">err</a></span><span class="op" id="8238057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238060">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238064">dir</span>&nbsp;<span class="op" id="8238068">:=</span>&nbsp;<span class="ident" id="8238071"><a href="/io/ioutil/tempfile_test.go.html#8237240">os</a></span><span class="op" id="8238073">.</span><span class="ident" id="8238074">TempDir</span><span class="op" id="8238081">(</span><span class="op" id="8238082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238085"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span><span class="op" id="8238089">,</span>&nbsp;<span class="ident" id="8238091"><a href="/io/ioutil/tempfile_test.go.html#8237923">err</a></span>&nbsp;<span class="op" id="8238095">=</span>&nbsp;<span class="ident" id="8238097"><a href="/io/ioutil/tempfile.go.html#3611405">TempDir</a></span><span class="op" id="8238104">(</span><span class="ident" id="8238105"><a href="/io/ioutil/tempfile_test.go.html#8238064">dir</a></span><span class="op" id="8238108">,</span>&nbsp;<span class="string" id="8238110">&#34;ioutil_test&#34;</span><span class="op" id="8238123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238126">if</span>&nbsp;<span class="ident" id="8238129"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span>&nbsp;<span class="op" id="8238134">==</span>&nbsp;<span class="string" id="8238137">&#34;&#34;</span>&nbsp;<span class="op" id="8238140">||</span>&nbsp;<span class="ident" id="8238143"><a href="/io/ioutil/tempfile_test.go.html#8237923">err</a></span>&nbsp;<span class="op" id="8238147">!=</span>&nbsp;<span class="ident" id="8238150">nil</span>&nbsp;<span class="op" id="8238154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238158"><a href="/io/ioutil/tempfile_test.go.html#8237900">t</a></span><span class="op" id="8238159">.</span><span class="ident" id="8238160">Errorf</span><span class="op" id="8238166">(</span><span class="string" id="8238167">&#34;TempDir(dir,&nbsp;`ioutil_test`)&nbsp;=&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8238205">,</span>&nbsp;<span class="ident" id="8238207"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span><span class="op" id="8238211">,</span>&nbsp;<span class="ident" id="8238213"><a href="/io/ioutil/tempfile_test.go.html#8237923">err</a></span><span class="op" id="8238216">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238222">if</span>&nbsp;<span class="ident" id="8238225"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span>&nbsp;<span class="op" id="8238230">!=</span>&nbsp;<span class="string" id="8238233">&#34;&#34;</span>&nbsp;<span class="op" id="8238236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238240"><a href="/io/ioutil/tempfile_test.go.html#8237240">os</a></span><span class="op" id="8238242">.</span><span class="ident" id="8238243">Remove</span><span class="op" id="8238249">(</span><span class="ident" id="8238250"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span><span class="op" id="8238254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238258">re</span>&nbsp;<span class="op" id="8238261">:=</span>&nbsp;<span class="ident" id="8238264"><a href="/io/ioutil/tempfile_test.go.html#8237263">regexp</a></span><span class="op" id="8238270">.</span><span class="ident" id="8238271">MustCompile</span><span class="op" id="8238282">(</span><span class="string" id="8238283">&#34;^&#34;</span>&nbsp;<span class="op" id="8238287">+</span>&nbsp;<span class="ident" id="8238289"><a href="/io/ioutil/tempfile_test.go.html#8237263">regexp</a></span><span class="op" id="8238295">.</span><span class="ident" id="8238296">QuoteMeta</span><span class="op" id="8238305">(</span><span class="ident" id="8238306"><a href="/io/ioutil/tempfile_test.go.html#8237246">filepath</a></span><span class="op" id="8238314">.</span><span class="ident" id="8238315">Join</span><span class="op" id="8238319">(</span><span class="ident" id="8238320"><a href="/io/ioutil/tempfile_test.go.html#8238064">dir</a></span><span class="op" id="8238323">,</span>&nbsp;<span class="string" id="8238325">&#34;ioutil_test&#34;</span><span class="op" id="8238338">)</span><span class="op" id="8238339">)</span>&nbsp;<span class="op" id="8238341">+</span>&nbsp;<span class="string" id="8238343">&#34;[0-9]+$&#34;</span><span class="op" id="8238352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238356">if</span>&nbsp;<span class="op" id="8238359">!</span><span class="ident" id="8238360"><a href="/io/ioutil/tempfile_test.go.html#8238258">re</a></span><span class="op" id="8238362">.</span><span class="ident" id="8238363">MatchString</span><span class="op" id="8238374">(</span><span class="ident" id="8238375"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span><span class="op" id="8238379">)</span>&nbsp;<span class="op" id="8238381">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238386"><a href="/io/ioutil/tempfile_test.go.html#8237900">t</a></span><span class="op" id="8238387">.</span><span class="ident" id="8238388">Errorf</span><span class="op" id="8238394">(</span><span class="string" id="8238395">&#34;TempDir(`&#34;</span><span class="op" id="8238406">+</span><span class="ident" id="8238407"><a href="/io/ioutil/tempfile_test.go.html#8238064">dir</a></span><span class="op" id="8238410">+</span><span class="string" id="8238411">&#34;`,&nbsp;`ioutil_test`)&nbsp;created&nbsp;bad&nbsp;name&nbsp;%s&#34;</span><span class="op" id="8238450">,</span>&nbsp;<span class="ident" id="8238452"><a href="/io/ioutil/tempfile_test.go.html#8237917">name</a></span><span class="op" id="8238456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238463">}</span><br>
<span class="lineno"></span><span class="op" id="8238465">}</span>
</div>
</body>
</html>
