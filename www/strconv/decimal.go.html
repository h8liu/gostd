<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1573096">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1573151">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1573205">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1573256">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="1573291">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="1573351">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="1573412">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="1573480">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="1573538">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573578">package</span>&nbsp;<span class="ident" id="1573586">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573595">type</span>&nbsp;<span class="ident" id="1573600">decimal</span>&nbsp;<span class="keyword" id="1573608">struct</span>&nbsp;<span class="op" id="1573615">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573618">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1573624">[</span><span class="num" id="1573625">800</span><span class="op" id="1573628">]</span><span class="builtintype" id="1573629">byte</span>&nbsp;<span class="comment" id="1573634">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573645">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1573651">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1573661">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573687">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1573693">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1573703">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573721">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1573727">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573733">trunc</span>&nbsp;<span class="builtintype" id="1573739">bool</span>&nbsp;<span class="comment" id="1573744">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="1573786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573789">func</span>&nbsp;<span class="op" id="1573794">(</span><span class="ident" id="1573795">a</span>&nbsp;<span class="op" id="1573797">*</span><span class="ident" id="1573798"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1573805">)</span>&nbsp;<span class="ident" id="1573807">String</span><span class="op" id="1573813">(</span><span class="op" id="1573814">)</span>&nbsp;<span class="builtintype" id="1573816">string</span>&nbsp;<span class="op" id="1573823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573826">n</span>&nbsp;<span class="op" id="1573828">:=</span>&nbsp;<span class="num" id="1573831">10</span>&nbsp;<span class="op" id="1573834">+</span>&nbsp;<span class="ident" id="1573836"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1573837">.</span><span class="ident" id="1573838">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573842">if</span>&nbsp;<span class="ident" id="1573845"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1573846">.</span><span class="ident" id="1573847">dp</span>&nbsp;<span class="op" id="1573850">&gt;</span>&nbsp;<span class="num" id="1573852">0</span>&nbsp;<span class="op" id="1573854">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573858"><a href="/strconv/decimal.go.html#1573826">n</a></span>&nbsp;<span class="op" id="1573860">+=</span>&nbsp;<span class="ident" id="1573863"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1573864">.</span><span class="ident" id="1573865">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573872">if</span>&nbsp;<span class="ident" id="1573875"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1573876">.</span><span class="ident" id="1573877">dp</span>&nbsp;<span class="op" id="1573880">&lt;</span>&nbsp;<span class="num" id="1573882">0</span>&nbsp;<span class="op" id="1573884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573888"><a href="/strconv/decimal.go.html#1573826">n</a></span>&nbsp;<span class="op" id="1573890">+=</span>&nbsp;<span class="op" id="1573893">-</span><span class="ident" id="1573894"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1573895">.</span><span class="ident" id="1573896">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573900">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573904">buf</span>&nbsp;<span class="op" id="1573908">:=</span>&nbsp;<span class="builtinfunc" id="1573911">make</span><span class="op" id="1573915">(</span><span class="op" id="1573916">[</span><span class="op" id="1573917">]</span><span class="builtintype" id="1573918">byte</span><span class="op" id="1573922">,</span>&nbsp;<span class="ident" id="1573924"><a href="/strconv/decimal.go.html#1573826">n</a></span><span class="op" id="1573925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573928">w</span>&nbsp;<span class="op" id="1573930">:=</span>&nbsp;<span class="num" id="1573933">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573936">switch</span>&nbsp;<span class="op" id="1573943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573946">case</span>&nbsp;<span class="ident" id="1573951"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1573952">.</span><span class="ident" id="1573953">nd</span>&nbsp;<span class="op" id="1573956">==</span>&nbsp;<span class="num" id="1573959">0</span><span class="op" id="1573960">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573964">return</span>&nbsp;<span class="string" id="1573971">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573977">case</span>&nbsp;<span class="ident" id="1573982"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1573983">.</span><span class="ident" id="1573984">dp</span>&nbsp;<span class="op" id="1573987">&lt;=</span>&nbsp;<span class="num" id="1573990">0</span><span class="op" id="1573991">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573995">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574050"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574053">[</span><span class="ident" id="1574054"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574055">]</span>&nbsp;<span class="op" id="1574057">=</span>&nbsp;<span class="string" id="1574059">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574065"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574066">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574071"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574074">[</span><span class="ident" id="1574075"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574076">]</span>&nbsp;<span class="op" id="1574078">=</span>&nbsp;<span class="string" id="1574080">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574086"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574087">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574092"><a href="/strconv/decimal.go.html#1573928">w</a></span>&nbsp;<span class="op" id="1574094">+=</span>&nbsp;<span class="ident" id="1574097"><a href="/strconv/decimal.go.html#1574485">digitZero</a></span><span class="op" id="1574106">(</span><span class="ident" id="1574107"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574110">[</span><span class="ident" id="1574111"><a href="/strconv/decimal.go.html#1573928">w</a></span>&nbsp;<span class="op" id="1574113">:</span>&nbsp;<span class="ident" id="1574115"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574116">+</span><span class="op" id="1574117">-</span><span class="ident" id="1574118"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574119">.</span><span class="ident" id="1574120">dp</span><span class="op" id="1574122">]</span><span class="op" id="1574123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574127"><a href="/strconv/decimal.go.html#1573928">w</a></span>&nbsp;<span class="op" id="1574129">+=</span>&nbsp;<span class="builtinfunc" id="1574132">copy</span><span class="op" id="1574136">(</span><span class="ident" id="1574137"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574140">[</span><span class="ident" id="1574141"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574142">:</span><span class="op" id="1574143">]</span><span class="op" id="1574144">,</span>&nbsp;<span class="ident" id="1574146"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574147">.</span><span class="ident" id="1574148">d</span><span class="op" id="1574149">[</span><span class="num" id="1574150">0</span><span class="op" id="1574151">:</span><span class="ident" id="1574152"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574153">.</span><span class="ident" id="1574154">nd</span><span class="op" id="1574156">]</span><span class="op" id="1574157">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574161">case</span>&nbsp;<span class="ident" id="1574166"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574167">.</span><span class="ident" id="1574168">dp</span>&nbsp;<span class="op" id="1574171">&lt;</span>&nbsp;<span class="ident" id="1574173"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574174">.</span><span class="ident" id="1574175">nd</span><span class="op" id="1574177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1574181">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574220"><a href="/strconv/decimal.go.html#1573928">w</a></span>&nbsp;<span class="op" id="1574222">+=</span>&nbsp;<span class="builtinfunc" id="1574225">copy</span><span class="op" id="1574229">(</span><span class="ident" id="1574230"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574233">[</span><span class="ident" id="1574234"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574235">:</span><span class="op" id="1574236">]</span><span class="op" id="1574237">,</span>&nbsp;<span class="ident" id="1574239"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574240">.</span><span class="ident" id="1574241">d</span><span class="op" id="1574242">[</span><span class="num" id="1574243">0</span><span class="op" id="1574244">:</span><span class="ident" id="1574245"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574246">.</span><span class="ident" id="1574247">dp</span><span class="op" id="1574249">]</span><span class="op" id="1574250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574254"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574257">[</span><span class="ident" id="1574258"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574259">]</span>&nbsp;<span class="op" id="1574261">=</span>&nbsp;<span class="string" id="1574263">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574269"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574270">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574275"><a href="/strconv/decimal.go.html#1573928">w</a></span>&nbsp;<span class="op" id="1574277">+=</span>&nbsp;<span class="builtinfunc" id="1574280">copy</span><span class="op" id="1574284">(</span><span class="ident" id="1574285"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574288">[</span><span class="ident" id="1574289"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574290">:</span><span class="op" id="1574291">]</span><span class="op" id="1574292">,</span>&nbsp;<span class="ident" id="1574294"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574295">.</span><span class="ident" id="1574296">d</span><span class="op" id="1574297">[</span><span class="ident" id="1574298"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574299">.</span><span class="ident" id="1574300">dp</span><span class="op" id="1574302">:</span><span class="ident" id="1574303"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574304">.</span><span class="ident" id="1574305">nd</span><span class="op" id="1574307">]</span><span class="op" id="1574308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574312">default</span><span class="op" id="1574319">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1574323">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574378"><a href="/strconv/decimal.go.html#1573928">w</a></span>&nbsp;<span class="op" id="1574380">+=</span>&nbsp;<span class="builtinfunc" id="1574383">copy</span><span class="op" id="1574387">(</span><span class="ident" id="1574388"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574391">[</span><span class="ident" id="1574392"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574393">:</span><span class="op" id="1574394">]</span><span class="op" id="1574395">,</span>&nbsp;<span class="ident" id="1574397"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574398">.</span><span class="ident" id="1574399">d</span><span class="op" id="1574400">[</span><span class="num" id="1574401">0</span><span class="op" id="1574402">:</span><span class="ident" id="1574403"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574404">.</span><span class="ident" id="1574405">nd</span><span class="op" id="1574407">]</span><span class="op" id="1574408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574412"><a href="/strconv/decimal.go.html#1573928">w</a></span>&nbsp;<span class="op" id="1574414">+=</span>&nbsp;<span class="ident" id="1574417"><a href="/strconv/decimal.go.html#1574485">digitZero</a></span><span class="op" id="1574426">(</span><span class="ident" id="1574427"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574430">[</span><span class="ident" id="1574431"><a href="/strconv/decimal.go.html#1573928">w</a></span>&nbsp;<span class="op" id="1574433">:</span>&nbsp;<span class="ident" id="1574435"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574436">+</span><span class="ident" id="1574437"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574438">.</span><span class="ident" id="1574439">dp</span><span class="op" id="1574441">-</span><span class="ident" id="1574442"><a href="/strconv/decimal.go.html#1573795">a</a></span><span class="op" id="1574443">.</span><span class="ident" id="1574444">nd</span><span class="op" id="1574446">]</span><span class="op" id="1574447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574453">return</span>&nbsp;<span class="builtintype" id="1574460">string</span><span class="op" id="1574466">(</span><span class="ident" id="1574467"><a href="/strconv/decimal.go.html#1573904">buf</a></span><span class="op" id="1574470">[</span><span class="num" id="1574471">0</span><span class="op" id="1574472">:</span><span class="ident" id="1574473"><a href="/strconv/decimal.go.html#1573928">w</a></span><span class="op" id="1574474">]</span><span class="op" id="1574475">)</span><br>
<span class="lineno"></span><span class="op" id="1574477">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1574480">func</span>&nbsp;<span class="ident" id="1574485">digitZero</span><span class="op" id="1574494">(</span><span class="ident" id="1574495">dst</span>&nbsp;<span class="op" id="1574499">[</span><span class="op" id="1574500">]</span><span class="builtintype" id="1574501">byte</span><span class="op" id="1574505">)</span>&nbsp;<span class="builtintype" id="1574507">int</span>&nbsp;<span class="op" id="1574511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574514">for</span>&nbsp;<span class="ident" id="1574518">i</span>&nbsp;<span class="op" id="1574520">:=</span>&nbsp;<span class="keyword" id="1574523">range</span>&nbsp;<span class="ident" id="1574529"><a href="/strconv/decimal.go.html#1574495">dst</a></span>&nbsp;<span class="op" id="1574533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574537"><a href="/strconv/decimal.go.html#1574495">dst</a></span><span class="op" id="1574540">[</span><span class="ident" id="1574541"><a href="/strconv/decimal.go.html#1574518">i</a></span><span class="op" id="1574542">]</span>&nbsp;<span class="op" id="1574544">=</span>&nbsp;<span class="string" id="1574546">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574551">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574554">return</span>&nbsp;<span class="builtinfunc" id="1574561">len</span><span class="op" id="1574564">(</span><span class="ident" id="1574565"><a href="/strconv/decimal.go.html#1574495">dst</a></span><span class="op" id="1574568">)</span><br>
<span class="lineno"></span><span class="op" id="1574570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1574573">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="1574609">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="1574664">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="1574705">func</span>&nbsp;<span class="ident" id="1574710">trim</span><span class="op" id="1574714">(</span><span class="ident" id="1574715">a</span>&nbsp;<span class="op" id="1574717">*</span><span class="ident" id="1574718"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1574725">)</span>&nbsp;<span class="op" id="1574727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574730">for</span>&nbsp;<span class="ident" id="1574734"><a href="/strconv/decimal.go.html#1574715">a</a></span><span class="op" id="1574735">.</span><span class="ident" id="1574736">nd</span>&nbsp;<span class="op" id="1574739">&gt;</span>&nbsp;<span class="num" id="1574741">0</span>&nbsp;<span class="op" id="1574743">&amp;&amp;</span>&nbsp;<span class="ident" id="1574746"><a href="/strconv/decimal.go.html#1574715">a</a></span><span class="op" id="1574747">.</span><span class="ident" id="1574748">d</span><span class="op" id="1574749">[</span><span class="ident" id="1574750"><a href="/strconv/decimal.go.html#1574715">a</a></span><span class="op" id="1574751">.</span><span class="ident" id="1574752">nd</span><span class="op" id="1574754">-</span><span class="num" id="1574755">1</span><span class="op" id="1574756">]</span>&nbsp;<span class="op" id="1574758">==</span>&nbsp;<span class="string" id="1574761">&#39;0&#39;</span>&nbsp;<span class="op" id="1574765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574769"><a href="/strconv/decimal.go.html#1574715">a</a></span><span class="op" id="1574770">.</span><span class="ident" id="1574771">nd</span><span class="op" id="1574773">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574777">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574780">if</span>&nbsp;<span class="ident" id="1574783"><a href="/strconv/decimal.go.html#1574715">a</a></span><span class="op" id="1574784">.</span><span class="ident" id="1574785">nd</span>&nbsp;<span class="op" id="1574788">==</span>&nbsp;<span class="num" id="1574791">0</span>&nbsp;<span class="op" id="1574793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574797"><a href="/strconv/decimal.go.html#1574715">a</a></span><span class="op" id="1574798">.</span><span class="ident" id="1574799">dp</span>&nbsp;<span class="op" id="1574802">=</span>&nbsp;<span class="num" id="1574804">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574807">}</span><br>
<span class="lineno"></span><span class="op" id="1574809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="1574812">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="1574830">func</span>&nbsp;<span class="op" id="1574835">(</span><span class="ident" id="1574836">a</span>&nbsp;<span class="op" id="1574838">*</span><span class="ident" id="1574839"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1574846">)</span>&nbsp;<span class="ident" id="1574848">Assign</span><span class="op" id="1574854">(</span><span class="ident" id="1574855">v</span>&nbsp;<span class="ident" id="1574857">uint64</span><span class="op" id="1574863">)</span>&nbsp;<span class="op" id="1574865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574868">var</span>&nbsp;<span class="ident" id="1574872">buf</span>&nbsp;<span class="op" id="1574876">[</span><span class="num" id="1574877">24</span><span class="op" id="1574879">]</span><span class="builtintype" id="1574880">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1574887">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574922">n</span>&nbsp;<span class="op" id="1574924">:=</span>&nbsp;<span class="num" id="1574927">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574930">for</span>&nbsp;<span class="ident" id="1574934"><a href="/strconv/decimal.go.html#1574855">v</a></span>&nbsp;<span class="op" id="1574936">&gt;</span>&nbsp;<span class="num" id="1574938">0</span>&nbsp;<span class="op" id="1574940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574944">v1</span>&nbsp;<span class="op" id="1574947">:=</span>&nbsp;<span class="ident" id="1574950"><a href="/strconv/decimal.go.html#1574855">v</a></span>&nbsp;<span class="op" id="1574952">/</span>&nbsp;<span class="num" id="1574954">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574959"><a href="/strconv/decimal.go.html#1574855">v</a></span>&nbsp;<span class="op" id="1574961">-=</span>&nbsp;<span class="num" id="1574964">10</span>&nbsp;<span class="op" id="1574967">*</span>&nbsp;<span class="ident" id="1574969"><a href="/strconv/decimal.go.html#1574944">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574974"><a href="/strconv/decimal.go.html#1574872">buf</a></span><span class="op" id="1574977">[</span><span class="ident" id="1574978"><a href="/strconv/decimal.go.html#1574922">n</a></span><span class="op" id="1574979">]</span>&nbsp;<span class="op" id="1574981">=</span>&nbsp;<span class="builtintype" id="1574983">byte</span><span class="op" id="1574987">(</span><span class="ident" id="1574988"><a href="/strconv/decimal.go.html#1574855">v</a></span>&nbsp;<span class="op" id="1574990">+</span>&nbsp;<span class="string" id="1574992">&#39;0&#39;</span><span class="op" id="1574995">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574999"><a href="/strconv/decimal.go.html#1574922">n</a></span><span class="op" id="1575000">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575005"><a href="/strconv/decimal.go.html#1574855">v</a></span>&nbsp;<span class="op" id="1575007">=</span>&nbsp;<span class="ident" id="1575009"><a href="/strconv/decimal.go.html#1574944">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1575017">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575070"><a href="/strconv/decimal.go.html#1574836">a</a></span><span class="op" id="1575071">.</span><span class="ident" id="1575072">nd</span>&nbsp;<span class="op" id="1575075">=</span>&nbsp;<span class="num" id="1575077">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575080">for</span>&nbsp;<span class="ident" id="1575084"><a href="/strconv/decimal.go.html#1574922">n</a></span><span class="op" id="1575085">--</span><span class="op" id="1575087">;</span>&nbsp;<span class="ident" id="1575089"><a href="/strconv/decimal.go.html#1574922">n</a></span>&nbsp;<span class="op" id="1575091">&gt;=</span>&nbsp;<span class="num" id="1575094">0</span><span class="op" id="1575095">;</span>&nbsp;<span class="ident" id="1575097"><a href="/strconv/decimal.go.html#1574922">n</a></span><span class="op" id="1575098">--</span>&nbsp;<span class="op" id="1575101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575105"><a href="/strconv/decimal.go.html#1574836">a</a></span><span class="op" id="1575106">.</span><span class="ident" id="1575107">d</span><span class="op" id="1575108">[</span><span class="ident" id="1575109"><a href="/strconv/decimal.go.html#1574836">a</a></span><span class="op" id="1575110">.</span><span class="ident" id="1575111">nd</span><span class="op" id="1575113">]</span>&nbsp;<span class="op" id="1575115">=</span>&nbsp;<span class="ident" id="1575117"><a href="/strconv/decimal.go.html#1574872">buf</a></span><span class="op" id="1575120">[</span><span class="ident" id="1575121"><a href="/strconv/decimal.go.html#1574922">n</a></span><span class="op" id="1575122">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575126"><a href="/strconv/decimal.go.html#1574836">a</a></span><span class="op" id="1575127">.</span><span class="ident" id="1575128">nd</span><span class="op" id="1575130">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575134">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575137"><a href="/strconv/decimal.go.html#1574836">a</a></span><span class="op" id="1575138">.</span><span class="ident" id="1575139">dp</span>&nbsp;<span class="op" id="1575142">=</span>&nbsp;<span class="ident" id="1575144"><a href="/strconv/decimal.go.html#1574836">a</a></span><span class="op" id="1575145">.</span><span class="ident" id="1575146">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575150"><a href="/strconv/decimal.go.html#1574710">trim</a></span><span class="op" id="1575154">(</span><span class="ident" id="1575155"><a href="/strconv/decimal.go.html#1574836">a</a></span><span class="op" id="1575156">)</span><br>
<span class="lineno"></span><span class="op" id="1575158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1575161">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="1575223">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="1575294">const</span>&nbsp;<span class="ident" id="1575300">maxShift</span>&nbsp;<span class="op" id="1575309">=</span>&nbsp;<span class="num" id="1575311">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1575315">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1575388">func</span>&nbsp;<span class="ident" id="1575393">rightShift</span><span class="op" id="1575403">(</span><span class="ident" id="1575404">a</span>&nbsp;<span class="op" id="1575406">*</span><span class="ident" id="1575407"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1575414">,</span>&nbsp;<span class="ident" id="1575416">k</span>&nbsp;<span class="builtintype" id="1575418">uint</span><span class="op" id="1575422">)</span>&nbsp;<span class="op" id="1575424">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575427">r</span>&nbsp;<span class="op" id="1575429">:=</span>&nbsp;<span class="num" id="1575432">0</span>&nbsp;<span class="comment" id="1575434">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575451">w</span>&nbsp;<span class="op" id="1575453">:=</span>&nbsp;<span class="num" id="1575456">0</span>&nbsp;<span class="comment" id="1575458">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1575477">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575533">n</span>&nbsp;<span class="op" id="1575535">:=</span>&nbsp;<span class="num" id="1575538">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575541">for</span>&nbsp;<span class="op" id="1575545">;</span>&nbsp;<span class="ident" id="1575547"><a href="/strconv/decimal.go.html#1575533">n</a></span><span class="op" id="1575548">&gt;&gt;</span><span class="ident" id="1575550"><a href="/strconv/decimal.go.html#1575416">k</a></span>&nbsp;<span class="op" id="1575552">==</span>&nbsp;<span class="num" id="1575555">0</span><span class="op" id="1575556">;</span>&nbsp;<span class="ident" id="1575558"><a href="/strconv/decimal.go.html#1575427">r</a></span><span class="op" id="1575559">++</span>&nbsp;<span class="op" id="1575562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575566">if</span>&nbsp;<span class="ident" id="1575569"><a href="/strconv/decimal.go.html#1575427">r</a></span>&nbsp;<span class="op" id="1575571">&gt;=</span>&nbsp;<span class="ident" id="1575574"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1575575">.</span><span class="ident" id="1575576">nd</span>&nbsp;<span class="op" id="1575579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575584">if</span>&nbsp;<span class="ident" id="1575587"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1575589">==</span>&nbsp;<span class="num" id="1575592">0</span>&nbsp;<span class="op" id="1575594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1575600">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575654"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1575655">.</span><span class="ident" id="1575656">nd</span>&nbsp;<span class="op" id="1575659">=</span>&nbsp;<span class="num" id="1575661">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575667">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575682">for</span>&nbsp;<span class="ident" id="1575686"><a href="/strconv/decimal.go.html#1575533">n</a></span><span class="op" id="1575687">&gt;&gt;</span><span class="ident" id="1575689"><a href="/strconv/decimal.go.html#1575416">k</a></span>&nbsp;<span class="op" id="1575691">==</span>&nbsp;<span class="num" id="1575694">0</span>&nbsp;<span class="op" id="1575696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575702"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1575704">=</span>&nbsp;<span class="ident" id="1575706"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1575708">*</span>&nbsp;<span class="num" id="1575710">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575717"><a href="/strconv/decimal.go.html#1575427">r</a></span><span class="op" id="1575718">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575729">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575741">c</span>&nbsp;<span class="op" id="1575743">:=</span>&nbsp;<span class="builtintype" id="1575746">int</span><span class="op" id="1575749">(</span><span class="ident" id="1575750"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1575751">.</span><span class="ident" id="1575752">d</span><span class="op" id="1575753">[</span><span class="ident" id="1575754"><a href="/strconv/decimal.go.html#1575427">r</a></span><span class="op" id="1575755">]</span><span class="op" id="1575756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575760"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1575762">=</span>&nbsp;<span class="ident" id="1575764"><a href="/strconv/decimal.go.html#1575533">n</a></span><span class="op" id="1575765">*</span><span class="num" id="1575766">10</span>&nbsp;<span class="op" id="1575769">+</span>&nbsp;<span class="ident" id="1575771"><a href="/strconv/decimal.go.html#1575741">c</a></span>&nbsp;<span class="op" id="1575773">-</span>&nbsp;<span class="string" id="1575775">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575783"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1575784">.</span><span class="ident" id="1575785">dp</span>&nbsp;<span class="op" id="1575788">-=</span>&nbsp;<span class="ident" id="1575791"><a href="/strconv/decimal.go.html#1575427">r</a></span>&nbsp;<span class="op" id="1575793">-</span>&nbsp;<span class="num" id="1575795">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1575799">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575838">for</span>&nbsp;<span class="op" id="1575842">;</span>&nbsp;<span class="ident" id="1575844"><a href="/strconv/decimal.go.html#1575427">r</a></span>&nbsp;<span class="op" id="1575846">&lt;</span>&nbsp;<span class="ident" id="1575848"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1575849">.</span><span class="ident" id="1575850">nd</span><span class="op" id="1575852">;</span>&nbsp;<span class="ident" id="1575854"><a href="/strconv/decimal.go.html#1575427">r</a></span><span class="op" id="1575855">++</span>&nbsp;<span class="op" id="1575858">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575862">c</span>&nbsp;<span class="op" id="1575864">:=</span>&nbsp;<span class="builtintype" id="1575867">int</span><span class="op" id="1575870">(</span><span class="ident" id="1575871"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1575872">.</span><span class="ident" id="1575873">d</span><span class="op" id="1575874">[</span><span class="ident" id="1575875"><a href="/strconv/decimal.go.html#1575427">r</a></span><span class="op" id="1575876">]</span><span class="op" id="1575877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575881">dig</span>&nbsp;<span class="op" id="1575885">:=</span>&nbsp;<span class="ident" id="1575888"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1575890">&gt;&gt;</span>&nbsp;<span class="ident" id="1575893"><a href="/strconv/decimal.go.html#1575416">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575897"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1575899">-=</span>&nbsp;<span class="ident" id="1575902"><a href="/strconv/decimal.go.html#1575881">dig</a></span>&nbsp;<span class="op" id="1575906">&lt;&lt;</span>&nbsp;<span class="ident" id="1575909"><a href="/strconv/decimal.go.html#1575416">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575913"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1575914">.</span><span class="ident" id="1575915">d</span><span class="op" id="1575916">[</span><span class="ident" id="1575917"><a href="/strconv/decimal.go.html#1575451">w</a></span><span class="op" id="1575918">]</span>&nbsp;<span class="op" id="1575920">=</span>&nbsp;<span class="builtintype" id="1575922">byte</span><span class="op" id="1575926">(</span><span class="ident" id="1575927"><a href="/strconv/decimal.go.html#1575881">dig</a></span>&nbsp;<span class="op" id="1575931">+</span>&nbsp;<span class="string" id="1575933">&#39;0&#39;</span><span class="op" id="1575936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575940"><a href="/strconv/decimal.go.html#1575451">w</a></span><span class="op" id="1575941">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575946"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1575948">=</span>&nbsp;<span class="ident" id="1575950"><a href="/strconv/decimal.go.html#1575533">n</a></span><span class="op" id="1575951">*</span><span class="num" id="1575952">10</span>&nbsp;<span class="op" id="1575955">+</span>&nbsp;<span class="ident" id="1575957"><a href="/strconv/decimal.go.html#1575862">c</a></span>&nbsp;<span class="op" id="1575959">-</span>&nbsp;<span class="string" id="1575961">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1575970">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575997">for</span>&nbsp;<span class="ident" id="1576001"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1576003">&gt;</span>&nbsp;<span class="num" id="1576005">0</span>&nbsp;<span class="op" id="1576007">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576011">dig</span>&nbsp;<span class="op" id="1576015">:=</span>&nbsp;<span class="ident" id="1576018"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1576020">&gt;&gt;</span>&nbsp;<span class="ident" id="1576023"><a href="/strconv/decimal.go.html#1575416">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576027"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1576029">-=</span>&nbsp;<span class="ident" id="1576032"><a href="/strconv/decimal.go.html#1576011">dig</a></span>&nbsp;<span class="op" id="1576036">&lt;&lt;</span>&nbsp;<span class="ident" id="1576039"><a href="/strconv/decimal.go.html#1575416">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576043">if</span>&nbsp;<span class="ident" id="1576046"><a href="/strconv/decimal.go.html#1575451">w</a></span>&nbsp;<span class="op" id="1576048">&lt;</span>&nbsp;<span class="builtinfunc" id="1576050">len</span><span class="op" id="1576053">(</span><span class="ident" id="1576054"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1576055">.</span><span class="ident" id="1576056">d</span><span class="op" id="1576057">)</span>&nbsp;<span class="op" id="1576059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576064"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1576065">.</span><span class="ident" id="1576066">d</span><span class="op" id="1576067">[</span><span class="ident" id="1576068"><a href="/strconv/decimal.go.html#1575451">w</a></span><span class="op" id="1576069">]</span>&nbsp;<span class="op" id="1576071">=</span>&nbsp;<span class="builtintype" id="1576073">byte</span><span class="op" id="1576077">(</span><span class="ident" id="1576078"><a href="/strconv/decimal.go.html#1576011">dig</a></span>&nbsp;<span class="op" id="1576082">+</span>&nbsp;<span class="string" id="1576084">&#39;0&#39;</span><span class="op" id="1576087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576092"><a href="/strconv/decimal.go.html#1575451">w</a></span><span class="op" id="1576093">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576098">}</span>&nbsp;<span class="keyword" id="1576100">else</span>&nbsp;<span class="keyword" id="1576105">if</span>&nbsp;<span class="ident" id="1576108"><a href="/strconv/decimal.go.html#1576011">dig</a></span>&nbsp;<span class="op" id="1576112">&gt;</span>&nbsp;<span class="num" id="1576114">0</span>&nbsp;<span class="op" id="1576116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576121"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1576122">.</span><span class="ident" id="1576123">trunc</span>&nbsp;<span class="op" id="1576129">=</span>&nbsp;<span class="ident" id="1576131">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576142"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1576144">=</span>&nbsp;<span class="ident" id="1576146"><a href="/strconv/decimal.go.html#1575533">n</a></span>&nbsp;<span class="op" id="1576148">*</span>&nbsp;<span class="num" id="1576150">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576154">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576158"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1576159">.</span><span class="ident" id="1576160">nd</span>&nbsp;<span class="op" id="1576163">=</span>&nbsp;<span class="ident" id="1576165"><a href="/strconv/decimal.go.html#1575451">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576168"><a href="/strconv/decimal.go.html#1574710">trim</a></span><span class="op" id="1576172">(</span><span class="ident" id="1576173"><a href="/strconv/decimal.go.html#1575404">a</a></span><span class="op" id="1576174">)</span><br>
<span class="lineno"></span><span class="op" id="1576176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="1576179">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="1576246">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="1576309">//</span><br>
<span class="lineno"></span><span class="comment" id="1576312">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1576373">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="1576442">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="1576512">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="1576560">//</span><br>
<span class="lineno"></span><span class="comment" id="1576563">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="1576602">type</span>&nbsp;<span class="ident" id="1576607">leftCheat</span>&nbsp;<span class="keyword" id="1576617">struct</span>&nbsp;<span class="op" id="1576624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576627">delta</span>&nbsp;&nbsp;<span class="builtintype" id="1576634">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1576641">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576666">cutoff</span>&nbsp;<span class="builtintype" id="1576673">string</span>&nbsp;<span class="comment" id="1576680">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="1576718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="1576721">var</span>&nbsp;<span class="ident" id="1576725">leftcheats</span>&nbsp;<span class="op" id="1576736">=</span>&nbsp;<span class="op" id="1576738">[</span><span class="op" id="1576739">]</span><span class="ident" id="1576740"><a href="/strconv/decimal.go.html#1576607">leftCheat</a></span><span class="op" id="1576749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1576752">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1576787">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1576842">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1576878">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspseq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspawk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspprintf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspint(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577082">{</span><span class="num" id="1577083">0</span><span class="op" id="1577084">,</span>&nbsp;<span class="string" id="1577086">&#34;&#34;</span><span class="op" id="1577088">}</span><span class="op" id="1577089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577092">{</span><span class="num" id="1577093">1</span><span class="op" id="1577094">,</span>&nbsp;<span class="string" id="1577096">&#34;5&#34;</span><span class="op" id="1577099">}</span><span class="op" id="1577100">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577120">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577128">{</span><span class="num" id="1577129">1</span><span class="op" id="1577130">,</span>&nbsp;<span class="string" id="1577132">&#34;25&#34;</span><span class="op" id="1577136">}</span><span class="op" id="1577137">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577156">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577164">{</span><span class="num" id="1577165">1</span><span class="op" id="1577166">,</span>&nbsp;<span class="string" id="1577168">&#34;125&#34;</span><span class="op" id="1577173">}</span><span class="op" id="1577174">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577192">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577200">{</span><span class="num" id="1577201">2</span><span class="op" id="1577202">,</span>&nbsp;<span class="string" id="1577204">&#34;625&#34;</span><span class="op" id="1577209">}</span><span class="op" id="1577210">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577228">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577237">{</span><span class="num" id="1577238">2</span><span class="op" id="1577239">,</span>&nbsp;<span class="string" id="1577241">&#34;3125&#34;</span><span class="op" id="1577247">}</span><span class="op" id="1577248">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577265">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577274">{</span><span class="num" id="1577275">2</span><span class="op" id="1577276">,</span>&nbsp;<span class="string" id="1577278">&#34;15625&#34;</span><span class="op" id="1577285">}</span><span class="op" id="1577286">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577302">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577311">{</span><span class="num" id="1577312">3</span><span class="op" id="1577313">,</span>&nbsp;<span class="string" id="1577315">&#34;78125&#34;</span><span class="op" id="1577322">}</span><span class="op" id="1577323">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577339">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577349">{</span><span class="num" id="1577350">3</span><span class="op" id="1577351">,</span>&nbsp;<span class="string" id="1577353">&#34;390625&#34;</span><span class="op" id="1577361">}</span><span class="op" id="1577362">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577377">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577387">{</span><span class="num" id="1577388">3</span><span class="op" id="1577389">,</span>&nbsp;<span class="string" id="1577391">&#34;1953125&#34;</span><span class="op" id="1577400">}</span><span class="op" id="1577401">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577415">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577425">{</span><span class="num" id="1577426">4</span><span class="op" id="1577427">,</span>&nbsp;<span class="string" id="1577429">&#34;9765625&#34;</span><span class="op" id="1577438">}</span><span class="op" id="1577439">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577453">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577464">{</span><span class="num" id="1577465">4</span><span class="op" id="1577466">,</span>&nbsp;<span class="string" id="1577468">&#34;48828125&#34;</span><span class="op" id="1577478">}</span><span class="op" id="1577479">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577492">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577503">{</span><span class="num" id="1577504">4</span><span class="op" id="1577505">,</span>&nbsp;<span class="string" id="1577507">&#34;244140625&#34;</span><span class="op" id="1577518">}</span><span class="op" id="1577519">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577531">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577542">{</span><span class="num" id="1577543">4</span><span class="op" id="1577544">,</span>&nbsp;<span class="string" id="1577546">&#34;1220703125&#34;</span><span class="op" id="1577558">}</span><span class="op" id="1577559">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577570">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577581">{</span><span class="num" id="1577582">5</span><span class="op" id="1577583">,</span>&nbsp;<span class="string" id="1577585">&#34;6103515625&#34;</span><span class="op" id="1577597">}</span><span class="op" id="1577598">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577609">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577621">{</span><span class="num" id="1577622">5</span><span class="op" id="1577623">,</span>&nbsp;<span class="string" id="1577625">&#34;30517578125&#34;</span><span class="op" id="1577638">}</span><span class="op" id="1577639">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577649">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577661">{</span><span class="num" id="1577662">5</span><span class="op" id="1577663">,</span>&nbsp;<span class="string" id="1577665">&#34;152587890625&#34;</span><span class="op" id="1577679">}</span><span class="op" id="1577680">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577689">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577701">{</span><span class="num" id="1577702">6</span><span class="op" id="1577703">,</span>&nbsp;<span class="string" id="1577705">&#34;762939453125&#34;</span><span class="op" id="1577719">}</span><span class="op" id="1577720">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577729">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577742">{</span><span class="num" id="1577743">6</span><span class="op" id="1577744">,</span>&nbsp;<span class="string" id="1577746">&#34;3814697265625&#34;</span><span class="op" id="1577761">}</span><span class="op" id="1577762">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577770">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577783">{</span><span class="num" id="1577784">6</span><span class="op" id="1577785">,</span>&nbsp;<span class="string" id="1577787">&#34;19073486328125&#34;</span><span class="op" id="1577803">}</span><span class="op" id="1577804">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577811">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577824">{</span><span class="num" id="1577825">7</span><span class="op" id="1577826">,</span>&nbsp;<span class="string" id="1577828">&#34;95367431640625&#34;</span><span class="op" id="1577844">}</span><span class="op" id="1577845">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577852">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577866">{</span><span class="num" id="1577867">7</span><span class="op" id="1577868">,</span>&nbsp;<span class="string" id="1577870">&#34;476837158203125&#34;</span><span class="op" id="1577887">}</span><span class="op" id="1577888">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577894">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577908">{</span><span class="num" id="1577909">7</span><span class="op" id="1577910">,</span>&nbsp;<span class="string" id="1577912">&#34;2384185791015625&#34;</span><span class="op" id="1577930">}</span><span class="op" id="1577931">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577936">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577950">{</span><span class="num" id="1577951">7</span><span class="op" id="1577952">,</span>&nbsp;<span class="string" id="1577954">&#34;11920928955078125&#34;</span><span class="op" id="1577973">}</span><span class="op" id="1577974">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1577978">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577992">{</span><span class="num" id="1577993">8</span><span class="op" id="1577994">,</span>&nbsp;<span class="string" id="1577996">&#34;59604644775390625&#34;</span><span class="op" id="1578015">}</span><span class="op" id="1578016">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1578020">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578035">{</span><span class="num" id="1578036">8</span><span class="op" id="1578037">,</span>&nbsp;<span class="string" id="1578039">&#34;298023223876953125&#34;</span><span class="op" id="1578059">}</span><span class="op" id="1578060">,</span>&nbsp;&nbsp;<span class="comment" id="1578063">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578078">{</span><span class="num" id="1578079">8</span><span class="op" id="1578080">,</span>&nbsp;<span class="string" id="1578082">&#34;1490116119384765625&#34;</span><span class="op" id="1578103">}</span><span class="op" id="1578104">,</span>&nbsp;<span class="comment" id="1578106">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578121">{</span><span class="num" id="1578122">9</span><span class="op" id="1578123">,</span>&nbsp;<span class="string" id="1578125">&#34;7450580596923828125&#34;</span><span class="op" id="1578146">}</span><span class="op" id="1578147">,</span>&nbsp;<span class="comment" id="1578149">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="1578164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1578167">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="1578228">func</span>&nbsp;<span class="ident" id="1578233">prefixIsLessThan</span><span class="op" id="1578249">(</span><span class="ident" id="1578250">b</span>&nbsp;<span class="op" id="1578252">[</span><span class="op" id="1578253">]</span><span class="builtintype" id="1578254">byte</span><span class="op" id="1578258">,</span>&nbsp;<span class="ident" id="1578260">s</span>&nbsp;<span class="builtintype" id="1578262">string</span><span class="op" id="1578268">)</span>&nbsp;<span class="builtintype" id="1578270">bool</span>&nbsp;<span class="op" id="1578275">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578278">for</span>&nbsp;<span class="ident" id="1578282">i</span>&nbsp;<span class="op" id="1578284">:=</span>&nbsp;<span class="num" id="1578287">0</span><span class="op" id="1578288">;</span>&nbsp;<span class="ident" id="1578290"><a href="/strconv/decimal.go.html#1578282">i</a></span>&nbsp;<span class="op" id="1578292">&lt;</span>&nbsp;<span class="builtinfunc" id="1578294">len</span><span class="op" id="1578297">(</span><span class="ident" id="1578298"><a href="/strconv/decimal.go.html#1578260">s</a></span><span class="op" id="1578299">)</span><span class="op" id="1578300">;</span>&nbsp;<span class="ident" id="1578302"><a href="/strconv/decimal.go.html#1578282">i</a></span><span class="op" id="1578303">++</span>&nbsp;<span class="op" id="1578306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578310">if</span>&nbsp;<span class="ident" id="1578313"><a href="/strconv/decimal.go.html#1578282">i</a></span>&nbsp;<span class="op" id="1578315">&gt;=</span>&nbsp;<span class="builtinfunc" id="1578318">len</span><span class="op" id="1578321">(</span><span class="ident" id="1578322"><a href="/strconv/decimal.go.html#1578250">b</a></span><span class="op" id="1578323">)</span>&nbsp;<span class="op" id="1578325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578330">return</span>&nbsp;<span class="ident" id="1578337">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578348">if</span>&nbsp;<span class="ident" id="1578351"><a href="/strconv/decimal.go.html#1578250">b</a></span><span class="op" id="1578352">[</span><span class="ident" id="1578353"><a href="/strconv/decimal.go.html#1578282">i</a></span><span class="op" id="1578354">]</span>&nbsp;<span class="op" id="1578356">!=</span>&nbsp;<span class="ident" id="1578359"><a href="/strconv/decimal.go.html#1578260">s</a></span><span class="op" id="1578360">[</span><span class="ident" id="1578361"><a href="/strconv/decimal.go.html#1578282">i</a></span><span class="op" id="1578362">]</span>&nbsp;<span class="op" id="1578364">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578369">return</span>&nbsp;<span class="ident" id="1578376"><a href="/strconv/decimal.go.html#1578250">b</a></span><span class="op" id="1578377">[</span><span class="ident" id="1578378"><a href="/strconv/decimal.go.html#1578282">i</a></span><span class="op" id="1578379">]</span>&nbsp;<span class="op" id="1578381">&lt;</span>&nbsp;<span class="ident" id="1578383"><a href="/strconv/decimal.go.html#1578260">s</a></span><span class="op" id="1578384">[</span><span class="ident" id="1578385"><a href="/strconv/decimal.go.html#1578282">i</a></span><span class="op" id="1578386">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578396">return</span>&nbsp;<span class="ident" id="1578403">false</span><br>
<span class="lineno"></span><span class="op" id="1578409">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="1578412">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1578484">func</span>&nbsp;<span class="ident" id="1578489">leftShift</span><span class="op" id="1578498">(</span><span class="ident" id="1578499">a</span>&nbsp;<span class="op" id="1578501">*</span><span class="ident" id="1578502"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1578509">,</span>&nbsp;<span class="ident" id="1578511">k</span>&nbsp;<span class="builtintype" id="1578513">uint</span><span class="op" id="1578517">)</span>&nbsp;<span class="op" id="1578519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578522">delta</span>&nbsp;<span class="op" id="1578528">:=</span>&nbsp;<span class="ident" id="1578531"><a href="/strconv/decimal.go.html#1576725">leftcheats</a></span><span class="op" id="1578541">[</span><span class="ident" id="1578542"><a href="/strconv/decimal.go.html#1578511">k</a></span><span class="op" id="1578543">]</span><span class="op" id="1578544">.</span><span class="ident" id="1578545">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578552">if</span>&nbsp;<span class="ident" id="1578555"><a href="/strconv/decimal.go.html#1578233">prefixIsLessThan</a></span><span class="op" id="1578571">(</span><span class="ident" id="1578572"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1578573">.</span><span class="ident" id="1578574">d</span><span class="op" id="1578575">[</span><span class="num" id="1578576">0</span><span class="op" id="1578577">:</span><span class="ident" id="1578578"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1578579">.</span><span class="ident" id="1578580">nd</span><span class="op" id="1578582">]</span><span class="op" id="1578583">,</span>&nbsp;<span class="ident" id="1578585"><a href="/strconv/decimal.go.html#1576725">leftcheats</a></span><span class="op" id="1578595">[</span><span class="ident" id="1578596"><a href="/strconv/decimal.go.html#1578511">k</a></span><span class="op" id="1578597">]</span><span class="op" id="1578598">.</span><span class="ident" id="1578599">cutoff</span><span class="op" id="1578605">)</span>&nbsp;<span class="op" id="1578607">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578611"><a href="/strconv/decimal.go.html#1578522">delta</a></span><span class="op" id="1578616">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578624">r</span>&nbsp;<span class="op" id="1578626">:=</span>&nbsp;<span class="ident" id="1578629"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1578630">.</span><span class="ident" id="1578631">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1578642">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578657">w</span>&nbsp;<span class="op" id="1578659">:=</span>&nbsp;<span class="ident" id="1578662"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1578663">.</span><span class="ident" id="1578664">nd</span>&nbsp;<span class="op" id="1578667">+</span>&nbsp;<span class="ident" id="1578669"><a href="/strconv/decimal.go.html#1578522">delta</a></span>&nbsp;<span class="comment" id="1578675">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578691">n</span>&nbsp;<span class="op" id="1578693">:=</span>&nbsp;<span class="num" id="1578696">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1578700">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578739">for</span>&nbsp;<span class="ident" id="1578743"><a href="/strconv/decimal.go.html#1578624">r</a></span><span class="op" id="1578744">--</span><span class="op" id="1578746">;</span>&nbsp;<span class="ident" id="1578748"><a href="/strconv/decimal.go.html#1578624">r</a></span>&nbsp;<span class="op" id="1578750">&gt;=</span>&nbsp;<span class="num" id="1578753">0</span><span class="op" id="1578754">;</span>&nbsp;<span class="ident" id="1578756"><a href="/strconv/decimal.go.html#1578624">r</a></span><span class="op" id="1578757">--</span>&nbsp;<span class="op" id="1578760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578764"><a href="/strconv/decimal.go.html#1578691">n</a></span>&nbsp;<span class="op" id="1578766">+=</span>&nbsp;<span class="op" id="1578769">(</span><span class="builtintype" id="1578770">int</span><span class="op" id="1578773">(</span><span class="ident" id="1578774"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1578775">.</span><span class="ident" id="1578776">d</span><span class="op" id="1578777">[</span><span class="ident" id="1578778"><a href="/strconv/decimal.go.html#1578624">r</a></span><span class="op" id="1578779">]</span><span class="op" id="1578780">)</span>&nbsp;<span class="op" id="1578782">-</span>&nbsp;<span class="string" id="1578784">&#39;0&#39;</span><span class="op" id="1578787">)</span>&nbsp;<span class="op" id="1578789">&lt;&lt;</span>&nbsp;<span class="ident" id="1578792"><a href="/strconv/decimal.go.html#1578511">k</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578796">quo</span>&nbsp;<span class="op" id="1578800">:=</span>&nbsp;<span class="ident" id="1578803"><a href="/strconv/decimal.go.html#1578691">n</a></span>&nbsp;<span class="op" id="1578805">/</span>&nbsp;<span class="num" id="1578807">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578812">rem</span>&nbsp;<span class="op" id="1578816">:=</span>&nbsp;<span class="ident" id="1578819"><a href="/strconv/decimal.go.html#1578691">n</a></span>&nbsp;<span class="op" id="1578821">-</span>&nbsp;<span class="num" id="1578823">10</span><span class="op" id="1578825">*</span><span class="ident" id="1578826"><a href="/strconv/decimal.go.html#1578796">quo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578832"><a href="/strconv/decimal.go.html#1578657">w</a></span><span class="op" id="1578833">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578838">if</span>&nbsp;<span class="ident" id="1578841"><a href="/strconv/decimal.go.html#1578657">w</a></span>&nbsp;<span class="op" id="1578843">&lt;</span>&nbsp;<span class="builtinfunc" id="1578845">len</span><span class="op" id="1578848">(</span><span class="ident" id="1578849"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1578850">.</span><span class="ident" id="1578851">d</span><span class="op" id="1578852">)</span>&nbsp;<span class="op" id="1578854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578859"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1578860">.</span><span class="ident" id="1578861">d</span><span class="op" id="1578862">[</span><span class="ident" id="1578863"><a href="/strconv/decimal.go.html#1578657">w</a></span><span class="op" id="1578864">]</span>&nbsp;<span class="op" id="1578866">=</span>&nbsp;<span class="builtintype" id="1578868">byte</span><span class="op" id="1578872">(</span><span class="ident" id="1578873"><a href="/strconv/decimal.go.html#1578812">rem</a></span>&nbsp;<span class="op" id="1578877">+</span>&nbsp;<span class="string" id="1578879">&#39;0&#39;</span><span class="op" id="1578882">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578886">}</span>&nbsp;<span class="keyword" id="1578888">else</span>&nbsp;<span class="keyword" id="1578893">if</span>&nbsp;<span class="ident" id="1578896"><a href="/strconv/decimal.go.html#1578812">rem</a></span>&nbsp;<span class="op" id="1578900">!=</span>&nbsp;<span class="num" id="1578903">0</span>&nbsp;<span class="op" id="1578905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578910"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1578911">.</span><span class="ident" id="1578912">trunc</span>&nbsp;<span class="op" id="1578918">=</span>&nbsp;<span class="ident" id="1578920">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578931"><a href="/strconv/decimal.go.html#1578691">n</a></span>&nbsp;<span class="op" id="1578933">=</span>&nbsp;<span class="ident" id="1578935"><a href="/strconv/decimal.go.html#1578796">quo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578940">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1578944">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578971">for</span>&nbsp;<span class="ident" id="1578975"><a href="/strconv/decimal.go.html#1578691">n</a></span>&nbsp;<span class="op" id="1578977">&gt;</span>&nbsp;<span class="num" id="1578979">0</span>&nbsp;<span class="op" id="1578981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578985">quo</span>&nbsp;<span class="op" id="1578989">:=</span>&nbsp;<span class="ident" id="1578992"><a href="/strconv/decimal.go.html#1578691">n</a></span>&nbsp;<span class="op" id="1578994">/</span>&nbsp;<span class="num" id="1578996">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579001">rem</span>&nbsp;<span class="op" id="1579005">:=</span>&nbsp;<span class="ident" id="1579008"><a href="/strconv/decimal.go.html#1578691">n</a></span>&nbsp;<span class="op" id="1579010">-</span>&nbsp;<span class="num" id="1579012">10</span><span class="op" id="1579014">*</span><span class="ident" id="1579015"><a href="/strconv/decimal.go.html#1578985">quo</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579021"><a href="/strconv/decimal.go.html#1578657">w</a></span><span class="op" id="1579022">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579027">if</span>&nbsp;<span class="ident" id="1579030"><a href="/strconv/decimal.go.html#1578657">w</a></span>&nbsp;<span class="op" id="1579032">&lt;</span>&nbsp;<span class="builtinfunc" id="1579034">len</span><span class="op" id="1579037">(</span><span class="ident" id="1579038"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579039">.</span><span class="ident" id="1579040">d</span><span class="op" id="1579041">)</span>&nbsp;<span class="op" id="1579043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579048"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579049">.</span><span class="ident" id="1579050">d</span><span class="op" id="1579051">[</span><span class="ident" id="1579052"><a href="/strconv/decimal.go.html#1578657">w</a></span><span class="op" id="1579053">]</span>&nbsp;<span class="op" id="1579055">=</span>&nbsp;<span class="builtintype" id="1579057">byte</span><span class="op" id="1579061">(</span><span class="ident" id="1579062"><a href="/strconv/decimal.go.html#1579001">rem</a></span>&nbsp;<span class="op" id="1579066">+</span>&nbsp;<span class="string" id="1579068">&#39;0&#39;</span><span class="op" id="1579071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579075">}</span>&nbsp;<span class="keyword" id="1579077">else</span>&nbsp;<span class="keyword" id="1579082">if</span>&nbsp;<span class="ident" id="1579085"><a href="/strconv/decimal.go.html#1579001">rem</a></span>&nbsp;<span class="op" id="1579089">!=</span>&nbsp;<span class="num" id="1579092">0</span>&nbsp;<span class="op" id="1579094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579099"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579100">.</span><span class="ident" id="1579101">trunc</span>&nbsp;<span class="op" id="1579107">=</span>&nbsp;<span class="ident" id="1579109">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579120"><a href="/strconv/decimal.go.html#1578691">n</a></span>&nbsp;<span class="op" id="1579122">=</span>&nbsp;<span class="ident" id="1579124"><a href="/strconv/decimal.go.html#1578985">quo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579133"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579134">.</span><span class="ident" id="1579135">nd</span>&nbsp;<span class="op" id="1579138">+=</span>&nbsp;<span class="ident" id="1579141"><a href="/strconv/decimal.go.html#1578522">delta</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579148">if</span>&nbsp;<span class="ident" id="1579151"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579152">.</span><span class="ident" id="1579153">nd</span>&nbsp;<span class="op" id="1579156">&gt;=</span>&nbsp;<span class="builtinfunc" id="1579159">len</span><span class="op" id="1579162">(</span><span class="ident" id="1579163"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579164">.</span><span class="ident" id="1579165">d</span><span class="op" id="1579166">)</span>&nbsp;<span class="op" id="1579168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579172"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579173">.</span><span class="ident" id="1579174">nd</span>&nbsp;<span class="op" id="1579177">=</span>&nbsp;<span class="builtinfunc" id="1579179">len</span><span class="op" id="1579182">(</span><span class="ident" id="1579183"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579184">.</span><span class="ident" id="1579185">d</span><span class="op" id="1579186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579192"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579193">.</span><span class="ident" id="1579194">dp</span>&nbsp;<span class="op" id="1579197">+=</span>&nbsp;<span class="ident" id="1579200"><a href="/strconv/decimal.go.html#1578522">delta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579207"><a href="/strconv/decimal.go.html#1574710">trim</a></span><span class="op" id="1579211">(</span><span class="ident" id="1579212"><a href="/strconv/decimal.go.html#1578499">a</a></span><span class="op" id="1579213">)</span><br>
<span class="lineno">275</span><span class="op" id="1579215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1579218">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="1579265">func</span>&nbsp;<span class="op" id="1579270">(</span><span class="ident" id="1579271">a</span>&nbsp;<span class="op" id="1579273">*</span><span class="ident" id="1579274"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1579281">)</span>&nbsp;<span class="ident" id="1579283">Shift</span><span class="op" id="1579288">(</span><span class="ident" id="1579289">k</span>&nbsp;<span class="builtintype" id="1579291">int</span><span class="op" id="1579294">)</span>&nbsp;<span class="op" id="1579296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579299">switch</span>&nbsp;<span class="op" id="1579306">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579309">case</span>&nbsp;<span class="ident" id="1579314"><a href="/strconv/decimal.go.html#1579271">a</a></span><span class="op" id="1579315">.</span><span class="ident" id="1579316">nd</span>&nbsp;<span class="op" id="1579319">==</span>&nbsp;<span class="num" id="1579322">0</span><span class="op" id="1579323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1579327">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579353">case</span>&nbsp;<span class="ident" id="1579358"><a href="/strconv/decimal.go.html#1579289">k</a></span>&nbsp;<span class="op" id="1579360">&gt;</span>&nbsp;<span class="num" id="1579362">0</span><span class="op" id="1579363">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579367">for</span>&nbsp;<span class="ident" id="1579371"><a href="/strconv/decimal.go.html#1579289">k</a></span>&nbsp;<span class="op" id="1579373">&gt;</span>&nbsp;<span class="ident" id="1579375"><a href="/strconv/decimal.go.html#1575300">maxShift</a></span>&nbsp;<span class="op" id="1579384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579389"><a href="/strconv/decimal.go.html#1578489">leftShift</a></span><span class="op" id="1579398">(</span><span class="ident" id="1579399"><a href="/strconv/decimal.go.html#1579271">a</a></span><span class="op" id="1579400">,</span>&nbsp;<span class="ident" id="1579402"><a href="/strconv/decimal.go.html#1575300">maxShift</a></span><span class="op" id="1579410">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579415"><a href="/strconv/decimal.go.html#1579289">k</a></span>&nbsp;<span class="op" id="1579417">-=</span>&nbsp;<span class="ident" id="1579420"><a href="/strconv/decimal.go.html#1575300">maxShift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579435"><a href="/strconv/decimal.go.html#1578489">leftShift</a></span><span class="op" id="1579444">(</span><span class="ident" id="1579445"><a href="/strconv/decimal.go.html#1579271">a</a></span><span class="op" id="1579446">,</span>&nbsp;<span class="builtintype" id="1579448">uint</span><span class="op" id="1579452">(</span><span class="ident" id="1579453"><a href="/strconv/decimal.go.html#1579289">k</a></span><span class="op" id="1579454">)</span><span class="op" id="1579455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579458">case</span>&nbsp;<span class="ident" id="1579463"><a href="/strconv/decimal.go.html#1579289">k</a></span>&nbsp;<span class="op" id="1579465">&lt;</span>&nbsp;<span class="num" id="1579467">0</span><span class="op" id="1579468">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579472">for</span>&nbsp;<span class="ident" id="1579476"><a href="/strconv/decimal.go.html#1579289">k</a></span>&nbsp;<span class="op" id="1579478">&lt;</span>&nbsp;<span class="op" id="1579480">-</span><span class="ident" id="1579481"><a href="/strconv/decimal.go.html#1575300">maxShift</a></span>&nbsp;<span class="op" id="1579490">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579495"><a href="/strconv/decimal.go.html#1575393">rightShift</a></span><span class="op" id="1579505">(</span><span class="ident" id="1579506"><a href="/strconv/decimal.go.html#1579271">a</a></span><span class="op" id="1579507">,</span>&nbsp;<span class="ident" id="1579509"><a href="/strconv/decimal.go.html#1575300">maxShift</a></span><span class="op" id="1579517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579522"><a href="/strconv/decimal.go.html#1579289">k</a></span>&nbsp;<span class="op" id="1579524">+=</span>&nbsp;<span class="ident" id="1579527"><a href="/strconv/decimal.go.html#1575300">maxShift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579542"><a href="/strconv/decimal.go.html#1575393">rightShift</a></span><span class="op" id="1579552">(</span><span class="ident" id="1579553"><a href="/strconv/decimal.go.html#1579271">a</a></span><span class="op" id="1579554">,</span>&nbsp;<span class="builtintype" id="1579556">uint</span><span class="op" id="1579560">(</span><span class="op" id="1579561">-</span><span class="ident" id="1579562"><a href="/strconv/decimal.go.html#1579289">k</a></span><span class="op" id="1579563">)</span><span class="op" id="1579564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579567">}</span><br>
<span class="lineno">295</span><span class="op" id="1579569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1579572">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="1579622">func</span>&nbsp;<span class="ident" id="1579627">shouldRoundUp</span><span class="op" id="1579640">(</span><span class="ident" id="1579641">a</span>&nbsp;<span class="op" id="1579643">*</span><span class="ident" id="1579644"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1579651">,</span>&nbsp;<span class="ident" id="1579653">nd</span>&nbsp;<span class="builtintype" id="1579656">int</span><span class="op" id="1579659">)</span>&nbsp;<span class="builtintype" id="1579661">bool</span>&nbsp;<span class="op" id="1579666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579669">if</span>&nbsp;<span class="ident" id="1579672"><a href="/strconv/decimal.go.html#1579653">nd</a></span>&nbsp;<span class="op" id="1579675">&lt;</span>&nbsp;<span class="num" id="1579677">0</span>&nbsp;<span class="op" id="1579679">||</span>&nbsp;<span class="ident" id="1579682"><a href="/strconv/decimal.go.html#1579653">nd</a></span>&nbsp;<span class="op" id="1579685">&gt;=</span>&nbsp;<span class="ident" id="1579688"><a href="/strconv/decimal.go.html#1579641">a</a></span><span class="op" id="1579689">.</span><span class="ident" id="1579690">nd</span>&nbsp;<span class="op" id="1579693">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579697">return</span>&nbsp;<span class="ident" id="1579704">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579714">if</span>&nbsp;<span class="ident" id="1579717"><a href="/strconv/decimal.go.html#1579641">a</a></span><span class="op" id="1579718">.</span><span class="ident" id="1579719">d</span><span class="op" id="1579720">[</span><span class="ident" id="1579721"><a href="/strconv/decimal.go.html#1579653">nd</a></span><span class="op" id="1579723">]</span>&nbsp;<span class="op" id="1579725">==</span>&nbsp;<span class="string" id="1579728">&#39;5&#39;</span>&nbsp;<span class="op" id="1579732">&amp;&amp;</span>&nbsp;<span class="ident" id="1579735"><a href="/strconv/decimal.go.html#1579653">nd</a></span><span class="op" id="1579737">+</span><span class="num" id="1579738">1</span>&nbsp;<span class="op" id="1579740">==</span>&nbsp;<span class="ident" id="1579743"><a href="/strconv/decimal.go.html#1579641">a</a></span><span class="op" id="1579744">.</span><span class="ident" id="1579745">nd</span>&nbsp;<span class="op" id="1579748">{</span>&nbsp;<span class="comment" id="1579750">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1579787">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579864">if</span>&nbsp;<span class="ident" id="1579867"><a href="/strconv/decimal.go.html#1579641">a</a></span><span class="op" id="1579868">.</span><span class="ident" id="1579869">trunc</span>&nbsp;<span class="op" id="1579875">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579880">return</span>&nbsp;<span class="ident" id="1579887">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579898">return</span>&nbsp;<span class="ident" id="1579905"><a href="/strconv/decimal.go.html#1579653">nd</a></span>&nbsp;<span class="op" id="1579908">&gt;</span>&nbsp;<span class="num" id="1579910">0</span>&nbsp;<span class="op" id="1579912">&amp;&amp;</span>&nbsp;<span class="op" id="1579915">(</span><span class="ident" id="1579916"><a href="/strconv/decimal.go.html#1579641">a</a></span><span class="op" id="1579917">.</span><span class="ident" id="1579918">d</span><span class="op" id="1579919">[</span><span class="ident" id="1579920"><a href="/strconv/decimal.go.html#1579653">nd</a></span><span class="op" id="1579922">-</span><span class="num" id="1579923">1</span><span class="op" id="1579924">]</span><span class="op" id="1579925">-</span><span class="string" id="1579926">&#39;0&#39;</span><span class="op" id="1579929">)</span><span class="op" id="1579930">%</span><span class="num" id="1579931">2</span>&nbsp;<span class="op" id="1579933">!=</span>&nbsp;<span class="num" id="1579936">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1579942">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579976">return</span>&nbsp;<span class="ident" id="1579983"><a href="/strconv/decimal.go.html#1579641">a</a></span><span class="op" id="1579984">.</span><span class="ident" id="1579985">d</span><span class="op" id="1579986">[</span><span class="ident" id="1579987"><a href="/strconv/decimal.go.html#1579653">nd</a></span><span class="op" id="1579989">]</span>&nbsp;<span class="op" id="1579991">&gt;=</span>&nbsp;<span class="string" id="1579994">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="1579998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1580001">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="1580037">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="1580079">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="1580120">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="1580136">func</span>&nbsp;<span class="op" id="1580141">(</span><span class="ident" id="1580142">a</span>&nbsp;<span class="op" id="1580144">*</span><span class="ident" id="1580145"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1580152">)</span>&nbsp;<span class="ident" id="1580154">Round</span><span class="op" id="1580159">(</span><span class="ident" id="1580160">nd</span>&nbsp;<span class="builtintype" id="1580163">int</span><span class="op" id="1580166">)</span>&nbsp;<span class="op" id="1580168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580171">if</span>&nbsp;<span class="ident" id="1580174"><a href="/strconv/decimal.go.html#1580160">nd</a></span>&nbsp;<span class="op" id="1580177">&lt;</span>&nbsp;<span class="num" id="1580179">0</span>&nbsp;<span class="op" id="1580181">||</span>&nbsp;<span class="ident" id="1580184"><a href="/strconv/decimal.go.html#1580160">nd</a></span>&nbsp;<span class="op" id="1580187">&gt;=</span>&nbsp;<span class="ident" id="1580190"><a href="/strconv/decimal.go.html#1580142">a</a></span><span class="op" id="1580191">.</span><span class="ident" id="1580192">nd</span>&nbsp;<span class="op" id="1580195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580199">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580210">if</span>&nbsp;<span class="ident" id="1580213"><a href="/strconv/decimal.go.html#1579627">shouldRoundUp</a></span><span class="op" id="1580226">(</span><span class="ident" id="1580227"><a href="/strconv/decimal.go.html#1580142">a</a></span><span class="op" id="1580228">,</span>&nbsp;<span class="ident" id="1580230"><a href="/strconv/decimal.go.html#1580160">nd</a></span><span class="op" id="1580232">)</span>&nbsp;<span class="op" id="1580234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580238"><a href="/strconv/decimal.go.html#1580142">a</a></span><span class="op" id="1580239">.</span><span class="ident" id="1580240">RoundUp</span><span class="op" id="1580247">(</span><span class="ident" id="1580248"><a href="/strconv/decimal.go.html#1580160">nd</a></span><span class="op" id="1580250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580253">}</span>&nbsp;<span class="keyword" id="1580255">else</span>&nbsp;<span class="op" id="1580260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580264"><a href="/strconv/decimal.go.html#1580142">a</a></span><span class="op" id="1580265">.</span><span class="ident" id="1580266">RoundDown</span><span class="op" id="1580275">(</span><span class="ident" id="1580276"><a href="/strconv/decimal.go.html#1580160">nd</a></span><span class="op" id="1580278">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580281">}</span><br>
<span class="lineno"></span><span class="op" id="1580283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1580286">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="1580327">func</span>&nbsp;<span class="op" id="1580332">(</span><span class="ident" id="1580333">a</span>&nbsp;<span class="op" id="1580335">*</span><span class="ident" id="1580336"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1580343">)</span>&nbsp;<span class="ident" id="1580345">RoundDown</span><span class="op" id="1580354">(</span><span class="ident" id="1580355">nd</span>&nbsp;<span class="builtintype" id="1580358">int</span><span class="op" id="1580361">)</span>&nbsp;<span class="op" id="1580363">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580366">if</span>&nbsp;<span class="ident" id="1580369"><a href="/strconv/decimal.go.html#1580355">nd</a></span>&nbsp;<span class="op" id="1580372">&lt;</span>&nbsp;<span class="num" id="1580374">0</span>&nbsp;<span class="op" id="1580376">||</span>&nbsp;<span class="ident" id="1580379"><a href="/strconv/decimal.go.html#1580355">nd</a></span>&nbsp;<span class="op" id="1580382">&gt;=</span>&nbsp;<span class="ident" id="1580385"><a href="/strconv/decimal.go.html#1580333">a</a></span><span class="op" id="1580386">.</span><span class="ident" id="1580387">nd</span>&nbsp;<span class="op" id="1580390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580394">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580405"><a href="/strconv/decimal.go.html#1580333">a</a></span><span class="op" id="1580406">.</span><span class="ident" id="1580407">nd</span>&nbsp;<span class="op" id="1580410">=</span>&nbsp;<span class="ident" id="1580412"><a href="/strconv/decimal.go.html#1580355">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580416"><a href="/strconv/decimal.go.html#1574710">trim</a></span><span class="op" id="1580420">(</span><span class="ident" id="1580421"><a href="/strconv/decimal.go.html#1580333">a</a></span><span class="op" id="1580422">)</span><br>
<span class="lineno">335</span><span class="op" id="1580424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1580427">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="1580466">func</span>&nbsp;<span class="op" id="1580471">(</span><span class="ident" id="1580472">a</span>&nbsp;<span class="op" id="1580474">*</span><span class="ident" id="1580475"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1580482">)</span>&nbsp;<span class="ident" id="1580484">RoundUp</span><span class="op" id="1580491">(</span><span class="ident" id="1580492">nd</span>&nbsp;<span class="builtintype" id="1580495">int</span><span class="op" id="1580498">)</span>&nbsp;<span class="op" id="1580500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580503">if</span>&nbsp;<span class="ident" id="1580506"><a href="/strconv/decimal.go.html#1580492">nd</a></span>&nbsp;<span class="op" id="1580509">&lt;</span>&nbsp;<span class="num" id="1580511">0</span>&nbsp;<span class="op" id="1580513">||</span>&nbsp;<span class="ident" id="1580516"><a href="/strconv/decimal.go.html#1580492">nd</a></span>&nbsp;<span class="op" id="1580519">&gt;=</span>&nbsp;<span class="ident" id="1580522"><a href="/strconv/decimal.go.html#1580472">a</a></span><span class="op" id="1580523">.</span><span class="ident" id="1580524">nd</span>&nbsp;<span class="op" id="1580527">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580531">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1580543">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580556">for</span>&nbsp;<span class="ident" id="1580560">i</span>&nbsp;<span class="op" id="1580562">:=</span>&nbsp;<span class="ident" id="1580565"><a href="/strconv/decimal.go.html#1580492">nd</a></span>&nbsp;<span class="op" id="1580568">-</span>&nbsp;<span class="num" id="1580570">1</span><span class="op" id="1580571">;</span>&nbsp;<span class="ident" id="1580573"><a href="/strconv/decimal.go.html#1580560">i</a></span>&nbsp;<span class="op" id="1580575">&gt;=</span>&nbsp;<span class="num" id="1580578">0</span><span class="op" id="1580579">;</span>&nbsp;<span class="ident" id="1580581"><a href="/strconv/decimal.go.html#1580560">i</a></span><span class="op" id="1580582">--</span>&nbsp;<span class="op" id="1580585">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580589">c</span>&nbsp;<span class="op" id="1580591">:=</span>&nbsp;<span class="ident" id="1580594"><a href="/strconv/decimal.go.html#1580472">a</a></span><span class="op" id="1580595">.</span><span class="ident" id="1580596">d</span><span class="op" id="1580597">[</span><span class="ident" id="1580598"><a href="/strconv/decimal.go.html#1580560">i</a></span><span class="op" id="1580599">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580603">if</span>&nbsp;<span class="ident" id="1580606"><a href="/strconv/decimal.go.html#1580589">c</a></span>&nbsp;<span class="op" id="1580608">&lt;</span>&nbsp;<span class="string" id="1580610">&#39;9&#39;</span>&nbsp;<span class="op" id="1580614">{</span>&nbsp;<span class="comment" id="1580616">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580648"><a href="/strconv/decimal.go.html#1580472">a</a></span><span class="op" id="1580649">.</span><span class="ident" id="1580650">d</span><span class="op" id="1580651">[</span><span class="ident" id="1580652"><a href="/strconv/decimal.go.html#1580560">i</a></span><span class="op" id="1580653">]</span><span class="op" id="1580654">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580660"><a href="/strconv/decimal.go.html#1580472">a</a></span><span class="op" id="1580661">.</span><span class="ident" id="1580662">nd</span>&nbsp;<span class="op" id="1580665">=</span>&nbsp;<span class="ident" id="1580667"><a href="/strconv/decimal.go.html#1580560">i</a></span>&nbsp;<span class="op" id="1580669">+</span>&nbsp;<span class="num" id="1580671">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580676">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1580692">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1580714">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580766"><a href="/strconv/decimal.go.html#1580472">a</a></span><span class="op" id="1580767">.</span><span class="ident" id="1580768">d</span><span class="op" id="1580769">[</span><span class="num" id="1580770">0</span><span class="op" id="1580771">]</span>&nbsp;<span class="op" id="1580773">=</span>&nbsp;<span class="string" id="1580775">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580780"><a href="/strconv/decimal.go.html#1580472">a</a></span><span class="op" id="1580781">.</span><span class="ident" id="1580782">nd</span>&nbsp;<span class="op" id="1580785">=</span>&nbsp;<span class="num" id="1580787">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580790"><a href="/strconv/decimal.go.html#1580472">a</a></span><span class="op" id="1580791">.</span><span class="ident" id="1580792">dp</span><span class="op" id="1580794">++</span><br>
<span class="lineno"></span><span class="op" id="1580797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="1580800">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="1580848">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1580881">func</span>&nbsp;<span class="op" id="1580886">(</span><span class="ident" id="1580887">a</span>&nbsp;<span class="op" id="1580889">*</span><span class="ident" id="1580890"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1580897">)</span>&nbsp;<span class="ident" id="1580899">RoundedInteger</span><span class="op" id="1580913">(</span><span class="op" id="1580914">)</span>&nbsp;<span class="ident" id="1580916">uint64</span>&nbsp;<span class="op" id="1580923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580926">if</span>&nbsp;<span class="ident" id="1580929"><a href="/strconv/decimal.go.html#1580887">a</a></span><span class="op" id="1580930">.</span><span class="ident" id="1580931">dp</span>&nbsp;<span class="op" id="1580934">&gt;</span>&nbsp;<span class="num" id="1580936">20</span>&nbsp;<span class="op" id="1580939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580943">return</span>&nbsp;<span class="num" id="1580950">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580973">var</span>&nbsp;<span class="ident" id="1580977">i</span>&nbsp;<span class="builtintype" id="1580979">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580984">n</span>&nbsp;<span class="op" id="1580986">:=</span>&nbsp;<span class="ident" id="1580989">uint64</span><span class="op" id="1580995">(</span><span class="num" id="1580996">0</span><span class="op" id="1580997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1581000">for</span>&nbsp;<span class="ident" id="1581004"><a href="/strconv/decimal.go.html#1580977">i</a></span>&nbsp;<span class="op" id="1581006">=</span>&nbsp;<span class="num" id="1581008">0</span><span class="op" id="1581009">;</span>&nbsp;<span class="ident" id="1581011"><a href="/strconv/decimal.go.html#1580977">i</a></span>&nbsp;<span class="op" id="1581013">&lt;</span>&nbsp;<span class="ident" id="1581015"><a href="/strconv/decimal.go.html#1580887">a</a></span><span class="op" id="1581016">.</span><span class="ident" id="1581017">dp</span>&nbsp;<span class="op" id="1581020">&amp;&amp;</span>&nbsp;<span class="ident" id="1581023"><a href="/strconv/decimal.go.html#1580977">i</a></span>&nbsp;<span class="op" id="1581025">&lt;</span>&nbsp;<span class="ident" id="1581027"><a href="/strconv/decimal.go.html#1580887">a</a></span><span class="op" id="1581028">.</span><span class="ident" id="1581029">nd</span><span class="op" id="1581031">;</span>&nbsp;<span class="ident" id="1581033"><a href="/strconv/decimal.go.html#1580977">i</a></span><span class="op" id="1581034">++</span>&nbsp;<span class="op" id="1581037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1581041"><a href="/strconv/decimal.go.html#1580984">n</a></span>&nbsp;<span class="op" id="1581043">=</span>&nbsp;<span class="ident" id="1581045"><a href="/strconv/decimal.go.html#1580984">n</a></span><span class="op" id="1581046">*</span><span class="num" id="1581047">10</span>&nbsp;<span class="op" id="1581050">+</span>&nbsp;<span class="ident" id="1581052">uint64</span><span class="op" id="1581058">(</span><span class="ident" id="1581059"><a href="/strconv/decimal.go.html#1580887">a</a></span><span class="op" id="1581060">.</span><span class="ident" id="1581061">d</span><span class="op" id="1581062">[</span><span class="ident" id="1581063"><a href="/strconv/decimal.go.html#1580977">i</a></span><span class="op" id="1581064">]</span><span class="op" id="1581065">-</span><span class="string" id="1581066">&#39;0&#39;</span><span class="op" id="1581069">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1581072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1581075">for</span>&nbsp;<span class="op" id="1581079">;</span>&nbsp;<span class="ident" id="1581081"><a href="/strconv/decimal.go.html#1580977">i</a></span>&nbsp;<span class="op" id="1581083">&lt;</span>&nbsp;<span class="ident" id="1581085"><a href="/strconv/decimal.go.html#1580887">a</a></span><span class="op" id="1581086">.</span><span class="ident" id="1581087">dp</span><span class="op" id="1581089">;</span>&nbsp;<span class="ident" id="1581091"><a href="/strconv/decimal.go.html#1580977">i</a></span><span class="op" id="1581092">++</span>&nbsp;<span class="op" id="1581095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1581099"><a href="/strconv/decimal.go.html#1580984">n</a></span>&nbsp;<span class="op" id="1581101">*=</span>&nbsp;<span class="num" id="1581104">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1581108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1581111">if</span>&nbsp;<span class="ident" id="1581114"><a href="/strconv/decimal.go.html#1579627">shouldRoundUp</a></span><span class="op" id="1581127">(</span><span class="ident" id="1581128"><a href="/strconv/decimal.go.html#1580887">a</a></span><span class="op" id="1581129">,</span>&nbsp;<span class="ident" id="1581131"><a href="/strconv/decimal.go.html#1580887">a</a></span><span class="op" id="1581132">.</span><span class="ident" id="1581133">dp</span><span class="op" id="1581135">)</span>&nbsp;<span class="op" id="1581137">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1581141"><a href="/strconv/decimal.go.html#1580984">n</a></span><span class="op" id="1581142">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1581146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1581149">return</span>&nbsp;<span class="ident" id="1581156"><a href="/strconv/decimal.go.html#1580984">n</a></span><br>
<span class="lineno"></span><span class="op" id="1581158">}</span>
</div>
</body>
</html>
