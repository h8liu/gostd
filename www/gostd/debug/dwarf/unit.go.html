<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html" class="current">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5827967">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5828023">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5828077">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5828128">package</span>&nbsp;<span class="ident" id="5828136">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5828143">import</span>&nbsp;<span class="string" id="5828150">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5828161">//&nbsp;DWARF&nbsp;debug&nbsp;info&nbsp;is&nbsp;split&nbsp;into&nbsp;a&nbsp;sequence&nbsp;of&nbsp;compilation&nbsp;units.</span><br>
<span class="lineno">10</span><span class="comment" id="5828228">//&nbsp;Each&nbsp;unit&nbsp;has&nbsp;its&nbsp;own&nbsp;abbreviation&nbsp;table&nbsp;and&nbsp;address&nbsp;size.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5828291">type</span>&nbsp;<span class="ident" id="5828296">unit</span>&nbsp;<span class="keyword" id="5828301">struct</span>&nbsp;<span class="op" id="5828308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828311">base</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5828318">Offset</span>&nbsp;<span class="comment" id="5828325">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;header&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828377">off</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828384">Offset</span>&nbsp;<span class="comment" id="5828391">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;data&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828441">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5828448">[</span><span class="op" id="5828449">]</span><span class="builtintype" id="5828450">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828456">atable</span>&nbsp;<span class="ident" id="5828463">abbrevTable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828476">asize</span>&nbsp;&nbsp;<span class="builtintype" id="5828483">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828488">vers</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5828495">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828500">is64</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5828507">bool</span>&nbsp;<span class="comment" id="5828512">//&nbsp;True&nbsp;for&nbsp;64-bit&nbsp;DWARF&nbsp;format</span><br>
<span class="lineno">20</span><span class="op" id="5828544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5828547">//&nbsp;Implement&nbsp;the&nbsp;dataFormat&nbsp;interface.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5828587">func</span>&nbsp;<span class="op" id="5828592">(</span><span class="ident" id="5828593">u</span>&nbsp;<span class="op" id="5828595">*</span><span class="ident" id="5828596">unit</span><span class="op" id="5828600">)</span>&nbsp;<span class="ident" id="5828602">version</span><span class="op" id="5828609">(</span><span class="op" id="5828610">)</span>&nbsp;<span class="builtintype" id="5828612">int</span>&nbsp;<span class="op" id="5828616">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5828619">return</span>&nbsp;<span class="ident" id="5828626">u</span><span class="op" id="5828627">.</span><span class="ident" id="5828628">vers</span><br>
<span class="lineno"></span><span class="op" id="5828633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5828636">func</span>&nbsp;<span class="op" id="5828641">(</span><span class="ident" id="5828642">u</span>&nbsp;<span class="op" id="5828644">*</span><span class="ident" id="5828645">unit</span><span class="op" id="5828649">)</span>&nbsp;<span class="ident" id="5828651">dwarf64</span><span class="op" id="5828658">(</span><span class="op" id="5828659">)</span>&nbsp;<span class="op" id="5828661">(</span><span class="builtintype" id="5828662">bool</span><span class="op" id="5828666">,</span>&nbsp;<span class="builtintype" id="5828668">bool</span><span class="op" id="5828672">)</span>&nbsp;<span class="op" id="5828674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5828677">return</span>&nbsp;<span class="ident" id="5828684">u</span><span class="op" id="5828685">.</span><span class="ident" id="5828686">is64</span><span class="op" id="5828690">,</span>&nbsp;<span class="builtintype" id="5828692">true</span><br>
<span class="lineno">30</span><span class="op" id="5828697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5828700">func</span>&nbsp;<span class="op" id="5828705">(</span><span class="ident" id="5828706">u</span>&nbsp;<span class="op" id="5828708">*</span><span class="ident" id="5828709">unit</span><span class="op" id="5828713">)</span>&nbsp;<span class="ident" id="5828715">addrsize</span><span class="op" id="5828723">(</span><span class="op" id="5828724">)</span>&nbsp;<span class="builtintype" id="5828726">int</span>&nbsp;<span class="op" id="5828730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5828733">return</span>&nbsp;<span class="ident" id="5828740">u</span><span class="op" id="5828741">.</span><span class="ident" id="5828742">asize</span><br>
<span class="lineno"></span><span class="op" id="5828748">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5828751">func</span>&nbsp;<span class="op" id="5828756">(</span><span class="ident" id="5828757">d</span>&nbsp;<span class="op" id="5828759">*</span><span class="ident" id="5828760">Data</span><span class="op" id="5828764">)</span>&nbsp;<span class="ident" id="5828766">parseUnits</span><span class="op" id="5828776">(</span><span class="op" id="5828777">)</span>&nbsp;<span class="op" id="5828779">(</span><span class="op" id="5828780">[</span><span class="op" id="5828781">]</span><span class="ident" id="5828782">unit</span><span class="op" id="5828786">,</span>&nbsp;<span class="builtintype" id="5828788">error</span><span class="op" id="5828793">)</span>&nbsp;<span class="op" id="5828795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5828798">//&nbsp;Count&nbsp;units.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828815">nunit</span>&nbsp;<span class="op" id="5828821">:=</span>&nbsp;<span class="num" id="5828824">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828827">b</span>&nbsp;<span class="op" id="5828829">:=</span>&nbsp;<span class="ident" id="5828832">makeBuf</span><span class="op" id="5828839">(</span><span class="ident" id="5828840">d</span><span class="op" id="5828841">,</span>&nbsp;<span class="ident" id="5828843">unknownFormat</span><span class="op" id="5828856">{</span><span class="op" id="5828857">}</span><span class="op" id="5828858">,</span>&nbsp;<span class="string" id="5828860">&#34;info&#34;</span><span class="op" id="5828866">,</span>&nbsp;<span class="num" id="5828868">0</span><span class="op" id="5828869">,</span>&nbsp;<span class="ident" id="5828871">d</span><span class="op" id="5828872">.</span><span class="ident" id="5828873">info</span><span class="op" id="5828877">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5828880">for</span>&nbsp;<span class="builtinfunc" id="5828884">len</span><span class="op" id="5828887">(</span><span class="ident" id="5828888">b</span><span class="op" id="5828889">.</span><span class="ident" id="5828890">data</span><span class="op" id="5828894">)</span>&nbsp;<span class="op" id="5828896">&gt;</span>&nbsp;<span class="num" id="5828898">0</span>&nbsp;<span class="op" id="5828900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5828904">len</span>&nbsp;<span class="op" id="5828908">:=</span>&nbsp;<span class="ident" id="5828911">b</span><span class="op" id="5828912">.</span><span class="builtintype" id="5828913">uint32</span><span class="op" id="5828919">(</span><span class="op" id="5828920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5828924">if</span>&nbsp;<span class="builtinfunc" id="5828927">len</span>&nbsp;<span class="op" id="5828931">==</span>&nbsp;<span class="num" id="5828934">0xffffffff</span>&nbsp;<span class="op" id="5828945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5828950">len64</span>&nbsp;<span class="op" id="5828956">:=</span>&nbsp;<span class="ident" id="5828959">b</span><span class="op" id="5828960">.</span><span class="ident" id="5828961">uint64</span><span class="op" id="5828967">(</span><span class="op" id="5828968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5828973">if</span>&nbsp;<span class="ident" id="5828976">len64</span>&nbsp;<span class="op" id="5828982">!=</span>&nbsp;<span class="ident" id="5828985">uint64</span><span class="op" id="5828991">(</span><span class="builtintype" id="5828992">uint32</span><span class="op" id="5828998">(</span><span class="ident" id="5828999">len64</span><span class="op" id="5829004">)</span><span class="op" id="5829005">)</span>&nbsp;<span class="op" id="5829007">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829013">b</span><span class="op" id="5829014">.</span><span class="builtintype" id="5829015">error</span><span class="op" id="5829020">(</span><span class="string" id="5829021">&#34;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5829043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829049">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5829063">len</span>&nbsp;<span class="op" id="5829067">=</span>&nbsp;<span class="builtintype" id="5829069">uint32</span><span class="op" id="5829075">(</span><span class="ident" id="5829076">len64</span><span class="op" id="5829081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829085">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829089">b</span><span class="op" id="5829090">.</span><span class="ident" id="5829091">skip</span><span class="op" id="5829095">(</span><span class="builtintype" id="5829096">int</span><span class="op" id="5829099">(</span><span class="builtinfunc" id="5829100">len</span><span class="op" id="5829103">)</span><span class="op" id="5829104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829108">nunit</span><span class="op" id="5829113">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829120">if</span>&nbsp;<span class="ident" id="5829123">b</span><span class="op" id="5829124">.</span><span class="ident" id="5829125">err</span>&nbsp;<span class="op" id="5829129">!=</span>&nbsp;<span class="builtintype" id="5829132">nil</span>&nbsp;<span class="op" id="5829136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829140">return</span>&nbsp;<span class="builtintype" id="5829147">nil</span><span class="op" id="5829150">,</span>&nbsp;<span class="ident" id="5829152">b</span><span class="op" id="5829153">.</span><span class="ident" id="5829154">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5829163">//&nbsp;Again,&nbsp;this&nbsp;time&nbsp;writing&nbsp;them&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829203">b</span>&nbsp;<span class="op" id="5829205">=</span>&nbsp;<span class="ident" id="5829207">makeBuf</span><span class="op" id="5829214">(</span><span class="ident" id="5829215">d</span><span class="op" id="5829216">,</span>&nbsp;<span class="ident" id="5829218">unknownFormat</span><span class="op" id="5829231">{</span><span class="op" id="5829232">}</span><span class="op" id="5829233">,</span>&nbsp;<span class="string" id="5829235">&#34;info&#34;</span><span class="op" id="5829241">,</span>&nbsp;<span class="num" id="5829243">0</span><span class="op" id="5829244">,</span>&nbsp;<span class="ident" id="5829246">d</span><span class="op" id="5829247">.</span><span class="ident" id="5829248">info</span><span class="op" id="5829252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829255">units</span>&nbsp;<span class="op" id="5829261">:=</span>&nbsp;<span class="builtinfunc" id="5829264">make</span><span class="op" id="5829268">(</span><span class="op" id="5829269">[</span><span class="op" id="5829270">]</span><span class="ident" id="5829271">unit</span><span class="op" id="5829275">,</span>&nbsp;<span class="ident" id="5829277">nunit</span><span class="op" id="5829282">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829285">for</span>&nbsp;<span class="ident" id="5829289">i</span>&nbsp;<span class="op" id="5829291">:=</span>&nbsp;<span class="keyword" id="5829294">range</span>&nbsp;<span class="ident" id="5829300">units</span>&nbsp;<span class="op" id="5829306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829310">u</span>&nbsp;<span class="op" id="5829312">:=</span>&nbsp;<span class="op" id="5829315">&amp;</span><span class="ident" id="5829316">units</span><span class="op" id="5829321">[</span><span class="ident" id="5829322">i</span><span class="op" id="5829323">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829327">u</span><span class="op" id="5829328">.</span><span class="ident" id="5829329">base</span>&nbsp;<span class="op" id="5829334">=</span>&nbsp;<span class="ident" id="5829336">b</span><span class="op" id="5829337">.</span><span class="ident" id="5829338">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829344">n</span>&nbsp;<span class="op" id="5829346">:=</span>&nbsp;<span class="ident" id="5829349">b</span><span class="op" id="5829350">.</span><span class="builtintype" id="5829351">uint32</span><span class="op" id="5829357">(</span><span class="op" id="5829358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829362">if</span>&nbsp;<span class="ident" id="5829365">n</span>&nbsp;<span class="op" id="5829367">==</span>&nbsp;<span class="num" id="5829370">0xffffffff</span>&nbsp;<span class="op" id="5829381">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829386">u</span><span class="op" id="5829387">.</span><span class="ident" id="5829388">is64</span>&nbsp;<span class="op" id="5829393">=</span>&nbsp;<span class="builtintype" id="5829395">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829403">n</span>&nbsp;<span class="op" id="5829405">=</span>&nbsp;<span class="builtintype" id="5829407">uint32</span><span class="op" id="5829413">(</span><span class="ident" id="5829414">b</span><span class="op" id="5829415">.</span><span class="ident" id="5829416">uint64</span><span class="op" id="5829422">(</span><span class="op" id="5829423">)</span><span class="op" id="5829424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829432">vers</span>&nbsp;<span class="op" id="5829437">:=</span>&nbsp;<span class="ident" id="5829440">b</span><span class="op" id="5829441">.</span><span class="builtintype" id="5829442">uint16</span><span class="op" id="5829448">(</span><span class="op" id="5829449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829453">if</span>&nbsp;<span class="ident" id="5829456">vers</span>&nbsp;<span class="op" id="5829461">!=</span>&nbsp;<span class="num" id="5829464">2</span>&nbsp;<span class="op" id="5829466">&amp;&amp;</span>&nbsp;<span class="ident" id="5829469">vers</span>&nbsp;<span class="op" id="5829474">!=</span>&nbsp;<span class="num" id="5829477">3</span>&nbsp;<span class="op" id="5829479">&amp;&amp;</span>&nbsp;<span class="ident" id="5829482">vers</span>&nbsp;<span class="op" id="5829487">!=</span>&nbsp;<span class="num" id="5829490">4</span>&nbsp;<span class="op" id="5829492">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829497">b</span><span class="op" id="5829498">.</span><span class="builtintype" id="5829499">error</span><span class="op" id="5829504">(</span><span class="string" id="5829505">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5829534">+</span>&nbsp;<span class="ident" id="5829536">strconv</span><span class="op" id="5829543">.</span><span class="ident" id="5829544">Itoa</span><span class="op" id="5829548">(</span><span class="builtintype" id="5829549">int</span><span class="op" id="5829552">(</span><span class="ident" id="5829553">vers</span><span class="op" id="5829557">)</span><span class="op" id="5829558">)</span><span class="op" id="5829559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829564">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829576">u</span><span class="op" id="5829577">.</span><span class="ident" id="5829578">vers</span>&nbsp;<span class="op" id="5829583">=</span>&nbsp;<span class="builtintype" id="5829585">int</span><span class="op" id="5829588">(</span><span class="ident" id="5829589">vers</span><span class="op" id="5829593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829597">atable</span><span class="op" id="5829603">,</span>&nbsp;<span class="ident" id="5829605">err</span>&nbsp;<span class="op" id="5829609">:=</span>&nbsp;<span class="ident" id="5829612">d</span><span class="op" id="5829613">.</span><span class="ident" id="5829614">parseAbbrev</span><span class="op" id="5829625">(</span><span class="ident" id="5829626">b</span><span class="op" id="5829627">.</span><span class="builtintype" id="5829628">uint32</span><span class="op" id="5829634">(</span><span class="op" id="5829635">)</span><span class="op" id="5829636">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829640">if</span>&nbsp;<span class="ident" id="5829643">err</span>&nbsp;<span class="op" id="5829647">!=</span>&nbsp;<span class="builtintype" id="5829650">nil</span>&nbsp;<span class="op" id="5829654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829659">if</span>&nbsp;<span class="ident" id="5829662">b</span><span class="op" id="5829663">.</span><span class="ident" id="5829664">err</span>&nbsp;<span class="op" id="5829668">==</span>&nbsp;<span class="builtintype" id="5829671">nil</span>&nbsp;<span class="op" id="5829675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829681">b</span><span class="op" id="5829682">.</span><span class="ident" id="5829683">err</span>&nbsp;<span class="op" id="5829687">=</span>&nbsp;<span class="ident" id="5829689">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829701">break</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829713">u</span><span class="op" id="5829714">.</span><span class="ident" id="5829715">atable</span>&nbsp;<span class="op" id="5829722">=</span>&nbsp;<span class="ident" id="5829724">atable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829733">u</span><span class="op" id="5829734">.</span><span class="ident" id="5829735">asize</span>&nbsp;<span class="op" id="5829741">=</span>&nbsp;<span class="builtintype" id="5829743">int</span><span class="op" id="5829746">(</span><span class="ident" id="5829747">b</span><span class="op" id="5829748">.</span><span class="builtintype" id="5829749">uint8</span><span class="op" id="5829754">(</span><span class="op" id="5829755">)</span><span class="op" id="5829756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829760">u</span><span class="op" id="5829761">.</span><span class="ident" id="5829762">off</span>&nbsp;<span class="op" id="5829766">=</span>&nbsp;<span class="ident" id="5829768">b</span><span class="op" id="5829769">.</span><span class="ident" id="5829770">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5829776">u</span><span class="op" id="5829777">.</span><span class="ident" id="5829778">data</span>&nbsp;<span class="op" id="5829783">=</span>&nbsp;<span class="ident" id="5829785">b</span><span class="op" id="5829786">.</span><span class="ident" id="5829787">bytes</span><span class="op" id="5829792">(</span><span class="builtintype" id="5829793">int</span><span class="op" id="5829796">(</span><span class="ident" id="5829797">n</span>&nbsp;<span class="op" id="5829799">-</span>&nbsp;<span class="op" id="5829801">(</span><span class="num" id="5829802">2</span>&nbsp;<span class="op" id="5829804">+</span>&nbsp;<span class="num" id="5829806">4</span>&nbsp;<span class="op" id="5829808">+</span>&nbsp;<span class="num" id="5829810">1</span><span class="op" id="5829811">)</span><span class="op" id="5829812">)</span><span class="op" id="5829813">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829819">if</span>&nbsp;<span class="ident" id="5829822">b</span><span class="op" id="5829823">.</span><span class="ident" id="5829824">err</span>&nbsp;<span class="op" id="5829828">!=</span>&nbsp;<span class="builtintype" id="5829831">nil</span>&nbsp;<span class="op" id="5829835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829839">return</span>&nbsp;<span class="builtintype" id="5829846">nil</span><span class="op" id="5829849">,</span>&nbsp;<span class="ident" id="5829851">b</span><span class="op" id="5829852">.</span><span class="ident" id="5829853">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5829858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5829861">return</span>&nbsp;<span class="ident" id="5829868">units</span><span class="op" id="5829873">,</span>&nbsp;<span class="builtintype" id="5829875">nil</span><br>
<span class="lineno">90</span><span class="op" id="5829879">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
