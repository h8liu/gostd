<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html" class="current">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5346042">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5346097">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5346151">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5346202">package</span>&nbsp;<span class="ident" id="5346210">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5346215">import</span>&nbsp;<span class="op" id="5346222">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5346225">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5346234">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5346244">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5346250">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5346261">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5346268">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5346271">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="5346340">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="5346412">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="5346443">const</span>&nbsp;<span class="ident" id="5346449">tooBig</span>&nbsp;<span class="op" id="5346456">=</span>&nbsp;<span class="num" id="5346458">1</span>&nbsp;<span class="op" id="5346460">&lt;&lt;</span>&nbsp;<span class="num" id="5346463">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5346467">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5346543">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="5346575">type</span>&nbsp;<span class="ident" id="5346580">Decoder</span>&nbsp;<span class="keyword" id="5346588">struct</span>&nbsp;<span class="op" id="5346595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5346598">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5346611"><a href="/gostd/encoding/gob/decoder.go.html#5346261">sync</a></span><span class="op" id="5346615">.</span><span class="ident" id="5346616"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5346651">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5346693">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5346706"><a href="/gostd/encoding/gob/decoder.go.html#5346244">io</a></span><span class="op" id="5346708">.</span><span class="ident" id="5346709"><a href="/gostd/io/io.go.html#1421823">Reader</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5346746">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5346769">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5346782"><a href="/gostd/encoding/gob/decode.go.html#5308640">decBuffer</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5346822">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5346863">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5346876">map</span><span class="op" id="5346879">[</span><span class="ident" id="5346880"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5346886">]</span><span class="op" id="5346887">*</span><span class="ident" id="5346888"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5346916">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5346960">decoderCache</span>&nbsp;<span class="keyword" id="5346973">map</span><span class="op" id="5346976">[</span><span class="ident" id="5346977"><a href="/gostd/encoding/gob/decoder.go.html#5346250">reflect</a></span><span class="op" id="5346984">.</span><span class="ident" id="5346985"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5346989">]</span><span class="keyword" id="5346990">map</span><span class="op" id="5346993">[</span><span class="ident" id="5346994"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5347000">]</span><span class="op" id="5347001">*</span><span class="op" id="5347002">*</span><span class="ident" id="5347003"><a href="/gostd/encoding/gob/decode.go.html#5319367">decEngine</a></span>&nbsp;<span class="comment" id="5347013">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347043">ignorerCache</span>&nbsp;<span class="keyword" id="5347056">map</span><span class="op" id="5347059">[</span><span class="ident" id="5347060"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5347066">]</span><span class="op" id="5347067">*</span><span class="op" id="5347068">*</span><span class="ident" id="5347069"><a href="/gostd/encoding/gob/decode.go.html#5319367">decEngine</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5347096">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347126">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5347139">*</span><span class="ident" id="5347140"><a href="/gostd/encoding/gob/decode.go.html#5308139">decoderState</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5347179">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347231">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5347244">[</span><span class="op" id="5347245">]</span><span class="builtintype" id="5347246">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5347284">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347338">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5347351">error</span><br>
<span class="lineno"></span><span class="op" id="5347357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5347360">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="5347427">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5347498">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5347515">func</span>&nbsp;<span class="ident" id="5347520">NewDecoder</span><span class="op" id="5347530">(</span><span class="ident" id="5347531">r</span>&nbsp;<span class="ident" id="5347533"><a href="/gostd/encoding/gob/decoder.go.html#5346244">io</a></span><span class="op" id="5347535">.</span><span class="ident" id="5347536"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5347542">)</span>&nbsp;<span class="op" id="5347544">*</span><span class="ident" id="5347545"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span>&nbsp;<span class="op" id="5347553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347556">dec</span>&nbsp;<span class="op" id="5347560">:=</span>&nbsp;<span class="builtinfunc" id="5347563">new</span><span class="op" id="5347566">(</span><span class="ident" id="5347567"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5347574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5347577">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5347654">if</span>&nbsp;<span class="ident" id="5347657">_</span><span class="op" id="5347658">,</span>&nbsp;<span class="ident" id="5347660">ok</span>&nbsp;<span class="op" id="5347663">:=</span>&nbsp;<span class="ident" id="5347666"><a href="/gostd/encoding/gob/decoder.go.html#5347531">r</a></span><span class="op" id="5347667">.</span><span class="op" id="5347668">(</span><span class="ident" id="5347669"><a href="/gostd/encoding/gob/decoder.go.html#5346244">io</a></span><span class="op" id="5347671">.</span><span class="ident" id="5347672"><a href="/gostd/io/io.go.html#1426965">ByteReader</a></span><span class="op" id="5347682">)</span><span class="op" id="5347683">;</span>&nbsp;<span class="op" id="5347685">!</span><span class="ident" id="5347686"><a href="/gostd/encoding/gob/decoder.go.html#5347660">ok</a></span>&nbsp;<span class="op" id="5347689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347693"><a href="/gostd/encoding/gob/decoder.go.html#5347531">r</a></span>&nbsp;<span class="op" id="5347695">=</span>&nbsp;<span class="ident" id="5347697"><a href="/gostd/encoding/gob/decoder.go.html#5346225">bufio</a></span><span class="op" id="5347702">.</span><span class="ident" id="5347703"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="5347712">(</span><span class="ident" id="5347713"><a href="/gostd/encoding/gob/decoder.go.html#5347531">r</a></span><span class="op" id="5347714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5347717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347720"><a href="/gostd/encoding/gob/decoder.go.html#5347556">dec</a></span><span class="op" id="5347723">.</span><span class="ident" id="5347724"><a href="/gostd/encoding/gob/decoder.go.html#5346693">r</a></span>&nbsp;<span class="op" id="5347726">=</span>&nbsp;<span class="ident" id="5347728"><a href="/gostd/encoding/gob/decoder.go.html#5347531">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347731"><a href="/gostd/encoding/gob/decoder.go.html#5347556">dec</a></span><span class="op" id="5347734">.</span><span class="ident" id="5347735"><a href="/gostd/encoding/gob/decoder.go.html#5346863">wireType</a></span>&nbsp;<span class="op" id="5347744">=</span>&nbsp;<span class="builtinfunc" id="5347746">make</span><span class="op" id="5347750">(</span><span class="keyword" id="5347751">map</span><span class="op" id="5347754">[</span><span class="ident" id="5347755"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5347761">]</span><span class="op" id="5347762">*</span><span class="ident" id="5347763"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5347771">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347774"><a href="/gostd/encoding/gob/decoder.go.html#5347556">dec</a></span><span class="op" id="5347777">.</span><span class="ident" id="5347778"><a href="/gostd/encoding/gob/decoder.go.html#5346960">decoderCache</a></span>&nbsp;<span class="op" id="5347791">=</span>&nbsp;<span class="builtinfunc" id="5347793">make</span><span class="op" id="5347797">(</span><span class="keyword" id="5347798">map</span><span class="op" id="5347801">[</span><span class="ident" id="5347802"><a href="/gostd/encoding/gob/decoder.go.html#5346250">reflect</a></span><span class="op" id="5347809">.</span><span class="ident" id="5347810"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5347814">]</span><span class="keyword" id="5347815">map</span><span class="op" id="5347818">[</span><span class="ident" id="5347819"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5347825">]</span><span class="op" id="5347826">*</span><span class="op" id="5347827">*</span><span class="ident" id="5347828"><a href="/gostd/encoding/gob/decode.go.html#5319367">decEngine</a></span><span class="op" id="5347837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347840"><a href="/gostd/encoding/gob/decoder.go.html#5347556">dec</a></span><span class="op" id="5347843">.</span><span class="ident" id="5347844"><a href="/gostd/encoding/gob/decoder.go.html#5347043">ignorerCache</a></span>&nbsp;<span class="op" id="5347857">=</span>&nbsp;<span class="builtinfunc" id="5347859">make</span><span class="op" id="5347863">(</span><span class="keyword" id="5347864">map</span><span class="op" id="5347867">[</span><span class="ident" id="5347868"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5347874">]</span><span class="op" id="5347875">*</span><span class="op" id="5347876">*</span><span class="ident" id="5347877"><a href="/gostd/encoding/gob/decode.go.html#5319367">decEngine</a></span><span class="op" id="5347886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5347889"><a href="/gostd/encoding/gob/decoder.go.html#5347556">dec</a></span><span class="op" id="5347892">.</span><span class="ident" id="5347893"><a href="/gostd/encoding/gob/decoder.go.html#5347231">countBuf</a></span>&nbsp;<span class="op" id="5347902">=</span>&nbsp;<span class="builtinfunc" id="5347904">make</span><span class="op" id="5347908">(</span><span class="op" id="5347909">[</span><span class="op" id="5347910">]</span><span class="builtintype" id="5347911">byte</span><span class="op" id="5347915">,</span>&nbsp;<span class="num" id="5347917">9</span><span class="op" id="5347918">)</span>&nbsp;<span class="comment" id="5347920">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5347976">return</span>&nbsp;<span class="ident" id="5347983"><a href="/gostd/encoding/gob/decoder.go.html#5347556">dec</a></span><br>
<span class="lineno">50</span><span class="op" id="5347987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5347990">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5348034">func</span>&nbsp;<span class="op" id="5348039">(</span><span class="ident" id="5348040">dec</span>&nbsp;<span class="op" id="5348044">*</span><span class="ident" id="5348045"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5348052">)</span>&nbsp;<span class="ident" id="5348054">recvType</span><span class="op" id="5348062">(</span><span class="ident" id="5348063">id</span>&nbsp;<span class="ident" id="5348066"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5348072">)</span>&nbsp;<span class="op" id="5348074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5348077">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348130">if</span>&nbsp;<span class="ident" id="5348133"><a href="/gostd/encoding/gob/decoder.go.html#5348063">id</a></span>&nbsp;<span class="op" id="5348136">&lt;</span>&nbsp;<span class="ident" id="5348138"><a href="/gostd/encoding/gob/type.go.html#5413513">firstUserId</a></span>&nbsp;<span class="op" id="5348150">||</span>&nbsp;<span class="ident" id="5348153"><a href="/gostd/encoding/gob/decoder.go.html#5348040">dec</a></span><span class="op" id="5348156">.</span><span class="ident" id="5348157"><a href="/gostd/encoding/gob/decoder.go.html#5346863">wireType</a></span><span class="op" id="5348165">[</span><span class="ident" id="5348166"><a href="/gostd/encoding/gob/decoder.go.html#5348063">id</a></span><span class="op" id="5348168">]</span>&nbsp;<span class="op" id="5348170">!=</span>&nbsp;<span class="builtintype" id="5348173">nil</span>&nbsp;<span class="op" id="5348177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5348181"><a href="/gostd/encoding/gob/decoder.go.html#5348040">dec</a></span><span class="op" id="5348184">.</span><span class="ident" id="5348185"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5348189">=</span>&nbsp;<span class="ident" id="5348191"><a href="/gostd/encoding/gob/decoder.go.html#5346234">errors</a></span><span class="op" id="5348197">.</span><span class="ident" id="5348198"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5348201">(</span><span class="string" id="5348202">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="5348232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348236">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5348244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5348248">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5348258">wire</span>&nbsp;<span class="op" id="5348263">:=</span>&nbsp;<span class="builtinfunc" id="5348266">new</span><span class="op" id="5348269">(</span><span class="ident" id="5348270"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5348278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5348281"><a href="/gostd/encoding/gob/decoder.go.html#5348040">dec</a></span><span class="op" id="5348284">.</span><span class="ident" id="5348285"><a href="/gostd/encoding/gob/decode.go.html#5344012">decodeValue</a></span><span class="op" id="5348296">(</span><span class="ident" id="5348297"><a href="/gostd/encoding/gob/type.go.html#5416469">tWireType</a></span><span class="op" id="5348306">,</span>&nbsp;<span class="ident" id="5348308"><a href="/gostd/encoding/gob/decoder.go.html#5346250">reflect</a></span><span class="op" id="5348315">.</span><span class="ident" id="5348316"><a href="/gostd/reflect/value.go.html#2892536">ValueOf</a></span><span class="op" id="5348323">(</span><span class="ident" id="5348324"><a href="/gostd/encoding/gob/decoder.go.html#5348258">wire</a></span><span class="op" id="5348328">)</span><span class="op" id="5348329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348332">if</span>&nbsp;<span class="ident" id="5348335"><a href="/gostd/encoding/gob/decoder.go.html#5348040">dec</a></span><span class="op" id="5348338">.</span><span class="ident" id="5348339"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5348343">!=</span>&nbsp;<span class="builtintype" id="5348346">nil</span>&nbsp;<span class="op" id="5348350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348354">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5348362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5348365">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5348400"><a href="/gostd/encoding/gob/decoder.go.html#5348040">dec</a></span><span class="op" id="5348403">.</span><span class="ident" id="5348404"><a href="/gostd/encoding/gob/decoder.go.html#5346863">wireType</a></span><span class="op" id="5348412">[</span><span class="ident" id="5348413"><a href="/gostd/encoding/gob/decoder.go.html#5348063">id</a></span><span class="op" id="5348415">]</span>&nbsp;<span class="op" id="5348417">=</span>&nbsp;<span class="ident" id="5348419"><a href="/gostd/encoding/gob/decoder.go.html#5348258">wire</a></span><br>
<span class="lineno"></span><span class="op" id="5348424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="5348427">var</span>&nbsp;<span class="ident" id="5348431">errBadCount</span>&nbsp;<span class="op" id="5348443">=</span>&nbsp;<span class="ident" id="5348445"><a href="/gostd/encoding/gob/decoder.go.html#5346234">errors</a></span><span class="op" id="5348451">.</span><span class="ident" id="5348452"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5348455">(</span><span class="string" id="5348456">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="5348480">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5348483">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="5348569">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="5348657">func</span>&nbsp;<span class="op" id="5348662">(</span><span class="ident" id="5348663">dec</span>&nbsp;<span class="op" id="5348667">*</span><span class="ident" id="5348668"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5348675">)</span>&nbsp;<span class="ident" id="5348677">recvMessage</span><span class="op" id="5348688">(</span><span class="op" id="5348689">)</span>&nbsp;<span class="builtintype" id="5348691">bool</span>&nbsp;<span class="op" id="5348696">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5348699">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5348717">nbytes</span><span class="op" id="5348723">,</span>&nbsp;<span class="ident" id="5348725">_</span><span class="op" id="5348726">,</span>&nbsp;<span class="ident" id="5348728">err</span>&nbsp;<span class="op" id="5348732">:=</span>&nbsp;<span class="ident" id="5348735"><a href="/gostd/encoding/gob/decode.go.html#5310259">decodeUintReader</a></span><span class="op" id="5348751">(</span><span class="ident" id="5348752"><a href="/gostd/encoding/gob/decoder.go.html#5348663">dec</a></span><span class="op" id="5348755">.</span><span class="ident" id="5348756"><a href="/gostd/encoding/gob/decoder.go.html#5346693">r</a></span><span class="op" id="5348757">,</span>&nbsp;<span class="ident" id="5348759"><a href="/gostd/encoding/gob/decoder.go.html#5348663">dec</a></span><span class="op" id="5348762">.</span><span class="ident" id="5348763"><a href="/gostd/encoding/gob/decoder.go.html#5347231">countBuf</a></span><span class="op" id="5348771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348774">if</span>&nbsp;<span class="ident" id="5348777"><a href="/gostd/encoding/gob/decoder.go.html#5348728">err</a></span>&nbsp;<span class="op" id="5348781">!=</span>&nbsp;<span class="builtintype" id="5348784">nil</span>&nbsp;<span class="op" id="5348788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5348792"><a href="/gostd/encoding/gob/decoder.go.html#5348663">dec</a></span><span class="op" id="5348795">.</span><span class="ident" id="5348796"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5348800">=</span>&nbsp;<span class="ident" id="5348802"><a href="/gostd/encoding/gob/decoder.go.html#5348728">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348808">return</span>&nbsp;<span class="builtintype" id="5348815">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5348822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348825">if</span>&nbsp;<span class="ident" id="5348828"><a href="/gostd/encoding/gob/decoder.go.html#5348717">nbytes</a></span>&nbsp;<span class="op" id="5348835">&gt;=</span>&nbsp;<span class="ident" id="5348838"><a href="/gostd/encoding/gob/decoder.go.html#5346449">tooBig</a></span>&nbsp;<span class="op" id="5348845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5348849"><a href="/gostd/encoding/gob/decoder.go.html#5348663">dec</a></span><span class="op" id="5348852">.</span><span class="ident" id="5348853"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5348857">=</span>&nbsp;<span class="ident" id="5348859"><a href="/gostd/encoding/gob/decoder.go.html#5348431">errBadCount</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348873">return</span>&nbsp;<span class="builtintype" id="5348880">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5348887">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5348890"><a href="/gostd/encoding/gob/decoder.go.html#5348663">dec</a></span><span class="op" id="5348893">.</span><span class="ident" id="5348894"><a href="/gostd/encoding/gob/decoder.go.html#5349024">readMessage</a></span><span class="op" id="5348905">(</span><span class="builtintype" id="5348906">int</span><span class="op" id="5348909">(</span><span class="ident" id="5348910"><a href="/gostd/encoding/gob/decoder.go.html#5348717">nbytes</a></span><span class="op" id="5348916">)</span><span class="op" id="5348917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5348920">return</span>&nbsp;<span class="ident" id="5348927"><a href="/gostd/encoding/gob/decoder.go.html#5348663">dec</a></span><span class="op" id="5348930">.</span><span class="ident" id="5348931"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5348935">==</span>&nbsp;<span class="builtintype" id="5348938">nil</span><br>
<span class="lineno"></span><span class="op" id="5348942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5348945">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="5349004">func</span>&nbsp;<span class="op" id="5349009">(</span><span class="ident" id="5349010">dec</span>&nbsp;<span class="op" id="5349014">*</span><span class="ident" id="5349015"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5349022">)</span>&nbsp;<span class="ident" id="5349024">readMessage</span><span class="op" id="5349035">(</span><span class="ident" id="5349036">nbytes</span>&nbsp;<span class="builtintype" id="5349043">int</span><span class="op" id="5349046">)</span>&nbsp;<span class="op" id="5349048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349051">if</span>&nbsp;<span class="ident" id="5349054"><a href="/gostd/encoding/gob/decoder.go.html#5349010">dec</a></span><span class="op" id="5349057">.</span><span class="ident" id="5349058"><a href="/gostd/encoding/gob/decoder.go.html#5346769">buf</a></span><span class="op" id="5349061">.</span><span class="ident" id="5349062"><a href="/gostd/encoding/gob/decode.go.html#5309393">Len</a></span><span class="op" id="5349065">(</span><span class="op" id="5349066">)</span>&nbsp;<span class="op" id="5349068">!=</span>&nbsp;<span class="num" id="5349071">0</span>&nbsp;<span class="op" id="5349073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5349077">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5349121">panic</span><span class="op" id="5349126">(</span><span class="string" id="5349127">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="5349153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5349156">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5349159">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349177"><a href="/gostd/encoding/gob/decoder.go.html#5349010">dec</a></span><span class="op" id="5349180">.</span><span class="ident" id="5349181"><a href="/gostd/encoding/gob/decoder.go.html#5346769">buf</a></span><span class="op" id="5349184">.</span><span class="ident" id="5349185"><a href="/gostd/encoding/gob/decode.go.html#5309108">Size</a></span><span class="op" id="5349189">(</span><span class="ident" id="5349190"><a href="/gostd/encoding/gob/decoder.go.html#5349036">nbytes</a></span><span class="op" id="5349196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349199">_</span><span class="op" id="5349200">,</span>&nbsp;<span class="ident" id="5349202"><a href="/gostd/encoding/gob/decoder.go.html#5349010">dec</a></span><span class="op" id="5349205">.</span><span class="ident" id="5349206"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5349210">=</span>&nbsp;<span class="ident" id="5349212"><a href="/gostd/encoding/gob/decoder.go.html#5346244">io</a></span><span class="op" id="5349214">.</span><span class="ident" id="5349215"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5349223">(</span><span class="ident" id="5349224"><a href="/gostd/encoding/gob/decoder.go.html#5349010">dec</a></span><span class="op" id="5349227">.</span><span class="ident" id="5349228"><a href="/gostd/encoding/gob/decoder.go.html#5346693">r</a></span><span class="op" id="5349229">,</span>&nbsp;<span class="ident" id="5349231"><a href="/gostd/encoding/gob/decoder.go.html#5349010">dec</a></span><span class="op" id="5349234">.</span><span class="ident" id="5349235"><a href="/gostd/encoding/gob/decoder.go.html#5346769">buf</a></span><span class="op" id="5349238">.</span><span class="ident" id="5349239"><a href="/gostd/encoding/gob/decode.go.html#5309459">Bytes</a></span><span class="op" id="5349244">(</span><span class="op" id="5349245">)</span><span class="op" id="5349246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349249">if</span>&nbsp;<span class="ident" id="5349252"><a href="/gostd/encoding/gob/decoder.go.html#5349010">dec</a></span><span class="op" id="5349255">.</span><span class="ident" id="5349256"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5349260">!=</span>&nbsp;<span class="builtintype" id="5349263">nil</span>&nbsp;<span class="op" id="5349267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349271">if</span>&nbsp;<span class="ident" id="5349274"><a href="/gostd/encoding/gob/decoder.go.html#5349010">dec</a></span><span class="op" id="5349277">.</span><span class="ident" id="5349278"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5349282">==</span>&nbsp;<span class="ident" id="5349285"><a href="/gostd/encoding/gob/decoder.go.html#5346244">io</a></span><span class="op" id="5349287">.</span><span class="ident" id="5349288"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="5349292">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349297"><a href="/gostd/encoding/gob/decoder.go.html#5349010">dec</a></span><span class="op" id="5349300">.</span><span class="ident" id="5349301"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5349305">=</span>&nbsp;<span class="ident" id="5349307"><a href="/gostd/encoding/gob/decoder.go.html#5346244">io</a></span><span class="op" id="5349309">.</span><span class="ident" id="5349310"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5349329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5349332">}</span><br>
<span class="lineno"></span><span class="op" id="5349334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5349337">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="5349418">func</span>&nbsp;<span class="ident" id="5349423">toInt</span><span class="op" id="5349428">(</span><span class="ident" id="5349429">x</span>&nbsp;<span class="builtintype" id="5349431">uint64</span><span class="op" id="5349437">)</span>&nbsp;<span class="builtintype" id="5349439">int64</span>&nbsp;<span class="op" id="5349445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349448">i</span>&nbsp;<span class="op" id="5349450">:=</span>&nbsp;<span class="builtintype" id="5349453">int64</span><span class="op" id="5349458">(</span><span class="ident" id="5349459"><a href="/gostd/encoding/gob/decoder.go.html#5349429">x</a></span>&nbsp;<span class="op" id="5349461">&gt;&gt;</span>&nbsp;<span class="num" id="5349464">1</span><span class="op" id="5349465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349468">if</span>&nbsp;<span class="ident" id="5349471"><a href="/gostd/encoding/gob/decoder.go.html#5349429">x</a></span><span class="op" id="5349472">&amp;</span><span class="num" id="5349473">1</span>&nbsp;<span class="op" id="5349475">!=</span>&nbsp;<span class="num" id="5349478">0</span>&nbsp;<span class="op" id="5349480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349484"><a href="/gostd/encoding/gob/decoder.go.html#5349448">i</a></span>&nbsp;<span class="op" id="5349486">=</span>&nbsp;<span class="op" id="5349488">^</span><span class="ident" id="5349489"><a href="/gostd/encoding/gob/decoder.go.html#5349448">i</a></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5349492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349495">return</span>&nbsp;<span class="ident" id="5349502"><a href="/gostd/encoding/gob/decoder.go.html#5349448">i</a></span><br>
<span class="lineno"></span><span class="op" id="5349504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5349507">func</span>&nbsp;<span class="op" id="5349512">(</span><span class="ident" id="5349513">dec</span>&nbsp;<span class="op" id="5349517">*</span><span class="ident" id="5349518"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5349525">)</span>&nbsp;<span class="ident" id="5349527">nextInt</span><span class="op" id="5349534">(</span><span class="op" id="5349535">)</span>&nbsp;<span class="builtintype" id="5349537">int64</span>&nbsp;<span class="op" id="5349543">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349546">n</span><span class="op" id="5349547">,</span>&nbsp;<span class="ident" id="5349549">_</span><span class="op" id="5349550">,</span>&nbsp;<span class="ident" id="5349552">err</span>&nbsp;<span class="op" id="5349556">:=</span>&nbsp;<span class="ident" id="5349559"><a href="/gostd/encoding/gob/decode.go.html#5310259">decodeUintReader</a></span><span class="op" id="5349575">(</span><span class="op" id="5349576">&amp;</span><span class="ident" id="5349577"><a href="/gostd/encoding/gob/decoder.go.html#5349513">dec</a></span><span class="op" id="5349580">.</span><span class="ident" id="5349581"><a href="/gostd/encoding/gob/decoder.go.html#5346769">buf</a></span><span class="op" id="5349584">,</span>&nbsp;<span class="ident" id="5349586"><a href="/gostd/encoding/gob/decoder.go.html#5349513">dec</a></span><span class="op" id="5349589">.</span><span class="ident" id="5349590"><a href="/gostd/encoding/gob/decoder.go.html#5347231">countBuf</a></span><span class="op" id="5349598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349601">if</span>&nbsp;<span class="ident" id="5349604"><a href="/gostd/encoding/gob/decoder.go.html#5349552">err</a></span>&nbsp;<span class="op" id="5349608">!=</span>&nbsp;<span class="builtintype" id="5349611">nil</span>&nbsp;<span class="op" id="5349615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349619"><a href="/gostd/encoding/gob/decoder.go.html#5349513">dec</a></span><span class="op" id="5349622">.</span><span class="ident" id="5349623"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5349627">=</span>&nbsp;<span class="ident" id="5349629"><a href="/gostd/encoding/gob/decoder.go.html#5349552">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5349634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349637">return</span>&nbsp;<span class="ident" id="5349644"><a href="/gostd/encoding/gob/decoder.go.html#5349423">toInt</a></span><span class="op" id="5349649">(</span><span class="ident" id="5349650"><a href="/gostd/encoding/gob/decoder.go.html#5349546">n</a></span><span class="op" id="5349651">)</span><br>
<span class="lineno">120</span><span class="op" id="5349653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5349656">func</span>&nbsp;<span class="op" id="5349661">(</span><span class="ident" id="5349662">dec</span>&nbsp;<span class="op" id="5349666">*</span><span class="ident" id="5349667"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5349674">)</span>&nbsp;<span class="ident" id="5349676">nextUint</span><span class="op" id="5349684">(</span><span class="op" id="5349685">)</span>&nbsp;<span class="builtintype" id="5349687">uint64</span>&nbsp;<span class="op" id="5349694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349697">n</span><span class="op" id="5349698">,</span>&nbsp;<span class="ident" id="5349700">_</span><span class="op" id="5349701">,</span>&nbsp;<span class="ident" id="5349703">err</span>&nbsp;<span class="op" id="5349707">:=</span>&nbsp;<span class="ident" id="5349710"><a href="/gostd/encoding/gob/decode.go.html#5310259">decodeUintReader</a></span><span class="op" id="5349726">(</span><span class="op" id="5349727">&amp;</span><span class="ident" id="5349728"><a href="/gostd/encoding/gob/decoder.go.html#5349662">dec</a></span><span class="op" id="5349731">.</span><span class="ident" id="5349732"><a href="/gostd/encoding/gob/decoder.go.html#5346769">buf</a></span><span class="op" id="5349735">,</span>&nbsp;<span class="ident" id="5349737"><a href="/gostd/encoding/gob/decoder.go.html#5349662">dec</a></span><span class="op" id="5349740">.</span><span class="ident" id="5349741"><a href="/gostd/encoding/gob/decoder.go.html#5347231">countBuf</a></span><span class="op" id="5349749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349752">if</span>&nbsp;<span class="ident" id="5349755"><a href="/gostd/encoding/gob/decoder.go.html#5349703">err</a></span>&nbsp;<span class="op" id="5349759">!=</span>&nbsp;<span class="builtintype" id="5349762">nil</span>&nbsp;<span class="op" id="5349766">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5349770"><a href="/gostd/encoding/gob/decoder.go.html#5349662">dec</a></span><span class="op" id="5349773">.</span><span class="ident" id="5349774"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5349778">=</span>&nbsp;<span class="ident" id="5349780"><a href="/gostd/encoding/gob/decoder.go.html#5349703">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5349785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5349788">return</span>&nbsp;<span class="ident" id="5349795"><a href="/gostd/encoding/gob/decoder.go.html#5349697">n</a></span><br>
<span class="lineno"></span><span class="op" id="5349797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5349800">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="5349830">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="5349846">//&nbsp;&nbsp;&nbsp;&nbsp;(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="5349892">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="5349956">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="5350022">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5350087">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="5350113">func</span>&nbsp;<span class="op" id="5350118">(</span><span class="ident" id="5350119">dec</span>&nbsp;<span class="op" id="5350123">*</span><span class="ident" id="5350124"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5350131">)</span>&nbsp;<span class="ident" id="5350133">decodeTypeSequence</span><span class="op" id="5350151">(</span><span class="ident" id="5350152">isInterface</span>&nbsp;<span class="builtintype" id="5350164">bool</span><span class="op" id="5350168">)</span>&nbsp;<span class="ident" id="5350170"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span>&nbsp;<span class="op" id="5350177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350180">for</span>&nbsp;<span class="ident" id="5350184"><a href="/gostd/encoding/gob/decoder.go.html#5350119">dec</a></span><span class="op" id="5350187">.</span><span class="ident" id="5350188"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5350192">==</span>&nbsp;<span class="builtintype" id="5350195">nil</span>&nbsp;<span class="op" id="5350199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350203">if</span>&nbsp;<span class="ident" id="5350206"><a href="/gostd/encoding/gob/decoder.go.html#5350119">dec</a></span><span class="op" id="5350209">.</span><span class="ident" id="5350210"><a href="/gostd/encoding/gob/decoder.go.html#5346769">buf</a></span><span class="op" id="5350213">.</span><span class="ident" id="5350214"><a href="/gostd/encoding/gob/decode.go.html#5309393">Len</a></span><span class="op" id="5350217">(</span><span class="op" id="5350218">)</span>&nbsp;<span class="op" id="5350220">==</span>&nbsp;<span class="num" id="5350223">0</span>&nbsp;<span class="op" id="5350225">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350230">if</span>&nbsp;<span class="op" id="5350233">!</span><span class="ident" id="5350234"><a href="/gostd/encoding/gob/decoder.go.html#5350119">dec</a></span><span class="op" id="5350237">.</span><span class="ident" id="5350238"><a href="/gostd/encoding/gob/decoder.go.html#5348677">recvMessage</a></span><span class="op" id="5350249">(</span><span class="op" id="5350250">)</span>&nbsp;<span class="op" id="5350252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350258">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5350267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5350271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5350275">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5350299">id</span>&nbsp;<span class="op" id="5350302">:=</span>&nbsp;<span class="ident" id="5350305"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5350311">(</span><span class="ident" id="5350312"><a href="/gostd/encoding/gob/decoder.go.html#5350119">dec</a></span><span class="op" id="5350315">.</span><span class="ident" id="5350316"><a href="/gostd/encoding/gob/decoder.go.html#5349527">nextInt</a></span><span class="op" id="5350323">(</span><span class="op" id="5350324">)</span><span class="op" id="5350325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350329">if</span>&nbsp;<span class="ident" id="5350332"><a href="/gostd/encoding/gob/decoder.go.html#5350299">id</a></span>&nbsp;<span class="op" id="5350335">&gt;=</span>&nbsp;<span class="num" id="5350338">0</span>&nbsp;<span class="op" id="5350340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5350345">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350366">return</span>&nbsp;<span class="ident" id="5350373"><a href="/gostd/encoding/gob/decoder.go.html#5350299">id</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5350378">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5350382">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5350422"><a href="/gostd/encoding/gob/decoder.go.html#5350119">dec</a></span><span class="op" id="5350425">.</span><span class="ident" id="5350426"><a href="/gostd/encoding/gob/decoder.go.html#5348054">recvType</a></span><span class="op" id="5350434">(</span><span class="op" id="5350435">-</span><span class="ident" id="5350436"><a href="/gostd/encoding/gob/decoder.go.html#5350299">id</a></span><span class="op" id="5350438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5350442">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5350503">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5350561">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5350621">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350660">if</span>&nbsp;<span class="ident" id="5350663"><a href="/gostd/encoding/gob/decoder.go.html#5350119">dec</a></span><span class="op" id="5350666">.</span><span class="ident" id="5350667"><a href="/gostd/encoding/gob/decoder.go.html#5346769">buf</a></span><span class="op" id="5350670">.</span><span class="ident" id="5350671"><a href="/gostd/encoding/gob/decode.go.html#5309393">Len</a></span><span class="op" id="5350674">(</span><span class="op" id="5350675">)</span>&nbsp;<span class="op" id="5350677">&gt;</span>&nbsp;<span class="num" id="5350679">0</span>&nbsp;<span class="op" id="5350681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350686">if</span>&nbsp;<span class="op" id="5350689">!</span><span class="ident" id="5350690"><a href="/gostd/encoding/gob/decoder.go.html#5350152">isInterface</a></span>&nbsp;<span class="op" id="5350702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5350708"><a href="/gostd/encoding/gob/decoder.go.html#5350119">dec</a></span><span class="op" id="5350711">.</span><span class="ident" id="5350712"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5350716">=</span>&nbsp;<span class="ident" id="5350718"><a href="/gostd/encoding/gob/decoder.go.html#5346234">errors</a></span><span class="op" id="5350724">.</span><span class="ident" id="5350725"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5350728">(</span><span class="string" id="5350729">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="5350751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350757">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5350766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5350771"><a href="/gostd/encoding/gob/decoder.go.html#5350119">dec</a></span><span class="op" id="5350774">.</span><span class="ident" id="5350775"><a href="/gostd/encoding/gob/decoder.go.html#5349676">nextUint</a></span><span class="op" id="5350783">(</span><span class="op" id="5350784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5350788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5350791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5350794">return</span>&nbsp;<span class="op" id="5350801">-</span><span class="num" id="5350802">1</span><br>
<span class="lineno">165</span><span class="op" id="5350804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5350807">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="5350871">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5350931">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="5350987">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5351038">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="5351087">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5351140">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="5351162">func</span>&nbsp;<span class="op" id="5351167">(</span><span class="ident" id="5351168">dec</span>&nbsp;<span class="op" id="5351172">*</span><span class="ident" id="5351173"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5351180">)</span>&nbsp;<span class="ident" id="5351182">Decode</span><span class="op" id="5351188">(</span><span class="ident" id="5351189">e</span>&nbsp;<span class="keyword" id="5351191">interface</span><span class="op" id="5351200">{</span><span class="op" id="5351201">}</span><span class="op" id="5351202">)</span>&nbsp;<span class="builtintype" id="5351204">error</span>&nbsp;<span class="op" id="5351210">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5351213">if</span>&nbsp;<span class="ident" id="5351216"><a href="/gostd/encoding/gob/decoder.go.html#5351189">e</a></span>&nbsp;<span class="op" id="5351218">==</span>&nbsp;<span class="builtintype" id="5351221">nil</span>&nbsp;<span class="op" id="5351225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5351229">return</span>&nbsp;<span class="ident" id="5351236"><a href="/gostd/encoding/gob/decoder.go.html#5351168">dec</a></span><span class="op" id="5351239">.</span><span class="ident" id="5351240"><a href="/gostd/encoding/gob/decoder.go.html#5351987">DecodeValue</a></span><span class="op" id="5351251">(</span><span class="ident" id="5351252"><a href="/gostd/encoding/gob/decoder.go.html#5346250">reflect</a></span><span class="op" id="5351259">.</span><span class="ident" id="5351260"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5351265">{</span><span class="op" id="5351266">}</span><span class="op" id="5351267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5351270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5351273">value</span>&nbsp;<span class="op" id="5351279">:=</span>&nbsp;<span class="ident" id="5351282"><a href="/gostd/encoding/gob/decoder.go.html#5346250">reflect</a></span><span class="op" id="5351289">.</span><span class="ident" id="5351290"><a href="/gostd/reflect/value.go.html#2892536">ValueOf</a></span><span class="op" id="5351297">(</span><span class="ident" id="5351298"><a href="/gostd/encoding/gob/decoder.go.html#5351189">e</a></span><span class="op" id="5351299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5351302">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5351372">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5351427">if</span>&nbsp;<span class="ident" id="5351430"><a href="/gostd/encoding/gob/decoder.go.html#5351273">value</a></span><span class="op" id="5351435">.</span><span class="ident" id="5351436"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="5351440">(</span><span class="op" id="5351441">)</span><span class="op" id="5351442">.</span><span class="ident" id="5351443"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5351447">(</span><span class="op" id="5351448">)</span>&nbsp;<span class="op" id="5351450">!=</span>&nbsp;<span class="ident" id="5351453"><a href="/gostd/encoding/gob/decoder.go.html#5346250">reflect</a></span><span class="op" id="5351460">.</span><span class="ident" id="5351461"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="5351465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5351469"><a href="/gostd/encoding/gob/decoder.go.html#5351168">dec</a></span><span class="op" id="5351472">.</span><span class="ident" id="5351473"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5351477">=</span>&nbsp;<span class="ident" id="5351479"><a href="/gostd/encoding/gob/decoder.go.html#5346234">errors</a></span><span class="op" id="5351485">.</span><span class="ident" id="5351486"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5351489">(</span><span class="string" id="5351490">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="5351533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5351537">return</span>&nbsp;<span class="ident" id="5351544"><a href="/gostd/encoding/gob/decoder.go.html#5351168">dec</a></span><span class="op" id="5351547">.</span><span class="ident" id="5351548"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5351553">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5351556">return</span>&nbsp;<span class="ident" id="5351563"><a href="/gostd/encoding/gob/decoder.go.html#5351168">dec</a></span><span class="op" id="5351566">.</span><span class="ident" id="5351567"><a href="/gostd/encoding/gob/decoder.go.html#5351987">DecodeValue</a></span><span class="op" id="5351578">(</span><span class="ident" id="5351579"><a href="/gostd/encoding/gob/decoder.go.html#5351273">value</a></span><span class="op" id="5351584">)</span><br>
<span class="lineno"></span><span class="op" id="5351586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5351589">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="5351648">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="5351737">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="5351811">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="5351887">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5351945">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5351967">func</span>&nbsp;<span class="op" id="5351972">(</span><span class="ident" id="5351973">dec</span>&nbsp;<span class="op" id="5351977">*</span><span class="ident" id="5351978"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><span class="op" id="5351985">)</span>&nbsp;<span class="ident" id="5351987">DecodeValue</span><span class="op" id="5351998">(</span><span class="ident" id="5351999">v</span>&nbsp;<span class="ident" id="5352001"><a href="/gostd/encoding/gob/decoder.go.html#5346250">reflect</a></span><span class="op" id="5352008">.</span><span class="ident" id="5352009"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5352014">)</span>&nbsp;<span class="builtintype" id="5352016">error</span>&nbsp;<span class="op" id="5352022">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5352025">if</span>&nbsp;<span class="ident" id="5352028"><a href="/gostd/encoding/gob/decoder.go.html#5351999">v</a></span><span class="op" id="5352029">.</span><span class="ident" id="5352030"><a href="/gostd/reflect/value.go.html#2861333">IsValid</a></span><span class="op" id="5352037">(</span><span class="op" id="5352038">)</span>&nbsp;<span class="op" id="5352040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5352044">if</span>&nbsp;<span class="ident" id="5352047"><a href="/gostd/encoding/gob/decoder.go.html#5351999">v</a></span><span class="op" id="5352048">.</span><span class="ident" id="5352049"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="5352053">(</span><span class="op" id="5352054">)</span>&nbsp;<span class="op" id="5352056">==</span>&nbsp;<span class="ident" id="5352059"><a href="/gostd/encoding/gob/decoder.go.html#5346250">reflect</a></span><span class="op" id="5352066">.</span><span class="ident" id="5352067"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="5352071">&amp;&amp;</span>&nbsp;<span class="op" id="5352074">!</span><span class="ident" id="5352075"><a href="/gostd/encoding/gob/decoder.go.html#5351999">v</a></span><span class="op" id="5352076">.</span><span class="ident" id="5352077"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="5352082">(</span><span class="op" id="5352083">)</span>&nbsp;<span class="op" id="5352085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5352090">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5352141">}</span>&nbsp;<span class="keyword" id="5352143">else</span>&nbsp;<span class="keyword" id="5352148">if</span>&nbsp;<span class="op" id="5352151">!</span><span class="ident" id="5352152"><a href="/gostd/encoding/gob/decoder.go.html#5351999">v</a></span><span class="op" id="5352153">.</span><span class="ident" id="5352154"><a href="/gostd/reflect/value.go.html#2841170">CanSet</a></span><span class="op" id="5352160">(</span><span class="op" id="5352161">)</span>&nbsp;<span class="op" id="5352163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5352168">return</span>&nbsp;<span class="ident" id="5352175"><a href="/gostd/encoding/gob/decoder.go.html#5346234">errors</a></span><span class="op" id="5352181">.</span><span class="ident" id="5352182"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5352185">(</span><span class="string" id="5352186">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="5352226">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5352230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5352233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5352236">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5352286"><a href="/gostd/encoding/gob/decoder.go.html#5351973">dec</a></span><span class="op" id="5352289">.</span><span class="ident" id="5352290"><a href="/gostd/encoding/gob/decoder.go.html#5346598">mutex</a></span><span class="op" id="5352295">.</span><span class="ident" id="5352296"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5352300">(</span><span class="op" id="5352301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5352304">defer</span>&nbsp;<span class="ident" id="5352310"><a href="/gostd/encoding/gob/decoder.go.html#5351973">dec</a></span><span class="op" id="5352313">.</span><span class="ident" id="5352314"><a href="/gostd/encoding/gob/decoder.go.html#5346598">mutex</a></span><span class="op" id="5352319">.</span><span class="ident" id="5352320"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5352326">(</span><span class="op" id="5352327">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5352331"><a href="/gostd/encoding/gob/decoder.go.html#5351973">dec</a></span><span class="op" id="5352334">.</span><span class="ident" id="5352335"><a href="/gostd/encoding/gob/decoder.go.html#5346769">buf</a></span><span class="op" id="5352338">.</span><span class="ident" id="5352339"><a href="/gostd/encoding/gob/decode.go.html#5309525">Reset</a></span><span class="op" id="5352344">(</span><span class="op" id="5352345">)</span>&nbsp;<span class="comment" id="5352347">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5352398"><a href="/gostd/encoding/gob/decoder.go.html#5351973">dec</a></span><span class="op" id="5352401">.</span><span class="ident" id="5352402"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5352406">=</span>&nbsp;<span class="builtintype" id="5352408">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5352413">id</span>&nbsp;<span class="op" id="5352416">:=</span>&nbsp;<span class="ident" id="5352419"><a href="/gostd/encoding/gob/decoder.go.html#5351973">dec</a></span><span class="op" id="5352422">.</span><span class="ident" id="5352423"><a href="/gostd/encoding/gob/decoder.go.html#5350133">decodeTypeSequence</a></span><span class="op" id="5352441">(</span><span class="builtintype" id="5352442">false</span><span class="op" id="5352447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5352450">if</span>&nbsp;<span class="ident" id="5352453"><a href="/gostd/encoding/gob/decoder.go.html#5351973">dec</a></span><span class="op" id="5352456">.</span><span class="ident" id="5352457"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span>&nbsp;<span class="op" id="5352461">==</span>&nbsp;<span class="builtintype" id="5352464">nil</span>&nbsp;<span class="op" id="5352468">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5352472"><a href="/gostd/encoding/gob/decoder.go.html#5351973">dec</a></span><span class="op" id="5352475">.</span><span class="ident" id="5352476"><a href="/gostd/encoding/gob/decode.go.html#5344012">decodeValue</a></span><span class="op" id="5352487">(</span><span class="ident" id="5352488"><a href="/gostd/encoding/gob/decoder.go.html#5352413">id</a></span><span class="op" id="5352490">,</span>&nbsp;<span class="ident" id="5352492"><a href="/gostd/encoding/gob/decoder.go.html#5351999">v</a></span><span class="op" id="5352493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5352496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5352499">return</span>&nbsp;<span class="ident" id="5352506"><a href="/gostd/encoding/gob/decoder.go.html#5351973">dec</a></span><span class="op" id="5352509">.</span><span class="ident" id="5352510"><a href="/gostd/encoding/gob/decoder.go.html#5347338">err</a></span><br>
<span class="lineno"></span><span class="op" id="5352514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="5352517">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="5352597">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="5352682">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5352706">var</span>&nbsp;<span class="ident" id="5352710">debugFunc</span>&nbsp;<span class="keyword" id="5352720">func</span><span class="op" id="5352724">(</span><span class="ident" id="5352725"><a href="/gostd/encoding/gob/decoder.go.html#5346244">io</a></span><span class="op" id="5352727">.</span><span class="ident" id="5352728"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5352734">)</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
