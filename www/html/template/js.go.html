<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3320353">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3320408">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3320462">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3320513">package</span>&nbsp;<span class="ident" id="3320521">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3320531">import</span>&nbsp;<span class="op" id="3320538">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3320541">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3320550">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3320567">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3320574">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3320585">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3320596">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3320611">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3320614">//&nbsp;nextJSCtx&nbsp;returns&nbsp;the&nbsp;context&nbsp;that&nbsp;determines&nbsp;whether&nbsp;a&nbsp;slash&nbsp;after&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3320689">//&nbsp;given&nbsp;run&nbsp;of&nbsp;tokens&nbsp;starts&nbsp;a&nbsp;regular&nbsp;expression&nbsp;instead&nbsp;of&nbsp;a&nbsp;division</span><br>
<span class="lineno"></span><span class="comment" id="3320762">//&nbsp;operator:&nbsp;/&nbsp;or&nbsp;/=.</span><br>
<span class="lineno"></span><span class="comment" id="3320784">//</span><br>
<span class="lineno">20</span><span class="comment" id="3320787">//&nbsp;This&nbsp;assumes&nbsp;that&nbsp;the&nbsp;token&nbsp;run&nbsp;does&nbsp;not&nbsp;include&nbsp;any&nbsp;string&nbsp;tokens,&nbsp;comment</span><br>
<span class="lineno"></span><span class="comment" id="3320866">//&nbsp;tokens,&nbsp;regular&nbsp;expression&nbsp;literal&nbsp;tokens,&nbsp;or&nbsp;division&nbsp;operators.</span><br>
<span class="lineno"></span><span class="comment" id="3320935">//</span><br>
<span class="lineno"></span><span class="comment" id="3320938">//&nbsp;This&nbsp;fails&nbsp;on&nbsp;some&nbsp;valid&nbsp;but&nbsp;nonsensical&nbsp;JavaScript&nbsp;programs&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="3321007">//&nbsp;&#34;x&nbsp;=&nbsp;++/foo/i&#34;&nbsp;which&nbsp;is&nbsp;quite&nbsp;different&nbsp;than&nbsp;&#34;x++/foo/i&#34;,&nbsp;but&nbsp;is&nbsp;not&nbsp;known&nbsp;to</span><br>
<span class="lineno">25</span><span class="comment" id="3321088">//&nbsp;fail&nbsp;on&nbsp;any&nbsp;known&nbsp;useful&nbsp;programs.&nbsp;It&nbsp;is&nbsp;based&nbsp;on&nbsp;the&nbsp;draft</span><br>
<span class="lineno"></span><span class="comment" id="3321151">//&nbsp;JavaScript&nbsp;2.0&nbsp;lexical&nbsp;grammar&nbsp;and&nbsp;requires&nbsp;one&nbsp;token&nbsp;of&nbsp;lookbehind:</span><br>
<span class="lineno"></span><span class="comment" id="3321223">//&nbsp;http://www.mozilla.org/js/language/js20-2000-07/rationale/syntax.html</span><br>
<span class="lineno"></span><span class="keyword" id="3321296">func</span>&nbsp;<span class="ident" id="3321301">nextJSCtx</span><span class="op" id="3321310">(</span><span class="ident" id="3321311">s</span>&nbsp;<span class="op" id="3321313">[</span><span class="op" id="3321314">]</span><span class="builtintype" id="3321315">byte</span><span class="op" id="3321319">,</span>&nbsp;<span class="ident" id="3321321">preceding</span>&nbsp;<span class="ident" id="3321331"><a href="/html/template/context.go.html#3264693">jsCtx</a></span><span class="op" id="3321336">)</span>&nbsp;<span class="ident" id="3321338"><a href="/html/template/context.go.html#3264693">jsCtx</a></span>&nbsp;<span class="op" id="3321344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3321347"><a href="/html/template/js.go.html#3321311">s</a></span>&nbsp;<span class="op" id="3321349">=</span>&nbsp;<span class="ident" id="3321351"><a href="/html/template/js.go.html#3320541">bytes</a></span><span class="op" id="3321356">.</span><span class="ident" id="3321357">TrimRight</span><span class="op" id="3321366">(</span><span class="ident" id="3321367"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3321368">,</span>&nbsp;<span class="string" id="3321370">&#34;\t\n\f\r&nbsp;\u2028\u2029&#34;</span><span class="op" id="3321393">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321396">if</span>&nbsp;<span class="builtinfunc" id="3321399">len</span><span class="op" id="3321402">(</span><span class="ident" id="3321403"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3321404">)</span>&nbsp;<span class="op" id="3321406">==</span>&nbsp;<span class="num" id="3321409">0</span>&nbsp;<span class="op" id="3321411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321415">return</span>&nbsp;<span class="ident" id="3321422"><a href="/html/template/js.go.html#3321321">preceding</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3321433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3321437">//&nbsp;All&nbsp;cases&nbsp;below&nbsp;are&nbsp;in&nbsp;the&nbsp;single-byte&nbsp;UTF-8&nbsp;group.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321493">switch</span>&nbsp;<span class="ident" id="3321500">c</span><span class="op" id="3321501">,</span>&nbsp;<span class="ident" id="3321503">n</span>&nbsp;<span class="op" id="3321505">:=</span>&nbsp;<span class="ident" id="3321508"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3321509">[</span><span class="builtinfunc" id="3321510">len</span><span class="op" id="3321513">(</span><span class="ident" id="3321514"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3321515">)</span><span class="op" id="3321516">-</span><span class="num" id="3321517">1</span><span class="op" id="3321518">]</span><span class="op" id="3321519">,</span>&nbsp;<span class="builtinfunc" id="3321521">len</span><span class="op" id="3321524">(</span><span class="ident" id="3321525"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3321526">)</span><span class="op" id="3321527">;</span>&nbsp;<span class="ident" id="3321529"><a href="/html/template/js.go.html#3321500">c</a></span>&nbsp;<span class="op" id="3321531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321534">case</span>&nbsp;<span class="string" id="3321539">&#39;+&#39;</span><span class="op" id="3321542">,</span>&nbsp;<span class="string" id="3321544">&#39;-&#39;</span><span class="op" id="3321547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3321551">//&nbsp;++&nbsp;and&nbsp;--&nbsp;are&nbsp;not&nbsp;regexp&nbsp;preceders,&nbsp;but&nbsp;+&nbsp;and&nbsp;-&nbsp;are&nbsp;whether</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3321616">//&nbsp;they&nbsp;are&nbsp;used&nbsp;as&nbsp;infix&nbsp;or&nbsp;prefix&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3321665">start</span>&nbsp;<span class="op" id="3321671">:=</span>&nbsp;<span class="ident" id="3321674"><a href="/html/template/js.go.html#3321503">n</a></span>&nbsp;<span class="op" id="3321676">-</span>&nbsp;<span class="num" id="3321678">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3321682">//&nbsp;Count&nbsp;the&nbsp;number&nbsp;of&nbsp;adjacent&nbsp;dashes&nbsp;or&nbsp;pluses.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321734">for</span>&nbsp;<span class="ident" id="3321738"><a href="/html/template/js.go.html#3321665">start</a></span>&nbsp;<span class="op" id="3321744">&gt;</span>&nbsp;<span class="num" id="3321746">0</span>&nbsp;<span class="op" id="3321748">&amp;&amp;</span>&nbsp;<span class="ident" id="3321751"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3321752">[</span><span class="ident" id="3321753"><a href="/html/template/js.go.html#3321665">start</a></span><span class="op" id="3321758">-</span><span class="num" id="3321759">1</span><span class="op" id="3321760">]</span>&nbsp;<span class="op" id="3321762">==</span>&nbsp;<span class="ident" id="3321765"><a href="/html/template/js.go.html#3321500">c</a></span>&nbsp;<span class="op" id="3321767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3321772"><a href="/html/template/js.go.html#3321665">start</a></span><span class="op" id="3321777">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3321782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321786">if</span>&nbsp;<span class="op" id="3321789">(</span><span class="ident" id="3321790"><a href="/html/template/js.go.html#3321503">n</a></span><span class="op" id="3321791">-</span><span class="ident" id="3321792"><a href="/html/template/js.go.html#3321665">start</a></span><span class="op" id="3321797">)</span><span class="op" id="3321798">&amp;</span><span class="num" id="3321799">1</span>&nbsp;<span class="op" id="3321801">==</span>&nbsp;<span class="num" id="3321804">1</span>&nbsp;<span class="op" id="3321806">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3321811">//&nbsp;Reached&nbsp;for&nbsp;trailing&nbsp;minus&nbsp;signs&nbsp;since&nbsp;&#34;---&#34;&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3321869">//&nbsp;same&nbsp;as&nbsp;&#34;--&nbsp;-&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321891">return</span>&nbsp;<span class="ident" id="3321898"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3321912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321916">return</span>&nbsp;<span class="ident" id="3321923"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321935">case</span>&nbsp;<span class="string" id="3321940">&#39;.&#39;</span><span class="op" id="3321943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3321947">//&nbsp;Handle&nbsp;&#34;42.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321965">if</span>&nbsp;<span class="ident" id="3321968"><a href="/html/template/js.go.html#3321503">n</a></span>&nbsp;<span class="op" id="3321970">!=</span>&nbsp;<span class="num" id="3321973">1</span>&nbsp;<span class="op" id="3321975">&amp;&amp;</span>&nbsp;<span class="string" id="3321978">&#39;0&#39;</span>&nbsp;<span class="op" id="3321982">&lt;=</span>&nbsp;<span class="ident" id="3321985"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3321986">[</span><span class="ident" id="3321987"><a href="/html/template/js.go.html#3321503">n</a></span><span class="op" id="3321988">-</span><span class="num" id="3321989">2</span><span class="op" id="3321990">]</span>&nbsp;<span class="op" id="3321992">&amp;&amp;</span>&nbsp;<span class="ident" id="3321995"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3321996">[</span><span class="ident" id="3321997"><a href="/html/template/js.go.html#3321503">n</a></span><span class="op" id="3321998">-</span><span class="num" id="3321999">2</span><span class="op" id="3322000">]</span>&nbsp;<span class="op" id="3322002">&lt;=</span>&nbsp;<span class="string" id="3322005">&#39;9&#39;</span>&nbsp;<span class="op" id="3322009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322014">return</span>&nbsp;<span class="ident" id="3322021"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3322034">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322038">return</span>&nbsp;<span class="ident" id="3322045"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322058">//&nbsp;Suffixes&nbsp;for&nbsp;all&nbsp;punctuators&nbsp;from&nbsp;section&nbsp;7.7&nbsp;of&nbsp;the&nbsp;language&nbsp;spec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322129">//&nbsp;that&nbsp;only&nbsp;end&nbsp;binary&nbsp;operators&nbsp;not&nbsp;handled&nbsp;above.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322183">case</span>&nbsp;<span class="string" id="3322188">&#39;,&#39;</span><span class="op" id="3322191">,</span>&nbsp;<span class="string" id="3322193">&#39;&lt;&#39;</span><span class="op" id="3322196">,</span>&nbsp;<span class="string" id="3322198">&#39;&gt;&#39;</span><span class="op" id="3322201">,</span>&nbsp;<span class="string" id="3322203">&#39;=&#39;</span><span class="op" id="3322206">,</span>&nbsp;<span class="string" id="3322208">&#39;*&#39;</span><span class="op" id="3322211">,</span>&nbsp;<span class="string" id="3322213">&#39;%&#39;</span><span class="op" id="3322216">,</span>&nbsp;<span class="string" id="3322218">&#39;&amp;&#39;</span><span class="op" id="3322221">,</span>&nbsp;<span class="string" id="3322223">&#39;|&#39;</span><span class="op" id="3322226">,</span>&nbsp;<span class="string" id="3322228">&#39;^&#39;</span><span class="op" id="3322231">,</span>&nbsp;<span class="string" id="3322233">&#39;?&#39;</span><span class="op" id="3322236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322240">return</span>&nbsp;<span class="ident" id="3322247"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322260">//&nbsp;Suffixes&nbsp;for&nbsp;all&nbsp;punctuators&nbsp;from&nbsp;section&nbsp;7.7&nbsp;of&nbsp;the&nbsp;language&nbsp;spec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322331">//&nbsp;that&nbsp;are&nbsp;prefix&nbsp;operators&nbsp;not&nbsp;handled&nbsp;above.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322380">case</span>&nbsp;<span class="string" id="3322385">&#39;!&#39;</span><span class="op" id="3322388">,</span>&nbsp;<span class="string" id="3322390">&#39;~&#39;</span><span class="op" id="3322393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322397">return</span>&nbsp;<span class="ident" id="3322404"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322417">//&nbsp;Matches&nbsp;all&nbsp;the&nbsp;punctuators&nbsp;from&nbsp;section&nbsp;7.7&nbsp;of&nbsp;the&nbsp;language&nbsp;spec</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322487">//&nbsp;that&nbsp;are&nbsp;open&nbsp;brackets&nbsp;not&nbsp;handled&nbsp;above.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322533">case</span>&nbsp;<span class="string" id="3322538">&#39;(&#39;</span><span class="op" id="3322541">,</span>&nbsp;<span class="string" id="3322543">&#39;[&#39;</span><span class="op" id="3322546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322550">return</span>&nbsp;<span class="ident" id="3322557"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322570">//&nbsp;Matches&nbsp;all&nbsp;the&nbsp;punctuators&nbsp;from&nbsp;section&nbsp;7.7&nbsp;of&nbsp;the&nbsp;language&nbsp;spec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322640">//&nbsp;that&nbsp;precede&nbsp;expression&nbsp;starts.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322676">case</span>&nbsp;<span class="string" id="3322681">&#39;:&#39;</span><span class="op" id="3322684">,</span>&nbsp;<span class="string" id="3322686">&#39;;&#39;</span><span class="op" id="3322689">,</span>&nbsp;<span class="string" id="3322691">&#39;{&#39;</span><span class="op" id="3322694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3322698">return</span>&nbsp;<span class="ident" id="3322705"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322718">//&nbsp;CAVEAT:&nbsp;the&nbsp;close&nbsp;punctuators&nbsp;(&#39;}&#39;,&nbsp;&#39;]&#39;,&nbsp;&#39;)&#39;)&nbsp;precede&nbsp;div&nbsp;ops&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322788">//&nbsp;are&nbsp;handled&nbsp;in&nbsp;the&nbsp;default&nbsp;except&nbsp;for&nbsp;&#39;}&#39;&nbsp;which&nbsp;can&nbsp;precede&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322854">//&nbsp;division&nbsp;op&nbsp;as&nbsp;in</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322876">//&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;42&nbsp;}&nbsp;}&nbsp;/&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322927">//&nbsp;which&nbsp;is&nbsp;valid,&nbsp;but,&nbsp;in&nbsp;practice,&nbsp;developers&nbsp;don&#39;t&nbsp;divide&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3322996">//&nbsp;literals,&nbsp;so&nbsp;our&nbsp;heuristic&nbsp;works&nbsp;well&nbsp;for&nbsp;code&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323052">//&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;()&nbsp;{&nbsp;...&nbsp;}&nbsp;&nbsp;/foo/.test(x)&nbsp;&amp;&amp;&nbsp;sideEffect();</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323111">//&nbsp;The&nbsp;&#39;)&#39;&nbsp;punctuator&nbsp;can&nbsp;precede&nbsp;a&nbsp;regular&nbsp;expression&nbsp;as&nbsp;in</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323173">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(b)&nbsp;/foo/.test(x)&nbsp;&amp;&amp;&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323209">//&nbsp;but&nbsp;this&nbsp;is&nbsp;much&nbsp;less&nbsp;likely&nbsp;than</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323247">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(a&nbsp;+&nbsp;b)&nbsp;/&nbsp;c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3323267">case</span>&nbsp;<span class="string" id="3323272">&#39;}&#39;</span><span class="op" id="3323275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3323279">return</span>&nbsp;<span class="ident" id="3323286"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3323299">default</span><span class="op" id="3323306">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323310">//&nbsp;Look&nbsp;for&nbsp;an&nbsp;IdentifierName&nbsp;and&nbsp;see&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;keyword&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323374">//&nbsp;can&nbsp;precede&nbsp;a&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3323413">j</span>&nbsp;<span class="op" id="3323415">:=</span>&nbsp;<span class="ident" id="3323418"><a href="/html/template/js.go.html#3321503">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3323422">for</span>&nbsp;<span class="ident" id="3323426"><a href="/html/template/js.go.html#3323413">j</a></span>&nbsp;<span class="op" id="3323428">&gt;</span>&nbsp;<span class="num" id="3323430">0</span>&nbsp;<span class="op" id="3323432">&amp;&amp;</span>&nbsp;<span class="ident" id="3323435"><a href="/html/template/js.go.html#3330347">isJSIdentPart</a></span><span class="op" id="3323448">(</span><span class="builtintype" id="3323449">rune</span><span class="op" id="3323453">(</span><span class="ident" id="3323454"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3323455">[</span><span class="ident" id="3323456"><a href="/html/template/js.go.html#3323413">j</a></span><span class="op" id="3323457">-</span><span class="num" id="3323458">1</span><span class="op" id="3323459">]</span><span class="op" id="3323460">)</span><span class="op" id="3323461">)</span>&nbsp;<span class="op" id="3323463">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3323468"><a href="/html/template/js.go.html#3323413">j</a></span><span class="op" id="3323469">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3323474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3323478">if</span>&nbsp;<span class="ident" id="3323481"><a href="/html/template/js.go.html#3323825">regexpPrecederKeywords</a></span><span class="op" id="3323503">[</span><span class="builtintype" id="3323504">string</span><span class="op" id="3323510">(</span><span class="ident" id="3323511"><a href="/html/template/js.go.html#3321311">s</a></span><span class="op" id="3323512">[</span><span class="ident" id="3323513"><a href="/html/template/js.go.html#3323413">j</a></span><span class="op" id="3323514">:</span><span class="op" id="3323515">]</span><span class="op" id="3323516">)</span><span class="op" id="3323517">]</span>&nbsp;<span class="op" id="3323519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3323524">return</span>&nbsp;<span class="ident" id="3323531"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3323545">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3323548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323551">//&nbsp;Otherwise&nbsp;is&nbsp;a&nbsp;punctuator&nbsp;not&nbsp;listed&nbsp;above,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323602">//&nbsp;a&nbsp;string&nbsp;which&nbsp;precedes&nbsp;a&nbsp;div&nbsp;op,&nbsp;or&nbsp;an&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3323657">//&nbsp;which&nbsp;precedes&nbsp;a&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3323686">return</span>&nbsp;<span class="ident" id="3323693"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><br>
<span class="lineno">100</span><span class="op" id="3323704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3323707">//&nbsp;regexpPrecederKeywords&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;reserved&nbsp;JS&nbsp;keywords&nbsp;that&nbsp;can&nbsp;precede&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3323785">//&nbsp;regular&nbsp;expression&nbsp;in&nbsp;JS&nbsp;source.</span><br>
<span class="lineno"></span><span class="keyword" id="3323821">var</span>&nbsp;<span class="ident" id="3323825">regexpPrecederKeywords</span>&nbsp;<span class="op" id="3323848">=</span>&nbsp;<span class="keyword" id="3323850">map</span><span class="op" id="3323853">[</span><span class="builtintype" id="3323854">string</span><span class="op" id="3323860">]</span><span class="builtintype" id="3323861">bool</span><span class="op" id="3323865">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3323868">&#34;break&#34;</span><span class="op" id="3323875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323882">true</span><span class="op" id="3323886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3323889">&#34;case&#34;</span><span class="op" id="3323895">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323903">true</span><span class="op" id="3323907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3323910">&#34;continue&#34;</span><span class="op" id="3323920">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3323924">true</span><span class="op" id="3323928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3323931">&#34;delete&#34;</span><span class="op" id="3323939">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323945">true</span><span class="op" id="3323949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3323952">&#34;do&#34;</span><span class="op" id="3323956">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323966">true</span><span class="op" id="3323970">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3323973">&#34;else&#34;</span><span class="op" id="3323979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323987">true</span><span class="op" id="3323991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3323994">&#34;finally&#34;</span><span class="op" id="3324003">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324008">true</span><span class="op" id="3324012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3324015">&#34;in&#34;</span><span class="op" id="3324019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324029">true</span><span class="op" id="3324033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3324036">&#34;instanceof&#34;</span><span class="op" id="3324048">:</span>&nbsp;<span class="ident" id="3324050">true</span><span class="op" id="3324054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3324057">&#34;return&#34;</span><span class="op" id="3324065">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324071">true</span><span class="op" id="3324075">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3324078">&#34;throw&#34;</span><span class="op" id="3324085">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324092">true</span><span class="op" id="3324096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3324099">&#34;try&#34;</span><span class="op" id="3324104">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324113">true</span><span class="op" id="3324117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3324120">&#34;typeof&#34;</span><span class="op" id="3324128">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324134">true</span><span class="op" id="3324138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3324141">&#34;void&#34;</span><span class="op" id="3324147">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324155">true</span><span class="op" id="3324159">,</span><br>
<span class="lineno"></span><span class="op" id="3324161">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="3324164">var</span>&nbsp;<span class="ident" id="3324168">jsonMarshalType</span>&nbsp;<span class="op" id="3324184">=</span>&nbsp;<span class="ident" id="3324186"><a href="/html/template/js.go.html#3320574">reflect</a></span><span class="op" id="3324193">.</span><span class="ident" id="3324194">TypeOf</span><span class="op" id="3324200">(</span><span class="op" id="3324201">(</span><span class="op" id="3324202">*</span><span class="ident" id="3324203"><a href="/html/template/js.go.html#3320550">json</a></span><span class="op" id="3324207">.</span><span class="ident" id="3324208">Marshaler</span><span class="op" id="3324217">)</span><span class="op" id="3324218">(</span><span class="ident" id="3324219">nil</span><span class="op" id="3324222">)</span><span class="op" id="3324223">)</span><span class="op" id="3324224">.</span><span class="ident" id="3324225">Elem</span><span class="op" id="3324229">(</span><span class="op" id="3324230">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3324233">//&nbsp;indirectToJSONMarshaler&nbsp;returns&nbsp;the&nbsp;value,&nbsp;after&nbsp;dereferencing&nbsp;as&nbsp;many&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="3324313">//&nbsp;as&nbsp;necessary&nbsp;to&nbsp;reach&nbsp;the&nbsp;base&nbsp;type&nbsp;(or&nbsp;nil)&nbsp;or&nbsp;an&nbsp;implementation&nbsp;of&nbsp;json.Marshal.</span><br>
<span class="lineno">125</span><span class="keyword" id="3324399">func</span>&nbsp;<span class="ident" id="3324404">indirectToJSONMarshaler</span><span class="op" id="3324427">(</span><span class="ident" id="3324428">a</span>&nbsp;<span class="keyword" id="3324430">interface</span><span class="op" id="3324439">{</span><span class="op" id="3324440">}</span><span class="op" id="3324441">)</span>&nbsp;<span class="keyword" id="3324443">interface</span><span class="op" id="3324452">{</span><span class="op" id="3324453">}</span>&nbsp;<span class="op" id="3324455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3324458">v</span>&nbsp;<span class="op" id="3324460">:=</span>&nbsp;<span class="ident" id="3324463"><a href="/html/template/js.go.html#3320574">reflect</a></span><span class="op" id="3324470">.</span><span class="ident" id="3324471">ValueOf</span><span class="op" id="3324478">(</span><span class="ident" id="3324479"><a href="/html/template/js.go.html#3324428">a</a></span><span class="op" id="3324480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324483">for</span>&nbsp;<span class="op" id="3324487">!</span><span class="ident" id="3324488"><a href="/html/template/js.go.html#3324458">v</a></span><span class="op" id="3324489">.</span><span class="ident" id="3324490">Type</span><span class="op" id="3324494">(</span><span class="op" id="3324495">)</span><span class="op" id="3324496">.</span><span class="ident" id="3324497">Implements</span><span class="op" id="3324507">(</span><span class="ident" id="3324508"><a href="/html/template/js.go.html#3324168">jsonMarshalType</a></span><span class="op" id="3324523">)</span>&nbsp;<span class="op" id="3324525">&amp;&amp;</span>&nbsp;<span class="ident" id="3324528"><a href="/html/template/js.go.html#3324458">v</a></span><span class="op" id="3324529">.</span><span class="ident" id="3324530">Kind</span><span class="op" id="3324534">(</span><span class="op" id="3324535">)</span>&nbsp;<span class="op" id="3324537">==</span>&nbsp;<span class="ident" id="3324540"><a href="/html/template/js.go.html#3320574">reflect</a></span><span class="op" id="3324547">.</span><span class="ident" id="3324548">Ptr</span>&nbsp;<span class="op" id="3324552">&amp;&amp;</span>&nbsp;<span class="op" id="3324555">!</span><span class="ident" id="3324556"><a href="/html/template/js.go.html#3324458">v</a></span><span class="op" id="3324557">.</span><span class="ident" id="3324558">IsNil</span><span class="op" id="3324563">(</span><span class="op" id="3324564">)</span>&nbsp;<span class="op" id="3324566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3324570"><a href="/html/template/js.go.html#3324458">v</a></span>&nbsp;<span class="op" id="3324572">=</span>&nbsp;<span class="ident" id="3324574"><a href="/html/template/js.go.html#3324458">v</a></span><span class="op" id="3324575">.</span><span class="ident" id="3324576">Elem</span><span class="op" id="3324580">(</span><span class="op" id="3324581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3324584">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324587">return</span>&nbsp;<span class="ident" id="3324594"><a href="/html/template/js.go.html#3324458">v</a></span><span class="op" id="3324595">.</span><span class="ident" id="3324596">Interface</span><span class="op" id="3324605">(</span><span class="op" id="3324606">)</span><br>
<span class="lineno"></span><span class="op" id="3324608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3324611">//&nbsp;jsValEscaper&nbsp;escapes&nbsp;its&nbsp;inputs&nbsp;to&nbsp;a&nbsp;JS&nbsp;Expression&nbsp;(section&nbsp;11.14)&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="3324690">//&nbsp;neither&nbsp;side-effects&nbsp;nor&nbsp;free&nbsp;variables&nbsp;outside&nbsp;(NaN,&nbsp;Infinity).</span><br>
<span class="lineno">135</span><span class="keyword" id="3324758">func</span>&nbsp;<span class="ident" id="3324763">jsValEscaper</span><span class="op" id="3324775">(</span><span class="ident" id="3324776">args</span>&nbsp;<span class="op" id="3324781">...</span><span class="keyword" id="3324784">interface</span><span class="op" id="3324793">{</span><span class="op" id="3324794">}</span><span class="op" id="3324795">)</span>&nbsp;<span class="builtintype" id="3324797">string</span>&nbsp;<span class="op" id="3324804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324807">var</span>&nbsp;<span class="ident" id="3324811">a</span>&nbsp;<span class="keyword" id="3324813">interface</span><span class="op" id="3324822">{</span><span class="op" id="3324823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324826">if</span>&nbsp;<span class="builtinfunc" id="3324829">len</span><span class="op" id="3324832">(</span><span class="ident" id="3324833"><a href="/html/template/js.go.html#3324776">args</a></span><span class="op" id="3324837">)</span>&nbsp;<span class="op" id="3324839">==</span>&nbsp;<span class="num" id="3324842">1</span>&nbsp;<span class="op" id="3324844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3324848"><a href="/html/template/js.go.html#3324811">a</a></span>&nbsp;<span class="op" id="3324850">=</span>&nbsp;<span class="ident" id="3324852"><a href="/html/template/js.go.html#3324404">indirectToJSONMarshaler</a></span><span class="op" id="3324875">(</span><span class="ident" id="3324876"><a href="/html/template/js.go.html#3324776">args</a></span><span class="op" id="3324880">[</span><span class="num" id="3324881">0</span><span class="op" id="3324882">]</span><span class="op" id="3324883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324887">switch</span>&nbsp;<span class="ident" id="3324894">t</span>&nbsp;<span class="op" id="3324896">:=</span>&nbsp;<span class="ident" id="3324899"><a href="/html/template/js.go.html#3324811">a</a></span><span class="op" id="3324900">.</span><span class="op" id="3324901">(</span><span class="keyword" id="3324902">type</span><span class="op" id="3324906">)</span>&nbsp;<span class="op" id="3324908">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324912">case</span>&nbsp;<span class="ident" id="3324917"><a href="/html/template/content.go.html#3253861">JS</a></span><span class="op" id="3324919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324924">return</span>&nbsp;<span class="builtintype" id="3324931">string</span><span class="op" id="3324937">(</span><span class="ident" id="3324938"><a href="/html/template/js.go.html#3324894">t</a></span><span class="op" id="3324939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324943">case</span>&nbsp;<span class="ident" id="3324948"><a href="/html/template/content.go.html#3254269">JSStr</a></span><span class="op" id="3324953">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3324958">//&nbsp;TODO:&nbsp;normalize&nbsp;quotes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3324988">return</span>&nbsp;<span class="string" id="3324995">`&#34;`</span>&nbsp;<span class="op" id="3324999">+</span>&nbsp;<span class="builtintype" id="3325001">string</span><span class="op" id="3325007">(</span><span class="ident" id="3325008"><a href="/html/template/js.go.html#3324894">t</a></span><span class="op" id="3325009">)</span>&nbsp;<span class="op" id="3325011">+</span>&nbsp;<span class="string" id="3325013">`&#34;`</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3325019">case</span>&nbsp;<span class="ident" id="3325024"><a href="/html/template/js.go.html#3320550">json</a></span><span class="op" id="3325028">.</span><span class="ident" id="3325029">Marshaler</span><span class="op" id="3325038">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325043">//&nbsp;Do&nbsp;not&nbsp;treat&nbsp;as&nbsp;a&nbsp;Stringer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3325076">case</span>&nbsp;<span class="ident" id="3325081"><a href="/html/template/js.go.html#3320567">fmt</a></span><span class="op" id="3325084">.</span><span class="ident" id="3325085">Stringer</span><span class="op" id="3325093">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3325098"><a href="/html/template/js.go.html#3324811">a</a></span>&nbsp;<span class="op" id="3325100">=</span>&nbsp;<span class="ident" id="3325102"><a href="/html/template/js.go.html#3324894">t</a></span><span class="op" id="3325103">.</span><span class="ident" id="3325104">String</span><span class="op" id="3325110">(</span><span class="op" id="3325111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3325115">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3325118">}</span>&nbsp;<span class="keyword" id="3325120">else</span>&nbsp;<span class="op" id="3325125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3325129">for</span>&nbsp;<span class="ident" id="3325133">i</span><span class="op" id="3325134">,</span>&nbsp;<span class="ident" id="3325136">arg</span>&nbsp;<span class="op" id="3325140">:=</span>&nbsp;<span class="keyword" id="3325143">range</span>&nbsp;<span class="ident" id="3325149"><a href="/html/template/js.go.html#3324776">args</a></span>&nbsp;<span class="op" id="3325154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3325159"><a href="/html/template/js.go.html#3324776">args</a></span><span class="op" id="3325163">[</span><span class="ident" id="3325164"><a href="/html/template/js.go.html#3325133">i</a></span><span class="op" id="3325165">]</span>&nbsp;<span class="op" id="3325167">=</span>&nbsp;<span class="ident" id="3325169"><a href="/html/template/js.go.html#3324404">indirectToJSONMarshaler</a></span><span class="op" id="3325192">(</span><span class="ident" id="3325193"><a href="/html/template/js.go.html#3325136">arg</a></span><span class="op" id="3325196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3325200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3325204"><a href="/html/template/js.go.html#3324811">a</a></span>&nbsp;<span class="op" id="3325206">=</span>&nbsp;<span class="ident" id="3325208"><a href="/html/template/js.go.html#3320567">fmt</a></span><span class="op" id="3325211">.</span><span class="ident" id="3325212">Sprint</span><span class="op" id="3325218">(</span><span class="ident" id="3325219"><a href="/html/template/js.go.html#3324776">args</a></span><span class="op" id="3325223">...</span><span class="op" id="3325226">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3325229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325232">//&nbsp;TODO:&nbsp;detect&nbsp;cycles&nbsp;before&nbsp;calling&nbsp;Marshal&nbsp;which&nbsp;loops&nbsp;infinitely&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325305">//&nbsp;cyclic&nbsp;data.&nbsp;This&nbsp;may&nbsp;be&nbsp;an&nbsp;unacceptable&nbsp;DoS&nbsp;risk.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3325361">b</span><span class="op" id="3325362">,</span>&nbsp;<span class="ident" id="3325364">err</span>&nbsp;<span class="op" id="3325368">:=</span>&nbsp;<span class="ident" id="3325371"><a href="/html/template/js.go.html#3320550">json</a></span><span class="op" id="3325375">.</span><span class="ident" id="3325376">Marshal</span><span class="op" id="3325383">(</span><span class="ident" id="3325384"><a href="/html/template/js.go.html#3324811">a</a></span><span class="op" id="3325385">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3325388">if</span>&nbsp;<span class="ident" id="3325391"><a href="/html/template/js.go.html#3325364">err</a></span>&nbsp;<span class="op" id="3325395">!=</span>&nbsp;<span class="ident" id="3325398">nil</span>&nbsp;<span class="op" id="3325402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325406">//&nbsp;Put&nbsp;a&nbsp;space&nbsp;before&nbsp;comment&nbsp;so&nbsp;that&nbsp;if&nbsp;it&nbsp;is&nbsp;flush&nbsp;against</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325469">//&nbsp;a&nbsp;division&nbsp;operator&nbsp;it&nbsp;is&nbsp;not&nbsp;turned&nbsp;into&nbsp;a&nbsp;line&nbsp;comment:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325532">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x/{{y}}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325549">//&nbsp;turning&nbsp;into</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325567">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x//*&nbsp;error&nbsp;marshalling&nbsp;y:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325602">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;second&nbsp;line&nbsp;of&nbsp;error&nbsp;message&nbsp;*/null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3325652">return</span>&nbsp;<span class="ident" id="3325659"><a href="/html/template/js.go.html#3320567">fmt</a></span><span class="op" id="3325662">.</span><span class="ident" id="3325663">Sprintf</span><span class="op" id="3325670">(</span><span class="string" id="3325671">&#34;&nbsp;/*&nbsp;%s&nbsp;*/null&nbsp;&#34;</span><span class="op" id="3325687">,</span>&nbsp;<span class="ident" id="3325689"><a href="/html/template/js.go.html#3320585">strings</a></span><span class="op" id="3325696">.</span><span class="ident" id="3325697">Replace</span><span class="op" id="3325704">(</span><span class="ident" id="3325705"><a href="/html/template/js.go.html#3325364">err</a></span><span class="op" id="3325708">.</span><span class="ident" id="3325709">Error</span><span class="op" id="3325714">(</span><span class="op" id="3325715">)</span><span class="op" id="3325716">,</span>&nbsp;<span class="string" id="3325718">&#34;*/&#34;</span><span class="op" id="3325722">,</span>&nbsp;<span class="string" id="3325724">&#34;*&nbsp;/&#34;</span><span class="op" id="3325729">,</span>&nbsp;<span class="op" id="3325731">-</span><span class="num" id="3325732">1</span><span class="op" id="3325733">)</span><span class="op" id="3325734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3325737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325741">//&nbsp;TODO:&nbsp;maybe&nbsp;post-process&nbsp;output&nbsp;to&nbsp;prevent&nbsp;it&nbsp;from&nbsp;containing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325807">//&nbsp;&#34;&lt;!--&#34;,&nbsp;&#34;--&gt;&#34;,&nbsp;&#34;&lt;![CDATA[&#34;,&nbsp;&#34;]]&gt;&#34;,&nbsp;or&nbsp;&#34;&lt;/script&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325860">//&nbsp;in&nbsp;case&nbsp;custom&nbsp;marshallers&nbsp;produce&nbsp;output&nbsp;containing&nbsp;those.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3325925">//&nbsp;TODO:&nbsp;Maybe&nbsp;abbreviate&nbsp;\u00ab&nbsp;to&nbsp;\xab&nbsp;to&nbsp;produce&nbsp;more&nbsp;compact&nbsp;output.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3325999">if</span>&nbsp;<span class="builtinfunc" id="3326002">len</span><span class="op" id="3326005">(</span><span class="ident" id="3326006"><a href="/html/template/js.go.html#3325361">b</a></span><span class="op" id="3326007">)</span>&nbsp;<span class="op" id="3326009">==</span>&nbsp;<span class="num" id="3326012">0</span>&nbsp;<span class="op" id="3326014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3326018">//&nbsp;In,&nbsp;`x=y/{{.}}*z`&nbsp;a&nbsp;json.Marshaler&nbsp;that&nbsp;produces&nbsp;&#34;&#34;&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3326082">//&nbsp;not&nbsp;cause&nbsp;the&nbsp;output&nbsp;`x=y/*z`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326118">return</span>&nbsp;<span class="string" id="3326125">&#34;&nbsp;null&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3326135">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326138">first</span><span class="op" id="3326143">,</span>&nbsp;<span class="ident" id="3326145">_</span>&nbsp;<span class="op" id="3326147">:=</span>&nbsp;<span class="ident" id="3326150"><a href="/html/template/js.go.html#3320596">utf8</a></span><span class="op" id="3326154">.</span><span class="ident" id="3326155">DecodeRune</span><span class="op" id="3326165">(</span><span class="ident" id="3326166"><a href="/html/template/js.go.html#3325361">b</a></span><span class="op" id="3326167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326170">last</span><span class="op" id="3326174">,</span>&nbsp;<span class="ident" id="3326176">_</span>&nbsp;<span class="op" id="3326178">:=</span>&nbsp;<span class="ident" id="3326181"><a href="/html/template/js.go.html#3320596">utf8</a></span><span class="op" id="3326185">.</span><span class="ident" id="3326186">DecodeLastRune</span><span class="op" id="3326200">(</span><span class="ident" id="3326201"><a href="/html/template/js.go.html#3325361">b</a></span><span class="op" id="3326202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326205">var</span>&nbsp;<span class="ident" id="3326209">buf</span>&nbsp;<span class="ident" id="3326213"><a href="/html/template/js.go.html#3320541">bytes</a></span><span class="op" id="3326218">.</span><span class="ident" id="3326219">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3326227">//&nbsp;Prevent&nbsp;IdentifierNames&nbsp;and&nbsp;NumericLiterals&nbsp;from&nbsp;running&nbsp;into</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3326293">//&nbsp;keywords:&nbsp;in,&nbsp;instanceof,&nbsp;typeof,&nbsp;void</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326336">pad</span>&nbsp;<span class="op" id="3326340">:=</span>&nbsp;<span class="ident" id="3326343"><a href="/html/template/js.go.html#3330347">isJSIdentPart</a></span><span class="op" id="3326356">(</span><span class="ident" id="3326357"><a href="/html/template/js.go.html#3326138">first</a></span><span class="op" id="3326362">)</span>&nbsp;<span class="op" id="3326364">||</span>&nbsp;<span class="ident" id="3326367"><a href="/html/template/js.go.html#3330347">isJSIdentPart</a></span><span class="op" id="3326380">(</span><span class="ident" id="3326381"><a href="/html/template/js.go.html#3326170">last</a></span><span class="op" id="3326385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326388">if</span>&nbsp;<span class="ident" id="3326391"><a href="/html/template/js.go.html#3326336">pad</a></span>&nbsp;<span class="op" id="3326395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326399"><a href="/html/template/js.go.html#3326209">buf</a></span><span class="op" id="3326402">.</span><span class="ident" id="3326403">WriteByte</span><span class="op" id="3326412">(</span><span class="string" id="3326413">&#39;&nbsp;&#39;</span><span class="op" id="3326416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3326419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326422">written</span>&nbsp;<span class="op" id="3326430">:=</span>&nbsp;<span class="num" id="3326433">0</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3326436">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;json.Marshal&nbsp;escapes&nbsp;codepoints&nbsp;U+2028&nbsp;&amp;&nbsp;U+2029</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3326503">//&nbsp;so&nbsp;it&nbsp;falls&nbsp;within&nbsp;the&nbsp;subset&nbsp;of&nbsp;JSON&nbsp;which&nbsp;is&nbsp;valid&nbsp;JS.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326564">for</span>&nbsp;<span class="ident" id="3326568">i</span>&nbsp;<span class="op" id="3326570">:=</span>&nbsp;<span class="num" id="3326573">0</span><span class="op" id="3326574">;</span>&nbsp;<span class="ident" id="3326576"><a href="/html/template/js.go.html#3326568">i</a></span>&nbsp;<span class="op" id="3326578">&lt;</span>&nbsp;<span class="builtinfunc" id="3326580">len</span><span class="op" id="3326583">(</span><span class="ident" id="3326584"><a href="/html/template/js.go.html#3325361">b</a></span><span class="op" id="3326585">)</span><span class="op" id="3326586">;</span>&nbsp;<span class="op" id="3326588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3326592">rune</span><span class="op" id="3326596">,</span>&nbsp;<span class="ident" id="3326598">n</span>&nbsp;<span class="op" id="3326600">:=</span>&nbsp;<span class="ident" id="3326603"><a href="/html/template/js.go.html#3320596">utf8</a></span><span class="op" id="3326607">.</span><span class="ident" id="3326608">DecodeRune</span><span class="op" id="3326618">(</span><span class="ident" id="3326619"><a href="/html/template/js.go.html#3325361">b</a></span><span class="op" id="3326620">[</span><span class="ident" id="3326621"><a href="/html/template/js.go.html#3326568">i</a></span><span class="op" id="3326622">:</span><span class="op" id="3326623">]</span><span class="op" id="3326624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326628">repl</span>&nbsp;<span class="op" id="3326633">:=</span>&nbsp;<span class="string" id="3326636">&#34;&#34;</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326641">if</span>&nbsp;<span class="builtintype" id="3326644"><a href="/html/template/js.go.html#3326592">rune</a></span>&nbsp;<span class="op" id="3326649">==</span>&nbsp;<span class="num" id="3326652">0x2028</span>&nbsp;<span class="op" id="3326659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326664"><a href="/html/template/js.go.html#3326628">repl</a></span>&nbsp;<span class="op" id="3326669">=</span>&nbsp;<span class="string" id="3326671">`\u2028`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3326682">}</span>&nbsp;<span class="keyword" id="3326684">else</span>&nbsp;<span class="keyword" id="3326689">if</span>&nbsp;<span class="builtintype" id="3326692"><a href="/html/template/js.go.html#3326592">rune</a></span>&nbsp;<span class="op" id="3326697">==</span>&nbsp;<span class="num" id="3326700">0x2029</span>&nbsp;<span class="op" id="3326707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326712"><a href="/html/template/js.go.html#3326628">repl</a></span>&nbsp;<span class="op" id="3326717">=</span>&nbsp;<span class="string" id="3326719">`\u2029`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3326730">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326734">if</span>&nbsp;<span class="ident" id="3326737"><a href="/html/template/js.go.html#3326628">repl</a></span>&nbsp;<span class="op" id="3326742">!=</span>&nbsp;<span class="string" id="3326745">&#34;&#34;</span>&nbsp;<span class="op" id="3326748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326753"><a href="/html/template/js.go.html#3326209">buf</a></span><span class="op" id="3326756">.</span><span class="ident" id="3326757">Write</span><span class="op" id="3326762">(</span><span class="ident" id="3326763"><a href="/html/template/js.go.html#3325361">b</a></span><span class="op" id="3326764">[</span><span class="ident" id="3326765"><a href="/html/template/js.go.html#3326422">written</a></span><span class="op" id="3326772">:</span><span class="ident" id="3326773"><a href="/html/template/js.go.html#3326568">i</a></span><span class="op" id="3326774">]</span><span class="op" id="3326775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326780"><a href="/html/template/js.go.html#3326209">buf</a></span><span class="op" id="3326783">.</span><span class="ident" id="3326784">WriteString</span><span class="op" id="3326795">(</span><span class="ident" id="3326796"><a href="/html/template/js.go.html#3326628">repl</a></span><span class="op" id="3326800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326805"><a href="/html/template/js.go.html#3326422">written</a></span>&nbsp;<span class="op" id="3326813">=</span>&nbsp;<span class="ident" id="3326815"><a href="/html/template/js.go.html#3326568">i</a></span>&nbsp;<span class="op" id="3326817">+</span>&nbsp;<span class="ident" id="3326819"><a href="/html/template/js.go.html#3326598">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3326823">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326827"><a href="/html/template/js.go.html#3326568">i</a></span>&nbsp;<span class="op" id="3326829">+=</span>&nbsp;<span class="ident" id="3326832"><a href="/html/template/js.go.html#3326598">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3326835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326838">if</span>&nbsp;<span class="ident" id="3326841"><a href="/html/template/js.go.html#3326209">buf</a></span><span class="op" id="3326844">.</span><span class="ident" id="3326845">Len</span><span class="op" id="3326848">(</span><span class="op" id="3326849">)</span>&nbsp;<span class="op" id="3326851">!=</span>&nbsp;<span class="num" id="3326854">0</span>&nbsp;<span class="op" id="3326856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326860"><a href="/html/template/js.go.html#3326209">buf</a></span><span class="op" id="3326863">.</span><span class="ident" id="3326864">Write</span><span class="op" id="3326869">(</span><span class="ident" id="3326870"><a href="/html/template/js.go.html#3325361">b</a></span><span class="op" id="3326871">[</span><span class="ident" id="3326872"><a href="/html/template/js.go.html#3326422">written</a></span><span class="op" id="3326879">:</span><span class="op" id="3326880">]</span><span class="op" id="3326881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326885">if</span>&nbsp;<span class="ident" id="3326888"><a href="/html/template/js.go.html#3326336">pad</a></span>&nbsp;<span class="op" id="3326892">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326897"><a href="/html/template/js.go.html#3326209">buf</a></span><span class="op" id="3326900">.</span><span class="ident" id="3326901">WriteByte</span><span class="op" id="3326910">(</span><span class="string" id="3326911">&#39;&nbsp;&#39;</span><span class="op" id="3326914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3326918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3326922"><a href="/html/template/js.go.html#3325361">b</a></span>&nbsp;<span class="op" id="3326924">=</span>&nbsp;<span class="ident" id="3326926"><a href="/html/template/js.go.html#3326209">buf</a></span><span class="op" id="3326929">.</span><span class="ident" id="3326930">Bytes</span><span class="op" id="3326935">(</span><span class="op" id="3326936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3326939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3326942">return</span>&nbsp;<span class="builtintype" id="3326949">string</span><span class="op" id="3326955">(</span><span class="ident" id="3326956"><a href="/html/template/js.go.html#3325361">b</a></span><span class="op" id="3326957">)</span><br>
<span class="lineno">215</span><span class="op" id="3326959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3326962">//&nbsp;jsStrEscaper&nbsp;produces&nbsp;a&nbsp;string&nbsp;that&nbsp;can&nbsp;be&nbsp;included&nbsp;between&nbsp;quotes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3327035">//&nbsp;JavaScript&nbsp;source,&nbsp;in&nbsp;JavaScript&nbsp;embedded&nbsp;in&nbsp;an&nbsp;HTML5&nbsp;&lt;script&gt;&nbsp;element,</span><br>
<span class="lineno"></span><span class="comment" id="3327110">//&nbsp;or&nbsp;in&nbsp;an&nbsp;HTML5&nbsp;event&nbsp;handler&nbsp;attribute&nbsp;such&nbsp;as&nbsp;onclick.</span><br>
<span class="lineno">220</span><span class="keyword" id="3327169">func</span>&nbsp;<span class="ident" id="3327174">jsStrEscaper</span><span class="op" id="3327186">(</span><span class="ident" id="3327187">args</span>&nbsp;<span class="op" id="3327192">...</span><span class="keyword" id="3327195">interface</span><span class="op" id="3327204">{</span><span class="op" id="3327205">}</span><span class="op" id="3327206">)</span>&nbsp;<span class="builtintype" id="3327208">string</span>&nbsp;<span class="op" id="3327215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3327218">s</span><span class="op" id="3327219">,</span>&nbsp;<span class="ident" id="3327221">t</span>&nbsp;<span class="op" id="3327223">:=</span>&nbsp;<span class="ident" id="3327226"><a href="/html/template/content.go.html#3256165">stringify</a></span><span class="op" id="3327235">(</span><span class="ident" id="3327236"><a href="/html/template/js.go.html#3327187">args</a></span><span class="op" id="3327240">...</span><span class="op" id="3327243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3327246">if</span>&nbsp;<span class="ident" id="3327249"><a href="/html/template/js.go.html#3327221">t</a></span>&nbsp;<span class="op" id="3327251">==</span>&nbsp;<span class="ident" id="3327254"><a href="/html/template/content.go.html#3254750">contentTypeJSStr</a></span>&nbsp;<span class="op" id="3327271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3327275">return</span>&nbsp;<span class="ident" id="3327282"><a href="/html/template/js.go.html#3328161">replace</a></span><span class="op" id="3327289">(</span><span class="ident" id="3327290"><a href="/html/template/js.go.html#3327218">s</a></span><span class="op" id="3327291">,</span>&nbsp;<span class="ident" id="3327293"><a href="/html/template/js.go.html#3329196">jsStrNormReplacementTable</a></span><span class="op" id="3327318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3327321">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3327324">return</span>&nbsp;<span class="ident" id="3327331"><a href="/html/template/js.go.html#3328161">replace</a></span><span class="op" id="3327338">(</span><span class="ident" id="3327339"><a href="/html/template/js.go.html#3327218">s</a></span><span class="op" id="3327340">,</span>&nbsp;<span class="ident" id="3327342"><a href="/html/template/js.go.html#3328682">jsStrReplacementTable</a></span><span class="op" id="3327363">)</span><br>
<span class="lineno"></span><span class="op" id="3327365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3327368">//&nbsp;jsRegexpEscaper&nbsp;behaves&nbsp;like&nbsp;jsStrEscaper&nbsp;but&nbsp;escapes&nbsp;regular&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="3327444">//&nbsp;specials&nbsp;so&nbsp;the&nbsp;result&nbsp;is&nbsp;treated&nbsp;literally&nbsp;when&nbsp;included&nbsp;in&nbsp;a&nbsp;regular</span><br>
<span class="lineno">230</span><span class="comment" id="3327518">//&nbsp;expression&nbsp;literal.&nbsp;/foo{{.X}}bar/&nbsp;matches&nbsp;the&nbsp;string&nbsp;&#34;foo&#34;&nbsp;followed&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3327593">//&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;{{.X}}&nbsp;followed&nbsp;by&nbsp;the&nbsp;string&nbsp;&#34;bar&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3327653">func</span>&nbsp;<span class="ident" id="3327658">jsRegexpEscaper</span><span class="op" id="3327673">(</span><span class="ident" id="3327674">args</span>&nbsp;<span class="op" id="3327679">...</span><span class="keyword" id="3327682">interface</span><span class="op" id="3327691">{</span><span class="op" id="3327692">}</span><span class="op" id="3327693">)</span>&nbsp;<span class="builtintype" id="3327695">string</span>&nbsp;<span class="op" id="3327702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3327705">s</span><span class="op" id="3327706">,</span>&nbsp;<span class="ident" id="3327708">_</span>&nbsp;<span class="op" id="3327710">:=</span>&nbsp;<span class="ident" id="3327713"><a href="/html/template/content.go.html#3256165">stringify</a></span><span class="op" id="3327722">(</span><span class="ident" id="3327723"><a href="/html/template/js.go.html#3327674">args</a></span><span class="op" id="3327727">...</span><span class="op" id="3327730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3327733"><a href="/html/template/js.go.html#3327705">s</a></span>&nbsp;<span class="op" id="3327735">=</span>&nbsp;<span class="ident" id="3327737"><a href="/html/template/js.go.html#3328161">replace</a></span><span class="op" id="3327744">(</span><span class="ident" id="3327745"><a href="/html/template/js.go.html#3327705">s</a></span><span class="op" id="3327746">,</span>&nbsp;<span class="ident" id="3327748"><a href="/html/template/js.go.html#3329559">jsRegexpReplacementTable</a></span><span class="op" id="3327772">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3327775">if</span>&nbsp;<span class="ident" id="3327778"><a href="/html/template/js.go.html#3327705">s</a></span>&nbsp;<span class="op" id="3327780">==</span>&nbsp;<span class="string" id="3327783">&#34;&#34;</span>&nbsp;<span class="op" id="3327786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3327790">//&nbsp;/{{.X}}/&nbsp;should&nbsp;not&nbsp;produce&nbsp;a&nbsp;line&nbsp;comment&nbsp;when&nbsp;.X&nbsp;==&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3327853">return</span>&nbsp;<span class="string" id="3327860">&#34;(?:)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3327868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3327871">return</span>&nbsp;<span class="ident" id="3327878"><a href="/html/template/js.go.html#3327705">s</a></span><br>
<span class="lineno">240</span><span class="op" id="3327880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3327883">//&nbsp;replace&nbsp;replaces&nbsp;each&nbsp;rune&nbsp;r&nbsp;of&nbsp;s&nbsp;with&nbsp;replacementTable[r],&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3327960">//&nbsp;r&nbsp;&lt;&nbsp;len(replacementTable).&nbsp;If&nbsp;replacementTable[r]&nbsp;is&nbsp;the&nbsp;empty&nbsp;string&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="3328038">//&nbsp;no&nbsp;replacement&nbsp;is&nbsp;made.</span><br>
<span class="lineno">245</span><span class="comment" id="3328065">//&nbsp;It&nbsp;also&nbsp;replaces&nbsp;runes&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;with&nbsp;the&nbsp;raw&nbsp;strings&nbsp;`\u2028`&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3328143">//&nbsp;`\u2029`.</span><br>
<span class="lineno"></span><span class="keyword" id="3328156">func</span>&nbsp;<span class="ident" id="3328161">replace</span><span class="op" id="3328168">(</span><span class="ident" id="3328169">s</span>&nbsp;<span class="builtintype" id="3328171">string</span><span class="op" id="3328177">,</span>&nbsp;<span class="ident" id="3328179">replacementTable</span>&nbsp;<span class="op" id="3328196">[</span><span class="op" id="3328197">]</span><span class="builtintype" id="3328198">string</span><span class="op" id="3328204">)</span>&nbsp;<span class="builtintype" id="3328206">string</span>&nbsp;<span class="op" id="3328213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328216">var</span>&nbsp;<span class="ident" id="3328220">b</span>&nbsp;<span class="ident" id="3328222"><a href="/html/template/js.go.html#3320541">bytes</a></span><span class="op" id="3328227">.</span><span class="ident" id="3328228">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3328236">written</span>&nbsp;<span class="op" id="3328244">:=</span>&nbsp;<span class="num" id="3328247">0</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328250">for</span>&nbsp;<span class="ident" id="3328254">i</span><span class="op" id="3328255">,</span>&nbsp;<span class="ident" id="3328257">r</span>&nbsp;<span class="op" id="3328259">:=</span>&nbsp;<span class="keyword" id="3328262">range</span>&nbsp;<span class="ident" id="3328268"><a href="/html/template/js.go.html#3328169">s</a></span>&nbsp;<span class="op" id="3328270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328274">var</span>&nbsp;<span class="ident" id="3328278">repl</span>&nbsp;<span class="builtintype" id="3328283">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328292">switch</span>&nbsp;<span class="op" id="3328299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328303">case</span>&nbsp;<span class="builtintype" id="3328308">int</span><span class="op" id="3328311">(</span><span class="ident" id="3328312"><a href="/html/template/js.go.html#3328257">r</a></span><span class="op" id="3328313">)</span>&nbsp;<span class="op" id="3328315">&lt;</span>&nbsp;<span class="builtinfunc" id="3328317">len</span><span class="op" id="3328320">(</span><span class="ident" id="3328321"><a href="/html/template/js.go.html#3328179">replacementTable</a></span><span class="op" id="3328337">)</span>&nbsp;<span class="op" id="3328339">&amp;&amp;</span>&nbsp;<span class="ident" id="3328342"><a href="/html/template/js.go.html#3328179">replacementTable</a></span><span class="op" id="3328358">[</span><span class="ident" id="3328359"><a href="/html/template/js.go.html#3328257">r</a></span><span class="op" id="3328360">]</span>&nbsp;<span class="op" id="3328362">!=</span>&nbsp;<span class="string" id="3328365">&#34;&#34;</span><span class="op" id="3328367">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3328372"><a href="/html/template/js.go.html#3328278">repl</a></span>&nbsp;<span class="op" id="3328377">=</span>&nbsp;<span class="ident" id="3328379"><a href="/html/template/js.go.html#3328179">replacementTable</a></span><span class="op" id="3328395">[</span><span class="ident" id="3328396"><a href="/html/template/js.go.html#3328257">r</a></span><span class="op" id="3328397">]</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328401">case</span>&nbsp;<span class="ident" id="3328406"><a href="/html/template/js.go.html#3328257">r</a></span>&nbsp;<span class="op" id="3328408">==</span>&nbsp;<span class="string" id="3328411">&#39;\u2028&#39;</span><span class="op" id="3328419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3328424"><a href="/html/template/js.go.html#3328278">repl</a></span>&nbsp;<span class="op" id="3328429">=</span>&nbsp;<span class="string" id="3328431">`\u2028`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328442">case</span>&nbsp;<span class="ident" id="3328447"><a href="/html/template/js.go.html#3328257">r</a></span>&nbsp;<span class="op" id="3328449">==</span>&nbsp;<span class="string" id="3328452">&#39;\u2029&#39;</span><span class="op" id="3328460">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3328465"><a href="/html/template/js.go.html#3328278">repl</a></span>&nbsp;<span class="op" id="3328470">=</span>&nbsp;<span class="string" id="3328472">`\u2029`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328483">default</span><span class="op" id="3328490">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328495">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3328506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3328510"><a href="/html/template/js.go.html#3328220">b</a></span><span class="op" id="3328511">.</span><span class="ident" id="3328512">WriteString</span><span class="op" id="3328523">(</span><span class="ident" id="3328524"><a href="/html/template/js.go.html#3328169">s</a></span><span class="op" id="3328525">[</span><span class="ident" id="3328526"><a href="/html/template/js.go.html#3328236">written</a></span><span class="op" id="3328533">:</span><span class="ident" id="3328534"><a href="/html/template/js.go.html#3328254">i</a></span><span class="op" id="3328535">]</span><span class="op" id="3328536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3328540"><a href="/html/template/js.go.html#3328220">b</a></span><span class="op" id="3328541">.</span><span class="ident" id="3328542">WriteString</span><span class="op" id="3328553">(</span><span class="ident" id="3328554"><a href="/html/template/js.go.html#3328278">repl</a></span><span class="op" id="3328558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3328562"><a href="/html/template/js.go.html#3328236">written</a></span>&nbsp;<span class="op" id="3328570">=</span>&nbsp;<span class="ident" id="3328572"><a href="/html/template/js.go.html#3328254">i</a></span>&nbsp;<span class="op" id="3328574">+</span>&nbsp;<span class="ident" id="3328576"><a href="/html/template/js.go.html#3320596">utf8</a></span><span class="op" id="3328580">.</span><span class="ident" id="3328581">RuneLen</span><span class="op" id="3328588">(</span><span class="ident" id="3328589"><a href="/html/template/js.go.html#3328257">r</a></span><span class="op" id="3328590">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3328593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328596">if</span>&nbsp;<span class="ident" id="3328599"><a href="/html/template/js.go.html#3328236">written</a></span>&nbsp;<span class="op" id="3328607">==</span>&nbsp;<span class="num" id="3328610">0</span>&nbsp;<span class="op" id="3328612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328616">return</span>&nbsp;<span class="ident" id="3328623"><a href="/html/template/js.go.html#3328169">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3328626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3328629"><a href="/html/template/js.go.html#3328220">b</a></span><span class="op" id="3328630">.</span><span class="ident" id="3328631">WriteString</span><span class="op" id="3328642">(</span><span class="ident" id="3328643"><a href="/html/template/js.go.html#3328169">s</a></span><span class="op" id="3328644">[</span><span class="ident" id="3328645"><a href="/html/template/js.go.html#3328236">written</a></span><span class="op" id="3328652">:</span><span class="op" id="3328653">]</span><span class="op" id="3328654">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3328657">return</span>&nbsp;<span class="ident" id="3328664"><a href="/html/template/js.go.html#3328220">b</a></span><span class="op" id="3328665">.</span><span class="ident" id="3328666">String</span><span class="op" id="3328672">(</span><span class="op" id="3328673">)</span><br>
<span class="lineno"></span><span class="op" id="3328675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3328678">var</span>&nbsp;<span class="ident" id="3328682">jsStrReplacementTable</span>&nbsp;<span class="op" id="3328704">=</span>&nbsp;<span class="op" id="3328706">[</span><span class="op" id="3328707">]</span><span class="builtintype" id="3328708">string</span><span class="op" id="3328714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3328717">0</span><span class="op" id="3328718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3328723">`\0`</span><span class="op" id="3328727">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328730">&#39;\t&#39;</span><span class="op" id="3328734">:</span>&nbsp;<span class="string" id="3328736">`\t`</span><span class="op" id="3328740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328743">&#39;\n&#39;</span><span class="op" id="3328747">:</span>&nbsp;<span class="string" id="3328749">`\n`</span><span class="op" id="3328753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328756">&#39;\v&#39;</span><span class="op" id="3328760">:</span>&nbsp;<span class="string" id="3328762">`\x0b`</span><span class="op" id="3328768">,</span>&nbsp;<span class="comment" id="3328770">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328795">&#39;\f&#39;</span><span class="op" id="3328799">:</span>&nbsp;<span class="string" id="3328801">`\f`</span><span class="op" id="3328805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328808">&#39;\r&#39;</span><span class="op" id="3328812">:</span>&nbsp;<span class="string" id="3328814">`\r`</span><span class="op" id="3328818">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3328821">//&nbsp;Encode&nbsp;HTML&nbsp;specials&nbsp;as&nbsp;hex&nbsp;so&nbsp;the&nbsp;output&nbsp;can&nbsp;be&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3328883">//&nbsp;in&nbsp;HTML&nbsp;attributes&nbsp;without&nbsp;further&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328932">&#39;&#34;&#39;</span><span class="op" id="3328935">:</span>&nbsp;&nbsp;<span class="string" id="3328938">`\x22`</span><span class="op" id="3328944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328947">&#39;&amp;&#39;</span><span class="op" id="3328950">:</span>&nbsp;&nbsp;<span class="string" id="3328953">`\x26`</span><span class="op" id="3328959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328962">&#39;\&#39;&#39;</span><span class="op" id="3328966">:</span>&nbsp;<span class="string" id="3328968">`\x27`</span><span class="op" id="3328974">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328977">&#39;+&#39;</span><span class="op" id="3328980">:</span>&nbsp;&nbsp;<span class="string" id="3328983">`\x2b`</span><span class="op" id="3328989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3328992">&#39;/&#39;</span><span class="op" id="3328995">:</span>&nbsp;&nbsp;<span class="string" id="3328998">`\/`</span><span class="op" id="3329002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329005">&#39;&lt;&#39;</span><span class="op" id="3329008">:</span>&nbsp;&nbsp;<span class="string" id="3329011">`\x3c`</span><span class="op" id="3329017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329020">&#39;&gt;&#39;</span><span class="op" id="3329023">:</span>&nbsp;&nbsp;<span class="string" id="3329026">`\x3e`</span><span class="op" id="3329032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329035">&#39;\\&#39;</span><span class="op" id="3329039">:</span>&nbsp;<span class="string" id="3329041">`\\`</span><span class="op" id="3329045">,</span><br>
<span class="lineno">290</span><span class="op" id="3329047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3329050">//&nbsp;jsStrNormReplacementTable&nbsp;is&nbsp;like&nbsp;jsStrReplacementTable&nbsp;but&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3329122">//&nbsp;overencode&nbsp;existing&nbsp;escapes&nbsp;since&nbsp;this&nbsp;table&nbsp;has&nbsp;no&nbsp;entry&nbsp;for&nbsp;`\`.</span><br>
<span class="lineno"></span><span class="keyword" id="3329192">var</span>&nbsp;<span class="ident" id="3329196">jsStrNormReplacementTable</span>&nbsp;<span class="op" id="3329222">=</span>&nbsp;<span class="op" id="3329224">[</span><span class="op" id="3329225">]</span><span class="builtintype" id="3329226">string</span><span class="op" id="3329232">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3329235">0</span><span class="op" id="3329236">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3329241">`\0`</span><span class="op" id="3329245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329248">&#39;\t&#39;</span><span class="op" id="3329252">:</span>&nbsp;<span class="string" id="3329254">`\t`</span><span class="op" id="3329258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329261">&#39;\n&#39;</span><span class="op" id="3329265">:</span>&nbsp;<span class="string" id="3329267">`\n`</span><span class="op" id="3329271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329274">&#39;\v&#39;</span><span class="op" id="3329278">:</span>&nbsp;<span class="string" id="3329280">`\x0b`</span><span class="op" id="3329286">,</span>&nbsp;<span class="comment" id="3329288">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329313">&#39;\f&#39;</span><span class="op" id="3329317">:</span>&nbsp;<span class="string" id="3329319">`\f`</span><span class="op" id="3329323">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329326">&#39;\r&#39;</span><span class="op" id="3329330">:</span>&nbsp;<span class="string" id="3329332">`\r`</span><span class="op" id="3329336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3329339">//&nbsp;Encode&nbsp;HTML&nbsp;specials&nbsp;as&nbsp;hex&nbsp;so&nbsp;the&nbsp;output&nbsp;can&nbsp;be&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3329401">//&nbsp;in&nbsp;HTML&nbsp;attributes&nbsp;without&nbsp;further&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329450">&#39;&#34;&#39;</span><span class="op" id="3329453">:</span>&nbsp;&nbsp;<span class="string" id="3329456">`\x22`</span><span class="op" id="3329462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329465">&#39;&amp;&#39;</span><span class="op" id="3329468">:</span>&nbsp;&nbsp;<span class="string" id="3329471">`\x26`</span><span class="op" id="3329477">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329480">&#39;\&#39;&#39;</span><span class="op" id="3329484">:</span>&nbsp;<span class="string" id="3329486">`\x27`</span><span class="op" id="3329492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329495">&#39;+&#39;</span><span class="op" id="3329498">:</span>&nbsp;&nbsp;<span class="string" id="3329501">`\x2b`</span><span class="op" id="3329507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329510">&#39;/&#39;</span><span class="op" id="3329513">:</span>&nbsp;&nbsp;<span class="string" id="3329516">`\/`</span><span class="op" id="3329520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329523">&#39;&lt;&#39;</span><span class="op" id="3329526">:</span>&nbsp;&nbsp;<span class="string" id="3329529">`\x3c`</span><span class="op" id="3329535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329538">&#39;&gt;&#39;</span><span class="op" id="3329541">:</span>&nbsp;&nbsp;<span class="string" id="3329544">`\x3e`</span><span class="op" id="3329550">,</span><br>
<span class="lineno">310</span><span class="op" id="3329552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3329555">var</span>&nbsp;<span class="ident" id="3329559">jsRegexpReplacementTable</span>&nbsp;<span class="op" id="3329584">=</span>&nbsp;<span class="op" id="3329586">[</span><span class="op" id="3329587">]</span><span class="builtintype" id="3329588">string</span><span class="op" id="3329594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3329597">0</span><span class="op" id="3329598">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3329603">`\0`</span><span class="op" id="3329607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329610">&#39;\t&#39;</span><span class="op" id="3329614">:</span>&nbsp;<span class="string" id="3329616">`\t`</span><span class="op" id="3329620">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329623">&#39;\n&#39;</span><span class="op" id="3329627">:</span>&nbsp;<span class="string" id="3329629">`\n`</span><span class="op" id="3329633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329636">&#39;\v&#39;</span><span class="op" id="3329640">:</span>&nbsp;<span class="string" id="3329642">`\x0b`</span><span class="op" id="3329648">,</span>&nbsp;<span class="comment" id="3329650">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329675">&#39;\f&#39;</span><span class="op" id="3329679">:</span>&nbsp;<span class="string" id="3329681">`\f`</span><span class="op" id="3329685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329688">&#39;\r&#39;</span><span class="op" id="3329692">:</span>&nbsp;<span class="string" id="3329694">`\r`</span><span class="op" id="3329698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3329701">//&nbsp;Encode&nbsp;HTML&nbsp;specials&nbsp;as&nbsp;hex&nbsp;so&nbsp;the&nbsp;output&nbsp;can&nbsp;be&nbsp;embedded</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3329763">//&nbsp;in&nbsp;HTML&nbsp;attributes&nbsp;without&nbsp;further&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329812">&#39;&#34;&#39;</span><span class="op" id="3329815">:</span>&nbsp;&nbsp;<span class="string" id="3329818">`\x22`</span><span class="op" id="3329824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329827">&#39;$&#39;</span><span class="op" id="3329830">:</span>&nbsp;&nbsp;<span class="string" id="3329833">`\$`</span><span class="op" id="3329837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329840">&#39;&amp;&#39;</span><span class="op" id="3329843">:</span>&nbsp;&nbsp;<span class="string" id="3329846">`\x26`</span><span class="op" id="3329852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329855">&#39;\&#39;&#39;</span><span class="op" id="3329859">:</span>&nbsp;<span class="string" id="3329861">`\x27`</span><span class="op" id="3329867">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329870">&#39;(&#39;</span><span class="op" id="3329873">:</span>&nbsp;&nbsp;<span class="string" id="3329876">`\(`</span><span class="op" id="3329880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329883">&#39;)&#39;</span><span class="op" id="3329886">:</span>&nbsp;&nbsp;<span class="string" id="3329889">`\)`</span><span class="op" id="3329893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329896">&#39;*&#39;</span><span class="op" id="3329899">:</span>&nbsp;&nbsp;<span class="string" id="3329902">`\*`</span><span class="op" id="3329906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329909">&#39;+&#39;</span><span class="op" id="3329912">:</span>&nbsp;&nbsp;<span class="string" id="3329915">`\x2b`</span><span class="op" id="3329921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329924">&#39;-&#39;</span><span class="op" id="3329927">:</span>&nbsp;&nbsp;<span class="string" id="3329930">`\-`</span><span class="op" id="3329934">,</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329937">&#39;.&#39;</span><span class="op" id="3329940">:</span>&nbsp;&nbsp;<span class="string" id="3329943">`\.`</span><span class="op" id="3329947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329950">&#39;/&#39;</span><span class="op" id="3329953">:</span>&nbsp;&nbsp;<span class="string" id="3329956">`\/`</span><span class="op" id="3329960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329963">&#39;&lt;&#39;</span><span class="op" id="3329966">:</span>&nbsp;&nbsp;<span class="string" id="3329969">`\x3c`</span><span class="op" id="3329975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329978">&#39;&gt;&#39;</span><span class="op" id="3329981">:</span>&nbsp;&nbsp;<span class="string" id="3329984">`\x3e`</span><span class="op" id="3329990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3329993">&#39;?&#39;</span><span class="op" id="3329996">:</span>&nbsp;&nbsp;<span class="string" id="3329999">`\?`</span><span class="op" id="3330003">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330006">&#39;[&#39;</span><span class="op" id="3330009">:</span>&nbsp;&nbsp;<span class="string" id="3330012">`\[`</span><span class="op" id="3330016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330019">&#39;\\&#39;</span><span class="op" id="3330023">:</span>&nbsp;<span class="string" id="3330025">`\\`</span><span class="op" id="3330029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330032">&#39;]&#39;</span><span class="op" id="3330035">:</span>&nbsp;&nbsp;<span class="string" id="3330038">`\]`</span><span class="op" id="3330042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330045">&#39;^&#39;</span><span class="op" id="3330048">:</span>&nbsp;&nbsp;<span class="string" id="3330051">`\^`</span><span class="op" id="3330055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330058">&#39;{&#39;</span><span class="op" id="3330061">:</span>&nbsp;&nbsp;<span class="string" id="3330064">`\{`</span><span class="op" id="3330068">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330071">&#39;|&#39;</span><span class="op" id="3330074">:</span>&nbsp;&nbsp;<span class="string" id="3330077">`\|`</span><span class="op" id="3330081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330084">&#39;}&#39;</span><span class="op" id="3330087">:</span>&nbsp;&nbsp;<span class="string" id="3330090">`\}`</span><span class="op" id="3330094">,</span><br>
<span class="lineno"></span><span class="op" id="3330096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3330099">//&nbsp;isJSIdentPart&nbsp;reports&nbsp;whether&nbsp;the&nbsp;given&nbsp;rune&nbsp;is&nbsp;a&nbsp;JS&nbsp;identifier&nbsp;part.</span><br>
<span class="lineno">345</span><span class="comment" id="3330172">//&nbsp;It&nbsp;does&nbsp;not&nbsp;handle&nbsp;all&nbsp;the&nbsp;non-Latin&nbsp;letters,&nbsp;joiners,&nbsp;and&nbsp;combining&nbsp;marks,</span><br>
<span class="lineno"></span><span class="comment" id="3330251">//&nbsp;but&nbsp;it&nbsp;does&nbsp;handle&nbsp;every&nbsp;codepoint&nbsp;that&nbsp;can&nbsp;occur&nbsp;in&nbsp;a&nbsp;numeric&nbsp;literal&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3330328">//&nbsp;a&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="keyword" id="3330342">func</span>&nbsp;<span class="ident" id="3330347">isJSIdentPart</span><span class="op" id="3330360">(</span><span class="ident" id="3330361">r</span>&nbsp;<span class="builtintype" id="3330363">rune</span><span class="op" id="3330367">)</span>&nbsp;<span class="builtintype" id="3330369">bool</span>&nbsp;<span class="op" id="3330374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330377">switch</span>&nbsp;<span class="op" id="3330384">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330387">case</span>&nbsp;<span class="ident" id="3330392"><a href="/html/template/js.go.html#3330361">r</a></span>&nbsp;<span class="op" id="3330394">==</span>&nbsp;<span class="string" id="3330397">&#39;$&#39;</span><span class="op" id="3330400">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330404">return</span>&nbsp;<span class="ident" id="3330411">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330417">case</span>&nbsp;<span class="string" id="3330422">&#39;0&#39;</span>&nbsp;<span class="op" id="3330426">&lt;=</span>&nbsp;<span class="ident" id="3330429"><a href="/html/template/js.go.html#3330361">r</a></span>&nbsp;<span class="op" id="3330431">&amp;&amp;</span>&nbsp;<span class="ident" id="3330434"><a href="/html/template/js.go.html#3330361">r</a></span>&nbsp;<span class="op" id="3330436">&lt;=</span>&nbsp;<span class="string" id="3330439">&#39;9&#39;</span><span class="op" id="3330442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330446">return</span>&nbsp;<span class="ident" id="3330453">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330459">case</span>&nbsp;<span class="string" id="3330464">&#39;A&#39;</span>&nbsp;<span class="op" id="3330468">&lt;=</span>&nbsp;<span class="ident" id="3330471"><a href="/html/template/js.go.html#3330361">r</a></span>&nbsp;<span class="op" id="3330473">&amp;&amp;</span>&nbsp;<span class="ident" id="3330476"><a href="/html/template/js.go.html#3330361">r</a></span>&nbsp;<span class="op" id="3330478">&lt;=</span>&nbsp;<span class="string" id="3330481">&#39;Z&#39;</span><span class="op" id="3330484">:</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330488">return</span>&nbsp;<span class="ident" id="3330495">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330501">case</span>&nbsp;<span class="ident" id="3330506"><a href="/html/template/js.go.html#3330361">r</a></span>&nbsp;<span class="op" id="3330508">==</span>&nbsp;<span class="string" id="3330511">&#39;_&#39;</span><span class="op" id="3330514">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330518">return</span>&nbsp;<span class="ident" id="3330525">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330531">case</span>&nbsp;<span class="string" id="3330536">&#39;a&#39;</span>&nbsp;<span class="op" id="3330540">&lt;=</span>&nbsp;<span class="ident" id="3330543"><a href="/html/template/js.go.html#3330361">r</a></span>&nbsp;<span class="op" id="3330545">&amp;&amp;</span>&nbsp;<span class="ident" id="3330548"><a href="/html/template/js.go.html#3330361">r</a></span>&nbsp;<span class="op" id="3330550">&lt;=</span>&nbsp;<span class="string" id="3330553">&#39;z&#39;</span><span class="op" id="3330556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330560">return</span>&nbsp;<span class="ident" id="3330567">true</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3330573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3330576">return</span>&nbsp;<span class="ident" id="3330583">false</span><br>
<span class="lineno"></span><span class="op" id="3330589">}</span>
</div>
</body>
</html>
