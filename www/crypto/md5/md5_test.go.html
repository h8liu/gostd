<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8130571">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8130626">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8130680">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8130731">package</span>&nbsp;<span class="ident" id="8130739">md5</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8130744">import</span>&nbsp;<span class="op" id="8130751">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8130754">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8130769">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8130776">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8130782">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8130793">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="8130802">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8130805">type</span>&nbsp;<span class="ident" id="8130810">md5Test</span>&nbsp;<span class="keyword" id="8130818">struct</span>&nbsp;<span class="op" id="8130825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130828">out</span>&nbsp;<span class="builtintype" id="8130832">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130840">in</span>&nbsp;&nbsp;<span class="builtintype" id="8130844">string</span><br>
<span class="lineno"></span><span class="op" id="8130851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="8130854">var</span>&nbsp;<span class="ident" id="8130858">golden</span>&nbsp;<span class="op" id="8130865">=</span>&nbsp;<span class="op" id="8130867">[</span><span class="op" id="8130868">]</span><span class="ident" id="8130869">md5Test</span><span class="op" id="8130876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130879">{</span><span class="string" id="8130880">&#34;d41d8cd98f00b204e9800998ecf8427e&#34;</span><span class="op" id="8130914">,</span>&nbsp;<span class="string" id="8130916">&#34;&#34;</span><span class="op" id="8130918">}</span><span class="op" id="8130919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130922">{</span><span class="string" id="8130923">&#34;0cc175b9c0f1b6a831c399e269772661&#34;</span><span class="op" id="8130957">,</span>&nbsp;<span class="string" id="8130959">&#34;a&#34;</span><span class="op" id="8130962">}</span><span class="op" id="8130963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130966">{</span><span class="string" id="8130967">&#34;187ef4436122d1cc2f40dc2b92f0eba0&#34;</span><span class="op" id="8131001">,</span>&nbsp;<span class="string" id="8131003">&#34;ab&#34;</span><span class="op" id="8131007">}</span><span class="op" id="8131008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131011">{</span><span class="string" id="8131012">&#34;900150983cd24fb0d6963f7d28e17f72&#34;</span><span class="op" id="8131046">,</span>&nbsp;<span class="string" id="8131048">&#34;abc&#34;</span><span class="op" id="8131053">}</span><span class="op" id="8131054">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131057">{</span><span class="string" id="8131058">&#34;e2fc714c4727ee9395f324cd2e7f331f&#34;</span><span class="op" id="8131092">,</span>&nbsp;<span class="string" id="8131094">&#34;abcd&#34;</span><span class="op" id="8131100">}</span><span class="op" id="8131101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131104">{</span><span class="string" id="8131105">&#34;ab56b4d92b40713acc5af89985d4b786&#34;</span><span class="op" id="8131139">,</span>&nbsp;<span class="string" id="8131141">&#34;abcde&#34;</span><span class="op" id="8131148">}</span><span class="op" id="8131149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131152">{</span><span class="string" id="8131153">&#34;e80b5017098950fc58aad83c8c14978e&#34;</span><span class="op" id="8131187">,</span>&nbsp;<span class="string" id="8131189">&#34;abcdef&#34;</span><span class="op" id="8131197">}</span><span class="op" id="8131198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131201">{</span><span class="string" id="8131202">&#34;7ac66c0f148de9519b8bd264312c4d64&#34;</span><span class="op" id="8131236">,</span>&nbsp;<span class="string" id="8131238">&#34;abcdefg&#34;</span><span class="op" id="8131247">}</span><span class="op" id="8131248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131251">{</span><span class="string" id="8131252">&#34;e8dc4081b13434b45189a720b77b6818&#34;</span><span class="op" id="8131286">,</span>&nbsp;<span class="string" id="8131288">&#34;abcdefgh&#34;</span><span class="op" id="8131298">}</span><span class="op" id="8131299">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131302">{</span><span class="string" id="8131303">&#34;8aa99b1f439ff71293e95357bac6fd94&#34;</span><span class="op" id="8131337">,</span>&nbsp;<span class="string" id="8131339">&#34;abcdefghi&#34;</span><span class="op" id="8131350">}</span><span class="op" id="8131351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131354">{</span><span class="string" id="8131355">&#34;a925576942e94b2ef57a066101b48876&#34;</span><span class="op" id="8131389">,</span>&nbsp;<span class="string" id="8131391">&#34;abcdefghij&#34;</span><span class="op" id="8131403">}</span><span class="op" id="8131404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131407">{</span><span class="string" id="8131408">&#34;d747fc1719c7eacb84058196cfe56d57&#34;</span><span class="op" id="8131442">,</span>&nbsp;<span class="string" id="8131444">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="8131487">}</span><span class="op" id="8131488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131491">{</span><span class="string" id="8131492">&#34;bff2dcb37ef3a44ba43ab144768ca837&#34;</span><span class="op" id="8131526">,</span>&nbsp;<span class="string" id="8131528">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="8131587">}</span><span class="op" id="8131588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131591">{</span><span class="string" id="8131592">&#34;0441015ecb54a7342d017ed1bcfdbea5&#34;</span><span class="op" id="8131626">,</span>&nbsp;<span class="string" id="8131628">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="8131672">}</span><span class="op" id="8131673">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131676">{</span><span class="string" id="8131677">&#34;9e3cac8e9e9757a60c3ea391130d3689&#34;</span><span class="op" id="8131711">,</span>&nbsp;<span class="string" id="8131713">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="8131772">}</span><span class="op" id="8131773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131776">{</span><span class="string" id="8131777">&#34;a0f04459b031f916a59a35cc482dc039&#34;</span><span class="op" id="8131811">,</span>&nbsp;<span class="string" id="8131813">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="8131873">}</span><span class="op" id="8131874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131877">{</span><span class="string" id="8131878">&#34;e7a48e0fe884faf31475d2a04b1362cc&#34;</span><span class="op" id="8131912">,</span>&nbsp;<span class="string" id="8131914">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="8131943">}</span><span class="op" id="8131944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131947">{</span><span class="string" id="8131948">&#34;637d2fe925c07c113800509964fb0e06&#34;</span><span class="op" id="8131982">,</span>&nbsp;<span class="string" id="8131984">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="8132053">}</span><span class="op" id="8132054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132057">{</span><span class="string" id="8132058">&#34;834a8d18d5c6562119cf4c7f5086cb71&#34;</span><span class="op" id="8132092">,</span>&nbsp;<span class="string" id="8132094">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="8132153">}</span><span class="op" id="8132154">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132157">{</span><span class="string" id="8132158">&#34;de3a4d2fd6c73ec2db2abad23b444281&#34;</span><span class="op" id="8132192">,</span>&nbsp;<span class="string" id="8132194">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="8132284">}</span><span class="op" id="8132285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132288">{</span><span class="string" id="8132289">&#34;acf203f997e2cf74ea3aff86985aefaf&#34;</span><span class="op" id="8132323">,</span>&nbsp;<span class="string" id="8132325">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="8132402">}</span><span class="op" id="8132403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132406">{</span><span class="string" id="8132407">&#34;e1c1384cb4d2221dfdd7c795a4222c9a&#34;</span><span class="op" id="8132441">,</span>&nbsp;<span class="string" id="8132443">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="8132469">}</span><span class="op" id="8132470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132473">{</span><span class="string" id="8132474">&#34;c90f3ddecc54f34228c063d7525bf644&#34;</span><span class="op" id="8132508">,</span>&nbsp;<span class="string" id="8132510">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="8132561">}</span><span class="op" id="8132562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132565">{</span><span class="string" id="8132566">&#34;cdf7ab6c1fd49bd9933c43f3ea5af185&#34;</span><span class="op" id="8132600">,</span>&nbsp;<span class="string" id="8132602">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="8132676">}</span><span class="op" id="8132677">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132680">{</span><span class="string" id="8132681">&#34;83bc85234942fc883c063cbd7f0ad5d0&#34;</span><span class="op" id="8132715">,</span>&nbsp;<span class="string" id="8132717">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="8132765">}</span><span class="op" id="8132766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132769">{</span><span class="string" id="8132770">&#34;277cbe255686b48dd7e8f389394d9299&#34;</span><span class="op" id="8132804">,</span>&nbsp;<span class="string" id="8132806">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="8132878">}</span><span class="op" id="8132879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132882">{</span><span class="string" id="8132883">&#34;fd3fb0a7ffb8af16603f3d3af98f8e1f&#34;</span><span class="op" id="8132917">,</span>&nbsp;<span class="string" id="8132919">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="8132989">}</span><span class="op" id="8132990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132993">{</span><span class="string" id="8132994">&#34;469b13a78ebf297ecda64d4723655154&#34;</span><span class="op" id="8133028">,</span>&nbsp;<span class="string" id="8133030">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="8133064">}</span><span class="op" id="8133065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133068">{</span><span class="string" id="8133069">&#34;63eb3a2f466410104731c4b037600110&#34;</span><span class="op" id="8133103">,</span>&nbsp;<span class="string" id="8133105">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="8133195">}</span><span class="op" id="8133196">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133199">{</span><span class="string" id="8133200">&#34;72c2ed7592debca1c90fc0100f931a2f&#34;</span><span class="op" id="8133234">,</span>&nbsp;<span class="string" id="8133236">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="8133370">}</span><span class="op" id="8133371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133374">{</span><span class="string" id="8133375">&#34;132f7619d33b523b1d9e5bd8e0928355&#34;</span><span class="op" id="8133409">,</span>&nbsp;<span class="string" id="8133411">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="8133469">}</span><span class="op" id="8133470">,</span><br>
<span class="lineno"></span><span class="op" id="8133472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8133475">func</span>&nbsp;<span class="ident" id="8133480">TestGolden</span><span class="op" id="8133490">(</span><span class="ident" id="8133491">t</span>&nbsp;<span class="op" id="8133493">*</span><span class="ident" id="8133494">testing</span><span class="op" id="8133501">.</span><span class="ident" id="8133502">T</span><span class="op" id="8133503">)</span>&nbsp;<span class="op" id="8133505">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133508">for</span>&nbsp;<span class="ident" id="8133512">i</span>&nbsp;<span class="op" id="8133514">:=</span>&nbsp;<span class="num" id="8133517">0</span><span class="op" id="8133518">;</span>&nbsp;<span class="ident" id="8133520">i</span>&nbsp;<span class="op" id="8133522">&lt;</span>&nbsp;<span class="builtinfunc" id="8133524">len</span><span class="op" id="8133527">(</span><span class="ident" id="8133528">golden</span><span class="op" id="8133534">)</span><span class="op" id="8133535">;</span>&nbsp;<span class="ident" id="8133537">i</span><span class="op" id="8133538">++</span>&nbsp;<span class="op" id="8133541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133545">g</span>&nbsp;<span class="op" id="8133547">:=</span>&nbsp;<span class="ident" id="8133550">golden</span><span class="op" id="8133556">[</span><span class="ident" id="8133557">i</span><span class="op" id="8133558">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133562">s</span>&nbsp;<span class="op" id="8133564">:=</span>&nbsp;<span class="ident" id="8133567">fmt</span><span class="op" id="8133570">.</span><span class="ident" id="8133571">Sprintf</span><span class="op" id="8133578">(</span><span class="string" id="8133579">&#34;%x&#34;</span><span class="op" id="8133583">,</span>&nbsp;<span class="ident" id="8133585">Sum</span><span class="op" id="8133588">(</span><span class="op" id="8133589">[</span><span class="op" id="8133590">]</span><span class="builtintype" id="8133591">byte</span><span class="op" id="8133595">(</span><span class="ident" id="8133596">g</span><span class="op" id="8133597">.</span><span class="ident" id="8133598">in</span><span class="op" id="8133600">)</span><span class="op" id="8133601">)</span><span class="op" id="8133602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133606">if</span>&nbsp;<span class="ident" id="8133609">s</span>&nbsp;<span class="op" id="8133611">!=</span>&nbsp;<span class="ident" id="8133614">g</span><span class="op" id="8133615">.</span><span class="ident" id="8133616">out</span>&nbsp;<span class="op" id="8133620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133625">t</span><span class="op" id="8133626">.</span><span class="ident" id="8133627">Fatalf</span><span class="op" id="8133633">(</span><span class="string" id="8133634">&#34;Sum&nbsp;function:&nbsp;md5(%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8133670">,</span>&nbsp;<span class="ident" id="8133672">g</span><span class="op" id="8133673">.</span><span class="ident" id="8133674">in</span><span class="op" id="8133676">,</span>&nbsp;<span class="ident" id="8133678">s</span><span class="op" id="8133679">,</span>&nbsp;<span class="ident" id="8133681">g</span><span class="op" id="8133682">.</span><span class="ident" id="8133683">out</span><span class="op" id="8133686">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133694">c</span>&nbsp;<span class="op" id="8133696">:=</span>&nbsp;<span class="ident" id="8133699">New</span><span class="op" id="8133702">(</span><span class="op" id="8133703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133707">buf</span>&nbsp;<span class="op" id="8133711">:=</span>&nbsp;<span class="builtinfunc" id="8133714">make</span><span class="op" id="8133718">(</span><span class="op" id="8133719">[</span><span class="op" id="8133720">]</span><span class="builtintype" id="8133721">byte</span><span class="op" id="8133725">,</span>&nbsp;<span class="builtinfunc" id="8133727">len</span><span class="op" id="8133730">(</span><span class="ident" id="8133731">g</span><span class="op" id="8133732">.</span><span class="ident" id="8133733">in</span><span class="op" id="8133735">)</span><span class="op" id="8133736">+</span><span class="num" id="8133737">4</span><span class="op" id="8133738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133742">for</span>&nbsp;<span class="ident" id="8133746">j</span>&nbsp;<span class="op" id="8133748">:=</span>&nbsp;<span class="num" id="8133751">0</span><span class="op" id="8133752">;</span>&nbsp;<span class="ident" id="8133754">j</span>&nbsp;<span class="op" id="8133756">&lt;</span>&nbsp;<span class="num" id="8133758">3</span><span class="op" id="8133759">+</span><span class="num" id="8133760">4</span><span class="op" id="8133761">;</span>&nbsp;<span class="ident" id="8133763">j</span><span class="op" id="8133764">++</span>&nbsp;<span class="op" id="8133767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133772">if</span>&nbsp;<span class="ident" id="8133775">j</span>&nbsp;<span class="op" id="8133777">&lt;</span>&nbsp;<span class="num" id="8133779">2</span>&nbsp;<span class="op" id="8133781">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133787">io</span><span class="op" id="8133789">.</span><span class="ident" id="8133790">WriteString</span><span class="op" id="8133801">(</span><span class="ident" id="8133802">c</span><span class="op" id="8133803">,</span>&nbsp;<span class="ident" id="8133805">g</span><span class="op" id="8133806">.</span><span class="ident" id="8133807">in</span><span class="op" id="8133809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133814">}</span>&nbsp;<span class="keyword" id="8133816">else</span>&nbsp;<span class="keyword" id="8133821">if</span>&nbsp;<span class="ident" id="8133824">j</span>&nbsp;<span class="op" id="8133826">==</span>&nbsp;<span class="num" id="8133829">2</span>&nbsp;<span class="op" id="8133831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133837">io</span><span class="op" id="8133839">.</span><span class="ident" id="8133840">WriteString</span><span class="op" id="8133851">(</span><span class="ident" id="8133852">c</span><span class="op" id="8133853">,</span>&nbsp;<span class="ident" id="8133855">g</span><span class="op" id="8133856">.</span><span class="ident" id="8133857">in</span><span class="op" id="8133859">[</span><span class="num" id="8133860">0</span><span class="op" id="8133861">:</span><span class="builtinfunc" id="8133862">len</span><span class="op" id="8133865">(</span><span class="ident" id="8133866">g</span><span class="op" id="8133867">.</span><span class="ident" id="8133868">in</span><span class="op" id="8133870">)</span><span class="op" id="8133871">/</span><span class="num" id="8133872">2</span><span class="op" id="8133873">]</span><span class="op" id="8133874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133880">c</span><span class="op" id="8133881">.</span><span class="ident" id="8133882">Sum</span><span class="op" id="8133885">(</span><span class="ident" id="8133886">nil</span><span class="op" id="8133889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133895">io</span><span class="op" id="8133897">.</span><span class="ident" id="8133898">WriteString</span><span class="op" id="8133909">(</span><span class="ident" id="8133910">c</span><span class="op" id="8133911">,</span>&nbsp;<span class="ident" id="8133913">g</span><span class="op" id="8133914">.</span><span class="ident" id="8133915">in</span><span class="op" id="8133917">[</span><span class="builtinfunc" id="8133918">len</span><span class="op" id="8133921">(</span><span class="ident" id="8133922">g</span><span class="op" id="8133923">.</span><span class="ident" id="8133924">in</span><span class="op" id="8133926">)</span><span class="op" id="8133927">/</span><span class="num" id="8133928">2</span><span class="op" id="8133929">:</span><span class="op" id="8133930">]</span><span class="op" id="8133931">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133936">}</span>&nbsp;<span class="keyword" id="8133938">else</span>&nbsp;<span class="keyword" id="8133943">if</span>&nbsp;<span class="ident" id="8133946">j</span>&nbsp;<span class="op" id="8133948">&gt;</span>&nbsp;<span class="num" id="8133950">2</span>&nbsp;<span class="op" id="8133952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8133958">//&nbsp;test&nbsp;unaligned&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133986">buf</span>&nbsp;<span class="op" id="8133990">=</span>&nbsp;<span class="ident" id="8133992">buf</span><span class="op" id="8133995">[</span><span class="num" id="8133996">1</span><span class="op" id="8133997">:</span><span class="op" id="8133998">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8134004">copy</span><span class="op" id="8134008">(</span><span class="ident" id="8134009">buf</span><span class="op" id="8134012">,</span>&nbsp;<span class="ident" id="8134014">g</span><span class="op" id="8134015">.</span><span class="ident" id="8134016">in</span><span class="op" id="8134018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134024">c</span><span class="op" id="8134025">.</span><span class="ident" id="8134026">Write</span><span class="op" id="8134031">(</span><span class="ident" id="8134032">buf</span><span class="op" id="8134035">[</span><span class="op" id="8134036">:</span><span class="builtinfunc" id="8134037">len</span><span class="op" id="8134040">(</span><span class="ident" id="8134041">g</span><span class="op" id="8134042">.</span><span class="ident" id="8134043">in</span><span class="op" id="8134045">)</span><span class="op" id="8134046">]</span><span class="op" id="8134047">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134057">s</span>&nbsp;<span class="op" id="8134059">:=</span>&nbsp;<span class="ident" id="8134062">fmt</span><span class="op" id="8134065">.</span><span class="ident" id="8134066">Sprintf</span><span class="op" id="8134073">(</span><span class="string" id="8134074">&#34;%x&#34;</span><span class="op" id="8134078">,</span>&nbsp;<span class="ident" id="8134080">c</span><span class="op" id="8134081">.</span><span class="ident" id="8134082">Sum</span><span class="op" id="8134085">(</span><span class="ident" id="8134086">nil</span><span class="op" id="8134089">)</span><span class="op" id="8134090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134095">if</span>&nbsp;<span class="ident" id="8134098">s</span>&nbsp;<span class="op" id="8134100">!=</span>&nbsp;<span class="ident" id="8134103">g</span><span class="op" id="8134104">.</span><span class="ident" id="8134105">out</span>&nbsp;<span class="op" id="8134109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134115">t</span><span class="op" id="8134116">.</span><span class="ident" id="8134117">Fatalf</span><span class="op" id="8134123">(</span><span class="string" id="8134124">&#34;md5[%d](%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8134150">,</span>&nbsp;<span class="ident" id="8134152">j</span><span class="op" id="8134153">,</span>&nbsp;<span class="ident" id="8134155">g</span><span class="op" id="8134156">.</span><span class="ident" id="8134157">in</span><span class="op" id="8134159">,</span>&nbsp;<span class="ident" id="8134161">s</span><span class="op" id="8134162">,</span>&nbsp;<span class="ident" id="8134164">g</span><span class="op" id="8134165">.</span><span class="ident" id="8134166">out</span><span class="op" id="8134169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134174">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134179">c</span><span class="op" id="8134180">.</span><span class="ident" id="8134181">Reset</span><span class="op" id="8134186">(</span><span class="op" id="8134187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134194">}</span><br>
<span class="lineno"></span><span class="op" id="8134196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="8134199">func</span>&nbsp;<span class="ident" id="8134204">TestLarge</span><span class="op" id="8134213">(</span><span class="ident" id="8134214">t</span>&nbsp;<span class="op" id="8134216">*</span><span class="ident" id="8134217">testing</span><span class="op" id="8134224">.</span><span class="ident" id="8134225">T</span><span class="op" id="8134226">)</span>&nbsp;<span class="op" id="8134228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134231">const</span>&nbsp;<span class="ident" id="8134237">N</span>&nbsp;<span class="op" id="8134239">=</span>&nbsp;<span class="num" id="8134241">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134248">ok</span>&nbsp;<span class="op" id="8134251">:=</span>&nbsp;<span class="string" id="8134254">&#34;2bb571599a4180e1d542f76904adc3df&#34;</span>&nbsp;<span class="comment" id="8134289">//&nbsp;md5sum&nbsp;of&nbsp;&#34;0123456789&#34;&nbsp;*&nbsp;1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134323">block</span>&nbsp;<span class="op" id="8134329">:=</span>&nbsp;<span class="builtinfunc" id="8134332">make</span><span class="op" id="8134336">(</span><span class="op" id="8134337">[</span><span class="op" id="8134338">]</span><span class="builtintype" id="8134339">byte</span><span class="op" id="8134343">,</span>&nbsp;<span class="num" id="8134345">10004</span><span class="op" id="8134350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134353">c</span>&nbsp;<span class="op" id="8134355">:=</span>&nbsp;<span class="ident" id="8134358">New</span><span class="op" id="8134361">(</span><span class="op" id="8134362">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134365">for</span>&nbsp;<span class="ident" id="8134369">offset</span>&nbsp;<span class="op" id="8134376">:=</span>&nbsp;<span class="num" id="8134379">0</span><span class="op" id="8134380">;</span>&nbsp;<span class="ident" id="8134382">offset</span>&nbsp;<span class="op" id="8134389">&lt;</span>&nbsp;<span class="num" id="8134391">4</span><span class="op" id="8134392">;</span>&nbsp;<span class="ident" id="8134394">offset</span><span class="op" id="8134400">++</span>&nbsp;<span class="op" id="8134403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134407">for</span>&nbsp;<span class="ident" id="8134411">i</span>&nbsp;<span class="op" id="8134413">:=</span>&nbsp;<span class="num" id="8134416">0</span><span class="op" id="8134417">;</span>&nbsp;<span class="ident" id="8134419">i</span>&nbsp;<span class="op" id="8134421">&lt;</span>&nbsp;<span class="ident" id="8134423">N</span><span class="op" id="8134424">;</span>&nbsp;<span class="ident" id="8134426">i</span><span class="op" id="8134427">++</span>&nbsp;<span class="op" id="8134430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134435">block</span><span class="op" id="8134440">[</span><span class="ident" id="8134441">offset</span><span class="op" id="8134447">+</span><span class="ident" id="8134448">i</span><span class="op" id="8134449">]</span>&nbsp;<span class="op" id="8134451">=</span>&nbsp;<span class="string" id="8134453">&#39;0&#39;</span>&nbsp;<span class="op" id="8134457">+</span>&nbsp;<span class="builtintype" id="8134459">byte</span><span class="op" id="8134463">(</span><span class="ident" id="8134464">i</span><span class="op" id="8134465">%</span><span class="num" id="8134466">10</span><span class="op" id="8134468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134476">for</span>&nbsp;<span class="ident" id="8134480">blockSize</span>&nbsp;<span class="op" id="8134490">:=</span>&nbsp;<span class="num" id="8134493">10</span><span class="op" id="8134495">;</span>&nbsp;<span class="ident" id="8134497">blockSize</span>&nbsp;<span class="op" id="8134507">&lt;=</span>&nbsp;<span class="ident" id="8134510">N</span><span class="op" id="8134511">;</span>&nbsp;<span class="ident" id="8134513">blockSize</span>&nbsp;<span class="op" id="8134523">*=</span>&nbsp;<span class="num" id="8134526">10</span>&nbsp;<span class="op" id="8134529">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134534">blocks</span>&nbsp;<span class="op" id="8134541">:=</span>&nbsp;<span class="ident" id="8134544">N</span>&nbsp;<span class="op" id="8134546">/</span>&nbsp;<span class="ident" id="8134548">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134561">b</span>&nbsp;<span class="op" id="8134563">:=</span>&nbsp;<span class="ident" id="8134566">block</span><span class="op" id="8134571">[</span><span class="ident" id="8134572">offset</span>&nbsp;<span class="op" id="8134579">:</span>&nbsp;<span class="ident" id="8134581">offset</span><span class="op" id="8134587">+</span><span class="ident" id="8134588">blockSize</span><span class="op" id="8134597">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134602">c</span><span class="op" id="8134603">.</span><span class="ident" id="8134604">Reset</span><span class="op" id="8134609">(</span><span class="op" id="8134610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134615">for</span>&nbsp;<span class="ident" id="8134619">i</span>&nbsp;<span class="op" id="8134621">:=</span>&nbsp;<span class="num" id="8134624">0</span><span class="op" id="8134625">;</span>&nbsp;<span class="ident" id="8134627">i</span>&nbsp;<span class="op" id="8134629">&lt;</span>&nbsp;<span class="ident" id="8134631">blocks</span><span class="op" id="8134637">;</span>&nbsp;<span class="ident" id="8134639">i</span><span class="op" id="8134640">++</span>&nbsp;<span class="op" id="8134643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134649">c</span><span class="op" id="8134650">.</span><span class="ident" id="8134651">Write</span><span class="op" id="8134656">(</span><span class="ident" id="8134657">b</span><span class="op" id="8134658">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134668">s</span>&nbsp;<span class="op" id="8134670">:=</span>&nbsp;<span class="ident" id="8134673">fmt</span><span class="op" id="8134676">.</span><span class="ident" id="8134677">Sprintf</span><span class="op" id="8134684">(</span><span class="string" id="8134685">&#34;%x&#34;</span><span class="op" id="8134689">,</span>&nbsp;<span class="ident" id="8134691">c</span><span class="op" id="8134692">.</span><span class="ident" id="8134693">Sum</span><span class="op" id="8134696">(</span><span class="ident" id="8134697">nil</span><span class="op" id="8134700">)</span><span class="op" id="8134701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134706">if</span>&nbsp;<span class="ident" id="8134709">s</span>&nbsp;<span class="op" id="8134711">!=</span>&nbsp;<span class="ident" id="8134714">ok</span>&nbsp;<span class="op" id="8134717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134723">t</span><span class="op" id="8134724">.</span><span class="ident" id="8134725">Fatalf</span><span class="op" id="8134731">(</span><span class="string" id="8134732">&#34;md5&nbsp;TestLarge&nbsp;offset=%d,&nbsp;blockSize=%d&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8134784">,</span>&nbsp;<span class="ident" id="8134786">offset</span><span class="op" id="8134792">,</span>&nbsp;<span class="ident" id="8134794">blockSize</span><span class="op" id="8134803">,</span>&nbsp;<span class="ident" id="8134805">s</span><span class="op" id="8134806">,</span>&nbsp;<span class="ident" id="8134808">ok</span><span class="op" id="8134810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134815">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134822">}</span><br>
<span class="lineno"></span><span class="op" id="8134824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8134827">//&nbsp;Tests&nbsp;that&nbsp;blockGeneric&nbsp;(pure&nbsp;Go)&nbsp;and&nbsp;block&nbsp;(in&nbsp;assembly&nbsp;for&nbsp;amd64,&nbsp;386,&nbsp;arm)&nbsp;match.</span><br>
<span class="lineno">110</span><span class="keyword" id="8134915">func</span>&nbsp;<span class="ident" id="8134920">TestBlockGeneric</span><span class="op" id="8134936">(</span><span class="ident" id="8134937">t</span>&nbsp;<span class="op" id="8134939">*</span><span class="ident" id="8134940">testing</span><span class="op" id="8134947">.</span><span class="ident" id="8134948">T</span><span class="op" id="8134949">)</span>&nbsp;<span class="op" id="8134951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134954">gen</span><span class="op" id="8134957">,</span>&nbsp;<span class="ident" id="8134959">asm</span>&nbsp;<span class="op" id="8134963">:=</span>&nbsp;<span class="ident" id="8134966">New</span><span class="op" id="8134969">(</span><span class="op" id="8134970">)</span><span class="op" id="8134971">.</span><span class="op" id="8134972">(</span><span class="op" id="8134973">*</span><span class="ident" id="8134974">digest</span><span class="op" id="8134980">)</span><span class="op" id="8134981">,</span>&nbsp;<span class="ident" id="8134983">New</span><span class="op" id="8134986">(</span><span class="op" id="8134987">)</span><span class="op" id="8134988">.</span><span class="op" id="8134989">(</span><span class="op" id="8134990">*</span><span class="ident" id="8134991">digest</span><span class="op" id="8134997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135000">buf</span>&nbsp;<span class="op" id="8135004">:=</span>&nbsp;<span class="builtinfunc" id="8135007">make</span><span class="op" id="8135011">(</span><span class="op" id="8135012">[</span><span class="op" id="8135013">]</span><span class="builtintype" id="8135014">byte</span><span class="op" id="8135018">,</span>&nbsp;<span class="ident" id="8135020">BlockSize</span><span class="op" id="8135029">*</span><span class="num" id="8135030">20</span><span class="op" id="8135032">)</span>&nbsp;<span class="comment" id="8135034">//&nbsp;arbitrary&nbsp;factor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135055">rand</span><span class="op" id="8135059">.</span><span class="ident" id="8135060">Read</span><span class="op" id="8135064">(</span><span class="ident" id="8135065">buf</span><span class="op" id="8135068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135071">blockGeneric</span><span class="op" id="8135083">(</span><span class="ident" id="8135084">gen</span><span class="op" id="8135087">,</span>&nbsp;<span class="ident" id="8135089">buf</span><span class="op" id="8135092">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135095">block</span><span class="op" id="8135100">(</span><span class="ident" id="8135101">asm</span><span class="op" id="8135104">,</span>&nbsp;<span class="ident" id="8135106">buf</span><span class="op" id="8135109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135112">if</span>&nbsp;<span class="op" id="8135115">*</span><span class="ident" id="8135116">gen</span>&nbsp;<span class="op" id="8135120">!=</span>&nbsp;<span class="op" id="8135123">*</span><span class="ident" id="8135124">asm</span>&nbsp;<span class="op" id="8135128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135132">t</span><span class="op" id="8135133">.</span><span class="ident" id="8135134">Error</span><span class="op" id="8135139">(</span><span class="string" id="8135140">&#34;block&nbsp;and&nbsp;blockGeneric&nbsp;resulted&nbsp;in&nbsp;different&nbsp;states&#34;</span><span class="op" id="8135193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135196">}</span><br>
<span class="lineno"></span><span class="op" id="8135198">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="8135201">var</span>&nbsp;<span class="ident" id="8135205">bench</span>&nbsp;<span class="op" id="8135211">=</span>&nbsp;<span class="ident" id="8135213">New</span><span class="op" id="8135216">(</span><span class="op" id="8135217">)</span><br>
<span class="lineno"></span><span class="keyword" id="8135219">var</span>&nbsp;<span class="ident" id="8135223">buf</span>&nbsp;<span class="op" id="8135227">=</span>&nbsp;<span class="builtinfunc" id="8135229">make</span><span class="op" id="8135233">(</span><span class="op" id="8135234">[</span><span class="op" id="8135235">]</span><span class="builtintype" id="8135236">byte</span><span class="op" id="8135240">,</span>&nbsp;<span class="num" id="8135242">8192</span><span class="op" id="8135246">+</span><span class="num" id="8135247">1</span><span class="op" id="8135248">)</span><br>
<span class="lineno"></span><span class="keyword" id="8135250">var</span>&nbsp;<span class="ident" id="8135254">sum</span>&nbsp;<span class="op" id="8135258">=</span>&nbsp;<span class="builtinfunc" id="8135260">make</span><span class="op" id="8135264">(</span><span class="op" id="8135265">[</span><span class="op" id="8135266">]</span><span class="builtintype" id="8135267">byte</span><span class="op" id="8135271">,</span>&nbsp;<span class="ident" id="8135273">bench</span><span class="op" id="8135278">.</span><span class="ident" id="8135279">Size</span><span class="op" id="8135283">(</span><span class="op" id="8135284">)</span><span class="op" id="8135285">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="8135288">func</span>&nbsp;<span class="ident" id="8135293">benchmarkSize</span><span class="op" id="8135306">(</span><span class="ident" id="8135307">b</span>&nbsp;<span class="op" id="8135309">*</span><span class="ident" id="8135310">testing</span><span class="op" id="8135317">.</span><span class="ident" id="8135318">B</span><span class="op" id="8135319">,</span>&nbsp;<span class="ident" id="8135321">size</span>&nbsp;<span class="builtintype" id="8135326">int</span><span class="op" id="8135329">,</span>&nbsp;<span class="ident" id="8135331">unaligned</span>&nbsp;<span class="builtintype" id="8135341">bool</span><span class="op" id="8135345">)</span>&nbsp;<span class="op" id="8135347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135350">b</span><span class="op" id="8135351">.</span><span class="ident" id="8135352">SetBytes</span><span class="op" id="8135360">(</span><span class="ident" id="8135361">int64</span><span class="op" id="8135366">(</span><span class="ident" id="8135367">size</span><span class="op" id="8135371">)</span><span class="op" id="8135372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135375">buf</span>&nbsp;<span class="op" id="8135379">:=</span>&nbsp;<span class="ident" id="8135382">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135387">if</span>&nbsp;<span class="ident" id="8135390">unaligned</span>&nbsp;<span class="op" id="8135400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135404">if</span>&nbsp;<span class="builtintype" id="8135407">uintptr</span><span class="op" id="8135414">(</span><span class="ident" id="8135415">unsafe</span><span class="op" id="8135421">.</span><span class="ident" id="8135422">Pointer</span><span class="op" id="8135429">(</span><span class="op" id="8135430">&amp;</span><span class="ident" id="8135431">buf</span><span class="op" id="8135434">[</span><span class="num" id="8135435">0</span><span class="op" id="8135436">]</span><span class="op" id="8135437">)</span><span class="op" id="8135438">)</span><span class="op" id="8135439">&amp;</span><span class="op" id="8135440">(</span><span class="ident" id="8135441">unsafe</span><span class="op" id="8135447">.</span><span class="ident" id="8135448">Alignof</span><span class="op" id="8135455">(</span><span class="builtintype" id="8135456">uint32</span><span class="op" id="8135462">(</span><span class="num" id="8135463">0</span><span class="op" id="8135464">)</span><span class="op" id="8135465">)</span><span class="op" id="8135466">-</span><span class="num" id="8135467">1</span><span class="op" id="8135468">)</span>&nbsp;<span class="op" id="8135470">==</span>&nbsp;<span class="num" id="8135473">0</span>&nbsp;<span class="op" id="8135475">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135480">buf</span>&nbsp;<span class="op" id="8135484">=</span>&nbsp;<span class="ident" id="8135486">buf</span><span class="op" id="8135489">[</span><span class="num" id="8135490">1</span><span class="op" id="8135491">:</span><span class="op" id="8135492">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135502">b</span><span class="op" id="8135503">.</span><span class="ident" id="8135504">ResetTimer</span><span class="op" id="8135514">(</span><span class="op" id="8135515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135518">for</span>&nbsp;<span class="ident" id="8135522">i</span>&nbsp;<span class="op" id="8135524">:=</span>&nbsp;<span class="num" id="8135527">0</span><span class="op" id="8135528">;</span>&nbsp;<span class="ident" id="8135530">i</span>&nbsp;<span class="op" id="8135532">&lt;</span>&nbsp;<span class="ident" id="8135534">b</span><span class="op" id="8135535">.</span><span class="ident" id="8135536">N</span><span class="op" id="8135537">;</span>&nbsp;<span class="ident" id="8135539">i</span><span class="op" id="8135540">++</span>&nbsp;<span class="op" id="8135543">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135547">bench</span><span class="op" id="8135552">.</span><span class="ident" id="8135553">Reset</span><span class="op" id="8135558">(</span><span class="op" id="8135559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135563">bench</span><span class="op" id="8135568">.</span><span class="ident" id="8135569">Write</span><span class="op" id="8135574">(</span><span class="ident" id="8135575">buf</span><span class="op" id="8135578">[</span><span class="op" id="8135579">:</span><span class="ident" id="8135580">size</span><span class="op" id="8135584">]</span><span class="op" id="8135585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135589">bench</span><span class="op" id="8135594">.</span><span class="ident" id="8135595">Sum</span><span class="op" id="8135598">(</span><span class="ident" id="8135599">sum</span><span class="op" id="8135602">[</span><span class="op" id="8135603">:</span><span class="num" id="8135604">0</span><span class="op" id="8135605">]</span><span class="op" id="8135606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135609">}</span><br>
<span class="lineno"></span><span class="op" id="8135611">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8135614">func</span>&nbsp;<span class="ident" id="8135619">BenchmarkHash8Bytes</span><span class="op" id="8135638">(</span><span class="ident" id="8135639">b</span>&nbsp;<span class="op" id="8135641">*</span><span class="ident" id="8135642">testing</span><span class="op" id="8135649">.</span><span class="ident" id="8135650">B</span><span class="op" id="8135651">)</span>&nbsp;<span class="op" id="8135653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135656">benchmarkSize</span><span class="op" id="8135669">(</span><span class="ident" id="8135670">b</span><span class="op" id="8135671">,</span>&nbsp;<span class="num" id="8135673">8</span><span class="op" id="8135674">,</span>&nbsp;<span class="ident" id="8135676">false</span><span class="op" id="8135681">)</span><br>
<span class="lineno"></span><span class="op" id="8135683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="8135686">func</span>&nbsp;<span class="ident" id="8135691">BenchmarkHash1K</span><span class="op" id="8135706">(</span><span class="ident" id="8135707">b</span>&nbsp;<span class="op" id="8135709">*</span><span class="ident" id="8135710">testing</span><span class="op" id="8135717">.</span><span class="ident" id="8135718">B</span><span class="op" id="8135719">)</span>&nbsp;<span class="op" id="8135721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135724">benchmarkSize</span><span class="op" id="8135737">(</span><span class="ident" id="8135738">b</span><span class="op" id="8135739">,</span>&nbsp;<span class="num" id="8135741">1024</span><span class="op" id="8135745">,</span>&nbsp;<span class="ident" id="8135747">false</span><span class="op" id="8135752">)</span><br>
<span class="lineno"></span><span class="op" id="8135754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8135757">func</span>&nbsp;<span class="ident" id="8135762">BenchmarkHash8K</span><span class="op" id="8135777">(</span><span class="ident" id="8135778">b</span>&nbsp;<span class="op" id="8135780">*</span><span class="ident" id="8135781">testing</span><span class="op" id="8135788">.</span><span class="ident" id="8135789">B</span><span class="op" id="8135790">)</span>&nbsp;<span class="op" id="8135792">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135795">benchmarkSize</span><span class="op" id="8135808">(</span><span class="ident" id="8135809">b</span><span class="op" id="8135810">,</span>&nbsp;<span class="num" id="8135812">8192</span><span class="op" id="8135816">,</span>&nbsp;<span class="ident" id="8135818">false</span><span class="op" id="8135823">)</span><br>
<span class="lineno"></span><span class="op" id="8135825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8135828">func</span>&nbsp;<span class="ident" id="8135833">BenchmarkHash8BytesUnaligned</span><span class="op" id="8135861">(</span><span class="ident" id="8135862">b</span>&nbsp;<span class="op" id="8135864">*</span><span class="ident" id="8135865">testing</span><span class="op" id="8135872">.</span><span class="ident" id="8135873">B</span><span class="op" id="8135874">)</span>&nbsp;<span class="op" id="8135876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135879">benchmarkSize</span><span class="op" id="8135892">(</span><span class="ident" id="8135893">b</span><span class="op" id="8135894">,</span>&nbsp;<span class="num" id="8135896">8</span><span class="op" id="8135897">,</span>&nbsp;<span class="ident" id="8135899">true</span><span class="op" id="8135903">)</span><br>
<span class="lineno">155</span><span class="op" id="8135905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8135908">func</span>&nbsp;<span class="ident" id="8135913">BenchmarkHash1KUnaligned</span><span class="op" id="8135937">(</span><span class="ident" id="8135938">b</span>&nbsp;<span class="op" id="8135940">*</span><span class="ident" id="8135941">testing</span><span class="op" id="8135948">.</span><span class="ident" id="8135949">B</span><span class="op" id="8135950">)</span>&nbsp;<span class="op" id="8135952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135955">benchmarkSize</span><span class="op" id="8135968">(</span><span class="ident" id="8135969">b</span><span class="op" id="8135970">,</span>&nbsp;<span class="num" id="8135972">1024</span><span class="op" id="8135976">,</span>&nbsp;<span class="ident" id="8135978">true</span><span class="op" id="8135982">)</span><br>
<span class="lineno"></span><span class="op" id="8135984">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="8135987">func</span>&nbsp;<span class="ident" id="8135992">BenchmarkHash8KUnaligned</span><span class="op" id="8136016">(</span><span class="ident" id="8136017">b</span>&nbsp;<span class="op" id="8136019">*</span><span class="ident" id="8136020">testing</span><span class="op" id="8136027">.</span><span class="ident" id="8136028">B</span><span class="op" id="8136029">)</span>&nbsp;<span class="op" id="8136031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136034">benchmarkSize</span><span class="op" id="8136047">(</span><span class="ident" id="8136048">b</span><span class="op" id="8136049">,</span>&nbsp;<span class="num" id="8136051">8192</span><span class="op" id="8136055">,</span>&nbsp;<span class="ident" id="8136057">true</span><span class="op" id="8136061">)</span><br>
<span class="lineno"></span><span class="op" id="8136063">}</span>
</div>
</body>
</html>
