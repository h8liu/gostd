<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html" class="current">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7608068">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7608123">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7608177">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7608228">package</span>&nbsp;<span class="ident" id="7608236">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608243">import</span>&nbsp;<span class="op" id="7608250">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7608253">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7608268">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7608278">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608281">type</span>&nbsp;<span class="ident" id="7608286">image</span>&nbsp;<span class="keyword" id="7608292">interface</span>&nbsp;<span class="op" id="7608302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608305">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608312">Opaque</span><span class="op" id="7608318">(</span><span class="op" id="7608319">)</span>&nbsp;<span class="builtintype" id="7608321">bool</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608327">Set</span><span class="op" id="7608330">(</span><span class="builtintype" id="7608331">int</span><span class="op" id="7608334">,</span>&nbsp;<span class="builtintype" id="7608336">int</span><span class="op" id="7608339">,</span>&nbsp;<span class="ident" id="7608341">color</span><span class="op" id="7608346">.</span><span class="ident" id="7608347">Color</span><span class="op" id="7608352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608355">SubImage</span><span class="op" id="7608363">(</span><span class="ident" id="7608364">Rectangle</span><span class="op" id="7608373">)</span>&nbsp;<span class="ident" id="7608375">Image</span><br>
<span class="lineno"></span><span class="op" id="7608381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608384">func</span>&nbsp;<span class="ident" id="7608389">cmp</span><span class="op" id="7608392">(</span><span class="ident" id="7608393">t</span>&nbsp;<span class="op" id="7608395">*</span><span class="ident" id="7608396">testing</span><span class="op" id="7608403">.</span><span class="ident" id="7608404">T</span><span class="op" id="7608405">,</span>&nbsp;<span class="ident" id="7608407">cm</span>&nbsp;<span class="ident" id="7608410">color</span><span class="op" id="7608415">.</span><span class="ident" id="7608416">Model</span><span class="op" id="7608421">,</span>&nbsp;<span class="ident" id="7608423">c0</span><span class="op" id="7608425">,</span>&nbsp;<span class="ident" id="7608427">c1</span>&nbsp;<span class="ident" id="7608430">color</span><span class="op" id="7608435">.</span><span class="ident" id="7608436">Color</span><span class="op" id="7608441">)</span>&nbsp;<span class="builtintype" id="7608443">bool</span>&nbsp;<span class="op" id="7608448">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608451">r0</span><span class="op" id="7608453">,</span>&nbsp;<span class="ident" id="7608455">g0</span><span class="op" id="7608457">,</span>&nbsp;<span class="ident" id="7608459">b0</span><span class="op" id="7608461">,</span>&nbsp;<span class="ident" id="7608463">a0</span>&nbsp;<span class="op" id="7608466">:=</span>&nbsp;<span class="ident" id="7608469">cm</span><span class="op" id="7608471">.</span><span class="ident" id="7608472">Convert</span><span class="op" id="7608479">(</span><span class="ident" id="7608480">c0</span><span class="op" id="7608482">)</span><span class="op" id="7608483">.</span><span class="ident" id="7608484">RGBA</span><span class="op" id="7608488">(</span><span class="op" id="7608489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608492">r1</span><span class="op" id="7608494">,</span>&nbsp;<span class="ident" id="7608496">g1</span><span class="op" id="7608498">,</span>&nbsp;<span class="ident" id="7608500">b1</span><span class="op" id="7608502">,</span>&nbsp;<span class="ident" id="7608504">a1</span>&nbsp;<span class="op" id="7608507">:=</span>&nbsp;<span class="ident" id="7608510">cm</span><span class="op" id="7608512">.</span><span class="ident" id="7608513">Convert</span><span class="op" id="7608520">(</span><span class="ident" id="7608521">c1</span><span class="op" id="7608523">)</span><span class="op" id="7608524">.</span><span class="ident" id="7608525">RGBA</span><span class="op" id="7608529">(</span><span class="op" id="7608530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608533">return</span>&nbsp;<span class="ident" id="7608540">r0</span>&nbsp;<span class="op" id="7608543">==</span>&nbsp;<span class="ident" id="7608546">r1</span>&nbsp;<span class="op" id="7608549">&amp;&amp;</span>&nbsp;<span class="ident" id="7608552">g0</span>&nbsp;<span class="op" id="7608555">==</span>&nbsp;<span class="ident" id="7608558">g1</span>&nbsp;<span class="op" id="7608561">&amp;&amp;</span>&nbsp;<span class="ident" id="7608564">b0</span>&nbsp;<span class="op" id="7608567">==</span>&nbsp;<span class="ident" id="7608570">b1</span>&nbsp;<span class="op" id="7608573">&amp;&amp;</span>&nbsp;<span class="ident" id="7608576">a0</span>&nbsp;<span class="op" id="7608579">==</span>&nbsp;<span class="ident" id="7608582">a1</span><br>
<span class="lineno"></span><span class="op" id="7608585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7608588">func</span>&nbsp;<span class="ident" id="7608593">TestImage</span><span class="op" id="7608602">(</span><span class="ident" id="7608603">t</span>&nbsp;<span class="op" id="7608605">*</span><span class="ident" id="7608606">testing</span><span class="op" id="7608613">.</span><span class="ident" id="7608614">T</span><span class="op" id="7608615">)</span>&nbsp;<span class="op" id="7608617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608620">testImage</span>&nbsp;<span class="op" id="7608630">:=</span>&nbsp;<span class="op" id="7608633">[</span><span class="op" id="7608634">]</span><span class="ident" id="7608635">image</span><span class="op" id="7608640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608644">NewRGBA</span><span class="op" id="7608651">(</span><span class="ident" id="7608652">Rect</span><span class="op" id="7608656">(</span><span class="num" id="7608657">0</span><span class="op" id="7608658">,</span>&nbsp;<span class="num" id="7608660">0</span><span class="op" id="7608661">,</span>&nbsp;<span class="num" id="7608663">10</span><span class="op" id="7608665">,</span>&nbsp;<span class="num" id="7608667">10</span><span class="op" id="7608669">)</span><span class="op" id="7608670">)</span><span class="op" id="7608671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608675">NewRGBA64</span><span class="op" id="7608684">(</span><span class="ident" id="7608685">Rect</span><span class="op" id="7608689">(</span><span class="num" id="7608690">0</span><span class="op" id="7608691">,</span>&nbsp;<span class="num" id="7608693">0</span><span class="op" id="7608694">,</span>&nbsp;<span class="num" id="7608696">10</span><span class="op" id="7608698">,</span>&nbsp;<span class="num" id="7608700">10</span><span class="op" id="7608702">)</span><span class="op" id="7608703">)</span><span class="op" id="7608704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608708">NewNRGBA</span><span class="op" id="7608716">(</span><span class="ident" id="7608717">Rect</span><span class="op" id="7608721">(</span><span class="num" id="7608722">0</span><span class="op" id="7608723">,</span>&nbsp;<span class="num" id="7608725">0</span><span class="op" id="7608726">,</span>&nbsp;<span class="num" id="7608728">10</span><span class="op" id="7608730">,</span>&nbsp;<span class="num" id="7608732">10</span><span class="op" id="7608734">)</span><span class="op" id="7608735">)</span><span class="op" id="7608736">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608740">NewNRGBA64</span><span class="op" id="7608750">(</span><span class="ident" id="7608751">Rect</span><span class="op" id="7608755">(</span><span class="num" id="7608756">0</span><span class="op" id="7608757">,</span>&nbsp;<span class="num" id="7608759">0</span><span class="op" id="7608760">,</span>&nbsp;<span class="num" id="7608762">10</span><span class="op" id="7608764">,</span>&nbsp;<span class="num" id="7608766">10</span><span class="op" id="7608768">)</span><span class="op" id="7608769">)</span><span class="op" id="7608770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608774">NewAlpha</span><span class="op" id="7608782">(</span><span class="ident" id="7608783">Rect</span><span class="op" id="7608787">(</span><span class="num" id="7608788">0</span><span class="op" id="7608789">,</span>&nbsp;<span class="num" id="7608791">0</span><span class="op" id="7608792">,</span>&nbsp;<span class="num" id="7608794">10</span><span class="op" id="7608796">,</span>&nbsp;<span class="num" id="7608798">10</span><span class="op" id="7608800">)</span><span class="op" id="7608801">)</span><span class="op" id="7608802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608806">NewAlpha16</span><span class="op" id="7608816">(</span><span class="ident" id="7608817">Rect</span><span class="op" id="7608821">(</span><span class="num" id="7608822">0</span><span class="op" id="7608823">,</span>&nbsp;<span class="num" id="7608825">0</span><span class="op" id="7608826">,</span>&nbsp;<span class="num" id="7608828">10</span><span class="op" id="7608830">,</span>&nbsp;<span class="num" id="7608832">10</span><span class="op" id="7608834">)</span><span class="op" id="7608835">)</span><span class="op" id="7608836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608840">NewGray</span><span class="op" id="7608847">(</span><span class="ident" id="7608848">Rect</span><span class="op" id="7608852">(</span><span class="num" id="7608853">0</span><span class="op" id="7608854">,</span>&nbsp;<span class="num" id="7608856">0</span><span class="op" id="7608857">,</span>&nbsp;<span class="num" id="7608859">10</span><span class="op" id="7608861">,</span>&nbsp;<span class="num" id="7608863">10</span><span class="op" id="7608865">)</span><span class="op" id="7608866">)</span><span class="op" id="7608867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608871">NewGray16</span><span class="op" id="7608880">(</span><span class="ident" id="7608881">Rect</span><span class="op" id="7608885">(</span><span class="num" id="7608886">0</span><span class="op" id="7608887">,</span>&nbsp;<span class="num" id="7608889">0</span><span class="op" id="7608890">,</span>&nbsp;<span class="num" id="7608892">10</span><span class="op" id="7608894">,</span>&nbsp;<span class="num" id="7608896">10</span><span class="op" id="7608898">)</span><span class="op" id="7608899">)</span><span class="op" id="7608900">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608904">NewPaletted</span><span class="op" id="7608915">(</span><span class="ident" id="7608916">Rect</span><span class="op" id="7608920">(</span><span class="num" id="7608921">0</span><span class="op" id="7608922">,</span>&nbsp;<span class="num" id="7608924">0</span><span class="op" id="7608925">,</span>&nbsp;<span class="num" id="7608927">10</span><span class="op" id="7608929">,</span>&nbsp;<span class="num" id="7608931">10</span><span class="op" id="7608933">)</span><span class="op" id="7608934">,</span>&nbsp;<span class="ident" id="7608936">color</span><span class="op" id="7608941">.</span><span class="ident" id="7608942">Palette</span><span class="op" id="7608949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608954">Transparent</span><span class="op" id="7608965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608970">Opaque</span><span class="op" id="7608976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608980">}</span><span class="op" id="7608981">)</span><span class="op" id="7608982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608985">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608988">for</span>&nbsp;<span class="ident" id="7608992">_</span><span class="op" id="7608993">,</span>&nbsp;<span class="ident" id="7608995">m</span>&nbsp;<span class="op" id="7608997">:=</span>&nbsp;<span class="keyword" id="7609000">range</span>&nbsp;<span class="ident" id="7609006">testImage</span>&nbsp;<span class="op" id="7609016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609020">if</span>&nbsp;<span class="op" id="7609023">!</span><span class="ident" id="7609024">Rect</span><span class="op" id="7609028">(</span><span class="num" id="7609029">0</span><span class="op" id="7609030">,</span>&nbsp;<span class="num" id="7609032">0</span><span class="op" id="7609033">,</span>&nbsp;<span class="num" id="7609035">10</span><span class="op" id="7609037">,</span>&nbsp;<span class="num" id="7609039">10</span><span class="op" id="7609041">)</span><span class="op" id="7609042">.</span><span class="ident" id="7609043">Eq</span><span class="op" id="7609045">(</span><span class="ident" id="7609046">m</span><span class="op" id="7609047">.</span><span class="ident" id="7609048">Bounds</span><span class="op" id="7609054">(</span><span class="op" id="7609055">)</span><span class="op" id="7609056">)</span>&nbsp;<span class="op" id="7609058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609063">t</span><span class="op" id="7609064">.</span><span class="ident" id="7609065">Errorf</span><span class="op" id="7609071">(</span><span class="string" id="7609072">&#34;%T:&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7609100">,</span>&nbsp;<span class="ident" id="7609102">m</span><span class="op" id="7609103">,</span>&nbsp;<span class="ident" id="7609105">Rect</span><span class="op" id="7609109">(</span><span class="num" id="7609110">0</span><span class="op" id="7609111">,</span>&nbsp;<span class="num" id="7609113">0</span><span class="op" id="7609114">,</span>&nbsp;<span class="num" id="7609116">10</span><span class="op" id="7609118">,</span>&nbsp;<span class="num" id="7609120">10</span><span class="op" id="7609122">)</span><span class="op" id="7609123">,</span>&nbsp;<span class="ident" id="7609125">m</span><span class="op" id="7609126">.</span><span class="ident" id="7609127">Bounds</span><span class="op" id="7609133">(</span><span class="op" id="7609134">)</span><span class="op" id="7609135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609140">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609151">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609155">if</span>&nbsp;<span class="op" id="7609158">!</span><span class="ident" id="7609159">cmp</span><span class="op" id="7609162">(</span><span class="ident" id="7609163">t</span><span class="op" id="7609164">,</span>&nbsp;<span class="ident" id="7609166">m</span><span class="op" id="7609167">.</span><span class="ident" id="7609168">ColorModel</span><span class="op" id="7609178">(</span><span class="op" id="7609179">)</span><span class="op" id="7609180">,</span>&nbsp;<span class="ident" id="7609182">Transparent</span><span class="op" id="7609193">,</span>&nbsp;<span class="ident" id="7609195">m</span><span class="op" id="7609196">.</span><span class="ident" id="7609197">At</span><span class="op" id="7609199">(</span><span class="num" id="7609200">6</span><span class="op" id="7609201">,</span>&nbsp;<span class="num" id="7609203">3</span><span class="op" id="7609204">)</span><span class="op" id="7609205">)</span>&nbsp;<span class="op" id="7609207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609212">t</span><span class="op" id="7609213">.</span><span class="ident" id="7609214">Errorf</span><span class="op" id="7609220">(</span><span class="string" id="7609221">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7609263">,</span>&nbsp;<span class="ident" id="7609265">m</span><span class="op" id="7609266">,</span>&nbsp;<span class="ident" id="7609268">m</span><span class="op" id="7609269">.</span><span class="ident" id="7609270">At</span><span class="op" id="7609272">(</span><span class="num" id="7609273">6</span><span class="op" id="7609274">,</span>&nbsp;<span class="num" id="7609276">3</span><span class="op" id="7609277">)</span><span class="op" id="7609278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609283">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609298">m</span><span class="op" id="7609299">.</span><span class="ident" id="7609300">Set</span><span class="op" id="7609303">(</span><span class="num" id="7609304">6</span><span class="op" id="7609305">,</span>&nbsp;<span class="num" id="7609307">3</span><span class="op" id="7609308">,</span>&nbsp;<span class="ident" id="7609310">Opaque</span><span class="op" id="7609316">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609320">if</span>&nbsp;<span class="op" id="7609323">!</span><span class="ident" id="7609324">cmp</span><span class="op" id="7609327">(</span><span class="ident" id="7609328">t</span><span class="op" id="7609329">,</span>&nbsp;<span class="ident" id="7609331">m</span><span class="op" id="7609332">.</span><span class="ident" id="7609333">ColorModel</span><span class="op" id="7609343">(</span><span class="op" id="7609344">)</span><span class="op" id="7609345">,</span>&nbsp;<span class="ident" id="7609347">Opaque</span><span class="op" id="7609353">,</span>&nbsp;<span class="ident" id="7609355">m</span><span class="op" id="7609356">.</span><span class="ident" id="7609357">At</span><span class="op" id="7609359">(</span><span class="num" id="7609360">6</span><span class="op" id="7609361">,</span>&nbsp;<span class="num" id="7609363">3</span><span class="op" id="7609364">)</span><span class="op" id="7609365">)</span>&nbsp;<span class="op" id="7609367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609372">t</span><span class="op" id="7609373">.</span><span class="ident" id="7609374">Errorf</span><span class="op" id="7609380">(</span><span class="string" id="7609381">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7609427">,</span>&nbsp;<span class="ident" id="7609429">m</span><span class="op" id="7609430">,</span>&nbsp;<span class="ident" id="7609432">m</span><span class="op" id="7609433">.</span><span class="ident" id="7609434">At</span><span class="op" id="7609436">(</span><span class="num" id="7609437">6</span><span class="op" id="7609438">,</span>&nbsp;<span class="num" id="7609440">3</span><span class="op" id="7609441">)</span><span class="op" id="7609442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609447">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609462">if</span>&nbsp;<span class="op" id="7609465">!</span><span class="ident" id="7609466">m</span><span class="op" id="7609467">.</span><span class="ident" id="7609468">SubImage</span><span class="op" id="7609476">(</span><span class="ident" id="7609477">Rect</span><span class="op" id="7609481">(</span><span class="num" id="7609482">6</span><span class="op" id="7609483">,</span>&nbsp;<span class="num" id="7609485">3</span><span class="op" id="7609486">,</span>&nbsp;<span class="num" id="7609488">7</span><span class="op" id="7609489">,</span>&nbsp;<span class="num" id="7609491">4</span><span class="op" id="7609492">)</span><span class="op" id="7609493">)</span><span class="op" id="7609494">.</span><span class="op" id="7609495">(</span><span class="ident" id="7609496">image</span><span class="op" id="7609501">)</span><span class="op" id="7609502">.</span><span class="ident" id="7609503">Opaque</span><span class="op" id="7609509">(</span><span class="op" id="7609510">)</span>&nbsp;<span class="op" id="7609512">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609517">t</span><span class="op" id="7609518">.</span><span class="ident" id="7609519">Errorf</span><span class="op" id="7609525">(</span><span class="string" id="7609526">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3)&nbsp;was&nbsp;not&nbsp;opaque&#34;</span><span class="op" id="7609556">,</span>&nbsp;<span class="ident" id="7609558">m</span><span class="op" id="7609559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609564">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609579">m</span>&nbsp;<span class="op" id="7609581">=</span>&nbsp;<span class="ident" id="7609583">m</span><span class="op" id="7609584">.</span><span class="ident" id="7609585">SubImage</span><span class="op" id="7609593">(</span><span class="ident" id="7609594">Rect</span><span class="op" id="7609598">(</span><span class="num" id="7609599">3</span><span class="op" id="7609600">,</span>&nbsp;<span class="num" id="7609602">2</span><span class="op" id="7609603">,</span>&nbsp;<span class="num" id="7609605">9</span><span class="op" id="7609606">,</span>&nbsp;<span class="num" id="7609608">8</span><span class="op" id="7609609">)</span><span class="op" id="7609610">)</span><span class="op" id="7609611">.</span><span class="op" id="7609612">(</span><span class="ident" id="7609613">image</span><span class="op" id="7609618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609622">if</span>&nbsp;<span class="op" id="7609625">!</span><span class="ident" id="7609626">Rect</span><span class="op" id="7609630">(</span><span class="num" id="7609631">3</span><span class="op" id="7609632">,</span>&nbsp;<span class="num" id="7609634">2</span><span class="op" id="7609635">,</span>&nbsp;<span class="num" id="7609637">9</span><span class="op" id="7609638">,</span>&nbsp;<span class="num" id="7609640">8</span><span class="op" id="7609641">)</span><span class="op" id="7609642">.</span><span class="ident" id="7609643">Eq</span><span class="op" id="7609645">(</span><span class="ident" id="7609646">m</span><span class="op" id="7609647">.</span><span class="ident" id="7609648">Bounds</span><span class="op" id="7609654">(</span><span class="op" id="7609655">)</span><span class="op" id="7609656">)</span>&nbsp;<span class="op" id="7609658">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609663">t</span><span class="op" id="7609664">.</span><span class="ident" id="7609665">Errorf</span><span class="op" id="7609671">(</span><span class="string" id="7609672">&#34;%T:&nbsp;sub-image&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7609710">,</span>&nbsp;<span class="ident" id="7609712">m</span><span class="op" id="7609713">,</span>&nbsp;<span class="ident" id="7609715">Rect</span><span class="op" id="7609719">(</span><span class="num" id="7609720">3</span><span class="op" id="7609721">,</span>&nbsp;<span class="num" id="7609723">2</span><span class="op" id="7609724">,</span>&nbsp;<span class="num" id="7609726">9</span><span class="op" id="7609727">,</span>&nbsp;<span class="num" id="7609729">8</span><span class="op" id="7609730">)</span><span class="op" id="7609731">,</span>&nbsp;<span class="ident" id="7609733">m</span><span class="op" id="7609734">.</span><span class="ident" id="7609735">Bounds</span><span class="op" id="7609741">(</span><span class="op" id="7609742">)</span><span class="op" id="7609743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609748">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609763">if</span>&nbsp;<span class="op" id="7609766">!</span><span class="ident" id="7609767">cmp</span><span class="op" id="7609770">(</span><span class="ident" id="7609771">t</span><span class="op" id="7609772">,</span>&nbsp;<span class="ident" id="7609774">m</span><span class="op" id="7609775">.</span><span class="ident" id="7609776">ColorModel</span><span class="op" id="7609786">(</span><span class="op" id="7609787">)</span><span class="op" id="7609788">,</span>&nbsp;<span class="ident" id="7609790">Opaque</span><span class="op" id="7609796">,</span>&nbsp;<span class="ident" id="7609798">m</span><span class="op" id="7609799">.</span><span class="ident" id="7609800">At</span><span class="op" id="7609802">(</span><span class="num" id="7609803">6</span><span class="op" id="7609804">,</span>&nbsp;<span class="num" id="7609806">3</span><span class="op" id="7609807">)</span><span class="op" id="7609808">)</span>&nbsp;<span class="op" id="7609810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609815">t</span><span class="op" id="7609816">.</span><span class="ident" id="7609817">Errorf</span><span class="op" id="7609823">(</span><span class="string" id="7609824">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7609880">,</span>&nbsp;<span class="ident" id="7609882">m</span><span class="op" id="7609883">,</span>&nbsp;<span class="ident" id="7609885">m</span><span class="op" id="7609886">.</span><span class="ident" id="7609887">At</span><span class="op" id="7609889">(</span><span class="num" id="7609890">6</span><span class="op" id="7609891">,</span>&nbsp;<span class="num" id="7609893">3</span><span class="op" id="7609894">)</span><span class="op" id="7609895">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609900">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609915">if</span>&nbsp;<span class="op" id="7609918">!</span><span class="ident" id="7609919">cmp</span><span class="op" id="7609922">(</span><span class="ident" id="7609923">t</span><span class="op" id="7609924">,</span>&nbsp;<span class="ident" id="7609926">m</span><span class="op" id="7609927">.</span><span class="ident" id="7609928">ColorModel</span><span class="op" id="7609938">(</span><span class="op" id="7609939">)</span><span class="op" id="7609940">,</span>&nbsp;<span class="ident" id="7609942">Transparent</span><span class="op" id="7609953">,</span>&nbsp;<span class="ident" id="7609955">m</span><span class="op" id="7609956">.</span><span class="ident" id="7609957">At</span><span class="op" id="7609959">(</span><span class="num" id="7609960">3</span><span class="op" id="7609961">,</span>&nbsp;<span class="num" id="7609963">3</span><span class="op" id="7609964">)</span><span class="op" id="7609965">)</span>&nbsp;<span class="op" id="7609967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609972">t</span><span class="op" id="7609973">.</span><span class="ident" id="7609974">Errorf</span><span class="op" id="7609980">(</span><span class="string" id="7609981">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7610033">,</span>&nbsp;<span class="ident" id="7610035">m</span><span class="op" id="7610036">,</span>&nbsp;<span class="ident" id="7610038">m</span><span class="op" id="7610039">.</span><span class="ident" id="7610040">At</span><span class="op" id="7610042">(</span><span class="num" id="7610043">3</span><span class="op" id="7610044">,</span>&nbsp;<span class="num" id="7610046">3</span><span class="op" id="7610047">)</span><span class="op" id="7610048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610053">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610068">m</span><span class="op" id="7610069">.</span><span class="ident" id="7610070">Set</span><span class="op" id="7610073">(</span><span class="num" id="7610074">3</span><span class="op" id="7610075">,</span>&nbsp;<span class="num" id="7610077">3</span><span class="op" id="7610078">,</span>&nbsp;<span class="ident" id="7610080">Opaque</span><span class="op" id="7610086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610090">if</span>&nbsp;<span class="op" id="7610093">!</span><span class="ident" id="7610094">cmp</span><span class="op" id="7610097">(</span><span class="ident" id="7610098">t</span><span class="op" id="7610099">,</span>&nbsp;<span class="ident" id="7610101">m</span><span class="op" id="7610102">.</span><span class="ident" id="7610103">ColorModel</span><span class="op" id="7610113">(</span><span class="op" id="7610114">)</span><span class="op" id="7610115">,</span>&nbsp;<span class="ident" id="7610117">Opaque</span><span class="op" id="7610123">,</span>&nbsp;<span class="ident" id="7610125">m</span><span class="op" id="7610126">.</span><span class="ident" id="7610127">At</span><span class="op" id="7610129">(</span><span class="num" id="7610130">3</span><span class="op" id="7610131">,</span>&nbsp;<span class="num" id="7610133">3</span><span class="op" id="7610134">)</span><span class="op" id="7610135">)</span>&nbsp;<span class="op" id="7610137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610142">t</span><span class="op" id="7610143">.</span><span class="ident" id="7610144">Errorf</span><span class="op" id="7610150">(</span><span class="string" id="7610151">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7610207">,</span>&nbsp;<span class="ident" id="7610209">m</span><span class="op" id="7610210">,</span>&nbsp;<span class="ident" id="7610212">m</span><span class="op" id="7610213">.</span><span class="ident" id="7610214">At</span><span class="op" id="7610216">(</span><span class="num" id="7610217">3</span><span class="op" id="7610218">,</span>&nbsp;<span class="num" id="7610220">3</span><span class="op" id="7610221">)</span><span class="op" id="7610222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610227">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7610242">//&nbsp;Test&nbsp;that&nbsp;taking&nbsp;an&nbsp;empty&nbsp;sub-image&nbsp;starting&nbsp;at&nbsp;a&nbsp;corner&nbsp;does&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610320">m</span><span class="op" id="7610321">.</span><span class="ident" id="7610322">SubImage</span><span class="op" id="7610330">(</span><span class="ident" id="7610331">Rect</span><span class="op" id="7610335">(</span><span class="num" id="7610336">0</span><span class="op" id="7610337">,</span>&nbsp;<span class="num" id="7610339">0</span><span class="op" id="7610340">,</span>&nbsp;<span class="num" id="7610342">0</span><span class="op" id="7610343">,</span>&nbsp;<span class="num" id="7610345">0</span><span class="op" id="7610346">)</span><span class="op" id="7610347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610351">m</span><span class="op" id="7610352">.</span><span class="ident" id="7610353">SubImage</span><span class="op" id="7610361">(</span><span class="ident" id="7610362">Rect</span><span class="op" id="7610366">(</span><span class="num" id="7610367">10</span><span class="op" id="7610369">,</span>&nbsp;<span class="num" id="7610371">0</span><span class="op" id="7610372">,</span>&nbsp;<span class="num" id="7610374">10</span><span class="op" id="7610376">,</span>&nbsp;<span class="num" id="7610378">0</span><span class="op" id="7610379">)</span><span class="op" id="7610380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610384">m</span><span class="op" id="7610385">.</span><span class="ident" id="7610386">SubImage</span><span class="op" id="7610394">(</span><span class="ident" id="7610395">Rect</span><span class="op" id="7610399">(</span><span class="num" id="7610400">0</span><span class="op" id="7610401">,</span>&nbsp;<span class="num" id="7610403">10</span><span class="op" id="7610405">,</span>&nbsp;<span class="num" id="7610407">0</span><span class="op" id="7610408">,</span>&nbsp;<span class="num" id="7610410">10</span><span class="op" id="7610412">)</span><span class="op" id="7610413">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610417">m</span><span class="op" id="7610418">.</span><span class="ident" id="7610419">SubImage</span><span class="op" id="7610427">(</span><span class="ident" id="7610428">Rect</span><span class="op" id="7610432">(</span><span class="num" id="7610433">10</span><span class="op" id="7610435">,</span>&nbsp;<span class="num" id="7610437">10</span><span class="op" id="7610439">,</span>&nbsp;<span class="num" id="7610441">10</span><span class="op" id="7610443">,</span>&nbsp;<span class="num" id="7610445">10</span><span class="op" id="7610447">)</span><span class="op" id="7610448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610451">}</span><br>
<span class="lineno"></span><span class="op" id="7610453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610456">func</span>&nbsp;<span class="ident" id="7610461">Test16BitsPerColorChannel</span><span class="op" id="7610486">(</span><span class="ident" id="7610487">t</span>&nbsp;<span class="op" id="7610489">*</span><span class="ident" id="7610490">testing</span><span class="op" id="7610497">.</span><span class="ident" id="7610498">T</span><span class="op" id="7610499">)</span>&nbsp;<span class="op" id="7610501">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610504">testColorModel</span>&nbsp;<span class="op" id="7610519">:=</span>&nbsp;<span class="op" id="7610522">[</span><span class="op" id="7610523">]</span><span class="ident" id="7610524">color</span><span class="op" id="7610529">.</span><span class="ident" id="7610530">Model</span><span class="op" id="7610535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610539">color</span><span class="op" id="7610544">.</span><span class="ident" id="7610545">RGBA64Model</span><span class="op" id="7610556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610560">color</span><span class="op" id="7610565">.</span><span class="ident" id="7610566">NRGBA64Model</span><span class="op" id="7610578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610582">color</span><span class="op" id="7610587">.</span><span class="ident" id="7610588">Alpha16Model</span><span class="op" id="7610600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610604">color</span><span class="op" id="7610609">.</span><span class="ident" id="7610610">Gray16Model</span><span class="op" id="7610621">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610627">for</span>&nbsp;<span class="ident" id="7610631">_</span><span class="op" id="7610632">,</span>&nbsp;<span class="ident" id="7610634">cm</span>&nbsp;<span class="op" id="7610637">:=</span>&nbsp;<span class="keyword" id="7610640">range</span>&nbsp;<span class="ident" id="7610646">testColorModel</span>&nbsp;<span class="op" id="7610661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610665">c</span>&nbsp;<span class="op" id="7610667">:=</span>&nbsp;<span class="ident" id="7610670">cm</span><span class="op" id="7610672">.</span><span class="ident" id="7610673">Convert</span><span class="op" id="7610680">(</span><span class="ident" id="7610681">color</span><span class="op" id="7610686">.</span><span class="ident" id="7610687">RGBA64</span><span class="op" id="7610693">{</span><span class="num" id="7610694">0x1234</span><span class="op" id="7610700">,</span>&nbsp;<span class="num" id="7610702">0x1234</span><span class="op" id="7610708">,</span>&nbsp;<span class="num" id="7610710">0x1234</span><span class="op" id="7610716">,</span>&nbsp;<span class="num" id="7610718">0x1234</span><span class="op" id="7610724">}</span><span class="op" id="7610725">)</span>&nbsp;<span class="comment" id="7610727">//&nbsp;Premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610753">r</span><span class="op" id="7610754">,</span>&nbsp;<span class="ident" id="7610756">_</span><span class="op" id="7610757">,</span>&nbsp;<span class="ident" id="7610759">_</span><span class="op" id="7610760">,</span>&nbsp;<span class="ident" id="7610762">_</span>&nbsp;<span class="op" id="7610764">:=</span>&nbsp;<span class="ident" id="7610767">c</span><span class="op" id="7610768">.</span><span class="ident" id="7610769">RGBA</span><span class="op" id="7610773">(</span><span class="op" id="7610774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610778">if</span>&nbsp;<span class="ident" id="7610781">r</span>&nbsp;<span class="op" id="7610783">!=</span>&nbsp;<span class="num" id="7610786">0x1234</span>&nbsp;<span class="op" id="7610793">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610798">t</span><span class="op" id="7610799">.</span><span class="ident" id="7610800">Errorf</span><span class="op" id="7610806">(</span><span class="string" id="7610807">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="7610845">,</span>&nbsp;<span class="ident" id="7610847">c</span><span class="op" id="7610848">,</span>&nbsp;<span class="num" id="7610850">0x1234</span><span class="op" id="7610856">,</span>&nbsp;<span class="ident" id="7610858">r</span><span class="op" id="7610859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610864">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610881">testImage</span>&nbsp;<span class="op" id="7610891">:=</span>&nbsp;<span class="op" id="7610894">[</span><span class="op" id="7610895">]</span><span class="ident" id="7610896">image</span><span class="op" id="7610901">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610905">NewRGBA64</span><span class="op" id="7610914">(</span><span class="ident" id="7610915">Rect</span><span class="op" id="7610919">(</span><span class="num" id="7610920">0</span><span class="op" id="7610921">,</span>&nbsp;<span class="num" id="7610923">0</span><span class="op" id="7610924">,</span>&nbsp;<span class="num" id="7610926">10</span><span class="op" id="7610928">,</span>&nbsp;<span class="num" id="7610930">10</span><span class="op" id="7610932">)</span><span class="op" id="7610933">)</span><span class="op" id="7610934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610938">NewNRGBA64</span><span class="op" id="7610948">(</span><span class="ident" id="7610949">Rect</span><span class="op" id="7610953">(</span><span class="num" id="7610954">0</span><span class="op" id="7610955">,</span>&nbsp;<span class="num" id="7610957">0</span><span class="op" id="7610958">,</span>&nbsp;<span class="num" id="7610960">10</span><span class="op" id="7610962">,</span>&nbsp;<span class="num" id="7610964">10</span><span class="op" id="7610966">)</span><span class="op" id="7610967">)</span><span class="op" id="7610968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610972">NewAlpha16</span><span class="op" id="7610982">(</span><span class="ident" id="7610983">Rect</span><span class="op" id="7610987">(</span><span class="num" id="7610988">0</span><span class="op" id="7610989">,</span>&nbsp;<span class="num" id="7610991">0</span><span class="op" id="7610992">,</span>&nbsp;<span class="num" id="7610994">10</span><span class="op" id="7610996">,</span>&nbsp;<span class="num" id="7610998">10</span><span class="op" id="7611000">)</span><span class="op" id="7611001">)</span><span class="op" id="7611002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611006">NewGray16</span><span class="op" id="7611015">(</span><span class="ident" id="7611016">Rect</span><span class="op" id="7611020">(</span><span class="num" id="7611021">0</span><span class="op" id="7611022">,</span>&nbsp;<span class="num" id="7611024">0</span><span class="op" id="7611025">,</span>&nbsp;<span class="num" id="7611027">10</span><span class="op" id="7611029">,</span>&nbsp;<span class="num" id="7611031">10</span><span class="op" id="7611033">)</span><span class="op" id="7611034">)</span><span class="op" id="7611035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611038">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611041">for</span>&nbsp;<span class="ident" id="7611045">_</span><span class="op" id="7611046">,</span>&nbsp;<span class="ident" id="7611048">m</span>&nbsp;<span class="op" id="7611050">:=</span>&nbsp;<span class="keyword" id="7611053">range</span>&nbsp;<span class="ident" id="7611059">testImage</span>&nbsp;<span class="op" id="7611069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611073">m</span><span class="op" id="7611074">.</span><span class="ident" id="7611075">Set</span><span class="op" id="7611078">(</span><span class="num" id="7611079">1</span><span class="op" id="7611080">,</span>&nbsp;<span class="num" id="7611082">2</span><span class="op" id="7611083">,</span>&nbsp;<span class="ident" id="7611085">color</span><span class="op" id="7611090">.</span><span class="ident" id="7611091">NRGBA64</span><span class="op" id="7611098">{</span><span class="num" id="7611099">0xffff</span><span class="op" id="7611105">,</span>&nbsp;<span class="num" id="7611107">0xffff</span><span class="op" id="7611113">,</span>&nbsp;<span class="num" id="7611115">0xffff</span><span class="op" id="7611121">,</span>&nbsp;<span class="num" id="7611123">0x1357</span><span class="op" id="7611129">}</span><span class="op" id="7611130">)</span>&nbsp;<span class="comment" id="7611132">//&nbsp;Non-premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611162">r</span><span class="op" id="7611163">,</span>&nbsp;<span class="ident" id="7611165">_</span><span class="op" id="7611166">,</span>&nbsp;<span class="ident" id="7611168">_</span><span class="op" id="7611169">,</span>&nbsp;<span class="ident" id="7611171">_</span>&nbsp;<span class="op" id="7611173">:=</span>&nbsp;<span class="ident" id="7611176">m</span><span class="op" id="7611177">.</span><span class="ident" id="7611178">At</span><span class="op" id="7611180">(</span><span class="num" id="7611181">1</span><span class="op" id="7611182">,</span>&nbsp;<span class="num" id="7611184">2</span><span class="op" id="7611185">)</span><span class="op" id="7611186">.</span><span class="ident" id="7611187">RGBA</span><span class="op" id="7611191">(</span><span class="op" id="7611192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611196">if</span>&nbsp;<span class="ident" id="7611199">r</span>&nbsp;<span class="op" id="7611201">!=</span>&nbsp;<span class="num" id="7611204">0x1357</span>&nbsp;<span class="op" id="7611211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611216">t</span><span class="op" id="7611217">.</span><span class="ident" id="7611218">Errorf</span><span class="op" id="7611224">(</span><span class="string" id="7611225">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="7611263">,</span>&nbsp;<span class="ident" id="7611265">m</span><span class="op" id="7611266">,</span>&nbsp;<span class="num" id="7611268">0x1357</span><span class="op" id="7611274">,</span>&nbsp;<span class="ident" id="7611276">r</span><span class="op" id="7611277">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611282">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611296">}</span><br>
<span class="lineno"></span><span class="op" id="7611298">}</span>
</div>
</body>
</html>
