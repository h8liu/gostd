<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5271898">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5271953">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5272007">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5272058">package</span>&nbsp;<span class="ident" id="5272066">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5272073">//&nbsp;RGBToYCbCr&nbsp;converts&nbsp;an&nbsp;RGB&nbsp;triple&nbsp;to&nbsp;a&nbsp;Y&#39;CbCr&nbsp;triple.</span><br>
<span class="lineno"></span><span class="keyword" id="5272130">func</span>&nbsp;<span class="ident" id="5272135">RGBToYCbCr</span><span class="op" id="5272145">(</span><span class="ident" id="5272146">r</span><span class="op" id="5272147">,</span>&nbsp;<span class="ident" id="5272149">g</span><span class="op" id="5272150">,</span>&nbsp;<span class="ident" id="5272152">b</span>&nbsp;<span class="builtintype" id="5272154">uint8</span><span class="op" id="5272159">)</span>&nbsp;<span class="op" id="5272161">(</span><span class="builtintype" id="5272162">uint8</span><span class="op" id="5272167">,</span>&nbsp;<span class="builtintype" id="5272169">uint8</span><span class="op" id="5272174">,</span>&nbsp;<span class="builtintype" id="5272176">uint8</span><span class="op" id="5272181">)</span>&nbsp;<span class="op" id="5272183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272186">//&nbsp;The&nbsp;JFIF&nbsp;specification&nbsp;says:</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272219">//&nbsp;&nbsp;&nbsp;&nbspY&#39;&nbsp;=&nbsp;&nbsp;0.2990*R&nbsp;+&nbsp;0.5870*G&nbsp;+&nbsp;0.1140*B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272260">//&nbsp;&nbsp;&nbsp;&nbspCb&nbsp;=&nbsp;-0.1687*R&nbsp;-&nbsp;0.3313*G&nbsp;+&nbsp;0.5000*B&nbsp;+&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272307">//&nbsp;&nbsp;&nbsp;&nbspCr&nbsp;=&nbsp;&nbsp;0.5000*R&nbsp;-&nbsp;0.4187*G&nbsp;-&nbsp;0.0813*B&nbsp;+&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272354">//&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf&nbsp;says&nbsp;Y&nbsp;but&nbsp;means&nbsp;Y&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272421">r1</span>&nbsp;<span class="op" id="5272424">:=</span>&nbsp;<span class="builtintype" id="5272427">int</span><span class="op" id="5272430">(</span><span class="ident" id="5272431"><a href="/image/color/ycbcr.go.html#5272146">r</a></span><span class="op" id="5272432">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272435">g1</span>&nbsp;<span class="op" id="5272438">:=</span>&nbsp;<span class="builtintype" id="5272441">int</span><span class="op" id="5272444">(</span><span class="ident" id="5272445"><a href="/image/color/ycbcr.go.html#5272149">g</a></span><span class="op" id="5272446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272449">b1</span>&nbsp;<span class="op" id="5272452">:=</span>&nbsp;<span class="builtintype" id="5272455">int</span><span class="op" id="5272458">(</span><span class="ident" id="5272459"><a href="/image/color/ycbcr.go.html#5272152">b</a></span><span class="op" id="5272460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272463">yy</span>&nbsp;<span class="op" id="5272466">:=</span>&nbsp;<span class="op" id="5272469">(</span><span class="num" id="5272470">19595</span><span class="op" id="5272475">*</span><span class="ident" id="5272476"><a href="/image/color/ycbcr.go.html#5272421">r1</a></span>&nbsp;<span class="op" id="5272479">+</span>&nbsp;<span class="num" id="5272481">38470</span><span class="op" id="5272486">*</span><span class="ident" id="5272487"><a href="/image/color/ycbcr.go.html#5272435">g1</a></span>&nbsp;<span class="op" id="5272490">+</span>&nbsp;<span class="num" id="5272492">7471</span><span class="op" id="5272496">*</span><span class="ident" id="5272497"><a href="/image/color/ycbcr.go.html#5272449">b1</a></span>&nbsp;<span class="op" id="5272500">+</span>&nbsp;<span class="num" id="5272502">1</span><span class="op" id="5272503">&lt;&lt;</span><span class="num" id="5272505">15</span><span class="op" id="5272507">)</span>&nbsp;<span class="op" id="5272509">&gt;&gt;</span>&nbsp;<span class="num" id="5272512">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272516">cb</span>&nbsp;<span class="op" id="5272519">:=</span>&nbsp;<span class="op" id="5272522">(</span><span class="op" id="5272523">-</span><span class="num" id="5272524">11056</span><span class="op" id="5272529">*</span><span class="ident" id="5272530"><a href="/image/color/ycbcr.go.html#5272421">r1</a></span>&nbsp;<span class="op" id="5272533">-</span>&nbsp;<span class="num" id="5272535">21712</span><span class="op" id="5272540">*</span><span class="ident" id="5272541"><a href="/image/color/ycbcr.go.html#5272435">g1</a></span>&nbsp;<span class="op" id="5272544">+</span>&nbsp;<span class="num" id="5272546">32768</span><span class="op" id="5272551">*</span><span class="ident" id="5272552"><a href="/image/color/ycbcr.go.html#5272449">b1</a></span>&nbsp;<span class="op" id="5272555">+</span>&nbsp;<span class="num" id="5272557">257</span><span class="op" id="5272560">&lt;&lt;</span><span class="num" id="5272562">15</span><span class="op" id="5272564">)</span>&nbsp;<span class="op" id="5272566">&gt;&gt;</span>&nbsp;<span class="num" id="5272569">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272573">cr</span>&nbsp;<span class="op" id="5272576">:=</span>&nbsp;<span class="op" id="5272579">(</span><span class="num" id="5272580">32768</span><span class="op" id="5272585">*</span><span class="ident" id="5272586"><a href="/image/color/ycbcr.go.html#5272421">r1</a></span>&nbsp;<span class="op" id="5272589">-</span>&nbsp;<span class="num" id="5272591">27440</span><span class="op" id="5272596">*</span><span class="ident" id="5272597"><a href="/image/color/ycbcr.go.html#5272435">g1</a></span>&nbsp;<span class="op" id="5272600">-</span>&nbsp;<span class="num" id="5272602">5328</span><span class="op" id="5272606">*</span><span class="ident" id="5272607"><a href="/image/color/ycbcr.go.html#5272449">b1</a></span>&nbsp;<span class="op" id="5272610">+</span>&nbsp;<span class="num" id="5272612">257</span><span class="op" id="5272615">&lt;&lt;</span><span class="num" id="5272617">15</span><span class="op" id="5272619">)</span>&nbsp;<span class="op" id="5272621">&gt;&gt;</span>&nbsp;<span class="num" id="5272624">16</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272628">if</span>&nbsp;<span class="ident" id="5272631"><a href="/image/color/ycbcr.go.html#5272463">yy</a></span>&nbsp;<span class="op" id="5272634">&lt;</span>&nbsp;<span class="num" id="5272636">0</span>&nbsp;<span class="op" id="5272638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272642"><a href="/image/color/ycbcr.go.html#5272463">yy</a></span>&nbsp;<span class="op" id="5272645">=</span>&nbsp;<span class="num" id="5272647">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272650">}</span>&nbsp;<span class="keyword" id="5272652">else</span>&nbsp;<span class="keyword" id="5272657">if</span>&nbsp;<span class="ident" id="5272660"><a href="/image/color/ycbcr.go.html#5272463">yy</a></span>&nbsp;<span class="op" id="5272663">&gt;</span>&nbsp;<span class="num" id="5272665">255</span>&nbsp;<span class="op" id="5272669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272673"><a href="/image/color/ycbcr.go.html#5272463">yy</a></span>&nbsp;<span class="op" id="5272676">=</span>&nbsp;<span class="num" id="5272678">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272683">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272686">if</span>&nbsp;<span class="ident" id="5272689"><a href="/image/color/ycbcr.go.html#5272516">cb</a></span>&nbsp;<span class="op" id="5272692">&lt;</span>&nbsp;<span class="num" id="5272694">0</span>&nbsp;<span class="op" id="5272696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272700"><a href="/image/color/ycbcr.go.html#5272516">cb</a></span>&nbsp;<span class="op" id="5272703">=</span>&nbsp;<span class="num" id="5272705">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272708">}</span>&nbsp;<span class="keyword" id="5272710">else</span>&nbsp;<span class="keyword" id="5272715">if</span>&nbsp;<span class="ident" id="5272718"><a href="/image/color/ycbcr.go.html#5272516">cb</a></span>&nbsp;<span class="op" id="5272721">&gt;</span>&nbsp;<span class="num" id="5272723">255</span>&nbsp;<span class="op" id="5272727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272731"><a href="/image/color/ycbcr.go.html#5272516">cb</a></span>&nbsp;<span class="op" id="5272734">=</span>&nbsp;<span class="num" id="5272736">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272741">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272744">if</span>&nbsp;<span class="ident" id="5272747"><a href="/image/color/ycbcr.go.html#5272573">cr</a></span>&nbsp;<span class="op" id="5272750">&lt;</span>&nbsp;<span class="num" id="5272752">0</span>&nbsp;<span class="op" id="5272754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272758"><a href="/image/color/ycbcr.go.html#5272573">cr</a></span>&nbsp;<span class="op" id="5272761">=</span>&nbsp;<span class="num" id="5272763">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272766">}</span>&nbsp;<span class="keyword" id="5272768">else</span>&nbsp;<span class="keyword" id="5272773">if</span>&nbsp;<span class="ident" id="5272776"><a href="/image/color/ycbcr.go.html#5272573">cr</a></span>&nbsp;<span class="op" id="5272779">&gt;</span>&nbsp;<span class="num" id="5272781">255</span>&nbsp;<span class="op" id="5272785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272789"><a href="/image/color/ycbcr.go.html#5272573">cr</a></span>&nbsp;<span class="op" id="5272792">=</span>&nbsp;<span class="num" id="5272794">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272799">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272802">return</span>&nbsp;<span class="builtintype" id="5272809">uint8</span><span class="op" id="5272814">(</span><span class="ident" id="5272815"><a href="/image/color/ycbcr.go.html#5272463">yy</a></span><span class="op" id="5272817">)</span><span class="op" id="5272818">,</span>&nbsp;<span class="builtintype" id="5272820">uint8</span><span class="op" id="5272825">(</span><span class="ident" id="5272826"><a href="/image/color/ycbcr.go.html#5272516">cb</a></span><span class="op" id="5272828">)</span><span class="op" id="5272829">,</span>&nbsp;<span class="builtintype" id="5272831">uint8</span><span class="op" id="5272836">(</span><span class="ident" id="5272837"><a href="/image/color/ycbcr.go.html#5272573">cr</a></span><span class="op" id="5272839">)</span><br>
<span class="lineno"></span><span class="op" id="5272841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5272844">//&nbsp;YCbCrToRGB&nbsp;converts&nbsp;a&nbsp;Y&#39;CbCr&nbsp;triple&nbsp;to&nbsp;an&nbsp;RGB&nbsp;triple.</span><br>
<span class="lineno"></span><span class="keyword" id="5272901">func</span>&nbsp;<span class="ident" id="5272906">YCbCrToRGB</span><span class="op" id="5272916">(</span><span class="ident" id="5272917">y</span><span class="op" id="5272918">,</span>&nbsp;<span class="ident" id="5272920">cb</span><span class="op" id="5272922">,</span>&nbsp;<span class="ident" id="5272924">cr</span>&nbsp;<span class="builtintype" id="5272927">uint8</span><span class="op" id="5272932">)</span>&nbsp;<span class="op" id="5272934">(</span><span class="builtintype" id="5272935">uint8</span><span class="op" id="5272940">,</span>&nbsp;<span class="builtintype" id="5272942">uint8</span><span class="op" id="5272947">,</span>&nbsp;<span class="builtintype" id="5272949">uint8</span><span class="op" id="5272954">)</span>&nbsp;<span class="op" id="5272956">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272959">//&nbsp;The&nbsp;JFIF&nbsp;specification&nbsp;says:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272992">//&nbsp;&nbsp;&nbsp;&nbspR&nbsp;=&nbsp;Y&#39;&nbsp;+&nbsp;1.40200*(Cr-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5273022">//&nbsp;&nbsp;&nbsp;&nbspG&nbsp;=&nbsp;Y&#39;&nbsp;-&nbsp;0.34414*(Cb-128)&nbsp;-&nbsp;0.71414*(Cr-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5273071">//&nbsp;&nbsp;&nbsp;&nbspB&nbsp;=&nbsp;Y&#39;&nbsp;+&nbsp;1.77200*(Cb-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5273101">//&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf&nbsp;says&nbsp;Y&nbsp;but&nbsp;means&nbsp;Y&#39;.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273168">yy1</span>&nbsp;<span class="op" id="5273172">:=</span>&nbsp;<span class="builtintype" id="5273175">int</span><span class="op" id="5273178">(</span><span class="ident" id="5273179"><a href="/image/color/ycbcr.go.html#5272917">y</a></span><span class="op" id="5273180">)</span><span class="op" id="5273181">&lt;&lt;</span><span class="num" id="5273183">16</span>&nbsp;<span class="op" id="5273186">+</span>&nbsp;<span class="num" id="5273188">1</span><span class="op" id="5273189">&lt;&lt;</span><span class="num" id="5273191">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273195">cb1</span>&nbsp;<span class="op" id="5273199">:=</span>&nbsp;<span class="builtintype" id="5273202">int</span><span class="op" id="5273205">(</span><span class="ident" id="5273206"><a href="/image/color/ycbcr.go.html#5272920">cb</a></span><span class="op" id="5273208">)</span>&nbsp;<span class="op" id="5273210">-</span>&nbsp;<span class="num" id="5273212">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273217">cr1</span>&nbsp;<span class="op" id="5273221">:=</span>&nbsp;<span class="builtintype" id="5273224">int</span><span class="op" id="5273227">(</span><span class="ident" id="5273228"><a href="/image/color/ycbcr.go.html#5272924">cr</a></span><span class="op" id="5273230">)</span>&nbsp;<span class="op" id="5273232">-</span>&nbsp;<span class="num" id="5273234">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273239">r</span>&nbsp;<span class="op" id="5273241">:=</span>&nbsp;<span class="op" id="5273244">(</span><span class="ident" id="5273245"><a href="/image/color/ycbcr.go.html#5273168">yy1</a></span>&nbsp;<span class="op" id="5273249">+</span>&nbsp;<span class="num" id="5273251">91881</span><span class="op" id="5273256">*</span><span class="ident" id="5273257"><a href="/image/color/ycbcr.go.html#5273217">cr1</a></span><span class="op" id="5273260">)</span>&nbsp;<span class="op" id="5273262">&gt;&gt;</span>&nbsp;<span class="num" id="5273265">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273269">g</span>&nbsp;<span class="op" id="5273271">:=</span>&nbsp;<span class="op" id="5273274">(</span><span class="ident" id="5273275"><a href="/image/color/ycbcr.go.html#5273168">yy1</a></span>&nbsp;<span class="op" id="5273279">-</span>&nbsp;<span class="num" id="5273281">22554</span><span class="op" id="5273286">*</span><span class="ident" id="5273287"><a href="/image/color/ycbcr.go.html#5273195">cb1</a></span>&nbsp;<span class="op" id="5273291">-</span>&nbsp;<span class="num" id="5273293">46802</span><span class="op" id="5273298">*</span><span class="ident" id="5273299"><a href="/image/color/ycbcr.go.html#5273217">cr1</a></span><span class="op" id="5273302">)</span>&nbsp;<span class="op" id="5273304">&gt;&gt;</span>&nbsp;<span class="num" id="5273307">16</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273311">b</span>&nbsp;<span class="op" id="5273313">:=</span>&nbsp;<span class="op" id="5273316">(</span><span class="ident" id="5273317"><a href="/image/color/ycbcr.go.html#5273168">yy1</a></span>&nbsp;<span class="op" id="5273321">+</span>&nbsp;<span class="num" id="5273323">116130</span><span class="op" id="5273329">*</span><span class="ident" id="5273330"><a href="/image/color/ycbcr.go.html#5273195">cb1</a></span><span class="op" id="5273333">)</span>&nbsp;<span class="op" id="5273335">&gt;&gt;</span>&nbsp;<span class="num" id="5273338">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273342">if</span>&nbsp;<span class="ident" id="5273345"><a href="/image/color/ycbcr.go.html#5273239">r</a></span>&nbsp;<span class="op" id="5273347">&lt;</span>&nbsp;<span class="num" id="5273349">0</span>&nbsp;<span class="op" id="5273351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273355"><a href="/image/color/ycbcr.go.html#5273239">r</a></span>&nbsp;<span class="op" id="5273357">=</span>&nbsp;<span class="num" id="5273359">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273362">}</span>&nbsp;<span class="keyword" id="5273364">else</span>&nbsp;<span class="keyword" id="5273369">if</span>&nbsp;<span class="ident" id="5273372"><a href="/image/color/ycbcr.go.html#5273239">r</a></span>&nbsp;<span class="op" id="5273374">&gt;</span>&nbsp;<span class="num" id="5273376">255</span>&nbsp;<span class="op" id="5273380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273384"><a href="/image/color/ycbcr.go.html#5273239">r</a></span>&nbsp;<span class="op" id="5273386">=</span>&nbsp;<span class="num" id="5273388">255</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273396">if</span>&nbsp;<span class="ident" id="5273399"><a href="/image/color/ycbcr.go.html#5273269">g</a></span>&nbsp;<span class="op" id="5273401">&lt;</span>&nbsp;<span class="num" id="5273403">0</span>&nbsp;<span class="op" id="5273405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273409"><a href="/image/color/ycbcr.go.html#5273269">g</a></span>&nbsp;<span class="op" id="5273411">=</span>&nbsp;<span class="num" id="5273413">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273416">}</span>&nbsp;<span class="keyword" id="5273418">else</span>&nbsp;<span class="keyword" id="5273423">if</span>&nbsp;<span class="ident" id="5273426"><a href="/image/color/ycbcr.go.html#5273269">g</a></span>&nbsp;<span class="op" id="5273428">&gt;</span>&nbsp;<span class="num" id="5273430">255</span>&nbsp;<span class="op" id="5273434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273438"><a href="/image/color/ycbcr.go.html#5273269">g</a></span>&nbsp;<span class="op" id="5273440">=</span>&nbsp;<span class="num" id="5273442">255</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273450">if</span>&nbsp;<span class="ident" id="5273453"><a href="/image/color/ycbcr.go.html#5273311">b</a></span>&nbsp;<span class="op" id="5273455">&lt;</span>&nbsp;<span class="num" id="5273457">0</span>&nbsp;<span class="op" id="5273459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273463"><a href="/image/color/ycbcr.go.html#5273311">b</a></span>&nbsp;<span class="op" id="5273465">=</span>&nbsp;<span class="num" id="5273467">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273470">}</span>&nbsp;<span class="keyword" id="5273472">else</span>&nbsp;<span class="keyword" id="5273477">if</span>&nbsp;<span class="ident" id="5273480"><a href="/image/color/ycbcr.go.html#5273311">b</a></span>&nbsp;<span class="op" id="5273482">&gt;</span>&nbsp;<span class="num" id="5273484">255</span>&nbsp;<span class="op" id="5273488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273492"><a href="/image/color/ycbcr.go.html#5273311">b</a></span>&nbsp;<span class="op" id="5273494">=</span>&nbsp;<span class="num" id="5273496">255</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273504">return</span>&nbsp;<span class="builtintype" id="5273511">uint8</span><span class="op" id="5273516">(</span><span class="ident" id="5273517"><a href="/image/color/ycbcr.go.html#5273239">r</a></span><span class="op" id="5273518">)</span><span class="op" id="5273519">,</span>&nbsp;<span class="builtintype" id="5273521">uint8</span><span class="op" id="5273526">(</span><span class="ident" id="5273527"><a href="/image/color/ycbcr.go.html#5273269">g</a></span><span class="op" id="5273528">)</span><span class="op" id="5273529">,</span>&nbsp;<span class="builtintype" id="5273531">uint8</span><span class="op" id="5273536">(</span><span class="ident" id="5273537"><a href="/image/color/ycbcr.go.html#5273311">b</a></span><span class="op" id="5273538">)</span><br>
<span class="lineno"></span><span class="op" id="5273540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5273543">//&nbsp;YCbCr&nbsp;represents&nbsp;a&nbsp;fully&nbsp;opaque&nbsp;24-bit&nbsp;Y&#39;CbCr&nbsp;color,&nbsp;having&nbsp;8&nbsp;bits&nbsp;each&nbsp;for</span><br>
<span class="lineno">70</span><span class="comment" id="5273622">//&nbsp;one&nbsp;luma&nbsp;and&nbsp;two&nbsp;chroma&nbsp;components.</span><br>
<span class="lineno"></span><span class="comment" id="5273661">//</span><br>
<span class="lineno"></span><span class="comment" id="5273664">//&nbsp;JPEG,&nbsp;VP8,&nbsp;the&nbsp;MPEG&nbsp;family&nbsp;and&nbsp;other&nbsp;codecs&nbsp;use&nbsp;this&nbsp;color&nbsp;model.&nbsp;Such</span><br>
<span class="lineno"></span><span class="comment" id="5273738">//&nbsp;codecs&nbsp;often&nbsp;use&nbsp;the&nbsp;terms&nbsp;YUV&nbsp;and&nbsp;Y&#39;CbCr&nbsp;interchangeably,&nbsp;but&nbsp;strictly</span><br>
<span class="lineno"></span><span class="comment" id="5273813">//&nbsp;speaking,&nbsp;the&nbsp;term&nbsp;YUV&nbsp;applies&nbsp;only&nbsp;to&nbsp;analog&nbsp;video&nbsp;signals,&nbsp;and&nbsp;Y&#39;&nbsp;(luma)</span><br>
<span class="lineno">75</span><span class="comment" id="5273891">//&nbsp;is&nbsp;Y&nbsp;(luminance)&nbsp;after&nbsp;applying&nbsp;gamma&nbsp;correction.</span><br>
<span class="lineno"></span><span class="comment" id="5273944">//</span><br>
<span class="lineno"></span><span class="comment" id="5273947">//&nbsp;Conversion&nbsp;between&nbsp;RGB&nbsp;and&nbsp;Y&#39;CbCr&nbsp;is&nbsp;lossy&nbsp;and&nbsp;there&nbsp;are&nbsp;multiple,&nbsp;slightly</span><br>
<span class="lineno"></span><span class="comment" id="5274026">//&nbsp;different&nbsp;formulae&nbsp;for&nbsp;converting&nbsp;between&nbsp;the&nbsp;two.&nbsp;This&nbsp;package&nbsp;follows</span><br>
<span class="lineno"></span><span class="comment" id="5274101">//&nbsp;the&nbsp;JFIF&nbsp;specification&nbsp;at&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf.</span><br>
<span class="lineno">80</span><span class="keyword" id="5274173">type</span>&nbsp;<span class="ident" id="5274178">YCbCr</span>&nbsp;<span class="keyword" id="5274184">struct</span>&nbsp;<span class="op" id="5274191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274194">Y</span><span class="op" id="5274195">,</span>&nbsp;<span class="ident" id="5274197">Cb</span><span class="op" id="5274199">,</span>&nbsp;<span class="ident" id="5274201">Cr</span>&nbsp;<span class="builtintype" id="5274204">uint8</span><br>
<span class="lineno"></span><span class="op" id="5274210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5274213">func</span>&nbsp;<span class="op" id="5274218">(</span><span class="ident" id="5274219">c</span>&nbsp;<span class="ident" id="5274221"><a href="/image/color/ycbcr.go.html#5274178">YCbCr</a></span><span class="op" id="5274226">)</span>&nbsp;<span class="ident" id="5274228">RGBA</span><span class="op" id="5274232">(</span><span class="op" id="5274233">)</span>&nbsp;<span class="op" id="5274235">(</span><span class="builtintype" id="5274236">uint32</span><span class="op" id="5274242">,</span>&nbsp;<span class="builtintype" id="5274244">uint32</span><span class="op" id="5274250">,</span>&nbsp;<span class="builtintype" id="5274252">uint32</span><span class="op" id="5274258">,</span>&nbsp;<span class="builtintype" id="5274260">uint32</span><span class="op" id="5274266">)</span>&nbsp;<span class="op" id="5274268">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274271">r</span><span class="op" id="5274272">,</span>&nbsp;<span class="ident" id="5274274">g</span><span class="op" id="5274275">,</span>&nbsp;<span class="ident" id="5274277">b</span>&nbsp;<span class="op" id="5274279">:=</span>&nbsp;<span class="ident" id="5274282"><a href="/image/color/ycbcr.go.html#5272906">YCbCrToRGB</a></span><span class="op" id="5274292">(</span><span class="ident" id="5274293"><a href="/image/color/ycbcr.go.html#5274219">c</a></span><span class="op" id="5274294">.</span><span class="ident" id="5274295">Y</span><span class="op" id="5274296">,</span>&nbsp;<span class="ident" id="5274298"><a href="/image/color/ycbcr.go.html#5274219">c</a></span><span class="op" id="5274299">.</span><span class="ident" id="5274300">Cb</span><span class="op" id="5274302">,</span>&nbsp;<span class="ident" id="5274304"><a href="/image/color/ycbcr.go.html#5274219">c</a></span><span class="op" id="5274305">.</span><span class="ident" id="5274306">Cr</span><span class="op" id="5274308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274311">return</span>&nbsp;<span class="builtintype" id="5274318">uint32</span><span class="op" id="5274324">(</span><span class="ident" id="5274325"><a href="/image/color/ycbcr.go.html#5274271">r</a></span><span class="op" id="5274326">)</span>&nbsp;<span class="op" id="5274328">*</span>&nbsp;<span class="num" id="5274330">0x101</span><span class="op" id="5274335">,</span>&nbsp;<span class="builtintype" id="5274337">uint32</span><span class="op" id="5274343">(</span><span class="ident" id="5274344"><a href="/image/color/ycbcr.go.html#5274274">g</a></span><span class="op" id="5274345">)</span>&nbsp;<span class="op" id="5274347">*</span>&nbsp;<span class="num" id="5274349">0x101</span><span class="op" id="5274354">,</span>&nbsp;<span class="builtintype" id="5274356">uint32</span><span class="op" id="5274362">(</span><span class="ident" id="5274363"><a href="/image/color/ycbcr.go.html#5274277">b</a></span><span class="op" id="5274364">)</span>&nbsp;<span class="op" id="5274366">*</span>&nbsp;<span class="num" id="5274368">0x101</span><span class="op" id="5274373">,</span>&nbsp;<span class="num" id="5274375">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5274382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5274385">//&nbsp;YCbCrModel&nbsp;is&nbsp;the&nbsp;Model&nbsp;for&nbsp;Y&#39;CbCr&nbsp;colors.</span><br>
<span class="lineno">90</span><span class="keyword" id="5274431">var</span>&nbsp;<span class="ident" id="5274435">YCbCrModel</span>&nbsp;<span class="ident" id="5274446"><a href="/image/color/color.go.html#5267997">Model</a></span>&nbsp;<span class="op" id="5274452">=</span>&nbsp;<span class="ident" id="5274454"><a href="/image/color/color.go.html#5268120">ModelFunc</a></span><span class="op" id="5274463">(</span><span class="ident" id="5274464"><a href="/image/color/ycbcr.go.html#5274482">yCbCrModel</a></span><span class="op" id="5274474">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5274477">func</span>&nbsp;<span class="ident" id="5274482">yCbCrModel</span><span class="op" id="5274492">(</span><span class="ident" id="5274493">c</span>&nbsp;<span class="ident" id="5274495"><a href="/image/color/color.go.html#5265576">Color</a></span><span class="op" id="5274500">)</span>&nbsp;<span class="ident" id="5274502"><a href="/image/color/color.go.html#5265576">Color</a></span>&nbsp;<span class="op" id="5274508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274511">if</span>&nbsp;<span class="ident" id="5274514">_</span><span class="op" id="5274515">,</span>&nbsp;<span class="ident" id="5274517">ok</span>&nbsp;<span class="op" id="5274520">:=</span>&nbsp;<span class="ident" id="5274523"><a href="/image/color/ycbcr.go.html#5274493">c</a></span><span class="op" id="5274524">.</span><span class="op" id="5274525">(</span><span class="ident" id="5274526"><a href="/image/color/ycbcr.go.html#5274178">YCbCr</a></span><span class="op" id="5274531">)</span><span class="op" id="5274532">;</span>&nbsp;<span class="ident" id="5274534"><a href="/image/color/ycbcr.go.html#5274517">ok</a></span>&nbsp;<span class="op" id="5274537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274541">return</span>&nbsp;<span class="ident" id="5274548"><a href="/image/color/ycbcr.go.html#5274493">c</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5274551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274554">r</span><span class="op" id="5274555">,</span>&nbsp;<span class="ident" id="5274557">g</span><span class="op" id="5274558">,</span>&nbsp;<span class="ident" id="5274560">b</span><span class="op" id="5274561">,</span>&nbsp;<span class="ident" id="5274563">_</span>&nbsp;<span class="op" id="5274565">:=</span>&nbsp;<span class="ident" id="5274568"><a href="/image/color/ycbcr.go.html#5274493">c</a></span><span class="op" id="5274569">.</span><span class="ident" id="5274570">RGBA</span><span class="op" id="5274574">(</span><span class="op" id="5274575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274578">y</span><span class="op" id="5274579">,</span>&nbsp;<span class="ident" id="5274581">u</span><span class="op" id="5274582">,</span>&nbsp;<span class="ident" id="5274584">v</span>&nbsp;<span class="op" id="5274586">:=</span>&nbsp;<span class="ident" id="5274589"><a href="/image/color/ycbcr.go.html#5272135">RGBToYCbCr</a></span><span class="op" id="5274599">(</span><span class="builtintype" id="5274600">uint8</span><span class="op" id="5274605">(</span><span class="ident" id="5274606"><a href="/image/color/ycbcr.go.html#5274554">r</a></span><span class="op" id="5274607">&gt;&gt;</span><span class="num" id="5274609">8</span><span class="op" id="5274610">)</span><span class="op" id="5274611">,</span>&nbsp;<span class="builtintype" id="5274613">uint8</span><span class="op" id="5274618">(</span><span class="ident" id="5274619"><a href="/image/color/ycbcr.go.html#5274557">g</a></span><span class="op" id="5274620">&gt;&gt;</span><span class="num" id="5274622">8</span><span class="op" id="5274623">)</span><span class="op" id="5274624">,</span>&nbsp;<span class="builtintype" id="5274626">uint8</span><span class="op" id="5274631">(</span><span class="ident" id="5274632"><a href="/image/color/ycbcr.go.html#5274560">b</a></span><span class="op" id="5274633">&gt;&gt;</span><span class="num" id="5274635">8</span><span class="op" id="5274636">)</span><span class="op" id="5274637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274640">return</span>&nbsp;<span class="ident" id="5274647"><a href="/image/color/ycbcr.go.html#5274178">YCbCr</a></span><span class="op" id="5274652">{</span><span class="ident" id="5274653"><a href="/image/color/ycbcr.go.html#5274578">y</a></span><span class="op" id="5274654">,</span>&nbsp;<span class="ident" id="5274656"><a href="/image/color/ycbcr.go.html#5274581">u</a></span><span class="op" id="5274657">,</span>&nbsp;<span class="ident" id="5274659"><a href="/image/color/ycbcr.go.html#5274584">v</a></span><span class="op" id="5274660">}</span><br>
<span class="lineno"></span><span class="op" id="5274662">}</span>
</div>
</body>
</html>
