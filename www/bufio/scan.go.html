<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3234197">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3234252">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3234306">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3234357">package</span>&nbsp;<span class="ident" id="3234365">bufio</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3234372">import</span>&nbsp;<span class="op" id="3234379">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3234382">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3234391">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3234401">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3234407">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3234422">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3234425">//&nbsp;Scanner&nbsp;provides&nbsp;a&nbsp;convenient&nbsp;interface&nbsp;for&nbsp;reading&nbsp;data&nbsp;such&nbsp;as</span><br>
<span class="lineno">15</span><span class="comment" id="3234493">//&nbsp;a&nbsp;file&nbsp;of&nbsp;newline-delimited&nbsp;lines&nbsp;of&nbsp;text.&nbsp;Successive&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3234559">//&nbsp;the&nbsp;Scan&nbsp;method&nbsp;will&nbsp;step&nbsp;through&nbsp;the&nbsp;&#39;tokens&#39;&nbsp;of&nbsp;a&nbsp;file,&nbsp;skipping</span><br>
<span class="lineno"></span><span class="comment" id="3234629">//&nbsp;the&nbsp;bytes&nbsp;between&nbsp;the&nbsp;tokens.&nbsp;The&nbsp;specification&nbsp;of&nbsp;a&nbsp;token&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3234694">//&nbsp;defined&nbsp;by&nbsp;a&nbsp;split&nbsp;function&nbsp;of&nbsp;type&nbsp;SplitFunc;&nbsp;the&nbsp;default&nbsp;split</span><br>
<span class="lineno"></span><span class="comment" id="3234762">//&nbsp;function&nbsp;breaks&nbsp;the&nbsp;input&nbsp;into&nbsp;lines&nbsp;with&nbsp;line&nbsp;termination&nbsp;stripped.&nbsp;Split</span><br>
<span class="lineno">20</span><span class="comment" id="3234840">//&nbsp;functions&nbsp;are&nbsp;defined&nbsp;in&nbsp;this&nbsp;package&nbsp;for&nbsp;scanning&nbsp;a&nbsp;file&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="3234906">//&nbsp;lines,&nbsp;bytes,&nbsp;UTF-8-encoded&nbsp;runes,&nbsp;and&nbsp;space-delimited&nbsp;words.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="3234975">//&nbsp;client&nbsp;may&nbsp;instead&nbsp;provide&nbsp;a&nbsp;custom&nbsp;split&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="3235030">//</span><br>
<span class="lineno"></span><span class="comment" id="3235033">//&nbsp;Scanning&nbsp;stops&nbsp;unrecoverably&nbsp;at&nbsp;EOF,&nbsp;the&nbsp;first&nbsp;I/O&nbsp;error,&nbsp;or&nbsp;a&nbsp;token&nbsp;too</span><br>
<span class="lineno">25</span><span class="comment" id="3235109">//&nbsp;large&nbsp;to&nbsp;fit&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;When&nbsp;a&nbsp;scan&nbsp;stops,&nbsp;the&nbsp;reader&nbsp;may&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="3235179">//&nbsp;advanced&nbsp;arbitrarily&nbsp;far&nbsp;past&nbsp;the&nbsp;last&nbsp;token.&nbsp;Programs&nbsp;that&nbsp;need&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="3235252">//&nbsp;control&nbsp;over&nbsp;error&nbsp;handling&nbsp;or&nbsp;large&nbsp;tokens,&nbsp;or&nbsp;must&nbsp;run&nbsp;sequential&nbsp;scans</span><br>
<span class="lineno"></span><span class="comment" id="3235329">//&nbsp;on&nbsp;a&nbsp;reader,&nbsp;should&nbsp;use&nbsp;bufio.Reader&nbsp;instead.</span><br>
<span class="lineno"></span><span class="comment" id="3235378">//</span><br>
<span class="lineno">30</span><span class="keyword" id="3235381">type</span>&nbsp;<span class="ident" id="3235386">Scanner</span>&nbsp;<span class="keyword" id="3235394">struct</span>&nbsp;<span class="op" id="3235401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235404">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3235417"><a href="/bufio/scan.go.html#3234401">io</a></span><span class="op" id="3235419">.</span><span class="ident" id="3235420">Reader</span>&nbsp;<span class="comment" id="3235427">//&nbsp;The&nbsp;reader&nbsp;provided&nbsp;by&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235466">split</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3235479"><a href="/bufio/scan.go.html#3236859">SplitFunc</a></span>&nbsp;<span class="comment" id="3235489">//&nbsp;The&nbsp;function&nbsp;to&nbsp;split&nbsp;the&nbsp;tokens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235527">maxTokenSize</span>&nbsp;<span class="builtintype" id="3235540">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3235550">//&nbsp;Maximum&nbsp;size&nbsp;of&nbsp;a&nbsp;token;&nbsp;modified&nbsp;by&nbsp;tests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235598">token</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3235611">[</span><span class="op" id="3235612">]</span><span class="builtintype" id="3235613">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3235621">//&nbsp;Last&nbsp;token&nbsp;returned&nbsp;by&nbsp;split.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235655">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3235668">[</span><span class="op" id="3235669">]</span><span class="builtintype" id="3235670">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3235678">//&nbsp;Buffer&nbsp;used&nbsp;as&nbsp;argument&nbsp;to&nbsp;split.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235716">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3235729">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3235739">//&nbsp;First&nbsp;non-processed&nbsp;byte&nbsp;in&nbsp;buf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235776">end</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3235789">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3235799">//&nbsp;End&nbsp;of&nbsp;data&nbsp;in&nbsp;buf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235823">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3235836">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3235846">//&nbsp;Sticky&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235864">empties</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3235877">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3235887">//&nbsp;Count&nbsp;of&nbsp;successive&nbsp;empty&nbsp;tokens.</span><br>
<span class="lineno">40</span><span class="op" id="3235924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3235927">//&nbsp;SplitFunc&nbsp;is&nbsp;the&nbsp;signature&nbsp;of&nbsp;the&nbsp;split&nbsp;function&nbsp;used&nbsp;to&nbsp;tokenize&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3236000">//&nbsp;input.&nbsp;The&nbsp;arguments&nbsp;are&nbsp;an&nbsp;initial&nbsp;substring&nbsp;of&nbsp;the&nbsp;remaining&nbsp;unprocessed</span><br>
<span class="lineno"></span><span class="comment" id="3236078">//&nbsp;data&nbsp;and&nbsp;a&nbsp;flag,&nbsp;atEOF,&nbsp;that&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Reader&nbsp;has&nbsp;no&nbsp;more&nbsp;data</span><br>
<span class="lineno">45</span><span class="comment" id="3236154">//&nbsp;to&nbsp;give.&nbsp;The&nbsp;return&nbsp;values&nbsp;are&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;to&nbsp;advance&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="3236229">//&nbsp;and&nbsp;the&nbsp;next&nbsp;token&nbsp;to&nbsp;return&nbsp;to&nbsp;the&nbsp;user,&nbsp;plus&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3236304">//&nbsp;data&nbsp;does&nbsp;not&nbsp;yet&nbsp;hold&nbsp;a&nbsp;complete&nbsp;token,&nbsp;for&nbsp;instance&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;newline</span><br>
<span class="lineno"></span><span class="comment" id="3236382">//&nbsp;while&nbsp;scanning&nbsp;lines,&nbsp;SplitFunc&nbsp;can&nbsp;return&nbsp;(0,&nbsp;nil,&nbsp;nil)&nbsp;to&nbsp;signal&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3236456">//&nbsp;Scanner&nbsp;to&nbsp;read&nbsp;more&nbsp;data&nbsp;into&nbsp;the&nbsp;slice&nbsp;and&nbsp;try&nbsp;again&nbsp;with&nbsp;a&nbsp;longer&nbsp;slice</span><br>
<span class="lineno">50</span><span class="comment" id="3236534">//&nbsp;starting&nbsp;at&nbsp;the&nbsp;same&nbsp;point&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="3236578">//</span><br>
<span class="lineno"></span><span class="comment" id="3236581">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;error&nbsp;is&nbsp;non-nil,&nbsp;scanning&nbsp;stops&nbsp;and&nbsp;the&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3236647">//&nbsp;is&nbsp;returned&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="comment" id="3236677">//</span><br>
<span class="lineno">55</span><span class="comment" id="3236680">//&nbsp;The&nbsp;function&nbsp;is&nbsp;never&nbsp;called&nbsp;with&nbsp;an&nbsp;empty&nbsp;data&nbsp;slice&nbsp;unless&nbsp;atEOF</span><br>
<span class="lineno"></span><span class="comment" id="3236750">//&nbsp;is&nbsp;true.&nbsp;If&nbsp;atEOF&nbsp;is&nbsp;true,&nbsp;however,&nbsp;data&nbsp;may&nbsp;be&nbsp;non-empty&nbsp;and,</span><br>
<span class="lineno"></span><span class="comment" id="3236816">//&nbsp;as&nbsp;always,&nbsp;holds&nbsp;unprocessed&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="3236854">type</span>&nbsp;<span class="ident" id="3236859">SplitFunc</span>&nbsp;<span class="keyword" id="3236869">func</span><span class="op" id="3236873">(</span><span class="ident" id="3236874">data</span>&nbsp;<span class="op" id="3236879">[</span><span class="op" id="3236880">]</span><span class="builtintype" id="3236881">byte</span><span class="op" id="3236885">,</span>&nbsp;<span class="ident" id="3236887">atEOF</span>&nbsp;<span class="builtintype" id="3236893">bool</span><span class="op" id="3236897">)</span>&nbsp;<span class="op" id="3236899">(</span><span class="ident" id="3236900">advance</span>&nbsp;<span class="builtintype" id="3236908">int</span><span class="op" id="3236911">,</span>&nbsp;<span class="ident" id="3236913">token</span>&nbsp;<span class="op" id="3236919">[</span><span class="op" id="3236920">]</span><span class="builtintype" id="3236921">byte</span><span class="op" id="3236925">,</span>&nbsp;<span class="ident" id="3236927">err</span>&nbsp;<span class="builtintype" id="3236931">error</span><span class="op" id="3236936">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3236939">//&nbsp;Errors&nbsp;returned&nbsp;by&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="3236970">var</span>&nbsp;<span class="op" id="3236974">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236977">ErrTooLong</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3236996">=</span>&nbsp;<span class="ident" id="3236998"><a href="/bufio/scan.go.html#3234391">errors</a></span><span class="op" id="3237004">.</span><span class="ident" id="3237005">New</span><span class="op" id="3237008">(</span><span class="string" id="3237009">&#34;bufio.Scanner:&nbsp;token&nbsp;too&nbsp;long&#34;</span><span class="op" id="3237040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237043">ErrNegativeAdvance</span>&nbsp;<span class="op" id="3237062">=</span>&nbsp;<span class="ident" id="3237064"><a href="/bufio/scan.go.html#3234391">errors</a></span><span class="op" id="3237070">.</span><span class="ident" id="3237071">New</span><span class="op" id="3237074">(</span><span class="string" id="3237075">&#34;bufio.Scanner:&nbsp;SplitFunc&nbsp;returns&nbsp;negative&nbsp;advance&nbsp;count&#34;</span><span class="op" id="3237132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237135">ErrAdvanceTooFar</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3237154">=</span>&nbsp;<span class="ident" id="3237156"><a href="/bufio/scan.go.html#3234391">errors</a></span><span class="op" id="3237162">.</span><span class="ident" id="3237163">New</span><span class="op" id="3237166">(</span><span class="string" id="3237167">&#34;bufio.Scanner:&nbsp;SplitFunc&nbsp;returns&nbsp;advance&nbsp;count&nbsp;beyond&nbsp;input&#34;</span><span class="op" id="3237228">)</span><br>
<span class="lineno">65</span><span class="op" id="3237230">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3237233">const</span>&nbsp;<span class="op" id="3237239">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3237242">//&nbsp;MaxScanTokenSize&nbsp;is&nbsp;the&nbsp;maximum&nbsp;size&nbsp;used&nbsp;to&nbsp;buffer&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3237307">//&nbsp;The&nbsp;actual&nbsp;maximum&nbsp;token&nbsp;size&nbsp;may&nbsp;be&nbsp;smaller&nbsp;as&nbsp;the&nbsp;buffer</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3237370">//&nbsp;may&nbsp;need&nbsp;to&nbsp;include,&nbsp;for&nbsp;instance,&nbsp;a&nbsp;newline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237420">MaxScanTokenSize</span>&nbsp;<span class="op" id="3237437">=</span>&nbsp;<span class="num" id="3237439">64</span>&nbsp;<span class="op" id="3237442">*</span>&nbsp;<span class="num" id="3237444">1024</span><br>
<span class="lineno"></span><span class="op" id="3237449">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3237452">//&nbsp;NewScanner&nbsp;returns&nbsp;a&nbsp;new&nbsp;Scanner&nbsp;to&nbsp;read&nbsp;from&nbsp;r.</span><br>
<span class="lineno">75</span><span class="comment" id="3237504">//&nbsp;The&nbsp;split&nbsp;function&nbsp;defaults&nbsp;to&nbsp;ScanLines.</span><br>
<span class="lineno"></span><span class="keyword" id="3237549">func</span>&nbsp;<span class="ident" id="3237554">NewScanner</span><span class="op" id="3237564">(</span><span class="ident" id="3237565">r</span>&nbsp;<span class="ident" id="3237567"><a href="/bufio/scan.go.html#3234401">io</a></span><span class="op" id="3237569">.</span><span class="ident" id="3237570">Reader</span><span class="op" id="3237576">)</span>&nbsp;<span class="op" id="3237578">*</span><span class="ident" id="3237579"><a href="/bufio/scan.go.html#3235386">Scanner</a></span>&nbsp;<span class="op" id="3237587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237590">return</span>&nbsp;<span class="op" id="3237597">&amp;</span><span class="ident" id="3237598"><a href="/bufio/scan.go.html#3235386">Scanner</a></span><span class="op" id="3237605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237609">r</span><span class="op" id="3237610">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3237623"><a href="/bufio/scan.go.html#3237565">r</a></span><span class="op" id="3237624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237628">split</span><span class="op" id="3237633">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3237642"><a href="/bufio/scan.go.html#3243948">ScanLines</a></span><span class="op" id="3237651">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237655">maxTokenSize</span><span class="op" id="3237667">:</span>&nbsp;<span class="ident" id="3237669"><a href="/bufio/scan.go.html#3237420">MaxScanTokenSize</a></span><span class="op" id="3237685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237689">buf</span><span class="op" id="3237692">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3237703">make</span><span class="op" id="3237707">(</span><span class="op" id="3237708">[</span><span class="op" id="3237709">]</span><span class="builtintype" id="3237710">byte</span><span class="op" id="3237714">,</span>&nbsp;<span class="num" id="3237716">4096</span><span class="op" id="3237720">)</span><span class="op" id="3237721">,</span>&nbsp;<span class="comment" id="3237723">//&nbsp;Plausible&nbsp;starting&nbsp;size;&nbsp;needn&#39;t&nbsp;be&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3237770">}</span><br>
<span class="lineno"></span><span class="op" id="3237772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="3237775">//&nbsp;Err&nbsp;returns&nbsp;the&nbsp;first&nbsp;non-EOF&nbsp;error&nbsp;that&nbsp;was&nbsp;encountered&nbsp;by&nbsp;the&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="3237851">func</span>&nbsp;<span class="op" id="3237856">(</span><span class="ident" id="3237857">s</span>&nbsp;<span class="op" id="3237859">*</span><span class="ident" id="3237860"><a href="/bufio/scan.go.html#3235386">Scanner</a></span><span class="op" id="3237867">)</span>&nbsp;<span class="ident" id="3237869">Err</span><span class="op" id="3237872">(</span><span class="op" id="3237873">)</span>&nbsp;<span class="builtintype" id="3237875">error</span>&nbsp;<span class="op" id="3237881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237884">if</span>&nbsp;<span class="ident" id="3237887"><a href="/bufio/scan.go.html#3237857">s</a></span><span class="op" id="3237888">.</span><span class="ident" id="3237889">err</span>&nbsp;<span class="op" id="3237893">==</span>&nbsp;<span class="ident" id="3237896"><a href="/bufio/scan.go.html#3234401">io</a></span><span class="op" id="3237898">.</span><span class="ident" id="3237899">EOF</span>&nbsp;<span class="op" id="3237903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237907">return</span>&nbsp;<span class="ident" id="3237914">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3237919">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237922">return</span>&nbsp;<span class="ident" id="3237929"><a href="/bufio/scan.go.html#3237857">s</a></span><span class="op" id="3237930">.</span><span class="ident" id="3237931">err</span><br>
<span class="lineno"></span><span class="op" id="3237935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3237938">//&nbsp;Bytes&nbsp;returns&nbsp;the&nbsp;most&nbsp;recent&nbsp;token&nbsp;generated&nbsp;by&nbsp;a&nbsp;call&nbsp;to&nbsp;Scan.</span><br>
<span class="lineno"></span><span class="comment" id="3238006">//&nbsp;The&nbsp;underlying&nbsp;array&nbsp;may&nbsp;point&nbsp;to&nbsp;data&nbsp;that&nbsp;will&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno">95</span><span class="comment" id="3238073">//&nbsp;by&nbsp;a&nbsp;subsequent&nbsp;call&nbsp;to&nbsp;Scan.&nbsp;It&nbsp;does&nbsp;no&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="3238129">func</span>&nbsp;<span class="op" id="3238134">(</span><span class="ident" id="3238135">s</span>&nbsp;<span class="op" id="3238137">*</span><span class="ident" id="3238138"><a href="/bufio/scan.go.html#3235386">Scanner</a></span><span class="op" id="3238145">)</span>&nbsp;<span class="ident" id="3238147">Bytes</span><span class="op" id="3238152">(</span><span class="op" id="3238153">)</span>&nbsp;<span class="op" id="3238155">[</span><span class="op" id="3238156">]</span><span class="builtintype" id="3238157">byte</span>&nbsp;<span class="op" id="3238162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238165">return</span>&nbsp;<span class="ident" id="3238172"><a href="/bufio/scan.go.html#3238135">s</a></span><span class="op" id="3238173">.</span><span class="ident" id="3238174">token</span><br>
<span class="lineno"></span><span class="op" id="3238180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="3238183">//&nbsp;Text&nbsp;returns&nbsp;the&nbsp;most&nbsp;recent&nbsp;token&nbsp;generated&nbsp;by&nbsp;a&nbsp;call&nbsp;to&nbsp;Scan</span><br>
<span class="lineno"></span><span class="comment" id="3238249">//&nbsp;as&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;string&nbsp;holding&nbsp;its&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="3238299">func</span>&nbsp;<span class="op" id="3238304">(</span><span class="ident" id="3238305">s</span>&nbsp;<span class="op" id="3238307">*</span><span class="ident" id="3238308"><a href="/bufio/scan.go.html#3235386">Scanner</a></span><span class="op" id="3238315">)</span>&nbsp;<span class="ident" id="3238317">Text</span><span class="op" id="3238321">(</span><span class="op" id="3238322">)</span>&nbsp;<span class="builtintype" id="3238324">string</span>&nbsp;<span class="op" id="3238331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238334">return</span>&nbsp;<span class="builtintype" id="3238341">string</span><span class="op" id="3238347">(</span><span class="ident" id="3238348"><a href="/bufio/scan.go.html#3238305">s</a></span><span class="op" id="3238349">.</span><span class="ident" id="3238350">token</span><span class="op" id="3238355">)</span><br>
<span class="lineno"></span><span class="op" id="3238357">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span><span class="comment" id="3238360">//&nbsp;Scan&nbsp;advances&nbsp;the&nbsp;Scanner&nbsp;to&nbsp;the&nbsp;next&nbsp;token,&nbsp;which&nbsp;will&nbsp;then&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3238427">//&nbsp;available&nbsp;through&nbsp;the&nbsp;Bytes&nbsp;or&nbsp;Text&nbsp;method.&nbsp;It&nbsp;returns&nbsp;false&nbsp;when&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3238500">//&nbsp;scan&nbsp;stops,&nbsp;either&nbsp;by&nbsp;reaching&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input&nbsp;or&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3238568">//&nbsp;After&nbsp;Scan&nbsp;returns&nbsp;false,&nbsp;the&nbsp;Err&nbsp;method&nbsp;will&nbsp;return&nbsp;any&nbsp;error&nbsp;that</span><br>
<span class="lineno">110</span><span class="comment" id="3238639">//&nbsp;occurred&nbsp;during&nbsp;scanning,&nbsp;except&nbsp;that&nbsp;if&nbsp;it&nbsp;was&nbsp;io.EOF,&nbsp;Err</span><br>
<span class="lineno"></span><span class="comment" id="3238702">//&nbsp;will&nbsp;return&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="3238722">//&nbsp;Split&nbsp;panics&nbsp;if&nbsp;the&nbsp;split&nbsp;function&nbsp;returns&nbsp;100&nbsp;empty&nbsp;tokens&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="3238793">//&nbsp;advancing&nbsp;the&nbsp;input.&nbsp;This&nbsp;is&nbsp;a&nbsp;common&nbsp;error&nbsp;mode&nbsp;for&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="3238859">func</span>&nbsp;<span class="op" id="3238864">(</span><span class="ident" id="3238865">s</span>&nbsp;<span class="op" id="3238867">*</span><span class="ident" id="3238868"><a href="/bufio/scan.go.html#3235386">Scanner</a></span><span class="op" id="3238875">)</span>&nbsp;<span class="ident" id="3238877">Scan</span><span class="op" id="3238881">(</span><span class="op" id="3238882">)</span>&nbsp;<span class="builtintype" id="3238884">bool</span>&nbsp;<span class="op" id="3238889">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3238892">//&nbsp;Loop&nbsp;until&nbsp;we&nbsp;have&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238924">for</span>&nbsp;<span class="op" id="3238928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3238932">//&nbsp;See&nbsp;if&nbsp;we&nbsp;can&nbsp;get&nbsp;a&nbsp;token&nbsp;with&nbsp;what&nbsp;we&nbsp;already&nbsp;have.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3238990">//&nbsp;If&nbsp;we&#39;ve&nbsp;run&nbsp;out&nbsp;of&nbsp;data&nbsp;but&nbsp;have&nbsp;an&nbsp;error,&nbsp;give&nbsp;the&nbsp;split&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239063">//&nbsp;a&nbsp;chance&nbsp;to&nbsp;recover&nbsp;any&nbsp;remaining,&nbsp;possibly&nbsp;empty&nbsp;token.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239125">if</span>&nbsp;<span class="ident" id="3239128"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239129">.</span><span class="ident" id="3239130">end</span>&nbsp;<span class="op" id="3239134">&gt;</span>&nbsp;<span class="ident" id="3239136"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239137">.</span><span class="ident" id="3239138">start</span>&nbsp;<span class="op" id="3239144">||</span>&nbsp;<span class="ident" id="3239147"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239148">.</span><span class="ident" id="3239149">err</span>&nbsp;<span class="op" id="3239153">!=</span>&nbsp;<span class="ident" id="3239156">nil</span>&nbsp;<span class="op" id="3239160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239165">advance</span><span class="op" id="3239172">,</span>&nbsp;<span class="ident" id="3239174">token</span><span class="op" id="3239179">,</span>&nbsp;<span class="ident" id="3239181">err</span>&nbsp;<span class="op" id="3239185">:=</span>&nbsp;<span class="ident" id="3239188"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239189">.</span><span class="ident" id="3239190">split</span><span class="op" id="3239195">(</span><span class="ident" id="3239196"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239197">.</span><span class="ident" id="3239198">buf</span><span class="op" id="3239201">[</span><span class="ident" id="3239202"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239203">.</span><span class="ident" id="3239204">start</span><span class="op" id="3239209">:</span><span class="ident" id="3239210"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239211">.</span><span class="ident" id="3239212">end</span><span class="op" id="3239215">]</span><span class="op" id="3239216">,</span>&nbsp;<span class="ident" id="3239218"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239219">.</span><span class="ident" id="3239220">err</span>&nbsp;<span class="op" id="3239224">!=</span>&nbsp;<span class="ident" id="3239227">nil</span><span class="op" id="3239230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239235">if</span>&nbsp;<span class="ident" id="3239238"><a href="/bufio/scan.go.html#3239181">err</a></span>&nbsp;<span class="op" id="3239242">!=</span>&nbsp;<span class="ident" id="3239245">nil</span>&nbsp;<span class="op" id="3239249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239255"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239256">.</span><span class="ident" id="3239257">setErr</span><span class="op" id="3239263">(</span><span class="ident" id="3239264"><a href="/bufio/scan.go.html#3239181">err</a></span><span class="op" id="3239267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239273">return</span>&nbsp;<span class="ident" id="3239280">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239294">if</span>&nbsp;<span class="op" id="3239297">!</span><span class="ident" id="3239298"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239299">.</span><span class="ident" id="3239300">advance</span><span class="op" id="3239307">(</span><span class="ident" id="3239308"><a href="/bufio/scan.go.html#3239165">advance</a></span><span class="op" id="3239315">)</span>&nbsp;<span class="op" id="3239317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239323">return</span>&nbsp;<span class="ident" id="3239330">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239344"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239345">.</span><span class="ident" id="3239346">token</span>&nbsp;<span class="op" id="3239352">=</span>&nbsp;<span class="ident" id="3239354"><a href="/bufio/scan.go.html#3239174">token</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239363">if</span>&nbsp;<span class="ident" id="3239366"><a href="/bufio/scan.go.html#3239174">token</a></span>&nbsp;<span class="op" id="3239372">!=</span>&nbsp;<span class="ident" id="3239375">nil</span>&nbsp;<span class="op" id="3239379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239385">if</span>&nbsp;<span class="ident" id="3239388"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239389">.</span><span class="ident" id="3239390">err</span>&nbsp;<span class="op" id="3239394">==</span>&nbsp;<span class="ident" id="3239397">nil</span>&nbsp;<span class="op" id="3239401">||</span>&nbsp;<span class="ident" id="3239404"><a href="/bufio/scan.go.html#3239165">advance</a></span>&nbsp;<span class="op" id="3239412">&gt;</span>&nbsp;<span class="num" id="3239414">0</span>&nbsp;<span class="op" id="3239416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239423"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239424">.</span><span class="ident" id="3239425">empties</span>&nbsp;<span class="op" id="3239433">=</span>&nbsp;<span class="num" id="3239435">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239441">}</span>&nbsp;<span class="keyword" id="3239443">else</span>&nbsp;<span class="op" id="3239448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239455">//&nbsp;Returning&nbsp;tokens&nbsp;not&nbsp;advancing&nbsp;input&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239508"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239509">.</span><span class="ident" id="3239510">empties</span><span class="op" id="3239517">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239525">if</span>&nbsp;<span class="ident" id="3239528"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239529">.</span><span class="ident" id="3239530">empties</span>&nbsp;<span class="op" id="3239538">&gt;</span>&nbsp;<span class="num" id="3239540">100</span>&nbsp;<span class="op" id="3239544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3239552">panic</span><span class="op" id="3239557">(</span><span class="string" id="3239558">&#34;bufio.Scan:&nbsp;100&nbsp;empty&nbsp;tokens&nbsp;without&nbsp;progressing&#34;</span><span class="op" id="3239608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239621">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239627">return</span>&nbsp;<span class="ident" id="3239634">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239650">//&nbsp;We&nbsp;cannot&nbsp;generate&nbsp;a&nbsp;token&nbsp;with&nbsp;what&nbsp;we&nbsp;are&nbsp;holding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239708">//&nbsp;If&nbsp;we&#39;ve&nbsp;already&nbsp;hit&nbsp;EOF&nbsp;or&nbsp;an&nbsp;I/O&nbsp;error,&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239768">if</span>&nbsp;<span class="ident" id="3239771"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239772">.</span><span class="ident" id="3239773">err</span>&nbsp;<span class="op" id="3239777">!=</span>&nbsp;<span class="ident" id="3239780">nil</span>&nbsp;<span class="op" id="3239784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239789">//&nbsp;Shut&nbsp;it&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239809"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239810">.</span><span class="ident" id="3239811">start</span>&nbsp;<span class="op" id="3239817">=</span>&nbsp;<span class="num" id="3239819">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239824"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239825">.</span><span class="ident" id="3239826">end</span>&nbsp;<span class="op" id="3239830">=</span>&nbsp;<span class="num" id="3239832">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239837">return</span>&nbsp;<span class="ident" id="3239844">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239856">//&nbsp;Must&nbsp;read&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239882">//&nbsp;First,&nbsp;shift&nbsp;data&nbsp;to&nbsp;beginning&nbsp;of&nbsp;buffer&nbsp;if&nbsp;there&#39;s&nbsp;lots&nbsp;of&nbsp;empty&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239959">//&nbsp;or&nbsp;space&nbsp;is&nbsp;needed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239984">if</span>&nbsp;<span class="ident" id="3239987"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3239988">.</span><span class="ident" id="3239989">start</span>&nbsp;<span class="op" id="3239995">&gt;</span>&nbsp;<span class="num" id="3239997">0</span>&nbsp;<span class="op" id="3239999">&amp;&amp;</span>&nbsp;<span class="op" id="3240002">(</span><span class="ident" id="3240003"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240004">.</span><span class="ident" id="3240005">end</span>&nbsp;<span class="op" id="3240009">==</span>&nbsp;<span class="builtinfunc" id="3240012">len</span><span class="op" id="3240015">(</span><span class="ident" id="3240016"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240017">.</span><span class="ident" id="3240018">buf</span><span class="op" id="3240021">)</span>&nbsp;<span class="op" id="3240023">||</span>&nbsp;<span class="ident" id="3240026"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240027">.</span><span class="ident" id="3240028">start</span>&nbsp;<span class="op" id="3240034">&gt;</span>&nbsp;<span class="builtinfunc" id="3240036">len</span><span class="op" id="3240039">(</span><span class="ident" id="3240040"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240041">.</span><span class="ident" id="3240042">buf</span><span class="op" id="3240045">)</span><span class="op" id="3240046">/</span><span class="num" id="3240047">2</span><span class="op" id="3240048">)</span>&nbsp;<span class="op" id="3240050">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3240055">copy</span><span class="op" id="3240059">(</span><span class="ident" id="3240060"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240061">.</span><span class="ident" id="3240062">buf</span><span class="op" id="3240065">,</span>&nbsp;<span class="ident" id="3240067"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240068">.</span><span class="ident" id="3240069">buf</span><span class="op" id="3240072">[</span><span class="ident" id="3240073"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240074">.</span><span class="ident" id="3240075">start</span><span class="op" id="3240080">:</span><span class="ident" id="3240081"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240082">.</span><span class="ident" id="3240083">end</span><span class="op" id="3240086">]</span><span class="op" id="3240087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240092"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240093">.</span><span class="ident" id="3240094">end</span>&nbsp;<span class="op" id="3240098">-=</span>&nbsp;<span class="ident" id="3240101"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240102">.</span><span class="ident" id="3240103">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240112"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240113">.</span><span class="ident" id="3240114">start</span>&nbsp;<span class="op" id="3240120">=</span>&nbsp;<span class="num" id="3240122">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3240130">//&nbsp;Is&nbsp;the&nbsp;buffer&nbsp;full?&nbsp;If&nbsp;so,&nbsp;resize.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240170">if</span>&nbsp;<span class="ident" id="3240173"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240174">.</span><span class="ident" id="3240175">end</span>&nbsp;<span class="op" id="3240179">==</span>&nbsp;<span class="builtinfunc" id="3240182">len</span><span class="op" id="3240185">(</span><span class="ident" id="3240186"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240187">.</span><span class="ident" id="3240188">buf</span><span class="op" id="3240191">)</span>&nbsp;<span class="op" id="3240193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240198">if</span>&nbsp;<span class="builtinfunc" id="3240201">len</span><span class="op" id="3240204">(</span><span class="ident" id="3240205"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240206">.</span><span class="ident" id="3240207">buf</span><span class="op" id="3240210">)</span>&nbsp;<span class="op" id="3240212">&gt;=</span>&nbsp;<span class="ident" id="3240215"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240216">.</span><span class="ident" id="3240217">maxTokenSize</span>&nbsp;<span class="op" id="3240230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240236"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240237">.</span><span class="ident" id="3240238">setErr</span><span class="op" id="3240244">(</span><span class="ident" id="3240245"><a href="/bufio/scan.go.html#3236977">ErrTooLong</a></span><span class="op" id="3240255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240261">return</span>&nbsp;<span class="ident" id="3240268">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240277">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240282">newSize</span>&nbsp;<span class="op" id="3240290">:=</span>&nbsp;<span class="builtinfunc" id="3240293">len</span><span class="op" id="3240296">(</span><span class="ident" id="3240297"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240298">.</span><span class="ident" id="3240299">buf</span><span class="op" id="3240302">)</span>&nbsp;<span class="op" id="3240304">*</span>&nbsp;<span class="num" id="3240306">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240311">if</span>&nbsp;<span class="ident" id="3240314"><a href="/bufio/scan.go.html#3240282">newSize</a></span>&nbsp;<span class="op" id="3240322">&gt;</span>&nbsp;<span class="ident" id="3240324"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240325">.</span><span class="ident" id="3240326">maxTokenSize</span>&nbsp;<span class="op" id="3240339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240345"><a href="/bufio/scan.go.html#3240282">newSize</a></span>&nbsp;<span class="op" id="3240353">=</span>&nbsp;<span class="ident" id="3240355"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240356">.</span><span class="ident" id="3240357">maxTokenSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240378">newBuf</span>&nbsp;<span class="op" id="3240385">:=</span>&nbsp;<span class="builtinfunc" id="3240388">make</span><span class="op" id="3240392">(</span><span class="op" id="3240393">[</span><span class="op" id="3240394">]</span><span class="builtintype" id="3240395">byte</span><span class="op" id="3240399">,</span>&nbsp;<span class="ident" id="3240401"><a href="/bufio/scan.go.html#3240282">newSize</a></span><span class="op" id="3240408">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3240413">copy</span><span class="op" id="3240417">(</span><span class="ident" id="3240418"><a href="/bufio/scan.go.html#3240378">newBuf</a></span><span class="op" id="3240424">,</span>&nbsp;<span class="ident" id="3240426"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240427">.</span><span class="ident" id="3240428">buf</span><span class="op" id="3240431">[</span><span class="ident" id="3240432"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240433">.</span><span class="ident" id="3240434">start</span><span class="op" id="3240439">:</span><span class="ident" id="3240440"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240441">.</span><span class="ident" id="3240442">end</span><span class="op" id="3240445">]</span><span class="op" id="3240446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240451"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240452">.</span><span class="ident" id="3240453">buf</span>&nbsp;<span class="op" id="3240457">=</span>&nbsp;<span class="ident" id="3240459"><a href="/bufio/scan.go.html#3240378">newBuf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240469"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240470">.</span><span class="ident" id="3240471">end</span>&nbsp;<span class="op" id="3240475">-=</span>&nbsp;<span class="ident" id="3240478"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240479">.</span><span class="ident" id="3240480">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240489"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240490">.</span><span class="ident" id="3240491">start</span>&nbsp;<span class="op" id="3240497">=</span>&nbsp;<span class="num" id="3240499">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240504">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3240519">//&nbsp;Finally&nbsp;we&nbsp;can&nbsp;read&nbsp;some&nbsp;input.&nbsp;Make&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;stuck&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3240590">//&nbsp;a&nbsp;misbehaving&nbsp;Reader.&nbsp;Officially&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;do&nbsp;this,&nbsp;but&nbsp;let&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3240664">//&nbsp;be&nbsp;extra&nbsp;careful:&nbsp;Scanner&nbsp;is&nbsp;for&nbsp;safe,&nbsp;simple&nbsp;jobs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240721">for</span>&nbsp;<span class="ident" id="3240725">loop</span>&nbsp;<span class="op" id="3240730">:=</span>&nbsp;<span class="num" id="3240733">0</span><span class="op" id="3240734">;</span>&nbsp;<span class="op" id="3240736">;</span>&nbsp;<span class="op" id="3240738">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240743">n</span><span class="op" id="3240744">,</span>&nbsp;<span class="ident" id="3240746">err</span>&nbsp;<span class="op" id="3240750">:=</span>&nbsp;<span class="ident" id="3240753"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240754">.</span><span class="ident" id="3240755">r</span><span class="op" id="3240756">.</span><span class="ident" id="3240757">Read</span><span class="op" id="3240761">(</span><span class="ident" id="3240762"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240763">.</span><span class="ident" id="3240764">buf</span><span class="op" id="3240767">[</span><span class="ident" id="3240768"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240769">.</span><span class="ident" id="3240770">end</span><span class="op" id="3240773">:</span><span class="builtinfunc" id="3240774">len</span><span class="op" id="3240777">(</span><span class="ident" id="3240778"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240779">.</span><span class="ident" id="3240780">buf</span><span class="op" id="3240783">)</span><span class="op" id="3240784">]</span><span class="op" id="3240785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240790"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240791">.</span><span class="ident" id="3240792">end</span>&nbsp;<span class="op" id="3240796">+=</span>&nbsp;<span class="ident" id="3240799"><a href="/bufio/scan.go.html#3240743">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240804">if</span>&nbsp;<span class="ident" id="3240807"><a href="/bufio/scan.go.html#3240746">err</a></span>&nbsp;<span class="op" id="3240811">!=</span>&nbsp;<span class="ident" id="3240814">nil</span>&nbsp;<span class="op" id="3240818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240824"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240825">.</span><span class="ident" id="3240826">setErr</span><span class="op" id="3240832">(</span><span class="ident" id="3240833"><a href="/bufio/scan.go.html#3240746">err</a></span><span class="op" id="3240836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240842">break</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240856">if</span>&nbsp;<span class="ident" id="3240859"><a href="/bufio/scan.go.html#3240743">n</a></span>&nbsp;<span class="op" id="3240861">&gt;</span>&nbsp;<span class="num" id="3240863">0</span>&nbsp;<span class="op" id="3240865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240871"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240872">.</span><span class="ident" id="3240873">empties</span>&nbsp;<span class="op" id="3240881">=</span>&nbsp;<span class="num" id="3240883">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240889">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240898">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240903"><a href="/bufio/scan.go.html#3240725">loop</a></span><span class="op" id="3240907">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240913">if</span>&nbsp;<span class="ident" id="3240916"><a href="/bufio/scan.go.html#3240725">loop</a></span>&nbsp;<span class="op" id="3240921">&gt;</span>&nbsp;<span class="ident" id="3240923"><a href="/bufio/bufio.go.html#3218293">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="3240948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240954"><a href="/bufio/scan.go.html#3238865">s</a></span><span class="op" id="3240955">.</span><span class="ident" id="3240956">setErr</span><span class="op" id="3240962">(</span><span class="ident" id="3240963"><a href="/bufio/scan.go.html#3234401">io</a></span><span class="op" id="3240965">.</span><span class="ident" id="3240966">ErrNoProgress</span><span class="op" id="3240979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240985">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240994">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241001">}</span><br>
<span class="lineno"></span><span class="op" id="3241003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3241006">//&nbsp;advance&nbsp;consumes&nbsp;n&nbsp;bytes&nbsp;of&nbsp;the&nbsp;buffer.&nbsp;It&nbsp;reports&nbsp;whether&nbsp;the&nbsp;advance&nbsp;was&nbsp;legal.</span><br>
<span class="lineno">200</span><span class="keyword" id="3241091">func</span>&nbsp;<span class="op" id="3241096">(</span><span class="ident" id="3241097">s</span>&nbsp;<span class="op" id="3241099">*</span><span class="ident" id="3241100"><a href="/bufio/scan.go.html#3235386">Scanner</a></span><span class="op" id="3241107">)</span>&nbsp;<span class="ident" id="3241109">advance</span><span class="op" id="3241116">(</span><span class="ident" id="3241117">n</span>&nbsp;<span class="builtintype" id="3241119">int</span><span class="op" id="3241122">)</span>&nbsp;<span class="builtintype" id="3241124">bool</span>&nbsp;<span class="op" id="3241129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241132">if</span>&nbsp;<span class="ident" id="3241135"><a href="/bufio/scan.go.html#3241117">n</a></span>&nbsp;<span class="op" id="3241137">&lt;</span>&nbsp;<span class="num" id="3241139">0</span>&nbsp;<span class="op" id="3241141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241145"><a href="/bufio/scan.go.html#3241097">s</a></span><span class="op" id="3241146">.</span><span class="ident" id="3241147">setErr</span><span class="op" id="3241153">(</span><span class="ident" id="3241154"><a href="/bufio/scan.go.html#3237043">ErrNegativeAdvance</a></span><span class="op" id="3241172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241176">return</span>&nbsp;<span class="ident" id="3241183">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241190">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241193">if</span>&nbsp;<span class="ident" id="3241196"><a href="/bufio/scan.go.html#3241117">n</a></span>&nbsp;<span class="op" id="3241198">&gt;</span>&nbsp;<span class="ident" id="3241200"><a href="/bufio/scan.go.html#3241097">s</a></span><span class="op" id="3241201">.</span><span class="ident" id="3241202">end</span><span class="op" id="3241205">-</span><span class="ident" id="3241206"><a href="/bufio/scan.go.html#3241097">s</a></span><span class="op" id="3241207">.</span><span class="ident" id="3241208">start</span>&nbsp;<span class="op" id="3241214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241218"><a href="/bufio/scan.go.html#3241097">s</a></span><span class="op" id="3241219">.</span><span class="ident" id="3241220">setErr</span><span class="op" id="3241226">(</span><span class="ident" id="3241227"><a href="/bufio/scan.go.html#3237135">ErrAdvanceTooFar</a></span><span class="op" id="3241243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241247">return</span>&nbsp;<span class="ident" id="3241254">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241264"><a href="/bufio/scan.go.html#3241097">s</a></span><span class="op" id="3241265">.</span><span class="ident" id="3241266">start</span>&nbsp;<span class="op" id="3241272">+=</span>&nbsp;<span class="ident" id="3241275"><a href="/bufio/scan.go.html#3241117">n</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241278">return</span>&nbsp;<span class="ident" id="3241285">true</span><br>
<span class="lineno"></span><span class="op" id="3241290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3241293">//&nbsp;setErr&nbsp;records&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered.</span><br>
<span class="lineno"></span><span class="keyword" id="3241340">func</span>&nbsp;<span class="op" id="3241345">(</span><span class="ident" id="3241346">s</span>&nbsp;<span class="op" id="3241348">*</span><span class="ident" id="3241349"><a href="/bufio/scan.go.html#3235386">Scanner</a></span><span class="op" id="3241356">)</span>&nbsp;<span class="ident" id="3241358">setErr</span><span class="op" id="3241364">(</span><span class="ident" id="3241365">err</span>&nbsp;<span class="builtintype" id="3241369">error</span><span class="op" id="3241374">)</span>&nbsp;<span class="op" id="3241376">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241379">if</span>&nbsp;<span class="ident" id="3241382"><a href="/bufio/scan.go.html#3241346">s</a></span><span class="op" id="3241383">.</span><span class="ident" id="3241384">err</span>&nbsp;<span class="op" id="3241388">==</span>&nbsp;<span class="ident" id="3241391">nil</span>&nbsp;<span class="op" id="3241395">||</span>&nbsp;<span class="ident" id="3241398"><a href="/bufio/scan.go.html#3241346">s</a></span><span class="op" id="3241399">.</span><span class="ident" id="3241400">err</span>&nbsp;<span class="op" id="3241404">==</span>&nbsp;<span class="ident" id="3241407"><a href="/bufio/scan.go.html#3234401">io</a></span><span class="op" id="3241409">.</span><span class="ident" id="3241410">EOF</span>&nbsp;<span class="op" id="3241414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241418"><a href="/bufio/scan.go.html#3241346">s</a></span><span class="op" id="3241419">.</span><span class="ident" id="3241420">err</span>&nbsp;<span class="op" id="3241424">=</span>&nbsp;<span class="ident" id="3241426"><a href="/bufio/scan.go.html#3241365">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241431">}</span><br>
<span class="lineno"></span><span class="op" id="3241433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="3241436">//&nbsp;Split&nbsp;sets&nbsp;the&nbsp;split&nbsp;function&nbsp;for&nbsp;the&nbsp;Scanner.&nbsp;If&nbsp;called,&nbsp;it&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3241508">//&nbsp;called&nbsp;before&nbsp;Scan.&nbsp;The&nbsp;default&nbsp;split&nbsp;function&nbsp;is&nbsp;ScanLines.</span><br>
<span class="lineno"></span><span class="keyword" id="3241572">func</span>&nbsp;<span class="op" id="3241577">(</span><span class="ident" id="3241578">s</span>&nbsp;<span class="op" id="3241580">*</span><span class="ident" id="3241581"><a href="/bufio/scan.go.html#3235386">Scanner</a></span><span class="op" id="3241588">)</span>&nbsp;<span class="ident" id="3241590">Split</span><span class="op" id="3241595">(</span><span class="ident" id="3241596">split</span>&nbsp;<span class="ident" id="3241602"><a href="/bufio/scan.go.html#3236859">SplitFunc</a></span><span class="op" id="3241611">)</span>&nbsp;<span class="op" id="3241613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241616"><a href="/bufio/scan.go.html#3241578">s</a></span><span class="op" id="3241617">.</span><span class="ident" id="3241618">split</span>&nbsp;<span class="op" id="3241624">=</span>&nbsp;<span class="ident" id="3241626"><a href="/bufio/scan.go.html#3241596">split</a></span><br>
<span class="lineno"></span><span class="op" id="3241632">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3241635">//&nbsp;Split&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3241655">//&nbsp;ScanBytes&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each&nbsp;byte&nbsp;as&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="3241737">func</span>&nbsp;<span class="ident" id="3241742">ScanBytes</span><span class="op" id="3241751">(</span><span class="ident" id="3241752">data</span>&nbsp;<span class="op" id="3241757">[</span><span class="op" id="3241758">]</span><span class="builtintype" id="3241759">byte</span><span class="op" id="3241763">,</span>&nbsp;<span class="ident" id="3241765">atEOF</span>&nbsp;<span class="builtintype" id="3241771">bool</span><span class="op" id="3241775">)</span>&nbsp;<span class="op" id="3241777">(</span><span class="ident" id="3241778">advance</span>&nbsp;<span class="builtintype" id="3241786">int</span><span class="op" id="3241789">,</span>&nbsp;<span class="ident" id="3241791">token</span>&nbsp;<span class="op" id="3241797">[</span><span class="op" id="3241798">]</span><span class="builtintype" id="3241799">byte</span><span class="op" id="3241803">,</span>&nbsp;<span class="ident" id="3241805">err</span>&nbsp;<span class="builtintype" id="3241809">error</span><span class="op" id="3241814">)</span>&nbsp;<span class="op" id="3241816">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241819">if</span>&nbsp;<span class="ident" id="3241822"><a href="/bufio/scan.go.html#3241765">atEOF</a></span>&nbsp;<span class="op" id="3241828">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3241831">len</span><span class="op" id="3241834">(</span><span class="ident" id="3241835"><a href="/bufio/scan.go.html#3241752">data</a></span><span class="op" id="3241839">)</span>&nbsp;<span class="op" id="3241841">==</span>&nbsp;<span class="num" id="3241844">0</span>&nbsp;<span class="op" id="3241846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241850">return</span>&nbsp;<span class="num" id="3241857">0</span><span class="op" id="3241858">,</span>&nbsp;<span class="ident" id="3241860">nil</span><span class="op" id="3241863">,</span>&nbsp;<span class="ident" id="3241865">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241873">return</span>&nbsp;<span class="num" id="3241880">1</span><span class="op" id="3241881">,</span>&nbsp;<span class="ident" id="3241883"><a href="/bufio/scan.go.html#3241752">data</a></span><span class="op" id="3241887">[</span><span class="num" id="3241888">0</span><span class="op" id="3241889">:</span><span class="num" id="3241890">1</span><span class="op" id="3241891">]</span><span class="op" id="3241892">,</span>&nbsp;<span class="ident" id="3241894">nil</span><br>
<span class="lineno"></span><span class="op" id="3241898">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="keyword" id="3241901">var</span>&nbsp;<span class="ident" id="3241905">errorRune</span>&nbsp;<span class="op" id="3241915">=</span>&nbsp;<span class="op" id="3241917">[</span><span class="op" id="3241918">]</span><span class="builtintype" id="3241919">byte</span><span class="op" id="3241923">(</span><span class="builtintype" id="3241924">string</span><span class="op" id="3241930">(</span><span class="ident" id="3241931"><a href="/bufio/scan.go.html#3234407">utf8</a></span><span class="op" id="3241935">.</span><span class="ident" id="3241936">RuneError</span><span class="op" id="3241945">)</span><span class="op" id="3241946">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3241949">//&nbsp;ScanRunes&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="3242014">//&nbsp;UTF-8-encoded&nbsp;rune&nbsp;as&nbsp;a&nbsp;token.&nbsp;The&nbsp;sequence&nbsp;of&nbsp;runes&nbsp;returned&nbsp;is</span><br>
<span class="lineno">240</span><span class="comment" id="3242082">//&nbsp;equivalent&nbsp;to&nbsp;that&nbsp;from&nbsp;a&nbsp;range&nbsp;loop&nbsp;over&nbsp;the&nbsp;input&nbsp;as&nbsp;a&nbsp;string,&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="3242156">//&nbsp;means&nbsp;that&nbsp;erroneous&nbsp;UTF-8&nbsp;encodings&nbsp;translate&nbsp;to&nbsp;U+FFFD&nbsp;=&nbsp;&#34;\xef\xbf\xbd&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3242234">//&nbsp;Because&nbsp;of&nbsp;the&nbsp;Scan&nbsp;interface,&nbsp;this&nbsp;makes&nbsp;it&nbsp;impossible&nbsp;for&nbsp;the&nbsp;client&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3242311">//&nbsp;distinguish&nbsp;correctly&nbsp;encoded&nbsp;replacement&nbsp;runes&nbsp;from&nbsp;encoding&nbsp;errors.</span><br>
<span class="lineno"></span><span class="keyword" id="3242384">func</span>&nbsp;<span class="ident" id="3242389">ScanRunes</span><span class="op" id="3242398">(</span><span class="ident" id="3242399">data</span>&nbsp;<span class="op" id="3242404">[</span><span class="op" id="3242405">]</span><span class="builtintype" id="3242406">byte</span><span class="op" id="3242410">,</span>&nbsp;<span class="ident" id="3242412">atEOF</span>&nbsp;<span class="builtintype" id="3242418">bool</span><span class="op" id="3242422">)</span>&nbsp;<span class="op" id="3242424">(</span><span class="ident" id="3242425">advance</span>&nbsp;<span class="builtintype" id="3242433">int</span><span class="op" id="3242436">,</span>&nbsp;<span class="ident" id="3242438">token</span>&nbsp;<span class="op" id="3242444">[</span><span class="op" id="3242445">]</span><span class="builtintype" id="3242446">byte</span><span class="op" id="3242450">,</span>&nbsp;<span class="ident" id="3242452">err</span>&nbsp;<span class="builtintype" id="3242456">error</span><span class="op" id="3242461">)</span>&nbsp;<span class="op" id="3242463">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242466">if</span>&nbsp;<span class="ident" id="3242469"><a href="/bufio/scan.go.html#3242412">atEOF</a></span>&nbsp;<span class="op" id="3242475">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3242478">len</span><span class="op" id="3242481">(</span><span class="ident" id="3242482"><a href="/bufio/scan.go.html#3242399">data</a></span><span class="op" id="3242486">)</span>&nbsp;<span class="op" id="3242488">==</span>&nbsp;<span class="num" id="3242491">0</span>&nbsp;<span class="op" id="3242493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242497">return</span>&nbsp;<span class="num" id="3242504">0</span><span class="op" id="3242505">,</span>&nbsp;<span class="ident" id="3242507">nil</span><span class="op" id="3242510">,</span>&nbsp;<span class="ident" id="3242512">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242521">//&nbsp;Fast&nbsp;path&nbsp;1:&nbsp;ASCII.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242545">if</span>&nbsp;<span class="ident" id="3242548"><a href="/bufio/scan.go.html#3242399">data</a></span><span class="op" id="3242552">[</span><span class="num" id="3242553">0</span><span class="op" id="3242554">]</span>&nbsp;<span class="op" id="3242556">&lt;</span>&nbsp;<span class="ident" id="3242558"><a href="/bufio/scan.go.html#3234407">utf8</a></span><span class="op" id="3242562">.</span><span class="ident" id="3242563">RuneSelf</span>&nbsp;<span class="op" id="3242572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242576">return</span>&nbsp;<span class="num" id="3242583">1</span><span class="op" id="3242584">,</span>&nbsp;<span class="ident" id="3242586"><a href="/bufio/scan.go.html#3242399">data</a></span><span class="op" id="3242590">[</span><span class="num" id="3242591">0</span><span class="op" id="3242592">:</span><span class="num" id="3242593">1</span><span class="op" id="3242594">]</span><span class="op" id="3242595">,</span>&nbsp;<span class="ident" id="3242597">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242606">//&nbsp;Fast&nbsp;path&nbsp;2:&nbsp;Correct&nbsp;UTF-8&nbsp;decode&nbsp;without&nbsp;error.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242659">_</span><span class="op" id="3242660">,</span>&nbsp;<span class="ident" id="3242662">width</span>&nbsp;<span class="op" id="3242668">:=</span>&nbsp;<span class="ident" id="3242671"><a href="/bufio/scan.go.html#3234407">utf8</a></span><span class="op" id="3242675">.</span><span class="ident" id="3242676">DecodeRune</span><span class="op" id="3242686">(</span><span class="ident" id="3242687"><a href="/bufio/scan.go.html#3242399">data</a></span><span class="op" id="3242691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242694">if</span>&nbsp;<span class="ident" id="3242697"><a href="/bufio/scan.go.html#3242662">width</a></span>&nbsp;<span class="op" id="3242703">&gt;</span>&nbsp;<span class="num" id="3242705">1</span>&nbsp;<span class="op" id="3242707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242711">//&nbsp;It&#39;s&nbsp;a&nbsp;valid&nbsp;encoding.&nbsp;Width&nbsp;cannot&nbsp;be&nbsp;one&nbsp;for&nbsp;a&nbsp;correctly&nbsp;encoded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242783">//&nbsp;non-ASCII&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242804">return</span>&nbsp;<span class="ident" id="3242811"><a href="/bufio/scan.go.html#3242662">width</a></span><span class="op" id="3242816">,</span>&nbsp;<span class="ident" id="3242818"><a href="/bufio/scan.go.html#3242399">data</a></span><span class="op" id="3242822">[</span><span class="num" id="3242823">0</span><span class="op" id="3242824">:</span><span class="ident" id="3242825"><a href="/bufio/scan.go.html#3242662">width</a></span><span class="op" id="3242830">]</span><span class="op" id="3242831">,</span>&nbsp;<span class="ident" id="3242833">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242842">//&nbsp;We&nbsp;know&nbsp;it&#39;s&nbsp;an&nbsp;error:&nbsp;we&nbsp;have&nbsp;width==1&nbsp;and&nbsp;implicitly&nbsp;r==utf8.RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242920">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;because&nbsp;there&nbsp;wasn&#39;t&nbsp;a&nbsp;full&nbsp;rune&nbsp;to&nbsp;be&nbsp;decoded?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242985">//&nbsp;FullRune&nbsp;distinguishes&nbsp;correctly&nbsp;between&nbsp;erroneous&nbsp;and&nbsp;incomplete&nbsp;encodings.</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243066">if</span>&nbsp;<span class="op" id="3243069">!</span><span class="ident" id="3243070"><a href="/bufio/scan.go.html#3242412">atEOF</a></span>&nbsp;<span class="op" id="3243076">&amp;&amp;</span>&nbsp;<span class="op" id="3243079">!</span><span class="ident" id="3243080"><a href="/bufio/scan.go.html#3234407">utf8</a></span><span class="op" id="3243084">.</span><span class="ident" id="3243085">FullRune</span><span class="op" id="3243093">(</span><span class="ident" id="3243094"><a href="/bufio/scan.go.html#3242399">data</a></span><span class="op" id="3243098">)</span>&nbsp;<span class="op" id="3243100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3243104">//&nbsp;Incomplete;&nbsp;get&nbsp;more&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243137">return</span>&nbsp;<span class="num" id="3243144">0</span><span class="op" id="3243145">,</span>&nbsp;<span class="ident" id="3243147">nil</span><span class="op" id="3243150">,</span>&nbsp;<span class="ident" id="3243152">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3243161">//&nbsp;We&nbsp;have&nbsp;a&nbsp;real&nbsp;UTF-8&nbsp;encoding&nbsp;error.&nbsp;Return&nbsp;a&nbsp;properly&nbsp;encoded&nbsp;error&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3243239">//&nbsp;but&nbsp;advance&nbsp;only&nbsp;one&nbsp;byte.&nbsp;This&nbsp;matches&nbsp;the&nbsp;behavior&nbsp;of&nbsp;a&nbsp;range&nbsp;loop&nbsp;over</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3243317">//&nbsp;an&nbsp;incorrectly&nbsp;encoded&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243352">return</span>&nbsp;<span class="num" id="3243359">1</span><span class="op" id="3243360">,</span>&nbsp;<span class="ident" id="3243362"><a href="/bufio/scan.go.html#3241905">errorRune</a></span><span class="op" id="3243371">,</span>&nbsp;<span class="ident" id="3243373">nil</span><br>
<span class="lineno"></span><span class="op" id="3243377">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="3243380">//&nbsp;dropCR&nbsp;drops&nbsp;a&nbsp;terminal&nbsp;\r&nbsp;from&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="3243425">func</span>&nbsp;<span class="ident" id="3243430">dropCR</span><span class="op" id="3243436">(</span><span class="ident" id="3243437">data</span>&nbsp;<span class="op" id="3243442">[</span><span class="op" id="3243443">]</span><span class="builtintype" id="3243444">byte</span><span class="op" id="3243448">)</span>&nbsp;<span class="op" id="3243450">[</span><span class="op" id="3243451">]</span><span class="builtintype" id="3243452">byte</span>&nbsp;<span class="op" id="3243457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243460">if</span>&nbsp;<span class="builtinfunc" id="3243463">len</span><span class="op" id="3243466">(</span><span class="ident" id="3243467"><a href="/bufio/scan.go.html#3243437">data</a></span><span class="op" id="3243471">)</span>&nbsp;<span class="op" id="3243473">&gt;</span>&nbsp;<span class="num" id="3243475">0</span>&nbsp;<span class="op" id="3243477">&amp;&amp;</span>&nbsp;<span class="ident" id="3243480"><a href="/bufio/scan.go.html#3243437">data</a></span><span class="op" id="3243484">[</span><span class="builtinfunc" id="3243485">len</span><span class="op" id="3243488">(</span><span class="ident" id="3243489"><a href="/bufio/scan.go.html#3243437">data</a></span><span class="op" id="3243493">)</span><span class="op" id="3243494">-</span><span class="num" id="3243495">1</span><span class="op" id="3243496">]</span>&nbsp;<span class="op" id="3243498">==</span>&nbsp;<span class="string" id="3243501">&#39;\r&#39;</span>&nbsp;<span class="op" id="3243506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243510">return</span>&nbsp;<span class="ident" id="3243517"><a href="/bufio/scan.go.html#3243437">data</a></span><span class="op" id="3243521">[</span><span class="num" id="3243522">0</span>&nbsp;<span class="op" id="3243524">:</span>&nbsp;<span class="builtinfunc" id="3243526">len</span><span class="op" id="3243529">(</span><span class="ident" id="3243530"><a href="/bufio/scan.go.html#3243437">data</a></span><span class="op" id="3243534">)</span><span class="op" id="3243535">-</span><span class="num" id="3243536">1</span><span class="op" id="3243537">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243543">return</span>&nbsp;<span class="ident" id="3243550"><a href="/bufio/scan.go.html#3243437">data</a></span><br>
<span class="lineno"></span><span class="op" id="3243555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3243558">//&nbsp;ScanLines&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each&nbsp;line&nbsp;of</span><br>
<span class="lineno">285</span><span class="comment" id="3243631">//&nbsp;text,&nbsp;stripped&nbsp;of&nbsp;any&nbsp;trailing&nbsp;end-of-line&nbsp;marker.&nbsp;The&nbsp;returned&nbsp;line&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="3243707">//&nbsp;be&nbsp;empty.&nbsp;The&nbsp;end-of-line&nbsp;marker&nbsp;is&nbsp;one&nbsp;optional&nbsp;carriage&nbsp;return&nbsp;followed</span><br>
<span class="lineno"></span><span class="comment" id="3243784">//&nbsp;by&nbsp;one&nbsp;mandatory&nbsp;newline.&nbsp;In&nbsp;regular&nbsp;expression&nbsp;notation,&nbsp;it&nbsp;is&nbsp;`\r?\n`.</span><br>
<span class="lineno"></span><span class="comment" id="3243860">//&nbsp;The&nbsp;last&nbsp;non-empty&nbsp;line&nbsp;of&nbsp;input&nbsp;will&nbsp;be&nbsp;returned&nbsp;even&nbsp;if&nbsp;it&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="3243931">//&nbsp;newline.</span><br>
<span class="lineno">290</span><span class="keyword" id="3243943">func</span>&nbsp;<span class="ident" id="3243948">ScanLines</span><span class="op" id="3243957">(</span><span class="ident" id="3243958">data</span>&nbsp;<span class="op" id="3243963">[</span><span class="op" id="3243964">]</span><span class="builtintype" id="3243965">byte</span><span class="op" id="3243969">,</span>&nbsp;<span class="ident" id="3243971">atEOF</span>&nbsp;<span class="builtintype" id="3243977">bool</span><span class="op" id="3243981">)</span>&nbsp;<span class="op" id="3243983">(</span><span class="ident" id="3243984">advance</span>&nbsp;<span class="builtintype" id="3243992">int</span><span class="op" id="3243995">,</span>&nbsp;<span class="ident" id="3243997">token</span>&nbsp;<span class="op" id="3244003">[</span><span class="op" id="3244004">]</span><span class="builtintype" id="3244005">byte</span><span class="op" id="3244009">,</span>&nbsp;<span class="ident" id="3244011">err</span>&nbsp;<span class="builtintype" id="3244015">error</span><span class="op" id="3244020">)</span>&nbsp;<span class="op" id="3244022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244025">if</span>&nbsp;<span class="ident" id="3244028"><a href="/bufio/scan.go.html#3243971">atEOF</a></span>&nbsp;<span class="op" id="3244034">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3244037">len</span><span class="op" id="3244040">(</span><span class="ident" id="3244041"><a href="/bufio/scan.go.html#3243958">data</a></span><span class="op" id="3244045">)</span>&nbsp;<span class="op" id="3244047">==</span>&nbsp;<span class="num" id="3244050">0</span>&nbsp;<span class="op" id="3244052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244056">return</span>&nbsp;<span class="num" id="3244063">0</span><span class="op" id="3244064">,</span>&nbsp;<span class="ident" id="3244066">nil</span><span class="op" id="3244069">,</span>&nbsp;<span class="ident" id="3244071">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244079">if</span>&nbsp;<span class="ident" id="3244082">i</span>&nbsp;<span class="op" id="3244084">:=</span>&nbsp;<span class="ident" id="3244087"><a href="/bufio/scan.go.html#3234382">bytes</a></span><span class="op" id="3244092">.</span><span class="ident" id="3244093">IndexByte</span><span class="op" id="3244102">(</span><span class="ident" id="3244103"><a href="/bufio/scan.go.html#3243958">data</a></span><span class="op" id="3244107">,</span>&nbsp;<span class="string" id="3244109">&#39;\n&#39;</span><span class="op" id="3244113">)</span><span class="op" id="3244114">;</span>&nbsp;<span class="ident" id="3244116"><a href="/bufio/scan.go.html#3244082">i</a></span>&nbsp;<span class="op" id="3244118">&gt;=</span>&nbsp;<span class="num" id="3244121">0</span>&nbsp;<span class="op" id="3244123">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244127">//&nbsp;We&nbsp;have&nbsp;a&nbsp;full&nbsp;newline-terminated&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244172">return</span>&nbsp;<span class="ident" id="3244179"><a href="/bufio/scan.go.html#3244082">i</a></span>&nbsp;<span class="op" id="3244181">+</span>&nbsp;<span class="num" id="3244183">1</span><span class="op" id="3244184">,</span>&nbsp;<span class="ident" id="3244186"><a href="/bufio/scan.go.html#3243430">dropCR</a></span><span class="op" id="3244192">(</span><span class="ident" id="3244193"><a href="/bufio/scan.go.html#3243958">data</a></span><span class="op" id="3244197">[</span><span class="num" id="3244198">0</span><span class="op" id="3244199">:</span><span class="ident" id="3244200"><a href="/bufio/scan.go.html#3244082">i</a></span><span class="op" id="3244201">]</span><span class="op" id="3244202">)</span><span class="op" id="3244203">,</span>&nbsp;<span class="ident" id="3244205">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244213">//&nbsp;If&nbsp;we&#39;re&nbsp;at&nbsp;EOF,&nbsp;we&nbsp;have&nbsp;a&nbsp;final,&nbsp;non-terminated&nbsp;line.&nbsp;Return&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244283">if</span>&nbsp;<span class="ident" id="3244286"><a href="/bufio/scan.go.html#3243971">atEOF</a></span>&nbsp;<span class="op" id="3244292">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244296">return</span>&nbsp;<span class="builtinfunc" id="3244303">len</span><span class="op" id="3244306">(</span><span class="ident" id="3244307"><a href="/bufio/scan.go.html#3243958">data</a></span><span class="op" id="3244311">)</span><span class="op" id="3244312">,</span>&nbsp;<span class="ident" id="3244314"><a href="/bufio/scan.go.html#3243430">dropCR</a></span><span class="op" id="3244320">(</span><span class="ident" id="3244321"><a href="/bufio/scan.go.html#3243958">data</a></span><span class="op" id="3244325">)</span><span class="op" id="3244326">,</span>&nbsp;<span class="ident" id="3244328">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244336">//&nbsp;Request&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244359">return</span>&nbsp;<span class="num" id="3244366">0</span><span class="op" id="3244367">,</span>&nbsp;<span class="ident" id="3244369">nil</span><span class="op" id="3244372">,</span>&nbsp;<span class="ident" id="3244374">nil</span><br>
<span class="lineno"></span><span class="op" id="3244378">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="comment" id="3244381">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;is&nbsp;a&nbsp;Unicode&nbsp;white&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="3244458">//&nbsp;We&nbsp;avoid&nbsp;dependency&nbsp;on&nbsp;the&nbsp;unicode&nbsp;package,&nbsp;but&nbsp;check&nbsp;validity&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="3244546">//&nbsp;in&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="3244563">func</span>&nbsp;<span class="ident" id="3244568">isSpace</span><span class="op" id="3244575">(</span><span class="ident" id="3244576">r</span>&nbsp;<span class="builtintype" id="3244578">rune</span><span class="op" id="3244582">)</span>&nbsp;<span class="builtintype" id="3244584">bool</span>&nbsp;<span class="op" id="3244589">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244592">if</span>&nbsp;<span class="ident" id="3244595"><a href="/bufio/scan.go.html#3244576">r</a></span>&nbsp;<span class="op" id="3244597">&lt;=</span>&nbsp;<span class="string" id="3244600">&#39;\u00FF&#39;</span>&nbsp;<span class="op" id="3244609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244613">//&nbsp;Obvious&nbsp;ASCII&nbsp;ones:&nbsp;\t&nbsp;through&nbsp;\r&nbsp;plus&nbsp;space.&nbsp;Plus&nbsp;two&nbsp;Latin-1&nbsp;oddballs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244691">switch</span>&nbsp;<span class="ident" id="3244698"><a href="/bufio/scan.go.html#3244576">r</a></span>&nbsp;<span class="op" id="3244700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244704">case</span>&nbsp;<span class="string" id="3244709">&#39;&nbsp;&#39;</span><span class="op" id="3244712">,</span>&nbsp;<span class="string" id="3244714">&#39;\t&#39;</span><span class="op" id="3244718">,</span>&nbsp;<span class="string" id="3244720">&#39;\n&#39;</span><span class="op" id="3244724">,</span>&nbsp;<span class="string" id="3244726">&#39;\v&#39;</span><span class="op" id="3244730">,</span>&nbsp;<span class="string" id="3244732">&#39;\f&#39;</span><span class="op" id="3244736">,</span>&nbsp;<span class="string" id="3244738">&#39;\r&#39;</span><span class="op" id="3244742">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244747">return</span>&nbsp;<span class="ident" id="3244754">true</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244761">case</span>&nbsp;<span class="string" id="3244766">&#39;\u0085&#39;</span><span class="op" id="3244774">,</span>&nbsp;<span class="string" id="3244776">&#39;\u00A0&#39;</span><span class="op" id="3244784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244789">return</span>&nbsp;<span class="ident" id="3244796">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244807">return</span>&nbsp;<span class="ident" id="3244814">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244821">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244824">//&nbsp;High-valued&nbsp;ones.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244846">if</span>&nbsp;<span class="string" id="3244849">&#39;\u2000&#39;</span>&nbsp;<span class="op" id="3244858">&lt;=</span>&nbsp;<span class="ident" id="3244861"><a href="/bufio/scan.go.html#3244576">r</a></span>&nbsp;<span class="op" id="3244863">&amp;&amp;</span>&nbsp;<span class="ident" id="3244866"><a href="/bufio/scan.go.html#3244576">r</a></span>&nbsp;<span class="op" id="3244868">&lt;=</span>&nbsp;<span class="string" id="3244871">&#39;\u200a&#39;</span>&nbsp;<span class="op" id="3244880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244884">return</span>&nbsp;<span class="ident" id="3244891">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244900">switch</span>&nbsp;<span class="ident" id="3244907"><a href="/bufio/scan.go.html#3244576">r</a></span>&nbsp;<span class="op" id="3244909">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244912">case</span>&nbsp;<span class="string" id="3244917">&#39;\u1680&#39;</span><span class="op" id="3244925">,</span>&nbsp;<span class="string" id="3244927">&#39;\u2028&#39;</span><span class="op" id="3244935">,</span>&nbsp;<span class="string" id="3244937">&#39;\u2029&#39;</span><span class="op" id="3244945">,</span>&nbsp;<span class="string" id="3244947">&#39;\u202f&#39;</span><span class="op" id="3244955">,</span>&nbsp;<span class="string" id="3244957">&#39;\u205f&#39;</span><span class="op" id="3244965">,</span>&nbsp;<span class="string" id="3244967">&#39;\u3000&#39;</span><span class="op" id="3244975">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244979">return</span>&nbsp;<span class="ident" id="3244986">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244995">return</span>&nbsp;<span class="ident" id="3245002">false</span><br>
<span class="lineno"></span><span class="op" id="3245008">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="comment" id="3245011">//&nbsp;ScanWords&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="3245076">//&nbsp;space-separated&nbsp;word&nbsp;of&nbsp;text,&nbsp;with&nbsp;surrounding&nbsp;spaces&nbsp;deleted.&nbsp;It&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="3245150">//&nbsp;never&nbsp;return&nbsp;an&nbsp;empty&nbsp;string.&nbsp;The&nbsp;definition&nbsp;of&nbsp;space&nbsp;is&nbsp;set&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3245217">//&nbsp;unicode.IsSpace.</span><br>
<span class="lineno">335</span><span class="keyword" id="3245237">func</span>&nbsp;<span class="ident" id="3245242">ScanWords</span><span class="op" id="3245251">(</span><span class="ident" id="3245252">data</span>&nbsp;<span class="op" id="3245257">[</span><span class="op" id="3245258">]</span><span class="builtintype" id="3245259">byte</span><span class="op" id="3245263">,</span>&nbsp;<span class="ident" id="3245265">atEOF</span>&nbsp;<span class="builtintype" id="3245271">bool</span><span class="op" id="3245275">)</span>&nbsp;<span class="op" id="3245277">(</span><span class="ident" id="3245278">advance</span>&nbsp;<span class="builtintype" id="3245286">int</span><span class="op" id="3245289">,</span>&nbsp;<span class="ident" id="3245291">token</span>&nbsp;<span class="op" id="3245297">[</span><span class="op" id="3245298">]</span><span class="builtintype" id="3245299">byte</span><span class="op" id="3245303">,</span>&nbsp;<span class="ident" id="3245305">err</span>&nbsp;<span class="builtintype" id="3245309">error</span><span class="op" id="3245314">)</span>&nbsp;<span class="op" id="3245316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245319">//&nbsp;Skip&nbsp;leading&nbsp;spaces.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245344">start</span>&nbsp;<span class="op" id="3245350">:=</span>&nbsp;<span class="num" id="3245353">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245356">for</span>&nbsp;<span class="ident" id="3245360">width</span>&nbsp;<span class="op" id="3245366">:=</span>&nbsp;<span class="num" id="3245369">0</span><span class="op" id="3245370">;</span>&nbsp;<span class="ident" id="3245372"><a href="/bufio/scan.go.html#3245344">start</a></span>&nbsp;<span class="op" id="3245378">&lt;</span>&nbsp;<span class="builtinfunc" id="3245380">len</span><span class="op" id="3245383">(</span><span class="ident" id="3245384"><a href="/bufio/scan.go.html#3245252">data</a></span><span class="op" id="3245388">)</span><span class="op" id="3245389">;</span>&nbsp;<span class="ident" id="3245391"><a href="/bufio/scan.go.html#3245344">start</a></span>&nbsp;<span class="op" id="3245397">+=</span>&nbsp;<span class="ident" id="3245400"><a href="/bufio/scan.go.html#3245360">width</a></span>&nbsp;<span class="op" id="3245406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245410">var</span>&nbsp;<span class="ident" id="3245414">r</span>&nbsp;<span class="builtintype" id="3245416">rune</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245423"><a href="/bufio/scan.go.html#3245414">r</a></span><span class="op" id="3245424">,</span>&nbsp;<span class="ident" id="3245426"><a href="/bufio/scan.go.html#3245360">width</a></span>&nbsp;<span class="op" id="3245432">=</span>&nbsp;<span class="ident" id="3245434"><a href="/bufio/scan.go.html#3234407">utf8</a></span><span class="op" id="3245438">.</span><span class="ident" id="3245439">DecodeRune</span><span class="op" id="3245449">(</span><span class="ident" id="3245450"><a href="/bufio/scan.go.html#3245252">data</a></span><span class="op" id="3245454">[</span><span class="ident" id="3245455"><a href="/bufio/scan.go.html#3245344">start</a></span><span class="op" id="3245460">:</span><span class="op" id="3245461">]</span><span class="op" id="3245462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245466">if</span>&nbsp;<span class="op" id="3245469">!</span><span class="ident" id="3245470"><a href="/bufio/scan.go.html#3244568">isSpace</a></span><span class="op" id="3245477">(</span><span class="ident" id="3245478"><a href="/bufio/scan.go.html#3245414">r</a></span><span class="op" id="3245479">)</span>&nbsp;<span class="op" id="3245481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245486">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245497">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245500">//&nbsp;Scan&nbsp;until&nbsp;space,&nbsp;marking&nbsp;end&nbsp;of&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245543">for</span>&nbsp;<span class="ident" id="3245547">width</span><span class="op" id="3245552">,</span>&nbsp;<span class="ident" id="3245554">i</span>&nbsp;<span class="op" id="3245556">:=</span>&nbsp;<span class="num" id="3245559">0</span><span class="op" id="3245560">,</span>&nbsp;<span class="ident" id="3245562"><a href="/bufio/scan.go.html#3245344">start</a></span><span class="op" id="3245567">;</span>&nbsp;<span class="ident" id="3245569"><a href="/bufio/scan.go.html#3245554">i</a></span>&nbsp;<span class="op" id="3245571">&lt;</span>&nbsp;<span class="builtinfunc" id="3245573">len</span><span class="op" id="3245576">(</span><span class="ident" id="3245577"><a href="/bufio/scan.go.html#3245252">data</a></span><span class="op" id="3245581">)</span><span class="op" id="3245582">;</span>&nbsp;<span class="ident" id="3245584"><a href="/bufio/scan.go.html#3245554">i</a></span>&nbsp;<span class="op" id="3245586">+=</span>&nbsp;<span class="ident" id="3245589"><a href="/bufio/scan.go.html#3245547">width</a></span>&nbsp;<span class="op" id="3245595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245599">var</span>&nbsp;<span class="ident" id="3245603">r</span>&nbsp;<span class="builtintype" id="3245605">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245612"><a href="/bufio/scan.go.html#3245603">r</a></span><span class="op" id="3245613">,</span>&nbsp;<span class="ident" id="3245615"><a href="/bufio/scan.go.html#3245547">width</a></span>&nbsp;<span class="op" id="3245621">=</span>&nbsp;<span class="ident" id="3245623"><a href="/bufio/scan.go.html#3234407">utf8</a></span><span class="op" id="3245627">.</span><span class="ident" id="3245628">DecodeRune</span><span class="op" id="3245638">(</span><span class="ident" id="3245639"><a href="/bufio/scan.go.html#3245252">data</a></span><span class="op" id="3245643">[</span><span class="ident" id="3245644"><a href="/bufio/scan.go.html#3245554">i</a></span><span class="op" id="3245645">:</span><span class="op" id="3245646">]</span><span class="op" id="3245647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245651">if</span>&nbsp;<span class="ident" id="3245654"><a href="/bufio/scan.go.html#3244568">isSpace</a></span><span class="op" id="3245661">(</span><span class="ident" id="3245662"><a href="/bufio/scan.go.html#3245603">r</a></span><span class="op" id="3245663">)</span>&nbsp;<span class="op" id="3245665">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245670">return</span>&nbsp;<span class="ident" id="3245677"><a href="/bufio/scan.go.html#3245554">i</a></span>&nbsp;<span class="op" id="3245679">+</span>&nbsp;<span class="ident" id="3245681"><a href="/bufio/scan.go.html#3245547">width</a></span><span class="op" id="3245686">,</span>&nbsp;<span class="ident" id="3245688"><a href="/bufio/scan.go.html#3245252">data</a></span><span class="op" id="3245692">[</span><span class="ident" id="3245693"><a href="/bufio/scan.go.html#3245344">start</a></span><span class="op" id="3245698">:</span><span class="ident" id="3245699"><a href="/bufio/scan.go.html#3245554">i</a></span><span class="op" id="3245700">]</span><span class="op" id="3245701">,</span>&nbsp;<span class="ident" id="3245703">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245715">//&nbsp;If&nbsp;we&#39;re&nbsp;at&nbsp;EOF,&nbsp;we&nbsp;have&nbsp;a&nbsp;final,&nbsp;non-empty,&nbsp;non-terminated&nbsp;word.&nbsp;Return&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245796">if</span>&nbsp;<span class="ident" id="3245799"><a href="/bufio/scan.go.html#3245265">atEOF</a></span>&nbsp;<span class="op" id="3245805">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3245808">len</span><span class="op" id="3245811">(</span><span class="ident" id="3245812"><a href="/bufio/scan.go.html#3245252">data</a></span><span class="op" id="3245816">)</span>&nbsp;<span class="op" id="3245818">&gt;</span>&nbsp;<span class="ident" id="3245820"><a href="/bufio/scan.go.html#3245344">start</a></span>&nbsp;<span class="op" id="3245826">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245830">return</span>&nbsp;<span class="builtinfunc" id="3245837">len</span><span class="op" id="3245840">(</span><span class="ident" id="3245841"><a href="/bufio/scan.go.html#3245252">data</a></span><span class="op" id="3245845">)</span><span class="op" id="3245846">,</span>&nbsp;<span class="ident" id="3245848"><a href="/bufio/scan.go.html#3245252">data</a></span><span class="op" id="3245852">[</span><span class="ident" id="3245853"><a href="/bufio/scan.go.html#3245344">start</a></span><span class="op" id="3245858">:</span><span class="op" id="3245859">]</span><span class="op" id="3245860">,</span>&nbsp;<span class="ident" id="3245862">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245870">//&nbsp;Request&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245893">return</span>&nbsp;<span class="ident" id="3245900"><a href="/bufio/scan.go.html#3245344">start</a></span><span class="op" id="3245905">,</span>&nbsp;<span class="ident" id="3245907">nil</span><span class="op" id="3245910">,</span>&nbsp;<span class="ident" id="3245912">nil</span><br>
<span class="lineno"></span><span class="op" id="3245916">}</span>
</div>
</body>
</html>
