<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template/parse</h2>
<ul>
<li><a href="/gostd/text/template/parse/lex.go.html">lex.go</a></li>
<li><a href="/gostd/text/template/parse/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/text/template/parse/node.go.html">node.go</a></li>
<li><a href="/gostd/text/template/parse/parse.go.html">parse.go</a></li>
<li><a href="/gostd/text/template/parse/parse_test.go.html">parse_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4602726">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4602781">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4602835">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4602886">package</span>&nbsp;<span class="ident" id="4602894">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4602901">import</span>&nbsp;<span class="op" id="4602908">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4602911">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4602918">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4602929">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4602940">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4602955">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4602958">//&nbsp;item&nbsp;represents&nbsp;a&nbsp;token&nbsp;or&nbsp;text&nbsp;string&nbsp;returned&nbsp;from&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">15</span><span class="keyword" id="4603027">type</span>&nbsp;<span class="ident" id="4603032">item</span>&nbsp;<span class="keyword" id="4603037">struct</span>&nbsp;<span class="op" id="4603044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603047">typ</span>&nbsp;<span class="ident" id="4603051">itemType</span>&nbsp;<span class="comment" id="4603060">//&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603087">pos</span>&nbsp;<span class="ident" id="4603091">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4603100">//&nbsp;The&nbsp;starting&nbsp;position,&nbsp;in&nbsp;bytes,&nbsp;of&nbsp;this&nbsp;item&nbsp;in&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603171">val</span>&nbsp;<span class="builtintype" id="4603175">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4603184">//&nbsp;The&nbsp;value&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span><span class="op" id="4603211">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4603214">func</span>&nbsp;<span class="op" id="4603219">(</span><span class="ident" id="4603220">i</span>&nbsp;<span class="ident" id="4603222">item</span><span class="op" id="4603226">)</span>&nbsp;<span class="ident" id="4603228">String</span><span class="op" id="4603234">(</span><span class="op" id="4603235">)</span>&nbsp;<span class="builtintype" id="4603237">string</span>&nbsp;<span class="op" id="4603244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603247">switch</span>&nbsp;<span class="op" id="4603254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603257">case</span>&nbsp;<span class="ident" id="4603262">i</span><span class="op" id="4603263">.</span><span class="ident" id="4603264">typ</span>&nbsp;<span class="op" id="4603268">==</span>&nbsp;<span class="ident" id="4603271">itemEOF</span><span class="op" id="4603278">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603282">return</span>&nbsp;<span class="string" id="4603289">&#34;EOF&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603296">case</span>&nbsp;<span class="ident" id="4603301">i</span><span class="op" id="4603302">.</span><span class="ident" id="4603303">typ</span>&nbsp;<span class="op" id="4603307">==</span>&nbsp;<span class="ident" id="4603310">itemError</span><span class="op" id="4603319">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603323">return</span>&nbsp;<span class="ident" id="4603330">i</span><span class="op" id="4603331">.</span><span class="ident" id="4603332">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603337">case</span>&nbsp;<span class="ident" id="4603342">i</span><span class="op" id="4603343">.</span><span class="ident" id="4603344">typ</span>&nbsp;<span class="op" id="4603348">&gt;</span>&nbsp;<span class="ident" id="4603350">itemKeyword</span><span class="op" id="4603361">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603365">return</span>&nbsp;<span class="ident" id="4603372">fmt</span><span class="op" id="4603375">.</span><span class="ident" id="4603376">Sprintf</span><span class="op" id="4603383">(</span><span class="string" id="4603384">&#34;&lt;%s&gt;&#34;</span><span class="op" id="4603390">,</span>&nbsp;<span class="ident" id="4603392">i</span><span class="op" id="4603393">.</span><span class="ident" id="4603394">val</span><span class="op" id="4603397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603400">case</span>&nbsp;<span class="builtinfunc" id="4603405">len</span><span class="op" id="4603408">(</span><span class="ident" id="4603409">i</span><span class="op" id="4603410">.</span><span class="ident" id="4603411">val</span><span class="op" id="4603414">)</span>&nbsp;<span class="op" id="4603416">&gt;</span>&nbsp;<span class="num" id="4603418">10</span><span class="op" id="4603420">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603424">return</span>&nbsp;<span class="ident" id="4603431">fmt</span><span class="op" id="4603434">.</span><span class="ident" id="4603435">Sprintf</span><span class="op" id="4603442">(</span><span class="string" id="4603443">&#34;%.10q...&#34;</span><span class="op" id="4603453">,</span>&nbsp;<span class="ident" id="4603455">i</span><span class="op" id="4603456">.</span><span class="ident" id="4603457">val</span><span class="op" id="4603460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603466">return</span>&nbsp;<span class="ident" id="4603473">fmt</span><span class="op" id="4603476">.</span><span class="ident" id="4603477">Sprintf</span><span class="op" id="4603484">(</span><span class="string" id="4603485">&#34;%q&#34;</span><span class="op" id="4603489">,</span>&nbsp;<span class="ident" id="4603491">i</span><span class="op" id="4603492">.</span><span class="ident" id="4603493">val</span><span class="op" id="4603496">)</span><br>
<span class="lineno"></span><span class="op" id="4603498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4603501">//&nbsp;itemType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;lex&nbsp;items.</span><br>
<span class="lineno"></span><span class="keyword" id="4603547">type</span>&nbsp;<span class="ident" id="4603552">itemType</span>&nbsp;<span class="builtintype" id="4603561">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4603566">const</span>&nbsp;<span class="op" id="4603572">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603575">itemError</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4603592">itemType</span>&nbsp;<span class="op" id="4603601">=</span>&nbsp;<span class="ident" id="4603603">iota</span>&nbsp;<span class="comment" id="4603608">//&nbsp;error&nbsp;occurred;&nbsp;value&nbsp;is&nbsp;text&nbsp;of&nbsp;error</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603651">itemBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4603684">//&nbsp;boolean&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603705">itemChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4603738">//&nbsp;printable&nbsp;ASCII&nbsp;character;&nbsp;grab&nbsp;bag&nbsp;for&nbsp;comma&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603793">itemCharConstant</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4603826">//&nbsp;character&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603849">itemComplex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4603882">//&nbsp;complex&nbsp;constant&nbsp;(1+2i);&nbsp;imaginary&nbsp;is&nbsp;just&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603938">itemColonEquals</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4603971">//&nbsp;colon-equals&nbsp;(&#39;:=&#39;)&nbsp;introducing&nbsp;a&nbsp;declaration</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604021">itemEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604030">itemField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604045">//&nbsp;alphanumeric&nbsp;identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604091">itemIdentifier</span>&nbsp;<span class="comment" id="4604106">//&nbsp;alphanumeric&nbsp;identifier&nbsp;not&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604156">itemLeftDelim</span>&nbsp;&nbsp;<span class="comment" id="4604171">//&nbsp;left&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604197">itemLeftParen</span>&nbsp;&nbsp;<span class="comment" id="4604212">//&nbsp;&#39;(&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604234">itemNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604249">//&nbsp;simple&nbsp;number,&nbsp;including&nbsp;imaginary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604288">itemPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604303">//&nbsp;pipe&nbsp;symbol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604319">itemRawString</span>&nbsp;&nbsp;<span class="comment" id="4604334">//&nbsp;raw&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604374">itemRightDelim</span>&nbsp;<span class="comment" id="4604389">//&nbsp;right&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604416">itemRightParen</span>&nbsp;<span class="comment" id="4604431">//&nbsp;&#39;)&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604453">itemSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604468">//&nbsp;run&nbsp;of&nbsp;spaces&nbsp;separating&nbsp;arguments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604507">itemString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604522">//&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604558">itemText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604573">//&nbsp;plain&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604588">itemVariable</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4604603">//&nbsp;variable&nbsp;starting&nbsp;with&nbsp;&#39;$&#39;,&nbsp;such&nbsp;as&nbsp;&#39;$&#39;&nbsp;or&nbsp;&nbsp;&#39;$1&#39;&nbsp;or&nbsp;&#39;$hello&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4604668">//&nbsp;Keywords&nbsp;appear&nbsp;after&nbsp;all&nbsp;the&nbsp;rest.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604708">itemKeyword</span>&nbsp;&nbsp;<span class="comment" id="4604721">//&nbsp;used&nbsp;only&nbsp;to&nbsp;delimit&nbsp;the&nbsp;keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604759">itemDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604772">//&nbsp;the&nbsp;cursor,&nbsp;spelled&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604800">itemDefine</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4604813">//&nbsp;define&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604832">itemElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604845">//&nbsp;else&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604862">itemEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604875">//&nbsp;end&nbsp;keyword</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604891">itemIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604904">//&nbsp;if&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604919">itemNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604932">//&nbsp;the&nbsp;untyped&nbsp;nil&nbsp;constant,&nbsp;easiest&nbsp;to&nbsp;treat&nbsp;as&nbsp;a&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604992">itemRange</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605005">//&nbsp;range&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605023">itemTemplate</span>&nbsp;<span class="comment" id="4605036">//&nbsp;template&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605057">itemWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605070">//&nbsp;with&nbsp;keyword</span><br>
<span class="lineno">70</span><span class="op" id="4605086">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4605089">var</span>&nbsp;<span class="ident" id="4605093">key</span>&nbsp;<span class="op" id="4605097">=</span>&nbsp;<span class="keyword" id="4605099">map</span><span class="op" id="4605102">[</span><span class="builtintype" id="4605103">string</span><span class="op" id="4605109">]</span><span class="ident" id="4605110">itemType</span><span class="op" id="4605118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605121">&#34;.&#34;</span><span class="op" id="4605124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605133">itemDot</span><span class="op" id="4605140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605143">&#34;define&#34;</span><span class="op" id="4605151">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4605155">itemDefine</span><span class="op" id="4605165">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605168">&#34;else&#34;</span><span class="op" id="4605174">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605180">itemElse</span><span class="op" id="4605188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605191">&#34;end&#34;</span><span class="op" id="4605196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605203">itemEnd</span><span class="op" id="4605210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605213">&#34;if&#34;</span><span class="op" id="4605217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605225">itemIf</span><span class="op" id="4605231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605234">&#34;range&#34;</span><span class="op" id="4605241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605246">itemRange</span><span class="op" id="4605255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605258">&#34;nil&#34;</span><span class="op" id="4605263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605270">itemNil</span><span class="op" id="4605277">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605280">&#34;template&#34;</span><span class="op" id="4605290">:</span>&nbsp;<span class="ident" id="4605292">itemTemplate</span><span class="op" id="4605304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4605307">&#34;with&#34;</span><span class="op" id="4605313">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605319">itemWith</span><span class="op" id="4605327">,</span><br>
<span class="lineno"></span><span class="op" id="4605329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4605332">const</span>&nbsp;<span class="ident" id="4605338">eof</span>&nbsp;<span class="op" id="4605342">=</span>&nbsp;<span class="op" id="4605344">-</span><span class="num" id="4605345">1</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="4605348">//&nbsp;stateFn&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;the&nbsp;next&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4605438">type</span>&nbsp;<span class="ident" id="4605443">stateFn</span>&nbsp;<span class="keyword" id="4605451">func</span><span class="op" id="4605455">(</span><span class="op" id="4605456">*</span><span class="ident" id="4605457">lexer</span><span class="op" id="4605462">)</span>&nbsp;<span class="ident" id="4605464">stateFn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4605473">//&nbsp;lexer&nbsp;holds&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">90</span><span class="keyword" id="4605514">type</span>&nbsp;<span class="ident" id="4605519">lexer</span>&nbsp;<span class="keyword" id="4605525">struct</span>&nbsp;<span class="op" id="4605532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605535">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4605546">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605556">//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;input;&nbsp;used&nbsp;only&nbsp;for&nbsp;error&nbsp;reports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605611">input</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4605622">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605632">//&nbsp;the&nbsp;string&nbsp;being&nbsp;scanned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605661">leftDelim</span>&nbsp;&nbsp;<span class="builtintype" id="4605672">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605682">//&nbsp;start&nbsp;of&nbsp;action</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605702">rightDelim</span>&nbsp;<span class="builtintype" id="4605713">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605723">//&nbsp;end&nbsp;of&nbsp;action</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605741">state</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605752">stateFn</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4605762">//&nbsp;the&nbsp;next&nbsp;lexing&nbsp;function&nbsp;to&nbsp;enter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605800">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605811">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605821">//&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605855">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605866">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605876">//&nbsp;start&nbsp;position&nbsp;of&nbsp;this&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605908">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605919">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605929">//&nbsp;width&nbsp;of&nbsp;last&nbsp;rune&nbsp;read&nbsp;from&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605968">lastPos</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605979">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4605989">//&nbsp;position&nbsp;of&nbsp;most&nbsp;recent&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606043">items</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606054">chan</span>&nbsp;<span class="ident" id="4606059">item</span>&nbsp;<span class="comment" id="4606064">//&nbsp;channel&nbsp;of&nbsp;scanned&nbsp;items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606093">parenDepth</span>&nbsp;<span class="builtintype" id="4606104">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4606114">//&nbsp;nesting&nbsp;depth&nbsp;of&nbsp;(&nbsp;)&nbsp;exprs</span><br>
<span class="lineno"></span><span class="op" id="4606144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4606147">//&nbsp;next&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">105</span><span class="keyword" id="4606191">func</span>&nbsp;<span class="op" id="4606196">(</span><span class="ident" id="4606197">l</span>&nbsp;<span class="op" id="4606199">*</span><span class="ident" id="4606200">lexer</span><span class="op" id="4606205">)</span>&nbsp;<span class="ident" id="4606207">next</span><span class="op" id="4606211">(</span><span class="op" id="4606212">)</span>&nbsp;<span class="builtintype" id="4606214">rune</span>&nbsp;<span class="op" id="4606219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606222">if</span>&nbsp;<span class="builtintype" id="4606225">int</span><span class="op" id="4606228">(</span><span class="ident" id="4606229">l</span><span class="op" id="4606230">.</span><span class="ident" id="4606231">pos</span><span class="op" id="4606234">)</span>&nbsp;<span class="op" id="4606236">&gt;=</span>&nbsp;<span class="builtinfunc" id="4606239">len</span><span class="op" id="4606242">(</span><span class="ident" id="4606243">l</span><span class="op" id="4606244">.</span><span class="ident" id="4606245">input</span><span class="op" id="4606250">)</span>&nbsp;<span class="op" id="4606252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606256">l</span><span class="op" id="4606257">.</span><span class="ident" id="4606258">width</span>&nbsp;<span class="op" id="4606264">=</span>&nbsp;<span class="num" id="4606266">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606270">return</span>&nbsp;<span class="ident" id="4606277">eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606282">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606285">r</span><span class="op" id="4606286">,</span>&nbsp;<span class="ident" id="4606288">w</span>&nbsp;<span class="op" id="4606290">:=</span>&nbsp;<span class="ident" id="4606293">utf8</span><span class="op" id="4606297">.</span><span class="ident" id="4606298">DecodeRuneInString</span><span class="op" id="4606316">(</span><span class="ident" id="4606317">l</span><span class="op" id="4606318">.</span><span class="ident" id="4606319">input</span><span class="op" id="4606324">[</span><span class="ident" id="4606325">l</span><span class="op" id="4606326">.</span><span class="ident" id="4606327">pos</span><span class="op" id="4606330">:</span><span class="op" id="4606331">]</span><span class="op" id="4606332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606335">l</span><span class="op" id="4606336">.</span><span class="ident" id="4606337">width</span>&nbsp;<span class="op" id="4606343">=</span>&nbsp;<span class="ident" id="4606345">Pos</span><span class="op" id="4606348">(</span><span class="ident" id="4606349">w</span><span class="op" id="4606350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606353">l</span><span class="op" id="4606354">.</span><span class="ident" id="4606355">pos</span>&nbsp;<span class="op" id="4606359">+=</span>&nbsp;<span class="ident" id="4606362">l</span><span class="op" id="4606363">.</span><span class="ident" id="4606364">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606371">return</span>&nbsp;<span class="ident" id="4606378">r</span><br>
<span class="lineno"></span><span class="op" id="4606380">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="4606383">//&nbsp;peek&nbsp;returns&nbsp;but&nbsp;does&nbsp;not&nbsp;consume&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="4606448">func</span>&nbsp;<span class="op" id="4606453">(</span><span class="ident" id="4606454">l</span>&nbsp;<span class="op" id="4606456">*</span><span class="ident" id="4606457">lexer</span><span class="op" id="4606462">)</span>&nbsp;<span class="ident" id="4606464">peek</span><span class="op" id="4606468">(</span><span class="op" id="4606469">)</span>&nbsp;<span class="builtintype" id="4606471">rune</span>&nbsp;<span class="op" id="4606476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606479">r</span>&nbsp;<span class="op" id="4606481">:=</span>&nbsp;<span class="ident" id="4606484">l</span><span class="op" id="4606485">.</span><span class="ident" id="4606486">next</span><span class="op" id="4606490">(</span><span class="op" id="4606491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606494">l</span><span class="op" id="4606495">.</span><span class="ident" id="4606496">backup</span><span class="op" id="4606502">(</span><span class="op" id="4606503">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606506">return</span>&nbsp;<span class="ident" id="4606513">r</span><br>
<span class="lineno"></span><span class="op" id="4606515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4606518">//&nbsp;backup&nbsp;steps&nbsp;back&nbsp;one&nbsp;rune.&nbsp;Can&nbsp;only&nbsp;be&nbsp;called&nbsp;once&nbsp;per&nbsp;call&nbsp;of&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="4606591">func</span>&nbsp;<span class="op" id="4606596">(</span><span class="ident" id="4606597">l</span>&nbsp;<span class="op" id="4606599">*</span><span class="ident" id="4606600">lexer</span><span class="op" id="4606605">)</span>&nbsp;<span class="ident" id="4606607">backup</span><span class="op" id="4606613">(</span><span class="op" id="4606614">)</span>&nbsp;<span class="op" id="4606616">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606619">l</span><span class="op" id="4606620">.</span><span class="ident" id="4606621">pos</span>&nbsp;<span class="op" id="4606625">-=</span>&nbsp;<span class="ident" id="4606628">l</span><span class="op" id="4606629">.</span><span class="ident" id="4606630">width</span><br>
<span class="lineno"></span><span class="op" id="4606636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4606639">//&nbsp;emit&nbsp;passes&nbsp;an&nbsp;item&nbsp;back&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="keyword" id="4606682">func</span>&nbsp;<span class="op" id="4606687">(</span><span class="ident" id="4606688">l</span>&nbsp;<span class="op" id="4606690">*</span><span class="ident" id="4606691">lexer</span><span class="op" id="4606696">)</span>&nbsp;<span class="ident" id="4606698">emit</span><span class="op" id="4606702">(</span><span class="ident" id="4606703">t</span>&nbsp;<span class="ident" id="4606705">itemType</span><span class="op" id="4606713">)</span>&nbsp;<span class="op" id="4606715">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606718">l</span><span class="op" id="4606719">.</span><span class="ident" id="4606720">items</span>&nbsp;<span class="op" id="4606726">&lt;-</span>&nbsp;<span class="ident" id="4606729">item</span><span class="op" id="4606733">{</span><span class="ident" id="4606734">t</span><span class="op" id="4606735">,</span>&nbsp;<span class="ident" id="4606737">l</span><span class="op" id="4606738">.</span><span class="ident" id="4606739">start</span><span class="op" id="4606744">,</span>&nbsp;<span class="ident" id="4606746">l</span><span class="op" id="4606747">.</span><span class="ident" id="4606748">input</span><span class="op" id="4606753">[</span><span class="ident" id="4606754">l</span><span class="op" id="4606755">.</span><span class="ident" id="4606756">start</span><span class="op" id="4606761">:</span><span class="ident" id="4606762">l</span><span class="op" id="4606763">.</span><span class="ident" id="4606764">pos</span><span class="op" id="4606767">]</span><span class="op" id="4606768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606771">l</span><span class="op" id="4606772">.</span><span class="ident" id="4606773">start</span>&nbsp;<span class="op" id="4606779">=</span>&nbsp;<span class="ident" id="4606781">l</span><span class="op" id="4606782">.</span><span class="ident" id="4606783">pos</span><br>
<span class="lineno"></span><span class="op" id="4606787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4606790">//&nbsp;ignore&nbsp;skips&nbsp;over&nbsp;the&nbsp;pending&nbsp;input&nbsp;before&nbsp;this&nbsp;point.</span><br>
<span class="lineno">135</span><span class="keyword" id="4606848">func</span>&nbsp;<span class="op" id="4606853">(</span><span class="ident" id="4606854">l</span>&nbsp;<span class="op" id="4606856">*</span><span class="ident" id="4606857">lexer</span><span class="op" id="4606862">)</span>&nbsp;<span class="ident" id="4606864">ignore</span><span class="op" id="4606870">(</span><span class="op" id="4606871">)</span>&nbsp;<span class="op" id="4606873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606876">l</span><span class="op" id="4606877">.</span><span class="ident" id="4606878">start</span>&nbsp;<span class="op" id="4606884">=</span>&nbsp;<span class="ident" id="4606886">l</span><span class="op" id="4606887">.</span><span class="ident" id="4606888">pos</span><br>
<span class="lineno"></span><span class="op" id="4606892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4606895">//&nbsp;accept&nbsp;consumes&nbsp;the&nbsp;next&nbsp;rune&nbsp;if&nbsp;it&#39;s&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno">140</span><span class="keyword" id="4606956">func</span>&nbsp;<span class="op" id="4606961">(</span><span class="ident" id="4606962">l</span>&nbsp;<span class="op" id="4606964">*</span><span class="ident" id="4606965">lexer</span><span class="op" id="4606970">)</span>&nbsp;<span class="ident" id="4606972">accept</span><span class="op" id="4606978">(</span><span class="ident" id="4606979">valid</span>&nbsp;<span class="builtintype" id="4606985">string</span><span class="op" id="4606991">)</span>&nbsp;<span class="builtintype" id="4606993">bool</span>&nbsp;<span class="op" id="4606998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607001">if</span>&nbsp;<span class="ident" id="4607004">strings</span><span class="op" id="4607011">.</span><span class="ident" id="4607012">IndexRune</span><span class="op" id="4607021">(</span><span class="ident" id="4607022">valid</span><span class="op" id="4607027">,</span>&nbsp;<span class="ident" id="4607029">l</span><span class="op" id="4607030">.</span><span class="ident" id="4607031">next</span><span class="op" id="4607035">(</span><span class="op" id="4607036">)</span><span class="op" id="4607037">)</span>&nbsp;<span class="op" id="4607039">&gt;=</span>&nbsp;<span class="num" id="4607042">0</span>&nbsp;<span class="op" id="4607044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607048">return</span>&nbsp;<span class="builtintype" id="4607055">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607064">l</span><span class="op" id="4607065">.</span><span class="ident" id="4607066">backup</span><span class="op" id="4607072">(</span><span class="op" id="4607073">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607076">return</span>&nbsp;<span class="builtintype" id="4607083">false</span><br>
<span class="lineno"></span><span class="op" id="4607089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4607092">//&nbsp;acceptRun&nbsp;consumes&nbsp;a&nbsp;run&nbsp;of&nbsp;runes&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="4607149">func</span>&nbsp;<span class="op" id="4607154">(</span><span class="ident" id="4607155">l</span>&nbsp;<span class="op" id="4607157">*</span><span class="ident" id="4607158">lexer</span><span class="op" id="4607163">)</span>&nbsp;<span class="ident" id="4607165">acceptRun</span><span class="op" id="4607174">(</span><span class="ident" id="4607175">valid</span>&nbsp;<span class="builtintype" id="4607181">string</span><span class="op" id="4607187">)</span>&nbsp;<span class="op" id="4607189">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607192">for</span>&nbsp;<span class="ident" id="4607196">strings</span><span class="op" id="4607203">.</span><span class="ident" id="4607204">IndexRune</span><span class="op" id="4607213">(</span><span class="ident" id="4607214">valid</span><span class="op" id="4607219">,</span>&nbsp;<span class="ident" id="4607221">l</span><span class="op" id="4607222">.</span><span class="ident" id="4607223">next</span><span class="op" id="4607227">(</span><span class="op" id="4607228">)</span><span class="op" id="4607229">)</span>&nbsp;<span class="op" id="4607231">&gt;=</span>&nbsp;<span class="num" id="4607234">0</span>&nbsp;<span class="op" id="4607236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607242">l</span><span class="op" id="4607243">.</span><span class="ident" id="4607244">backup</span><span class="op" id="4607250">(</span><span class="op" id="4607251">)</span><br>
<span class="lineno"></span><span class="op" id="4607253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="4607256">//&nbsp;lineNumber&nbsp;reports&nbsp;which&nbsp;line&nbsp;we&#39;re&nbsp;on,&nbsp;based&nbsp;on&nbsp;the&nbsp;position&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4607324">//&nbsp;the&nbsp;previous&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem.&nbsp;Doing&nbsp;it&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="4607385">//&nbsp;means&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;peek&nbsp;double&nbsp;counting.</span><br>
<span class="lineno"></span><span class="keyword" id="4607445">func</span>&nbsp;<span class="op" id="4607450">(</span><span class="ident" id="4607451">l</span>&nbsp;<span class="op" id="4607453">*</span><span class="ident" id="4607454">lexer</span><span class="op" id="4607459">)</span>&nbsp;<span class="ident" id="4607461">lineNumber</span><span class="op" id="4607471">(</span><span class="op" id="4607472">)</span>&nbsp;<span class="builtintype" id="4607474">int</span>&nbsp;<span class="op" id="4607478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607481">return</span>&nbsp;<span class="num" id="4607488">1</span>&nbsp;<span class="op" id="4607490">+</span>&nbsp;<span class="ident" id="4607492">strings</span><span class="op" id="4607499">.</span><span class="ident" id="4607500">Count</span><span class="op" id="4607505">(</span><span class="ident" id="4607506">l</span><span class="op" id="4607507">.</span><span class="ident" id="4607508">input</span><span class="op" id="4607513">[</span><span class="op" id="4607514">:</span><span class="ident" id="4607515">l</span><span class="op" id="4607516">.</span><span class="ident" id="4607517">lastPos</span><span class="op" id="4607524">]</span><span class="op" id="4607525">,</span>&nbsp;<span class="string" id="4607527">&#34;\n&#34;</span><span class="op" id="4607531">)</span><br>
<span class="lineno">160</span><span class="op" id="4607533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4607536">//&nbsp;errorf&nbsp;returns&nbsp;an&nbsp;error&nbsp;token&nbsp;and&nbsp;terminates&nbsp;the&nbsp;scan&nbsp;by&nbsp;passing</span><br>
<span class="lineno"></span><span class="comment" id="4607604">//&nbsp;back&nbsp;a&nbsp;nil&nbsp;pointer&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;next&nbsp;state,&nbsp;terminating&nbsp;l.nextItem.</span><br>
<span class="lineno"></span><span class="keyword" id="4607679">func</span>&nbsp;<span class="op" id="4607684">(</span><span class="ident" id="4607685">l</span>&nbsp;<span class="op" id="4607687">*</span><span class="ident" id="4607688">lexer</span><span class="op" id="4607693">)</span>&nbsp;<span class="ident" id="4607695">errorf</span><span class="op" id="4607701">(</span><span class="ident" id="4607702">format</span>&nbsp;<span class="builtintype" id="4607709">string</span><span class="op" id="4607715">,</span>&nbsp;<span class="ident" id="4607717">args</span>&nbsp;<span class="op" id="4607722">...</span><span class="keyword" id="4607725">interface</span><span class="op" id="4607734">{</span><span class="op" id="4607735">}</span><span class="op" id="4607736">)</span>&nbsp;<span class="ident" id="4607738">stateFn</span>&nbsp;<span class="op" id="4607746">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607749">l</span><span class="op" id="4607750">.</span><span class="ident" id="4607751">items</span>&nbsp;<span class="op" id="4607757">&lt;-</span>&nbsp;<span class="ident" id="4607760">item</span><span class="op" id="4607764">{</span><span class="ident" id="4607765">itemError</span><span class="op" id="4607774">,</span>&nbsp;<span class="ident" id="4607776">l</span><span class="op" id="4607777">.</span><span class="ident" id="4607778">start</span><span class="op" id="4607783">,</span>&nbsp;<span class="ident" id="4607785">fmt</span><span class="op" id="4607788">.</span><span class="ident" id="4607789">Sprintf</span><span class="op" id="4607796">(</span><span class="ident" id="4607797">format</span><span class="op" id="4607803">,</span>&nbsp;<span class="ident" id="4607805">args</span><span class="op" id="4607809">...</span><span class="op" id="4607812">)</span><span class="op" id="4607813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607816">return</span>&nbsp;<span class="ident" id="4607823">nil</span><br>
<span class="lineno"></span><span class="op" id="4607827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4607830">//&nbsp;nextItem&nbsp;returns&nbsp;the&nbsp;next&nbsp;item&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">170</span><span class="keyword" id="4607880">func</span>&nbsp;<span class="op" id="4607885">(</span><span class="ident" id="4607886">l</span>&nbsp;<span class="op" id="4607888">*</span><span class="ident" id="4607889">lexer</span><span class="op" id="4607894">)</span>&nbsp;<span class="ident" id="4607896">nextItem</span><span class="op" id="4607904">(</span><span class="op" id="4607905">)</span>&nbsp;<span class="ident" id="4607907">item</span>&nbsp;<span class="op" id="4607912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607915">item</span>&nbsp;<span class="op" id="4607920">:=</span>&nbsp;<span class="op" id="4607923">&lt;-</span><span class="ident" id="4607925">l</span><span class="op" id="4607926">.</span><span class="ident" id="4607927">items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607934">l</span><span class="op" id="4607935">.</span><span class="ident" id="4607936">lastPos</span>&nbsp;<span class="op" id="4607944">=</span>&nbsp;<span class="ident" id="4607946">item</span><span class="op" id="4607950">.</span><span class="ident" id="4607951">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607956">return</span>&nbsp;<span class="ident" id="4607963">item</span><br>
<span class="lineno"></span><span class="op" id="4607968">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="4607971">//&nbsp;lex&nbsp;creates&nbsp;a&nbsp;new&nbsp;scanner&nbsp;for&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4608022">func</span>&nbsp;<span class="ident" id="4608027">lex</span><span class="op" id="4608030">(</span><span class="ident" id="4608031">name</span><span class="op" id="4608035">,</span>&nbsp;<span class="ident" id="4608037">input</span><span class="op" id="4608042">,</span>&nbsp;<span class="ident" id="4608044">left</span><span class="op" id="4608048">,</span>&nbsp;<span class="ident" id="4608050">right</span>&nbsp;<span class="builtintype" id="4608056">string</span><span class="op" id="4608062">)</span>&nbsp;<span class="op" id="4608064">*</span><span class="ident" id="4608065">lexer</span>&nbsp;<span class="op" id="4608071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608074">if</span>&nbsp;<span class="ident" id="4608077">left</span>&nbsp;<span class="op" id="4608082">==</span>&nbsp;<span class="string" id="4608085">&#34;&#34;</span>&nbsp;<span class="op" id="4608088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608092">left</span>&nbsp;<span class="op" id="4608097">=</span>&nbsp;<span class="ident" id="4608099">leftDelim</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608113">if</span>&nbsp;<span class="ident" id="4608116">right</span>&nbsp;<span class="op" id="4608122">==</span>&nbsp;<span class="string" id="4608125">&#34;&#34;</span>&nbsp;<span class="op" id="4608128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608132">right</span>&nbsp;<span class="op" id="4608138">=</span>&nbsp;<span class="ident" id="4608140">rightDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608155">l</span>&nbsp;<span class="op" id="4608157">:=</span>&nbsp;<span class="op" id="4608160">&amp;</span><span class="ident" id="4608161">lexer</span><span class="op" id="4608166">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608170">name</span><span class="op" id="4608174">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608182">name</span><span class="op" id="4608186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608190">input</span><span class="op" id="4608195">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608202">input</span><span class="op" id="4608207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608211">leftDelim</span><span class="op" id="4608220">:</span>&nbsp;&nbsp;<span class="ident" id="4608223">left</span><span class="op" id="4608227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608231">rightDelim</span><span class="op" id="4608241">:</span>&nbsp;<span class="ident" id="4608243">right</span><span class="op" id="4608248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608252">items</span><span class="op" id="4608257">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4608264">make</span><span class="op" id="4608268">(</span><span class="keyword" id="4608269">chan</span>&nbsp;<span class="ident" id="4608274">item</span><span class="op" id="4608278">)</span><span class="op" id="4608279">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608285">go</span>&nbsp;<span class="ident" id="4608288">l</span><span class="op" id="4608289">.</span><span class="ident" id="4608290">run</span><span class="op" id="4608293">(</span><span class="op" id="4608294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608297">return</span>&nbsp;<span class="ident" id="4608304">l</span><br>
<span class="lineno"></span><span class="op" id="4608306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="4608309">//&nbsp;run&nbsp;runs&nbsp;the&nbsp;state&nbsp;machine&nbsp;for&nbsp;the&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="4608354">func</span>&nbsp;<span class="op" id="4608359">(</span><span class="ident" id="4608360">l</span>&nbsp;<span class="op" id="4608362">*</span><span class="ident" id="4608363">lexer</span><span class="op" id="4608368">)</span>&nbsp;<span class="ident" id="4608370">run</span><span class="op" id="4608373">(</span><span class="op" id="4608374">)</span>&nbsp;<span class="op" id="4608376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608379">for</span>&nbsp;<span class="ident" id="4608383">l</span><span class="op" id="4608384">.</span><span class="ident" id="4608385">state</span>&nbsp;<span class="op" id="4608391">=</span>&nbsp;<span class="ident" id="4608393">lexText</span><span class="op" id="4608400">;</span>&nbsp;<span class="ident" id="4608402">l</span><span class="op" id="4608403">.</span><span class="ident" id="4608404">state</span>&nbsp;<span class="op" id="4608410">!=</span>&nbsp;<span class="ident" id="4608413">nil</span><span class="op" id="4608416">;</span>&nbsp;<span class="op" id="4608418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608422">l</span><span class="op" id="4608423">.</span><span class="ident" id="4608424">state</span>&nbsp;<span class="op" id="4608430">=</span>&nbsp;<span class="ident" id="4608432">l</span><span class="op" id="4608433">.</span><span class="ident" id="4608434">state</span><span class="op" id="4608439">(</span><span class="ident" id="4608440">l</span><span class="op" id="4608441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608444">}</span><br>
<span class="lineno">200</span><span class="op" id="4608446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4608449">//&nbsp;state&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4608469">const</span>&nbsp;<span class="op" id="4608475">(</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608478">leftDelim</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608491">=</span>&nbsp;<span class="string" id="4608493">&#34;{{&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608499">rightDelim</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4608512">=</span>&nbsp;<span class="string" id="4608514">&#34;}}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608520">leftComment</span>&nbsp;&nbsp;<span class="op" id="4608533">=</span>&nbsp;<span class="string" id="4608535">&#34;/*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608541">rightComment</span>&nbsp;<span class="op" id="4608554">=</span>&nbsp;<span class="string" id="4608556">&#34;*/&#34;</span><br>
<span class="lineno"></span><span class="op" id="4608561">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="comment" id="4608564">//&nbsp;lexText&nbsp;scans&nbsp;until&nbsp;an&nbsp;opening&nbsp;action&nbsp;delimiter,&nbsp;&#34;{{&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4608622">func</span>&nbsp;<span class="ident" id="4608627">lexText</span><span class="op" id="4608634">(</span><span class="ident" id="4608635">l</span>&nbsp;<span class="op" id="4608637">*</span><span class="ident" id="4608638">lexer</span><span class="op" id="4608643">)</span>&nbsp;<span class="ident" id="4608645">stateFn</span>&nbsp;<span class="op" id="4608653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608656">for</span>&nbsp;<span class="op" id="4608660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608664">if</span>&nbsp;<span class="ident" id="4608667">strings</span><span class="op" id="4608674">.</span><span class="ident" id="4608675">HasPrefix</span><span class="op" id="4608684">(</span><span class="ident" id="4608685">l</span><span class="op" id="4608686">.</span><span class="ident" id="4608687">input</span><span class="op" id="4608692">[</span><span class="ident" id="4608693">l</span><span class="op" id="4608694">.</span><span class="ident" id="4608695">pos</span><span class="op" id="4608698">:</span><span class="op" id="4608699">]</span><span class="op" id="4608700">,</span>&nbsp;<span class="ident" id="4608702">l</span><span class="op" id="4608703">.</span><span class="ident" id="4608704">leftDelim</span><span class="op" id="4608713">)</span>&nbsp;<span class="op" id="4608715">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608720">if</span>&nbsp;<span class="ident" id="4608723">l</span><span class="op" id="4608724">.</span><span class="ident" id="4608725">pos</span>&nbsp;<span class="op" id="4608729">&gt;</span>&nbsp;<span class="ident" id="4608731">l</span><span class="op" id="4608732">.</span><span class="ident" id="4608733">start</span>&nbsp;<span class="op" id="4608739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608745">l</span><span class="op" id="4608746">.</span><span class="ident" id="4608747">emit</span><span class="op" id="4608751">(</span><span class="ident" id="4608752">itemText</span><span class="op" id="4608760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608770">return</span>&nbsp;<span class="ident" id="4608777">lexLeftDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608792">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608796">if</span>&nbsp;<span class="ident" id="4608799">l</span><span class="op" id="4608800">.</span><span class="ident" id="4608801">next</span><span class="op" id="4608805">(</span><span class="op" id="4608806">)</span>&nbsp;<span class="op" id="4608808">==</span>&nbsp;<span class="ident" id="4608811">eof</span>&nbsp;<span class="op" id="4608815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608820">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4608834">//&nbsp;Correctly&nbsp;reached&nbsp;EOF.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608861">if</span>&nbsp;<span class="ident" id="4608864">l</span><span class="op" id="4608865">.</span><span class="ident" id="4608866">pos</span>&nbsp;<span class="op" id="4608870">&gt;</span>&nbsp;<span class="ident" id="4608872">l</span><span class="op" id="4608873">.</span><span class="ident" id="4608874">start</span>&nbsp;<span class="op" id="4608880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608884">l</span><span class="op" id="4608885">.</span><span class="ident" id="4608886">emit</span><span class="op" id="4608890">(</span><span class="ident" id="4608891">itemText</span><span class="op" id="4608899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608905">l</span><span class="op" id="4608906">.</span><span class="ident" id="4608907">emit</span><span class="op" id="4608911">(</span><span class="ident" id="4608912">itemEOF</span><span class="op" id="4608919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608922">return</span>&nbsp;<span class="ident" id="4608929">nil</span><br>
<span class="lineno">230</span><span class="op" id="4608933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4608936">//&nbsp;lexLeftDelim&nbsp;scans&nbsp;the&nbsp;left&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4609008">func</span>&nbsp;<span class="ident" id="4609013">lexLeftDelim</span><span class="op" id="4609025">(</span><span class="ident" id="4609026">l</span>&nbsp;<span class="op" id="4609028">*</span><span class="ident" id="4609029">lexer</span><span class="op" id="4609034">)</span>&nbsp;<span class="ident" id="4609036">stateFn</span>&nbsp;<span class="op" id="4609044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609047">l</span><span class="op" id="4609048">.</span><span class="ident" id="4609049">pos</span>&nbsp;<span class="op" id="4609053">+=</span>&nbsp;<span class="ident" id="4609056">Pos</span><span class="op" id="4609059">(</span><span class="builtinfunc" id="4609060">len</span><span class="op" id="4609063">(</span><span class="ident" id="4609064">l</span><span class="op" id="4609065">.</span><span class="ident" id="4609066">leftDelim</span><span class="op" id="4609075">)</span><span class="op" id="4609076">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609079">if</span>&nbsp;<span class="ident" id="4609082">strings</span><span class="op" id="4609089">.</span><span class="ident" id="4609090">HasPrefix</span><span class="op" id="4609099">(</span><span class="ident" id="4609100">l</span><span class="op" id="4609101">.</span><span class="ident" id="4609102">input</span><span class="op" id="4609107">[</span><span class="ident" id="4609108">l</span><span class="op" id="4609109">.</span><span class="ident" id="4609110">pos</span><span class="op" id="4609113">:</span><span class="op" id="4609114">]</span><span class="op" id="4609115">,</span>&nbsp;<span class="ident" id="4609117">leftComment</span><span class="op" id="4609128">)</span>&nbsp;<span class="op" id="4609130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609134">return</span>&nbsp;<span class="ident" id="4609141">lexComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609156">l</span><span class="op" id="4609157">.</span><span class="ident" id="4609158">emit</span><span class="op" id="4609162">(</span><span class="ident" id="4609163">itemLeftDelim</span><span class="op" id="4609176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609179">l</span><span class="op" id="4609180">.</span><span class="ident" id="4609181">parenDepth</span>&nbsp;<span class="op" id="4609192">=</span>&nbsp;<span class="num" id="4609194">0</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609197">return</span>&nbsp;<span class="ident" id="4609204">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4609220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4609223">//&nbsp;lexComment&nbsp;scans&nbsp;a&nbsp;comment.&nbsp;The&nbsp;left&nbsp;comment&nbsp;marker&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4609302">func</span>&nbsp;<span class="ident" id="4609307">lexComment</span><span class="op" id="4609317">(</span><span class="ident" id="4609318">l</span>&nbsp;<span class="op" id="4609320">*</span><span class="ident" id="4609321">lexer</span><span class="op" id="4609326">)</span>&nbsp;<span class="ident" id="4609328">stateFn</span>&nbsp;<span class="op" id="4609336">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609339">l</span><span class="op" id="4609340">.</span><span class="ident" id="4609341">pos</span>&nbsp;<span class="op" id="4609345">+=</span>&nbsp;<span class="ident" id="4609348">Pos</span><span class="op" id="4609351">(</span><span class="builtinfunc" id="4609352">len</span><span class="op" id="4609355">(</span><span class="ident" id="4609356">leftComment</span><span class="op" id="4609367">)</span><span class="op" id="4609368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609371">i</span>&nbsp;<span class="op" id="4609373">:=</span>&nbsp;<span class="ident" id="4609376">strings</span><span class="op" id="4609383">.</span><span class="ident" id="4609384">Index</span><span class="op" id="4609389">(</span><span class="ident" id="4609390">l</span><span class="op" id="4609391">.</span><span class="ident" id="4609392">input</span><span class="op" id="4609397">[</span><span class="ident" id="4609398">l</span><span class="op" id="4609399">.</span><span class="ident" id="4609400">pos</span><span class="op" id="4609403">:</span><span class="op" id="4609404">]</span><span class="op" id="4609405">,</span>&nbsp;<span class="ident" id="4609407">rightComment</span><span class="op" id="4609419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609422">if</span>&nbsp;<span class="ident" id="4609425">i</span>&nbsp;<span class="op" id="4609427">&lt;</span>&nbsp;<span class="num" id="4609429">0</span>&nbsp;<span class="op" id="4609431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609435">return</span>&nbsp;<span class="ident" id="4609442">l</span><span class="op" id="4609443">.</span><span class="ident" id="4609444">errorf</span><span class="op" id="4609450">(</span><span class="string" id="4609451">&#34;unclosed&nbsp;comment&#34;</span><span class="op" id="4609469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609472">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609475">l</span><span class="op" id="4609476">.</span><span class="ident" id="4609477">pos</span>&nbsp;<span class="op" id="4609481">+=</span>&nbsp;<span class="ident" id="4609484">Pos</span><span class="op" id="4609487">(</span><span class="ident" id="4609488">i</span>&nbsp;<span class="op" id="4609490">+</span>&nbsp;<span class="builtinfunc" id="4609492">len</span><span class="op" id="4609495">(</span><span class="ident" id="4609496">rightComment</span><span class="op" id="4609508">)</span><span class="op" id="4609509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609512">if</span>&nbsp;<span class="op" id="4609515">!</span><span class="ident" id="4609516">strings</span><span class="op" id="4609523">.</span><span class="ident" id="4609524">HasPrefix</span><span class="op" id="4609533">(</span><span class="ident" id="4609534">l</span><span class="op" id="4609535">.</span><span class="ident" id="4609536">input</span><span class="op" id="4609541">[</span><span class="ident" id="4609542">l</span><span class="op" id="4609543">.</span><span class="ident" id="4609544">pos</span><span class="op" id="4609547">:</span><span class="op" id="4609548">]</span><span class="op" id="4609549">,</span>&nbsp;<span class="ident" id="4609551">l</span><span class="op" id="4609552">.</span><span class="ident" id="4609553">rightDelim</span><span class="op" id="4609563">)</span>&nbsp;<span class="op" id="4609565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609569">return</span>&nbsp;<span class="ident" id="4609576">l</span><span class="op" id="4609577">.</span><span class="ident" id="4609578">errorf</span><span class="op" id="4609584">(</span><span class="string" id="4609585">&#34;comment&nbsp;ends&nbsp;before&nbsp;closing&nbsp;delimiter&#34;</span><span class="op" id="4609624">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609628">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609631">l</span><span class="op" id="4609632">.</span><span class="ident" id="4609633">pos</span>&nbsp;<span class="op" id="4609637">+=</span>&nbsp;<span class="ident" id="4609640">Pos</span><span class="op" id="4609643">(</span><span class="builtinfunc" id="4609644">len</span><span class="op" id="4609647">(</span><span class="ident" id="4609648">l</span><span class="op" id="4609649">.</span><span class="ident" id="4609650">rightDelim</span><span class="op" id="4609660">)</span><span class="op" id="4609661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609664">l</span><span class="op" id="4609665">.</span><span class="ident" id="4609666">ignore</span><span class="op" id="4609672">(</span><span class="op" id="4609673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609676">return</span>&nbsp;<span class="ident" id="4609683">lexText</span><br>
<span class="lineno"></span><span class="op" id="4609691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4609694">//&nbsp;lexRightDelim&nbsp;scans&nbsp;the&nbsp;right&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4609768">func</span>&nbsp;<span class="ident" id="4609773">lexRightDelim</span><span class="op" id="4609786">(</span><span class="ident" id="4609787">l</span>&nbsp;<span class="op" id="4609789">*</span><span class="ident" id="4609790">lexer</span><span class="op" id="4609795">)</span>&nbsp;<span class="ident" id="4609797">stateFn</span>&nbsp;<span class="op" id="4609805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609808">l</span><span class="op" id="4609809">.</span><span class="ident" id="4609810">pos</span>&nbsp;<span class="op" id="4609814">+=</span>&nbsp;<span class="ident" id="4609817">Pos</span><span class="op" id="4609820">(</span><span class="builtinfunc" id="4609821">len</span><span class="op" id="4609824">(</span><span class="ident" id="4609825">l</span><span class="op" id="4609826">.</span><span class="ident" id="4609827">rightDelim</span><span class="op" id="4609837">)</span><span class="op" id="4609838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609841">l</span><span class="op" id="4609842">.</span><span class="ident" id="4609843">emit</span><span class="op" id="4609847">(</span><span class="ident" id="4609848">itemRightDelim</span><span class="op" id="4609862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609865">return</span>&nbsp;<span class="ident" id="4609872">lexText</span><br>
<span class="lineno">265</span><span class="op" id="4609880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4609883">//&nbsp;lexInsideAction&nbsp;scans&nbsp;the&nbsp;elements&nbsp;inside&nbsp;action&nbsp;delimiters.</span><br>
<span class="lineno"></span><span class="keyword" id="4609947">func</span>&nbsp;<span class="ident" id="4609952">lexInsideAction</span><span class="op" id="4609967">(</span><span class="ident" id="4609968">l</span>&nbsp;<span class="op" id="4609970">*</span><span class="ident" id="4609971">lexer</span><span class="op" id="4609976">)</span>&nbsp;<span class="ident" id="4609978">stateFn</span>&nbsp;<span class="op" id="4609986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4609989">//&nbsp;Either&nbsp;number,&nbsp;quoted&nbsp;string,&nbsp;or&nbsp;identifier.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4610038">//&nbsp;Spaces&nbsp;separate&nbsp;arguments;&nbsp;runs&nbsp;of&nbsp;spaces&nbsp;turn&nbsp;into&nbsp;itemSpace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4610105">//&nbsp;Pipe&nbsp;symbols&nbsp;separate&nbsp;and&nbsp;are&nbsp;emitted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610148">if</span>&nbsp;<span class="ident" id="4610151">strings</span><span class="op" id="4610158">.</span><span class="ident" id="4610159">HasPrefix</span><span class="op" id="4610168">(</span><span class="ident" id="4610169">l</span><span class="op" id="4610170">.</span><span class="ident" id="4610171">input</span><span class="op" id="4610176">[</span><span class="ident" id="4610177">l</span><span class="op" id="4610178">.</span><span class="ident" id="4610179">pos</span><span class="op" id="4610182">:</span><span class="op" id="4610183">]</span><span class="op" id="4610184">,</span>&nbsp;<span class="ident" id="4610186">l</span><span class="op" id="4610187">.</span><span class="ident" id="4610188">rightDelim</span><span class="op" id="4610198">)</span>&nbsp;<span class="op" id="4610200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610204">if</span>&nbsp;<span class="ident" id="4610207">l</span><span class="op" id="4610208">.</span><span class="ident" id="4610209">parenDepth</span>&nbsp;<span class="op" id="4610220">==</span>&nbsp;<span class="num" id="4610223">0</span>&nbsp;<span class="op" id="4610225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610230">return</span>&nbsp;<span class="ident" id="4610237">lexRightDelim</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610257">return</span>&nbsp;<span class="ident" id="4610264">l</span><span class="op" id="4610265">.</span><span class="ident" id="4610266">errorf</span><span class="op" id="4610272">(</span><span class="string" id="4610273">&#34;unclosed&nbsp;left&nbsp;paren&#34;</span><span class="op" id="4610294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610300">switch</span>&nbsp;<span class="ident" id="4610307">r</span>&nbsp;<span class="op" id="4610309">:=</span>&nbsp;<span class="ident" id="4610312">l</span><span class="op" id="4610313">.</span><span class="ident" id="4610314">next</span><span class="op" id="4610318">(</span><span class="op" id="4610319">)</span><span class="op" id="4610320">;</span>&nbsp;<span class="op" id="4610322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610325">case</span>&nbsp;<span class="ident" id="4610330">r</span>&nbsp;<span class="op" id="4610332">==</span>&nbsp;<span class="ident" id="4610335">eof</span>&nbsp;<span class="op" id="4610339">||</span>&nbsp;<span class="ident" id="4610342">isEndOfLine</span><span class="op" id="4610353">(</span><span class="ident" id="4610354">r</span><span class="op" id="4610355">)</span><span class="op" id="4610356">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610360">return</span>&nbsp;<span class="ident" id="4610367">l</span><span class="op" id="4610368">.</span><span class="ident" id="4610369">errorf</span><span class="op" id="4610375">(</span><span class="string" id="4610376">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="4610393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610396">case</span>&nbsp;<span class="ident" id="4610401">isSpace</span><span class="op" id="4610408">(</span><span class="ident" id="4610409">r</span><span class="op" id="4610410">)</span><span class="op" id="4610411">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610415">return</span>&nbsp;<span class="ident" id="4610422">lexSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610432">case</span>&nbsp;<span class="ident" id="4610437">r</span>&nbsp;<span class="op" id="4610439">==</span>&nbsp;<span class="string" id="4610442">&#39;:&#39;</span><span class="op" id="4610445">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610449">if</span>&nbsp;<span class="ident" id="4610452">l</span><span class="op" id="4610453">.</span><span class="ident" id="4610454">next</span><span class="op" id="4610458">(</span><span class="op" id="4610459">)</span>&nbsp;<span class="op" id="4610461">!=</span>&nbsp;<span class="string" id="4610464">&#39;=&#39;</span>&nbsp;<span class="op" id="4610468">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610473">return</span>&nbsp;<span class="ident" id="4610480">l</span><span class="op" id="4610481">.</span><span class="ident" id="4610482">errorf</span><span class="op" id="4610488">(</span><span class="string" id="4610489">&#34;expected&nbsp;:=&#34;</span><span class="op" id="4610502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610510">l</span><span class="op" id="4610511">.</span><span class="ident" id="4610512">emit</span><span class="op" id="4610516">(</span><span class="ident" id="4610517">itemColonEquals</span><span class="op" id="4610532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610535">case</span>&nbsp;<span class="ident" id="4610540">r</span>&nbsp;<span class="op" id="4610542">==</span>&nbsp;<span class="string" id="4610545">&#39;|&#39;</span><span class="op" id="4610548">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610552">l</span><span class="op" id="4610553">.</span><span class="ident" id="4610554">emit</span><span class="op" id="4610558">(</span><span class="ident" id="4610559">itemPipe</span><span class="op" id="4610567">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610570">case</span>&nbsp;<span class="ident" id="4610575">r</span>&nbsp;<span class="op" id="4610577">==</span>&nbsp;<span class="string" id="4610580">&#39;&#34;&#39;</span><span class="op" id="4610583">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610587">return</span>&nbsp;<span class="ident" id="4610594">lexQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610604">case</span>&nbsp;<span class="ident" id="4610609">r</span>&nbsp;<span class="op" id="4610611">==</span>&nbsp;<span class="string" id="4610614">&#39;`&#39;</span><span class="op" id="4610617">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610621">return</span>&nbsp;<span class="ident" id="4610628">lexRawQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610641">case</span>&nbsp;<span class="ident" id="4610646">r</span>&nbsp;<span class="op" id="4610648">==</span>&nbsp;<span class="string" id="4610651">&#39;$&#39;</span><span class="op" id="4610654">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610658">return</span>&nbsp;<span class="ident" id="4610665">lexVariable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610678">case</span>&nbsp;<span class="ident" id="4610683">r</span>&nbsp;<span class="op" id="4610685">==</span>&nbsp;<span class="string" id="4610688">&#39;\&#39;&#39;</span><span class="op" id="4610692">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610696">return</span>&nbsp;<span class="ident" id="4610703">lexChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610712">case</span>&nbsp;<span class="ident" id="4610717">r</span>&nbsp;<span class="op" id="4610719">==</span>&nbsp;<span class="string" id="4610722">&#39;.&#39;</span><span class="op" id="4610725">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4610729">//&nbsp;special&nbsp;look-ahead&nbsp;for&nbsp;&#34;.field&#34;&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;break&nbsp;l.backup().</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610796">if</span>&nbsp;<span class="ident" id="4610799">l</span><span class="op" id="4610800">.</span><span class="ident" id="4610801">pos</span>&nbsp;<span class="op" id="4610805">&lt;</span>&nbsp;<span class="ident" id="4610807">Pos</span><span class="op" id="4610810">(</span><span class="builtinfunc" id="4610811">len</span><span class="op" id="4610814">(</span><span class="ident" id="4610815">l</span><span class="op" id="4610816">.</span><span class="ident" id="4610817">input</span><span class="op" id="4610822">)</span><span class="op" id="4610823">)</span>&nbsp;<span class="op" id="4610825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610830">r</span>&nbsp;<span class="op" id="4610832">:=</span>&nbsp;<span class="ident" id="4610835">l</span><span class="op" id="4610836">.</span><span class="ident" id="4610837">input</span><span class="op" id="4610842">[</span><span class="ident" id="4610843">l</span><span class="op" id="4610844">.</span><span class="ident" id="4610845">pos</span><span class="op" id="4610848">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610853">if</span>&nbsp;<span class="ident" id="4610856">r</span>&nbsp;<span class="op" id="4610858">&lt;</span>&nbsp;<span class="string" id="4610860">&#39;0&#39;</span>&nbsp;<span class="op" id="4610864">||</span>&nbsp;<span class="string" id="4610867">&#39;9&#39;</span>&nbsp;<span class="op" id="4610871">&lt;</span>&nbsp;<span class="ident" id="4610873">r</span>&nbsp;<span class="op" id="4610875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610881">return</span>&nbsp;<span class="ident" id="4610888">lexField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610900">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610908">fallthrough</span>&nbsp;<span class="comment" id="4610920">//&nbsp;&#39;.&#39;&nbsp;can&nbsp;start&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610948">case</span>&nbsp;<span class="ident" id="4610953">r</span>&nbsp;<span class="op" id="4610955">==</span>&nbsp;<span class="string" id="4610958">&#39;+&#39;</span>&nbsp;<span class="op" id="4610962">||</span>&nbsp;<span class="ident" id="4610965">r</span>&nbsp;<span class="op" id="4610967">==</span>&nbsp;<span class="string" id="4610970">&#39;-&#39;</span>&nbsp;<span class="op" id="4610974">||</span>&nbsp;<span class="op" id="4610977">(</span><span class="string" id="4610978">&#39;0&#39;</span>&nbsp;<span class="op" id="4610982">&lt;=</span>&nbsp;<span class="ident" id="4610985">r</span>&nbsp;<span class="op" id="4610987">&amp;&amp;</span>&nbsp;<span class="ident" id="4610990">r</span>&nbsp;<span class="op" id="4610992">&lt;=</span>&nbsp;<span class="string" id="4610995">&#39;9&#39;</span><span class="op" id="4610998">)</span><span class="op" id="4610999">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611003">l</span><span class="op" id="4611004">.</span><span class="ident" id="4611005">backup</span><span class="op" id="4611011">(</span><span class="op" id="4611012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611016">return</span>&nbsp;<span class="ident" id="4611023">lexNumber</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611034">case</span>&nbsp;<span class="ident" id="4611039">isAlphaNumeric</span><span class="op" id="4611053">(</span><span class="ident" id="4611054">r</span><span class="op" id="4611055">)</span><span class="op" id="4611056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611060">l</span><span class="op" id="4611061">.</span><span class="ident" id="4611062">backup</span><span class="op" id="4611068">(</span><span class="op" id="4611069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611073">return</span>&nbsp;<span class="ident" id="4611080">lexIdentifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611095">case</span>&nbsp;<span class="ident" id="4611100">r</span>&nbsp;<span class="op" id="4611102">==</span>&nbsp;<span class="string" id="4611105">&#39;(&#39;</span><span class="op" id="4611108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611112">l</span><span class="op" id="4611113">.</span><span class="ident" id="4611114">emit</span><span class="op" id="4611118">(</span><span class="ident" id="4611119">itemLeftParen</span><span class="op" id="4611132">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611136">l</span><span class="op" id="4611137">.</span><span class="ident" id="4611138">parenDepth</span><span class="op" id="4611148">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611153">return</span>&nbsp;<span class="ident" id="4611160">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611177">case</span>&nbsp;<span class="ident" id="4611182">r</span>&nbsp;<span class="op" id="4611184">==</span>&nbsp;<span class="string" id="4611187">&#39;)&#39;</span><span class="op" id="4611190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611194">l</span><span class="op" id="4611195">.</span><span class="ident" id="4611196">emit</span><span class="op" id="4611200">(</span><span class="ident" id="4611201">itemRightParen</span><span class="op" id="4611215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611219">l</span><span class="op" id="4611220">.</span><span class="ident" id="4611221">parenDepth</span><span class="op" id="4611231">--</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611236">if</span>&nbsp;<span class="ident" id="4611239">l</span><span class="op" id="4611240">.</span><span class="ident" id="4611241">parenDepth</span>&nbsp;<span class="op" id="4611252">&lt;</span>&nbsp;<span class="num" id="4611254">0</span>&nbsp;<span class="op" id="4611256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611261">return</span>&nbsp;<span class="ident" id="4611268">l</span><span class="op" id="4611269">.</span><span class="ident" id="4611270">errorf</span><span class="op" id="4611276">(</span><span class="string" id="4611277">&#34;unexpected&nbsp;right&nbsp;paren&nbsp;%#U&#34;</span><span class="op" id="4611305">,</span>&nbsp;<span class="ident" id="4611307">r</span><span class="op" id="4611308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4611312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611316">return</span>&nbsp;<span class="ident" id="4611323">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611340">case</span>&nbsp;<span class="ident" id="4611345">r</span>&nbsp;<span class="op" id="4611347">&lt;=</span>&nbsp;<span class="ident" id="4611350">unicode</span><span class="op" id="4611357">.</span><span class="ident" id="4611358">MaxASCII</span>&nbsp;<span class="op" id="4611367">&amp;&amp;</span>&nbsp;<span class="ident" id="4611370">unicode</span><span class="op" id="4611377">.</span><span class="ident" id="4611378">IsPrint</span><span class="op" id="4611385">(</span><span class="ident" id="4611386">r</span><span class="op" id="4611387">)</span><span class="op" id="4611388">:</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611392">l</span><span class="op" id="4611393">.</span><span class="ident" id="4611394">emit</span><span class="op" id="4611398">(</span><span class="ident" id="4611399">itemChar</span><span class="op" id="4611407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611411">return</span>&nbsp;<span class="ident" id="4611418">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611435">default</span><span class="op" id="4611442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611446">return</span>&nbsp;<span class="ident" id="4611453">l</span><span class="op" id="4611454">.</span><span class="ident" id="4611455">errorf</span><span class="op" id="4611461">(</span><span class="string" id="4611462">&#34;unrecognized&nbsp;character&nbsp;in&nbsp;action:&nbsp;%#U&#34;</span><span class="op" id="4611501">,</span>&nbsp;<span class="ident" id="4611503">r</span><span class="op" id="4611504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4611507">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611510">return</span>&nbsp;<span class="ident" id="4611517">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4611533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4611536">//&nbsp;lexSpace&nbsp;scans&nbsp;a&nbsp;run&nbsp;of&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="4611581">//&nbsp;One&nbsp;space&nbsp;has&nbsp;already&nbsp;been&nbsp;seen.</span><br>
<span class="lineno">335</span><span class="keyword" id="4611617">func</span>&nbsp;<span class="ident" id="4611622">lexSpace</span><span class="op" id="4611630">(</span><span class="ident" id="4611631">l</span>&nbsp;<span class="op" id="4611633">*</span><span class="ident" id="4611634">lexer</span><span class="op" id="4611639">)</span>&nbsp;<span class="ident" id="4611641">stateFn</span>&nbsp;<span class="op" id="4611649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611652">for</span>&nbsp;<span class="ident" id="4611656">isSpace</span><span class="op" id="4611663">(</span><span class="ident" id="4611664">l</span><span class="op" id="4611665">.</span><span class="ident" id="4611666">peek</span><span class="op" id="4611670">(</span><span class="op" id="4611671">)</span><span class="op" id="4611672">)</span>&nbsp;<span class="op" id="4611674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611678">l</span><span class="op" id="4611679">.</span><span class="ident" id="4611680">next</span><span class="op" id="4611684">(</span><span class="op" id="4611685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4611688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611691">l</span><span class="op" id="4611692">.</span><span class="ident" id="4611693">emit</span><span class="op" id="4611697">(</span><span class="ident" id="4611698">itemSpace</span><span class="op" id="4611707">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611710">return</span>&nbsp;<span class="ident" id="4611717">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4611733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4611736">//&nbsp;lexIdentifier&nbsp;scans&nbsp;an&nbsp;alphanumeric.</span><br>
<span class="lineno"></span><span class="keyword" id="4611776">func</span>&nbsp;<span class="ident" id="4611781">lexIdentifier</span><span class="op" id="4611794">(</span><span class="ident" id="4611795">l</span>&nbsp;<span class="op" id="4611797">*</span><span class="ident" id="4611798">lexer</span><span class="op" id="4611803">)</span>&nbsp;<span class="ident" id="4611805">stateFn</span>&nbsp;<span class="op" id="4611813">{</span><br>
<span class="lineno">345</span><span class="ident" id="4611815">Loop</span><span class="op" id="4611819">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611822">for</span>&nbsp;<span class="op" id="4611826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611830">switch</span>&nbsp;<span class="ident" id="4611837">r</span>&nbsp;<span class="op" id="4611839">:=</span>&nbsp;<span class="ident" id="4611842">l</span><span class="op" id="4611843">.</span><span class="ident" id="4611844">next</span><span class="op" id="4611848">(</span><span class="op" id="4611849">)</span><span class="op" id="4611850">;</span>&nbsp;<span class="op" id="4611852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611856">case</span>&nbsp;<span class="ident" id="4611861">isAlphaNumeric</span><span class="op" id="4611875">(</span><span class="ident" id="4611876">r</span><span class="op" id="4611877">)</span><span class="op" id="4611878">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4611883">//&nbsp;absorb.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611896">default</span><span class="op" id="4611903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611908">l</span><span class="op" id="4611909">.</span><span class="ident" id="4611910">backup</span><span class="op" id="4611916">(</span><span class="op" id="4611917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611922">word</span>&nbsp;<span class="op" id="4611927">:=</span>&nbsp;<span class="ident" id="4611930">l</span><span class="op" id="4611931">.</span><span class="ident" id="4611932">input</span><span class="op" id="4611937">[</span><span class="ident" id="4611938">l</span><span class="op" id="4611939">.</span><span class="ident" id="4611940">start</span><span class="op" id="4611945">:</span><span class="ident" id="4611946">l</span><span class="op" id="4611947">.</span><span class="ident" id="4611948">pos</span><span class="op" id="4611951">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611956">if</span>&nbsp;<span class="op" id="4611959">!</span><span class="ident" id="4611960">l</span><span class="op" id="4611961">.</span><span class="ident" id="4611962">atTerminator</span><span class="op" id="4611974">(</span><span class="op" id="4611975">)</span>&nbsp;<span class="op" id="4611977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611983">return</span>&nbsp;<span class="ident" id="4611990">l</span><span class="op" id="4611991">.</span><span class="ident" id="4611992">errorf</span><span class="op" id="4611998">(</span><span class="string" id="4611999">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4612018">,</span>&nbsp;<span class="ident" id="4612020">r</span><span class="op" id="4612021">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4612026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612031">switch</span>&nbsp;<span class="op" id="4612038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612043">case</span>&nbsp;<span class="ident" id="4612048">key</span><span class="op" id="4612051">[</span><span class="ident" id="4612052">word</span><span class="op" id="4612056">]</span>&nbsp;<span class="op" id="4612058">&gt;</span>&nbsp;<span class="ident" id="4612060">itemKeyword</span><span class="op" id="4612071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4612077">l</span><span class="op" id="4612078">.</span><span class="ident" id="4612079">emit</span><span class="op" id="4612083">(</span><span class="ident" id="4612084">key</span><span class="op" id="4612087">[</span><span class="ident" id="4612088">word</span><span class="op" id="4612092">]</span><span class="op" id="4612093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612098">case</span>&nbsp;<span class="ident" id="4612103">word</span><span class="op" id="4612107">[</span><span class="num" id="4612108">0</span><span class="op" id="4612109">]</span>&nbsp;<span class="op" id="4612111">==</span>&nbsp;<span class="string" id="4612114">&#39;.&#39;</span><span class="op" id="4612117">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4612123">l</span><span class="op" id="4612124">.</span><span class="ident" id="4612125">emit</span><span class="op" id="4612129">(</span><span class="ident" id="4612130">itemField</span><span class="op" id="4612139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612144">case</span>&nbsp;<span class="ident" id="4612149">word</span>&nbsp;<span class="op" id="4612154">==</span>&nbsp;<span class="string" id="4612157">&#34;true&#34;</span><span class="op" id="4612163">,</span>&nbsp;<span class="ident" id="4612165">word</span>&nbsp;<span class="op" id="4612170">==</span>&nbsp;<span class="string" id="4612173">&#34;false&#34;</span><span class="op" id="4612180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4612186">l</span><span class="op" id="4612187">.</span><span class="ident" id="4612188">emit</span><span class="op" id="4612192">(</span><span class="ident" id="4612193">itemBool</span><span class="op" id="4612201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612206">default</span><span class="op" id="4612213">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4612219">l</span><span class="op" id="4612220">.</span><span class="ident" id="4612221">emit</span><span class="op" id="4612225">(</span><span class="ident" id="4612226">itemIdentifier</span><span class="op" id="4612240">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4612245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612250">break</span>&nbsp;<span class="ident" id="4612256">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4612263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4612266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612269">return</span>&nbsp;<span class="ident" id="4612276">lexInsideAction</span><br>
<span class="lineno">370</span><span class="op" id="4612292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4612295">//&nbsp;lexField&nbsp;scans&nbsp;a&nbsp;field:&nbsp;.Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4612337">//&nbsp;The&nbsp;.&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="4612364">func</span>&nbsp;<span class="ident" id="4612369">lexField</span><span class="op" id="4612377">(</span><span class="ident" id="4612378">l</span>&nbsp;<span class="op" id="4612380">*</span><span class="ident" id="4612381">lexer</span><span class="op" id="4612386">)</span>&nbsp;<span class="ident" id="4612388">stateFn</span>&nbsp;<span class="op" id="4612396">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612399">return</span>&nbsp;<span class="ident" id="4612406">lexFieldOrVariable</span><span class="op" id="4612424">(</span><span class="ident" id="4612425">l</span><span class="op" id="4612426">,</span>&nbsp;<span class="ident" id="4612428">itemField</span><span class="op" id="4612437">)</span><br>
<span class="lineno"></span><span class="op" id="4612439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4612442">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;Variable:&nbsp;$Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4612490">//&nbsp;The&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">380</span><span class="keyword" id="4612517">func</span>&nbsp;<span class="ident" id="4612522">lexVariable</span><span class="op" id="4612533">(</span><span class="ident" id="4612534">l</span>&nbsp;<span class="op" id="4612536">*</span><span class="ident" id="4612537">lexer</span><span class="op" id="4612542">)</span>&nbsp;<span class="ident" id="4612544">stateFn</span>&nbsp;<span class="op" id="4612552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612555">if</span>&nbsp;<span class="ident" id="4612558">l</span><span class="op" id="4612559">.</span><span class="ident" id="4612560">atTerminator</span><span class="op" id="4612572">(</span><span class="op" id="4612573">)</span>&nbsp;<span class="op" id="4612575">{</span>&nbsp;<span class="comment" id="4612577">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4612618">l</span><span class="op" id="4612619">.</span><span class="ident" id="4612620">emit</span><span class="op" id="4612624">(</span><span class="ident" id="4612625">itemVariable</span><span class="op" id="4612637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612641">return</span>&nbsp;<span class="ident" id="4612648">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4612665">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612668">return</span>&nbsp;<span class="ident" id="4612675">lexFieldOrVariable</span><span class="op" id="4612693">(</span><span class="ident" id="4612694">l</span><span class="op" id="4612695">,</span>&nbsp;<span class="ident" id="4612697">itemVariable</span><span class="op" id="4612709">)</span><br>
<span class="lineno"></span><span class="op" id="4612711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4612714">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;field&nbsp;or&nbsp;variable:&nbsp;[.$]Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4612774">//&nbsp;The&nbsp;.&nbsp;or&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">390</span><span class="keyword" id="4612806">func</span>&nbsp;<span class="ident" id="4612811">lexFieldOrVariable</span><span class="op" id="4612829">(</span><span class="ident" id="4612830">l</span>&nbsp;<span class="op" id="4612832">*</span><span class="ident" id="4612833">lexer</span><span class="op" id="4612838">,</span>&nbsp;<span class="ident" id="4612840">typ</span>&nbsp;<span class="ident" id="4612844">itemType</span><span class="op" id="4612852">)</span>&nbsp;<span class="ident" id="4612854">stateFn</span>&nbsp;<span class="op" id="4612862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612865">if</span>&nbsp;<span class="ident" id="4612868">l</span><span class="op" id="4612869">.</span><span class="ident" id="4612870">atTerminator</span><span class="op" id="4612882">(</span><span class="op" id="4612883">)</span>&nbsp;<span class="op" id="4612885">{</span>&nbsp;<span class="comment" id="4612887">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;.&#34;&nbsp;or&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4612935">if</span>&nbsp;<span class="ident" id="4612938">typ</span>&nbsp;<span class="op" id="4612942">==</span>&nbsp;<span class="ident" id="4612945">itemVariable</span>&nbsp;<span class="op" id="4612958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4612963">l</span><span class="op" id="4612964">.</span><span class="ident" id="4612965">emit</span><span class="op" id="4612969">(</span><span class="ident" id="4612970">itemVariable</span><span class="op" id="4612982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4612986">}</span>&nbsp;<span class="keyword" id="4612988">else</span>&nbsp;<span class="op" id="4612993">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4612998">l</span><span class="op" id="4612999">.</span><span class="ident" id="4613000">emit</span><span class="op" id="4613004">(</span><span class="ident" id="4613005">itemDot</span><span class="op" id="4613012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4613016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613020">return</span>&nbsp;<span class="ident" id="4613027">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4613044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613047">var</span>&nbsp;<span class="ident" id="4613051">r</span>&nbsp;<span class="builtintype" id="4613053">rune</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613059">for</span>&nbsp;<span class="op" id="4613063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4613067">r</span>&nbsp;<span class="op" id="4613069">=</span>&nbsp;<span class="ident" id="4613071">l</span><span class="op" id="4613072">.</span><span class="ident" id="4613073">next</span><span class="op" id="4613077">(</span><span class="op" id="4613078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613082">if</span>&nbsp;<span class="op" id="4613085">!</span><span class="ident" id="4613086">isAlphaNumeric</span><span class="op" id="4613100">(</span><span class="ident" id="4613101">r</span><span class="op" id="4613102">)</span>&nbsp;<span class="op" id="4613104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4613109">l</span><span class="op" id="4613110">.</span><span class="ident" id="4613111">backup</span><span class="op" id="4613117">(</span><span class="op" id="4613118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613123">break</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4613131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4613134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613137">if</span>&nbsp;<span class="op" id="4613140">!</span><span class="ident" id="4613141">l</span><span class="op" id="4613142">.</span><span class="ident" id="4613143">atTerminator</span><span class="op" id="4613155">(</span><span class="op" id="4613156">)</span>&nbsp;<span class="op" id="4613158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613162">return</span>&nbsp;<span class="ident" id="4613169">l</span><span class="op" id="4613170">.</span><span class="ident" id="4613171">errorf</span><span class="op" id="4613177">(</span><span class="string" id="4613178">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4613197">,</span>&nbsp;<span class="ident" id="4613199">r</span><span class="op" id="4613200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4613203">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4613206">l</span><span class="op" id="4613207">.</span><span class="ident" id="4613208">emit</span><span class="op" id="4613212">(</span><span class="ident" id="4613213">typ</span><span class="op" id="4613216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613219">return</span>&nbsp;<span class="ident" id="4613226">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4613242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4613245">//&nbsp;atTerminator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;valid&nbsp;termination&nbsp;character&nbsp;to</span><br>
<span class="lineno">415</span><span class="comment" id="4613324">//&nbsp;appear&nbsp;after&nbsp;an&nbsp;identifier.&nbsp;Breaks&nbsp;.X.Y&nbsp;into&nbsp;two&nbsp;pieces.&nbsp;Also&nbsp;catches&nbsp;cases</span><br>
<span class="lineno"></span><span class="comment" id="4613403">//&nbsp;like&nbsp;&#34;$x+2&#34;&nbsp;not&nbsp;being&nbsp;acceptable&nbsp;without&nbsp;a&nbsp;space,&nbsp;in&nbsp;case&nbsp;we&nbsp;decide&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="4613478">//&nbsp;day&nbsp;to&nbsp;implement&nbsp;arithmetic.</span><br>
<span class="lineno"></span><span class="keyword" id="4613510">func</span>&nbsp;<span class="op" id="4613515">(</span><span class="ident" id="4613516">l</span>&nbsp;<span class="op" id="4613518">*</span><span class="ident" id="4613519">lexer</span><span class="op" id="4613524">)</span>&nbsp;<span class="ident" id="4613526">atTerminator</span><span class="op" id="4613538">(</span><span class="op" id="4613539">)</span>&nbsp;<span class="builtintype" id="4613541">bool</span>&nbsp;<span class="op" id="4613546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4613549">r</span>&nbsp;<span class="op" id="4613551">:=</span>&nbsp;<span class="ident" id="4613554">l</span><span class="op" id="4613555">.</span><span class="ident" id="4613556">peek</span><span class="op" id="4613560">(</span><span class="op" id="4613561">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613564">if</span>&nbsp;<span class="ident" id="4613567">isSpace</span><span class="op" id="4613574">(</span><span class="ident" id="4613575">r</span><span class="op" id="4613576">)</span>&nbsp;<span class="op" id="4613578">||</span>&nbsp;<span class="ident" id="4613581">isEndOfLine</span><span class="op" id="4613592">(</span><span class="ident" id="4613593">r</span><span class="op" id="4613594">)</span>&nbsp;<span class="op" id="4613596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613600">return</span>&nbsp;<span class="builtintype" id="4613607">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4613613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613616">switch</span>&nbsp;<span class="ident" id="4613623">r</span>&nbsp;<span class="op" id="4613625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613628">case</span>&nbsp;<span class="ident" id="4613633">eof</span><span class="op" id="4613636">,</span>&nbsp;<span class="string" id="4613638">&#39;.&#39;</span><span class="op" id="4613641">,</span>&nbsp;<span class="string" id="4613643">&#39;,&#39;</span><span class="op" id="4613646">,</span>&nbsp;<span class="string" id="4613648">&#39;|&#39;</span><span class="op" id="4613651">,</span>&nbsp;<span class="string" id="4613653">&#39;:&#39;</span><span class="op" id="4613656">,</span>&nbsp;<span class="string" id="4613658">&#39;)&#39;</span><span class="op" id="4613661">,</span>&nbsp;<span class="string" id="4613663">&#39;(&#39;</span><span class="op" id="4613666">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613670">return</span>&nbsp;<span class="builtintype" id="4613677">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4613683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4613686">//&nbsp;Does&nbsp;r&nbsp;start&nbsp;the&nbsp;delimiter?&nbsp;This&nbsp;can&nbsp;be&nbsp;ambiguous&nbsp;(with&nbsp;delim==&#34;//&#34;,&nbsp;$x/2&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4613769">//&nbsp;succeed&nbsp;but&nbsp;should&nbsp;fail)&nbsp;but&nbsp;only&nbsp;in&nbsp;extremely&nbsp;rare&nbsp;cases&nbsp;caused&nbsp;by&nbsp;willfully</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4613851">//&nbsp;bad&nbsp;choice&nbsp;of&nbsp;delimiter.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613880">if</span>&nbsp;<span class="ident" id="4613883">rd</span><span class="op" id="4613885">,</span>&nbsp;<span class="ident" id="4613887">_</span>&nbsp;<span class="op" id="4613889">:=</span>&nbsp;<span class="ident" id="4613892">utf8</span><span class="op" id="4613896">.</span><span class="ident" id="4613897">DecodeRuneInString</span><span class="op" id="4613915">(</span><span class="ident" id="4613916">l</span><span class="op" id="4613917">.</span><span class="ident" id="4613918">rightDelim</span><span class="op" id="4613928">)</span><span class="op" id="4613929">;</span>&nbsp;<span class="ident" id="4613931">rd</span>&nbsp;<span class="op" id="4613934">==</span>&nbsp;<span class="ident" id="4613937">r</span>&nbsp;<span class="op" id="4613939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613943">return</span>&nbsp;<span class="builtintype" id="4613950">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4613956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4613959">return</span>&nbsp;<span class="builtintype" id="4613966">false</span><br>
<span class="lineno"></span><span class="op" id="4613972">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="4613975">//&nbsp;lexChar&nbsp;scans&nbsp;a&nbsp;character&nbsp;constant.&nbsp;The&nbsp;initial&nbsp;quote&nbsp;is&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="4614043">//&nbsp;scanned.&nbsp;Syntax&nbsp;checking&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><span class="keyword" id="4614094">func</span>&nbsp;<span class="ident" id="4614099">lexChar</span><span class="op" id="4614106">(</span><span class="ident" id="4614107">l</span>&nbsp;<span class="op" id="4614109">*</span><span class="ident" id="4614110">lexer</span><span class="op" id="4614115">)</span>&nbsp;<span class="ident" id="4614117">stateFn</span>&nbsp;<span class="op" id="4614125">{</span><br>
<span class="lineno"></span><span class="ident" id="4614127">Loop</span><span class="op" id="4614131">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614134">for</span>&nbsp;<span class="op" id="4614138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614142">switch</span>&nbsp;<span class="ident" id="4614149">l</span><span class="op" id="4614150">.</span><span class="ident" id="4614151">next</span><span class="op" id="4614155">(</span><span class="op" id="4614156">)</span>&nbsp;<span class="op" id="4614158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614162">case</span>&nbsp;<span class="string" id="4614167">&#39;\\&#39;</span><span class="op" id="4614171">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614176">if</span>&nbsp;<span class="ident" id="4614179">r</span>&nbsp;<span class="op" id="4614181">:=</span>&nbsp;<span class="ident" id="4614184">l</span><span class="op" id="4614185">.</span><span class="ident" id="4614186">next</span><span class="op" id="4614190">(</span><span class="op" id="4614191">)</span><span class="op" id="4614192">;</span>&nbsp;<span class="ident" id="4614194">r</span>&nbsp;<span class="op" id="4614196">!=</span>&nbsp;<span class="ident" id="4614199">eof</span>&nbsp;<span class="op" id="4614203">&amp;&amp;</span>&nbsp;<span class="ident" id="4614206">r</span>&nbsp;<span class="op" id="4614208">!=</span>&nbsp;<span class="string" id="4614211">&#39;\n&#39;</span>&nbsp;<span class="op" id="4614216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614222">break</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4614231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614236">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614250">case</span>&nbsp;<span class="ident" id="4614255">eof</span><span class="op" id="4614258">,</span>&nbsp;<span class="string" id="4614260">&#39;\n&#39;</span><span class="op" id="4614264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614269">return</span>&nbsp;<span class="ident" id="4614276">l</span><span class="op" id="4614277">.</span><span class="ident" id="4614278">errorf</span><span class="op" id="4614284">(</span><span class="string" id="4614285">&#34;unterminated&nbsp;character&nbsp;constant&#34;</span><span class="op" id="4614318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614322">case</span>&nbsp;<span class="string" id="4614327">&#39;\&#39;&#39;</span><span class="op" id="4614331">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614336">break</span>&nbsp;<span class="ident" id="4614342">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4614349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4614352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4614355">l</span><span class="op" id="4614356">.</span><span class="ident" id="4614357">emit</span><span class="op" id="4614361">(</span><span class="ident" id="4614362">itemCharConstant</span><span class="op" id="4614378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614381">return</span>&nbsp;<span class="ident" id="4614388">lexInsideAction</span><br>
<span class="lineno">455</span><span class="op" id="4614404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4614407">//&nbsp;lexNumber&nbsp;scans&nbsp;a&nbsp;number:&nbsp;decimal,&nbsp;octal,&nbsp;hex,&nbsp;float,&nbsp;or&nbsp;imaginary.&nbsp;This</span><br>
<span class="lineno"></span><span class="comment" id="4614483">//&nbsp;isn&#39;t&nbsp;a&nbsp;perfect&nbsp;number&nbsp;scanner&nbsp;-&nbsp;for&nbsp;instance&nbsp;it&nbsp;accepts&nbsp;&#34;.&#34;&nbsp;and&nbsp;&#34;0x0.2&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4614559">//&nbsp;and&nbsp;&#34;089&#34;&nbsp;-&nbsp;but&nbsp;when&nbsp;it&#39;s&nbsp;wrong&nbsp;the&nbsp;input&nbsp;is&nbsp;invalid&nbsp;and&nbsp;the&nbsp;parser&nbsp;(via</span><br>
<span class="lineno">460</span><span class="comment" id="4614635">//&nbsp;strconv)&nbsp;will&nbsp;notice.</span><br>
<span class="lineno"></span><span class="keyword" id="4614660">func</span>&nbsp;<span class="ident" id="4614665">lexNumber</span><span class="op" id="4614674">(</span><span class="ident" id="4614675">l</span>&nbsp;<span class="op" id="4614677">*</span><span class="ident" id="4614678">lexer</span><span class="op" id="4614683">)</span>&nbsp;<span class="ident" id="4614685">stateFn</span>&nbsp;<span class="op" id="4614693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614696">if</span>&nbsp;<span class="op" id="4614699">!</span><span class="ident" id="4614700">l</span><span class="op" id="4614701">.</span><span class="ident" id="4614702">scanNumber</span><span class="op" id="4614712">(</span><span class="op" id="4614713">)</span>&nbsp;<span class="op" id="4614715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614719">return</span>&nbsp;<span class="ident" id="4614726">l</span><span class="op" id="4614727">.</span><span class="ident" id="4614728">errorf</span><span class="op" id="4614734">(</span><span class="string" id="4614735">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4614758">,</span>&nbsp;<span class="ident" id="4614760">l</span><span class="op" id="4614761">.</span><span class="ident" id="4614762">input</span><span class="op" id="4614767">[</span><span class="ident" id="4614768">l</span><span class="op" id="4614769">.</span><span class="ident" id="4614770">start</span><span class="op" id="4614775">:</span><span class="ident" id="4614776">l</span><span class="op" id="4614777">.</span><span class="ident" id="4614778">pos</span><span class="op" id="4614781">]</span><span class="op" id="4614782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4614785">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614788">if</span>&nbsp;<span class="ident" id="4614791">sign</span>&nbsp;<span class="op" id="4614796">:=</span>&nbsp;<span class="ident" id="4614799">l</span><span class="op" id="4614800">.</span><span class="ident" id="4614801">peek</span><span class="op" id="4614805">(</span><span class="op" id="4614806">)</span><span class="op" id="4614807">;</span>&nbsp;<span class="ident" id="4614809">sign</span>&nbsp;<span class="op" id="4614814">==</span>&nbsp;<span class="string" id="4614817">&#39;+&#39;</span>&nbsp;<span class="op" id="4614821">||</span>&nbsp;<span class="ident" id="4614824">sign</span>&nbsp;<span class="op" id="4614829">==</span>&nbsp;<span class="string" id="4614832">&#39;-&#39;</span>&nbsp;<span class="op" id="4614836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4614840">//&nbsp;Complex:&nbsp;1+2i.&nbsp;No&nbsp;spaces,&nbsp;must&nbsp;end&nbsp;in&nbsp;&#39;i&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614888">if</span>&nbsp;<span class="op" id="4614891">!</span><span class="ident" id="4614892">l</span><span class="op" id="4614893">.</span><span class="ident" id="4614894">scanNumber</span><span class="op" id="4614904">(</span><span class="op" id="4614905">)</span>&nbsp;<span class="op" id="4614907">||</span>&nbsp;<span class="ident" id="4614910">l</span><span class="op" id="4614911">.</span><span class="ident" id="4614912">input</span><span class="op" id="4614917">[</span><span class="ident" id="4614918">l</span><span class="op" id="4614919">.</span><span class="ident" id="4614920">pos</span><span class="op" id="4614923">-</span><span class="num" id="4614924">1</span><span class="op" id="4614925">]</span>&nbsp;<span class="op" id="4614927">!=</span>&nbsp;<span class="string" id="4614930">&#39;i&#39;</span>&nbsp;<span class="op" id="4614934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4614939">return</span>&nbsp;<span class="ident" id="4614946">l</span><span class="op" id="4614947">.</span><span class="ident" id="4614948">errorf</span><span class="op" id="4614954">(</span><span class="string" id="4614955">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4614978">,</span>&nbsp;<span class="ident" id="4614980">l</span><span class="op" id="4614981">.</span><span class="ident" id="4614982">input</span><span class="op" id="4614987">[</span><span class="ident" id="4614988">l</span><span class="op" id="4614989">.</span><span class="ident" id="4614990">start</span><span class="op" id="4614995">:</span><span class="ident" id="4614996">l</span><span class="op" id="4614997">.</span><span class="ident" id="4614998">pos</span><span class="op" id="4615001">]</span><span class="op" id="4615002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615006">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615010">l</span><span class="op" id="4615011">.</span><span class="ident" id="4615012">emit</span><span class="op" id="4615016">(</span><span class="ident" id="4615017">itemComplex</span><span class="op" id="4615028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615031">}</span>&nbsp;<span class="keyword" id="4615033">else</span>&nbsp;<span class="op" id="4615038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615042">l</span><span class="op" id="4615043">.</span><span class="ident" id="4615044">emit</span><span class="op" id="4615048">(</span><span class="ident" id="4615049">itemNumber</span><span class="op" id="4615059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615065">return</span>&nbsp;<span class="ident" id="4615072">lexInsideAction</span><br>
<span class="lineno">475</span><span class="op" id="4615088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4615091">func</span>&nbsp;<span class="op" id="4615096">(</span><span class="ident" id="4615097">l</span>&nbsp;<span class="op" id="4615099">*</span><span class="ident" id="4615100">lexer</span><span class="op" id="4615105">)</span>&nbsp;<span class="ident" id="4615107">scanNumber</span><span class="op" id="4615117">(</span><span class="op" id="4615118">)</span>&nbsp;<span class="builtintype" id="4615120">bool</span>&nbsp;<span class="op" id="4615125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4615128">//&nbsp;Optional&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615155">l</span><span class="op" id="4615156">.</span><span class="ident" id="4615157">accept</span><span class="op" id="4615163">(</span><span class="string" id="4615164">&#34;+-&#34;</span><span class="op" id="4615168">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4615171">//&nbsp;Is&nbsp;it&nbsp;hex?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615186">digits</span>&nbsp;<span class="op" id="4615193">:=</span>&nbsp;<span class="string" id="4615196">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615210">if</span>&nbsp;<span class="ident" id="4615213">l</span><span class="op" id="4615214">.</span><span class="ident" id="4615215">accept</span><span class="op" id="4615221">(</span><span class="string" id="4615222">&#34;0&#34;</span><span class="op" id="4615225">)</span>&nbsp;<span class="op" id="4615227">&amp;&amp;</span>&nbsp;<span class="ident" id="4615230">l</span><span class="op" id="4615231">.</span><span class="ident" id="4615232">accept</span><span class="op" id="4615238">(</span><span class="string" id="4615239">&#34;xX&#34;</span><span class="op" id="4615243">)</span>&nbsp;<span class="op" id="4615245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615249">digits</span>&nbsp;<span class="op" id="4615256">=</span>&nbsp;<span class="string" id="4615258">&#34;0123456789abcdefABCDEF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615284">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615287">l</span><span class="op" id="4615288">.</span><span class="ident" id="4615289">acceptRun</span><span class="op" id="4615298">(</span><span class="ident" id="4615299">digits</span><span class="op" id="4615305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615308">if</span>&nbsp;<span class="ident" id="4615311">l</span><span class="op" id="4615312">.</span><span class="ident" id="4615313">accept</span><span class="op" id="4615319">(</span><span class="string" id="4615320">&#34;.&#34;</span><span class="op" id="4615323">)</span>&nbsp;<span class="op" id="4615325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615329">l</span><span class="op" id="4615330">.</span><span class="ident" id="4615331">acceptRun</span><span class="op" id="4615340">(</span><span class="ident" id="4615341">digits</span><span class="op" id="4615347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615353">if</span>&nbsp;<span class="ident" id="4615356">l</span><span class="op" id="4615357">.</span><span class="ident" id="4615358">accept</span><span class="op" id="4615364">(</span><span class="string" id="4615365">&#34;eE&#34;</span><span class="op" id="4615369">)</span>&nbsp;<span class="op" id="4615371">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615375">l</span><span class="op" id="4615376">.</span><span class="ident" id="4615377">accept</span><span class="op" id="4615383">(</span><span class="string" id="4615384">&#34;+-&#34;</span><span class="op" id="4615388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615392">l</span><span class="op" id="4615393">.</span><span class="ident" id="4615394">acceptRun</span><span class="op" id="4615403">(</span><span class="string" id="4615404">&#34;0123456789&#34;</span><span class="op" id="4615416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4615422">//&nbsp;Is&nbsp;it&nbsp;imaginary?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615443">l</span><span class="op" id="4615444">.</span><span class="ident" id="4615445">accept</span><span class="op" id="4615451">(</span><span class="string" id="4615452">&#34;i&#34;</span><span class="op" id="4615455">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4615458">//&nbsp;Next&nbsp;thing&nbsp;mustn&#39;t&nbsp;be&nbsp;alphanumeric.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615498">if</span>&nbsp;<span class="ident" id="4615501">isAlphaNumeric</span><span class="op" id="4615515">(</span><span class="ident" id="4615516">l</span><span class="op" id="4615517">.</span><span class="ident" id="4615518">peek</span><span class="op" id="4615522">(</span><span class="op" id="4615523">)</span><span class="op" id="4615524">)</span>&nbsp;<span class="op" id="4615526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615530">l</span><span class="op" id="4615531">.</span><span class="ident" id="4615532">next</span><span class="op" id="4615536">(</span><span class="op" id="4615537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615541">return</span>&nbsp;<span class="builtintype" id="4615548">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615555">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615558">return</span>&nbsp;<span class="builtintype" id="4615565">true</span><br>
<span class="lineno"></span><span class="op" id="4615570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4615573">//&nbsp;lexQuote&nbsp;scans&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4615608">func</span>&nbsp;<span class="ident" id="4615613">lexQuote</span><span class="op" id="4615621">(</span><span class="ident" id="4615622">l</span>&nbsp;<span class="op" id="4615624">*</span><span class="ident" id="4615625">lexer</span><span class="op" id="4615630">)</span>&nbsp;<span class="ident" id="4615632">stateFn</span>&nbsp;<span class="op" id="4615640">{</span><br>
<span class="lineno">505</span><span class="ident" id="4615642">Loop</span><span class="op" id="4615646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615649">for</span>&nbsp;<span class="op" id="4615653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615657">switch</span>&nbsp;<span class="ident" id="4615664">l</span><span class="op" id="4615665">.</span><span class="ident" id="4615666">next</span><span class="op" id="4615670">(</span><span class="op" id="4615671">)</span>&nbsp;<span class="op" id="4615673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615677">case</span>&nbsp;<span class="string" id="4615682">&#39;\\&#39;</span><span class="op" id="4615686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615691">if</span>&nbsp;<span class="ident" id="4615694">r</span>&nbsp;<span class="op" id="4615696">:=</span>&nbsp;<span class="ident" id="4615699">l</span><span class="op" id="4615700">.</span><span class="ident" id="4615701">next</span><span class="op" id="4615705">(</span><span class="op" id="4615706">)</span><span class="op" id="4615707">;</span>&nbsp;<span class="ident" id="4615709">r</span>&nbsp;<span class="op" id="4615711">!=</span>&nbsp;<span class="ident" id="4615714">eof</span>&nbsp;<span class="op" id="4615718">&amp;&amp;</span>&nbsp;<span class="ident" id="4615721">r</span>&nbsp;<span class="op" id="4615723">!=</span>&nbsp;<span class="string" id="4615726">&#39;\n&#39;</span>&nbsp;<span class="op" id="4615731">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615737">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615751">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615765">case</span>&nbsp;<span class="ident" id="4615770">eof</span><span class="op" id="4615773">,</span>&nbsp;<span class="string" id="4615775">&#39;\n&#39;</span><span class="op" id="4615779">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615784">return</span>&nbsp;<span class="ident" id="4615791">l</span><span class="op" id="4615792">.</span><span class="ident" id="4615793">errorf</span><span class="op" id="4615799">(</span><span class="string" id="4615800">&#34;unterminated&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="4615828">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615832">case</span>&nbsp;<span class="string" id="4615837">&#39;&#34;&#39;</span><span class="op" id="4615840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615845">break</span>&nbsp;<span class="ident" id="4615851">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4615861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4615864">l</span><span class="op" id="4615865">.</span><span class="ident" id="4615866">emit</span><span class="op" id="4615870">(</span><span class="ident" id="4615871">itemString</span><span class="op" id="4615881">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615884">return</span>&nbsp;<span class="ident" id="4615891">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4615907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4615910">//&nbsp;lexRawQuote&nbsp;scans&nbsp;a&nbsp;raw&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4615952">func</span>&nbsp;<span class="ident" id="4615957">lexRawQuote</span><span class="op" id="4615968">(</span><span class="ident" id="4615969">l</span>&nbsp;<span class="op" id="4615971">*</span><span class="ident" id="4615972">lexer</span><span class="op" id="4615977">)</span>&nbsp;<span class="ident" id="4615979">stateFn</span>&nbsp;<span class="op" id="4615987">{</span><br>
<span class="lineno">525</span><span class="ident" id="4615989">Loop</span><span class="op" id="4615993">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4615996">for</span>&nbsp;<span class="op" id="4616000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616004">switch</span>&nbsp;<span class="ident" id="4616011">l</span><span class="op" id="4616012">.</span><span class="ident" id="4616013">next</span><span class="op" id="4616017">(</span><span class="op" id="4616018">)</span>&nbsp;<span class="op" id="4616020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616024">case</span>&nbsp;<span class="ident" id="4616029">eof</span><span class="op" id="4616032">,</span>&nbsp;<span class="string" id="4616034">&#39;\n&#39;</span><span class="op" id="4616038">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616043">return</span>&nbsp;<span class="ident" id="4616050">l</span><span class="op" id="4616051">.</span><span class="ident" id="4616052">errorf</span><span class="op" id="4616058">(</span><span class="string" id="4616059">&#34;unterminated&nbsp;raw&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="4616091">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616095">case</span>&nbsp;<span class="string" id="4616100">&#39;`&#39;</span><span class="op" id="4616103">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616108">break</span>&nbsp;<span class="ident" id="4616114">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4616121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4616124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4616127">l</span><span class="op" id="4616128">.</span><span class="ident" id="4616129">emit</span><span class="op" id="4616133">(</span><span class="ident" id="4616134">itemRawString</span><span class="op" id="4616147">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616150">return</span>&nbsp;<span class="ident" id="4616157">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4616173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4616176">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;a&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4616227">func</span>&nbsp;<span class="ident" id="4616232">isSpace</span><span class="op" id="4616239">(</span><span class="ident" id="4616240">r</span>&nbsp;<span class="builtintype" id="4616242">rune</span><span class="op" id="4616246">)</span>&nbsp;<span class="builtintype" id="4616248">bool</span>&nbsp;<span class="op" id="4616253">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616256">return</span>&nbsp;<span class="ident" id="4616263">r</span>&nbsp;<span class="op" id="4616265">==</span>&nbsp;<span class="string" id="4616268">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4616272">||</span>&nbsp;<span class="ident" id="4616275">r</span>&nbsp;<span class="op" id="4616277">==</span>&nbsp;<span class="string" id="4616280">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="4616285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4616288">//&nbsp;isEndOfLine&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;end-of-line&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4616350">func</span>&nbsp;<span class="ident" id="4616355">isEndOfLine</span><span class="op" id="4616366">(</span><span class="ident" id="4616367">r</span>&nbsp;<span class="builtintype" id="4616369">rune</span><span class="op" id="4616373">)</span>&nbsp;<span class="builtintype" id="4616375">bool</span>&nbsp;<span class="op" id="4616380">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616383">return</span>&nbsp;<span class="ident" id="4616390">r</span>&nbsp;<span class="op" id="4616392">==</span>&nbsp;<span class="string" id="4616395">&#39;\r&#39;</span>&nbsp;<span class="op" id="4616400">||</span>&nbsp;<span class="ident" id="4616403">r</span>&nbsp;<span class="op" id="4616405">==</span>&nbsp;<span class="string" id="4616408">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="4616413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4616416">//&nbsp;isAlphaNumeric&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;alphabetic,&nbsp;digit,&nbsp;or&nbsp;underscore.</span><br>
<span class="lineno"></span><span class="keyword" id="4616492">func</span>&nbsp;<span class="ident" id="4616497">isAlphaNumeric</span><span class="op" id="4616511">(</span><span class="ident" id="4616512">r</span>&nbsp;<span class="builtintype" id="4616514">rune</span><span class="op" id="4616518">)</span>&nbsp;<span class="builtintype" id="4616520">bool</span>&nbsp;<span class="op" id="4616525">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4616528">return</span>&nbsp;<span class="ident" id="4616535">r</span>&nbsp;<span class="op" id="4616537">==</span>&nbsp;<span class="string" id="4616540">&#39;_&#39;</span>&nbsp;<span class="op" id="4616544">||</span>&nbsp;<span class="ident" id="4616547">unicode</span><span class="op" id="4616554">.</span><span class="ident" id="4616555">IsLetter</span><span class="op" id="4616563">(</span><span class="ident" id="4616564">r</span><span class="op" id="4616565">)</span>&nbsp;<span class="op" id="4616567">||</span>&nbsp;<span class="ident" id="4616570">unicode</span><span class="op" id="4616577">.</span><span class="ident" id="4616578">IsDigit</span><span class="op" id="4616585">(</span><span class="ident" id="4616586">r</span><span class="op" id="4616587">)</span><br>
<span class="lineno"></span><span class="op" id="4616589">}</span>
</div>
</body>
</html>
