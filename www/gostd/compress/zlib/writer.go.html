<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/zlib</h2>
<ul>
<li><a href="/gostd/compress/zlib/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/compress/zlib/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/zlib/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/zlib/writer.go.html" class="current">writer.go</a></li>
<li><a href="/gostd/compress/zlib/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5708716">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5708771">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5708825">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5708876">package</span>&nbsp;<span class="ident" id="5708884">zlib</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5708890">import</span>&nbsp;<span class="op" id="5708897">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5708900">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5708918">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5708925">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5708933">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5708949">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5708954">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5708957">//&nbsp;These&nbsp;constants&nbsp;are&nbsp;copied&nbsp;from&nbsp;the&nbsp;flate&nbsp;package,&nbsp;so&nbsp;that&nbsp;code&nbsp;that&nbsp;imports</span><br>
<span class="lineno"></span><span class="comment" id="5709037">//&nbsp;&#34;compress/zlib&#34;&nbsp;does&nbsp;not&nbsp;also&nbsp;have&nbsp;to&nbsp;import&nbsp;&#34;compress/flate&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5709103">const</span>&nbsp;<span class="op" id="5709109">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709112">NoCompression</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5709131">=</span>&nbsp;<span class="ident" id="5709133"><a href="/gostd/compress/zlib/writer.go.html#5708900">flate</a></span><span class="op" id="5709138">.</span><span class="ident" id="5709139"><a href="/gostd/compress/flate/deflate.go.html#4792285">NoCompression</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709154">BestSpeed</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5709173">=</span>&nbsp;<span class="ident" id="5709175"><a href="/gostd/compress/zlib/writer.go.html#5708900">flate</a></span><span class="op" id="5709180">.</span><span class="ident" id="5709181"><a href="/gostd/compress/flate/deflate.go.html#4792309">BestSpeed</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709192">BestCompression</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5709211">=</span>&nbsp;<span class="ident" id="5709213"><a href="/gostd/compress/zlib/writer.go.html#5708900">flate</a></span><span class="op" id="5709218">.</span><span class="ident" id="5709219"><a href="/gostd/compress/flate/deflate.go.html#4792357">BestCompression</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709236">DefaultCompression</span>&nbsp;<span class="op" id="5709255">=</span>&nbsp;<span class="ident" id="5709257"><a href="/gostd/compress/zlib/writer.go.html#5708900">flate</a></span><span class="op" id="5709262">.</span><span class="ident" id="5709263"><a href="/gostd/compress/flate/deflate.go.html#4792381">DefaultCompression</a></span><br>
<span class="lineno"></span><span class="op" id="5709282">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5709285">//&nbsp;A&nbsp;Writer&nbsp;takes&nbsp;data&nbsp;written&nbsp;to&nbsp;it&nbsp;and&nbsp;writes&nbsp;the&nbsp;compressed</span><br>
<span class="lineno">25</span><span class="comment" id="5709348">//&nbsp;form&nbsp;of&nbsp;that&nbsp;data&nbsp;to&nbsp;an&nbsp;underlying&nbsp;writer&nbsp;(see&nbsp;NewWriter).</span><br>
<span class="lineno"></span><span class="keyword" id="5709410">type</span>&nbsp;<span class="ident" id="5709415">Writer</span>&nbsp;<span class="keyword" id="5709422">struct</span>&nbsp;<span class="op" id="5709429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709432">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709444"><a href="/gostd/compress/zlib/writer.go.html#5708949">io</a></span><span class="op" id="5709446">.</span><span class="ident" id="5709447"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709455">level</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5709467">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709472">dict</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5709484">[</span><span class="op" id="5709485">]</span><span class="builtintype" id="5709486">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709492">compressor</span>&nbsp;&nbsp;<span class="op" id="5709504">*</span><span class="ident" id="5709505"><a href="/gostd/compress/zlib/writer.go.html#5708900">flate</a></span><span class="op" id="5709510">.</span><span class="ident" id="5709511"><a href="/gostd/compress/flate/deflate.go.html#4806024">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709519">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709531"><a href="/gostd/compress/zlib/writer.go.html#5708925">hash</a></span><span class="op" id="5709535">.</span><span class="ident" id="5709536"><a href="/gostd/hash/hash.go.html#3014832">Hash32</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709544">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5709556">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709563">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5709575">[</span><span class="num" id="5709576">4</span><span class="op" id="5709577">]</span><span class="builtintype" id="5709578">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709584">wroteHeader</span>&nbsp;<span class="builtintype" id="5709596">bool</span><br>
<span class="lineno">35</span><span class="op" id="5709601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5709604">//&nbsp;NewWriter&nbsp;creates&nbsp;a&nbsp;new&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="comment" id="5709639">//&nbsp;Writes&nbsp;to&nbsp;the&nbsp;returned&nbsp;Writer&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="comment" id="5709705">//</span><br>
<span class="lineno">40</span><span class="comment" id="5709708">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;WriteCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5709789">//&nbsp;Writes&nbsp;may&nbsp;be&nbsp;buffered&nbsp;and&nbsp;not&nbsp;flushed&nbsp;until&nbsp;Close.</span><br>
<span class="lineno"></span><span class="keyword" id="5709844">func</span>&nbsp;<span class="ident" id="5709849">NewWriter</span><span class="op" id="5709858">(</span><span class="ident" id="5709859">w</span>&nbsp;<span class="ident" id="5709861"><a href="/gostd/compress/zlib/writer.go.html#5708949">io</a></span><span class="op" id="5709863">.</span><span class="ident" id="5709864"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="5709870">)</span>&nbsp;<span class="op" id="5709872">*</span><span class="ident" id="5709873"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span>&nbsp;<span class="op" id="5709880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709883">z</span><span class="op" id="5709884">,</span>&nbsp;<span class="ident" id="5709886">_</span>&nbsp;<span class="op" id="5709888">:=</span>&nbsp;<span class="ident" id="5709891"><a href="/gostd/compress/zlib/writer.go.html#5710580">NewWriterLevelDict</a></span><span class="op" id="5709909">(</span><span class="ident" id="5709910"><a href="/gostd/compress/zlib/writer.go.html#5709859">w</a></span><span class="op" id="5709911">,</span>&nbsp;<span class="ident" id="5709913"><a href="/gostd/compress/zlib/writer.go.html#5709236">DefaultCompression</a></span><span class="op" id="5709931">,</span>&nbsp;<span class="builtintype" id="5709933">nil</span><span class="op" id="5709936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5709939">return</span>&nbsp;<span class="ident" id="5709946"><a href="/gostd/compress/zlib/writer.go.html#5709883">z</a></span><br>
<span class="lineno">45</span><span class="op" id="5709948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5709951">//&nbsp;NewWriterLevel&nbsp;is&nbsp;like&nbsp;NewWriter&nbsp;but&nbsp;specifies&nbsp;the&nbsp;compression&nbsp;level&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="5710031">//&nbsp;of&nbsp;assuming&nbsp;DefaultCompression.</span><br>
<span class="lineno"></span><span class="comment" id="5710066">//</span><br>
<span class="lineno">50</span><span class="comment" id="5710069">//&nbsp;The&nbsp;compression&nbsp;level&nbsp;can&nbsp;be&nbsp;DefaultCompression,&nbsp;NoCompression,&nbsp;or&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="5710143">//&nbsp;integer&nbsp;value&nbsp;between&nbsp;BestSpeed&nbsp;and&nbsp;BestCompression&nbsp;inclusive.&nbsp;The&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="5710219">//&nbsp;returned&nbsp;will&nbsp;be&nbsp;nil&nbsp;if&nbsp;the&nbsp;level&nbsp;is&nbsp;valid.</span><br>
<span class="lineno"></span><span class="keyword" id="5710266">func</span>&nbsp;<span class="ident" id="5710271">NewWriterLevel</span><span class="op" id="5710285">(</span><span class="ident" id="5710286">w</span>&nbsp;<span class="ident" id="5710288"><a href="/gostd/compress/zlib/writer.go.html#5708949">io</a></span><span class="op" id="5710290">.</span><span class="ident" id="5710291"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="5710297">,</span>&nbsp;<span class="ident" id="5710299">level</span>&nbsp;<span class="builtintype" id="5710305">int</span><span class="op" id="5710308">)</span>&nbsp;<span class="op" id="5710310">(</span><span class="op" id="5710311">*</span><span class="ident" id="5710312"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span><span class="op" id="5710318">,</span>&nbsp;<span class="builtintype" id="5710320">error</span><span class="op" id="5710325">)</span>&nbsp;<span class="op" id="5710327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5710330">return</span>&nbsp;<span class="ident" id="5710337"><a href="/gostd/compress/zlib/writer.go.html#5710580">NewWriterLevelDict</a></span><span class="op" id="5710355">(</span><span class="ident" id="5710356"><a href="/gostd/compress/zlib/writer.go.html#5710286">w</a></span><span class="op" id="5710357">,</span>&nbsp;<span class="ident" id="5710359"><a href="/gostd/compress/zlib/writer.go.html#5710299">level</a></span><span class="op" id="5710364">,</span>&nbsp;<span class="builtintype" id="5710366">nil</span><span class="op" id="5710369">)</span><br>
<span class="lineno">55</span><span class="op" id="5710371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5710374">//&nbsp;NewWriterLevelDict&nbsp;is&nbsp;like&nbsp;NewWriterLevel&nbsp;but&nbsp;specifies&nbsp;a&nbsp;dictionary&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5710449">//&nbsp;compress&nbsp;with.</span><br>
<span class="lineno"></span><span class="comment" id="5710467">//</span><br>
<span class="lineno">60</span><span class="comment" id="5710470">//&nbsp;The&nbsp;dictionary&nbsp;may&nbsp;be&nbsp;nil.&nbsp;If&nbsp;not,&nbsp;its&nbsp;contents&nbsp;should&nbsp;not&nbsp;be&nbsp;modified&nbsp;until</span><br>
<span class="lineno"></span><span class="comment" id="5710550">//&nbsp;the&nbsp;Writer&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="5710575">func</span>&nbsp;<span class="ident" id="5710580">NewWriterLevelDict</span><span class="op" id="5710598">(</span><span class="ident" id="5710599">w</span>&nbsp;<span class="ident" id="5710601"><a href="/gostd/compress/zlib/writer.go.html#5708949">io</a></span><span class="op" id="5710603">.</span><span class="ident" id="5710604"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="5710610">,</span>&nbsp;<span class="ident" id="5710612">level</span>&nbsp;<span class="builtintype" id="5710618">int</span><span class="op" id="5710621">,</span>&nbsp;<span class="ident" id="5710623">dict</span>&nbsp;<span class="op" id="5710628">[</span><span class="op" id="5710629">]</span><span class="builtintype" id="5710630">byte</span><span class="op" id="5710634">)</span>&nbsp;<span class="op" id="5710636">(</span><span class="op" id="5710637">*</span><span class="ident" id="5710638"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span><span class="op" id="5710644">,</span>&nbsp;<span class="builtintype" id="5710646">error</span><span class="op" id="5710651">)</span>&nbsp;<span class="op" id="5710653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5710656">if</span>&nbsp;<span class="ident" id="5710659"><a href="/gostd/compress/zlib/writer.go.html#5710612">level</a></span>&nbsp;<span class="op" id="5710665">&lt;</span>&nbsp;<span class="ident" id="5710667"><a href="/gostd/compress/zlib/writer.go.html#5709236">DefaultCompression</a></span>&nbsp;<span class="op" id="5710686">||</span>&nbsp;<span class="ident" id="5710689"><a href="/gostd/compress/zlib/writer.go.html#5710612">level</a></span>&nbsp;<span class="op" id="5710695">&gt;</span>&nbsp;<span class="ident" id="5710697"><a href="/gostd/compress/zlib/writer.go.html#5709192">BestCompression</a></span>&nbsp;<span class="op" id="5710713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5710717">return</span>&nbsp;<span class="builtintype" id="5710724">nil</span><span class="op" id="5710727">,</span>&nbsp;<span class="ident" id="5710729"><a href="/gostd/compress/zlib/writer.go.html#5708918">fmt</a></span><span class="op" id="5710732">.</span><span class="ident" id="5710733"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5710739">(</span><span class="string" id="5710740">&#34;zlib:&nbsp;invalid&nbsp;compression&nbsp;level:&nbsp;%d&#34;</span><span class="op" id="5710777">,</span>&nbsp;<span class="ident" id="5710779"><a href="/gostd/compress/zlib/writer.go.html#5710612">level</a></span><span class="op" id="5710784">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5710787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5710790">return</span>&nbsp;<span class="op" id="5710797">&amp;</span><span class="ident" id="5710798"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span><span class="op" id="5710804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5710808"><a href="/gostd/compress/zlib/writer.go.html#5709432">w</a></span><span class="op" id="5710809">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5710815"><a href="/gostd/compress/zlib/writer.go.html#5710599">w</a></span><span class="op" id="5710816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5710820"><a href="/gostd/compress/zlib/writer.go.html#5709455">level</a></span><span class="op" id="5710825">:</span>&nbsp;<span class="ident" id="5710827"><a href="/gostd/compress/zlib/writer.go.html#5710612">level</a></span><span class="op" id="5710832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5710836"><a href="/gostd/compress/zlib/writer.go.html#5709472">dict</a></span><span class="op" id="5710840">:</span>&nbsp;&nbsp;<span class="ident" id="5710843"><a href="/gostd/compress/zlib/writer.go.html#5710623">dict</a></span><span class="op" id="5710847">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5710850">}</span><span class="op" id="5710851">,</span>&nbsp;<span class="builtintype" id="5710853">nil</span><br>
<span class="lineno"></span><span class="op" id="5710857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5710860">//&nbsp;Reset&nbsp;clears&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;Writer&nbsp;z&nbsp;such&nbsp;that&nbsp;it&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="5710936">//&nbsp;initial&nbsp;state&nbsp;from&nbsp;NewWriterLevel&nbsp;or&nbsp;NewWriterLevelDict,&nbsp;but&nbsp;instead&nbsp;writing</span><br>
<span class="lineno">75</span><span class="comment" id="5711016">//&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="5711025">func</span>&nbsp;<span class="op" id="5711030">(</span><span class="ident" id="5711031">z</span>&nbsp;<span class="op" id="5711033">*</span><span class="ident" id="5711034"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span><span class="op" id="5711040">)</span>&nbsp;<span class="ident" id="5711042">Reset</span><span class="op" id="5711047">(</span><span class="ident" id="5711048">w</span>&nbsp;<span class="ident" id="5711050"><a href="/gostd/compress/zlib/writer.go.html#5708949">io</a></span><span class="op" id="5711052">.</span><span class="ident" id="5711053"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="5711059">)</span>&nbsp;<span class="op" id="5711061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711064"><a href="/gostd/compress/zlib/writer.go.html#5711031">z</a></span><span class="op" id="5711065">.</span><span class="ident" id="5711066"><a href="/gostd/compress/zlib/writer.go.html#5709432">w</a></span>&nbsp;<span class="op" id="5711068">=</span>&nbsp;<span class="ident" id="5711070"><a href="/gostd/compress/zlib/writer.go.html#5711048">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5711073">//&nbsp;z.level&nbsp;and&nbsp;z.dict&nbsp;left&nbsp;unchanged.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5711112">if</span>&nbsp;<span class="ident" id="5711115"><a href="/gostd/compress/zlib/writer.go.html#5711031">z</a></span><span class="op" id="5711116">.</span><span class="ident" id="5711117"><a href="/gostd/compress/zlib/writer.go.html#5709492">compressor</a></span>&nbsp;<span class="op" id="5711128">!=</span>&nbsp;<span class="builtintype" id="5711131">nil</span>&nbsp;<span class="op" id="5711135">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711139"><a href="/gostd/compress/zlib/writer.go.html#5711031">z</a></span><span class="op" id="5711140">.</span><span class="ident" id="5711141"><a href="/gostd/compress/zlib/writer.go.html#5709492">compressor</a></span><span class="op" id="5711151">.</span><span class="ident" id="5711152"><a href="/gostd/compress/flate/deflate.go.html#4807095">Reset</a></span><span class="op" id="5711157">(</span><span class="ident" id="5711158"><a href="/gostd/compress/zlib/writer.go.html#5711048">w</a></span><span class="op" id="5711159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5711162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5711165">if</span>&nbsp;<span class="ident" id="5711168"><a href="/gostd/compress/zlib/writer.go.html#5711031">z</a></span><span class="op" id="5711169">.</span><span class="ident" id="5711170"><a href="/gostd/compress/zlib/writer.go.html#5709519">digest</a></span>&nbsp;<span class="op" id="5711177">!=</span>&nbsp;<span class="builtintype" id="5711180">nil</span>&nbsp;<span class="op" id="5711184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711188"><a href="/gostd/compress/zlib/writer.go.html#5711031">z</a></span><span class="op" id="5711189">.</span><span class="ident" id="5711190"><a href="/gostd/compress/zlib/writer.go.html#5709519">digest</a></span><span class="op" id="5711196">.</span><span class="ident" id="5711197"><a href="/gostd/hash/hash.go.html#3014443">Reset</a></span><span class="op" id="5711202">(</span><span class="op" id="5711203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5711206">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711209"><a href="/gostd/compress/zlib/writer.go.html#5711031">z</a></span><span class="op" id="5711210">.</span><span class="ident" id="5711211"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5711215">=</span>&nbsp;<span class="builtintype" id="5711217">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711222"><a href="/gostd/compress/zlib/writer.go.html#5711031">z</a></span><span class="op" id="5711223">.</span><span class="ident" id="5711224"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span>&nbsp;<span class="op" id="5711232">=</span>&nbsp;<span class="op" id="5711234">[</span><span class="num" id="5711235">4</span><span class="op" id="5711236">]</span><span class="builtintype" id="5711237">byte</span><span class="op" id="5711241">{</span><span class="op" id="5711242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711245"><a href="/gostd/compress/zlib/writer.go.html#5711031">z</a></span><span class="op" id="5711246">.</span><span class="ident" id="5711247"><a href="/gostd/compress/zlib/writer.go.html#5709584">wroteHeader</a></span>&nbsp;<span class="op" id="5711259">=</span>&nbsp;<span class="builtintype" id="5711261">false</span><br>
<span class="lineno"></span><span class="op" id="5711267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="5711270">//&nbsp;writeHeader&nbsp;writes&nbsp;the&nbsp;ZLIB&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="5711309">func</span>&nbsp;<span class="op" id="5711314">(</span><span class="ident" id="5711315">z</span>&nbsp;<span class="op" id="5711317">*</span><span class="ident" id="5711318"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span><span class="op" id="5711324">)</span>&nbsp;<span class="ident" id="5711326">writeHeader</span><span class="op" id="5711337">(</span><span class="op" id="5711338">)</span>&nbsp;<span class="op" id="5711340">(</span><span class="ident" id="5711341">err</span>&nbsp;<span class="builtintype" id="5711345">error</span><span class="op" id="5711350">)</span>&nbsp;<span class="op" id="5711352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711355"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5711356">.</span><span class="ident" id="5711357"><a href="/gostd/compress/zlib/writer.go.html#5709584">wroteHeader</a></span>&nbsp;<span class="op" id="5711369">=</span>&nbsp;<span class="builtintype" id="5711371">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5711377">//&nbsp;ZLIB&nbsp;has&nbsp;a&nbsp;two-byte&nbsp;header&nbsp;(as&nbsp;documented&nbsp;in&nbsp;RFC&nbsp;1950).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5711437">//&nbsp;The&nbsp;first&nbsp;four&nbsp;bits&nbsp;is&nbsp;the&nbsp;CINFO&nbsp;(compression&nbsp;info),&nbsp;which&nbsp;is&nbsp;7&nbsp;for&nbsp;the&nbsp;default&nbsp;deflate&nbsp;window&nbsp;size.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5711542">//&nbsp;The&nbsp;next&nbsp;four&nbsp;bits&nbsp;is&nbsp;the&nbsp;CM&nbsp;(compression&nbsp;method),&nbsp;which&nbsp;is&nbsp;8&nbsp;for&nbsp;deflate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711621"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5711622">.</span><span class="ident" id="5711623"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5711630">[</span><span class="num" id="5711631">0</span><span class="op" id="5711632">]</span>&nbsp;<span class="op" id="5711634">=</span>&nbsp;<span class="num" id="5711636">0x78</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5711642">//&nbsp;The&nbsp;next&nbsp;two&nbsp;bits&nbsp;is&nbsp;the&nbsp;FLEVEL&nbsp;(compression&nbsp;level).&nbsp;The&nbsp;four&nbsp;values&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5711720">//&nbsp;0=fastest,&nbsp;1=fast,&nbsp;2=default,&nbsp;3=best.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5711762">//&nbsp;The&nbsp;next&nbsp;bit,&nbsp;FDICT,&nbsp;is&nbsp;set&nbsp;if&nbsp;a&nbsp;dictionary&nbsp;is&nbsp;given.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5711820">//&nbsp;The&nbsp;final&nbsp;five&nbsp;FCHECK&nbsp;bits&nbsp;form&nbsp;a&nbsp;mod-31&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5711875">switch</span>&nbsp;<span class="ident" id="5711882"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5711883">.</span><span class="ident" id="5711884"><a href="/gostd/compress/zlib/writer.go.html#5709455">level</a></span>&nbsp;<span class="op" id="5711890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5711893">case</span>&nbsp;<span class="num" id="5711898">0</span><span class="op" id="5711899">,</span>&nbsp;<span class="num" id="5711901">1</span><span class="op" id="5711902">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711906"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5711907">.</span><span class="ident" id="5711908"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5711915">[</span><span class="num" id="5711916">1</span><span class="op" id="5711917">]</span>&nbsp;<span class="op" id="5711919">=</span>&nbsp;<span class="num" id="5711921">0</span>&nbsp;<span class="op" id="5711923">&lt;&lt;</span>&nbsp;<span class="num" id="5711926">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5711929">case</span>&nbsp;<span class="num" id="5711934">2</span><span class="op" id="5711935">,</span>&nbsp;<span class="num" id="5711937">3</span><span class="op" id="5711938">,</span>&nbsp;<span class="num" id="5711940">4</span><span class="op" id="5711941">,</span>&nbsp;<span class="num" id="5711943">5</span><span class="op" id="5711944">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711948"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5711949">.</span><span class="ident" id="5711950"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5711957">[</span><span class="num" id="5711958">1</span><span class="op" id="5711959">]</span>&nbsp;<span class="op" id="5711961">=</span>&nbsp;<span class="num" id="5711963">1</span>&nbsp;<span class="op" id="5711965">&lt;&lt;</span>&nbsp;<span class="num" id="5711968">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5711971">case</span>&nbsp;<span class="num" id="5711976">6</span><span class="op" id="5711977">,</span>&nbsp;<span class="op" id="5711979">-</span><span class="num" id="5711980">1</span><span class="op" id="5711981">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5711985"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5711986">.</span><span class="ident" id="5711987"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5711994">[</span><span class="num" id="5711995">1</span><span class="op" id="5711996">]</span>&nbsp;<span class="op" id="5711998">=</span>&nbsp;<span class="num" id="5712000">2</span>&nbsp;<span class="op" id="5712002">&lt;&lt;</span>&nbsp;<span class="num" id="5712005">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712008">case</span>&nbsp;<span class="num" id="5712013">7</span><span class="op" id="5712014">,</span>&nbsp;<span class="num" id="5712016">8</span><span class="op" id="5712017">,</span>&nbsp;<span class="num" id="5712019">9</span><span class="op" id="5712020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712024"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712025">.</span><span class="ident" id="5712026"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712033">[</span><span class="num" id="5712034">1</span><span class="op" id="5712035">]</span>&nbsp;<span class="op" id="5712037">=</span>&nbsp;<span class="num" id="5712039">3</span>&nbsp;<span class="op" id="5712041">&lt;&lt;</span>&nbsp;<span class="num" id="5712044">6</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712047">default</span><span class="op" id="5712054">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5712058">panic</span><span class="op" id="5712063">(</span><span class="string" id="5712064">&#34;unreachable&#34;</span><span class="op" id="5712077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5712080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712083">if</span>&nbsp;<span class="ident" id="5712086"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712087">.</span><span class="ident" id="5712088"><a href="/gostd/compress/zlib/writer.go.html#5709472">dict</a></span>&nbsp;<span class="op" id="5712093">!=</span>&nbsp;<span class="builtintype" id="5712096">nil</span>&nbsp;<span class="op" id="5712100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712104"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712105">.</span><span class="ident" id="5712106"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712113">[</span><span class="num" id="5712114">1</span><span class="op" id="5712115">]</span>&nbsp;<span class="op" id="5712117">|=</span>&nbsp;<span class="num" id="5712120">1</span>&nbsp;<span class="op" id="5712122">&lt;&lt;</span>&nbsp;<span class="num" id="5712125">5</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5712128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712131"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712132">.</span><span class="ident" id="5712133"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712140">[</span><span class="num" id="5712141">1</span><span class="op" id="5712142">]</span>&nbsp;<span class="op" id="5712144">+=</span>&nbsp;<span class="builtintype" id="5712147">uint8</span><span class="op" id="5712152">(</span><span class="num" id="5712153">31</span>&nbsp;<span class="op" id="5712156">-</span>&nbsp;<span class="op" id="5712158">(</span><span class="builtintype" id="5712159">uint16</span><span class="op" id="5712165">(</span><span class="ident" id="5712166"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712167">.</span><span class="ident" id="5712168"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712175">[</span><span class="num" id="5712176">0</span><span class="op" id="5712177">]</span><span class="op" id="5712178">)</span><span class="op" id="5712179">&lt;&lt;</span><span class="num" id="5712181">8</span><span class="op" id="5712182">+</span><span class="builtintype" id="5712183">uint16</span><span class="op" id="5712189">(</span><span class="ident" id="5712190"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712191">.</span><span class="ident" id="5712192"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712199">[</span><span class="num" id="5712200">1</span><span class="op" id="5712201">]</span><span class="op" id="5712202">)</span><span class="op" id="5712203">)</span><span class="op" id="5712204">%</span><span class="num" id="5712205">31</span><span class="op" id="5712207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712210">if</span>&nbsp;<span class="ident" id="5712213">_</span><span class="op" id="5712214">,</span>&nbsp;<span class="ident" id="5712216"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span>&nbsp;<span class="op" id="5712220">=</span>&nbsp;<span class="ident" id="5712222"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712223">.</span><span class="ident" id="5712224"><a href="/gostd/compress/zlib/writer.go.html#5709432">w</a></span><span class="op" id="5712225">.</span><span class="ident" id="5712226"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5712231">(</span><span class="ident" id="5712232"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712233">.</span><span class="ident" id="5712234"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712241">[</span><span class="num" id="5712242">0</span><span class="op" id="5712243">:</span><span class="num" id="5712244">2</span><span class="op" id="5712245">]</span><span class="op" id="5712246">)</span><span class="op" id="5712247">;</span>&nbsp;<span class="ident" id="5712249"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span>&nbsp;<span class="op" id="5712253">!=</span>&nbsp;<span class="builtintype" id="5712256">nil</span>&nbsp;<span class="op" id="5712260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712264">return</span>&nbsp;<span class="ident" id="5712271"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5712276">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712279">if</span>&nbsp;<span class="ident" id="5712282"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712283">.</span><span class="ident" id="5712284"><a href="/gostd/compress/zlib/writer.go.html#5709472">dict</a></span>&nbsp;<span class="op" id="5712289">!=</span>&nbsp;<span class="builtintype" id="5712292">nil</span>&nbsp;<span class="op" id="5712296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5712300">//&nbsp;The&nbsp;next&nbsp;four&nbsp;bytes&nbsp;are&nbsp;the&nbsp;Adler-32&nbsp;checksum&nbsp;of&nbsp;the&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712370">checksum</span>&nbsp;<span class="op" id="5712379">:=</span>&nbsp;<span class="ident" id="5712382"><a href="/gostd/compress/zlib/writer.go.html#5708933">adler32</a></span><span class="op" id="5712389">.</span><span class="ident" id="5712390"><a href="/gostd/hash/adler32/adler32.go.html#3146102">Checksum</a></span><span class="op" id="5712398">(</span><span class="ident" id="5712399"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712400">.</span><span class="ident" id="5712401"><a href="/gostd/compress/zlib/writer.go.html#5709472">dict</a></span><span class="op" id="5712405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712409"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712410">.</span><span class="ident" id="5712411"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712418">[</span><span class="num" id="5712419">0</span><span class="op" id="5712420">]</span>&nbsp;<span class="op" id="5712422">=</span>&nbsp;<span class="builtintype" id="5712424">uint8</span><span class="op" id="5712429">(</span><span class="ident" id="5712430"><a href="/gostd/compress/zlib/writer.go.html#5712370">checksum</a></span>&nbsp;<span class="op" id="5712439">&gt;&gt;</span>&nbsp;<span class="num" id="5712442">24</span><span class="op" id="5712444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712448"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712449">.</span><span class="ident" id="5712450"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712457">[</span><span class="num" id="5712458">1</span><span class="op" id="5712459">]</span>&nbsp;<span class="op" id="5712461">=</span>&nbsp;<span class="builtintype" id="5712463">uint8</span><span class="op" id="5712468">(</span><span class="ident" id="5712469"><a href="/gostd/compress/zlib/writer.go.html#5712370">checksum</a></span>&nbsp;<span class="op" id="5712478">&gt;&gt;</span>&nbsp;<span class="num" id="5712481">16</span><span class="op" id="5712483">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712487"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712488">.</span><span class="ident" id="5712489"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712496">[</span><span class="num" id="5712497">2</span><span class="op" id="5712498">]</span>&nbsp;<span class="op" id="5712500">=</span>&nbsp;<span class="builtintype" id="5712502">uint8</span><span class="op" id="5712507">(</span><span class="ident" id="5712508"><a href="/gostd/compress/zlib/writer.go.html#5712370">checksum</a></span>&nbsp;<span class="op" id="5712517">&gt;&gt;</span>&nbsp;<span class="num" id="5712520">8</span><span class="op" id="5712521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712525"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712526">.</span><span class="ident" id="5712527"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712534">[</span><span class="num" id="5712535">3</span><span class="op" id="5712536">]</span>&nbsp;<span class="op" id="5712538">=</span>&nbsp;<span class="builtintype" id="5712540">uint8</span><span class="op" id="5712545">(</span><span class="ident" id="5712546"><a href="/gostd/compress/zlib/writer.go.html#5712370">checksum</a></span>&nbsp;<span class="op" id="5712555">&gt;&gt;</span>&nbsp;<span class="num" id="5712558">0</span><span class="op" id="5712559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712563">if</span>&nbsp;<span class="ident" id="5712566">_</span><span class="op" id="5712567">,</span>&nbsp;<span class="ident" id="5712569"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span>&nbsp;<span class="op" id="5712573">=</span>&nbsp;<span class="ident" id="5712575"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712576">.</span><span class="ident" id="5712577"><a href="/gostd/compress/zlib/writer.go.html#5709432">w</a></span><span class="op" id="5712578">.</span><span class="ident" id="5712579"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5712584">(</span><span class="ident" id="5712585"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712586">.</span><span class="ident" id="5712587"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5712594">[</span><span class="num" id="5712595">0</span><span class="op" id="5712596">:</span><span class="num" id="5712597">4</span><span class="op" id="5712598">]</span><span class="op" id="5712599">)</span><span class="op" id="5712600">;</span>&nbsp;<span class="ident" id="5712602"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span>&nbsp;<span class="op" id="5712606">!=</span>&nbsp;<span class="builtintype" id="5712609">nil</span>&nbsp;<span class="op" id="5712613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712618">return</span>&nbsp;<span class="ident" id="5712625"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5712631">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5712634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712637">if</span>&nbsp;<span class="ident" id="5712640"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712641">.</span><span class="ident" id="5712642"><a href="/gostd/compress/zlib/writer.go.html#5709492">compressor</a></span>&nbsp;<span class="op" id="5712653">==</span>&nbsp;<span class="builtintype" id="5712656">nil</span>&nbsp;<span class="op" id="5712660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5712664">//&nbsp;Initialize&nbsp;deflater&nbsp;unless&nbsp;the&nbsp;Writer&nbsp;is&nbsp;being&nbsp;reused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5712723">//&nbsp;after&nbsp;a&nbsp;Reset&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712748"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712749">.</span><span class="ident" id="5712750"><a href="/gostd/compress/zlib/writer.go.html#5709492">compressor</a></span><span class="op" id="5712760">,</span>&nbsp;<span class="ident" id="5712762"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span>&nbsp;<span class="op" id="5712766">=</span>&nbsp;<span class="ident" id="5712768"><a href="/gostd/compress/zlib/writer.go.html#5708900">flate</a></span><span class="op" id="5712773">.</span><span class="ident" id="5712774"><a href="/gostd/compress/flate/deflate.go.html#4805397">NewWriterDict</a></span><span class="op" id="5712787">(</span><span class="ident" id="5712788"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712789">.</span><span class="ident" id="5712790"><a href="/gostd/compress/zlib/writer.go.html#5709432">w</a></span><span class="op" id="5712791">,</span>&nbsp;<span class="ident" id="5712793"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712794">.</span><span class="ident" id="5712795"><a href="/gostd/compress/zlib/writer.go.html#5709455">level</a></span><span class="op" id="5712800">,</span>&nbsp;<span class="ident" id="5712802"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712803">.</span><span class="ident" id="5712804"><a href="/gostd/compress/zlib/writer.go.html#5709472">dict</a></span><span class="op" id="5712808">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712812">if</span>&nbsp;<span class="ident" id="5712815"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span>&nbsp;<span class="op" id="5712819">!=</span>&nbsp;<span class="builtintype" id="5712822">nil</span>&nbsp;<span class="op" id="5712826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712831">return</span>&nbsp;<span class="ident" id="5712838"><a href="/gostd/compress/zlib/writer.go.html#5711341">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5712844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5712848"><a href="/gostd/compress/zlib/writer.go.html#5711315">z</a></span><span class="op" id="5712849">.</span><span class="ident" id="5712850"><a href="/gostd/compress/zlib/writer.go.html#5709519">digest</a></span>&nbsp;<span class="op" id="5712857">=</span>&nbsp;<span class="ident" id="5712859"><a href="/gostd/compress/zlib/writer.go.html#5708933">adler32</a></span><span class="op" id="5712866">.</span><span class="ident" id="5712867"><a href="/gostd/hash/adler32/adler32.go.html#3145280">New</a></span><span class="op" id="5712870">(</span><span class="op" id="5712871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5712874">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5712877">return</span>&nbsp;<span class="builtintype" id="5712884">nil</span><br>
<span class="lineno"></span><span class="op" id="5712888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5712891">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;compressed&nbsp;form&nbsp;of&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;io.Writer.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="5712963">//&nbsp;compressed&nbsp;bytes&nbsp;are&nbsp;not&nbsp;necessarily&nbsp;flushed&nbsp;until&nbsp;the&nbsp;Writer&nbsp;is&nbsp;closed&nbsp;or</span><br>
<span class="lineno">145</span><span class="comment" id="5713041">//&nbsp;explicitly&nbsp;flushed.</span><br>
<span class="lineno"></span><span class="keyword" id="5713064">func</span>&nbsp;<span class="op" id="5713069">(</span><span class="ident" id="5713070">z</span>&nbsp;<span class="op" id="5713072">*</span><span class="ident" id="5713073"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span><span class="op" id="5713079">)</span>&nbsp;<span class="ident" id="5713081">Write</span><span class="op" id="5713086">(</span><span class="ident" id="5713087">p</span>&nbsp;<span class="op" id="5713089">[</span><span class="op" id="5713090">]</span><span class="builtintype" id="5713091">byte</span><span class="op" id="5713095">)</span>&nbsp;<span class="op" id="5713097">(</span><span class="ident" id="5713098">n</span>&nbsp;<span class="builtintype" id="5713100">int</span><span class="op" id="5713103">,</span>&nbsp;<span class="ident" id="5713105">err</span>&nbsp;<span class="builtintype" id="5713109">error</span><span class="op" id="5713114">)</span>&nbsp;<span class="op" id="5713116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713119">if</span>&nbsp;<span class="op" id="5713122">!</span><span class="ident" id="5713123"><a href="/gostd/compress/zlib/writer.go.html#5713070">z</a></span><span class="op" id="5713124">.</span><span class="ident" id="5713125"><a href="/gostd/compress/zlib/writer.go.html#5709584">wroteHeader</a></span>&nbsp;<span class="op" id="5713137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713141"><a href="/gostd/compress/zlib/writer.go.html#5713070">z</a></span><span class="op" id="5713142">.</span><span class="ident" id="5713143"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713147">=</span>&nbsp;<span class="ident" id="5713149"><a href="/gostd/compress/zlib/writer.go.html#5713070">z</a></span><span class="op" id="5713150">.</span><span class="ident" id="5713151"><a href="/gostd/compress/zlib/writer.go.html#5711326">writeHeader</a></span><span class="op" id="5713162">(</span><span class="op" id="5713163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713166">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713169">if</span>&nbsp;<span class="ident" id="5713172"><a href="/gostd/compress/zlib/writer.go.html#5713070">z</a></span><span class="op" id="5713173">.</span><span class="ident" id="5713174"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713178">!=</span>&nbsp;<span class="builtintype" id="5713181">nil</span>&nbsp;<span class="op" id="5713185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713189">return</span>&nbsp;<span class="num" id="5713196">0</span><span class="op" id="5713197">,</span>&nbsp;<span class="ident" id="5713199"><a href="/gostd/compress/zlib/writer.go.html#5713070">z</a></span><span class="op" id="5713200">.</span><span class="ident" id="5713201"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713209">if</span>&nbsp;<span class="builtinfunc" id="5713212">len</span><span class="op" id="5713215">(</span><span class="ident" id="5713216"><a href="/gostd/compress/zlib/writer.go.html#5713087">p</a></span><span class="op" id="5713217">)</span>&nbsp;<span class="op" id="5713219">==</span>&nbsp;<span class="num" id="5713222">0</span>&nbsp;<span class="op" id="5713224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713228">return</span>&nbsp;<span class="num" id="5713235">0</span><span class="op" id="5713236">,</span>&nbsp;<span class="builtintype" id="5713238">nil</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713246"><a href="/gostd/compress/zlib/writer.go.html#5713098">n</a></span><span class="op" id="5713247">,</span>&nbsp;<span class="ident" id="5713249"><a href="/gostd/compress/zlib/writer.go.html#5713105">err</a></span>&nbsp;<span class="op" id="5713253">=</span>&nbsp;<span class="ident" id="5713255"><a href="/gostd/compress/zlib/writer.go.html#5713070">z</a></span><span class="op" id="5713256">.</span><span class="ident" id="5713257"><a href="/gostd/compress/zlib/writer.go.html#5709492">compressor</a></span><span class="op" id="5713267">.</span><span class="ident" id="5713268"><a href="/gostd/compress/flate/deflate.go.html#4806202">Write</a></span><span class="op" id="5713273">(</span><span class="ident" id="5713274"><a href="/gostd/compress/zlib/writer.go.html#5713087">p</a></span><span class="op" id="5713275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713278">if</span>&nbsp;<span class="ident" id="5713281"><a href="/gostd/compress/zlib/writer.go.html#5713105">err</a></span>&nbsp;<span class="op" id="5713285">!=</span>&nbsp;<span class="builtintype" id="5713288">nil</span>&nbsp;<span class="op" id="5713292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713296"><a href="/gostd/compress/zlib/writer.go.html#5713070">z</a></span><span class="op" id="5713297">.</span><span class="ident" id="5713298"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713302">=</span>&nbsp;<span class="ident" id="5713304"><a href="/gostd/compress/zlib/writer.go.html#5713105">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713310">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713321"><a href="/gostd/compress/zlib/writer.go.html#5713070">z</a></span><span class="op" id="5713322">.</span><span class="ident" id="5713323"><a href="/gostd/compress/zlib/writer.go.html#5709519">digest</a></span><span class="op" id="5713329">.</span><span class="ident" id="5713330"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5713335">(</span><span class="ident" id="5713336"><a href="/gostd/compress/zlib/writer.go.html#5713087">p</a></span><span class="op" id="5713337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713340">return</span><br>
<span class="lineno"></span><span class="op" id="5713347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="5713350">//&nbsp;Flush&nbsp;flushes&nbsp;the&nbsp;Writer&nbsp;to&nbsp;its&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="5713407">func</span>&nbsp;<span class="op" id="5713412">(</span><span class="ident" id="5713413">z</span>&nbsp;<span class="op" id="5713415">*</span><span class="ident" id="5713416"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span><span class="op" id="5713422">)</span>&nbsp;<span class="ident" id="5713424">Flush</span><span class="op" id="5713429">(</span><span class="op" id="5713430">)</span>&nbsp;<span class="builtintype" id="5713432">error</span>&nbsp;<span class="op" id="5713438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713441">if</span>&nbsp;<span class="op" id="5713444">!</span><span class="ident" id="5713445"><a href="/gostd/compress/zlib/writer.go.html#5713413">z</a></span><span class="op" id="5713446">.</span><span class="ident" id="5713447"><a href="/gostd/compress/zlib/writer.go.html#5709584">wroteHeader</a></span>&nbsp;<span class="op" id="5713459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713463"><a href="/gostd/compress/zlib/writer.go.html#5713413">z</a></span><span class="op" id="5713464">.</span><span class="ident" id="5713465"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713469">=</span>&nbsp;<span class="ident" id="5713471"><a href="/gostd/compress/zlib/writer.go.html#5713413">z</a></span><span class="op" id="5713472">.</span><span class="ident" id="5713473"><a href="/gostd/compress/zlib/writer.go.html#5711326">writeHeader</a></span><span class="op" id="5713484">(</span><span class="op" id="5713485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713488">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713491">if</span>&nbsp;<span class="ident" id="5713494"><a href="/gostd/compress/zlib/writer.go.html#5713413">z</a></span><span class="op" id="5713495">.</span><span class="ident" id="5713496"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713500">!=</span>&nbsp;<span class="builtintype" id="5713503">nil</span>&nbsp;<span class="op" id="5713507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713511">return</span>&nbsp;<span class="ident" id="5713518"><a href="/gostd/compress/zlib/writer.go.html#5713413">z</a></span><span class="op" id="5713519">.</span><span class="ident" id="5713520"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713528"><a href="/gostd/compress/zlib/writer.go.html#5713413">z</a></span><span class="op" id="5713529">.</span><span class="ident" id="5713530"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713534">=</span>&nbsp;<span class="ident" id="5713536"><a href="/gostd/compress/zlib/writer.go.html#5713413">z</a></span><span class="op" id="5713537">.</span><span class="ident" id="5713538"><a href="/gostd/compress/zlib/writer.go.html#5709492">compressor</a></span><span class="op" id="5713548">.</span><span class="ident" id="5713549"><a href="/gostd/compress/flate/deflate.go.html#4806701">Flush</a></span><span class="op" id="5713554">(</span><span class="op" id="5713555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713558">return</span>&nbsp;<span class="ident" id="5713565"><a href="/gostd/compress/zlib/writer.go.html#5713413">z</a></span><span class="op" id="5713566">.</span><span class="ident" id="5713567"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span><br>
<span class="lineno">175</span><span class="op" id="5713571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5713574">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;Writer,&nbsp;flushing&nbsp;any&nbsp;unwritten&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="5713648">//&nbsp;io.Writer,&nbsp;but&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="5713707">func</span>&nbsp;<span class="op" id="5713712">(</span><span class="ident" id="5713713">z</span>&nbsp;<span class="op" id="5713715">*</span><span class="ident" id="5713716"><a href="/gostd/compress/zlib/writer.go.html#5709415">Writer</a></span><span class="op" id="5713722">)</span>&nbsp;<span class="ident" id="5713724">Close</span><span class="op" id="5713729">(</span><span class="op" id="5713730">)</span>&nbsp;<span class="builtintype" id="5713732">error</span>&nbsp;<span class="op" id="5713738">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713741">if</span>&nbsp;<span class="op" id="5713744">!</span><span class="ident" id="5713745"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713746">.</span><span class="ident" id="5713747"><a href="/gostd/compress/zlib/writer.go.html#5709584">wroteHeader</a></span>&nbsp;<span class="op" id="5713759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713763"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713764">.</span><span class="ident" id="5713765"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713769">=</span>&nbsp;<span class="ident" id="5713771"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713772">.</span><span class="ident" id="5713773"><a href="/gostd/compress/zlib/writer.go.html#5711326">writeHeader</a></span><span class="op" id="5713784">(</span><span class="op" id="5713785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713791">if</span>&nbsp;<span class="ident" id="5713794"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713795">.</span><span class="ident" id="5713796"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713800">!=</span>&nbsp;<span class="builtintype" id="5713803">nil</span>&nbsp;<span class="op" id="5713807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713811">return</span>&nbsp;<span class="ident" id="5713818"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713819">.</span><span class="ident" id="5713820"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713828"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713829">.</span><span class="ident" id="5713830"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713834">=</span>&nbsp;<span class="ident" id="5713836"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713837">.</span><span class="ident" id="5713838"><a href="/gostd/compress/zlib/writer.go.html#5709492">compressor</a></span><span class="op" id="5713848">.</span><span class="ident" id="5713849"><a href="/gostd/compress/flate/deflate.go.html#4806882">Close</a></span><span class="op" id="5713854">(</span><span class="op" id="5713855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713858">if</span>&nbsp;<span class="ident" id="5713861"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713862">.</span><span class="ident" id="5713863"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5713867">!=</span>&nbsp;<span class="builtintype" id="5713870">nil</span>&nbsp;<span class="op" id="5713874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5713878">return</span>&nbsp;<span class="ident" id="5713885"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713886">.</span><span class="ident" id="5713887"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5713892">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713895">checksum</span>&nbsp;<span class="op" id="5713904">:=</span>&nbsp;<span class="ident" id="5713907"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713908">.</span><span class="ident" id="5713909"><a href="/gostd/compress/zlib/writer.go.html#5709519">digest</a></span><span class="op" id="5713915">.</span><span class="ident" id="5713916"><a href="/gostd/hash/hash.go.html#3014858">Sum32</a></span><span class="op" id="5713921">(</span><span class="op" id="5713922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5713925">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5713984"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5713985">.</span><span class="ident" id="5713986"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5713993">[</span><span class="num" id="5713994">0</span><span class="op" id="5713995">]</span>&nbsp;<span class="op" id="5713997">=</span>&nbsp;<span class="builtintype" id="5713999">uint8</span><span class="op" id="5714004">(</span><span class="ident" id="5714005"><a href="/gostd/compress/zlib/writer.go.html#5713895">checksum</a></span>&nbsp;<span class="op" id="5714014">&gt;&gt;</span>&nbsp;<span class="num" id="5714017">24</span><span class="op" id="5714019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5714022"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5714023">.</span><span class="ident" id="5714024"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5714031">[</span><span class="num" id="5714032">1</span><span class="op" id="5714033">]</span>&nbsp;<span class="op" id="5714035">=</span>&nbsp;<span class="builtintype" id="5714037">uint8</span><span class="op" id="5714042">(</span><span class="ident" id="5714043"><a href="/gostd/compress/zlib/writer.go.html#5713895">checksum</a></span>&nbsp;<span class="op" id="5714052">&gt;&gt;</span>&nbsp;<span class="num" id="5714055">16</span><span class="op" id="5714057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5714060"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5714061">.</span><span class="ident" id="5714062"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5714069">[</span><span class="num" id="5714070">2</span><span class="op" id="5714071">]</span>&nbsp;<span class="op" id="5714073">=</span>&nbsp;<span class="builtintype" id="5714075">uint8</span><span class="op" id="5714080">(</span><span class="ident" id="5714081"><a href="/gostd/compress/zlib/writer.go.html#5713895">checksum</a></span>&nbsp;<span class="op" id="5714090">&gt;&gt;</span>&nbsp;<span class="num" id="5714093">8</span><span class="op" id="5714094">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5714097"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5714098">.</span><span class="ident" id="5714099"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5714106">[</span><span class="num" id="5714107">3</span><span class="op" id="5714108">]</span>&nbsp;<span class="op" id="5714110">=</span>&nbsp;<span class="builtintype" id="5714112">uint8</span><span class="op" id="5714117">(</span><span class="ident" id="5714118"><a href="/gostd/compress/zlib/writer.go.html#5713895">checksum</a></span>&nbsp;<span class="op" id="5714127">&gt;&gt;</span>&nbsp;<span class="num" id="5714130">0</span><span class="op" id="5714131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5714134">_</span><span class="op" id="5714135">,</span>&nbsp;<span class="ident" id="5714137"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5714138">.</span><span class="ident" id="5714139"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span>&nbsp;<span class="op" id="5714143">=</span>&nbsp;<span class="ident" id="5714145"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5714146">.</span><span class="ident" id="5714147"><a href="/gostd/compress/zlib/writer.go.html#5709432">w</a></span><span class="op" id="5714148">.</span><span class="ident" id="5714149"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5714154">(</span><span class="ident" id="5714155"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5714156">.</span><span class="ident" id="5714157"><a href="/gostd/compress/zlib/writer.go.html#5709563">scratch</a></span><span class="op" id="5714164">[</span><span class="num" id="5714165">0</span><span class="op" id="5714166">:</span><span class="num" id="5714167">4</span><span class="op" id="5714168">]</span><span class="op" id="5714169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5714172">return</span>&nbsp;<span class="ident" id="5714179"><a href="/gostd/compress/zlib/writer.go.html#5713713">z</a></span><span class="op" id="5714180">.</span><span class="ident" id="5714181"><a href="/gostd/compress/zlib/writer.go.html#5709544">err</a></span><br>
<span class="lineno"></span><span class="op" id="5714185">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
