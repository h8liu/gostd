<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5739144">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5739199">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5739253">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5739304">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;export&nbsp;filtering&nbsp;of&nbsp;an&nbsp;AST.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5739357">package</span>&nbsp;<span class="ident" id="5739365">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5739370">import</span>&nbsp;<span class="op" id="5739377">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5739380">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5739390">&#34;go/token&#34;</span><br>
<span class="lineno"></span><span class="op" id="5739401">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5739404">//&nbsp;filterIdentList&nbsp;removes&nbsp;unexported&nbsp;names&nbsp;from&nbsp;list&nbsp;in&nbsp;place</span><br>
<span class="lineno">15</span><span class="comment" id="5739467">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;list.&nbsp;If&nbsp;blankOk&nbsp;is&nbsp;set,&nbsp;blank</span><br>
<span class="lineno"></span><span class="comment" id="5739527">//&nbsp;identifiers&nbsp;are&nbsp;considered&nbsp;exported&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="5739573">//</span><br>
<span class="lineno"></span><span class="keyword" id="5739576">func</span>&nbsp;<span class="ident" id="5739581">filterIdentList</span><span class="op" id="5739596">(</span><span class="ident" id="5739597">list</span>&nbsp;<span class="op" id="5739602">[</span><span class="op" id="5739603">]</span><span class="op" id="5739604">*</span><span class="ident" id="5739605"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5739608">.</span><span class="ident" id="5739609">Ident</span><span class="op" id="5739614">,</span>&nbsp;<span class="ident" id="5739616">blankOk</span>&nbsp;<span class="builtintype" id="5739624">bool</span><span class="op" id="5739628">)</span>&nbsp;<span class="op" id="5739630">[</span><span class="op" id="5739631">]</span><span class="op" id="5739632">*</span><span class="ident" id="5739633"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5739636">.</span><span class="ident" id="5739637">Ident</span>&nbsp;<span class="op" id="5739643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5739646">j</span>&nbsp;<span class="op" id="5739648">:=</span>&nbsp;<span class="num" id="5739651">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739654">for</span>&nbsp;<span class="ident" id="5739658">_</span><span class="op" id="5739659">,</span>&nbsp;<span class="ident" id="5739661">x</span>&nbsp;<span class="op" id="5739663">:=</span>&nbsp;<span class="keyword" id="5739666">range</span>&nbsp;<span class="ident" id="5739672"><a href="/go/doc/exports.go.html#5739597">list</a></span>&nbsp;<span class="op" id="5739677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739681">if</span>&nbsp;<span class="ident" id="5739684"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5739687">.</span><span class="ident" id="5739688">IsExported</span><span class="op" id="5739698">(</span><span class="ident" id="5739699"><a href="/go/doc/exports.go.html#5739661">x</a></span><span class="op" id="5739700">.</span><span class="ident" id="5739701">Name</span><span class="op" id="5739705">)</span>&nbsp;<span class="op" id="5739707">||</span>&nbsp;<span class="op" id="5739710">(</span><span class="ident" id="5739711"><a href="/go/doc/exports.go.html#5739616">blankOk</a></span>&nbsp;<span class="op" id="5739719">&amp;&amp;</span>&nbsp;<span class="ident" id="5739722"><a href="/go/doc/exports.go.html#5739661">x</a></span><span class="op" id="5739723">.</span><span class="ident" id="5739724">Name</span>&nbsp;<span class="op" id="5739729">==</span>&nbsp;<span class="string" id="5739732">&#34;_&#34;</span><span class="op" id="5739735">)</span>&nbsp;<span class="op" id="5739737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5739742"><a href="/go/doc/exports.go.html#5739597">list</a></span><span class="op" id="5739746">[</span><span class="ident" id="5739747"><a href="/go/doc/exports.go.html#5739646">j</a></span><span class="op" id="5739748">]</span>&nbsp;<span class="op" id="5739750">=</span>&nbsp;<span class="ident" id="5739752"><a href="/go/doc/exports.go.html#5739661">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5739757"><a href="/go/doc/exports.go.html#5739646">j</a></span><span class="op" id="5739758">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5739763">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5739766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739769">return</span>&nbsp;<span class="ident" id="5739776"><a href="/go/doc/exports.go.html#5739597">list</a></span><span class="op" id="5739780">[</span><span class="num" id="5739781">0</span><span class="op" id="5739782">:</span><span class="ident" id="5739783"><a href="/go/doc/exports.go.html#5739646">j</a></span><span class="op" id="5739784">]</span><br>
<span class="lineno"></span><span class="op" id="5739786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5739789">//&nbsp;removeErrorField&nbsp;removes&nbsp;anonymous&nbsp;fields&nbsp;named&nbsp;&#34;error&#34;&nbsp;from&nbsp;an&nbsp;interface.</span><br>
<span class="lineno">30</span><span class="comment" id="5739867">//&nbsp;This&nbsp;is&nbsp;called&nbsp;when&nbsp;&#34;error&#34;&nbsp;has&nbsp;been&nbsp;determined&nbsp;to&nbsp;be&nbsp;a&nbsp;local&nbsp;name,</span><br>
<span class="lineno"></span><span class="comment" id="5739938">//&nbsp;not&nbsp;the&nbsp;predeclared&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="5739967">//</span><br>
<span class="lineno"></span><span class="keyword" id="5739970">func</span>&nbsp;<span class="ident" id="5739975">removeErrorField</span><span class="op" id="5739991">(</span><span class="ident" id="5739992">ityp</span>&nbsp;<span class="op" id="5739997">*</span><span class="ident" id="5739998"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5740001">.</span><span class="ident" id="5740002">InterfaceType</span><span class="op" id="5740015">)</span>&nbsp;<span class="op" id="5740017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740020">list</span>&nbsp;<span class="op" id="5740025">:=</span>&nbsp;<span class="ident" id="5740028"><a href="/go/doc/exports.go.html#5739992">ityp</a></span><span class="op" id="5740032">.</span><span class="ident" id="5740033">Methods</span><span class="op" id="5740040">.</span><span class="ident" id="5740041">List</span>&nbsp;<span class="comment" id="5740046">//&nbsp;we&nbsp;know&nbsp;that&nbsp;ityp.Methods&nbsp;!=&nbsp;nil</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740083">j</span>&nbsp;<span class="op" id="5740085">:=</span>&nbsp;<span class="num" id="5740088">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740091">for</span>&nbsp;<span class="ident" id="5740095">_</span><span class="op" id="5740096">,</span>&nbsp;<span class="ident" id="5740098">field</span>&nbsp;<span class="op" id="5740104">:=</span>&nbsp;<span class="keyword" id="5740107">range</span>&nbsp;<span class="ident" id="5740113"><a href="/go/doc/exports.go.html#5740020">list</a></span>&nbsp;<span class="op" id="5740118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740122">keepField</span>&nbsp;<span class="op" id="5740132">:=</span>&nbsp;<span class="builtintype" id="5740135">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740142">if</span>&nbsp;<span class="ident" id="5740145">n</span>&nbsp;<span class="op" id="5740147">:=</span>&nbsp;<span class="builtinfunc" id="5740150">len</span><span class="op" id="5740153">(</span><span class="ident" id="5740154"><a href="/go/doc/exports.go.html#5740098">field</a></span><span class="op" id="5740159">.</span><span class="ident" id="5740160">Names</span><span class="op" id="5740165">)</span><span class="op" id="5740166">;</span>&nbsp;<span class="ident" id="5740168"><a href="/go/doc/exports.go.html#5740145">n</a></span>&nbsp;<span class="op" id="5740170">==</span>&nbsp;<span class="num" id="5740173">0</span>&nbsp;<span class="op" id="5740175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5740180">//&nbsp;anonymous&nbsp;field</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740202">if</span>&nbsp;<span class="ident" id="5740205">fname</span><span class="op" id="5740210">,</span>&nbsp;<span class="ident" id="5740212">_</span>&nbsp;<span class="op" id="5740214">:=</span>&nbsp;<span class="ident" id="5740217"><a href="/go/doc/reader.go.html#5749091">baseTypeName</a></span><span class="op" id="5740229">(</span><span class="ident" id="5740230"><a href="/go/doc/exports.go.html#5740098">field</a></span><span class="op" id="5740235">.</span><span class="ident" id="5740236">Type</span><span class="op" id="5740240">)</span><span class="op" id="5740241">;</span>&nbsp;<span class="ident" id="5740243"><a href="/go/doc/exports.go.html#5740205">fname</a></span>&nbsp;<span class="op" id="5740249">==</span>&nbsp;<span class="string" id="5740252">&#34;error&#34;</span>&nbsp;<span class="op" id="5740260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740266"><a href="/go/doc/exports.go.html#5740122">keepField</a></span>&nbsp;<span class="op" id="5740276">=</span>&nbsp;<span class="builtintype" id="5740278">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5740287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5740291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740295">if</span>&nbsp;<span class="ident" id="5740298"><a href="/go/doc/exports.go.html#5740122">keepField</a></span>&nbsp;<span class="op" id="5740308">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740313"><a href="/go/doc/exports.go.html#5740020">list</a></span><span class="op" id="5740317">[</span><span class="ident" id="5740318"><a href="/go/doc/exports.go.html#5740083">j</a></span><span class="op" id="5740319">]</span>&nbsp;<span class="op" id="5740321">=</span>&nbsp;<span class="ident" id="5740323"><a href="/go/doc/exports.go.html#5740098">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740332"><a href="/go/doc/exports.go.html#5740083">j</a></span><span class="op" id="5740333">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5740338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5740341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740344">if</span>&nbsp;<span class="ident" id="5740347"><a href="/go/doc/exports.go.html#5740083">j</a></span>&nbsp;<span class="op" id="5740349">&lt;</span>&nbsp;<span class="builtinfunc" id="5740351">len</span><span class="op" id="5740354">(</span><span class="ident" id="5740355"><a href="/go/doc/exports.go.html#5740020">list</a></span><span class="op" id="5740359">)</span>&nbsp;<span class="op" id="5740361">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740365"><a href="/go/doc/exports.go.html#5739992">ityp</a></span><span class="op" id="5740369">.</span><span class="ident" id="5740370">Incomplete</span>&nbsp;<span class="op" id="5740381">=</span>&nbsp;<span class="builtintype" id="5740383">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5740389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740392"><a href="/go/doc/exports.go.html#5739992">ityp</a></span><span class="op" id="5740396">.</span><span class="ident" id="5740397">Methods</span><span class="op" id="5740404">.</span><span class="ident" id="5740405">List</span>&nbsp;<span class="op" id="5740410">=</span>&nbsp;<span class="ident" id="5740412"><a href="/go/doc/exports.go.html#5740020">list</a></span><span class="op" id="5740416">[</span><span class="num" id="5740417">0</span><span class="op" id="5740418">:</span><span class="ident" id="5740419"><a href="/go/doc/exports.go.html#5740083">j</a></span><span class="op" id="5740420">]</span><br>
<span class="lineno"></span><span class="op" id="5740422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="5740425">//&nbsp;filterFieldList&nbsp;removes&nbsp;unexported&nbsp;fields&nbsp;(field&nbsp;names)&nbsp;from&nbsp;the&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span><span class="comment" id="5740504">//&nbsp;in&nbsp;place&nbsp;and&nbsp;returns&nbsp;true&nbsp;if&nbsp;fields&nbsp;were&nbsp;removed.&nbsp;Anonymous&nbsp;fields&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5740578">//&nbsp;recorded&nbsp;with&nbsp;the&nbsp;parent&nbsp;type.&nbsp;filterType&nbsp;is&nbsp;called&nbsp;with&nbsp;the&nbsp;types&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5740651">//&nbsp;all&nbsp;remaining&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="5740676">//</span><br>
<span class="lineno">60</span><span class="keyword" id="5740679">func</span>&nbsp;<span class="op" id="5740684">(</span><span class="ident" id="5740685">r</span>&nbsp;<span class="op" id="5740687">*</span><span class="ident" id="5740688"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5740694">)</span>&nbsp;<span class="ident" id="5740696">filterFieldList</span><span class="op" id="5740711">(</span><span class="ident" id="5740712">parent</span>&nbsp;<span class="op" id="5740719">*</span><span class="ident" id="5740720"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><span class="op" id="5740729">,</span>&nbsp;<span class="ident" id="5740731">fields</span>&nbsp;<span class="op" id="5740738">*</span><span class="ident" id="5740739"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5740742">.</span><span class="ident" id="5740743">FieldList</span><span class="op" id="5740752">,</span>&nbsp;<span class="ident" id="5740754">ityp</span>&nbsp;<span class="op" id="5740759">*</span><span class="ident" id="5740760"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5740763">.</span><span class="ident" id="5740764">InterfaceType</span><span class="op" id="5740777">)</span>&nbsp;<span class="op" id="5740779">(</span><span class="ident" id="5740780">removedFields</span>&nbsp;<span class="builtintype" id="5740794">bool</span><span class="op" id="5740798">)</span>&nbsp;<span class="op" id="5740800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740803">if</span>&nbsp;<span class="ident" id="5740806"><a href="/go/doc/exports.go.html#5740731">fields</a></span>&nbsp;<span class="op" id="5740813">==</span>&nbsp;<span class="ident" id="5740816">nil</span>&nbsp;<span class="op" id="5740820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740824">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5740832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740835">list</span>&nbsp;<span class="op" id="5740840">:=</span>&nbsp;<span class="ident" id="5740843"><a href="/go/doc/exports.go.html#5740731">fields</a></span><span class="op" id="5740849">.</span><span class="ident" id="5740850">List</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740856">j</span>&nbsp;<span class="op" id="5740858">:=</span>&nbsp;<span class="num" id="5740861">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740864">for</span>&nbsp;<span class="ident" id="5740868">_</span><span class="op" id="5740869">,</span>&nbsp;<span class="ident" id="5740871">field</span>&nbsp;<span class="op" id="5740877">:=</span>&nbsp;<span class="keyword" id="5740880">range</span>&nbsp;<span class="ident" id="5740886"><a href="/go/doc/exports.go.html#5740835">list</a></span>&nbsp;<span class="op" id="5740891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740895">keepField</span>&nbsp;<span class="op" id="5740905">:=</span>&nbsp;<span class="builtintype" id="5740908">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5740916">if</span>&nbsp;<span class="ident" id="5740919">n</span>&nbsp;<span class="op" id="5740921">:=</span>&nbsp;<span class="builtinfunc" id="5740924">len</span><span class="op" id="5740927">(</span><span class="ident" id="5740928"><a href="/go/doc/exports.go.html#5740871">field</a></span><span class="op" id="5740933">.</span><span class="ident" id="5740934">Names</span><span class="op" id="5740939">)</span><span class="op" id="5740940">;</span>&nbsp;<span class="ident" id="5740942"><a href="/go/doc/exports.go.html#5740919">n</a></span>&nbsp;<span class="op" id="5740944">==</span>&nbsp;<span class="num" id="5740947">0</span>&nbsp;<span class="op" id="5740949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5740954">//&nbsp;anonymous&nbsp;field</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5740976">fname</span>&nbsp;<span class="op" id="5740982">:=</span>&nbsp;<span class="ident" id="5740985"><a href="/go/doc/exports.go.html#5740685">r</a></span><span class="op" id="5740986">.</span><span class="ident" id="5740987">recordAnonymousField</span><span class="op" id="5741007">(</span><span class="ident" id="5741008"><a href="/go/doc/exports.go.html#5740712">parent</a></span><span class="op" id="5741014">,</span>&nbsp;<span class="ident" id="5741016"><a href="/go/doc/exports.go.html#5740871">field</a></span><span class="op" id="5741021">.</span><span class="ident" id="5741022">Type</span><span class="op" id="5741026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5741031">if</span>&nbsp;<span class="ident" id="5741034"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5741037">.</span><span class="ident" id="5741038">IsExported</span><span class="op" id="5741048">(</span><span class="ident" id="5741049"><a href="/go/doc/exports.go.html#5740976">fname</a></span><span class="op" id="5741054">)</span>&nbsp;<span class="op" id="5741056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741062"><a href="/go/doc/exports.go.html#5740895">keepField</a></span>&nbsp;<span class="op" id="5741072">=</span>&nbsp;<span class="builtintype" id="5741074">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741082">}</span>&nbsp;<span class="keyword" id="5741084">else</span>&nbsp;<span class="keyword" id="5741089">if</span>&nbsp;<span class="ident" id="5741092"><a href="/go/doc/exports.go.html#5740754">ityp</a></span>&nbsp;<span class="op" id="5741097">!=</span>&nbsp;<span class="ident" id="5741100">nil</span>&nbsp;<span class="op" id="5741104">&amp;&amp;</span>&nbsp;<span class="ident" id="5741107"><a href="/go/doc/exports.go.html#5740976">fname</a></span>&nbsp;<span class="op" id="5741113">==</span>&nbsp;<span class="string" id="5741116">&#34;error&#34;</span>&nbsp;<span class="op" id="5741124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741130">//&nbsp;possibly&nbsp;the&nbsp;predeclared&nbsp;error&nbsp;interface;&nbsp;keep</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741184">//&nbsp;it&nbsp;for&nbsp;now&nbsp;but&nbsp;remember&nbsp;this&nbsp;interface&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741238">//&nbsp;it&nbsp;can&nbsp;be&nbsp;fixed&nbsp;if&nbsp;error&nbsp;is&nbsp;also&nbsp;defined&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741294"><a href="/go/doc/exports.go.html#5740895">keepField</a></span>&nbsp;<span class="op" id="5741304">=</span>&nbsp;<span class="builtintype" id="5741306">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741315"><a href="/go/doc/exports.go.html#5740685">r</a></span><span class="op" id="5741316">.</span><span class="ident" id="5741317">remember</span><span class="op" id="5741325">(</span><span class="ident" id="5741326"><a href="/go/doc/exports.go.html#5740754">ityp</a></span><span class="op" id="5741330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741335">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741339">}</span>&nbsp;<span class="keyword" id="5741341">else</span>&nbsp;<span class="op" id="5741346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741351"><a href="/go/doc/exports.go.html#5740871">field</a></span><span class="op" id="5741356">.</span><span class="ident" id="5741357">Names</span>&nbsp;<span class="op" id="5741363">=</span>&nbsp;<span class="ident" id="5741365"><a href="/go/doc/exports.go.html#5739581">filterIdentList</a></span><span class="op" id="5741380">(</span><span class="ident" id="5741381"><a href="/go/doc/exports.go.html#5740871">field</a></span><span class="op" id="5741386">.</span><span class="ident" id="5741387">Names</span><span class="op" id="5741392">,</span>&nbsp;<span class="builtintype" id="5741394">false</span><span class="op" id="5741399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5741404">if</span>&nbsp;<span class="builtinfunc" id="5741407">len</span><span class="op" id="5741410">(</span><span class="ident" id="5741411"><a href="/go/doc/exports.go.html#5740871">field</a></span><span class="op" id="5741416">.</span><span class="ident" id="5741417">Names</span><span class="op" id="5741422">)</span>&nbsp;<span class="op" id="5741424">&lt;</span>&nbsp;<span class="ident" id="5741426"><a href="/go/doc/exports.go.html#5740919">n</a></span>&nbsp;<span class="op" id="5741428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741434"><a href="/go/doc/exports.go.html#5740780">removedFields</a></span>&nbsp;<span class="op" id="5741448">=</span>&nbsp;<span class="builtintype" id="5741450">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741458">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5741463">if</span>&nbsp;<span class="builtinfunc" id="5741466">len</span><span class="op" id="5741469">(</span><span class="ident" id="5741470"><a href="/go/doc/exports.go.html#5740871">field</a></span><span class="op" id="5741475">.</span><span class="ident" id="5741476">Names</span><span class="op" id="5741481">)</span>&nbsp;<span class="op" id="5741483">&gt;</span>&nbsp;<span class="num" id="5741485">0</span>&nbsp;<span class="op" id="5741487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741493"><a href="/go/doc/exports.go.html#5740895">keepField</a></span>&nbsp;<span class="op" id="5741503">=</span>&nbsp;<span class="builtintype" id="5741505">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5741521">if</span>&nbsp;<span class="ident" id="5741524"><a href="/go/doc/exports.go.html#5740895">keepField</a></span>&nbsp;<span class="op" id="5741534">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741539"><a href="/go/doc/exports.go.html#5740685">r</a></span><span class="op" id="5741540">.</span><span class="ident" id="5741541">filterType</span><span class="op" id="5741551">(</span><span class="ident" id="5741552">nil</span><span class="op" id="5741555">,</span>&nbsp;<span class="ident" id="5741557"><a href="/go/doc/exports.go.html#5740871">field</a></span><span class="op" id="5741562">.</span><span class="ident" id="5741563">Type</span><span class="op" id="5741567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741572"><a href="/go/doc/exports.go.html#5740835">list</a></span><span class="op" id="5741576">[</span><span class="ident" id="5741577"><a href="/go/doc/exports.go.html#5740856">j</a></span><span class="op" id="5741578">]</span>&nbsp;<span class="op" id="5741580">=</span>&nbsp;<span class="ident" id="5741582"><a href="/go/doc/exports.go.html#5740871">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741591"><a href="/go/doc/exports.go.html#5740856">j</a></span><span class="op" id="5741592">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741600">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5741603">if</span>&nbsp;<span class="ident" id="5741606"><a href="/go/doc/exports.go.html#5740856">j</a></span>&nbsp;<span class="op" id="5741608">&lt;</span>&nbsp;<span class="builtinfunc" id="5741610">len</span><span class="op" id="5741613">(</span><span class="ident" id="5741614"><a href="/go/doc/exports.go.html#5740835">list</a></span><span class="op" id="5741618">)</span>&nbsp;<span class="op" id="5741620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741624"><a href="/go/doc/exports.go.html#5740780">removedFields</a></span>&nbsp;<span class="op" id="5741638">=</span>&nbsp;<span class="builtintype" id="5741640">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741649"><a href="/go/doc/exports.go.html#5740731">fields</a></span><span class="op" id="5741655">.</span><span class="ident" id="5741656">List</span>&nbsp;<span class="op" id="5741661">=</span>&nbsp;<span class="ident" id="5741663"><a href="/go/doc/exports.go.html#5740835">list</a></span><span class="op" id="5741667">[</span><span class="num" id="5741668">0</span><span class="op" id="5741669">:</span><span class="ident" id="5741670"><a href="/go/doc/exports.go.html#5740856">j</a></span><span class="op" id="5741671">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5741674">return</span><br>
<span class="lineno">100</span><span class="op" id="5741681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5741684">//&nbsp;filterParamList&nbsp;applies&nbsp;filterType&nbsp;to&nbsp;each&nbsp;parameter&nbsp;type&nbsp;in&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="5741756">//</span><br>
<span class="lineno"></span><span class="keyword" id="5741759">func</span>&nbsp;<span class="op" id="5741764">(</span><span class="ident" id="5741765">r</span>&nbsp;<span class="op" id="5741767">*</span><span class="ident" id="5741768"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5741774">)</span>&nbsp;<span class="ident" id="5741776">filterParamList</span><span class="op" id="5741791">(</span><span class="ident" id="5741792">fields</span>&nbsp;<span class="op" id="5741799">*</span><span class="ident" id="5741800"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5741803">.</span><span class="ident" id="5741804">FieldList</span><span class="op" id="5741813">)</span>&nbsp;<span class="op" id="5741815">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5741818">if</span>&nbsp;<span class="ident" id="5741821"><a href="/go/doc/exports.go.html#5741792">fields</a></span>&nbsp;<span class="op" id="5741828">!=</span>&nbsp;<span class="ident" id="5741831">nil</span>&nbsp;<span class="op" id="5741835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5741839">for</span>&nbsp;<span class="ident" id="5741843">_</span><span class="op" id="5741844">,</span>&nbsp;<span class="ident" id="5741846">f</span>&nbsp;<span class="op" id="5741848">:=</span>&nbsp;<span class="keyword" id="5741851">range</span>&nbsp;<span class="ident" id="5741857"><a href="/go/doc/exports.go.html#5741792">fields</a></span><span class="op" id="5741863">.</span><span class="ident" id="5741864">List</span>&nbsp;<span class="op" id="5741869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741874"><a href="/go/doc/exports.go.html#5741765">r</a></span><span class="op" id="5741875">.</span><span class="ident" id="5741876">filterType</span><span class="op" id="5741886">(</span><span class="ident" id="5741887">nil</span><span class="op" id="5741890">,</span>&nbsp;<span class="ident" id="5741892"><a href="/go/doc/exports.go.html#5741846">f</a></span><span class="op" id="5741893">.</span><span class="ident" id="5741894">Type</span><span class="op" id="5741898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5741905">}</span><br>
<span class="lineno">110</span><span class="op" id="5741907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5741910">//&nbsp;filterType&nbsp;strips&nbsp;any&nbsp;unexported&nbsp;struct&nbsp;fields&nbsp;or&nbsp;method&nbsp;types&nbsp;from&nbsp;typ</span><br>
<span class="lineno"></span><span class="comment" id="5741985">//&nbsp;in&nbsp;place.&nbsp;If&nbsp;fields&nbsp;(or&nbsp;methods)&nbsp;have&nbsp;been&nbsp;removed,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="5742058">//&nbsp;struct&nbsp;or&nbsp;interface&nbsp;type&nbsp;has&nbsp;the&nbsp;Incomplete&nbsp;field&nbsp;set&nbsp;to&nbsp;true.</span><br>
<span class="lineno">115</span><span class="comment" id="5742124">//</span><br>
<span class="lineno"></span><span class="keyword" id="5742127">func</span>&nbsp;<span class="op" id="5742132">(</span><span class="ident" id="5742133">r</span>&nbsp;<span class="op" id="5742135">*</span><span class="ident" id="5742136"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5742142">)</span>&nbsp;<span class="ident" id="5742144">filterType</span><span class="op" id="5742154">(</span><span class="ident" id="5742155">parent</span>&nbsp;<span class="op" id="5742162">*</span><span class="ident" id="5742163"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><span class="op" id="5742172">,</span>&nbsp;<span class="ident" id="5742174">typ</span>&nbsp;<span class="ident" id="5742178"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742181">.</span><span class="ident" id="5742182">Expr</span><span class="op" id="5742186">)</span>&nbsp;<span class="op" id="5742188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742191">switch</span>&nbsp;<span class="ident" id="5742198">t</span>&nbsp;<span class="op" id="5742200">:=</span>&nbsp;<span class="ident" id="5742203"><a href="/go/doc/exports.go.html#5742174">typ</a></span><span class="op" id="5742206">.</span><span class="op" id="5742207">(</span><span class="keyword" id="5742208">type</span><span class="op" id="5742212">)</span>&nbsp;<span class="op" id="5742214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742217">case</span>&nbsp;<span class="op" id="5742222">*</span><span class="ident" id="5742223"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742226">.</span><span class="ident" id="5742227">Ident</span><span class="op" id="5742232">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5742236">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742254">case</span>&nbsp;<span class="op" id="5742259">*</span><span class="ident" id="5742260"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742263">.</span><span class="ident" id="5742264">ParenExpr</span><span class="op" id="5742273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742277"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742278">.</span><span class="ident" id="5742279">filterType</span><span class="op" id="5742289">(</span><span class="ident" id="5742290">nil</span><span class="op" id="5742293">,</span>&nbsp;<span class="ident" id="5742295"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742296">.</span><span class="ident" id="5742297">X</span><span class="op" id="5742298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742301">case</span>&nbsp;<span class="op" id="5742306">*</span><span class="ident" id="5742307"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742310">.</span><span class="ident" id="5742311">ArrayType</span><span class="op" id="5742320">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742324"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742325">.</span><span class="ident" id="5742326">filterType</span><span class="op" id="5742336">(</span><span class="ident" id="5742337">nil</span><span class="op" id="5742340">,</span>&nbsp;<span class="ident" id="5742342"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742343">.</span><span class="ident" id="5742344">Elt</span><span class="op" id="5742347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742350">case</span>&nbsp;<span class="op" id="5742355">*</span><span class="ident" id="5742356"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742359">.</span><span class="ident" id="5742360">StructType</span><span class="op" id="5742370">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742374">if</span>&nbsp;<span class="ident" id="5742377"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742378">.</span><span class="ident" id="5742379">filterFieldList</span><span class="op" id="5742394">(</span><span class="ident" id="5742395"><a href="/go/doc/exports.go.html#5742155">parent</a></span><span class="op" id="5742401">,</span>&nbsp;<span class="ident" id="5742403"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742404">.</span><span class="ident" id="5742405">Fields</span><span class="op" id="5742411">,</span>&nbsp;<span class="ident" id="5742413">nil</span><span class="op" id="5742416">)</span>&nbsp;<span class="op" id="5742418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742423"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742424">.</span><span class="ident" id="5742425">Incomplete</span>&nbsp;<span class="op" id="5742436">=</span>&nbsp;<span class="builtintype" id="5742438">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742448">case</span>&nbsp;<span class="op" id="5742453">*</span><span class="ident" id="5742454"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742457">.</span><span class="ident" id="5742458">FuncType</span><span class="op" id="5742466">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742470"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742471">.</span><span class="ident" id="5742472">filterParamList</span><span class="op" id="5742487">(</span><span class="ident" id="5742488"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742489">.</span><span class="ident" id="5742490">Params</span><span class="op" id="5742496">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742500"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742501">.</span><span class="ident" id="5742502">filterParamList</span><span class="op" id="5742517">(</span><span class="ident" id="5742518"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742519">.</span><span class="ident" id="5742520">Results</span><span class="op" id="5742527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742530">case</span>&nbsp;<span class="op" id="5742535">*</span><span class="ident" id="5742536"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742539">.</span><span class="ident" id="5742540">InterfaceType</span><span class="op" id="5742553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742557">if</span>&nbsp;<span class="ident" id="5742560"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742561">.</span><span class="ident" id="5742562">filterFieldList</span><span class="op" id="5742577">(</span><span class="ident" id="5742578"><a href="/go/doc/exports.go.html#5742155">parent</a></span><span class="op" id="5742584">,</span>&nbsp;<span class="ident" id="5742586"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742587">.</span><span class="ident" id="5742588">Methods</span><span class="op" id="5742595">,</span>&nbsp;<span class="ident" id="5742597"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742598">)</span>&nbsp;<span class="op" id="5742600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742605"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742606">.</span><span class="ident" id="5742607">Incomplete</span>&nbsp;<span class="op" id="5742618">=</span>&nbsp;<span class="builtintype" id="5742620">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742627">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742630">case</span>&nbsp;<span class="op" id="5742635">*</span><span class="ident" id="5742636"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742639">.</span><span class="ident" id="5742640">MapType</span><span class="op" id="5742647">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742651"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742652">.</span><span class="ident" id="5742653">filterType</span><span class="op" id="5742663">(</span><span class="ident" id="5742664">nil</span><span class="op" id="5742667">,</span>&nbsp;<span class="ident" id="5742669"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742670">.</span><span class="ident" id="5742671">Key</span><span class="op" id="5742674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742678"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742679">.</span><span class="ident" id="5742680">filterType</span><span class="op" id="5742690">(</span><span class="ident" id="5742691">nil</span><span class="op" id="5742694">,</span>&nbsp;<span class="ident" id="5742696"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742697">.</span><span class="ident" id="5742698">Value</span><span class="op" id="5742703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742706">case</span>&nbsp;<span class="op" id="5742711">*</span><span class="ident" id="5742712"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742715">.</span><span class="ident" id="5742716">ChanType</span><span class="op" id="5742724">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742728"><a href="/go/doc/exports.go.html#5742133">r</a></span><span class="op" id="5742729">.</span><span class="ident" id="5742730">filterType</span><span class="op" id="5742740">(</span><span class="ident" id="5742741">nil</span><span class="op" id="5742744">,</span>&nbsp;<span class="ident" id="5742746"><a href="/go/doc/exports.go.html#5742198">t</a></span><span class="op" id="5742747">.</span><span class="ident" id="5742748">Value</span><span class="op" id="5742753">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742756">}</span><br>
<span class="lineno"></span><span class="op" id="5742758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5742761">func</span>&nbsp;<span class="op" id="5742766">(</span><span class="ident" id="5742767">r</span>&nbsp;<span class="op" id="5742769">*</span><span class="ident" id="5742770"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5742776">)</span>&nbsp;<span class="ident" id="5742778">filterSpec</span><span class="op" id="5742788">(</span><span class="ident" id="5742789">spec</span>&nbsp;<span class="ident" id="5742794"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742797">.</span><span class="ident" id="5742798">Spec</span><span class="op" id="5742802">,</span>&nbsp;<span class="ident" id="5742804">tok</span>&nbsp;<span class="ident" id="5742808"><a href="/go/doc/exports.go.html#5739390">token</a></span><span class="op" id="5742813">.</span><span class="ident" id="5742814">Token</span><span class="op" id="5742819">)</span>&nbsp;<span class="builtintype" id="5742821">bool</span>&nbsp;<span class="op" id="5742826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742829">switch</span>&nbsp;<span class="ident" id="5742836">s</span>&nbsp;<span class="op" id="5742838">:=</span>&nbsp;<span class="ident" id="5742841"><a href="/go/doc/exports.go.html#5742789">spec</a></span><span class="op" id="5742845">.</span><span class="op" id="5742846">(</span><span class="keyword" id="5742847">type</span><span class="op" id="5742851">)</span>&nbsp;<span class="op" id="5742853">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742856">case</span>&nbsp;<span class="op" id="5742861">*</span><span class="ident" id="5742862"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742865">.</span><span class="ident" id="5742866">ImportSpec</span><span class="op" id="5742876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5742880">//&nbsp;always&nbsp;keep&nbsp;imports&nbsp;so&nbsp;we&nbsp;can&nbsp;collect&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742928">return</span>&nbsp;<span class="builtintype" id="5742935">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742941">case</span>&nbsp;<span class="op" id="5742946">*</span><span class="ident" id="5742947"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5742950">.</span><span class="ident" id="5742951">ValueSpec</span><span class="op" id="5742960">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5742964">//&nbsp;special&nbsp;case:&nbsp;consider&nbsp;blank&nbsp;constants&nbsp;as&nbsp;exported</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743020">//&nbsp;(work-around&nbsp;for&nbsp;issue&nbsp;5397)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743054"><a href="/go/doc/exports.go.html#5742836">s</a></span><span class="op" id="5743055">.</span><span class="ident" id="5743056">Names</span>&nbsp;<span class="op" id="5743062">=</span>&nbsp;<span class="ident" id="5743064"><a href="/go/doc/exports.go.html#5739581">filterIdentList</a></span><span class="op" id="5743079">(</span><span class="ident" id="5743080"><a href="/go/doc/exports.go.html#5742836">s</a></span><span class="op" id="5743081">.</span><span class="ident" id="5743082">Names</span><span class="op" id="5743087">,</span>&nbsp;<span class="ident" id="5743089"><a href="/go/doc/exports.go.html#5742804">tok</a></span>&nbsp;<span class="op" id="5743093">==</span>&nbsp;<span class="ident" id="5743096"><a href="/go/doc/exports.go.html#5739390">token</a></span><span class="op" id="5743101">.</span><span class="ident" id="5743102">CONST</span><span class="op" id="5743107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743111">if</span>&nbsp;<span class="builtinfunc" id="5743114">len</span><span class="op" id="5743117">(</span><span class="ident" id="5743118"><a href="/go/doc/exports.go.html#5742836">s</a></span><span class="op" id="5743119">.</span><span class="ident" id="5743120">Names</span><span class="op" id="5743125">)</span>&nbsp;<span class="op" id="5743127">&gt;</span>&nbsp;<span class="num" id="5743129">0</span>&nbsp;<span class="op" id="5743131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743136"><a href="/go/doc/exports.go.html#5742767">r</a></span><span class="op" id="5743137">.</span><span class="ident" id="5743138">filterType</span><span class="op" id="5743148">(</span><span class="ident" id="5743149">nil</span><span class="op" id="5743152">,</span>&nbsp;<span class="ident" id="5743154"><a href="/go/doc/exports.go.html#5742836">s</a></span><span class="op" id="5743155">.</span><span class="ident" id="5743156">Type</span><span class="op" id="5743160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743165">return</span>&nbsp;<span class="builtintype" id="5743172">true</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743182">case</span>&nbsp;<span class="op" id="5743187">*</span><span class="ident" id="5743188"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5743191">.</span><span class="ident" id="5743192">TypeSpec</span><span class="op" id="5743200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743204">if</span>&nbsp;<span class="ident" id="5743207">name</span>&nbsp;<span class="op" id="5743212">:=</span>&nbsp;<span class="ident" id="5743215"><a href="/go/doc/exports.go.html#5742836">s</a></span><span class="op" id="5743216">.</span><span class="ident" id="5743217">Name</span><span class="op" id="5743221">.</span><span class="ident" id="5743222">Name</span><span class="op" id="5743226">;</span>&nbsp;<span class="ident" id="5743228"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5743231">.</span><span class="ident" id="5743232">IsExported</span><span class="op" id="5743242">(</span><span class="ident" id="5743243"><a href="/go/doc/exports.go.html#5743207">name</a></span><span class="op" id="5743247">)</span>&nbsp;<span class="op" id="5743249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743254"><a href="/go/doc/exports.go.html#5742767">r</a></span><span class="op" id="5743255">.</span><span class="ident" id="5743256">filterType</span><span class="op" id="5743266">(</span><span class="ident" id="5743267"><a href="/go/doc/exports.go.html#5742767">r</a></span><span class="op" id="5743268">.</span><span class="ident" id="5743269">lookupType</span><span class="op" id="5743279">(</span><span class="ident" id="5743280"><a href="/go/doc/exports.go.html#5742836">s</a></span><span class="op" id="5743281">.</span><span class="ident" id="5743282">Name</span><span class="op" id="5743286">.</span><span class="ident" id="5743287">Name</span><span class="op" id="5743291">)</span><span class="op" id="5743292">,</span>&nbsp;<span class="ident" id="5743294"><a href="/go/doc/exports.go.html#5742836">s</a></span><span class="op" id="5743295">.</span><span class="ident" id="5743296">Type</span><span class="op" id="5743300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743305">return</span>&nbsp;<span class="builtintype" id="5743312">true</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743319">}</span>&nbsp;<span class="keyword" id="5743321">else</span>&nbsp;<span class="keyword" id="5743326">if</span>&nbsp;<span class="ident" id="5743329"><a href="/go/doc/exports.go.html#5743207">name</a></span>&nbsp;<span class="op" id="5743334">==</span>&nbsp;<span class="string" id="5743337">&#34;error&#34;</span>&nbsp;<span class="op" id="5743345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743350">//&nbsp;special&nbsp;case:&nbsp;remember&nbsp;that&nbsp;error&nbsp;is&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743410"><a href="/go/doc/exports.go.html#5742767">r</a></span><span class="op" id="5743411">.</span><span class="ident" id="5743412">errorDecl</span>&nbsp;<span class="op" id="5743422">=</span>&nbsp;<span class="builtintype" id="5743424">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743434">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743437">return</span>&nbsp;<span class="builtintype" id="5743444">false</span><br>
<span class="lineno"></span><span class="op" id="5743450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5743453">func</span>&nbsp;<span class="op" id="5743458">(</span><span class="ident" id="5743459">r</span>&nbsp;<span class="op" id="5743461">*</span><span class="ident" id="5743462"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5743468">)</span>&nbsp;<span class="ident" id="5743470">filterSpecList</span><span class="op" id="5743484">(</span><span class="ident" id="5743485">list</span>&nbsp;<span class="op" id="5743490">[</span><span class="op" id="5743491">]</span><span class="ident" id="5743492"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5743495">.</span><span class="ident" id="5743496">Spec</span><span class="op" id="5743500">,</span>&nbsp;<span class="ident" id="5743502">tok</span>&nbsp;<span class="ident" id="5743506"><a href="/go/doc/exports.go.html#5739390">token</a></span><span class="op" id="5743511">.</span><span class="ident" id="5743512">Token</span><span class="op" id="5743517">)</span>&nbsp;<span class="op" id="5743519">[</span><span class="op" id="5743520">]</span><span class="ident" id="5743521"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5743524">.</span><span class="ident" id="5743525">Spec</span>&nbsp;<span class="op" id="5743530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743533">j</span>&nbsp;<span class="op" id="5743535">:=</span>&nbsp;<span class="num" id="5743538">0</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743541">for</span>&nbsp;<span class="ident" id="5743545">_</span><span class="op" id="5743546">,</span>&nbsp;<span class="ident" id="5743548">s</span>&nbsp;<span class="op" id="5743550">:=</span>&nbsp;<span class="keyword" id="5743553">range</span>&nbsp;<span class="ident" id="5743559"><a href="/go/doc/exports.go.html#5743485">list</a></span>&nbsp;<span class="op" id="5743564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743568">if</span>&nbsp;<span class="ident" id="5743571"><a href="/go/doc/exports.go.html#5743459">r</a></span><span class="op" id="5743572">.</span><span class="ident" id="5743573">filterSpec</span><span class="op" id="5743583">(</span><span class="ident" id="5743584"><a href="/go/doc/exports.go.html#5743548">s</a></span><span class="op" id="5743585">,</span>&nbsp;<span class="ident" id="5743587"><a href="/go/doc/exports.go.html#5743502">tok</a></span><span class="op" id="5743590">)</span>&nbsp;<span class="op" id="5743592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743597"><a href="/go/doc/exports.go.html#5743485">list</a></span><span class="op" id="5743601">[</span><span class="ident" id="5743602"><a href="/go/doc/exports.go.html#5743533">j</a></span><span class="op" id="5743603">]</span>&nbsp;<span class="op" id="5743605">=</span>&nbsp;<span class="ident" id="5743607"><a href="/go/doc/exports.go.html#5743548">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743612"><a href="/go/doc/exports.go.html#5743533">j</a></span><span class="op" id="5743613">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743618">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743624">return</span>&nbsp;<span class="ident" id="5743631"><a href="/go/doc/exports.go.html#5743485">list</a></span><span class="op" id="5743635">[</span><span class="num" id="5743636">0</span><span class="op" id="5743637">:</span><span class="ident" id="5743638"><a href="/go/doc/exports.go.html#5743533">j</a></span><span class="op" id="5743639">]</span><br>
<span class="lineno"></span><span class="op" id="5743641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5743644">func</span>&nbsp;<span class="op" id="5743649">(</span><span class="ident" id="5743650">r</span>&nbsp;<span class="op" id="5743652">*</span><span class="ident" id="5743653"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5743659">)</span>&nbsp;<span class="ident" id="5743661">filterDecl</span><span class="op" id="5743671">(</span><span class="ident" id="5743672">decl</span>&nbsp;<span class="ident" id="5743677"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5743680">.</span><span class="ident" id="5743681">Decl</span><span class="op" id="5743685">)</span>&nbsp;<span class="builtintype" id="5743687">bool</span>&nbsp;<span class="op" id="5743692">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743695">switch</span>&nbsp;<span class="ident" id="5743702">d</span>&nbsp;<span class="op" id="5743704">:=</span>&nbsp;<span class="ident" id="5743707"><a href="/go/doc/exports.go.html#5743672">decl</a></span><span class="op" id="5743711">.</span><span class="op" id="5743712">(</span><span class="keyword" id="5743713">type</span><span class="op" id="5743717">)</span>&nbsp;<span class="op" id="5743719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743722">case</span>&nbsp;<span class="op" id="5743727">*</span><span class="ident" id="5743728"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5743731">.</span><span class="ident" id="5743732">GenDecl</span><span class="op" id="5743739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743743"><a href="/go/doc/exports.go.html#5743702">d</a></span><span class="op" id="5743744">.</span><span class="ident" id="5743745">Specs</span>&nbsp;<span class="op" id="5743751">=</span>&nbsp;<span class="ident" id="5743753"><a href="/go/doc/exports.go.html#5743650">r</a></span><span class="op" id="5743754">.</span><span class="ident" id="5743755">filterSpecList</span><span class="op" id="5743769">(</span><span class="ident" id="5743770"><a href="/go/doc/exports.go.html#5743702">d</a></span><span class="op" id="5743771">.</span><span class="ident" id="5743772">Specs</span><span class="op" id="5743777">,</span>&nbsp;<span class="ident" id="5743779"><a href="/go/doc/exports.go.html#5743702">d</a></span><span class="op" id="5743780">.</span><span class="ident" id="5743781">Tok</span><span class="op" id="5743784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743788">return</span>&nbsp;<span class="builtinfunc" id="5743795">len</span><span class="op" id="5743798">(</span><span class="ident" id="5743799"><a href="/go/doc/exports.go.html#5743702">d</a></span><span class="op" id="5743800">.</span><span class="ident" id="5743801">Specs</span><span class="op" id="5743806">)</span>&nbsp;<span class="op" id="5743808">&gt;</span>&nbsp;<span class="num" id="5743810">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743813">case</span>&nbsp;<span class="op" id="5743818">*</span><span class="ident" id="5743819"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5743822">.</span><span class="ident" id="5743823">FuncDecl</span><span class="op" id="5743831">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743835">//&nbsp;ok&nbsp;to&nbsp;filter&nbsp;these&nbsp;methods&nbsp;early&nbsp;because&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743885">//&nbsp;conflicting&nbsp;method&nbsp;will&nbsp;be&nbsp;filtered&nbsp;here,&nbsp;too&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743938">//&nbsp;thus,&nbsp;removing&nbsp;these&nbsp;methods&nbsp;early&nbsp;will&nbsp;not&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743992">//&nbsp;to&nbsp;the&nbsp;false&nbsp;removal&nbsp;of&nbsp;possible&nbsp;conflicts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744040">return</span>&nbsp;<span class="ident" id="5744047"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5744050">.</span><span class="ident" id="5744051">IsExported</span><span class="op" id="5744061">(</span><span class="ident" id="5744062"><a href="/go/doc/exports.go.html#5743702">d</a></span><span class="op" id="5744063">.</span><span class="ident" id="5744064">Name</span><span class="op" id="5744068">.</span><span class="ident" id="5744069">Name</span><span class="op" id="5744073">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744079">return</span>&nbsp;<span class="builtintype" id="5744086">false</span><br>
<span class="lineno"></span><span class="op" id="5744092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744095">//&nbsp;fileExports&nbsp;removes&nbsp;unexported&nbsp;declarations&nbsp;from&nbsp;src&nbsp;in&nbsp;place.</span><br>
<span class="lineno">195</span><span class="comment" id="5744161">//</span><br>
<span class="lineno"></span><span class="keyword" id="5744164">func</span>&nbsp;<span class="op" id="5744169">(</span><span class="ident" id="5744170">r</span>&nbsp;<span class="op" id="5744172">*</span><span class="ident" id="5744173"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5744179">)</span>&nbsp;<span class="ident" id="5744181">fileExports</span><span class="op" id="5744192">(</span><span class="ident" id="5744193">src</span>&nbsp;<span class="op" id="5744197">*</span><span class="ident" id="5744198"><a href="/go/doc/exports.go.html#5739380">ast</a></span><span class="op" id="5744201">.</span><span class="ident" id="5744202">File</span><span class="op" id="5744206">)</span>&nbsp;<span class="op" id="5744208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744211">j</span>&nbsp;<span class="op" id="5744213">:=</span>&nbsp;<span class="num" id="5744216">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744219">for</span>&nbsp;<span class="ident" id="5744223">_</span><span class="op" id="5744224">,</span>&nbsp;<span class="ident" id="5744226">d</span>&nbsp;<span class="op" id="5744228">:=</span>&nbsp;<span class="keyword" id="5744231">range</span>&nbsp;<span class="ident" id="5744237"><a href="/go/doc/exports.go.html#5744193">src</a></span><span class="op" id="5744240">.</span><span class="ident" id="5744241">Decls</span>&nbsp;<span class="op" id="5744247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744251">if</span>&nbsp;<span class="ident" id="5744254"><a href="/go/doc/exports.go.html#5744170">r</a></span><span class="op" id="5744255">.</span><span class="ident" id="5744256">filterDecl</span><span class="op" id="5744266">(</span><span class="ident" id="5744267"><a href="/go/doc/exports.go.html#5744226">d</a></span><span class="op" id="5744268">)</span>&nbsp;<span class="op" id="5744270">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744275"><a href="/go/doc/exports.go.html#5744193">src</a></span><span class="op" id="5744278">.</span><span class="ident" id="5744279">Decls</span><span class="op" id="5744284">[</span><span class="ident" id="5744285"><a href="/go/doc/exports.go.html#5744211">j</a></span><span class="op" id="5744286">]</span>&nbsp;<span class="op" id="5744288">=</span>&nbsp;<span class="ident" id="5744290"><a href="/go/doc/exports.go.html#5744226">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744295"><a href="/go/doc/exports.go.html#5744211">j</a></span><span class="op" id="5744296">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744307"><a href="/go/doc/exports.go.html#5744193">src</a></span><span class="op" id="5744310">.</span><span class="ident" id="5744311">Decls</span>&nbsp;<span class="op" id="5744317">=</span>&nbsp;<span class="ident" id="5744319"><a href="/go/doc/exports.go.html#5744193">src</a></span><span class="op" id="5744322">.</span><span class="ident" id="5744323">Decls</span><span class="op" id="5744328">[</span><span class="num" id="5744329">0</span><span class="op" id="5744330">:</span><span class="ident" id="5744331"><a href="/go/doc/exports.go.html#5744211">j</a></span><span class="op" id="5744332">]</span><br>
<span class="lineno">205</span><span class="op" id="5744334">}</span>
</div>
</body>
</html>
