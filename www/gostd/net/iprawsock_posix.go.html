<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html" class="current">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3778437">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3778493">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3778547">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3778598">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3778676">package</span>&nbsp;<span class="ident" id="3778684">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3778689">import</span>&nbsp;<span class="op" id="3778696">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3778699">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3778710">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3778717">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3778720">//&nbsp;BUG(mikio):&nbsp;On&nbsp;every&nbsp;POSIX&nbsp;platform,&nbsp;reads&nbsp;from&nbsp;the&nbsp;&#34;ip4&#34;&nbsp;network</span><br>
<span class="lineno">15</span><span class="comment" id="3778789">//&nbsp;using&nbsp;the&nbsp;ReadFrom&nbsp;or&nbsp;ReadFromIP&nbsp;method&nbsp;might&nbsp;not&nbsp;return&nbsp;a&nbsp;complete</span><br>
<span class="lineno"></span><span class="comment" id="3778860">//&nbsp;IPv4&nbsp;packet,&nbsp;including&nbsp;its&nbsp;header,&nbsp;even&nbsp;if&nbsp;there&nbsp;is&nbsp;space</span><br>
<span class="lineno"></span><span class="comment" id="3778921">//&nbsp;available.&nbsp;This&nbsp;can&nbsp;occur&nbsp;even&nbsp;in&nbsp;cases&nbsp;where&nbsp;Read&nbsp;or&nbsp;ReadMsgIP</span><br>
<span class="lineno"></span><span class="comment" id="3778988">//&nbsp;could&nbsp;return&nbsp;a&nbsp;complete&nbsp;packet.&nbsp;For&nbsp;this&nbsp;reason,&nbsp;it&nbsp;is&nbsp;recommended</span><br>
<span class="lineno"></span><span class="comment" id="3779058">//&nbsp;that&nbsp;you&nbsp;do&nbsp;not&nbsp;uses&nbsp;these&nbsp;methods&nbsp;if&nbsp;it&nbsp;is&nbsp;important&nbsp;to&nbsp;receive&nbsp;a</span><br>
<span class="lineno">20</span><span class="comment" id="3779128">//&nbsp;full&nbsp;packet.</span><br>
<span class="lineno"></span><span class="comment" id="3779144">//</span><br>
<span class="lineno"></span><span class="comment" id="3779147">//&nbsp;The&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines&nbsp;make&nbsp;it&nbsp;impossible&nbsp;for&nbsp;us&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3779213">//&nbsp;change&nbsp;the&nbsp;behavior&nbsp;of&nbsp;these&nbsp;methods;&nbsp;use&nbsp;Read&nbsp;or&nbsp;ReadMsgIP</span><br>
<span class="lineno"></span><span class="comment" id="3779276">//&nbsp;instead.</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3779289">func</span>&nbsp;<span class="ident" id="3779294">sockaddrToIP</span><span class="op" id="3779306">(</span><span class="ident" id="3779307">sa</span>&nbsp;<span class="ident" id="3779310">syscall</span><span class="op" id="3779317">.</span><span class="ident" id="3779318">Sockaddr</span><span class="op" id="3779326">)</span>&nbsp;<span class="ident" id="3779328">Addr</span>&nbsp;<span class="op" id="3779333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779336">switch</span>&nbsp;<span class="ident" id="3779343">sa</span>&nbsp;<span class="op" id="3779346">:=</span>&nbsp;<span class="ident" id="3779349">sa</span><span class="op" id="3779351">.</span><span class="op" id="3779352">(</span><span class="keyword" id="3779353">type</span><span class="op" id="3779357">)</span>&nbsp;<span class="op" id="3779359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779362">case</span>&nbsp;<span class="op" id="3779367">*</span><span class="ident" id="3779368">syscall</span><span class="op" id="3779375">.</span><span class="ident" id="3779376">SockaddrInet4</span><span class="op" id="3779389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779393">return</span>&nbsp;<span class="op" id="3779400">&amp;</span><span class="ident" id="3779401">IPAddr</span><span class="op" id="3779407">{</span><span class="ident" id="3779408">IP</span><span class="op" id="3779410">:</span>&nbsp;<span class="ident" id="3779412">sa</span><span class="op" id="3779414">.</span><span class="ident" id="3779415">Addr</span><span class="op" id="3779419">[</span><span class="num" id="3779420">0</span><span class="op" id="3779421">:</span><span class="op" id="3779422">]</span><span class="op" id="3779423">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779426">case</span>&nbsp;<span class="op" id="3779431">*</span><span class="ident" id="3779432">syscall</span><span class="op" id="3779439">.</span><span class="ident" id="3779440">SockaddrInet6</span><span class="op" id="3779453">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779457">return</span>&nbsp;<span class="op" id="3779464">&amp;</span><span class="ident" id="3779465">IPAddr</span><span class="op" id="3779471">{</span><span class="ident" id="3779472">IP</span><span class="op" id="3779474">:</span>&nbsp;<span class="ident" id="3779476">sa</span><span class="op" id="3779478">.</span><span class="ident" id="3779479">Addr</span><span class="op" id="3779483">[</span><span class="num" id="3779484">0</span><span class="op" id="3779485">:</span><span class="op" id="3779486">]</span><span class="op" id="3779487">,</span>&nbsp;<span class="ident" id="3779489">Zone</span><span class="op" id="3779493">:</span>&nbsp;<span class="ident" id="3779495">zoneToString</span><span class="op" id="3779507">(</span><span class="builtintype" id="3779508">int</span><span class="op" id="3779511">(</span><span class="ident" id="3779512">sa</span><span class="op" id="3779514">.</span><span class="ident" id="3779515">ZoneId</span><span class="op" id="3779521">)</span><span class="op" id="3779522">)</span><span class="op" id="3779523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779529">return</span>&nbsp;<span class="builtintype" id="3779536">nil</span><br>
<span class="lineno"></span><span class="op" id="3779540">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="3779543">func</span>&nbsp;<span class="op" id="3779548">(</span><span class="ident" id="3779549">a</span>&nbsp;<span class="op" id="3779551">*</span><span class="ident" id="3779552">IPAddr</span><span class="op" id="3779558">)</span>&nbsp;<span class="ident" id="3779560">family</span><span class="op" id="3779566">(</span><span class="op" id="3779567">)</span>&nbsp;<span class="builtintype" id="3779569">int</span>&nbsp;<span class="op" id="3779573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779576">if</span>&nbsp;<span class="ident" id="3779579">a</span>&nbsp;<span class="op" id="3779581">==</span>&nbsp;<span class="builtintype" id="3779584">nil</span>&nbsp;<span class="op" id="3779588">||</span>&nbsp;<span class="builtinfunc" id="3779591">len</span><span class="op" id="3779594">(</span><span class="ident" id="3779595">a</span><span class="op" id="3779596">.</span><span class="ident" id="3779597">IP</span><span class="op" id="3779599">)</span>&nbsp;<span class="op" id="3779601">&lt;=</span>&nbsp;<span class="ident" id="3779604">IPv4len</span>&nbsp;<span class="op" id="3779612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779616">return</span>&nbsp;<span class="ident" id="3779623">syscall</span><span class="op" id="3779630">.</span><span class="ident" id="3779631">AF_INET</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779640">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779643">if</span>&nbsp;<span class="ident" id="3779646">a</span><span class="op" id="3779647">.</span><span class="ident" id="3779648">IP</span><span class="op" id="3779650">.</span><span class="ident" id="3779651">To4</span><span class="op" id="3779654">(</span><span class="op" id="3779655">)</span>&nbsp;<span class="op" id="3779657">!=</span>&nbsp;<span class="builtintype" id="3779660">nil</span>&nbsp;<span class="op" id="3779664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779668">return</span>&nbsp;<span class="ident" id="3779675">syscall</span><span class="op" id="3779682">.</span><span class="ident" id="3779683">AF_INET</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779695">return</span>&nbsp;<span class="ident" id="3779702">syscall</span><span class="op" id="3779709">.</span><span class="ident" id="3779710">AF_INET6</span><br>
<span class="lineno"></span><span class="op" id="3779719">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3779722">func</span>&nbsp;<span class="op" id="3779727">(</span><span class="ident" id="3779728">a</span>&nbsp;<span class="op" id="3779730">*</span><span class="ident" id="3779731">IPAddr</span><span class="op" id="3779737">)</span>&nbsp;<span class="ident" id="3779739">isWildcard</span><span class="op" id="3779749">(</span><span class="op" id="3779750">)</span>&nbsp;<span class="builtintype" id="3779752">bool</span>&nbsp;<span class="op" id="3779757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779760">if</span>&nbsp;<span class="ident" id="3779763">a</span>&nbsp;<span class="op" id="3779765">==</span>&nbsp;<span class="builtintype" id="3779768">nil</span>&nbsp;<span class="op" id="3779772">||</span>&nbsp;<span class="ident" id="3779775">a</span><span class="op" id="3779776">.</span><span class="ident" id="3779777">IP</span>&nbsp;<span class="op" id="3779780">==</span>&nbsp;<span class="builtintype" id="3779783">nil</span>&nbsp;<span class="op" id="3779787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779791">return</span>&nbsp;<span class="builtintype" id="3779798">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779804">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779807">return</span>&nbsp;<span class="ident" id="3779814">a</span><span class="op" id="3779815">.</span><span class="ident" id="3779816">IP</span><span class="op" id="3779818">.</span><span class="ident" id="3779819">IsUnspecified</span><span class="op" id="3779832">(</span><span class="op" id="3779833">)</span><br>
<span class="lineno"></span><span class="op" id="3779835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3779838">func</span>&nbsp;<span class="op" id="3779843">(</span><span class="ident" id="3779844">a</span>&nbsp;<span class="op" id="3779846">*</span><span class="ident" id="3779847">IPAddr</span><span class="op" id="3779853">)</span>&nbsp;<span class="ident" id="3779855">sockaddr</span><span class="op" id="3779863">(</span><span class="ident" id="3779864">family</span>&nbsp;<span class="builtintype" id="3779871">int</span><span class="op" id="3779874">)</span>&nbsp;<span class="op" id="3779876">(</span><span class="ident" id="3779877">syscall</span><span class="op" id="3779884">.</span><span class="ident" id="3779885">Sockaddr</span><span class="op" id="3779893">,</span>&nbsp;<span class="builtintype" id="3779895">error</span><span class="op" id="3779900">)</span>&nbsp;<span class="op" id="3779902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779905">if</span>&nbsp;<span class="ident" id="3779908">a</span>&nbsp;<span class="op" id="3779910">==</span>&nbsp;<span class="builtintype" id="3779913">nil</span>&nbsp;<span class="op" id="3779917">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779921">return</span>&nbsp;<span class="builtintype" id="3779928">nil</span><span class="op" id="3779931">,</span>&nbsp;<span class="builtintype" id="3779933">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779941">return</span>&nbsp;<span class="ident" id="3779948">ipToSockaddr</span><span class="op" id="3779960">(</span><span class="ident" id="3779961">family</span><span class="op" id="3779967">,</span>&nbsp;<span class="ident" id="3779969">a</span><span class="op" id="3779970">.</span><span class="ident" id="3779971">IP</span><span class="op" id="3779973">,</span>&nbsp;<span class="num" id="3779975">0</span><span class="op" id="3779976">,</span>&nbsp;<span class="ident" id="3779978">a</span><span class="op" id="3779979">.</span><span class="ident" id="3779980">Zone</span><span class="op" id="3779984">)</span><br>
<span class="lineno"></span><span class="op" id="3779986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3779989">//&nbsp;IPConn&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;and&nbsp;PacketConn&nbsp;interfaces</span><br>
<span class="lineno"></span><span class="comment" id="3780059">//&nbsp;for&nbsp;IP&nbsp;network&nbsp;connections.</span><br>
<span class="lineno"></span><span class="keyword" id="3780090">type</span>&nbsp;<span class="ident" id="3780095">IPConn</span>&nbsp;<span class="keyword" id="3780102">struct</span>&nbsp;<span class="op" id="3780109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780112">conn</span><br>
<span class="lineno"></span><span class="op" id="3780117">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="3780120">func</span>&nbsp;<span class="ident" id="3780125">newIPConn</span><span class="op" id="3780134">(</span><span class="ident" id="3780135">fd</span>&nbsp;<span class="op" id="3780138">*</span><span class="ident" id="3780139">netFD</span><span class="op" id="3780144">)</span>&nbsp;<span class="op" id="3780146">*</span><span class="ident" id="3780147">IPConn</span>&nbsp;<span class="op" id="3780154">{</span>&nbsp;<span class="keyword" id="3780156">return</span>&nbsp;<span class="op" id="3780163">&amp;</span><span class="ident" id="3780164">IPConn</span><span class="op" id="3780170">{</span><span class="ident" id="3780171">conn</span><span class="op" id="3780175">{</span><span class="ident" id="3780176">fd</span><span class="op" id="3780178">}</span><span class="op" id="3780179">}</span>&nbsp;<span class="op" id="3780181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3780184">//&nbsp;ReadFromIP&nbsp;reads&nbsp;an&nbsp;IP&nbsp;packet&nbsp;from&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="3780253">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;return&nbsp;address</span><br>
<span class="lineno">70</span><span class="comment" id="3780324">//&nbsp;that&nbsp;was&nbsp;on&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span><span class="comment" id="3780351">//</span><br>
<span class="lineno"></span><span class="comment" id="3780354">//&nbsp;ReadFromIP&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="3780417">//&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3780484">//&nbsp;SetReadDeadline.</span><br>
<span class="lineno">75</span><span class="keyword" id="3780504">func</span>&nbsp;<span class="op" id="3780509">(</span><span class="ident" id="3780510">c</span>&nbsp;<span class="op" id="3780512">*</span><span class="ident" id="3780513">IPConn</span><span class="op" id="3780519">)</span>&nbsp;<span class="ident" id="3780521">ReadFromIP</span><span class="op" id="3780531">(</span><span class="ident" id="3780532">b</span>&nbsp;<span class="op" id="3780534">[</span><span class="op" id="3780535">]</span><span class="builtintype" id="3780536">byte</span><span class="op" id="3780540">)</span>&nbsp;<span class="op" id="3780542">(</span><span class="builtintype" id="3780543">int</span><span class="op" id="3780546">,</span>&nbsp;<span class="op" id="3780548">*</span><span class="ident" id="3780549">IPAddr</span><span class="op" id="3780555">,</span>&nbsp;<span class="builtintype" id="3780557">error</span><span class="op" id="3780562">)</span>&nbsp;<span class="op" id="3780564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780567">if</span>&nbsp;<span class="op" id="3780570">!</span><span class="ident" id="3780571">c</span><span class="op" id="3780572">.</span><span class="ident" id="3780573">ok</span><span class="op" id="3780575">(</span><span class="op" id="3780576">)</span>&nbsp;<span class="op" id="3780578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780582">return</span>&nbsp;<span class="num" id="3780589">0</span><span class="op" id="3780590">,</span>&nbsp;<span class="builtintype" id="3780592">nil</span><span class="op" id="3780595">,</span>&nbsp;<span class="ident" id="3780597">syscall</span><span class="op" id="3780604">.</span><span class="ident" id="3780605">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3780613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3780616">//&nbsp;TODO(cw,rsc):&nbsp;consider&nbsp;using&nbsp;readv&nbsp;if&nbsp;we&nbsp;know&nbsp;the&nbsp;family</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3780677">//&nbsp;type&nbsp;to&nbsp;avoid&nbsp;the&nbsp;header&nbsp;trim/copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780716">var</span>&nbsp;<span class="ident" id="3780720">addr</span>&nbsp;<span class="op" id="3780725">*</span><span class="ident" id="3780726">IPAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780734">n</span><span class="op" id="3780735">,</span>&nbsp;<span class="ident" id="3780737">sa</span><span class="op" id="3780739">,</span>&nbsp;<span class="ident" id="3780741">err</span>&nbsp;<span class="op" id="3780745">:=</span>&nbsp;<span class="ident" id="3780748">c</span><span class="op" id="3780749">.</span><span class="ident" id="3780750">fd</span><span class="op" id="3780752">.</span><span class="ident" id="3780753">readFrom</span><span class="op" id="3780761">(</span><span class="ident" id="3780762">b</span><span class="op" id="3780763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780766">switch</span>&nbsp;<span class="ident" id="3780773">sa</span>&nbsp;<span class="op" id="3780776">:=</span>&nbsp;<span class="ident" id="3780779">sa</span><span class="op" id="3780781">.</span><span class="op" id="3780782">(</span><span class="keyword" id="3780783">type</span><span class="op" id="3780787">)</span>&nbsp;<span class="op" id="3780789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780792">case</span>&nbsp;<span class="op" id="3780797">*</span><span class="ident" id="3780798">syscall</span><span class="op" id="3780805">.</span><span class="ident" id="3780806">SockaddrInet4</span><span class="op" id="3780819">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780823">addr</span>&nbsp;<span class="op" id="3780828">=</span>&nbsp;<span class="op" id="3780830">&amp;</span><span class="ident" id="3780831">IPAddr</span><span class="op" id="3780837">{</span><span class="ident" id="3780838">IP</span><span class="op" id="3780840">:</span>&nbsp;<span class="ident" id="3780842">sa</span><span class="op" id="3780844">.</span><span class="ident" id="3780845">Addr</span><span class="op" id="3780849">[</span><span class="num" id="3780850">0</span><span class="op" id="3780851">:</span><span class="op" id="3780852">]</span><span class="op" id="3780853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780857">if</span>&nbsp;<span class="builtinfunc" id="3780860">len</span><span class="op" id="3780863">(</span><span class="ident" id="3780864">b</span><span class="op" id="3780865">)</span>&nbsp;<span class="op" id="3780867">&gt;=</span>&nbsp;<span class="ident" id="3780870">IPv4len</span>&nbsp;<span class="op" id="3780878">{</span>&nbsp;<span class="comment" id="3780880">//&nbsp;discard&nbsp;ipv4&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780906">hsize</span>&nbsp;<span class="op" id="3780912">:=</span>&nbsp;<span class="op" id="3780915">(</span><span class="builtintype" id="3780916">int</span><span class="op" id="3780919">(</span><span class="ident" id="3780920">b</span><span class="op" id="3780921">[</span><span class="num" id="3780922">0</span><span class="op" id="3780923">]</span><span class="op" id="3780924">)</span>&nbsp;<span class="op" id="3780926">&amp;</span>&nbsp;<span class="num" id="3780928">0xf</span><span class="op" id="3780931">)</span>&nbsp;<span class="op" id="3780933">*</span>&nbsp;<span class="num" id="3780935">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3780940">copy</span><span class="op" id="3780944">(</span><span class="ident" id="3780945">b</span><span class="op" id="3780946">,</span>&nbsp;<span class="ident" id="3780948">b</span><span class="op" id="3780949">[</span><span class="ident" id="3780950">hsize</span><span class="op" id="3780955">:</span><span class="op" id="3780956">]</span><span class="op" id="3780957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780962">n</span>&nbsp;<span class="op" id="3780964">-=</span>&nbsp;<span class="ident" id="3780967">hsize</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3780975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780978">case</span>&nbsp;<span class="op" id="3780983">*</span><span class="ident" id="3780984">syscall</span><span class="op" id="3780991">.</span><span class="ident" id="3780992">SockaddrInet6</span><span class="op" id="3781005">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781009">addr</span>&nbsp;<span class="op" id="3781014">=</span>&nbsp;<span class="op" id="3781016">&amp;</span><span class="ident" id="3781017">IPAddr</span><span class="op" id="3781023">{</span><span class="ident" id="3781024">IP</span><span class="op" id="3781026">:</span>&nbsp;<span class="ident" id="3781028">sa</span><span class="op" id="3781030">.</span><span class="ident" id="3781031">Addr</span><span class="op" id="3781035">[</span><span class="num" id="3781036">0</span><span class="op" id="3781037">:</span><span class="op" id="3781038">]</span><span class="op" id="3781039">,</span>&nbsp;<span class="ident" id="3781041">Zone</span><span class="op" id="3781045">:</span>&nbsp;<span class="ident" id="3781047">zoneToString</span><span class="op" id="3781059">(</span><span class="builtintype" id="3781060">int</span><span class="op" id="3781063">(</span><span class="ident" id="3781064">sa</span><span class="op" id="3781066">.</span><span class="ident" id="3781067">ZoneId</span><span class="op" id="3781073">)</span><span class="op" id="3781074">)</span><span class="op" id="3781075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781081">return</span>&nbsp;<span class="ident" id="3781088">n</span><span class="op" id="3781089">,</span>&nbsp;<span class="ident" id="3781091">addr</span><span class="op" id="3781095">,</span>&nbsp;<span class="ident" id="3781097">err</span><br>
<span class="lineno">95</span><span class="op" id="3781101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3781104">//&nbsp;ReadFrom&nbsp;implements&nbsp;the&nbsp;PacketConn&nbsp;ReadFrom&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3781159">func</span>&nbsp;<span class="op" id="3781164">(</span><span class="ident" id="3781165">c</span>&nbsp;<span class="op" id="3781167">*</span><span class="ident" id="3781168">IPConn</span><span class="op" id="3781174">)</span>&nbsp;<span class="ident" id="3781176">ReadFrom</span><span class="op" id="3781184">(</span><span class="ident" id="3781185">b</span>&nbsp;<span class="op" id="3781187">[</span><span class="op" id="3781188">]</span><span class="builtintype" id="3781189">byte</span><span class="op" id="3781193">)</span>&nbsp;<span class="op" id="3781195">(</span><span class="builtintype" id="3781196">int</span><span class="op" id="3781199">,</span>&nbsp;<span class="ident" id="3781201">Addr</span><span class="op" id="3781205">,</span>&nbsp;<span class="builtintype" id="3781207">error</span><span class="op" id="3781212">)</span>&nbsp;<span class="op" id="3781214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781217">if</span>&nbsp;<span class="op" id="3781220">!</span><span class="ident" id="3781221">c</span><span class="op" id="3781222">.</span><span class="ident" id="3781223">ok</span><span class="op" id="3781225">(</span><span class="op" id="3781226">)</span>&nbsp;<span class="op" id="3781228">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781232">return</span>&nbsp;<span class="num" id="3781239">0</span><span class="op" id="3781240">,</span>&nbsp;<span class="builtintype" id="3781242">nil</span><span class="op" id="3781245">,</span>&nbsp;<span class="ident" id="3781247">syscall</span><span class="op" id="3781254">.</span><span class="ident" id="3781255">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781266">n</span><span class="op" id="3781267">,</span>&nbsp;<span class="ident" id="3781269">addr</span><span class="op" id="3781273">,</span>&nbsp;<span class="ident" id="3781275">err</span>&nbsp;<span class="op" id="3781279">:=</span>&nbsp;<span class="ident" id="3781282">c</span><span class="op" id="3781283">.</span><span class="ident" id="3781284">ReadFromIP</span><span class="op" id="3781294">(</span><span class="ident" id="3781295">b</span><span class="op" id="3781296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781299">return</span>&nbsp;<span class="ident" id="3781306">n</span><span class="op" id="3781307">,</span>&nbsp;<span class="ident" id="3781309">addr</span><span class="op" id="3781313">.</span><span class="ident" id="3781314">toAddr</span><span class="op" id="3781320">(</span><span class="op" id="3781321">)</span><span class="op" id="3781322">,</span>&nbsp;<span class="ident" id="3781324">err</span><br>
<span class="lineno"></span><span class="op" id="3781328">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span><span class="comment" id="3781331">//&nbsp;ReadMsgIP&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3781402">//&nbsp;associated&nbsp;out-of-band&nbsp;data&nbsp;into&nbsp;oob.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3781469">//&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b,&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;oob,&nbsp;the&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="3781540">//&nbsp;that&nbsp;were&nbsp;set&nbsp;on&nbsp;the&nbsp;packet&nbsp;and&nbsp;the&nbsp;source&nbsp;address&nbsp;of&nbsp;the&nbsp;packet.</span><br>
<span class="lineno">110</span><span class="keyword" id="3781609">func</span>&nbsp;<span class="op" id="3781614">(</span><span class="ident" id="3781615">c</span>&nbsp;<span class="op" id="3781617">*</span><span class="ident" id="3781618">IPConn</span><span class="op" id="3781624">)</span>&nbsp;<span class="ident" id="3781626">ReadMsgIP</span><span class="op" id="3781635">(</span><span class="ident" id="3781636">b</span><span class="op" id="3781637">,</span>&nbsp;<span class="ident" id="3781639">oob</span>&nbsp;<span class="op" id="3781643">[</span><span class="op" id="3781644">]</span><span class="builtintype" id="3781645">byte</span><span class="op" id="3781649">)</span>&nbsp;<span class="op" id="3781651">(</span><span class="ident" id="3781652">n</span><span class="op" id="3781653">,</span>&nbsp;<span class="ident" id="3781655">oobn</span><span class="op" id="3781659">,</span>&nbsp;<span class="ident" id="3781661">flags</span>&nbsp;<span class="builtintype" id="3781667">int</span><span class="op" id="3781670">,</span>&nbsp;<span class="ident" id="3781672">addr</span>&nbsp;<span class="op" id="3781677">*</span><span class="ident" id="3781678">IPAddr</span><span class="op" id="3781684">,</span>&nbsp;<span class="ident" id="3781686">err</span>&nbsp;<span class="builtintype" id="3781690">error</span><span class="op" id="3781695">)</span>&nbsp;<span class="op" id="3781697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781700">if</span>&nbsp;<span class="op" id="3781703">!</span><span class="ident" id="3781704">c</span><span class="op" id="3781705">.</span><span class="ident" id="3781706">ok</span><span class="op" id="3781708">(</span><span class="op" id="3781709">)</span>&nbsp;<span class="op" id="3781711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781715">return</span>&nbsp;<span class="num" id="3781722">0</span><span class="op" id="3781723">,</span>&nbsp;<span class="num" id="3781725">0</span><span class="op" id="3781726">,</span>&nbsp;<span class="num" id="3781728">0</span><span class="op" id="3781729">,</span>&nbsp;<span class="builtintype" id="3781731">nil</span><span class="op" id="3781734">,</span>&nbsp;<span class="ident" id="3781736">syscall</span><span class="op" id="3781743">.</span><span class="ident" id="3781744">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781755">var</span>&nbsp;<span class="ident" id="3781759">sa</span>&nbsp;<span class="ident" id="3781762">syscall</span><span class="op" id="3781769">.</span><span class="ident" id="3781770">Sockaddr</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781780">n</span><span class="op" id="3781781">,</span>&nbsp;<span class="ident" id="3781783">oobn</span><span class="op" id="3781787">,</span>&nbsp;<span class="ident" id="3781789">flags</span><span class="op" id="3781794">,</span>&nbsp;<span class="ident" id="3781796">sa</span><span class="op" id="3781798">,</span>&nbsp;<span class="ident" id="3781800">err</span>&nbsp;<span class="op" id="3781804">=</span>&nbsp;<span class="ident" id="3781806">c</span><span class="op" id="3781807">.</span><span class="ident" id="3781808">fd</span><span class="op" id="3781810">.</span><span class="ident" id="3781811">readMsg</span><span class="op" id="3781818">(</span><span class="ident" id="3781819">b</span><span class="op" id="3781820">,</span>&nbsp;<span class="ident" id="3781822">oob</span><span class="op" id="3781825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781828">switch</span>&nbsp;<span class="ident" id="3781835">sa</span>&nbsp;<span class="op" id="3781838">:=</span>&nbsp;<span class="ident" id="3781841">sa</span><span class="op" id="3781843">.</span><span class="op" id="3781844">(</span><span class="keyword" id="3781845">type</span><span class="op" id="3781849">)</span>&nbsp;<span class="op" id="3781851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781854">case</span>&nbsp;<span class="op" id="3781859">*</span><span class="ident" id="3781860">syscall</span><span class="op" id="3781867">.</span><span class="ident" id="3781868">SockaddrInet4</span><span class="op" id="3781881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781885">addr</span>&nbsp;<span class="op" id="3781890">=</span>&nbsp;<span class="op" id="3781892">&amp;</span><span class="ident" id="3781893">IPAddr</span><span class="op" id="3781899">{</span><span class="ident" id="3781900">IP</span><span class="op" id="3781902">:</span>&nbsp;<span class="ident" id="3781904">sa</span><span class="op" id="3781906">.</span><span class="ident" id="3781907">Addr</span><span class="op" id="3781911">[</span><span class="num" id="3781912">0</span><span class="op" id="3781913">:</span><span class="op" id="3781914">]</span><span class="op" id="3781915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781918">case</span>&nbsp;<span class="op" id="3781923">*</span><span class="ident" id="3781924">syscall</span><span class="op" id="3781931">.</span><span class="ident" id="3781932">SockaddrInet6</span><span class="op" id="3781945">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781949">addr</span>&nbsp;<span class="op" id="3781954">=</span>&nbsp;<span class="op" id="3781956">&amp;</span><span class="ident" id="3781957">IPAddr</span><span class="op" id="3781963">{</span><span class="ident" id="3781964">IP</span><span class="op" id="3781966">:</span>&nbsp;<span class="ident" id="3781968">sa</span><span class="op" id="3781970">.</span><span class="ident" id="3781971">Addr</span><span class="op" id="3781975">[</span><span class="num" id="3781976">0</span><span class="op" id="3781977">:</span><span class="op" id="3781978">]</span><span class="op" id="3781979">,</span>&nbsp;<span class="ident" id="3781981">Zone</span><span class="op" id="3781985">:</span>&nbsp;<span class="ident" id="3781987">zoneToString</span><span class="op" id="3781999">(</span><span class="builtintype" id="3782000">int</span><span class="op" id="3782003">(</span><span class="ident" id="3782004">sa</span><span class="op" id="3782006">.</span><span class="ident" id="3782007">ZoneId</span><span class="op" id="3782013">)</span><span class="op" id="3782014">)</span><span class="op" id="3782015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782021">return</span><br>
<span class="lineno"></span><span class="op" id="3782028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="3782031">//&nbsp;WriteToIP&nbsp;writes&nbsp;an&nbsp;IP&nbsp;packet&nbsp;to&nbsp;addr&nbsp;via&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload</span><br>
<span class="lineno"></span><span class="comment" id="3782099">//&nbsp;from&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="3782110">//</span><br>
<span class="lineno"></span><span class="comment" id="3782113">//&nbsp;WriteToIP&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="3782175">//&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and</span><br>
<span class="lineno">130</span><span class="comment" id="3782242">//&nbsp;SetWriteDeadline.&nbsp;&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts</span><br>
<span class="lineno"></span><span class="comment" id="3782311">//&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span><span class="keyword" id="3782324">func</span>&nbsp;<span class="op" id="3782329">(</span><span class="ident" id="3782330">c</span>&nbsp;<span class="op" id="3782332">*</span><span class="ident" id="3782333">IPConn</span><span class="op" id="3782339">)</span>&nbsp;<span class="ident" id="3782341">WriteToIP</span><span class="op" id="3782350">(</span><span class="ident" id="3782351">b</span>&nbsp;<span class="op" id="3782353">[</span><span class="op" id="3782354">]</span><span class="builtintype" id="3782355">byte</span><span class="op" id="3782359">,</span>&nbsp;<span class="ident" id="3782361">addr</span>&nbsp;<span class="op" id="3782366">*</span><span class="ident" id="3782367">IPAddr</span><span class="op" id="3782373">)</span>&nbsp;<span class="op" id="3782375">(</span><span class="builtintype" id="3782376">int</span><span class="op" id="3782379">,</span>&nbsp;<span class="builtintype" id="3782381">error</span><span class="op" id="3782386">)</span>&nbsp;<span class="op" id="3782388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782391">if</span>&nbsp;<span class="op" id="3782394">!</span><span class="ident" id="3782395">c</span><span class="op" id="3782396">.</span><span class="ident" id="3782397">ok</span><span class="op" id="3782399">(</span><span class="op" id="3782400">)</span>&nbsp;<span class="op" id="3782402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782406">return</span>&nbsp;<span class="num" id="3782413">0</span><span class="op" id="3782414">,</span>&nbsp;<span class="ident" id="3782416">syscall</span><span class="op" id="3782423">.</span><span class="ident" id="3782424">EINVAL</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782435">if</span>&nbsp;<span class="ident" id="3782438">c</span><span class="op" id="3782439">.</span><span class="ident" id="3782440">fd</span><span class="op" id="3782442">.</span><span class="ident" id="3782443">isConnected</span>&nbsp;<span class="op" id="3782455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782459">return</span>&nbsp;<span class="num" id="3782466">0</span><span class="op" id="3782467">,</span>&nbsp;<span class="op" id="3782469">&amp;</span><span class="ident" id="3782470">OpError</span><span class="op" id="3782477">{</span><span class="ident" id="3782478">Op</span><span class="op" id="3782480">:</span>&nbsp;<span class="string" id="3782482">&#34;write&#34;</span><span class="op" id="3782489">,</span>&nbsp;<span class="ident" id="3782491">Net</span><span class="op" id="3782494">:</span>&nbsp;<span class="ident" id="3782496">c</span><span class="op" id="3782497">.</span><span class="ident" id="3782498">fd</span><span class="op" id="3782500">.</span><span class="ident" id="3782501">net</span><span class="op" id="3782504">,</span>&nbsp;<span class="ident" id="3782506">Addr</span><span class="op" id="3782510">:</span>&nbsp;<span class="ident" id="3782512">addr</span><span class="op" id="3782516">,</span>&nbsp;<span class="ident" id="3782518">Err</span><span class="op" id="3782521">:</span>&nbsp;<span class="ident" id="3782523">ErrWriteToConnected</span><span class="op" id="3782542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782548">if</span>&nbsp;<span class="ident" id="3782551">addr</span>&nbsp;<span class="op" id="3782556">==</span>&nbsp;<span class="builtintype" id="3782559">nil</span>&nbsp;<span class="op" id="3782563">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782567">return</span>&nbsp;<span class="num" id="3782574">0</span><span class="op" id="3782575">,</span>&nbsp;<span class="op" id="3782577">&amp;</span><span class="ident" id="3782578">OpError</span><span class="op" id="3782585">{</span><span class="ident" id="3782586">Op</span><span class="op" id="3782588">:</span>&nbsp;<span class="string" id="3782590">&#34;write&#34;</span><span class="op" id="3782597">,</span>&nbsp;<span class="ident" id="3782599">Net</span><span class="op" id="3782602">:</span>&nbsp;<span class="ident" id="3782604">c</span><span class="op" id="3782605">.</span><span class="ident" id="3782606">fd</span><span class="op" id="3782608">.</span><span class="ident" id="3782609">net</span><span class="op" id="3782612">,</span>&nbsp;<span class="ident" id="3782614">Addr</span><span class="op" id="3782618">:</span>&nbsp;<span class="builtintype" id="3782620">nil</span><span class="op" id="3782623">,</span>&nbsp;<span class="ident" id="3782625">Err</span><span class="op" id="3782628">:</span>&nbsp;<span class="ident" id="3782630">errMissingAddress</span><span class="op" id="3782647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3782653">sa</span><span class="op" id="3782655">,</span>&nbsp;<span class="ident" id="3782657">err</span>&nbsp;<span class="op" id="3782661">:=</span>&nbsp;<span class="ident" id="3782664">addr</span><span class="op" id="3782668">.</span><span class="ident" id="3782669">sockaddr</span><span class="op" id="3782677">(</span><span class="ident" id="3782678">c</span><span class="op" id="3782679">.</span><span class="ident" id="3782680">fd</span><span class="op" id="3782682">.</span><span class="ident" id="3782683">family</span><span class="op" id="3782689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782692">if</span>&nbsp;<span class="ident" id="3782695">err</span>&nbsp;<span class="op" id="3782699">!=</span>&nbsp;<span class="builtintype" id="3782702">nil</span>&nbsp;<span class="op" id="3782706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782710">return</span>&nbsp;<span class="num" id="3782717">0</span><span class="op" id="3782718">,</span>&nbsp;<span class="op" id="3782720">&amp;</span><span class="ident" id="3782721">OpError</span><span class="op" id="3782728">{</span><span class="string" id="3782729">&#34;write&#34;</span><span class="op" id="3782736">,</span>&nbsp;<span class="ident" id="3782738">c</span><span class="op" id="3782739">.</span><span class="ident" id="3782740">fd</span><span class="op" id="3782742">.</span><span class="ident" id="3782743">net</span><span class="op" id="3782746">,</span>&nbsp;<span class="ident" id="3782748">addr</span><span class="op" id="3782752">,</span>&nbsp;<span class="ident" id="3782754">err</span><span class="op" id="3782757">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782763">return</span>&nbsp;<span class="ident" id="3782770">c</span><span class="op" id="3782771">.</span><span class="ident" id="3782772">fd</span><span class="op" id="3782774">.</span><span class="ident" id="3782775">writeTo</span><span class="op" id="3782782">(</span><span class="ident" id="3782783">b</span><span class="op" id="3782784">,</span>&nbsp;<span class="ident" id="3782786">sa</span><span class="op" id="3782788">)</span><br>
<span class="lineno"></span><span class="op" id="3782790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3782793">//&nbsp;WriteTo&nbsp;implements&nbsp;the&nbsp;PacketConn&nbsp;WriteTo&nbsp;method.</span><br>
<span class="lineno">150</span><span class="keyword" id="3782846">func</span>&nbsp;<span class="op" id="3782851">(</span><span class="ident" id="3782852">c</span>&nbsp;<span class="op" id="3782854">*</span><span class="ident" id="3782855">IPConn</span><span class="op" id="3782861">)</span>&nbsp;<span class="ident" id="3782863">WriteTo</span><span class="op" id="3782870">(</span><span class="ident" id="3782871">b</span>&nbsp;<span class="op" id="3782873">[</span><span class="op" id="3782874">]</span><span class="builtintype" id="3782875">byte</span><span class="op" id="3782879">,</span>&nbsp;<span class="ident" id="3782881">addr</span>&nbsp;<span class="ident" id="3782886">Addr</span><span class="op" id="3782890">)</span>&nbsp;<span class="op" id="3782892">(</span><span class="builtintype" id="3782893">int</span><span class="op" id="3782896">,</span>&nbsp;<span class="builtintype" id="3782898">error</span><span class="op" id="3782903">)</span>&nbsp;<span class="op" id="3782905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782908">if</span>&nbsp;<span class="op" id="3782911">!</span><span class="ident" id="3782912">c</span><span class="op" id="3782913">.</span><span class="ident" id="3782914">ok</span><span class="op" id="3782916">(</span><span class="op" id="3782917">)</span>&nbsp;<span class="op" id="3782919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782923">return</span>&nbsp;<span class="num" id="3782930">0</span><span class="op" id="3782931">,</span>&nbsp;<span class="ident" id="3782933">syscall</span><span class="op" id="3782940">.</span><span class="ident" id="3782941">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3782952">a</span><span class="op" id="3782953">,</span>&nbsp;<span class="ident" id="3782955">ok</span>&nbsp;<span class="op" id="3782958">:=</span>&nbsp;<span class="ident" id="3782961">addr</span><span class="op" id="3782965">.</span><span class="op" id="3782966">(</span><span class="op" id="3782967">*</span><span class="ident" id="3782968">IPAddr</span><span class="op" id="3782974">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782977">if</span>&nbsp;<span class="op" id="3782980">!</span><span class="ident" id="3782981">ok</span>&nbsp;<span class="op" id="3782984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782988">return</span>&nbsp;<span class="num" id="3782995">0</span><span class="op" id="3782996">,</span>&nbsp;<span class="op" id="3782998">&amp;</span><span class="ident" id="3782999">OpError</span><span class="op" id="3783006">{</span><span class="string" id="3783007">&#34;write&#34;</span><span class="op" id="3783014">,</span>&nbsp;<span class="ident" id="3783016">c</span><span class="op" id="3783017">.</span><span class="ident" id="3783018">fd</span><span class="op" id="3783020">.</span><span class="ident" id="3783021">net</span><span class="op" id="3783024">,</span>&nbsp;<span class="ident" id="3783026">addr</span><span class="op" id="3783030">,</span>&nbsp;<span class="ident" id="3783032">syscall</span><span class="op" id="3783039">.</span><span class="ident" id="3783040">EINVAL</span><span class="op" id="3783046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3783049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783052">return</span>&nbsp;<span class="ident" id="3783059">c</span><span class="op" id="3783060">.</span><span class="ident" id="3783061">WriteToIP</span><span class="op" id="3783070">(</span><span class="ident" id="3783071">b</span><span class="op" id="3783072">,</span>&nbsp;<span class="ident" id="3783074">a</span><span class="op" id="3783075">)</span><br>
<span class="lineno"></span><span class="op" id="3783077">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="3783080">//&nbsp;WriteMsgIP&nbsp;writes&nbsp;a&nbsp;packet&nbsp;to&nbsp;addr&nbsp;via&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="3783150">//&nbsp;b&nbsp;and&nbsp;the&nbsp;associated&nbsp;out-of-band&nbsp;data&nbsp;from&nbsp;oob.&nbsp;&nbsp;It&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3783217">//&nbsp;number&nbsp;of&nbsp;payload&nbsp;and&nbsp;out-of-band&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno"></span><span class="keyword" id="3783269">func</span>&nbsp;<span class="op" id="3783274">(</span><span class="ident" id="3783275">c</span>&nbsp;<span class="op" id="3783277">*</span><span class="ident" id="3783278">IPConn</span><span class="op" id="3783284">)</span>&nbsp;<span class="ident" id="3783286">WriteMsgIP</span><span class="op" id="3783296">(</span><span class="ident" id="3783297">b</span><span class="op" id="3783298">,</span>&nbsp;<span class="ident" id="3783300">oob</span>&nbsp;<span class="op" id="3783304">[</span><span class="op" id="3783305">]</span><span class="builtintype" id="3783306">byte</span><span class="op" id="3783310">,</span>&nbsp;<span class="ident" id="3783312">addr</span>&nbsp;<span class="op" id="3783317">*</span><span class="ident" id="3783318">IPAddr</span><span class="op" id="3783324">)</span>&nbsp;<span class="op" id="3783326">(</span><span class="ident" id="3783327">n</span><span class="op" id="3783328">,</span>&nbsp;<span class="ident" id="3783330">oobn</span>&nbsp;<span class="builtintype" id="3783335">int</span><span class="op" id="3783338">,</span>&nbsp;<span class="ident" id="3783340">err</span>&nbsp;<span class="builtintype" id="3783344">error</span><span class="op" id="3783349">)</span>&nbsp;<span class="op" id="3783351">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783354">if</span>&nbsp;<span class="op" id="3783357">!</span><span class="ident" id="3783358">c</span><span class="op" id="3783359">.</span><span class="ident" id="3783360">ok</span><span class="op" id="3783362">(</span><span class="op" id="3783363">)</span>&nbsp;<span class="op" id="3783365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783369">return</span>&nbsp;<span class="num" id="3783376">0</span><span class="op" id="3783377">,</span>&nbsp;<span class="num" id="3783379">0</span><span class="op" id="3783380">,</span>&nbsp;<span class="ident" id="3783382">syscall</span><span class="op" id="3783389">.</span><span class="ident" id="3783390">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3783398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783401">if</span>&nbsp;<span class="ident" id="3783404">c</span><span class="op" id="3783405">.</span><span class="ident" id="3783406">fd</span><span class="op" id="3783408">.</span><span class="ident" id="3783409">isConnected</span>&nbsp;<span class="op" id="3783421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783425">return</span>&nbsp;<span class="num" id="3783432">0</span><span class="op" id="3783433">,</span>&nbsp;<span class="num" id="3783435">0</span><span class="op" id="3783436">,</span>&nbsp;<span class="op" id="3783438">&amp;</span><span class="ident" id="3783439">OpError</span><span class="op" id="3783446">{</span><span class="ident" id="3783447">Op</span><span class="op" id="3783449">:</span>&nbsp;<span class="string" id="3783451">&#34;write&#34;</span><span class="op" id="3783458">,</span>&nbsp;<span class="ident" id="3783460">Net</span><span class="op" id="3783463">:</span>&nbsp;<span class="ident" id="3783465">c</span><span class="op" id="3783466">.</span><span class="ident" id="3783467">fd</span><span class="op" id="3783469">.</span><span class="ident" id="3783470">net</span><span class="op" id="3783473">,</span>&nbsp;<span class="ident" id="3783475">Addr</span><span class="op" id="3783479">:</span>&nbsp;<span class="ident" id="3783481">addr</span><span class="op" id="3783485">,</span>&nbsp;<span class="ident" id="3783487">Err</span><span class="op" id="3783490">:</span>&nbsp;<span class="ident" id="3783492">ErrWriteToConnected</span><span class="op" id="3783511">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3783514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783517">if</span>&nbsp;<span class="ident" id="3783520">addr</span>&nbsp;<span class="op" id="3783525">==</span>&nbsp;<span class="builtintype" id="3783528">nil</span>&nbsp;<span class="op" id="3783532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783536">return</span>&nbsp;<span class="num" id="3783543">0</span><span class="op" id="3783544">,</span>&nbsp;<span class="num" id="3783546">0</span><span class="op" id="3783547">,</span>&nbsp;<span class="op" id="3783549">&amp;</span><span class="ident" id="3783550">OpError</span><span class="op" id="3783557">{</span><span class="ident" id="3783558">Op</span><span class="op" id="3783560">:</span>&nbsp;<span class="string" id="3783562">&#34;write&#34;</span><span class="op" id="3783569">,</span>&nbsp;<span class="ident" id="3783571">Net</span><span class="op" id="3783574">:</span>&nbsp;<span class="ident" id="3783576">c</span><span class="op" id="3783577">.</span><span class="ident" id="3783578">fd</span><span class="op" id="3783580">.</span><span class="ident" id="3783581">net</span><span class="op" id="3783584">,</span>&nbsp;<span class="ident" id="3783586">Addr</span><span class="op" id="3783590">:</span>&nbsp;<span class="builtintype" id="3783592">nil</span><span class="op" id="3783595">,</span>&nbsp;<span class="ident" id="3783597">Err</span><span class="op" id="3783600">:</span>&nbsp;<span class="ident" id="3783602">errMissingAddress</span><span class="op" id="3783619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3783622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3783625">sa</span><span class="op" id="3783627">,</span>&nbsp;<span class="ident" id="3783629">err</span>&nbsp;<span class="op" id="3783633">:=</span>&nbsp;<span class="ident" id="3783636">addr</span><span class="op" id="3783640">.</span><span class="ident" id="3783641">sockaddr</span><span class="op" id="3783649">(</span><span class="ident" id="3783650">c</span><span class="op" id="3783651">.</span><span class="ident" id="3783652">fd</span><span class="op" id="3783654">.</span><span class="ident" id="3783655">family</span><span class="op" id="3783661">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783664">if</span>&nbsp;<span class="ident" id="3783667">err</span>&nbsp;<span class="op" id="3783671">!=</span>&nbsp;<span class="builtintype" id="3783674">nil</span>&nbsp;<span class="op" id="3783678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783682">return</span>&nbsp;<span class="num" id="3783689">0</span><span class="op" id="3783690">,</span>&nbsp;<span class="num" id="3783692">0</span><span class="op" id="3783693">,</span>&nbsp;<span class="op" id="3783695">&amp;</span><span class="ident" id="3783696">OpError</span><span class="op" id="3783703">{</span><span class="string" id="3783704">&#34;write&#34;</span><span class="op" id="3783711">,</span>&nbsp;<span class="ident" id="3783713">c</span><span class="op" id="3783714">.</span><span class="ident" id="3783715">fd</span><span class="op" id="3783717">.</span><span class="ident" id="3783718">net</span><span class="op" id="3783721">,</span>&nbsp;<span class="ident" id="3783723">addr</span><span class="op" id="3783727">,</span>&nbsp;<span class="ident" id="3783729">err</span><span class="op" id="3783732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3783735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783738">return</span>&nbsp;<span class="ident" id="3783745">c</span><span class="op" id="3783746">.</span><span class="ident" id="3783747">fd</span><span class="op" id="3783749">.</span><span class="ident" id="3783750">writeMsg</span><span class="op" id="3783758">(</span><span class="ident" id="3783759">b</span><span class="op" id="3783760">,</span>&nbsp;<span class="ident" id="3783762">oob</span><span class="op" id="3783765">,</span>&nbsp;<span class="ident" id="3783767">sa</span><span class="op" id="3783769">)</span><br>
<span class="lineno"></span><span class="op" id="3783771">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="3783774">//&nbsp;DialIP&nbsp;connects&nbsp;to&nbsp;the&nbsp;remote&nbsp;address&nbsp;raddr&nbsp;on&nbsp;the&nbsp;network&nbsp;protocol</span><br>
<span class="lineno"></span><span class="comment" id="3783845">//&nbsp;netProto,&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;ip&#34;,&nbsp;&#34;ip4&#34;,&nbsp;or&nbsp;&#34;ip6&#34;&nbsp;followed&nbsp;by&nbsp;a&nbsp;colon</span><br>
<span class="lineno"></span><span class="comment" id="3783914">//&nbsp;and&nbsp;a&nbsp;protocol&nbsp;number&nbsp;or&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="3783948">func</span>&nbsp;<span class="ident" id="3783953">DialIP</span><span class="op" id="3783959">(</span><span class="ident" id="3783960">netProto</span>&nbsp;<span class="builtintype" id="3783969">string</span><span class="op" id="3783975">,</span>&nbsp;<span class="ident" id="3783977">laddr</span><span class="op" id="3783982">,</span>&nbsp;<span class="ident" id="3783984">raddr</span>&nbsp;<span class="op" id="3783990">*</span><span class="ident" id="3783991">IPAddr</span><span class="op" id="3783997">)</span>&nbsp;<span class="op" id="3783999">(</span><span class="op" id="3784000">*</span><span class="ident" id="3784001">IPConn</span><span class="op" id="3784007">,</span>&nbsp;<span class="builtintype" id="3784009">error</span><span class="op" id="3784014">)</span>&nbsp;<span class="op" id="3784016">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784019">return</span>&nbsp;<span class="ident" id="3784026">dialIP</span><span class="op" id="3784032">(</span><span class="ident" id="3784033">netProto</span><span class="op" id="3784041">,</span>&nbsp;<span class="ident" id="3784043">laddr</span><span class="op" id="3784048">,</span>&nbsp;<span class="ident" id="3784050">raddr</span><span class="op" id="3784055">,</span>&nbsp;<span class="ident" id="3784057">noDeadline</span><span class="op" id="3784067">)</span><br>
<span class="lineno"></span><span class="op" id="3784069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3784072">func</span>&nbsp;<span class="ident" id="3784077">dialIP</span><span class="op" id="3784083">(</span><span class="ident" id="3784084">netProto</span>&nbsp;<span class="builtintype" id="3784093">string</span><span class="op" id="3784099">,</span>&nbsp;<span class="ident" id="3784101">laddr</span><span class="op" id="3784106">,</span>&nbsp;<span class="ident" id="3784108">raddr</span>&nbsp;<span class="op" id="3784114">*</span><span class="ident" id="3784115">IPAddr</span><span class="op" id="3784121">,</span>&nbsp;<span class="ident" id="3784123">deadline</span>&nbsp;<span class="ident" id="3784132">time</span><span class="op" id="3784136">.</span><span class="ident" id="3784137">Time</span><span class="op" id="3784141">)</span>&nbsp;<span class="op" id="3784143">(</span><span class="op" id="3784144">*</span><span class="ident" id="3784145">IPConn</span><span class="op" id="3784151">,</span>&nbsp;<span class="builtintype" id="3784153">error</span><span class="op" id="3784158">)</span>&nbsp;<span class="op" id="3784160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3784163">net</span><span class="op" id="3784166">,</span>&nbsp;<span class="ident" id="3784168">proto</span><span class="op" id="3784173">,</span>&nbsp;<span class="ident" id="3784175">err</span>&nbsp;<span class="op" id="3784179">:=</span>&nbsp;<span class="ident" id="3784182">parseNetwork</span><span class="op" id="3784194">(</span><span class="ident" id="3784195">netProto</span><span class="op" id="3784203">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784206">if</span>&nbsp;<span class="ident" id="3784209">err</span>&nbsp;<span class="op" id="3784213">!=</span>&nbsp;<span class="builtintype" id="3784216">nil</span>&nbsp;<span class="op" id="3784220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784224">return</span>&nbsp;<span class="builtintype" id="3784231">nil</span><span class="op" id="3784234">,</span>&nbsp;<span class="op" id="3784236">&amp;</span><span class="ident" id="3784237">OpError</span><span class="op" id="3784244">{</span><span class="ident" id="3784245">Op</span><span class="op" id="3784247">:</span>&nbsp;<span class="string" id="3784249">&#34;dial&#34;</span><span class="op" id="3784255">,</span>&nbsp;<span class="ident" id="3784257">Net</span><span class="op" id="3784260">:</span>&nbsp;<span class="ident" id="3784262">netProto</span><span class="op" id="3784270">,</span>&nbsp;<span class="ident" id="3784272">Addr</span><span class="op" id="3784276">:</span>&nbsp;<span class="ident" id="3784278">raddr</span><span class="op" id="3784283">,</span>&nbsp;<span class="ident" id="3784285">Err</span><span class="op" id="3784288">:</span>&nbsp;<span class="ident" id="3784290">err</span><span class="op" id="3784293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3784296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784299">switch</span>&nbsp;<span class="ident" id="3784306">net</span>&nbsp;<span class="op" id="3784310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784313">case</span>&nbsp;<span class="string" id="3784318">&#34;ip&#34;</span><span class="op" id="3784322">,</span>&nbsp;<span class="string" id="3784324">&#34;ip4&#34;</span><span class="op" id="3784329">,</span>&nbsp;<span class="string" id="3784331">&#34;ip6&#34;</span><span class="op" id="3784336">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784339">default</span><span class="op" id="3784346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784350">return</span>&nbsp;<span class="builtintype" id="3784357">nil</span><span class="op" id="3784360">,</span>&nbsp;<span class="op" id="3784362">&amp;</span><span class="ident" id="3784363">OpError</span><span class="op" id="3784370">{</span><span class="ident" id="3784371">Op</span><span class="op" id="3784373">:</span>&nbsp;<span class="string" id="3784375">&#34;dial&#34;</span><span class="op" id="3784381">,</span>&nbsp;<span class="ident" id="3784383">Net</span><span class="op" id="3784386">:</span>&nbsp;<span class="ident" id="3784388">netProto</span><span class="op" id="3784396">,</span>&nbsp;<span class="ident" id="3784398">Addr</span><span class="op" id="3784402">:</span>&nbsp;<span class="ident" id="3784404">raddr</span><span class="op" id="3784409">,</span>&nbsp;<span class="ident" id="3784411">Err</span><span class="op" id="3784414">:</span>&nbsp;<span class="ident" id="3784416">UnknownNetworkError</span><span class="op" id="3784435">(</span><span class="ident" id="3784436">netProto</span><span class="op" id="3784444">)</span><span class="op" id="3784445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3784448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784451">if</span>&nbsp;<span class="ident" id="3784454">raddr</span>&nbsp;<span class="op" id="3784460">==</span>&nbsp;<span class="builtintype" id="3784463">nil</span>&nbsp;<span class="op" id="3784467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784471">return</span>&nbsp;<span class="builtintype" id="3784478">nil</span><span class="op" id="3784481">,</span>&nbsp;<span class="op" id="3784483">&amp;</span><span class="ident" id="3784484">OpError</span><span class="op" id="3784491">{</span><span class="ident" id="3784492">Op</span><span class="op" id="3784494">:</span>&nbsp;<span class="string" id="3784496">&#34;dial&#34;</span><span class="op" id="3784502">,</span>&nbsp;<span class="ident" id="3784504">Net</span><span class="op" id="3784507">:</span>&nbsp;<span class="ident" id="3784509">netProto</span><span class="op" id="3784517">,</span>&nbsp;<span class="ident" id="3784519">Addr</span><span class="op" id="3784523">:</span>&nbsp;<span class="builtintype" id="3784525">nil</span><span class="op" id="3784528">,</span>&nbsp;<span class="ident" id="3784530">Err</span><span class="op" id="3784533">:</span>&nbsp;<span class="ident" id="3784535">errMissingAddress</span><span class="op" id="3784552">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3784555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3784558">fd</span><span class="op" id="3784560">,</span>&nbsp;<span class="ident" id="3784562">err</span>&nbsp;<span class="op" id="3784566">:=</span>&nbsp;<span class="ident" id="3784569">internetSocket</span><span class="op" id="3784583">(</span><span class="ident" id="3784584">net</span><span class="op" id="3784587">,</span>&nbsp;<span class="ident" id="3784589">laddr</span><span class="op" id="3784594">,</span>&nbsp;<span class="ident" id="3784596">raddr</span><span class="op" id="3784601">,</span>&nbsp;<span class="ident" id="3784603">deadline</span><span class="op" id="3784611">,</span>&nbsp;<span class="ident" id="3784613">syscall</span><span class="op" id="3784620">.</span><span class="ident" id="3784621">SOCK_RAW</span><span class="op" id="3784629">,</span>&nbsp;<span class="ident" id="3784631">proto</span><span class="op" id="3784636">,</span>&nbsp;<span class="string" id="3784638">&#34;dial&#34;</span><span class="op" id="3784644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784647">if</span>&nbsp;<span class="ident" id="3784650">err</span>&nbsp;<span class="op" id="3784654">!=</span>&nbsp;<span class="builtintype" id="3784657">nil</span>&nbsp;<span class="op" id="3784661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784665">return</span>&nbsp;<span class="builtintype" id="3784672">nil</span><span class="op" id="3784675">,</span>&nbsp;<span class="op" id="3784677">&amp;</span><span class="ident" id="3784678">OpError</span><span class="op" id="3784685">{</span><span class="ident" id="3784686">Op</span><span class="op" id="3784688">:</span>&nbsp;<span class="string" id="3784690">&#34;dial&#34;</span><span class="op" id="3784696">,</span>&nbsp;<span class="ident" id="3784698">Net</span><span class="op" id="3784701">:</span>&nbsp;<span class="ident" id="3784703">netProto</span><span class="op" id="3784711">,</span>&nbsp;<span class="ident" id="3784713">Addr</span><span class="op" id="3784717">:</span>&nbsp;<span class="ident" id="3784719">raddr</span><span class="op" id="3784724">,</span>&nbsp;<span class="ident" id="3784726">Err</span><span class="op" id="3784729">:</span>&nbsp;<span class="ident" id="3784731">err</span><span class="op" id="3784734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3784737">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784740">return</span>&nbsp;<span class="ident" id="3784747">newIPConn</span><span class="op" id="3784756">(</span><span class="ident" id="3784757">fd</span><span class="op" id="3784759">)</span><span class="op" id="3784760">,</span>&nbsp;<span class="builtintype" id="3784762">nil</span><br>
<span class="lineno"></span><span class="op" id="3784766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3784769">//&nbsp;ListenIP&nbsp;listens&nbsp;for&nbsp;incoming&nbsp;IP&nbsp;packets&nbsp;addressed&nbsp;to&nbsp;the&nbsp;local</span><br>
<span class="lineno"></span><span class="comment" id="3784836">//&nbsp;address&nbsp;laddr.&nbsp;&nbsp;The&nbsp;returned&nbsp;connection&#39;s&nbsp;ReadFrom&nbsp;and&nbsp;WriteTo</span><br>
<span class="lineno">210</span><span class="comment" id="3784902">//&nbsp;methods&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;receive&nbsp;and&nbsp;send&nbsp;IP&nbsp;packets&nbsp;with&nbsp;per-packet</span><br>
<span class="lineno"></span><span class="comment" id="3784972">//&nbsp;addressing.</span><br>
<span class="lineno"></span><span class="keyword" id="3784987">func</span>&nbsp;<span class="ident" id="3784992">ListenIP</span><span class="op" id="3785000">(</span><span class="ident" id="3785001">netProto</span>&nbsp;<span class="builtintype" id="3785010">string</span><span class="op" id="3785016">,</span>&nbsp;<span class="ident" id="3785018">laddr</span>&nbsp;<span class="op" id="3785024">*</span><span class="ident" id="3785025">IPAddr</span><span class="op" id="3785031">)</span>&nbsp;<span class="op" id="3785033">(</span><span class="op" id="3785034">*</span><span class="ident" id="3785035">IPConn</span><span class="op" id="3785041">,</span>&nbsp;<span class="builtintype" id="3785043">error</span><span class="op" id="3785048">)</span>&nbsp;<span class="op" id="3785050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785053">net</span><span class="op" id="3785056">,</span>&nbsp;<span class="ident" id="3785058">proto</span><span class="op" id="3785063">,</span>&nbsp;<span class="ident" id="3785065">err</span>&nbsp;<span class="op" id="3785069">:=</span>&nbsp;<span class="ident" id="3785072">parseNetwork</span><span class="op" id="3785084">(</span><span class="ident" id="3785085">netProto</span><span class="op" id="3785093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785096">if</span>&nbsp;<span class="ident" id="3785099">err</span>&nbsp;<span class="op" id="3785103">!=</span>&nbsp;<span class="builtintype" id="3785106">nil</span>&nbsp;<span class="op" id="3785110">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785114">return</span>&nbsp;<span class="builtintype" id="3785121">nil</span><span class="op" id="3785124">,</span>&nbsp;<span class="op" id="3785126">&amp;</span><span class="ident" id="3785127">OpError</span><span class="op" id="3785134">{</span><span class="ident" id="3785135">Op</span><span class="op" id="3785137">:</span>&nbsp;<span class="string" id="3785139">&#34;dial&#34;</span><span class="op" id="3785145">,</span>&nbsp;<span class="ident" id="3785147">Net</span><span class="op" id="3785150">:</span>&nbsp;<span class="ident" id="3785152">netProto</span><span class="op" id="3785160">,</span>&nbsp;<span class="ident" id="3785162">Addr</span><span class="op" id="3785166">:</span>&nbsp;<span class="ident" id="3785168">laddr</span><span class="op" id="3785173">,</span>&nbsp;<span class="ident" id="3785175">Err</span><span class="op" id="3785178">:</span>&nbsp;<span class="ident" id="3785180">err</span><span class="op" id="3785183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3785186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785189">switch</span>&nbsp;<span class="ident" id="3785196">net</span>&nbsp;<span class="op" id="3785200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785203">case</span>&nbsp;<span class="string" id="3785208">&#34;ip&#34;</span><span class="op" id="3785212">,</span>&nbsp;<span class="string" id="3785214">&#34;ip4&#34;</span><span class="op" id="3785219">,</span>&nbsp;<span class="string" id="3785221">&#34;ip6&#34;</span><span class="op" id="3785226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785229">default</span><span class="op" id="3785236">:</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785240">return</span>&nbsp;<span class="builtintype" id="3785247">nil</span><span class="op" id="3785250">,</span>&nbsp;<span class="op" id="3785252">&amp;</span><span class="ident" id="3785253">OpError</span><span class="op" id="3785260">{</span><span class="ident" id="3785261">Op</span><span class="op" id="3785263">:</span>&nbsp;<span class="string" id="3785265">&#34;listen&#34;</span><span class="op" id="3785273">,</span>&nbsp;<span class="ident" id="3785275">Net</span><span class="op" id="3785278">:</span>&nbsp;<span class="ident" id="3785280">netProto</span><span class="op" id="3785288">,</span>&nbsp;<span class="ident" id="3785290">Addr</span><span class="op" id="3785294">:</span>&nbsp;<span class="ident" id="3785296">laddr</span><span class="op" id="3785301">,</span>&nbsp;<span class="ident" id="3785303">Err</span><span class="op" id="3785306">:</span>&nbsp;<span class="ident" id="3785308">UnknownNetworkError</span><span class="op" id="3785327">(</span><span class="ident" id="3785328">netProto</span><span class="op" id="3785336">)</span><span class="op" id="3785337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3785340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785343">fd</span><span class="op" id="3785345">,</span>&nbsp;<span class="ident" id="3785347">err</span>&nbsp;<span class="op" id="3785351">:=</span>&nbsp;<span class="ident" id="3785354">internetSocket</span><span class="op" id="3785368">(</span><span class="ident" id="3785369">net</span><span class="op" id="3785372">,</span>&nbsp;<span class="ident" id="3785374">laddr</span><span class="op" id="3785379">,</span>&nbsp;<span class="builtintype" id="3785381">nil</span><span class="op" id="3785384">,</span>&nbsp;<span class="ident" id="3785386">noDeadline</span><span class="op" id="3785396">,</span>&nbsp;<span class="ident" id="3785398">syscall</span><span class="op" id="3785405">.</span><span class="ident" id="3785406">SOCK_RAW</span><span class="op" id="3785414">,</span>&nbsp;<span class="ident" id="3785416">proto</span><span class="op" id="3785421">,</span>&nbsp;<span class="string" id="3785423">&#34;listen&#34;</span><span class="op" id="3785431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785434">if</span>&nbsp;<span class="ident" id="3785437">err</span>&nbsp;<span class="op" id="3785441">!=</span>&nbsp;<span class="builtintype" id="3785444">nil</span>&nbsp;<span class="op" id="3785448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785452">return</span>&nbsp;<span class="builtintype" id="3785459">nil</span><span class="op" id="3785462">,</span>&nbsp;<span class="op" id="3785464">&amp;</span><span class="ident" id="3785465">OpError</span><span class="op" id="3785472">{</span><span class="ident" id="3785473">Op</span><span class="op" id="3785475">:</span>&nbsp;<span class="string" id="3785477">&#34;listen&#34;</span><span class="op" id="3785485">,</span>&nbsp;<span class="ident" id="3785487">Net</span><span class="op" id="3785490">:</span>&nbsp;<span class="ident" id="3785492">netProto</span><span class="op" id="3785500">,</span>&nbsp;<span class="ident" id="3785502">Addr</span><span class="op" id="3785506">:</span>&nbsp;<span class="ident" id="3785508">laddr</span><span class="op" id="3785513">,</span>&nbsp;<span class="ident" id="3785515">Err</span><span class="op" id="3785518">:</span>&nbsp;<span class="ident" id="3785520">err</span><span class="op" id="3785523">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3785526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785529">return</span>&nbsp;<span class="ident" id="3785536">newIPConn</span><span class="op" id="3785545">(</span><span class="ident" id="3785546">fd</span><span class="op" id="3785548">)</span><span class="op" id="3785549">,</span>&nbsp;<span class="builtintype" id="3785551">nil</span><br>
<span class="lineno"></span><span class="op" id="3785555">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
