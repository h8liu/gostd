<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html" class="current">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7593139">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7593194">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7593248">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7593299">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593366">package</span>&nbsp;<span class="ident" id="7593374">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593379">import</span>&nbsp;<span class="op" id="7593386">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7593389">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7593398">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7593408">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7593415">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7593421">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7593428">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7593439">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7593450">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7593457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7593460">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593520">type</span>&nbsp;<span class="ident" id="7593525">ByteStruct</span>&nbsp;<span class="keyword" id="7593536">struct</span>&nbsp;<span class="op" id="7593543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593546">a</span>&nbsp;<span class="builtintype" id="7593548">byte</span>&nbsp;<span class="comment" id="7593553">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7593578">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7593581">type</span>&nbsp;<span class="ident" id="7593586">StringStruct</span>&nbsp;<span class="keyword" id="7593599">struct</span>&nbsp;<span class="op" id="7593606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593609">s</span>&nbsp;<span class="builtintype" id="7593611">string</span>&nbsp;<span class="comment" id="7593618">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7593643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7593646">type</span>&nbsp;<span class="ident" id="7593651">ArrayStruct</span>&nbsp;<span class="keyword" id="7593663">struct</span>&nbsp;<span class="op" id="7593670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593673">a</span>&nbsp;<span class="op" id="7593675">[</span><span class="num" id="7593676">8192</span><span class="op" id="7593680">]</span><span class="builtintype" id="7593681">byte</span>&nbsp;<span class="comment" id="7593686">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7593711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593714">type</span>&nbsp;<span class="ident" id="7593719">Gobber</span>&nbsp;<span class="builtintype" id="7593726">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="7593731">type</span>&nbsp;<span class="ident" id="7593736">ValueGobber</span>&nbsp;<span class="builtintype" id="7593748">string</span>&nbsp;<span class="comment" id="7593755">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593805">type</span>&nbsp;<span class="ident" id="7593810">BinaryGobber</span>&nbsp;<span class="builtintype" id="7593823">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7593828">type</span>&nbsp;<span class="ident" id="7593833">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="7593851">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593859">type</span>&nbsp;<span class="ident" id="7593864">TextGobber</span>&nbsp;<span class="builtintype" id="7593875">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593880">type</span>&nbsp;<span class="ident" id="7593885">TextValueGobber</span>&nbsp;<span class="builtintype" id="7593901">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="7593909">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593934">func</span>&nbsp;<span class="op" id="7593939">(</span><span class="ident" id="7593940">g</span>&nbsp;<span class="op" id="7593942">*</span><span class="ident" id="7593943">ByteStruct</span><span class="op" id="7593953">)</span>&nbsp;<span class="ident" id="7593955">GobEncode</span><span class="op" id="7593964">(</span><span class="op" id="7593965">)</span>&nbsp;<span class="op" id="7593967">(</span><span class="op" id="7593968">[</span><span class="op" id="7593969">]</span><span class="builtintype" id="7593970">byte</span><span class="op" id="7593974">,</span>&nbsp;<span class="builtintype" id="7593976">error</span><span class="op" id="7593981">)</span>&nbsp;<span class="op" id="7593983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593986">b</span>&nbsp;<span class="op" id="7593988">:=</span>&nbsp;<span class="builtinfunc" id="7593991">make</span><span class="op" id="7593995">(</span><span class="op" id="7593996">[</span><span class="op" id="7593997">]</span><span class="builtintype" id="7593998">byte</span><span class="op" id="7594002">,</span>&nbsp;<span class="num" id="7594004">3</span><span class="op" id="7594005">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594008">b</span><span class="op" id="7594009">[</span><span class="num" id="7594010">0</span><span class="op" id="7594011">]</span>&nbsp;<span class="op" id="7594013">=</span>&nbsp;<span class="ident" id="7594015">g</span><span class="op" id="7594016">.</span><span class="ident" id="7594017">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594020">b</span><span class="op" id="7594021">[</span><span class="num" id="7594022">1</span><span class="op" id="7594023">]</span>&nbsp;<span class="op" id="7594025">=</span>&nbsp;<span class="ident" id="7594027">g</span><span class="op" id="7594028">.</span><span class="ident" id="7594029">a</span>&nbsp;<span class="op" id="7594031">+</span>&nbsp;<span class="num" id="7594033">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594036">b</span><span class="op" id="7594037">[</span><span class="num" id="7594038">2</span><span class="op" id="7594039">]</span>&nbsp;<span class="op" id="7594041">=</span>&nbsp;<span class="ident" id="7594043">g</span><span class="op" id="7594044">.</span><span class="ident" id="7594045">a</span>&nbsp;<span class="op" id="7594047">+</span>&nbsp;<span class="num" id="7594049">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594052">return</span>&nbsp;<span class="ident" id="7594059">b</span><span class="op" id="7594060">,</span>&nbsp;<span class="ident" id="7594062">nil</span><br>
<span class="lineno"></span><span class="op" id="7594066">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7594069">func</span>&nbsp;<span class="op" id="7594074">(</span><span class="ident" id="7594075">g</span>&nbsp;<span class="op" id="7594077">*</span><span class="ident" id="7594078">ByteStruct</span><span class="op" id="7594088">)</span>&nbsp;<span class="ident" id="7594090">GobDecode</span><span class="op" id="7594099">(</span><span class="ident" id="7594100">data</span>&nbsp;<span class="op" id="7594105">[</span><span class="op" id="7594106">]</span><span class="builtintype" id="7594107">byte</span><span class="op" id="7594111">)</span>&nbsp;<span class="builtintype" id="7594113">error</span>&nbsp;<span class="op" id="7594119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594122">if</span>&nbsp;<span class="ident" id="7594125">g</span>&nbsp;<span class="op" id="7594127">==</span>&nbsp;<span class="ident" id="7594130">nil</span>&nbsp;<span class="op" id="7594134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594138">return</span>&nbsp;<span class="ident" id="7594145">errors</span><span class="op" id="7594151">.</span><span class="ident" id="7594152">New</span><span class="op" id="7594155">(</span><span class="string" id="7594156">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="7594170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594173">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7594176">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594214">if</span>&nbsp;<span class="builtinfunc" id="7594217">len</span><span class="op" id="7594220">(</span><span class="ident" id="7594221">data</span><span class="op" id="7594225">)</span>&nbsp;<span class="op" id="7594227">==</span>&nbsp;<span class="num" id="7594230">0</span>&nbsp;<span class="op" id="7594232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594236">return</span>&nbsp;<span class="ident" id="7594243">io</span><span class="op" id="7594245">.</span><span class="ident" id="7594246">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594254">g</span><span class="op" id="7594255">.</span><span class="ident" id="7594256">a</span>&nbsp;<span class="op" id="7594258">=</span>&nbsp;<span class="ident" id="7594260">data</span><span class="op" id="7594264">[</span><span class="num" id="7594265">0</span><span class="op" id="7594266">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594269">for</span>&nbsp;<span class="ident" id="7594273">i</span><span class="op" id="7594274">,</span>&nbsp;<span class="ident" id="7594276">c</span>&nbsp;<span class="op" id="7594278">:=</span>&nbsp;<span class="keyword" id="7594281">range</span>&nbsp;<span class="ident" id="7594287">data</span>&nbsp;<span class="op" id="7594292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594296">if</span>&nbsp;<span class="ident" id="7594299">c</span>&nbsp;<span class="op" id="7594301">!=</span>&nbsp;<span class="ident" id="7594304">g</span><span class="op" id="7594305">.</span><span class="ident" id="7594306">a</span><span class="op" id="7594307">+</span><span class="builtintype" id="7594308">byte</span><span class="op" id="7594312">(</span><span class="ident" id="7594313">i</span><span class="op" id="7594314">)</span>&nbsp;<span class="op" id="7594316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594321">return</span>&nbsp;<span class="ident" id="7594328">errors</span><span class="op" id="7594334">.</span><span class="ident" id="7594335">New</span><span class="op" id="7594338">(</span><span class="string" id="7594339">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7594362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594369">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594372">return</span>&nbsp;<span class="ident" id="7594379">nil</span><br>
<span class="lineno"></span><span class="op" id="7594383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7594386">func</span>&nbsp;<span class="op" id="7594391">(</span><span class="ident" id="7594392">g</span>&nbsp;<span class="op" id="7594394">*</span><span class="ident" id="7594395">StringStruct</span><span class="op" id="7594407">)</span>&nbsp;<span class="ident" id="7594409">GobEncode</span><span class="op" id="7594418">(</span><span class="op" id="7594419">)</span>&nbsp;<span class="op" id="7594421">(</span><span class="op" id="7594422">[</span><span class="op" id="7594423">]</span><span class="builtintype" id="7594424">byte</span><span class="op" id="7594428">,</span>&nbsp;<span class="builtintype" id="7594430">error</span><span class="op" id="7594435">)</span>&nbsp;<span class="op" id="7594437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594440">return</span>&nbsp;<span class="op" id="7594447">[</span><span class="op" id="7594448">]</span><span class="builtintype" id="7594449">byte</span><span class="op" id="7594453">(</span><span class="ident" id="7594454">g</span><span class="op" id="7594455">.</span><span class="ident" id="7594456">s</span><span class="op" id="7594457">)</span><span class="op" id="7594458">,</span>&nbsp;<span class="ident" id="7594460">nil</span><br>
<span class="lineno">75</span><span class="op" id="7594464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7594467">func</span>&nbsp;<span class="op" id="7594472">(</span><span class="ident" id="7594473">g</span>&nbsp;<span class="op" id="7594475">*</span><span class="ident" id="7594476">StringStruct</span><span class="op" id="7594488">)</span>&nbsp;<span class="ident" id="7594490">GobDecode</span><span class="op" id="7594499">(</span><span class="ident" id="7594500">data</span>&nbsp;<span class="op" id="7594505">[</span><span class="op" id="7594506">]</span><span class="builtintype" id="7594507">byte</span><span class="op" id="7594511">)</span>&nbsp;<span class="builtintype" id="7594513">error</span>&nbsp;<span class="op" id="7594519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7594522">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594560">if</span>&nbsp;<span class="builtinfunc" id="7594563">len</span><span class="op" id="7594566">(</span><span class="ident" id="7594567">data</span><span class="op" id="7594571">)</span>&nbsp;<span class="op" id="7594573">==</span>&nbsp;<span class="num" id="7594576">0</span>&nbsp;<span class="op" id="7594578">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594582">return</span>&nbsp;<span class="ident" id="7594589">io</span><span class="op" id="7594591">.</span><span class="ident" id="7594592">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594600">a</span>&nbsp;<span class="op" id="7594602">:=</span>&nbsp;<span class="ident" id="7594605">data</span><span class="op" id="7594609">[</span><span class="num" id="7594610">0</span><span class="op" id="7594611">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594614">for</span>&nbsp;<span class="ident" id="7594618">i</span><span class="op" id="7594619">,</span>&nbsp;<span class="ident" id="7594621">c</span>&nbsp;<span class="op" id="7594623">:=</span>&nbsp;<span class="keyword" id="7594626">range</span>&nbsp;<span class="ident" id="7594632">data</span>&nbsp;<span class="op" id="7594637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594641">if</span>&nbsp;<span class="ident" id="7594644">c</span>&nbsp;<span class="op" id="7594646">!=</span>&nbsp;<span class="ident" id="7594649">a</span><span class="op" id="7594650">+</span><span class="builtintype" id="7594651">byte</span><span class="op" id="7594655">(</span><span class="ident" id="7594656">i</span><span class="op" id="7594657">)</span>&nbsp;<span class="op" id="7594659">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594664">return</span>&nbsp;<span class="ident" id="7594671">errors</span><span class="op" id="7594677">.</span><span class="ident" id="7594678">New</span><span class="op" id="7594681">(</span><span class="string" id="7594682">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7594705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594715">g</span><span class="op" id="7594716">.</span><span class="ident" id="7594717">s</span>&nbsp;<span class="op" id="7594719">=</span>&nbsp;<span class="builtintype" id="7594721">string</span><span class="op" id="7594727">(</span><span class="ident" id="7594728">data</span><span class="op" id="7594732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594735">return</span>&nbsp;<span class="ident" id="7594742">nil</span><br>
<span class="lineno">90</span><span class="op" id="7594746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7594749">func</span>&nbsp;<span class="op" id="7594754">(</span><span class="ident" id="7594755">a</span>&nbsp;<span class="op" id="7594757">*</span><span class="ident" id="7594758">ArrayStruct</span><span class="op" id="7594769">)</span>&nbsp;<span class="ident" id="7594771">GobEncode</span><span class="op" id="7594780">(</span><span class="op" id="7594781">)</span>&nbsp;<span class="op" id="7594783">(</span><span class="op" id="7594784">[</span><span class="op" id="7594785">]</span><span class="builtintype" id="7594786">byte</span><span class="op" id="7594790">,</span>&nbsp;<span class="builtintype" id="7594792">error</span><span class="op" id="7594797">)</span>&nbsp;<span class="op" id="7594799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594802">return</span>&nbsp;<span class="ident" id="7594809">a</span><span class="op" id="7594810">.</span><span class="ident" id="7594811">a</span><span class="op" id="7594812">[</span><span class="op" id="7594813">:</span><span class="op" id="7594814">]</span><span class="op" id="7594815">,</span>&nbsp;<span class="ident" id="7594817">nil</span><br>
<span class="lineno"></span><span class="op" id="7594821">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7594824">func</span>&nbsp;<span class="op" id="7594829">(</span><span class="ident" id="7594830">a</span>&nbsp;<span class="op" id="7594832">*</span><span class="ident" id="7594833">ArrayStruct</span><span class="op" id="7594844">)</span>&nbsp;<span class="ident" id="7594846">GobDecode</span><span class="op" id="7594855">(</span><span class="ident" id="7594856">data</span>&nbsp;<span class="op" id="7594861">[</span><span class="op" id="7594862">]</span><span class="builtintype" id="7594863">byte</span><span class="op" id="7594867">)</span>&nbsp;<span class="builtintype" id="7594869">error</span>&nbsp;<span class="op" id="7594875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594878">if</span>&nbsp;<span class="builtinfunc" id="7594881">len</span><span class="op" id="7594884">(</span><span class="ident" id="7594885">data</span><span class="op" id="7594889">)</span>&nbsp;<span class="op" id="7594891">!=</span>&nbsp;<span class="builtinfunc" id="7594894">len</span><span class="op" id="7594897">(</span><span class="ident" id="7594898">a</span><span class="op" id="7594899">.</span><span class="ident" id="7594900">a</span><span class="op" id="7594901">)</span>&nbsp;<span class="op" id="7594903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594907">return</span>&nbsp;<span class="ident" id="7594914">errors</span><span class="op" id="7594920">.</span><span class="ident" id="7594921">New</span><span class="op" id="7594924">(</span><span class="string" id="7594925">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="7594955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594958">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7594961">copy</span><span class="op" id="7594965">(</span><span class="ident" id="7594966">a</span><span class="op" id="7594967">.</span><span class="ident" id="7594968">a</span><span class="op" id="7594969">[</span><span class="op" id="7594970">:</span><span class="op" id="7594971">]</span><span class="op" id="7594972">,</span>&nbsp;<span class="ident" id="7594974">data</span><span class="op" id="7594978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594981">return</span>&nbsp;<span class="ident" id="7594988">nil</span><br>
<span class="lineno"></span><span class="op" id="7594992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7594995">func</span>&nbsp;<span class="op" id="7595000">(</span><span class="ident" id="7595001">g</span>&nbsp;<span class="op" id="7595003">*</span><span class="ident" id="7595004">Gobber</span><span class="op" id="7595010">)</span>&nbsp;<span class="ident" id="7595012">GobEncode</span><span class="op" id="7595021">(</span><span class="op" id="7595022">)</span>&nbsp;<span class="op" id="7595024">(</span><span class="op" id="7595025">[</span><span class="op" id="7595026">]</span><span class="builtintype" id="7595027">byte</span><span class="op" id="7595031">,</span>&nbsp;<span class="builtintype" id="7595033">error</span><span class="op" id="7595038">)</span>&nbsp;<span class="op" id="7595040">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595043">return</span>&nbsp;<span class="op" id="7595050">[</span><span class="op" id="7595051">]</span><span class="builtintype" id="7595052">byte</span><span class="op" id="7595056">(</span><span class="ident" id="7595057">fmt</span><span class="op" id="7595060">.</span><span class="ident" id="7595061">Sprintf</span><span class="op" id="7595068">(</span><span class="string" id="7595069">&#34;VALUE=%d&#34;</span><span class="op" id="7595079">,</span>&nbsp;<span class="op" id="7595081">*</span><span class="ident" id="7595082">g</span><span class="op" id="7595083">)</span><span class="op" id="7595084">)</span><span class="op" id="7595085">,</span>&nbsp;<span class="ident" id="7595087">nil</span><br>
<span class="lineno"></span><span class="op" id="7595091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7595094">func</span>&nbsp;<span class="op" id="7595099">(</span><span class="ident" id="7595100">g</span>&nbsp;<span class="op" id="7595102">*</span><span class="ident" id="7595103">Gobber</span><span class="op" id="7595109">)</span>&nbsp;<span class="ident" id="7595111">GobDecode</span><span class="op" id="7595120">(</span><span class="ident" id="7595121">data</span>&nbsp;<span class="op" id="7595126">[</span><span class="op" id="7595127">]</span><span class="builtintype" id="7595128">byte</span><span class="op" id="7595132">)</span>&nbsp;<span class="builtintype" id="7595134">error</span>&nbsp;<span class="op" id="7595140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595143">_</span><span class="op" id="7595144">,</span>&nbsp;<span class="ident" id="7595146">err</span>&nbsp;<span class="op" id="7595150">:=</span>&nbsp;<span class="ident" id="7595153">fmt</span><span class="op" id="7595156">.</span><span class="ident" id="7595157">Sscanf</span><span class="op" id="7595163">(</span><span class="builtintype" id="7595164">string</span><span class="op" id="7595170">(</span><span class="ident" id="7595171">data</span><span class="op" id="7595175">)</span><span class="op" id="7595176">,</span>&nbsp;<span class="string" id="7595178">&#34;VALUE=%d&#34;</span><span class="op" id="7595188">,</span>&nbsp;<span class="op" id="7595190">(</span><span class="op" id="7595191">*</span><span class="builtintype" id="7595192">int</span><span class="op" id="7595195">)</span><span class="op" id="7595196">(</span><span class="ident" id="7595197">g</span><span class="op" id="7595198">)</span><span class="op" id="7595199">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595202">return</span>&nbsp;<span class="ident" id="7595209">err</span><br>
<span class="lineno"></span><span class="op" id="7595213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7595216">func</span>&nbsp;<span class="op" id="7595221">(</span><span class="ident" id="7595222">g</span>&nbsp;<span class="op" id="7595224">*</span><span class="ident" id="7595225">BinaryGobber</span><span class="op" id="7595237">)</span>&nbsp;<span class="ident" id="7595239">MarshalBinary</span><span class="op" id="7595252">(</span><span class="op" id="7595253">)</span>&nbsp;<span class="op" id="7595255">(</span><span class="op" id="7595256">[</span><span class="op" id="7595257">]</span><span class="builtintype" id="7595258">byte</span><span class="op" id="7595262">,</span>&nbsp;<span class="builtintype" id="7595264">error</span><span class="op" id="7595269">)</span>&nbsp;<span class="op" id="7595271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595274">return</span>&nbsp;<span class="op" id="7595281">[</span><span class="op" id="7595282">]</span><span class="builtintype" id="7595283">byte</span><span class="op" id="7595287">(</span><span class="ident" id="7595288">fmt</span><span class="op" id="7595291">.</span><span class="ident" id="7595292">Sprintf</span><span class="op" id="7595299">(</span><span class="string" id="7595300">&#34;VALUE=%d&#34;</span><span class="op" id="7595310">,</span>&nbsp;<span class="op" id="7595312">*</span><span class="ident" id="7595313">g</span><span class="op" id="7595314">)</span><span class="op" id="7595315">)</span><span class="op" id="7595316">,</span>&nbsp;<span class="ident" id="7595318">nil</span><br>
<span class="lineno">115</span><span class="op" id="7595322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7595325">func</span>&nbsp;<span class="op" id="7595330">(</span><span class="ident" id="7595331">g</span>&nbsp;<span class="op" id="7595333">*</span><span class="ident" id="7595334">BinaryGobber</span><span class="op" id="7595346">)</span>&nbsp;<span class="ident" id="7595348">UnmarshalBinary</span><span class="op" id="7595363">(</span><span class="ident" id="7595364">data</span>&nbsp;<span class="op" id="7595369">[</span><span class="op" id="7595370">]</span><span class="builtintype" id="7595371">byte</span><span class="op" id="7595375">)</span>&nbsp;<span class="builtintype" id="7595377">error</span>&nbsp;<span class="op" id="7595383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595386">_</span><span class="op" id="7595387">,</span>&nbsp;<span class="ident" id="7595389">err</span>&nbsp;<span class="op" id="7595393">:=</span>&nbsp;<span class="ident" id="7595396">fmt</span><span class="op" id="7595399">.</span><span class="ident" id="7595400">Sscanf</span><span class="op" id="7595406">(</span><span class="builtintype" id="7595407">string</span><span class="op" id="7595413">(</span><span class="ident" id="7595414">data</span><span class="op" id="7595418">)</span><span class="op" id="7595419">,</span>&nbsp;<span class="string" id="7595421">&#34;VALUE=%d&#34;</span><span class="op" id="7595431">,</span>&nbsp;<span class="op" id="7595433">(</span><span class="op" id="7595434">*</span><span class="builtintype" id="7595435">int</span><span class="op" id="7595438">)</span><span class="op" id="7595439">(</span><span class="ident" id="7595440">g</span><span class="op" id="7595441">)</span><span class="op" id="7595442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595445">return</span>&nbsp;<span class="ident" id="7595452">err</span><br>
<span class="lineno">120</span><span class="op" id="7595456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7595459">func</span>&nbsp;<span class="op" id="7595464">(</span><span class="ident" id="7595465">g</span>&nbsp;<span class="op" id="7595467">*</span><span class="ident" id="7595468">TextGobber</span><span class="op" id="7595478">)</span>&nbsp;<span class="ident" id="7595480">MarshalText</span><span class="op" id="7595491">(</span><span class="op" id="7595492">)</span>&nbsp;<span class="op" id="7595494">(</span><span class="op" id="7595495">[</span><span class="op" id="7595496">]</span><span class="builtintype" id="7595497">byte</span><span class="op" id="7595501">,</span>&nbsp;<span class="builtintype" id="7595503">error</span><span class="op" id="7595508">)</span>&nbsp;<span class="op" id="7595510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595513">return</span>&nbsp;<span class="op" id="7595520">[</span><span class="op" id="7595521">]</span><span class="builtintype" id="7595522">byte</span><span class="op" id="7595526">(</span><span class="ident" id="7595527">fmt</span><span class="op" id="7595530">.</span><span class="ident" id="7595531">Sprintf</span><span class="op" id="7595538">(</span><span class="string" id="7595539">&#34;VALUE=%d&#34;</span><span class="op" id="7595549">,</span>&nbsp;<span class="op" id="7595551">*</span><span class="ident" id="7595552">g</span><span class="op" id="7595553">)</span><span class="op" id="7595554">)</span><span class="op" id="7595555">,</span>&nbsp;<span class="ident" id="7595557">nil</span><br>
<span class="lineno"></span><span class="op" id="7595561">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7595564">func</span>&nbsp;<span class="op" id="7595569">(</span><span class="ident" id="7595570">g</span>&nbsp;<span class="op" id="7595572">*</span><span class="ident" id="7595573">TextGobber</span><span class="op" id="7595583">)</span>&nbsp;<span class="ident" id="7595585">UnmarshalText</span><span class="op" id="7595598">(</span><span class="ident" id="7595599">data</span>&nbsp;<span class="op" id="7595604">[</span><span class="op" id="7595605">]</span><span class="builtintype" id="7595606">byte</span><span class="op" id="7595610">)</span>&nbsp;<span class="builtintype" id="7595612">error</span>&nbsp;<span class="op" id="7595618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595621">_</span><span class="op" id="7595622">,</span>&nbsp;<span class="ident" id="7595624">err</span>&nbsp;<span class="op" id="7595628">:=</span>&nbsp;<span class="ident" id="7595631">fmt</span><span class="op" id="7595634">.</span><span class="ident" id="7595635">Sscanf</span><span class="op" id="7595641">(</span><span class="builtintype" id="7595642">string</span><span class="op" id="7595648">(</span><span class="ident" id="7595649">data</span><span class="op" id="7595653">)</span><span class="op" id="7595654">,</span>&nbsp;<span class="string" id="7595656">&#34;VALUE=%d&#34;</span><span class="op" id="7595666">,</span>&nbsp;<span class="op" id="7595668">(</span><span class="op" id="7595669">*</span><span class="builtintype" id="7595670">int</span><span class="op" id="7595673">)</span><span class="op" id="7595674">(</span><span class="ident" id="7595675">g</span><span class="op" id="7595676">)</span><span class="op" id="7595677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595680">return</span>&nbsp;<span class="ident" id="7595687">err</span><br>
<span class="lineno"></span><span class="op" id="7595691">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="7595694">func</span>&nbsp;<span class="op" id="7595699">(</span><span class="ident" id="7595700">v</span>&nbsp;<span class="ident" id="7595702">ValueGobber</span><span class="op" id="7595713">)</span>&nbsp;<span class="ident" id="7595715">GobEncode</span><span class="op" id="7595724">(</span><span class="op" id="7595725">)</span>&nbsp;<span class="op" id="7595727">(</span><span class="op" id="7595728">[</span><span class="op" id="7595729">]</span><span class="builtintype" id="7595730">byte</span><span class="op" id="7595734">,</span>&nbsp;<span class="builtintype" id="7595736">error</span><span class="op" id="7595741">)</span>&nbsp;<span class="op" id="7595743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595746">return</span>&nbsp;<span class="op" id="7595753">[</span><span class="op" id="7595754">]</span><span class="builtintype" id="7595755">byte</span><span class="op" id="7595759">(</span><span class="ident" id="7595760">fmt</span><span class="op" id="7595763">.</span><span class="ident" id="7595764">Sprintf</span><span class="op" id="7595771">(</span><span class="string" id="7595772">&#34;VALUE=%s&#34;</span><span class="op" id="7595782">,</span>&nbsp;<span class="ident" id="7595784">v</span><span class="op" id="7595785">)</span><span class="op" id="7595786">)</span><span class="op" id="7595787">,</span>&nbsp;<span class="ident" id="7595789">nil</span><br>
<span class="lineno"></span><span class="op" id="7595793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7595796">func</span>&nbsp;<span class="op" id="7595801">(</span><span class="ident" id="7595802">v</span>&nbsp;<span class="op" id="7595804">*</span><span class="ident" id="7595805">ValueGobber</span><span class="op" id="7595816">)</span>&nbsp;<span class="ident" id="7595818">GobDecode</span><span class="op" id="7595827">(</span><span class="ident" id="7595828">data</span>&nbsp;<span class="op" id="7595833">[</span><span class="op" id="7595834">]</span><span class="builtintype" id="7595835">byte</span><span class="op" id="7595839">)</span>&nbsp;<span class="builtintype" id="7595841">error</span>&nbsp;<span class="op" id="7595847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595850">_</span><span class="op" id="7595851">,</span>&nbsp;<span class="ident" id="7595853">err</span>&nbsp;<span class="op" id="7595857">:=</span>&nbsp;<span class="ident" id="7595860">fmt</span><span class="op" id="7595863">.</span><span class="ident" id="7595864">Sscanf</span><span class="op" id="7595870">(</span><span class="builtintype" id="7595871">string</span><span class="op" id="7595877">(</span><span class="ident" id="7595878">data</span><span class="op" id="7595882">)</span><span class="op" id="7595883">,</span>&nbsp;<span class="string" id="7595885">&#34;VALUE=%s&#34;</span><span class="op" id="7595895">,</span>&nbsp;<span class="op" id="7595897">(</span><span class="op" id="7595898">*</span><span class="builtintype" id="7595899">string</span><span class="op" id="7595905">)</span><span class="op" id="7595906">(</span><span class="ident" id="7595907">v</span><span class="op" id="7595908">)</span><span class="op" id="7595909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595912">return</span>&nbsp;<span class="ident" id="7595919">err</span><br>
<span class="lineno"></span><span class="op" id="7595923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7595926">func</span>&nbsp;<span class="op" id="7595931">(</span><span class="ident" id="7595932">v</span>&nbsp;<span class="ident" id="7595934">BinaryValueGobber</span><span class="op" id="7595951">)</span>&nbsp;<span class="ident" id="7595953">MarshalBinary</span><span class="op" id="7595966">(</span><span class="op" id="7595967">)</span>&nbsp;<span class="op" id="7595969">(</span><span class="op" id="7595970">[</span><span class="op" id="7595971">]</span><span class="builtintype" id="7595972">byte</span><span class="op" id="7595976">,</span>&nbsp;<span class="builtintype" id="7595978">error</span><span class="op" id="7595983">)</span>&nbsp;<span class="op" id="7595985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595988">return</span>&nbsp;<span class="op" id="7595995">[</span><span class="op" id="7595996">]</span><span class="builtintype" id="7595997">byte</span><span class="op" id="7596001">(</span><span class="ident" id="7596002">fmt</span><span class="op" id="7596005">.</span><span class="ident" id="7596006">Sprintf</span><span class="op" id="7596013">(</span><span class="string" id="7596014">&#34;VALUE=%s&#34;</span><span class="op" id="7596024">,</span>&nbsp;<span class="ident" id="7596026">v</span><span class="op" id="7596027">)</span><span class="op" id="7596028">)</span><span class="op" id="7596029">,</span>&nbsp;<span class="ident" id="7596031">nil</span><br>
<span class="lineno"></span><span class="op" id="7596035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7596038">func</span>&nbsp;<span class="op" id="7596043">(</span><span class="ident" id="7596044">v</span>&nbsp;<span class="op" id="7596046">*</span><span class="ident" id="7596047">BinaryValueGobber</span><span class="op" id="7596064">)</span>&nbsp;<span class="ident" id="7596066">UnmarshalBinary</span><span class="op" id="7596081">(</span><span class="ident" id="7596082">data</span>&nbsp;<span class="op" id="7596087">[</span><span class="op" id="7596088">]</span><span class="builtintype" id="7596089">byte</span><span class="op" id="7596093">)</span>&nbsp;<span class="builtintype" id="7596095">error</span>&nbsp;<span class="op" id="7596101">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596104">_</span><span class="op" id="7596105">,</span>&nbsp;<span class="ident" id="7596107">err</span>&nbsp;<span class="op" id="7596111">:=</span>&nbsp;<span class="ident" id="7596114">fmt</span><span class="op" id="7596117">.</span><span class="ident" id="7596118">Sscanf</span><span class="op" id="7596124">(</span><span class="builtintype" id="7596125">string</span><span class="op" id="7596131">(</span><span class="ident" id="7596132">data</span><span class="op" id="7596136">)</span><span class="op" id="7596137">,</span>&nbsp;<span class="string" id="7596139">&#34;VALUE=%s&#34;</span><span class="op" id="7596149">,</span>&nbsp;<span class="op" id="7596151">(</span><span class="op" id="7596152">*</span><span class="builtintype" id="7596153">string</span><span class="op" id="7596159">)</span><span class="op" id="7596160">(</span><span class="ident" id="7596161">v</span><span class="op" id="7596162">)</span><span class="op" id="7596163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7596166">return</span>&nbsp;<span class="ident" id="7596173">err</span><br>
<span class="lineno"></span><span class="op" id="7596177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7596180">func</span>&nbsp;<span class="op" id="7596185">(</span><span class="ident" id="7596186">v</span>&nbsp;<span class="ident" id="7596188">TextValueGobber</span><span class="op" id="7596203">)</span>&nbsp;<span class="ident" id="7596205">MarshalText</span><span class="op" id="7596216">(</span><span class="op" id="7596217">)</span>&nbsp;<span class="op" id="7596219">(</span><span class="op" id="7596220">[</span><span class="op" id="7596221">]</span><span class="builtintype" id="7596222">byte</span><span class="op" id="7596226">,</span>&nbsp;<span class="builtintype" id="7596228">error</span><span class="op" id="7596233">)</span>&nbsp;<span class="op" id="7596235">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7596238">return</span>&nbsp;<span class="op" id="7596245">[</span><span class="op" id="7596246">]</span><span class="builtintype" id="7596247">byte</span><span class="op" id="7596251">(</span><span class="ident" id="7596252">fmt</span><span class="op" id="7596255">.</span><span class="ident" id="7596256">Sprintf</span><span class="op" id="7596263">(</span><span class="string" id="7596264">&#34;VALUE=%s&#34;</span><span class="op" id="7596274">,</span>&nbsp;<span class="ident" id="7596276">v</span><span class="op" id="7596277">)</span><span class="op" id="7596278">)</span><span class="op" id="7596279">,</span>&nbsp;<span class="ident" id="7596281">nil</span><br>
<span class="lineno"></span><span class="op" id="7596285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7596288">func</span>&nbsp;<span class="op" id="7596293">(</span><span class="ident" id="7596294">v</span>&nbsp;<span class="op" id="7596296">*</span><span class="ident" id="7596297">TextValueGobber</span><span class="op" id="7596312">)</span>&nbsp;<span class="ident" id="7596314">UnmarshalText</span><span class="op" id="7596327">(</span><span class="ident" id="7596328">data</span>&nbsp;<span class="op" id="7596333">[</span><span class="op" id="7596334">]</span><span class="builtintype" id="7596335">byte</span><span class="op" id="7596339">)</span>&nbsp;<span class="builtintype" id="7596341">error</span>&nbsp;<span class="op" id="7596347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596350">_</span><span class="op" id="7596351">,</span>&nbsp;<span class="ident" id="7596353">err</span>&nbsp;<span class="op" id="7596357">:=</span>&nbsp;<span class="ident" id="7596360">fmt</span><span class="op" id="7596363">.</span><span class="ident" id="7596364">Sscanf</span><span class="op" id="7596370">(</span><span class="builtintype" id="7596371">string</span><span class="op" id="7596377">(</span><span class="ident" id="7596378">data</span><span class="op" id="7596382">)</span><span class="op" id="7596383">,</span>&nbsp;<span class="string" id="7596385">&#34;VALUE=%s&#34;</span><span class="op" id="7596395">,</span>&nbsp;<span class="op" id="7596397">(</span><span class="op" id="7596398">*</span><span class="builtintype" id="7596399">string</span><span class="op" id="7596405">)</span><span class="op" id="7596406">(</span><span class="ident" id="7596407">v</span><span class="op" id="7596408">)</span><span class="op" id="7596409">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7596412">return</span>&nbsp;<span class="ident" id="7596419">err</span><br>
<span class="lineno"></span><span class="op" id="7596423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7596426">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7596472">type</span>&nbsp;<span class="ident" id="7596477">GobTest0</span>&nbsp;<span class="keyword" id="7596486">struct</span>&nbsp;<span class="op" id="7596493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596496">X</span>&nbsp;<span class="builtintype" id="7596498">int</span>&nbsp;<span class="comment" id="7596502">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596559">G</span>&nbsp;<span class="op" id="7596561">*</span><span class="ident" id="7596562">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="7596573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7596576">type</span>&nbsp;<span class="ident" id="7596581">GobTest1</span>&nbsp;<span class="keyword" id="7596590">struct</span>&nbsp;<span class="op" id="7596597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596600">X</span>&nbsp;<span class="builtintype" id="7596602">int</span>&nbsp;<span class="comment" id="7596606">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596663">G</span>&nbsp;<span class="op" id="7596665">*</span><span class="ident" id="7596666">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="7596679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7596682">type</span>&nbsp;<span class="ident" id="7596687">GobTest2</span>&nbsp;<span class="keyword" id="7596696">struct</span>&nbsp;<span class="op" id="7596703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596706">X</span>&nbsp;<span class="builtintype" id="7596708">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7596715">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596772">G</span>&nbsp;<span class="builtintype" id="7596774">string</span>&nbsp;<span class="comment" id="7596781">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="7596825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="7596828">type</span>&nbsp;<span class="ident" id="7596833">GobTest3</span>&nbsp;<span class="keyword" id="7596842">struct</span>&nbsp;<span class="op" id="7596849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596852">X</span>&nbsp;<span class="builtintype" id="7596854">int</span>&nbsp;<span class="comment" id="7596858">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596915">G</span>&nbsp;<span class="op" id="7596917">*</span><span class="ident" id="7596918">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596926">B</span>&nbsp;<span class="op" id="7596928">*</span><span class="ident" id="7596929">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596943">T</span>&nbsp;<span class="op" id="7596945">*</span><span class="ident" id="7596946">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="7596957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7596960">type</span>&nbsp;<span class="ident" id="7596965">GobTest4</span>&nbsp;<span class="keyword" id="7596974">struct</span>&nbsp;<span class="op" id="7596981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596984">X</span>&nbsp;&nbsp;<span class="builtintype" id="7596987">int</span>&nbsp;<span class="comment" id="7596991">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597048">V</span>&nbsp;&nbsp;<span class="ident" id="7597051">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597064">BV</span>&nbsp;<span class="ident" id="7597067">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597086">TV</span>&nbsp;<span class="ident" id="7597089">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7597105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7597108">type</span>&nbsp;<span class="ident" id="7597113">GobTest5</span>&nbsp;<span class="keyword" id="7597122">struct</span>&nbsp;<span class="op" id="7597129">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597132">X</span>&nbsp;&nbsp;<span class="builtintype" id="7597135">int</span>&nbsp;<span class="comment" id="7597139">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597196">V</span>&nbsp;&nbsp;<span class="op" id="7597199">*</span><span class="ident" id="7597200">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597213">BV</span>&nbsp;<span class="op" id="7597216">*</span><span class="ident" id="7597217">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597236">TV</span>&nbsp;<span class="op" id="7597239">*</span><span class="ident" id="7597240">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7597256">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7597259">type</span>&nbsp;<span class="ident" id="7597264">GobTest6</span>&nbsp;<span class="keyword" id="7597273">struct</span>&nbsp;<span class="op" id="7597280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597283">X</span>&nbsp;&nbsp;<span class="builtintype" id="7597286">int</span>&nbsp;<span class="comment" id="7597290">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597347">V</span>&nbsp;&nbsp;<span class="ident" id="7597350">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597363">W</span>&nbsp;&nbsp;<span class="op" id="7597366">*</span><span class="ident" id="7597367">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597380">BV</span>&nbsp;<span class="ident" id="7597383">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597402">BW</span>&nbsp;<span class="op" id="7597405">*</span><span class="ident" id="7597406">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597425">TV</span>&nbsp;<span class="ident" id="7597428">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597445">TW</span>&nbsp;<span class="op" id="7597448">*</span><span class="ident" id="7597449">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7597465">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7597468">type</span>&nbsp;<span class="ident" id="7597473">GobTest7</span>&nbsp;<span class="keyword" id="7597482">struct</span>&nbsp;<span class="op" id="7597489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597492">X</span>&nbsp;&nbsp;<span class="builtintype" id="7597495">int</span>&nbsp;<span class="comment" id="7597499">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597556">V</span>&nbsp;&nbsp;<span class="op" id="7597559">*</span><span class="ident" id="7597560">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597573">W</span>&nbsp;&nbsp;<span class="ident" id="7597576">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597589">BV</span>&nbsp;<span class="op" id="7597592">*</span><span class="ident" id="7597593">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597612">BW</span>&nbsp;<span class="ident" id="7597615">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597634">TV</span>&nbsp;<span class="op" id="7597637">*</span><span class="ident" id="7597638">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597655">TW</span>&nbsp;<span class="ident" id="7597658">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7597674">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="7597677">type</span>&nbsp;<span class="ident" id="7597682">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="7597703">struct</span>&nbsp;<span class="op" id="7597710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597713">X</span>&nbsp;<span class="builtintype" id="7597715">int</span>&nbsp;<span class="comment" id="7597719">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="7597775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="7597778">type</span>&nbsp;<span class="ident" id="7597783">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="7597802">struct</span>&nbsp;<span class="op" id="7597809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597812">X</span>&nbsp;<span class="builtintype" id="7597814">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7597827">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597884">G</span>&nbsp;<span class="ident" id="7597886">StringStruct</span>&nbsp;<span class="comment" id="7597899">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7597917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="7597920">type</span>&nbsp;<span class="ident" id="7597925">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="7597947">struct</span>&nbsp;<span class="op" id="7597954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597957">X</span>&nbsp;<span class="builtintype" id="7597959">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7597975">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598032">G</span>&nbsp;<span class="op" id="7598034">*</span><span class="op" id="7598035">*</span><span class="op" id="7598036">*</span><span class="ident" id="7598037">StringStruct</span>&nbsp;<span class="comment" id="7598050">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7598083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="7598086">type</span>&nbsp;<span class="ident" id="7598091">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="7598110">struct</span>&nbsp;<span class="op" id="7598117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598120">X</span>&nbsp;<span class="builtintype" id="7598122">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7598134">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598191">A</span>&nbsp;<span class="ident" id="7598193">ArrayStruct</span>&nbsp;<span class="comment" id="7598205">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7598223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7598226">type</span>&nbsp;<span class="ident" id="7598231">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="7598258">struct</span>&nbsp;<span class="op" id="7598265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598268">X</span>&nbsp;<span class="builtintype" id="7598270">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7598285">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598342">A</span>&nbsp;<span class="op" id="7598344">*</span><span class="op" id="7598345">*</span><span class="op" id="7598346">*</span><span class="ident" id="7598347">ArrayStruct</span>&nbsp;<span class="comment" id="7598359">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7598396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7598399">func</span>&nbsp;<span class="ident" id="7598404">TestGobEncoderField</span><span class="op" id="7598423">(</span><span class="ident" id="7598424">t</span>&nbsp;<span class="op" id="7598426">*</span><span class="ident" id="7598427">testing</span><span class="op" id="7598434">.</span><span class="ident" id="7598435">T</span><span class="op" id="7598436">)</span>&nbsp;<span class="op" id="7598438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598441">b</span>&nbsp;<span class="op" id="7598443">:=</span>&nbsp;<span class="builtinfunc" id="7598446">new</span><span class="op" id="7598449">(</span><span class="ident" id="7598450">bytes</span><span class="op" id="7598455">.</span><span class="ident" id="7598456">Buffer</span><span class="op" id="7598462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7598465">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598503">enc</span>&nbsp;<span class="op" id="7598507">:=</span>&nbsp;<span class="ident" id="7598510">NewEncoder</span><span class="op" id="7598520">(</span><span class="ident" id="7598521">b</span><span class="op" id="7598522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598525">err</span>&nbsp;<span class="op" id="7598529">:=</span>&nbsp;<span class="ident" id="7598532">enc</span><span class="op" id="7598535">.</span><span class="ident" id="7598536">Encode</span><span class="op" id="7598542">(</span><span class="ident" id="7598543">GobTest0</span><span class="op" id="7598551">{</span><span class="num" id="7598552">17</span><span class="op" id="7598554">,</span>&nbsp;<span class="op" id="7598556">&amp;</span><span class="ident" id="7598557">ByteStruct</span><span class="op" id="7598567">{</span><span class="string" id="7598568">&#39;A&#39;</span><span class="op" id="7598571">}</span><span class="op" id="7598572">}</span><span class="op" id="7598573">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598576">if</span>&nbsp;<span class="ident" id="7598579">err</span>&nbsp;<span class="op" id="7598583">!=</span>&nbsp;<span class="ident" id="7598586">nil</span>&nbsp;<span class="op" id="7598590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598594">t</span><span class="op" id="7598595">.</span><span class="ident" id="7598596">Fatal</span><span class="op" id="7598601">(</span><span class="string" id="7598602">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7598617">,</span>&nbsp;<span class="ident" id="7598619">err</span><span class="op" id="7598622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7598625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598628">dec</span>&nbsp;<span class="op" id="7598632">:=</span>&nbsp;<span class="ident" id="7598635">NewDecoder</span><span class="op" id="7598645">(</span><span class="ident" id="7598646">b</span><span class="op" id="7598647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598650">x</span>&nbsp;<span class="op" id="7598652">:=</span>&nbsp;<span class="builtinfunc" id="7598655">new</span><span class="op" id="7598658">(</span><span class="ident" id="7598659">GobTest0</span><span class="op" id="7598667">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598670">err</span>&nbsp;<span class="op" id="7598674">=</span>&nbsp;<span class="ident" id="7598676">dec</span><span class="op" id="7598679">.</span><span class="ident" id="7598680">Decode</span><span class="op" id="7598686">(</span><span class="ident" id="7598687">x</span><span class="op" id="7598688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598691">if</span>&nbsp;<span class="ident" id="7598694">err</span>&nbsp;<span class="op" id="7598698">!=</span>&nbsp;<span class="ident" id="7598701">nil</span>&nbsp;<span class="op" id="7598705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598709">t</span><span class="op" id="7598710">.</span><span class="ident" id="7598711">Fatal</span><span class="op" id="7598716">(</span><span class="string" id="7598717">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7598732">,</span>&nbsp;<span class="ident" id="7598734">err</span><span class="op" id="7598737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7598740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598743">if</span>&nbsp;<span class="ident" id="7598746">x</span><span class="op" id="7598747">.</span><span class="ident" id="7598748">G</span><span class="op" id="7598749">.</span><span class="ident" id="7598750">a</span>&nbsp;<span class="op" id="7598752">!=</span>&nbsp;<span class="string" id="7598755">&#39;A&#39;</span>&nbsp;<span class="op" id="7598759">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598763">t</span><span class="op" id="7598764">.</span><span class="ident" id="7598765">Errorf</span><span class="op" id="7598771">(</span><span class="string" id="7598772">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7598793">,</span>&nbsp;<span class="ident" id="7598795">x</span><span class="op" id="7598796">.</span><span class="ident" id="7598797">G</span><span class="op" id="7598798">.</span><span class="ident" id="7598799">a</span><span class="op" id="7598800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7598803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7598806">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598846">b</span><span class="op" id="7598847">.</span><span class="ident" id="7598848">Reset</span><span class="op" id="7598853">(</span><span class="op" id="7598854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598857">gobber</span>&nbsp;<span class="op" id="7598864">:=</span>&nbsp;<span class="ident" id="7598867">Gobber</span><span class="op" id="7598873">(</span><span class="num" id="7598874">23</span><span class="op" id="7598876">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598879">bgobber</span>&nbsp;<span class="op" id="7598887">:=</span>&nbsp;<span class="ident" id="7598890">BinaryGobber</span><span class="op" id="7598902">(</span><span class="num" id="7598903">24</span><span class="op" id="7598905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598908">tgobber</span>&nbsp;<span class="op" id="7598916">:=</span>&nbsp;<span class="ident" id="7598919">TextGobber</span><span class="op" id="7598929">(</span><span class="num" id="7598930">25</span><span class="op" id="7598932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598935">err</span>&nbsp;<span class="op" id="7598939">=</span>&nbsp;<span class="ident" id="7598941">enc</span><span class="op" id="7598944">.</span><span class="ident" id="7598945">Encode</span><span class="op" id="7598951">(</span><span class="ident" id="7598952">GobTest3</span><span class="op" id="7598960">{</span><span class="num" id="7598961">17</span><span class="op" id="7598963">,</span>&nbsp;<span class="op" id="7598965">&amp;</span><span class="ident" id="7598966">gobber</span><span class="op" id="7598972">,</span>&nbsp;<span class="op" id="7598974">&amp;</span><span class="ident" id="7598975">bgobber</span><span class="op" id="7598982">,</span>&nbsp;<span class="op" id="7598984">&amp;</span><span class="ident" id="7598985">tgobber</span><span class="op" id="7598992">}</span><span class="op" id="7598993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598996">if</span>&nbsp;<span class="ident" id="7598999">err</span>&nbsp;<span class="op" id="7599003">!=</span>&nbsp;<span class="ident" id="7599006">nil</span>&nbsp;<span class="op" id="7599010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599014">t</span><span class="op" id="7599015">.</span><span class="ident" id="7599016">Fatal</span><span class="op" id="7599021">(</span><span class="string" id="7599022">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7599037">,</span>&nbsp;<span class="ident" id="7599039">err</span><span class="op" id="7599042">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599048">y</span>&nbsp;<span class="op" id="7599050">:=</span>&nbsp;<span class="builtinfunc" id="7599053">new</span><span class="op" id="7599056">(</span><span class="ident" id="7599057">GobTest3</span><span class="op" id="7599065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599068">err</span>&nbsp;<span class="op" id="7599072">=</span>&nbsp;<span class="ident" id="7599074">dec</span><span class="op" id="7599077">.</span><span class="ident" id="7599078">Decode</span><span class="op" id="7599084">(</span><span class="ident" id="7599085">y</span><span class="op" id="7599086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599089">if</span>&nbsp;<span class="ident" id="7599092">err</span>&nbsp;<span class="op" id="7599096">!=</span>&nbsp;<span class="ident" id="7599099">nil</span>&nbsp;<span class="op" id="7599103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599107">t</span><span class="op" id="7599108">.</span><span class="ident" id="7599109">Fatal</span><span class="op" id="7599114">(</span><span class="string" id="7599115">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7599130">,</span>&nbsp;<span class="ident" id="7599132">err</span><span class="op" id="7599135">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599141">if</span>&nbsp;<span class="op" id="7599144">*</span><span class="ident" id="7599145">y</span><span class="op" id="7599146">.</span><span class="ident" id="7599147">G</span>&nbsp;<span class="op" id="7599149">!=</span>&nbsp;<span class="num" id="7599152">23</span>&nbsp;<span class="op" id="7599155">||</span>&nbsp;<span class="op" id="7599158">*</span><span class="ident" id="7599159">y</span><span class="op" id="7599160">.</span><span class="ident" id="7599161">B</span>&nbsp;<span class="op" id="7599163">!=</span>&nbsp;<span class="num" id="7599166">24</span>&nbsp;<span class="op" id="7599169">||</span>&nbsp;<span class="op" id="7599172">*</span><span class="ident" id="7599173">y</span><span class="op" id="7599174">.</span><span class="ident" id="7599175">T</span>&nbsp;<span class="op" id="7599177">!=</span>&nbsp;<span class="num" id="7599180">25</span>&nbsp;<span class="op" id="7599183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599187">t</span><span class="op" id="7599188">.</span><span class="ident" id="7599189">Errorf</span><span class="op" id="7599195">(</span><span class="string" id="7599196">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7599217">,</span>&nbsp;<span class="op" id="7599219">*</span><span class="ident" id="7599220">y</span><span class="op" id="7599221">.</span><span class="ident" id="7599222">G</span><span class="op" id="7599223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599226">}</span><br>
<span class="lineno"></span><span class="op" id="7599228">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="7599231">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="7599298">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7599341">func</span>&nbsp;<span class="ident" id="7599346">TestGobEncoderValueField</span><span class="op" id="7599370">(</span><span class="ident" id="7599371">t</span>&nbsp;<span class="op" id="7599373">*</span><span class="ident" id="7599374">testing</span><span class="op" id="7599381">.</span><span class="ident" id="7599382">T</span><span class="op" id="7599383">)</span>&nbsp;<span class="op" id="7599385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599388">b</span>&nbsp;<span class="op" id="7599390">:=</span>&nbsp;<span class="builtinfunc" id="7599393">new</span><span class="op" id="7599396">(</span><span class="ident" id="7599397">bytes</span><span class="op" id="7599402">.</span><span class="ident" id="7599403">Buffer</span><span class="op" id="7599409">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7599412">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599450">enc</span>&nbsp;<span class="op" id="7599454">:=</span>&nbsp;<span class="ident" id="7599457">NewEncoder</span><span class="op" id="7599467">(</span><span class="ident" id="7599468">b</span><span class="op" id="7599469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599472">err</span>&nbsp;<span class="op" id="7599476">:=</span>&nbsp;<span class="ident" id="7599479">enc</span><span class="op" id="7599482">.</span><span class="ident" id="7599483">Encode</span><span class="op" id="7599489">(</span><span class="op" id="7599490">&amp;</span><span class="ident" id="7599491">GobTestValueEncDec</span><span class="op" id="7599509">{</span><span class="num" id="7599510">17</span><span class="op" id="7599512">,</span>&nbsp;<span class="ident" id="7599514">StringStruct</span><span class="op" id="7599526">{</span><span class="string" id="7599527">&#34;HIJKL&#34;</span><span class="op" id="7599534">}</span><span class="op" id="7599535">}</span><span class="op" id="7599536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599539">if</span>&nbsp;<span class="ident" id="7599542">err</span>&nbsp;<span class="op" id="7599546">!=</span>&nbsp;<span class="ident" id="7599549">nil</span>&nbsp;<span class="op" id="7599553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599557">t</span><span class="op" id="7599558">.</span><span class="ident" id="7599559">Fatal</span><span class="op" id="7599564">(</span><span class="string" id="7599565">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7599580">,</span>&nbsp;<span class="ident" id="7599582">err</span><span class="op" id="7599585">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599591">dec</span>&nbsp;<span class="op" id="7599595">:=</span>&nbsp;<span class="ident" id="7599598">NewDecoder</span><span class="op" id="7599608">(</span><span class="ident" id="7599609">b</span><span class="op" id="7599610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599613">x</span>&nbsp;<span class="op" id="7599615">:=</span>&nbsp;<span class="builtinfunc" id="7599618">new</span><span class="op" id="7599621">(</span><span class="ident" id="7599622">GobTestValueEncDec</span><span class="op" id="7599640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599643">err</span>&nbsp;<span class="op" id="7599647">=</span>&nbsp;<span class="ident" id="7599649">dec</span><span class="op" id="7599652">.</span><span class="ident" id="7599653">Decode</span><span class="op" id="7599659">(</span><span class="ident" id="7599660">x</span><span class="op" id="7599661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599664">if</span>&nbsp;<span class="ident" id="7599667">err</span>&nbsp;<span class="op" id="7599671">!=</span>&nbsp;<span class="ident" id="7599674">nil</span>&nbsp;<span class="op" id="7599678">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599682">t</span><span class="op" id="7599683">.</span><span class="ident" id="7599684">Fatal</span><span class="op" id="7599689">(</span><span class="string" id="7599690">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7599705">,</span>&nbsp;<span class="ident" id="7599707">err</span><span class="op" id="7599710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599716">if</span>&nbsp;<span class="ident" id="7599719">x</span><span class="op" id="7599720">.</span><span class="ident" id="7599721">G</span><span class="op" id="7599722">.</span><span class="ident" id="7599723">s</span>&nbsp;<span class="op" id="7599725">!=</span>&nbsp;<span class="string" id="7599728">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7599736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599740">t</span><span class="op" id="7599741">.</span><span class="ident" id="7599742">Errorf</span><span class="op" id="7599748">(</span><span class="string" id="7599749">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7599774">,</span>&nbsp;<span class="ident" id="7599776">x</span><span class="op" id="7599777">.</span><span class="ident" id="7599778">G</span><span class="op" id="7599779">.</span><span class="ident" id="7599780">s</span><span class="op" id="7599781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599784">}</span><br>
<span class="lineno">295</span><span class="op" id="7599786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7599789">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7599842">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="7599878">func</span>&nbsp;<span class="ident" id="7599883">TestGobEncoderIndirectField</span><span class="op" id="7599910">(</span><span class="ident" id="7599911">t</span>&nbsp;<span class="op" id="7599913">*</span><span class="ident" id="7599914">testing</span><span class="op" id="7599921">.</span><span class="ident" id="7599922">T</span><span class="op" id="7599923">)</span>&nbsp;<span class="op" id="7599925">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599928">b</span>&nbsp;<span class="op" id="7599930">:=</span>&nbsp;<span class="builtinfunc" id="7599933">new</span><span class="op" id="7599936">(</span><span class="ident" id="7599937">bytes</span><span class="op" id="7599942">.</span><span class="ident" id="7599943">Buffer</span><span class="op" id="7599949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7599952">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599990">enc</span>&nbsp;<span class="op" id="7599994">:=</span>&nbsp;<span class="ident" id="7599997">NewEncoder</span><span class="op" id="7600007">(</span><span class="ident" id="7600008">b</span><span class="op" id="7600009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600012">s</span>&nbsp;<span class="op" id="7600014">:=</span>&nbsp;<span class="op" id="7600017">&amp;</span><span class="ident" id="7600018">StringStruct</span><span class="op" id="7600030">{</span><span class="string" id="7600031">&#34;HIJKL&#34;</span><span class="op" id="7600038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600041">sp</span>&nbsp;<span class="op" id="7600044">:=</span>&nbsp;<span class="op" id="7600047">&amp;</span><span class="ident" id="7600048">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600051">err</span>&nbsp;<span class="op" id="7600055">:=</span>&nbsp;<span class="ident" id="7600058">enc</span><span class="op" id="7600061">.</span><span class="ident" id="7600062">Encode</span><span class="op" id="7600068">(</span><span class="ident" id="7600069">GobTestIndirectEncDec</span><span class="op" id="7600090">{</span><span class="num" id="7600091">17</span><span class="op" id="7600093">,</span>&nbsp;<span class="op" id="7600095">&amp;</span><span class="ident" id="7600096">sp</span><span class="op" id="7600098">}</span><span class="op" id="7600099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600102">if</span>&nbsp;<span class="ident" id="7600105">err</span>&nbsp;<span class="op" id="7600109">!=</span>&nbsp;<span class="ident" id="7600112">nil</span>&nbsp;<span class="op" id="7600116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600120">t</span><span class="op" id="7600121">.</span><span class="ident" id="7600122">Fatal</span><span class="op" id="7600127">(</span><span class="string" id="7600128">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7600143">,</span>&nbsp;<span class="ident" id="7600145">err</span><span class="op" id="7600148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600154">dec</span>&nbsp;<span class="op" id="7600158">:=</span>&nbsp;<span class="ident" id="7600161">NewDecoder</span><span class="op" id="7600171">(</span><span class="ident" id="7600172">b</span><span class="op" id="7600173">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600176">x</span>&nbsp;<span class="op" id="7600178">:=</span>&nbsp;<span class="builtinfunc" id="7600181">new</span><span class="op" id="7600184">(</span><span class="ident" id="7600185">GobTestIndirectEncDec</span><span class="op" id="7600206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600209">err</span>&nbsp;<span class="op" id="7600213">=</span>&nbsp;<span class="ident" id="7600215">dec</span><span class="op" id="7600218">.</span><span class="ident" id="7600219">Decode</span><span class="op" id="7600225">(</span><span class="ident" id="7600226">x</span><span class="op" id="7600227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600230">if</span>&nbsp;<span class="ident" id="7600233">err</span>&nbsp;<span class="op" id="7600237">!=</span>&nbsp;<span class="ident" id="7600240">nil</span>&nbsp;<span class="op" id="7600244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600248">t</span><span class="op" id="7600249">.</span><span class="ident" id="7600250">Fatal</span><span class="op" id="7600255">(</span><span class="string" id="7600256">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7600271">,</span>&nbsp;<span class="ident" id="7600273">err</span><span class="op" id="7600276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600279">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600282">if</span>&nbsp;<span class="op" id="7600285">(</span><span class="op" id="7600286">*</span><span class="op" id="7600287">*</span><span class="op" id="7600288">*</span><span class="ident" id="7600289">x</span><span class="op" id="7600290">.</span><span class="ident" id="7600291">G</span><span class="op" id="7600292">)</span><span class="op" id="7600293">.</span><span class="ident" id="7600294">s</span>&nbsp;<span class="op" id="7600296">!=</span>&nbsp;<span class="string" id="7600299">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7600307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600311">t</span><span class="op" id="7600312">.</span><span class="ident" id="7600313">Errorf</span><span class="op" id="7600319">(</span><span class="string" id="7600320">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7600345">,</span>&nbsp;<span class="op" id="7600347">(</span><span class="op" id="7600348">*</span><span class="op" id="7600349">*</span><span class="op" id="7600350">*</span><span class="ident" id="7600351">x</span><span class="op" id="7600352">.</span><span class="ident" id="7600353">G</span><span class="op" id="7600354">)</span><span class="op" id="7600355">.</span><span class="ident" id="7600356">s</span><span class="op" id="7600357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600360">}</span><br>
<span class="lineno"></span><span class="op" id="7600362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="7600365">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7600406">func</span>&nbsp;<span class="ident" id="7600411">TestGobEncoderArrayField</span><span class="op" id="7600435">(</span><span class="ident" id="7600436">t</span>&nbsp;<span class="op" id="7600438">*</span><span class="ident" id="7600439">testing</span><span class="op" id="7600446">.</span><span class="ident" id="7600447">T</span><span class="op" id="7600448">)</span>&nbsp;<span class="op" id="7600450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600453">b</span>&nbsp;<span class="op" id="7600455">:=</span>&nbsp;<span class="builtinfunc" id="7600458">new</span><span class="op" id="7600461">(</span><span class="ident" id="7600462">bytes</span><span class="op" id="7600467">.</span><span class="ident" id="7600468">Buffer</span><span class="op" id="7600474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600477">enc</span>&nbsp;<span class="op" id="7600481">:=</span>&nbsp;<span class="ident" id="7600484">NewEncoder</span><span class="op" id="7600494">(</span><span class="ident" id="7600495">b</span><span class="op" id="7600496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600499">var</span>&nbsp;<span class="ident" id="7600503">a</span>&nbsp;<span class="ident" id="7600505">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600525">a</span><span class="op" id="7600526">.</span><span class="ident" id="7600527">X</span>&nbsp;<span class="op" id="7600529">=</span>&nbsp;<span class="num" id="7600531">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600535">for</span>&nbsp;<span class="ident" id="7600539">i</span>&nbsp;<span class="op" id="7600541">:=</span>&nbsp;<span class="keyword" id="7600544">range</span>&nbsp;<span class="ident" id="7600550">a</span><span class="op" id="7600551">.</span><span class="ident" id="7600552">A</span><span class="op" id="7600553">.</span><span class="ident" id="7600554">a</span>&nbsp;<span class="op" id="7600556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600560">a</span><span class="op" id="7600561">.</span><span class="ident" id="7600562">A</span><span class="op" id="7600563">.</span><span class="ident" id="7600564">a</span><span class="op" id="7600565">[</span><span class="ident" id="7600566">i</span><span class="op" id="7600567">]</span>&nbsp;<span class="op" id="7600569">=</span>&nbsp;<span class="builtintype" id="7600571">byte</span><span class="op" id="7600575">(</span><span class="ident" id="7600576">i</span><span class="op" id="7600577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600583">err</span>&nbsp;<span class="op" id="7600587">:=</span>&nbsp;<span class="ident" id="7600590">enc</span><span class="op" id="7600593">.</span><span class="ident" id="7600594">Encode</span><span class="op" id="7600600">(</span><span class="op" id="7600601">&amp;</span><span class="ident" id="7600602">a</span><span class="op" id="7600603">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600606">if</span>&nbsp;<span class="ident" id="7600609">err</span>&nbsp;<span class="op" id="7600613">!=</span>&nbsp;<span class="ident" id="7600616">nil</span>&nbsp;<span class="op" id="7600620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600624">t</span><span class="op" id="7600625">.</span><span class="ident" id="7600626">Fatal</span><span class="op" id="7600631">(</span><span class="string" id="7600632">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7600647">,</span>&nbsp;<span class="ident" id="7600649">err</span><span class="op" id="7600652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600658">dec</span>&nbsp;<span class="op" id="7600662">:=</span>&nbsp;<span class="ident" id="7600665">NewDecoder</span><span class="op" id="7600675">(</span><span class="ident" id="7600676">b</span><span class="op" id="7600677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600680">x</span>&nbsp;<span class="op" id="7600682">:=</span>&nbsp;<span class="builtinfunc" id="7600685">new</span><span class="op" id="7600688">(</span><span class="ident" id="7600689">GobTestArrayEncDec</span><span class="op" id="7600707">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600710">err</span>&nbsp;<span class="op" id="7600714">=</span>&nbsp;<span class="ident" id="7600716">dec</span><span class="op" id="7600719">.</span><span class="ident" id="7600720">Decode</span><span class="op" id="7600726">(</span><span class="ident" id="7600727">x</span><span class="op" id="7600728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600731">if</span>&nbsp;<span class="ident" id="7600734">err</span>&nbsp;<span class="op" id="7600738">!=</span>&nbsp;<span class="ident" id="7600741">nil</span>&nbsp;<span class="op" id="7600745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600749">t</span><span class="op" id="7600750">.</span><span class="ident" id="7600751">Fatal</span><span class="op" id="7600756">(</span><span class="string" id="7600757">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7600772">,</span>&nbsp;<span class="ident" id="7600774">err</span><span class="op" id="7600777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600783">for</span>&nbsp;<span class="ident" id="7600787">i</span><span class="op" id="7600788">,</span>&nbsp;<span class="ident" id="7600790">v</span>&nbsp;<span class="op" id="7600792">:=</span>&nbsp;<span class="keyword" id="7600795">range</span>&nbsp;<span class="ident" id="7600801">x</span><span class="op" id="7600802">.</span><span class="ident" id="7600803">A</span><span class="op" id="7600804">.</span><span class="ident" id="7600805">a</span>&nbsp;<span class="op" id="7600807">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600811">if</span>&nbsp;<span class="ident" id="7600814">v</span>&nbsp;<span class="op" id="7600816">!=</span>&nbsp;<span class="builtintype" id="7600819">byte</span><span class="op" id="7600823">(</span><span class="ident" id="7600824">i</span><span class="op" id="7600825">)</span>&nbsp;<span class="op" id="7600827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600832">t</span><span class="op" id="7600833">.</span><span class="ident" id="7600834">Errorf</span><span class="op" id="7600840">(</span><span class="string" id="7600841">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7600861">,</span>&nbsp;<span class="builtintype" id="7600863">byte</span><span class="op" id="7600867">(</span><span class="ident" id="7600868">i</span><span class="op" id="7600869">)</span><span class="op" id="7600870">,</span>&nbsp;<span class="ident" id="7600872">v</span><span class="op" id="7600873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600878">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600889">}</span><br>
<span class="lineno">345</span><span class="op" id="7600891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7600894">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7600948">func</span>&nbsp;<span class="ident" id="7600953">TestGobEncoderIndirectArrayField</span><span class="op" id="7600985">(</span><span class="ident" id="7600986">t</span>&nbsp;<span class="op" id="7600988">*</span><span class="ident" id="7600989">testing</span><span class="op" id="7600996">.</span><span class="ident" id="7600997">T</span><span class="op" id="7600998">)</span>&nbsp;<span class="op" id="7601000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601003">b</span>&nbsp;<span class="op" id="7601005">:=</span>&nbsp;<span class="builtinfunc" id="7601008">new</span><span class="op" id="7601011">(</span><span class="ident" id="7601012">bytes</span><span class="op" id="7601017">.</span><span class="ident" id="7601018">Buffer</span><span class="op" id="7601024">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601027">enc</span>&nbsp;<span class="op" id="7601031">:=</span>&nbsp;<span class="ident" id="7601034">NewEncoder</span><span class="op" id="7601044">(</span><span class="ident" id="7601045">b</span><span class="op" id="7601046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601049">var</span>&nbsp;<span class="ident" id="7601053">a</span>&nbsp;<span class="ident" id="7601055">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601083">a</span><span class="op" id="7601084">.</span><span class="ident" id="7601085">X</span>&nbsp;<span class="op" id="7601087">=</span>&nbsp;<span class="num" id="7601089">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601093">var</span>&nbsp;<span class="ident" id="7601097">array</span>&nbsp;<span class="ident" id="7601103">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601116">ap</span>&nbsp;<span class="op" id="7601119">:=</span>&nbsp;<span class="op" id="7601122">&amp;</span><span class="ident" id="7601123">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601130">app</span>&nbsp;<span class="op" id="7601134">:=</span>&nbsp;<span class="op" id="7601137">&amp;</span><span class="ident" id="7601138">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601142">a</span><span class="op" id="7601143">.</span><span class="ident" id="7601144">A</span>&nbsp;<span class="op" id="7601146">=</span>&nbsp;<span class="op" id="7601148">&amp;</span><span class="ident" id="7601149">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601154">for</span>&nbsp;<span class="ident" id="7601158">i</span>&nbsp;<span class="op" id="7601160">:=</span>&nbsp;<span class="keyword" id="7601163">range</span>&nbsp;<span class="ident" id="7601169">array</span><span class="op" id="7601174">.</span><span class="ident" id="7601175">a</span>&nbsp;<span class="op" id="7601177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601181">array</span><span class="op" id="7601186">.</span><span class="ident" id="7601187">a</span><span class="op" id="7601188">[</span><span class="ident" id="7601189">i</span><span class="op" id="7601190">]</span>&nbsp;<span class="op" id="7601192">=</span>&nbsp;<span class="builtintype" id="7601194">byte</span><span class="op" id="7601198">(</span><span class="ident" id="7601199">i</span><span class="op" id="7601200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601203">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601206">err</span>&nbsp;<span class="op" id="7601210">:=</span>&nbsp;<span class="ident" id="7601213">enc</span><span class="op" id="7601216">.</span><span class="ident" id="7601217">Encode</span><span class="op" id="7601223">(</span><span class="ident" id="7601224">a</span><span class="op" id="7601225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601228">if</span>&nbsp;<span class="ident" id="7601231">err</span>&nbsp;<span class="op" id="7601235">!=</span>&nbsp;<span class="ident" id="7601238">nil</span>&nbsp;<span class="op" id="7601242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601246">t</span><span class="op" id="7601247">.</span><span class="ident" id="7601248">Fatal</span><span class="op" id="7601253">(</span><span class="string" id="7601254">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7601269">,</span>&nbsp;<span class="ident" id="7601271">err</span><span class="op" id="7601274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601280">dec</span>&nbsp;<span class="op" id="7601284">:=</span>&nbsp;<span class="ident" id="7601287">NewDecoder</span><span class="op" id="7601297">(</span><span class="ident" id="7601298">b</span><span class="op" id="7601299">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601302">x</span>&nbsp;<span class="op" id="7601304">:=</span>&nbsp;<span class="builtinfunc" id="7601307">new</span><span class="op" id="7601310">(</span><span class="ident" id="7601311">GobTestIndirectArrayEncDec</span><span class="op" id="7601337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601340">err</span>&nbsp;<span class="op" id="7601344">=</span>&nbsp;<span class="ident" id="7601346">dec</span><span class="op" id="7601349">.</span><span class="ident" id="7601350">Decode</span><span class="op" id="7601356">(</span><span class="ident" id="7601357">x</span><span class="op" id="7601358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601361">if</span>&nbsp;<span class="ident" id="7601364">err</span>&nbsp;<span class="op" id="7601368">!=</span>&nbsp;<span class="ident" id="7601371">nil</span>&nbsp;<span class="op" id="7601375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601379">t</span><span class="op" id="7601380">.</span><span class="ident" id="7601381">Fatal</span><span class="op" id="7601386">(</span><span class="string" id="7601387">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7601402">,</span>&nbsp;<span class="ident" id="7601404">err</span><span class="op" id="7601407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601410">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601413">for</span>&nbsp;<span class="ident" id="7601417">i</span><span class="op" id="7601418">,</span>&nbsp;<span class="ident" id="7601420">v</span>&nbsp;<span class="op" id="7601422">:=</span>&nbsp;<span class="keyword" id="7601425">range</span>&nbsp;<span class="op" id="7601431">(</span><span class="op" id="7601432">*</span><span class="op" id="7601433">*</span><span class="op" id="7601434">*</span><span class="ident" id="7601435">x</span><span class="op" id="7601436">.</span><span class="ident" id="7601437">A</span><span class="op" id="7601438">)</span><span class="op" id="7601439">.</span><span class="ident" id="7601440">a</span>&nbsp;<span class="op" id="7601442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601446">if</span>&nbsp;<span class="ident" id="7601449">v</span>&nbsp;<span class="op" id="7601451">!=</span>&nbsp;<span class="builtintype" id="7601454">byte</span><span class="op" id="7601458">(</span><span class="ident" id="7601459">i</span><span class="op" id="7601460">)</span>&nbsp;<span class="op" id="7601462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601467">t</span><span class="op" id="7601468">.</span><span class="ident" id="7601469">Errorf</span><span class="op" id="7601475">(</span><span class="string" id="7601476">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7601496">,</span>&nbsp;<span class="builtintype" id="7601498">byte</span><span class="op" id="7601502">(</span><span class="ident" id="7601503">i</span><span class="op" id="7601504">)</span><span class="op" id="7601505">,</span>&nbsp;<span class="ident" id="7601507">v</span><span class="op" id="7601508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601513">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601521">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601524">}</span><br>
<span class="lineno"></span><span class="op" id="7601526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7601529">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7601591">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="7601654">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="7601715">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="7601775">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="7601798">func</span>&nbsp;<span class="ident" id="7601803">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="7601838">(</span><span class="ident" id="7601839">t</span>&nbsp;<span class="op" id="7601841">*</span><span class="ident" id="7601842">testing</span><span class="op" id="7601849">.</span><span class="ident" id="7601850">T</span><span class="op" id="7601851">)</span>&nbsp;<span class="op" id="7601853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7601856">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601900">b</span>&nbsp;<span class="op" id="7601902">:=</span>&nbsp;<span class="builtinfunc" id="7601905">new</span><span class="op" id="7601908">(</span><span class="ident" id="7601909">bytes</span><span class="op" id="7601914">.</span><span class="ident" id="7601915">Buffer</span><span class="op" id="7601921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601924">enc</span>&nbsp;<span class="op" id="7601928">:=</span>&nbsp;<span class="ident" id="7601931">NewEncoder</span><span class="op" id="7601941">(</span><span class="ident" id="7601942">b</span><span class="op" id="7601943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601946">err</span>&nbsp;<span class="op" id="7601950">:=</span>&nbsp;<span class="ident" id="7601953">enc</span><span class="op" id="7601956">.</span><span class="ident" id="7601957">Encode</span><span class="op" id="7601963">(</span><span class="ident" id="7601964">GobTest1</span><span class="op" id="7601972">{</span><span class="num" id="7601973">17</span><span class="op" id="7601975">,</span>&nbsp;<span class="op" id="7601977">&amp;</span><span class="ident" id="7601978">StringStruct</span><span class="op" id="7601990">{</span><span class="string" id="7601991">&#34;ABC&#34;</span><span class="op" id="7601996">}</span><span class="op" id="7601997">}</span><span class="op" id="7601998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602001">if</span>&nbsp;<span class="ident" id="7602004">err</span>&nbsp;<span class="op" id="7602008">!=</span>&nbsp;<span class="ident" id="7602011">nil</span>&nbsp;<span class="op" id="7602015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602019">t</span><span class="op" id="7602020">.</span><span class="ident" id="7602021">Fatal</span><span class="op" id="7602026">(</span><span class="string" id="7602027">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7602042">,</span>&nbsp;<span class="ident" id="7602044">err</span><span class="op" id="7602047">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602053">dec</span>&nbsp;<span class="op" id="7602057">:=</span>&nbsp;<span class="ident" id="7602060">NewDecoder</span><span class="op" id="7602070">(</span><span class="ident" id="7602071">b</span><span class="op" id="7602072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602075">x</span>&nbsp;<span class="op" id="7602077">:=</span>&nbsp;<span class="builtinfunc" id="7602080">new</span><span class="op" id="7602083">(</span><span class="ident" id="7602084">GobTest0</span><span class="op" id="7602092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602095">err</span>&nbsp;<span class="op" id="7602099">=</span>&nbsp;<span class="ident" id="7602101">dec</span><span class="op" id="7602104">.</span><span class="ident" id="7602105">Decode</span><span class="op" id="7602111">(</span><span class="ident" id="7602112">x</span><span class="op" id="7602113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602116">if</span>&nbsp;<span class="ident" id="7602119">err</span>&nbsp;<span class="op" id="7602123">!=</span>&nbsp;<span class="ident" id="7602126">nil</span>&nbsp;<span class="op" id="7602130">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602134">t</span><span class="op" id="7602135">.</span><span class="ident" id="7602136">Fatal</span><span class="op" id="7602141">(</span><span class="string" id="7602142">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7602157">,</span>&nbsp;<span class="ident" id="7602159">err</span><span class="op" id="7602162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602168">if</span>&nbsp;<span class="ident" id="7602171">x</span><span class="op" id="7602172">.</span><span class="ident" id="7602173">G</span><span class="op" id="7602174">.</span><span class="ident" id="7602175">a</span>&nbsp;<span class="op" id="7602177">!=</span>&nbsp;<span class="string" id="7602180">&#39;A&#39;</span>&nbsp;<span class="op" id="7602184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602188">t</span><span class="op" id="7602189">.</span><span class="ident" id="7602190">Errorf</span><span class="op" id="7602196">(</span><span class="string" id="7602197">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7602218">,</span>&nbsp;<span class="ident" id="7602220">x</span><span class="op" id="7602221">.</span><span class="ident" id="7602222">G</span><span class="op" id="7602223">.</span><span class="ident" id="7602224">a</span><span class="op" id="7602225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602228">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7602231">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602293">b</span><span class="op" id="7602294">.</span><span class="ident" id="7602295">Reset</span><span class="op" id="7602300">(</span><span class="op" id="7602301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602304">err</span>&nbsp;<span class="op" id="7602308">=</span>&nbsp;<span class="ident" id="7602310">enc</span><span class="op" id="7602313">.</span><span class="ident" id="7602314">Encode</span><span class="op" id="7602320">(</span><span class="ident" id="7602321">GobTest0</span><span class="op" id="7602329">{</span><span class="num" id="7602330">17</span><span class="op" id="7602332">,</span>&nbsp;<span class="op" id="7602334">&amp;</span><span class="ident" id="7602335">ByteStruct</span><span class="op" id="7602345">{</span><span class="string" id="7602346">&#39;X&#39;</span><span class="op" id="7602349">}</span><span class="op" id="7602350">}</span><span class="op" id="7602351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602354">if</span>&nbsp;<span class="ident" id="7602357">err</span>&nbsp;<span class="op" id="7602361">!=</span>&nbsp;<span class="ident" id="7602364">nil</span>&nbsp;<span class="op" id="7602368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602372">t</span><span class="op" id="7602373">.</span><span class="ident" id="7602374">Fatal</span><span class="op" id="7602379">(</span><span class="string" id="7602380">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7602395">,</span>&nbsp;<span class="ident" id="7602397">err</span><span class="op" id="7602400">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602406">y</span>&nbsp;<span class="op" id="7602408">:=</span>&nbsp;<span class="builtinfunc" id="7602411">new</span><span class="op" id="7602414">(</span><span class="ident" id="7602415">GobTest1</span><span class="op" id="7602423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602426">err</span>&nbsp;<span class="op" id="7602430">=</span>&nbsp;<span class="ident" id="7602432">dec</span><span class="op" id="7602435">.</span><span class="ident" id="7602436">Decode</span><span class="op" id="7602442">(</span><span class="ident" id="7602443">y</span><span class="op" id="7602444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602447">if</span>&nbsp;<span class="ident" id="7602450">err</span>&nbsp;<span class="op" id="7602454">!=</span>&nbsp;<span class="ident" id="7602457">nil</span>&nbsp;<span class="op" id="7602461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602465">t</span><span class="op" id="7602466">.</span><span class="ident" id="7602467">Fatal</span><span class="op" id="7602472">(</span><span class="string" id="7602473">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7602488">,</span>&nbsp;<span class="ident" id="7602490">err</span><span class="op" id="7602493">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602499">if</span>&nbsp;<span class="ident" id="7602502">y</span><span class="op" id="7602503">.</span><span class="ident" id="7602504">G</span><span class="op" id="7602505">.</span><span class="ident" id="7602506">s</span>&nbsp;<span class="op" id="7602508">!=</span>&nbsp;<span class="string" id="7602511">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="7602517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602521">t</span><span class="op" id="7602522">.</span><span class="ident" id="7602523">Fatalf</span><span class="op" id="7602529">(</span><span class="string" id="7602530">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7602553">,</span>&nbsp;<span class="ident" id="7602555">y</span><span class="op" id="7602556">.</span><span class="ident" id="7602557">G</span><span class="op" id="7602558">.</span><span class="ident" id="7602559">s</span><span class="op" id="7602560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602563">}</span><br>
<span class="lineno"></span><span class="op" id="7602565">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="7602568">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="7602630">func</span>&nbsp;<span class="ident" id="7602635">TestGobEncoderValueEncoder</span><span class="op" id="7602661">(</span><span class="ident" id="7602662">t</span>&nbsp;<span class="op" id="7602664">*</span><span class="ident" id="7602665">testing</span><span class="op" id="7602672">.</span><span class="ident" id="7602673">T</span><span class="op" id="7602674">)</span>&nbsp;<span class="op" id="7602676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7602679">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602723">b</span>&nbsp;<span class="op" id="7602725">:=</span>&nbsp;<span class="builtinfunc" id="7602728">new</span><span class="op" id="7602731">(</span><span class="ident" id="7602732">bytes</span><span class="op" id="7602737">.</span><span class="ident" id="7602738">Buffer</span><span class="op" id="7602744">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602747">enc</span>&nbsp;<span class="op" id="7602751">:=</span>&nbsp;<span class="ident" id="7602754">NewEncoder</span><span class="op" id="7602764">(</span><span class="ident" id="7602765">b</span><span class="op" id="7602766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602769">err</span>&nbsp;<span class="op" id="7602773">:=</span>&nbsp;<span class="ident" id="7602776">enc</span><span class="op" id="7602779">.</span><span class="ident" id="7602780">Encode</span><span class="op" id="7602786">(</span><span class="ident" id="7602787">GobTest4</span><span class="op" id="7602795">{</span><span class="num" id="7602796">17</span><span class="op" id="7602798">,</span>&nbsp;<span class="ident" id="7602800">ValueGobber</span><span class="op" id="7602811">(</span><span class="string" id="7602812">&#34;hello&#34;</span><span class="op" id="7602819">)</span><span class="op" id="7602820">,</span>&nbsp;<span class="ident" id="7602822">BinaryValueGobber</span><span class="op" id="7602839">(</span><span class="string" id="7602840">&#34;&#34;</span><span class="op" id="7602858">)</span><span class="op" id="7602859">,</span>&nbsp;<span class="ident" id="7602861">TextValueGobber</span><span class="op" id="7602876">(</span><span class="string" id="7602877">&#34;&#34;</span><span class="op" id="7602894">)</span><span class="op" id="7602895">}</span><span class="op" id="7602896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602899">if</span>&nbsp;<span class="ident" id="7602902">err</span>&nbsp;<span class="op" id="7602906">!=</span>&nbsp;<span class="ident" id="7602909">nil</span>&nbsp;<span class="op" id="7602913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602917">t</span><span class="op" id="7602918">.</span><span class="ident" id="7602919">Fatal</span><span class="op" id="7602924">(</span><span class="string" id="7602925">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7602940">,</span>&nbsp;<span class="ident" id="7602942">err</span><span class="op" id="7602945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602948">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602951">dec</span>&nbsp;<span class="op" id="7602955">:=</span>&nbsp;<span class="ident" id="7602958">NewDecoder</span><span class="op" id="7602968">(</span><span class="ident" id="7602969">b</span><span class="op" id="7602970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602973">x</span>&nbsp;<span class="op" id="7602975">:=</span>&nbsp;<span class="builtinfunc" id="7602978">new</span><span class="op" id="7602981">(</span><span class="ident" id="7602982">GobTest5</span><span class="op" id="7602990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602993">err</span>&nbsp;<span class="op" id="7602997">=</span>&nbsp;<span class="ident" id="7602999">dec</span><span class="op" id="7603002">.</span><span class="ident" id="7603003">Decode</span><span class="op" id="7603009">(</span><span class="ident" id="7603010">x</span><span class="op" id="7603011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603014">if</span>&nbsp;<span class="ident" id="7603017">err</span>&nbsp;<span class="op" id="7603021">!=</span>&nbsp;<span class="ident" id="7603024">nil</span>&nbsp;<span class="op" id="7603028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603032">t</span><span class="op" id="7603033">.</span><span class="ident" id="7603034">Fatal</span><span class="op" id="7603039">(</span><span class="string" id="7603040">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7603055">,</span>&nbsp;<span class="ident" id="7603057">err</span><span class="op" id="7603060">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603066">if</span>&nbsp;<span class="op" id="7603069">*</span><span class="ident" id="7603070">x</span><span class="op" id="7603071">.</span><span class="ident" id="7603072">V</span>&nbsp;<span class="op" id="7603074">!=</span>&nbsp;<span class="string" id="7603077">&#34;hello&#34;</span>&nbsp;<span class="op" id="7603085">||</span>&nbsp;<span class="op" id="7603088">*</span><span class="ident" id="7603089">x</span><span class="op" id="7603090">.</span><span class="ident" id="7603091">BV</span>&nbsp;<span class="op" id="7603094">!=</span>&nbsp;<span class="string" id="7603097">&#34;&#34;</span>&nbsp;<span class="op" id="7603116">||</span>&nbsp;<span class="op" id="7603119">*</span><span class="ident" id="7603120">x</span><span class="op" id="7603121">.</span><span class="ident" id="7603122">TV</span>&nbsp;<span class="op" id="7603125">!=</span>&nbsp;<span class="string" id="7603128">&#34;&#34;</span>&nbsp;<span class="op" id="7603146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603150">t</span><span class="op" id="7603151">.</span><span class="ident" id="7603152">Errorf</span><span class="op" id="7603158">(</span><span class="string" id="7603159">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7603184">,</span>&nbsp;<span class="op" id="7603186">*</span><span class="ident" id="7603187">x</span><span class="op" id="7603188">.</span><span class="ident" id="7603189">V</span><span class="op" id="7603190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603193">}</span><br>
<span class="lineno"></span><span class="op" id="7603195">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="7603198">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7603266">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="7603307">func</span>&nbsp;<span class="ident" id="7603312">TestGobEncoderValueThenPointer</span><span class="op" id="7603342">(</span><span class="ident" id="7603343">t</span>&nbsp;<span class="op" id="7603345">*</span><span class="ident" id="7603346">testing</span><span class="op" id="7603353">.</span><span class="ident" id="7603354">T</span><span class="op" id="7603355">)</span>&nbsp;<span class="op" id="7603357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603360">v</span>&nbsp;<span class="op" id="7603362">:=</span>&nbsp;<span class="ident" id="7603365">ValueGobber</span><span class="op" id="7603376">(</span><span class="string" id="7603377">&#34;forty-two&#34;</span><span class="op" id="7603388">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603391">w</span>&nbsp;<span class="op" id="7603393">:=</span>&nbsp;<span class="ident" id="7603396">ValueGobber</span><span class="op" id="7603407">(</span><span class="string" id="7603408">&#34;six-by-nine&#34;</span><span class="op" id="7603421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603424">bv</span>&nbsp;<span class="op" id="7603427">:=</span>&nbsp;<span class="ident" id="7603430">BinaryValueGobber</span><span class="op" id="7603447">(</span><span class="string" id="7603448">&#34;1nanocentury&#34;</span><span class="op" id="7603462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603465">bw</span>&nbsp;<span class="op" id="7603468">:=</span>&nbsp;<span class="ident" id="7603471">BinaryValueGobber</span><span class="op" id="7603488">(</span><span class="string" id="7603489">&#34;seconds&#34;</span><span class="op" id="7603500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603503">tv</span>&nbsp;<span class="op" id="7603506">:=</span>&nbsp;<span class="ident" id="7603509">TextValueGobber</span><span class="op" id="7603524">(</span><span class="string" id="7603525">&#34;gravitationalacceleration&#34;</span><span class="op" id="7603552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603555">tw</span>&nbsp;<span class="op" id="7603558">:=</span>&nbsp;<span class="ident" id="7603561">TextValueGobber</span><span class="op" id="7603576">(</span><span class="string" id="7603577">&#34;ft/s&#34;</span><span class="op" id="7603589">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7603593">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7603664">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603728">b</span>&nbsp;<span class="op" id="7603730">:=</span>&nbsp;<span class="builtinfunc" id="7603733">new</span><span class="op" id="7603736">(</span><span class="ident" id="7603737">bytes</span><span class="op" id="7603742">.</span><span class="ident" id="7603743">Buffer</span><span class="op" id="7603749">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603752">enc</span>&nbsp;<span class="op" id="7603756">:=</span>&nbsp;<span class="ident" id="7603759">NewEncoder</span><span class="op" id="7603769">(</span><span class="ident" id="7603770">b</span><span class="op" id="7603771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603774">if</span>&nbsp;<span class="ident" id="7603777">err</span>&nbsp;<span class="op" id="7603781">:=</span>&nbsp;<span class="ident" id="7603784">enc</span><span class="op" id="7603787">.</span><span class="ident" id="7603788">Encode</span><span class="op" id="7603794">(</span><span class="ident" id="7603795">GobTest6</span><span class="op" id="7603803">{</span><span class="num" id="7603804">42</span><span class="op" id="7603806">,</span>&nbsp;<span class="ident" id="7603808">v</span><span class="op" id="7603809">,</span>&nbsp;<span class="op" id="7603811">&amp;</span><span class="ident" id="7603812">w</span><span class="op" id="7603813">,</span>&nbsp;<span class="ident" id="7603815">bv</span><span class="op" id="7603817">,</span>&nbsp;<span class="op" id="7603819">&amp;</span><span class="ident" id="7603820">bw</span><span class="op" id="7603822">,</span>&nbsp;<span class="ident" id="7603824">tv</span><span class="op" id="7603826">,</span>&nbsp;<span class="op" id="7603828">&amp;</span><span class="ident" id="7603829">tw</span><span class="op" id="7603831">}</span><span class="op" id="7603832">)</span><span class="op" id="7603833">;</span>&nbsp;<span class="ident" id="7603835">err</span>&nbsp;<span class="op" id="7603839">!=</span>&nbsp;<span class="ident" id="7603842">nil</span>&nbsp;<span class="op" id="7603846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603850">t</span><span class="op" id="7603851">.</span><span class="ident" id="7603852">Fatal</span><span class="op" id="7603857">(</span><span class="string" id="7603858">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7603873">,</span>&nbsp;<span class="ident" id="7603875">err</span><span class="op" id="7603878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603884">dec</span>&nbsp;<span class="op" id="7603888">:=</span>&nbsp;<span class="ident" id="7603891">NewDecoder</span><span class="op" id="7603901">(</span><span class="ident" id="7603902">b</span><span class="op" id="7603903">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603906">x</span>&nbsp;<span class="op" id="7603908">:=</span>&nbsp;<span class="builtinfunc" id="7603911">new</span><span class="op" id="7603914">(</span><span class="ident" id="7603915">GobTest6</span><span class="op" id="7603923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603926">if</span>&nbsp;<span class="ident" id="7603929">err</span>&nbsp;<span class="op" id="7603933">:=</span>&nbsp;<span class="ident" id="7603936">dec</span><span class="op" id="7603939">.</span><span class="ident" id="7603940">Decode</span><span class="op" id="7603946">(</span><span class="ident" id="7603947">x</span><span class="op" id="7603948">)</span><span class="op" id="7603949">;</span>&nbsp;<span class="ident" id="7603951">err</span>&nbsp;<span class="op" id="7603955">!=</span>&nbsp;<span class="ident" id="7603958">nil</span>&nbsp;<span class="op" id="7603962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603966">t</span><span class="op" id="7603967">.</span><span class="ident" id="7603968">Fatal</span><span class="op" id="7603973">(</span><span class="string" id="7603974">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7603989">,</span>&nbsp;<span class="ident" id="7603991">err</span><span class="op" id="7603994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604001">if</span>&nbsp;<span class="ident" id="7604004">got</span><span class="op" id="7604007">,</span>&nbsp;<span class="ident" id="7604009">want</span>&nbsp;<span class="op" id="7604014">:=</span>&nbsp;<span class="ident" id="7604017">x</span><span class="op" id="7604018">.</span><span class="ident" id="7604019">V</span><span class="op" id="7604020">,</span>&nbsp;<span class="ident" id="7604022">v</span><span class="op" id="7604023">;</span>&nbsp;<span class="ident" id="7604025">got</span>&nbsp;<span class="op" id="7604029">!=</span>&nbsp;<span class="ident" id="7604032">want</span>&nbsp;<span class="op" id="7604037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604041">t</span><span class="op" id="7604042">.</span><span class="ident" id="7604043">Errorf</span><span class="op" id="7604049">(</span><span class="string" id="7604050">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604067">,</span>&nbsp;<span class="ident" id="7604069">got</span><span class="op" id="7604072">,</span>&nbsp;<span class="ident" id="7604074">want</span><span class="op" id="7604078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604084">if</span>&nbsp;<span class="ident" id="7604087">got</span><span class="op" id="7604090">,</span>&nbsp;<span class="ident" id="7604092">want</span>&nbsp;<span class="op" id="7604097">:=</span>&nbsp;<span class="ident" id="7604100">x</span><span class="op" id="7604101">.</span><span class="ident" id="7604102">W</span><span class="op" id="7604103">,</span>&nbsp;<span class="ident" id="7604105">w</span><span class="op" id="7604106">;</span>&nbsp;<span class="ident" id="7604108">got</span>&nbsp;<span class="op" id="7604112">==</span>&nbsp;<span class="ident" id="7604115">nil</span>&nbsp;<span class="op" id="7604119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604123">t</span><span class="op" id="7604124">.</span><span class="ident" id="7604125">Errorf</span><span class="op" id="7604131">(</span><span class="string" id="7604132">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604150">,</span>&nbsp;<span class="ident" id="7604152">want</span><span class="op" id="7604156">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604159">}</span>&nbsp;<span class="keyword" id="7604161">else</span>&nbsp;<span class="keyword" id="7604166">if</span>&nbsp;<span class="op" id="7604169">*</span><span class="ident" id="7604170">got</span>&nbsp;<span class="op" id="7604174">!=</span>&nbsp;<span class="ident" id="7604177">want</span>&nbsp;<span class="op" id="7604182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604186">t</span><span class="op" id="7604187">.</span><span class="ident" id="7604188">Errorf</span><span class="op" id="7604194">(</span><span class="string" id="7604195">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604212">,</span>&nbsp;<span class="op" id="7604214">*</span><span class="ident" id="7604215">got</span><span class="op" id="7604218">,</span>&nbsp;<span class="ident" id="7604220">want</span><span class="op" id="7604224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604231">if</span>&nbsp;<span class="ident" id="7604234">got</span><span class="op" id="7604237">,</span>&nbsp;<span class="ident" id="7604239">want</span>&nbsp;<span class="op" id="7604244">:=</span>&nbsp;<span class="ident" id="7604247">x</span><span class="op" id="7604248">.</span><span class="ident" id="7604249">BV</span><span class="op" id="7604251">,</span>&nbsp;<span class="ident" id="7604253">bv</span><span class="op" id="7604255">;</span>&nbsp;<span class="ident" id="7604257">got</span>&nbsp;<span class="op" id="7604261">!=</span>&nbsp;<span class="ident" id="7604264">want</span>&nbsp;<span class="op" id="7604269">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604273">t</span><span class="op" id="7604274">.</span><span class="ident" id="7604275">Errorf</span><span class="op" id="7604281">(</span><span class="string" id="7604282">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604300">,</span>&nbsp;<span class="ident" id="7604302">got</span><span class="op" id="7604305">,</span>&nbsp;<span class="ident" id="7604307">want</span><span class="op" id="7604311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604317">if</span>&nbsp;<span class="ident" id="7604320">got</span><span class="op" id="7604323">,</span>&nbsp;<span class="ident" id="7604325">want</span>&nbsp;<span class="op" id="7604330">:=</span>&nbsp;<span class="ident" id="7604333">x</span><span class="op" id="7604334">.</span><span class="ident" id="7604335">BW</span><span class="op" id="7604337">,</span>&nbsp;<span class="ident" id="7604339">bw</span><span class="op" id="7604341">;</span>&nbsp;<span class="ident" id="7604343">got</span>&nbsp;<span class="op" id="7604347">==</span>&nbsp;<span class="ident" id="7604350">nil</span>&nbsp;<span class="op" id="7604354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604358">t</span><span class="op" id="7604359">.</span><span class="ident" id="7604360">Errorf</span><span class="op" id="7604366">(</span><span class="string" id="7604367">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604386">,</span>&nbsp;<span class="ident" id="7604388">want</span><span class="op" id="7604392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604395">}</span>&nbsp;<span class="keyword" id="7604397">else</span>&nbsp;<span class="keyword" id="7604402">if</span>&nbsp;<span class="op" id="7604405">*</span><span class="ident" id="7604406">got</span>&nbsp;<span class="op" id="7604410">!=</span>&nbsp;<span class="ident" id="7604413">want</span>&nbsp;<span class="op" id="7604418">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604422">t</span><span class="op" id="7604423">.</span><span class="ident" id="7604424">Errorf</span><span class="op" id="7604430">(</span><span class="string" id="7604431">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604449">,</span>&nbsp;<span class="op" id="7604451">*</span><span class="ident" id="7604452">got</span><span class="op" id="7604455">,</span>&nbsp;<span class="ident" id="7604457">want</span><span class="op" id="7604461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604468">if</span>&nbsp;<span class="ident" id="7604471">got</span><span class="op" id="7604474">,</span>&nbsp;<span class="ident" id="7604476">want</span>&nbsp;<span class="op" id="7604481">:=</span>&nbsp;<span class="ident" id="7604484">x</span><span class="op" id="7604485">.</span><span class="ident" id="7604486">TV</span><span class="op" id="7604488">,</span>&nbsp;<span class="ident" id="7604490">tv</span><span class="op" id="7604492">;</span>&nbsp;<span class="ident" id="7604494">got</span>&nbsp;<span class="op" id="7604498">!=</span>&nbsp;<span class="ident" id="7604501">want</span>&nbsp;<span class="op" id="7604506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604510">t</span><span class="op" id="7604511">.</span><span class="ident" id="7604512">Errorf</span><span class="op" id="7604518">(</span><span class="string" id="7604519">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604537">,</span>&nbsp;<span class="ident" id="7604539">got</span><span class="op" id="7604542">,</span>&nbsp;<span class="ident" id="7604544">want</span><span class="op" id="7604548">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604554">if</span>&nbsp;<span class="ident" id="7604557">got</span><span class="op" id="7604560">,</span>&nbsp;<span class="ident" id="7604562">want</span>&nbsp;<span class="op" id="7604567">:=</span>&nbsp;<span class="ident" id="7604570">x</span><span class="op" id="7604571">.</span><span class="ident" id="7604572">TW</span><span class="op" id="7604574">,</span>&nbsp;<span class="ident" id="7604576">tw</span><span class="op" id="7604578">;</span>&nbsp;<span class="ident" id="7604580">got</span>&nbsp;<span class="op" id="7604584">==</span>&nbsp;<span class="ident" id="7604587">nil</span>&nbsp;<span class="op" id="7604591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604595">t</span><span class="op" id="7604596">.</span><span class="ident" id="7604597">Errorf</span><span class="op" id="7604603">(</span><span class="string" id="7604604">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604623">,</span>&nbsp;<span class="ident" id="7604625">want</span><span class="op" id="7604629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604632">}</span>&nbsp;<span class="keyword" id="7604634">else</span>&nbsp;<span class="keyword" id="7604639">if</span>&nbsp;<span class="op" id="7604642">*</span><span class="ident" id="7604643">got</span>&nbsp;<span class="op" id="7604647">!=</span>&nbsp;<span class="ident" id="7604650">want</span>&nbsp;<span class="op" id="7604655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604659">t</span><span class="op" id="7604660">.</span><span class="ident" id="7604661">Errorf</span><span class="op" id="7604667">(</span><span class="string" id="7604668">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7604686">,</span>&nbsp;<span class="op" id="7604688">*</span><span class="ident" id="7604689">got</span><span class="op" id="7604692">,</span>&nbsp;<span class="ident" id="7604694">want</span><span class="op" id="7604698">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604701">}</span><br>
<span class="lineno"></span><span class="op" id="7604703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7604706">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7604774">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="7604804">func</span>&nbsp;<span class="ident" id="7604809">TestGobEncoderPointerThenValue</span><span class="op" id="7604839">(</span><span class="ident" id="7604840">t</span>&nbsp;<span class="op" id="7604842">*</span><span class="ident" id="7604843">testing</span><span class="op" id="7604850">.</span><span class="ident" id="7604851">T</span><span class="op" id="7604852">)</span>&nbsp;<span class="op" id="7604854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604857">v</span>&nbsp;<span class="op" id="7604859">:=</span>&nbsp;<span class="ident" id="7604862">ValueGobber</span><span class="op" id="7604873">(</span><span class="string" id="7604874">&#34;forty-two&#34;</span><span class="op" id="7604885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604888">w</span>&nbsp;<span class="op" id="7604890">:=</span>&nbsp;<span class="ident" id="7604893">ValueGobber</span><span class="op" id="7604904">(</span><span class="string" id="7604905">&#34;six-by-nine&#34;</span><span class="op" id="7604918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604921">bv</span>&nbsp;<span class="op" id="7604924">:=</span>&nbsp;<span class="ident" id="7604927">BinaryValueGobber</span><span class="op" id="7604944">(</span><span class="string" id="7604945">&#34;1nanocentury&#34;</span><span class="op" id="7604959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604962">bw</span>&nbsp;<span class="op" id="7604965">:=</span>&nbsp;<span class="ident" id="7604968">BinaryValueGobber</span><span class="op" id="7604985">(</span><span class="string" id="7604986">&#34;seconds&#34;</span><span class="op" id="7604997">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605000">tv</span>&nbsp;<span class="op" id="7605003">:=</span>&nbsp;<span class="ident" id="7605006">TextValueGobber</span><span class="op" id="7605021">(</span><span class="string" id="7605022">&#34;gravitationalacceleration&#34;</span><span class="op" id="7605049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605052">tw</span>&nbsp;<span class="op" id="7605055">:=</span>&nbsp;<span class="ident" id="7605058">TextValueGobber</span><span class="op" id="7605073">(</span><span class="string" id="7605074">&#34;ft/s&#34;</span><span class="op" id="7605086">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605090">b</span>&nbsp;<span class="op" id="7605092">:=</span>&nbsp;<span class="builtinfunc" id="7605095">new</span><span class="op" id="7605098">(</span><span class="ident" id="7605099">bytes</span><span class="op" id="7605104">.</span><span class="ident" id="7605105">Buffer</span><span class="op" id="7605111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605114">enc</span>&nbsp;<span class="op" id="7605118">:=</span>&nbsp;<span class="ident" id="7605121">NewEncoder</span><span class="op" id="7605131">(</span><span class="ident" id="7605132">b</span><span class="op" id="7605133">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605136">if</span>&nbsp;<span class="ident" id="7605139">err</span>&nbsp;<span class="op" id="7605143">:=</span>&nbsp;<span class="ident" id="7605146">enc</span><span class="op" id="7605149">.</span><span class="ident" id="7605150">Encode</span><span class="op" id="7605156">(</span><span class="ident" id="7605157">GobTest7</span><span class="op" id="7605165">{</span><span class="num" id="7605166">42</span><span class="op" id="7605168">,</span>&nbsp;<span class="op" id="7605170">&amp;</span><span class="ident" id="7605171">v</span><span class="op" id="7605172">,</span>&nbsp;<span class="ident" id="7605174">w</span><span class="op" id="7605175">,</span>&nbsp;<span class="op" id="7605177">&amp;</span><span class="ident" id="7605178">bv</span><span class="op" id="7605180">,</span>&nbsp;<span class="ident" id="7605182">bw</span><span class="op" id="7605184">,</span>&nbsp;<span class="op" id="7605186">&amp;</span><span class="ident" id="7605187">tv</span><span class="op" id="7605189">,</span>&nbsp;<span class="ident" id="7605191">tw</span><span class="op" id="7605193">}</span><span class="op" id="7605194">)</span><span class="op" id="7605195">;</span>&nbsp;<span class="ident" id="7605197">err</span>&nbsp;<span class="op" id="7605201">!=</span>&nbsp;<span class="ident" id="7605204">nil</span>&nbsp;<span class="op" id="7605208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605212">t</span><span class="op" id="7605213">.</span><span class="ident" id="7605214">Fatal</span><span class="op" id="7605219">(</span><span class="string" id="7605220">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7605235">,</span>&nbsp;<span class="ident" id="7605237">err</span><span class="op" id="7605240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605246">dec</span>&nbsp;<span class="op" id="7605250">:=</span>&nbsp;<span class="ident" id="7605253">NewDecoder</span><span class="op" id="7605263">(</span><span class="ident" id="7605264">b</span><span class="op" id="7605265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605268">x</span>&nbsp;<span class="op" id="7605270">:=</span>&nbsp;<span class="builtinfunc" id="7605273">new</span><span class="op" id="7605276">(</span><span class="ident" id="7605277">GobTest7</span><span class="op" id="7605285">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605288">if</span>&nbsp;<span class="ident" id="7605291">err</span>&nbsp;<span class="op" id="7605295">:=</span>&nbsp;<span class="ident" id="7605298">dec</span><span class="op" id="7605301">.</span><span class="ident" id="7605302">Decode</span><span class="op" id="7605308">(</span><span class="ident" id="7605309">x</span><span class="op" id="7605310">)</span><span class="op" id="7605311">;</span>&nbsp;<span class="ident" id="7605313">err</span>&nbsp;<span class="op" id="7605317">!=</span>&nbsp;<span class="ident" id="7605320">nil</span>&nbsp;<span class="op" id="7605324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605328">t</span><span class="op" id="7605329">.</span><span class="ident" id="7605330">Fatal</span><span class="op" id="7605335">(</span><span class="string" id="7605336">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7605351">,</span>&nbsp;<span class="ident" id="7605353">err</span><span class="op" id="7605356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605363">if</span>&nbsp;<span class="ident" id="7605366">got</span><span class="op" id="7605369">,</span>&nbsp;<span class="ident" id="7605371">want</span>&nbsp;<span class="op" id="7605376">:=</span>&nbsp;<span class="ident" id="7605379">x</span><span class="op" id="7605380">.</span><span class="ident" id="7605381">V</span><span class="op" id="7605382">,</span>&nbsp;<span class="ident" id="7605384">v</span><span class="op" id="7605385">;</span>&nbsp;<span class="ident" id="7605387">got</span>&nbsp;<span class="op" id="7605391">==</span>&nbsp;<span class="ident" id="7605394">nil</span>&nbsp;<span class="op" id="7605398">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605402">t</span><span class="op" id="7605403">.</span><span class="ident" id="7605404">Errorf</span><span class="op" id="7605410">(</span><span class="string" id="7605411">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7605429">,</span>&nbsp;<span class="ident" id="7605431">want</span><span class="op" id="7605435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605438">}</span>&nbsp;<span class="keyword" id="7605440">else</span>&nbsp;<span class="keyword" id="7605445">if</span>&nbsp;<span class="op" id="7605448">*</span><span class="ident" id="7605449">got</span>&nbsp;<span class="op" id="7605453">!=</span>&nbsp;<span class="ident" id="7605456">want</span>&nbsp;<span class="op" id="7605461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605465">t</span><span class="op" id="7605466">.</span><span class="ident" id="7605467">Errorf</span><span class="op" id="7605473">(</span><span class="string" id="7605474">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7605491">,</span>&nbsp;<span class="op" id="7605493">*</span><span class="ident" id="7605494">got</span><span class="op" id="7605497">,</span>&nbsp;<span class="ident" id="7605499">want</span><span class="op" id="7605503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605509">if</span>&nbsp;<span class="ident" id="7605512">got</span><span class="op" id="7605515">,</span>&nbsp;<span class="ident" id="7605517">want</span>&nbsp;<span class="op" id="7605522">:=</span>&nbsp;<span class="ident" id="7605525">x</span><span class="op" id="7605526">.</span><span class="ident" id="7605527">W</span><span class="op" id="7605528">,</span>&nbsp;<span class="ident" id="7605530">w</span><span class="op" id="7605531">;</span>&nbsp;<span class="ident" id="7605533">got</span>&nbsp;<span class="op" id="7605537">!=</span>&nbsp;<span class="ident" id="7605540">want</span>&nbsp;<span class="op" id="7605545">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605549">t</span><span class="op" id="7605550">.</span><span class="ident" id="7605551">Errorf</span><span class="op" id="7605557">(</span><span class="string" id="7605558">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7605575">,</span>&nbsp;<span class="ident" id="7605577">got</span><span class="op" id="7605580">,</span>&nbsp;<span class="ident" id="7605582">want</span><span class="op" id="7605586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605593">if</span>&nbsp;<span class="ident" id="7605596">got</span><span class="op" id="7605599">,</span>&nbsp;<span class="ident" id="7605601">want</span>&nbsp;<span class="op" id="7605606">:=</span>&nbsp;<span class="ident" id="7605609">x</span><span class="op" id="7605610">.</span><span class="ident" id="7605611">BV</span><span class="op" id="7605613">,</span>&nbsp;<span class="ident" id="7605615">bv</span><span class="op" id="7605617">;</span>&nbsp;<span class="ident" id="7605619">got</span>&nbsp;<span class="op" id="7605623">==</span>&nbsp;<span class="ident" id="7605626">nil</span>&nbsp;<span class="op" id="7605630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605634">t</span><span class="op" id="7605635">.</span><span class="ident" id="7605636">Errorf</span><span class="op" id="7605642">(</span><span class="string" id="7605643">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7605662">,</span>&nbsp;<span class="ident" id="7605664">want</span><span class="op" id="7605668">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605671">}</span>&nbsp;<span class="keyword" id="7605673">else</span>&nbsp;<span class="keyword" id="7605678">if</span>&nbsp;<span class="op" id="7605681">*</span><span class="ident" id="7605682">got</span>&nbsp;<span class="op" id="7605686">!=</span>&nbsp;<span class="ident" id="7605689">want</span>&nbsp;<span class="op" id="7605694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605698">t</span><span class="op" id="7605699">.</span><span class="ident" id="7605700">Errorf</span><span class="op" id="7605706">(</span><span class="string" id="7605707">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7605725">,</span>&nbsp;<span class="op" id="7605727">*</span><span class="ident" id="7605728">got</span><span class="op" id="7605731">,</span>&nbsp;<span class="ident" id="7605733">want</span><span class="op" id="7605737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605743">if</span>&nbsp;<span class="ident" id="7605746">got</span><span class="op" id="7605749">,</span>&nbsp;<span class="ident" id="7605751">want</span>&nbsp;<span class="op" id="7605756">:=</span>&nbsp;<span class="ident" id="7605759">x</span><span class="op" id="7605760">.</span><span class="ident" id="7605761">BW</span><span class="op" id="7605763">,</span>&nbsp;<span class="ident" id="7605765">bw</span><span class="op" id="7605767">;</span>&nbsp;<span class="ident" id="7605769">got</span>&nbsp;<span class="op" id="7605773">!=</span>&nbsp;<span class="ident" id="7605776">want</span>&nbsp;<span class="op" id="7605781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605785">t</span><span class="op" id="7605786">.</span><span class="ident" id="7605787">Errorf</span><span class="op" id="7605793">(</span><span class="string" id="7605794">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7605812">,</span>&nbsp;<span class="ident" id="7605814">got</span><span class="op" id="7605817">,</span>&nbsp;<span class="ident" id="7605819">want</span><span class="op" id="7605823">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605830">if</span>&nbsp;<span class="ident" id="7605833">got</span><span class="op" id="7605836">,</span>&nbsp;<span class="ident" id="7605838">want</span>&nbsp;<span class="op" id="7605843">:=</span>&nbsp;<span class="ident" id="7605846">x</span><span class="op" id="7605847">.</span><span class="ident" id="7605848">TV</span><span class="op" id="7605850">,</span>&nbsp;<span class="ident" id="7605852">tv</span><span class="op" id="7605854">;</span>&nbsp;<span class="ident" id="7605856">got</span>&nbsp;<span class="op" id="7605860">==</span>&nbsp;<span class="ident" id="7605863">nil</span>&nbsp;<span class="op" id="7605867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605871">t</span><span class="op" id="7605872">.</span><span class="ident" id="7605873">Errorf</span><span class="op" id="7605879">(</span><span class="string" id="7605880">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7605899">,</span>&nbsp;<span class="ident" id="7605901">want</span><span class="op" id="7605905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605908">}</span>&nbsp;<span class="keyword" id="7605910">else</span>&nbsp;<span class="keyword" id="7605915">if</span>&nbsp;<span class="op" id="7605918">*</span><span class="ident" id="7605919">got</span>&nbsp;<span class="op" id="7605923">!=</span>&nbsp;<span class="ident" id="7605926">want</span>&nbsp;<span class="op" id="7605931">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605935">t</span><span class="op" id="7605936">.</span><span class="ident" id="7605937">Errorf</span><span class="op" id="7605943">(</span><span class="string" id="7605944">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7605962">,</span>&nbsp;<span class="op" id="7605964">*</span><span class="ident" id="7605965">got</span><span class="op" id="7605968">,</span>&nbsp;<span class="ident" id="7605970">want</span><span class="op" id="7605974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605980">if</span>&nbsp;<span class="ident" id="7605983">got</span><span class="op" id="7605986">,</span>&nbsp;<span class="ident" id="7605988">want</span>&nbsp;<span class="op" id="7605993">:=</span>&nbsp;<span class="ident" id="7605996">x</span><span class="op" id="7605997">.</span><span class="ident" id="7605998">TW</span><span class="op" id="7606000">,</span>&nbsp;<span class="ident" id="7606002">tw</span><span class="op" id="7606004">;</span>&nbsp;<span class="ident" id="7606006">got</span>&nbsp;<span class="op" id="7606010">!=</span>&nbsp;<span class="ident" id="7606013">want</span>&nbsp;<span class="op" id="7606018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606022">t</span><span class="op" id="7606023">.</span><span class="ident" id="7606024">Errorf</span><span class="op" id="7606030">(</span><span class="string" id="7606031">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7606049">,</span>&nbsp;<span class="ident" id="7606051">got</span><span class="op" id="7606054">,</span>&nbsp;<span class="ident" id="7606056">want</span><span class="op" id="7606060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606063">}</span><br>
<span class="lineno">535</span><span class="op" id="7606065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7606068">func</span>&nbsp;<span class="ident" id="7606073">TestGobEncoderFieldTypeError</span><span class="op" id="7606101">(</span><span class="ident" id="7606102">t</span>&nbsp;<span class="op" id="7606104">*</span><span class="ident" id="7606105">testing</span><span class="op" id="7606112">.</span><span class="ident" id="7606113">T</span><span class="op" id="7606114">)</span>&nbsp;<span class="op" id="7606116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7606119">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606156">b</span>&nbsp;<span class="op" id="7606158">:=</span>&nbsp;<span class="builtinfunc" id="7606161">new</span><span class="op" id="7606164">(</span><span class="ident" id="7606165">bytes</span><span class="op" id="7606170">.</span><span class="ident" id="7606171">Buffer</span><span class="op" id="7606177">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606180">enc</span>&nbsp;<span class="op" id="7606184">:=</span>&nbsp;<span class="ident" id="7606187">NewEncoder</span><span class="op" id="7606197">(</span><span class="ident" id="7606198">b</span><span class="op" id="7606199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606202">err</span>&nbsp;<span class="op" id="7606206">:=</span>&nbsp;<span class="ident" id="7606209">enc</span><span class="op" id="7606212">.</span><span class="ident" id="7606213">Encode</span><span class="op" id="7606219">(</span><span class="ident" id="7606220">GobTest1</span><span class="op" id="7606228">{</span><span class="num" id="7606229">17</span><span class="op" id="7606231">,</span>&nbsp;<span class="op" id="7606233">&amp;</span><span class="ident" id="7606234">StringStruct</span><span class="op" id="7606246">{</span><span class="string" id="7606247">&#34;ABC&#34;</span><span class="op" id="7606252">}</span><span class="op" id="7606253">}</span><span class="op" id="7606254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606257">if</span>&nbsp;<span class="ident" id="7606260">err</span>&nbsp;<span class="op" id="7606264">!=</span>&nbsp;<span class="ident" id="7606267">nil</span>&nbsp;<span class="op" id="7606271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606275">t</span><span class="op" id="7606276">.</span><span class="ident" id="7606277">Fatal</span><span class="op" id="7606282">(</span><span class="string" id="7606283">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7606298">,</span>&nbsp;<span class="ident" id="7606300">err</span><span class="op" id="7606303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606306">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606309">dec</span>&nbsp;<span class="op" id="7606313">:=</span>&nbsp;<span class="ident" id="7606316">NewDecoder</span><span class="op" id="7606326">(</span><span class="ident" id="7606327">b</span><span class="op" id="7606328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606331">x</span>&nbsp;<span class="op" id="7606333">:=</span>&nbsp;<span class="op" id="7606336">&amp;</span><span class="ident" id="7606337">GobTest2</span><span class="op" id="7606345">{</span><span class="op" id="7606346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606349">err</span>&nbsp;<span class="op" id="7606353">=</span>&nbsp;<span class="ident" id="7606355">dec</span><span class="op" id="7606358">.</span><span class="ident" id="7606359">Decode</span><span class="op" id="7606365">(</span><span class="ident" id="7606366">x</span><span class="op" id="7606367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606370">if</span>&nbsp;<span class="ident" id="7606373">err</span>&nbsp;<span class="op" id="7606377">==</span>&nbsp;<span class="ident" id="7606380">nil</span>&nbsp;<span class="op" id="7606384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606388">t</span><span class="op" id="7606389">.</span><span class="ident" id="7606390">Fatal</span><span class="op" id="7606395">(</span><span class="string" id="7606396">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="7606466">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606472">if</span>&nbsp;<span class="ident" id="7606475">strings</span><span class="op" id="7606482">.</span><span class="ident" id="7606483">Index</span><span class="op" id="7606488">(</span><span class="ident" id="7606489">err</span><span class="op" id="7606492">.</span><span class="ident" id="7606493">Error</span><span class="op" id="7606498">(</span><span class="op" id="7606499">)</span><span class="op" id="7606500">,</span>&nbsp;<span class="string" id="7606502">&#34;type&#34;</span><span class="op" id="7606508">)</span>&nbsp;<span class="op" id="7606510">&lt;</span>&nbsp;<span class="num" id="7606512">0</span>&nbsp;<span class="op" id="7606514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606518">t</span><span class="op" id="7606519">.</span><span class="ident" id="7606520">Fatal</span><span class="op" id="7606525">(</span><span class="string" id="7606526">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7606552">,</span>&nbsp;<span class="ident" id="7606554">err</span><span class="op" id="7606557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7606563">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606600">b</span><span class="op" id="7606601">.</span><span class="ident" id="7606602">Reset</span><span class="op" id="7606607">(</span><span class="op" id="7606608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606611">err</span>&nbsp;<span class="op" id="7606615">=</span>&nbsp;<span class="ident" id="7606617">enc</span><span class="op" id="7606620">.</span><span class="ident" id="7606621">Encode</span><span class="op" id="7606627">(</span><span class="ident" id="7606628">GobTest2</span><span class="op" id="7606636">{</span><span class="num" id="7606637">17</span><span class="op" id="7606639">,</span>&nbsp;<span class="string" id="7606641">&#34;ABC&#34;</span><span class="op" id="7606646">}</span><span class="op" id="7606647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606650">if</span>&nbsp;<span class="ident" id="7606653">err</span>&nbsp;<span class="op" id="7606657">!=</span>&nbsp;<span class="ident" id="7606660">nil</span>&nbsp;<span class="op" id="7606664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606668">t</span><span class="op" id="7606669">.</span><span class="ident" id="7606670">Fatal</span><span class="op" id="7606675">(</span><span class="string" id="7606676">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7606691">,</span>&nbsp;<span class="ident" id="7606693">err</span><span class="op" id="7606696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606699">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606702">y</span>&nbsp;<span class="op" id="7606704">:=</span>&nbsp;<span class="op" id="7606707">&amp;</span><span class="ident" id="7606708">GobTest1</span><span class="op" id="7606716">{</span><span class="op" id="7606717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606720">err</span>&nbsp;<span class="op" id="7606724">=</span>&nbsp;<span class="ident" id="7606726">dec</span><span class="op" id="7606729">.</span><span class="ident" id="7606730">Decode</span><span class="op" id="7606736">(</span><span class="ident" id="7606737">y</span><span class="op" id="7606738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606741">if</span>&nbsp;<span class="ident" id="7606744">err</span>&nbsp;<span class="op" id="7606748">==</span>&nbsp;<span class="ident" id="7606751">nil</span>&nbsp;<span class="op" id="7606755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606759">t</span><span class="op" id="7606760">.</span><span class="ident" id="7606761">Fatal</span><span class="op" id="7606766">(</span><span class="string" id="7606767">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="7606837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606840">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606843">if</span>&nbsp;<span class="ident" id="7606846">strings</span><span class="op" id="7606853">.</span><span class="ident" id="7606854">Index</span><span class="op" id="7606859">(</span><span class="ident" id="7606860">err</span><span class="op" id="7606863">.</span><span class="ident" id="7606864">Error</span><span class="op" id="7606869">(</span><span class="op" id="7606870">)</span><span class="op" id="7606871">,</span>&nbsp;<span class="string" id="7606873">&#34;type&#34;</span><span class="op" id="7606879">)</span>&nbsp;<span class="op" id="7606881">&lt;</span>&nbsp;<span class="num" id="7606883">0</span>&nbsp;<span class="op" id="7606885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606889">t</span><span class="op" id="7606890">.</span><span class="ident" id="7606891">Fatal</span><span class="op" id="7606896">(</span><span class="string" id="7606897">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7606923">,</span>&nbsp;<span class="ident" id="7606925">err</span><span class="op" id="7606928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606931">}</span><br>
<span class="lineno"></span><span class="op" id="7606933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="7606936">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="7607021">func</span>&nbsp;<span class="ident" id="7607026">TestGobEncoderStructSingleton</span><span class="op" id="7607055">(</span><span class="ident" id="7607056">t</span>&nbsp;<span class="op" id="7607058">*</span><span class="ident" id="7607059">testing</span><span class="op" id="7607066">.</span><span class="ident" id="7607067">T</span><span class="op" id="7607068">)</span>&nbsp;<span class="op" id="7607070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607073">b</span>&nbsp;<span class="op" id="7607075">:=</span>&nbsp;<span class="builtinfunc" id="7607078">new</span><span class="op" id="7607081">(</span><span class="ident" id="7607082">bytes</span><span class="op" id="7607087">.</span><span class="ident" id="7607088">Buffer</span><span class="op" id="7607094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607097">enc</span>&nbsp;<span class="op" id="7607101">:=</span>&nbsp;<span class="ident" id="7607104">NewEncoder</span><span class="op" id="7607114">(</span><span class="ident" id="7607115">b</span><span class="op" id="7607116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607119">err</span>&nbsp;<span class="op" id="7607123">:=</span>&nbsp;<span class="ident" id="7607126">enc</span><span class="op" id="7607129">.</span><span class="ident" id="7607130">Encode</span><span class="op" id="7607136">(</span><span class="op" id="7607137">&amp;</span><span class="ident" id="7607138">ByteStruct</span><span class="op" id="7607148">{</span><span class="string" id="7607149">&#39;A&#39;</span><span class="op" id="7607152">}</span><span class="op" id="7607153">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607156">if</span>&nbsp;<span class="ident" id="7607159">err</span>&nbsp;<span class="op" id="7607163">!=</span>&nbsp;<span class="ident" id="7607166">nil</span>&nbsp;<span class="op" id="7607170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607174">t</span><span class="op" id="7607175">.</span><span class="ident" id="7607176">Fatal</span><span class="op" id="7607181">(</span><span class="string" id="7607182">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7607197">,</span>&nbsp;<span class="ident" id="7607199">err</span><span class="op" id="7607202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607208">dec</span>&nbsp;<span class="op" id="7607212">:=</span>&nbsp;<span class="ident" id="7607215">NewDecoder</span><span class="op" id="7607225">(</span><span class="ident" id="7607226">b</span><span class="op" id="7607227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607230">x</span>&nbsp;<span class="op" id="7607232">:=</span>&nbsp;<span class="builtinfunc" id="7607235">new</span><span class="op" id="7607238">(</span><span class="ident" id="7607239">ByteStruct</span><span class="op" id="7607249">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607252">err</span>&nbsp;<span class="op" id="7607256">=</span>&nbsp;<span class="ident" id="7607258">dec</span><span class="op" id="7607261">.</span><span class="ident" id="7607262">Decode</span><span class="op" id="7607268">(</span><span class="ident" id="7607269">x</span><span class="op" id="7607270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607273">if</span>&nbsp;<span class="ident" id="7607276">err</span>&nbsp;<span class="op" id="7607280">!=</span>&nbsp;<span class="ident" id="7607283">nil</span>&nbsp;<span class="op" id="7607287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607291">t</span><span class="op" id="7607292">.</span><span class="ident" id="7607293">Fatal</span><span class="op" id="7607298">(</span><span class="string" id="7607299">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7607314">,</span>&nbsp;<span class="ident" id="7607316">err</span><span class="op" id="7607319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607325">if</span>&nbsp;<span class="ident" id="7607328">x</span><span class="op" id="7607329">.</span><span class="ident" id="7607330">a</span>&nbsp;<span class="op" id="7607332">!=</span>&nbsp;<span class="string" id="7607335">&#39;A&#39;</span>&nbsp;<span class="op" id="7607339">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607343">t</span><span class="op" id="7607344">.</span><span class="ident" id="7607345">Errorf</span><span class="op" id="7607351">(</span><span class="string" id="7607352">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7607373">,</span>&nbsp;<span class="ident" id="7607375">x</span><span class="op" id="7607376">.</span><span class="ident" id="7607377">a</span><span class="op" id="7607378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607381">}</span><br>
<span class="lineno"></span><span class="op" id="7607383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7607386">func</span>&nbsp;<span class="ident" id="7607391">TestGobEncoderNonStructSingleton</span><span class="op" id="7607423">(</span><span class="ident" id="7607424">t</span>&nbsp;<span class="op" id="7607426">*</span><span class="ident" id="7607427">testing</span><span class="op" id="7607434">.</span><span class="ident" id="7607435">T</span><span class="op" id="7607436">)</span>&nbsp;<span class="op" id="7607438">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607441">b</span>&nbsp;<span class="op" id="7607443">:=</span>&nbsp;<span class="builtinfunc" id="7607446">new</span><span class="op" id="7607449">(</span><span class="ident" id="7607450">bytes</span><span class="op" id="7607455">.</span><span class="ident" id="7607456">Buffer</span><span class="op" id="7607462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607465">enc</span>&nbsp;<span class="op" id="7607469">:=</span>&nbsp;<span class="ident" id="7607472">NewEncoder</span><span class="op" id="7607482">(</span><span class="ident" id="7607483">b</span><span class="op" id="7607484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607487">var</span>&nbsp;<span class="ident" id="7607491">g</span>&nbsp;<span class="ident" id="7607493">Gobber</span>&nbsp;<span class="op" id="7607500">=</span>&nbsp;<span class="num" id="7607502">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607508">err</span>&nbsp;<span class="op" id="7607512">:=</span>&nbsp;<span class="ident" id="7607515">enc</span><span class="op" id="7607518">.</span><span class="ident" id="7607519">Encode</span><span class="op" id="7607525">(</span><span class="op" id="7607526">&amp;</span><span class="ident" id="7607527">g</span><span class="op" id="7607528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607531">if</span>&nbsp;<span class="ident" id="7607534">err</span>&nbsp;<span class="op" id="7607538">!=</span>&nbsp;<span class="ident" id="7607541">nil</span>&nbsp;<span class="op" id="7607545">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607549">t</span><span class="op" id="7607550">.</span><span class="ident" id="7607551">Fatal</span><span class="op" id="7607556">(</span><span class="string" id="7607557">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7607572">,</span>&nbsp;<span class="ident" id="7607574">err</span><span class="op" id="7607577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607583">dec</span>&nbsp;<span class="op" id="7607587">:=</span>&nbsp;<span class="ident" id="7607590">NewDecoder</span><span class="op" id="7607600">(</span><span class="ident" id="7607601">b</span><span class="op" id="7607602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607605">var</span>&nbsp;<span class="ident" id="7607609">x</span>&nbsp;<span class="ident" id="7607611">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607619">err</span>&nbsp;<span class="op" id="7607623">=</span>&nbsp;<span class="ident" id="7607625">dec</span><span class="op" id="7607628">.</span><span class="ident" id="7607629">Decode</span><span class="op" id="7607635">(</span><span class="op" id="7607636">&amp;</span><span class="ident" id="7607637">x</span><span class="op" id="7607638">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607641">if</span>&nbsp;<span class="ident" id="7607644">err</span>&nbsp;<span class="op" id="7607648">!=</span>&nbsp;<span class="ident" id="7607651">nil</span>&nbsp;<span class="op" id="7607655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607659">t</span><span class="op" id="7607660">.</span><span class="ident" id="7607661">Fatal</span><span class="op" id="7607666">(</span><span class="string" id="7607667">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7607682">,</span>&nbsp;<span class="ident" id="7607684">err</span><span class="op" id="7607687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607693">if</span>&nbsp;<span class="ident" id="7607696">x</span>&nbsp;<span class="op" id="7607698">!=</span>&nbsp;<span class="num" id="7607701">1234</span>&nbsp;<span class="op" id="7607706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607710">t</span><span class="op" id="7607711">.</span><span class="ident" id="7607712">Errorf</span><span class="op" id="7607718">(</span><span class="string" id="7607719">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7607741">,</span>&nbsp;<span class="ident" id="7607743">x</span><span class="op" id="7607744">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607747">}</span><br>
<span class="lineno"></span><span class="op" id="7607749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7607752">func</span>&nbsp;<span class="ident" id="7607757">TestGobEncoderIgnoreStructField</span><span class="op" id="7607788">(</span><span class="ident" id="7607789">t</span>&nbsp;<span class="op" id="7607791">*</span><span class="ident" id="7607792">testing</span><span class="op" id="7607799">.</span><span class="ident" id="7607800">T</span><span class="op" id="7607801">)</span>&nbsp;<span class="op" id="7607803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607806">b</span>&nbsp;<span class="op" id="7607808">:=</span>&nbsp;<span class="builtinfunc" id="7607811">new</span><span class="op" id="7607814">(</span><span class="ident" id="7607815">bytes</span><span class="op" id="7607820">.</span><span class="ident" id="7607821">Buffer</span><span class="op" id="7607827">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7607830">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607868">enc</span>&nbsp;<span class="op" id="7607872">:=</span>&nbsp;<span class="ident" id="7607875">NewEncoder</span><span class="op" id="7607885">(</span><span class="ident" id="7607886">b</span><span class="op" id="7607887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607890">err</span>&nbsp;<span class="op" id="7607894">:=</span>&nbsp;<span class="ident" id="7607897">enc</span><span class="op" id="7607900">.</span><span class="ident" id="7607901">Encode</span><span class="op" id="7607907">(</span><span class="ident" id="7607908">GobTest0</span><span class="op" id="7607916">{</span><span class="num" id="7607917">17</span><span class="op" id="7607919">,</span>&nbsp;<span class="op" id="7607921">&amp;</span><span class="ident" id="7607922">ByteStruct</span><span class="op" id="7607932">{</span><span class="string" id="7607933">&#39;A&#39;</span><span class="op" id="7607936">}</span><span class="op" id="7607937">}</span><span class="op" id="7607938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607941">if</span>&nbsp;<span class="ident" id="7607944">err</span>&nbsp;<span class="op" id="7607948">!=</span>&nbsp;<span class="ident" id="7607951">nil</span>&nbsp;<span class="op" id="7607955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607959">t</span><span class="op" id="7607960">.</span><span class="ident" id="7607961">Fatal</span><span class="op" id="7607966">(</span><span class="string" id="7607967">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7607982">,</span>&nbsp;<span class="ident" id="7607984">err</span><span class="op" id="7607987">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607993">dec</span>&nbsp;<span class="op" id="7607997">:=</span>&nbsp;<span class="ident" id="7608000">NewDecoder</span><span class="op" id="7608010">(</span><span class="ident" id="7608011">b</span><span class="op" id="7608012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608015">x</span>&nbsp;<span class="op" id="7608017">:=</span>&nbsp;<span class="builtinfunc" id="7608020">new</span><span class="op" id="7608023">(</span><span class="ident" id="7608024">GobTestIgnoreEncoder</span><span class="op" id="7608044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608047">err</span>&nbsp;<span class="op" id="7608051">=</span>&nbsp;<span class="ident" id="7608053">dec</span><span class="op" id="7608056">.</span><span class="ident" id="7608057">Decode</span><span class="op" id="7608063">(</span><span class="ident" id="7608064">x</span><span class="op" id="7608065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608068">if</span>&nbsp;<span class="ident" id="7608071">err</span>&nbsp;<span class="op" id="7608075">!=</span>&nbsp;<span class="ident" id="7608078">nil</span>&nbsp;<span class="op" id="7608082">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608086">t</span><span class="op" id="7608087">.</span><span class="ident" id="7608088">Fatal</span><span class="op" id="7608093">(</span><span class="string" id="7608094">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7608109">,</span>&nbsp;<span class="ident" id="7608111">err</span><span class="op" id="7608114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608120">if</span>&nbsp;<span class="ident" id="7608123">x</span><span class="op" id="7608124">.</span><span class="ident" id="7608125">X</span>&nbsp;<span class="op" id="7608127">!=</span>&nbsp;<span class="num" id="7608130">17</span>&nbsp;<span class="op" id="7608133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608137">t</span><span class="op" id="7608138">.</span><span class="ident" id="7608139">Errorf</span><span class="op" id="7608145">(</span><span class="string" id="7608146">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7608166">,</span>&nbsp;<span class="ident" id="7608168">x</span><span class="op" id="7608169">.</span><span class="ident" id="7608170">X</span><span class="op" id="7608171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608174">}</span><br>
<span class="lineno">625</span><span class="op" id="7608176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608179">func</span>&nbsp;<span class="ident" id="7608184">TestGobEncoderIgnoreNonStructField</span><span class="op" id="7608218">(</span><span class="ident" id="7608219">t</span>&nbsp;<span class="op" id="7608221">*</span><span class="ident" id="7608222">testing</span><span class="op" id="7608229">.</span><span class="ident" id="7608230">T</span><span class="op" id="7608231">)</span>&nbsp;<span class="op" id="7608233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608236">b</span>&nbsp;<span class="op" id="7608238">:=</span>&nbsp;<span class="builtinfunc" id="7608241">new</span><span class="op" id="7608244">(</span><span class="ident" id="7608245">bytes</span><span class="op" id="7608250">.</span><span class="ident" id="7608251">Buffer</span><span class="op" id="7608257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7608260">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608298">enc</span>&nbsp;<span class="op" id="7608302">:=</span>&nbsp;<span class="ident" id="7608305">NewEncoder</span><span class="op" id="7608315">(</span><span class="ident" id="7608316">b</span><span class="op" id="7608317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608320">gobber</span>&nbsp;<span class="op" id="7608327">:=</span>&nbsp;<span class="ident" id="7608330">Gobber</span><span class="op" id="7608336">(</span><span class="num" id="7608337">23</span><span class="op" id="7608339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608342">bgobber</span>&nbsp;<span class="op" id="7608350">:=</span>&nbsp;<span class="ident" id="7608353">BinaryGobber</span><span class="op" id="7608365">(</span><span class="num" id="7608366">24</span><span class="op" id="7608368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608371">tgobber</span>&nbsp;<span class="op" id="7608379">:=</span>&nbsp;<span class="ident" id="7608382">TextGobber</span><span class="op" id="7608392">(</span><span class="num" id="7608393">25</span><span class="op" id="7608395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608398">err</span>&nbsp;<span class="op" id="7608402">:=</span>&nbsp;<span class="ident" id="7608405">enc</span><span class="op" id="7608408">.</span><span class="ident" id="7608409">Encode</span><span class="op" id="7608415">(</span><span class="ident" id="7608416">GobTest3</span><span class="op" id="7608424">{</span><span class="num" id="7608425">17</span><span class="op" id="7608427">,</span>&nbsp;<span class="op" id="7608429">&amp;</span><span class="ident" id="7608430">gobber</span><span class="op" id="7608436">,</span>&nbsp;<span class="op" id="7608438">&amp;</span><span class="ident" id="7608439">bgobber</span><span class="op" id="7608446">,</span>&nbsp;<span class="op" id="7608448">&amp;</span><span class="ident" id="7608449">tgobber</span><span class="op" id="7608456">}</span><span class="op" id="7608457">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608460">if</span>&nbsp;<span class="ident" id="7608463">err</span>&nbsp;<span class="op" id="7608467">!=</span>&nbsp;<span class="ident" id="7608470">nil</span>&nbsp;<span class="op" id="7608474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608478">t</span><span class="op" id="7608479">.</span><span class="ident" id="7608480">Fatal</span><span class="op" id="7608485">(</span><span class="string" id="7608486">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7608501">,</span>&nbsp;<span class="ident" id="7608503">err</span><span class="op" id="7608506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608512">dec</span>&nbsp;<span class="op" id="7608516">:=</span>&nbsp;<span class="ident" id="7608519">NewDecoder</span><span class="op" id="7608529">(</span><span class="ident" id="7608530">b</span><span class="op" id="7608531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608534">x</span>&nbsp;<span class="op" id="7608536">:=</span>&nbsp;<span class="builtinfunc" id="7608539">new</span><span class="op" id="7608542">(</span><span class="ident" id="7608543">GobTestIgnoreEncoder</span><span class="op" id="7608563">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608566">err</span>&nbsp;<span class="op" id="7608570">=</span>&nbsp;<span class="ident" id="7608572">dec</span><span class="op" id="7608575">.</span><span class="ident" id="7608576">Decode</span><span class="op" id="7608582">(</span><span class="ident" id="7608583">x</span><span class="op" id="7608584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608587">if</span>&nbsp;<span class="ident" id="7608590">err</span>&nbsp;<span class="op" id="7608594">!=</span>&nbsp;<span class="ident" id="7608597">nil</span>&nbsp;<span class="op" id="7608601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608605">t</span><span class="op" id="7608606">.</span><span class="ident" id="7608607">Fatal</span><span class="op" id="7608612">(</span><span class="string" id="7608613">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7608628">,</span>&nbsp;<span class="ident" id="7608630">err</span><span class="op" id="7608633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608639">if</span>&nbsp;<span class="ident" id="7608642">x</span><span class="op" id="7608643">.</span><span class="ident" id="7608644">X</span>&nbsp;<span class="op" id="7608646">!=</span>&nbsp;<span class="num" id="7608649">17</span>&nbsp;<span class="op" id="7608652">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608656">t</span><span class="op" id="7608657">.</span><span class="ident" id="7608658">Errorf</span><span class="op" id="7608664">(</span><span class="string" id="7608665">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7608685">,</span>&nbsp;<span class="ident" id="7608687">x</span><span class="op" id="7608688">.</span><span class="ident" id="7608689">X</span><span class="op" id="7608690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608693">}</span><br>
<span class="lineno"></span><span class="op" id="7608695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608698">func</span>&nbsp;<span class="ident" id="7608703">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="7608733">(</span><span class="ident" id="7608734">t</span>&nbsp;<span class="op" id="7608736">*</span><span class="ident" id="7608737">testing</span><span class="op" id="7608744">.</span><span class="ident" id="7608745">T</span><span class="op" id="7608746">)</span>&nbsp;<span class="op" id="7608748">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608751">b</span>&nbsp;<span class="op" id="7608753">:=</span>&nbsp;<span class="builtinfunc" id="7608756">new</span><span class="op" id="7608759">(</span><span class="ident" id="7608760">bytes</span><span class="op" id="7608765">.</span><span class="ident" id="7608766">Buffer</span><span class="op" id="7608772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7608775">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608813">enc</span>&nbsp;<span class="op" id="7608817">:=</span>&nbsp;<span class="ident" id="7608820">NewEncoder</span><span class="op" id="7608830">(</span><span class="ident" id="7608831">b</span><span class="op" id="7608832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608835">err</span>&nbsp;<span class="op" id="7608839">:=</span>&nbsp;<span class="ident" id="7608842">enc</span><span class="op" id="7608845">.</span><span class="ident" id="7608846">Encode</span><span class="op" id="7608852">(</span><span class="ident" id="7608853">GobTest0</span><span class="op" id="7608861">{</span><span class="ident" id="7608862">X</span><span class="op" id="7608863">:</span>&nbsp;<span class="num" id="7608865">18</span><span class="op" id="7608867">}</span><span class="op" id="7608868">)</span>&nbsp;<span class="comment" id="7608870">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608883">if</span>&nbsp;<span class="ident" id="7608886">err</span>&nbsp;<span class="op" id="7608890">!=</span>&nbsp;<span class="ident" id="7608893">nil</span>&nbsp;<span class="op" id="7608897">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608901">t</span><span class="op" id="7608902">.</span><span class="ident" id="7608903">Fatal</span><span class="op" id="7608908">(</span><span class="string" id="7608909">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7608924">,</span>&nbsp;<span class="ident" id="7608926">err</span><span class="op" id="7608929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608935">dec</span>&nbsp;<span class="op" id="7608939">:=</span>&nbsp;<span class="ident" id="7608942">NewDecoder</span><span class="op" id="7608952">(</span><span class="ident" id="7608953">b</span><span class="op" id="7608954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608957">x</span>&nbsp;<span class="op" id="7608959">:=</span>&nbsp;<span class="builtinfunc" id="7608962">new</span><span class="op" id="7608965">(</span><span class="ident" id="7608966">GobTest0</span><span class="op" id="7608974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608977">err</span>&nbsp;<span class="op" id="7608981">=</span>&nbsp;<span class="ident" id="7608983">dec</span><span class="op" id="7608986">.</span><span class="ident" id="7608987">Decode</span><span class="op" id="7608993">(</span><span class="ident" id="7608994">x</span><span class="op" id="7608995">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608998">if</span>&nbsp;<span class="ident" id="7609001">err</span>&nbsp;<span class="op" id="7609005">!=</span>&nbsp;<span class="ident" id="7609008">nil</span>&nbsp;<span class="op" id="7609012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609016">t</span><span class="op" id="7609017">.</span><span class="ident" id="7609018">Fatal</span><span class="op" id="7609023">(</span><span class="string" id="7609024">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7609039">,</span>&nbsp;<span class="ident" id="7609041">err</span><span class="op" id="7609044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7609047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609050">if</span>&nbsp;<span class="ident" id="7609053">x</span><span class="op" id="7609054">.</span><span class="ident" id="7609055">X</span>&nbsp;<span class="op" id="7609057">!=</span>&nbsp;<span class="num" id="7609060">18</span>&nbsp;<span class="op" id="7609063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609067">t</span><span class="op" id="7609068">.</span><span class="ident" id="7609069">Errorf</span><span class="op" id="7609075">(</span><span class="string" id="7609076">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7609103">,</span>&nbsp;<span class="ident" id="7609105">x</span><span class="op" id="7609106">.</span><span class="ident" id="7609107">X</span><span class="op" id="7609108">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7609111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609114">if</span>&nbsp;<span class="ident" id="7609117">x</span><span class="op" id="7609118">.</span><span class="ident" id="7609119">G</span>&nbsp;<span class="op" id="7609121">!=</span>&nbsp;<span class="ident" id="7609124">nil</span>&nbsp;<span class="op" id="7609128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609132">t</span><span class="op" id="7609133">.</span><span class="ident" id="7609134">Errorf</span><span class="op" id="7609140">(</span><span class="string" id="7609141">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7609169">,</span>&nbsp;<span class="ident" id="7609171">x</span><span class="op" id="7609172">.</span><span class="ident" id="7609173">G</span><span class="op" id="7609174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7609177">}</span><br>
<span class="lineno"></span><span class="op" id="7609179">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="7609182">type</span>&nbsp;<span class="ident" id="7609187">gobDecoderBug0</span>&nbsp;<span class="keyword" id="7609202">struct</span>&nbsp;<span class="op" id="7609209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609212">foo</span><span class="op" id="7609215">,</span>&nbsp;<span class="ident" id="7609217">bar</span>&nbsp;<span class="builtintype" id="7609221">string</span><br>
<span class="lineno"></span><span class="op" id="7609228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7609231">func</span>&nbsp;<span class="op" id="7609236">(</span><span class="ident" id="7609237">br</span>&nbsp;<span class="op" id="7609240">*</span><span class="ident" id="7609241">gobDecoderBug0</span><span class="op" id="7609255">)</span>&nbsp;<span class="ident" id="7609257">String</span><span class="op" id="7609263">(</span><span class="op" id="7609264">)</span>&nbsp;<span class="builtintype" id="7609266">string</span>&nbsp;<span class="op" id="7609273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609276">return</span>&nbsp;<span class="ident" id="7609283">br</span><span class="op" id="7609285">.</span><span class="ident" id="7609286">foo</span>&nbsp;<span class="op" id="7609290">+</span>&nbsp;<span class="string" id="7609292">&#34;-&#34;</span>&nbsp;<span class="op" id="7609296">+</span>&nbsp;<span class="ident" id="7609298">br</span><span class="op" id="7609300">.</span><span class="ident" id="7609301">bar</span><br>
<span class="lineno"></span><span class="op" id="7609305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7609308">func</span>&nbsp;<span class="op" id="7609313">(</span><span class="ident" id="7609314">br</span>&nbsp;<span class="op" id="7609317">*</span><span class="ident" id="7609318">gobDecoderBug0</span><span class="op" id="7609332">)</span>&nbsp;<span class="ident" id="7609334">GobEncode</span><span class="op" id="7609343">(</span><span class="op" id="7609344">)</span>&nbsp;<span class="op" id="7609346">(</span><span class="op" id="7609347">[</span><span class="op" id="7609348">]</span><span class="builtintype" id="7609349">byte</span><span class="op" id="7609353">,</span>&nbsp;<span class="builtintype" id="7609355">error</span><span class="op" id="7609360">)</span>&nbsp;<span class="op" id="7609362">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609365">return</span>&nbsp;<span class="op" id="7609372">[</span><span class="op" id="7609373">]</span><span class="builtintype" id="7609374">byte</span><span class="op" id="7609378">(</span><span class="ident" id="7609379">br</span><span class="op" id="7609381">.</span><span class="ident" id="7609382">String</span><span class="op" id="7609388">(</span><span class="op" id="7609389">)</span><span class="op" id="7609390">)</span><span class="op" id="7609391">,</span>&nbsp;<span class="ident" id="7609393">nil</span><br>
<span class="lineno"></span><span class="op" id="7609397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7609400">func</span>&nbsp;<span class="op" id="7609405">(</span><span class="ident" id="7609406">br</span>&nbsp;<span class="op" id="7609409">*</span><span class="ident" id="7609410">gobDecoderBug0</span><span class="op" id="7609424">)</span>&nbsp;<span class="ident" id="7609426">GobDecode</span><span class="op" id="7609435">(</span><span class="ident" id="7609436">b</span>&nbsp;<span class="op" id="7609438">[</span><span class="op" id="7609439">]</span><span class="builtintype" id="7609440">byte</span><span class="op" id="7609444">)</span>&nbsp;<span class="builtintype" id="7609446">error</span>&nbsp;<span class="op" id="7609452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609455">br</span><span class="op" id="7609457">.</span><span class="ident" id="7609458">foo</span>&nbsp;<span class="op" id="7609462">=</span>&nbsp;<span class="string" id="7609464">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609471">br</span><span class="op" id="7609473">.</span><span class="ident" id="7609474">bar</span>&nbsp;<span class="op" id="7609478">=</span>&nbsp;<span class="string" id="7609480">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609487">return</span>&nbsp;<span class="ident" id="7609494">nil</span><br>
<span class="lineno"></span><span class="op" id="7609498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7609501">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="7609567">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="7609589">func</span>&nbsp;<span class="ident" id="7609594">TestGobEncoderExtraIndirect</span><span class="op" id="7609621">(</span><span class="ident" id="7609622">t</span>&nbsp;<span class="op" id="7609624">*</span><span class="ident" id="7609625">testing</span><span class="op" id="7609632">.</span><span class="ident" id="7609633">T</span><span class="op" id="7609634">)</span>&nbsp;<span class="op" id="7609636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609639">gdb</span>&nbsp;<span class="op" id="7609643">:=</span>&nbsp;<span class="op" id="7609646">&amp;</span><span class="ident" id="7609647">gobDecoderBug0</span><span class="op" id="7609661">{</span><span class="string" id="7609662">&#34;foo&#34;</span><span class="op" id="7609667">,</span>&nbsp;<span class="string" id="7609669">&#34;bar&#34;</span><span class="op" id="7609674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609677">buf</span>&nbsp;<span class="op" id="7609681">:=</span>&nbsp;<span class="builtinfunc" id="7609684">new</span><span class="op" id="7609687">(</span><span class="ident" id="7609688">bytes</span><span class="op" id="7609693">.</span><span class="ident" id="7609694">Buffer</span><span class="op" id="7609700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609703">e</span>&nbsp;<span class="op" id="7609705">:=</span>&nbsp;<span class="ident" id="7609708">NewEncoder</span><span class="op" id="7609718">(</span><span class="ident" id="7609719">buf</span><span class="op" id="7609722">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609725">if</span>&nbsp;<span class="ident" id="7609728">err</span>&nbsp;<span class="op" id="7609732">:=</span>&nbsp;<span class="ident" id="7609735">e</span><span class="op" id="7609736">.</span><span class="ident" id="7609737">Encode</span><span class="op" id="7609743">(</span><span class="ident" id="7609744">gdb</span><span class="op" id="7609747">)</span><span class="op" id="7609748">;</span>&nbsp;<span class="ident" id="7609750">err</span>&nbsp;<span class="op" id="7609754">!=</span>&nbsp;<span class="ident" id="7609757">nil</span>&nbsp;<span class="op" id="7609761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609765">t</span><span class="op" id="7609766">.</span><span class="ident" id="7609767">Fatalf</span><span class="op" id="7609773">(</span><span class="string" id="7609774">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="7609786">,</span>&nbsp;<span class="ident" id="7609788">err</span><span class="op" id="7609791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7609794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609797">d</span>&nbsp;<span class="op" id="7609799">:=</span>&nbsp;<span class="ident" id="7609802">NewDecoder</span><span class="op" id="7609812">(</span><span class="ident" id="7609813">buf</span><span class="op" id="7609816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609819">var</span>&nbsp;<span class="ident" id="7609823">got</span>&nbsp;<span class="op" id="7609827">*</span><span class="ident" id="7609828">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609844">if</span>&nbsp;<span class="ident" id="7609847">err</span>&nbsp;<span class="op" id="7609851">:=</span>&nbsp;<span class="ident" id="7609854">d</span><span class="op" id="7609855">.</span><span class="ident" id="7609856">Decode</span><span class="op" id="7609862">(</span><span class="op" id="7609863">&amp;</span><span class="ident" id="7609864">got</span><span class="op" id="7609867">)</span><span class="op" id="7609868">;</span>&nbsp;<span class="ident" id="7609870">err</span>&nbsp;<span class="op" id="7609874">!=</span>&nbsp;<span class="ident" id="7609877">nil</span>&nbsp;<span class="op" id="7609881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609885">t</span><span class="op" id="7609886">.</span><span class="ident" id="7609887">Fatalf</span><span class="op" id="7609893">(</span><span class="string" id="7609894">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7609906">,</span>&nbsp;<span class="ident" id="7609908">err</span><span class="op" id="7609911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7609914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7609917">if</span>&nbsp;<span class="ident" id="7609920">got</span><span class="op" id="7609923">.</span><span class="ident" id="7609924">foo</span>&nbsp;<span class="op" id="7609928">!=</span>&nbsp;<span class="ident" id="7609931">gdb</span><span class="op" id="7609934">.</span><span class="ident" id="7609935">foo</span>&nbsp;<span class="op" id="7609939">||</span>&nbsp;<span class="ident" id="7609942">got</span><span class="op" id="7609945">.</span><span class="ident" id="7609946">bar</span>&nbsp;<span class="op" id="7609950">!=</span>&nbsp;<span class="ident" id="7609953">gdb</span><span class="op" id="7609956">.</span><span class="ident" id="7609957">bar</span>&nbsp;<span class="op" id="7609961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7609965">t</span><span class="op" id="7609966">.</span><span class="ident" id="7609967">Errorf</span><span class="op" id="7609973">(</span><span class="string" id="7609974">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7609993">,</span>&nbsp;<span class="ident" id="7609995">got</span><span class="op" id="7609998">,</span>&nbsp;<span class="ident" id="7610000">gdb</span><span class="op" id="7610003">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7610006">}</span><br>
<span class="lineno"></span><span class="op" id="7610008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7610011">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="7610075">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="7610144">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="7610206">type</span>&nbsp;<span class="ident" id="7610211">isZeroBug</span>&nbsp;<span class="keyword" id="7610221">struct</span>&nbsp;<span class="op" id="7610228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610231">T</span>&nbsp;<span class="ident" id="7610233">time</span><span class="op" id="7610237">.</span><span class="ident" id="7610238">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610244">S</span>&nbsp;<span class="builtintype" id="7610246">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610254">I</span>&nbsp;<span class="builtintype" id="7610256">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610261">A</span>&nbsp;<span class="ident" id="7610263">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610279">F</span>&nbsp;<span class="ident" id="7610281">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="7610300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610303">type</span>&nbsp;<span class="ident" id="7610308">isZeroBugArray</span>&nbsp;<span class="op" id="7610323">[</span><span class="num" id="7610324">2</span><span class="op" id="7610325">]</span><span class="builtintype" id="7610326">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="7610333">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="7610393">func</span>&nbsp;<span class="op" id="7610398">(</span><span class="ident" id="7610399">a</span>&nbsp;<span class="ident" id="7610401">isZeroBugArray</span><span class="op" id="7610415">)</span>&nbsp;<span class="ident" id="7610417">GobEncode</span><span class="op" id="7610426">(</span><span class="op" id="7610427">)</span>&nbsp;<span class="op" id="7610429">(</span><span class="ident" id="7610430">b</span>&nbsp;<span class="op" id="7610432">[</span><span class="op" id="7610433">]</span><span class="builtintype" id="7610434">byte</span><span class="op" id="7610438">,</span>&nbsp;<span class="ident" id="7610440">e</span>&nbsp;<span class="builtintype" id="7610442">error</span><span class="op" id="7610447">)</span>&nbsp;<span class="op" id="7610449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610452">b</span>&nbsp;<span class="op" id="7610454">=</span>&nbsp;<span class="builtinfunc" id="7610456">append</span><span class="op" id="7610462">(</span><span class="ident" id="7610463">b</span><span class="op" id="7610464">,</span>&nbsp;<span class="ident" id="7610466">a</span><span class="op" id="7610467">[</span><span class="op" id="7610468">:</span><span class="op" id="7610469">]</span><span class="op" id="7610470">...</span><span class="op" id="7610473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7610476">return</span>&nbsp;<span class="ident" id="7610483">b</span><span class="op" id="7610484">,</span>&nbsp;<span class="ident" id="7610486">nil</span><br>
<span class="lineno">725</span><span class="op" id="7610490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610493">func</span>&nbsp;<span class="op" id="7610498">(</span><span class="ident" id="7610499">a</span>&nbsp;<span class="op" id="7610501">*</span><span class="ident" id="7610502">isZeroBugArray</span><span class="op" id="7610516">)</span>&nbsp;<span class="ident" id="7610518">GobDecode</span><span class="op" id="7610527">(</span><span class="ident" id="7610528">data</span>&nbsp;<span class="op" id="7610533">[</span><span class="op" id="7610534">]</span><span class="builtintype" id="7610535">byte</span><span class="op" id="7610539">)</span>&nbsp;<span class="builtintype" id="7610541">error</span>&nbsp;<span class="op" id="7610547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7610550">if</span>&nbsp;<span class="builtinfunc" id="7610553">len</span><span class="op" id="7610556">(</span><span class="ident" id="7610557">data</span><span class="op" id="7610561">)</span>&nbsp;<span class="op" id="7610563">!=</span>&nbsp;<span class="builtinfunc" id="7610566">len</span><span class="op" id="7610569">(</span><span class="ident" id="7610570">a</span><span class="op" id="7610571">)</span>&nbsp;<span class="op" id="7610573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7610577">return</span>&nbsp;<span class="ident" id="7610584">io</span><span class="op" id="7610586">.</span><span class="ident" id="7610587">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7610592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610595">a</span><span class="op" id="7610596">[</span><span class="num" id="7610597">0</span><span class="op" id="7610598">]</span>&nbsp;<span class="op" id="7610600">=</span>&nbsp;<span class="ident" id="7610602">data</span><span class="op" id="7610606">[</span><span class="num" id="7610607">0</span><span class="op" id="7610608">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610611">a</span><span class="op" id="7610612">[</span><span class="num" id="7610613">1</span><span class="op" id="7610614">]</span>&nbsp;<span class="op" id="7610616">=</span>&nbsp;<span class="ident" id="7610618">data</span><span class="op" id="7610622">[</span><span class="num" id="7610623">1</span><span class="op" id="7610624">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7610627">return</span>&nbsp;<span class="ident" id="7610634">nil</span><br>
<span class="lineno"></span><span class="op" id="7610638">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="7610641">type</span>&nbsp;<span class="ident" id="7610646">isZeroBugInterface</span>&nbsp;<span class="keyword" id="7610665">struct</span>&nbsp;<span class="op" id="7610672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610675">I</span>&nbsp;<span class="keyword" id="7610677">interface</span><span class="op" id="7610686">{</span><span class="op" id="7610687">}</span><br>
<span class="lineno"></span><span class="op" id="7610689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="7610692">func</span>&nbsp;<span class="op" id="7610697">(</span><span class="ident" id="7610698">i</span>&nbsp;<span class="ident" id="7610700">isZeroBugInterface</span><span class="op" id="7610718">)</span>&nbsp;<span class="ident" id="7610720">GobEncode</span><span class="op" id="7610729">(</span><span class="op" id="7610730">)</span>&nbsp;<span class="op" id="7610732">(</span><span class="ident" id="7610733">b</span>&nbsp;<span class="op" id="7610735">[</span><span class="op" id="7610736">]</span><span class="builtintype" id="7610737">byte</span><span class="op" id="7610741">,</span>&nbsp;<span class="ident" id="7610743">e</span>&nbsp;<span class="builtintype" id="7610745">error</span><span class="op" id="7610750">)</span>&nbsp;<span class="op" id="7610752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7610755">return</span>&nbsp;<span class="op" id="7610762">[</span><span class="op" id="7610763">]</span><span class="builtintype" id="7610764">byte</span><span class="op" id="7610768">{</span><span class="op" id="7610769">}</span><span class="op" id="7610770">,</span>&nbsp;<span class="ident" id="7610772">nil</span><br>
<span class="lineno"></span><span class="op" id="7610776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610779">func</span>&nbsp;<span class="op" id="7610784">(</span><span class="ident" id="7610785">i</span>&nbsp;<span class="op" id="7610787">*</span><span class="ident" id="7610788">isZeroBugInterface</span><span class="op" id="7610806">)</span>&nbsp;<span class="ident" id="7610808">GobDecode</span><span class="op" id="7610817">(</span><span class="ident" id="7610818">data</span>&nbsp;<span class="op" id="7610823">[</span><span class="op" id="7610824">]</span><span class="builtintype" id="7610825">byte</span><span class="op" id="7610829">)</span>&nbsp;<span class="builtintype" id="7610831">error</span>&nbsp;<span class="op" id="7610837">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7610840">return</span>&nbsp;<span class="ident" id="7610847">nil</span><br>
<span class="lineno"></span><span class="op" id="7610851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610854">func</span>&nbsp;<span class="ident" id="7610859">TestGobEncodeIsZero</span><span class="op" id="7610878">(</span><span class="ident" id="7610879">t</span>&nbsp;<span class="op" id="7610881">*</span><span class="ident" id="7610882">testing</span><span class="op" id="7610889">.</span><span class="ident" id="7610890">T</span><span class="op" id="7610891">)</span>&nbsp;<span class="op" id="7610893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610896">x</span>&nbsp;<span class="op" id="7610898">:=</span>&nbsp;<span class="ident" id="7610901">isZeroBug</span><span class="op" id="7610910">{</span><span class="ident" id="7610911">time</span><span class="op" id="7610915">.</span><span class="ident" id="7610916">Now</span><span class="op" id="7610919">(</span><span class="op" id="7610920">)</span><span class="op" id="7610921">,</span>&nbsp;<span class="string" id="7610923">&#34;hello&#34;</span><span class="op" id="7610930">,</span>&nbsp;<span class="op" id="7610932">-</span><span class="num" id="7610933">55</span><span class="op" id="7610935">,</span>&nbsp;<span class="ident" id="7610937">isZeroBugArray</span><span class="op" id="7610951">{</span><span class="num" id="7610952">1</span><span class="op" id="7610953">,</span>&nbsp;<span class="num" id="7610955">2</span><span class="op" id="7610956">}</span><span class="op" id="7610957">,</span>&nbsp;<span class="ident" id="7610959">isZeroBugInterface</span><span class="op" id="7610977">{</span><span class="op" id="7610978">}</span><span class="op" id="7610979">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610982">b</span>&nbsp;<span class="op" id="7610984">:=</span>&nbsp;<span class="builtinfunc" id="7610987">new</span><span class="op" id="7610990">(</span><span class="ident" id="7610991">bytes</span><span class="op" id="7610996">.</span><span class="ident" id="7610997">Buffer</span><span class="op" id="7611003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611006">enc</span>&nbsp;<span class="op" id="7611010">:=</span>&nbsp;<span class="ident" id="7611013">NewEncoder</span><span class="op" id="7611023">(</span><span class="ident" id="7611024">b</span><span class="op" id="7611025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611028">err</span>&nbsp;<span class="op" id="7611032">:=</span>&nbsp;<span class="ident" id="7611035">enc</span><span class="op" id="7611038">.</span><span class="ident" id="7611039">Encode</span><span class="op" id="7611045">(</span><span class="ident" id="7611046">x</span><span class="op" id="7611047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611050">if</span>&nbsp;<span class="ident" id="7611053">err</span>&nbsp;<span class="op" id="7611057">!=</span>&nbsp;<span class="ident" id="7611060">nil</span>&nbsp;<span class="op" id="7611064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611068">t</span><span class="op" id="7611069">.</span><span class="ident" id="7611070">Fatal</span><span class="op" id="7611075">(</span><span class="string" id="7611076">&#34;encode:&#34;</span><span class="op" id="7611085">,</span>&nbsp;<span class="ident" id="7611087">err</span><span class="op" id="7611090">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7611093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611096">var</span>&nbsp;<span class="ident" id="7611100">y</span>&nbsp;<span class="ident" id="7611102">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611113">dec</span>&nbsp;<span class="op" id="7611117">:=</span>&nbsp;<span class="ident" id="7611120">NewDecoder</span><span class="op" id="7611130">(</span><span class="ident" id="7611131">b</span><span class="op" id="7611132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611135">err</span>&nbsp;<span class="op" id="7611139">=</span>&nbsp;<span class="ident" id="7611141">dec</span><span class="op" id="7611144">.</span><span class="ident" id="7611145">Decode</span><span class="op" id="7611151">(</span><span class="op" id="7611152">&amp;</span><span class="ident" id="7611153">y</span><span class="op" id="7611154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611157">if</span>&nbsp;<span class="ident" id="7611160">err</span>&nbsp;<span class="op" id="7611164">!=</span>&nbsp;<span class="ident" id="7611167">nil</span>&nbsp;<span class="op" id="7611171">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611175">t</span><span class="op" id="7611176">.</span><span class="ident" id="7611177">Fatal</span><span class="op" id="7611182">(</span><span class="string" id="7611183">&#34;decode:&#34;</span><span class="op" id="7611192">,</span>&nbsp;<span class="ident" id="7611194">err</span><span class="op" id="7611197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7611200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611203">if</span>&nbsp;<span class="ident" id="7611206">x</span>&nbsp;<span class="op" id="7611208">!=</span>&nbsp;<span class="ident" id="7611211">y</span>&nbsp;<span class="op" id="7611213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611217">t</span><span class="op" id="7611218">.</span><span class="ident" id="7611219">Fatalf</span><span class="op" id="7611225">(</span><span class="string" id="7611226">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7611236">,</span>&nbsp;<span class="ident" id="7611238">x</span><span class="op" id="7611239">,</span>&nbsp;<span class="ident" id="7611241">y</span><span class="op" id="7611242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7611245">}</span><br>
<span class="lineno">765</span><span class="op" id="7611247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7611250">func</span>&nbsp;<span class="ident" id="7611255">TestGobEncodePtrError</span><span class="op" id="7611276">(</span><span class="ident" id="7611277">t</span>&nbsp;<span class="op" id="7611279">*</span><span class="ident" id="7611280">testing</span><span class="op" id="7611287">.</span><span class="ident" id="7611288">T</span><span class="op" id="7611289">)</span>&nbsp;<span class="op" id="7611291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611294">var</span>&nbsp;<span class="ident" id="7611298">err</span>&nbsp;<span class="builtintype" id="7611302">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611309">b</span>&nbsp;<span class="op" id="7611311">:=</span>&nbsp;<span class="builtinfunc" id="7611314">new</span><span class="op" id="7611317">(</span><span class="ident" id="7611318">bytes</span><span class="op" id="7611323">.</span><span class="ident" id="7611324">Buffer</span><span class="op" id="7611330">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611333">enc</span>&nbsp;<span class="op" id="7611337">:=</span>&nbsp;<span class="ident" id="7611340">NewEncoder</span><span class="op" id="7611350">(</span><span class="ident" id="7611351">b</span><span class="op" id="7611352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611355">err</span>&nbsp;<span class="op" id="7611359">=</span>&nbsp;<span class="ident" id="7611361">enc</span><span class="op" id="7611364">.</span><span class="ident" id="7611365">Encode</span><span class="op" id="7611371">(</span><span class="op" id="7611372">&amp;</span><span class="ident" id="7611373">err</span><span class="op" id="7611376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611379">if</span>&nbsp;<span class="ident" id="7611382">err</span>&nbsp;<span class="op" id="7611386">!=</span>&nbsp;<span class="ident" id="7611389">nil</span>&nbsp;<span class="op" id="7611393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611397">t</span><span class="op" id="7611398">.</span><span class="ident" id="7611399">Fatal</span><span class="op" id="7611404">(</span><span class="string" id="7611405">&#34;encode:&#34;</span><span class="op" id="7611414">,</span>&nbsp;<span class="ident" id="7611416">err</span><span class="op" id="7611419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7611422">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611425">dec</span>&nbsp;<span class="op" id="7611429">:=</span>&nbsp;<span class="ident" id="7611432">NewDecoder</span><span class="op" id="7611442">(</span><span class="ident" id="7611443">b</span><span class="op" id="7611444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611447">err2</span>&nbsp;<span class="op" id="7611452">:=</span>&nbsp;<span class="ident" id="7611455">fmt</span><span class="op" id="7611458">.</span><span class="ident" id="7611459">Errorf</span><span class="op" id="7611465">(</span><span class="string" id="7611466">&#34;foo&#34;</span><span class="op" id="7611471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611474">err</span>&nbsp;<span class="op" id="7611478">=</span>&nbsp;<span class="ident" id="7611480">dec</span><span class="op" id="7611483">.</span><span class="ident" id="7611484">Decode</span><span class="op" id="7611490">(</span><span class="op" id="7611491">&amp;</span><span class="ident" id="7611492">err2</span><span class="op" id="7611496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611499">if</span>&nbsp;<span class="ident" id="7611502">err</span>&nbsp;<span class="op" id="7611506">!=</span>&nbsp;<span class="ident" id="7611509">nil</span>&nbsp;<span class="op" id="7611513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611517">t</span><span class="op" id="7611518">.</span><span class="ident" id="7611519">Fatal</span><span class="op" id="7611524">(</span><span class="string" id="7611525">&#34;decode:&#34;</span><span class="op" id="7611534">,</span>&nbsp;<span class="ident" id="7611536">err</span><span class="op" id="7611539">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7611542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611545">if</span>&nbsp;<span class="ident" id="7611548">err2</span>&nbsp;<span class="op" id="7611553">!=</span>&nbsp;<span class="ident" id="7611556">nil</span>&nbsp;<span class="op" id="7611560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611564">t</span><span class="op" id="7611565">.</span><span class="ident" id="7611566">Fatalf</span><span class="op" id="7611572">(</span><span class="string" id="7611573">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7611595">,</span>&nbsp;<span class="ident" id="7611597">err2</span><span class="op" id="7611601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7611604">}</span><br>
<span class="lineno"></span><span class="op" id="7611606">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="7611609">func</span>&nbsp;<span class="ident" id="7611614">TestNetIP</span><span class="op" id="7611623">(</span><span class="ident" id="7611624">t</span>&nbsp;<span class="op" id="7611626">*</span><span class="ident" id="7611627">testing</span><span class="op" id="7611634">.</span><span class="ident" id="7611635">T</span><span class="op" id="7611636">)</span>&nbsp;<span class="op" id="7611638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7611641">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611684">enc</span>&nbsp;<span class="op" id="7611688">:=</span>&nbsp;<span class="op" id="7611691">[</span><span class="op" id="7611692">]</span><span class="builtintype" id="7611693">byte</span><span class="op" id="7611697">{</span><span class="num" id="7611698">0x07</span><span class="op" id="7611702">,</span>&nbsp;<span class="num" id="7611704">0x0a</span><span class="op" id="7611708">,</span>&nbsp;<span class="num" id="7611710">0x00</span><span class="op" id="7611714">,</span>&nbsp;<span class="num" id="7611716">0x04</span><span class="op" id="7611720">,</span>&nbsp;<span class="num" id="7611722">0x01</span><span class="op" id="7611726">,</span>&nbsp;<span class="num" id="7611728">0x02</span><span class="op" id="7611732">,</span>&nbsp;<span class="num" id="7611734">0x03</span><span class="op" id="7611738">,</span>&nbsp;<span class="num" id="7611740">0x04</span><span class="op" id="7611744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611748">var</span>&nbsp;<span class="ident" id="7611752">ip</span>&nbsp;<span class="ident" id="7611755">net</span><span class="op" id="7611758">.</span><span class="ident" id="7611759">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611763">err</span>&nbsp;<span class="op" id="7611767">:=</span>&nbsp;<span class="ident" id="7611770">NewDecoder</span><span class="op" id="7611780">(</span><span class="ident" id="7611781">bytes</span><span class="op" id="7611786">.</span><span class="ident" id="7611787">NewReader</span><span class="op" id="7611796">(</span><span class="ident" id="7611797">enc</span><span class="op" id="7611800">)</span><span class="op" id="7611801">)</span><span class="op" id="7611802">.</span><span class="ident" id="7611803">Decode</span><span class="op" id="7611809">(</span><span class="op" id="7611810">&amp;</span><span class="ident" id="7611811">ip</span><span class="op" id="7611813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611816">if</span>&nbsp;<span class="ident" id="7611819">err</span>&nbsp;<span class="op" id="7611823">!=</span>&nbsp;<span class="ident" id="7611826">nil</span>&nbsp;<span class="op" id="7611830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611834">t</span><span class="op" id="7611835">.</span><span class="ident" id="7611836">Fatalf</span><span class="op" id="7611842">(</span><span class="string" id="7611843">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7611855">,</span>&nbsp;<span class="ident" id="7611857">err</span><span class="op" id="7611860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7611863">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7611866">if</span>&nbsp;<span class="ident" id="7611869">ip</span><span class="op" id="7611871">.</span><span class="ident" id="7611872">String</span><span class="op" id="7611878">(</span><span class="op" id="7611879">)</span>&nbsp;<span class="op" id="7611881">!=</span>&nbsp;<span class="string" id="7611884">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="7611894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611898">t</span><span class="op" id="7611899">.</span><span class="ident" id="7611900">Errorf</span><span class="op" id="7611906">(</span><span class="string" id="7611907">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="7611936">,</span>&nbsp;<span class="ident" id="7611938">ip</span><span class="op" id="7611940">.</span><span class="ident" id="7611941">String</span><span class="op" id="7611947">(</span><span class="op" id="7611948">)</span><span class="op" id="7611949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7611952">}</span><br>
<span class="lineno"></span><span class="op" id="7611954">}</span>
</div>
</body>
</html>
