<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4290145">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4290200">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4290254">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4290305">//&nbsp;The&nbsp;wire&nbsp;protocol&nbsp;for&nbsp;HTTP&#39;s&nbsp;&#34;chunked&#34;&nbsp;Transfer-Encoding.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4290367">//&nbsp;Package&nbsp;internal&nbsp;contains&nbsp;HTTP&nbsp;internals&nbsp;shared&nbsp;by&nbsp;net/http&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4290434">//&nbsp;net/http/httputil.</span><br>
<span class="lineno"></span><span class="keyword" id="4290456">package</span>&nbsp;<span class="ident" id="4290464">internal</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4290474">import</span>&nbsp;<span class="op" id="4290481">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4290484">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4290493">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4290502">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4290512">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4290519">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4290524">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4290527">const</span>&nbsp;<span class="ident" id="4290533">maxLineLength</span>&nbsp;<span class="op" id="4290547">=</span>&nbsp;<span class="num" id="4290549">4096</span>&nbsp;<span class="comment" id="4290554">//&nbsp;assumed&nbsp;&lt;=&nbsp;bufio.defaultBufSize</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4290590">var</span>&nbsp;<span class="ident" id="4290594">ErrLineTooLong</span>&nbsp;<span class="op" id="4290609">=</span>&nbsp;<span class="ident" id="4290611"><a href="/net/http/internal/chunked.go.html#4290502">errors</a></span><span class="op" id="4290617">.</span><span class="ident" id="4290618">New</span><span class="op" id="4290621">(</span><span class="string" id="4290622">&#34;header&nbsp;line&nbsp;too&nbsp;long&#34;</span><span class="op" id="4290644">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4290647">//&nbsp;NewChunkedReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;chunkedReader&nbsp;that&nbsp;translates&nbsp;the&nbsp;data&nbsp;read&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="4290732">//&nbsp;out&nbsp;of&nbsp;HTTP&nbsp;&#34;chunked&#34;&nbsp;format&nbsp;before&nbsp;returning&nbsp;it.</span><br>
<span class="lineno">25</span><span class="comment" id="4290785">//&nbsp;The&nbsp;chunkedReader&nbsp;returns&nbsp;io.EOF&nbsp;when&nbsp;the&nbsp;final&nbsp;0-length&nbsp;chunk&nbsp;is&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="4290860">//</span><br>
<span class="lineno"></span><span class="comment" id="4290863">//&nbsp;NewChunkedReader&nbsp;is&nbsp;not&nbsp;needed&nbsp;by&nbsp;normal&nbsp;applications.&nbsp;The&nbsp;http&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="4290938">//&nbsp;automatically&nbsp;decodes&nbsp;chunking&nbsp;when&nbsp;reading&nbsp;response&nbsp;bodies.</span><br>
<span class="lineno"></span><span class="keyword" id="4291002">func</span>&nbsp;<span class="ident" id="4291007">NewChunkedReader</span><span class="op" id="4291023">(</span><span class="ident" id="4291024">r</span>&nbsp;<span class="ident" id="4291026"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4291028">.</span><span class="ident" id="4291029">Reader</span><span class="op" id="4291035">)</span>&nbsp;<span class="ident" id="4291037"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4291039">.</span><span class="ident" id="4291040">Reader</span>&nbsp;<span class="op" id="4291047">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291050">br</span><span class="op" id="4291052">,</span>&nbsp;<span class="ident" id="4291054">ok</span>&nbsp;<span class="op" id="4291057">:=</span>&nbsp;<span class="ident" id="4291060"><a href="/net/http/internal/chunked.go.html#4291024">r</a></span><span class="op" id="4291061">.</span><span class="op" id="4291062">(</span><span class="op" id="4291063">*</span><span class="ident" id="4291064"><a href="/net/http/internal/chunked.go.html#4290484">bufio</a></span><span class="op" id="4291069">.</span><span class="ident" id="4291070">Reader</span><span class="op" id="4291076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291079">if</span>&nbsp;<span class="op" id="4291082">!</span><span class="ident" id="4291083"><a href="/net/http/internal/chunked.go.html#4291054">ok</a></span>&nbsp;<span class="op" id="4291086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291090"><a href="/net/http/internal/chunked.go.html#4291050">br</a></span>&nbsp;<span class="op" id="4291093">=</span>&nbsp;<span class="ident" id="4291095"><a href="/net/http/internal/chunked.go.html#4290484">bufio</a></span><span class="op" id="4291100">.</span><span class="ident" id="4291101">NewReader</span><span class="op" id="4291110">(</span><span class="ident" id="4291111"><a href="/net/http/internal/chunked.go.html#4291024">r</a></span><span class="op" id="4291112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4291115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291118">return</span>&nbsp;<span class="op" id="4291125">&amp;</span><span class="ident" id="4291126"><a href="/net/http/internal/chunked.go.html#4291155">chunkedReader</a></span><span class="op" id="4291139">{</span><span class="ident" id="4291140">r</span><span class="op" id="4291141">:</span>&nbsp;<span class="ident" id="4291143"><a href="/net/http/internal/chunked.go.html#4291050">br</a></span><span class="op" id="4291145">}</span><br>
<span class="lineno">35</span><span class="op" id="4291147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4291150">type</span>&nbsp;<span class="ident" id="4291155">chunkedReader</span>&nbsp;<span class="keyword" id="4291169">struct</span>&nbsp;<span class="op" id="4291176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291179">r</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4291183">*</span><span class="ident" id="4291184"><a href="/net/http/internal/chunked.go.html#4290484">bufio</a></span><span class="op" id="4291189">.</span><span class="ident" id="4291190">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291198">n</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4291202">uint64</span>&nbsp;<span class="comment" id="4291209">//&nbsp;unread&nbsp;bytes&nbsp;in&nbsp;chunk</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291235">err</span>&nbsp;<span class="builtintype" id="4291239">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291246">buf</span>&nbsp;<span class="op" id="4291250">[</span><span class="num" id="4291251">2</span><span class="op" id="4291252">]</span><span class="builtintype" id="4291253">byte</span><br>
<span class="lineno"></span><span class="op" id="4291258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4291261">func</span>&nbsp;<span class="op" id="4291266">(</span><span class="ident" id="4291267">cr</span>&nbsp;<span class="op" id="4291270">*</span><span class="ident" id="4291271"><a href="/net/http/internal/chunked.go.html#4291155">chunkedReader</a></span><span class="op" id="4291284">)</span>&nbsp;<span class="ident" id="4291286">beginChunk</span><span class="op" id="4291296">(</span><span class="op" id="4291297">)</span>&nbsp;<span class="op" id="4291299">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4291302">//&nbsp;chunk-size&nbsp;CRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291322">var</span>&nbsp;<span class="ident" id="4291326">line</span>&nbsp;<span class="op" id="4291331">[</span><span class="op" id="4291332">]</span><span class="builtintype" id="4291333">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291339"><a href="/net/http/internal/chunked.go.html#4291326">line</a></span><span class="op" id="4291343">,</span>&nbsp;<span class="ident" id="4291345"><a href="/net/http/internal/chunked.go.html#4291267">cr</a></span><span class="op" id="4291347">.</span><span class="ident" id="4291348">err</span>&nbsp;<span class="op" id="4291352">=</span>&nbsp;<span class="ident" id="4291354"><a href="/net/http/internal/chunked.go.html#4292698">readLine</a></span><span class="op" id="4291362">(</span><span class="ident" id="4291363"><a href="/net/http/internal/chunked.go.html#4291267">cr</a></span><span class="op" id="4291365">.</span><span class="ident" id="4291366">r</span><span class="op" id="4291367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291370">if</span>&nbsp;<span class="ident" id="4291373"><a href="/net/http/internal/chunked.go.html#4291267">cr</a></span><span class="op" id="4291375">.</span><span class="ident" id="4291376">err</span>&nbsp;<span class="op" id="4291380">!=</span>&nbsp;<span class="ident" id="4291383">nil</span>&nbsp;<span class="op" id="4291387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291391">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4291399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291402"><a href="/net/http/internal/chunked.go.html#4291267">cr</a></span><span class="op" id="4291404">.</span><span class="ident" id="4291405">n</span><span class="op" id="4291406">,</span>&nbsp;<span class="ident" id="4291408"><a href="/net/http/internal/chunked.go.html#4291267">cr</a></span><span class="op" id="4291410">.</span><span class="ident" id="4291411">err</span>&nbsp;<span class="op" id="4291415">=</span>&nbsp;<span class="ident" id="4291417"><a href="/net/http/internal/chunked.go.html#4294893">parseHexUint</a></span><span class="op" id="4291429">(</span><span class="ident" id="4291430"><a href="/net/http/internal/chunked.go.html#4291326">line</a></span><span class="op" id="4291434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291437">if</span>&nbsp;<span class="ident" id="4291440"><a href="/net/http/internal/chunked.go.html#4291267">cr</a></span><span class="op" id="4291442">.</span><span class="ident" id="4291443">err</span>&nbsp;<span class="op" id="4291447">!=</span>&nbsp;<span class="ident" id="4291450">nil</span>&nbsp;<span class="op" id="4291454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291458">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4291466">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291469">if</span>&nbsp;<span class="ident" id="4291472"><a href="/net/http/internal/chunked.go.html#4291267">cr</a></span><span class="op" id="4291474">.</span><span class="ident" id="4291475">n</span>&nbsp;<span class="op" id="4291477">==</span>&nbsp;<span class="num" id="4291480">0</span>&nbsp;<span class="op" id="4291482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291486"><a href="/net/http/internal/chunked.go.html#4291267">cr</a></span><span class="op" id="4291488">.</span><span class="ident" id="4291489">err</span>&nbsp;<span class="op" id="4291493">=</span>&nbsp;<span class="ident" id="4291495"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4291497">.</span><span class="ident" id="4291498">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4291503">}</span><br>
<span class="lineno"></span><span class="op" id="4291505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4291508">func</span>&nbsp;<span class="op" id="4291513">(</span><span class="ident" id="4291514">cr</span>&nbsp;<span class="op" id="4291517">*</span><span class="ident" id="4291518"><a href="/net/http/internal/chunked.go.html#4291155">chunkedReader</a></span><span class="op" id="4291531">)</span>&nbsp;<span class="ident" id="4291533">chunkHeaderAvailable</span><span class="op" id="4291553">(</span><span class="op" id="4291554">)</span>&nbsp;<span class="builtintype" id="4291556">bool</span>&nbsp;<span class="op" id="4291561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291564">n</span>&nbsp;<span class="op" id="4291566">:=</span>&nbsp;<span class="ident" id="4291569"><a href="/net/http/internal/chunked.go.html#4291514">cr</a></span><span class="op" id="4291571">.</span><span class="ident" id="4291572">r</span><span class="op" id="4291573">.</span><span class="ident" id="4291574">Buffered</span><span class="op" id="4291582">(</span><span class="op" id="4291583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291586">if</span>&nbsp;<span class="ident" id="4291589"><a href="/net/http/internal/chunked.go.html#4291564">n</a></span>&nbsp;<span class="op" id="4291591">&gt;</span>&nbsp;<span class="num" id="4291593">0</span>&nbsp;<span class="op" id="4291595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291599">peek</span><span class="op" id="4291603">,</span>&nbsp;<span class="ident" id="4291605">_</span>&nbsp;<span class="op" id="4291607">:=</span>&nbsp;<span class="ident" id="4291610"><a href="/net/http/internal/chunked.go.html#4291514">cr</a></span><span class="op" id="4291612">.</span><span class="ident" id="4291613">r</span><span class="op" id="4291614">.</span><span class="ident" id="4291615">Peek</span><span class="op" id="4291619">(</span><span class="ident" id="4291620"><a href="/net/http/internal/chunked.go.html#4291564">n</a></span><span class="op" id="4291621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291625">return</span>&nbsp;<span class="ident" id="4291632"><a href="/net/http/internal/chunked.go.html#4290493">bytes</a></span><span class="op" id="4291637">.</span><span class="ident" id="4291638">IndexByte</span><span class="op" id="4291647">(</span><span class="ident" id="4291648"><a href="/net/http/internal/chunked.go.html#4291599">peek</a></span><span class="op" id="4291652">,</span>&nbsp;<span class="string" id="4291654">&#39;\n&#39;</span><span class="op" id="4291658">)</span>&nbsp;<span class="op" id="4291660">&gt;=</span>&nbsp;<span class="num" id="4291663">0</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4291666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291669">return</span>&nbsp;<span class="builtintype" id="4291676">false</span><br>
<span class="lineno"></span><span class="op" id="4291682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4291685">func</span>&nbsp;<span class="op" id="4291690">(</span><span class="ident" id="4291691">cr</span>&nbsp;<span class="op" id="4291694">*</span><span class="ident" id="4291695"><a href="/net/http/internal/chunked.go.html#4291155">chunkedReader</a></span><span class="op" id="4291708">)</span>&nbsp;<span class="ident" id="4291710">Read</span><span class="op" id="4291714">(</span><span class="ident" id="4291715">b</span>&nbsp;<span class="op" id="4291717">[</span><span class="op" id="4291718">]</span><span class="builtintype" id="4291719">uint8</span><span class="op" id="4291724">)</span>&nbsp;<span class="op" id="4291726">(</span><span class="ident" id="4291727">n</span>&nbsp;<span class="builtintype" id="4291729">int</span><span class="op" id="4291732">,</span>&nbsp;<span class="ident" id="4291734">err</span>&nbsp;<span class="builtintype" id="4291738">error</span><span class="op" id="4291743">)</span>&nbsp;<span class="op" id="4291745">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291748">for</span>&nbsp;<span class="ident" id="4291752"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4291754">.</span><span class="ident" id="4291755">err</span>&nbsp;<span class="op" id="4291759">==</span>&nbsp;<span class="ident" id="4291762">nil</span>&nbsp;<span class="op" id="4291766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291770">if</span>&nbsp;<span class="ident" id="4291773"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4291775">.</span><span class="ident" id="4291776">n</span>&nbsp;<span class="op" id="4291778">==</span>&nbsp;<span class="num" id="4291781">0</span>&nbsp;<span class="op" id="4291783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291788">if</span>&nbsp;<span class="ident" id="4291791"><a href="/net/http/internal/chunked.go.html#4291727">n</a></span>&nbsp;<span class="op" id="4291793">&gt;</span>&nbsp;<span class="num" id="4291795">0</span>&nbsp;<span class="op" id="4291797">&amp;&amp;</span>&nbsp;<span class="op" id="4291800">!</span><span class="ident" id="4291801"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4291803">.</span><span class="ident" id="4291804">chunkHeaderAvailable</span><span class="op" id="4291824">(</span><span class="op" id="4291825">)</span>&nbsp;<span class="op" id="4291827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4291833">//&nbsp;We&#39;ve&nbsp;read&nbsp;enough.&nbsp;Don&#39;t&nbsp;potentially&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4291883">//&nbsp;reading&nbsp;a&nbsp;new&nbsp;chunk&nbsp;header.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291918">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4291927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291932"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4291934">.</span><span class="ident" id="4291935">beginChunk</span><span class="op" id="4291945">(</span><span class="op" id="4291946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291951">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4291962">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291966">if</span>&nbsp;<span class="builtinfunc" id="4291969">len</span><span class="op" id="4291972">(</span><span class="ident" id="4291973"><a href="/net/http/internal/chunked.go.html#4291715">b</a></span><span class="op" id="4291974">)</span>&nbsp;<span class="op" id="4291976">==</span>&nbsp;<span class="num" id="4291979">0</span>&nbsp;<span class="op" id="4291981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4291986">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4291994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4291998">rbuf</span>&nbsp;<span class="op" id="4292003">:=</span>&nbsp;<span class="ident" id="4292006"><a href="/net/http/internal/chunked.go.html#4291715">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4292010">if</span>&nbsp;<span class="ident" id="4292013">uint64</span><span class="op" id="4292019">(</span><span class="builtinfunc" id="4292020">len</span><span class="op" id="4292023">(</span><span class="ident" id="4292024"><a href="/net/http/internal/chunked.go.html#4291998">rbuf</a></span><span class="op" id="4292028">)</span><span class="op" id="4292029">)</span>&nbsp;<span class="op" id="4292031">&gt;</span>&nbsp;<span class="ident" id="4292033"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292035">.</span><span class="ident" id="4292036">n</span>&nbsp;<span class="op" id="4292038">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4292043"><a href="/net/http/internal/chunked.go.html#4291998">rbuf</a></span>&nbsp;<span class="op" id="4292048">=</span>&nbsp;<span class="ident" id="4292050"><a href="/net/http/internal/chunked.go.html#4291998">rbuf</a></span><span class="op" id="4292054">[</span><span class="op" id="4292055">:</span><span class="ident" id="4292056"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292058">.</span><span class="ident" id="4292059">n</span><span class="op" id="4292060">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4292064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4292068">var</span>&nbsp;<span class="ident" id="4292072">n0</span>&nbsp;<span class="builtintype" id="4292075">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4292081"><a href="/net/http/internal/chunked.go.html#4292072">n0</a></span><span class="op" id="4292083">,</span>&nbsp;<span class="ident" id="4292085"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292087">.</span><span class="ident" id="4292088">err</span>&nbsp;<span class="op" id="4292092">=</span>&nbsp;<span class="ident" id="4292094"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292096">.</span><span class="ident" id="4292097">r</span><span class="op" id="4292098">.</span><span class="ident" id="4292099">Read</span><span class="op" id="4292103">(</span><span class="ident" id="4292104"><a href="/net/http/internal/chunked.go.html#4291998">rbuf</a></span><span class="op" id="4292108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4292112"><a href="/net/http/internal/chunked.go.html#4291727">n</a></span>&nbsp;<span class="op" id="4292114">+=</span>&nbsp;<span class="ident" id="4292117"><a href="/net/http/internal/chunked.go.html#4292072">n0</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4292122"><a href="/net/http/internal/chunked.go.html#4291715">b</a></span>&nbsp;<span class="op" id="4292124">=</span>&nbsp;<span class="ident" id="4292126"><a href="/net/http/internal/chunked.go.html#4291715">b</a></span><span class="op" id="4292127">[</span><span class="ident" id="4292128"><a href="/net/http/internal/chunked.go.html#4292072">n0</a></span><span class="op" id="4292130">:</span><span class="op" id="4292131">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4292135"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292137">.</span><span class="ident" id="4292138">n</span>&nbsp;<span class="op" id="4292140">-=</span>&nbsp;<span class="ident" id="4292143">uint64</span><span class="op" id="4292149">(</span><span class="ident" id="4292150"><a href="/net/http/internal/chunked.go.html#4292072">n0</a></span><span class="op" id="4292152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4292156">//&nbsp;If&nbsp;we&#39;re&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;chunk,&nbsp;read&nbsp;the&nbsp;next&nbsp;two</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4292211">//&nbsp;bytes&nbsp;to&nbsp;verify&nbsp;they&nbsp;are&nbsp;&#34;\r\n&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4292249">if</span>&nbsp;<span class="ident" id="4292252"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292254">.</span><span class="ident" id="4292255">n</span>&nbsp;<span class="op" id="4292257">==</span>&nbsp;<span class="num" id="4292260">0</span>&nbsp;<span class="op" id="4292262">&amp;&amp;</span>&nbsp;<span class="ident" id="4292265"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292267">.</span><span class="ident" id="4292268">err</span>&nbsp;<span class="op" id="4292272">==</span>&nbsp;<span class="ident" id="4292275">nil</span>&nbsp;<span class="op" id="4292279">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4292284">if</span>&nbsp;<span class="ident" id="4292287">_</span><span class="op" id="4292288">,</span>&nbsp;<span class="ident" id="4292290"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292292">.</span><span class="ident" id="4292293">err</span>&nbsp;<span class="op" id="4292297">=</span>&nbsp;<span class="ident" id="4292299"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4292301">.</span><span class="ident" id="4292302">ReadFull</span><span class="op" id="4292310">(</span><span class="ident" id="4292311"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292313">.</span><span class="ident" id="4292314">r</span><span class="op" id="4292315">,</span>&nbsp;<span class="ident" id="4292317"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292319">.</span><span class="ident" id="4292320">buf</span><span class="op" id="4292323">[</span><span class="op" id="4292324">:</span><span class="num" id="4292325">2</span><span class="op" id="4292326">]</span><span class="op" id="4292327">)</span><span class="op" id="4292328">;</span>&nbsp;<span class="ident" id="4292330"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292332">.</span><span class="ident" id="4292333">err</span>&nbsp;<span class="op" id="4292337">==</span>&nbsp;<span class="ident" id="4292340">nil</span>&nbsp;<span class="op" id="4292344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4292350">if</span>&nbsp;<span class="ident" id="4292353"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292355">.</span><span class="ident" id="4292356">buf</span><span class="op" id="4292359">[</span><span class="num" id="4292360">0</span><span class="op" id="4292361">]</span>&nbsp;<span class="op" id="4292363">!=</span>&nbsp;<span class="string" id="4292366">&#39;\r&#39;</span>&nbsp;<span class="op" id="4292371">||</span>&nbsp;<span class="ident" id="4292374"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292376">.</span><span class="ident" id="4292377">buf</span><span class="op" id="4292380">[</span><span class="num" id="4292381">1</span><span class="op" id="4292382">]</span>&nbsp;<span class="op" id="4292384">!=</span>&nbsp;<span class="string" id="4292387">&#39;\n&#39;</span>&nbsp;<span class="op" id="4292392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4292399"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292401">.</span><span class="ident" id="4292402">err</span>&nbsp;<span class="op" id="4292406">=</span>&nbsp;<span class="ident" id="4292408"><a href="/net/http/internal/chunked.go.html#4290502">errors</a></span><span class="op" id="4292414">.</span><span class="ident" id="4292415">New</span><span class="op" id="4292418">(</span><span class="string" id="4292419">&#34;malformed&nbsp;chunked&nbsp;encoding&#34;</span><span class="op" id="4292447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4292453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4292458">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4292462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4292465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4292468">return</span>&nbsp;<span class="ident" id="4292475"><a href="/net/http/internal/chunked.go.html#4291727">n</a></span><span class="op" id="4292476">,</span>&nbsp;<span class="ident" id="4292478"><a href="/net/http/internal/chunked.go.html#4291691">cr</a></span><span class="op" id="4292480">.</span><span class="ident" id="4292481">err</span><br>
<span class="lineno"></span><span class="op" id="4292485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4292488">//&nbsp;Read&nbsp;a&nbsp;line&nbsp;of&nbsp;bytes&nbsp;(up&nbsp;to&nbsp;\n)&nbsp;from&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="4292531">//&nbsp;Give&nbsp;up&nbsp;if&nbsp;the&nbsp;line&nbsp;exceeds&nbsp;maxLineLength.</span><br>
<span class="lineno"></span><span class="comment" id="4292577">//&nbsp;The&nbsp;returned&nbsp;bytes&nbsp;are&nbsp;a&nbsp;pointer&nbsp;into&nbsp;storage&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="4292629">//&nbsp;the&nbsp;bufio,&nbsp;so&nbsp;they&nbsp;are&nbsp;only&nbsp;valid&nbsp;until&nbsp;the&nbsp;next&nbsp;bufio&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="4292693">func</span>&nbsp;<span class="ident" id="4292698">readLine</span><span class="op" id="4292706">(</span><span class="ident" id="4292707">b</span>&nbsp;<span class="op" id="4292709">*</span><span class="ident" id="4292710"><a href="/net/http/internal/chunked.go.html#4290484">bufio</a></span><span class="op" id="4292715">.</span><span class="ident" id="4292716">Reader</span><span class="op" id="4292722">)</span>&nbsp;<span class="op" id="4292724">(</span><span class="ident" id="4292725">p</span>&nbsp;<span class="op" id="4292727">[</span><span class="op" id="4292728">]</span><span class="builtintype" id="4292729">byte</span><span class="op" id="4292733">,</span>&nbsp;<span class="ident" id="4292735">err</span>&nbsp;<span class="builtintype" id="4292739">error</span><span class="op" id="4292744">)</span>&nbsp;<span class="op" id="4292746">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4292749">if</span>&nbsp;<span class="ident" id="4292752"><a href="/net/http/internal/chunked.go.html#4292725">p</a></span><span class="op" id="4292753">,</span>&nbsp;<span class="ident" id="4292755"><a href="/net/http/internal/chunked.go.html#4292735">err</a></span>&nbsp;<span class="op" id="4292759">=</span>&nbsp;<span class="ident" id="4292761"><a href="/net/http/internal/chunked.go.html#4292707">b</a></span><span class="op" id="4292762">.</span><span class="ident" id="4292763">ReadSlice</span><span class="op" id="4292772">(</span><span class="string" id="4292773">&#39;\n&#39;</span><span class="op" id="4292777">)</span><span class="op" id="4292778">;</span>&nbsp;<span class="ident" id="4292780"><a href="/net/http/internal/chunked.go.html#4292735">err</a></span>&nbsp;<span class="op" id="4292784">!=</span>&nbsp;<span class="ident" id="4292787">nil</span>&nbsp;<span class="op" id="4292791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4292795">//&nbsp;We&nbsp;always&nbsp;know&nbsp;when&nbsp;EOF&nbsp;is&nbsp;coming.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4292835">//&nbsp;If&nbsp;the&nbsp;caller&nbsp;asked&nbsp;for&nbsp;a&nbsp;line,&nbsp;there&nbsp;should&nbsp;be&nbsp;a&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4292896">if</span>&nbsp;<span class="ident" id="4292899"><a href="/net/http/internal/chunked.go.html#4292735">err</a></span>&nbsp;<span class="op" id="4292903">==</span>&nbsp;<span class="ident" id="4292906"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4292908">.</span><span class="ident" id="4292909">EOF</span>&nbsp;<span class="op" id="4292913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4292918"><a href="/net/http/internal/chunked.go.html#4292735">err</a></span>&nbsp;<span class="op" id="4292922">=</span>&nbsp;<span class="ident" id="4292924"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4292926">.</span><span class="ident" id="4292927">ErrUnexpectedEOF</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4292946">}</span>&nbsp;<span class="keyword" id="4292948">else</span>&nbsp;<span class="keyword" id="4292953">if</span>&nbsp;<span class="ident" id="4292956"><a href="/net/http/internal/chunked.go.html#4292735">err</a></span>&nbsp;<span class="op" id="4292960">==</span>&nbsp;<span class="ident" id="4292963"><a href="/net/http/internal/chunked.go.html#4290484">bufio</a></span><span class="op" id="4292968">.</span><span class="ident" id="4292969">ErrBufferFull</span>&nbsp;<span class="op" id="4292983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4292988"><a href="/net/http/internal/chunked.go.html#4292735">err</a></span>&nbsp;<span class="op" id="4292992">=</span>&nbsp;<span class="ident" id="4292994"><a href="/net/http/internal/chunked.go.html#4290594">ErrLineTooLong</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4293011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4293015">return</span>&nbsp;<span class="ident" id="4293022">nil</span><span class="op" id="4293025">,</span>&nbsp;<span class="ident" id="4293027"><a href="/net/http/internal/chunked.go.html#4292735">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4293032">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4293035">if</span>&nbsp;<span class="builtinfunc" id="4293038">len</span><span class="op" id="4293041">(</span><span class="ident" id="4293042"><a href="/net/http/internal/chunked.go.html#4292725">p</a></span><span class="op" id="4293043">)</span>&nbsp;<span class="op" id="4293045">&gt;=</span>&nbsp;<span class="ident" id="4293048"><a href="/net/http/internal/chunked.go.html#4290533">maxLineLength</a></span>&nbsp;<span class="op" id="4293062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4293066">return</span>&nbsp;<span class="ident" id="4293073">nil</span><span class="op" id="4293076">,</span>&nbsp;<span class="ident" id="4293078"><a href="/net/http/internal/chunked.go.html#4290594">ErrLineTooLong</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4293094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4293097">return</span>&nbsp;<span class="ident" id="4293104"><a href="/net/http/internal/chunked.go.html#4293143">trimTrailingWhitespace</a></span><span class="op" id="4293126">(</span><span class="ident" id="4293127"><a href="/net/http/internal/chunked.go.html#4292725">p</a></span><span class="op" id="4293128">)</span><span class="op" id="4293129">,</span>&nbsp;<span class="ident" id="4293131">nil</span><br>
<span class="lineno"></span><span class="op" id="4293135">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="4293138">func</span>&nbsp;<span class="ident" id="4293143">trimTrailingWhitespace</span><span class="op" id="4293165">(</span><span class="ident" id="4293166">b</span>&nbsp;<span class="op" id="4293168">[</span><span class="op" id="4293169">]</span><span class="builtintype" id="4293170">byte</span><span class="op" id="4293174">)</span>&nbsp;<span class="op" id="4293176">[</span><span class="op" id="4293177">]</span><span class="builtintype" id="4293178">byte</span>&nbsp;<span class="op" id="4293183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4293186">for</span>&nbsp;<span class="builtinfunc" id="4293190">len</span><span class="op" id="4293193">(</span><span class="ident" id="4293194"><a href="/net/http/internal/chunked.go.html#4293166">b</a></span><span class="op" id="4293195">)</span>&nbsp;<span class="op" id="4293197">&gt;</span>&nbsp;<span class="num" id="4293199">0</span>&nbsp;<span class="op" id="4293201">&amp;&amp;</span>&nbsp;<span class="ident" id="4293204"><a href="/net/http/internal/chunked.go.html#4293272">isASCIISpace</a></span><span class="op" id="4293216">(</span><span class="ident" id="4293217"><a href="/net/http/internal/chunked.go.html#4293166">b</a></span><span class="op" id="4293218">[</span><span class="builtinfunc" id="4293219">len</span><span class="op" id="4293222">(</span><span class="ident" id="4293223"><a href="/net/http/internal/chunked.go.html#4293166">b</a></span><span class="op" id="4293224">)</span><span class="op" id="4293225">-</span><span class="num" id="4293226">1</span><span class="op" id="4293227">]</span><span class="op" id="4293228">)</span>&nbsp;<span class="op" id="4293230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4293234"><a href="/net/http/internal/chunked.go.html#4293166">b</a></span>&nbsp;<span class="op" id="4293236">=</span>&nbsp;<span class="ident" id="4293238"><a href="/net/http/internal/chunked.go.html#4293166">b</a></span><span class="op" id="4293239">[</span><span class="op" id="4293240">:</span><span class="builtinfunc" id="4293241">len</span><span class="op" id="4293244">(</span><span class="ident" id="4293245"><a href="/net/http/internal/chunked.go.html#4293166">b</a></span><span class="op" id="4293246">)</span><span class="op" id="4293247">-</span><span class="num" id="4293248">1</span><span class="op" id="4293249">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4293252">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4293255">return</span>&nbsp;<span class="ident" id="4293262"><a href="/net/http/internal/chunked.go.html#4293166">b</a></span><br>
<span class="lineno"></span><span class="op" id="4293264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4293267">func</span>&nbsp;<span class="ident" id="4293272">isASCIISpace</span><span class="op" id="4293284">(</span><span class="ident" id="4293285">b</span>&nbsp;<span class="builtintype" id="4293287">byte</span><span class="op" id="4293291">)</span>&nbsp;<span class="builtintype" id="4293293">bool</span>&nbsp;<span class="op" id="4293298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4293301">return</span>&nbsp;<span class="ident" id="4293308"><a href="/net/http/internal/chunked.go.html#4293285">b</a></span>&nbsp;<span class="op" id="4293310">==</span>&nbsp;<span class="string" id="4293313">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4293317">||</span>&nbsp;<span class="ident" id="4293320"><a href="/net/http/internal/chunked.go.html#4293285">b</a></span>&nbsp;<span class="op" id="4293322">==</span>&nbsp;<span class="string" id="4293325">&#39;\t&#39;</span>&nbsp;<span class="op" id="4293330">||</span>&nbsp;<span class="ident" id="4293333"><a href="/net/http/internal/chunked.go.html#4293285">b</a></span>&nbsp;<span class="op" id="4293335">==</span>&nbsp;<span class="string" id="4293338">&#39;\n&#39;</span>&nbsp;<span class="op" id="4293343">||</span>&nbsp;<span class="ident" id="4293346"><a href="/net/http/internal/chunked.go.html#4293285">b</a></span>&nbsp;<span class="op" id="4293348">==</span>&nbsp;<span class="string" id="4293351">&#39;\r&#39;</span><br>
<span class="lineno">135</span><span class="op" id="4293356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4293359">//&nbsp;NewChunkedWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;chunkedWriter&nbsp;that&nbsp;translates&nbsp;writes&nbsp;into&nbsp;HTTP</span><br>
<span class="lineno"></span><span class="comment" id="4293440">//&nbsp;&#34;chunked&#34;&nbsp;format&nbsp;before&nbsp;writing&nbsp;them&nbsp;to&nbsp;w.&nbsp;Closing&nbsp;the&nbsp;returned&nbsp;chunkedWriter</span><br>
<span class="lineno"></span><span class="comment" id="4293521">//&nbsp;sends&nbsp;the&nbsp;final&nbsp;0-length&nbsp;chunk&nbsp;that&nbsp;marks&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;stream.</span><br>
<span class="lineno">140</span><span class="comment" id="4293589">//</span><br>
<span class="lineno"></span><span class="comment" id="4293592">//&nbsp;NewChunkedWriter&nbsp;is&nbsp;not&nbsp;needed&nbsp;by&nbsp;normal&nbsp;applications.&nbsp;The&nbsp;http</span><br>
<span class="lineno"></span><span class="comment" id="4293659">//&nbsp;package&nbsp;adds&nbsp;chunking&nbsp;automatically&nbsp;if&nbsp;handlers&nbsp;don&#39;t&nbsp;set&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4293722">//&nbsp;Content-Length&nbsp;header.&nbsp;Using&nbsp;newChunkedWriter&nbsp;inside&nbsp;a&nbsp;handler</span><br>
<span class="lineno"></span><span class="comment" id="4293788">//&nbsp;would&nbsp;result&nbsp;in&nbsp;double&nbsp;chunking&nbsp;or&nbsp;chunking&nbsp;with&nbsp;a&nbsp;Content-Length</span><br>
<span class="lineno">145</span><span class="comment" id="4293857">//&nbsp;length,&nbsp;both&nbsp;of&nbsp;which&nbsp;are&nbsp;wrong.</span><br>
<span class="lineno"></span><span class="keyword" id="4293893">func</span>&nbsp;<span class="ident" id="4293898">NewChunkedWriter</span><span class="op" id="4293914">(</span><span class="ident" id="4293915">w</span>&nbsp;<span class="ident" id="4293917"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4293919">.</span><span class="ident" id="4293920">Writer</span><span class="op" id="4293926">)</span>&nbsp;<span class="ident" id="4293928"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4293930">.</span><span class="ident" id="4293931">WriteCloser</span>&nbsp;<span class="op" id="4293943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4293946">return</span>&nbsp;<span class="op" id="4293953">&amp;</span><span class="ident" id="4293954"><a href="/net/http/internal/chunked.go.html#4294116">chunkedWriter</a></span><span class="op" id="4293967">{</span><span class="ident" id="4293968"><a href="/net/http/internal/chunked.go.html#4293915">w</a></span><span class="op" id="4293969">}</span><br>
<span class="lineno"></span><span class="op" id="4293971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="4293974">//&nbsp;Writing&nbsp;to&nbsp;chunkedWriter&nbsp;translates&nbsp;to&nbsp;writing&nbsp;in&nbsp;HTTP&nbsp;chunked&nbsp;Transfer</span><br>
<span class="lineno"></span><span class="comment" id="4294049">//&nbsp;Encoding&nbsp;wire&nbsp;format&nbsp;to&nbsp;the&nbsp;underlying&nbsp;Wire&nbsp;chunkedWriter.</span><br>
<span class="lineno"></span><span class="keyword" id="4294111">type</span>&nbsp;<span class="ident" id="4294116">chunkedWriter</span>&nbsp;<span class="keyword" id="4294130">struct</span>&nbsp;<span class="op" id="4294137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4294140">Wire</span>&nbsp;<span class="ident" id="4294145"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4294147">.</span><span class="ident" id="4294148">Writer</span><br>
<span class="lineno"></span><span class="op" id="4294155">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="4294158">//&nbsp;Write&nbsp;the&nbsp;contents&nbsp;of&nbsp;data&nbsp;as&nbsp;one&nbsp;chunk&nbsp;to&nbsp;Wire.</span><br>
<span class="lineno"></span><span class="comment" id="4294210">//&nbsp;NOTE:&nbsp;Note&nbsp;that&nbsp;the&nbsp;corresponding&nbsp;chunk-writing&nbsp;procedure&nbsp;in&nbsp;Conn.Write&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="4294289">//&nbsp;a&nbsp;bug&nbsp;since&nbsp;it&nbsp;does&nbsp;not&nbsp;check&nbsp;for&nbsp;success&nbsp;of&nbsp;io.WriteString</span><br>
<span class="lineno"></span><span class="keyword" id="4294352">func</span>&nbsp;<span class="op" id="4294357">(</span><span class="ident" id="4294358">cw</span>&nbsp;<span class="op" id="4294361">*</span><span class="ident" id="4294362"><a href="/net/http/internal/chunked.go.html#4294116">chunkedWriter</a></span><span class="op" id="4294375">)</span>&nbsp;<span class="ident" id="4294377">Write</span><span class="op" id="4294382">(</span><span class="ident" id="4294383">data</span>&nbsp;<span class="op" id="4294388">[</span><span class="op" id="4294389">]</span><span class="builtintype" id="4294390">byte</span><span class="op" id="4294394">)</span>&nbsp;<span class="op" id="4294396">(</span><span class="ident" id="4294397">n</span>&nbsp;<span class="builtintype" id="4294399">int</span><span class="op" id="4294402">,</span>&nbsp;<span class="ident" id="4294404">err</span>&nbsp;<span class="builtintype" id="4294408">error</span><span class="op" id="4294413">)</span>&nbsp;<span class="op" id="4294415">{</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4294419">//&nbsp;Don&#39;t&nbsp;send&nbsp;0-length&nbsp;data.&nbsp;It&nbsp;looks&nbsp;like&nbsp;EOF&nbsp;for&nbsp;chunked&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294489">if</span>&nbsp;<span class="builtinfunc" id="4294492">len</span><span class="op" id="4294495">(</span><span class="ident" id="4294496"><a href="/net/http/internal/chunked.go.html#4294383">data</a></span><span class="op" id="4294500">)</span>&nbsp;<span class="op" id="4294502">==</span>&nbsp;<span class="num" id="4294505">0</span>&nbsp;<span class="op" id="4294507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294511">return</span>&nbsp;<span class="num" id="4294518">0</span><span class="op" id="4294519">,</span>&nbsp;<span class="ident" id="4294521">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4294526">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294530">if</span>&nbsp;<span class="ident" id="4294533">_</span><span class="op" id="4294534">,</span>&nbsp;<span class="ident" id="4294536"><a href="/net/http/internal/chunked.go.html#4294404">err</a></span>&nbsp;<span class="op" id="4294540">=</span>&nbsp;<span class="ident" id="4294542"><a href="/net/http/internal/chunked.go.html#4290512">fmt</a></span><span class="op" id="4294545">.</span><span class="ident" id="4294546">Fprintf</span><span class="op" id="4294553">(</span><span class="ident" id="4294554"><a href="/net/http/internal/chunked.go.html#4294358">cw</a></span><span class="op" id="4294556">.</span><span class="ident" id="4294557">Wire</span><span class="op" id="4294561">,</span>&nbsp;<span class="string" id="4294563">&#34;%x\r\n&#34;</span><span class="op" id="4294571">,</span>&nbsp;<span class="builtinfunc" id="4294573">len</span><span class="op" id="4294576">(</span><span class="ident" id="4294577"><a href="/net/http/internal/chunked.go.html#4294383">data</a></span><span class="op" id="4294581">)</span><span class="op" id="4294582">)</span><span class="op" id="4294583">;</span>&nbsp;<span class="ident" id="4294585"><a href="/net/http/internal/chunked.go.html#4294404">err</a></span>&nbsp;<span class="op" id="4294589">!=</span>&nbsp;<span class="ident" id="4294592">nil</span>&nbsp;<span class="op" id="4294596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294600">return</span>&nbsp;<span class="num" id="4294607">0</span><span class="op" id="4294608">,</span>&nbsp;<span class="ident" id="4294610"><a href="/net/http/internal/chunked.go.html#4294404">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4294615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294618">if</span>&nbsp;<span class="ident" id="4294621"><a href="/net/http/internal/chunked.go.html#4294397">n</a></span><span class="op" id="4294622">,</span>&nbsp;<span class="ident" id="4294624"><a href="/net/http/internal/chunked.go.html#4294404">err</a></span>&nbsp;<span class="op" id="4294628">=</span>&nbsp;<span class="ident" id="4294630"><a href="/net/http/internal/chunked.go.html#4294358">cw</a></span><span class="op" id="4294632">.</span><span class="ident" id="4294633">Wire</span><span class="op" id="4294637">.</span><span class="ident" id="4294638">Write</span><span class="op" id="4294643">(</span><span class="ident" id="4294644"><a href="/net/http/internal/chunked.go.html#4294383">data</a></span><span class="op" id="4294648">)</span><span class="op" id="4294649">;</span>&nbsp;<span class="ident" id="4294651"><a href="/net/http/internal/chunked.go.html#4294404">err</a></span>&nbsp;<span class="op" id="4294655">!=</span>&nbsp;<span class="ident" id="4294658">nil</span>&nbsp;<span class="op" id="4294662">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294666">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4294674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294677">if</span>&nbsp;<span class="ident" id="4294680"><a href="/net/http/internal/chunked.go.html#4294397">n</a></span>&nbsp;<span class="op" id="4294682">!=</span>&nbsp;<span class="builtinfunc" id="4294685">len</span><span class="op" id="4294688">(</span><span class="ident" id="4294689"><a href="/net/http/internal/chunked.go.html#4294383">data</a></span><span class="op" id="4294693">)</span>&nbsp;<span class="op" id="4294695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4294699"><a href="/net/http/internal/chunked.go.html#4294404">err</a></span>&nbsp;<span class="op" id="4294703">=</span>&nbsp;<span class="ident" id="4294705"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4294707">.</span><span class="ident" id="4294708">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294724">return</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4294732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4294735">_</span><span class="op" id="4294736">,</span>&nbsp;<span class="ident" id="4294738"><a href="/net/http/internal/chunked.go.html#4294404">err</a></span>&nbsp;<span class="op" id="4294742">=</span>&nbsp;<span class="ident" id="4294744"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4294746">.</span><span class="ident" id="4294747">WriteString</span><span class="op" id="4294758">(</span><span class="ident" id="4294759"><a href="/net/http/internal/chunked.go.html#4294358">cw</a></span><span class="op" id="4294761">.</span><span class="ident" id="4294762">Wire</span><span class="op" id="4294766">,</span>&nbsp;<span class="string" id="4294768">&#34;\r\n&#34;</span><span class="op" id="4294774">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294778">return</span><br>
<span class="lineno"></span><span class="op" id="4294785">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="4294788">func</span>&nbsp;<span class="op" id="4294793">(</span><span class="ident" id="4294794">cw</span>&nbsp;<span class="op" id="4294797">*</span><span class="ident" id="4294798"><a href="/net/http/internal/chunked.go.html#4294116">chunkedWriter</a></span><span class="op" id="4294811">)</span>&nbsp;<span class="ident" id="4294813">Close</span><span class="op" id="4294818">(</span><span class="op" id="4294819">)</span>&nbsp;<span class="builtintype" id="4294821">error</span>&nbsp;<span class="op" id="4294827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4294830">_</span><span class="op" id="4294831">,</span>&nbsp;<span class="ident" id="4294833">err</span>&nbsp;<span class="op" id="4294837">:=</span>&nbsp;<span class="ident" id="4294840"><a href="/net/http/internal/chunked.go.html#4290519">io</a></span><span class="op" id="4294842">.</span><span class="ident" id="4294843">WriteString</span><span class="op" id="4294854">(</span><span class="ident" id="4294855"><a href="/net/http/internal/chunked.go.html#4294794">cw</a></span><span class="op" id="4294857">.</span><span class="ident" id="4294858">Wire</span><span class="op" id="4294862">,</span>&nbsp;<span class="string" id="4294864">&#34;0\r\n&#34;</span><span class="op" id="4294871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294874">return</span>&nbsp;<span class="ident" id="4294881"><a href="/net/http/internal/chunked.go.html#4294833">err</a></span><br>
<span class="lineno"></span><span class="op" id="4294885">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="4294888">func</span>&nbsp;<span class="ident" id="4294893">parseHexUint</span><span class="op" id="4294905">(</span><span class="ident" id="4294906">v</span>&nbsp;<span class="op" id="4294908">[</span><span class="op" id="4294909">]</span><span class="builtintype" id="4294910">byte</span><span class="op" id="4294914">)</span>&nbsp;<span class="op" id="4294916">(</span><span class="ident" id="4294917">n</span>&nbsp;<span class="ident" id="4294919">uint64</span><span class="op" id="4294925">,</span>&nbsp;<span class="ident" id="4294927">err</span>&nbsp;<span class="builtintype" id="4294931">error</span><span class="op" id="4294936">)</span>&nbsp;<span class="op" id="4294938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294941">for</span>&nbsp;<span class="ident" id="4294945">_</span><span class="op" id="4294946">,</span>&nbsp;<span class="ident" id="4294948">b</span>&nbsp;<span class="op" id="4294950">:=</span>&nbsp;<span class="keyword" id="4294953">range</span>&nbsp;<span class="ident" id="4294959"><a href="/net/http/internal/chunked.go.html#4294906">v</a></span>&nbsp;<span class="op" id="4294961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4294965"><a href="/net/http/internal/chunked.go.html#4294917">n</a></span>&nbsp;<span class="op" id="4294967">&lt;&lt;=</span>&nbsp;<span class="num" id="4294971">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294975">switch</span>&nbsp;<span class="op" id="4294982">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4294986">case</span>&nbsp;<span class="string" id="4294991">&#39;0&#39;</span>&nbsp;<span class="op" id="4294995">&lt;=</span>&nbsp;<span class="ident" id="4294998"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295000">&amp;&amp;</span>&nbsp;<span class="ident" id="4295003"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295005">&lt;=</span>&nbsp;<span class="string" id="4295008">&#39;9&#39;</span><span class="op" id="4295011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4295016"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295018">=</span>&nbsp;<span class="ident" id="4295020"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295022">-</span>&nbsp;<span class="string" id="4295024">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4295030">case</span>&nbsp;<span class="string" id="4295035">&#39;a&#39;</span>&nbsp;<span class="op" id="4295039">&lt;=</span>&nbsp;<span class="ident" id="4295042"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295044">&amp;&amp;</span>&nbsp;<span class="ident" id="4295047"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295049">&lt;=</span>&nbsp;<span class="string" id="4295052">&#39;f&#39;</span><span class="op" id="4295055">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4295060"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295062">=</span>&nbsp;<span class="ident" id="4295064"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295066">-</span>&nbsp;<span class="string" id="4295068">&#39;a&#39;</span>&nbsp;<span class="op" id="4295072">+</span>&nbsp;<span class="num" id="4295074">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4295079">case</span>&nbsp;<span class="string" id="4295084">&#39;A&#39;</span>&nbsp;<span class="op" id="4295088">&lt;=</span>&nbsp;<span class="ident" id="4295091"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295093">&amp;&amp;</span>&nbsp;<span class="ident" id="4295096"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295098">&lt;=</span>&nbsp;<span class="string" id="4295101">&#39;F&#39;</span><span class="op" id="4295104">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4295109"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295111">=</span>&nbsp;<span class="ident" id="4295113"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span>&nbsp;<span class="op" id="4295115">-</span>&nbsp;<span class="string" id="4295117">&#39;A&#39;</span>&nbsp;<span class="op" id="4295121">+</span>&nbsp;<span class="num" id="4295123">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4295128">default</span><span class="op" id="4295135">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4295140">return</span>&nbsp;<span class="num" id="4295147">0</span><span class="op" id="4295148">,</span>&nbsp;<span class="ident" id="4295150"><a href="/net/http/internal/chunked.go.html#4290502">errors</a></span><span class="op" id="4295156">.</span><span class="ident" id="4295157">New</span><span class="op" id="4295160">(</span><span class="string" id="4295161">&#34;invalid&nbsp;byte&nbsp;in&nbsp;chunk&nbsp;length&#34;</span><span class="op" id="4295191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4295195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4295199"><a href="/net/http/internal/chunked.go.html#4294917">n</a></span>&nbsp;<span class="op" id="4295201">|=</span>&nbsp;<span class="ident" id="4295204">uint64</span><span class="op" id="4295210">(</span><span class="ident" id="4295211"><a href="/net/http/internal/chunked.go.html#4294948">b</a></span><span class="op" id="4295212">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4295215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4295218">return</span><br>
<span class="lineno"></span><span class="op" id="4295225">}</span>
</div>
</body>
</html>
