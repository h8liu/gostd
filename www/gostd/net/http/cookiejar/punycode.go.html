<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5671792">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5671847">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5671901">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5671952">package</span>&nbsp;<span class="ident" id="5671960">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5671971">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5672034">import</span>&nbsp;<span class="op" id="5672041">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5672044">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5672051">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5672062">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5672077">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5672080">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="5672134">//</span><br>
<span class="lineno"></span><span class="comment" id="5672137">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="5672216">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="5672266">const</span>&nbsp;<span class="op" id="5672272">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672275">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672287">int32</span>&nbsp;<span class="op" id="5672293">=</span>&nbsp;<span class="num" id="5672295">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672299">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672311">int32</span>&nbsp;<span class="op" id="5672317">=</span>&nbsp;<span class="num" id="5672319">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672324">initialBias</span>&nbsp;<span class="builtintype" id="5672336">int32</span>&nbsp;<span class="op" id="5672342">=</span>&nbsp;<span class="num" id="5672344">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672348">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672360">int32</span>&nbsp;<span class="op" id="5672366">=</span>&nbsp;<span class="num" id="5672368">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672373">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672385">int32</span>&nbsp;<span class="op" id="5672391">=</span>&nbsp;<span class="num" id="5672393">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672397">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672409">int32</span>&nbsp;<span class="op" id="5672415">=</span>&nbsp;<span class="num" id="5672417">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672421">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672433">int32</span>&nbsp;<span class="op" id="5672439">=</span>&nbsp;<span class="num" id="5672441">1</span><br>
<span class="lineno"></span><span class="op" id="5672443">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5672446">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="5672524">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="5672539">//</span><br>
<span class="lineno"></span><span class="comment" id="5672542">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="5672614">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="5672694">func</span>&nbsp;<span class="ident" id="5672699">encode</span><span class="op" id="5672705">(</span><span class="ident" id="5672706">prefix</span><span class="op" id="5672712">,</span>&nbsp;<span class="ident" id="5672714">s</span>&nbsp;<span class="builtintype" id="5672716">string</span><span class="op" id="5672722">)</span>&nbsp;<span class="op" id="5672724">(</span><span class="builtintype" id="5672725">string</span><span class="op" id="5672731">,</span>&nbsp;<span class="builtintype" id="5672733">error</span><span class="op" id="5672738">)</span>&nbsp;<span class="op" id="5672740">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672743">output</span>&nbsp;<span class="op" id="5672750">:=</span>&nbsp;<span class="builtinfunc" id="5672753">make</span><span class="op" id="5672757">(</span><span class="op" id="5672758">[</span><span class="op" id="5672759">]</span><span class="builtintype" id="5672760">byte</span><span class="op" id="5672764">,</span>&nbsp;<span class="builtinfunc" id="5672766">len</span><span class="op" id="5672769">(</span><span class="ident" id="5672770">prefix</span><span class="op" id="5672776">)</span><span class="op" id="5672777">,</span>&nbsp;<span class="builtinfunc" id="5672779">len</span><span class="op" id="5672782">(</span><span class="ident" id="5672783">prefix</span><span class="op" id="5672789">)</span><span class="op" id="5672790">+</span><span class="num" id="5672791">1</span><span class="op" id="5672792">+</span><span class="num" id="5672793">2</span><span class="op" id="5672794">*</span><span class="builtinfunc" id="5672795">len</span><span class="op" id="5672798">(</span><span class="ident" id="5672799">s</span><span class="op" id="5672800">)</span><span class="op" id="5672801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5672804">copy</span><span class="op" id="5672808">(</span><span class="ident" id="5672809">output</span><span class="op" id="5672815">,</span>&nbsp;<span class="ident" id="5672817">prefix</span><span class="op" id="5672823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672826">delta</span><span class="op" id="5672831">,</span>&nbsp;<span class="ident" id="5672833">n</span><span class="op" id="5672834">,</span>&nbsp;<span class="ident" id="5672836">bias</span>&nbsp;<span class="op" id="5672841">:=</span>&nbsp;<span class="builtintype" id="5672844">int32</span><span class="op" id="5672849">(</span><span class="num" id="5672850">0</span><span class="op" id="5672851">)</span><span class="op" id="5672852">,</span>&nbsp;<span class="ident" id="5672854">initialN</span><span class="op" id="5672862">,</span>&nbsp;<span class="ident" id="5672864">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672877">b</span><span class="op" id="5672878">,</span>&nbsp;<span class="ident" id="5672880">remaining</span>&nbsp;<span class="op" id="5672890">:=</span>&nbsp;<span class="builtintype" id="5672893">int32</span><span class="op" id="5672898">(</span><span class="num" id="5672899">0</span><span class="op" id="5672900">)</span><span class="op" id="5672901">,</span>&nbsp;<span class="builtintype" id="5672903">int32</span><span class="op" id="5672908">(</span><span class="num" id="5672909">0</span><span class="op" id="5672910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672913">for</span>&nbsp;<span class="ident" id="5672917">_</span><span class="op" id="5672918">,</span>&nbsp;<span class="ident" id="5672920">r</span>&nbsp;<span class="op" id="5672922">:=</span>&nbsp;<span class="keyword" id="5672925">range</span>&nbsp;<span class="ident" id="5672931">s</span>&nbsp;<span class="op" id="5672933">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672937">if</span>&nbsp;<span class="ident" id="5672940">r</span>&nbsp;<span class="op" id="5672942">&lt;</span>&nbsp;<span class="num" id="5672944">0x80</span>&nbsp;<span class="op" id="5672949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672954">b</span><span class="op" id="5672955">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672961">output</span>&nbsp;<span class="op" id="5672968">=</span>&nbsp;<span class="builtinfunc" id="5672970">append</span><span class="op" id="5672976">(</span><span class="ident" id="5672977">output</span><span class="op" id="5672983">,</span>&nbsp;<span class="builtintype" id="5672985">byte</span><span class="op" id="5672989">(</span><span class="ident" id="5672990">r</span><span class="op" id="5672991">)</span><span class="op" id="5672992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5672996">}</span>&nbsp;<span class="keyword" id="5672998">else</span>&nbsp;<span class="op" id="5673003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673008">remaining</span><span class="op" id="5673017">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673028">h</span>&nbsp;<span class="op" id="5673030">:=</span>&nbsp;<span class="ident" id="5673033">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673036">if</span>&nbsp;<span class="ident" id="5673039">b</span>&nbsp;<span class="op" id="5673041">&gt;</span>&nbsp;<span class="num" id="5673043">0</span>&nbsp;<span class="op" id="5673045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673049">output</span>&nbsp;<span class="op" id="5673056">=</span>&nbsp;<span class="builtinfunc" id="5673058">append</span><span class="op" id="5673064">(</span><span class="ident" id="5673065">output</span><span class="op" id="5673071">,</span>&nbsp;<span class="string" id="5673073">&#39;-&#39;</span><span class="op" id="5673076">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673082">for</span>&nbsp;<span class="ident" id="5673086">remaining</span>&nbsp;<span class="op" id="5673096">!=</span>&nbsp;<span class="num" id="5673099">0</span>&nbsp;<span class="op" id="5673101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673105">m</span>&nbsp;<span class="op" id="5673107">:=</span>&nbsp;<span class="builtintype" id="5673110">int32</span><span class="op" id="5673115">(</span><span class="num" id="5673116">0x7fffffff</span><span class="op" id="5673126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673130">for</span>&nbsp;<span class="ident" id="5673134">_</span><span class="op" id="5673135">,</span>&nbsp;<span class="ident" id="5673137">r</span>&nbsp;<span class="op" id="5673139">:=</span>&nbsp;<span class="keyword" id="5673142">range</span>&nbsp;<span class="ident" id="5673148">s</span>&nbsp;<span class="op" id="5673150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673155">if</span>&nbsp;<span class="ident" id="5673158">m</span>&nbsp;<span class="op" id="5673160">&gt;</span>&nbsp;<span class="ident" id="5673162">r</span>&nbsp;<span class="op" id="5673164">&amp;&amp;</span>&nbsp;<span class="ident" id="5673167">r</span>&nbsp;<span class="op" id="5673169">&gt;=</span>&nbsp;<span class="ident" id="5673172">n</span>&nbsp;<span class="op" id="5673174">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673180">m</span>&nbsp;<span class="op" id="5673182">=</span>&nbsp;<span class="ident" id="5673184">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673197">delta</span>&nbsp;<span class="op" id="5673203">+=</span>&nbsp;<span class="op" id="5673206">(</span><span class="ident" id="5673207">m</span>&nbsp;<span class="op" id="5673209">-</span>&nbsp;<span class="ident" id="5673211">n</span><span class="op" id="5673212">)</span>&nbsp;<span class="op" id="5673214">*</span>&nbsp;<span class="op" id="5673216">(</span><span class="ident" id="5673217">h</span>&nbsp;<span class="op" id="5673219">+</span>&nbsp;<span class="num" id="5673221">1</span><span class="op" id="5673222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673226">if</span>&nbsp;<span class="ident" id="5673229">delta</span>&nbsp;<span class="op" id="5673235">&lt;</span>&nbsp;<span class="num" id="5673237">0</span>&nbsp;<span class="op" id="5673239">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673244">return</span>&nbsp;<span class="string" id="5673251">&#34;&#34;</span><span class="op" id="5673253">,</span>&nbsp;<span class="ident" id="5673255">fmt</span><span class="op" id="5673258">.</span><span class="ident" id="5673259">Errorf</span><span class="op" id="5673265">(</span><span class="string" id="5673266">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5673295">,</span>&nbsp;<span class="ident" id="5673297">s</span><span class="op" id="5673298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673306">n</span>&nbsp;<span class="op" id="5673308">=</span>&nbsp;<span class="ident" id="5673310">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673314">for</span>&nbsp;<span class="ident" id="5673318">_</span><span class="op" id="5673319">,</span>&nbsp;<span class="ident" id="5673321">r</span>&nbsp;<span class="op" id="5673323">:=</span>&nbsp;<span class="keyword" id="5673326">range</span>&nbsp;<span class="ident" id="5673332">s</span>&nbsp;<span class="op" id="5673334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673339">if</span>&nbsp;<span class="ident" id="5673342">r</span>&nbsp;<span class="op" id="5673344">&lt;</span>&nbsp;<span class="ident" id="5673346">n</span>&nbsp;<span class="op" id="5673348">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673354">delta</span><span class="op" id="5673359">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673366">if</span>&nbsp;<span class="ident" id="5673369">delta</span>&nbsp;<span class="op" id="5673375">&lt;</span>&nbsp;<span class="num" id="5673377">0</span>&nbsp;<span class="op" id="5673379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673386">return</span>&nbsp;<span class="string" id="5673393">&#34;&#34;</span><span class="op" id="5673395">,</span>&nbsp;<span class="ident" id="5673397">fmt</span><span class="op" id="5673400">.</span><span class="ident" id="5673401">Errorf</span><span class="op" id="5673407">(</span><span class="string" id="5673408">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5673437">,</span>&nbsp;<span class="ident" id="5673439">s</span><span class="op" id="5673440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673452">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673469">if</span>&nbsp;<span class="ident" id="5673472">r</span>&nbsp;<span class="op" id="5673474">&gt;</span>&nbsp;<span class="ident" id="5673476">n</span>&nbsp;<span class="op" id="5673478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673484">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673501">q</span>&nbsp;<span class="op" id="5673503">:=</span>&nbsp;<span class="ident" id="5673506">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673515">for</span>&nbsp;<span class="ident" id="5673519">k</span>&nbsp;<span class="op" id="5673521">:=</span>&nbsp;<span class="ident" id="5673524">base</span><span class="op" id="5673528">;</span>&nbsp;<span class="op" id="5673530">;</span>&nbsp;<span class="ident" id="5673532">k</span>&nbsp;<span class="op" id="5673534">+=</span>&nbsp;<span class="ident" id="5673537">base</span>&nbsp;<span class="op" id="5673542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673548">t</span>&nbsp;<span class="op" id="5673550">:=</span>&nbsp;<span class="ident" id="5673553">k</span>&nbsp;<span class="op" id="5673555">-</span>&nbsp;<span class="ident" id="5673557">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673566">if</span>&nbsp;<span class="ident" id="5673569">t</span>&nbsp;<span class="op" id="5673571">&lt;</span>&nbsp;<span class="ident" id="5673573">tmin</span>&nbsp;<span class="op" id="5673578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673585">t</span>&nbsp;<span class="op" id="5673587">=</span>&nbsp;<span class="ident" id="5673589">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673598">}</span>&nbsp;<span class="keyword" id="5673600">else</span>&nbsp;<span class="keyword" id="5673605">if</span>&nbsp;<span class="ident" id="5673608">t</span>&nbsp;<span class="op" id="5673610">&gt;</span>&nbsp;<span class="ident" id="5673612">tmax</span>&nbsp;<span class="op" id="5673617">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673624">t</span>&nbsp;<span class="op" id="5673626">=</span>&nbsp;<span class="ident" id="5673628">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673643">if</span>&nbsp;<span class="ident" id="5673646">q</span>&nbsp;<span class="op" id="5673648">&lt;</span>&nbsp;<span class="ident" id="5673650">t</span>&nbsp;<span class="op" id="5673652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673659">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673669">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673675">output</span>&nbsp;<span class="op" id="5673682">=</span>&nbsp;<span class="builtinfunc" id="5673684">append</span><span class="op" id="5673690">(</span><span class="ident" id="5673691">output</span><span class="op" id="5673697">,</span>&nbsp;<span class="ident" id="5673699">encodeDigit</span><span class="op" id="5673710">(</span><span class="ident" id="5673711">t</span><span class="op" id="5673712">+</span><span class="op" id="5673713">(</span><span class="ident" id="5673714">q</span><span class="op" id="5673715">-</span><span class="ident" id="5673716">t</span><span class="op" id="5673717">)</span><span class="op" id="5673718">%</span><span class="op" id="5673719">(</span><span class="ident" id="5673720">base</span><span class="op" id="5673724">-</span><span class="ident" id="5673725">t</span><span class="op" id="5673726">)</span><span class="op" id="5673727">)</span><span class="op" id="5673728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673734">q</span>&nbsp;<span class="op" id="5673736">=</span>&nbsp;<span class="op" id="5673738">(</span><span class="ident" id="5673739">q</span>&nbsp;<span class="op" id="5673741">-</span>&nbsp;<span class="ident" id="5673743">t</span><span class="op" id="5673744">)</span>&nbsp;<span class="op" id="5673746">/</span>&nbsp;<span class="op" id="5673748">(</span><span class="ident" id="5673749">base</span>&nbsp;<span class="op" id="5673754">-</span>&nbsp;<span class="ident" id="5673756">t</span><span class="op" id="5673757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673767">output</span>&nbsp;<span class="op" id="5673774">=</span>&nbsp;<span class="builtinfunc" id="5673776">append</span><span class="op" id="5673782">(</span><span class="ident" id="5673783">output</span><span class="op" id="5673789">,</span>&nbsp;<span class="ident" id="5673791">encodeDigit</span><span class="op" id="5673802">(</span><span class="ident" id="5673803">q</span><span class="op" id="5673804">)</span><span class="op" id="5673805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673810">bias</span>&nbsp;<span class="op" id="5673815">=</span>&nbsp;<span class="ident" id="5673817">adapt</span><span class="op" id="5673822">(</span><span class="ident" id="5673823">delta</span><span class="op" id="5673828">,</span>&nbsp;<span class="ident" id="5673830">h</span><span class="op" id="5673831">+</span><span class="num" id="5673832">1</span><span class="op" id="5673833">,</span>&nbsp;<span class="ident" id="5673835">h</span>&nbsp;<span class="op" id="5673837">==</span>&nbsp;<span class="ident" id="5673840">b</span><span class="op" id="5673841">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673846">delta</span>&nbsp;<span class="op" id="5673852">=</span>&nbsp;<span class="num" id="5673854">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673859">h</span><span class="op" id="5673860">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673866">remaining</span><span class="op" id="5673875">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673884">delta</span><span class="op" id="5673889">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673894">n</span><span class="op" id="5673895">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673902">return</span>&nbsp;<span class="builtintype" id="5673909">string</span><span class="op" id="5673915">(</span><span class="ident" id="5673916">output</span><span class="op" id="5673922">)</span><span class="op" id="5673923">,</span>&nbsp;<span class="ident" id="5673925">nil</span><br>
<span class="lineno"></span><span class="op" id="5673929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="5673932">func</span>&nbsp;<span class="ident" id="5673937">encodeDigit</span><span class="op" id="5673948">(</span><span class="ident" id="5673949">digit</span>&nbsp;<span class="builtintype" id="5673955">int32</span><span class="op" id="5673960">)</span>&nbsp;<span class="builtintype" id="5673962">byte</span>&nbsp;<span class="op" id="5673967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673970">switch</span>&nbsp;<span class="op" id="5673977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673980">case</span>&nbsp;<span class="num" id="5673985">0</span>&nbsp;<span class="op" id="5673987">&lt;=</span>&nbsp;<span class="ident" id="5673990">digit</span>&nbsp;<span class="op" id="5673996">&amp;&amp;</span>&nbsp;<span class="ident" id="5673999">digit</span>&nbsp;<span class="op" id="5674005">&lt;</span>&nbsp;<span class="num" id="5674007">26</span><span class="op" id="5674009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674013">return</span>&nbsp;<span class="builtintype" id="5674020">byte</span><span class="op" id="5674024">(</span><span class="ident" id="5674025">digit</span>&nbsp;<span class="op" id="5674031">+</span>&nbsp;<span class="string" id="5674033">&#39;a&#39;</span><span class="op" id="5674036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674039">case</span>&nbsp;<span class="num" id="5674044">26</span>&nbsp;<span class="op" id="5674047">&lt;=</span>&nbsp;<span class="ident" id="5674050">digit</span>&nbsp;<span class="op" id="5674056">&amp;&amp;</span>&nbsp;<span class="ident" id="5674059">digit</span>&nbsp;<span class="op" id="5674065">&lt;</span>&nbsp;<span class="num" id="5674067">36</span><span class="op" id="5674069">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674073">return</span>&nbsp;<span class="builtintype" id="5674080">byte</span><span class="op" id="5674084">(</span><span class="ident" id="5674085">digit</span>&nbsp;<span class="op" id="5674091">+</span>&nbsp;<span class="op" id="5674093">(</span><span class="string" id="5674094">&#39;0&#39;</span>&nbsp;<span class="op" id="5674098">-</span>&nbsp;<span class="num" id="5674100">26</span><span class="op" id="5674102">)</span><span class="op" id="5674103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5674109">panic</span><span class="op" id="5674114">(</span><span class="string" id="5674115">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="5674163">)</span><br>
<span class="lineno"></span><span class="op" id="5674165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5674168">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="5674235">func</span>&nbsp;<span class="ident" id="5674240">adapt</span><span class="op" id="5674245">(</span><span class="ident" id="5674246">delta</span><span class="op" id="5674251">,</span>&nbsp;<span class="ident" id="5674253">numPoints</span>&nbsp;<span class="builtintype" id="5674263">int32</span><span class="op" id="5674268">,</span>&nbsp;<span class="ident" id="5674270">firstTime</span>&nbsp;<span class="builtintype" id="5674280">bool</span><span class="op" id="5674284">)</span>&nbsp;<span class="builtintype" id="5674286">int32</span>&nbsp;<span class="op" id="5674292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674295">if</span>&nbsp;<span class="ident" id="5674298">firstTime</span>&nbsp;<span class="op" id="5674308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674312">delta</span>&nbsp;<span class="op" id="5674318">/=</span>&nbsp;<span class="ident" id="5674321">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674327">}</span>&nbsp;<span class="keyword" id="5674329">else</span>&nbsp;<span class="op" id="5674334">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674338">delta</span>&nbsp;<span class="op" id="5674344">/=</span>&nbsp;<span class="num" id="5674347">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674353">delta</span>&nbsp;<span class="op" id="5674359">+=</span>&nbsp;<span class="ident" id="5674362">delta</span>&nbsp;<span class="op" id="5674368">/</span>&nbsp;<span class="ident" id="5674370">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674381">k</span>&nbsp;<span class="op" id="5674383">:=</span>&nbsp;<span class="builtintype" id="5674386">int32</span><span class="op" id="5674391">(</span><span class="num" id="5674392">0</span><span class="op" id="5674393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674396">for</span>&nbsp;<span class="ident" id="5674400">delta</span>&nbsp;<span class="op" id="5674406">&gt;</span>&nbsp;<span class="op" id="5674408">(</span><span class="op" id="5674409">(</span><span class="ident" id="5674410">base</span><span class="op" id="5674414">-</span><span class="ident" id="5674415">tmin</span><span class="op" id="5674419">)</span><span class="op" id="5674420">*</span><span class="ident" id="5674421">tmax</span><span class="op" id="5674425">)</span><span class="op" id="5674426">/</span><span class="num" id="5674427">2</span>&nbsp;<span class="op" id="5674429">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674433">delta</span>&nbsp;<span class="op" id="5674439">/=</span>&nbsp;<span class="ident" id="5674442">base</span>&nbsp;<span class="op" id="5674447">-</span>&nbsp;<span class="ident" id="5674449">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674456">k</span>&nbsp;<span class="op" id="5674458">+=</span>&nbsp;<span class="ident" id="5674461">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674470">return</span>&nbsp;<span class="ident" id="5674477">k</span>&nbsp;<span class="op" id="5674479">+</span>&nbsp;<span class="op" id="5674481">(</span><span class="ident" id="5674482">base</span><span class="op" id="5674486">-</span><span class="ident" id="5674487">tmin</span><span class="op" id="5674491">+</span><span class="num" id="5674492">1</span><span class="op" id="5674493">)</span><span class="op" id="5674494">*</span><span class="ident" id="5674495">delta</span><span class="op" id="5674500">/</span><span class="op" id="5674501">(</span><span class="ident" id="5674502">delta</span><span class="op" id="5674507">+</span><span class="ident" id="5674508">skew</span><span class="op" id="5674512">)</span><br>
<span class="lineno"></span><span class="op" id="5674514">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5674517">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5674594">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5674643">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="5674697">const</span>&nbsp;<span class="ident" id="5674703">acePrefix</span>&nbsp;<span class="op" id="5674713">=</span>&nbsp;<span class="string" id="5674715">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5674723">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="5674800">//&nbsp;toASCII(&#34;b√ºcher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5674870">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="5674904">func</span>&nbsp;<span class="ident" id="5674909">toASCII</span><span class="op" id="5674916">(</span><span class="ident" id="5674917">s</span>&nbsp;<span class="builtintype" id="5674919">string</span><span class="op" id="5674925">)</span>&nbsp;<span class="op" id="5674927">(</span><span class="builtintype" id="5674928">string</span><span class="op" id="5674934">,</span>&nbsp;<span class="builtintype" id="5674936">error</span><span class="op" id="5674941">)</span>&nbsp;<span class="op" id="5674943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674946">if</span>&nbsp;<span class="ident" id="5674949">ascii</span><span class="op" id="5674954">(</span><span class="ident" id="5674955">s</span><span class="op" id="5674956">)</span>&nbsp;<span class="op" id="5674958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674962">return</span>&nbsp;<span class="ident" id="5674969">s</span><span class="op" id="5674970">,</span>&nbsp;<span class="ident" id="5674972">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674980">labels</span>&nbsp;<span class="op" id="5674987">:=</span>&nbsp;<span class="ident" id="5674990">strings</span><span class="op" id="5674997">.</span><span class="ident" id="5674998">Split</span><span class="op" id="5675003">(</span><span class="ident" id="5675004">s</span><span class="op" id="5675005">,</span>&nbsp;<span class="string" id="5675007">&#34;.&#34;</span><span class="op" id="5675010">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675013">for</span>&nbsp;<span class="ident" id="5675017">i</span><span class="op" id="5675018">,</span>&nbsp;<span class="ident" id="5675020">label</span>&nbsp;<span class="op" id="5675026">:=</span>&nbsp;<span class="keyword" id="5675029">range</span>&nbsp;<span class="ident" id="5675035">labels</span>&nbsp;<span class="op" id="5675042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675046">if</span>&nbsp;<span class="op" id="5675049">!</span><span class="ident" id="5675050">ascii</span><span class="op" id="5675055">(</span><span class="ident" id="5675056">label</span><span class="op" id="5675061">)</span>&nbsp;<span class="op" id="5675063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5675068">a</span><span class="op" id="5675069">,</span>&nbsp;<span class="ident" id="5675071">err</span>&nbsp;<span class="op" id="5675075">:=</span>&nbsp;<span class="ident" id="5675078">encode</span><span class="op" id="5675084">(</span><span class="ident" id="5675085">acePrefix</span><span class="op" id="5675094">,</span>&nbsp;<span class="ident" id="5675096">label</span><span class="op" id="5675101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675106">if</span>&nbsp;<span class="ident" id="5675109">err</span>&nbsp;<span class="op" id="5675113">!=</span>&nbsp;<span class="ident" id="5675116">nil</span>&nbsp;<span class="op" id="5675120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675126">return</span>&nbsp;<span class="string" id="5675133">&#34;&#34;</span><span class="op" id="5675135">,</span>&nbsp;<span class="ident" id="5675137">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5675149">labels</span><span class="op" id="5675155">[</span><span class="ident" id="5675156">i</span><span class="op" id="5675157">]</span>&nbsp;<span class="op" id="5675159">=</span>&nbsp;<span class="ident" id="5675161">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675171">return</span>&nbsp;<span class="ident" id="5675178">strings</span><span class="op" id="5675185">.</span><span class="ident" id="5675186">Join</span><span class="op" id="5675190">(</span><span class="ident" id="5675191">labels</span><span class="op" id="5675197">,</span>&nbsp;<span class="string" id="5675199">&#34;.&#34;</span><span class="op" id="5675202">)</span><span class="op" id="5675203">,</span>&nbsp;<span class="ident" id="5675205">nil</span><br>
<span class="lineno">150</span><span class="op" id="5675209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5675212">func</span>&nbsp;<span class="ident" id="5675217">ascii</span><span class="op" id="5675222">(</span><span class="ident" id="5675223">s</span>&nbsp;<span class="builtintype" id="5675225">string</span><span class="op" id="5675231">)</span>&nbsp;<span class="builtintype" id="5675233">bool</span>&nbsp;<span class="op" id="5675238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675241">for</span>&nbsp;<span class="ident" id="5675245">i</span>&nbsp;<span class="op" id="5675247">:=</span>&nbsp;<span class="num" id="5675250">0</span><span class="op" id="5675251">;</span>&nbsp;<span class="ident" id="5675253">i</span>&nbsp;<span class="op" id="5675255">&lt;</span>&nbsp;<span class="builtinfunc" id="5675257">len</span><span class="op" id="5675260">(</span><span class="ident" id="5675261">s</span><span class="op" id="5675262">)</span><span class="op" id="5675263">;</span>&nbsp;<span class="ident" id="5675265">i</span><span class="op" id="5675266">++</span>&nbsp;<span class="op" id="5675269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675273">if</span>&nbsp;<span class="ident" id="5675276">s</span><span class="op" id="5675277">[</span><span class="ident" id="5675278">i</span><span class="op" id="5675279">]</span>&nbsp;<span class="op" id="5675281">&gt;=</span>&nbsp;<span class="ident" id="5675284">utf8</span><span class="op" id="5675288">.</span><span class="ident" id="5675289">RuneSelf</span>&nbsp;<span class="op" id="5675298">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675303">return</span>&nbsp;<span class="builtintype" id="5675310">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675324">return</span>&nbsp;<span class="builtintype" id="5675331">true</span><br>
<span class="lineno"></span><span class="op" id="5675336">}</span>
</div>
</body>
</html>
