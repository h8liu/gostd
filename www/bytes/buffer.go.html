<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3175956">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3176011">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3176065">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3176116">package</span>&nbsp;<span class="ident" id="3176124">bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3176131">//&nbsp;Simple&nbsp;byte&nbsp;buffer&nbsp;for&nbsp;marshaling&nbsp;data.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3176175">import</span>&nbsp;<span class="op" id="3176182">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3176185">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3176195">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3176201">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3176216">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3176219">//&nbsp;A&nbsp;Buffer&nbsp;is&nbsp;a&nbsp;variable-sized&nbsp;buffer&nbsp;of&nbsp;bytes&nbsp;with&nbsp;Read&nbsp;and&nbsp;Write&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="3176296">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;Buffer&nbsp;is&nbsp;an&nbsp;empty&nbsp;buffer&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="3176358">type</span>&nbsp;<span class="ident" id="3176363">Buffer</span>&nbsp;<span class="keyword" id="3176370">struct</span>&nbsp;<span class="op" id="3176377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176380">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3176390">[</span><span class="op" id="3176391">]</span><span class="builtintype" id="3176392">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3176408">//&nbsp;contents&nbsp;are&nbsp;the&nbsp;bytes&nbsp;buf[off&nbsp;:&nbsp;len(buf)]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176455">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3176465">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3176483">//&nbsp;read&nbsp;at&nbsp;&amp;buf[off],&nbsp;write&nbsp;at&nbsp;&amp;buf[len(buf)]</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176530">runeBytes</span>&nbsp;<span class="op" id="3176540">[</span><span class="ident" id="3176541"><a href="/bytes/buffer.go.html#3176201">utf8</a></span><span class="op" id="3176545">.</span><span class="ident" id="3176546">UTFMax</span><span class="op" id="3176552">]</span><span class="builtintype" id="3176553">byte</span>&nbsp;<span class="comment" id="3176558">//&nbsp;avoid&nbsp;allocation&nbsp;of&nbsp;slice&nbsp;on&nbsp;each&nbsp;WriteByte&nbsp;or&nbsp;Rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176614">bootstrap</span>&nbsp;<span class="op" id="3176624">[</span><span class="num" id="3176625">64</span><span class="op" id="3176627">]</span><span class="builtintype" id="3176628">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3176642">//&nbsp;memory&nbsp;to&nbsp;hold&nbsp;first&nbsp;slice;&nbsp;helps&nbsp;small&nbsp;buffers&nbsp;(Printf)&nbsp;avoid&nbsp;allocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176721">lastRead</span>&nbsp;&nbsp;<span class="ident" id="3176731"><a href="/bytes/buffer.go.html#3176960">readOp</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3176749">//&nbsp;last&nbsp;read&nbsp;operation,&nbsp;so&nbsp;that&nbsp;Unread*&nbsp;can&nbsp;work&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="op" id="3176809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="3176812">//&nbsp;The&nbsp;readOp&nbsp;constants&nbsp;describe&nbsp;the&nbsp;last&nbsp;action&nbsp;performed&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="3176874">//&nbsp;the&nbsp;buffer,&nbsp;so&nbsp;that&nbsp;UnreadRune&nbsp;and&nbsp;UnreadByte&nbsp;can</span><br>
<span class="lineno"></span><span class="comment" id="3176927">//&nbsp;check&nbsp;for&nbsp;invalid&nbsp;usage.</span><br>
<span class="lineno"></span><span class="keyword" id="3176955">type</span>&nbsp;<span class="ident" id="3176960">readOp</span>&nbsp;<span class="builtintype" id="3176967">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3176972">const</span>&nbsp;<span class="op" id="3176978">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176981">opInvalid</span>&nbsp;&nbsp;<span class="ident" id="3176992"><a href="/bytes/buffer.go.html#3176960">readOp</a></span>&nbsp;<span class="op" id="3176999">=</span>&nbsp;<span class="ident" id="3177001">iota</span>&nbsp;<span class="comment" id="3177006">//&nbsp;Non-read&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177030">opReadRune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3177055">//&nbsp;Read&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177070">opRead</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3177095">//&nbsp;Any&nbsp;other&nbsp;read&nbsp;operation.</span><br>
<span class="lineno"></span><span class="op" id="3177124">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="3177127">//&nbsp;ErrTooLarge&nbsp;is&nbsp;passed&nbsp;to&nbsp;panic&nbsp;if&nbsp;memory&nbsp;cannot&nbsp;be&nbsp;allocated&nbsp;to&nbsp;store&nbsp;data&nbsp;in&nbsp;a&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3177218">var</span>&nbsp;<span class="ident" id="3177222">ErrTooLarge</span>&nbsp;<span class="op" id="3177234">=</span>&nbsp;<span class="ident" id="3177236"><a href="/bytes/buffer.go.html#3176185">errors</a></span><span class="op" id="3177242">.</span><span class="ident" id="3177243">New</span><span class="op" id="3177246">(</span><span class="string" id="3177247">&#34;bytes.Buffer:&nbsp;too&nbsp;large&#34;</span><span class="op" id="3177272">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3177275">//&nbsp;Bytes&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer;</span><br>
<span class="lineno">40</span><span class="comment" id="3177353">//&nbsp;len(b.Bytes())&nbsp;==&nbsp;b.Len().&nbsp;&nbsp;If&nbsp;the&nbsp;caller&nbsp;changes&nbsp;the&nbsp;contents&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3177426">//&nbsp;returned&nbsp;slice,&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;buffer&nbsp;will&nbsp;change&nbsp;provided&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="3177499">//&nbsp;are&nbsp;no&nbsp;intervening&nbsp;method&nbsp;calls&nbsp;on&nbsp;the&nbsp;Buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3177549">func</span>&nbsp;<span class="op" id="3177554">(</span><span class="ident" id="3177555">b</span>&nbsp;<span class="op" id="3177557">*</span><span class="ident" id="3177558"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3177564">)</span>&nbsp;<span class="ident" id="3177566">Bytes</span><span class="op" id="3177571">(</span><span class="op" id="3177572">)</span>&nbsp;<span class="op" id="3177574">[</span><span class="op" id="3177575">]</span><span class="builtintype" id="3177576">byte</span>&nbsp;<span class="op" id="3177581">{</span>&nbsp;<span class="keyword" id="3177583">return</span>&nbsp;<span class="ident" id="3177590"><a href="/bytes/buffer.go.html#3177555">b</a></span><span class="op" id="3177591">.</span><span class="ident" id="3177592">buf</span><span class="op" id="3177595">[</span><span class="ident" id="3177596"><a href="/bytes/buffer.go.html#3177555">b</a></span><span class="op" id="3177597">.</span><span class="ident" id="3177598">off</span><span class="op" id="3177601">:</span><span class="op" id="3177602">]</span>&nbsp;<span class="op" id="3177604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3177607">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3177674">//&nbsp;as&nbsp;a&nbsp;string.&nbsp;&nbsp;If&nbsp;the&nbsp;Buffer&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;it&nbsp;returns&nbsp;&#34;&lt;nil&gt;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3177743">func</span>&nbsp;<span class="op" id="3177748">(</span><span class="ident" id="3177749">b</span>&nbsp;<span class="op" id="3177751">*</span><span class="ident" id="3177752"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3177758">)</span>&nbsp;<span class="ident" id="3177760">String</span><span class="op" id="3177766">(</span><span class="op" id="3177767">)</span>&nbsp;<span class="builtintype" id="3177769">string</span>&nbsp;<span class="op" id="3177776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3177779">if</span>&nbsp;<span class="ident" id="3177782"><a href="/bytes/buffer.go.html#3177749">b</a></span>&nbsp;<span class="op" id="3177784">==</span>&nbsp;<span class="ident" id="3177787">nil</span>&nbsp;<span class="op" id="3177791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3177795">//&nbsp;Special&nbsp;case,&nbsp;useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3177835">return</span>&nbsp;<span class="string" id="3177842">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3177851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3177854">return</span>&nbsp;<span class="builtintype" id="3177861">string</span><span class="op" id="3177867">(</span><span class="ident" id="3177868"><a href="/bytes/buffer.go.html#3177749">b</a></span><span class="op" id="3177869">.</span><span class="ident" id="3177870">buf</span><span class="op" id="3177873">[</span><span class="ident" id="3177874"><a href="/bytes/buffer.go.html#3177749">b</a></span><span class="op" id="3177875">.</span><span class="ident" id="3177876">off</span><span class="op" id="3177879">:</span><span class="op" id="3177880">]</span><span class="op" id="3177881">)</span><br>
<span class="lineno"></span><span class="op" id="3177883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="3177886">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer;</span><br>
<span class="lineno"></span><span class="comment" id="3177958">//&nbsp;b.Len()&nbsp;==&nbsp;len(b.Bytes()).</span><br>
<span class="lineno"></span><span class="keyword" id="3177988">func</span>&nbsp;<span class="op" id="3177993">(</span><span class="ident" id="3177994">b</span>&nbsp;<span class="op" id="3177996">*</span><span class="ident" id="3177997"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3178003">)</span>&nbsp;<span class="ident" id="3178005">Len</span><span class="op" id="3178008">(</span><span class="op" id="3178009">)</span>&nbsp;<span class="builtintype" id="3178011">int</span>&nbsp;<span class="op" id="3178015">{</span>&nbsp;<span class="keyword" id="3178017">return</span>&nbsp;<span class="builtinfunc" id="3178024">len</span><span class="op" id="3178027">(</span><span class="ident" id="3178028"><a href="/bytes/buffer.go.html#3177994">b</a></span><span class="op" id="3178029">.</span><span class="ident" id="3178030">buf</span><span class="op" id="3178033">)</span>&nbsp;<span class="op" id="3178035">-</span>&nbsp;<span class="ident" id="3178037"><a href="/bytes/buffer.go.html#3177994">b</a></span><span class="op" id="3178038">.</span><span class="ident" id="3178039">off</span>&nbsp;<span class="op" id="3178043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3178046">//&nbsp;Truncate&nbsp;discards&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;n&nbsp;unread&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno">60</span><span class="comment" id="3178117">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or&nbsp;greater&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3178189">func</span>&nbsp;<span class="op" id="3178194">(</span><span class="ident" id="3178195">b</span>&nbsp;<span class="op" id="3178197">*</span><span class="ident" id="3178198"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3178204">)</span>&nbsp;<span class="ident" id="3178206">Truncate</span><span class="op" id="3178214">(</span><span class="ident" id="3178215">n</span>&nbsp;<span class="builtintype" id="3178217">int</span><span class="op" id="3178220">)</span>&nbsp;<span class="op" id="3178222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3178225"><a href="/bytes/buffer.go.html#3178195">b</a></span><span class="op" id="3178226">.</span><span class="ident" id="3178227">lastRead</span>&nbsp;<span class="op" id="3178236">=</span>&nbsp;<span class="ident" id="3178238"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178249">switch</span>&nbsp;<span class="op" id="3178256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178259">case</span>&nbsp;<span class="ident" id="3178264"><a href="/bytes/buffer.go.html#3178215">n</a></span>&nbsp;<span class="op" id="3178266">&lt;</span>&nbsp;<span class="num" id="3178268">0</span>&nbsp;<span class="op" id="3178270">||</span>&nbsp;<span class="ident" id="3178273"><a href="/bytes/buffer.go.html#3178215">n</a></span>&nbsp;<span class="op" id="3178275">&gt;</span>&nbsp;<span class="ident" id="3178277"><a href="/bytes/buffer.go.html#3178195">b</a></span><span class="op" id="3178278">.</span><span class="ident" id="3178279">Len</span><span class="op" id="3178282">(</span><span class="op" id="3178283">)</span><span class="op" id="3178284">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3178288">panic</span><span class="op" id="3178293">(</span><span class="string" id="3178294">&#34;bytes.Buffer:&nbsp;truncation&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="3178333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178336">case</span>&nbsp;<span class="ident" id="3178341"><a href="/bytes/buffer.go.html#3178215">n</a></span>&nbsp;<span class="op" id="3178343">==</span>&nbsp;<span class="num" id="3178346">0</span><span class="op" id="3178347">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3178351">//&nbsp;Reuse&nbsp;buffer&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3178376"><a href="/bytes/buffer.go.html#3178195">b</a></span><span class="op" id="3178377">.</span><span class="ident" id="3178378">off</span>&nbsp;<span class="op" id="3178382">=</span>&nbsp;<span class="num" id="3178384">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3178387">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3178390"><a href="/bytes/buffer.go.html#3178195">b</a></span><span class="op" id="3178391">.</span><span class="ident" id="3178392">buf</span>&nbsp;<span class="op" id="3178396">=</span>&nbsp;<span class="ident" id="3178398"><a href="/bytes/buffer.go.html#3178195">b</a></span><span class="op" id="3178399">.</span><span class="ident" id="3178400">buf</span><span class="op" id="3178403">[</span><span class="num" id="3178404">0</span>&nbsp;<span class="op" id="3178406">:</span>&nbsp;<span class="ident" id="3178408"><a href="/bytes/buffer.go.html#3178195">b</a></span><span class="op" id="3178409">.</span><span class="ident" id="3178410">off</span><span class="op" id="3178413">+</span><span class="ident" id="3178414"><a href="/bytes/buffer.go.html#3178215">n</a></span><span class="op" id="3178415">]</span><br>
<span class="lineno"></span><span class="op" id="3178417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3178420">//&nbsp;Reset&nbsp;resets&nbsp;the&nbsp;buffer&nbsp;so&nbsp;it&nbsp;has&nbsp;no&nbsp;content.</span><br>
<span class="lineno"></span><span class="comment" id="3178469">//&nbsp;b.Reset()&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;b.Truncate(0).</span><br>
<span class="lineno">75</span><span class="keyword" id="3178512">func</span>&nbsp;<span class="op" id="3178517">(</span><span class="ident" id="3178518">b</span>&nbsp;<span class="op" id="3178520">*</span><span class="ident" id="3178521"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3178527">)</span>&nbsp;<span class="ident" id="3178529">Reset</span><span class="op" id="3178534">(</span><span class="op" id="3178535">)</span>&nbsp;<span class="op" id="3178537">{</span>&nbsp;<span class="ident" id="3178539"><a href="/bytes/buffer.go.html#3178518">b</a></span><span class="op" id="3178540">.</span><span class="ident" id="3178541">Truncate</span><span class="op" id="3178549">(</span><span class="num" id="3178550">0</span><span class="op" id="3178551">)</span>&nbsp;<span class="op" id="3178553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3178556">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;buffer&nbsp;to&nbsp;guarantee&nbsp;space&nbsp;for&nbsp;n&nbsp;more&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="3178618">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;bytes&nbsp;should&nbsp;be&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="3178673">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;can&#39;t&nbsp;grow&nbsp;it&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">80</span><span class="keyword" id="3178733">func</span>&nbsp;<span class="op" id="3178738">(</span><span class="ident" id="3178739">b</span>&nbsp;<span class="op" id="3178741">*</span><span class="ident" id="3178742"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3178748">)</span>&nbsp;<span class="ident" id="3178750">grow</span><span class="op" id="3178754">(</span><span class="ident" id="3178755">n</span>&nbsp;<span class="builtintype" id="3178757">int</span><span class="op" id="3178760">)</span>&nbsp;<span class="builtintype" id="3178762">int</span>&nbsp;<span class="op" id="3178766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3178769">m</span>&nbsp;<span class="op" id="3178771">:=</span>&nbsp;<span class="ident" id="3178774"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3178775">.</span><span class="ident" id="3178776">Len</span><span class="op" id="3178779">(</span><span class="op" id="3178780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3178783">//&nbsp;If&nbsp;buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178831">if</span>&nbsp;<span class="ident" id="3178834"><a href="/bytes/buffer.go.html#3178769">m</a></span>&nbsp;<span class="op" id="3178836">==</span>&nbsp;<span class="num" id="3178839">0</span>&nbsp;<span class="op" id="3178841">&amp;&amp;</span>&nbsp;<span class="ident" id="3178844"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3178845">.</span><span class="ident" id="3178846">off</span>&nbsp;<span class="op" id="3178850">!=</span>&nbsp;<span class="num" id="3178853">0</span>&nbsp;<span class="op" id="3178855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3178859"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3178860">.</span><span class="ident" id="3178861">Truncate</span><span class="op" id="3178869">(</span><span class="num" id="3178870">0</span><span class="op" id="3178871">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3178874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178877">if</span>&nbsp;<span class="builtinfunc" id="3178880">len</span><span class="op" id="3178883">(</span><span class="ident" id="3178884"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3178885">.</span><span class="ident" id="3178886">buf</span><span class="op" id="3178889">)</span><span class="op" id="3178890">+</span><span class="ident" id="3178891"><a href="/bytes/buffer.go.html#3178755">n</a></span>&nbsp;<span class="op" id="3178893">&gt;</span>&nbsp;<span class="builtinfunc" id="3178895">cap</span><span class="op" id="3178898">(</span><span class="ident" id="3178899"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3178900">.</span><span class="ident" id="3178901">buf</span><span class="op" id="3178904">)</span>&nbsp;<span class="op" id="3178906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178910">var</span>&nbsp;<span class="ident" id="3178914">buf</span>&nbsp;<span class="op" id="3178918">[</span><span class="op" id="3178919">]</span><span class="builtintype" id="3178920">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178927">if</span>&nbsp;<span class="ident" id="3178930"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3178931">.</span><span class="ident" id="3178932">buf</span>&nbsp;<span class="op" id="3178936">==</span>&nbsp;<span class="ident" id="3178939">nil</span>&nbsp;<span class="op" id="3178943">&amp;&amp;</span>&nbsp;<span class="ident" id="3178946"><a href="/bytes/buffer.go.html#3178755">n</a></span>&nbsp;<span class="op" id="3178948">&lt;=</span>&nbsp;<span class="builtinfunc" id="3178951">len</span><span class="op" id="3178954">(</span><span class="ident" id="3178955"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3178956">.</span><span class="ident" id="3178957">bootstrap</span><span class="op" id="3178966">)</span>&nbsp;<span class="op" id="3178968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3178973"><a href="/bytes/buffer.go.html#3178914">buf</a></span>&nbsp;<span class="op" id="3178977">=</span>&nbsp;<span class="ident" id="3178979"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3178980">.</span><span class="ident" id="3178981">bootstrap</span><span class="op" id="3178990">[</span><span class="num" id="3178991">0</span><span class="op" id="3178992">:</span><span class="op" id="3178993">]</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3178997">}</span>&nbsp;<span class="keyword" id="3178999">else</span>&nbsp;<span class="keyword" id="3179004">if</span>&nbsp;<span class="ident" id="3179007"><a href="/bytes/buffer.go.html#3178769">m</a></span><span class="op" id="3179008">+</span><span class="ident" id="3179009"><a href="/bytes/buffer.go.html#3178755">n</a></span>&nbsp;<span class="op" id="3179011">&lt;=</span>&nbsp;<span class="builtinfunc" id="3179014">cap</span><span class="op" id="3179017">(</span><span class="ident" id="3179018"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179019">.</span><span class="ident" id="3179020">buf</span><span class="op" id="3179023">)</span><span class="op" id="3179024">/</span><span class="num" id="3179025">2</span>&nbsp;<span class="op" id="3179027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3179032">//&nbsp;We&nbsp;can&nbsp;slide&nbsp;things&nbsp;down&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3179091">//&nbsp;slice.&nbsp;We&nbsp;only&nbsp;need&nbsp;m+n&nbsp;&lt;=&nbsp;cap(b.buf)&nbsp;to&nbsp;slide,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3179149">//&nbsp;we&nbsp;instead&nbsp;let&nbsp;capacity&nbsp;get&nbsp;twice&nbsp;as&nbsp;large&nbsp;so&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3179204">//&nbsp;don&#39;t&nbsp;spend&nbsp;all&nbsp;our&nbsp;time&nbsp;copying.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3179244">copy</span><span class="op" id="3179248">(</span><span class="ident" id="3179249"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179250">.</span><span class="ident" id="3179251">buf</span><span class="op" id="3179254">[</span><span class="op" id="3179255">:</span><span class="op" id="3179256">]</span><span class="op" id="3179257">,</span>&nbsp;<span class="ident" id="3179259"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179260">.</span><span class="ident" id="3179261">buf</span><span class="op" id="3179264">[</span><span class="ident" id="3179265"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179266">.</span><span class="ident" id="3179267">off</span><span class="op" id="3179270">:</span><span class="op" id="3179271">]</span><span class="op" id="3179272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3179277"><a href="/bytes/buffer.go.html#3178914">buf</a></span>&nbsp;<span class="op" id="3179281">=</span>&nbsp;<span class="ident" id="3179283"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179284">.</span><span class="ident" id="3179285">buf</span><span class="op" id="3179288">[</span><span class="op" id="3179289">:</span><span class="ident" id="3179290"><a href="/bytes/buffer.go.html#3178769">m</a></span><span class="op" id="3179291">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3179295">}</span>&nbsp;<span class="keyword" id="3179297">else</span>&nbsp;<span class="op" id="3179302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3179307">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;anywhere</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3179339"><a href="/bytes/buffer.go.html#3178914">buf</a></span>&nbsp;<span class="op" id="3179343">=</span>&nbsp;<span class="ident" id="3179345"><a href="/bytes/buffer.go.html#3182028">makeSlice</a></span><span class="op" id="3179354">(</span><span class="num" id="3179355">2</span><span class="op" id="3179356">*</span><span class="builtinfunc" id="3179357">cap</span><span class="op" id="3179360">(</span><span class="ident" id="3179361"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179362">.</span><span class="ident" id="3179363">buf</span><span class="op" id="3179366">)</span>&nbsp;<span class="op" id="3179368">+</span>&nbsp;<span class="ident" id="3179370"><a href="/bytes/buffer.go.html#3178755">n</a></span><span class="op" id="3179371">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3179376">copy</span><span class="op" id="3179380">(</span><span class="ident" id="3179381"><a href="/bytes/buffer.go.html#3178914">buf</a></span><span class="op" id="3179384">,</span>&nbsp;<span class="ident" id="3179386"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179387">.</span><span class="ident" id="3179388">buf</span><span class="op" id="3179391">[</span><span class="ident" id="3179392"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179393">.</span><span class="ident" id="3179394">off</span><span class="op" id="3179397">:</span><span class="op" id="3179398">]</span><span class="op" id="3179399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3179403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3179407"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179408">.</span><span class="ident" id="3179409">buf</span>&nbsp;<span class="op" id="3179413">=</span>&nbsp;<span class="ident" id="3179415"><a href="/bytes/buffer.go.html#3178914">buf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3179421"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179422">.</span><span class="ident" id="3179423">off</span>&nbsp;<span class="op" id="3179427">=</span>&nbsp;<span class="num" id="3179429">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3179432">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3179435"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179436">.</span><span class="ident" id="3179437">buf</span>&nbsp;<span class="op" id="3179441">=</span>&nbsp;<span class="ident" id="3179443"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179444">.</span><span class="ident" id="3179445">buf</span><span class="op" id="3179448">[</span><span class="num" id="3179449">0</span>&nbsp;<span class="op" id="3179451">:</span>&nbsp;<span class="ident" id="3179453"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179454">.</span><span class="ident" id="3179455">off</span><span class="op" id="3179458">+</span><span class="ident" id="3179459"><a href="/bytes/buffer.go.html#3178769">m</a></span><span class="op" id="3179460">+</span><span class="ident" id="3179461"><a href="/bytes/buffer.go.html#3178755">n</a></span><span class="op" id="3179462">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3179465">return</span>&nbsp;<span class="ident" id="3179472"><a href="/bytes/buffer.go.html#3178739">b</a></span><span class="op" id="3179473">.</span><span class="ident" id="3179474">off</span>&nbsp;<span class="op" id="3179478">+</span>&nbsp;<span class="ident" id="3179480"><a href="/bytes/buffer.go.html#3178769">m</a></span><br>
<span class="lineno"></span><span class="op" id="3179482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179485">//&nbsp;Grow&nbsp;grows&nbsp;the&nbsp;buffer&#39;s&nbsp;capacity,&nbsp;if&nbsp;necessary,&nbsp;to&nbsp;guarantee&nbsp;space&nbsp;for</span><br>
<span class="lineno">110</span><span class="comment" id="3179559">//&nbsp;another&nbsp;n&nbsp;bytes.&nbsp;After&nbsp;Grow(n),&nbsp;at&nbsp;least&nbsp;n&nbsp;bytes&nbsp;can&nbsp;be&nbsp;written&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3179633">//&nbsp;buffer&nbsp;without&nbsp;another&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="comment" id="3179671">//&nbsp;If&nbsp;n&nbsp;is&nbsp;negative,&nbsp;Grow&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="3179709">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;can&#39;t&nbsp;grow&nbsp;it&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3179769">func</span>&nbsp;<span class="op" id="3179774">(</span><span class="ident" id="3179775">b</span>&nbsp;<span class="op" id="3179777">*</span><span class="ident" id="3179778"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3179784">)</span>&nbsp;<span class="ident" id="3179786">Grow</span><span class="op" id="3179790">(</span><span class="ident" id="3179791">n</span>&nbsp;<span class="builtintype" id="3179793">int</span><span class="op" id="3179796">)</span>&nbsp;<span class="op" id="3179798">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3179801">if</span>&nbsp;<span class="ident" id="3179804"><a href="/bytes/buffer.go.html#3179791">n</a></span>&nbsp;<span class="op" id="3179806">&lt;</span>&nbsp;<span class="num" id="3179808">0</span>&nbsp;<span class="op" id="3179810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3179814">panic</span><span class="op" id="3179819">(</span><span class="string" id="3179820">&#34;bytes.Buffer.Grow:&nbsp;negative&nbsp;count&#34;</span><span class="op" id="3179855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3179858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3179861">m</span>&nbsp;<span class="op" id="3179863">:=</span>&nbsp;<span class="ident" id="3179866"><a href="/bytes/buffer.go.html#3179775">b</a></span><span class="op" id="3179867">.</span><span class="ident" id="3179868">grow</span><span class="op" id="3179872">(</span><span class="ident" id="3179873"><a href="/bytes/buffer.go.html#3179791">n</a></span><span class="op" id="3179874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3179877"><a href="/bytes/buffer.go.html#3179775">b</a></span><span class="op" id="3179878">.</span><span class="ident" id="3179879">buf</span>&nbsp;<span class="op" id="3179883">=</span>&nbsp;<span class="ident" id="3179885"><a href="/bytes/buffer.go.html#3179775">b</a></span><span class="op" id="3179886">.</span><span class="ident" id="3179887">buf</span><span class="op" id="3179890">[</span><span class="num" id="3179891">0</span><span class="op" id="3179892">:</span><span class="ident" id="3179893"><a href="/bytes/buffer.go.html#3179861">m</a></span><span class="op" id="3179894">]</span><br>
<span class="lineno">120</span><span class="op" id="3179896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179899">//&nbsp;Write&nbsp;appends&nbsp;the&nbsp;contents&nbsp;of&nbsp;p&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3179971">//&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;length&nbsp;of&nbsp;p;&nbsp;err&nbsp;is&nbsp;always&nbsp;nil.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3180047">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;Write&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">125</span><span class="keyword" id="3180111">func</span>&nbsp;<span class="op" id="3180116">(</span><span class="ident" id="3180117">b</span>&nbsp;<span class="op" id="3180119">*</span><span class="ident" id="3180120"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3180126">)</span>&nbsp;<span class="ident" id="3180128">Write</span><span class="op" id="3180133">(</span><span class="ident" id="3180134">p</span>&nbsp;<span class="op" id="3180136">[</span><span class="op" id="3180137">]</span><span class="builtintype" id="3180138">byte</span><span class="op" id="3180142">)</span>&nbsp;<span class="op" id="3180144">(</span><span class="ident" id="3180145">n</span>&nbsp;<span class="builtintype" id="3180147">int</span><span class="op" id="3180150">,</span>&nbsp;<span class="ident" id="3180152">err</span>&nbsp;<span class="builtintype" id="3180156">error</span><span class="op" id="3180161">)</span>&nbsp;<span class="op" id="3180163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3180166"><a href="/bytes/buffer.go.html#3180117">b</a></span><span class="op" id="3180167">.</span><span class="ident" id="3180168">lastRead</span>&nbsp;<span class="op" id="3180177">=</span>&nbsp;<span class="ident" id="3180179"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3180190">m</span>&nbsp;<span class="op" id="3180192">:=</span>&nbsp;<span class="ident" id="3180195"><a href="/bytes/buffer.go.html#3180117">b</a></span><span class="op" id="3180196">.</span><span class="ident" id="3180197">grow</span><span class="op" id="3180201">(</span><span class="builtinfunc" id="3180202">len</span><span class="op" id="3180205">(</span><span class="ident" id="3180206"><a href="/bytes/buffer.go.html#3180134">p</a></span><span class="op" id="3180207">)</span><span class="op" id="3180208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3180211">return</span>&nbsp;<span class="builtinfunc" id="3180218">copy</span><span class="op" id="3180222">(</span><span class="ident" id="3180223"><a href="/bytes/buffer.go.html#3180117">b</a></span><span class="op" id="3180224">.</span><span class="ident" id="3180225">buf</span><span class="op" id="3180228">[</span><span class="ident" id="3180229"><a href="/bytes/buffer.go.html#3180190">m</a></span><span class="op" id="3180230">:</span><span class="op" id="3180231">]</span><span class="op" id="3180232">,</span>&nbsp;<span class="ident" id="3180234"><a href="/bytes/buffer.go.html#3180134">p</a></span><span class="op" id="3180235">)</span><span class="op" id="3180236">,</span>&nbsp;<span class="ident" id="3180238">nil</span><br>
<span class="lineno"></span><span class="op" id="3180242">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="3180245">//&nbsp;WriteString&nbsp;appends&nbsp;the&nbsp;contents&nbsp;of&nbsp;s&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3180323">//&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;length&nbsp;of&nbsp;s;&nbsp;err&nbsp;is&nbsp;always&nbsp;nil.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3180399">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteString&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3180469">func</span>&nbsp;<span class="op" id="3180474">(</span><span class="ident" id="3180475">b</span>&nbsp;<span class="op" id="3180477">*</span><span class="ident" id="3180478"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3180484">)</span>&nbsp;<span class="ident" id="3180486">WriteString</span><span class="op" id="3180497">(</span><span class="ident" id="3180498">s</span>&nbsp;<span class="builtintype" id="3180500">string</span><span class="op" id="3180506">)</span>&nbsp;<span class="op" id="3180508">(</span><span class="ident" id="3180509">n</span>&nbsp;<span class="builtintype" id="3180511">int</span><span class="op" id="3180514">,</span>&nbsp;<span class="ident" id="3180516">err</span>&nbsp;<span class="builtintype" id="3180520">error</span><span class="op" id="3180525">)</span>&nbsp;<span class="op" id="3180527">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3180530"><a href="/bytes/buffer.go.html#3180475">b</a></span><span class="op" id="3180531">.</span><span class="ident" id="3180532">lastRead</span>&nbsp;<span class="op" id="3180541">=</span>&nbsp;<span class="ident" id="3180543"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3180554">m</span>&nbsp;<span class="op" id="3180556">:=</span>&nbsp;<span class="ident" id="3180559"><a href="/bytes/buffer.go.html#3180475">b</a></span><span class="op" id="3180560">.</span><span class="ident" id="3180561">grow</span><span class="op" id="3180565">(</span><span class="builtinfunc" id="3180566">len</span><span class="op" id="3180569">(</span><span class="ident" id="3180570"><a href="/bytes/buffer.go.html#3180498">s</a></span><span class="op" id="3180571">)</span><span class="op" id="3180572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3180575">return</span>&nbsp;<span class="builtinfunc" id="3180582">copy</span><span class="op" id="3180586">(</span><span class="ident" id="3180587"><a href="/bytes/buffer.go.html#3180475">b</a></span><span class="op" id="3180588">.</span><span class="ident" id="3180589">buf</span><span class="op" id="3180592">[</span><span class="ident" id="3180593"><a href="/bytes/buffer.go.html#3180554">m</a></span><span class="op" id="3180594">:</span><span class="op" id="3180595">]</span><span class="op" id="3180596">,</span>&nbsp;<span class="ident" id="3180598"><a href="/bytes/buffer.go.html#3180498">s</a></span><span class="op" id="3180599">)</span><span class="op" id="3180600">,</span>&nbsp;<span class="ident" id="3180602">nil</span><br>
<span class="lineno"></span><span class="op" id="3180606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="3180609">//&nbsp;MinRead&nbsp;is&nbsp;the&nbsp;minimum&nbsp;slice&nbsp;size&nbsp;passed&nbsp;to&nbsp;a&nbsp;Read&nbsp;call&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3180671">//&nbsp;Buffer.ReadFrom.&nbsp;&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;Buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;MinRead&nbsp;bytes&nbsp;beyond</span><br>
<span class="lineno"></span><span class="comment" id="3180748">//&nbsp;what&nbsp;is&nbsp;required&nbsp;to&nbsp;hold&nbsp;the&nbsp;contents&nbsp;of&nbsp;r,&nbsp;ReadFrom&nbsp;will&nbsp;not&nbsp;grow&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3180822">//&nbsp;underlying&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3180844">const</span>&nbsp;<span class="ident" id="3180850">MinRead</span>&nbsp;<span class="op" id="3180858">=</span>&nbsp;<span class="num" id="3180860">512</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="3180865">//&nbsp;ReadFrom&nbsp;reads&nbsp;data&nbsp;from&nbsp;r&nbsp;until&nbsp;EOF&nbsp;and&nbsp;appends&nbsp;it&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing</span><br>
<span class="lineno"></span><span class="comment" id="3180943">//&nbsp;the&nbsp;buffer&nbsp;as&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.&nbsp;Any</span><br>
<span class="lineno"></span><span class="comment" id="3181020">//&nbsp;error&nbsp;except&nbsp;io.EOF&nbsp;encountered&nbsp;during&nbsp;the&nbsp;read&nbsp;is&nbsp;also&nbsp;returned.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3181096">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;ReadFrom&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">150</span><span class="keyword" id="3181163">func</span>&nbsp;<span class="op" id="3181168">(</span><span class="ident" id="3181169">b</span>&nbsp;<span class="op" id="3181171">*</span><span class="ident" id="3181172"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3181178">)</span>&nbsp;<span class="ident" id="3181180">ReadFrom</span><span class="op" id="3181188">(</span><span class="ident" id="3181189">r</span>&nbsp;<span class="ident" id="3181191"><a href="/bytes/buffer.go.html#3176195">io</a></span><span class="op" id="3181193">.</span><span class="ident" id="3181194">Reader</span><span class="op" id="3181200">)</span>&nbsp;<span class="op" id="3181202">(</span><span class="ident" id="3181203">n</span>&nbsp;<span class="ident" id="3181205">int64</span><span class="op" id="3181210">,</span>&nbsp;<span class="ident" id="3181212">err</span>&nbsp;<span class="builtintype" id="3181216">error</span><span class="op" id="3181221">)</span>&nbsp;<span class="op" id="3181223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181226"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181227">.</span><span class="ident" id="3181228">lastRead</span>&nbsp;<span class="op" id="3181237">=</span>&nbsp;<span class="ident" id="3181239"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3181250">//&nbsp;If&nbsp;buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181298">if</span>&nbsp;<span class="ident" id="3181301"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181302">.</span><span class="ident" id="3181303">off</span>&nbsp;<span class="op" id="3181307">&gt;=</span>&nbsp;<span class="builtinfunc" id="3181310">len</span><span class="op" id="3181313">(</span><span class="ident" id="3181314"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181315">.</span><span class="ident" id="3181316">buf</span><span class="op" id="3181319">)</span>&nbsp;<span class="op" id="3181321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181325"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181326">.</span><span class="ident" id="3181327">Truncate</span><span class="op" id="3181335">(</span><span class="num" id="3181336">0</span><span class="op" id="3181337">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3181340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181343">for</span>&nbsp;<span class="op" id="3181347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181351">if</span>&nbsp;<span class="ident" id="3181354">free</span>&nbsp;<span class="op" id="3181359">:=</span>&nbsp;<span class="builtinfunc" id="3181362">cap</span><span class="op" id="3181365">(</span><span class="ident" id="3181366"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181367">.</span><span class="ident" id="3181368">buf</span><span class="op" id="3181371">)</span>&nbsp;<span class="op" id="3181373">-</span>&nbsp;<span class="builtinfunc" id="3181375">len</span><span class="op" id="3181378">(</span><span class="ident" id="3181379"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181380">.</span><span class="ident" id="3181381">buf</span><span class="op" id="3181384">)</span><span class="op" id="3181385">;</span>&nbsp;<span class="ident" id="3181387"><a href="/bytes/buffer.go.html#3181354">free</a></span>&nbsp;<span class="op" id="3181392">&lt;</span>&nbsp;<span class="ident" id="3181394"><a href="/bytes/buffer.go.html#3180850">MinRead</a></span>&nbsp;<span class="op" id="3181402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3181407">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;at&nbsp;end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181437">newBuf</span>&nbsp;<span class="op" id="3181444">:=</span>&nbsp;<span class="ident" id="3181447"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181448">.</span><span class="ident" id="3181449">buf</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181456">if</span>&nbsp;<span class="ident" id="3181459"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181460">.</span><span class="ident" id="3181461">off</span><span class="op" id="3181464">+</span><span class="ident" id="3181465"><a href="/bytes/buffer.go.html#3181354">free</a></span>&nbsp;<span class="op" id="3181470">&lt;</span>&nbsp;<span class="ident" id="3181472"><a href="/bytes/buffer.go.html#3180850">MinRead</a></span>&nbsp;<span class="op" id="3181480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3181486">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;using&nbsp;beginning&nbsp;of&nbsp;buffer;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3181537">//&nbsp;double&nbsp;buffer&nbsp;capacity</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181567"><a href="/bytes/buffer.go.html#3181437">newBuf</a></span>&nbsp;<span class="op" id="3181574">=</span>&nbsp;<span class="ident" id="3181576"><a href="/bytes/buffer.go.html#3182028">makeSlice</a></span><span class="op" id="3181585">(</span><span class="num" id="3181586">2</span><span class="op" id="3181587">*</span><span class="builtinfunc" id="3181588">cap</span><span class="op" id="3181591">(</span><span class="ident" id="3181592"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181593">.</span><span class="ident" id="3181594">buf</span><span class="op" id="3181597">)</span>&nbsp;<span class="op" id="3181599">+</span>&nbsp;<span class="ident" id="3181601"><a href="/bytes/buffer.go.html#3180850">MinRead</a></span><span class="op" id="3181608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3181613">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3181618">copy</span><span class="op" id="3181622">(</span><span class="ident" id="3181623"><a href="/bytes/buffer.go.html#3181437">newBuf</a></span><span class="op" id="3181629">,</span>&nbsp;<span class="ident" id="3181631"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181632">.</span><span class="ident" id="3181633">buf</span><span class="op" id="3181636">[</span><span class="ident" id="3181637"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181638">.</span><span class="ident" id="3181639">off</span><span class="op" id="3181642">:</span><span class="op" id="3181643">]</span><span class="op" id="3181644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181649"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181650">.</span><span class="ident" id="3181651">buf</span>&nbsp;<span class="op" id="3181655">=</span>&nbsp;<span class="ident" id="3181657"><a href="/bytes/buffer.go.html#3181437">newBuf</a></span><span class="op" id="3181663">[</span><span class="op" id="3181664">:</span><span class="builtinfunc" id="3181665">len</span><span class="op" id="3181668">(</span><span class="ident" id="3181669"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181670">.</span><span class="ident" id="3181671">buf</span><span class="op" id="3181674">)</span><span class="op" id="3181675">-</span><span class="ident" id="3181676"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181677">.</span><span class="ident" id="3181678">off</span><span class="op" id="3181681">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181686"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181687">.</span><span class="ident" id="3181688">off</span>&nbsp;<span class="op" id="3181692">=</span>&nbsp;<span class="num" id="3181694">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3181698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181702">m</span><span class="op" id="3181703">,</span>&nbsp;<span class="ident" id="3181705">e</span>&nbsp;<span class="op" id="3181707">:=</span>&nbsp;<span class="ident" id="3181710"><a href="/bytes/buffer.go.html#3181189">r</a></span><span class="op" id="3181711">.</span><span class="ident" id="3181712">Read</span><span class="op" id="3181716">(</span><span class="ident" id="3181717"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181718">.</span><span class="ident" id="3181719">buf</span><span class="op" id="3181722">[</span><span class="builtinfunc" id="3181723">len</span><span class="op" id="3181726">(</span><span class="ident" id="3181727"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181728">.</span><span class="ident" id="3181729">buf</span><span class="op" id="3181732">)</span><span class="op" id="3181733">:</span><span class="builtinfunc" id="3181734">cap</span><span class="op" id="3181737">(</span><span class="ident" id="3181738"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181739">.</span><span class="ident" id="3181740">buf</span><span class="op" id="3181743">)</span><span class="op" id="3181744">]</span><span class="op" id="3181745">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181749"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181750">.</span><span class="ident" id="3181751">buf</span>&nbsp;<span class="op" id="3181755">=</span>&nbsp;<span class="ident" id="3181757"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181758">.</span><span class="ident" id="3181759">buf</span><span class="op" id="3181762">[</span><span class="num" id="3181763">0</span>&nbsp;<span class="op" id="3181765">:</span>&nbsp;<span class="builtinfunc" id="3181767">len</span><span class="op" id="3181770">(</span><span class="ident" id="3181771"><a href="/bytes/buffer.go.html#3181169">b</a></span><span class="op" id="3181772">.</span><span class="ident" id="3181773">buf</span><span class="op" id="3181776">)</span><span class="op" id="3181777">+</span><span class="ident" id="3181778"><a href="/bytes/buffer.go.html#3181702">m</a></span><span class="op" id="3181779">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181783"><a href="/bytes/buffer.go.html#3181203">n</a></span>&nbsp;<span class="op" id="3181785">+=</span>&nbsp;<span class="ident" id="3181788">int64</span><span class="op" id="3181793">(</span><span class="ident" id="3181794"><a href="/bytes/buffer.go.html#3181702">m</a></span><span class="op" id="3181795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181799">if</span>&nbsp;<span class="ident" id="3181802"><a href="/bytes/buffer.go.html#3181705">e</a></span>&nbsp;<span class="op" id="3181804">==</span>&nbsp;<span class="ident" id="3181807"><a href="/bytes/buffer.go.html#3176195">io</a></span><span class="op" id="3181809">.</span><span class="ident" id="3181810">EOF</span>&nbsp;<span class="op" id="3181814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181819">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3181827">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181831">if</span>&nbsp;<span class="ident" id="3181834"><a href="/bytes/buffer.go.html#3181705">e</a></span>&nbsp;<span class="op" id="3181836">!=</span>&nbsp;<span class="ident" id="3181839">nil</span>&nbsp;<span class="op" id="3181843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181848">return</span>&nbsp;<span class="ident" id="3181855"><a href="/bytes/buffer.go.html#3181203">n</a></span><span class="op" id="3181856">,</span>&nbsp;<span class="ident" id="3181858"><a href="/bytes/buffer.go.html#3181705">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3181862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3181865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181868">return</span>&nbsp;<span class="ident" id="3181875"><a href="/bytes/buffer.go.html#3181203">n</a></span><span class="op" id="3181876">,</span>&nbsp;<span class="ident" id="3181878">nil</span>&nbsp;<span class="comment" id="3181882">//&nbsp;err&nbsp;is&nbsp;EOF,&nbsp;so&nbsp;return&nbsp;nil&nbsp;explicitly</span><br>
<span class="lineno">180</span><span class="op" id="3181922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3181925">//&nbsp;makeSlice&nbsp;allocates&nbsp;a&nbsp;slice&nbsp;of&nbsp;size&nbsp;n.&nbsp;If&nbsp;the&nbsp;allocation&nbsp;fails,&nbsp;it&nbsp;panics</span><br>
<span class="lineno"></span><span class="comment" id="3182002">//&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3182023">func</span>&nbsp;<span class="ident" id="3182028">makeSlice</span><span class="op" id="3182037">(</span><span class="ident" id="3182038">n</span>&nbsp;<span class="builtintype" id="3182040">int</span><span class="op" id="3182043">)</span>&nbsp;<span class="op" id="3182045">[</span><span class="op" id="3182046">]</span><span class="builtintype" id="3182047">byte</span>&nbsp;<span class="op" id="3182052">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3182055">//&nbsp;If&nbsp;the&nbsp;make&nbsp;fails,&nbsp;give&nbsp;a&nbsp;known&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182098">defer</span>&nbsp;<span class="keyword" id="3182104">func</span><span class="op" id="3182108">(</span><span class="op" id="3182109">)</span>&nbsp;<span class="op" id="3182111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182115">if</span>&nbsp;<span class="builtinfunc" id="3182118">recover</span><span class="op" id="3182125">(</span><span class="op" id="3182126">)</span>&nbsp;<span class="op" id="3182128">!=</span>&nbsp;<span class="ident" id="3182131">nil</span>&nbsp;<span class="op" id="3182135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3182140">panic</span><span class="op" id="3182145">(</span><span class="ident" id="3182146"><a href="/bytes/buffer.go.html#3177222">ErrTooLarge</a></span><span class="op" id="3182157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182161">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182164">}</span><span class="op" id="3182165">(</span><span class="op" id="3182166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182169">return</span>&nbsp;<span class="builtinfunc" id="3182176">make</span><span class="op" id="3182180">(</span><span class="op" id="3182181">[</span><span class="op" id="3182182">]</span><span class="builtintype" id="3182183">byte</span><span class="op" id="3182187">,</span>&nbsp;<span class="ident" id="3182189"><a href="/bytes/buffer.go.html#3182038">n</a></span><span class="op" id="3182190">)</span><br>
<span class="lineno"></span><span class="op" id="3182192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3182195">//&nbsp;WriteTo&nbsp;writes&nbsp;data&nbsp;to&nbsp;w&nbsp;until&nbsp;the&nbsp;buffer&nbsp;is&nbsp;drained&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno">195</span><span class="comment" id="3182271">//&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written;&nbsp;it&nbsp;always&nbsp;fits&nbsp;into&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="3182348">//&nbsp;int,&nbsp;but&nbsp;it&nbsp;is&nbsp;int64&nbsp;to&nbsp;match&nbsp;the&nbsp;io.WriterTo&nbsp;interface.&nbsp;Any&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3182418">//&nbsp;encountered&nbsp;during&nbsp;the&nbsp;write&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3182468">func</span>&nbsp;<span class="op" id="3182473">(</span><span class="ident" id="3182474">b</span>&nbsp;<span class="op" id="3182476">*</span><span class="ident" id="3182477"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3182483">)</span>&nbsp;<span class="ident" id="3182485">WriteTo</span><span class="op" id="3182492">(</span><span class="ident" id="3182493">w</span>&nbsp;<span class="ident" id="3182495"><a href="/bytes/buffer.go.html#3176195">io</a></span><span class="op" id="3182497">.</span><span class="ident" id="3182498">Writer</span><span class="op" id="3182504">)</span>&nbsp;<span class="op" id="3182506">(</span><span class="ident" id="3182507">n</span>&nbsp;<span class="ident" id="3182509">int64</span><span class="op" id="3182514">,</span>&nbsp;<span class="ident" id="3182516">err</span>&nbsp;<span class="builtintype" id="3182520">error</span><span class="op" id="3182525">)</span>&nbsp;<span class="op" id="3182527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182530"><a href="/bytes/buffer.go.html#3182474">b</a></span><span class="op" id="3182531">.</span><span class="ident" id="3182532">lastRead</span>&nbsp;<span class="op" id="3182541">=</span>&nbsp;<span class="ident" id="3182543"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182554">if</span>&nbsp;<span class="ident" id="3182557"><a href="/bytes/buffer.go.html#3182474">b</a></span><span class="op" id="3182558">.</span><span class="ident" id="3182559">off</span>&nbsp;<span class="op" id="3182563">&lt;</span>&nbsp;<span class="builtinfunc" id="3182565">len</span><span class="op" id="3182568">(</span><span class="ident" id="3182569"><a href="/bytes/buffer.go.html#3182474">b</a></span><span class="op" id="3182570">.</span><span class="ident" id="3182571">buf</span><span class="op" id="3182574">)</span>&nbsp;<span class="op" id="3182576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182580">nBytes</span>&nbsp;<span class="op" id="3182587">:=</span>&nbsp;<span class="ident" id="3182590"><a href="/bytes/buffer.go.html#3182474">b</a></span><span class="op" id="3182591">.</span><span class="ident" id="3182592">Len</span><span class="op" id="3182595">(</span><span class="op" id="3182596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182600">m</span><span class="op" id="3182601">,</span>&nbsp;<span class="ident" id="3182603">e</span>&nbsp;<span class="op" id="3182605">:=</span>&nbsp;<span class="ident" id="3182608"><a href="/bytes/buffer.go.html#3182493">w</a></span><span class="op" id="3182609">.</span><span class="ident" id="3182610">Write</span><span class="op" id="3182615">(</span><span class="ident" id="3182616"><a href="/bytes/buffer.go.html#3182474">b</a></span><span class="op" id="3182617">.</span><span class="ident" id="3182618">buf</span><span class="op" id="3182621">[</span><span class="ident" id="3182622"><a href="/bytes/buffer.go.html#3182474">b</a></span><span class="op" id="3182623">.</span><span class="ident" id="3182624">off</span><span class="op" id="3182627">:</span><span class="op" id="3182628">]</span><span class="op" id="3182629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182633">if</span>&nbsp;<span class="ident" id="3182636"><a href="/bytes/buffer.go.html#3182600">m</a></span>&nbsp;<span class="op" id="3182638">&gt;</span>&nbsp;<span class="ident" id="3182640"><a href="/bytes/buffer.go.html#3182580">nBytes</a></span>&nbsp;<span class="op" id="3182647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3182652">panic</span><span class="op" id="3182657">(</span><span class="string" id="3182658">&#34;bytes.Buffer.WriteTo:&nbsp;invalid&nbsp;Write&nbsp;count&#34;</span><span class="op" id="3182701">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182709"><a href="/bytes/buffer.go.html#3182474">b</a></span><span class="op" id="3182710">.</span><span class="ident" id="3182711">off</span>&nbsp;<span class="op" id="3182715">+=</span>&nbsp;<span class="ident" id="3182718"><a href="/bytes/buffer.go.html#3182600">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182722"><a href="/bytes/buffer.go.html#3182507">n</a></span>&nbsp;<span class="op" id="3182724">=</span>&nbsp;<span class="ident" id="3182726">int64</span><span class="op" id="3182731">(</span><span class="ident" id="3182732"><a href="/bytes/buffer.go.html#3182600">m</a></span><span class="op" id="3182733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182737">if</span>&nbsp;<span class="ident" id="3182740"><a href="/bytes/buffer.go.html#3182603">e</a></span>&nbsp;<span class="op" id="3182742">!=</span>&nbsp;<span class="ident" id="3182745">nil</span>&nbsp;<span class="op" id="3182749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182754">return</span>&nbsp;<span class="ident" id="3182761"><a href="/bytes/buffer.go.html#3182507">n</a></span><span class="op" id="3182762">,</span>&nbsp;<span class="ident" id="3182764"><a href="/bytes/buffer.go.html#3182603">e</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3182772">//&nbsp;all&nbsp;bytes&nbsp;should&nbsp;have&nbsp;been&nbsp;written,&nbsp;by&nbsp;definition&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3182830">//&nbsp;Write&nbsp;method&nbsp;in&nbsp;io.Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182861">if</span>&nbsp;<span class="ident" id="3182864"><a href="/bytes/buffer.go.html#3182600">m</a></span>&nbsp;<span class="op" id="3182866">!=</span>&nbsp;<span class="ident" id="3182869"><a href="/bytes/buffer.go.html#3182580">nBytes</a></span>&nbsp;<span class="op" id="3182876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182881">return</span>&nbsp;<span class="ident" id="3182888"><a href="/bytes/buffer.go.html#3182507">n</a></span><span class="op" id="3182889">,</span>&nbsp;<span class="ident" id="3182891"><a href="/bytes/buffer.go.html#3176195">io</a></span><span class="op" id="3182893">.</span><span class="ident" id="3182894">ErrShortWrite</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3182916">//&nbsp;Buffer&nbsp;is&nbsp;now&nbsp;empty;&nbsp;reset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182948"><a href="/bytes/buffer.go.html#3182474">b</a></span><span class="op" id="3182949">.</span><span class="ident" id="3182950">Truncate</span><span class="op" id="3182958">(</span><span class="num" id="3182959">0</span><span class="op" id="3182960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182963">return</span><br>
<span class="lineno">220</span><span class="op" id="3182970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3182973">//&nbsp;WriteByte&nbsp;appends&nbsp;the&nbsp;byte&nbsp;c&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as&nbsp;needed.</span><br>
<span class="lineno"></span><span class="comment" id="3183050">//&nbsp;The&nbsp;returned&nbsp;error&nbsp;is&nbsp;always&nbsp;nil,&nbsp;but&nbsp;is&nbsp;included&nbsp;to&nbsp;match&nbsp;bufio.Writer&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3183127">//&nbsp;WriteByte.&nbsp;If&nbsp;the&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteByte&nbsp;will&nbsp;panic&nbsp;with</span><br>
<span class="lineno">225</span><span class="comment" id="3183200">//&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3183216">func</span>&nbsp;<span class="op" id="3183221">(</span><span class="ident" id="3183222">b</span>&nbsp;<span class="op" id="3183224">*</span><span class="ident" id="3183225"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3183231">)</span>&nbsp;<span class="ident" id="3183233">WriteByte</span><span class="op" id="3183242">(</span><span class="ident" id="3183243">c</span>&nbsp;<span class="builtintype" id="3183245">byte</span><span class="op" id="3183249">)</span>&nbsp;<span class="builtintype" id="3183251">error</span>&nbsp;<span class="op" id="3183257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183260"><a href="/bytes/buffer.go.html#3183222">b</a></span><span class="op" id="3183261">.</span><span class="ident" id="3183262">lastRead</span>&nbsp;<span class="op" id="3183271">=</span>&nbsp;<span class="ident" id="3183273"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183284">m</span>&nbsp;<span class="op" id="3183286">:=</span>&nbsp;<span class="ident" id="3183289"><a href="/bytes/buffer.go.html#3183222">b</a></span><span class="op" id="3183290">.</span><span class="ident" id="3183291">grow</span><span class="op" id="3183295">(</span><span class="num" id="3183296">1</span><span class="op" id="3183297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183300"><a href="/bytes/buffer.go.html#3183222">b</a></span><span class="op" id="3183301">.</span><span class="ident" id="3183302">buf</span><span class="op" id="3183305">[</span><span class="ident" id="3183306"><a href="/bytes/buffer.go.html#3183284">m</a></span><span class="op" id="3183307">]</span>&nbsp;<span class="op" id="3183309">=</span>&nbsp;<span class="ident" id="3183311"><a href="/bytes/buffer.go.html#3183243">c</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183314">return</span>&nbsp;<span class="ident" id="3183321">nil</span><br>
<span class="lineno"></span><span class="op" id="3183325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3183328">//&nbsp;WriteRune&nbsp;appends&nbsp;the&nbsp;UTF-8&nbsp;encoding&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;r&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3183399">//&nbsp;buffer,&nbsp;returning&nbsp;its&nbsp;length&nbsp;and&nbsp;an&nbsp;error,&nbsp;which&nbsp;is&nbsp;always&nbsp;nil&nbsp;but&nbsp;is</span><br>
<span class="lineno">235</span><span class="comment" id="3183472">//&nbsp;included&nbsp;to&nbsp;match&nbsp;bufio.Writer&#39;s&nbsp;WriteRune.&nbsp;The&nbsp;buffer&nbsp;is&nbsp;grown&nbsp;as&nbsp;needed;</span><br>
<span class="lineno"></span><span class="comment" id="3183550">//&nbsp;if&nbsp;it&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteRune&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3183617">func</span>&nbsp;<span class="op" id="3183622">(</span><span class="ident" id="3183623">b</span>&nbsp;<span class="op" id="3183625">*</span><span class="ident" id="3183626"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3183632">)</span>&nbsp;<span class="ident" id="3183634">WriteRune</span><span class="op" id="3183643">(</span><span class="ident" id="3183644">r</span>&nbsp;<span class="builtintype" id="3183646">rune</span><span class="op" id="3183650">)</span>&nbsp;<span class="op" id="3183652">(</span><span class="ident" id="3183653">n</span>&nbsp;<span class="builtintype" id="3183655">int</span><span class="op" id="3183658">,</span>&nbsp;<span class="ident" id="3183660">err</span>&nbsp;<span class="builtintype" id="3183664">error</span><span class="op" id="3183669">)</span>&nbsp;<span class="op" id="3183671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183674">if</span>&nbsp;<span class="ident" id="3183677"><a href="/bytes/buffer.go.html#3183644">r</a></span>&nbsp;<span class="op" id="3183679">&lt;</span>&nbsp;<span class="ident" id="3183681"><a href="/bytes/buffer.go.html#3176201">utf8</a></span><span class="op" id="3183685">.</span><span class="ident" id="3183686">RuneSelf</span>&nbsp;<span class="op" id="3183695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183699"><a href="/bytes/buffer.go.html#3183623">b</a></span><span class="op" id="3183700">.</span><span class="ident" id="3183701">WriteByte</span><span class="op" id="3183710">(</span><span class="builtintype" id="3183711">byte</span><span class="op" id="3183715">(</span><span class="ident" id="3183716"><a href="/bytes/buffer.go.html#3183644">r</a></span><span class="op" id="3183717">)</span><span class="op" id="3183718">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183722">return</span>&nbsp;<span class="num" id="3183729">1</span><span class="op" id="3183730">,</span>&nbsp;<span class="ident" id="3183732">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183740"><a href="/bytes/buffer.go.html#3183653">n</a></span>&nbsp;<span class="op" id="3183742">=</span>&nbsp;<span class="ident" id="3183744"><a href="/bytes/buffer.go.html#3176201">utf8</a></span><span class="op" id="3183748">.</span><span class="ident" id="3183749">EncodeRune</span><span class="op" id="3183759">(</span><span class="ident" id="3183760"><a href="/bytes/buffer.go.html#3183623">b</a></span><span class="op" id="3183761">.</span><span class="ident" id="3183762">runeBytes</span><span class="op" id="3183771">[</span><span class="num" id="3183772">0</span><span class="op" id="3183773">:</span><span class="op" id="3183774">]</span><span class="op" id="3183775">,</span>&nbsp;<span class="ident" id="3183777"><a href="/bytes/buffer.go.html#3183644">r</a></span><span class="op" id="3183778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183781"><a href="/bytes/buffer.go.html#3183623">b</a></span><span class="op" id="3183782">.</span><span class="ident" id="3183783">Write</span><span class="op" id="3183788">(</span><span class="ident" id="3183789"><a href="/bytes/buffer.go.html#3183623">b</a></span><span class="op" id="3183790">.</span><span class="ident" id="3183791">runeBytes</span><span class="op" id="3183800">[</span><span class="num" id="3183801">0</span><span class="op" id="3183802">:</span><span class="ident" id="3183803"><a href="/bytes/buffer.go.html#3183653">n</a></span><span class="op" id="3183804">]</span><span class="op" id="3183805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183808">return</span>&nbsp;<span class="ident" id="3183815"><a href="/bytes/buffer.go.html#3183653">n</a></span><span class="op" id="3183816">,</span>&nbsp;<span class="ident" id="3183818">nil</span><br>
<span class="lineno">245</span><span class="op" id="3183822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3183825">//&nbsp;Read&nbsp;reads&nbsp;the&nbsp;next&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer&nbsp;or&nbsp;until&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3183897">//&nbsp;is&nbsp;drained.&nbsp;&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.&nbsp;&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3183969">//&nbsp;buffer&nbsp;has&nbsp;no&nbsp;data&nbsp;to&nbsp;return,&nbsp;err&nbsp;is&nbsp;io.EOF&nbsp;(unless&nbsp;len(p)&nbsp;is&nbsp;zero);</span><br>
<span class="lineno">250</span><span class="comment" id="3184041">//&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3184065">func</span>&nbsp;<span class="op" id="3184070">(</span><span class="ident" id="3184071">b</span>&nbsp;<span class="op" id="3184073">*</span><span class="ident" id="3184074"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3184080">)</span>&nbsp;<span class="ident" id="3184082">Read</span><span class="op" id="3184086">(</span><span class="ident" id="3184087">p</span>&nbsp;<span class="op" id="3184089">[</span><span class="op" id="3184090">]</span><span class="builtintype" id="3184091">byte</span><span class="op" id="3184095">)</span>&nbsp;<span class="op" id="3184097">(</span><span class="ident" id="3184098">n</span>&nbsp;<span class="builtintype" id="3184100">int</span><span class="op" id="3184103">,</span>&nbsp;<span class="ident" id="3184105">err</span>&nbsp;<span class="builtintype" id="3184109">error</span><span class="op" id="3184114">)</span>&nbsp;<span class="op" id="3184116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184119"><a href="/bytes/buffer.go.html#3184071">b</a></span><span class="op" id="3184120">.</span><span class="ident" id="3184121">lastRead</span>&nbsp;<span class="op" id="3184130">=</span>&nbsp;<span class="ident" id="3184132"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184143">if</span>&nbsp;<span class="ident" id="3184146"><a href="/bytes/buffer.go.html#3184071">b</a></span><span class="op" id="3184147">.</span><span class="ident" id="3184148">off</span>&nbsp;<span class="op" id="3184152">&gt;=</span>&nbsp;<span class="builtinfunc" id="3184155">len</span><span class="op" id="3184158">(</span><span class="ident" id="3184159"><a href="/bytes/buffer.go.html#3184071">b</a></span><span class="op" id="3184160">.</span><span class="ident" id="3184161">buf</span><span class="op" id="3184164">)</span>&nbsp;<span class="op" id="3184166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3184170">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184216"><a href="/bytes/buffer.go.html#3184071">b</a></span><span class="op" id="3184217">.</span><span class="ident" id="3184218">Truncate</span><span class="op" id="3184226">(</span><span class="num" id="3184227">0</span><span class="op" id="3184228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184232">if</span>&nbsp;<span class="builtinfunc" id="3184235">len</span><span class="op" id="3184238">(</span><span class="ident" id="3184239"><a href="/bytes/buffer.go.html#3184087">p</a></span><span class="op" id="3184240">)</span>&nbsp;<span class="op" id="3184242">==</span>&nbsp;<span class="num" id="3184245">0</span>&nbsp;<span class="op" id="3184247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184252">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184265">return</span>&nbsp;<span class="num" id="3184272">0</span><span class="op" id="3184273">,</span>&nbsp;<span class="ident" id="3184275"><a href="/bytes/buffer.go.html#3176195">io</a></span><span class="op" id="3184277">.</span><span class="ident" id="3184278">EOF</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184286"><a href="/bytes/buffer.go.html#3184098">n</a></span>&nbsp;<span class="op" id="3184288">=</span>&nbsp;<span class="builtinfunc" id="3184290">copy</span><span class="op" id="3184294">(</span><span class="ident" id="3184295"><a href="/bytes/buffer.go.html#3184087">p</a></span><span class="op" id="3184296">,</span>&nbsp;<span class="ident" id="3184298"><a href="/bytes/buffer.go.html#3184071">b</a></span><span class="op" id="3184299">.</span><span class="ident" id="3184300">buf</span><span class="op" id="3184303">[</span><span class="ident" id="3184304"><a href="/bytes/buffer.go.html#3184071">b</a></span><span class="op" id="3184305">.</span><span class="ident" id="3184306">off</span><span class="op" id="3184309">:</span><span class="op" id="3184310">]</span><span class="op" id="3184311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184314"><a href="/bytes/buffer.go.html#3184071">b</a></span><span class="op" id="3184315">.</span><span class="ident" id="3184316">off</span>&nbsp;<span class="op" id="3184320">+=</span>&nbsp;<span class="ident" id="3184323"><a href="/bytes/buffer.go.html#3184098">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184326">if</span>&nbsp;<span class="ident" id="3184329"><a href="/bytes/buffer.go.html#3184098">n</a></span>&nbsp;<span class="op" id="3184331">&gt;</span>&nbsp;<span class="num" id="3184333">0</span>&nbsp;<span class="op" id="3184335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184339"><a href="/bytes/buffer.go.html#3184071">b</a></span><span class="op" id="3184340">.</span><span class="ident" id="3184341">lastRead</span>&nbsp;<span class="op" id="3184350">=</span>&nbsp;<span class="ident" id="3184352"><a href="/bytes/buffer.go.html#3177070">opRead</a></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184363">return</span><br>
<span class="lineno"></span><span class="op" id="3184370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3184373">//&nbsp;Next&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;next&nbsp;n&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer,</span><br>
<span class="lineno">270</span><span class="comment" id="3184442">//&nbsp;advancing&nbsp;the&nbsp;buffer&nbsp;as&nbsp;if&nbsp;the&nbsp;bytes&nbsp;had&nbsp;been&nbsp;returned&nbsp;by&nbsp;Read.</span><br>
<span class="lineno"></span><span class="comment" id="3184509">//&nbsp;If&nbsp;there&nbsp;are&nbsp;fewer&nbsp;than&nbsp;n&nbsp;bytes&nbsp;in&nbsp;the&nbsp;buffer,&nbsp;Next&nbsp;returns&nbsp;the&nbsp;entire&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3184591">//&nbsp;The&nbsp;slice&nbsp;is&nbsp;only&nbsp;valid&nbsp;until&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;a&nbsp;read&nbsp;or&nbsp;write&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3184665">func</span>&nbsp;<span class="op" id="3184670">(</span><span class="ident" id="3184671">b</span>&nbsp;<span class="op" id="3184673">*</span><span class="ident" id="3184674"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3184680">)</span>&nbsp;<span class="ident" id="3184682">Next</span><span class="op" id="3184686">(</span><span class="ident" id="3184687">n</span>&nbsp;<span class="builtintype" id="3184689">int</span><span class="op" id="3184692">)</span>&nbsp;<span class="op" id="3184694">[</span><span class="op" id="3184695">]</span><span class="builtintype" id="3184696">byte</span>&nbsp;<span class="op" id="3184701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184704"><a href="/bytes/buffer.go.html#3184671">b</a></span><span class="op" id="3184705">.</span><span class="ident" id="3184706">lastRead</span>&nbsp;<span class="op" id="3184715">=</span>&nbsp;<span class="ident" id="3184717"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184728">m</span>&nbsp;<span class="op" id="3184730">:=</span>&nbsp;<span class="ident" id="3184733"><a href="/bytes/buffer.go.html#3184671">b</a></span><span class="op" id="3184734">.</span><span class="ident" id="3184735">Len</span><span class="op" id="3184738">(</span><span class="op" id="3184739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184742">if</span>&nbsp;<span class="ident" id="3184745"><a href="/bytes/buffer.go.html#3184687">n</a></span>&nbsp;<span class="op" id="3184747">&gt;</span>&nbsp;<span class="ident" id="3184749"><a href="/bytes/buffer.go.html#3184728">m</a></span>&nbsp;<span class="op" id="3184751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184755"><a href="/bytes/buffer.go.html#3184687">n</a></span>&nbsp;<span class="op" id="3184757">=</span>&nbsp;<span class="ident" id="3184759"><a href="/bytes/buffer.go.html#3184728">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184765">data</span>&nbsp;<span class="op" id="3184770">:=</span>&nbsp;<span class="ident" id="3184773"><a href="/bytes/buffer.go.html#3184671">b</a></span><span class="op" id="3184774">.</span><span class="ident" id="3184775">buf</span><span class="op" id="3184778">[</span><span class="ident" id="3184779"><a href="/bytes/buffer.go.html#3184671">b</a></span><span class="op" id="3184780">.</span><span class="ident" id="3184781">off</span>&nbsp;<span class="op" id="3184785">:</span>&nbsp;<span class="ident" id="3184787"><a href="/bytes/buffer.go.html#3184671">b</a></span><span class="op" id="3184788">.</span><span class="ident" id="3184789">off</span><span class="op" id="3184792">+</span><span class="ident" id="3184793"><a href="/bytes/buffer.go.html#3184687">n</a></span><span class="op" id="3184794">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184797"><a href="/bytes/buffer.go.html#3184671">b</a></span><span class="op" id="3184798">.</span><span class="ident" id="3184799">off</span>&nbsp;<span class="op" id="3184803">+=</span>&nbsp;<span class="ident" id="3184806"><a href="/bytes/buffer.go.html#3184687">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184809">if</span>&nbsp;<span class="ident" id="3184812"><a href="/bytes/buffer.go.html#3184687">n</a></span>&nbsp;<span class="op" id="3184814">&gt;</span>&nbsp;<span class="num" id="3184816">0</span>&nbsp;<span class="op" id="3184818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184822"><a href="/bytes/buffer.go.html#3184671">b</a></span><span class="op" id="3184823">.</span><span class="ident" id="3184824">lastRead</span>&nbsp;<span class="op" id="3184833">=</span>&nbsp;<span class="ident" id="3184835"><a href="/bytes/buffer.go.html#3177070">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184846">return</span>&nbsp;<span class="ident" id="3184853"><a href="/bytes/buffer.go.html#3184765">data</a></span><br>
<span class="lineno">285</span><span class="op" id="3184858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3184861">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3184922">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;it&nbsp;returns&nbsp;error&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="3184975">func</span>&nbsp;<span class="op" id="3184980">(</span><span class="ident" id="3184981">b</span>&nbsp;<span class="op" id="3184983">*</span><span class="ident" id="3184984"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3184990">)</span>&nbsp;<span class="ident" id="3184992">ReadByte</span><span class="op" id="3185000">(</span><span class="op" id="3185001">)</span>&nbsp;<span class="op" id="3185003">(</span><span class="ident" id="3185004">c</span>&nbsp;<span class="builtintype" id="3185006">byte</span><span class="op" id="3185010">,</span>&nbsp;<span class="ident" id="3185012">err</span>&nbsp;<span class="builtintype" id="3185016">error</span><span class="op" id="3185021">)</span>&nbsp;<span class="op" id="3185023">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185026"><a href="/bytes/buffer.go.html#3184981">b</a></span><span class="op" id="3185027">.</span><span class="ident" id="3185028">lastRead</span>&nbsp;<span class="op" id="3185037">=</span>&nbsp;<span class="ident" id="3185039"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3185050">if</span>&nbsp;<span class="ident" id="3185053"><a href="/bytes/buffer.go.html#3184981">b</a></span><span class="op" id="3185054">.</span><span class="ident" id="3185055">off</span>&nbsp;<span class="op" id="3185059">&gt;=</span>&nbsp;<span class="builtinfunc" id="3185062">len</span><span class="op" id="3185065">(</span><span class="ident" id="3185066"><a href="/bytes/buffer.go.html#3184981">b</a></span><span class="op" id="3185067">.</span><span class="ident" id="3185068">buf</span><span class="op" id="3185071">)</span>&nbsp;<span class="op" id="3185073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3185077">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185123"><a href="/bytes/buffer.go.html#3184981">b</a></span><span class="op" id="3185124">.</span><span class="ident" id="3185125">Truncate</span><span class="op" id="3185133">(</span><span class="num" id="3185134">0</span><span class="op" id="3185135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3185139">return</span>&nbsp;<span class="num" id="3185146">0</span><span class="op" id="3185147">,</span>&nbsp;<span class="ident" id="3185149"><a href="/bytes/buffer.go.html#3176195">io</a></span><span class="op" id="3185151">.</span><span class="ident" id="3185152">EOF</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3185157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185160"><a href="/bytes/buffer.go.html#3185004">c</a></span>&nbsp;<span class="op" id="3185162">=</span>&nbsp;<span class="ident" id="3185164"><a href="/bytes/buffer.go.html#3184981">b</a></span><span class="op" id="3185165">.</span><span class="ident" id="3185166">buf</span><span class="op" id="3185169">[</span><span class="ident" id="3185170"><a href="/bytes/buffer.go.html#3184981">b</a></span><span class="op" id="3185171">.</span><span class="ident" id="3185172">off</span><span class="op" id="3185175">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185178"><a href="/bytes/buffer.go.html#3184981">b</a></span><span class="op" id="3185179">.</span><span class="ident" id="3185180">off</span><span class="op" id="3185183">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185187"><a href="/bytes/buffer.go.html#3184981">b</a></span><span class="op" id="3185188">.</span><span class="ident" id="3185189">lastRead</span>&nbsp;<span class="op" id="3185198">=</span>&nbsp;<span class="ident" id="3185200"><a href="/bytes/buffer.go.html#3177070">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3185208">return</span>&nbsp;<span class="ident" id="3185215"><a href="/bytes/buffer.go.html#3185004">c</a></span><span class="op" id="3185216">,</span>&nbsp;<span class="ident" id="3185218">nil</span><br>
<span class="lineno">300</span><span class="op" id="3185222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3185225">//&nbsp;ReadRune&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;UTF-8-encoded</span><br>
<span class="lineno"></span><span class="comment" id="3185278">//&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3185317">//&nbsp;If&nbsp;no&nbsp;bytes&nbsp;are&nbsp;available,&nbsp;the&nbsp;error&nbsp;returned&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno">305</span><span class="comment" id="3185377">//&nbsp;If&nbsp;the&nbsp;bytes&nbsp;are&nbsp;an&nbsp;erroneous&nbsp;UTF-8&nbsp;encoding,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3185429">//&nbsp;consumes&nbsp;one&nbsp;byte&nbsp;and&nbsp;returns&nbsp;U+FFFD,&nbsp;1.</span><br>
<span class="lineno"></span><span class="keyword" id="3185473">func</span>&nbsp;<span class="op" id="3185478">(</span><span class="ident" id="3185479">b</span>&nbsp;<span class="op" id="3185481">*</span><span class="ident" id="3185482"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3185488">)</span>&nbsp;<span class="ident" id="3185490">ReadRune</span><span class="op" id="3185498">(</span><span class="op" id="3185499">)</span>&nbsp;<span class="op" id="3185501">(</span><span class="ident" id="3185502">r</span>&nbsp;<span class="builtintype" id="3185504">rune</span><span class="op" id="3185508">,</span>&nbsp;<span class="ident" id="3185510">size</span>&nbsp;<span class="builtintype" id="3185515">int</span><span class="op" id="3185518">,</span>&nbsp;<span class="ident" id="3185520">err</span>&nbsp;<span class="builtintype" id="3185524">error</span><span class="op" id="3185529">)</span>&nbsp;<span class="op" id="3185531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185534"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185535">.</span><span class="ident" id="3185536">lastRead</span>&nbsp;<span class="op" id="3185545">=</span>&nbsp;<span class="ident" id="3185547"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3185558">if</span>&nbsp;<span class="ident" id="3185561"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185562">.</span><span class="ident" id="3185563">off</span>&nbsp;<span class="op" id="3185567">&gt;=</span>&nbsp;<span class="builtinfunc" id="3185570">len</span><span class="op" id="3185573">(</span><span class="ident" id="3185574"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185575">.</span><span class="ident" id="3185576">buf</span><span class="op" id="3185579">)</span>&nbsp;<span class="op" id="3185581">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3185585">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185631"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185632">.</span><span class="ident" id="3185633">Truncate</span><span class="op" id="3185641">(</span><span class="num" id="3185642">0</span><span class="op" id="3185643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3185647">return</span>&nbsp;<span class="num" id="3185654">0</span><span class="op" id="3185655">,</span>&nbsp;<span class="num" id="3185657">0</span><span class="op" id="3185658">,</span>&nbsp;<span class="ident" id="3185660"><a href="/bytes/buffer.go.html#3176195">io</a></span><span class="op" id="3185662">.</span><span class="ident" id="3185663">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3185668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185671"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185672">.</span><span class="ident" id="3185673">lastRead</span>&nbsp;<span class="op" id="3185682">=</span>&nbsp;<span class="ident" id="3185684"><a href="/bytes/buffer.go.html#3177030">opReadRune</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185696">c</span>&nbsp;<span class="op" id="3185698">:=</span>&nbsp;<span class="ident" id="3185701"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185702">.</span><span class="ident" id="3185703">buf</span><span class="op" id="3185706">[</span><span class="ident" id="3185707"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185708">.</span><span class="ident" id="3185709">off</span><span class="op" id="3185712">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3185715">if</span>&nbsp;<span class="ident" id="3185718"><a href="/bytes/buffer.go.html#3185696">c</a></span>&nbsp;<span class="op" id="3185720">&lt;</span>&nbsp;<span class="ident" id="3185722"><a href="/bytes/buffer.go.html#3176201">utf8</a></span><span class="op" id="3185726">.</span><span class="ident" id="3185727">RuneSelf</span>&nbsp;<span class="op" id="3185736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185740"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185741">.</span><span class="ident" id="3185742">off</span><span class="op" id="3185745">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3185750">return</span>&nbsp;<span class="builtintype" id="3185757">rune</span><span class="op" id="3185761">(</span><span class="ident" id="3185762"><a href="/bytes/buffer.go.html#3185696">c</a></span><span class="op" id="3185763">)</span><span class="op" id="3185764">,</span>&nbsp;<span class="num" id="3185766">1</span><span class="op" id="3185767">,</span>&nbsp;<span class="ident" id="3185769">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3185774">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185777"><a href="/bytes/buffer.go.html#3185502">r</a></span><span class="op" id="3185778">,</span>&nbsp;<span class="ident" id="3185780">n</span>&nbsp;<span class="op" id="3185782">:=</span>&nbsp;<span class="ident" id="3185785"><a href="/bytes/buffer.go.html#3176201">utf8</a></span><span class="op" id="3185789">.</span><span class="ident" id="3185790">DecodeRune</span><span class="op" id="3185800">(</span><span class="ident" id="3185801"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185802">.</span><span class="ident" id="3185803">buf</span><span class="op" id="3185806">[</span><span class="ident" id="3185807"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185808">.</span><span class="ident" id="3185809">off</span><span class="op" id="3185812">:</span><span class="op" id="3185813">]</span><span class="op" id="3185814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3185817"><a href="/bytes/buffer.go.html#3185479">b</a></span><span class="op" id="3185818">.</span><span class="ident" id="3185819">off</span>&nbsp;<span class="op" id="3185823">+=</span>&nbsp;<span class="ident" id="3185826"><a href="/bytes/buffer.go.html#3185780">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3185829">return</span>&nbsp;<span class="ident" id="3185836"><a href="/bytes/buffer.go.html#3185502">r</a></span><span class="op" id="3185837">,</span>&nbsp;<span class="ident" id="3185839"><a href="/bytes/buffer.go.html#3185780">n</a></span><span class="op" id="3185840">,</span>&nbsp;<span class="ident" id="3185842">nil</span><br>
<span class="lineno"></span><span class="op" id="3185846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="3185849">//&nbsp;UnreadRune&nbsp;unreads&nbsp;the&nbsp;last&nbsp;rune&nbsp;returned&nbsp;by&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="comment" id="3185907">//&nbsp;If&nbsp;the&nbsp;most&nbsp;recent&nbsp;read&nbsp;or&nbsp;write&nbsp;operation&nbsp;on&nbsp;the&nbsp;buffer&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="3185971">//&nbsp;not&nbsp;a&nbsp;ReadRune,&nbsp;UnreadRune&nbsp;returns&nbsp;an&nbsp;error.&nbsp;&nbsp;(In&nbsp;this&nbsp;regard</span><br>
<span class="lineno"></span><span class="comment" id="3186036">//&nbsp;it&nbsp;is&nbsp;stricter&nbsp;than&nbsp;UnreadByte,&nbsp;which&nbsp;will&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="3186103">//&nbsp;from&nbsp;any&nbsp;read&nbsp;operation.)</span><br>
<span class="lineno">330</span><span class="keyword" id="3186132">func</span>&nbsp;<span class="op" id="3186137">(</span><span class="ident" id="3186138">b</span>&nbsp;<span class="op" id="3186140">*</span><span class="ident" id="3186141"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3186147">)</span>&nbsp;<span class="ident" id="3186149">UnreadRune</span><span class="op" id="3186159">(</span><span class="op" id="3186160">)</span>&nbsp;<span class="builtintype" id="3186162">error</span>&nbsp;<span class="op" id="3186168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3186171">if</span>&nbsp;<span class="ident" id="3186174"><a href="/bytes/buffer.go.html#3186138">b</a></span><span class="op" id="3186175">.</span><span class="ident" id="3186176">lastRead</span>&nbsp;<span class="op" id="3186185">!=</span>&nbsp;<span class="ident" id="3186188"><a href="/bytes/buffer.go.html#3177030">opReadRune</a></span>&nbsp;<span class="op" id="3186199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3186203">return</span>&nbsp;<span class="ident" id="3186210"><a href="/bytes/buffer.go.html#3176185">errors</a></span><span class="op" id="3186216">.</span><span class="ident" id="3186217">New</span><span class="op" id="3186220">(</span><span class="string" id="3186221">&#34;bytes.Buffer:&nbsp;UnreadRune:&nbsp;previous&nbsp;operation&nbsp;was&nbsp;not&nbsp;ReadRune&#34;</span><span class="op" id="3186284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3186287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3186290"><a href="/bytes/buffer.go.html#3186138">b</a></span><span class="op" id="3186291">.</span><span class="ident" id="3186292">lastRead</span>&nbsp;<span class="op" id="3186301">=</span>&nbsp;<span class="ident" id="3186303"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3186314">if</span>&nbsp;<span class="ident" id="3186317"><a href="/bytes/buffer.go.html#3186138">b</a></span><span class="op" id="3186318">.</span><span class="ident" id="3186319">off</span>&nbsp;<span class="op" id="3186323">&gt;</span>&nbsp;<span class="num" id="3186325">0</span>&nbsp;<span class="op" id="3186327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3186331">_</span><span class="op" id="3186332">,</span>&nbsp;<span class="ident" id="3186334">n</span>&nbsp;<span class="op" id="3186336">:=</span>&nbsp;<span class="ident" id="3186339"><a href="/bytes/buffer.go.html#3176201">utf8</a></span><span class="op" id="3186343">.</span><span class="ident" id="3186344">DecodeLastRune</span><span class="op" id="3186358">(</span><span class="ident" id="3186359"><a href="/bytes/buffer.go.html#3186138">b</a></span><span class="op" id="3186360">.</span><span class="ident" id="3186361">buf</span><span class="op" id="3186364">[</span><span class="num" id="3186365">0</span><span class="op" id="3186366">:</span><span class="ident" id="3186367"><a href="/bytes/buffer.go.html#3186138">b</a></span><span class="op" id="3186368">.</span><span class="ident" id="3186369">off</span><span class="op" id="3186372">]</span><span class="op" id="3186373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3186377"><a href="/bytes/buffer.go.html#3186138">b</a></span><span class="op" id="3186378">.</span><span class="ident" id="3186379">off</span>&nbsp;<span class="op" id="3186383">-=</span>&nbsp;<span class="ident" id="3186386"><a href="/bytes/buffer.go.html#3186334">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3186389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3186392">return</span>&nbsp;<span class="ident" id="3186399">nil</span><br>
<span class="lineno">340</span><span class="op" id="3186403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3186406">//&nbsp;UnreadByte&nbsp;unreads&nbsp;the&nbsp;last&nbsp;byte&nbsp;returned&nbsp;by&nbsp;the&nbsp;most&nbsp;recent</span><br>
<span class="lineno"></span><span class="comment" id="3186470">//&nbsp;read&nbsp;operation.&nbsp;&nbsp;If&nbsp;write&nbsp;has&nbsp;happened&nbsp;since&nbsp;the&nbsp;last&nbsp;read,&nbsp;UnreadByte</span><br>
<span class="lineno"></span><span class="comment" id="3186544">//&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">345</span><span class="keyword" id="3186565">func</span>&nbsp;<span class="op" id="3186570">(</span><span class="ident" id="3186571">b</span>&nbsp;<span class="op" id="3186573">*</span><span class="ident" id="3186574"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3186580">)</span>&nbsp;<span class="ident" id="3186582">UnreadByte</span><span class="op" id="3186592">(</span><span class="op" id="3186593">)</span>&nbsp;<span class="builtintype" id="3186595">error</span>&nbsp;<span class="op" id="3186601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3186604">if</span>&nbsp;<span class="ident" id="3186607"><a href="/bytes/buffer.go.html#3186571">b</a></span><span class="op" id="3186608">.</span><span class="ident" id="3186609">lastRead</span>&nbsp;<span class="op" id="3186618">!=</span>&nbsp;<span class="ident" id="3186621"><a href="/bytes/buffer.go.html#3177030">opReadRune</a></span>&nbsp;<span class="op" id="3186632">&amp;&amp;</span>&nbsp;<span class="ident" id="3186635"><a href="/bytes/buffer.go.html#3186571">b</a></span><span class="op" id="3186636">.</span><span class="ident" id="3186637">lastRead</span>&nbsp;<span class="op" id="3186646">!=</span>&nbsp;<span class="ident" id="3186649"><a href="/bytes/buffer.go.html#3177070">opRead</a></span>&nbsp;<span class="op" id="3186656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3186660">return</span>&nbsp;<span class="ident" id="3186667"><a href="/bytes/buffer.go.html#3176185">errors</a></span><span class="op" id="3186673">.</span><span class="ident" id="3186674">New</span><span class="op" id="3186677">(</span><span class="string" id="3186678">&#34;bytes.Buffer:&nbsp;UnreadByte:&nbsp;previous&nbsp;operation&nbsp;was&nbsp;not&nbsp;a&nbsp;read&#34;</span><span class="op" id="3186739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3186742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3186745"><a href="/bytes/buffer.go.html#3186571">b</a></span><span class="op" id="3186746">.</span><span class="ident" id="3186747">lastRead</span>&nbsp;<span class="op" id="3186756">=</span>&nbsp;<span class="ident" id="3186758"><a href="/bytes/buffer.go.html#3176981">opInvalid</a></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3186769">if</span>&nbsp;<span class="ident" id="3186772"><a href="/bytes/buffer.go.html#3186571">b</a></span><span class="op" id="3186773">.</span><span class="ident" id="3186774">off</span>&nbsp;<span class="op" id="3186778">&gt;</span>&nbsp;<span class="num" id="3186780">0</span>&nbsp;<span class="op" id="3186782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3186786"><a href="/bytes/buffer.go.html#3186571">b</a></span><span class="op" id="3186787">.</span><span class="ident" id="3186788">off</span><span class="op" id="3186791">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3186795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3186798">return</span>&nbsp;<span class="ident" id="3186805">nil</span><br>
<span class="lineno"></span><span class="op" id="3186809">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="3186812">//&nbsp;ReadBytes&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="3186881">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="3186957">//&nbsp;If&nbsp;ReadBytes&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3187021">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">360</span><span class="comment" id="3187103">//&nbsp;ReadBytes&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3187184">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="keyword" id="3187194">func</span>&nbsp;<span class="op" id="3187199">(</span><span class="ident" id="3187200">b</span>&nbsp;<span class="op" id="3187202">*</span><span class="ident" id="3187203"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3187209">)</span>&nbsp;<span class="ident" id="3187211">ReadBytes</span><span class="op" id="3187220">(</span><span class="ident" id="3187221">delim</span>&nbsp;<span class="builtintype" id="3187227">byte</span><span class="op" id="3187231">)</span>&nbsp;<span class="op" id="3187233">(</span><span class="ident" id="3187234">line</span>&nbsp;<span class="op" id="3187239">[</span><span class="op" id="3187240">]</span><span class="builtintype" id="3187241">byte</span><span class="op" id="3187245">,</span>&nbsp;<span class="ident" id="3187247">err</span>&nbsp;<span class="builtintype" id="3187251">error</span><span class="op" id="3187256">)</span>&nbsp;<span class="op" id="3187258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187261">slice</span><span class="op" id="3187266">,</span>&nbsp;<span class="ident" id="3187268"><a href="/bytes/buffer.go.html#3187247">err</a></span>&nbsp;<span class="op" id="3187272">:=</span>&nbsp;<span class="ident" id="3187275"><a href="/bytes/buffer.go.html#3187200">b</a></span><span class="op" id="3187276">.</span><span class="ident" id="3187277">readSlice</span><span class="op" id="3187286">(</span><span class="ident" id="3187287"><a href="/bytes/buffer.go.html#3187221">delim</a></span><span class="op" id="3187292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3187295">//&nbsp;return&nbsp;a&nbsp;copy&nbsp;of&nbsp;slice.&nbsp;The&nbsp;buffer&#39;s&nbsp;backing&nbsp;array&nbsp;may</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3187354">//&nbsp;be&nbsp;overwritten&nbsp;by&nbsp;later&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187389"><a href="/bytes/buffer.go.html#3187234">line</a></span>&nbsp;<span class="op" id="3187394">=</span>&nbsp;<span class="builtinfunc" id="3187396">append</span><span class="op" id="3187402">(</span><span class="ident" id="3187403"><a href="/bytes/buffer.go.html#3187234">line</a></span><span class="op" id="3187407">,</span>&nbsp;<span class="ident" id="3187409"><a href="/bytes/buffer.go.html#3187261">slice</a></span><span class="op" id="3187414">...</span><span class="op" id="3187417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3187420">return</span><br>
<span class="lineno"></span><span class="op" id="3187427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="comment" id="3187430">//&nbsp;readSlice&nbsp;is&nbsp;like&nbsp;ReadBytes&nbsp;but&nbsp;returns&nbsp;a&nbsp;reference&nbsp;to&nbsp;internal&nbsp;buffer&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="3187510">func</span>&nbsp;<span class="op" id="3187515">(</span><span class="ident" id="3187516">b</span>&nbsp;<span class="op" id="3187518">*</span><span class="ident" id="3187519"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3187525">)</span>&nbsp;<span class="ident" id="3187527">readSlice</span><span class="op" id="3187536">(</span><span class="ident" id="3187537">delim</span>&nbsp;<span class="builtintype" id="3187543">byte</span><span class="op" id="3187547">)</span>&nbsp;<span class="op" id="3187549">(</span><span class="ident" id="3187550">line</span>&nbsp;<span class="op" id="3187555">[</span><span class="op" id="3187556">]</span><span class="builtintype" id="3187557">byte</span><span class="op" id="3187561">,</span>&nbsp;<span class="ident" id="3187563">err</span>&nbsp;<span class="builtintype" id="3187567">error</span><span class="op" id="3187572">)</span>&nbsp;<span class="op" id="3187574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187577">i</span>&nbsp;<span class="op" id="3187579">:=</span>&nbsp;<span class="ident" id="3187582"><a href="/bytes/bytes_decl.go.html#3207682">IndexByte</a></span><span class="op" id="3187591">(</span><span class="ident" id="3187592"><a href="/bytes/buffer.go.html#3187516">b</a></span><span class="op" id="3187593">.</span><span class="ident" id="3187594">buf</span><span class="op" id="3187597">[</span><span class="ident" id="3187598"><a href="/bytes/buffer.go.html#3187516">b</a></span><span class="op" id="3187599">.</span><span class="ident" id="3187600">off</span><span class="op" id="3187603">:</span><span class="op" id="3187604">]</span><span class="op" id="3187605">,</span>&nbsp;<span class="ident" id="3187607"><a href="/bytes/buffer.go.html#3187537">delim</a></span><span class="op" id="3187612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187615">end</span>&nbsp;<span class="op" id="3187619">:=</span>&nbsp;<span class="ident" id="3187622"><a href="/bytes/buffer.go.html#3187516">b</a></span><span class="op" id="3187623">.</span><span class="ident" id="3187624">off</span>&nbsp;<span class="op" id="3187628">+</span>&nbsp;<span class="ident" id="3187630"><a href="/bytes/buffer.go.html#3187577">i</a></span>&nbsp;<span class="op" id="3187632">+</span>&nbsp;<span class="num" id="3187634">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3187637">if</span>&nbsp;<span class="ident" id="3187640"><a href="/bytes/buffer.go.html#3187577">i</a></span>&nbsp;<span class="op" id="3187642">&lt;</span>&nbsp;<span class="num" id="3187644">0</span>&nbsp;<span class="op" id="3187646">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187650"><a href="/bytes/buffer.go.html#3187615">end</a></span>&nbsp;<span class="op" id="3187654">=</span>&nbsp;<span class="builtinfunc" id="3187656">len</span><span class="op" id="3187659">(</span><span class="ident" id="3187660"><a href="/bytes/buffer.go.html#3187516">b</a></span><span class="op" id="3187661">.</span><span class="ident" id="3187662">buf</span><span class="op" id="3187665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187669"><a href="/bytes/buffer.go.html#3187563">err</a></span>&nbsp;<span class="op" id="3187673">=</span>&nbsp;<span class="ident" id="3187675"><a href="/bytes/buffer.go.html#3176195">io</a></span><span class="op" id="3187677">.</span><span class="ident" id="3187678">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3187683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187686"><a href="/bytes/buffer.go.html#3187550">line</a></span>&nbsp;<span class="op" id="3187691">=</span>&nbsp;<span class="ident" id="3187693"><a href="/bytes/buffer.go.html#3187516">b</a></span><span class="op" id="3187694">.</span><span class="ident" id="3187695">buf</span><span class="op" id="3187698">[</span><span class="ident" id="3187699"><a href="/bytes/buffer.go.html#3187516">b</a></span><span class="op" id="3187700">.</span><span class="ident" id="3187701">off</span><span class="op" id="3187704">:</span><span class="ident" id="3187705"><a href="/bytes/buffer.go.html#3187615">end</a></span><span class="op" id="3187708">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187711"><a href="/bytes/buffer.go.html#3187516">b</a></span><span class="op" id="3187712">.</span><span class="ident" id="3187713">off</span>&nbsp;<span class="op" id="3187717">=</span>&nbsp;<span class="ident" id="3187719"><a href="/bytes/buffer.go.html#3187615">end</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3187724"><a href="/bytes/buffer.go.html#3187516">b</a></span><span class="op" id="3187725">.</span><span class="ident" id="3187726">lastRead</span>&nbsp;<span class="op" id="3187735">=</span>&nbsp;<span class="ident" id="3187737"><a href="/bytes/buffer.go.html#3177070">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3187745">return</span>&nbsp;<span class="ident" id="3187752"><a href="/bytes/buffer.go.html#3187550">line</a></span><span class="op" id="3187756">,</span>&nbsp;<span class="ident" id="3187758"><a href="/bytes/buffer.go.html#3187563">err</a></span><br>
<span class="lineno"></span><span class="op" id="3187762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3187765">//&nbsp;ReadString&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno">385</span><span class="comment" id="3187835">//&nbsp;returning&nbsp;a&nbsp;string&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="3187912">//&nbsp;If&nbsp;ReadString&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3187977">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno"></span><span class="comment" id="3188059">//&nbsp;ReadString&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end</span><br>
<span class="lineno"></span><span class="comment" id="3188138">//&nbsp;in&nbsp;delim.</span><br>
<span class="lineno">390</span><span class="keyword" id="3188151">func</span>&nbsp;<span class="op" id="3188156">(</span><span class="ident" id="3188157">b</span>&nbsp;<span class="op" id="3188159">*</span><span class="ident" id="3188160"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3188166">)</span>&nbsp;<span class="ident" id="3188168">ReadString</span><span class="op" id="3188178">(</span><span class="ident" id="3188179">delim</span>&nbsp;<span class="builtintype" id="3188185">byte</span><span class="op" id="3188189">)</span>&nbsp;<span class="op" id="3188191">(</span><span class="ident" id="3188192">line</span>&nbsp;<span class="builtintype" id="3188197">string</span><span class="op" id="3188203">,</span>&nbsp;<span class="ident" id="3188205">err</span>&nbsp;<span class="builtintype" id="3188209">error</span><span class="op" id="3188214">)</span>&nbsp;<span class="op" id="3188216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3188219">slice</span><span class="op" id="3188224">,</span>&nbsp;<span class="ident" id="3188226"><a href="/bytes/buffer.go.html#3188205">err</a></span>&nbsp;<span class="op" id="3188230">:=</span>&nbsp;<span class="ident" id="3188233"><a href="/bytes/buffer.go.html#3188157">b</a></span><span class="op" id="3188234">.</span><span class="ident" id="3188235">readSlice</span><span class="op" id="3188244">(</span><span class="ident" id="3188245"><a href="/bytes/buffer.go.html#3188179">delim</a></span><span class="op" id="3188250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3188253">return</span>&nbsp;<span class="builtintype" id="3188260">string</span><span class="op" id="3188266">(</span><span class="ident" id="3188267"><a href="/bytes/buffer.go.html#3188219">slice</a></span><span class="op" id="3188272">)</span><span class="op" id="3188273">,</span>&nbsp;<span class="ident" id="3188275"><a href="/bytes/buffer.go.html#3188205">err</a></span><br>
<span class="lineno"></span><span class="op" id="3188279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="comment" id="3188282">//&nbsp;NewBuffer&nbsp;creates&nbsp;and&nbsp;initializes&nbsp;a&nbsp;new&nbsp;Buffer&nbsp;using&nbsp;buf&nbsp;as&nbsp;its&nbsp;initial</span><br>
<span class="lineno"></span><span class="comment" id="3188357">//&nbsp;contents.&nbsp;&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;prepare&nbsp;a&nbsp;Buffer&nbsp;to&nbsp;read&nbsp;existing&nbsp;data.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="3188433">//&nbsp;can&nbsp;also&nbsp;be&nbsp;used&nbsp;to&nbsp;size&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;for&nbsp;writing.&nbsp;To&nbsp;do&nbsp;that,</span><br>
<span class="lineno"></span><span class="comment" id="3188506">//&nbsp;buf&nbsp;should&nbsp;have&nbsp;the&nbsp;desired&nbsp;capacity&nbsp;but&nbsp;a&nbsp;length&nbsp;of&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="3188568">//</span><br>
<span class="lineno">400</span><span class="comment" id="3188571">//&nbsp;In&nbsp;most&nbsp;cases,&nbsp;new(Buffer)&nbsp;(or&nbsp;just&nbsp;declaring&nbsp;a&nbsp;Buffer&nbsp;variable)&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3188642">//&nbsp;sufficient&nbsp;to&nbsp;initialize&nbsp;a&nbsp;Buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3188680">func</span>&nbsp;<span class="ident" id="3188685">NewBuffer</span><span class="op" id="3188694">(</span><span class="ident" id="3188695">buf</span>&nbsp;<span class="op" id="3188699">[</span><span class="op" id="3188700">]</span><span class="builtintype" id="3188701">byte</span><span class="op" id="3188705">)</span>&nbsp;<span class="op" id="3188707">*</span><span class="ident" id="3188708"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span>&nbsp;<span class="op" id="3188715">{</span>&nbsp;<span class="keyword" id="3188717">return</span>&nbsp;<span class="op" id="3188724">&amp;</span><span class="ident" id="3188725"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3188731">{</span><span class="ident" id="3188732">buf</span><span class="op" id="3188735">:</span>&nbsp;<span class="ident" id="3188737"><a href="/bytes/buffer.go.html#3188695">buf</a></span><span class="op" id="3188740">}</span>&nbsp;<span class="op" id="3188742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3188745">//&nbsp;NewBufferString&nbsp;creates&nbsp;and&nbsp;initializes&nbsp;a&nbsp;new&nbsp;Buffer&nbsp;using&nbsp;string&nbsp;s&nbsp;as&nbsp;its</span><br>
<span class="lineno">405</span><span class="comment" id="3188823">//&nbsp;initial&nbsp;contents.&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;prepare&nbsp;a&nbsp;buffer&nbsp;to&nbsp;read&nbsp;an&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="3188899">//&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3188910">//</span><br>
<span class="lineno"></span><span class="comment" id="3188913">//&nbsp;In&nbsp;most&nbsp;cases,&nbsp;new(Buffer)&nbsp;(or&nbsp;just&nbsp;declaring&nbsp;a&nbsp;Buffer&nbsp;variable)&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3188984">//&nbsp;sufficient&nbsp;to&nbsp;initialize&nbsp;a&nbsp;Buffer.</span><br>
<span class="lineno">410</span><span class="keyword" id="3189022">func</span>&nbsp;<span class="ident" id="3189027">NewBufferString</span><span class="op" id="3189042">(</span><span class="ident" id="3189043">s</span>&nbsp;<span class="builtintype" id="3189045">string</span><span class="op" id="3189051">)</span>&nbsp;<span class="op" id="3189053">*</span><span class="ident" id="3189054"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span>&nbsp;<span class="op" id="3189061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3189064">return</span>&nbsp;<span class="op" id="3189071">&amp;</span><span class="ident" id="3189072"><a href="/bytes/buffer.go.html#3176363">Buffer</a></span><span class="op" id="3189078">{</span><span class="ident" id="3189079">buf</span><span class="op" id="3189082">:</span>&nbsp;<span class="op" id="3189084">[</span><span class="op" id="3189085">]</span><span class="builtintype" id="3189086">byte</span><span class="op" id="3189090">(</span><span class="ident" id="3189091"><a href="/bytes/buffer.go.html#3189043">s</a></span><span class="op" id="3189092">)</span><span class="op" id="3189093">}</span><br>
<span class="lineno"></span><span class="op" id="3189095">}</span>
</div>
</body>
</html>
