<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html" class="current">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3157320">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3157375">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3157429">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3157480">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3157545">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3157594">package</span>&nbsp;<span class="ident" id="3157602">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3157607">import</span>&nbsp;<span class="string" id="3157614">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3157622">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="3157692">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="3157765">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="3157792">var</span>&nbsp;<span class="ident" id="3157796">services</span>&nbsp;<span class="op" id="3157805">=</span>&nbsp;<span class="keyword" id="3157807">map</span><span class="op" id="3157810">[</span><span class="builtintype" id="3157811">string</span><span class="op" id="3157817">]</span><span class="keyword" id="3157818">map</span><span class="op" id="3157821">[</span><span class="builtintype" id="3157822">string</span><span class="op" id="3157828">]</span><span class="builtintype" id="3157829">int</span><span class="op" id="3157832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3157835">&#34;tcp&#34;</span><span class="op" id="3157840">:</span>&nbsp;<span class="op" id="3157842">{</span><span class="string" id="3157843">&#34;http&#34;</span><span class="op" id="3157849">:</span>&nbsp;<span class="num" id="3157851">80</span><span class="op" id="3157853">}</span><span class="op" id="3157854">,</span><br>
<span class="lineno"></span><span class="op" id="3157856">}</span><br>
<span class="lineno"></span><span class="keyword" id="3157858">var</span>&nbsp;<span class="ident" id="3157862">servicesError</span>&nbsp;<span class="builtintype" id="3157876">error</span><br>
<span class="lineno">20</span><span class="keyword" id="3157882">var</span>&nbsp;<span class="ident" id="3157886">onceReadServices</span>&nbsp;<span class="ident" id="3157903">sync</span><span class="op" id="3157907">.</span><span class="ident" id="3157908">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3157914">func</span>&nbsp;<span class="ident" id="3157919">readServices</span><span class="op" id="3157931">(</span><span class="op" id="3157932">)</span>&nbsp;<span class="op" id="3157934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3157937">var</span>&nbsp;<span class="ident" id="3157941">file</span>&nbsp;<span class="op" id="3157946">*</span><span class="ident" id="3157947">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3157953">if</span>&nbsp;<span class="ident" id="3157956">file</span><span class="op" id="3157960">,</span>&nbsp;<span class="ident" id="3157962">servicesError</span>&nbsp;<span class="op" id="3157976">=</span>&nbsp;<span class="ident" id="3157978">open</span><span class="op" id="3157982">(</span><span class="string" id="3157983">&#34;/etc/services&#34;</span><span class="op" id="3157998">)</span><span class="op" id="3157999">;</span>&nbsp;<span class="ident" id="3158001">servicesError</span>&nbsp;<span class="op" id="3158015">!=</span>&nbsp;<span class="ident" id="3158018">nil</span>&nbsp;<span class="op" id="3158022">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158026">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158037">for</span>&nbsp;<span class="ident" id="3158041">line</span><span class="op" id="3158045">,</span>&nbsp;<span class="ident" id="3158047">ok</span>&nbsp;<span class="op" id="3158050">:=</span>&nbsp;<span class="ident" id="3158053">file</span><span class="op" id="3158057">.</span><span class="ident" id="3158058">readLine</span><span class="op" id="3158066">(</span><span class="op" id="3158067">)</span><span class="op" id="3158068">;</span>&nbsp;<span class="ident" id="3158070">ok</span><span class="op" id="3158072">;</span>&nbsp;<span class="ident" id="3158074">line</span><span class="op" id="3158078">,</span>&nbsp;<span class="ident" id="3158080">ok</span>&nbsp;<span class="op" id="3158083">=</span>&nbsp;<span class="ident" id="3158085">file</span><span class="op" id="3158089">.</span><span class="ident" id="3158090">readLine</span><span class="op" id="3158098">(</span><span class="op" id="3158099">)</span>&nbsp;<span class="op" id="3158101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3158105">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158159">if</span>&nbsp;<span class="ident" id="3158162">i</span>&nbsp;<span class="op" id="3158164">:=</span>&nbsp;<span class="ident" id="3158167">byteIndex</span><span class="op" id="3158176">(</span><span class="ident" id="3158177">line</span><span class="op" id="3158181">,</span>&nbsp;<span class="string" id="3158183">&#39;#&#39;</span><span class="op" id="3158186">)</span><span class="op" id="3158187">;</span>&nbsp;<span class="ident" id="3158189">i</span>&nbsp;<span class="op" id="3158191">&gt;=</span>&nbsp;<span class="num" id="3158194">0</span>&nbsp;<span class="op" id="3158196">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158201">line</span>&nbsp;<span class="op" id="3158206">=</span>&nbsp;<span class="ident" id="3158208">line</span><span class="op" id="3158212">[</span><span class="num" id="3158213">0</span><span class="op" id="3158214">:</span><span class="ident" id="3158215">i</span><span class="op" id="3158216">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158224">f</span>&nbsp;<span class="op" id="3158226">:=</span>&nbsp;<span class="ident" id="3158229">getFields</span><span class="op" id="3158238">(</span><span class="ident" id="3158239">line</span><span class="op" id="3158243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158247">if</span>&nbsp;<span class="builtinfunc" id="3158250">len</span><span class="op" id="3158253">(</span><span class="ident" id="3158254">f</span><span class="op" id="3158255">)</span>&nbsp;<span class="op" id="3158257">&lt;</span>&nbsp;<span class="num" id="3158259">2</span>&nbsp;<span class="op" id="3158261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158266">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158281">portnet</span>&nbsp;<span class="op" id="3158289">:=</span>&nbsp;<span class="ident" id="3158292">f</span><span class="op" id="3158293">[</span><span class="num" id="3158294">1</span><span class="op" id="3158295">]</span>&nbsp;<span class="comment" id="3158297">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158311">port</span><span class="op" id="3158315">,</span>&nbsp;<span class="ident" id="3158317">j</span><span class="op" id="3158318">,</span>&nbsp;<span class="ident" id="3158320">ok</span>&nbsp;<span class="op" id="3158323">:=</span>&nbsp;<span class="ident" id="3158326">dtoi</span><span class="op" id="3158330">(</span><span class="ident" id="3158331">portnet</span><span class="op" id="3158338">,</span>&nbsp;<span class="num" id="3158340">0</span><span class="op" id="3158341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158345">if</span>&nbsp;<span class="op" id="3158348">!</span><span class="ident" id="3158349">ok</span>&nbsp;<span class="op" id="3158352">||</span>&nbsp;<span class="ident" id="3158355">port</span>&nbsp;<span class="op" id="3158360">&lt;=</span>&nbsp;<span class="num" id="3158363">0</span>&nbsp;<span class="op" id="3158365">||</span>&nbsp;<span class="ident" id="3158368">j</span>&nbsp;<span class="op" id="3158370">&gt;=</span>&nbsp;<span class="builtinfunc" id="3158373">len</span><span class="op" id="3158376">(</span><span class="ident" id="3158377">portnet</span><span class="op" id="3158384">)</span>&nbsp;<span class="op" id="3158386">||</span>&nbsp;<span class="ident" id="3158389">portnet</span><span class="op" id="3158396">[</span><span class="ident" id="3158397">j</span><span class="op" id="3158398">]</span>&nbsp;<span class="op" id="3158400">!=</span>&nbsp;<span class="string" id="3158403">&#39;/&#39;</span>&nbsp;<span class="op" id="3158407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158412">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158427">netw</span>&nbsp;<span class="op" id="3158432">:=</span>&nbsp;<span class="ident" id="3158435">portnet</span><span class="op" id="3158442">[</span><span class="ident" id="3158443">j</span><span class="op" id="3158444">+</span><span class="num" id="3158445">1</span><span class="op" id="3158446">:</span><span class="op" id="3158447">]</span>&nbsp;<span class="comment" id="3158449">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158460">m</span><span class="op" id="3158461">,</span>&nbsp;<span class="ident" id="3158463">ok1</span>&nbsp;<span class="op" id="3158467">:=</span>&nbsp;<span class="ident" id="3158470">services</span><span class="op" id="3158478">[</span><span class="ident" id="3158479">netw</span><span class="op" id="3158483">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158487">if</span>&nbsp;<span class="op" id="3158490">!</span><span class="ident" id="3158491">ok1</span>&nbsp;<span class="op" id="3158495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158500">m</span>&nbsp;<span class="op" id="3158502">=</span>&nbsp;<span class="builtinfunc" id="3158504">make</span><span class="op" id="3158508">(</span><span class="keyword" id="3158509">map</span><span class="op" id="3158512">[</span><span class="builtintype" id="3158513">string</span><span class="op" id="3158519">]</span><span class="builtintype" id="3158520">int</span><span class="op" id="3158523">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158528">services</span><span class="op" id="3158536">[</span><span class="ident" id="3158537">netw</span><span class="op" id="3158541">]</span>&nbsp;<span class="op" id="3158543">=</span>&nbsp;<span class="ident" id="3158545">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158553">for</span>&nbsp;<span class="ident" id="3158557">i</span>&nbsp;<span class="op" id="3158559">:=</span>&nbsp;<span class="num" id="3158562">0</span><span class="op" id="3158563">;</span>&nbsp;<span class="ident" id="3158565">i</span>&nbsp;<span class="op" id="3158567">&lt;</span>&nbsp;<span class="builtinfunc" id="3158569">len</span><span class="op" id="3158572">(</span><span class="ident" id="3158573">f</span><span class="op" id="3158574">)</span><span class="op" id="3158575">;</span>&nbsp;<span class="ident" id="3158577">i</span><span class="op" id="3158578">++</span>&nbsp;<span class="op" id="3158581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158586">if</span>&nbsp;<span class="ident" id="3158589">i</span>&nbsp;<span class="op" id="3158591">!=</span>&nbsp;<span class="num" id="3158594">1</span>&nbsp;<span class="op" id="3158596">{</span>&nbsp;<span class="comment" id="3158598">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158623">m</span><span class="op" id="3158624">[</span><span class="ident" id="3158625">f</span><span class="op" id="3158626">[</span><span class="ident" id="3158627">i</span><span class="op" id="3158628">]</span><span class="op" id="3158629">]</span>&nbsp;<span class="op" id="3158631">=</span>&nbsp;<span class="ident" id="3158633">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158651">file</span><span class="op" id="3158655">.</span><span class="builtinfunc" id="3158656">close</span><span class="op" id="3158661">(</span><span class="op" id="3158662">)</span><br>
<span class="lineno"></span><span class="op" id="3158664">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3158667">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="3158730">func</span>&nbsp;<span class="ident" id="3158735">goLookupPort</span><span class="op" id="3158747">(</span><span class="ident" id="3158748">network</span><span class="op" id="3158755">,</span>&nbsp;<span class="ident" id="3158757">service</span>&nbsp;<span class="builtintype" id="3158765">string</span><span class="op" id="3158771">)</span>&nbsp;<span class="op" id="3158773">(</span><span class="ident" id="3158774">port</span>&nbsp;<span class="builtintype" id="3158779">int</span><span class="op" id="3158782">,</span>&nbsp;<span class="ident" id="3158784">err</span>&nbsp;<span class="builtintype" id="3158788">error</span><span class="op" id="3158793">)</span>&nbsp;<span class="op" id="3158795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158798">onceReadServices</span><span class="op" id="3158814">.</span><span class="ident" id="3158815">Do</span><span class="op" id="3158817">(</span><span class="ident" id="3158818">readServices</span><span class="op" id="3158830">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158834">switch</span>&nbsp;<span class="ident" id="3158841">network</span>&nbsp;<span class="op" id="3158849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158852">case</span>&nbsp;<span class="string" id="3158857">&#34;tcp4&#34;</span><span class="op" id="3158863">,</span>&nbsp;<span class="string" id="3158865">&#34;tcp6&#34;</span><span class="op" id="3158871">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158875">network</span>&nbsp;<span class="op" id="3158883">=</span>&nbsp;<span class="string" id="3158885">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158892">case</span>&nbsp;<span class="string" id="3158897">&#34;udp4&#34;</span><span class="op" id="3158903">,</span>&nbsp;<span class="string" id="3158905">&#34;udp6&#34;</span><span class="op" id="3158911">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3158915">network</span>&nbsp;<span class="op" id="3158923">=</span>&nbsp;<span class="string" id="3158925">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3158932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158936">if</span>&nbsp;<span class="ident" id="3158939">m</span><span class="op" id="3158940">,</span>&nbsp;<span class="ident" id="3158942">ok</span>&nbsp;<span class="op" id="3158945">:=</span>&nbsp;<span class="ident" id="3158948">services</span><span class="op" id="3158956">[</span><span class="ident" id="3158957">network</span><span class="op" id="3158964">]</span><span class="op" id="3158965">;</span>&nbsp;<span class="ident" id="3158967">ok</span>&nbsp;<span class="op" id="3158970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3158974">if</span>&nbsp;<span class="ident" id="3158977">port</span><span class="op" id="3158981">,</span>&nbsp;<span class="ident" id="3158983">ok</span>&nbsp;<span class="op" id="3158986">=</span>&nbsp;<span class="ident" id="3158988">m</span><span class="op" id="3158989">[</span><span class="ident" id="3158990">service</span><span class="op" id="3158997">]</span><span class="op" id="3158998">;</span>&nbsp;<span class="ident" id="3159000">ok</span>&nbsp;<span class="op" id="3159003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3159008">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3159017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3159020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3159023">return</span>&nbsp;<span class="num" id="3159030">0</span><span class="op" id="3159031">,</span>&nbsp;<span class="op" id="3159033">&amp;</span><span class="ident" id="3159034">AddrError</span><span class="op" id="3159043">{</span><span class="string" id="3159044">&#34;unknown&nbsp;port&#34;</span><span class="op" id="3159058">,</span>&nbsp;<span class="ident" id="3159060">network</span>&nbsp;<span class="op" id="3159068">+</span>&nbsp;<span class="string" id="3159070">&#34;/&#34;</span>&nbsp;<span class="op" id="3159074">+</span>&nbsp;<span class="ident" id="3159076">service</span><span class="op" id="3159083">}</span><br>
<span class="lineno"></span><span class="op" id="3159085">}</span>
</div>
</body>
</html>
