<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html" class="current">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1528819">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1528874">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1528928">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1528979">package</span>&nbsp;<span class="ident" id="1528987">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1528996">import</span>&nbsp;<span class="string" id="1529003">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1529013">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*m.</span><br>
<span class="lineno">10</span><span class="keyword" id="1529055">func</span>&nbsp;<span class="ident" id="1529060">gc_m_ptr</span><span class="op" id="1529068">(</span><span class="ident" id="1529069">ret</span>&nbsp;<span class="op" id="1529073">*</span><span class="keyword" id="1529074">interface</span><span class="op" id="1529083">{</span><span class="op" id="1529084">}</span><span class="op" id="1529085">)</span>&nbsp;<span class="op" id="1529087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529090">*</span><span class="ident" id="1529091">ret</span>&nbsp;<span class="op" id="1529095">=</span>&nbsp;<span class="op" id="1529097">(</span><span class="op" id="1529098">*</span><span class="ident" id="1529099">m</span><span class="op" id="1529100">)</span><span class="op" id="1529101">(</span><span class="builtintype" id="1529102">nil</span><span class="op" id="1529105">)</span><br>
<span class="lineno"></span><span class="op" id="1529107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1529110">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*g.</span><br>
<span class="lineno">15</span><span class="keyword" id="1529152">func</span>&nbsp;<span class="ident" id="1529157">gc_g_ptr</span><span class="op" id="1529165">(</span><span class="ident" id="1529166">ret</span>&nbsp;<span class="op" id="1529170">*</span><span class="keyword" id="1529171">interface</span><span class="op" id="1529180">{</span><span class="op" id="1529181">}</span><span class="op" id="1529182">)</span>&nbsp;<span class="op" id="1529184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529187">*</span><span class="ident" id="1529188">ret</span>&nbsp;<span class="op" id="1529192">=</span>&nbsp;<span class="op" id="1529194">(</span><span class="op" id="1529195">*</span><span class="ident" id="1529196">g</span><span class="op" id="1529197">)</span><span class="op" id="1529198">(</span><span class="builtintype" id="1529199">nil</span><span class="op" id="1529202">)</span><br>
<span class="lineno"></span><span class="op" id="1529204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1529207">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*itab.</span><br>
<span class="lineno">20</span><span class="keyword" id="1529252">func</span>&nbsp;<span class="ident" id="1529257">gc_itab_ptr</span><span class="op" id="1529268">(</span><span class="ident" id="1529269">ret</span>&nbsp;<span class="op" id="1529273">*</span><span class="keyword" id="1529274">interface</span><span class="op" id="1529283">{</span><span class="op" id="1529284">}</span><span class="op" id="1529285">)</span>&nbsp;<span class="op" id="1529287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529290">*</span><span class="ident" id="1529291">ret</span>&nbsp;<span class="op" id="1529295">=</span>&nbsp;<span class="op" id="1529297">(</span><span class="op" id="1529298">*</span><span class="ident" id="1529299">itab</span><span class="op" id="1529303">)</span><span class="op" id="1529304">(</span><span class="builtintype" id="1529305">nil</span><span class="op" id="1529308">)</span><br>
<span class="lineno"></span><span class="op" id="1529310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1529313">func</span>&nbsp;<span class="ident" id="1529318">gc_unixnanotime</span><span class="op" id="1529333">(</span><span class="ident" id="1529334">now</span>&nbsp;<span class="op" id="1529338">*</span><span class="builtintype" id="1529339">int64</span><span class="op" id="1529344">)</span>&nbsp;<span class="op" id="1529346">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529349">sec</span><span class="op" id="1529352">,</span>&nbsp;<span class="ident" id="1529354">nsec</span>&nbsp;<span class="op" id="1529359">:=</span>&nbsp;<span class="ident" id="1529362">timenow</span><span class="op" id="1529369">(</span><span class="op" id="1529370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529373">*</span><span class="ident" id="1529374">now</span>&nbsp;<span class="op" id="1529378">=</span>&nbsp;<span class="ident" id="1529380">sec</span><span class="op" id="1529383">*</span><span class="num" id="1529384">1e9</span>&nbsp;<span class="op" id="1529388">+</span>&nbsp;<span class="builtintype" id="1529390">int64</span><span class="op" id="1529395">(</span><span class="ident" id="1529396">nsec</span><span class="op" id="1529400">)</span><br>
<span class="lineno"></span><span class="op" id="1529402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1529405">func</span>&nbsp;<span class="ident" id="1529410">freeOSMemory</span><span class="op" id="1529422">(</span><span class="op" id="1529423">)</span>&nbsp;<span class="op" id="1529425">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529428">gogc</span><span class="op" id="1529432">(</span><span class="num" id="1529433">2</span><span class="op" id="1529434">)</span>&nbsp;<span class="comment" id="1529436">//&nbsp;force&nbsp;GC&nbsp;and&nbsp;do&nbsp;eager&nbsp;sweep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529468">onM</span><span class="op" id="1529471">(</span><span class="ident" id="1529472">scavenge_m</span><span class="op" id="1529482">)</span><br>
<span class="lineno"></span><span class="op" id="1529484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1529487">var</span>&nbsp;<span class="ident" id="1529491">poolcleanup</span>&nbsp;<span class="keyword" id="1529503">func</span><span class="op" id="1529507">(</span><span class="op" id="1529508">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="1529511">func</span>&nbsp;<span class="ident" id="1529516">registerPoolCleanup</span><span class="op" id="1529535">(</span><span class="ident" id="1529536">f</span>&nbsp;<span class="keyword" id="1529538">func</span><span class="op" id="1529542">(</span><span class="op" id="1529543">)</span><span class="op" id="1529544">)</span>&nbsp;<span class="op" id="1529546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529549">poolcleanup</span>&nbsp;<span class="op" id="1529561">=</span>&nbsp;<span class="ident" id="1529563">f</span><br>
<span class="lineno"></span><span class="op" id="1529565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="1529568">func</span>&nbsp;<span class="ident" id="1529573">clearpools</span><span class="op" id="1529583">(</span><span class="op" id="1529584">)</span>&nbsp;<span class="op" id="1529586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1529589">//&nbsp;clear&nbsp;sync.Pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529610">if</span>&nbsp;<span class="ident" id="1529613">poolcleanup</span>&nbsp;<span class="op" id="1529625">!=</span>&nbsp;<span class="builtintype" id="1529628">nil</span>&nbsp;<span class="op" id="1529632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529636">poolcleanup</span><span class="op" id="1529647">(</span><span class="op" id="1529648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529651">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529655">for</span>&nbsp;<span class="ident" id="1529659">_</span><span class="op" id="1529660">,</span>&nbsp;<span class="ident" id="1529662">p</span>&nbsp;<span class="op" id="1529664">:=</span>&nbsp;<span class="keyword" id="1529667">range</span>&nbsp;<span class="op" id="1529673">&amp;</span><span class="ident" id="1529674">allp</span>&nbsp;<span class="op" id="1529679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529683">if</span>&nbsp;<span class="ident" id="1529686">p</span>&nbsp;<span class="op" id="1529688">==</span>&nbsp;<span class="builtintype" id="1529691">nil</span>&nbsp;<span class="op" id="1529695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529700">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529708">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1529712">//&nbsp;clear&nbsp;tinyalloc&nbsp;pool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529738">if</span>&nbsp;<span class="ident" id="1529741">c</span>&nbsp;<span class="op" id="1529743">:=</span>&nbsp;<span class="ident" id="1529746">p</span><span class="op" id="1529747">.</span><span class="ident" id="1529748">mcache</span><span class="op" id="1529754">;</span>&nbsp;<span class="ident" id="1529756">c</span>&nbsp;<span class="op" id="1529758">!=</span>&nbsp;<span class="builtintype" id="1529761">nil</span>&nbsp;<span class="op" id="1529765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529770">c</span><span class="op" id="1529771">.</span><span class="ident" id="1529772">tiny</span>&nbsp;<span class="op" id="1529777">=</span>&nbsp;<span class="builtintype" id="1529779">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529786">c</span><span class="op" id="1529787">.</span><span class="ident" id="1529788">tinysize</span>&nbsp;<span class="op" id="1529797">=</span>&nbsp;<span class="num" id="1529799">0</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1529805">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1529867">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529935">var</span>&nbsp;<span class="ident" id="1529939">sg</span><span class="op" id="1529941">,</span>&nbsp;<span class="ident" id="1529943">sgnext</span>&nbsp;<span class="op" id="1529950">*</span><span class="ident" id="1529951">sudog</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529960">for</span>&nbsp;<span class="ident" id="1529964">sg</span>&nbsp;<span class="op" id="1529967">=</span>&nbsp;<span class="ident" id="1529969">c</span><span class="op" id="1529970">.</span><span class="ident" id="1529971">sudogcache</span><span class="op" id="1529981">;</span>&nbsp;<span class="ident" id="1529983">sg</span>&nbsp;<span class="op" id="1529986">!=</span>&nbsp;<span class="builtintype" id="1529989">nil</span><span class="op" id="1529992">;</span>&nbsp;<span class="ident" id="1529994">sg</span>&nbsp;<span class="op" id="1529997">=</span>&nbsp;<span class="ident" id="1529999">sgnext</span>&nbsp;<span class="op" id="1530006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530012">sgnext</span>&nbsp;<span class="op" id="1530019">=</span>&nbsp;<span class="ident" id="1530021">sg</span><span class="op" id="1530023">.</span><span class="ident" id="1530024">next</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530033">sg</span><span class="op" id="1530035">.</span><span class="ident" id="1530036">next</span>&nbsp;<span class="op" id="1530041">=</span>&nbsp;<span class="builtintype" id="1530043">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530055">c</span><span class="op" id="1530056">.</span><span class="ident" id="1530057">sudogcache</span>&nbsp;<span class="op" id="1530068">=</span>&nbsp;<span class="builtintype" id="1530070">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1530081">//&nbsp;clear&nbsp;defer&nbsp;pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530104">for</span>&nbsp;<span class="ident" id="1530108">i</span>&nbsp;<span class="op" id="1530110">:=</span>&nbsp;<span class="keyword" id="1530113">range</span>&nbsp;<span class="ident" id="1530119">p</span><span class="op" id="1530120">.</span><span class="ident" id="1530121">deferpool</span>&nbsp;<span class="op" id="1530131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1530136">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1530198">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530266">var</span>&nbsp;<span class="ident" id="1530270">d</span><span class="op" id="1530271">,</span>&nbsp;<span class="ident" id="1530273">dlink</span>&nbsp;<span class="op" id="1530279">*</span><span class="ident" id="1530280">_defer</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530290">for</span>&nbsp;<span class="ident" id="1530294">d</span>&nbsp;<span class="op" id="1530296">=</span>&nbsp;<span class="ident" id="1530298">p</span><span class="op" id="1530299">.</span><span class="ident" id="1530300">deferpool</span><span class="op" id="1530309">[</span><span class="ident" id="1530310">i</span><span class="op" id="1530311">]</span><span class="op" id="1530312">;</span>&nbsp;<span class="ident" id="1530314">d</span>&nbsp;<span class="op" id="1530316">!=</span>&nbsp;<span class="builtintype" id="1530319">nil</span><span class="op" id="1530322">;</span>&nbsp;<span class="ident" id="1530324">d</span>&nbsp;<span class="op" id="1530326">=</span>&nbsp;<span class="ident" id="1530328">dlink</span>&nbsp;<span class="op" id="1530334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530340">dlink</span>&nbsp;<span class="op" id="1530346">=</span>&nbsp;<span class="ident" id="1530348">d</span><span class="op" id="1530349">.</span><span class="ident" id="1530350">link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530359">d</span><span class="op" id="1530360">.</span><span class="ident" id="1530361">link</span>&nbsp;<span class="op" id="1530366">=</span>&nbsp;<span class="builtintype" id="1530368">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530380">p</span><span class="op" id="1530381">.</span><span class="ident" id="1530382">deferpool</span><span class="op" id="1530391">[</span><span class="ident" id="1530392">i</span><span class="op" id="1530393">]</span>&nbsp;<span class="op" id="1530395">=</span>&nbsp;<span class="builtintype" id="1530397">nil</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530406">}</span><br>
<span class="lineno"></span><span class="op" id="1530408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1530411">func</span>&nbsp;<span class="ident" id="1530416">gosweepone</span><span class="op" id="1530426">(</span><span class="op" id="1530427">)</span>&nbsp;<span class="builtintype" id="1530429">uintptr</span><br>
<span class="lineno">80</span><span class="keyword" id="1530437">func</span>&nbsp;<span class="ident" id="1530442">gosweepdone</span><span class="op" id="1530453">(</span><span class="op" id="1530454">)</span>&nbsp;<span class="builtintype" id="1530456">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1530462">func</span>&nbsp;<span class="ident" id="1530467">bgsweep</span><span class="op" id="1530474">(</span><span class="op" id="1530475">)</span>&nbsp;<span class="op" id="1530477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530480">getg</span><span class="op" id="1530484">(</span><span class="op" id="1530485">)</span><span class="op" id="1530486">.</span><span class="ident" id="1530487">issystem</span>&nbsp;<span class="op" id="1530496">=</span>&nbsp;<span class="builtintype" id="1530498">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530504">for</span>&nbsp;<span class="op" id="1530508">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530512">for</span>&nbsp;<span class="ident" id="1530516">gosweepone</span><span class="op" id="1530526">(</span><span class="op" id="1530527">)</span>&nbsp;<span class="op" id="1530529">!=</span>&nbsp;<span class="op" id="1530532">^</span><span class="builtintype" id="1530533">uintptr</span><span class="op" id="1530540">(</span><span class="num" id="1530541">0</span><span class="op" id="1530542">)</span>&nbsp;<span class="op" id="1530544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530549">sweep</span><span class="op" id="1530554">.</span><span class="ident" id="1530555">nbgsweep</span><span class="op" id="1530563">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530569">Gosched</span><span class="op" id="1530576">(</span><span class="op" id="1530577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530585">lock</span><span class="op" id="1530589">(</span><span class="op" id="1530590">&amp;</span><span class="ident" id="1530591">gclock</span><span class="op" id="1530597">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530601">if</span>&nbsp;<span class="op" id="1530604">!</span><span class="ident" id="1530605">gosweepdone</span><span class="op" id="1530616">(</span><span class="op" id="1530617">)</span>&nbsp;<span class="op" id="1530619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1530624">//&nbsp;This&nbsp;can&nbsp;happen&nbsp;if&nbsp;a&nbsp;GC&nbsp;runs&nbsp;between</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1530667">//&nbsp;gosweepone&nbsp;returning&nbsp;^0&nbsp;above</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1530703">//&nbsp;and&nbsp;the&nbsp;lock&nbsp;being&nbsp;acquired.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530738">unlock</span><span class="op" id="1530744">(</span><span class="op" id="1530745">&amp;</span><span class="ident" id="1530746">gclock</span><span class="op" id="1530752">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530757">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530772">sweep</span><span class="op" id="1530777">.</span><span class="ident" id="1530778">parked</span>&nbsp;<span class="op" id="1530785">=</span>&nbsp;<span class="builtintype" id="1530787">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530794">goparkunlock</span><span class="op" id="1530806">(</span><span class="op" id="1530807">&amp;</span><span class="ident" id="1530808">gclock</span><span class="op" id="1530814">,</span>&nbsp;<span class="string" id="1530816">&#34;GC&nbsp;sweep&nbsp;wait&#34;</span><span class="op" id="1530831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530834">}</span><br>
<span class="lineno">100</span><span class="op" id="1530836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1530839">//&nbsp;NOTE:&nbsp;Really&nbsp;dst&nbsp;*unsafe.Pointer,&nbsp;src&nbsp;unsafe.Pointer,</span><br>
<span class="lineno"></span><span class="comment" id="1530896">//&nbsp;but&nbsp;if&nbsp;we&nbsp;do&nbsp;that,&nbsp;Go&nbsp;inserts&nbsp;a&nbsp;write&nbsp;barrier&nbsp;on&nbsp;*dst&nbsp;=&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="1530960">//go:nosplit</span><br>
<span class="lineno">105</span><span class="keyword" id="1530973">func</span>&nbsp;<span class="ident" id="1530978">writebarrierptr</span><span class="op" id="1530993">(</span><span class="ident" id="1530994">dst</span>&nbsp;<span class="op" id="1530998">*</span><span class="builtintype" id="1530999">uintptr</span><span class="op" id="1531006">,</span>&nbsp;<span class="ident" id="1531008">src</span>&nbsp;<span class="builtintype" id="1531012">uintptr</span><span class="op" id="1531019">)</span>&nbsp;<span class="op" id="1531021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1531024">*</span><span class="ident" id="1531025">dst</span>&nbsp;<span class="op" id="1531029">=</span>&nbsp;<span class="ident" id="1531031">src</span><br>
<span class="lineno"></span><span class="op" id="1531035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1531038">//go:nosplit</span><br>
<span class="lineno">110</span><span class="keyword" id="1531051">func</span>&nbsp;<span class="ident" id="1531056">writebarrierstring</span><span class="op" id="1531074">(</span><span class="ident" id="1531075">dst</span>&nbsp;<span class="op" id="1531079">*</span><span class="op" id="1531080">[</span><span class="num" id="1531081">2</span><span class="op" id="1531082">]</span><span class="builtintype" id="1531083">uintptr</span><span class="op" id="1531090">,</span>&nbsp;<span class="ident" id="1531092">src</span>&nbsp;<span class="op" id="1531096">[</span><span class="num" id="1531097">2</span><span class="op" id="1531098">]</span><span class="builtintype" id="1531099">uintptr</span><span class="op" id="1531106">)</span>&nbsp;<span class="op" id="1531108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531111">dst</span><span class="op" id="1531114">[</span><span class="num" id="1531115">0</span><span class="op" id="1531116">]</span>&nbsp;<span class="op" id="1531118">=</span>&nbsp;<span class="ident" id="1531120">src</span><span class="op" id="1531123">[</span><span class="num" id="1531124">0</span><span class="op" id="1531125">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531128">dst</span><span class="op" id="1531131">[</span><span class="num" id="1531132">1</span><span class="op" id="1531133">]</span>&nbsp;<span class="op" id="1531135">=</span>&nbsp;<span class="ident" id="1531137">src</span><span class="op" id="1531140">[</span><span class="num" id="1531141">1</span><span class="op" id="1531142">]</span><br>
<span class="lineno"></span><span class="op" id="1531144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="1531147">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1531160">func</span>&nbsp;<span class="ident" id="1531165">writebarrierslice</span><span class="op" id="1531182">(</span><span class="ident" id="1531183">dst</span>&nbsp;<span class="op" id="1531187">*</span><span class="op" id="1531188">[</span><span class="num" id="1531189">3</span><span class="op" id="1531190">]</span><span class="builtintype" id="1531191">uintptr</span><span class="op" id="1531198">,</span>&nbsp;<span class="ident" id="1531200">src</span>&nbsp;<span class="op" id="1531204">[</span><span class="num" id="1531205">3</span><span class="op" id="1531206">]</span><span class="builtintype" id="1531207">uintptr</span><span class="op" id="1531214">)</span>&nbsp;<span class="op" id="1531216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531219">dst</span><span class="op" id="1531222">[</span><span class="num" id="1531223">0</span><span class="op" id="1531224">]</span>&nbsp;<span class="op" id="1531226">=</span>&nbsp;<span class="ident" id="1531228">src</span><span class="op" id="1531231">[</span><span class="num" id="1531232">0</span><span class="op" id="1531233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531236">dst</span><span class="op" id="1531239">[</span><span class="num" id="1531240">1</span><span class="op" id="1531241">]</span>&nbsp;<span class="op" id="1531243">=</span>&nbsp;<span class="ident" id="1531245">src</span><span class="op" id="1531248">[</span><span class="num" id="1531249">1</span><span class="op" id="1531250">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531253">dst</span><span class="op" id="1531256">[</span><span class="num" id="1531257">2</span><span class="op" id="1531258">]</span>&nbsp;<span class="op" id="1531260">=</span>&nbsp;<span class="ident" id="1531262">src</span><span class="op" id="1531265">[</span><span class="num" id="1531266">2</span><span class="op" id="1531267">]</span><br>
<span class="lineno">120</span><span class="op" id="1531269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1531272">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1531285">func</span>&nbsp;<span class="ident" id="1531290">writebarrieriface</span><span class="op" id="1531307">(</span><span class="ident" id="1531308">dst</span>&nbsp;<span class="op" id="1531312">*</span><span class="op" id="1531313">[</span><span class="num" id="1531314">2</span><span class="op" id="1531315">]</span><span class="builtintype" id="1531316">uintptr</span><span class="op" id="1531323">,</span>&nbsp;<span class="ident" id="1531325">src</span>&nbsp;<span class="op" id="1531329">[</span><span class="num" id="1531330">2</span><span class="op" id="1531331">]</span><span class="builtintype" id="1531332">uintptr</span><span class="op" id="1531339">)</span>&nbsp;<span class="op" id="1531341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531344">dst</span><span class="op" id="1531347">[</span><span class="num" id="1531348">0</span><span class="op" id="1531349">]</span>&nbsp;<span class="op" id="1531351">=</span>&nbsp;<span class="ident" id="1531353">src</span><span class="op" id="1531356">[</span><span class="num" id="1531357">0</span><span class="op" id="1531358">]</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531361">dst</span><span class="op" id="1531364">[</span><span class="num" id="1531365">1</span><span class="op" id="1531366">]</span>&nbsp;<span class="op" id="1531368">=</span>&nbsp;<span class="ident" id="1531370">src</span><span class="op" id="1531373">[</span><span class="num" id="1531374">1</span><span class="op" id="1531375">]</span><br>
<span class="lineno"></span><span class="op" id="1531377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1531380">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1531393">func</span>&nbsp;<span class="ident" id="1531398">writebarrierfat2</span><span class="op" id="1531414">(</span><span class="ident" id="1531415">dst</span>&nbsp;<span class="op" id="1531419">*</span><span class="op" id="1531420">[</span><span class="num" id="1531421">2</span><span class="op" id="1531422">]</span><span class="builtintype" id="1531423">uintptr</span><span class="op" id="1531430">,</span>&nbsp;<span class="ident" id="1531432">_</span>&nbsp;<span class="op" id="1531434">*</span><span class="builtintype" id="1531435">byte</span><span class="op" id="1531439">,</span>&nbsp;<span class="ident" id="1531441">src</span>&nbsp;<span class="op" id="1531445">[</span><span class="num" id="1531446">2</span><span class="op" id="1531447">]</span><span class="builtintype" id="1531448">uintptr</span><span class="op" id="1531455">)</span>&nbsp;<span class="op" id="1531457">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531460">dst</span><span class="op" id="1531463">[</span><span class="num" id="1531464">0</span><span class="op" id="1531465">]</span>&nbsp;<span class="op" id="1531467">=</span>&nbsp;<span class="ident" id="1531469">src</span><span class="op" id="1531472">[</span><span class="num" id="1531473">0</span><span class="op" id="1531474">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531477">dst</span><span class="op" id="1531480">[</span><span class="num" id="1531481">1</span><span class="op" id="1531482">]</span>&nbsp;<span class="op" id="1531484">=</span>&nbsp;<span class="ident" id="1531486">src</span><span class="op" id="1531489">[</span><span class="num" id="1531490">1</span><span class="op" id="1531491">]</span><br>
<span class="lineno"></span><span class="op" id="1531493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1531496">//go:nosplit</span><br>
<span class="lineno">135</span><span class="keyword" id="1531509">func</span>&nbsp;<span class="ident" id="1531514">writebarrierfat3</span><span class="op" id="1531530">(</span><span class="ident" id="1531531">dst</span>&nbsp;<span class="op" id="1531535">*</span><span class="op" id="1531536">[</span><span class="num" id="1531537">3</span><span class="op" id="1531538">]</span><span class="builtintype" id="1531539">uintptr</span><span class="op" id="1531546">,</span>&nbsp;<span class="ident" id="1531548">_</span>&nbsp;<span class="op" id="1531550">*</span><span class="builtintype" id="1531551">byte</span><span class="op" id="1531555">,</span>&nbsp;<span class="ident" id="1531557">src</span>&nbsp;<span class="op" id="1531561">[</span><span class="num" id="1531562">3</span><span class="op" id="1531563">]</span><span class="builtintype" id="1531564">uintptr</span><span class="op" id="1531571">)</span>&nbsp;<span class="op" id="1531573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531576">dst</span><span class="op" id="1531579">[</span><span class="num" id="1531580">0</span><span class="op" id="1531581">]</span>&nbsp;<span class="op" id="1531583">=</span>&nbsp;<span class="ident" id="1531585">src</span><span class="op" id="1531588">[</span><span class="num" id="1531589">0</span><span class="op" id="1531590">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531593">dst</span><span class="op" id="1531596">[</span><span class="num" id="1531597">1</span><span class="op" id="1531598">]</span>&nbsp;<span class="op" id="1531600">=</span>&nbsp;<span class="ident" id="1531602">src</span><span class="op" id="1531605">[</span><span class="num" id="1531606">1</span><span class="op" id="1531607">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531610">dst</span><span class="op" id="1531613">[</span><span class="num" id="1531614">2</span><span class="op" id="1531615">]</span>&nbsp;<span class="op" id="1531617">=</span>&nbsp;<span class="ident" id="1531619">src</span><span class="op" id="1531622">[</span><span class="num" id="1531623">2</span><span class="op" id="1531624">]</span><br>
<span class="lineno"></span><span class="op" id="1531626">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1531629">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1531642">func</span>&nbsp;<span class="ident" id="1531647">writebarrierfat4</span><span class="op" id="1531663">(</span><span class="ident" id="1531664">dst</span>&nbsp;<span class="op" id="1531668">*</span><span class="op" id="1531669">[</span><span class="num" id="1531670">4</span><span class="op" id="1531671">]</span><span class="builtintype" id="1531672">uintptr</span><span class="op" id="1531679">,</span>&nbsp;<span class="ident" id="1531681">_</span>&nbsp;<span class="op" id="1531683">*</span><span class="builtintype" id="1531684">byte</span><span class="op" id="1531688">,</span>&nbsp;<span class="ident" id="1531690">src</span>&nbsp;<span class="op" id="1531694">[</span><span class="num" id="1531695">4</span><span class="op" id="1531696">]</span><span class="builtintype" id="1531697">uintptr</span><span class="op" id="1531704">)</span>&nbsp;<span class="op" id="1531706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531709">dst</span><span class="op" id="1531712">[</span><span class="num" id="1531713">0</span><span class="op" id="1531714">]</span>&nbsp;<span class="op" id="1531716">=</span>&nbsp;<span class="ident" id="1531718">src</span><span class="op" id="1531721">[</span><span class="num" id="1531722">0</span><span class="op" id="1531723">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531726">dst</span><span class="op" id="1531729">[</span><span class="num" id="1531730">1</span><span class="op" id="1531731">]</span>&nbsp;<span class="op" id="1531733">=</span>&nbsp;<span class="ident" id="1531735">src</span><span class="op" id="1531738">[</span><span class="num" id="1531739">1</span><span class="op" id="1531740">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531743">dst</span><span class="op" id="1531746">[</span><span class="num" id="1531747">2</span><span class="op" id="1531748">]</span>&nbsp;<span class="op" id="1531750">=</span>&nbsp;<span class="ident" id="1531752">src</span><span class="op" id="1531755">[</span><span class="num" id="1531756">2</span><span class="op" id="1531757">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531760">dst</span><span class="op" id="1531763">[</span><span class="num" id="1531764">3</span><span class="op" id="1531765">]</span>&nbsp;<span class="op" id="1531767">=</span>&nbsp;<span class="ident" id="1531769">src</span><span class="op" id="1531772">[</span><span class="num" id="1531773">3</span><span class="op" id="1531774">]</span><br>
<span class="lineno"></span><span class="op" id="1531776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1531779">//go:nosplit</span><br>
<span class="lineno">150</span><span class="keyword" id="1531792">func</span>&nbsp;<span class="ident" id="1531797">writebarrierfat</span><span class="op" id="1531812">(</span><span class="ident" id="1531813">typ</span>&nbsp;<span class="op" id="1531817">*</span><span class="ident" id="1531818">_type</span><span class="op" id="1531823">,</span>&nbsp;<span class="ident" id="1531825">dst</span><span class="op" id="1531828">,</span>&nbsp;<span class="ident" id="1531830">src</span>&nbsp;<span class="ident" id="1531834">unsafe</span><span class="op" id="1531840">.</span><span class="ident" id="1531841">Pointer</span><span class="op" id="1531848">)</span>&nbsp;<span class="op" id="1531850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1531853">memmove</span><span class="op" id="1531860">(</span><span class="ident" id="1531861">dst</span><span class="op" id="1531864">,</span>&nbsp;<span class="ident" id="1531866">src</span><span class="op" id="1531869">,</span>&nbsp;<span class="ident" id="1531871">typ</span><span class="op" id="1531874">.</span><span class="ident" id="1531875">size</span><span class="op" id="1531879">)</span><br>
<span class="lineno"></span><span class="op" id="1531881">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
