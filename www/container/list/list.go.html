<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4273023">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4273078">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4273132">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4273183">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4273232">//</span><br>
<span class="lineno"></span><span class="comment" id="4273235">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4273283">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4273331">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4273364">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="4273369">//</span><br>
<span class="lineno"></span><span class="keyword" id="4273372">package</span>&nbsp;<span class="ident" id="4273380">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4273386">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4273429">type</span>&nbsp;<span class="ident" id="4273434">Element</span>&nbsp;<span class="keyword" id="4273442">struct</span>&nbsp;<span class="op" id="4273449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4273452">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4273522">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4273593">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4273663">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4273734">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4273759">next</span><span class="op" id="4273763">,</span>&nbsp;<span class="ident" id="4273765">prev</span>&nbsp;<span class="op" id="4273770">*</span><span class="ident" id="4273771">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4273781">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4273825">list</span>&nbsp;<span class="op" id="4273830">*</span><span class="ident" id="4273831">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4273838">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4273878">Value</span>&nbsp;<span class="keyword" id="4273884">interface</span><span class="op" id="4273893">{</span><span class="op" id="4273894">}</span><br>
<span class="lineno"></span><span class="op" id="4273896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4273899">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4273945">func</span>&nbsp;<span class="op" id="4273950">(</span><span class="ident" id="4273951">e</span>&nbsp;<span class="op" id="4273953">*</span><span class="ident" id="4273954">Element</span><span class="op" id="4273961">)</span>&nbsp;<span class="ident" id="4273963">Next</span><span class="op" id="4273967">(</span><span class="op" id="4273968">)</span>&nbsp;<span class="op" id="4273970">*</span><span class="ident" id="4273971">Element</span>&nbsp;<span class="op" id="4273979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4273982">if</span>&nbsp;<span class="ident" id="4273985">p</span>&nbsp;<span class="op" id="4273987">:=</span>&nbsp;<span class="ident" id="4273990">e</span><span class="op" id="4273991">.</span><span class="ident" id="4273992">next</span><span class="op" id="4273996">;</span>&nbsp;<span class="ident" id="4273998">e</span><span class="op" id="4273999">.</span><span class="ident" id="4274000">list</span>&nbsp;<span class="op" id="4274005">!=</span>&nbsp;<span class="ident" id="4274008">nil</span>&nbsp;<span class="op" id="4274012">&amp;&amp;</span>&nbsp;<span class="ident" id="4274015">p</span>&nbsp;<span class="op" id="4274017">!=</span>&nbsp;<span class="op" id="4274020">&amp;</span><span class="ident" id="4274021">e</span><span class="op" id="4274022">.</span><span class="ident" id="4274023">list</span><span class="op" id="4274027">.</span><span class="ident" id="4274028">root</span>&nbsp;<span class="op" id="4274033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274037">return</span>&nbsp;<span class="ident" id="4274044">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4274047">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274050">return</span>&nbsp;<span class="ident" id="4274057">nil</span><br>
<span class="lineno"></span><span class="op" id="4274061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4274064">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4274114">func</span>&nbsp;<span class="op" id="4274119">(</span><span class="ident" id="4274120">e</span>&nbsp;<span class="op" id="4274122">*</span><span class="ident" id="4274123">Element</span><span class="op" id="4274130">)</span>&nbsp;<span class="ident" id="4274132">Prev</span><span class="op" id="4274136">(</span><span class="op" id="4274137">)</span>&nbsp;<span class="op" id="4274139">*</span><span class="ident" id="4274140">Element</span>&nbsp;<span class="op" id="4274148">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274151">if</span>&nbsp;<span class="ident" id="4274154">p</span>&nbsp;<span class="op" id="4274156">:=</span>&nbsp;<span class="ident" id="4274159">e</span><span class="op" id="4274160">.</span><span class="ident" id="4274161">prev</span><span class="op" id="4274165">;</span>&nbsp;<span class="ident" id="4274167">e</span><span class="op" id="4274168">.</span><span class="ident" id="4274169">list</span>&nbsp;<span class="op" id="4274174">!=</span>&nbsp;<span class="ident" id="4274177">nil</span>&nbsp;<span class="op" id="4274181">&amp;&amp;</span>&nbsp;<span class="ident" id="4274184">p</span>&nbsp;<span class="op" id="4274186">!=</span>&nbsp;<span class="op" id="4274189">&amp;</span><span class="ident" id="4274190">e</span><span class="op" id="4274191">.</span><span class="ident" id="4274192">list</span><span class="op" id="4274196">.</span><span class="ident" id="4274197">root</span>&nbsp;<span class="op" id="4274202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274206">return</span>&nbsp;<span class="ident" id="4274213">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4274216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274219">return</span>&nbsp;<span class="ident" id="4274226">nil</span><br>
<span class="lineno"></span><span class="op" id="4274230">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4274233">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4274274">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4274332">type</span>&nbsp;<span class="ident" id="4274337">List</span>&nbsp;<span class="keyword" id="4274342">struct</span>&nbsp;<span class="op" id="4274349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4274352">root</span>&nbsp;<span class="ident" id="4274357">Element</span>&nbsp;<span class="comment" id="4274365">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4274438">len</span>&nbsp;&nbsp;<span class="builtintype" id="4274443">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4274451">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4274508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4274511">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4274549">func</span>&nbsp;<span class="op" id="4274554">(</span><span class="ident" id="4274555">l</span>&nbsp;<span class="op" id="4274557">*</span><span class="ident" id="4274558">List</span><span class="op" id="4274562">)</span>&nbsp;<span class="ident" id="4274564">Init</span><span class="op" id="4274568">(</span><span class="op" id="4274569">)</span>&nbsp;<span class="op" id="4274571">*</span><span class="ident" id="4274572">List</span>&nbsp;<span class="op" id="4274577">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4274580">l</span><span class="op" id="4274581">.</span><span class="ident" id="4274582">root</span><span class="op" id="4274586">.</span><span class="ident" id="4274587">next</span>&nbsp;<span class="op" id="4274592">=</span>&nbsp;<span class="op" id="4274594">&amp;</span><span class="ident" id="4274595">l</span><span class="op" id="4274596">.</span><span class="ident" id="4274597">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4274603">l</span><span class="op" id="4274604">.</span><span class="ident" id="4274605">root</span><span class="op" id="4274609">.</span><span class="ident" id="4274610">prev</span>&nbsp;<span class="op" id="4274615">=</span>&nbsp;<span class="op" id="4274617">&amp;</span><span class="ident" id="4274618">l</span><span class="op" id="4274619">.</span><span class="ident" id="4274620">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4274626">l</span><span class="op" id="4274627">.</span><span class="builtinfunc" id="4274628">len</span>&nbsp;<span class="op" id="4274632">=</span>&nbsp;<span class="num" id="4274634">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274637">return</span>&nbsp;<span class="ident" id="4274644">l</span><br>
<span class="lineno"></span><span class="op" id="4274646">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4274649">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4274685">func</span>&nbsp;<span class="ident" id="4274690">New</span><span class="op" id="4274693">(</span><span class="op" id="4274694">)</span>&nbsp;<span class="op" id="4274696">*</span><span class="ident" id="4274697">List</span>&nbsp;<span class="op" id="4274702">{</span>&nbsp;<span class="keyword" id="4274704">return</span>&nbsp;<span class="builtinfunc" id="4274711">new</span><span class="op" id="4274714">(</span><span class="ident" id="4274715">List</span><span class="op" id="4274719">)</span><span class="op" id="4274720">.</span><span class="ident" id="4274721">Init</span><span class="op" id="4274725">(</span><span class="op" id="4274726">)</span>&nbsp;<span class="op" id="4274728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4274731">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4274780">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4274807">func</span>&nbsp;<span class="op" id="4274812">(</span><span class="ident" id="4274813">l</span>&nbsp;<span class="op" id="4274815">*</span><span class="ident" id="4274816">List</span><span class="op" id="4274820">)</span>&nbsp;<span class="ident" id="4274822">Len</span><span class="op" id="4274825">(</span><span class="op" id="4274826">)</span>&nbsp;<span class="builtintype" id="4274828">int</span>&nbsp;<span class="op" id="4274832">{</span>&nbsp;<span class="keyword" id="4274834">return</span>&nbsp;<span class="ident" id="4274841">l</span><span class="op" id="4274842">.</span><span class="builtinfunc" id="4274843">len</span>&nbsp;<span class="op" id="4274847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4274850">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4274903">func</span>&nbsp;<span class="op" id="4274908">(</span><span class="ident" id="4274909">l</span>&nbsp;<span class="op" id="4274911">*</span><span class="ident" id="4274912">List</span><span class="op" id="4274916">)</span>&nbsp;<span class="ident" id="4274918">Front</span><span class="op" id="4274923">(</span><span class="op" id="4274924">)</span>&nbsp;<span class="op" id="4274926">*</span><span class="ident" id="4274927">Element</span>&nbsp;<span class="op" id="4274935">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274938">if</span>&nbsp;<span class="ident" id="4274941">l</span><span class="op" id="4274942">.</span><span class="builtinfunc" id="4274943">len</span>&nbsp;<span class="op" id="4274947">==</span>&nbsp;<span class="num" id="4274950">0</span>&nbsp;<span class="op" id="4274952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274956">return</span>&nbsp;<span class="ident" id="4274963">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4274968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4274971">return</span>&nbsp;<span class="ident" id="4274978">l</span><span class="op" id="4274979">.</span><span class="ident" id="4274980">root</span><span class="op" id="4274984">.</span><span class="ident" id="4274985">next</span><br>
<span class="lineno"></span><span class="op" id="4274990">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4274993">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4275044">func</span>&nbsp;<span class="op" id="4275049">(</span><span class="ident" id="4275050">l</span>&nbsp;<span class="op" id="4275052">*</span><span class="ident" id="4275053">List</span><span class="op" id="4275057">)</span>&nbsp;<span class="ident" id="4275059">Back</span><span class="op" id="4275063">(</span><span class="op" id="4275064">)</span>&nbsp;<span class="op" id="4275066">*</span><span class="ident" id="4275067">Element</span>&nbsp;<span class="op" id="4275075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4275078">if</span>&nbsp;<span class="ident" id="4275081">l</span><span class="op" id="4275082">.</span><span class="builtinfunc" id="4275083">len</span>&nbsp;<span class="op" id="4275087">==</span>&nbsp;<span class="num" id="4275090">0</span>&nbsp;<span class="op" id="4275092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4275096">return</span>&nbsp;<span class="ident" id="4275103">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4275108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4275111">return</span>&nbsp;<span class="ident" id="4275118">l</span><span class="op" id="4275119">.</span><span class="ident" id="4275120">root</span><span class="op" id="4275124">.</span><span class="ident" id="4275125">prev</span><br>
<span class="lineno"></span><span class="op" id="4275130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4275133">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4275183">func</span>&nbsp;<span class="op" id="4275188">(</span><span class="ident" id="4275189">l</span>&nbsp;<span class="op" id="4275191">*</span><span class="ident" id="4275192">List</span><span class="op" id="4275196">)</span>&nbsp;<span class="ident" id="4275198">lazyInit</span><span class="op" id="4275206">(</span><span class="op" id="4275207">)</span>&nbsp;<span class="op" id="4275209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4275212">if</span>&nbsp;<span class="ident" id="4275215">l</span><span class="op" id="4275216">.</span><span class="ident" id="4275217">root</span><span class="op" id="4275221">.</span><span class="ident" id="4275222">next</span>&nbsp;<span class="op" id="4275227">==</span>&nbsp;<span class="ident" id="4275230">nil</span>&nbsp;<span class="op" id="4275234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275238">l</span><span class="op" id="4275239">.</span><span class="ident" id="4275240">Init</span><span class="op" id="4275244">(</span><span class="op" id="4275245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4275248">}</span><br>
<span class="lineno"></span><span class="op" id="4275250">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4275253">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4275316">func</span>&nbsp;<span class="op" id="4275321">(</span><span class="ident" id="4275322">l</span>&nbsp;<span class="op" id="4275324">*</span><span class="ident" id="4275325">List</span><span class="op" id="4275329">)</span>&nbsp;<span class="ident" id="4275331">insert</span><span class="op" id="4275337">(</span><span class="ident" id="4275338">e</span><span class="op" id="4275339">,</span>&nbsp;<span class="ident" id="4275341">at</span>&nbsp;<span class="op" id="4275344">*</span><span class="ident" id="4275345">Element</span><span class="op" id="4275352">)</span>&nbsp;<span class="op" id="4275354">*</span><span class="ident" id="4275355">Element</span>&nbsp;<span class="op" id="4275363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275366">n</span>&nbsp;<span class="op" id="4275368">:=</span>&nbsp;<span class="ident" id="4275371">at</span><span class="op" id="4275373">.</span><span class="ident" id="4275374">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275380">at</span><span class="op" id="4275382">.</span><span class="ident" id="4275383">next</span>&nbsp;<span class="op" id="4275388">=</span>&nbsp;<span class="ident" id="4275390">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275393">e</span><span class="op" id="4275394">.</span><span class="ident" id="4275395">prev</span>&nbsp;<span class="op" id="4275400">=</span>&nbsp;<span class="ident" id="4275402">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275406">e</span><span class="op" id="4275407">.</span><span class="ident" id="4275408">next</span>&nbsp;<span class="op" id="4275413">=</span>&nbsp;<span class="ident" id="4275415">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275418">n</span><span class="op" id="4275419">.</span><span class="ident" id="4275420">prev</span>&nbsp;<span class="op" id="4275425">=</span>&nbsp;<span class="ident" id="4275427">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275430">e</span><span class="op" id="4275431">.</span><span class="ident" id="4275432">list</span>&nbsp;<span class="op" id="4275437">=</span>&nbsp;<span class="ident" id="4275439">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275442">l</span><span class="op" id="4275443">.</span><span class="builtinfunc" id="4275444">len</span><span class="op" id="4275447">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4275451">return</span>&nbsp;<span class="ident" id="4275458">e</span><br>
<span class="lineno"></span><span class="op" id="4275460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4275463">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4275539">func</span>&nbsp;<span class="op" id="4275544">(</span><span class="ident" id="4275545">l</span>&nbsp;<span class="op" id="4275547">*</span><span class="ident" id="4275548">List</span><span class="op" id="4275552">)</span>&nbsp;<span class="ident" id="4275554">insertValue</span><span class="op" id="4275565">(</span><span class="ident" id="4275566">v</span>&nbsp;<span class="keyword" id="4275568">interface</span><span class="op" id="4275577">{</span><span class="op" id="4275578">}</span><span class="op" id="4275579">,</span>&nbsp;<span class="ident" id="4275581">at</span>&nbsp;<span class="op" id="4275584">*</span><span class="ident" id="4275585">Element</span><span class="op" id="4275592">)</span>&nbsp;<span class="op" id="4275594">*</span><span class="ident" id="4275595">Element</span>&nbsp;<span class="op" id="4275603">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4275606">return</span>&nbsp;<span class="ident" id="4275613">l</span><span class="op" id="4275614">.</span><span class="ident" id="4275615">insert</span><span class="op" id="4275621">(</span><span class="op" id="4275622">&amp;</span><span class="ident" id="4275623">Element</span><span class="op" id="4275630">{</span><span class="ident" id="4275631">Value</span><span class="op" id="4275636">:</span>&nbsp;<span class="ident" id="4275638">v</span><span class="op" id="4275639">}</span><span class="op" id="4275640">,</span>&nbsp;<span class="ident" id="4275642">at</span><span class="op" id="4275644">)</span><br>
<span class="lineno"></span><span class="op" id="4275646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4275649">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4275717">func</span>&nbsp;<span class="op" id="4275722">(</span><span class="ident" id="4275723">l</span>&nbsp;<span class="op" id="4275725">*</span><span class="ident" id="4275726">List</span><span class="op" id="4275730">)</span>&nbsp;<span class="ident" id="4275732">remove</span><span class="op" id="4275738">(</span><span class="ident" id="4275739">e</span>&nbsp;<span class="op" id="4275741">*</span><span class="ident" id="4275742">Element</span><span class="op" id="4275749">)</span>&nbsp;<span class="op" id="4275751">*</span><span class="ident" id="4275752">Element</span>&nbsp;<span class="op" id="4275760">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275763">e</span><span class="op" id="4275764">.</span><span class="ident" id="4275765">prev</span><span class="op" id="4275769">.</span><span class="ident" id="4275770">next</span>&nbsp;<span class="op" id="4275775">=</span>&nbsp;<span class="ident" id="4275777">e</span><span class="op" id="4275778">.</span><span class="ident" id="4275779">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275785">e</span><span class="op" id="4275786">.</span><span class="ident" id="4275787">next</span><span class="op" id="4275791">.</span><span class="ident" id="4275792">prev</span>&nbsp;<span class="op" id="4275797">=</span>&nbsp;<span class="ident" id="4275799">e</span><span class="op" id="4275800">.</span><span class="ident" id="4275801">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275807">e</span><span class="op" id="4275808">.</span><span class="ident" id="4275809">next</span>&nbsp;<span class="op" id="4275814">=</span>&nbsp;<span class="ident" id="4275816">nil</span>&nbsp;<span class="comment" id="4275820">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275843">e</span><span class="op" id="4275844">.</span><span class="ident" id="4275845">prev</span>&nbsp;<span class="op" id="4275850">=</span>&nbsp;<span class="ident" id="4275852">nil</span>&nbsp;<span class="comment" id="4275856">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275879">e</span><span class="op" id="4275880">.</span><span class="ident" id="4275881">list</span>&nbsp;<span class="op" id="4275886">=</span>&nbsp;<span class="ident" id="4275888">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4275893">l</span><span class="op" id="4275894">.</span><span class="builtinfunc" id="4275895">len</span><span class="op" id="4275898">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4275902">return</span>&nbsp;<span class="ident" id="4275909">e</span><br>
<span class="lineno"></span><span class="op" id="4275911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4275914">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4275971">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4276012">func</span>&nbsp;<span class="op" id="4276017">(</span><span class="ident" id="4276018">l</span>&nbsp;<span class="op" id="4276020">*</span><span class="ident" id="4276021">List</span><span class="op" id="4276025">)</span>&nbsp;<span class="ident" id="4276027">Remove</span><span class="op" id="4276033">(</span><span class="ident" id="4276034">e</span>&nbsp;<span class="op" id="4276036">*</span><span class="ident" id="4276037">Element</span><span class="op" id="4276044">)</span>&nbsp;<span class="keyword" id="4276046">interface</span><span class="op" id="4276055">{</span><span class="op" id="4276056">}</span>&nbsp;<span class="op" id="4276058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4276061">if</span>&nbsp;<span class="ident" id="4276064">e</span><span class="op" id="4276065">.</span><span class="ident" id="4276066">list</span>&nbsp;<span class="op" id="4276071">==</span>&nbsp;<span class="ident" id="4276074">l</span>&nbsp;<span class="op" id="4276076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4276080">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4276150">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4276218">l</span><span class="op" id="4276219">.</span><span class="ident" id="4276220">remove</span><span class="op" id="4276226">(</span><span class="ident" id="4276227">e</span><span class="op" id="4276228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4276231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4276234">return</span>&nbsp;<span class="ident" id="4276241">e</span><span class="op" id="4276242">.</span><span class="ident" id="4276243">Value</span><br>
<span class="lineno"></span><span class="op" id="4276249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4276252">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4276340">func</span>&nbsp;<span class="op" id="4276345">(</span><span class="ident" id="4276346">l</span>&nbsp;<span class="op" id="4276348">*</span><span class="ident" id="4276349">List</span><span class="op" id="4276353">)</span>&nbsp;<span class="ident" id="4276355">PushFront</span><span class="op" id="4276364">(</span><span class="ident" id="4276365">v</span>&nbsp;<span class="keyword" id="4276367">interface</span><span class="op" id="4276376">{</span><span class="op" id="4276377">}</span><span class="op" id="4276378">)</span>&nbsp;<span class="op" id="4276380">*</span><span class="ident" id="4276381">Element</span>&nbsp;<span class="op" id="4276389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4276392">l</span><span class="op" id="4276393">.</span><span class="ident" id="4276394">lazyInit</span><span class="op" id="4276402">(</span><span class="op" id="4276403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4276406">return</span>&nbsp;<span class="ident" id="4276413">l</span><span class="op" id="4276414">.</span><span class="ident" id="4276415">insertValue</span><span class="op" id="4276426">(</span><span class="ident" id="4276427">v</span><span class="op" id="4276428">,</span>&nbsp;<span class="op" id="4276430">&amp;</span><span class="ident" id="4276431">l</span><span class="op" id="4276432">.</span><span class="ident" id="4276433">root</span><span class="op" id="4276437">)</span><br>
<span class="lineno"></span><span class="op" id="4276439">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4276442">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4276528">func</span>&nbsp;<span class="op" id="4276533">(</span><span class="ident" id="4276534">l</span>&nbsp;<span class="op" id="4276536">*</span><span class="ident" id="4276537">List</span><span class="op" id="4276541">)</span>&nbsp;<span class="ident" id="4276543">PushBack</span><span class="op" id="4276551">(</span><span class="ident" id="4276552">v</span>&nbsp;<span class="keyword" id="4276554">interface</span><span class="op" id="4276563">{</span><span class="op" id="4276564">}</span><span class="op" id="4276565">)</span>&nbsp;<span class="op" id="4276567">*</span><span class="ident" id="4276568">Element</span>&nbsp;<span class="op" id="4276576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4276579">l</span><span class="op" id="4276580">.</span><span class="ident" id="4276581">lazyInit</span><span class="op" id="4276589">(</span><span class="op" id="4276590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4276593">return</span>&nbsp;<span class="ident" id="4276600">l</span><span class="op" id="4276601">.</span><span class="ident" id="4276602">insertValue</span><span class="op" id="4276613">(</span><span class="ident" id="4276614">v</span><span class="op" id="4276615">,</span>&nbsp;<span class="ident" id="4276617">l</span><span class="op" id="4276618">.</span><span class="ident" id="4276619">root</span><span class="op" id="4276623">.</span><span class="ident" id="4276624">prev</span><span class="op" id="4276628">)</span><br>
<span class="lineno">140</span><span class="op" id="4276630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4276633">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4276725">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4276786">func</span>&nbsp;<span class="op" id="4276791">(</span><span class="ident" id="4276792">l</span>&nbsp;<span class="op" id="4276794">*</span><span class="ident" id="4276795">List</span><span class="op" id="4276799">)</span>&nbsp;<span class="ident" id="4276801">InsertBefore</span><span class="op" id="4276813">(</span><span class="ident" id="4276814">v</span>&nbsp;<span class="keyword" id="4276816">interface</span><span class="op" id="4276825">{</span><span class="op" id="4276826">}</span><span class="op" id="4276827">,</span>&nbsp;<span class="ident" id="4276829">mark</span>&nbsp;<span class="op" id="4276834">*</span><span class="ident" id="4276835">Element</span><span class="op" id="4276842">)</span>&nbsp;<span class="op" id="4276844">*</span><span class="ident" id="4276845">Element</span>&nbsp;<span class="op" id="4276853">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4276856">if</span>&nbsp;<span class="ident" id="4276859">mark</span><span class="op" id="4276863">.</span><span class="ident" id="4276864">list</span>&nbsp;<span class="op" id="4276869">!=</span>&nbsp;<span class="ident" id="4276872">l</span>&nbsp;<span class="op" id="4276874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4276878">return</span>&nbsp;<span class="ident" id="4276885">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4276890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4276893">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4276950">return</span>&nbsp;<span class="ident" id="4276957">l</span><span class="op" id="4276958">.</span><span class="ident" id="4276959">insertValue</span><span class="op" id="4276970">(</span><span class="ident" id="4276971">v</span><span class="op" id="4276972">,</span>&nbsp;<span class="ident" id="4276974">mark</span><span class="op" id="4276978">.</span><span class="ident" id="4276979">prev</span><span class="op" id="4276983">)</span><br>
<span class="lineno">150</span><span class="op" id="4276985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4276988">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4277078">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4277139">func</span>&nbsp;<span class="op" id="4277144">(</span><span class="ident" id="4277145">l</span>&nbsp;<span class="op" id="4277147">*</span><span class="ident" id="4277148">List</span><span class="op" id="4277152">)</span>&nbsp;<span class="ident" id="4277154">InsertAfter</span><span class="op" id="4277165">(</span><span class="ident" id="4277166">v</span>&nbsp;<span class="keyword" id="4277168">interface</span><span class="op" id="4277177">{</span><span class="op" id="4277178">}</span><span class="op" id="4277179">,</span>&nbsp;<span class="ident" id="4277181">mark</span>&nbsp;<span class="op" id="4277186">*</span><span class="ident" id="4277187">Element</span><span class="op" id="4277194">)</span>&nbsp;<span class="op" id="4277196">*</span><span class="ident" id="4277197">Element</span>&nbsp;<span class="op" id="4277205">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4277208">if</span>&nbsp;<span class="ident" id="4277211">mark</span><span class="op" id="4277215">.</span><span class="ident" id="4277216">list</span>&nbsp;<span class="op" id="4277221">!=</span>&nbsp;<span class="ident" id="4277224">l</span>&nbsp;<span class="op" id="4277226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4277230">return</span>&nbsp;<span class="ident" id="4277237">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4277242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4277245">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4277302">return</span>&nbsp;<span class="ident" id="4277309">l</span><span class="op" id="4277310">.</span><span class="ident" id="4277311">insertValue</span><span class="op" id="4277322">(</span><span class="ident" id="4277323">v</span><span class="op" id="4277324">,</span>&nbsp;<span class="ident" id="4277326">mark</span><span class="op" id="4277330">)</span><br>
<span class="lineno">160</span><span class="op" id="4277332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4277335">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4277390">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4277448">func</span>&nbsp;<span class="op" id="4277453">(</span><span class="ident" id="4277454">l</span>&nbsp;<span class="op" id="4277456">*</span><span class="ident" id="4277457">List</span><span class="op" id="4277461">)</span>&nbsp;<span class="ident" id="4277463">MoveToFront</span><span class="op" id="4277474">(</span><span class="ident" id="4277475">e</span>&nbsp;<span class="op" id="4277477">*</span><span class="ident" id="4277478">Element</span><span class="op" id="4277485">)</span>&nbsp;<span class="op" id="4277487">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4277490">if</span>&nbsp;<span class="ident" id="4277493">e</span><span class="op" id="4277494">.</span><span class="ident" id="4277495">list</span>&nbsp;<span class="op" id="4277500">!=</span>&nbsp;<span class="ident" id="4277503">l</span>&nbsp;<span class="op" id="4277505">||</span>&nbsp;<span class="ident" id="4277508">l</span><span class="op" id="4277509">.</span><span class="ident" id="4277510">root</span><span class="op" id="4277514">.</span><span class="ident" id="4277515">next</span>&nbsp;<span class="op" id="4277520">==</span>&nbsp;<span class="ident" id="4277523">e</span>&nbsp;<span class="op" id="4277525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4277529">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4277537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4277540">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4277597">l</span><span class="op" id="4277598">.</span><span class="ident" id="4277599">insert</span><span class="op" id="4277605">(</span><span class="ident" id="4277606">l</span><span class="op" id="4277607">.</span><span class="ident" id="4277608">remove</span><span class="op" id="4277614">(</span><span class="ident" id="4277615">e</span><span class="op" id="4277616">)</span><span class="op" id="4277617">,</span>&nbsp;<span class="op" id="4277619">&amp;</span><span class="ident" id="4277620">l</span><span class="op" id="4277621">.</span><span class="ident" id="4277622">root</span><span class="op" id="4277626">)</span><br>
<span class="lineno">170</span><span class="op" id="4277628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4277631">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4277684">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4277742">func</span>&nbsp;<span class="op" id="4277747">(</span><span class="ident" id="4277748">l</span>&nbsp;<span class="op" id="4277750">*</span><span class="ident" id="4277751">List</span><span class="op" id="4277755">)</span>&nbsp;<span class="ident" id="4277757">MoveToBack</span><span class="op" id="4277767">(</span><span class="ident" id="4277768">e</span>&nbsp;<span class="op" id="4277770">*</span><span class="ident" id="4277771">Element</span><span class="op" id="4277778">)</span>&nbsp;<span class="op" id="4277780">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4277783">if</span>&nbsp;<span class="ident" id="4277786">e</span><span class="op" id="4277787">.</span><span class="ident" id="4277788">list</span>&nbsp;<span class="op" id="4277793">!=</span>&nbsp;<span class="ident" id="4277796">l</span>&nbsp;<span class="op" id="4277798">||</span>&nbsp;<span class="ident" id="4277801">l</span><span class="op" id="4277802">.</span><span class="ident" id="4277803">root</span><span class="op" id="4277807">.</span><span class="ident" id="4277808">prev</span>&nbsp;<span class="op" id="4277813">==</span>&nbsp;<span class="ident" id="4277816">e</span>&nbsp;<span class="op" id="4277818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4277822">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4277830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4277833">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4277890">l</span><span class="op" id="4277891">.</span><span class="ident" id="4277892">insert</span><span class="op" id="4277898">(</span><span class="ident" id="4277899">l</span><span class="op" id="4277900">.</span><span class="ident" id="4277901">remove</span><span class="op" id="4277907">(</span><span class="ident" id="4277908">e</span><span class="op" id="4277909">)</span><span class="op" id="4277910">,</span>&nbsp;<span class="ident" id="4277912">l</span><span class="op" id="4277913">.</span><span class="ident" id="4277914">root</span><span class="op" id="4277918">.</span><span class="ident" id="4277919">prev</span><span class="op" id="4277923">)</span><br>
<span class="lineno">180</span><span class="op" id="4277925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4277928">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4277991">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4278071">func</span>&nbsp;<span class="op" id="4278076">(</span><span class="ident" id="4278077">l</span>&nbsp;<span class="op" id="4278079">*</span><span class="ident" id="4278080">List</span><span class="op" id="4278084">)</span>&nbsp;<span class="ident" id="4278086">MoveBefore</span><span class="op" id="4278096">(</span><span class="ident" id="4278097">e</span><span class="op" id="4278098">,</span>&nbsp;<span class="ident" id="4278100">mark</span>&nbsp;<span class="op" id="4278105">*</span><span class="ident" id="4278106">Element</span><span class="op" id="4278113">)</span>&nbsp;<span class="op" id="4278115">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4278118">if</span>&nbsp;<span class="ident" id="4278121">e</span><span class="op" id="4278122">.</span><span class="ident" id="4278123">list</span>&nbsp;<span class="op" id="4278128">!=</span>&nbsp;<span class="ident" id="4278131">l</span>&nbsp;<span class="op" id="4278133">||</span>&nbsp;<span class="ident" id="4278136">e</span>&nbsp;<span class="op" id="4278138">==</span>&nbsp;<span class="ident" id="4278141">mark</span>&nbsp;<span class="op" id="4278146">||</span>&nbsp;<span class="ident" id="4278149">mark</span><span class="op" id="4278153">.</span><span class="ident" id="4278154">list</span>&nbsp;<span class="op" id="4278159">!=</span>&nbsp;<span class="ident" id="4278162">l</span>&nbsp;<span class="op" id="4278164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4278168">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4278176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4278179">l</span><span class="op" id="4278180">.</span><span class="ident" id="4278181">insert</span><span class="op" id="4278187">(</span><span class="ident" id="4278188">l</span><span class="op" id="4278189">.</span><span class="ident" id="4278190">remove</span><span class="op" id="4278196">(</span><span class="ident" id="4278197">e</span><span class="op" id="4278198">)</span><span class="op" id="4278199">,</span>&nbsp;<span class="ident" id="4278201">mark</span><span class="op" id="4278205">.</span><span class="ident" id="4278206">prev</span><span class="op" id="4278210">)</span><br>
<span class="lineno"></span><span class="op" id="4278212">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4278215">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4278276">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4278356">func</span>&nbsp;<span class="op" id="4278361">(</span><span class="ident" id="4278362">l</span>&nbsp;<span class="op" id="4278364">*</span><span class="ident" id="4278365">List</span><span class="op" id="4278369">)</span>&nbsp;<span class="ident" id="4278371">MoveAfter</span><span class="op" id="4278380">(</span><span class="ident" id="4278381">e</span><span class="op" id="4278382">,</span>&nbsp;<span class="ident" id="4278384">mark</span>&nbsp;<span class="op" id="4278389">*</span><span class="ident" id="4278390">Element</span><span class="op" id="4278397">)</span>&nbsp;<span class="op" id="4278399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4278402">if</span>&nbsp;<span class="ident" id="4278405">e</span><span class="op" id="4278406">.</span><span class="ident" id="4278407">list</span>&nbsp;<span class="op" id="4278412">!=</span>&nbsp;<span class="ident" id="4278415">l</span>&nbsp;<span class="op" id="4278417">||</span>&nbsp;<span class="ident" id="4278420">e</span>&nbsp;<span class="op" id="4278422">==</span>&nbsp;<span class="ident" id="4278425">mark</span>&nbsp;<span class="op" id="4278430">||</span>&nbsp;<span class="ident" id="4278433">mark</span><span class="op" id="4278437">.</span><span class="ident" id="4278438">list</span>&nbsp;<span class="op" id="4278443">!=</span>&nbsp;<span class="ident" id="4278446">l</span>&nbsp;<span class="op" id="4278448">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4278452">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4278460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4278463">l</span><span class="op" id="4278464">.</span><span class="ident" id="4278465">insert</span><span class="op" id="4278471">(</span><span class="ident" id="4278472">l</span><span class="op" id="4278473">.</span><span class="ident" id="4278474">remove</span><span class="op" id="4278480">(</span><span class="ident" id="4278481">e</span><span class="op" id="4278482">)</span><span class="op" id="4278483">,</span>&nbsp;<span class="ident" id="4278485">mark</span><span class="op" id="4278489">)</span><br>
<span class="lineno"></span><span class="op" id="4278491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4278494">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4278565">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4278607">func</span>&nbsp;<span class="op" id="4278612">(</span><span class="ident" id="4278613">l</span>&nbsp;<span class="op" id="4278615">*</span><span class="ident" id="4278616">List</span><span class="op" id="4278620">)</span>&nbsp;<span class="ident" id="4278622">PushBackList</span><span class="op" id="4278634">(</span><span class="ident" id="4278635">other</span>&nbsp;<span class="op" id="4278641">*</span><span class="ident" id="4278642">List</span><span class="op" id="4278646">)</span>&nbsp;<span class="op" id="4278648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4278651">l</span><span class="op" id="4278652">.</span><span class="ident" id="4278653">lazyInit</span><span class="op" id="4278661">(</span><span class="op" id="4278662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4278665">for</span>&nbsp;<span class="ident" id="4278669">i</span><span class="op" id="4278670">,</span>&nbsp;<span class="ident" id="4278672">e</span>&nbsp;<span class="op" id="4278674">:=</span>&nbsp;<span class="ident" id="4278677">other</span><span class="op" id="4278682">.</span><span class="ident" id="4278683">Len</span><span class="op" id="4278686">(</span><span class="op" id="4278687">)</span><span class="op" id="4278688">,</span>&nbsp;<span class="ident" id="4278690">other</span><span class="op" id="4278695">.</span><span class="ident" id="4278696">Front</span><span class="op" id="4278701">(</span><span class="op" id="4278702">)</span><span class="op" id="4278703">;</span>&nbsp;<span class="ident" id="4278705">i</span>&nbsp;<span class="op" id="4278707">&gt;</span>&nbsp;<span class="num" id="4278709">0</span><span class="op" id="4278710">;</span>&nbsp;<span class="ident" id="4278712">i</span><span class="op" id="4278713">,</span>&nbsp;<span class="ident" id="4278715">e</span>&nbsp;<span class="op" id="4278717">=</span>&nbsp;<span class="ident" id="4278719">i</span><span class="op" id="4278720">-</span><span class="num" id="4278721">1</span><span class="op" id="4278722">,</span>&nbsp;<span class="ident" id="4278724">e</span><span class="op" id="4278725">.</span><span class="ident" id="4278726">Next</span><span class="op" id="4278730">(</span><span class="op" id="4278731">)</span>&nbsp;<span class="op" id="4278733">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4278737">l</span><span class="op" id="4278738">.</span><span class="ident" id="4278739">insertValue</span><span class="op" id="4278750">(</span><span class="ident" id="4278751">e</span><span class="op" id="4278752">.</span><span class="ident" id="4278753">Value</span><span class="op" id="4278758">,</span>&nbsp;<span class="ident" id="4278760">l</span><span class="op" id="4278761">.</span><span class="ident" id="4278762">root</span><span class="op" id="4278766">.</span><span class="ident" id="4278767">prev</span><span class="op" id="4278771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4278774">}</span><br>
<span class="lineno"></span><span class="op" id="4278776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4278779">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4278852">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4278894">func</span>&nbsp;<span class="op" id="4278899">(</span><span class="ident" id="4278900">l</span>&nbsp;<span class="op" id="4278902">*</span><span class="ident" id="4278903">List</span><span class="op" id="4278907">)</span>&nbsp;<span class="ident" id="4278909">PushFrontList</span><span class="op" id="4278922">(</span><span class="ident" id="4278923">other</span>&nbsp;<span class="op" id="4278929">*</span><span class="ident" id="4278930">List</span><span class="op" id="4278934">)</span>&nbsp;<span class="op" id="4278936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4278939">l</span><span class="op" id="4278940">.</span><span class="ident" id="4278941">lazyInit</span><span class="op" id="4278949">(</span><span class="op" id="4278950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4278953">for</span>&nbsp;<span class="ident" id="4278957">i</span><span class="op" id="4278958">,</span>&nbsp;<span class="ident" id="4278960">e</span>&nbsp;<span class="op" id="4278962">:=</span>&nbsp;<span class="ident" id="4278965">other</span><span class="op" id="4278970">.</span><span class="ident" id="4278971">Len</span><span class="op" id="4278974">(</span><span class="op" id="4278975">)</span><span class="op" id="4278976">,</span>&nbsp;<span class="ident" id="4278978">other</span><span class="op" id="4278983">.</span><span class="ident" id="4278984">Back</span><span class="op" id="4278988">(</span><span class="op" id="4278989">)</span><span class="op" id="4278990">;</span>&nbsp;<span class="ident" id="4278992">i</span>&nbsp;<span class="op" id="4278994">&gt;</span>&nbsp;<span class="num" id="4278996">0</span><span class="op" id="4278997">;</span>&nbsp;<span class="ident" id="4278999">i</span><span class="op" id="4279000">,</span>&nbsp;<span class="ident" id="4279002">e</span>&nbsp;<span class="op" id="4279004">=</span>&nbsp;<span class="ident" id="4279006">i</span><span class="op" id="4279007">-</span><span class="num" id="4279008">1</span><span class="op" id="4279009">,</span>&nbsp;<span class="ident" id="4279011">e</span><span class="op" id="4279012">.</span><span class="ident" id="4279013">Prev</span><span class="op" id="4279017">(</span><span class="op" id="4279018">)</span>&nbsp;<span class="op" id="4279020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4279024">l</span><span class="op" id="4279025">.</span><span class="ident" id="4279026">insertValue</span><span class="op" id="4279037">(</span><span class="ident" id="4279038">e</span><span class="op" id="4279039">.</span><span class="ident" id="4279040">Value</span><span class="op" id="4279045">,</span>&nbsp;<span class="op" id="4279047">&amp;</span><span class="ident" id="4279048">l</span><span class="op" id="4279049">.</span><span class="ident" id="4279050">root</span><span class="op" id="4279054">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4279057">}</span><br>
<span class="lineno"></span><span class="op" id="4279059">}</span>
</div>
</body>
</html>
