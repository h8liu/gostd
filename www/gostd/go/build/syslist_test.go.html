<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6960122">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6960178">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6960232">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6960283">package</span>&nbsp;<span class="ident" id="6960291">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6960298">import</span>&nbsp;<span class="op" id="6960305">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6960308">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6960319">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6960329">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6960332">var</span>&nbsp;<span class="op" id="6960336">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960339">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6960349">=</span>&nbsp;<span class="ident" id="6960351">runtime</span><span class="op" id="6960358">.</span><span class="ident" id="6960359">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960365">thisArch</span>&nbsp;&nbsp;<span class="op" id="6960375">=</span>&nbsp;<span class="ident" id="6960377">runtime</span><span class="op" id="6960384">.</span><span class="ident" id="6960385">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960393">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6960403">=</span>&nbsp;<span class="ident" id="6960405">anotherOS</span><span class="op" id="6960414">(</span><span class="op" id="6960415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960418">otherArch</span>&nbsp;<span class="op" id="6960428">=</span>&nbsp;<span class="ident" id="6960430">anotherArch</span><span class="op" id="6960441">(</span><span class="op" id="6960442">)</span><br>
<span class="lineno"></span><span class="op" id="6960444">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6960447">func</span>&nbsp;<span class="ident" id="6960452">anotherOS</span><span class="op" id="6960461">(</span><span class="op" id="6960462">)</span>&nbsp;<span class="builtintype" id="6960464">string</span>&nbsp;<span class="op" id="6960471">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6960474">if</span>&nbsp;<span class="ident" id="6960477">thisOS</span>&nbsp;<span class="op" id="6960484">!=</span>&nbsp;<span class="string" id="6960487">&#34;darwin&#34;</span>&nbsp;<span class="op" id="6960496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6960500">return</span>&nbsp;<span class="string" id="6960507">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6960520">return</span>&nbsp;<span class="string" id="6960527">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="6960535">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6960538">func</span>&nbsp;<span class="ident" id="6960543">anotherArch</span><span class="op" id="6960554">(</span><span class="op" id="6960555">)</span>&nbsp;<span class="builtintype" id="6960557">string</span>&nbsp;<span class="op" id="6960564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6960567">if</span>&nbsp;<span class="ident" id="6960570">thisArch</span>&nbsp;<span class="op" id="6960579">!=</span>&nbsp;<span class="string" id="6960582">&#34;amd64&#34;</span>&nbsp;<span class="op" id="6960590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6960594">return</span>&nbsp;<span class="string" id="6960601">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960610">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6960613">return</span>&nbsp;<span class="string" id="6960620">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="6960626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6960629">type</span>&nbsp;<span class="ident" id="6960634">GoodFileTest</span>&nbsp;<span class="keyword" id="6960647">struct</span>&nbsp;<span class="op" id="6960654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960657">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6960664">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960672">result</span>&nbsp;<span class="builtintype" id="6960679">bool</span><br>
<span class="lineno"></span><span class="op" id="6960684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6960687">var</span>&nbsp;<span class="ident" id="6960691">tests</span>&nbsp;<span class="op" id="6960697">=</span>&nbsp;<span class="op" id="6960699">[</span><span class="op" id="6960700">]</span><span class="ident" id="6960701">GoodFileTest</span><span class="op" id="6960713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960716">{</span><span class="string" id="6960717">&#34;file.go&#34;</span><span class="op" id="6960726">,</span>&nbsp;<span class="builtintype" id="6960728">true</span><span class="op" id="6960732">}</span><span class="op" id="6960733">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960736">{</span><span class="string" id="6960737">&#34;file.c&#34;</span><span class="op" id="6960745">,</span>&nbsp;<span class="builtintype" id="6960747">true</span><span class="op" id="6960751">}</span><span class="op" id="6960752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960755">{</span><span class="string" id="6960756">&#34;file_foo.go&#34;</span><span class="op" id="6960769">,</span>&nbsp;<span class="builtintype" id="6960771">true</span><span class="op" id="6960775">}</span><span class="op" id="6960776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960779">{</span><span class="string" id="6960780">&#34;file_&#34;</span>&nbsp;<span class="op" id="6960788">+</span>&nbsp;<span class="ident" id="6960790">thisArch</span>&nbsp;<span class="op" id="6960799">+</span>&nbsp;<span class="string" id="6960801">&#34;.go&#34;</span><span class="op" id="6960806">,</span>&nbsp;<span class="builtintype" id="6960808">true</span><span class="op" id="6960812">}</span><span class="op" id="6960813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960816">{</span><span class="string" id="6960817">&#34;file_&#34;</span>&nbsp;<span class="op" id="6960825">+</span>&nbsp;<span class="ident" id="6960827">otherArch</span>&nbsp;<span class="op" id="6960837">+</span>&nbsp;<span class="string" id="6960839">&#34;.go&#34;</span><span class="op" id="6960844">,</span>&nbsp;<span class="builtintype" id="6960846">false</span><span class="op" id="6960851">}</span><span class="op" id="6960852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960855">{</span><span class="string" id="6960856">&#34;file_&#34;</span>&nbsp;<span class="op" id="6960864">+</span>&nbsp;<span class="ident" id="6960866">thisOS</span>&nbsp;<span class="op" id="6960873">+</span>&nbsp;<span class="string" id="6960875">&#34;.go&#34;</span><span class="op" id="6960880">,</span>&nbsp;<span class="builtintype" id="6960882">true</span><span class="op" id="6960886">}</span><span class="op" id="6960887">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960890">{</span><span class="string" id="6960891">&#34;file_&#34;</span>&nbsp;<span class="op" id="6960899">+</span>&nbsp;<span class="ident" id="6960901">otherOS</span>&nbsp;<span class="op" id="6960909">+</span>&nbsp;<span class="string" id="6960911">&#34;.go&#34;</span><span class="op" id="6960916">,</span>&nbsp;<span class="builtintype" id="6960918">false</span><span class="op" id="6960923">}</span><span class="op" id="6960924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960927">{</span><span class="string" id="6960928">&#34;file_&#34;</span>&nbsp;<span class="op" id="6960936">+</span>&nbsp;<span class="ident" id="6960938">thisOS</span>&nbsp;<span class="op" id="6960945">+</span>&nbsp;<span class="string" id="6960947">&#34;_&#34;</span>&nbsp;<span class="op" id="6960951">+</span>&nbsp;<span class="ident" id="6960953">thisArch</span>&nbsp;<span class="op" id="6960962">+</span>&nbsp;<span class="string" id="6960964">&#34;.go&#34;</span><span class="op" id="6960969">,</span>&nbsp;<span class="builtintype" id="6960971">true</span><span class="op" id="6960975">}</span><span class="op" id="6960976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960979">{</span><span class="string" id="6960980">&#34;file_&#34;</span>&nbsp;<span class="op" id="6960988">+</span>&nbsp;<span class="ident" id="6960990">otherOS</span>&nbsp;<span class="op" id="6960998">+</span>&nbsp;<span class="string" id="6961000">&#34;_&#34;</span>&nbsp;<span class="op" id="6961004">+</span>&nbsp;<span class="ident" id="6961006">thisArch</span>&nbsp;<span class="op" id="6961015">+</span>&nbsp;<span class="string" id="6961017">&#34;.go&#34;</span><span class="op" id="6961022">,</span>&nbsp;<span class="builtintype" id="6961024">false</span><span class="op" id="6961029">}</span><span class="op" id="6961030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961033">{</span><span class="string" id="6961034">&#34;file_&#34;</span>&nbsp;<span class="op" id="6961042">+</span>&nbsp;<span class="ident" id="6961044">thisOS</span>&nbsp;<span class="op" id="6961051">+</span>&nbsp;<span class="string" id="6961053">&#34;_&#34;</span>&nbsp;<span class="op" id="6961057">+</span>&nbsp;<span class="ident" id="6961059">otherArch</span>&nbsp;<span class="op" id="6961069">+</span>&nbsp;<span class="string" id="6961071">&#34;.go&#34;</span><span class="op" id="6961076">,</span>&nbsp;<span class="builtintype" id="6961078">false</span><span class="op" id="6961083">}</span><span class="op" id="6961084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961087">{</span><span class="string" id="6961088">&#34;file_&#34;</span>&nbsp;<span class="op" id="6961096">+</span>&nbsp;<span class="ident" id="6961098">otherOS</span>&nbsp;<span class="op" id="6961106">+</span>&nbsp;<span class="string" id="6961108">&#34;_&#34;</span>&nbsp;<span class="op" id="6961112">+</span>&nbsp;<span class="ident" id="6961114">otherArch</span>&nbsp;<span class="op" id="6961124">+</span>&nbsp;<span class="string" id="6961126">&#34;.go&#34;</span><span class="op" id="6961131">,</span>&nbsp;<span class="builtintype" id="6961133">false</span><span class="op" id="6961138">}</span><span class="op" id="6961139">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961142">{</span><span class="string" id="6961143">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="6961155">+</span>&nbsp;<span class="ident" id="6961157">thisArch</span>&nbsp;<span class="op" id="6961166">+</span>&nbsp;<span class="string" id="6961168">&#34;.go&#34;</span><span class="op" id="6961173">,</span>&nbsp;<span class="builtintype" id="6961175">true</span><span class="op" id="6961179">}</span><span class="op" id="6961180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961183">{</span><span class="string" id="6961184">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="6961196">+</span>&nbsp;<span class="ident" id="6961198">otherArch</span>&nbsp;<span class="op" id="6961208">+</span>&nbsp;<span class="string" id="6961210">&#34;.go&#34;</span><span class="op" id="6961215">,</span>&nbsp;<span class="builtintype" id="6961217">false</span><span class="op" id="6961222">}</span><span class="op" id="6961223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961226">{</span><span class="string" id="6961227">&#34;file_&#34;</span>&nbsp;<span class="op" id="6961235">+</span>&nbsp;<span class="ident" id="6961237">thisOS</span>&nbsp;<span class="op" id="6961244">+</span>&nbsp;<span class="string" id="6961246">&#34;.c&#34;</span><span class="op" id="6961250">,</span>&nbsp;<span class="builtintype" id="6961252">true</span><span class="op" id="6961256">}</span><span class="op" id="6961257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961260">{</span><span class="string" id="6961261">&#34;file_&#34;</span>&nbsp;<span class="op" id="6961269">+</span>&nbsp;<span class="ident" id="6961271">otherOS</span>&nbsp;<span class="op" id="6961279">+</span>&nbsp;<span class="string" id="6961281">&#34;.c&#34;</span><span class="op" id="6961285">,</span>&nbsp;<span class="builtintype" id="6961287">false</span><span class="op" id="6961292">}</span><span class="op" id="6961293">,</span><br>
<span class="lineno"></span><span class="op" id="6961295">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6961298">func</span>&nbsp;<span class="ident" id="6961303">TestGoodOSArch</span><span class="op" id="6961317">(</span><span class="ident" id="6961318">t</span>&nbsp;<span class="op" id="6961320">*</span><span class="ident" id="6961321">testing</span><span class="op" id="6961328">.</span><span class="ident" id="6961329">T</span><span class="op" id="6961330">)</span>&nbsp;<span class="op" id="6961332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6961335">for</span>&nbsp;<span class="ident" id="6961339">_</span><span class="op" id="6961340">,</span>&nbsp;<span class="ident" id="6961342">test</span>&nbsp;<span class="op" id="6961347">:=</span>&nbsp;<span class="keyword" id="6961350">range</span>&nbsp;<span class="ident" id="6961356">tests</span>&nbsp;<span class="op" id="6961362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6961366">if</span>&nbsp;<span class="ident" id="6961369">Default</span><span class="op" id="6961376">.</span><span class="ident" id="6961377">goodOSArchFile</span><span class="op" id="6961391">(</span><span class="ident" id="6961392">test</span><span class="op" id="6961396">.</span><span class="ident" id="6961397">name</span><span class="op" id="6961401">,</span>&nbsp;<span class="builtinfunc" id="6961403">make</span><span class="op" id="6961407">(</span><span class="keyword" id="6961408">map</span><span class="op" id="6961411">[</span><span class="builtintype" id="6961412">string</span><span class="op" id="6961418">]</span><span class="builtintype" id="6961419">bool</span><span class="op" id="6961423">)</span><span class="op" id="6961424">)</span>&nbsp;<span class="op" id="6961426">!=</span>&nbsp;<span class="ident" id="6961429">test</span><span class="op" id="6961433">.</span><span class="ident" id="6961434">result</span>&nbsp;<span class="op" id="6961441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961446">t</span><span class="op" id="6961447">.</span><span class="ident" id="6961448">Fatalf</span><span class="op" id="6961454">(</span><span class="string" id="6961455">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6961481">,</span>&nbsp;<span class="ident" id="6961483">test</span><span class="op" id="6961487">.</span><span class="ident" id="6961488">name</span><span class="op" id="6961492">,</span>&nbsp;<span class="ident" id="6961494">test</span><span class="op" id="6961498">.</span><span class="ident" id="6961499">result</span><span class="op" id="6961505">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961512">}</span><br>
<span class="lineno"></span><span class="op" id="6961514">}</span>
</div>
</body>
</html>
