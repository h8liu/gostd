<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8636786">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8636841">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8636895">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8636946">package</span>&nbsp;<span class="ident" id="8636954">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8636962">import</span>&nbsp;<span class="op" id="8636969">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8636972">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8636984">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8636997">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8637007">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8637010">var</span>&nbsp;<span class="ident" id="8637014">src</span>&nbsp;<span class="op" id="8637018">=</span>&nbsp;<span class="ident" id="8637020"><a href="/go/parser/performance_test.go.html#8637048">readFile</a></span><span class="op" id="8637028">(</span><span class="string" id="8637029">&#34;parser.go&#34;</span><span class="op" id="8637040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8637043">func</span>&nbsp;<span class="ident" id="8637048">readFile</span><span class="op" id="8637056">(</span><span class="ident" id="8637057">filename</span>&nbsp;<span class="builtintype" id="8637066">string</span><span class="op" id="8637072">)</span>&nbsp;<span class="op" id="8637074">[</span><span class="op" id="8637075">]</span><span class="builtintype" id="8637076">byte</span>&nbsp;<span class="op" id="8637081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637084">data</span><span class="op" id="8637088">,</span>&nbsp;<span class="ident" id="8637090">err</span>&nbsp;<span class="op" id="8637094">:=</span>&nbsp;<span class="ident" id="8637097"><a href="/go/parser/performance_test.go.html#8636984">ioutil</a></span><span class="op" id="8637103">.</span><span class="ident" id="8637104">ReadFile</span><span class="op" id="8637112">(</span><span class="ident" id="8637113"><a href="/go/parser/performance_test.go.html#8637057">filename</a></span><span class="op" id="8637121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637124">if</span>&nbsp;<span class="ident" id="8637127"><a href="/go/parser/performance_test.go.html#8637090">err</a></span>&nbsp;<span class="op" id="8637131">!=</span>&nbsp;<span class="ident" id="8637134">nil</span>&nbsp;<span class="op" id="8637138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8637142">panic</span><span class="op" id="8637147">(</span><span class="ident" id="8637148"><a href="/go/parser/performance_test.go.html#8637090">err</a></span><span class="op" id="8637151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637154">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637157">return</span>&nbsp;<span class="ident" id="8637164"><a href="/go/parser/performance_test.go.html#8637084">data</a></span><br>
<span class="lineno"></span><span class="op" id="8637169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8637172">func</span>&nbsp;<span class="ident" id="8637177">BenchmarkParse</span><span class="op" id="8637191">(</span><span class="ident" id="8637192">b</span>&nbsp;<span class="op" id="8637194">*</span><span class="ident" id="8637195"><a href="/go/parser/performance_test.go.html#8636997">testing</a></span><span class="op" id="8637202">.</span><span class="ident" id="8637203">B</span><span class="op" id="8637204">)</span>&nbsp;<span class="op" id="8637206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637209"><a href="/go/parser/performance_test.go.html#8637192">b</a></span><span class="op" id="8637210">.</span><span class="ident" id="8637211">SetBytes</span><span class="op" id="8637219">(</span><span class="ident" id="8637220">int64</span><span class="op" id="8637225">(</span><span class="builtinfunc" id="8637226">len</span><span class="op" id="8637229">(</span><span class="ident" id="8637230"><a href="/go/parser/performance_test.go.html#8637014">src</a></span><span class="op" id="8637233">)</span><span class="op" id="8637234">)</span><span class="op" id="8637235">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637238">for</span>&nbsp;<span class="ident" id="8637242">i</span>&nbsp;<span class="op" id="8637244">:=</span>&nbsp;<span class="num" id="8637247">0</span><span class="op" id="8637248">;</span>&nbsp;<span class="ident" id="8637250"><a href="/go/parser/performance_test.go.html#8637242">i</a></span>&nbsp;<span class="op" id="8637252">&lt;</span>&nbsp;<span class="ident" id="8637254"><a href="/go/parser/performance_test.go.html#8637192">b</a></span><span class="op" id="8637255">.</span><span class="ident" id="8637256">N</span><span class="op" id="8637257">;</span>&nbsp;<span class="ident" id="8637259"><a href="/go/parser/performance_test.go.html#8637242">i</a></span><span class="op" id="8637260">++</span>&nbsp;<span class="op" id="8637263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637267">if</span>&nbsp;<span class="ident" id="8637270">_</span><span class="op" id="8637271">,</span>&nbsp;<span class="ident" id="8637273">err</span>&nbsp;<span class="op" id="8637277">:=</span>&nbsp;<span class="ident" id="8637280"><a href="/go/parser/interface.go.html#5216452">ParseFile</a></span><span class="op" id="8637289">(</span><span class="ident" id="8637290"><a href="/go/parser/performance_test.go.html#8636972">token</a></span><span class="op" id="8637295">.</span><span class="ident" id="8637296">NewFileSet</span><span class="op" id="8637306">(</span><span class="op" id="8637307">)</span><span class="op" id="8637308">,</span>&nbsp;<span class="string" id="8637310">&#34;&#34;</span><span class="op" id="8637312">,</span>&nbsp;<span class="ident" id="8637314"><a href="/go/parser/performance_test.go.html#8637014">src</a></span><span class="op" id="8637317">,</span>&nbsp;<span class="ident" id="8637319"><a href="/go/parser/interface.go.html#5214959">ParseComments</a></span><span class="op" id="8637332">)</span><span class="op" id="8637333">;</span>&nbsp;<span class="ident" id="8637335"><a href="/go/parser/performance_test.go.html#8637273">err</a></span>&nbsp;<span class="op" id="8637339">!=</span>&nbsp;<span class="ident" id="8637342">nil</span>&nbsp;<span class="op" id="8637346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637351"><a href="/go/parser/performance_test.go.html#8637192">b</a></span><span class="op" id="8637352">.</span><span class="ident" id="8637353">Fatalf</span><span class="op" id="8637359">(</span><span class="string" id="8637360">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8637401">,</span>&nbsp;<span class="ident" id="8637403"><a href="/go/parser/performance_test.go.html#8637273">err</a></span><span class="op" id="8637406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637413">}</span><br>
<span class="lineno">30</span><span class="op" id="8637415">}</span>
</div>
</body>
</html>
