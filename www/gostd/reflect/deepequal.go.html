<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html" class="current">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2665802">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2665857">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2665911">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2665962">//&nbsp;Deep&nbsp;equality&nbsp;test&nbsp;via&nbsp;reflection</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2666000">package</span>&nbsp;<span class="ident" id="2666008">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2666017">//&nbsp;During&nbsp;deepValueEqual,&nbsp;must&nbsp;keep&nbsp;track&nbsp;of&nbsp;checks&nbsp;that&nbsp;are</span><br>
<span class="lineno">10</span><span class="comment" id="2666078">//&nbsp;in&nbsp;progress.&nbsp;&nbsp;The&nbsp;comparison&nbsp;algorithm&nbsp;assumes&nbsp;that&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2666137">//&nbsp;checks&nbsp;in&nbsp;progress&nbsp;are&nbsp;true&nbsp;when&nbsp;it&nbsp;reencounters&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="2666195">//&nbsp;Visited&nbsp;comparisons&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;map&nbsp;indexed&nbsp;by&nbsp;visit.</span><br>
<span class="lineno"></span><span class="keyword" id="2666256">type</span>&nbsp;<span class="ident" id="2666261">visit</span>&nbsp;<span class="keyword" id="2666267">struct</span>&nbsp;<span class="op" id="2666274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2666277">a1</span>&nbsp;&nbsp;<span class="builtintype" id="2666281">uintptr</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2666290">a2</span>&nbsp;&nbsp;<span class="builtintype" id="2666294">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2666303">typ</span>&nbsp;<span class="ident" id="2666307">Type</span><br>
<span class="lineno"></span><span class="op" id="2666312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2666315">//&nbsp;Tests&nbsp;for&nbsp;deep&nbsp;equality&nbsp;using&nbsp;reflected&nbsp;types.&nbsp;The&nbsp;map&nbsp;argument&nbsp;tracks</span><br>
<span class="lineno">20</span><span class="comment" id="2666389">//&nbsp;comparisons&nbsp;that&nbsp;have&nbsp;already&nbsp;been&nbsp;seen,&nbsp;which&nbsp;allows&nbsp;short&nbsp;circuiting&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2666466">//&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2666486">func</span>&nbsp;<span class="ident" id="2666491">deepValueEqual</span><span class="op" id="2666505">(</span><span class="ident" id="2666506">v1</span><span class="op" id="2666508">,</span>&nbsp;<span class="ident" id="2666510">v2</span>&nbsp;<span class="ident" id="2666513">Value</span><span class="op" id="2666518">,</span>&nbsp;<span class="ident" id="2666520">visited</span>&nbsp;<span class="keyword" id="2666528">map</span><span class="op" id="2666531">[</span><span class="ident" id="2666532">visit</span><span class="op" id="2666537">]</span><span class="builtintype" id="2666538">bool</span><span class="op" id="2666542">,</span>&nbsp;<span class="ident" id="2666544">depth</span>&nbsp;<span class="builtintype" id="2666550">int</span><span class="op" id="2666553">)</span>&nbsp;<span class="builtintype" id="2666555">bool</span>&nbsp;<span class="op" id="2666560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666563">if</span>&nbsp;<span class="op" id="2666566">!</span><span class="ident" id="2666567">v1</span><span class="op" id="2666569">.</span><span class="ident" id="2666570">IsValid</span><span class="op" id="2666577">(</span><span class="op" id="2666578">)</span>&nbsp;<span class="op" id="2666580">||</span>&nbsp;<span class="op" id="2666583">!</span><span class="ident" id="2666584">v2</span><span class="op" id="2666586">.</span><span class="ident" id="2666587">IsValid</span><span class="op" id="2666594">(</span><span class="op" id="2666595">)</span>&nbsp;<span class="op" id="2666597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666601">return</span>&nbsp;<span class="ident" id="2666608">v1</span><span class="op" id="2666610">.</span><span class="ident" id="2666611">IsValid</span><span class="op" id="2666618">(</span><span class="op" id="2666619">)</span>&nbsp;<span class="op" id="2666621">==</span>&nbsp;<span class="ident" id="2666624">v2</span><span class="op" id="2666626">.</span><span class="ident" id="2666627">IsValid</span><span class="op" id="2666634">(</span><span class="op" id="2666635">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2666638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666641">if</span>&nbsp;<span class="ident" id="2666644">v1</span><span class="op" id="2666646">.</span><span class="ident" id="2666647">Type</span><span class="op" id="2666651">(</span><span class="op" id="2666652">)</span>&nbsp;<span class="op" id="2666654">!=</span>&nbsp;<span class="ident" id="2666657">v2</span><span class="op" id="2666659">.</span><span class="ident" id="2666660">Type</span><span class="op" id="2666664">(</span><span class="op" id="2666665">)</span>&nbsp;<span class="op" id="2666667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666671">return</span>&nbsp;<span class="builtintype" id="2666678">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2666685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2666689">//&nbsp;if&nbsp;depth&nbsp;&gt;&nbsp;10&nbsp;{&nbsp;panic(&#34;deepValueEqual&#34;)&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2666752">hard</span>&nbsp;<span class="op" id="2666757">:=</span>&nbsp;<span class="keyword" id="2666760">func</span><span class="op" id="2666764">(</span><span class="ident" id="2666765">k</span>&nbsp;<span class="ident" id="2666767">Kind</span><span class="op" id="2666771">)</span>&nbsp;<span class="builtintype" id="2666773">bool</span>&nbsp;<span class="op" id="2666778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666782">switch</span>&nbsp;<span class="ident" id="2666789">k</span>&nbsp;<span class="op" id="2666791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666795">case</span>&nbsp;<span class="ident" id="2666800">Array</span><span class="op" id="2666805">,</span>&nbsp;<span class="ident" id="2666807">Map</span><span class="op" id="2666810">,</span>&nbsp;<span class="ident" id="2666812">Slice</span><span class="op" id="2666817">,</span>&nbsp;<span class="ident" id="2666819">Struct</span><span class="op" id="2666825">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666830">return</span>&nbsp;<span class="builtintype" id="2666837">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2666844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666848">return</span>&nbsp;<span class="builtintype" id="2666855">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2666862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666866">if</span>&nbsp;<span class="ident" id="2666869">v1</span><span class="op" id="2666871">.</span><span class="ident" id="2666872">CanAddr</span><span class="op" id="2666879">(</span><span class="op" id="2666880">)</span>&nbsp;<span class="op" id="2666882">&amp;&amp;</span>&nbsp;<span class="ident" id="2666885">v2</span><span class="op" id="2666887">.</span><span class="ident" id="2666888">CanAddr</span><span class="op" id="2666895">(</span><span class="op" id="2666896">)</span>&nbsp;<span class="op" id="2666898">&amp;&amp;</span>&nbsp;<span class="ident" id="2666901">hard</span><span class="op" id="2666905">(</span><span class="ident" id="2666906">v1</span><span class="op" id="2666908">.</span><span class="ident" id="2666909">Kind</span><span class="op" id="2666913">(</span><span class="op" id="2666914">)</span><span class="op" id="2666915">)</span>&nbsp;<span class="op" id="2666917">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2666921">addr1</span>&nbsp;<span class="op" id="2666927">:=</span>&nbsp;<span class="ident" id="2666930">v1</span><span class="op" id="2666932">.</span><span class="ident" id="2666933">UnsafeAddr</span><span class="op" id="2666943">(</span><span class="op" id="2666944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2666948">addr2</span>&nbsp;<span class="op" id="2666954">:=</span>&nbsp;<span class="ident" id="2666957">v2</span><span class="op" id="2666959">.</span><span class="ident" id="2666960">UnsafeAddr</span><span class="op" id="2666970">(</span><span class="op" id="2666971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2666975">if</span>&nbsp;<span class="ident" id="2666978">addr1</span>&nbsp;<span class="op" id="2666984">&gt;</span>&nbsp;<span class="ident" id="2666986">addr2</span>&nbsp;<span class="op" id="2666992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2666997">//&nbsp;Canonicalize&nbsp;order&nbsp;to&nbsp;reduce&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;visited.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2667062">addr1</span><span class="op" id="2667067">,</span>&nbsp;<span class="ident" id="2667069">addr2</span>&nbsp;<span class="op" id="2667075">=</span>&nbsp;<span class="ident" id="2667077">addr2</span><span class="op" id="2667082">,</span>&nbsp;<span class="ident" id="2667084">addr1</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2667097">//&nbsp;Short&nbsp;circuit&nbsp;if&nbsp;references&nbsp;are&nbsp;identical&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667148">if</span>&nbsp;<span class="ident" id="2667151">addr1</span>&nbsp;<span class="op" id="2667157">==</span>&nbsp;<span class="ident" id="2667160">addr2</span>&nbsp;<span class="op" id="2667166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667171">return</span>&nbsp;<span class="builtintype" id="2667178">true</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2667190">//&nbsp;...&nbsp;or&nbsp;already&nbsp;seen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2667215">typ</span>&nbsp;<span class="op" id="2667219">:=</span>&nbsp;<span class="ident" id="2667222">v1</span><span class="op" id="2667224">.</span><span class="ident" id="2667225">Type</span><span class="op" id="2667229">(</span><span class="op" id="2667230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2667234">v</span>&nbsp;<span class="op" id="2667236">:=</span>&nbsp;<span class="ident" id="2667239">visit</span><span class="op" id="2667244">{</span><span class="ident" id="2667245">addr1</span><span class="op" id="2667250">,</span>&nbsp;<span class="ident" id="2667252">addr2</span><span class="op" id="2667257">,</span>&nbsp;<span class="ident" id="2667259">typ</span><span class="op" id="2667262">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667266">if</span>&nbsp;<span class="ident" id="2667269">visited</span><span class="op" id="2667276">[</span><span class="ident" id="2667277">v</span><span class="op" id="2667278">]</span>&nbsp;<span class="op" id="2667280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667285">return</span>&nbsp;<span class="builtintype" id="2667292">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2667304">//&nbsp;Remember&nbsp;for&nbsp;later.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2667329">visited</span><span class="op" id="2667336">[</span><span class="ident" id="2667337">v</span><span class="op" id="2667338">]</span>&nbsp;<span class="op" id="2667340">=</span>&nbsp;<span class="builtintype" id="2667342">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667352">switch</span>&nbsp;<span class="ident" id="2667359">v1</span><span class="op" id="2667361">.</span><span class="ident" id="2667362">Kind</span><span class="op" id="2667366">(</span><span class="op" id="2667367">)</span>&nbsp;<span class="op" id="2667369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667372">case</span>&nbsp;<span class="ident" id="2667377">Array</span><span class="op" id="2667382">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667386">for</span>&nbsp;<span class="ident" id="2667390">i</span>&nbsp;<span class="op" id="2667392">:=</span>&nbsp;<span class="num" id="2667395">0</span><span class="op" id="2667396">;</span>&nbsp;<span class="ident" id="2667398">i</span>&nbsp;<span class="op" id="2667400">&lt;</span>&nbsp;<span class="ident" id="2667402">v1</span><span class="op" id="2667404">.</span><span class="ident" id="2667405">Len</span><span class="op" id="2667408">(</span><span class="op" id="2667409">)</span><span class="op" id="2667410">;</span>&nbsp;<span class="ident" id="2667412">i</span><span class="op" id="2667413">++</span>&nbsp;<span class="op" id="2667416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667421">if</span>&nbsp;<span class="op" id="2667424">!</span><span class="ident" id="2667425">deepValueEqual</span><span class="op" id="2667439">(</span><span class="ident" id="2667440">v1</span><span class="op" id="2667442">.</span><span class="ident" id="2667443">Index</span><span class="op" id="2667448">(</span><span class="ident" id="2667449">i</span><span class="op" id="2667450">)</span><span class="op" id="2667451">,</span>&nbsp;<span class="ident" id="2667453">v2</span><span class="op" id="2667455">.</span><span class="ident" id="2667456">Index</span><span class="op" id="2667461">(</span><span class="ident" id="2667462">i</span><span class="op" id="2667463">)</span><span class="op" id="2667464">,</span>&nbsp;<span class="ident" id="2667466">visited</span><span class="op" id="2667473">,</span>&nbsp;<span class="ident" id="2667475">depth</span><span class="op" id="2667480">+</span><span class="num" id="2667481">1</span><span class="op" id="2667482">)</span>&nbsp;<span class="op" id="2667484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667490">return</span>&nbsp;<span class="builtintype" id="2667497">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667510">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667514">return</span>&nbsp;<span class="builtintype" id="2667521">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667527">case</span>&nbsp;<span class="ident" id="2667532">Slice</span><span class="op" id="2667537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667541">if</span>&nbsp;<span class="ident" id="2667544">v1</span><span class="op" id="2667546">.</span><span class="ident" id="2667547">IsNil</span><span class="op" id="2667552">(</span><span class="op" id="2667553">)</span>&nbsp;<span class="op" id="2667555">!=</span>&nbsp;<span class="ident" id="2667558">v2</span><span class="op" id="2667560">.</span><span class="ident" id="2667561">IsNil</span><span class="op" id="2667566">(</span><span class="op" id="2667567">)</span>&nbsp;<span class="op" id="2667569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667574">return</span>&nbsp;<span class="builtintype" id="2667581">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667589">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667593">if</span>&nbsp;<span class="ident" id="2667596">v1</span><span class="op" id="2667598">.</span><span class="ident" id="2667599">Len</span><span class="op" id="2667602">(</span><span class="op" id="2667603">)</span>&nbsp;<span class="op" id="2667605">!=</span>&nbsp;<span class="ident" id="2667608">v2</span><span class="op" id="2667610">.</span><span class="ident" id="2667611">Len</span><span class="op" id="2667614">(</span><span class="op" id="2667615">)</span>&nbsp;<span class="op" id="2667617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667622">return</span>&nbsp;<span class="builtintype" id="2667629">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667641">if</span>&nbsp;<span class="ident" id="2667644">v1</span><span class="op" id="2667646">.</span><span class="ident" id="2667647">Pointer</span><span class="op" id="2667654">(</span><span class="op" id="2667655">)</span>&nbsp;<span class="op" id="2667657">==</span>&nbsp;<span class="ident" id="2667660">v2</span><span class="op" id="2667662">.</span><span class="ident" id="2667663">Pointer</span><span class="op" id="2667670">(</span><span class="op" id="2667671">)</span>&nbsp;<span class="op" id="2667673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667678">return</span>&nbsp;<span class="builtintype" id="2667685">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667696">for</span>&nbsp;<span class="ident" id="2667700">i</span>&nbsp;<span class="op" id="2667702">:=</span>&nbsp;<span class="num" id="2667705">0</span><span class="op" id="2667706">;</span>&nbsp;<span class="ident" id="2667708">i</span>&nbsp;<span class="op" id="2667710">&lt;</span>&nbsp;<span class="ident" id="2667712">v1</span><span class="op" id="2667714">.</span><span class="ident" id="2667715">Len</span><span class="op" id="2667718">(</span><span class="op" id="2667719">)</span><span class="op" id="2667720">;</span>&nbsp;<span class="ident" id="2667722">i</span><span class="op" id="2667723">++</span>&nbsp;<span class="op" id="2667726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667731">if</span>&nbsp;<span class="op" id="2667734">!</span><span class="ident" id="2667735">deepValueEqual</span><span class="op" id="2667749">(</span><span class="ident" id="2667750">v1</span><span class="op" id="2667752">.</span><span class="ident" id="2667753">Index</span><span class="op" id="2667758">(</span><span class="ident" id="2667759">i</span><span class="op" id="2667760">)</span><span class="op" id="2667761">,</span>&nbsp;<span class="ident" id="2667763">v2</span><span class="op" id="2667765">.</span><span class="ident" id="2667766">Index</span><span class="op" id="2667771">(</span><span class="ident" id="2667772">i</span><span class="op" id="2667773">)</span><span class="op" id="2667774">,</span>&nbsp;<span class="ident" id="2667776">visited</span><span class="op" id="2667783">,</span>&nbsp;<span class="ident" id="2667785">depth</span><span class="op" id="2667790">+</span><span class="num" id="2667791">1</span><span class="op" id="2667792">)</span>&nbsp;<span class="op" id="2667794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667800">return</span>&nbsp;<span class="builtintype" id="2667807">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667816">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667824">return</span>&nbsp;<span class="builtintype" id="2667831">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667837">case</span>&nbsp;<span class="ident" id="2667842">Interface</span><span class="op" id="2667851">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667855">if</span>&nbsp;<span class="ident" id="2667858">v1</span><span class="op" id="2667860">.</span><span class="ident" id="2667861">IsNil</span><span class="op" id="2667866">(</span><span class="op" id="2667867">)</span>&nbsp;<span class="op" id="2667869">||</span>&nbsp;<span class="ident" id="2667872">v2</span><span class="op" id="2667874">.</span><span class="ident" id="2667875">IsNil</span><span class="op" id="2667880">(</span><span class="op" id="2667881">)</span>&nbsp;<span class="op" id="2667883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667888">return</span>&nbsp;<span class="ident" id="2667895">v1</span><span class="op" id="2667897">.</span><span class="ident" id="2667898">IsNil</span><span class="op" id="2667903">(</span><span class="op" id="2667904">)</span>&nbsp;<span class="op" id="2667906">==</span>&nbsp;<span class="ident" id="2667909">v2</span><span class="op" id="2667911">.</span><span class="ident" id="2667912">IsNil</span><span class="op" id="2667917">(</span><span class="op" id="2667918">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2667922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667926">return</span>&nbsp;<span class="ident" id="2667933">deepValueEqual</span><span class="op" id="2667947">(</span><span class="ident" id="2667948">v1</span><span class="op" id="2667950">.</span><span class="ident" id="2667951">Elem</span><span class="op" id="2667955">(</span><span class="op" id="2667956">)</span><span class="op" id="2667957">,</span>&nbsp;<span class="ident" id="2667959">v2</span><span class="op" id="2667961">.</span><span class="ident" id="2667962">Elem</span><span class="op" id="2667966">(</span><span class="op" id="2667967">)</span><span class="op" id="2667968">,</span>&nbsp;<span class="ident" id="2667970">visited</span><span class="op" id="2667977">,</span>&nbsp;<span class="ident" id="2667979">depth</span><span class="op" id="2667984">+</span><span class="num" id="2667985">1</span><span class="op" id="2667986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2667989">case</span>&nbsp;<span class="ident" id="2667994">Ptr</span><span class="op" id="2667997">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668001">return</span>&nbsp;<span class="ident" id="2668008">deepValueEqual</span><span class="op" id="2668022">(</span><span class="ident" id="2668023">v1</span><span class="op" id="2668025">.</span><span class="ident" id="2668026">Elem</span><span class="op" id="2668030">(</span><span class="op" id="2668031">)</span><span class="op" id="2668032">,</span>&nbsp;<span class="ident" id="2668034">v2</span><span class="op" id="2668036">.</span><span class="ident" id="2668037">Elem</span><span class="op" id="2668041">(</span><span class="op" id="2668042">)</span><span class="op" id="2668043">,</span>&nbsp;<span class="ident" id="2668045">visited</span><span class="op" id="2668052">,</span>&nbsp;<span class="ident" id="2668054">depth</span><span class="op" id="2668059">+</span><span class="num" id="2668060">1</span><span class="op" id="2668061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668064">case</span>&nbsp;<span class="ident" id="2668069">Struct</span><span class="op" id="2668075">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668079">for</span>&nbsp;<span class="ident" id="2668083">i</span><span class="op" id="2668084">,</span>&nbsp;<span class="ident" id="2668086">n</span>&nbsp;<span class="op" id="2668088">:=</span>&nbsp;<span class="num" id="2668091">0</span><span class="op" id="2668092">,</span>&nbsp;<span class="ident" id="2668094">v1</span><span class="op" id="2668096">.</span><span class="ident" id="2668097">NumField</span><span class="op" id="2668105">(</span><span class="op" id="2668106">)</span><span class="op" id="2668107">;</span>&nbsp;<span class="ident" id="2668109">i</span>&nbsp;<span class="op" id="2668111">&lt;</span>&nbsp;<span class="ident" id="2668113">n</span><span class="op" id="2668114">;</span>&nbsp;<span class="ident" id="2668116">i</span><span class="op" id="2668117">++</span>&nbsp;<span class="op" id="2668120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668125">if</span>&nbsp;<span class="op" id="2668128">!</span><span class="ident" id="2668129">deepValueEqual</span><span class="op" id="2668143">(</span><span class="ident" id="2668144">v1</span><span class="op" id="2668146">.</span><span class="ident" id="2668147">Field</span><span class="op" id="2668152">(</span><span class="ident" id="2668153">i</span><span class="op" id="2668154">)</span><span class="op" id="2668155">,</span>&nbsp;<span class="ident" id="2668157">v2</span><span class="op" id="2668159">.</span><span class="ident" id="2668160">Field</span><span class="op" id="2668165">(</span><span class="ident" id="2668166">i</span><span class="op" id="2668167">)</span><span class="op" id="2668168">,</span>&nbsp;<span class="ident" id="2668170">visited</span><span class="op" id="2668177">,</span>&nbsp;<span class="ident" id="2668179">depth</span><span class="op" id="2668184">+</span><span class="num" id="2668185">1</span><span class="op" id="2668186">)</span>&nbsp;<span class="op" id="2668188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668194">return</span>&nbsp;<span class="builtintype" id="2668201">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668214">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668218">return</span>&nbsp;<span class="builtintype" id="2668225">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668231">case</span>&nbsp;<span class="ident" id="2668236">Map</span><span class="op" id="2668239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668243">if</span>&nbsp;<span class="ident" id="2668246">v1</span><span class="op" id="2668248">.</span><span class="ident" id="2668249">IsNil</span><span class="op" id="2668254">(</span><span class="op" id="2668255">)</span>&nbsp;<span class="op" id="2668257">!=</span>&nbsp;<span class="ident" id="2668260">v2</span><span class="op" id="2668262">.</span><span class="ident" id="2668263">IsNil</span><span class="op" id="2668268">(</span><span class="op" id="2668269">)</span>&nbsp;<span class="op" id="2668271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668276">return</span>&nbsp;<span class="builtintype" id="2668283">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668291">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668295">if</span>&nbsp;<span class="ident" id="2668298">v1</span><span class="op" id="2668300">.</span><span class="ident" id="2668301">Len</span><span class="op" id="2668304">(</span><span class="op" id="2668305">)</span>&nbsp;<span class="op" id="2668307">!=</span>&nbsp;<span class="ident" id="2668310">v2</span><span class="op" id="2668312">.</span><span class="ident" id="2668313">Len</span><span class="op" id="2668316">(</span><span class="op" id="2668317">)</span>&nbsp;<span class="op" id="2668319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668324">return</span>&nbsp;<span class="builtintype" id="2668331">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668343">if</span>&nbsp;<span class="ident" id="2668346">v1</span><span class="op" id="2668348">.</span><span class="ident" id="2668349">Pointer</span><span class="op" id="2668356">(</span><span class="op" id="2668357">)</span>&nbsp;<span class="op" id="2668359">==</span>&nbsp;<span class="ident" id="2668362">v2</span><span class="op" id="2668364">.</span><span class="ident" id="2668365">Pointer</span><span class="op" id="2668372">(</span><span class="op" id="2668373">)</span>&nbsp;<span class="op" id="2668375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668380">return</span>&nbsp;<span class="builtintype" id="2668387">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668398">for</span>&nbsp;<span class="ident" id="2668402">_</span><span class="op" id="2668403">,</span>&nbsp;<span class="ident" id="2668405">k</span>&nbsp;<span class="op" id="2668407">:=</span>&nbsp;<span class="keyword" id="2668410">range</span>&nbsp;<span class="ident" id="2668416">v1</span><span class="op" id="2668418">.</span><span class="ident" id="2668419">MapKeys</span><span class="op" id="2668426">(</span><span class="op" id="2668427">)</span>&nbsp;<span class="op" id="2668429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668434">if</span>&nbsp;<span class="op" id="2668437">!</span><span class="ident" id="2668438">deepValueEqual</span><span class="op" id="2668452">(</span><span class="ident" id="2668453">v1</span><span class="op" id="2668455">.</span><span class="ident" id="2668456">MapIndex</span><span class="op" id="2668464">(</span><span class="ident" id="2668465">k</span><span class="op" id="2668466">)</span><span class="op" id="2668467">,</span>&nbsp;<span class="ident" id="2668469">v2</span><span class="op" id="2668471">.</span><span class="ident" id="2668472">MapIndex</span><span class="op" id="2668480">(</span><span class="ident" id="2668481">k</span><span class="op" id="2668482">)</span><span class="op" id="2668483">,</span>&nbsp;<span class="ident" id="2668485">visited</span><span class="op" id="2668492">,</span>&nbsp;<span class="ident" id="2668494">depth</span><span class="op" id="2668499">+</span><span class="num" id="2668500">1</span><span class="op" id="2668501">)</span>&nbsp;<span class="op" id="2668503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668509">return</span>&nbsp;<span class="builtintype" id="2668516">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668525">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668533">return</span>&nbsp;<span class="builtintype" id="2668540">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668546">case</span>&nbsp;<span class="ident" id="2668551">Func</span><span class="op" id="2668555">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668559">if</span>&nbsp;<span class="ident" id="2668562">v1</span><span class="op" id="2668564">.</span><span class="ident" id="2668565">IsNil</span><span class="op" id="2668570">(</span><span class="op" id="2668571">)</span>&nbsp;<span class="op" id="2668573">&amp;&amp;</span>&nbsp;<span class="ident" id="2668576">v2</span><span class="op" id="2668578">.</span><span class="ident" id="2668579">IsNil</span><span class="op" id="2668584">(</span><span class="op" id="2668585">)</span>&nbsp;<span class="op" id="2668587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668592">return</span>&nbsp;<span class="builtintype" id="2668599">true</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2668610">//&nbsp;Can&#39;t&nbsp;do&nbsp;better&nbsp;than&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668642">return</span>&nbsp;<span class="builtintype" id="2668649">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668656">default</span><span class="op" id="2668663">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2668667">//&nbsp;Normal&nbsp;equality&nbsp;suffices</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2668697">return</span>&nbsp;<span class="ident" id="2668704">valueInterface</span><span class="op" id="2668718">(</span><span class="ident" id="2668719">v1</span><span class="op" id="2668721">,</span>&nbsp;<span class="builtintype" id="2668723">false</span><span class="op" id="2668728">)</span>&nbsp;<span class="op" id="2668730">==</span>&nbsp;<span class="ident" id="2668733">valueInterface</span><span class="op" id="2668747">(</span><span class="ident" id="2668748">v2</span><span class="op" id="2668750">,</span>&nbsp;<span class="builtintype" id="2668752">false</span><span class="op" id="2668757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2668760">}</span><br>
<span class="lineno"></span><span class="op" id="2668762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2668765">//&nbsp;DeepEqual&nbsp;tests&nbsp;for&nbsp;deep&nbsp;equality.&nbsp;It&nbsp;uses&nbsp;normal&nbsp;==&nbsp;equality&nbsp;where</span><br>
<span class="lineno">130</span><span class="comment" id="2668836">//&nbsp;possible&nbsp;but&nbsp;will&nbsp;scan&nbsp;elements&nbsp;of&nbsp;arrays,&nbsp;slices,&nbsp;maps,&nbsp;and&nbsp;fields&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2668910">//&nbsp;structs.&nbsp;In&nbsp;maps,&nbsp;keys&nbsp;are&nbsp;compared&nbsp;with&nbsp;==&nbsp;but&nbsp;elements&nbsp;use&nbsp;deep</span><br>
<span class="lineno"></span><span class="comment" id="2668979">//&nbsp;equality.&nbsp;DeepEqual&nbsp;correctly&nbsp;handles&nbsp;recursive&nbsp;types.&nbsp;Functions&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><span class="comment" id="2669057">//&nbsp;only&nbsp;if&nbsp;they&nbsp;are&nbsp;both&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="2669087">//&nbsp;An&nbsp;empty&nbsp;slice&nbsp;is&nbsp;not&nbsp;equal&nbsp;to&nbsp;a&nbsp;nil&nbsp;slice.</span><br>
<span class="lineno">135</span><span class="keyword" id="2669134">func</span>&nbsp;<span class="ident" id="2669139">DeepEqual</span><span class="op" id="2669148">(</span><span class="ident" id="2669149">a1</span><span class="op" id="2669151">,</span>&nbsp;<span class="ident" id="2669153">a2</span>&nbsp;<span class="keyword" id="2669156">interface</span><span class="op" id="2669165">{</span><span class="op" id="2669166">}</span><span class="op" id="2669167">)</span>&nbsp;<span class="builtintype" id="2669169">bool</span>&nbsp;<span class="op" id="2669174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2669177">if</span>&nbsp;<span class="ident" id="2669180">a1</span>&nbsp;<span class="op" id="2669183">==</span>&nbsp;<span class="builtintype" id="2669186">nil</span>&nbsp;<span class="op" id="2669190">||</span>&nbsp;<span class="ident" id="2669193">a2</span>&nbsp;<span class="op" id="2669196">==</span>&nbsp;<span class="builtintype" id="2669199">nil</span>&nbsp;<span class="op" id="2669203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2669207">return</span>&nbsp;<span class="ident" id="2669214">a1</span>&nbsp;<span class="op" id="2669217">==</span>&nbsp;<span class="ident" id="2669220">a2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2669224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2669227">v1</span>&nbsp;<span class="op" id="2669230">:=</span>&nbsp;<span class="ident" id="2669233">ValueOf</span><span class="op" id="2669240">(</span><span class="ident" id="2669241">a1</span><span class="op" id="2669243">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2669246">v2</span>&nbsp;<span class="op" id="2669249">:=</span>&nbsp;<span class="ident" id="2669252">ValueOf</span><span class="op" id="2669259">(</span><span class="ident" id="2669260">a2</span><span class="op" id="2669262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2669265">if</span>&nbsp;<span class="ident" id="2669268">v1</span><span class="op" id="2669270">.</span><span class="ident" id="2669271">Type</span><span class="op" id="2669275">(</span><span class="op" id="2669276">)</span>&nbsp;<span class="op" id="2669278">!=</span>&nbsp;<span class="ident" id="2669281">v2</span><span class="op" id="2669283">.</span><span class="ident" id="2669284">Type</span><span class="op" id="2669288">(</span><span class="op" id="2669289">)</span>&nbsp;<span class="op" id="2669291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2669295">return</span>&nbsp;<span class="builtintype" id="2669302">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2669309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2669312">return</span>&nbsp;<span class="ident" id="2669319">deepValueEqual</span><span class="op" id="2669333">(</span><span class="ident" id="2669334">v1</span><span class="op" id="2669336">,</span>&nbsp;<span class="ident" id="2669338">v2</span><span class="op" id="2669340">,</span>&nbsp;<span class="builtinfunc" id="2669342">make</span><span class="op" id="2669346">(</span><span class="keyword" id="2669347">map</span><span class="op" id="2669350">[</span><span class="ident" id="2669351">visit</span><span class="op" id="2669356">]</span><span class="builtintype" id="2669357">bool</span><span class="op" id="2669361">)</span><span class="op" id="2669362">,</span>&nbsp;<span class="num" id="2669364">0</span><span class="op" id="2669365">)</span><br>
<span class="lineno">145</span><span class="op" id="2669367">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
