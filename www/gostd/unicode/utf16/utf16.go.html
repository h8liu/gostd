<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>unicode/utf16</h2>
<ul>
<li><a href="/gostd/unicode/utf16/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/unicode/utf16/utf16.go.html" class="current">utf16.go</a></li>
<li><a href="/gostd/unicode/utf16/utf16_test.go.html">utf16_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4061091">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4061147">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4061201">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4061252">//&nbsp;Package&nbsp;utf16&nbsp;implements&nbsp;encoding&nbsp;and&nbsp;decoding&nbsp;of&nbsp;UTF-16&nbsp;sequences.</span><br>
<span class="lineno"></span><span class="keyword" id="4061323">package</span>&nbsp;<span class="ident" id="4061331">utf16</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4061338">//&nbsp;The&nbsp;conditions&nbsp;replacementChar==unicode.ReplacementChar&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4061401">//&nbsp;maxRune==unicode.MaxRune&nbsp;are&nbsp;verified&nbsp;in&nbsp;the&nbsp;tests.</span><br>
<span class="lineno">10</span><span class="comment" id="4061456">//&nbsp;Defining&nbsp;them&nbsp;locally&nbsp;avoids&nbsp;this&nbsp;package&nbsp;depending&nbsp;on&nbsp;package&nbsp;unicode.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4061532">const</span>&nbsp;<span class="op" id="4061538">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4061541">replacementChar</span>&nbsp;<span class="op" id="4061557">=</span>&nbsp;<span class="string" id="4061559">&#39;\uFFFD&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4061572">//&nbsp;Unicode&nbsp;replacement&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4061606">maxRune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4061622">=</span>&nbsp;<span class="string" id="4061624">&#39;\U0010FFFF&#39;</span>&nbsp;<span class="comment" id="4061637">//&nbsp;Maximum&nbsp;valid&nbsp;Unicode&nbsp;code&nbsp;point.</span><br>
<span class="lineno">15</span><span class="op" id="4061674">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4061677">const</span>&nbsp;<span class="op" id="4061683">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4061686">//&nbsp;0xd800-0xdc00&nbsp;encodes&nbsp;the&nbsp;high&nbsp;10&nbsp;bits&nbsp;of&nbsp;a&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4061740">//&nbsp;0xdc00-0xe000&nbsp;encodes&nbsp;the&nbsp;low&nbsp;10&nbsp;bits&nbsp;of&nbsp;a&nbsp;pair.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4061793">//&nbsp;the&nbsp;value&nbsp;is&nbsp;those&nbsp;20&nbsp;bits&nbsp;plus&nbsp;0x10000.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4061838">surr1</span>&nbsp;<span class="op" id="4061844">=</span>&nbsp;<span class="num" id="4061846">0xd800</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4061854">surr2</span>&nbsp;<span class="op" id="4061860">=</span>&nbsp;<span class="num" id="4061862">0xdc00</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4061870">surr3</span>&nbsp;<span class="op" id="4061876">=</span>&nbsp;<span class="num" id="4061878">0xe000</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4061887">surrSelf</span>&nbsp;<span class="op" id="4061896">=</span>&nbsp;<span class="num" id="4061898">0x10000</span><br>
<span class="lineno"></span><span class="op" id="4061906">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4061909">//&nbsp;IsSurrogate&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;specified&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno"></span><span class="comment" id="4061973">//&nbsp;can&nbsp;appear&nbsp;in&nbsp;a&nbsp;surrogate&nbsp;pair.</span><br>
<span class="lineno">30</span><span class="keyword" id="4062008">func</span>&nbsp;<span class="ident" id="4062013">IsSurrogate</span><span class="op" id="4062024">(</span><span class="ident" id="4062025">r</span>&nbsp;<span class="builtintype" id="4062027">rune</span><span class="op" id="4062031">)</span>&nbsp;<span class="builtintype" id="4062033">bool</span>&nbsp;<span class="op" id="4062038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062041">return</span>&nbsp;<span class="ident" id="4062048"><a href="/gostd/unicode/utf16/utf16.go.html#4061838">surr1</a></span>&nbsp;<span class="op" id="4062054">&lt;=</span>&nbsp;<span class="ident" id="4062057"><a href="/gostd/unicode/utf16/utf16.go.html#4062025">r</a></span>&nbsp;<span class="op" id="4062059">&amp;&amp;</span>&nbsp;<span class="ident" id="4062062"><a href="/gostd/unicode/utf16/utf16.go.html#4062025">r</a></span>&nbsp;<span class="op" id="4062064">&lt;</span>&nbsp;<span class="ident" id="4062066"><a href="/gostd/unicode/utf16/utf16.go.html#4061870">surr3</a></span><br>
<span class="lineno"></span><span class="op" id="4062072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4062075">//&nbsp;DecodeRune&nbsp;returns&nbsp;the&nbsp;UTF-16&nbsp;decoding&nbsp;of&nbsp;a&nbsp;surrogate&nbsp;pair.</span><br>
<span class="lineno">35</span><span class="comment" id="4062138">//&nbsp;If&nbsp;the&nbsp;pair&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;UTF-16&nbsp;surrogate&nbsp;pair,&nbsp;DecodeRune&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="4062210">//&nbsp;the&nbsp;Unicode&nbsp;replacement&nbsp;code&nbsp;point&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="keyword" id="4062256">func</span>&nbsp;<span class="ident" id="4062261">DecodeRune</span><span class="op" id="4062271">(</span><span class="ident" id="4062272">r1</span><span class="op" id="4062274">,</span>&nbsp;<span class="ident" id="4062276">r2</span>&nbsp;<span class="builtintype" id="4062279">rune</span><span class="op" id="4062283">)</span>&nbsp;<span class="builtintype" id="4062285">rune</span>&nbsp;<span class="op" id="4062290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062293">if</span>&nbsp;<span class="ident" id="4062296"><a href="/gostd/unicode/utf16/utf16.go.html#4061838">surr1</a></span>&nbsp;<span class="op" id="4062302">&lt;=</span>&nbsp;<span class="ident" id="4062305"><a href="/gostd/unicode/utf16/utf16.go.html#4062272">r1</a></span>&nbsp;<span class="op" id="4062308">&amp;&amp;</span>&nbsp;<span class="ident" id="4062311"><a href="/gostd/unicode/utf16/utf16.go.html#4062272">r1</a></span>&nbsp;<span class="op" id="4062314">&lt;</span>&nbsp;<span class="ident" id="4062316"><a href="/gostd/unicode/utf16/utf16.go.html#4061854">surr2</a></span>&nbsp;<span class="op" id="4062322">&amp;&amp;</span>&nbsp;<span class="ident" id="4062325"><a href="/gostd/unicode/utf16/utf16.go.html#4061854">surr2</a></span>&nbsp;<span class="op" id="4062331">&lt;=</span>&nbsp;<span class="ident" id="4062334"><a href="/gostd/unicode/utf16/utf16.go.html#4062276">r2</a></span>&nbsp;<span class="op" id="4062337">&amp;&amp;</span>&nbsp;<span class="ident" id="4062340"><a href="/gostd/unicode/utf16/utf16.go.html#4062276">r2</a></span>&nbsp;<span class="op" id="4062343">&lt;</span>&nbsp;<span class="ident" id="4062345"><a href="/gostd/unicode/utf16/utf16.go.html#4061870">surr3</a></span>&nbsp;<span class="op" id="4062351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062355">return</span>&nbsp;<span class="op" id="4062362">(</span><span class="ident" id="4062363"><a href="/gostd/unicode/utf16/utf16.go.html#4062272">r1</a></span><span class="op" id="4062365">-</span><span class="ident" id="4062366"><a href="/gostd/unicode/utf16/utf16.go.html#4061838">surr1</a></span><span class="op" id="4062371">)</span><span class="op" id="4062372">&lt;&lt;</span><span class="num" id="4062374">10</span>&nbsp;<span class="op" id="4062377">|</span>&nbsp;<span class="op" id="4062379">(</span><span class="ident" id="4062380"><a href="/gostd/unicode/utf16/utf16.go.html#4062276">r2</a></span>&nbsp;<span class="op" id="4062383">-</span>&nbsp;<span class="ident" id="4062385"><a href="/gostd/unicode/utf16/utf16.go.html#4061854">surr2</a></span><span class="op" id="4062390">)</span>&nbsp;<span class="op" id="4062392">+</span>&nbsp;<span class="num" id="4062394">0x10000</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4062403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062406">return</span>&nbsp;<span class="ident" id="4062413"><a href="/gostd/unicode/utf16/utf16.go.html#4061541">replacementChar</a></span><br>
<span class="lineno"></span><span class="op" id="4062429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4062432">//&nbsp;EncodeRune&nbsp;returns&nbsp;the&nbsp;UTF-16&nbsp;surrogate&nbsp;pair&nbsp;r1,&nbsp;r2&nbsp;for&nbsp;the&nbsp;given&nbsp;rune.</span><br>
<span class="lineno">45</span><span class="comment" id="4062507">//&nbsp;If&nbsp;the&nbsp;rune&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;or&nbsp;does&nbsp;not&nbsp;need&nbsp;encoding,</span><br>
<span class="lineno"></span><span class="comment" id="4062583">//&nbsp;EncodeRune&nbsp;returns&nbsp;U+FFFD,&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="keyword" id="4062621">func</span>&nbsp;<span class="ident" id="4062626">EncodeRune</span><span class="op" id="4062636">(</span><span class="ident" id="4062637">r</span>&nbsp;<span class="builtintype" id="4062639">rune</span><span class="op" id="4062643">)</span>&nbsp;<span class="op" id="4062645">(</span><span class="ident" id="4062646">r1</span><span class="op" id="4062648">,</span>&nbsp;<span class="ident" id="4062650">r2</span>&nbsp;<span class="builtintype" id="4062653">rune</span><span class="op" id="4062657">)</span>&nbsp;<span class="op" id="4062659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062662">if</span>&nbsp;<span class="ident" id="4062665"><a href="/gostd/unicode/utf16/utf16.go.html#4062637">r</a></span>&nbsp;<span class="op" id="4062667">&lt;</span>&nbsp;<span class="ident" id="4062669"><a href="/gostd/unicode/utf16/utf16.go.html#4061887">surrSelf</a></span>&nbsp;<span class="op" id="4062678">||</span>&nbsp;<span class="ident" id="4062681"><a href="/gostd/unicode/utf16/utf16.go.html#4062637">r</a></span>&nbsp;<span class="op" id="4062683">&gt;</span>&nbsp;<span class="ident" id="4062685"><a href="/gostd/unicode/utf16/utf16.go.html#4061606">maxRune</a></span>&nbsp;<span class="op" id="4062693">||</span>&nbsp;<span class="ident" id="4062696"><a href="/gostd/unicode/utf16/utf16.go.html#4062013">IsSurrogate</a></span><span class="op" id="4062707">(</span><span class="ident" id="4062708"><a href="/gostd/unicode/utf16/utf16.go.html#4062637">r</a></span><span class="op" id="4062709">)</span>&nbsp;<span class="op" id="4062711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062715">return</span>&nbsp;<span class="ident" id="4062722"><a href="/gostd/unicode/utf16/utf16.go.html#4061541">replacementChar</a></span><span class="op" id="4062737">,</span>&nbsp;<span class="ident" id="4062739"><a href="/gostd/unicode/utf16/utf16.go.html#4061541">replacementChar</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4062756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4062759"><a href="/gostd/unicode/utf16/utf16.go.html#4062637">r</a></span>&nbsp;<span class="op" id="4062761">-=</span>&nbsp;<span class="ident" id="4062764"><a href="/gostd/unicode/utf16/utf16.go.html#4061887">surrSelf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062774">return</span>&nbsp;<span class="ident" id="4062781"><a href="/gostd/unicode/utf16/utf16.go.html#4061838">surr1</a></span>&nbsp;<span class="op" id="4062787">+</span>&nbsp;<span class="op" id="4062789">(</span><span class="ident" id="4062790"><a href="/gostd/unicode/utf16/utf16.go.html#4062637">r</a></span><span class="op" id="4062791">&gt;&gt;</span><span class="num" id="4062793">10</span><span class="op" id="4062795">)</span><span class="op" id="4062796">&amp;</span><span class="num" id="4062797">0x3ff</span><span class="op" id="4062802">,</span>&nbsp;<span class="ident" id="4062804"><a href="/gostd/unicode/utf16/utf16.go.html#4061854">surr2</a></span>&nbsp;<span class="op" id="4062810">+</span>&nbsp;<span class="ident" id="4062812"><a href="/gostd/unicode/utf16/utf16.go.html#4062637">r</a></span><span class="op" id="4062813">&amp;</span><span class="num" id="4062814">0x3ff</span><br>
<span class="lineno"></span><span class="op" id="4062820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="4062823">//&nbsp;Encode&nbsp;returns&nbsp;the&nbsp;UTF-16&nbsp;encoding&nbsp;of&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;sequence&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4062899">func</span>&nbsp;<span class="ident" id="4062904">Encode</span><span class="op" id="4062910">(</span><span class="ident" id="4062911">s</span>&nbsp;<span class="op" id="4062913">[</span><span class="op" id="4062914">]</span><span class="builtintype" id="4062915">rune</span><span class="op" id="4062919">)</span>&nbsp;<span class="op" id="4062921">[</span><span class="op" id="4062922">]</span><span class="builtintype" id="4062923">uint16</span>&nbsp;<span class="op" id="4062930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4062933">n</span>&nbsp;<span class="op" id="4062935">:=</span>&nbsp;<span class="builtinfunc" id="4062938">len</span><span class="op" id="4062941">(</span><span class="ident" id="4062942"><a href="/gostd/unicode/utf16/utf16.go.html#4062911">s</a></span><span class="op" id="4062943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062946">for</span>&nbsp;<span class="ident" id="4062950">_</span><span class="op" id="4062951">,</span>&nbsp;<span class="ident" id="4062953">v</span>&nbsp;<span class="op" id="4062955">:=</span>&nbsp;<span class="keyword" id="4062958">range</span>&nbsp;<span class="ident" id="4062964"><a href="/gostd/unicode/utf16/utf16.go.html#4062911">s</a></span>&nbsp;<span class="op" id="4062966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4062970">if</span>&nbsp;<span class="ident" id="4062973"><a href="/gostd/unicode/utf16/utf16.go.html#4062953">v</a></span>&nbsp;<span class="op" id="4062975">&gt;=</span>&nbsp;<span class="ident" id="4062978"><a href="/gostd/unicode/utf16/utf16.go.html#4061887">surrSelf</a></span>&nbsp;<span class="op" id="4062987">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4062992"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span><span class="op" id="4062993">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4062998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4063001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063005">a</span>&nbsp;<span class="op" id="4063007">:=</span>&nbsp;<span class="builtinfunc" id="4063010">make</span><span class="op" id="4063014">(</span><span class="op" id="4063015">[</span><span class="op" id="4063016">]</span><span class="builtintype" id="4063017">uint16</span><span class="op" id="4063023">,</span>&nbsp;<span class="ident" id="4063025"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span><span class="op" id="4063026">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063029"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span>&nbsp;<span class="op" id="4063031">=</span>&nbsp;<span class="num" id="4063033">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063036">for</span>&nbsp;<span class="ident" id="4063040">_</span><span class="op" id="4063041">,</span>&nbsp;<span class="ident" id="4063043">v</span>&nbsp;<span class="op" id="4063045">:=</span>&nbsp;<span class="keyword" id="4063048">range</span>&nbsp;<span class="ident" id="4063054"><a href="/gostd/unicode/utf16/utf16.go.html#4062911">s</a></span>&nbsp;<span class="op" id="4063056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063060">switch</span>&nbsp;<span class="op" id="4063067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063071">case</span>&nbsp;<span class="ident" id="4063076"><a href="/gostd/unicode/utf16/utf16.go.html#4063043">v</a></span>&nbsp;<span class="op" id="4063078">&lt;</span>&nbsp;<span class="num" id="4063080">0</span><span class="op" id="4063081">,</span>&nbsp;<span class="ident" id="4063083"><a href="/gostd/unicode/utf16/utf16.go.html#4061838">surr1</a></span>&nbsp;<span class="op" id="4063089">&lt;=</span>&nbsp;<span class="ident" id="4063092"><a href="/gostd/unicode/utf16/utf16.go.html#4063043">v</a></span>&nbsp;<span class="op" id="4063094">&amp;&amp;</span>&nbsp;<span class="ident" id="4063097"><a href="/gostd/unicode/utf16/utf16.go.html#4063043">v</a></span>&nbsp;<span class="op" id="4063099">&lt;</span>&nbsp;<span class="ident" id="4063101"><a href="/gostd/unicode/utf16/utf16.go.html#4061870">surr3</a></span><span class="op" id="4063106">,</span>&nbsp;<span class="ident" id="4063108"><a href="/gostd/unicode/utf16/utf16.go.html#4063043">v</a></span>&nbsp;<span class="op" id="4063110">&gt;</span>&nbsp;<span class="ident" id="4063112"><a href="/gostd/unicode/utf16/utf16.go.html#4061606">maxRune</a></span><span class="op" id="4063119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063124"><a href="/gostd/unicode/utf16/utf16.go.html#4063043">v</a></span>&nbsp;<span class="op" id="4063126">=</span>&nbsp;<span class="ident" id="4063128"><a href="/gostd/unicode/utf16/utf16.go.html#4061541">replacementChar</a></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063147">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063161">case</span>&nbsp;<span class="ident" id="4063166"><a href="/gostd/unicode/utf16/utf16.go.html#4063043">v</a></span>&nbsp;<span class="op" id="4063168">&lt;</span>&nbsp;<span class="ident" id="4063170"><a href="/gostd/unicode/utf16/utf16.go.html#4061887">surrSelf</a></span><span class="op" id="4063178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063183"><a href="/gostd/unicode/utf16/utf16.go.html#4063005">a</a></span><span class="op" id="4063184">[</span><span class="ident" id="4063185"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span><span class="op" id="4063186">]</span>&nbsp;<span class="op" id="4063188">=</span>&nbsp;<span class="builtintype" id="4063190">uint16</span><span class="op" id="4063196">(</span><span class="ident" id="4063197"><a href="/gostd/unicode/utf16/utf16.go.html#4063043">v</a></span><span class="op" id="4063198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063203"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span><span class="op" id="4063204">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063209">default</span><span class="op" id="4063216">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063221">r1</span><span class="op" id="4063223">,</span>&nbsp;<span class="ident" id="4063225">r2</span>&nbsp;<span class="op" id="4063228">:=</span>&nbsp;<span class="ident" id="4063231"><a href="/gostd/unicode/utf16/utf16.go.html#4062626">EncodeRune</a></span><span class="op" id="4063241">(</span><span class="ident" id="4063242"><a href="/gostd/unicode/utf16/utf16.go.html#4063043">v</a></span><span class="op" id="4063243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063248"><a href="/gostd/unicode/utf16/utf16.go.html#4063005">a</a></span><span class="op" id="4063249">[</span><span class="ident" id="4063250"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span><span class="op" id="4063251">]</span>&nbsp;<span class="op" id="4063253">=</span>&nbsp;<span class="builtintype" id="4063255">uint16</span><span class="op" id="4063261">(</span><span class="ident" id="4063262"><a href="/gostd/unicode/utf16/utf16.go.html#4063221">r1</a></span><span class="op" id="4063264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063269"><a href="/gostd/unicode/utf16/utf16.go.html#4063005">a</a></span><span class="op" id="4063270">[</span><span class="ident" id="4063271"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span><span class="op" id="4063272">+</span><span class="num" id="4063273">1</span><span class="op" id="4063274">]</span>&nbsp;<span class="op" id="4063276">=</span>&nbsp;<span class="builtintype" id="4063278">uint16</span><span class="op" id="4063284">(</span><span class="ident" id="4063285"><a href="/gostd/unicode/utf16/utf16.go.html#4063225">r2</a></span><span class="op" id="4063287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063292"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span>&nbsp;<span class="op" id="4063294">+=</span>&nbsp;<span class="num" id="4063297">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4063301">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4063304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063307">return</span>&nbsp;<span class="ident" id="4063314"><a href="/gostd/unicode/utf16/utf16.go.html#4063005">a</a></span><span class="op" id="4063315">[</span><span class="num" id="4063316">0</span><span class="op" id="4063317">:</span><span class="ident" id="4063318"><a href="/gostd/unicode/utf16/utf16.go.html#4062933">n</a></span><span class="op" id="4063319">]</span><br>
<span class="lineno"></span><span class="op" id="4063321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4063324">//&nbsp;Decode&nbsp;returns&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;sequence&nbsp;represented</span><br>
<span class="lineno">85</span><span class="comment" id="4063386">//&nbsp;by&nbsp;the&nbsp;UTF-16&nbsp;encoding&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4063415">func</span>&nbsp;<span class="ident" id="4063420">Decode</span><span class="op" id="4063426">(</span><span class="ident" id="4063427">s</span>&nbsp;<span class="op" id="4063429">[</span><span class="op" id="4063430">]</span><span class="builtintype" id="4063431">uint16</span><span class="op" id="4063437">)</span>&nbsp;<span class="op" id="4063439">[</span><span class="op" id="4063440">]</span><span class="builtintype" id="4063441">rune</span>&nbsp;<span class="op" id="4063446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063449">a</span>&nbsp;<span class="op" id="4063451">:=</span>&nbsp;<span class="builtinfunc" id="4063454">make</span><span class="op" id="4063458">(</span><span class="op" id="4063459">[</span><span class="op" id="4063460">]</span><span class="builtintype" id="4063461">rune</span><span class="op" id="4063465">,</span>&nbsp;<span class="builtinfunc" id="4063467">len</span><span class="op" id="4063470">(</span><span class="ident" id="4063471"><a href="/gostd/unicode/utf16/utf16.go.html#4063427">s</a></span><span class="op" id="4063472">)</span><span class="op" id="4063473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063476">n</span>&nbsp;<span class="op" id="4063478">:=</span>&nbsp;<span class="num" id="4063481">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063484">for</span>&nbsp;<span class="ident" id="4063488">i</span>&nbsp;<span class="op" id="4063490">:=</span>&nbsp;<span class="num" id="4063493">0</span><span class="op" id="4063494">;</span>&nbsp;<span class="ident" id="4063496"><a href="/gostd/unicode/utf16/utf16.go.html#4063488">i</a></span>&nbsp;<span class="op" id="4063498">&lt;</span>&nbsp;<span class="builtinfunc" id="4063500">len</span><span class="op" id="4063503">(</span><span class="ident" id="4063504"><a href="/gostd/unicode/utf16/utf16.go.html#4063427">s</a></span><span class="op" id="4063505">)</span><span class="op" id="4063506">;</span>&nbsp;<span class="ident" id="4063508"><a href="/gostd/unicode/utf16/utf16.go.html#4063488">i</a></span><span class="op" id="4063509">++</span>&nbsp;<span class="op" id="4063512">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063516">switch</span>&nbsp;<span class="ident" id="4063523">r</span>&nbsp;<span class="op" id="4063525">:=</span>&nbsp;<span class="ident" id="4063528"><a href="/gostd/unicode/utf16/utf16.go.html#4063427">s</a></span><span class="op" id="4063529">[</span><span class="ident" id="4063530"><a href="/gostd/unicode/utf16/utf16.go.html#4063488">i</a></span><span class="op" id="4063531">]</span><span class="op" id="4063532">;</span>&nbsp;<span class="op" id="4063534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063538">case</span>&nbsp;<span class="ident" id="4063543"><a href="/gostd/unicode/utf16/utf16.go.html#4061838">surr1</a></span>&nbsp;<span class="op" id="4063549">&lt;=</span>&nbsp;<span class="ident" id="4063552"><a href="/gostd/unicode/utf16/utf16.go.html#4063523">r</a></span>&nbsp;<span class="op" id="4063554">&amp;&amp;</span>&nbsp;<span class="ident" id="4063557"><a href="/gostd/unicode/utf16/utf16.go.html#4063523">r</a></span>&nbsp;<span class="op" id="4063559">&lt;</span>&nbsp;<span class="ident" id="4063561"><a href="/gostd/unicode/utf16/utf16.go.html#4061854">surr2</a></span>&nbsp;<span class="op" id="4063567">&amp;&amp;</span>&nbsp;<span class="ident" id="4063570"><a href="/gostd/unicode/utf16/utf16.go.html#4063488">i</a></span><span class="op" id="4063571">+</span><span class="num" id="4063572">1</span>&nbsp;<span class="op" id="4063574">&lt;</span>&nbsp;<span class="builtinfunc" id="4063576">len</span><span class="op" id="4063579">(</span><span class="ident" id="4063580"><a href="/gostd/unicode/utf16/utf16.go.html#4063427">s</a></span><span class="op" id="4063581">)</span>&nbsp;<span class="op" id="4063583">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063589"><a href="/gostd/unicode/utf16/utf16.go.html#4061854">surr2</a></span>&nbsp;<span class="op" id="4063595">&lt;=</span>&nbsp;<span class="ident" id="4063598"><a href="/gostd/unicode/utf16/utf16.go.html#4063427">s</a></span><span class="op" id="4063599">[</span><span class="ident" id="4063600"><a href="/gostd/unicode/utf16/utf16.go.html#4063488">i</a></span><span class="op" id="4063601">+</span><span class="num" id="4063602">1</span><span class="op" id="4063603">]</span>&nbsp;<span class="op" id="4063605">&amp;&amp;</span>&nbsp;<span class="ident" id="4063608"><a href="/gostd/unicode/utf16/utf16.go.html#4063427">s</a></span><span class="op" id="4063609">[</span><span class="ident" id="4063610"><a href="/gostd/unicode/utf16/utf16.go.html#4063488">i</a></span><span class="op" id="4063611">+</span><span class="num" id="4063612">1</span><span class="op" id="4063613">]</span>&nbsp;<span class="op" id="4063615">&lt;</span>&nbsp;<span class="ident" id="4063617"><a href="/gostd/unicode/utf16/utf16.go.html#4061870">surr3</a></span><span class="op" id="4063622">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4063627">//&nbsp;valid&nbsp;surrogate&nbsp;sequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063658"><a href="/gostd/unicode/utf16/utf16.go.html#4063449">a</a></span><span class="op" id="4063659">[</span><span class="ident" id="4063660"><a href="/gostd/unicode/utf16/utf16.go.html#4063476">n</a></span><span class="op" id="4063661">]</span>&nbsp;<span class="op" id="4063663">=</span>&nbsp;<span class="ident" id="4063665"><a href="/gostd/unicode/utf16/utf16.go.html#4062261">DecodeRune</a></span><span class="op" id="4063675">(</span><span class="builtintype" id="4063676">rune</span><span class="op" id="4063680">(</span><span class="ident" id="4063681"><a href="/gostd/unicode/utf16/utf16.go.html#4063523">r</a></span><span class="op" id="4063682">)</span><span class="op" id="4063683">,</span>&nbsp;<span class="builtintype" id="4063685">rune</span><span class="op" id="4063689">(</span><span class="ident" id="4063690"><a href="/gostd/unicode/utf16/utf16.go.html#4063427">s</a></span><span class="op" id="4063691">[</span><span class="ident" id="4063692"><a href="/gostd/unicode/utf16/utf16.go.html#4063488">i</a></span><span class="op" id="4063693">+</span><span class="num" id="4063694">1</span><span class="op" id="4063695">]</span><span class="op" id="4063696">)</span><span class="op" id="4063697">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063702"><a href="/gostd/unicode/utf16/utf16.go.html#4063488">i</a></span><span class="op" id="4063703">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063709"><a href="/gostd/unicode/utf16/utf16.go.html#4063476">n</a></span><span class="op" id="4063710">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063715">case</span>&nbsp;<span class="ident" id="4063720"><a href="/gostd/unicode/utf16/utf16.go.html#4061838">surr1</a></span>&nbsp;<span class="op" id="4063726">&lt;=</span>&nbsp;<span class="ident" id="4063729"><a href="/gostd/unicode/utf16/utf16.go.html#4063523">r</a></span>&nbsp;<span class="op" id="4063731">&amp;&amp;</span>&nbsp;<span class="ident" id="4063734"><a href="/gostd/unicode/utf16/utf16.go.html#4063523">r</a></span>&nbsp;<span class="op" id="4063736">&lt;</span>&nbsp;<span class="ident" id="4063738"><a href="/gostd/unicode/utf16/utf16.go.html#4061870">surr3</a></span><span class="op" id="4063743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4063748">//&nbsp;invalid&nbsp;surrogate&nbsp;sequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063781"><a href="/gostd/unicode/utf16/utf16.go.html#4063449">a</a></span><span class="op" id="4063782">[</span><span class="ident" id="4063783"><a href="/gostd/unicode/utf16/utf16.go.html#4063476">n</a></span><span class="op" id="4063784">]</span>&nbsp;<span class="op" id="4063786">=</span>&nbsp;<span class="ident" id="4063788"><a href="/gostd/unicode/utf16/utf16.go.html#4061541">replacementChar</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063807"><a href="/gostd/unicode/utf16/utf16.go.html#4063476">n</a></span><span class="op" id="4063808">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063813">default</span><span class="op" id="4063820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4063825">//&nbsp;normal&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063843"><a href="/gostd/unicode/utf16/utf16.go.html#4063449">a</a></span><span class="op" id="4063844">[</span><span class="ident" id="4063845"><a href="/gostd/unicode/utf16/utf16.go.html#4063476">n</a></span><span class="op" id="4063846">]</span>&nbsp;<span class="op" id="4063848">=</span>&nbsp;<span class="builtintype" id="4063850">rune</span><span class="op" id="4063854">(</span><span class="ident" id="4063855"><a href="/gostd/unicode/utf16/utf16.go.html#4063523">r</a></span><span class="op" id="4063856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4063861"><a href="/gostd/unicode/utf16/utf16.go.html#4063476">n</a></span><span class="op" id="4063862">++</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4063867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4063870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4063873">return</span>&nbsp;<span class="ident" id="4063880"><a href="/gostd/unicode/utf16/utf16.go.html#4063449">a</a></span><span class="op" id="4063881">[</span><span class="num" id="4063882">0</span><span class="op" id="4063883">:</span><span class="ident" id="4063884"><a href="/gostd/unicode/utf16/utf16.go.html#4063476">n</a></span><span class="op" id="4063885">]</span><br>
<span class="lineno"></span><span class="op" id="4063887">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
