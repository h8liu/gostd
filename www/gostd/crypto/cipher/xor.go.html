<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3927270">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3927325">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3927379">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3927430">package</span>&nbsp;<span class="ident" id="3927438">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3927446">import</span>&nbsp;<span class="op" id="3927453">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3927456">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3927467">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3927476">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3927479">const</span>&nbsp;<span class="ident" id="3927485">wordSize</span>&nbsp;<span class="op" id="3927494">=</span>&nbsp;<span class="builtintype" id="3927496">int</span><span class="op" id="3927499">(</span><span class="ident" id="3927500">unsafe</span><span class="op" id="3927506">.</span><span class="ident" id="3927507">Sizeof</span><span class="op" id="3927513">(</span><span class="builtintype" id="3927514">uintptr</span><span class="op" id="3927521">(</span><span class="num" id="3927522">0</span><span class="op" id="3927523">)</span><span class="op" id="3927524">)</span><span class="op" id="3927525">)</span><br>
<span class="lineno"></span><span class="keyword" id="3927527">const</span>&nbsp;<span class="ident" id="3927533">supportsUnaligned</span>&nbsp;<span class="op" id="3927551">=</span>&nbsp;<span class="ident" id="3927553">runtime</span><span class="op" id="3927560">.</span><span class="ident" id="3927561">GOARCH</span>&nbsp;<span class="op" id="3927568">==</span>&nbsp;<span class="string" id="3927571">&#34;386&#34;</span>&nbsp;<span class="op" id="3927577">||</span>&nbsp;<span class="ident" id="3927580">runtime</span><span class="op" id="3927587">.</span><span class="ident" id="3927588">GOARCH</span>&nbsp;<span class="op" id="3927595">==</span>&nbsp;<span class="string" id="3927598">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3927607">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3927673">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3927707">func</span>&nbsp;<span class="ident" id="3927712">fastXORBytes</span><span class="op" id="3927724">(</span><span class="ident" id="3927725">dst</span><span class="op" id="3927728">,</span>&nbsp;<span class="ident" id="3927730">a</span><span class="op" id="3927731">,</span>&nbsp;<span class="ident" id="3927733">b</span>&nbsp;<span class="op" id="3927735">[</span><span class="op" id="3927736">]</span><span class="builtintype" id="3927737">byte</span><span class="op" id="3927741">)</span>&nbsp;<span class="builtintype" id="3927743">int</span>&nbsp;<span class="op" id="3927747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3927750">n</span>&nbsp;<span class="op" id="3927752">:=</span>&nbsp;<span class="builtinfunc" id="3927755">len</span><span class="op" id="3927758">(</span><span class="ident" id="3927759">a</span><span class="op" id="3927760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3927763">if</span>&nbsp;<span class="builtinfunc" id="3927766">len</span><span class="op" id="3927769">(</span><span class="ident" id="3927770">b</span><span class="op" id="3927771">)</span>&nbsp;<span class="op" id="3927773">&lt;</span>&nbsp;<span class="ident" id="3927775">n</span>&nbsp;<span class="op" id="3927777">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3927781">n</span>&nbsp;<span class="op" id="3927783">=</span>&nbsp;<span class="builtinfunc" id="3927785">len</span><span class="op" id="3927788">(</span><span class="ident" id="3927789">b</span><span class="op" id="3927790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3927793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3927797">w</span>&nbsp;<span class="op" id="3927799">:=</span>&nbsp;<span class="ident" id="3927802">n</span>&nbsp;<span class="op" id="3927804">/</span>&nbsp;<span class="ident" id="3927806">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3927816">if</span>&nbsp;<span class="ident" id="3927819">w</span>&nbsp;<span class="op" id="3927821">&gt;</span>&nbsp;<span class="num" id="3927823">0</span>&nbsp;<span class="op" id="3927825">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3927829">dw</span>&nbsp;<span class="op" id="3927832">:=</span>&nbsp;<span class="op" id="3927835">*</span><span class="op" id="3927836">(</span><span class="op" id="3927837">*</span><span class="op" id="3927838">[</span><span class="op" id="3927839">]</span><span class="builtintype" id="3927840">uintptr</span><span class="op" id="3927847">)</span><span class="op" id="3927848">(</span><span class="ident" id="3927849">unsafe</span><span class="op" id="3927855">.</span><span class="ident" id="3927856">Pointer</span><span class="op" id="3927863">(</span><span class="op" id="3927864">&amp;</span><span class="ident" id="3927865">dst</span><span class="op" id="3927868">)</span><span class="op" id="3927869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3927873">aw</span>&nbsp;<span class="op" id="3927876">:=</span>&nbsp;<span class="op" id="3927879">*</span><span class="op" id="3927880">(</span><span class="op" id="3927881">*</span><span class="op" id="3927882">[</span><span class="op" id="3927883">]</span><span class="builtintype" id="3927884">uintptr</span><span class="op" id="3927891">)</span><span class="op" id="3927892">(</span><span class="ident" id="3927893">unsafe</span><span class="op" id="3927899">.</span><span class="ident" id="3927900">Pointer</span><span class="op" id="3927907">(</span><span class="op" id="3927908">&amp;</span><span class="ident" id="3927909">a</span><span class="op" id="3927910">)</span><span class="op" id="3927911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3927915">bw</span>&nbsp;<span class="op" id="3927918">:=</span>&nbsp;<span class="op" id="3927921">*</span><span class="op" id="3927922">(</span><span class="op" id="3927923">*</span><span class="op" id="3927924">[</span><span class="op" id="3927925">]</span><span class="builtintype" id="3927926">uintptr</span><span class="op" id="3927933">)</span><span class="op" id="3927934">(</span><span class="ident" id="3927935">unsafe</span><span class="op" id="3927941">.</span><span class="ident" id="3927942">Pointer</span><span class="op" id="3927949">(</span><span class="op" id="3927950">&amp;</span><span class="ident" id="3927951">b</span><span class="op" id="3927952">)</span><span class="op" id="3927953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3927957">for</span>&nbsp;<span class="ident" id="3927961">i</span>&nbsp;<span class="op" id="3927963">:=</span>&nbsp;<span class="num" id="3927966">0</span><span class="op" id="3927967">;</span>&nbsp;<span class="ident" id="3927969">i</span>&nbsp;<span class="op" id="3927971">&lt;</span>&nbsp;<span class="ident" id="3927973">w</span><span class="op" id="3927974">;</span>&nbsp;<span class="ident" id="3927976">i</span><span class="op" id="3927977">++</span>&nbsp;<span class="op" id="3927980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3927985">dw</span><span class="op" id="3927987">[</span><span class="ident" id="3927988">i</span><span class="op" id="3927989">]</span>&nbsp;<span class="op" id="3927991">=</span>&nbsp;<span class="ident" id="3927993">aw</span><span class="op" id="3927995">[</span><span class="ident" id="3927996">i</span><span class="op" id="3927997">]</span>&nbsp;<span class="op" id="3927999">^</span>&nbsp;<span class="ident" id="3928001">bw</span><span class="op" id="3928003">[</span><span class="ident" id="3928004">i</span><span class="op" id="3928005">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3928009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3928012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3928016">for</span>&nbsp;<span class="ident" id="3928020">i</span>&nbsp;<span class="op" id="3928022">:=</span>&nbsp;<span class="op" id="3928025">(</span><span class="ident" id="3928026">n</span>&nbsp;<span class="op" id="3928028">-</span>&nbsp;<span class="ident" id="3928030">n</span><span class="op" id="3928031">%</span><span class="ident" id="3928032">wordSize</span><span class="op" id="3928040">)</span><span class="op" id="3928041">;</span>&nbsp;<span class="ident" id="3928043">i</span>&nbsp;<span class="op" id="3928045">&lt;</span>&nbsp;<span class="ident" id="3928047">n</span><span class="op" id="3928048">;</span>&nbsp;<span class="ident" id="3928050">i</span><span class="op" id="3928051">++</span>&nbsp;<span class="op" id="3928054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3928058">dst</span><span class="op" id="3928061">[</span><span class="ident" id="3928062">i</span><span class="op" id="3928063">]</span>&nbsp;<span class="op" id="3928065">=</span>&nbsp;<span class="ident" id="3928067">a</span><span class="op" id="3928068">[</span><span class="ident" id="3928069">i</span><span class="op" id="3928070">]</span>&nbsp;<span class="op" id="3928072">^</span>&nbsp;<span class="ident" id="3928074">b</span><span class="op" id="3928075">[</span><span class="ident" id="3928076">i</span><span class="op" id="3928077">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3928080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3928084">return</span>&nbsp;<span class="ident" id="3928091">n</span><br>
<span class="lineno"></span><span class="op" id="3928093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3928096">func</span>&nbsp;<span class="ident" id="3928101">safeXORBytes</span><span class="op" id="3928113">(</span><span class="ident" id="3928114">dst</span><span class="op" id="3928117">,</span>&nbsp;<span class="ident" id="3928119">a</span><span class="op" id="3928120">,</span>&nbsp;<span class="ident" id="3928122">b</span>&nbsp;<span class="op" id="3928124">[</span><span class="op" id="3928125">]</span><span class="builtintype" id="3928126">byte</span><span class="op" id="3928130">)</span>&nbsp;<span class="builtintype" id="3928132">int</span>&nbsp;<span class="op" id="3928136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3928139">n</span>&nbsp;<span class="op" id="3928141">:=</span>&nbsp;<span class="builtinfunc" id="3928144">len</span><span class="op" id="3928147">(</span><span class="ident" id="3928148">a</span><span class="op" id="3928149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3928152">if</span>&nbsp;<span class="builtinfunc" id="3928155">len</span><span class="op" id="3928158">(</span><span class="ident" id="3928159">b</span><span class="op" id="3928160">)</span>&nbsp;<span class="op" id="3928162">&lt;</span>&nbsp;<span class="ident" id="3928164">n</span>&nbsp;<span class="op" id="3928166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3928170">n</span>&nbsp;<span class="op" id="3928172">=</span>&nbsp;<span class="builtinfunc" id="3928174">len</span><span class="op" id="3928177">(</span><span class="ident" id="3928178">b</span><span class="op" id="3928179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3928182">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3928185">for</span>&nbsp;<span class="ident" id="3928189">i</span>&nbsp;<span class="op" id="3928191">:=</span>&nbsp;<span class="num" id="3928194">0</span><span class="op" id="3928195">;</span>&nbsp;<span class="ident" id="3928197">i</span>&nbsp;<span class="op" id="3928199">&lt;</span>&nbsp;<span class="ident" id="3928201">n</span><span class="op" id="3928202">;</span>&nbsp;<span class="ident" id="3928204">i</span><span class="op" id="3928205">++</span>&nbsp;<span class="op" id="3928208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3928212">dst</span><span class="op" id="3928215">[</span><span class="ident" id="3928216">i</span><span class="op" id="3928217">]</span>&nbsp;<span class="op" id="3928219">=</span>&nbsp;<span class="ident" id="3928221">a</span><span class="op" id="3928222">[</span><span class="ident" id="3928223">i</span><span class="op" id="3928224">]</span>&nbsp;<span class="op" id="3928226">^</span>&nbsp;<span class="ident" id="3928228">b</span><span class="op" id="3928229">[</span><span class="ident" id="3928230">i</span><span class="op" id="3928231">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3928234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3928237">return</span>&nbsp;<span class="ident" id="3928244">n</span><br>
<span class="lineno"></span><span class="op" id="3928246">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3928249">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3928330">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3928375">func</span>&nbsp;<span class="ident" id="3928380">xorBytes</span><span class="op" id="3928388">(</span><span class="ident" id="3928389">dst</span><span class="op" id="3928392">,</span>&nbsp;<span class="ident" id="3928394">a</span><span class="op" id="3928395">,</span>&nbsp;<span class="ident" id="3928397">b</span>&nbsp;<span class="op" id="3928399">[</span><span class="op" id="3928400">]</span><span class="builtintype" id="3928401">byte</span><span class="op" id="3928405">)</span>&nbsp;<span class="builtintype" id="3928407">int</span>&nbsp;<span class="op" id="3928411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3928414">if</span>&nbsp;<span class="ident" id="3928417">supportsUnaligned</span>&nbsp;<span class="op" id="3928435">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3928439">return</span>&nbsp;<span class="ident" id="3928446">fastXORBytes</span><span class="op" id="3928458">(</span><span class="ident" id="3928459">dst</span><span class="op" id="3928462">,</span>&nbsp;<span class="ident" id="3928464">a</span><span class="op" id="3928465">,</span>&nbsp;<span class="ident" id="3928467">b</span><span class="op" id="3928468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3928471">}</span>&nbsp;<span class="keyword" id="3928473">else</span>&nbsp;<span class="op" id="3928478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3928482">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3928538">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3928592">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3928647">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3928692">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3928710">return</span>&nbsp;<span class="ident" id="3928717">safeXORBytes</span><span class="op" id="3928729">(</span><span class="ident" id="3928730">dst</span><span class="op" id="3928733">,</span>&nbsp;<span class="ident" id="3928735">a</span><span class="op" id="3928736">,</span>&nbsp;<span class="ident" id="3928738">b</span><span class="op" id="3928739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3928742">}</span><br>
<span class="lineno"></span><span class="op" id="3928744">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3928747">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3928823">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3928875">func</span>&nbsp;<span class="ident" id="3928880">fastXORWords</span><span class="op" id="3928892">(</span><span class="ident" id="3928893">dst</span><span class="op" id="3928896">,</span>&nbsp;<span class="ident" id="3928898">a</span><span class="op" id="3928899">,</span>&nbsp;<span class="ident" id="3928901">b</span>&nbsp;<span class="op" id="3928903">[</span><span class="op" id="3928904">]</span><span class="builtintype" id="3928905">byte</span><span class="op" id="3928909">)</span>&nbsp;<span class="op" id="3928911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3928914">dw</span>&nbsp;<span class="op" id="3928917">:=</span>&nbsp;<span class="op" id="3928920">*</span><span class="op" id="3928921">(</span><span class="op" id="3928922">*</span><span class="op" id="3928923">[</span><span class="op" id="3928924">]</span><span class="builtintype" id="3928925">uintptr</span><span class="op" id="3928932">)</span><span class="op" id="3928933">(</span><span class="ident" id="3928934">unsafe</span><span class="op" id="3928940">.</span><span class="ident" id="3928941">Pointer</span><span class="op" id="3928948">(</span><span class="op" id="3928949">&amp;</span><span class="ident" id="3928950">dst</span><span class="op" id="3928953">)</span><span class="op" id="3928954">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3928957">aw</span>&nbsp;<span class="op" id="3928960">:=</span>&nbsp;<span class="op" id="3928963">*</span><span class="op" id="3928964">(</span><span class="op" id="3928965">*</span><span class="op" id="3928966">[</span><span class="op" id="3928967">]</span><span class="builtintype" id="3928968">uintptr</span><span class="op" id="3928975">)</span><span class="op" id="3928976">(</span><span class="ident" id="3928977">unsafe</span><span class="op" id="3928983">.</span><span class="ident" id="3928984">Pointer</span><span class="op" id="3928991">(</span><span class="op" id="3928992">&amp;</span><span class="ident" id="3928993">a</span><span class="op" id="3928994">)</span><span class="op" id="3928995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3928998">bw</span>&nbsp;<span class="op" id="3929001">:=</span>&nbsp;<span class="op" id="3929004">*</span><span class="op" id="3929005">(</span><span class="op" id="3929006">*</span><span class="op" id="3929007">[</span><span class="op" id="3929008">]</span><span class="builtintype" id="3929009">uintptr</span><span class="op" id="3929016">)</span><span class="op" id="3929017">(</span><span class="ident" id="3929018">unsafe</span><span class="op" id="3929024">.</span><span class="ident" id="3929025">Pointer</span><span class="op" id="3929032">(</span><span class="op" id="3929033">&amp;</span><span class="ident" id="3929034">b</span><span class="op" id="3929035">)</span><span class="op" id="3929036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3929039">n</span>&nbsp;<span class="op" id="3929041">:=</span>&nbsp;<span class="builtinfunc" id="3929044">len</span><span class="op" id="3929047">(</span><span class="ident" id="3929048">b</span><span class="op" id="3929049">)</span>&nbsp;<span class="op" id="3929051">/</span>&nbsp;<span class="ident" id="3929053">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3929063">for</span>&nbsp;<span class="ident" id="3929067">i</span>&nbsp;<span class="op" id="3929069">:=</span>&nbsp;<span class="num" id="3929072">0</span><span class="op" id="3929073">;</span>&nbsp;<span class="ident" id="3929075">i</span>&nbsp;<span class="op" id="3929077">&lt;</span>&nbsp;<span class="ident" id="3929079">n</span><span class="op" id="3929080">;</span>&nbsp;<span class="ident" id="3929082">i</span><span class="op" id="3929083">++</span>&nbsp;<span class="op" id="3929086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3929090">dw</span><span class="op" id="3929092">[</span><span class="ident" id="3929093">i</span><span class="op" id="3929094">]</span>&nbsp;<span class="op" id="3929096">=</span>&nbsp;<span class="ident" id="3929098">aw</span><span class="op" id="3929100">[</span><span class="ident" id="3929101">i</span><span class="op" id="3929102">]</span>&nbsp;<span class="op" id="3929104">^</span>&nbsp;<span class="ident" id="3929106">bw</span><span class="op" id="3929108">[</span><span class="ident" id="3929109">i</span><span class="op" id="3929110">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3929113">}</span><br>
<span class="lineno"></span><span class="op" id="3929115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3929118">func</span>&nbsp;<span class="ident" id="3929123">xorWords</span><span class="op" id="3929131">(</span><span class="ident" id="3929132">dst</span><span class="op" id="3929135">,</span>&nbsp;<span class="ident" id="3929137">a</span><span class="op" id="3929138">,</span>&nbsp;<span class="ident" id="3929140">b</span>&nbsp;<span class="op" id="3929142">[</span><span class="op" id="3929143">]</span><span class="builtintype" id="3929144">byte</span><span class="op" id="3929148">)</span>&nbsp;<span class="op" id="3929150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3929153">if</span>&nbsp;<span class="ident" id="3929156">supportsUnaligned</span>&nbsp;<span class="op" id="3929174">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3929178">fastXORWords</span><span class="op" id="3929190">(</span><span class="ident" id="3929191">dst</span><span class="op" id="3929194">,</span>&nbsp;<span class="ident" id="3929196">a</span><span class="op" id="3929197">,</span>&nbsp;<span class="ident" id="3929199">b</span><span class="op" id="3929200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3929203">}</span>&nbsp;<span class="keyword" id="3929205">else</span>&nbsp;<span class="op" id="3929210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3929214">safeXORBytes</span><span class="op" id="3929226">(</span><span class="ident" id="3929227">dst</span><span class="op" id="3929230">,</span>&nbsp;<span class="ident" id="3929232">a</span><span class="op" id="3929233">,</span>&nbsp;<span class="ident" id="3929235">b</span><span class="op" id="3929236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3929239">}</span><br>
<span class="lineno"></span><span class="op" id="3929241">}</span>
</div>
</body>
</html>
