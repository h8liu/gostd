<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html" class="current">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2102409">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2102464">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2102518">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2102569">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2102604">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="2102664">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2102725">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="2102793">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="2102851">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2102891">package</span>&nbsp;<span class="ident" id="2102899">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2102908">type</span>&nbsp;<span class="ident" id="2102913">decimal</span>&nbsp;<span class="keyword" id="2102921">struct</span>&nbsp;<span class="op" id="2102928">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102931">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2102937">[</span><span class="num" id="2102938">800</span><span class="op" id="2102941">]</span><span class="builtintype" id="2102942">byte</span>&nbsp;<span class="comment" id="2102947">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102958">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2102964">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2102974">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103000">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2103006">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2103016">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103034">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2103040">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103046">trunc</span>&nbsp;<span class="builtintype" id="2103052">bool</span>&nbsp;<span class="comment" id="2103057">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="2103099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2103102">func</span>&nbsp;<span class="op" id="2103107">(</span><span class="ident" id="2103108">a</span>&nbsp;<span class="op" id="2103110">*</span><span class="ident" id="2103111">decimal</span><span class="op" id="2103118">)</span>&nbsp;<span class="ident" id="2103120">String</span><span class="op" id="2103126">(</span><span class="op" id="2103127">)</span>&nbsp;<span class="builtintype" id="2103129">string</span>&nbsp;<span class="op" id="2103136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103139">n</span>&nbsp;<span class="op" id="2103141">:=</span>&nbsp;<span class="num" id="2103144">10</span>&nbsp;<span class="op" id="2103147">+</span>&nbsp;<span class="ident" id="2103149">a</span><span class="op" id="2103150">.</span><span class="ident" id="2103151">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103155">if</span>&nbsp;<span class="ident" id="2103158">a</span><span class="op" id="2103159">.</span><span class="ident" id="2103160">dp</span>&nbsp;<span class="op" id="2103163">&gt;</span>&nbsp;<span class="num" id="2103165">0</span>&nbsp;<span class="op" id="2103167">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103171">n</span>&nbsp;<span class="op" id="2103173">+=</span>&nbsp;<span class="ident" id="2103176">a</span><span class="op" id="2103177">.</span><span class="ident" id="2103178">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103185">if</span>&nbsp;<span class="ident" id="2103188">a</span><span class="op" id="2103189">.</span><span class="ident" id="2103190">dp</span>&nbsp;<span class="op" id="2103193">&lt;</span>&nbsp;<span class="num" id="2103195">0</span>&nbsp;<span class="op" id="2103197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103201">n</span>&nbsp;<span class="op" id="2103203">+=</span>&nbsp;<span class="op" id="2103206">-</span><span class="ident" id="2103207">a</span><span class="op" id="2103208">.</span><span class="ident" id="2103209">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103213">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103217">buf</span>&nbsp;<span class="op" id="2103221">:=</span>&nbsp;<span class="builtinfunc" id="2103224">make</span><span class="op" id="2103228">(</span><span class="op" id="2103229">[</span><span class="op" id="2103230">]</span><span class="builtintype" id="2103231">byte</span><span class="op" id="2103235">,</span>&nbsp;<span class="ident" id="2103237">n</span><span class="op" id="2103238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103241">w</span>&nbsp;<span class="op" id="2103243">:=</span>&nbsp;<span class="num" id="2103246">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103249">switch</span>&nbsp;<span class="op" id="2103256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103259">case</span>&nbsp;<span class="ident" id="2103264">a</span><span class="op" id="2103265">.</span><span class="ident" id="2103266">nd</span>&nbsp;<span class="op" id="2103269">==</span>&nbsp;<span class="num" id="2103272">0</span><span class="op" id="2103273">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103277">return</span>&nbsp;<span class="string" id="2103284">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103290">case</span>&nbsp;<span class="ident" id="2103295">a</span><span class="op" id="2103296">.</span><span class="ident" id="2103297">dp</span>&nbsp;<span class="op" id="2103300">&lt;=</span>&nbsp;<span class="num" id="2103303">0</span><span class="op" id="2103304">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2103308">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103363">buf</span><span class="op" id="2103366">[</span><span class="ident" id="2103367">w</span><span class="op" id="2103368">]</span>&nbsp;<span class="op" id="2103370">=</span>&nbsp;<span class="string" id="2103372">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103378">w</span><span class="op" id="2103379">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103384">buf</span><span class="op" id="2103387">[</span><span class="ident" id="2103388">w</span><span class="op" id="2103389">]</span>&nbsp;<span class="op" id="2103391">=</span>&nbsp;<span class="string" id="2103393">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103399">w</span><span class="op" id="2103400">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103405">w</span>&nbsp;<span class="op" id="2103407">+=</span>&nbsp;<span class="ident" id="2103410">digitZero</span><span class="op" id="2103419">(</span><span class="ident" id="2103420">buf</span><span class="op" id="2103423">[</span><span class="ident" id="2103424">w</span>&nbsp;<span class="op" id="2103426">:</span>&nbsp;<span class="ident" id="2103428">w</span><span class="op" id="2103429">+</span><span class="op" id="2103430">-</span><span class="ident" id="2103431">a</span><span class="op" id="2103432">.</span><span class="ident" id="2103433">dp</span><span class="op" id="2103435">]</span><span class="op" id="2103436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103440">w</span>&nbsp;<span class="op" id="2103442">+=</span>&nbsp;<span class="builtinfunc" id="2103445">copy</span><span class="op" id="2103449">(</span><span class="ident" id="2103450">buf</span><span class="op" id="2103453">[</span><span class="ident" id="2103454">w</span><span class="op" id="2103455">:</span><span class="op" id="2103456">]</span><span class="op" id="2103457">,</span>&nbsp;<span class="ident" id="2103459">a</span><span class="op" id="2103460">.</span><span class="ident" id="2103461">d</span><span class="op" id="2103462">[</span><span class="num" id="2103463">0</span><span class="op" id="2103464">:</span><span class="ident" id="2103465">a</span><span class="op" id="2103466">.</span><span class="ident" id="2103467">nd</span><span class="op" id="2103469">]</span><span class="op" id="2103470">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103474">case</span>&nbsp;<span class="ident" id="2103479">a</span><span class="op" id="2103480">.</span><span class="ident" id="2103481">dp</span>&nbsp;<span class="op" id="2103484">&lt;</span>&nbsp;<span class="ident" id="2103486">a</span><span class="op" id="2103487">.</span><span class="ident" id="2103488">nd</span><span class="op" id="2103490">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2103494">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103533">w</span>&nbsp;<span class="op" id="2103535">+=</span>&nbsp;<span class="builtinfunc" id="2103538">copy</span><span class="op" id="2103542">(</span><span class="ident" id="2103543">buf</span><span class="op" id="2103546">[</span><span class="ident" id="2103547">w</span><span class="op" id="2103548">:</span><span class="op" id="2103549">]</span><span class="op" id="2103550">,</span>&nbsp;<span class="ident" id="2103552">a</span><span class="op" id="2103553">.</span><span class="ident" id="2103554">d</span><span class="op" id="2103555">[</span><span class="num" id="2103556">0</span><span class="op" id="2103557">:</span><span class="ident" id="2103558">a</span><span class="op" id="2103559">.</span><span class="ident" id="2103560">dp</span><span class="op" id="2103562">]</span><span class="op" id="2103563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103567">buf</span><span class="op" id="2103570">[</span><span class="ident" id="2103571">w</span><span class="op" id="2103572">]</span>&nbsp;<span class="op" id="2103574">=</span>&nbsp;<span class="string" id="2103576">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103582">w</span><span class="op" id="2103583">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103588">w</span>&nbsp;<span class="op" id="2103590">+=</span>&nbsp;<span class="builtinfunc" id="2103593">copy</span><span class="op" id="2103597">(</span><span class="ident" id="2103598">buf</span><span class="op" id="2103601">[</span><span class="ident" id="2103602">w</span><span class="op" id="2103603">:</span><span class="op" id="2103604">]</span><span class="op" id="2103605">,</span>&nbsp;<span class="ident" id="2103607">a</span><span class="op" id="2103608">.</span><span class="ident" id="2103609">d</span><span class="op" id="2103610">[</span><span class="ident" id="2103611">a</span><span class="op" id="2103612">.</span><span class="ident" id="2103613">dp</span><span class="op" id="2103615">:</span><span class="ident" id="2103616">a</span><span class="op" id="2103617">.</span><span class="ident" id="2103618">nd</span><span class="op" id="2103620">]</span><span class="op" id="2103621">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103625">default</span><span class="op" id="2103632">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2103636">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103691">w</span>&nbsp;<span class="op" id="2103693">+=</span>&nbsp;<span class="builtinfunc" id="2103696">copy</span><span class="op" id="2103700">(</span><span class="ident" id="2103701">buf</span><span class="op" id="2103704">[</span><span class="ident" id="2103705">w</span><span class="op" id="2103706">:</span><span class="op" id="2103707">]</span><span class="op" id="2103708">,</span>&nbsp;<span class="ident" id="2103710">a</span><span class="op" id="2103711">.</span><span class="ident" id="2103712">d</span><span class="op" id="2103713">[</span><span class="num" id="2103714">0</span><span class="op" id="2103715">:</span><span class="ident" id="2103716">a</span><span class="op" id="2103717">.</span><span class="ident" id="2103718">nd</span><span class="op" id="2103720">]</span><span class="op" id="2103721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103725">w</span>&nbsp;<span class="op" id="2103727">+=</span>&nbsp;<span class="ident" id="2103730">digitZero</span><span class="op" id="2103739">(</span><span class="ident" id="2103740">buf</span><span class="op" id="2103743">[</span><span class="ident" id="2103744">w</span>&nbsp;<span class="op" id="2103746">:</span>&nbsp;<span class="ident" id="2103748">w</span><span class="op" id="2103749">+</span><span class="ident" id="2103750">a</span><span class="op" id="2103751">.</span><span class="ident" id="2103752">dp</span><span class="op" id="2103754">-</span><span class="ident" id="2103755">a</span><span class="op" id="2103756">.</span><span class="ident" id="2103757">nd</span><span class="op" id="2103759">]</span><span class="op" id="2103760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103766">return</span>&nbsp;<span class="builtintype" id="2103773">string</span><span class="op" id="2103779">(</span><span class="ident" id="2103780">buf</span><span class="op" id="2103783">[</span><span class="num" id="2103784">0</span><span class="op" id="2103785">:</span><span class="ident" id="2103786">w</span><span class="op" id="2103787">]</span><span class="op" id="2103788">)</span><br>
<span class="lineno"></span><span class="op" id="2103790">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2103793">func</span>&nbsp;<span class="ident" id="2103798">digitZero</span><span class="op" id="2103807">(</span><span class="ident" id="2103808">dst</span>&nbsp;<span class="op" id="2103812">[</span><span class="op" id="2103813">]</span><span class="builtintype" id="2103814">byte</span><span class="op" id="2103818">)</span>&nbsp;<span class="builtintype" id="2103820">int</span>&nbsp;<span class="op" id="2103824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103827">for</span>&nbsp;<span class="ident" id="2103831">i</span>&nbsp;<span class="op" id="2103833">:=</span>&nbsp;<span class="keyword" id="2103836">range</span>&nbsp;<span class="ident" id="2103842">dst</span>&nbsp;<span class="op" id="2103846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103850">dst</span><span class="op" id="2103853">[</span><span class="ident" id="2103854">i</span><span class="op" id="2103855">]</span>&nbsp;<span class="op" id="2103857">=</span>&nbsp;<span class="string" id="2103859">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103864">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103867">return</span>&nbsp;<span class="builtinfunc" id="2103874">len</span><span class="op" id="2103877">(</span><span class="ident" id="2103878">dst</span><span class="op" id="2103881">)</span><br>
<span class="lineno"></span><span class="op" id="2103883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2103886">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="2103922">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="2103977">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="2104018">func</span>&nbsp;<span class="ident" id="2104023">trim</span><span class="op" id="2104027">(</span><span class="ident" id="2104028">a</span>&nbsp;<span class="op" id="2104030">*</span><span class="ident" id="2104031">decimal</span><span class="op" id="2104038">)</span>&nbsp;<span class="op" id="2104040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104043">for</span>&nbsp;<span class="ident" id="2104047">a</span><span class="op" id="2104048">.</span><span class="ident" id="2104049">nd</span>&nbsp;<span class="op" id="2104052">&gt;</span>&nbsp;<span class="num" id="2104054">0</span>&nbsp;<span class="op" id="2104056">&amp;&amp;</span>&nbsp;<span class="ident" id="2104059">a</span><span class="op" id="2104060">.</span><span class="ident" id="2104061">d</span><span class="op" id="2104062">[</span><span class="ident" id="2104063">a</span><span class="op" id="2104064">.</span><span class="ident" id="2104065">nd</span><span class="op" id="2104067">-</span><span class="num" id="2104068">1</span><span class="op" id="2104069">]</span>&nbsp;<span class="op" id="2104071">==</span>&nbsp;<span class="string" id="2104074">&#39;0&#39;</span>&nbsp;<span class="op" id="2104078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104082">a</span><span class="op" id="2104083">.</span><span class="ident" id="2104084">nd</span><span class="op" id="2104086">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2104090">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104093">if</span>&nbsp;<span class="ident" id="2104096">a</span><span class="op" id="2104097">.</span><span class="ident" id="2104098">nd</span>&nbsp;<span class="op" id="2104101">==</span>&nbsp;<span class="num" id="2104104">0</span>&nbsp;<span class="op" id="2104106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104110">a</span><span class="op" id="2104111">.</span><span class="ident" id="2104112">dp</span>&nbsp;<span class="op" id="2104115">=</span>&nbsp;<span class="num" id="2104117">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2104120">}</span><br>
<span class="lineno"></span><span class="op" id="2104122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2104125">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="2104143">func</span>&nbsp;<span class="op" id="2104148">(</span><span class="ident" id="2104149">a</span>&nbsp;<span class="op" id="2104151">*</span><span class="ident" id="2104152">decimal</span><span class="op" id="2104159">)</span>&nbsp;<span class="ident" id="2104161">Assign</span><span class="op" id="2104167">(</span><span class="ident" id="2104168">v</span>&nbsp;<span class="builtintype" id="2104170">uint64</span><span class="op" id="2104176">)</span>&nbsp;<span class="op" id="2104178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104181">var</span>&nbsp;<span class="ident" id="2104185">buf</span>&nbsp;<span class="op" id="2104189">[</span><span class="num" id="2104190">24</span><span class="op" id="2104192">]</span><span class="builtintype" id="2104193">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2104200">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104235">n</span>&nbsp;<span class="op" id="2104237">:=</span>&nbsp;<span class="num" id="2104240">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104243">for</span>&nbsp;<span class="ident" id="2104247">v</span>&nbsp;<span class="op" id="2104249">&gt;</span>&nbsp;<span class="num" id="2104251">0</span>&nbsp;<span class="op" id="2104253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104257">v1</span>&nbsp;<span class="op" id="2104260">:=</span>&nbsp;<span class="ident" id="2104263">v</span>&nbsp;<span class="op" id="2104265">/</span>&nbsp;<span class="num" id="2104267">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104272">v</span>&nbsp;<span class="op" id="2104274">-=</span>&nbsp;<span class="num" id="2104277">10</span>&nbsp;<span class="op" id="2104280">*</span>&nbsp;<span class="ident" id="2104282">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104287">buf</span><span class="op" id="2104290">[</span><span class="ident" id="2104291">n</span><span class="op" id="2104292">]</span>&nbsp;<span class="op" id="2104294">=</span>&nbsp;<span class="builtintype" id="2104296">byte</span><span class="op" id="2104300">(</span><span class="ident" id="2104301">v</span>&nbsp;<span class="op" id="2104303">+</span>&nbsp;<span class="string" id="2104305">&#39;0&#39;</span><span class="op" id="2104308">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104312">n</span><span class="op" id="2104313">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104318">v</span>&nbsp;<span class="op" id="2104320">=</span>&nbsp;<span class="ident" id="2104322">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2104326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2104330">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104383">a</span><span class="op" id="2104384">.</span><span class="ident" id="2104385">nd</span>&nbsp;<span class="op" id="2104388">=</span>&nbsp;<span class="num" id="2104390">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104393">for</span>&nbsp;<span class="ident" id="2104397">n</span><span class="op" id="2104398">--</span><span class="op" id="2104400">;</span>&nbsp;<span class="ident" id="2104402">n</span>&nbsp;<span class="op" id="2104404">&gt;=</span>&nbsp;<span class="num" id="2104407">0</span><span class="op" id="2104408">;</span>&nbsp;<span class="ident" id="2104410">n</span><span class="op" id="2104411">--</span>&nbsp;<span class="op" id="2104414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104418">a</span><span class="op" id="2104419">.</span><span class="ident" id="2104420">d</span><span class="op" id="2104421">[</span><span class="ident" id="2104422">a</span><span class="op" id="2104423">.</span><span class="ident" id="2104424">nd</span><span class="op" id="2104426">]</span>&nbsp;<span class="op" id="2104428">=</span>&nbsp;<span class="ident" id="2104430">buf</span><span class="op" id="2104433">[</span><span class="ident" id="2104434">n</span><span class="op" id="2104435">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104439">a</span><span class="op" id="2104440">.</span><span class="ident" id="2104441">nd</span><span class="op" id="2104443">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2104447">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104450">a</span><span class="op" id="2104451">.</span><span class="ident" id="2104452">dp</span>&nbsp;<span class="op" id="2104455">=</span>&nbsp;<span class="ident" id="2104457">a</span><span class="op" id="2104458">.</span><span class="ident" id="2104459">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104463">trim</span><span class="op" id="2104467">(</span><span class="ident" id="2104468">a</span><span class="op" id="2104469">)</span><br>
<span class="lineno"></span><span class="op" id="2104471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2104474">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="2104536">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="2104607">const</span>&nbsp;<span class="ident" id="2104613">maxShift</span>&nbsp;<span class="op" id="2104622">=</span>&nbsp;<span class="num" id="2104624">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2104628">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2104701">func</span>&nbsp;<span class="ident" id="2104706">rightShift</span><span class="op" id="2104716">(</span><span class="ident" id="2104717">a</span>&nbsp;<span class="op" id="2104719">*</span><span class="ident" id="2104720">decimal</span><span class="op" id="2104727">,</span>&nbsp;<span class="ident" id="2104729">k</span>&nbsp;<span class="builtintype" id="2104731">uint</span><span class="op" id="2104735">)</span>&nbsp;<span class="op" id="2104737">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104740">r</span>&nbsp;<span class="op" id="2104742">:=</span>&nbsp;<span class="num" id="2104745">0</span>&nbsp;<span class="comment" id="2104747">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104764">w</span>&nbsp;<span class="op" id="2104766">:=</span>&nbsp;<span class="num" id="2104769">0</span>&nbsp;<span class="comment" id="2104771">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2104790">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104846">n</span>&nbsp;<span class="op" id="2104848">:=</span>&nbsp;<span class="num" id="2104851">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104854">for</span>&nbsp;<span class="op" id="2104858">;</span>&nbsp;<span class="ident" id="2104860">n</span><span class="op" id="2104861">&gt;&gt;</span><span class="ident" id="2104863">k</span>&nbsp;<span class="op" id="2104865">==</span>&nbsp;<span class="num" id="2104868">0</span><span class="op" id="2104869">;</span>&nbsp;<span class="ident" id="2104871">r</span><span class="op" id="2104872">++</span>&nbsp;<span class="op" id="2104875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104879">if</span>&nbsp;<span class="ident" id="2104882">r</span>&nbsp;<span class="op" id="2104884">&gt;=</span>&nbsp;<span class="ident" id="2104887">a</span><span class="op" id="2104888">.</span><span class="ident" id="2104889">nd</span>&nbsp;<span class="op" id="2104892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104897">if</span>&nbsp;<span class="ident" id="2104900">n</span>&nbsp;<span class="op" id="2104902">==</span>&nbsp;<span class="num" id="2104905">0</span>&nbsp;<span class="op" id="2104907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2104913">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104967">a</span><span class="op" id="2104968">.</span><span class="ident" id="2104969">nd</span>&nbsp;<span class="op" id="2104972">=</span>&nbsp;<span class="num" id="2104974">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104980">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2104990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104995">for</span>&nbsp;<span class="ident" id="2104999">n</span><span class="op" id="2105000">&gt;&gt;</span><span class="ident" id="2105002">k</span>&nbsp;<span class="op" id="2105004">==</span>&nbsp;<span class="num" id="2105007">0</span>&nbsp;<span class="op" id="2105009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105015">n</span>&nbsp;<span class="op" id="2105017">=</span>&nbsp;<span class="ident" id="2105019">n</span>&nbsp;<span class="op" id="2105021">*</span>&nbsp;<span class="num" id="2105023">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105030">r</span><span class="op" id="2105031">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105042">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105054">c</span>&nbsp;<span class="op" id="2105056">:=</span>&nbsp;<span class="builtintype" id="2105059">int</span><span class="op" id="2105062">(</span><span class="ident" id="2105063">a</span><span class="op" id="2105064">.</span><span class="ident" id="2105065">d</span><span class="op" id="2105066">[</span><span class="ident" id="2105067">r</span><span class="op" id="2105068">]</span><span class="op" id="2105069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105073">n</span>&nbsp;<span class="op" id="2105075">=</span>&nbsp;<span class="ident" id="2105077">n</span><span class="op" id="2105078">*</span><span class="num" id="2105079">10</span>&nbsp;<span class="op" id="2105082">+</span>&nbsp;<span class="ident" id="2105084">c</span>&nbsp;<span class="op" id="2105086">-</span>&nbsp;<span class="string" id="2105088">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105096">a</span><span class="op" id="2105097">.</span><span class="ident" id="2105098">dp</span>&nbsp;<span class="op" id="2105101">-=</span>&nbsp;<span class="ident" id="2105104">r</span>&nbsp;<span class="op" id="2105106">-</span>&nbsp;<span class="num" id="2105108">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2105112">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105151">for</span>&nbsp;<span class="op" id="2105155">;</span>&nbsp;<span class="ident" id="2105157">r</span>&nbsp;<span class="op" id="2105159">&lt;</span>&nbsp;<span class="ident" id="2105161">a</span><span class="op" id="2105162">.</span><span class="ident" id="2105163">nd</span><span class="op" id="2105165">;</span>&nbsp;<span class="ident" id="2105167">r</span><span class="op" id="2105168">++</span>&nbsp;<span class="op" id="2105171">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105175">c</span>&nbsp;<span class="op" id="2105177">:=</span>&nbsp;<span class="builtintype" id="2105180">int</span><span class="op" id="2105183">(</span><span class="ident" id="2105184">a</span><span class="op" id="2105185">.</span><span class="ident" id="2105186">d</span><span class="op" id="2105187">[</span><span class="ident" id="2105188">r</span><span class="op" id="2105189">]</span><span class="op" id="2105190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105194">dig</span>&nbsp;<span class="op" id="2105198">:=</span>&nbsp;<span class="ident" id="2105201">n</span>&nbsp;<span class="op" id="2105203">&gt;&gt;</span>&nbsp;<span class="ident" id="2105206">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105210">n</span>&nbsp;<span class="op" id="2105212">-=</span>&nbsp;<span class="ident" id="2105215">dig</span>&nbsp;<span class="op" id="2105219">&lt;&lt;</span>&nbsp;<span class="ident" id="2105222">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105226">a</span><span class="op" id="2105227">.</span><span class="ident" id="2105228">d</span><span class="op" id="2105229">[</span><span class="ident" id="2105230">w</span><span class="op" id="2105231">]</span>&nbsp;<span class="op" id="2105233">=</span>&nbsp;<span class="builtintype" id="2105235">byte</span><span class="op" id="2105239">(</span><span class="ident" id="2105240">dig</span>&nbsp;<span class="op" id="2105244">+</span>&nbsp;<span class="string" id="2105246">&#39;0&#39;</span><span class="op" id="2105249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105253">w</span><span class="op" id="2105254">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105259">n</span>&nbsp;<span class="op" id="2105261">=</span>&nbsp;<span class="ident" id="2105263">n</span><span class="op" id="2105264">*</span><span class="num" id="2105265">10</span>&nbsp;<span class="op" id="2105268">+</span>&nbsp;<span class="ident" id="2105270">c</span>&nbsp;<span class="op" id="2105272">-</span>&nbsp;<span class="string" id="2105274">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2105283">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105310">for</span>&nbsp;<span class="ident" id="2105314">n</span>&nbsp;<span class="op" id="2105316">&gt;</span>&nbsp;<span class="num" id="2105318">0</span>&nbsp;<span class="op" id="2105320">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105324">dig</span>&nbsp;<span class="op" id="2105328">:=</span>&nbsp;<span class="ident" id="2105331">n</span>&nbsp;<span class="op" id="2105333">&gt;&gt;</span>&nbsp;<span class="ident" id="2105336">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105340">n</span>&nbsp;<span class="op" id="2105342">-=</span>&nbsp;<span class="ident" id="2105345">dig</span>&nbsp;<span class="op" id="2105349">&lt;&lt;</span>&nbsp;<span class="ident" id="2105352">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105356">if</span>&nbsp;<span class="ident" id="2105359">w</span>&nbsp;<span class="op" id="2105361">&lt;</span>&nbsp;<span class="builtinfunc" id="2105363">len</span><span class="op" id="2105366">(</span><span class="ident" id="2105367">a</span><span class="op" id="2105368">.</span><span class="ident" id="2105369">d</span><span class="op" id="2105370">)</span>&nbsp;<span class="op" id="2105372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105377">a</span><span class="op" id="2105378">.</span><span class="ident" id="2105379">d</span><span class="op" id="2105380">[</span><span class="ident" id="2105381">w</span><span class="op" id="2105382">]</span>&nbsp;<span class="op" id="2105384">=</span>&nbsp;<span class="builtintype" id="2105386">byte</span><span class="op" id="2105390">(</span><span class="ident" id="2105391">dig</span>&nbsp;<span class="op" id="2105395">+</span>&nbsp;<span class="string" id="2105397">&#39;0&#39;</span><span class="op" id="2105400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105405">w</span><span class="op" id="2105406">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105411">}</span>&nbsp;<span class="keyword" id="2105413">else</span>&nbsp;<span class="keyword" id="2105418">if</span>&nbsp;<span class="ident" id="2105421">dig</span>&nbsp;<span class="op" id="2105425">&gt;</span>&nbsp;<span class="num" id="2105427">0</span>&nbsp;<span class="op" id="2105429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105434">a</span><span class="op" id="2105435">.</span><span class="ident" id="2105436">trunc</span>&nbsp;<span class="op" id="2105442">=</span>&nbsp;<span class="builtintype" id="2105444">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105455">n</span>&nbsp;<span class="op" id="2105457">=</span>&nbsp;<span class="ident" id="2105459">n</span>&nbsp;<span class="op" id="2105461">*</span>&nbsp;<span class="num" id="2105463">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105467">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105471">a</span><span class="op" id="2105472">.</span><span class="ident" id="2105473">nd</span>&nbsp;<span class="op" id="2105476">=</span>&nbsp;<span class="ident" id="2105478">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105481">trim</span><span class="op" id="2105485">(</span><span class="ident" id="2105486">a</span><span class="op" id="2105487">)</span><br>
<span class="lineno"></span><span class="op" id="2105489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="2105492">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="2105559">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2105622">//</span><br>
<span class="lineno"></span><span class="comment" id="2105625">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2105686">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="2105755">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="2105825">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2105873">//</span><br>
<span class="lineno"></span><span class="comment" id="2105876">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="2105915">type</span>&nbsp;<span class="ident" id="2105920">leftCheat</span>&nbsp;<span class="keyword" id="2105930">struct</span>&nbsp;<span class="op" id="2105937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105940">delta</span>&nbsp;&nbsp;<span class="builtintype" id="2105947">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2105954">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105979">cutoff</span>&nbsp;<span class="builtintype" id="2105986">string</span>&nbsp;<span class="comment" id="2105993">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="2106031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="2106034">var</span>&nbsp;<span class="ident" id="2106038">leftcheats</span>&nbsp;<span class="op" id="2106049">=</span>&nbsp;<span class="op" id="2106051">[</span><span class="op" id="2106052">]</span><span class="ident" id="2106053">leftCheat</span><span class="op" id="2106062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106065">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106100">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106155">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106191">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106395">{</span><span class="num" id="2106396">0</span><span class="op" id="2106397">,</span>&nbsp;<span class="string" id="2106399">&#34;&#34;</span><span class="op" id="2106401">}</span><span class="op" id="2106402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106405">{</span><span class="num" id="2106406">1</span><span class="op" id="2106407">,</span>&nbsp;<span class="string" id="2106409">&#34;5&#34;</span><span class="op" id="2106412">}</span><span class="op" id="2106413">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106433">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106441">{</span><span class="num" id="2106442">1</span><span class="op" id="2106443">,</span>&nbsp;<span class="string" id="2106445">&#34;25&#34;</span><span class="op" id="2106449">}</span><span class="op" id="2106450">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106469">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106477">{</span><span class="num" id="2106478">1</span><span class="op" id="2106479">,</span>&nbsp;<span class="string" id="2106481">&#34;125&#34;</span><span class="op" id="2106486">}</span><span class="op" id="2106487">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106505">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106513">{</span><span class="num" id="2106514">2</span><span class="op" id="2106515">,</span>&nbsp;<span class="string" id="2106517">&#34;625&#34;</span><span class="op" id="2106522">}</span><span class="op" id="2106523">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106541">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106550">{</span><span class="num" id="2106551">2</span><span class="op" id="2106552">,</span>&nbsp;<span class="string" id="2106554">&#34;3125&#34;</span><span class="op" id="2106560">}</span><span class="op" id="2106561">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106578">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106587">{</span><span class="num" id="2106588">2</span><span class="op" id="2106589">,</span>&nbsp;<span class="string" id="2106591">&#34;15625&#34;</span><span class="op" id="2106598">}</span><span class="op" id="2106599">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106615">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106624">{</span><span class="num" id="2106625">3</span><span class="op" id="2106626">,</span>&nbsp;<span class="string" id="2106628">&#34;78125&#34;</span><span class="op" id="2106635">}</span><span class="op" id="2106636">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106652">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106662">{</span><span class="num" id="2106663">3</span><span class="op" id="2106664">,</span>&nbsp;<span class="string" id="2106666">&#34;390625&#34;</span><span class="op" id="2106674">}</span><span class="op" id="2106675">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106690">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106700">{</span><span class="num" id="2106701">3</span><span class="op" id="2106702">,</span>&nbsp;<span class="string" id="2106704">&#34;1953125&#34;</span><span class="op" id="2106713">}</span><span class="op" id="2106714">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106728">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106738">{</span><span class="num" id="2106739">4</span><span class="op" id="2106740">,</span>&nbsp;<span class="string" id="2106742">&#34;9765625&#34;</span><span class="op" id="2106751">}</span><span class="op" id="2106752">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106766">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106777">{</span><span class="num" id="2106778">4</span><span class="op" id="2106779">,</span>&nbsp;<span class="string" id="2106781">&#34;48828125&#34;</span><span class="op" id="2106791">}</span><span class="op" id="2106792">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106805">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106816">{</span><span class="num" id="2106817">4</span><span class="op" id="2106818">,</span>&nbsp;<span class="string" id="2106820">&#34;244140625&#34;</span><span class="op" id="2106831">}</span><span class="op" id="2106832">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106844">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106855">{</span><span class="num" id="2106856">4</span><span class="op" id="2106857">,</span>&nbsp;<span class="string" id="2106859">&#34;1220703125&#34;</span><span class="op" id="2106871">}</span><span class="op" id="2106872">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106883">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106894">{</span><span class="num" id="2106895">5</span><span class="op" id="2106896">,</span>&nbsp;<span class="string" id="2106898">&#34;6103515625&#34;</span><span class="op" id="2106910">}</span><span class="op" id="2106911">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106922">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106934">{</span><span class="num" id="2106935">5</span><span class="op" id="2106936">,</span>&nbsp;<span class="string" id="2106938">&#34;30517578125&#34;</span><span class="op" id="2106951">}</span><span class="op" id="2106952">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106962">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106974">{</span><span class="num" id="2106975">5</span><span class="op" id="2106976">,</span>&nbsp;<span class="string" id="2106978">&#34;152587890625&#34;</span><span class="op" id="2106992">}</span><span class="op" id="2106993">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2107002">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107014">{</span><span class="num" id="2107015">6</span><span class="op" id="2107016">,</span>&nbsp;<span class="string" id="2107018">&#34;762939453125&#34;</span><span class="op" id="2107032">}</span><span class="op" id="2107033">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2107042">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107055">{</span><span class="num" id="2107056">6</span><span class="op" id="2107057">,</span>&nbsp;<span class="string" id="2107059">&#34;3814697265625&#34;</span><span class="op" id="2107074">}</span><span class="op" id="2107075">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2107083">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107096">{</span><span class="num" id="2107097">6</span><span class="op" id="2107098">,</span>&nbsp;<span class="string" id="2107100">&#34;19073486328125&#34;</span><span class="op" id="2107116">}</span><span class="op" id="2107117">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2107124">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107137">{</span><span class="num" id="2107138">7</span><span class="op" id="2107139">,</span>&nbsp;<span class="string" id="2107141">&#34;95367431640625&#34;</span><span class="op" id="2107157">}</span><span class="op" id="2107158">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2107165">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107179">{</span><span class="num" id="2107180">7</span><span class="op" id="2107181">,</span>&nbsp;<span class="string" id="2107183">&#34;476837158203125&#34;</span><span class="op" id="2107200">}</span><span class="op" id="2107201">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2107207">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107221">{</span><span class="num" id="2107222">7</span><span class="op" id="2107223">,</span>&nbsp;<span class="string" id="2107225">&#34;2384185791015625&#34;</span><span class="op" id="2107243">}</span><span class="op" id="2107244">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2107249">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107263">{</span><span class="num" id="2107264">7</span><span class="op" id="2107265">,</span>&nbsp;<span class="string" id="2107267">&#34;11920928955078125&#34;</span><span class="op" id="2107286">}</span><span class="op" id="2107287">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2107291">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107305">{</span><span class="num" id="2107306">8</span><span class="op" id="2107307">,</span>&nbsp;<span class="string" id="2107309">&#34;59604644775390625&#34;</span><span class="op" id="2107328">}</span><span class="op" id="2107329">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2107333">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107348">{</span><span class="num" id="2107349">8</span><span class="op" id="2107350">,</span>&nbsp;<span class="string" id="2107352">&#34;298023223876953125&#34;</span><span class="op" id="2107372">}</span><span class="op" id="2107373">,</span>&nbsp;&nbsp;<span class="comment" id="2107376">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107391">{</span><span class="num" id="2107392">8</span><span class="op" id="2107393">,</span>&nbsp;<span class="string" id="2107395">&#34;1490116119384765625&#34;</span><span class="op" id="2107416">}</span><span class="op" id="2107417">,</span>&nbsp;<span class="comment" id="2107419">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107434">{</span><span class="num" id="2107435">9</span><span class="op" id="2107436">,</span>&nbsp;<span class="string" id="2107438">&#34;7450580596923828125&#34;</span><span class="op" id="2107459">}</span><span class="op" id="2107460">,</span>&nbsp;<span class="comment" id="2107462">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="2107477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2107480">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="2107541">func</span>&nbsp;<span class="ident" id="2107546">prefixIsLessThan</span><span class="op" id="2107562">(</span><span class="ident" id="2107563">b</span>&nbsp;<span class="op" id="2107565">[</span><span class="op" id="2107566">]</span><span class="builtintype" id="2107567">byte</span><span class="op" id="2107571">,</span>&nbsp;<span class="ident" id="2107573">s</span>&nbsp;<span class="builtintype" id="2107575">string</span><span class="op" id="2107581">)</span>&nbsp;<span class="builtintype" id="2107583">bool</span>&nbsp;<span class="op" id="2107588">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107591">for</span>&nbsp;<span class="ident" id="2107595">i</span>&nbsp;<span class="op" id="2107597">:=</span>&nbsp;<span class="num" id="2107600">0</span><span class="op" id="2107601">;</span>&nbsp;<span class="ident" id="2107603">i</span>&nbsp;<span class="op" id="2107605">&lt;</span>&nbsp;<span class="builtinfunc" id="2107607">len</span><span class="op" id="2107610">(</span><span class="ident" id="2107611">s</span><span class="op" id="2107612">)</span><span class="op" id="2107613">;</span>&nbsp;<span class="ident" id="2107615">i</span><span class="op" id="2107616">++</span>&nbsp;<span class="op" id="2107619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107623">if</span>&nbsp;<span class="ident" id="2107626">i</span>&nbsp;<span class="op" id="2107628">&gt;=</span>&nbsp;<span class="builtinfunc" id="2107631">len</span><span class="op" id="2107634">(</span><span class="ident" id="2107635">b</span><span class="op" id="2107636">)</span>&nbsp;<span class="op" id="2107638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107643">return</span>&nbsp;<span class="builtintype" id="2107650">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107661">if</span>&nbsp;<span class="ident" id="2107664">b</span><span class="op" id="2107665">[</span><span class="ident" id="2107666">i</span><span class="op" id="2107667">]</span>&nbsp;<span class="op" id="2107669">!=</span>&nbsp;<span class="ident" id="2107672">s</span><span class="op" id="2107673">[</span><span class="ident" id="2107674">i</span><span class="op" id="2107675">]</span>&nbsp;<span class="op" id="2107677">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107682">return</span>&nbsp;<span class="ident" id="2107689">b</span><span class="op" id="2107690">[</span><span class="ident" id="2107691">i</span><span class="op" id="2107692">]</span>&nbsp;<span class="op" id="2107694">&lt;</span>&nbsp;<span class="ident" id="2107696">s</span><span class="op" id="2107697">[</span><span class="ident" id="2107698">i</span><span class="op" id="2107699">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107709">return</span>&nbsp;<span class="builtintype" id="2107716">false</span><br>
<span class="lineno"></span><span class="op" id="2107722">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2107725">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2107797">func</span>&nbsp;<span class="ident" id="2107802">leftShift</span><span class="op" id="2107811">(</span><span class="ident" id="2107812">a</span>&nbsp;<span class="op" id="2107814">*</span><span class="ident" id="2107815">decimal</span><span class="op" id="2107822">,</span>&nbsp;<span class="ident" id="2107824">k</span>&nbsp;<span class="builtintype" id="2107826">uint</span><span class="op" id="2107830">)</span>&nbsp;<span class="op" id="2107832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107835">delta</span>&nbsp;<span class="op" id="2107841">:=</span>&nbsp;<span class="ident" id="2107844">leftcheats</span><span class="op" id="2107854">[</span><span class="ident" id="2107855">k</span><span class="op" id="2107856">]</span><span class="op" id="2107857">.</span><span class="ident" id="2107858">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107865">if</span>&nbsp;<span class="ident" id="2107868">prefixIsLessThan</span><span class="op" id="2107884">(</span><span class="ident" id="2107885">a</span><span class="op" id="2107886">.</span><span class="ident" id="2107887">d</span><span class="op" id="2107888">[</span><span class="num" id="2107889">0</span><span class="op" id="2107890">:</span><span class="ident" id="2107891">a</span><span class="op" id="2107892">.</span><span class="ident" id="2107893">nd</span><span class="op" id="2107895">]</span><span class="op" id="2107896">,</span>&nbsp;<span class="ident" id="2107898">leftcheats</span><span class="op" id="2107908">[</span><span class="ident" id="2107909">k</span><span class="op" id="2107910">]</span><span class="op" id="2107911">.</span><span class="ident" id="2107912">cutoff</span><span class="op" id="2107918">)</span>&nbsp;<span class="op" id="2107920">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107924">delta</span><span class="op" id="2107929">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107937">r</span>&nbsp;<span class="op" id="2107939">:=</span>&nbsp;<span class="ident" id="2107942">a</span><span class="op" id="2107943">.</span><span class="ident" id="2107944">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2107955">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107970">w</span>&nbsp;<span class="op" id="2107972">:=</span>&nbsp;<span class="ident" id="2107975">a</span><span class="op" id="2107976">.</span><span class="ident" id="2107977">nd</span>&nbsp;<span class="op" id="2107980">+</span>&nbsp;<span class="ident" id="2107982">delta</span>&nbsp;<span class="comment" id="2107988">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108004">n</span>&nbsp;<span class="op" id="2108006">:=</span>&nbsp;<span class="num" id="2108009">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2108013">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108052">for</span>&nbsp;<span class="ident" id="2108056">r</span><span class="op" id="2108057">--</span><span class="op" id="2108059">;</span>&nbsp;<span class="ident" id="2108061">r</span>&nbsp;<span class="op" id="2108063">&gt;=</span>&nbsp;<span class="num" id="2108066">0</span><span class="op" id="2108067">;</span>&nbsp;<span class="ident" id="2108069">r</span><span class="op" id="2108070">--</span>&nbsp;<span class="op" id="2108073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108077">n</span>&nbsp;<span class="op" id="2108079">+=</span>&nbsp;<span class="op" id="2108082">(</span><span class="builtintype" id="2108083">int</span><span class="op" id="2108086">(</span><span class="ident" id="2108087">a</span><span class="op" id="2108088">.</span><span class="ident" id="2108089">d</span><span class="op" id="2108090">[</span><span class="ident" id="2108091">r</span><span class="op" id="2108092">]</span><span class="op" id="2108093">)</span>&nbsp;<span class="op" id="2108095">-</span>&nbsp;<span class="string" id="2108097">&#39;0&#39;</span><span class="op" id="2108100">)</span>&nbsp;<span class="op" id="2108102">&lt;&lt;</span>&nbsp;<span class="ident" id="2108105">k</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108109">quo</span>&nbsp;<span class="op" id="2108113">:=</span>&nbsp;<span class="ident" id="2108116">n</span>&nbsp;<span class="op" id="2108118">/</span>&nbsp;<span class="num" id="2108120">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108125">rem</span>&nbsp;<span class="op" id="2108129">:=</span>&nbsp;<span class="ident" id="2108132">n</span>&nbsp;<span class="op" id="2108134">-</span>&nbsp;<span class="num" id="2108136">10</span><span class="op" id="2108138">*</span><span class="ident" id="2108139">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108145">w</span><span class="op" id="2108146">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108151">if</span>&nbsp;<span class="ident" id="2108154">w</span>&nbsp;<span class="op" id="2108156">&lt;</span>&nbsp;<span class="builtinfunc" id="2108158">len</span><span class="op" id="2108161">(</span><span class="ident" id="2108162">a</span><span class="op" id="2108163">.</span><span class="ident" id="2108164">d</span><span class="op" id="2108165">)</span>&nbsp;<span class="op" id="2108167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108172">a</span><span class="op" id="2108173">.</span><span class="ident" id="2108174">d</span><span class="op" id="2108175">[</span><span class="ident" id="2108176">w</span><span class="op" id="2108177">]</span>&nbsp;<span class="op" id="2108179">=</span>&nbsp;<span class="builtintype" id="2108181">byte</span><span class="op" id="2108185">(</span><span class="ident" id="2108186">rem</span>&nbsp;<span class="op" id="2108190">+</span>&nbsp;<span class="string" id="2108192">&#39;0&#39;</span><span class="op" id="2108195">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108199">}</span>&nbsp;<span class="keyword" id="2108201">else</span>&nbsp;<span class="keyword" id="2108206">if</span>&nbsp;<span class="ident" id="2108209">rem</span>&nbsp;<span class="op" id="2108213">!=</span>&nbsp;<span class="num" id="2108216">0</span>&nbsp;<span class="op" id="2108218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108223">a</span><span class="op" id="2108224">.</span><span class="ident" id="2108225">trunc</span>&nbsp;<span class="op" id="2108231">=</span>&nbsp;<span class="builtintype" id="2108233">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108244">n</span>&nbsp;<span class="op" id="2108246">=</span>&nbsp;<span class="ident" id="2108248">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108253">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2108257">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108284">for</span>&nbsp;<span class="ident" id="2108288">n</span>&nbsp;<span class="op" id="2108290">&gt;</span>&nbsp;<span class="num" id="2108292">0</span>&nbsp;<span class="op" id="2108294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108298">quo</span>&nbsp;<span class="op" id="2108302">:=</span>&nbsp;<span class="ident" id="2108305">n</span>&nbsp;<span class="op" id="2108307">/</span>&nbsp;<span class="num" id="2108309">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108314">rem</span>&nbsp;<span class="op" id="2108318">:=</span>&nbsp;<span class="ident" id="2108321">n</span>&nbsp;<span class="op" id="2108323">-</span>&nbsp;<span class="num" id="2108325">10</span><span class="op" id="2108327">*</span><span class="ident" id="2108328">quo</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108334">w</span><span class="op" id="2108335">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108340">if</span>&nbsp;<span class="ident" id="2108343">w</span>&nbsp;<span class="op" id="2108345">&lt;</span>&nbsp;<span class="builtinfunc" id="2108347">len</span><span class="op" id="2108350">(</span><span class="ident" id="2108351">a</span><span class="op" id="2108352">.</span><span class="ident" id="2108353">d</span><span class="op" id="2108354">)</span>&nbsp;<span class="op" id="2108356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108361">a</span><span class="op" id="2108362">.</span><span class="ident" id="2108363">d</span><span class="op" id="2108364">[</span><span class="ident" id="2108365">w</span><span class="op" id="2108366">]</span>&nbsp;<span class="op" id="2108368">=</span>&nbsp;<span class="builtintype" id="2108370">byte</span><span class="op" id="2108374">(</span><span class="ident" id="2108375">rem</span>&nbsp;<span class="op" id="2108379">+</span>&nbsp;<span class="string" id="2108381">&#39;0&#39;</span><span class="op" id="2108384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108388">}</span>&nbsp;<span class="keyword" id="2108390">else</span>&nbsp;<span class="keyword" id="2108395">if</span>&nbsp;<span class="ident" id="2108398">rem</span>&nbsp;<span class="op" id="2108402">!=</span>&nbsp;<span class="num" id="2108405">0</span>&nbsp;<span class="op" id="2108407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108412">a</span><span class="op" id="2108413">.</span><span class="ident" id="2108414">trunc</span>&nbsp;<span class="op" id="2108420">=</span>&nbsp;<span class="builtintype" id="2108422">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108433">n</span>&nbsp;<span class="op" id="2108435">=</span>&nbsp;<span class="ident" id="2108437">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108446">a</span><span class="op" id="2108447">.</span><span class="ident" id="2108448">nd</span>&nbsp;<span class="op" id="2108451">+=</span>&nbsp;<span class="ident" id="2108454">delta</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108461">if</span>&nbsp;<span class="ident" id="2108464">a</span><span class="op" id="2108465">.</span><span class="ident" id="2108466">nd</span>&nbsp;<span class="op" id="2108469">&gt;=</span>&nbsp;<span class="builtinfunc" id="2108472">len</span><span class="op" id="2108475">(</span><span class="ident" id="2108476">a</span><span class="op" id="2108477">.</span><span class="ident" id="2108478">d</span><span class="op" id="2108479">)</span>&nbsp;<span class="op" id="2108481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108485">a</span><span class="op" id="2108486">.</span><span class="ident" id="2108487">nd</span>&nbsp;<span class="op" id="2108490">=</span>&nbsp;<span class="builtinfunc" id="2108492">len</span><span class="op" id="2108495">(</span><span class="ident" id="2108496">a</span><span class="op" id="2108497">.</span><span class="ident" id="2108498">d</span><span class="op" id="2108499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108505">a</span><span class="op" id="2108506">.</span><span class="ident" id="2108507">dp</span>&nbsp;<span class="op" id="2108510">+=</span>&nbsp;<span class="ident" id="2108513">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108520">trim</span><span class="op" id="2108524">(</span><span class="ident" id="2108525">a</span><span class="op" id="2108526">)</span><br>
<span class="lineno">275</span><span class="op" id="2108528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2108531">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="2108578">func</span>&nbsp;<span class="op" id="2108583">(</span><span class="ident" id="2108584">a</span>&nbsp;<span class="op" id="2108586">*</span><span class="ident" id="2108587">decimal</span><span class="op" id="2108594">)</span>&nbsp;<span class="ident" id="2108596">Shift</span><span class="op" id="2108601">(</span><span class="ident" id="2108602">k</span>&nbsp;<span class="builtintype" id="2108604">int</span><span class="op" id="2108607">)</span>&nbsp;<span class="op" id="2108609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108612">switch</span>&nbsp;<span class="op" id="2108619">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108622">case</span>&nbsp;<span class="ident" id="2108627">a</span><span class="op" id="2108628">.</span><span class="ident" id="2108629">nd</span>&nbsp;<span class="op" id="2108632">==</span>&nbsp;<span class="num" id="2108635">0</span><span class="op" id="2108636">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2108640">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108666">case</span>&nbsp;<span class="ident" id="2108671">k</span>&nbsp;<span class="op" id="2108673">&gt;</span>&nbsp;<span class="num" id="2108675">0</span><span class="op" id="2108676">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108680">for</span>&nbsp;<span class="ident" id="2108684">k</span>&nbsp;<span class="op" id="2108686">&gt;</span>&nbsp;<span class="ident" id="2108688">maxShift</span>&nbsp;<span class="op" id="2108697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108702">leftShift</span><span class="op" id="2108711">(</span><span class="ident" id="2108712">a</span><span class="op" id="2108713">,</span>&nbsp;<span class="ident" id="2108715">maxShift</span><span class="op" id="2108723">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108728">k</span>&nbsp;<span class="op" id="2108730">-=</span>&nbsp;<span class="ident" id="2108733">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108748">leftShift</span><span class="op" id="2108757">(</span><span class="ident" id="2108758">a</span><span class="op" id="2108759">,</span>&nbsp;<span class="builtintype" id="2108761">uint</span><span class="op" id="2108765">(</span><span class="ident" id="2108766">k</span><span class="op" id="2108767">)</span><span class="op" id="2108768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108771">case</span>&nbsp;<span class="ident" id="2108776">k</span>&nbsp;<span class="op" id="2108778">&lt;</span>&nbsp;<span class="num" id="2108780">0</span><span class="op" id="2108781">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108785">for</span>&nbsp;<span class="ident" id="2108789">k</span>&nbsp;<span class="op" id="2108791">&lt;</span>&nbsp;<span class="op" id="2108793">-</span><span class="ident" id="2108794">maxShift</span>&nbsp;<span class="op" id="2108803">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108808">rightShift</span><span class="op" id="2108818">(</span><span class="ident" id="2108819">a</span><span class="op" id="2108820">,</span>&nbsp;<span class="ident" id="2108822">maxShift</span><span class="op" id="2108830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108835">k</span>&nbsp;<span class="op" id="2108837">+=</span>&nbsp;<span class="ident" id="2108840">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108855">rightShift</span><span class="op" id="2108865">(</span><span class="ident" id="2108866">a</span><span class="op" id="2108867">,</span>&nbsp;<span class="builtintype" id="2108869">uint</span><span class="op" id="2108873">(</span><span class="op" id="2108874">-</span><span class="ident" id="2108875">k</span><span class="op" id="2108876">)</span><span class="op" id="2108877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108880">}</span><br>
<span class="lineno">295</span><span class="op" id="2108882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2108885">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="2108935">func</span>&nbsp;<span class="ident" id="2108940">shouldRoundUp</span><span class="op" id="2108953">(</span><span class="ident" id="2108954">a</span>&nbsp;<span class="op" id="2108956">*</span><span class="ident" id="2108957">decimal</span><span class="op" id="2108964">,</span>&nbsp;<span class="ident" id="2108966">nd</span>&nbsp;<span class="builtintype" id="2108969">int</span><span class="op" id="2108972">)</span>&nbsp;<span class="builtintype" id="2108974">bool</span>&nbsp;<span class="op" id="2108979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108982">if</span>&nbsp;<span class="ident" id="2108985">nd</span>&nbsp;<span class="op" id="2108988">&lt;</span>&nbsp;<span class="num" id="2108990">0</span>&nbsp;<span class="op" id="2108992">||</span>&nbsp;<span class="ident" id="2108995">nd</span>&nbsp;<span class="op" id="2108998">&gt;=</span>&nbsp;<span class="ident" id="2109001">a</span><span class="op" id="2109002">.</span><span class="ident" id="2109003">nd</span>&nbsp;<span class="op" id="2109006">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109010">return</span>&nbsp;<span class="builtintype" id="2109017">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109027">if</span>&nbsp;<span class="ident" id="2109030">a</span><span class="op" id="2109031">.</span><span class="ident" id="2109032">d</span><span class="op" id="2109033">[</span><span class="ident" id="2109034">nd</span><span class="op" id="2109036">]</span>&nbsp;<span class="op" id="2109038">==</span>&nbsp;<span class="string" id="2109041">&#39;5&#39;</span>&nbsp;<span class="op" id="2109045">&amp;&amp;</span>&nbsp;<span class="ident" id="2109048">nd</span><span class="op" id="2109050">+</span><span class="num" id="2109051">1</span>&nbsp;<span class="op" id="2109053">==</span>&nbsp;<span class="ident" id="2109056">a</span><span class="op" id="2109057">.</span><span class="ident" id="2109058">nd</span>&nbsp;<span class="op" id="2109061">{</span>&nbsp;<span class="comment" id="2109063">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2109100">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109177">if</span>&nbsp;<span class="ident" id="2109180">a</span><span class="op" id="2109181">.</span><span class="ident" id="2109182">trunc</span>&nbsp;<span class="op" id="2109188">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109193">return</span>&nbsp;<span class="builtintype" id="2109200">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109211">return</span>&nbsp;<span class="ident" id="2109218">nd</span>&nbsp;<span class="op" id="2109221">&gt;</span>&nbsp;<span class="num" id="2109223">0</span>&nbsp;<span class="op" id="2109225">&amp;&amp;</span>&nbsp;<span class="op" id="2109228">(</span><span class="ident" id="2109229">a</span><span class="op" id="2109230">.</span><span class="ident" id="2109231">d</span><span class="op" id="2109232">[</span><span class="ident" id="2109233">nd</span><span class="op" id="2109235">-</span><span class="num" id="2109236">1</span><span class="op" id="2109237">]</span><span class="op" id="2109238">-</span><span class="string" id="2109239">&#39;0&#39;</span><span class="op" id="2109242">)</span><span class="op" id="2109243">%</span><span class="num" id="2109244">2</span>&nbsp;<span class="op" id="2109246">!=</span>&nbsp;<span class="num" id="2109249">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2109255">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109289">return</span>&nbsp;<span class="ident" id="2109296">a</span><span class="op" id="2109297">.</span><span class="ident" id="2109298">d</span><span class="op" id="2109299">[</span><span class="ident" id="2109300">nd</span><span class="op" id="2109302">]</span>&nbsp;<span class="op" id="2109304">&gt;=</span>&nbsp;<span class="string" id="2109307">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="2109311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2109314">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="2109350">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="2109392">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2109433">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="2109449">func</span>&nbsp;<span class="op" id="2109454">(</span><span class="ident" id="2109455">a</span>&nbsp;<span class="op" id="2109457">*</span><span class="ident" id="2109458">decimal</span><span class="op" id="2109465">)</span>&nbsp;<span class="ident" id="2109467">Round</span><span class="op" id="2109472">(</span><span class="ident" id="2109473">nd</span>&nbsp;<span class="builtintype" id="2109476">int</span><span class="op" id="2109479">)</span>&nbsp;<span class="op" id="2109481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109484">if</span>&nbsp;<span class="ident" id="2109487">nd</span>&nbsp;<span class="op" id="2109490">&lt;</span>&nbsp;<span class="num" id="2109492">0</span>&nbsp;<span class="op" id="2109494">||</span>&nbsp;<span class="ident" id="2109497">nd</span>&nbsp;<span class="op" id="2109500">&gt;=</span>&nbsp;<span class="ident" id="2109503">a</span><span class="op" id="2109504">.</span><span class="ident" id="2109505">nd</span>&nbsp;<span class="op" id="2109508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109512">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109523">if</span>&nbsp;<span class="ident" id="2109526">shouldRoundUp</span><span class="op" id="2109539">(</span><span class="ident" id="2109540">a</span><span class="op" id="2109541">,</span>&nbsp;<span class="ident" id="2109543">nd</span><span class="op" id="2109545">)</span>&nbsp;<span class="op" id="2109547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109551">a</span><span class="op" id="2109552">.</span><span class="ident" id="2109553">RoundUp</span><span class="op" id="2109560">(</span><span class="ident" id="2109561">nd</span><span class="op" id="2109563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109566">}</span>&nbsp;<span class="keyword" id="2109568">else</span>&nbsp;<span class="op" id="2109573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109577">a</span><span class="op" id="2109578">.</span><span class="ident" id="2109579">RoundDown</span><span class="op" id="2109588">(</span><span class="ident" id="2109589">nd</span><span class="op" id="2109591">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109594">}</span><br>
<span class="lineno"></span><span class="op" id="2109596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2109599">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2109640">func</span>&nbsp;<span class="op" id="2109645">(</span><span class="ident" id="2109646">a</span>&nbsp;<span class="op" id="2109648">*</span><span class="ident" id="2109649">decimal</span><span class="op" id="2109656">)</span>&nbsp;<span class="ident" id="2109658">RoundDown</span><span class="op" id="2109667">(</span><span class="ident" id="2109668">nd</span>&nbsp;<span class="builtintype" id="2109671">int</span><span class="op" id="2109674">)</span>&nbsp;<span class="op" id="2109676">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109679">if</span>&nbsp;<span class="ident" id="2109682">nd</span>&nbsp;<span class="op" id="2109685">&lt;</span>&nbsp;<span class="num" id="2109687">0</span>&nbsp;<span class="op" id="2109689">||</span>&nbsp;<span class="ident" id="2109692">nd</span>&nbsp;<span class="op" id="2109695">&gt;=</span>&nbsp;<span class="ident" id="2109698">a</span><span class="op" id="2109699">.</span><span class="ident" id="2109700">nd</span>&nbsp;<span class="op" id="2109703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109707">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109718">a</span><span class="op" id="2109719">.</span><span class="ident" id="2109720">nd</span>&nbsp;<span class="op" id="2109723">=</span>&nbsp;<span class="ident" id="2109725">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109729">trim</span><span class="op" id="2109733">(</span><span class="ident" id="2109734">a</span><span class="op" id="2109735">)</span><br>
<span class="lineno">335</span><span class="op" id="2109737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2109740">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2109779">func</span>&nbsp;<span class="op" id="2109784">(</span><span class="ident" id="2109785">a</span>&nbsp;<span class="op" id="2109787">*</span><span class="ident" id="2109788">decimal</span><span class="op" id="2109795">)</span>&nbsp;<span class="ident" id="2109797">RoundUp</span><span class="op" id="2109804">(</span><span class="ident" id="2109805">nd</span>&nbsp;<span class="builtintype" id="2109808">int</span><span class="op" id="2109811">)</span>&nbsp;<span class="op" id="2109813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109816">if</span>&nbsp;<span class="ident" id="2109819">nd</span>&nbsp;<span class="op" id="2109822">&lt;</span>&nbsp;<span class="num" id="2109824">0</span>&nbsp;<span class="op" id="2109826">||</span>&nbsp;<span class="ident" id="2109829">nd</span>&nbsp;<span class="op" id="2109832">&gt;=</span>&nbsp;<span class="ident" id="2109835">a</span><span class="op" id="2109836">.</span><span class="ident" id="2109837">nd</span>&nbsp;<span class="op" id="2109840">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109844">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2109856">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109869">for</span>&nbsp;<span class="ident" id="2109873">i</span>&nbsp;<span class="op" id="2109875">:=</span>&nbsp;<span class="ident" id="2109878">nd</span>&nbsp;<span class="op" id="2109881">-</span>&nbsp;<span class="num" id="2109883">1</span><span class="op" id="2109884">;</span>&nbsp;<span class="ident" id="2109886">i</span>&nbsp;<span class="op" id="2109888">&gt;=</span>&nbsp;<span class="num" id="2109891">0</span><span class="op" id="2109892">;</span>&nbsp;<span class="ident" id="2109894">i</span><span class="op" id="2109895">--</span>&nbsp;<span class="op" id="2109898">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109902">c</span>&nbsp;<span class="op" id="2109904">:=</span>&nbsp;<span class="ident" id="2109907">a</span><span class="op" id="2109908">.</span><span class="ident" id="2109909">d</span><span class="op" id="2109910">[</span><span class="ident" id="2109911">i</span><span class="op" id="2109912">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109916">if</span>&nbsp;<span class="ident" id="2109919">c</span>&nbsp;<span class="op" id="2109921">&lt;</span>&nbsp;<span class="string" id="2109923">&#39;9&#39;</span>&nbsp;<span class="op" id="2109927">{</span>&nbsp;<span class="comment" id="2109929">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109961">a</span><span class="op" id="2109962">.</span><span class="ident" id="2109963">d</span><span class="op" id="2109964">[</span><span class="ident" id="2109965">i</span><span class="op" id="2109966">]</span><span class="op" id="2109967">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109973">a</span><span class="op" id="2109974">.</span><span class="ident" id="2109975">nd</span>&nbsp;<span class="op" id="2109978">=</span>&nbsp;<span class="ident" id="2109980">i</span>&nbsp;<span class="op" id="2109982">+</span>&nbsp;<span class="num" id="2109984">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109989">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2110005">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2110027">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110079">a</span><span class="op" id="2110080">.</span><span class="ident" id="2110081">d</span><span class="op" id="2110082">[</span><span class="num" id="2110083">0</span><span class="op" id="2110084">]</span>&nbsp;<span class="op" id="2110086">=</span>&nbsp;<span class="string" id="2110088">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110093">a</span><span class="op" id="2110094">.</span><span class="ident" id="2110095">nd</span>&nbsp;<span class="op" id="2110098">=</span>&nbsp;<span class="num" id="2110100">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110103">a</span><span class="op" id="2110104">.</span><span class="ident" id="2110105">dp</span><span class="op" id="2110107">++</span><br>
<span class="lineno"></span><span class="op" id="2110110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="2110113">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="2110161">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2110194">func</span>&nbsp;<span class="op" id="2110199">(</span><span class="ident" id="2110200">a</span>&nbsp;<span class="op" id="2110202">*</span><span class="ident" id="2110203">decimal</span><span class="op" id="2110210">)</span>&nbsp;<span class="ident" id="2110212">RoundedInteger</span><span class="op" id="2110226">(</span><span class="op" id="2110227">)</span>&nbsp;<span class="builtintype" id="2110229">uint64</span>&nbsp;<span class="op" id="2110236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110239">if</span>&nbsp;<span class="ident" id="2110242">a</span><span class="op" id="2110243">.</span><span class="ident" id="2110244">dp</span>&nbsp;<span class="op" id="2110247">&gt;</span>&nbsp;<span class="num" id="2110249">20</span>&nbsp;<span class="op" id="2110252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110256">return</span>&nbsp;<span class="num" id="2110263">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110286">var</span>&nbsp;<span class="ident" id="2110290">i</span>&nbsp;<span class="builtintype" id="2110292">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110297">n</span>&nbsp;<span class="op" id="2110299">:=</span>&nbsp;<span class="builtintype" id="2110302">uint64</span><span class="op" id="2110308">(</span><span class="num" id="2110309">0</span><span class="op" id="2110310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110313">for</span>&nbsp;<span class="ident" id="2110317">i</span>&nbsp;<span class="op" id="2110319">=</span>&nbsp;<span class="num" id="2110321">0</span><span class="op" id="2110322">;</span>&nbsp;<span class="ident" id="2110324">i</span>&nbsp;<span class="op" id="2110326">&lt;</span>&nbsp;<span class="ident" id="2110328">a</span><span class="op" id="2110329">.</span><span class="ident" id="2110330">dp</span>&nbsp;<span class="op" id="2110333">&amp;&amp;</span>&nbsp;<span class="ident" id="2110336">i</span>&nbsp;<span class="op" id="2110338">&lt;</span>&nbsp;<span class="ident" id="2110340">a</span><span class="op" id="2110341">.</span><span class="ident" id="2110342">nd</span><span class="op" id="2110344">;</span>&nbsp;<span class="ident" id="2110346">i</span><span class="op" id="2110347">++</span>&nbsp;<span class="op" id="2110350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110354">n</span>&nbsp;<span class="op" id="2110356">=</span>&nbsp;<span class="ident" id="2110358">n</span><span class="op" id="2110359">*</span><span class="num" id="2110360">10</span>&nbsp;<span class="op" id="2110363">+</span>&nbsp;<span class="builtintype" id="2110365">uint64</span><span class="op" id="2110371">(</span><span class="ident" id="2110372">a</span><span class="op" id="2110373">.</span><span class="ident" id="2110374">d</span><span class="op" id="2110375">[</span><span class="ident" id="2110376">i</span><span class="op" id="2110377">]</span><span class="op" id="2110378">-</span><span class="string" id="2110379">&#39;0&#39;</span><span class="op" id="2110382">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110388">for</span>&nbsp;<span class="op" id="2110392">;</span>&nbsp;<span class="ident" id="2110394">i</span>&nbsp;<span class="op" id="2110396">&lt;</span>&nbsp;<span class="ident" id="2110398">a</span><span class="op" id="2110399">.</span><span class="ident" id="2110400">dp</span><span class="op" id="2110402">;</span>&nbsp;<span class="ident" id="2110404">i</span><span class="op" id="2110405">++</span>&nbsp;<span class="op" id="2110408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110412">n</span>&nbsp;<span class="op" id="2110414">*=</span>&nbsp;<span class="num" id="2110417">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110424">if</span>&nbsp;<span class="ident" id="2110427">shouldRoundUp</span><span class="op" id="2110440">(</span><span class="ident" id="2110441">a</span><span class="op" id="2110442">,</span>&nbsp;<span class="ident" id="2110444">a</span><span class="op" id="2110445">.</span><span class="ident" id="2110446">dp</span><span class="op" id="2110448">)</span>&nbsp;<span class="op" id="2110450">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110454">n</span><span class="op" id="2110455">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110462">return</span>&nbsp;<span class="ident" id="2110469">n</span><br>
<span class="lineno"></span><span class="op" id="2110471">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
