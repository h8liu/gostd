<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html" class="current">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8392286">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8392341">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8392395">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8392446">package</span>&nbsp;<span class="ident" id="8392454">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8392459">import</span>&nbsp;<span class="op" id="8392466">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8392469">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8392478">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8392491">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8392497">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8392505">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8392516">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8392527">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8392538">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8392545">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8392548">func</span>&nbsp;<span class="ident" id="8392553">TestFileInfoHeader</span><span class="op" id="8392571">(</span><span class="ident" id="8392572">t</span>&nbsp;<span class="op" id="8392574">*</span><span class="ident" id="8392575">testing</span><span class="op" id="8392582">.</span><span class="ident" id="8392583">T</span><span class="op" id="8392584">)</span>&nbsp;<span class="op" id="8392586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392589">fi</span><span class="op" id="8392591">,</span>&nbsp;<span class="ident" id="8392593">err</span>&nbsp;<span class="op" id="8392597">:=</span>&nbsp;<span class="ident" id="8392600">os</span><span class="op" id="8392602">.</span><span class="ident" id="8392603">Stat</span><span class="op" id="8392607">(</span><span class="string" id="8392608">&#34;testdata/small.txt&#34;</span><span class="op" id="8392628">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8392631">if</span>&nbsp;<span class="ident" id="8392634">err</span>&nbsp;<span class="op" id="8392638">!=</span>&nbsp;<span class="ident" id="8392641">nil</span>&nbsp;<span class="op" id="8392645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392649">t</span><span class="op" id="8392650">.</span><span class="ident" id="8392651">Fatal</span><span class="op" id="8392656">(</span><span class="ident" id="8392657">err</span><span class="op" id="8392660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8392663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392666">h</span><span class="op" id="8392667">,</span>&nbsp;<span class="ident" id="8392669">err</span>&nbsp;<span class="op" id="8392673">:=</span>&nbsp;<span class="ident" id="8392676">FileInfoHeader</span><span class="op" id="8392690">(</span><span class="ident" id="8392691">fi</span><span class="op" id="8392693">,</span>&nbsp;<span class="string" id="8392695">&#34;&#34;</span><span class="op" id="8392697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8392700">if</span>&nbsp;<span class="ident" id="8392703">err</span>&nbsp;<span class="op" id="8392707">!=</span>&nbsp;<span class="ident" id="8392710">nil</span>&nbsp;<span class="op" id="8392714">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392718">t</span><span class="op" id="8392719">.</span><span class="ident" id="8392720">Fatalf</span><span class="op" id="8392726">(</span><span class="string" id="8392727">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="8392747">,</span>&nbsp;<span class="ident" id="8392749">err</span><span class="op" id="8392752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8392755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8392758">if</span>&nbsp;<span class="ident" id="8392761">g</span><span class="op" id="8392762">,</span>&nbsp;<span class="ident" id="8392764">e</span>&nbsp;<span class="op" id="8392766">:=</span>&nbsp;<span class="ident" id="8392769">h</span><span class="op" id="8392770">.</span><span class="ident" id="8392771">Name</span><span class="op" id="8392775">,</span>&nbsp;<span class="string" id="8392777">&#34;small.txt&#34;</span><span class="op" id="8392788">;</span>&nbsp;<span class="ident" id="8392790">g</span>&nbsp;<span class="op" id="8392792">!=</span>&nbsp;<span class="ident" id="8392795">e</span>&nbsp;<span class="op" id="8392797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392801">t</span><span class="op" id="8392802">.</span><span class="ident" id="8392803">Errorf</span><span class="op" id="8392809">(</span><span class="string" id="8392810">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8392830">,</span>&nbsp;<span class="ident" id="8392832">g</span><span class="op" id="8392833">,</span>&nbsp;<span class="ident" id="8392835">e</span><span class="op" id="8392836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8392839">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8392842">if</span>&nbsp;<span class="ident" id="8392845">g</span><span class="op" id="8392846">,</span>&nbsp;<span class="ident" id="8392848">e</span>&nbsp;<span class="op" id="8392850">:=</span>&nbsp;<span class="ident" id="8392853">h</span><span class="op" id="8392854">.</span><span class="ident" id="8392855">Mode</span><span class="op" id="8392859">,</span>&nbsp;<span class="ident" id="8392861">int64</span><span class="op" id="8392866">(</span><span class="ident" id="8392867">fi</span><span class="op" id="8392869">.</span><span class="ident" id="8392870">Mode</span><span class="op" id="8392874">(</span><span class="op" id="8392875">)</span><span class="op" id="8392876">.</span><span class="ident" id="8392877">Perm</span><span class="op" id="8392881">(</span><span class="op" id="8392882">)</span><span class="op" id="8392883">)</span><span class="op" id="8392884">|</span><span class="ident" id="8392885">c_ISREG</span><span class="op" id="8392892">;</span>&nbsp;<span class="ident" id="8392894">g</span>&nbsp;<span class="op" id="8392896">!=</span>&nbsp;<span class="ident" id="8392899">e</span>&nbsp;<span class="op" id="8392901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392905">t</span><span class="op" id="8392906">.</span><span class="ident" id="8392907">Errorf</span><span class="op" id="8392913">(</span><span class="string" id="8392914">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="8392936">,</span>&nbsp;<span class="ident" id="8392938">g</span><span class="op" id="8392939">,</span>&nbsp;<span class="ident" id="8392941">e</span><span class="op" id="8392942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8392945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8392948">if</span>&nbsp;<span class="ident" id="8392951">g</span><span class="op" id="8392952">,</span>&nbsp;<span class="ident" id="8392954">e</span>&nbsp;<span class="op" id="8392956">:=</span>&nbsp;<span class="ident" id="8392959">h</span><span class="op" id="8392960">.</span><span class="ident" id="8392961">Size</span><span class="op" id="8392965">,</span>&nbsp;<span class="ident" id="8392967">int64</span><span class="op" id="8392972">(</span><span class="num" id="8392973">5</span><span class="op" id="8392974">)</span><span class="op" id="8392975">;</span>&nbsp;<span class="ident" id="8392977">g</span>&nbsp;<span class="op" id="8392979">!=</span>&nbsp;<span class="ident" id="8392982">e</span>&nbsp;<span class="op" id="8392984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392988">t</span><span class="op" id="8392989">.</span><span class="ident" id="8392990">Errorf</span><span class="op" id="8392996">(</span><span class="string" id="8392997">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8393017">,</span>&nbsp;<span class="ident" id="8393019">g</span><span class="op" id="8393020">,</span>&nbsp;<span class="ident" id="8393022">e</span><span class="op" id="8393023">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8393029">if</span>&nbsp;<span class="ident" id="8393032">g</span><span class="op" id="8393033">,</span>&nbsp;<span class="ident" id="8393035">e</span>&nbsp;<span class="op" id="8393037">:=</span>&nbsp;<span class="ident" id="8393040">h</span><span class="op" id="8393041">.</span><span class="ident" id="8393042">ModTime</span><span class="op" id="8393049">,</span>&nbsp;<span class="ident" id="8393051">fi</span><span class="op" id="8393053">.</span><span class="ident" id="8393054">ModTime</span><span class="op" id="8393061">(</span><span class="op" id="8393062">)</span><span class="op" id="8393063">;</span>&nbsp;<span class="op" id="8393065">!</span><span class="ident" id="8393066">g</span><span class="op" id="8393067">.</span><span class="ident" id="8393068">Equal</span><span class="op" id="8393073">(</span><span class="ident" id="8393074">e</span><span class="op" id="8393075">)</span>&nbsp;<span class="op" id="8393077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393081">t</span><span class="op" id="8393082">.</span><span class="ident" id="8393083">Errorf</span><span class="op" id="8393089">(</span><span class="string" id="8393090">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8393113">,</span>&nbsp;<span class="ident" id="8393115">g</span><span class="op" id="8393116">,</span>&nbsp;<span class="ident" id="8393118">e</span><span class="op" id="8393119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8393125">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8393183">if</span>&nbsp;<span class="ident" id="8393186">_</span><span class="op" id="8393187">,</span>&nbsp;<span class="ident" id="8393189">err</span>&nbsp;<span class="op" id="8393193">:=</span>&nbsp;<span class="ident" id="8393196">FileInfoHeader</span><span class="op" id="8393210">(</span><span class="ident" id="8393211">nil</span><span class="op" id="8393214">,</span>&nbsp;<span class="string" id="8393216">&#34;&#34;</span><span class="op" id="8393218">)</span><span class="op" id="8393219">;</span>&nbsp;<span class="ident" id="8393221">err</span>&nbsp;<span class="op" id="8393225">==</span>&nbsp;<span class="ident" id="8393228">nil</span>&nbsp;<span class="op" id="8393232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393236">t</span><span class="op" id="8393237">.</span><span class="ident" id="8393238">Fatalf</span><span class="op" id="8393244">(</span><span class="string" id="8393245">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="8393296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393299">}</span><br>
<span class="lineno"></span><span class="op" id="8393301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8393304">func</span>&nbsp;<span class="ident" id="8393309">TestFileInfoHeaderDir</span><span class="op" id="8393330">(</span><span class="ident" id="8393331">t</span>&nbsp;<span class="op" id="8393333">*</span><span class="ident" id="8393334">testing</span><span class="op" id="8393341">.</span><span class="ident" id="8393342">T</span><span class="op" id="8393343">)</span>&nbsp;<span class="op" id="8393345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393348">fi</span><span class="op" id="8393350">,</span>&nbsp;<span class="ident" id="8393352">err</span>&nbsp;<span class="op" id="8393356">:=</span>&nbsp;<span class="ident" id="8393359">os</span><span class="op" id="8393361">.</span><span class="ident" id="8393362">Stat</span><span class="op" id="8393366">(</span><span class="string" id="8393367">&#34;testdata&#34;</span><span class="op" id="8393377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8393380">if</span>&nbsp;<span class="ident" id="8393383">err</span>&nbsp;<span class="op" id="8393387">!=</span>&nbsp;<span class="ident" id="8393390">nil</span>&nbsp;<span class="op" id="8393394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393398">t</span><span class="op" id="8393399">.</span><span class="ident" id="8393400">Fatal</span><span class="op" id="8393405">(</span><span class="ident" id="8393406">err</span><span class="op" id="8393409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393412">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393415">h</span><span class="op" id="8393416">,</span>&nbsp;<span class="ident" id="8393418">err</span>&nbsp;<span class="op" id="8393422">:=</span>&nbsp;<span class="ident" id="8393425">FileInfoHeader</span><span class="op" id="8393439">(</span><span class="ident" id="8393440">fi</span><span class="op" id="8393442">,</span>&nbsp;<span class="string" id="8393444">&#34;&#34;</span><span class="op" id="8393446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8393449">if</span>&nbsp;<span class="ident" id="8393452">err</span>&nbsp;<span class="op" id="8393456">!=</span>&nbsp;<span class="ident" id="8393459">nil</span>&nbsp;<span class="op" id="8393463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393467">t</span><span class="op" id="8393468">.</span><span class="ident" id="8393469">Fatalf</span><span class="op" id="8393475">(</span><span class="string" id="8393476">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="8393496">,</span>&nbsp;<span class="ident" id="8393498">err</span><span class="op" id="8393501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8393507">if</span>&nbsp;<span class="ident" id="8393510">g</span><span class="op" id="8393511">,</span>&nbsp;<span class="ident" id="8393513">e</span>&nbsp;<span class="op" id="8393515">:=</span>&nbsp;<span class="ident" id="8393518">h</span><span class="op" id="8393519">.</span><span class="ident" id="8393520">Name</span><span class="op" id="8393524">,</span>&nbsp;<span class="string" id="8393526">&#34;testdata/&#34;</span><span class="op" id="8393537">;</span>&nbsp;<span class="ident" id="8393539">g</span>&nbsp;<span class="op" id="8393541">!=</span>&nbsp;<span class="ident" id="8393544">e</span>&nbsp;<span class="op" id="8393546">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393550">t</span><span class="op" id="8393551">.</span><span class="ident" id="8393552">Errorf</span><span class="op" id="8393558">(</span><span class="string" id="8393559">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8393579">,</span>&nbsp;<span class="ident" id="8393581">g</span><span class="op" id="8393582">,</span>&nbsp;<span class="ident" id="8393584">e</span><span class="op" id="8393585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8393591">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8393638">if</span>&nbsp;<span class="ident" id="8393641">g</span><span class="op" id="8393642">,</span>&nbsp;<span class="ident" id="8393644">e</span>&nbsp;<span class="op" id="8393646">:=</span>&nbsp;<span class="ident" id="8393649">h</span><span class="op" id="8393650">.</span><span class="ident" id="8393651">Mode</span><span class="op" id="8393655">&amp;^</span><span class="ident" id="8393657">c_ISGID</span><span class="op" id="8393664">,</span>&nbsp;<span class="ident" id="8393666">int64</span><span class="op" id="8393671">(</span><span class="ident" id="8393672">fi</span><span class="op" id="8393674">.</span><span class="ident" id="8393675">Mode</span><span class="op" id="8393679">(</span><span class="op" id="8393680">)</span><span class="op" id="8393681">.</span><span class="ident" id="8393682">Perm</span><span class="op" id="8393686">(</span><span class="op" id="8393687">)</span><span class="op" id="8393688">)</span><span class="op" id="8393689">|</span><span class="ident" id="8393690">c_ISDIR</span><span class="op" id="8393697">;</span>&nbsp;<span class="ident" id="8393699">g</span>&nbsp;<span class="op" id="8393701">!=</span>&nbsp;<span class="ident" id="8393704">e</span>&nbsp;<span class="op" id="8393706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393710">t</span><span class="op" id="8393711">.</span><span class="ident" id="8393712">Errorf</span><span class="op" id="8393718">(</span><span class="string" id="8393719">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="8393741">,</span>&nbsp;<span class="ident" id="8393743">g</span><span class="op" id="8393744">,</span>&nbsp;<span class="ident" id="8393746">e</span><span class="op" id="8393747">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8393753">if</span>&nbsp;<span class="ident" id="8393756">g</span><span class="op" id="8393757">,</span>&nbsp;<span class="ident" id="8393759">e</span>&nbsp;<span class="op" id="8393761">:=</span>&nbsp;<span class="ident" id="8393764">h</span><span class="op" id="8393765">.</span><span class="ident" id="8393766">Size</span><span class="op" id="8393770">,</span>&nbsp;<span class="ident" id="8393772">int64</span><span class="op" id="8393777">(</span><span class="num" id="8393778">0</span><span class="op" id="8393779">)</span><span class="op" id="8393780">;</span>&nbsp;<span class="ident" id="8393782">g</span>&nbsp;<span class="op" id="8393784">!=</span>&nbsp;<span class="ident" id="8393787">e</span>&nbsp;<span class="op" id="8393789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393793">t</span><span class="op" id="8393794">.</span><span class="ident" id="8393795">Errorf</span><span class="op" id="8393801">(</span><span class="string" id="8393802">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8393822">,</span>&nbsp;<span class="ident" id="8393824">g</span><span class="op" id="8393825">,</span>&nbsp;<span class="ident" id="8393827">e</span><span class="op" id="8393828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8393834">if</span>&nbsp;<span class="ident" id="8393837">g</span><span class="op" id="8393838">,</span>&nbsp;<span class="ident" id="8393840">e</span>&nbsp;<span class="op" id="8393842">:=</span>&nbsp;<span class="ident" id="8393845">h</span><span class="op" id="8393846">.</span><span class="ident" id="8393847">ModTime</span><span class="op" id="8393854">,</span>&nbsp;<span class="ident" id="8393856">fi</span><span class="op" id="8393858">.</span><span class="ident" id="8393859">ModTime</span><span class="op" id="8393866">(</span><span class="op" id="8393867">)</span><span class="op" id="8393868">;</span>&nbsp;<span class="op" id="8393870">!</span><span class="ident" id="8393871">g</span><span class="op" id="8393872">.</span><span class="ident" id="8393873">Equal</span><span class="op" id="8393878">(</span><span class="ident" id="8393879">e</span><span class="op" id="8393880">)</span>&nbsp;<span class="op" id="8393882">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393886">t</span><span class="op" id="8393887">.</span><span class="ident" id="8393888">Errorf</span><span class="op" id="8393894">(</span><span class="string" id="8393895">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8393918">,</span>&nbsp;<span class="ident" id="8393920">g</span><span class="op" id="8393921">,</span>&nbsp;<span class="ident" id="8393923">e</span><span class="op" id="8393924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8393927">}</span><br>
<span class="lineno"></span><span class="op" id="8393929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8393932">func</span>&nbsp;<span class="ident" id="8393937">TestFileInfoHeaderSymlink</span><span class="op" id="8393962">(</span><span class="ident" id="8393963">t</span>&nbsp;<span class="op" id="8393965">*</span><span class="ident" id="8393966">testing</span><span class="op" id="8393973">.</span><span class="ident" id="8393974">T</span><span class="op" id="8393975">)</span>&nbsp;<span class="op" id="8393977">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8393980">h</span><span class="op" id="8393981">,</span>&nbsp;<span class="ident" id="8393983">err</span>&nbsp;<span class="op" id="8393987">:=</span>&nbsp;<span class="ident" id="8393990">FileInfoHeader</span><span class="op" id="8394004">(</span><span class="ident" id="8394005">symlink</span><span class="op" id="8394012">{</span><span class="op" id="8394013">}</span><span class="op" id="8394014">,</span>&nbsp;<span class="string" id="8394016">&#34;some-target&#34;</span><span class="op" id="8394029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8394032">if</span>&nbsp;<span class="ident" id="8394035">err</span>&nbsp;<span class="op" id="8394039">!=</span>&nbsp;<span class="ident" id="8394042">nil</span>&nbsp;<span class="op" id="8394046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394050">t</span><span class="op" id="8394051">.</span><span class="ident" id="8394052">Fatal</span><span class="op" id="8394057">(</span><span class="ident" id="8394058">err</span><span class="op" id="8394061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8394064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8394067">if</span>&nbsp;<span class="ident" id="8394070">g</span><span class="op" id="8394071">,</span>&nbsp;<span class="ident" id="8394073">e</span>&nbsp;<span class="op" id="8394075">:=</span>&nbsp;<span class="ident" id="8394078">h</span><span class="op" id="8394079">.</span><span class="ident" id="8394080">Name</span><span class="op" id="8394084">,</span>&nbsp;<span class="string" id="8394086">&#34;some-symlink&#34;</span><span class="op" id="8394100">;</span>&nbsp;<span class="ident" id="8394102">g</span>&nbsp;<span class="op" id="8394104">!=</span>&nbsp;<span class="ident" id="8394107">e</span>&nbsp;<span class="op" id="8394109">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394113">t</span><span class="op" id="8394114">.</span><span class="ident" id="8394115">Errorf</span><span class="op" id="8394121">(</span><span class="string" id="8394122">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8394142">,</span>&nbsp;<span class="ident" id="8394144">g</span><span class="op" id="8394145">,</span>&nbsp;<span class="ident" id="8394147">e</span><span class="op" id="8394148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8394151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8394154">if</span>&nbsp;<span class="ident" id="8394157">g</span><span class="op" id="8394158">,</span>&nbsp;<span class="ident" id="8394160">e</span>&nbsp;<span class="op" id="8394162">:=</span>&nbsp;<span class="ident" id="8394165">h</span><span class="op" id="8394166">.</span><span class="ident" id="8394167">Linkname</span><span class="op" id="8394175">,</span>&nbsp;<span class="string" id="8394177">&#34;some-target&#34;</span><span class="op" id="8394190">;</span>&nbsp;<span class="ident" id="8394192">g</span>&nbsp;<span class="op" id="8394194">!=</span>&nbsp;<span class="ident" id="8394197">e</span>&nbsp;<span class="op" id="8394199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394203">t</span><span class="op" id="8394204">.</span><span class="ident" id="8394205">Errorf</span><span class="op" id="8394211">(</span><span class="string" id="8394212">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8394236">,</span>&nbsp;<span class="ident" id="8394238">g</span><span class="op" id="8394239">,</span>&nbsp;<span class="ident" id="8394241">e</span><span class="op" id="8394242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8394245">}</span><br>
<span class="lineno">80</span><span class="op" id="8394247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8394250">type</span>&nbsp;<span class="ident" id="8394255">symlink</span>&nbsp;<span class="keyword" id="8394263">struct</span><span class="op" id="8394269">{</span><span class="op" id="8394270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8394273">func</span>&nbsp;<span class="op" id="8394278">(</span><span class="ident" id="8394279">symlink</span><span class="op" id="8394286">)</span>&nbsp;<span class="ident" id="8394288">Name</span><span class="op" id="8394292">(</span><span class="op" id="8394293">)</span>&nbsp;<span class="builtintype" id="8394295">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8394308">{</span>&nbsp;<span class="keyword" id="8394310">return</span>&nbsp;<span class="string" id="8394317">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="8394332">}</span><br>
<span class="lineno">85</span><span class="keyword" id="8394334">func</span>&nbsp;<span class="op" id="8394339">(</span><span class="ident" id="8394340">symlink</span><span class="op" id="8394347">)</span>&nbsp;<span class="ident" id="8394349">Size</span><span class="op" id="8394353">(</span><span class="op" id="8394354">)</span>&nbsp;<span class="ident" id="8394356">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8394369">{</span>&nbsp;<span class="keyword" id="8394371">return</span>&nbsp;<span class="num" id="8394378">0</span>&nbsp;<span class="op" id="8394380">}</span><br>
<span class="lineno"></span><span class="keyword" id="8394382">func</span>&nbsp;<span class="op" id="8394387">(</span><span class="ident" id="8394388">symlink</span><span class="op" id="8394395">)</span>&nbsp;<span class="ident" id="8394397">Mode</span><span class="op" id="8394401">(</span><span class="op" id="8394402">)</span>&nbsp;<span class="ident" id="8394404">os</span><span class="op" id="8394406">.</span><span class="ident" id="8394407">FileMode</span>&nbsp;&nbsp;<span class="op" id="8394417">{</span>&nbsp;<span class="keyword" id="8394419">return</span>&nbsp;<span class="ident" id="8394426">os</span><span class="op" id="8394428">.</span><span class="ident" id="8394429">ModeSymlink</span>&nbsp;<span class="op" id="8394441">}</span><br>
<span class="lineno"></span><span class="keyword" id="8394443">func</span>&nbsp;<span class="op" id="8394448">(</span><span class="ident" id="8394449">symlink</span><span class="op" id="8394456">)</span>&nbsp;<span class="ident" id="8394458">ModTime</span><span class="op" id="8394465">(</span><span class="op" id="8394466">)</span>&nbsp;<span class="ident" id="8394468">time</span><span class="op" id="8394472">.</span><span class="ident" id="8394473">Time</span>&nbsp;<span class="op" id="8394478">{</span>&nbsp;<span class="keyword" id="8394480">return</span>&nbsp;<span class="ident" id="8394487">time</span><span class="op" id="8394491">.</span><span class="ident" id="8394492">Time</span><span class="op" id="8394496">{</span><span class="op" id="8394497">}</span>&nbsp;<span class="op" id="8394499">}</span><br>
<span class="lineno"></span><span class="keyword" id="8394501">func</span>&nbsp;<span class="op" id="8394506">(</span><span class="ident" id="8394507">symlink</span><span class="op" id="8394514">)</span>&nbsp;<span class="ident" id="8394516">IsDir</span><span class="op" id="8394521">(</span><span class="op" id="8394522">)</span>&nbsp;<span class="builtintype" id="8394524">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8394536">{</span>&nbsp;<span class="keyword" id="8394538">return</span>&nbsp;<span class="builtintype" id="8394545">false</span>&nbsp;<span class="op" id="8394551">}</span><br>
<span class="lineno"></span><span class="keyword" id="8394553">func</span>&nbsp;<span class="op" id="8394558">(</span><span class="ident" id="8394559">symlink</span><span class="op" id="8394566">)</span>&nbsp;<span class="ident" id="8394568">Sys</span><span class="op" id="8394571">(</span><span class="op" id="8394572">)</span>&nbsp;<span class="keyword" id="8394574">interface</span><span class="op" id="8394583">{</span><span class="op" id="8394584">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8394588">{</span>&nbsp;<span class="keyword" id="8394590">return</span>&nbsp;<span class="ident" id="8394597">nil</span>&nbsp;<span class="op" id="8394601">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="8394604">func</span>&nbsp;<span class="ident" id="8394609">TestRoundTrip</span><span class="op" id="8394622">(</span><span class="ident" id="8394623">t</span>&nbsp;<span class="op" id="8394625">*</span><span class="ident" id="8394626">testing</span><span class="op" id="8394633">.</span><span class="ident" id="8394634">T</span><span class="op" id="8394635">)</span>&nbsp;<span class="op" id="8394637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394640">data</span>&nbsp;<span class="op" id="8394645">:=</span>&nbsp;<span class="op" id="8394648">[</span><span class="op" id="8394649">]</span><span class="builtintype" id="8394650">byte</span><span class="op" id="8394654">(</span><span class="string" id="8394655">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="8394675">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8394679">var</span>&nbsp;<span class="ident" id="8394683">b</span>&nbsp;<span class="ident" id="8394685">bytes</span><span class="op" id="8394690">.</span><span class="ident" id="8394691">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394699">tw</span>&nbsp;<span class="op" id="8394702">:=</span>&nbsp;<span class="ident" id="8394705">NewWriter</span><span class="op" id="8394714">(</span><span class="op" id="8394715">&amp;</span><span class="ident" id="8394716">b</span><span class="op" id="8394717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394720">hdr</span>&nbsp;<span class="op" id="8394724">:=</span>&nbsp;<span class="op" id="8394727">&amp;</span><span class="ident" id="8394728">Header</span><span class="op" id="8394734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394738">Name</span><span class="op" id="8394742">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8394747">&#34;file.txt&#34;</span><span class="op" id="8394757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394761">Uid</span><span class="op" id="8394764">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8394770">1</span>&nbsp;<span class="op" id="8394772">&lt;&lt;</span>&nbsp;<span class="num" id="8394775">21</span><span class="op" id="8394777">,</span>&nbsp;<span class="comment" id="8394779">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394811">Size</span><span class="op" id="8394815">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8394820">int64</span><span class="op" id="8394825">(</span><span class="builtinfunc" id="8394826">len</span><span class="op" id="8394829">(</span><span class="ident" id="8394830">data</span><span class="op" id="8394834">)</span><span class="op" id="8394835">)</span><span class="op" id="8394836">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394840">ModTime</span><span class="op" id="8394847">:</span>&nbsp;<span class="ident" id="8394849">time</span><span class="op" id="8394853">.</span><span class="ident" id="8394854">Now</span><span class="op" id="8394857">(</span><span class="op" id="8394858">)</span><span class="op" id="8394859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8394862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8394865">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8394905">hdr</span><span class="op" id="8394908">.</span><span class="ident" id="8394909">ModTime</span>&nbsp;<span class="op" id="8394917">=</span>&nbsp;<span class="ident" id="8394919">hdr</span><span class="op" id="8394922">.</span><span class="ident" id="8394923">ModTime</span><span class="op" id="8394930">.</span><span class="ident" id="8394931">Add</span><span class="op" id="8394934">(</span><span class="op" id="8394935">-</span><span class="ident" id="8394936">time</span><span class="op" id="8394940">.</span><span class="ident" id="8394941">Duration</span><span class="op" id="8394949">(</span><span class="ident" id="8394950">hdr</span><span class="op" id="8394953">.</span><span class="ident" id="8394954">ModTime</span><span class="op" id="8394961">.</span><span class="ident" id="8394962">Nanosecond</span><span class="op" id="8394972">(</span><span class="op" id="8394973">)</span><span class="op" id="8394974">)</span>&nbsp;<span class="op" id="8394976">*</span>&nbsp;<span class="ident" id="8394978">time</span><span class="op" id="8394982">.</span><span class="ident" id="8394983">Nanosecond</span><span class="op" id="8394993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8394996">if</span>&nbsp;<span class="ident" id="8394999">err</span>&nbsp;<span class="op" id="8395003">:=</span>&nbsp;<span class="ident" id="8395006">tw</span><span class="op" id="8395008">.</span><span class="ident" id="8395009">WriteHeader</span><span class="op" id="8395020">(</span><span class="ident" id="8395021">hdr</span><span class="op" id="8395024">)</span><span class="op" id="8395025">;</span>&nbsp;<span class="ident" id="8395027">err</span>&nbsp;<span class="op" id="8395031">!=</span>&nbsp;<span class="ident" id="8395034">nil</span>&nbsp;<span class="op" id="8395038">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395042">t</span><span class="op" id="8395043">.</span><span class="ident" id="8395044">Fatalf</span><span class="op" id="8395050">(</span><span class="string" id="8395051">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="8395071">,</span>&nbsp;<span class="ident" id="8395073">err</span><span class="op" id="8395076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8395082">if</span>&nbsp;<span class="ident" id="8395085">_</span><span class="op" id="8395086">,</span>&nbsp;<span class="ident" id="8395088">err</span>&nbsp;<span class="op" id="8395092">:=</span>&nbsp;<span class="ident" id="8395095">tw</span><span class="op" id="8395097">.</span><span class="ident" id="8395098">Write</span><span class="op" id="8395103">(</span><span class="ident" id="8395104">data</span><span class="op" id="8395108">)</span><span class="op" id="8395109">;</span>&nbsp;<span class="ident" id="8395111">err</span>&nbsp;<span class="op" id="8395115">!=</span>&nbsp;<span class="ident" id="8395118">nil</span>&nbsp;<span class="op" id="8395122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395126">t</span><span class="op" id="8395127">.</span><span class="ident" id="8395128">Fatalf</span><span class="op" id="8395134">(</span><span class="string" id="8395135">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="8395149">,</span>&nbsp;<span class="ident" id="8395151">err</span><span class="op" id="8395154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395157">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8395160">if</span>&nbsp;<span class="ident" id="8395163">err</span>&nbsp;<span class="op" id="8395167">:=</span>&nbsp;<span class="ident" id="8395170">tw</span><span class="op" id="8395172">.</span><span class="ident" id="8395173">Close</span><span class="op" id="8395178">(</span><span class="op" id="8395179">)</span><span class="op" id="8395180">;</span>&nbsp;<span class="ident" id="8395182">err</span>&nbsp;<span class="op" id="8395186">!=</span>&nbsp;<span class="ident" id="8395189">nil</span>&nbsp;<span class="op" id="8395193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395197">t</span><span class="op" id="8395198">.</span><span class="ident" id="8395199">Fatalf</span><span class="op" id="8395205">(</span><span class="string" id="8395206">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="8395220">,</span>&nbsp;<span class="ident" id="8395222">err</span><span class="op" id="8395225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8395232">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395250">tr</span>&nbsp;<span class="op" id="8395253">:=</span>&nbsp;<span class="ident" id="8395256">NewReader</span><span class="op" id="8395265">(</span><span class="op" id="8395266">&amp;</span><span class="ident" id="8395267">b</span><span class="op" id="8395268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395271">rHdr</span><span class="op" id="8395275">,</span>&nbsp;<span class="ident" id="8395277">err</span>&nbsp;<span class="op" id="8395281">:=</span>&nbsp;<span class="ident" id="8395284">tr</span><span class="op" id="8395286">.</span><span class="ident" id="8395287">Next</span><span class="op" id="8395291">(</span><span class="op" id="8395292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8395295">if</span>&nbsp;<span class="ident" id="8395298">err</span>&nbsp;<span class="op" id="8395302">!=</span>&nbsp;<span class="ident" id="8395305">nil</span>&nbsp;<span class="op" id="8395309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395313">t</span><span class="op" id="8395314">.</span><span class="ident" id="8395315">Fatalf</span><span class="op" id="8395321">(</span><span class="string" id="8395322">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="8395335">,</span>&nbsp;<span class="ident" id="8395337">err</span><span class="op" id="8395340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395343">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8395346">if</span>&nbsp;<span class="op" id="8395349">!</span><span class="ident" id="8395350">reflect</span><span class="op" id="8395357">.</span><span class="ident" id="8395358">DeepEqual</span><span class="op" id="8395367">(</span><span class="ident" id="8395368">rHdr</span><span class="op" id="8395372">,</span>&nbsp;<span class="ident" id="8395374">hdr</span><span class="op" id="8395377">)</span>&nbsp;<span class="op" id="8395379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395383">t</span><span class="op" id="8395384">.</span><span class="ident" id="8395385">Errorf</span><span class="op" id="8395391">(</span><span class="string" id="8395392">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8395430">,</span>&nbsp;<span class="ident" id="8395432">rHdr</span><span class="op" id="8395436">,</span>&nbsp;<span class="ident" id="8395438">hdr</span><span class="op" id="8395441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395447">rData</span><span class="op" id="8395452">,</span>&nbsp;<span class="ident" id="8395454">err</span>&nbsp;<span class="op" id="8395458">:=</span>&nbsp;<span class="ident" id="8395461">ioutil</span><span class="op" id="8395467">.</span><span class="ident" id="8395468">ReadAll</span><span class="op" id="8395475">(</span><span class="ident" id="8395476">tr</span><span class="op" id="8395478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8395481">if</span>&nbsp;<span class="ident" id="8395484">err</span>&nbsp;<span class="op" id="8395488">!=</span>&nbsp;<span class="ident" id="8395491">nil</span>&nbsp;<span class="op" id="8395495">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395499">t</span><span class="op" id="8395500">.</span><span class="ident" id="8395501">Fatalf</span><span class="op" id="8395507">(</span><span class="string" id="8395508">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="8395518">,</span>&nbsp;<span class="ident" id="8395520">err</span><span class="op" id="8395523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8395529">if</span>&nbsp;<span class="op" id="8395532">!</span><span class="ident" id="8395533">bytes</span><span class="op" id="8395538">.</span><span class="ident" id="8395539">Equal</span><span class="op" id="8395544">(</span><span class="ident" id="8395545">rData</span><span class="op" id="8395550">,</span>&nbsp;<span class="ident" id="8395552">data</span><span class="op" id="8395556">)</span>&nbsp;<span class="op" id="8395558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395562">t</span><span class="op" id="8395563">.</span><span class="ident" id="8395564">Errorf</span><span class="op" id="8395570">(</span><span class="string" id="8395571">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="8395605">,</span>&nbsp;<span class="ident" id="8395607">rData</span><span class="op" id="8395612">,</span>&nbsp;<span class="ident" id="8395614">data</span><span class="op" id="8395618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395621">}</span><br>
<span class="lineno">130</span><span class="op" id="8395623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8395626">type</span>&nbsp;<span class="ident" id="8395631">headerRoundTripTest</span>&nbsp;<span class="keyword" id="8395651">struct</span>&nbsp;<span class="op" id="8395658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395661">h</span>&nbsp;&nbsp;<span class="op" id="8395664">*</span><span class="ident" id="8395665">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395673">fm</span>&nbsp;<span class="ident" id="8395676">os</span><span class="op" id="8395678">.</span><span class="ident" id="8395679">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="8395688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8395691">func</span>&nbsp;<span class="ident" id="8395696">TestHeaderRoundTrip</span><span class="op" id="8395715">(</span><span class="ident" id="8395716">t</span>&nbsp;<span class="op" id="8395718">*</span><span class="ident" id="8395719">testing</span><span class="op" id="8395726">.</span><span class="ident" id="8395727">T</span><span class="op" id="8395728">)</span>&nbsp;<span class="op" id="8395730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395733">golden</span>&nbsp;<span class="op" id="8395740">:=</span>&nbsp;<span class="op" id="8395743">[</span><span class="op" id="8395744">]</span><span class="ident" id="8395745">headerRoundTripTest</span><span class="op" id="8395764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8395768">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395792">h</span><span class="op" id="8395793">:</span>&nbsp;<span class="op" id="8395795">&amp;</span><span class="ident" id="8395796">Header</span><span class="op" id="8395802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395808">Name</span><span class="op" id="8395812">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8395818">&#34;test.txt&#34;</span><span class="op" id="8395828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395834">Mode</span><span class="op" id="8395838">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8395844">0644</span>&nbsp;<span class="op" id="8395849">|</span>&nbsp;<span class="ident" id="8395851">c_ISREG</span><span class="op" id="8395858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395864">Size</span><span class="op" id="8395868">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8395874">12</span><span class="op" id="8395876">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395882">ModTime</span><span class="op" id="8395889">:</span>&nbsp;&nbsp;<span class="ident" id="8395892">time</span><span class="op" id="8395896">.</span><span class="ident" id="8395897">Unix</span><span class="op" id="8395901">(</span><span class="num" id="8395902">1360600916</span><span class="op" id="8395912">,</span>&nbsp;<span class="num" id="8395914">0</span><span class="op" id="8395915">)</span><span class="op" id="8395916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395922">Typeflag</span><span class="op" id="8395930">:</span>&nbsp;<span class="ident" id="8395932">TypeReg</span><span class="op" id="8395939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395944">}</span><span class="op" id="8395945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395950">fm</span><span class="op" id="8395952">:</span>&nbsp;<span class="num" id="8395954">0644</span><span class="op" id="8395958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395962">}</span><span class="op" id="8395963">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8395967">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8395983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395988">h</span><span class="op" id="8395989">:</span>&nbsp;<span class="op" id="8395991">&amp;</span><span class="ident" id="8395992">Header</span><span class="op" id="8395998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396004">Name</span><span class="op" id="8396008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8396014">&#34;hard.txt&#34;</span><span class="op" id="8396024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396030">Mode</span><span class="op" id="8396034">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396040">0644</span>&nbsp;<span class="op" id="8396045">|</span>&nbsp;<span class="ident" id="8396047">c_ISLNK</span><span class="op" id="8396054">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396060">Size</span><span class="op" id="8396064">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396070">0</span><span class="op" id="8396071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396077">ModTime</span><span class="op" id="8396084">:</span>&nbsp;&nbsp;<span class="ident" id="8396087">time</span><span class="op" id="8396091">.</span><span class="ident" id="8396092">Unix</span><span class="op" id="8396096">(</span><span class="num" id="8396097">1360600916</span><span class="op" id="8396107">,</span>&nbsp;<span class="num" id="8396109">0</span><span class="op" id="8396110">)</span><span class="op" id="8396111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396117">Typeflag</span><span class="op" id="8396125">:</span>&nbsp;<span class="ident" id="8396127">TypeLink</span><span class="op" id="8396135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396140">}</span><span class="op" id="8396141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396146">fm</span><span class="op" id="8396148">:</span>&nbsp;<span class="num" id="8396150">0644</span>&nbsp;<span class="op" id="8396155">|</span>&nbsp;<span class="ident" id="8396157">os</span><span class="op" id="8396159">.</span><span class="ident" id="8396160">ModeSymlink</span><span class="op" id="8396171">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396175">}</span><span class="op" id="8396176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8396180">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396205">h</span><span class="op" id="8396206">:</span>&nbsp;<span class="op" id="8396208">&amp;</span><span class="ident" id="8396209">Header</span><span class="op" id="8396215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396221">Name</span><span class="op" id="8396225">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8396231">&#34;link.txt&#34;</span><span class="op" id="8396241">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396247">Mode</span><span class="op" id="8396251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396257">0777</span>&nbsp;<span class="op" id="8396262">|</span>&nbsp;<span class="ident" id="8396264">c_ISLNK</span><span class="op" id="8396271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396277">Size</span><span class="op" id="8396281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396287">0</span><span class="op" id="8396288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396294">ModTime</span><span class="op" id="8396301">:</span>&nbsp;&nbsp;<span class="ident" id="8396304">time</span><span class="op" id="8396308">.</span><span class="ident" id="8396309">Unix</span><span class="op" id="8396313">(</span><span class="num" id="8396314">1360600852</span><span class="op" id="8396324">,</span>&nbsp;<span class="num" id="8396326">0</span><span class="op" id="8396327">)</span><span class="op" id="8396328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396334">Typeflag</span><span class="op" id="8396342">:</span>&nbsp;<span class="ident" id="8396344">TypeSymlink</span><span class="op" id="8396355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396360">}</span><span class="op" id="8396361">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396366">fm</span><span class="op" id="8396368">:</span>&nbsp;<span class="num" id="8396370">0777</span>&nbsp;<span class="op" id="8396375">|</span>&nbsp;<span class="ident" id="8396377">os</span><span class="op" id="8396379">.</span><span class="ident" id="8396380">ModeSymlink</span><span class="op" id="8396391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396395">}</span><span class="op" id="8396396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8396400">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396433">h</span><span class="op" id="8396434">:</span>&nbsp;<span class="op" id="8396436">&amp;</span><span class="ident" id="8396437">Header</span><span class="op" id="8396443">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396449">Name</span><span class="op" id="8396453">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8396459">&#34;dev/null&#34;</span><span class="op" id="8396469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396475">Mode</span><span class="op" id="8396479">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396485">0666</span>&nbsp;<span class="op" id="8396490">|</span>&nbsp;<span class="ident" id="8396492">c_ISCHR</span><span class="op" id="8396499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396505">Size</span><span class="op" id="8396509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396515">0</span><span class="op" id="8396516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396522">ModTime</span><span class="op" id="8396529">:</span>&nbsp;&nbsp;<span class="ident" id="8396532">time</span><span class="op" id="8396536">.</span><span class="ident" id="8396537">Unix</span><span class="op" id="8396541">(</span><span class="num" id="8396542">1360578951</span><span class="op" id="8396552">,</span>&nbsp;<span class="num" id="8396554">0</span><span class="op" id="8396555">)</span><span class="op" id="8396556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396562">Typeflag</span><span class="op" id="8396570">:</span>&nbsp;<span class="ident" id="8396572">TypeChar</span><span class="op" id="8396580">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396585">}</span><span class="op" id="8396586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396591">fm</span><span class="op" id="8396593">:</span>&nbsp;<span class="num" id="8396595">0666</span>&nbsp;<span class="op" id="8396600">|</span>&nbsp;<span class="ident" id="8396602">os</span><span class="op" id="8396604">.</span><span class="ident" id="8396605">ModeDevice</span>&nbsp;<span class="op" id="8396616">|</span>&nbsp;<span class="ident" id="8396618">os</span><span class="op" id="8396620">.</span><span class="ident" id="8396621">ModeCharDevice</span><span class="op" id="8396635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396639">}</span><span class="op" id="8396640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8396644">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396668">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396673">h</span><span class="op" id="8396674">:</span>&nbsp;<span class="op" id="8396676">&amp;</span><span class="ident" id="8396677">Header</span><span class="op" id="8396683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396689">Name</span><span class="op" id="8396693">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8396699">&#34;dev/sda&#34;</span><span class="op" id="8396708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396714">Mode</span><span class="op" id="8396718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396724">0660</span>&nbsp;<span class="op" id="8396729">|</span>&nbsp;<span class="ident" id="8396731">c_ISBLK</span><span class="op" id="8396738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396744">Size</span><span class="op" id="8396748">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396754">0</span><span class="op" id="8396755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396761">ModTime</span><span class="op" id="8396768">:</span>&nbsp;&nbsp;<span class="ident" id="8396771">time</span><span class="op" id="8396775">.</span><span class="ident" id="8396776">Unix</span><span class="op" id="8396780">(</span><span class="num" id="8396781">1360578954</span><span class="op" id="8396791">,</span>&nbsp;<span class="num" id="8396793">0</span><span class="op" id="8396794">)</span><span class="op" id="8396795">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396801">Typeflag</span><span class="op" id="8396809">:</span>&nbsp;<span class="ident" id="8396811">TypeBlock</span><span class="op" id="8396820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396825">}</span><span class="op" id="8396826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396831">fm</span><span class="op" id="8396833">:</span>&nbsp;<span class="num" id="8396835">0660</span>&nbsp;<span class="op" id="8396840">|</span>&nbsp;<span class="ident" id="8396842">os</span><span class="op" id="8396844">.</span><span class="ident" id="8396845">ModeDevice</span><span class="op" id="8396855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396859">}</span><span class="op" id="8396860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8396864">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396885">h</span><span class="op" id="8396886">:</span>&nbsp;<span class="op" id="8396888">&amp;</span><span class="ident" id="8396889">Header</span><span class="op" id="8396895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396901">Name</span><span class="op" id="8396905">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8396911">&#34;dir/&#34;</span><span class="op" id="8396917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396923">Mode</span><span class="op" id="8396927">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396933">0755</span>&nbsp;<span class="op" id="8396938">|</span>&nbsp;<span class="ident" id="8396940">c_ISDIR</span><span class="op" id="8396947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396953">Size</span><span class="op" id="8396957">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8396963">0</span><span class="op" id="8396964">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396970">ModTime</span><span class="op" id="8396977">:</span>&nbsp;&nbsp;<span class="ident" id="8396980">time</span><span class="op" id="8396984">.</span><span class="ident" id="8396985">Unix</span><span class="op" id="8396989">(</span><span class="num" id="8396990">1360601116</span><span class="op" id="8397000">,</span>&nbsp;<span class="num" id="8397002">0</span><span class="op" id="8397003">)</span><span class="op" id="8397004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397010">Typeflag</span><span class="op" id="8397018">:</span>&nbsp;<span class="ident" id="8397020">TypeDir</span><span class="op" id="8397027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397032">}</span><span class="op" id="8397033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397038">fm</span><span class="op" id="8397040">:</span>&nbsp;<span class="num" id="8397042">0755</span>&nbsp;<span class="op" id="8397047">|</span>&nbsp;<span class="ident" id="8397049">os</span><span class="op" id="8397051">.</span><span class="ident" id="8397052">ModeDir</span><span class="op" id="8397059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397063">}</span><span class="op" id="8397064">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8397068">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397089">h</span><span class="op" id="8397090">:</span>&nbsp;<span class="op" id="8397092">&amp;</span><span class="ident" id="8397093">Header</span><span class="op" id="8397099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397105">Name</span><span class="op" id="8397109">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8397115">&#34;dev/initctl&#34;</span><span class="op" id="8397128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397134">Mode</span><span class="op" id="8397138">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8397144">0600</span>&nbsp;<span class="op" id="8397149">|</span>&nbsp;<span class="ident" id="8397151">c_ISFIFO</span><span class="op" id="8397159">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397165">Size</span><span class="op" id="8397169">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8397175">0</span><span class="op" id="8397176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397182">ModTime</span><span class="op" id="8397189">:</span>&nbsp;&nbsp;<span class="ident" id="8397192">time</span><span class="op" id="8397196">.</span><span class="ident" id="8397197">Unix</span><span class="op" id="8397201">(</span><span class="num" id="8397202">1360578949</span><span class="op" id="8397212">,</span>&nbsp;<span class="num" id="8397214">0</span><span class="op" id="8397215">)</span><span class="op" id="8397216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397222">Typeflag</span><span class="op" id="8397230">:</span>&nbsp;<span class="ident" id="8397232">TypeFifo</span><span class="op" id="8397240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397245">}</span><span class="op" id="8397246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397251">fm</span><span class="op" id="8397253">:</span>&nbsp;<span class="num" id="8397255">0600</span>&nbsp;<span class="op" id="8397260">|</span>&nbsp;<span class="ident" id="8397262">os</span><span class="op" id="8397264">.</span><span class="ident" id="8397265">ModeNamedPipe</span><span class="op" id="8397278">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397282">}</span><span class="op" id="8397283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8397287">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397305">h</span><span class="op" id="8397306">:</span>&nbsp;<span class="op" id="8397308">&amp;</span><span class="ident" id="8397309">Header</span><span class="op" id="8397315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397321">Name</span><span class="op" id="8397325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8397331">&#34;bin/su&#34;</span><span class="op" id="8397339">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397345">Mode</span><span class="op" id="8397349">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8397355">0755</span>&nbsp;<span class="op" id="8397360">|</span>&nbsp;<span class="ident" id="8397362">c_ISREG</span>&nbsp;<span class="op" id="8397370">|</span>&nbsp;<span class="ident" id="8397372">c_ISUID</span><span class="op" id="8397379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397385">Size</span><span class="op" id="8397389">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8397395">23232</span><span class="op" id="8397400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397406">ModTime</span><span class="op" id="8397413">:</span>&nbsp;&nbsp;<span class="ident" id="8397416">time</span><span class="op" id="8397420">.</span><span class="ident" id="8397421">Unix</span><span class="op" id="8397425">(</span><span class="num" id="8397426">1355405093</span><span class="op" id="8397436">,</span>&nbsp;<span class="num" id="8397438">0</span><span class="op" id="8397439">)</span><span class="op" id="8397440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397446">Typeflag</span><span class="op" id="8397454">:</span>&nbsp;<span class="ident" id="8397456">TypeReg</span><span class="op" id="8397463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397468">}</span><span class="op" id="8397469">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397474">fm</span><span class="op" id="8397476">:</span>&nbsp;<span class="num" id="8397478">0755</span>&nbsp;<span class="op" id="8397483">|</span>&nbsp;<span class="ident" id="8397485">os</span><span class="op" id="8397487">.</span><span class="ident" id="8397488">ModeSetuid</span><span class="op" id="8397498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397502">}</span><span class="op" id="8397503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8397507">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397526">h</span><span class="op" id="8397527">:</span>&nbsp;<span class="op" id="8397529">&amp;</span><span class="ident" id="8397530">Header</span><span class="op" id="8397536">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397542">Name</span><span class="op" id="8397546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8397552">&#34;group.txt&#34;</span><span class="op" id="8397563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397569">Mode</span><span class="op" id="8397573">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8397579">0750</span>&nbsp;<span class="op" id="8397584">|</span>&nbsp;<span class="ident" id="8397586">c_ISREG</span>&nbsp;<span class="op" id="8397594">|</span>&nbsp;<span class="ident" id="8397596">c_ISGID</span><span class="op" id="8397603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397609">Size</span><span class="op" id="8397613">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8397619">0</span><span class="op" id="8397620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397626">ModTime</span><span class="op" id="8397633">:</span>&nbsp;&nbsp;<span class="ident" id="8397636">time</span><span class="op" id="8397640">.</span><span class="ident" id="8397641">Unix</span><span class="op" id="8397645">(</span><span class="num" id="8397646">1360602346</span><span class="op" id="8397656">,</span>&nbsp;<span class="num" id="8397658">0</span><span class="op" id="8397659">)</span><span class="op" id="8397660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397666">Typeflag</span><span class="op" id="8397674">:</span>&nbsp;<span class="ident" id="8397676">TypeReg</span><span class="op" id="8397683">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397688">}</span><span class="op" id="8397689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397694">fm</span><span class="op" id="8397696">:</span>&nbsp;<span class="num" id="8397698">0750</span>&nbsp;<span class="op" id="8397703">|</span>&nbsp;<span class="ident" id="8397705">os</span><span class="op" id="8397707">.</span><span class="ident" id="8397708">ModeSetgid</span><span class="op" id="8397718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397722">}</span><span class="op" id="8397723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8397727">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397740">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397745">h</span><span class="op" id="8397746">:</span>&nbsp;<span class="op" id="8397748">&amp;</span><span class="ident" id="8397749">Header</span><span class="op" id="8397755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397761">Name</span><span class="op" id="8397765">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8397771">&#34;sticky.txt&#34;</span><span class="op" id="8397783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397789">Mode</span><span class="op" id="8397793">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8397799">0600</span>&nbsp;<span class="op" id="8397804">|</span>&nbsp;<span class="ident" id="8397806">c_ISREG</span>&nbsp;<span class="op" id="8397814">|</span>&nbsp;<span class="ident" id="8397816">c_ISVTX</span><span class="op" id="8397823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397829">Size</span><span class="op" id="8397833">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8397839">7</span><span class="op" id="8397840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397846">ModTime</span><span class="op" id="8397853">:</span>&nbsp;&nbsp;<span class="ident" id="8397856">time</span><span class="op" id="8397860">.</span><span class="ident" id="8397861">Unix</span><span class="op" id="8397865">(</span><span class="num" id="8397866">1360602540</span><span class="op" id="8397876">,</span>&nbsp;<span class="num" id="8397878">0</span><span class="op" id="8397879">)</span><span class="op" id="8397880">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397886">Typeflag</span><span class="op" id="8397894">:</span>&nbsp;<span class="ident" id="8397896">TypeReg</span><span class="op" id="8397903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397908">}</span><span class="op" id="8397909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397914">fm</span><span class="op" id="8397916">:</span>&nbsp;<span class="num" id="8397918">0600</span>&nbsp;<span class="op" id="8397923">|</span>&nbsp;<span class="ident" id="8397925">os</span><span class="op" id="8397927">.</span><span class="ident" id="8397928">ModeSticky</span><span class="op" id="8397938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397942">}</span><span class="op" id="8397943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397946">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397950">for</span>&nbsp;<span class="ident" id="8397954">i</span><span class="op" id="8397955">,</span>&nbsp;<span class="ident" id="8397957">g</span>&nbsp;<span class="op" id="8397959">:=</span>&nbsp;<span class="keyword" id="8397962">range</span>&nbsp;<span class="ident" id="8397968">golden</span>&nbsp;<span class="op" id="8397975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397979">fi</span>&nbsp;<span class="op" id="8397982">:=</span>&nbsp;<span class="ident" id="8397985">g</span><span class="op" id="8397986">.</span><span class="ident" id="8397987">h</span><span class="op" id="8397988">.</span><span class="ident" id="8397989">FileInfo</span><span class="op" id="8397997">(</span><span class="op" id="8397998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398002">h2</span><span class="op" id="8398004">,</span>&nbsp;<span class="ident" id="8398006">err</span>&nbsp;<span class="op" id="8398010">:=</span>&nbsp;<span class="ident" id="8398013">FileInfoHeader</span><span class="op" id="8398027">(</span><span class="ident" id="8398028">fi</span><span class="op" id="8398030">,</span>&nbsp;<span class="string" id="8398032">&#34;&#34;</span><span class="op" id="8398034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398038">if</span>&nbsp;<span class="ident" id="8398041">err</span>&nbsp;<span class="op" id="8398045">!=</span>&nbsp;<span class="ident" id="8398048">nil</span>&nbsp;<span class="op" id="8398052">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398057">t</span><span class="op" id="8398058">.</span><span class="ident" id="8398059">Error</span><span class="op" id="8398064">(</span><span class="ident" id="8398065">err</span><span class="op" id="8398068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398073">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398088">if</span>&nbsp;<span class="ident" id="8398091">strings</span><span class="op" id="8398098">.</span><span class="ident" id="8398099">Contains</span><span class="op" id="8398107">(</span><span class="ident" id="8398108">fi</span><span class="op" id="8398110">.</span><span class="ident" id="8398111">Name</span><span class="op" id="8398115">(</span><span class="op" id="8398116">)</span><span class="op" id="8398117">,</span>&nbsp;<span class="string" id="8398119">&#34;/&#34;</span><span class="op" id="8398122">)</span>&nbsp;<span class="op" id="8398124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398129">t</span><span class="op" id="8398130">.</span><span class="ident" id="8398131">Errorf</span><span class="op" id="8398137">(</span><span class="string" id="8398138">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="8398173">,</span>&nbsp;<span class="ident" id="8398175">g</span><span class="op" id="8398176">.</span><span class="ident" id="8398177">h</span><span class="op" id="8398178">.</span><span class="ident" id="8398179">Name</span><span class="op" id="8398183">,</span>&nbsp;<span class="ident" id="8398185">fi</span><span class="op" id="8398187">.</span><span class="ident" id="8398188">Name</span><span class="op" id="8398192">(</span><span class="op" id="8398193">)</span><span class="op" id="8398194">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398202">name</span>&nbsp;<span class="op" id="8398207">:=</span>&nbsp;<span class="ident" id="8398210">path</span><span class="op" id="8398214">.</span><span class="ident" id="8398215">Base</span><span class="op" id="8398219">(</span><span class="ident" id="8398220">g</span><span class="op" id="8398221">.</span><span class="ident" id="8398222">h</span><span class="op" id="8398223">.</span><span class="ident" id="8398224">Name</span><span class="op" id="8398228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398232">if</span>&nbsp;<span class="ident" id="8398235">fi</span><span class="op" id="8398237">.</span><span class="ident" id="8398238">IsDir</span><span class="op" id="8398243">(</span><span class="op" id="8398244">)</span>&nbsp;<span class="op" id="8398246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398251">name</span>&nbsp;<span class="op" id="8398256">+=</span>&nbsp;<span class="string" id="8398259">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398265">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398269">if</span>&nbsp;<span class="ident" id="8398272">got</span><span class="op" id="8398275">,</span>&nbsp;<span class="ident" id="8398277">want</span>&nbsp;<span class="op" id="8398282">:=</span>&nbsp;<span class="ident" id="8398285">h2</span><span class="op" id="8398287">.</span><span class="ident" id="8398288">Name</span><span class="op" id="8398292">,</span>&nbsp;<span class="ident" id="8398294">name</span><span class="op" id="8398298">;</span>&nbsp;<span class="ident" id="8398300">got</span>&nbsp;<span class="op" id="8398304">!=</span>&nbsp;<span class="ident" id="8398307">want</span>&nbsp;<span class="op" id="8398312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398317">t</span><span class="op" id="8398318">.</span><span class="ident" id="8398319">Errorf</span><span class="op" id="8398325">(</span><span class="string" id="8398326">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8398355">,</span>&nbsp;<span class="ident" id="8398357">i</span><span class="op" id="8398358">,</span>&nbsp;<span class="ident" id="8398360">got</span><span class="op" id="8398363">,</span>&nbsp;<span class="ident" id="8398365">want</span><span class="op" id="8398369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398377">if</span>&nbsp;<span class="ident" id="8398380">got</span><span class="op" id="8398383">,</span>&nbsp;<span class="ident" id="8398385">want</span>&nbsp;<span class="op" id="8398390">:=</span>&nbsp;<span class="ident" id="8398393">h2</span><span class="op" id="8398395">.</span><span class="ident" id="8398396">Size</span><span class="op" id="8398400">,</span>&nbsp;<span class="ident" id="8398402">g</span><span class="op" id="8398403">.</span><span class="ident" id="8398404">h</span><span class="op" id="8398405">.</span><span class="ident" id="8398406">Size</span><span class="op" id="8398410">;</span>&nbsp;<span class="ident" id="8398412">got</span>&nbsp;<span class="op" id="8398416">!=</span>&nbsp;<span class="ident" id="8398419">want</span>&nbsp;<span class="op" id="8398424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398429">t</span><span class="op" id="8398430">.</span><span class="ident" id="8398431">Errorf</span><span class="op" id="8398437">(</span><span class="string" id="8398438">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8398467">,</span>&nbsp;<span class="ident" id="8398469">i</span><span class="op" id="8398470">,</span>&nbsp;<span class="ident" id="8398472">got</span><span class="op" id="8398475">,</span>&nbsp;<span class="ident" id="8398477">want</span><span class="op" id="8398481">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398489">if</span>&nbsp;<span class="ident" id="8398492">got</span><span class="op" id="8398495">,</span>&nbsp;<span class="ident" id="8398497">want</span>&nbsp;<span class="op" id="8398502">:=</span>&nbsp;<span class="ident" id="8398505">h2</span><span class="op" id="8398507">.</span><span class="ident" id="8398508">Mode</span><span class="op" id="8398512">,</span>&nbsp;<span class="ident" id="8398514">g</span><span class="op" id="8398515">.</span><span class="ident" id="8398516">h</span><span class="op" id="8398517">.</span><span class="ident" id="8398518">Mode</span><span class="op" id="8398522">;</span>&nbsp;<span class="ident" id="8398524">got</span>&nbsp;<span class="op" id="8398528">!=</span>&nbsp;<span class="ident" id="8398531">want</span>&nbsp;<span class="op" id="8398536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398541">t</span><span class="op" id="8398542">.</span><span class="ident" id="8398543">Errorf</span><span class="op" id="8398549">(</span><span class="string" id="8398550">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="8398579">,</span>&nbsp;<span class="ident" id="8398581">i</span><span class="op" id="8398582">,</span>&nbsp;<span class="ident" id="8398584">got</span><span class="op" id="8398587">,</span>&nbsp;<span class="ident" id="8398589">want</span><span class="op" id="8398593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398601">if</span>&nbsp;<span class="ident" id="8398604">got</span><span class="op" id="8398607">,</span>&nbsp;<span class="ident" id="8398609">want</span>&nbsp;<span class="op" id="8398614">:=</span>&nbsp;<span class="ident" id="8398617">fi</span><span class="op" id="8398619">.</span><span class="ident" id="8398620">Mode</span><span class="op" id="8398624">(</span><span class="op" id="8398625">)</span><span class="op" id="8398626">,</span>&nbsp;<span class="ident" id="8398628">g</span><span class="op" id="8398629">.</span><span class="ident" id="8398630">fm</span><span class="op" id="8398632">;</span>&nbsp;<span class="ident" id="8398634">got</span>&nbsp;<span class="op" id="8398638">!=</span>&nbsp;<span class="ident" id="8398641">want</span>&nbsp;<span class="op" id="8398646">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398651">t</span><span class="op" id="8398652">.</span><span class="ident" id="8398653">Errorf</span><span class="op" id="8398659">(</span><span class="string" id="8398660">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="8398692">,</span>&nbsp;<span class="ident" id="8398694">i</span><span class="op" id="8398695">,</span>&nbsp;<span class="ident" id="8398697">got</span><span class="op" id="8398700">,</span>&nbsp;<span class="ident" id="8398702">want</span><span class="op" id="8398706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398714">if</span>&nbsp;<span class="ident" id="8398717">got</span><span class="op" id="8398720">,</span>&nbsp;<span class="ident" id="8398722">want</span>&nbsp;<span class="op" id="8398727">:=</span>&nbsp;<span class="ident" id="8398730">h2</span><span class="op" id="8398732">.</span><span class="ident" id="8398733">ModTime</span><span class="op" id="8398740">,</span>&nbsp;<span class="ident" id="8398742">g</span><span class="op" id="8398743">.</span><span class="ident" id="8398744">h</span><span class="op" id="8398745">.</span><span class="ident" id="8398746">ModTime</span><span class="op" id="8398753">;</span>&nbsp;<span class="ident" id="8398755">got</span>&nbsp;<span class="op" id="8398759">!=</span>&nbsp;<span class="ident" id="8398762">want</span>&nbsp;<span class="op" id="8398767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398772">t</span><span class="op" id="8398773">.</span><span class="ident" id="8398774">Errorf</span><span class="op" id="8398780">(</span><span class="string" id="8398781">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8398813">,</span>&nbsp;<span class="ident" id="8398815">i</span><span class="op" id="8398816">,</span>&nbsp;<span class="ident" id="8398818">got</span><span class="op" id="8398821">,</span>&nbsp;<span class="ident" id="8398823">want</span><span class="op" id="8398827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398831">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398835">if</span>&nbsp;<span class="ident" id="8398838">sysh</span><span class="op" id="8398842">,</span>&nbsp;<span class="ident" id="8398844">ok</span>&nbsp;<span class="op" id="8398847">:=</span>&nbsp;<span class="ident" id="8398850">fi</span><span class="op" id="8398852">.</span><span class="ident" id="8398853">Sys</span><span class="op" id="8398856">(</span><span class="op" id="8398857">)</span><span class="op" id="8398858">.</span><span class="op" id="8398859">(</span><span class="op" id="8398860">*</span><span class="ident" id="8398861">Header</span><span class="op" id="8398867">)</span><span class="op" id="8398868">;</span>&nbsp;<span class="op" id="8398870">!</span><span class="ident" id="8398871">ok</span>&nbsp;<span class="op" id="8398874">||</span>&nbsp;<span class="ident" id="8398877">sysh</span>&nbsp;<span class="op" id="8398882">!=</span>&nbsp;<span class="ident" id="8398885">g</span><span class="op" id="8398886">.</span><span class="ident" id="8398887">h</span>&nbsp;<span class="op" id="8398889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398894">t</span><span class="op" id="8398895">.</span><span class="ident" id="8398896">Errorf</span><span class="op" id="8398902">(</span><span class="string" id="8398903">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="8398945">,</span>&nbsp;<span class="ident" id="8398947">i</span><span class="op" id="8398948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398955">}</span><br>
<span class="lineno"></span><span class="op" id="8398957">}</span>
</div>
</body>
</html>
