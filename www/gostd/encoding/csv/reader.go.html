<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5245395">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5245450">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5245504">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5245555">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5245623">//</span><br>
<span class="lineno"></span><span class="comment" id="5245626">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="5245704">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="5245779">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="5245829">//</span><br>
<span class="lineno"></span><span class="comment" id="5245832">//&nbsp;&nbsp;&nbsp;&nbsp;field1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="5245856">//</span><br>
<span class="lineno"></span><span class="comment" id="5245859">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5245905">//</span><br>
<span class="lineno">15</span><span class="comment" id="5245908">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="5245976">//</span><br>
<span class="lineno"></span><span class="comment" id="5245979">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="5246058">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="5246123">//</span><br>
<span class="lineno">20</span><span class="comment" id="5246126">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="5246195">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5246265">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5246275">//</span><br>
<span class="lineno"></span><span class="comment" id="5246278">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="5246293">//</span><br>
<span class="lineno"></span><span class="comment" id="5246296">//&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5246328">//</span><br>
<span class="lineno"></span><span class="comment" id="5246331">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="5246356">//</span><br>
<span class="lineno">30</span><span class="comment" id="5246359">//&nbsp;&nbsp;&nbsp;&nbsp;{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="5246396">//</span><br>
<span class="lineno"></span><span class="comment" id="5246399">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="5246469">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="5246512">//</span><br>
<span class="lineno">35</span><span class="comment" id="5246515">//&nbsp;&nbsp;&nbsp;&nbsp;&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5246562">//</span><br>
<span class="lineno"></span><span class="comment" id="5246565">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5246579">//</span><br>
<span class="lineno"></span><span class="comment" id="5246582">//&nbsp;&nbsp;&nbsp;&nbsp;{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="5246628">//</span><br>
<span class="lineno"></span><span class="comment" id="5246631">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="5246688">//</span><br>
<span class="lineno"></span><span class="comment" id="5246691">//&nbsp;&nbsp;&nbsp;&nbsp;&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="5246706">//&nbsp;&nbsp;&nbsp;&nbsp;field&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="5246729">//</span><br>
<span class="lineno"></span><span class="comment" id="5246732">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5246746">//</span><br>
<span class="lineno"></span><span class="comment" id="5246749">//&nbsp;&nbsp;&nbsp;&nbsp;{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="5246765">//&nbsp;&nbsp;&nbsp;&nbsp;field`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="5246790">package</span>&nbsp;<span class="ident" id="5246798">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5246803">import</span>&nbsp;<span class="op" id="5246810">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5246813">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5246822">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5246831">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5246841">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5246848">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5246854">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="5246864">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="5246867">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="5246915">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="5246963">type</span>&nbsp;<span class="ident" id="5246968">ParseError</span>&nbsp;<span class="keyword" id="5246979">struct</span>&nbsp;<span class="op" id="5246986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5246989">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5246996">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5247002">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5247036">Column</span>&nbsp;<span class="builtintype" id="5247043">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5247049">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5247098">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5247105">error</span>&nbsp;<span class="comment" id="5247111">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="5247131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5247134">func</span>&nbsp;<span class="op" id="5247139">(</span><span class="ident" id="5247140">e</span>&nbsp;<span class="op" id="5247142">*</span><span class="ident" id="5247143">ParseError</span><span class="op" id="5247153">)</span>&nbsp;<span class="ident" id="5247155">Error</span><span class="op" id="5247160">(</span><span class="op" id="5247161">)</span>&nbsp;<span class="builtintype" id="5247163">string</span>&nbsp;<span class="op" id="5247170">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5247173">return</span>&nbsp;<span class="ident" id="5247180">fmt</span><span class="op" id="5247183">.</span><span class="ident" id="5247184">Sprintf</span><span class="op" id="5247191">(</span><span class="string" id="5247192">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="5247216">,</span>&nbsp;<span class="ident" id="5247218">e</span><span class="op" id="5247219">.</span><span class="ident" id="5247220">Line</span><span class="op" id="5247224">,</span>&nbsp;<span class="ident" id="5247226">e</span><span class="op" id="5247227">.</span><span class="ident" id="5247228">Column</span><span class="op" id="5247234">,</span>&nbsp;<span class="ident" id="5247236">e</span><span class="op" id="5247237">.</span><span class="ident" id="5247238">Err</span><span class="op" id="5247241">)</span><br>
<span class="lineno"></span><span class="op" id="5247243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5247246">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="5247311">var</span>&nbsp;<span class="op" id="5247315">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5247318">ErrTrailingComma</span>&nbsp;<span class="op" id="5247335">=</span>&nbsp;<span class="ident" id="5247337">errors</span><span class="op" id="5247343">.</span><span class="ident" id="5247344">New</span><span class="op" id="5247347">(</span><span class="string" id="5247348">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="5247380">)</span>&nbsp;<span class="comment" id="5247382">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5247401">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5247418">=</span>&nbsp;<span class="ident" id="5247420">errors</span><span class="op" id="5247426">.</span><span class="ident" id="5247427">New</span><span class="op" id="5247430">(</span><span class="string" id="5247431">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="5247460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5247463">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5247480">=</span>&nbsp;<span class="ident" id="5247482">errors</span><span class="op" id="5247488">.</span><span class="ident" id="5247489">New</span><span class="op" id="5247492">(</span><span class="string" id="5247493">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="5247517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5247520">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5247537">=</span>&nbsp;<span class="ident" id="5247539">errors</span><span class="op" id="5247545">.</span><span class="ident" id="5247546">New</span><span class="op" id="5247549">(</span><span class="string" id="5247550">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="5247582">)</span><br>
<span class="lineno"></span><span class="op" id="5247584">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5247587">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5247638">//</span><br>
<span class="lineno"></span><span class="comment" id="5247641">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="5247717">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="5247791">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="5247825">//</span><br>
<span class="lineno"></span><span class="comment" id="5247828">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5247882">//</span><br>
<span class="lineno"></span><span class="comment" id="5247885">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="5247958">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5247992">//</span><br>
<span class="lineno"></span><span class="comment" id="5247995">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5248059">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5248137">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="5248210">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5248285">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="5248343">//</span><br>
<span class="lineno"></span><span class="comment" id="5248346">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5248418">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="5248469">//</span><br>
<span class="lineno"></span><span class="comment" id="5248472">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="5248547">type</span>&nbsp;<span class="ident" id="5248552">Reader</span>&nbsp;<span class="keyword" id="5248559">struct</span>&nbsp;<span class="op" id="5248566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248569">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5248586">rune</span>&nbsp;<span class="comment" id="5248591">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248637">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5248654">rune</span>&nbsp;<span class="comment" id="5248659">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248699">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="5248716">int</span>&nbsp;&nbsp;<span class="comment" id="5248721">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248762">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5248779">bool</span>&nbsp;<span class="comment" id="5248784">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248806">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5248823">bool</span>&nbsp;<span class="comment" id="5248828">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248874">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="5248891">bool</span>&nbsp;<span class="comment" id="5248896">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248919">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5248936">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248941">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5248958">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248963">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5248980">*</span><span class="ident" id="5248981">bufio</span><span class="op" id="5248986">.</span><span class="ident" id="5248987">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5248995">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249012">bytes</span><span class="op" id="5249017">.</span><span class="ident" id="5249018">Buffer</span><br>
<span class="lineno"></span><span class="op" id="5249025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="5249028">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="5249081">func</span>&nbsp;<span class="ident" id="5249086">NewReader</span><span class="op" id="5249095">(</span><span class="ident" id="5249096">r</span>&nbsp;<span class="ident" id="5249098">io</span><span class="op" id="5249100">.</span><span class="ident" id="5249101">Reader</span><span class="op" id="5249107">)</span>&nbsp;<span class="op" id="5249109">*</span><span class="ident" id="5249110">Reader</span>&nbsp;<span class="op" id="5249117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249120">return</span>&nbsp;<span class="op" id="5249127">&amp;</span><span class="ident" id="5249128">Reader</span><span class="op" id="5249134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249138">Comma</span><span class="op" id="5249143">:</span>&nbsp;<span class="string" id="5249145">&#39;,&#39;</span><span class="op" id="5249148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249152">r</span><span class="op" id="5249153">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249159">bufio</span><span class="op" id="5249164">.</span><span class="ident" id="5249165">NewReader</span><span class="op" id="5249174">(</span><span class="ident" id="5249175">r</span><span class="op" id="5249176">)</span><span class="op" id="5249177">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5249180">}</span><br>
<span class="lineno"></span><span class="op" id="5249182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5249185">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="5249233">func</span>&nbsp;<span class="op" id="5249238">(</span><span class="ident" id="5249239">r</span>&nbsp;<span class="op" id="5249241">*</span><span class="ident" id="5249242">Reader</span><span class="op" id="5249248">)</span>&nbsp;<span class="builtintype" id="5249250">error</span><span class="op" id="5249255">(</span><span class="ident" id="5249256">err</span>&nbsp;<span class="builtintype" id="5249260">error</span><span class="op" id="5249265">)</span>&nbsp;<span class="builtintype" id="5249267">error</span>&nbsp;<span class="op" id="5249273">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249276">return</span>&nbsp;<span class="op" id="5249283">&amp;</span><span class="ident" id="5249284">ParseError</span><span class="op" id="5249294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249298">Line</span><span class="op" id="5249302">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5249306">r</span><span class="op" id="5249307">.</span><span class="ident" id="5249308">line</span><span class="op" id="5249312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249316">Column</span><span class="op" id="5249322">:</span>&nbsp;<span class="ident" id="5249324">r</span><span class="op" id="5249325">.</span><span class="ident" id="5249326">column</span><span class="op" id="5249332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249336">Err</span><span class="op" id="5249339">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249344">err</span><span class="op" id="5249347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5249350">}</span><br>
<span class="lineno">130</span><span class="op" id="5249352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5249355">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="5249432">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="5249466">func</span>&nbsp;<span class="op" id="5249471">(</span><span class="ident" id="5249472">r</span>&nbsp;<span class="op" id="5249474">*</span><span class="ident" id="5249475">Reader</span><span class="op" id="5249481">)</span>&nbsp;<span class="ident" id="5249483">Read</span><span class="op" id="5249487">(</span><span class="op" id="5249488">)</span>&nbsp;<span class="op" id="5249490">(</span><span class="ident" id="5249491">record</span>&nbsp;<span class="op" id="5249498">[</span><span class="op" id="5249499">]</span><span class="builtintype" id="5249500">string</span><span class="op" id="5249506">,</span>&nbsp;<span class="ident" id="5249508">err</span>&nbsp;<span class="builtintype" id="5249512">error</span><span class="op" id="5249517">)</span>&nbsp;<span class="op" id="5249519">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249522">for</span>&nbsp;<span class="op" id="5249526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249530">record</span><span class="op" id="5249536">,</span>&nbsp;<span class="ident" id="5249538">err</span>&nbsp;<span class="op" id="5249542">=</span>&nbsp;<span class="ident" id="5249544">r</span><span class="op" id="5249545">.</span><span class="ident" id="5249546">parseRecord</span><span class="op" id="5249557">(</span><span class="op" id="5249558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249562">if</span>&nbsp;<span class="ident" id="5249565">record</span>&nbsp;<span class="op" id="5249572">!=</span>&nbsp;<span class="builtintype" id="5249575">nil</span>&nbsp;<span class="op" id="5249579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249584">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5249592">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249596">if</span>&nbsp;<span class="ident" id="5249599">err</span>&nbsp;<span class="op" id="5249603">!=</span>&nbsp;<span class="builtintype" id="5249606">nil</span>&nbsp;<span class="op" id="5249610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249615">return</span>&nbsp;<span class="builtintype" id="5249622">nil</span><span class="op" id="5249625">,</span>&nbsp;<span class="ident" id="5249627">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5249633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5249636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249640">if</span>&nbsp;<span class="ident" id="5249643">r</span><span class="op" id="5249644">.</span><span class="ident" id="5249645">FieldsPerRecord</span>&nbsp;<span class="op" id="5249661">&gt;</span>&nbsp;<span class="num" id="5249663">0</span>&nbsp;<span class="op" id="5249665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249669">if</span>&nbsp;<span class="builtinfunc" id="5249672">len</span><span class="op" id="5249675">(</span><span class="ident" id="5249676">record</span><span class="op" id="5249682">)</span>&nbsp;<span class="op" id="5249684">!=</span>&nbsp;<span class="ident" id="5249687">r</span><span class="op" id="5249688">.</span><span class="ident" id="5249689">FieldsPerRecord</span>&nbsp;<span class="op" id="5249705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249710">r</span><span class="op" id="5249711">.</span><span class="ident" id="5249712">column</span>&nbsp;<span class="op" id="5249719">=</span>&nbsp;<span class="num" id="5249721">0</span>&nbsp;<span class="comment" id="5249723">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249755">return</span>&nbsp;<span class="ident" id="5249762">record</span><span class="op" id="5249768">,</span>&nbsp;<span class="ident" id="5249770">r</span><span class="op" id="5249771">.</span><span class="builtintype" id="5249772">error</span><span class="op" id="5249777">(</span><span class="ident" id="5249778">ErrFieldCount</span><span class="op" id="5249791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5249795">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5249798">}</span>&nbsp;<span class="keyword" id="5249800">else</span>&nbsp;<span class="keyword" id="5249805">if</span>&nbsp;<span class="ident" id="5249808">r</span><span class="op" id="5249809">.</span><span class="ident" id="5249810">FieldsPerRecord</span>&nbsp;<span class="op" id="5249826">==</span>&nbsp;<span class="num" id="5249829">0</span>&nbsp;<span class="op" id="5249831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5249835">r</span><span class="op" id="5249836">.</span><span class="ident" id="5249837">FieldsPerRecord</span>&nbsp;<span class="op" id="5249853">=</span>&nbsp;<span class="builtinfunc" id="5249855">len</span><span class="op" id="5249858">(</span><span class="ident" id="5249859">record</span><span class="op" id="5249865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5249868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5249871">return</span>&nbsp;<span class="ident" id="5249878">record</span><span class="op" id="5249884">,</span>&nbsp;<span class="builtintype" id="5249886">nil</span><br>
<span class="lineno"></span><span class="op" id="5249890">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="5249893">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5249944">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="5249981">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5250057">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="5250135">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="5250148">func</span>&nbsp;<span class="op" id="5250153">(</span><span class="ident" id="5250154">r</span>&nbsp;<span class="op" id="5250156">*</span><span class="ident" id="5250157">Reader</span><span class="op" id="5250163">)</span>&nbsp;<span class="ident" id="5250165">ReadAll</span><span class="op" id="5250172">(</span><span class="op" id="5250173">)</span>&nbsp;<span class="op" id="5250175">(</span><span class="ident" id="5250176">records</span>&nbsp;<span class="op" id="5250184">[</span><span class="op" id="5250185">]</span><span class="op" id="5250186">[</span><span class="op" id="5250187">]</span><span class="builtintype" id="5250188">string</span><span class="op" id="5250194">,</span>&nbsp;<span class="ident" id="5250196">err</span>&nbsp;<span class="builtintype" id="5250200">error</span><span class="op" id="5250205">)</span>&nbsp;<span class="op" id="5250207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250210">for</span>&nbsp;<span class="op" id="5250214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5250218">record</span><span class="op" id="5250224">,</span>&nbsp;<span class="ident" id="5250226">err</span>&nbsp;<span class="op" id="5250230">:=</span>&nbsp;<span class="ident" id="5250233">r</span><span class="op" id="5250234">.</span><span class="ident" id="5250235">Read</span><span class="op" id="5250239">(</span><span class="op" id="5250240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250244">if</span>&nbsp;<span class="ident" id="5250247">err</span>&nbsp;<span class="op" id="5250251">==</span>&nbsp;<span class="ident" id="5250254">io</span><span class="op" id="5250256">.</span><span class="ident" id="5250257">EOF</span>&nbsp;<span class="op" id="5250261">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250266">return</span>&nbsp;<span class="ident" id="5250273">records</span><span class="op" id="5250280">,</span>&nbsp;<span class="builtintype" id="5250282">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5250288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250292">if</span>&nbsp;<span class="ident" id="5250295">err</span>&nbsp;<span class="op" id="5250299">!=</span>&nbsp;<span class="builtintype" id="5250302">nil</span>&nbsp;<span class="op" id="5250306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250311">return</span>&nbsp;<span class="builtintype" id="5250318">nil</span><span class="op" id="5250321">,</span>&nbsp;<span class="ident" id="5250323">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5250329">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5250333">records</span>&nbsp;<span class="op" id="5250341">=</span>&nbsp;<span class="builtinfunc" id="5250343">append</span><span class="op" id="5250349">(</span><span class="ident" id="5250350">records</span><span class="op" id="5250357">,</span>&nbsp;<span class="ident" id="5250359">record</span><span class="op" id="5250365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5250368">}</span><br>
<span class="lineno"></span><span class="op" id="5250370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5250373">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="5250445">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="5250521">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="5250564">func</span>&nbsp;<span class="op" id="5250569">(</span><span class="ident" id="5250570">r</span>&nbsp;<span class="op" id="5250572">*</span><span class="ident" id="5250573">Reader</span><span class="op" id="5250579">)</span>&nbsp;<span class="ident" id="5250581">readRune</span><span class="op" id="5250589">(</span><span class="op" id="5250590">)</span>&nbsp;<span class="op" id="5250592">(</span><span class="builtintype" id="5250593">rune</span><span class="op" id="5250597">,</span>&nbsp;<span class="builtintype" id="5250599">error</span><span class="op" id="5250604">)</span>&nbsp;<span class="op" id="5250606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5250609">r1</span><span class="op" id="5250611">,</span>&nbsp;<span class="ident" id="5250613">_</span><span class="op" id="5250614">,</span>&nbsp;<span class="ident" id="5250616">err</span>&nbsp;<span class="op" id="5250620">:=</span>&nbsp;<span class="ident" id="5250623">r</span><span class="op" id="5250624">.</span><span class="ident" id="5250625">r</span><span class="op" id="5250626">.</span><span class="ident" id="5250627">ReadRune</span><span class="op" id="5250635">(</span><span class="op" id="5250636">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5250640">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5250703">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5250765">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250831">if</span>&nbsp;<span class="ident" id="5250834">r1</span>&nbsp;<span class="op" id="5250837">==</span>&nbsp;<span class="string" id="5250840">&#39;\r&#39;</span>&nbsp;<span class="op" id="5250845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5250849">r1</span><span class="op" id="5250851">,</span>&nbsp;<span class="ident" id="5250853">_</span><span class="op" id="5250854">,</span>&nbsp;<span class="ident" id="5250856">err</span>&nbsp;<span class="op" id="5250860">=</span>&nbsp;<span class="ident" id="5250862">r</span><span class="op" id="5250863">.</span><span class="ident" id="5250864">r</span><span class="op" id="5250865">.</span><span class="ident" id="5250866">ReadRune</span><span class="op" id="5250874">(</span><span class="op" id="5250875">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250879">if</span>&nbsp;<span class="ident" id="5250882">err</span>&nbsp;<span class="op" id="5250886">==</span>&nbsp;<span class="builtintype" id="5250889">nil</span>&nbsp;<span class="op" id="5250893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250898">if</span>&nbsp;<span class="ident" id="5250901">r1</span>&nbsp;<span class="op" id="5250904">!=</span>&nbsp;<span class="string" id="5250907">&#39;\n&#39;</span>&nbsp;<span class="op" id="5250912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5250918">r</span><span class="op" id="5250919">.</span><span class="ident" id="5250920">r</span><span class="op" id="5250921">.</span><span class="ident" id="5250922">UnreadRune</span><span class="op" id="5250932">(</span><span class="op" id="5250933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5250939">r1</span>&nbsp;<span class="op" id="5250942">=</span>&nbsp;<span class="string" id="5250944">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5250952">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5250956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5250959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5250962">r</span><span class="op" id="5250963">.</span><span class="ident" id="5250964">column</span><span class="op" id="5250970">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5250974">return</span>&nbsp;<span class="ident" id="5250981">r1</span><span class="op" id="5250983">,</span>&nbsp;<span class="ident" id="5250985">err</span><br>
<span class="lineno"></span><span class="op" id="5250989">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="5250992">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5251063">func</span>&nbsp;<span class="op" id="5251068">(</span><span class="ident" id="5251069">r</span>&nbsp;<span class="op" id="5251071">*</span><span class="ident" id="5251072">Reader</span><span class="op" id="5251078">)</span>&nbsp;<span class="ident" id="5251080">skip</span><span class="op" id="5251084">(</span><span class="ident" id="5251085">delim</span>&nbsp;<span class="builtintype" id="5251091">rune</span><span class="op" id="5251095">)</span>&nbsp;<span class="builtintype" id="5251097">error</span>&nbsp;<span class="op" id="5251103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251106">for</span>&nbsp;<span class="op" id="5251110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5251114">r1</span><span class="op" id="5251116">,</span>&nbsp;<span class="ident" id="5251118">err</span>&nbsp;<span class="op" id="5251122">:=</span>&nbsp;<span class="ident" id="5251125">r</span><span class="op" id="5251126">.</span><span class="ident" id="5251127">readRune</span><span class="op" id="5251135">(</span><span class="op" id="5251136">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251140">if</span>&nbsp;<span class="ident" id="5251143">err</span>&nbsp;<span class="op" id="5251147">!=</span>&nbsp;<span class="builtintype" id="5251150">nil</span>&nbsp;<span class="op" id="5251154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251159">return</span>&nbsp;<span class="ident" id="5251166">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5251172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251176">if</span>&nbsp;<span class="ident" id="5251179">r1</span>&nbsp;<span class="op" id="5251182">==</span>&nbsp;<span class="ident" id="5251185">delim</span>&nbsp;<span class="op" id="5251191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251196">return</span>&nbsp;<span class="builtintype" id="5251203">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5251209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5251212">}</span><br>
<span class="lineno"></span><span class="op" id="5251214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5251217">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="5251277">func</span>&nbsp;<span class="op" id="5251282">(</span><span class="ident" id="5251283">r</span>&nbsp;<span class="op" id="5251285">*</span><span class="ident" id="5251286">Reader</span><span class="op" id="5251292">)</span>&nbsp;<span class="ident" id="5251294">parseRecord</span><span class="op" id="5251305">(</span><span class="op" id="5251306">)</span>&nbsp;<span class="op" id="5251308">(</span><span class="ident" id="5251309">fields</span>&nbsp;<span class="op" id="5251316">[</span><span class="op" id="5251317">]</span><span class="builtintype" id="5251318">string</span><span class="op" id="5251324">,</span>&nbsp;<span class="ident" id="5251326">err</span>&nbsp;<span class="builtintype" id="5251330">error</span><span class="op" id="5251335">)</span>&nbsp;<span class="op" id="5251337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5251340">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5251401">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5251459">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5251530">r</span><span class="op" id="5251531">.</span><span class="ident" id="5251532">line</span><span class="op" id="5251536">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5251540">r</span><span class="op" id="5251541">.</span><span class="ident" id="5251542">column</span>&nbsp;<span class="op" id="5251549">=</span>&nbsp;<span class="op" id="5251551">-</span><span class="num" id="5251552">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5251556">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5251616">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5251679">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5251714">r1</span><span class="op" id="5251716">,</span>&nbsp;<span class="ident" id="5251718">_</span><span class="op" id="5251719">,</span>&nbsp;<span class="ident" id="5251721">err</span>&nbsp;<span class="op" id="5251725">:=</span>&nbsp;<span class="ident" id="5251728">r</span><span class="op" id="5251729">.</span><span class="ident" id="5251730">r</span><span class="op" id="5251731">.</span><span class="ident" id="5251732">ReadRune</span><span class="op" id="5251740">(</span><span class="op" id="5251741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251744">if</span>&nbsp;<span class="ident" id="5251747">err</span>&nbsp;<span class="op" id="5251751">!=</span>&nbsp;<span class="builtintype" id="5251754">nil</span>&nbsp;<span class="op" id="5251758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251762">return</span>&nbsp;<span class="builtintype" id="5251769">nil</span><span class="op" id="5251772">,</span>&nbsp;<span class="ident" id="5251774">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5251779">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251783">if</span>&nbsp;<span class="ident" id="5251786">r</span><span class="op" id="5251787">.</span><span class="ident" id="5251788">Comment</span>&nbsp;<span class="op" id="5251796">!=</span>&nbsp;<span class="num" id="5251799">0</span>&nbsp;<span class="op" id="5251801">&amp;&amp;</span>&nbsp;<span class="ident" id="5251804">r1</span>&nbsp;<span class="op" id="5251807">==</span>&nbsp;<span class="ident" id="5251810">r</span><span class="op" id="5251811">.</span><span class="ident" id="5251812">Comment</span>&nbsp;<span class="op" id="5251820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251824">return</span>&nbsp;<span class="builtintype" id="5251831">nil</span><span class="op" id="5251834">,</span>&nbsp;<span class="ident" id="5251836">r</span><span class="op" id="5251837">.</span><span class="ident" id="5251838">skip</span><span class="op" id="5251842">(</span><span class="string" id="5251843">&#39;\n&#39;</span><span class="op" id="5251847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5251850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5251853">r</span><span class="op" id="5251854">.</span><span class="ident" id="5251855">r</span><span class="op" id="5251856">.</span><span class="ident" id="5251857">UnreadRune</span><span class="op" id="5251867">(</span><span class="op" id="5251868">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5251872">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251918">for</span>&nbsp;<span class="op" id="5251922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5251926">haveField</span><span class="op" id="5251935">,</span>&nbsp;<span class="ident" id="5251937">delim</span><span class="op" id="5251942">,</span>&nbsp;<span class="ident" id="5251944">err</span>&nbsp;<span class="op" id="5251948">:=</span>&nbsp;<span class="ident" id="5251951">r</span><span class="op" id="5251952">.</span><span class="ident" id="5251953">parseField</span><span class="op" id="5251963">(</span><span class="op" id="5251964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5251968">if</span>&nbsp;<span class="ident" id="5251971">haveField</span>&nbsp;<span class="op" id="5251981">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5251986">fields</span>&nbsp;<span class="op" id="5251993">=</span>&nbsp;<span class="builtinfunc" id="5251995">append</span><span class="op" id="5252001">(</span><span class="ident" id="5252002">fields</span><span class="op" id="5252008">,</span>&nbsp;<span class="ident" id="5252010">r</span><span class="op" id="5252011">.</span><span class="ident" id="5252012">field</span><span class="op" id="5252017">.</span><span class="ident" id="5252018">String</span><span class="op" id="5252024">(</span><span class="op" id="5252025">)</span><span class="op" id="5252026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252034">if</span>&nbsp;<span class="ident" id="5252037">delim</span>&nbsp;<span class="op" id="5252043">==</span>&nbsp;<span class="string" id="5252046">&#39;\n&#39;</span>&nbsp;<span class="op" id="5252051">||</span>&nbsp;<span class="ident" id="5252054">err</span>&nbsp;<span class="op" id="5252058">==</span>&nbsp;<span class="ident" id="5252061">io</span><span class="op" id="5252063">.</span><span class="ident" id="5252064">EOF</span>&nbsp;<span class="op" id="5252068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252073">return</span>&nbsp;<span class="ident" id="5252080">fields</span><span class="op" id="5252086">,</span>&nbsp;<span class="ident" id="5252088">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252094">}</span>&nbsp;<span class="keyword" id="5252096">else</span>&nbsp;<span class="keyword" id="5252101">if</span>&nbsp;<span class="ident" id="5252104">err</span>&nbsp;<span class="op" id="5252108">!=</span>&nbsp;<span class="builtintype" id="5252111">nil</span>&nbsp;<span class="op" id="5252115">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252120">return</span>&nbsp;<span class="builtintype" id="5252127">nil</span><span class="op" id="5252130">,</span>&nbsp;<span class="ident" id="5252132">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252141">}</span><br>
<span class="lineno"></span><span class="op" id="5252143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="5252146">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5252216">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5252291">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="5252313">func</span>&nbsp;<span class="op" id="5252318">(</span><span class="ident" id="5252319">r</span>&nbsp;<span class="op" id="5252321">*</span><span class="ident" id="5252322">Reader</span><span class="op" id="5252328">)</span>&nbsp;<span class="ident" id="5252330">parseField</span><span class="op" id="5252340">(</span><span class="op" id="5252341">)</span>&nbsp;<span class="op" id="5252343">(</span><span class="ident" id="5252344">haveField</span>&nbsp;<span class="builtintype" id="5252354">bool</span><span class="op" id="5252358">,</span>&nbsp;<span class="ident" id="5252360">delim</span>&nbsp;<span class="builtintype" id="5252366">rune</span><span class="op" id="5252370">,</span>&nbsp;<span class="ident" id="5252372">err</span>&nbsp;<span class="builtintype" id="5252376">error</span><span class="op" id="5252381">)</span>&nbsp;<span class="op" id="5252383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5252386">r</span><span class="op" id="5252387">.</span><span class="ident" id="5252388">field</span><span class="op" id="5252393">.</span><span class="ident" id="5252394">Reset</span><span class="op" id="5252399">(</span><span class="op" id="5252400">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5252404">r1</span><span class="op" id="5252406">,</span>&nbsp;<span class="ident" id="5252408">err</span>&nbsp;<span class="op" id="5252412">:=</span>&nbsp;<span class="ident" id="5252415">r</span><span class="op" id="5252416">.</span><span class="ident" id="5252417">readRune</span><span class="op" id="5252425">(</span><span class="op" id="5252426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252429">for</span>&nbsp;<span class="ident" id="5252433">err</span>&nbsp;<span class="op" id="5252437">==</span>&nbsp;<span class="builtintype" id="5252440">nil</span>&nbsp;<span class="op" id="5252444">&amp;&amp;</span>&nbsp;<span class="ident" id="5252447">r</span><span class="op" id="5252448">.</span><span class="ident" id="5252449">TrimLeadingSpace</span>&nbsp;<span class="op" id="5252466">&amp;&amp;</span>&nbsp;<span class="ident" id="5252469">r1</span>&nbsp;<span class="op" id="5252472">!=</span>&nbsp;<span class="string" id="5252475">&#39;\n&#39;</span>&nbsp;<span class="op" id="5252480">&amp;&amp;</span>&nbsp;<span class="ident" id="5252483">unicode</span><span class="op" id="5252490">.</span><span class="ident" id="5252491">IsSpace</span><span class="op" id="5252498">(</span><span class="ident" id="5252499">r1</span><span class="op" id="5252501">)</span>&nbsp;<span class="op" id="5252503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5252507">r1</span><span class="op" id="5252509">,</span>&nbsp;<span class="ident" id="5252511">err</span>&nbsp;<span class="op" id="5252515">=</span>&nbsp;<span class="ident" id="5252517">r</span><span class="op" id="5252518">.</span><span class="ident" id="5252519">readRune</span><span class="op" id="5252527">(</span><span class="op" id="5252528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252531">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252535">if</span>&nbsp;<span class="ident" id="5252538">err</span>&nbsp;<span class="op" id="5252542">==</span>&nbsp;<span class="ident" id="5252545">io</span><span class="op" id="5252547">.</span><span class="ident" id="5252548">EOF</span>&nbsp;<span class="op" id="5252552">&amp;&amp;</span>&nbsp;<span class="ident" id="5252555">r</span><span class="op" id="5252556">.</span><span class="ident" id="5252557">column</span>&nbsp;<span class="op" id="5252564">!=</span>&nbsp;<span class="num" id="5252567">0</span>&nbsp;<span class="op" id="5252569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252573">return</span>&nbsp;<span class="builtintype" id="5252580">true</span><span class="op" id="5252584">,</span>&nbsp;<span class="num" id="5252586">0</span><span class="op" id="5252587">,</span>&nbsp;<span class="ident" id="5252589">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252597">if</span>&nbsp;<span class="ident" id="5252600">err</span>&nbsp;<span class="op" id="5252604">!=</span>&nbsp;<span class="builtintype" id="5252607">nil</span>&nbsp;<span class="op" id="5252611">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252615">return</span>&nbsp;<span class="builtintype" id="5252622">false</span><span class="op" id="5252627">,</span>&nbsp;<span class="num" id="5252629">0</span><span class="op" id="5252630">,</span>&nbsp;<span class="ident" id="5252632">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252641">switch</span>&nbsp;<span class="ident" id="5252648">r1</span>&nbsp;<span class="op" id="5252651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252654">case</span>&nbsp;<span class="ident" id="5252659">r</span><span class="op" id="5252660">.</span><span class="ident" id="5252661">Comma</span><span class="op" id="5252666">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5252670">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252692">case</span>&nbsp;<span class="string" id="5252697">&#39;\n&#39;</span><span class="op" id="5252701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5252705">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252756">if</span>&nbsp;<span class="ident" id="5252759">r</span><span class="op" id="5252760">.</span><span class="ident" id="5252761">column</span>&nbsp;<span class="op" id="5252768">==</span>&nbsp;<span class="num" id="5252771">0</span>&nbsp;<span class="op" id="5252773">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252778">return</span>&nbsp;<span class="builtintype" id="5252785">false</span><span class="op" id="5252790">,</span>&nbsp;<span class="ident" id="5252792">r1</span><span class="op" id="5252794">,</span>&nbsp;<span class="builtintype" id="5252796">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252806">return</span>&nbsp;<span class="builtintype" id="5252813">true</span><span class="op" id="5252817">,</span>&nbsp;<span class="ident" id="5252819">r1</span><span class="op" id="5252821">,</span>&nbsp;<span class="builtintype" id="5252823">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252829">case</span>&nbsp;<span class="string" id="5252834">&#39;&#34;&#39;</span><span class="op" id="5252837">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5252841">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5252858">Quoted</span><span class="op" id="5252864">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252868">for</span>&nbsp;<span class="op" id="5252872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5252877">r1</span><span class="op" id="5252879">,</span>&nbsp;<span class="ident" id="5252881">err</span>&nbsp;<span class="op" id="5252885">=</span>&nbsp;<span class="ident" id="5252887">r</span><span class="op" id="5252888">.</span><span class="ident" id="5252889">readRune</span><span class="op" id="5252897">(</span><span class="op" id="5252898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252903">if</span>&nbsp;<span class="ident" id="5252906">err</span>&nbsp;<span class="op" id="5252910">!=</span>&nbsp;<span class="builtintype" id="5252913">nil</span>&nbsp;<span class="op" id="5252917">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252923">if</span>&nbsp;<span class="ident" id="5252926">err</span>&nbsp;<span class="op" id="5252930">==</span>&nbsp;<span class="ident" id="5252933">io</span><span class="op" id="5252935">.</span><span class="ident" id="5252936">EOF</span>&nbsp;<span class="op" id="5252940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252947">if</span>&nbsp;<span class="ident" id="5252950">r</span><span class="op" id="5252951">.</span><span class="ident" id="5252952">LazyQuotes</span>&nbsp;<span class="op" id="5252963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5252971">return</span>&nbsp;<span class="builtintype" id="5252978">true</span><span class="op" id="5252982">,</span>&nbsp;<span class="num" id="5252984">0</span><span class="op" id="5252985">,</span>&nbsp;<span class="ident" id="5252987">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5252996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253003">return</span>&nbsp;<span class="builtintype" id="5253010">false</span><span class="op" id="5253015">,</span>&nbsp;<span class="num" id="5253017">0</span><span class="op" id="5253018">,</span>&nbsp;<span class="ident" id="5253020">r</span><span class="op" id="5253021">.</span><span class="builtintype" id="5253022">error</span><span class="op" id="5253027">(</span><span class="ident" id="5253028">ErrQuote</span><span class="op" id="5253036">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253048">return</span>&nbsp;<span class="builtintype" id="5253055">false</span><span class="op" id="5253060">,</span>&nbsp;<span class="num" id="5253062">0</span><span class="op" id="5253063">,</span>&nbsp;<span class="ident" id="5253065">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253077">switch</span>&nbsp;<span class="ident" id="5253084">r1</span>&nbsp;<span class="op" id="5253087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253092">case</span>&nbsp;<span class="string" id="5253097">&#39;&#34;&#39;</span><span class="op" id="5253100">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5253106">r1</span><span class="op" id="5253108">,</span>&nbsp;<span class="ident" id="5253110">err</span>&nbsp;<span class="op" id="5253114">=</span>&nbsp;<span class="ident" id="5253116">r</span><span class="op" id="5253117">.</span><span class="ident" id="5253118">readRune</span><span class="op" id="5253126">(</span><span class="op" id="5253127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253133">if</span>&nbsp;<span class="ident" id="5253136">err</span>&nbsp;<span class="op" id="5253140">!=</span>&nbsp;<span class="builtintype" id="5253143">nil</span>&nbsp;<span class="op" id="5253147">||</span>&nbsp;<span class="ident" id="5253150">r1</span>&nbsp;<span class="op" id="5253153">==</span>&nbsp;<span class="ident" id="5253156">r</span><span class="op" id="5253157">.</span><span class="ident" id="5253158">Comma</span>&nbsp;<span class="op" id="5253164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253171">break</span>&nbsp;<span class="ident" id="5253177">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253194">if</span>&nbsp;<span class="ident" id="5253197">r1</span>&nbsp;<span class="op" id="5253200">==</span>&nbsp;<span class="string" id="5253203">&#39;\n&#39;</span>&nbsp;<span class="op" id="5253208">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253215">return</span>&nbsp;<span class="builtintype" id="5253222">true</span><span class="op" id="5253226">,</span>&nbsp;<span class="ident" id="5253228">r1</span><span class="op" id="5253230">,</span>&nbsp;<span class="builtintype" id="5253232">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253246">if</span>&nbsp;<span class="ident" id="5253249">r1</span>&nbsp;<span class="op" id="5253252">!=</span>&nbsp;<span class="string" id="5253255">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5253259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253266">if</span>&nbsp;<span class="op" id="5253269">!</span><span class="ident" id="5253270">r</span><span class="op" id="5253271">.</span><span class="ident" id="5253272">LazyQuotes</span>&nbsp;<span class="op" id="5253283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5253291">r</span><span class="op" id="5253292">.</span><span class="ident" id="5253293">column</span><span class="op" id="5253299">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253308">return</span>&nbsp;<span class="builtintype" id="5253315">false</span><span class="op" id="5253320">,</span>&nbsp;<span class="num" id="5253322">0</span><span class="op" id="5253323">,</span>&nbsp;<span class="ident" id="5253325">r</span><span class="op" id="5253326">.</span><span class="builtintype" id="5253327">error</span><span class="op" id="5253332">(</span><span class="ident" id="5253333">ErrQuote</span><span class="op" id="5253341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5253355">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5253385">r</span><span class="op" id="5253386">.</span><span class="ident" id="5253387">field</span><span class="op" id="5253392">.</span><span class="ident" id="5253393">WriteRune</span><span class="op" id="5253402">(</span><span class="string" id="5253403">&#39;&#34;&#39;</span><span class="op" id="5253406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253412">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253417">case</span>&nbsp;<span class="string" id="5253422">&#39;\n&#39;</span><span class="op" id="5253426">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5253432">r</span><span class="op" id="5253433">.</span><span class="ident" id="5253434">line</span><span class="op" id="5253438">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5253445">r</span><span class="op" id="5253446">.</span><span class="ident" id="5253447">column</span>&nbsp;<span class="op" id="5253454">=</span>&nbsp;<span class="op" id="5253456">-</span><span class="num" id="5253457">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5253467">r</span><span class="op" id="5253468">.</span><span class="ident" id="5253469">field</span><span class="op" id="5253474">.</span><span class="ident" id="5253475">WriteRune</span><span class="op" id="5253484">(</span><span class="ident" id="5253485">r1</span><span class="op" id="5253487">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253495">default</span><span class="op" id="5253502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5253506">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253526">for</span>&nbsp;<span class="op" id="5253530">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5253535">r</span><span class="op" id="5253536">.</span><span class="ident" id="5253537">field</span><span class="op" id="5253542">.</span><span class="ident" id="5253543">WriteRune</span><span class="op" id="5253552">(</span><span class="ident" id="5253553">r1</span><span class="op" id="5253555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5253560">r1</span><span class="op" id="5253562">,</span>&nbsp;<span class="ident" id="5253564">err</span>&nbsp;<span class="op" id="5253568">=</span>&nbsp;<span class="ident" id="5253570">r</span><span class="op" id="5253571">.</span><span class="ident" id="5253572">readRune</span><span class="op" id="5253580">(</span><span class="op" id="5253581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253586">if</span>&nbsp;<span class="ident" id="5253589">err</span>&nbsp;<span class="op" id="5253593">!=</span>&nbsp;<span class="builtintype" id="5253596">nil</span>&nbsp;<span class="op" id="5253600">||</span>&nbsp;<span class="ident" id="5253603">r1</span>&nbsp;<span class="op" id="5253606">==</span>&nbsp;<span class="ident" id="5253609">r</span><span class="op" id="5253610">.</span><span class="ident" id="5253611">Comma</span>&nbsp;<span class="op" id="5253617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253623">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253632">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253637">if</span>&nbsp;<span class="ident" id="5253640">r1</span>&nbsp;<span class="op" id="5253643">==</span>&nbsp;<span class="string" id="5253646">&#39;\n&#39;</span>&nbsp;<span class="op" id="5253651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253657">return</span>&nbsp;<span class="builtintype" id="5253664">true</span><span class="op" id="5253668">,</span>&nbsp;<span class="ident" id="5253670">r1</span><span class="op" id="5253672">,</span>&nbsp;<span class="builtintype" id="5253674">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253686">if</span>&nbsp;<span class="op" id="5253689">!</span><span class="ident" id="5253690">r</span><span class="op" id="5253691">.</span><span class="ident" id="5253692">LazyQuotes</span>&nbsp;<span class="op" id="5253703">&amp;&amp;</span>&nbsp;<span class="ident" id="5253706">r1</span>&nbsp;<span class="op" id="5253709">==</span>&nbsp;<span class="string" id="5253712">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5253716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253722">return</span>&nbsp;<span class="builtintype" id="5253729">false</span><span class="op" id="5253734">,</span>&nbsp;<span class="num" id="5253736">0</span><span class="op" id="5253737">,</span>&nbsp;<span class="ident" id="5253739">r</span><span class="op" id="5253740">.</span><span class="builtintype" id="5253741">error</span><span class="op" id="5253746">(</span><span class="ident" id="5253747">ErrBareQuote</span><span class="op" id="5253759">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253775">if</span>&nbsp;<span class="ident" id="5253778">err</span>&nbsp;<span class="op" id="5253782">!=</span>&nbsp;<span class="builtintype" id="5253785">nil</span>&nbsp;<span class="op" id="5253789">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253793">if</span>&nbsp;<span class="ident" id="5253796">err</span>&nbsp;<span class="op" id="5253800">==</span>&nbsp;<span class="ident" id="5253803">io</span><span class="op" id="5253805">.</span><span class="ident" id="5253806">EOF</span>&nbsp;<span class="op" id="5253810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253815">return</span>&nbsp;<span class="builtintype" id="5253822">true</span><span class="op" id="5253826">,</span>&nbsp;<span class="num" id="5253828">0</span><span class="op" id="5253829">,</span>&nbsp;<span class="ident" id="5253831">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253841">return</span>&nbsp;<span class="builtintype" id="5253848">false</span><span class="op" id="5253853">,</span>&nbsp;<span class="num" id="5253855">0</span><span class="op" id="5253856">,</span>&nbsp;<span class="ident" id="5253858">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5253863">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5253867">return</span>&nbsp;<span class="builtintype" id="5253874">true</span><span class="op" id="5253878">,</span>&nbsp;<span class="ident" id="5253880">r1</span><span class="op" id="5253882">,</span>&nbsp;<span class="builtintype" id="5253884">nil</span><br>
<span class="lineno"></span><span class="op" id="5253888">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
