<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5849505">package</span>&nbsp;<span class="ident" id="5849513">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5849520">import</span>&nbsp;<span class="op" id="5849527">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5849530">&#34;path&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5849537">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5849540">//&nbsp;Package&nbsp;is&nbsp;the&nbsp;compiling&nbsp;object&nbsp;of&nbsp;a&nbsp;package.&nbsp;It&nbsp;is&nbsp;the&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="5849607">//&nbsp;unit&nbsp;for&nbsp;programs.</span><br>
<span class="lineno"></span><span class="keyword" id="5849629">type</span>&nbsp;<span class="ident" id="5849634">Package</span>&nbsp;<span class="keyword" id="5849642">struct</span>&nbsp;<span class="op" id="5849649">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849652">path</span>&nbsp;<span class="builtintype" id="5849657">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849666">requires</span>&nbsp;<span class="op" id="5849675">[</span><span class="op" id="5849676">]</span><span class="op" id="5849677">*</span><span class="ident" id="5849678">Package</span>&nbsp;<span class="comment" id="5849686">//&nbsp;all&nbsp;the&nbsp;packages&nbsp;that&nbsp;requires&nbsp;for&nbsp;building</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849734">symbols</span>&nbsp;&nbsp;<span class="op" id="5849743">[</span><span class="op" id="5849744">]</span><span class="op" id="5849745">*</span><span class="ident" id="5849746">Symbol</span>&nbsp;&nbsp;<span class="comment" id="5849754">//&nbsp;all&nbsp;the&nbsp;symbol&nbsp;objects</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849782">symIndex</span>&nbsp;<span class="keyword" id="5849791">map</span><span class="op" id="5849794">[</span><span class="builtintype" id="5849795">string</span><span class="op" id="5849801">]</span><span class="builtintype" id="5849802">uint32</span>&nbsp;<span class="comment" id="5849809">//&nbsp;map&nbsp;from&nbsp;symbol&nbsp;names&nbsp;to&nbsp;index&nbsp;in&nbsp;symNames</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849856">pkgIndex</span>&nbsp;<span class="keyword" id="5849865">map</span><span class="op" id="5849868">[</span><span class="builtintype" id="5849869">string</span><span class="op" id="5849875">]</span><span class="builtintype" id="5849876">uint32</span>&nbsp;<span class="comment" id="5849883">//&nbsp;map&nbsp;from&nbsp;package&nbsp;path&nbsp;to&nbsp;index&nbsp;in&nbsp;imports</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849930">funcs</span>&nbsp;<span class="keyword" id="5849936">map</span><span class="op" id="5849939">[</span><span class="builtintype" id="5849940">uint32</span><span class="op" id="5849946">]</span><span class="op" id="5849947">*</span><span class="ident" id="5849948">Func</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849954">vars</span>&nbsp;&nbsp;<span class="keyword" id="5849960">map</span><span class="op" id="5849963">[</span><span class="builtintype" id="5849964">uint32</span><span class="op" id="5849970">]</span><span class="op" id="5849971">*</span><span class="ident" id="5849972">Var</span><br>
<span class="lineno">20</span><span class="op" id="5849976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5849979">//&nbsp;NewPackage&nbsp;creates&nbsp;a&nbsp;new&nbsp;package&nbsp;of&nbsp;path&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="5850026">func</span>&nbsp;<span class="ident" id="5850031">NewPackage</span><span class="op" id="5850041">(</span><span class="ident" id="5850042">p</span>&nbsp;<span class="builtintype" id="5850044">string</span><span class="op" id="5850050">)</span>&nbsp;<span class="op" id="5850052">*</span><span class="ident" id="5850053">Package</span>&nbsp;<span class="op" id="5850061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850064">ret</span>&nbsp;<span class="op" id="5850068">:=</span>&nbsp;<span class="builtinfunc" id="5850071">new</span><span class="op" id="5850074">(</span><span class="ident" id="5850075">Package</span><span class="op" id="5850082">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850085">ret</span><span class="op" id="5850088">.</span><span class="ident" id="5850089">path</span>&nbsp;<span class="op" id="5850094">=</span>&nbsp;<span class="ident" id="5850096">p</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850100">ret</span><span class="op" id="5850103">.</span><span class="ident" id="5850104">symIndex</span>&nbsp;<span class="op" id="5850113">=</span>&nbsp;<span class="builtinfunc" id="5850115">make</span><span class="op" id="5850119">(</span><span class="keyword" id="5850120">map</span><span class="op" id="5850123">[</span><span class="builtintype" id="5850124">string</span><span class="op" id="5850130">]</span><span class="builtintype" id="5850131">uint32</span><span class="op" id="5850137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850140">ret</span><span class="op" id="5850143">.</span><span class="ident" id="5850144">pkgIndex</span>&nbsp;<span class="op" id="5850153">=</span>&nbsp;<span class="builtinfunc" id="5850155">make</span><span class="op" id="5850159">(</span><span class="keyword" id="5850160">map</span><span class="op" id="5850163">[</span><span class="builtintype" id="5850164">string</span><span class="op" id="5850170">]</span><span class="builtintype" id="5850171">uint32</span><span class="op" id="5850177">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850181">ret</span><span class="op" id="5850184">.</span><span class="ident" id="5850185">funcs</span>&nbsp;<span class="op" id="5850191">=</span>&nbsp;<span class="builtinfunc" id="5850193">make</span><span class="op" id="5850197">(</span><span class="keyword" id="5850198">map</span><span class="op" id="5850201">[</span><span class="builtintype" id="5850202">uint32</span><span class="op" id="5850208">]</span><span class="op" id="5850209">*</span><span class="ident" id="5850210">Func</span><span class="op" id="5850214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850217">ret</span><span class="op" id="5850220">.</span><span class="ident" id="5850221">vars</span>&nbsp;<span class="op" id="5850226">=</span>&nbsp;<span class="builtinfunc" id="5850228">make</span><span class="op" id="5850232">(</span><span class="keyword" id="5850233">map</span><span class="op" id="5850236">[</span><span class="builtintype" id="5850237">uint32</span><span class="op" id="5850243">]</span><span class="op" id="5850244">*</span><span class="ident" id="5850245">Var</span><span class="op" id="5850248">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850252">index</span>&nbsp;<span class="op" id="5850258">:=</span>&nbsp;<span class="ident" id="5850261">ret</span><span class="op" id="5850264">.</span><span class="ident" id="5850265">Require</span><span class="op" id="5850272">(</span><span class="ident" id="5850273">ret</span><span class="op" id="5850276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850279">if</span>&nbsp;<span class="ident" id="5850282">index</span>&nbsp;<span class="op" id="5850288">!=</span>&nbsp;<span class="num" id="5850291">0</span>&nbsp;<span class="op" id="5850293">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5850297">panic</span><span class="op" id="5850302">(</span><span class="string" id="5850303">&#34;bug&#34;</span><span class="op" id="5850308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850315">return</span>&nbsp;<span class="ident" id="5850322">ret</span><br>
<span class="lineno"></span><span class="op" id="5850326">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="5850329">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;package&#39;s&nbsp;default&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="5850373">func</span>&nbsp;<span class="op" id="5850378">(</span><span class="ident" id="5850379">p</span>&nbsp;<span class="op" id="5850381">*</span><span class="ident" id="5850382">Package</span><span class="op" id="5850389">)</span>&nbsp;<span class="ident" id="5850391">Name</span><span class="op" id="5850395">(</span><span class="op" id="5850396">)</span>&nbsp;<span class="builtintype" id="5850398">string</span>&nbsp;<span class="op" id="5850405">{</span>&nbsp;<span class="keyword" id="5850407">return</span>&nbsp;<span class="ident" id="5850414">path</span><span class="op" id="5850418">.</span><span class="ident" id="5850419">Base</span><span class="op" id="5850423">(</span><span class="ident" id="5850424">p</span><span class="op" id="5850425">.</span><span class="ident" id="5850426">path</span><span class="op" id="5850430">)</span>&nbsp;<span class="op" id="5850432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5850435">//&nbsp;Path&nbsp;returns&nbsp;the&nbsp;package&#39;s&nbsp;path&nbsp;string.</span><br>
<span class="lineno">45</span><span class="keyword" id="5850478">func</span>&nbsp;<span class="op" id="5850483">(</span><span class="ident" id="5850484">p</span>&nbsp;<span class="op" id="5850486">*</span><span class="ident" id="5850487">Package</span><span class="op" id="5850494">)</span>&nbsp;<span class="ident" id="5850496">Path</span><span class="op" id="5850500">(</span><span class="op" id="5850501">)</span>&nbsp;<span class="builtintype" id="5850503">string</span>&nbsp;<span class="op" id="5850510">{</span>&nbsp;<span class="keyword" id="5850512">return</span>&nbsp;<span class="ident" id="5850519">p</span><span class="op" id="5850520">.</span><span class="ident" id="5850521">path</span>&nbsp;<span class="op" id="5850526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5850529">//&nbsp;Require&nbsp;assigns&nbsp;a&nbsp;relative&nbsp;index&nbsp;for&nbsp;the&nbsp;required&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5850591">func</span>&nbsp;<span class="op" id="5850596">(</span><span class="ident" id="5850597">p</span>&nbsp;<span class="op" id="5850599">*</span><span class="ident" id="5850600">Package</span><span class="op" id="5850607">)</span>&nbsp;<span class="ident" id="5850609">Require</span><span class="op" id="5850616">(</span><span class="ident" id="5850617">req</span>&nbsp;<span class="op" id="5850621">*</span><span class="ident" id="5850622">Package</span><span class="op" id="5850629">)</span>&nbsp;<span class="builtintype" id="5850631">uint32</span>&nbsp;<span class="op" id="5850638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850641">if</span>&nbsp;<span class="ident" id="5850644">index</span><span class="op" id="5850649">,</span>&nbsp;<span class="ident" id="5850651">found</span>&nbsp;<span class="op" id="5850657">:=</span>&nbsp;<span class="ident" id="5850660">p</span><span class="op" id="5850661">.</span><span class="ident" id="5850662">pkgIndex</span><span class="op" id="5850670">[</span><span class="ident" id="5850671">req</span><span class="op" id="5850674">.</span><span class="ident" id="5850675">path</span><span class="op" id="5850679">]</span><span class="op" id="5850680">;</span>&nbsp;<span class="ident" id="5850682">found</span>&nbsp;<span class="op" id="5850688">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850692">return</span>&nbsp;<span class="ident" id="5850699">index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850710">index</span>&nbsp;<span class="op" id="5850716">:=</span>&nbsp;<span class="builtintype" id="5850719">uint32</span><span class="op" id="5850725">(</span><span class="builtinfunc" id="5850726">len</span><span class="op" id="5850729">(</span><span class="ident" id="5850730">p</span><span class="op" id="5850731">.</span><span class="ident" id="5850732">requires</span><span class="op" id="5850740">)</span><span class="op" id="5850741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850744">p</span><span class="op" id="5850745">.</span><span class="ident" id="5850746">pkgIndex</span><span class="op" id="5850754">[</span><span class="ident" id="5850755">req</span><span class="op" id="5850758">.</span><span class="ident" id="5850759">path</span><span class="op" id="5850763">]</span>&nbsp;<span class="op" id="5850765">=</span>&nbsp;<span class="ident" id="5850767">index</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850774">p</span><span class="op" id="5850775">.</span><span class="ident" id="5850776">requires</span>&nbsp;<span class="op" id="5850785">=</span>&nbsp;<span class="builtinfunc" id="5850787">append</span><span class="op" id="5850793">(</span><span class="ident" id="5850794">p</span><span class="op" id="5850795">.</span><span class="ident" id="5850796">requires</span><span class="op" id="5850804">,</span>&nbsp;<span class="ident" id="5850806">req</span><span class="op" id="5850809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850812">return</span>&nbsp;<span class="ident" id="5850819">index</span><br>
<span class="lineno"></span><span class="op" id="5850825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5850828">//&nbsp;PkgIndex&nbsp;returns&nbsp;the&nbsp;package&nbsp;imported&nbsp;and&nbsp;also&nbsp;its&nbsp;import</span><br>
<span class="lineno">60</span><span class="comment" id="5850889">//&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5850899">func</span>&nbsp;<span class="op" id="5850904">(</span><span class="ident" id="5850905">p</span>&nbsp;<span class="op" id="5850907">*</span><span class="ident" id="5850908">Package</span><span class="op" id="5850915">)</span>&nbsp;<span class="ident" id="5850917">PkgIndex</span><span class="op" id="5850925">(</span><span class="ident" id="5850926">name</span>&nbsp;<span class="builtintype" id="5850931">string</span><span class="op" id="5850937">)</span>&nbsp;<span class="op" id="5850939">(</span><span class="op" id="5850940">*</span><span class="ident" id="5850941">Package</span><span class="op" id="5850948">,</span>&nbsp;<span class="builtintype" id="5850950">uint32</span><span class="op" id="5850956">)</span>&nbsp;<span class="op" id="5850958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850961">index</span><span class="op" id="5850966">,</span>&nbsp;<span class="ident" id="5850968">found</span>&nbsp;<span class="op" id="5850974">:=</span>&nbsp;<span class="ident" id="5850977">p</span><span class="op" id="5850978">.</span><span class="ident" id="5850979">pkgIndex</span><span class="op" id="5850987">[</span><span class="ident" id="5850988">name</span><span class="op" id="5850992">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850995">if</span>&nbsp;<span class="op" id="5850998">!</span><span class="ident" id="5850999">found</span>&nbsp;<span class="op" id="5851005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851009">return</span>&nbsp;<span class="ident" id="5851016">nil</span><span class="op" id="5851019">,</span>&nbsp;<span class="num" id="5851021">0</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851028">return</span>&nbsp;<span class="ident" id="5851035">p</span><span class="op" id="5851036">.</span><span class="ident" id="5851037">requires</span><span class="op" id="5851045">[</span><span class="ident" id="5851046">index</span><span class="op" id="5851051">]</span><span class="op" id="5851052">,</span>&nbsp;<span class="ident" id="5851054">index</span><br>
<span class="lineno"></span><span class="op" id="5851060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="comment" id="5851063">//&nbsp;SymIndex&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;a&nbsp;symbol&nbsp;in&nbsp;the&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="5851121">//&nbsp;It&nbsp;panics&nbsp;when&nbsp;the&nbsp;symbol&nbsp;is&nbsp;not&nbsp;Declare()&#39;d&nbsp;yet.</span><br>
<span class="lineno"></span><span class="keyword" id="5851174">func</span>&nbsp;<span class="op" id="5851179">(</span><span class="ident" id="5851180">p</span>&nbsp;<span class="op" id="5851182">*</span><span class="ident" id="5851183">Package</span><span class="op" id="5851190">)</span>&nbsp;<span class="ident" id="5851192">SymIndex</span><span class="op" id="5851200">(</span><span class="ident" id="5851201">name</span>&nbsp;<span class="builtintype" id="5851206">string</span><span class="op" id="5851212">)</span>&nbsp;<span class="builtintype" id="5851214">uint32</span>&nbsp;<span class="op" id="5851221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851224">ret</span><span class="op" id="5851227">,</span>&nbsp;<span class="ident" id="5851229">found</span>&nbsp;<span class="op" id="5851235">:=</span>&nbsp;<span class="ident" id="5851238">p</span><span class="op" id="5851239">.</span><span class="ident" id="5851240">symIndex</span><span class="op" id="5851248">[</span><span class="ident" id="5851249">name</span><span class="op" id="5851253">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851256">if</span>&nbsp;<span class="op" id="5851259">!</span><span class="ident" id="5851260">found</span>&nbsp;<span class="op" id="5851266">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5851270">panic</span><span class="op" id="5851275">(</span><span class="string" id="5851276">&#34;not&nbsp;found&#34;</span><span class="op" id="5851287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851293">return</span>&nbsp;<span class="ident" id="5851300">ret</span><br>
<span class="lineno"></span><span class="op" id="5851304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="5851307">//&nbsp;Declare&nbsp;declares&nbsp;a&nbsp;symbol&nbsp;and&nbsp;assigns&nbsp;a&nbsp;symbol&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5851364">func</span>&nbsp;<span class="op" id="5851369">(</span><span class="ident" id="5851370">p</span>&nbsp;<span class="op" id="5851372">*</span><span class="ident" id="5851373">Package</span><span class="op" id="5851380">)</span>&nbsp;<span class="ident" id="5851382">Declare</span><span class="op" id="5851389">(</span><span class="ident" id="5851390">s</span>&nbsp;<span class="op" id="5851392">*</span><span class="ident" id="5851393">Symbol</span><span class="op" id="5851399">)</span>&nbsp;<span class="builtintype" id="5851401">uint32</span>&nbsp;<span class="op" id="5851408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851411">_</span><span class="op" id="5851412">,</span>&nbsp;<span class="ident" id="5851414">found</span>&nbsp;<span class="op" id="5851420">:=</span>&nbsp;<span class="ident" id="5851423">p</span><span class="op" id="5851424">.</span><span class="ident" id="5851425">symIndex</span><span class="op" id="5851433">[</span><span class="ident" id="5851434">s</span><span class="op" id="5851435">.</span><span class="ident" id="5851436">Name</span><span class="op" id="5851440">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851443">if</span>&nbsp;<span class="ident" id="5851446">found</span>&nbsp;<span class="op" id="5851452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5851456">panic</span><span class="op" id="5851461">(</span><span class="string" id="5851462">&#34;redeclaring&#34;</span><span class="op" id="5851475">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851482">index</span>&nbsp;<span class="op" id="5851488">:=</span>&nbsp;<span class="builtintype" id="5851491">uint32</span><span class="op" id="5851497">(</span><span class="builtinfunc" id="5851498">len</span><span class="op" id="5851501">(</span><span class="ident" id="5851502">p</span><span class="op" id="5851503">.</span><span class="ident" id="5851504">symbols</span><span class="op" id="5851511">)</span><span class="op" id="5851512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851515">p</span><span class="op" id="5851516">.</span><span class="ident" id="5851517">symIndex</span><span class="op" id="5851525">[</span><span class="ident" id="5851526">s</span><span class="op" id="5851527">.</span><span class="ident" id="5851528">Name</span><span class="op" id="5851532">]</span>&nbsp;<span class="op" id="5851534">=</span>&nbsp;<span class="ident" id="5851536">index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851543">p</span><span class="op" id="5851544">.</span><span class="ident" id="5851545">symbols</span>&nbsp;<span class="op" id="5851553">=</span>&nbsp;<span class="builtinfunc" id="5851555">append</span><span class="op" id="5851561">(</span><span class="ident" id="5851562">p</span><span class="op" id="5851563">.</span><span class="ident" id="5851564">symbols</span><span class="op" id="5851571">,</span>&nbsp;<span class="ident" id="5851573">s</span><span class="op" id="5851574">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851577">return</span>&nbsp;<span class="ident" id="5851584">index</span><br>
<span class="lineno"></span><span class="op" id="5851590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5851593">//&nbsp;Query&nbsp;returns&nbsp;the&nbsp;symbol&nbsp;with&nbsp;the&nbsp;particular&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="5851647">func</span>&nbsp;<span class="op" id="5851652">(</span><span class="ident" id="5851653">p</span>&nbsp;<span class="op" id="5851655">*</span><span class="ident" id="5851656">Package</span><span class="op" id="5851663">)</span>&nbsp;<span class="ident" id="5851665">Query</span><span class="op" id="5851670">(</span><span class="ident" id="5851671">name</span>&nbsp;<span class="builtintype" id="5851676">string</span><span class="op" id="5851682">)</span>&nbsp;<span class="op" id="5851684">(</span><span class="op" id="5851685">*</span><span class="ident" id="5851686">Symbol</span><span class="op" id="5851692">,</span>&nbsp;<span class="builtintype" id="5851694">uint32</span><span class="op" id="5851700">)</span>&nbsp;<span class="op" id="5851702">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851705">index</span><span class="op" id="5851710">,</span>&nbsp;<span class="ident" id="5851712">found</span>&nbsp;<span class="op" id="5851718">:=</span>&nbsp;<span class="ident" id="5851721">p</span><span class="op" id="5851722">.</span><span class="ident" id="5851723">symIndex</span><span class="op" id="5851731">[</span><span class="ident" id="5851732">name</span><span class="op" id="5851736">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851739">if</span>&nbsp;<span class="op" id="5851742">!</span><span class="ident" id="5851743">found</span>&nbsp;<span class="op" id="5851749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851753">return</span>&nbsp;<span class="ident" id="5851760">nil</span><span class="op" id="5851763">,</span>&nbsp;<span class="num" id="5851765">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851772">return</span>&nbsp;<span class="ident" id="5851779">p</span><span class="op" id="5851780">.</span><span class="ident" id="5851781">symbols</span><span class="op" id="5851788">[</span><span class="ident" id="5851789">index</span><span class="op" id="5851794">]</span><span class="op" id="5851795">,</span>&nbsp;<span class="ident" id="5851797">index</span><br>
<span class="lineno"></span><span class="op" id="5851803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5851806">//&nbsp;DefineFunc&nbsp;instantiates&nbsp;a&nbsp;function&nbsp;object&nbsp;for&nbsp;a&nbsp;particular&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5851875">func</span>&nbsp;<span class="op" id="5851880">(</span><span class="ident" id="5851881">p</span>&nbsp;<span class="op" id="5851883">*</span><span class="ident" id="5851884">Package</span><span class="op" id="5851891">)</span>&nbsp;<span class="ident" id="5851893">DefineFunc</span><span class="op" id="5851903">(</span><span class="ident" id="5851904">index</span>&nbsp;<span class="builtintype" id="5851910">uint32</span><span class="op" id="5851916">,</span>&nbsp;<span class="ident" id="5851918">f</span>&nbsp;<span class="op" id="5851920">*</span><span class="ident" id="5851921">Func</span><span class="op" id="5851925">)</span>&nbsp;<span class="op" id="5851927">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851930">sym</span>&nbsp;<span class="op" id="5851934">:=</span>&nbsp;<span class="ident" id="5851937">p</span><span class="op" id="5851938">.</span><span class="ident" id="5851939">symbols</span><span class="op" id="5851946">[</span><span class="ident" id="5851947">index</span><span class="op" id="5851952">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851955">if</span>&nbsp;<span class="ident" id="5851958">sym</span><span class="op" id="5851961">.</span><span class="ident" id="5851962">Type</span>&nbsp;<span class="op" id="5851967">!=</span>&nbsp;<span class="ident" id="5851970">SymFunc</span>&nbsp;<span class="op" id="5851978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5851982">panic</span><span class="op" id="5851987">(</span><span class="string" id="5851988">&#34;not&nbsp;a&nbsp;function&#34;</span><span class="op" id="5852004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852011">p</span><span class="op" id="5852012">.</span><span class="ident" id="5852013">funcs</span><span class="op" id="5852018">[</span><span class="ident" id="5852019">index</span><span class="op" id="5852024">]</span>&nbsp;<span class="op" id="5852026">=</span>&nbsp;<span class="ident" id="5852028">f</span><br>
<span class="lineno"></span><span class="op" id="5852030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5852033">//&nbsp;DefineVar&nbsp;instantiates&nbsp;a&nbsp;variable&nbsp;object&nbsp;for&nbsp;a&nbsp;particular&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5852101">func</span>&nbsp;<span class="op" id="5852106">(</span><span class="ident" id="5852107">p</span>&nbsp;<span class="op" id="5852109">*</span><span class="ident" id="5852110">Package</span><span class="op" id="5852117">)</span>&nbsp;<span class="ident" id="5852119">DefineVar</span><span class="op" id="5852128">(</span><span class="ident" id="5852129">index</span>&nbsp;<span class="builtintype" id="5852135">uint32</span><span class="op" id="5852141">,</span>&nbsp;<span class="ident" id="5852143">v</span>&nbsp;<span class="op" id="5852145">*</span><span class="ident" id="5852146">Var</span><span class="op" id="5852149">)</span>&nbsp;<span class="op" id="5852151">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852154">sym</span>&nbsp;<span class="op" id="5852158">:=</span>&nbsp;<span class="ident" id="5852161">p</span><span class="op" id="5852162">.</span><span class="ident" id="5852163">symbols</span><span class="op" id="5852170">[</span><span class="ident" id="5852171">index</span><span class="op" id="5852176">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852179">if</span>&nbsp;<span class="ident" id="5852182">sym</span><span class="op" id="5852185">.</span><span class="ident" id="5852186">Type</span>&nbsp;<span class="op" id="5852191">!=</span>&nbsp;<span class="ident" id="5852194">SymVar</span>&nbsp;<span class="op" id="5852201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5852205">panic</span><span class="op" id="5852210">(</span><span class="string" id="5852211">&#34;not&nbsp;a&nbsp;var&#34;</span><span class="op" id="5852222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852229">p</span><span class="op" id="5852230">.</span><span class="ident" id="5852231">vars</span><span class="op" id="5852235">[</span><span class="ident" id="5852236">index</span><span class="op" id="5852241">]</span>&nbsp;<span class="op" id="5852243">=</span>&nbsp;<span class="ident" id="5852245">v</span><br>
<span class="lineno"></span><span class="op" id="5852247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5852250">//&nbsp;Func&nbsp;returns&nbsp;the&nbsp;function&nbsp;of&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5852289">func</span>&nbsp;<span class="op" id="5852294">(</span><span class="ident" id="5852295">p</span>&nbsp;<span class="op" id="5852297">*</span><span class="ident" id="5852298">Package</span><span class="op" id="5852305">)</span>&nbsp;<span class="ident" id="5852307">Func</span><span class="op" id="5852311">(</span><span class="ident" id="5852312">index</span>&nbsp;<span class="builtintype" id="5852318">uint32</span><span class="op" id="5852324">)</span>&nbsp;<span class="op" id="5852326">*</span><span class="ident" id="5852327">Func</span>&nbsp;<span class="op" id="5852332">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852335">ret</span><span class="op" id="5852338">,</span>&nbsp;<span class="ident" id="5852340">found</span>&nbsp;<span class="op" id="5852346">:=</span>&nbsp;<span class="ident" id="5852349">p</span><span class="op" id="5852350">.</span><span class="ident" id="5852351">funcs</span><span class="op" id="5852356">[</span><span class="ident" id="5852357">index</span><span class="op" id="5852362">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852365">if</span>&nbsp;<span class="op" id="5852368">!</span><span class="ident" id="5852369">found</span>&nbsp;<span class="op" id="5852375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5852379">panic</span><span class="op" id="5852384">(</span><span class="string" id="5852385">&#34;not&nbsp;found&#34;</span><span class="op" id="5852396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852402">return</span>&nbsp;<span class="ident" id="5852409">ret</span><br>
<span class="lineno">130</span><span class="op" id="5852413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5852416">//&nbsp;Var&nbsp;returns&nbsp;the&nbsp;variable&nbsp;of&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5852454">func</span>&nbsp;<span class="op" id="5852459">(</span><span class="ident" id="5852460">p</span>&nbsp;<span class="op" id="5852462">*</span><span class="ident" id="5852463">Package</span><span class="op" id="5852470">)</span>&nbsp;<span class="ident" id="5852472">Var</span><span class="op" id="5852475">(</span><span class="ident" id="5852476">index</span>&nbsp;<span class="builtintype" id="5852482">uint32</span><span class="op" id="5852488">)</span>&nbsp;<span class="op" id="5852490">*</span><span class="ident" id="5852491">Var</span>&nbsp;<span class="op" id="5852495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852498">ret</span><span class="op" id="5852501">,</span>&nbsp;<span class="ident" id="5852503">found</span>&nbsp;<span class="op" id="5852509">:=</span>&nbsp;<span class="ident" id="5852512">p</span><span class="op" id="5852513">.</span><span class="ident" id="5852514">vars</span><span class="op" id="5852518">[</span><span class="ident" id="5852519">index</span><span class="op" id="5852524">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852527">if</span>&nbsp;<span class="op" id="5852530">!</span><span class="ident" id="5852531">found</span>&nbsp;<span class="op" id="5852537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5852541">panic</span><span class="op" id="5852546">(</span><span class="string" id="5852547">&#34;not&nbsp;found&#34;</span><span class="op" id="5852558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852564">return</span>&nbsp;<span class="ident" id="5852571">ret</span><br>
<span class="lineno"></span><span class="op" id="5852575">}</span>
</div>
</body>
</html>
