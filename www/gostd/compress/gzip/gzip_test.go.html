<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/gzip</h2>
<ul>
<li><a href="/gostd/compress/gzip/gunzip.go.html">gunzip.go</a></li>
<li><a href="/gostd/compress/gzip/gunzip_test.go.html">gunzip_test.go</a></li>
<li><a href="/gostd/compress/gzip/gzip.go.html">gzip.go</a></li>
<li><a href="/gostd/compress/gzip/gzip_test.go.html" class="current">gzip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7019195">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7019250">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7019304">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7019355">package</span>&nbsp;<span class="ident" id="7019363">gzip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7019369">import</span>&nbsp;<span class="op" id="7019376">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7019379">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7019388">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7019397">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7019410">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7019421">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7019428">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7019431">//&nbsp;TestEmpty&nbsp;tests&nbsp;that&nbsp;an&nbsp;empty&nbsp;payload&nbsp;still&nbsp;forms&nbsp;a&nbsp;valid&nbsp;GZIP&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="7019505">func</span>&nbsp;<span class="ident" id="7019510">TestEmpty</span><span class="op" id="7019519">(</span><span class="ident" id="7019520">t</span>&nbsp;<span class="op" id="7019522">*</span><span class="ident" id="7019523"><a href="/gostd/compress/gzip/gzip_test.go.html#7019410">testing</a></span><span class="op" id="7019530">.</span><span class="ident" id="7019531"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7019532">)</span>&nbsp;<span class="op" id="7019534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7019537">buf</span>&nbsp;<span class="op" id="7019541">:=</span>&nbsp;<span class="builtinfunc" id="7019544">new</span><span class="op" id="7019547">(</span><span class="ident" id="7019548"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7019553">.</span><span class="ident" id="7019554"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7019560">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7019564">if</span>&nbsp;<span class="ident" id="7019567">err</span>&nbsp;<span class="op" id="7019571">:=</span>&nbsp;<span class="ident" id="7019574"><a href="/gostd/compress/gzip/gzip.go.html#4786016">NewWriter</a></span><span class="op" id="7019583">(</span><span class="ident" id="7019584"><a href="/gostd/compress/gzip/gzip_test.go.html#7019537">buf</a></span><span class="op" id="7019587">)</span><span class="op" id="7019588">.</span><span class="ident" id="7019589"><a href="/gostd/compress/gzip/gzip.go.html#4790802">Close</a></span><span class="op" id="7019594">(</span><span class="op" id="7019595">)</span><span class="op" id="7019596">;</span>&nbsp;<span class="ident" id="7019598"><a href="/gostd/compress/gzip/gzip_test.go.html#7019567">err</a></span>&nbsp;<span class="op" id="7019602">!=</span>&nbsp;<span class="builtintype" id="7019605">nil</span>&nbsp;<span class="op" id="7019609">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7019613"><a href="/gostd/compress/gzip/gzip_test.go.html#7019520">t</a></span><span class="op" id="7019614">.</span><span class="ident" id="7019615"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7019621">(</span><span class="string" id="7019622">&#34;Writer.Close:&nbsp;%v&#34;</span><span class="op" id="7019640">,</span>&nbsp;<span class="ident" id="7019642"><a href="/gostd/compress/gzip/gzip_test.go.html#7019567">err</a></span><span class="op" id="7019645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7019648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7019652">r</span><span class="op" id="7019653">,</span>&nbsp;<span class="ident" id="7019655">err</span>&nbsp;<span class="op" id="7019659">:=</span>&nbsp;<span class="ident" id="7019662"><a href="/gostd/compress/gzip/gunzip.go.html#4779786">NewReader</a></span><span class="op" id="7019671">(</span><span class="ident" id="7019672"><a href="/gostd/compress/gzip/gzip_test.go.html#7019537">buf</a></span><span class="op" id="7019675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7019678">if</span>&nbsp;<span class="ident" id="7019681"><a href="/gostd/compress/gzip/gzip_test.go.html#7019655">err</a></span>&nbsp;<span class="op" id="7019685">!=</span>&nbsp;<span class="builtintype" id="7019688">nil</span>&nbsp;<span class="op" id="7019692">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7019696"><a href="/gostd/compress/gzip/gzip_test.go.html#7019520">t</a></span><span class="op" id="7019697">.</span><span class="ident" id="7019698"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7019704">(</span><span class="string" id="7019705">&#34;NewReader:&nbsp;%v&#34;</span><span class="op" id="7019720">,</span>&nbsp;<span class="ident" id="7019722"><a href="/gostd/compress/gzip/gzip_test.go.html#7019655">err</a></span><span class="op" id="7019725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7019728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7019731">b</span><span class="op" id="7019732">,</span>&nbsp;<span class="ident" id="7019734"><a href="/gostd/compress/gzip/gzip_test.go.html#7019655">err</a></span>&nbsp;<span class="op" id="7019738">:=</span>&nbsp;<span class="ident" id="7019741"><a href="/gostd/compress/gzip/gzip_test.go.html#7019397">ioutil</a></span><span class="op" id="7019747">.</span><span class="ident" id="7019748"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7019755">(</span><span class="ident" id="7019756"><a href="/gostd/compress/gzip/gzip_test.go.html#7019652">r</a></span><span class="op" id="7019757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7019760">if</span>&nbsp;<span class="ident" id="7019763"><a href="/gostd/compress/gzip/gzip_test.go.html#7019655">err</a></span>&nbsp;<span class="op" id="7019767">!=</span>&nbsp;<span class="builtintype" id="7019770">nil</span>&nbsp;<span class="op" id="7019774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7019778"><a href="/gostd/compress/gzip/gzip_test.go.html#7019520">t</a></span><span class="op" id="7019779">.</span><span class="ident" id="7019780"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7019786">(</span><span class="string" id="7019787">&#34;ReadAll:&nbsp;%v&#34;</span><span class="op" id="7019800">,</span>&nbsp;<span class="ident" id="7019802"><a href="/gostd/compress/gzip/gzip_test.go.html#7019655">err</a></span><span class="op" id="7019805">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7019808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7019811">if</span>&nbsp;<span class="builtinfunc" id="7019814">len</span><span class="op" id="7019817">(</span><span class="ident" id="7019818"><a href="/gostd/compress/gzip/gzip_test.go.html#7019731">b</a></span><span class="op" id="7019819">)</span>&nbsp;<span class="op" id="7019821">!=</span>&nbsp;<span class="num" id="7019824">0</span>&nbsp;<span class="op" id="7019826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7019830"><a href="/gostd/compress/gzip/gzip_test.go.html#7019520">t</a></span><span class="op" id="7019831">.</span><span class="ident" id="7019832"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7019838">(</span><span class="string" id="7019839">&#34;got&nbsp;%d&nbsp;bytes,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7019861">,</span>&nbsp;<span class="builtinfunc" id="7019863">len</span><span class="op" id="7019866">(</span><span class="ident" id="7019867"><a href="/gostd/compress/gzip/gzip_test.go.html#7019731">b</a></span><span class="op" id="7019868">)</span><span class="op" id="7019869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7019872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7019875">if</span>&nbsp;<span class="ident" id="7019878">err</span>&nbsp;<span class="op" id="7019882">:=</span>&nbsp;<span class="ident" id="7019885"><a href="/gostd/compress/gzip/gzip_test.go.html#7019652">r</a></span><span class="op" id="7019886">.</span><span class="ident" id="7019887"><a href="/gostd/compress/gzip/gunzip.go.html#4784506">Close</a></span><span class="op" id="7019892">(</span><span class="op" id="7019893">)</span><span class="op" id="7019894">;</span>&nbsp;<span class="ident" id="7019896"><a href="/gostd/compress/gzip/gzip_test.go.html#7019878">err</a></span>&nbsp;<span class="op" id="7019900">!=</span>&nbsp;<span class="builtintype" id="7019903">nil</span>&nbsp;<span class="op" id="7019907">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7019911"><a href="/gostd/compress/gzip/gzip_test.go.html#7019520">t</a></span><span class="op" id="7019912">.</span><span class="ident" id="7019913"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7019919">(</span><span class="string" id="7019920">&#34;Reader.Close:&nbsp;%v&#34;</span><span class="op" id="7019938">,</span>&nbsp;<span class="ident" id="7019940"><a href="/gostd/compress/gzip/gzip_test.go.html#7019878">err</a></span><span class="op" id="7019943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7019946">}</span><br>
<span class="lineno"></span><span class="op" id="7019948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7019951">//&nbsp;TestRoundTrip&nbsp;tests&nbsp;that&nbsp;gzipping&nbsp;and&nbsp;then&nbsp;gunzipping&nbsp;is&nbsp;the&nbsp;identity</span><br>
<span class="lineno">40</span><span class="comment" id="7020024">//&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="7020037">func</span>&nbsp;<span class="ident" id="7020042">TestRoundTrip</span><span class="op" id="7020055">(</span><span class="ident" id="7020056">t</span>&nbsp;<span class="op" id="7020058">*</span><span class="ident" id="7020059"><a href="/gostd/compress/gzip/gzip_test.go.html#7019410">testing</a></span><span class="op" id="7020066">.</span><span class="ident" id="7020067"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7020068">)</span>&nbsp;<span class="op" id="7020070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020073">buf</span>&nbsp;<span class="op" id="7020077">:=</span>&nbsp;<span class="builtinfunc" id="7020080">new</span><span class="op" id="7020083">(</span><span class="ident" id="7020084"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7020089">.</span><span class="ident" id="7020090"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7020096">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020100">w</span>&nbsp;<span class="op" id="7020102">:=</span>&nbsp;<span class="ident" id="7020105"><a href="/gostd/compress/gzip/gzip.go.html#4786016">NewWriter</a></span><span class="op" id="7020114">(</span><span class="ident" id="7020115"><a href="/gostd/compress/gzip/gzip_test.go.html#7020073">buf</a></span><span class="op" id="7020118">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020121"><a href="/gostd/compress/gzip/gzip_test.go.html#7020100">w</a></span><span class="op" id="7020122">.</span><span class="ident" id="7020123"><a href="/gostd/compress/gzip/gunzip.go.html#4778439">Comment</a></span>&nbsp;<span class="op" id="7020131">=</span>&nbsp;<span class="string" id="7020133">&#34;comment&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020144"><a href="/gostd/compress/gzip/gzip_test.go.html#7020100">w</a></span><span class="op" id="7020145">.</span><span class="ident" id="7020146"><a href="/gostd/compress/gzip/gunzip.go.html#4778469">Extra</a></span>&nbsp;<span class="op" id="7020152">=</span>&nbsp;<span class="op" id="7020154">[</span><span class="op" id="7020155">]</span><span class="builtintype" id="7020156">byte</span><span class="op" id="7020160">(</span><span class="string" id="7020161">&#34;extra&#34;</span><span class="op" id="7020168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020171"><a href="/gostd/compress/gzip/gzip_test.go.html#7020100">w</a></span><span class="op" id="7020172">.</span><span class="ident" id="7020173"><a href="/gostd/compress/gzip/gunzip.go.html#4778504">ModTime</a></span>&nbsp;<span class="op" id="7020181">=</span>&nbsp;<span class="ident" id="7020183"><a href="/gostd/compress/gzip/gzip_test.go.html#7019421">time</a></span><span class="op" id="7020187">.</span><span class="ident" id="7020188"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="7020192">(</span><span class="num" id="7020193">1e8</span><span class="op" id="7020196">,</span>&nbsp;<span class="num" id="7020198">0</span><span class="op" id="7020199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020202"><a href="/gostd/compress/gzip/gzip_test.go.html#7020100">w</a></span><span class="op" id="7020203">.</span><span class="ident" id="7020204"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span>&nbsp;<span class="op" id="7020209">=</span>&nbsp;<span class="string" id="7020211">&#34;name&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020219">if</span>&nbsp;<span class="ident" id="7020222">_</span><span class="op" id="7020223">,</span>&nbsp;<span class="ident" id="7020225">err</span>&nbsp;<span class="op" id="7020229">:=</span>&nbsp;<span class="ident" id="7020232"><a href="/gostd/compress/gzip/gzip_test.go.html#7020100">w</a></span><span class="op" id="7020233">.</span><span class="ident" id="7020234"><a href="/gostd/compress/gzip/gzip.go.html#4788853">Write</a></span><span class="op" id="7020239">(</span><span class="op" id="7020240">[</span><span class="op" id="7020241">]</span><span class="builtintype" id="7020242">byte</span><span class="op" id="7020246">(</span><span class="string" id="7020247">&#34;payload&#34;</span><span class="op" id="7020256">)</span><span class="op" id="7020257">)</span><span class="op" id="7020258">;</span>&nbsp;<span class="ident" id="7020260"><a href="/gostd/compress/gzip/gzip_test.go.html#7020225">err</a></span>&nbsp;<span class="op" id="7020264">!=</span>&nbsp;<span class="builtintype" id="7020267">nil</span>&nbsp;<span class="op" id="7020271">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020275"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020276">.</span><span class="ident" id="7020277"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020283">(</span><span class="string" id="7020284">&#34;Write:&nbsp;%v&#34;</span><span class="op" id="7020295">,</span>&nbsp;<span class="ident" id="7020297"><a href="/gostd/compress/gzip/gzip_test.go.html#7020225">err</a></span><span class="op" id="7020300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020306">if</span>&nbsp;<span class="ident" id="7020309">err</span>&nbsp;<span class="op" id="7020313">:=</span>&nbsp;<span class="ident" id="7020316"><a href="/gostd/compress/gzip/gzip_test.go.html#7020100">w</a></span><span class="op" id="7020317">.</span><span class="ident" id="7020318"><a href="/gostd/compress/gzip/gzip.go.html#4790802">Close</a></span><span class="op" id="7020323">(</span><span class="op" id="7020324">)</span><span class="op" id="7020325">;</span>&nbsp;<span class="ident" id="7020327"><a href="/gostd/compress/gzip/gzip_test.go.html#7020309">err</a></span>&nbsp;<span class="op" id="7020331">!=</span>&nbsp;<span class="builtintype" id="7020334">nil</span>&nbsp;<span class="op" id="7020338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020342"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020343">.</span><span class="ident" id="7020344"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020350">(</span><span class="string" id="7020351">&#34;Writer.Close:&nbsp;%v&#34;</span><span class="op" id="7020369">,</span>&nbsp;<span class="ident" id="7020371"><a href="/gostd/compress/gzip/gzip_test.go.html#7020309">err</a></span><span class="op" id="7020374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020377">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020381">r</span><span class="op" id="7020382">,</span>&nbsp;<span class="ident" id="7020384">err</span>&nbsp;<span class="op" id="7020388">:=</span>&nbsp;<span class="ident" id="7020391"><a href="/gostd/compress/gzip/gunzip.go.html#4779786">NewReader</a></span><span class="op" id="7020400">(</span><span class="ident" id="7020401"><a href="/gostd/compress/gzip/gzip_test.go.html#7020073">buf</a></span><span class="op" id="7020404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020407">if</span>&nbsp;<span class="ident" id="7020410"><a href="/gostd/compress/gzip/gzip_test.go.html#7020384">err</a></span>&nbsp;<span class="op" id="7020414">!=</span>&nbsp;<span class="builtintype" id="7020417">nil</span>&nbsp;<span class="op" id="7020421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020425"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020426">.</span><span class="ident" id="7020427"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020433">(</span><span class="string" id="7020434">&#34;NewReader:&nbsp;%v&#34;</span><span class="op" id="7020449">,</span>&nbsp;<span class="ident" id="7020451"><a href="/gostd/compress/gzip/gzip_test.go.html#7020384">err</a></span><span class="op" id="7020454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020457">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020460">b</span><span class="op" id="7020461">,</span>&nbsp;<span class="ident" id="7020463"><a href="/gostd/compress/gzip/gzip_test.go.html#7020384">err</a></span>&nbsp;<span class="op" id="7020467">:=</span>&nbsp;<span class="ident" id="7020470"><a href="/gostd/compress/gzip/gzip_test.go.html#7019397">ioutil</a></span><span class="op" id="7020476">.</span><span class="ident" id="7020477"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7020484">(</span><span class="ident" id="7020485"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020489">if</span>&nbsp;<span class="ident" id="7020492"><a href="/gostd/compress/gzip/gzip_test.go.html#7020384">err</a></span>&nbsp;<span class="op" id="7020496">!=</span>&nbsp;<span class="builtintype" id="7020499">nil</span>&nbsp;<span class="op" id="7020503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020507"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020508">.</span><span class="ident" id="7020509"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020515">(</span><span class="string" id="7020516">&#34;ReadAll:&nbsp;%v&#34;</span><span class="op" id="7020529">,</span>&nbsp;<span class="ident" id="7020531"><a href="/gostd/compress/gzip/gzip_test.go.html#7020384">err</a></span><span class="op" id="7020534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020540">if</span>&nbsp;<span class="builtintype" id="7020543">string</span><span class="op" id="7020549">(</span><span class="ident" id="7020550"><a href="/gostd/compress/gzip/gzip_test.go.html#7020460">b</a></span><span class="op" id="7020551">)</span>&nbsp;<span class="op" id="7020553">!=</span>&nbsp;<span class="string" id="7020556">&#34;payload&#34;</span>&nbsp;<span class="op" id="7020566">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020570"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020571">.</span><span class="ident" id="7020572"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020578">(</span><span class="string" id="7020579">&#34;payload&nbsp;is&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7020603">,</span>&nbsp;<span class="builtintype" id="7020605">string</span><span class="op" id="7020611">(</span><span class="ident" id="7020612"><a href="/gostd/compress/gzip/gzip_test.go.html#7020460">b</a></span><span class="op" id="7020613">)</span><span class="op" id="7020614">,</span>&nbsp;<span class="string" id="7020616">&#34;payload&#34;</span><span class="op" id="7020625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020631">if</span>&nbsp;<span class="ident" id="7020634"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020635">.</span><span class="ident" id="7020636"><a href="/gostd/compress/gzip/gunzip.go.html#4778439">Comment</a></span>&nbsp;<span class="op" id="7020644">!=</span>&nbsp;<span class="string" id="7020647">&#34;comment&#34;</span>&nbsp;<span class="op" id="7020657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020661"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020662">.</span><span class="ident" id="7020663"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020669">(</span><span class="string" id="7020670">&#34;comment&nbsp;is&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7020694">,</span>&nbsp;<span class="ident" id="7020696"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020697">.</span><span class="ident" id="7020698"><a href="/gostd/compress/gzip/gunzip.go.html#4778439">Comment</a></span><span class="op" id="7020705">,</span>&nbsp;<span class="string" id="7020707">&#34;comment&#34;</span><span class="op" id="7020716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020719">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020722">if</span>&nbsp;<span class="builtintype" id="7020725">string</span><span class="op" id="7020731">(</span><span class="ident" id="7020732"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020733">.</span><span class="ident" id="7020734"><a href="/gostd/compress/gzip/gunzip.go.html#4778469">Extra</a></span><span class="op" id="7020739">)</span>&nbsp;<span class="op" id="7020741">!=</span>&nbsp;<span class="string" id="7020744">&#34;extra&#34;</span>&nbsp;<span class="op" id="7020752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020756"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020757">.</span><span class="ident" id="7020758"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020764">(</span><span class="string" id="7020765">&#34;extra&nbsp;is&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7020787">,</span>&nbsp;<span class="ident" id="7020789"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020790">.</span><span class="ident" id="7020791"><a href="/gostd/compress/gzip/gunzip.go.html#4778469">Extra</a></span><span class="op" id="7020796">,</span>&nbsp;<span class="string" id="7020798">&#34;extra&#34;</span><span class="op" id="7020805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020811">if</span>&nbsp;<span class="ident" id="7020814"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020815">.</span><span class="ident" id="7020816"><a href="/gostd/compress/gzip/gunzip.go.html#4778504">ModTime</a></span><span class="op" id="7020823">.</span><span class="ident" id="7020824"><a href="/gostd/time/time.go.html#2744150">Unix</a></span><span class="op" id="7020828">(</span><span class="op" id="7020829">)</span>&nbsp;<span class="op" id="7020831">!=</span>&nbsp;<span class="num" id="7020834">1e8</span>&nbsp;<span class="op" id="7020838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020842"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020843">.</span><span class="ident" id="7020844"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020850">(</span><span class="string" id="7020851">&#34;mtime&nbsp;is&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7020873">,</span>&nbsp;<span class="ident" id="7020875"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020876">.</span><span class="ident" id="7020877"><a href="/gostd/compress/gzip/gunzip.go.html#4778504">ModTime</a></span><span class="op" id="7020884">.</span><span class="ident" id="7020885"><a href="/gostd/time/time.go.html#2744150">Unix</a></span><span class="op" id="7020889">(</span><span class="op" id="7020890">)</span><span class="op" id="7020891">,</span>&nbsp;<span class="builtintype" id="7020893">uint32</span><span class="op" id="7020899">(</span><span class="num" id="7020900">1e8</span><span class="op" id="7020903">)</span><span class="op" id="7020904">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020910">if</span>&nbsp;<span class="ident" id="7020913"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020914">.</span><span class="ident" id="7020915"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span>&nbsp;<span class="op" id="7020920">!=</span>&nbsp;<span class="string" id="7020923">&#34;name&#34;</span>&nbsp;<span class="op" id="7020930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7020934"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7020935">.</span><span class="ident" id="7020936"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7020942">(</span><span class="string" id="7020943">&#34;name&nbsp;is&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7020964">,</span>&nbsp;<span class="ident" id="7020966"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020967">.</span><span class="ident" id="7020968"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span><span class="op" id="7020972">,</span>&nbsp;<span class="string" id="7020974">&#34;name&#34;</span><span class="op" id="7020980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7020983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7020986">if</span>&nbsp;<span class="ident" id="7020989">err</span>&nbsp;<span class="op" id="7020993">:=</span>&nbsp;<span class="ident" id="7020996"><a href="/gostd/compress/gzip/gzip_test.go.html#7020381">r</a></span><span class="op" id="7020997">.</span><span class="ident" id="7020998"><a href="/gostd/compress/gzip/gunzip.go.html#4784506">Close</a></span><span class="op" id="7021003">(</span><span class="op" id="7021004">)</span><span class="op" id="7021005">;</span>&nbsp;<span class="ident" id="7021007"><a href="/gostd/compress/gzip/gzip_test.go.html#7020989">err</a></span>&nbsp;<span class="op" id="7021011">!=</span>&nbsp;<span class="builtintype" id="7021014">nil</span>&nbsp;<span class="op" id="7021018">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021022"><a href="/gostd/compress/gzip/gzip_test.go.html#7020056">t</a></span><span class="op" id="7021023">.</span><span class="ident" id="7021024"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7021030">(</span><span class="string" id="7021031">&#34;Reader.Close:&nbsp;%v&#34;</span><span class="op" id="7021049">,</span>&nbsp;<span class="ident" id="7021051"><a href="/gostd/compress/gzip/gzip_test.go.html#7020989">err</a></span><span class="op" id="7021054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021057">}</span><br>
<span class="lineno"></span><span class="op" id="7021059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7021062">//&nbsp;TestLatin1&nbsp;tests&nbsp;the&nbsp;internal&nbsp;functions&nbsp;for&nbsp;converting&nbsp;to&nbsp;and&nbsp;from&nbsp;Latin-1.</span><br>
<span class="lineno">85</span><span class="keyword" id="7021141">func</span>&nbsp;<span class="ident" id="7021146">TestLatin1</span><span class="op" id="7021156">(</span><span class="ident" id="7021157">t</span>&nbsp;<span class="op" id="7021159">*</span><span class="ident" id="7021160"><a href="/gostd/compress/gzip/gzip_test.go.html#7019410">testing</a></span><span class="op" id="7021167">.</span><span class="ident" id="7021168"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7021169">)</span>&nbsp;<span class="op" id="7021171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021174">latin1</span>&nbsp;<span class="op" id="7021181">:=</span>&nbsp;<span class="op" id="7021184">[</span><span class="op" id="7021185">]</span><span class="builtintype" id="7021186">byte</span><span class="op" id="7021190">{</span><span class="num" id="7021191">0xc4</span><span class="op" id="7021195">,</span>&nbsp;<span class="string" id="7021197">&#39;u&#39;</span><span class="op" id="7021200">,</span>&nbsp;<span class="num" id="7021202">0xdf</span><span class="op" id="7021206">,</span>&nbsp;<span class="string" id="7021208">&#39;e&#39;</span><span class="op" id="7021211">,</span>&nbsp;<span class="string" id="7021213">&#39;r&#39;</span><span class="op" id="7021216">,</span>&nbsp;<span class="string" id="7021218">&#39;u&#39;</span><span class="op" id="7021221">,</span>&nbsp;<span class="string" id="7021223">&#39;n&#39;</span><span class="op" id="7021226">,</span>&nbsp;<span class="string" id="7021228">&#39;g&#39;</span><span class="op" id="7021231">,</span>&nbsp;<span class="num" id="7021233">0</span><span class="op" id="7021234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021237">utf8</span>&nbsp;<span class="op" id="7021242">:=</span>&nbsp;<span class="string" id="7021245">&#34;Äußerung&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021259">z</span>&nbsp;<span class="op" id="7021261">:=</span>&nbsp;<span class="ident" id="7021264"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="7021270">{</span><span class="ident" id="7021271"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span><span class="op" id="7021272">:</span>&nbsp;<span class="ident" id="7021274"><a href="/gostd/compress/gzip/gzip_test.go.html#7019379">bufio</a></span><span class="op" id="7021279">.</span><span class="ident" id="7021280"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="7021289">(</span><span class="ident" id="7021290"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7021295">.</span><span class="ident" id="7021296"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="7021305">(</span><span class="ident" id="7021306"><a href="/gostd/compress/gzip/gzip_test.go.html#7021174">latin1</a></span><span class="op" id="7021312">)</span><span class="op" id="7021313">)</span><span class="op" id="7021314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021317">s</span><span class="op" id="7021318">,</span>&nbsp;<span class="ident" id="7021320">err</span>&nbsp;<span class="op" id="7021324">:=</span>&nbsp;<span class="ident" id="7021327"><a href="/gostd/compress/gzip/gzip_test.go.html#7021259">z</a></span><span class="op" id="7021328">.</span><span class="ident" id="7021329"><a href="/gostd/compress/gzip/gunzip.go.html#4781692">readString</a></span><span class="op" id="7021339">(</span><span class="op" id="7021340">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7021343">if</span>&nbsp;<span class="ident" id="7021346"><a href="/gostd/compress/gzip/gzip_test.go.html#7021320">err</a></span>&nbsp;<span class="op" id="7021350">!=</span>&nbsp;<span class="builtintype" id="7021353">nil</span>&nbsp;<span class="op" id="7021357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021361"><a href="/gostd/compress/gzip/gzip_test.go.html#7021157">t</a></span><span class="op" id="7021362">.</span><span class="ident" id="7021363"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7021369">(</span><span class="string" id="7021370">&#34;readString:&nbsp;%v&#34;</span><span class="op" id="7021386">,</span>&nbsp;<span class="ident" id="7021388"><a href="/gostd/compress/gzip/gzip_test.go.html#7021320">err</a></span><span class="op" id="7021391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7021397">if</span>&nbsp;<span class="ident" id="7021400"><a href="/gostd/compress/gzip/gzip_test.go.html#7021317">s</a></span>&nbsp;<span class="op" id="7021402">!=</span>&nbsp;<span class="ident" id="7021405"><a href="/gostd/compress/gzip/gzip_test.go.html#7021237">utf8</a></span>&nbsp;<span class="op" id="7021410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021414"><a href="/gostd/compress/gzip/gzip_test.go.html#7021157">t</a></span><span class="op" id="7021415">.</span><span class="ident" id="7021416"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7021422">(</span><span class="string" id="7021423">&#34;read&nbsp;latin-1:&nbsp;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7021454">,</span>&nbsp;<span class="ident" id="7021456"><a href="/gostd/compress/gzip/gzip_test.go.html#7021317">s</a></span><span class="op" id="7021457">,</span>&nbsp;<span class="ident" id="7021459"><a href="/gostd/compress/gzip/gzip_test.go.html#7021237">utf8</a></span><span class="op" id="7021463">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021470">buf</span>&nbsp;<span class="op" id="7021474">:=</span>&nbsp;<span class="ident" id="7021477"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7021482">.</span><span class="ident" id="7021483"><a href="/gostd/bytes/buffer.go.html#1395573">NewBuffer</a></span><span class="op" id="7021492">(</span><span class="builtinfunc" id="7021493">make</span><span class="op" id="7021497">(</span><span class="op" id="7021498">[</span><span class="op" id="7021499">]</span><span class="builtintype" id="7021500">byte</span><span class="op" id="7021504">,</span>&nbsp;<span class="num" id="7021506">0</span><span class="op" id="7021507">,</span>&nbsp;<span class="builtinfunc" id="7021509">len</span><span class="op" id="7021512">(</span><span class="ident" id="7021513"><a href="/gostd/compress/gzip/gzip_test.go.html#7021174">latin1</a></span><span class="op" id="7021519">)</span><span class="op" id="7021520">)</span><span class="op" id="7021521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021524">c</span>&nbsp;<span class="op" id="7021526">:=</span>&nbsp;<span class="ident" id="7021529"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="7021535">{</span><span class="ident" id="7021536"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="7021537">:</span>&nbsp;<span class="ident" id="7021539"><a href="/gostd/compress/gzip/gzip_test.go.html#7021470">buf</a></span><span class="op" id="7021542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7021545">if</span>&nbsp;<span class="ident" id="7021548"><a href="/gostd/compress/gzip/gzip_test.go.html#7021320">err</a></span>&nbsp;<span class="op" id="7021552">=</span>&nbsp;<span class="ident" id="7021554"><a href="/gostd/compress/gzip/gzip_test.go.html#7021524">c</a></span><span class="op" id="7021555">.</span><span class="ident" id="7021556"><a href="/gostd/compress/gzip/gzip.go.html#4788097">writeString</a></span><span class="op" id="7021567">(</span><span class="ident" id="7021568"><a href="/gostd/compress/gzip/gzip_test.go.html#7021237">utf8</a></span><span class="op" id="7021572">)</span><span class="op" id="7021573">;</span>&nbsp;<span class="ident" id="7021575"><a href="/gostd/compress/gzip/gzip_test.go.html#7021320">err</a></span>&nbsp;<span class="op" id="7021579">!=</span>&nbsp;<span class="builtintype" id="7021582">nil</span>&nbsp;<span class="op" id="7021586">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021590"><a href="/gostd/compress/gzip/gzip_test.go.html#7021157">t</a></span><span class="op" id="7021591">.</span><span class="ident" id="7021592"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7021598">(</span><span class="string" id="7021599">&#34;writeString:&nbsp;%v&#34;</span><span class="op" id="7021616">,</span>&nbsp;<span class="ident" id="7021618"><a href="/gostd/compress/gzip/gzip_test.go.html#7021320">err</a></span><span class="op" id="7021621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021627"><a href="/gostd/compress/gzip/gzip_test.go.html#7021317">s</a></span>&nbsp;<span class="op" id="7021629">=</span>&nbsp;<span class="ident" id="7021631"><a href="/gostd/compress/gzip/gzip_test.go.html#7021470">buf</a></span><span class="op" id="7021634">.</span><span class="ident" id="7021635"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7021641">(</span><span class="op" id="7021642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7021645">if</span>&nbsp;<span class="ident" id="7021648"><a href="/gostd/compress/gzip/gzip_test.go.html#7021317">s</a></span>&nbsp;<span class="op" id="7021650">!=</span>&nbsp;<span class="builtintype" id="7021653">string</span><span class="op" id="7021659">(</span><span class="ident" id="7021660"><a href="/gostd/compress/gzip/gzip_test.go.html#7021174">latin1</a></span><span class="op" id="7021666">)</span>&nbsp;<span class="op" id="7021668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021672"><a href="/gostd/compress/gzip/gzip_test.go.html#7021157">t</a></span><span class="op" id="7021673">.</span><span class="ident" id="7021674"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7021680">(</span><span class="string" id="7021681">&#34;write&nbsp;utf-8:&nbsp;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7021711">,</span>&nbsp;<span class="ident" id="7021713"><a href="/gostd/compress/gzip/gzip_test.go.html#7021317">s</a></span><span class="op" id="7021714">,</span>&nbsp;<span class="builtintype" id="7021716">string</span><span class="op" id="7021722">(</span><span class="ident" id="7021723"><a href="/gostd/compress/gzip/gzip_test.go.html#7021174">latin1</a></span><span class="op" id="7021729">)</span><span class="op" id="7021730">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021733">}</span><br>
<span class="lineno"></span><span class="op" id="7021735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7021738">//&nbsp;TestLatin1RoundTrip&nbsp;tests&nbsp;that&nbsp;metadata&nbsp;that&nbsp;is&nbsp;representable&nbsp;in&nbsp;Latin-1</span><br>
<span class="lineno"></span><span class="comment" id="7021814">//&nbsp;survives&nbsp;a&nbsp;round&nbsp;trip.</span><br>
<span class="lineno">110</span><span class="keyword" id="7021840">func</span>&nbsp;<span class="ident" id="7021845">TestLatin1RoundTrip</span><span class="op" id="7021864">(</span><span class="ident" id="7021865">t</span>&nbsp;<span class="op" id="7021867">*</span><span class="ident" id="7021868"><a href="/gostd/compress/gzip/gzip_test.go.html#7019410">testing</a></span><span class="op" id="7021875">.</span><span class="ident" id="7021876"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7021877">)</span>&nbsp;<span class="op" id="7021879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021882">testCases</span>&nbsp;<span class="op" id="7021892">:=</span>&nbsp;<span class="op" id="7021895">[</span><span class="op" id="7021896">]</span><span class="keyword" id="7021897">struct</span>&nbsp;<span class="op" id="7021904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021908">name</span>&nbsp;<span class="builtintype" id="7021913">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7021922">ok</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7021927">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021933">}</span><span class="op" id="7021934">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021938">{</span><span class="string" id="7021939">&#34;&#34;</span><span class="op" id="7021941">,</span>&nbsp;<span class="builtintype" id="7021943">true</span><span class="op" id="7021947">}</span><span class="op" id="7021948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021952">{</span><span class="string" id="7021953">&#34;ASCII&nbsp;is&nbsp;OK&#34;</span><span class="op" id="7021966">,</span>&nbsp;<span class="builtintype" id="7021968">true</span><span class="op" id="7021972">}</span><span class="op" id="7021973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021977">{</span><span class="string" id="7021978">&#34;unless&nbsp;it&nbsp;contains&nbsp;a&nbsp;NUL\x00&#34;</span><span class="op" id="7022008">,</span>&nbsp;<span class="builtintype" id="7022010">false</span><span class="op" id="7022015">}</span><span class="op" id="7022016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022020">{</span><span class="string" id="7022021">&#34;no&nbsp;matter&nbsp;where&nbsp;\x00&nbsp;occurs&#34;</span><span class="op" id="7022050">,</span>&nbsp;<span class="builtintype" id="7022052">false</span><span class="op" id="7022057">}</span><span class="op" id="7022058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022062">{</span><span class="string" id="7022063">&#34;\x00\x00\x00&#34;</span><span class="op" id="7022077">,</span>&nbsp;<span class="builtintype" id="7022079">false</span><span class="op" id="7022084">}</span><span class="op" id="7022085">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022089">{</span><span class="string" id="7022090">&#34;Látin-1&nbsp;also&nbsp;passes&nbsp;(U+00E1)&#34;</span><span class="op" id="7022121">,</span>&nbsp;<span class="builtintype" id="7022123">true</span><span class="op" id="7022127">}</span><span class="op" id="7022128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022132">{</span><span class="string" id="7022133">&#34;but&nbsp;LĀtin&nbsp;Extended-A&nbsp;(U+0100)&nbsp;does&nbsp;not&#34;</span><span class="op" id="7022174">,</span>&nbsp;<span class="builtintype" id="7022176">false</span><span class="op" id="7022181">}</span><span class="op" id="7022182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022186">{</span><span class="string" id="7022187">&#34;neither&nbsp;does&nbsp;日本語&#34;</span><span class="op" id="7022211">,</span>&nbsp;<span class="builtintype" id="7022213">false</span><span class="op" id="7022218">}</span><span class="op" id="7022219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022223">{</span><span class="string" id="7022224">&#34;invalid&nbsp;UTF-8&nbsp;also&nbsp;\xffails&#34;</span><span class="op" id="7022253">,</span>&nbsp;<span class="builtintype" id="7022255">false</span><span class="op" id="7022260">}</span><span class="op" id="7022261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022265">{</span><span class="string" id="7022266">&#34;\x00&nbsp;as&nbsp;does&nbsp;Látin-1&nbsp;with&nbsp;NUL&#34;</span><span class="op" id="7022298">,</span>&nbsp;<span class="builtintype" id="7022300">false</span><span class="op" id="7022305">}</span><span class="op" id="7022306">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022312">for</span>&nbsp;<span class="ident" id="7022316">_</span><span class="op" id="7022317">,</span>&nbsp;<span class="ident" id="7022319">tc</span>&nbsp;<span class="op" id="7022322">:=</span>&nbsp;<span class="keyword" id="7022325">range</span>&nbsp;<span class="ident" id="7022331"><a href="/gostd/compress/gzip/gzip_test.go.html#7021882">testCases</a></span>&nbsp;<span class="op" id="7022341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022345">buf</span>&nbsp;<span class="op" id="7022349">:=</span>&nbsp;<span class="builtinfunc" id="7022352">new</span><span class="op" id="7022355">(</span><span class="ident" id="7022356"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7022361">.</span><span class="ident" id="7022362"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7022368">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022373">w</span>&nbsp;<span class="op" id="7022375">:=</span>&nbsp;<span class="ident" id="7022378"><a href="/gostd/compress/gzip/gzip.go.html#4786016">NewWriter</a></span><span class="op" id="7022387">(</span><span class="ident" id="7022388"><a href="/gostd/compress/gzip/gzip_test.go.html#7022345">buf</a></span><span class="op" id="7022391">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022395"><a href="/gostd/compress/gzip/gzip_test.go.html#7022373">w</a></span><span class="op" id="7022396">.</span><span class="ident" id="7022397"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span>&nbsp;<span class="op" id="7022402">=</span>&nbsp;<span class="ident" id="7022404"><a href="/gostd/compress/gzip/gzip_test.go.html#7022319">tc</a></span><span class="op" id="7022406">.</span><span class="ident" id="7022407"><a href="/gostd/compress/gzip/gzip_test.go.html#7021908">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022414">err</span>&nbsp;<span class="op" id="7022418">:=</span>&nbsp;<span class="ident" id="7022421"><a href="/gostd/compress/gzip/gzip_test.go.html#7022373">w</a></span><span class="op" id="7022422">.</span><span class="ident" id="7022423"><a href="/gostd/compress/gzip/gzip.go.html#4790802">Close</a></span><span class="op" id="7022428">(</span><span class="op" id="7022429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022433">if</span>&nbsp;<span class="op" id="7022436">(</span><span class="ident" id="7022437"><a href="/gostd/compress/gzip/gzip_test.go.html#7022414">err</a></span>&nbsp;<span class="op" id="7022441">==</span>&nbsp;<span class="builtintype" id="7022444">nil</span><span class="op" id="7022447">)</span>&nbsp;<span class="op" id="7022449">!=</span>&nbsp;<span class="ident" id="7022452"><a href="/gostd/compress/gzip/gzip_test.go.html#7022319">tc</a></span><span class="op" id="7022454">.</span><span class="ident" id="7022455"><a href="/gostd/compress/gzip/gzip_test.go.html#7021922">ok</a></span>&nbsp;<span class="op" id="7022458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022463"><a href="/gostd/compress/gzip/gzip_test.go.html#7021865">t</a></span><span class="op" id="7022464">.</span><span class="ident" id="7022465"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7022471">(</span><span class="string" id="7022472">&#34;Writer.Close:&nbsp;name&nbsp;=&nbsp;%q,&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7022507">,</span>&nbsp;<span class="ident" id="7022509"><a href="/gostd/compress/gzip/gzip_test.go.html#7022319">tc</a></span><span class="op" id="7022511">.</span><span class="ident" id="7022512"><a href="/gostd/compress/gzip/gzip_test.go.html#7021908">name</a></span><span class="op" id="7022516">,</span>&nbsp;<span class="ident" id="7022518"><a href="/gostd/compress/gzip/gzip_test.go.html#7022414">err</a></span><span class="op" id="7022521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022526">continue</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022541">if</span>&nbsp;<span class="op" id="7022544">!</span><span class="ident" id="7022545"><a href="/gostd/compress/gzip/gzip_test.go.html#7022319">tc</a></span><span class="op" id="7022547">.</span><span class="ident" id="7022548"><a href="/gostd/compress/gzip/gzip_test.go.html#7021922">ok</a></span>&nbsp;<span class="op" id="7022551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022556">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022572">r</span><span class="op" id="7022573">,</span>&nbsp;<span class="ident" id="7022575"><a href="/gostd/compress/gzip/gzip_test.go.html#7022414">err</a></span>&nbsp;<span class="op" id="7022579">:=</span>&nbsp;<span class="ident" id="7022582"><a href="/gostd/compress/gzip/gunzip.go.html#4779786">NewReader</a></span><span class="op" id="7022591">(</span><span class="ident" id="7022592"><a href="/gostd/compress/gzip/gzip_test.go.html#7022345">buf</a></span><span class="op" id="7022595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022599">if</span>&nbsp;<span class="ident" id="7022602"><a href="/gostd/compress/gzip/gzip_test.go.html#7022414">err</a></span>&nbsp;<span class="op" id="7022606">!=</span>&nbsp;<span class="builtintype" id="7022609">nil</span>&nbsp;<span class="op" id="7022613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022618"><a href="/gostd/compress/gzip/gzip_test.go.html#7021865">t</a></span><span class="op" id="7022619">.</span><span class="ident" id="7022620"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7022626">(</span><span class="string" id="7022627">&#34;NewReader:&nbsp;%v&#34;</span><span class="op" id="7022642">,</span>&nbsp;<span class="ident" id="7022644"><a href="/gostd/compress/gzip/gzip_test.go.html#7022414">err</a></span><span class="op" id="7022647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022652">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022663">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022667">_</span><span class="op" id="7022668">,</span>&nbsp;<span class="ident" id="7022670"><a href="/gostd/compress/gzip/gzip_test.go.html#7022414">err</a></span>&nbsp;<span class="op" id="7022674">=</span>&nbsp;<span class="ident" id="7022676"><a href="/gostd/compress/gzip/gzip_test.go.html#7019397">ioutil</a></span><span class="op" id="7022682">.</span><span class="ident" id="7022683"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7022690">(</span><span class="ident" id="7022691"><a href="/gostd/compress/gzip/gzip_test.go.html#7022572">r</a></span><span class="op" id="7022692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022696">if</span>&nbsp;<span class="ident" id="7022699"><a href="/gostd/compress/gzip/gzip_test.go.html#7022414">err</a></span>&nbsp;<span class="op" id="7022703">!=</span>&nbsp;<span class="builtintype" id="7022706">nil</span>&nbsp;<span class="op" id="7022710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022715"><a href="/gostd/compress/gzip/gzip_test.go.html#7021865">t</a></span><span class="op" id="7022716">.</span><span class="ident" id="7022717"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7022723">(</span><span class="string" id="7022724">&#34;ReadAll:&nbsp;%v&#34;</span><span class="op" id="7022737">,</span>&nbsp;<span class="ident" id="7022739"><a href="/gostd/compress/gzip/gzip_test.go.html#7022414">err</a></span><span class="op" id="7022742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022747">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022758">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022762">if</span>&nbsp;<span class="ident" id="7022765"><a href="/gostd/compress/gzip/gzip_test.go.html#7022572">r</a></span><span class="op" id="7022766">.</span><span class="ident" id="7022767"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span>&nbsp;<span class="op" id="7022772">!=</span>&nbsp;<span class="ident" id="7022775"><a href="/gostd/compress/gzip/gzip_test.go.html#7022319">tc</a></span><span class="op" id="7022777">.</span><span class="ident" id="7022778"><a href="/gostd/compress/gzip/gzip_test.go.html#7021908">name</a></span>&nbsp;<span class="op" id="7022783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022788"><a href="/gostd/compress/gzip/gzip_test.go.html#7021865">t</a></span><span class="op" id="7022789">.</span><span class="ident" id="7022790"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7022796">(</span><span class="string" id="7022797">&#34;name&nbsp;is&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7022818">,</span>&nbsp;<span class="ident" id="7022820"><a href="/gostd/compress/gzip/gzip_test.go.html#7022572">r</a></span><span class="op" id="7022821">.</span><span class="ident" id="7022822"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span><span class="op" id="7022826">,</span>&nbsp;<span class="ident" id="7022828"><a href="/gostd/compress/gzip/gzip_test.go.html#7022319">tc</a></span><span class="op" id="7022830">.</span><span class="ident" id="7022831"><a href="/gostd/compress/gzip/gzip_test.go.html#7021908">name</a></span><span class="op" id="7022835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022840">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022855">if</span>&nbsp;<span class="ident" id="7022858">err</span>&nbsp;<span class="op" id="7022862">:=</span>&nbsp;<span class="ident" id="7022865"><a href="/gostd/compress/gzip/gzip_test.go.html#7022572">r</a></span><span class="op" id="7022866">.</span><span class="ident" id="7022867"><a href="/gostd/compress/gzip/gunzip.go.html#4784506">Close</a></span><span class="op" id="7022872">(</span><span class="op" id="7022873">)</span><span class="op" id="7022874">;</span>&nbsp;<span class="ident" id="7022876"><a href="/gostd/compress/gzip/gzip_test.go.html#7022858">err</a></span>&nbsp;<span class="op" id="7022880">!=</span>&nbsp;<span class="builtintype" id="7022883">nil</span>&nbsp;<span class="op" id="7022887">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022892"><a href="/gostd/compress/gzip/gzip_test.go.html#7021865">t</a></span><span class="op" id="7022893">.</span><span class="ident" id="7022894"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7022900">(</span><span class="string" id="7022901">&#34;Reader.Close:&nbsp;%v&#34;</span><span class="op" id="7022919">,</span>&nbsp;<span class="ident" id="7022921"><a href="/gostd/compress/gzip/gzip_test.go.html#7022858">err</a></span><span class="op" id="7022924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7022929">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7022943">}</span><br>
<span class="lineno"></span><span class="op" id="7022945">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="7022948">func</span>&nbsp;<span class="ident" id="7022953">TestWriterFlush</span><span class="op" id="7022968">(</span><span class="ident" id="7022969">t</span>&nbsp;<span class="op" id="7022971">*</span><span class="ident" id="7022972"><a href="/gostd/compress/gzip/gzip_test.go.html#7019410">testing</a></span><span class="op" id="7022979">.</span><span class="ident" id="7022980"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7022981">)</span>&nbsp;<span class="op" id="7022983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7022986">buf</span>&nbsp;<span class="op" id="7022990">:=</span>&nbsp;<span class="builtinfunc" id="7022993">new</span><span class="op" id="7022996">(</span><span class="ident" id="7022997"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7023002">.</span><span class="ident" id="7023003"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7023009">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023013">w</span>&nbsp;<span class="op" id="7023015">:=</span>&nbsp;<span class="ident" id="7023018"><a href="/gostd/compress/gzip/gzip.go.html#4786016">NewWriter</a></span><span class="op" id="7023027">(</span><span class="ident" id="7023028"><a href="/gostd/compress/gzip/gzip_test.go.html#7022986">buf</a></span><span class="op" id="7023031">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023034"><a href="/gostd/compress/gzip/gzip_test.go.html#7023013">w</a></span><span class="op" id="7023035">.</span><span class="ident" id="7023036"><a href="/gostd/compress/gzip/gunzip.go.html#4778439">Comment</a></span>&nbsp;<span class="op" id="7023044">=</span>&nbsp;<span class="string" id="7023046">&#34;comment&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023057"><a href="/gostd/compress/gzip/gzip_test.go.html#7023013">w</a></span><span class="op" id="7023058">.</span><span class="ident" id="7023059"><a href="/gostd/compress/gzip/gunzip.go.html#4778469">Extra</a></span>&nbsp;<span class="op" id="7023065">=</span>&nbsp;<span class="op" id="7023067">[</span><span class="op" id="7023068">]</span><span class="builtintype" id="7023069">byte</span><span class="op" id="7023073">(</span><span class="string" id="7023074">&#34;extra&#34;</span><span class="op" id="7023081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023084"><a href="/gostd/compress/gzip/gzip_test.go.html#7023013">w</a></span><span class="op" id="7023085">.</span><span class="ident" id="7023086"><a href="/gostd/compress/gzip/gunzip.go.html#4778504">ModTime</a></span>&nbsp;<span class="op" id="7023094">=</span>&nbsp;<span class="ident" id="7023096"><a href="/gostd/compress/gzip/gzip_test.go.html#7019421">time</a></span><span class="op" id="7023100">.</span><span class="ident" id="7023101"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="7023105">(</span><span class="num" id="7023106">1e8</span><span class="op" id="7023109">,</span>&nbsp;<span class="num" id="7023111">0</span><span class="op" id="7023112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023115"><a href="/gostd/compress/gzip/gzip_test.go.html#7023013">w</a></span><span class="op" id="7023116">.</span><span class="ident" id="7023117"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span>&nbsp;<span class="op" id="7023122">=</span>&nbsp;<span class="string" id="7023124">&#34;name&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023133">n0</span>&nbsp;<span class="op" id="7023136">:=</span>&nbsp;<span class="ident" id="7023139"><a href="/gostd/compress/gzip/gzip_test.go.html#7022986">buf</a></span><span class="op" id="7023142">.</span><span class="ident" id="7023143"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="7023146">(</span><span class="op" id="7023147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7023150">if</span>&nbsp;<span class="ident" id="7023153"><a href="/gostd/compress/gzip/gzip_test.go.html#7023133">n0</a></span>&nbsp;<span class="op" id="7023156">!=</span>&nbsp;<span class="num" id="7023159">0</span>&nbsp;<span class="op" id="7023161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023165"><a href="/gostd/compress/gzip/gzip_test.go.html#7022969">t</a></span><span class="op" id="7023166">.</span><span class="ident" id="7023167"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7023173">(</span><span class="string" id="7023174">&#34;buffer&nbsp;size&nbsp;=&nbsp;%d&nbsp;before&nbsp;writes;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7023214">,</span>&nbsp;<span class="ident" id="7023216"><a href="/gostd/compress/gzip/gzip_test.go.html#7023133">n0</a></span><span class="op" id="7023218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7023221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7023225">if</span>&nbsp;<span class="ident" id="7023228">err</span>&nbsp;<span class="op" id="7023232">:=</span>&nbsp;<span class="ident" id="7023235"><a href="/gostd/compress/gzip/gzip_test.go.html#7023013">w</a></span><span class="op" id="7023236">.</span><span class="ident" id="7023237"><a href="/gostd/compress/gzip/gzip.go.html#4790442">Flush</a></span><span class="op" id="7023242">(</span><span class="op" id="7023243">)</span><span class="op" id="7023244">;</span>&nbsp;<span class="ident" id="7023246"><a href="/gostd/compress/gzip/gzip_test.go.html#7023228">err</a></span>&nbsp;<span class="op" id="7023250">!=</span>&nbsp;<span class="builtintype" id="7023253">nil</span>&nbsp;<span class="op" id="7023257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023261"><a href="/gostd/compress/gzip/gzip_test.go.html#7022969">t</a></span><span class="op" id="7023262">.</span><span class="ident" id="7023263"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7023268">(</span><span class="ident" id="7023269"><a href="/gostd/compress/gzip/gzip_test.go.html#7023228">err</a></span><span class="op" id="7023272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7023275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023279">n1</span>&nbsp;<span class="op" id="7023282">:=</span>&nbsp;<span class="ident" id="7023285"><a href="/gostd/compress/gzip/gzip_test.go.html#7022986">buf</a></span><span class="op" id="7023288">.</span><span class="ident" id="7023289"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="7023292">(</span><span class="op" id="7023293">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7023296">if</span>&nbsp;<span class="ident" id="7023299"><a href="/gostd/compress/gzip/gzip_test.go.html#7023279">n1</a></span>&nbsp;<span class="op" id="7023302">==</span>&nbsp;<span class="num" id="7023305">0</span>&nbsp;<span class="op" id="7023307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023311"><a href="/gostd/compress/gzip/gzip_test.go.html#7022969">t</a></span><span class="op" id="7023312">.</span><span class="ident" id="7023313"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7023318">(</span><span class="string" id="7023319">&#34;no&nbsp;data&nbsp;after&nbsp;first&nbsp;flush&#34;</span><span class="op" id="7023346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7023349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023353"><a href="/gostd/compress/gzip/gzip_test.go.html#7023013">w</a></span><span class="op" id="7023354">.</span><span class="ident" id="7023355"><a href="/gostd/compress/gzip/gzip.go.html#4788853">Write</a></span><span class="op" id="7023360">(</span><span class="op" id="7023361">[</span><span class="op" id="7023362">]</span><span class="builtintype" id="7023363">byte</span><span class="op" id="7023367">(</span><span class="string" id="7023368">&#34;x&#34;</span><span class="op" id="7023371">)</span><span class="op" id="7023372">)</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023376">n2</span>&nbsp;<span class="op" id="7023379">:=</span>&nbsp;<span class="ident" id="7023382"><a href="/gostd/compress/gzip/gzip_test.go.html#7022986">buf</a></span><span class="op" id="7023385">.</span><span class="ident" id="7023386"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="7023389">(</span><span class="op" id="7023390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7023393">if</span>&nbsp;<span class="ident" id="7023396"><a href="/gostd/compress/gzip/gzip_test.go.html#7023279">n1</a></span>&nbsp;<span class="op" id="7023399">!=</span>&nbsp;<span class="ident" id="7023402"><a href="/gostd/compress/gzip/gzip_test.go.html#7023376">n2</a></span>&nbsp;<span class="op" id="7023405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023409"><a href="/gostd/compress/gzip/gzip_test.go.html#7022969">t</a></span><span class="op" id="7023410">.</span><span class="ident" id="7023411"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7023417">(</span><span class="string" id="7023418">&#34;after&nbsp;writing&nbsp;a&nbsp;single&nbsp;byte,&nbsp;size&nbsp;changed&nbsp;from&nbsp;%d&nbsp;to&nbsp;%d;&nbsp;want&nbsp;no&nbsp;change&#34;</span><span class="op" id="7023491">,</span>&nbsp;<span class="ident" id="7023493"><a href="/gostd/compress/gzip/gzip_test.go.html#7023279">n1</a></span><span class="op" id="7023495">,</span>&nbsp;<span class="ident" id="7023497"><a href="/gostd/compress/gzip/gzip_test.go.html#7023376">n2</a></span><span class="op" id="7023499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7023502">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7023506">if</span>&nbsp;<span class="ident" id="7023509">err</span>&nbsp;<span class="op" id="7023513">:=</span>&nbsp;<span class="ident" id="7023516"><a href="/gostd/compress/gzip/gzip_test.go.html#7023013">w</a></span><span class="op" id="7023517">.</span><span class="ident" id="7023518"><a href="/gostd/compress/gzip/gzip.go.html#4790442">Flush</a></span><span class="op" id="7023523">(</span><span class="op" id="7023524">)</span><span class="op" id="7023525">;</span>&nbsp;<span class="ident" id="7023527"><a href="/gostd/compress/gzip/gzip_test.go.html#7023509">err</a></span>&nbsp;<span class="op" id="7023531">!=</span>&nbsp;<span class="builtintype" id="7023534">nil</span>&nbsp;<span class="op" id="7023538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023542"><a href="/gostd/compress/gzip/gzip_test.go.html#7022969">t</a></span><span class="op" id="7023543">.</span><span class="ident" id="7023544"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7023549">(</span><span class="ident" id="7023550"><a href="/gostd/compress/gzip/gzip_test.go.html#7023509">err</a></span><span class="op" id="7023553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7023556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023560">n3</span>&nbsp;<span class="op" id="7023563">:=</span>&nbsp;<span class="ident" id="7023566"><a href="/gostd/compress/gzip/gzip_test.go.html#7022986">buf</a></span><span class="op" id="7023569">.</span><span class="ident" id="7023570"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="7023573">(</span><span class="op" id="7023574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7023577">if</span>&nbsp;<span class="ident" id="7023580"><a href="/gostd/compress/gzip/gzip_test.go.html#7023376">n2</a></span>&nbsp;<span class="op" id="7023583">==</span>&nbsp;<span class="ident" id="7023586"><a href="/gostd/compress/gzip/gzip_test.go.html#7023560">n3</a></span>&nbsp;<span class="op" id="7023589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023593"><a href="/gostd/compress/gzip/gzip_test.go.html#7022969">t</a></span><span class="op" id="7023594">.</span><span class="ident" id="7023595"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7023600">(</span><span class="string" id="7023601">&#34;Flush&nbsp;didn&#39;t&nbsp;flush&nbsp;any&nbsp;data&#34;</span><span class="op" id="7023630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7023633">}</span><br>
<span class="lineno"></span><span class="op" id="7023635">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7023638">//&nbsp;Multiple&nbsp;gzip&nbsp;files&nbsp;concatenated&nbsp;form&nbsp;a&nbsp;valid&nbsp;gzip&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="7023698">func</span>&nbsp;<span class="ident" id="7023703">TestConcat</span><span class="op" id="7023713">(</span><span class="ident" id="7023714">t</span>&nbsp;<span class="op" id="7023716">*</span><span class="ident" id="7023717"><a href="/gostd/compress/gzip/gzip_test.go.html#7019410">testing</a></span><span class="op" id="7023724">.</span><span class="ident" id="7023725"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7023726">)</span>&nbsp;<span class="op" id="7023728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7023731">var</span>&nbsp;<span class="ident" id="7023735">buf</span>&nbsp;<span class="ident" id="7023739"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7023744">.</span><span class="ident" id="7023745"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023753">w</span>&nbsp;<span class="op" id="7023755">:=</span>&nbsp;<span class="ident" id="7023758"><a href="/gostd/compress/gzip/gzip.go.html#4786016">NewWriter</a></span><span class="op" id="7023767">(</span><span class="op" id="7023768">&amp;</span><span class="ident" id="7023769"><a href="/gostd/compress/gzip/gzip_test.go.html#7023735">buf</a></span><span class="op" id="7023772">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023775"><a href="/gostd/compress/gzip/gzip_test.go.html#7023753">w</a></span><span class="op" id="7023776">.</span><span class="ident" id="7023777"><a href="/gostd/compress/gzip/gzip.go.html#4788853">Write</a></span><span class="op" id="7023782">(</span><span class="op" id="7023783">[</span><span class="op" id="7023784">]</span><span class="builtintype" id="7023785">byte</span><span class="op" id="7023789">(</span><span class="string" id="7023790">&#34;hello&nbsp;&#34;</span><span class="op" id="7023798">)</span><span class="op" id="7023799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023802"><a href="/gostd/compress/gzip/gzip_test.go.html#7023753">w</a></span><span class="op" id="7023803">.</span><span class="ident" id="7023804"><a href="/gostd/compress/gzip/gzip.go.html#4790802">Close</a></span><span class="op" id="7023809">(</span><span class="op" id="7023810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023813"><a href="/gostd/compress/gzip/gzip_test.go.html#7023753">w</a></span>&nbsp;<span class="op" id="7023815">=</span>&nbsp;<span class="ident" id="7023817"><a href="/gostd/compress/gzip/gzip.go.html#4786016">NewWriter</a></span><span class="op" id="7023826">(</span><span class="op" id="7023827">&amp;</span><span class="ident" id="7023828"><a href="/gostd/compress/gzip/gzip_test.go.html#7023735">buf</a></span><span class="op" id="7023831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023834"><a href="/gostd/compress/gzip/gzip_test.go.html#7023753">w</a></span><span class="op" id="7023835">.</span><span class="ident" id="7023836"><a href="/gostd/compress/gzip/gzip.go.html#4788853">Write</a></span><span class="op" id="7023841">(</span><span class="op" id="7023842">[</span><span class="op" id="7023843">]</span><span class="builtintype" id="7023844">byte</span><span class="op" id="7023848">(</span><span class="string" id="7023849">&#34;world\n&#34;</span><span class="op" id="7023858">)</span><span class="op" id="7023859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023862"><a href="/gostd/compress/gzip/gzip_test.go.html#7023753">w</a></span><span class="op" id="7023863">.</span><span class="ident" id="7023864"><a href="/gostd/compress/gzip/gzip.go.html#4790802">Close</a></span><span class="op" id="7023869">(</span><span class="op" id="7023870">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023874">r</span><span class="op" id="7023875">,</span>&nbsp;<span class="ident" id="7023877">err</span>&nbsp;<span class="op" id="7023881">:=</span>&nbsp;<span class="ident" id="7023884"><a href="/gostd/compress/gzip/gunzip.go.html#4779786">NewReader</a></span><span class="op" id="7023893">(</span><span class="op" id="7023894">&amp;</span><span class="ident" id="7023895"><a href="/gostd/compress/gzip/gzip_test.go.html#7023735">buf</a></span><span class="op" id="7023898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023901">data</span><span class="op" id="7023905">,</span>&nbsp;<span class="ident" id="7023907"><a href="/gostd/compress/gzip/gzip_test.go.html#7023877">err</a></span>&nbsp;<span class="op" id="7023911">:=</span>&nbsp;<span class="ident" id="7023914"><a href="/gostd/compress/gzip/gzip_test.go.html#7019397">ioutil</a></span><span class="op" id="7023920">.</span><span class="ident" id="7023921"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7023928">(</span><span class="ident" id="7023929"><a href="/gostd/compress/gzip/gzip_test.go.html#7023874">r</a></span><span class="op" id="7023930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7023933">if</span>&nbsp;<span class="builtintype" id="7023936">string</span><span class="op" id="7023942">(</span><span class="ident" id="7023943"><a href="/gostd/compress/gzip/gzip_test.go.html#7023901">data</a></span><span class="op" id="7023947">)</span>&nbsp;<span class="op" id="7023949">!=</span>&nbsp;<span class="string" id="7023952">&#34;hello&nbsp;world\n&#34;</span>&nbsp;<span class="op" id="7023968">||</span>&nbsp;<span class="ident" id="7023971"><a href="/gostd/compress/gzip/gzip_test.go.html#7023877">err</a></span>&nbsp;<span class="op" id="7023975">!=</span>&nbsp;<span class="builtintype" id="7023978">nil</span>&nbsp;<span class="op" id="7023982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7023986"><a href="/gostd/compress/gzip/gzip_test.go.html#7023714">t</a></span><span class="op" id="7023987">.</span><span class="ident" id="7023988"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7023994">(</span><span class="string" id="7023995">&#34;ReadAll&nbsp;=&nbsp;%q,&nbsp;%v,&nbsp;want&nbsp;%q,&nbsp;nil&#34;</span><span class="op" id="7024027">,</span>&nbsp;<span class="ident" id="7024029"><a href="/gostd/compress/gzip/gzip_test.go.html#7023901">data</a></span><span class="op" id="7024033">,</span>&nbsp;<span class="ident" id="7024035"><a href="/gostd/compress/gzip/gzip_test.go.html#7023877">err</a></span><span class="op" id="7024038">,</span>&nbsp;<span class="string" id="7024040">&#34;hello&nbsp;world&#34;</span><span class="op" id="7024053">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7024056">}</span><br>
<span class="lineno"></span><span class="op" id="7024058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7024061">func</span>&nbsp;<span class="ident" id="7024066">TestWriterReset</span><span class="op" id="7024081">(</span><span class="ident" id="7024082">t</span>&nbsp;<span class="op" id="7024084">*</span><span class="ident" id="7024085"><a href="/gostd/compress/gzip/gzip_test.go.html#7019410">testing</a></span><span class="op" id="7024092">.</span><span class="ident" id="7024093"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7024094">)</span>&nbsp;<span class="op" id="7024096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024099">buf</span>&nbsp;<span class="op" id="7024103">:=</span>&nbsp;<span class="builtinfunc" id="7024106">new</span><span class="op" id="7024109">(</span><span class="ident" id="7024110"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7024115">.</span><span class="ident" id="7024116"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7024122">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024125">buf2</span>&nbsp;<span class="op" id="7024130">:=</span>&nbsp;<span class="builtinfunc" id="7024133">new</span><span class="op" id="7024136">(</span><span class="ident" id="7024137"><a href="/gostd/compress/gzip/gzip_test.go.html#7019388">bytes</a></span><span class="op" id="7024142">.</span><span class="ident" id="7024143"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7024149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024152">z</span>&nbsp;<span class="op" id="7024154">:=</span>&nbsp;<span class="ident" id="7024157"><a href="/gostd/compress/gzip/gzip.go.html#4786016">NewWriter</a></span><span class="op" id="7024166">(</span><span class="ident" id="7024167"><a href="/gostd/compress/gzip/gzip_test.go.html#7024099">buf</a></span><span class="op" id="7024170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024173">msg</span>&nbsp;<span class="op" id="7024177">:=</span>&nbsp;<span class="op" id="7024180">[</span><span class="op" id="7024181">]</span><span class="builtintype" id="7024182">byte</span><span class="op" id="7024186">(</span><span class="string" id="7024187">&#34;hello&nbsp;world&#34;</span><span class="op" id="7024200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024203"><a href="/gostd/compress/gzip/gzip_test.go.html#7024152">z</a></span><span class="op" id="7024204">.</span><span class="ident" id="7024205"><a href="/gostd/compress/gzip/gzip.go.html#4788853">Write</a></span><span class="op" id="7024210">(</span><span class="ident" id="7024211"><a href="/gostd/compress/gzip/gzip_test.go.html#7024173">msg</a></span><span class="op" id="7024214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024217"><a href="/gostd/compress/gzip/gzip_test.go.html#7024152">z</a></span><span class="op" id="7024218">.</span><span class="ident" id="7024219"><a href="/gostd/compress/gzip/gzip.go.html#4790802">Close</a></span><span class="op" id="7024224">(</span><span class="op" id="7024225">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024228"><a href="/gostd/compress/gzip/gzip_test.go.html#7024152">z</a></span><span class="op" id="7024229">.</span><span class="ident" id="7024230"><a href="/gostd/compress/gzip/gzip.go.html#4787298">Reset</a></span><span class="op" id="7024235">(</span><span class="ident" id="7024236"><a href="/gostd/compress/gzip/gzip_test.go.html#7024125">buf2</a></span><span class="op" id="7024240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024243"><a href="/gostd/compress/gzip/gzip_test.go.html#7024152">z</a></span><span class="op" id="7024244">.</span><span class="ident" id="7024245"><a href="/gostd/compress/gzip/gzip.go.html#4788853">Write</a></span><span class="op" id="7024250">(</span><span class="ident" id="7024251"><a href="/gostd/compress/gzip/gzip_test.go.html#7024173">msg</a></span><span class="op" id="7024254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024257"><a href="/gostd/compress/gzip/gzip_test.go.html#7024152">z</a></span><span class="op" id="7024258">.</span><span class="ident" id="7024259"><a href="/gostd/compress/gzip/gzip.go.html#4790802">Close</a></span><span class="op" id="7024264">(</span><span class="op" id="7024265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7024268">if</span>&nbsp;<span class="ident" id="7024271"><a href="/gostd/compress/gzip/gzip_test.go.html#7024099">buf</a></span><span class="op" id="7024274">.</span><span class="ident" id="7024275"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7024281">(</span><span class="op" id="7024282">)</span>&nbsp;<span class="op" id="7024284">!=</span>&nbsp;<span class="ident" id="7024287"><a href="/gostd/compress/gzip/gzip_test.go.html#7024125">buf2</a></span><span class="op" id="7024291">.</span><span class="ident" id="7024292"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7024298">(</span><span class="op" id="7024299">)</span>&nbsp;<span class="op" id="7024301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7024305"><a href="/gostd/compress/gzip/gzip_test.go.html#7024082">t</a></span><span class="op" id="7024306">.</span><span class="ident" id="7024307"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7024313">(</span><span class="string" id="7024314">&#34;buf2&nbsp;%q&nbsp;!=&nbsp;original&nbsp;buf&nbsp;of&nbsp;%q&#34;</span><span class="op" id="7024345">,</span>&nbsp;<span class="ident" id="7024347"><a href="/gostd/compress/gzip/gzip_test.go.html#7024125">buf2</a></span><span class="op" id="7024351">.</span><span class="ident" id="7024352"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7024358">(</span><span class="op" id="7024359">)</span><span class="op" id="7024360">,</span>&nbsp;<span class="ident" id="7024362"><a href="/gostd/compress/gzip/gzip_test.go.html#7024099">buf</a></span><span class="op" id="7024365">.</span><span class="ident" id="7024366"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7024372">(</span><span class="op" id="7024373">)</span><span class="op" id="7024374">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7024377">}</span><br>
<span class="lineno"></span><span class="op" id="7024379">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
