<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5291935">package</span>&nbsp;<span class="ident" id="5291943">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5291950">//&nbsp;InstBr&nbsp;exectues&nbsp;branch&nbsp;instruction</span><br>
<span class="lineno"></span><span class="keyword" id="5291988">type</span>&nbsp;<span class="ident" id="5291993">instBr</span>&nbsp;<span class="keyword" id="5292000">struct</span><span class="op" id="5292006">{</span><span class="op" id="5292007">}</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="5292010">//&nbsp;I&nbsp;executes&nbsp;the&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="5292041">//&nbsp;Might&nbsp;return&nbsp;invalid&nbsp;instruction&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="5292088">func</span>&nbsp;<span class="op" id="5292093">(</span><span class="ident" id="5292094">i</span>&nbsp;<span class="op" id="5292096">*</span><span class="ident" id="5292097"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5291993">instBr</a></span><span class="op" id="5292103">)</span>&nbsp;<span class="ident" id="5292105">I</span><span class="op" id="5292106">(</span><span class="ident" id="5292107">cpu</span>&nbsp;<span class="op" id="5292111">*</span><span class="ident" id="5292112"><a href="/lonnie.io/e8vm/arch8/cpu.go.html#5285853">cpu</a></span><span class="op" id="5292115">,</span>&nbsp;<span class="ident" id="5292117">in</span>&nbsp;<span class="builtintype" id="5292120">uint32</span><span class="op" id="5292126">)</span>&nbsp;<span class="op" id="5292128">*</span><span class="ident" id="5292129"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span>&nbsp;<span class="op" id="5292135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292138">op</span>&nbsp;<span class="op" id="5292141">:=</span>&nbsp;<span class="op" id="5292144">(</span><span class="ident" id="5292145"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292117">in</a></span>&nbsp;<span class="op" id="5292148">&gt;&gt;</span>&nbsp;<span class="num" id="5292151">24</span><span class="op" id="5292153">)</span>&nbsp;<span class="op" id="5292155">&amp;</span>&nbsp;<span class="num" id="5292157">0xff</span>&nbsp;&nbsp;<span class="comment" id="5292163">//&nbsp;(32:24]</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292175">src1</span>&nbsp;<span class="op" id="5292180">:=</span>&nbsp;<span class="op" id="5292183">(</span><span class="ident" id="5292184"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292117">in</a></span>&nbsp;<span class="op" id="5292187">&gt;&gt;</span>&nbsp;<span class="num" id="5292190">21</span><span class="op" id="5292192">)</span>&nbsp;<span class="op" id="5292194">&amp;</span>&nbsp;<span class="num" id="5292196">0x7</span>&nbsp;<span class="comment" id="5292200">//&nbsp;(24:21]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292212">src2</span>&nbsp;<span class="op" id="5292217">:=</span>&nbsp;<span class="op" id="5292220">(</span><span class="ident" id="5292221"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292117">in</a></span>&nbsp;<span class="op" id="5292224">&gt;&gt;</span>&nbsp;<span class="num" id="5292227">18</span><span class="op" id="5292229">)</span>&nbsp;<span class="op" id="5292231">&amp;</span>&nbsp;<span class="num" id="5292233">0x7</span>&nbsp;<span class="comment" id="5292237">//&nbsp;(21:18]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292249">im</span>&nbsp;<span class="op" id="5292252">:=</span>&nbsp;<span class="ident" id="5292255"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292117">in</a></span>&nbsp;<span class="op" id="5292258">&amp;</span>&nbsp;<span class="num" id="5292260">0x3ffff</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5292274">//&nbsp;(18:0]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292286">s1</span>&nbsp;<span class="op" id="5292289">:=</span>&nbsp;<span class="ident" id="5292292"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292107">cpu</a></span><span class="op" id="5292295">.</span><span class="ident" id="5292296">regs</span><span class="op" id="5292300">[</span><span class="ident" id="5292301"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292175">src1</a></span><span class="op" id="5292305">]</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292308">s2</span>&nbsp;<span class="op" id="5292311">:=</span>&nbsp;<span class="ident" id="5292314"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292107">cpu</a></span><span class="op" id="5292317">.</span><span class="ident" id="5292318">regs</span><span class="op" id="5292322">[</span><span class="ident" id="5292323"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292212">src2</a></span><span class="op" id="5292327">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292330">pc</span>&nbsp;<span class="op" id="5292333">:=</span>&nbsp;<span class="ident" id="5292336"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292107">cpu</a></span><span class="op" id="5292339">.</span><span class="ident" id="5292340">regs</span><span class="op" id="5292344">[</span><span class="ident" id="5292345"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5311636">PC</a></span><span class="op" id="5292347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292350">br</span>&nbsp;<span class="op" id="5292353">:=</span>&nbsp;<span class="ident" id="5292356"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292330">pc</a></span>&nbsp;<span class="op" id="5292359">+</span>&nbsp;<span class="builtintype" id="5292361">uint32</span><span class="op" id="5292367">(</span><span class="builtintype" id="5292368">int32</span><span class="op" id="5292373">(</span><span class="ident" id="5292374"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292249">im</a></span><span class="op" id="5292376">&lt;&lt;</span><span class="num" id="5292378">14</span><span class="op" id="5292380">)</span><span class="op" id="5292381">&gt;&gt;</span><span class="num" id="5292383">12</span><span class="op" id="5292385">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292389">switch</span>&nbsp;<span class="ident" id="5292396"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292138">op</a></span>&nbsp;<span class="op" id="5292399">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292402">case</span>&nbsp;<span class="num" id="5292407">32</span><span class="op" id="5292409">:</span>&nbsp;<span class="comment" id="5292411">//&nbsp;bne</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292420">if</span>&nbsp;<span class="ident" id="5292423"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292286">s1</a></span>&nbsp;<span class="op" id="5292426">!=</span>&nbsp;<span class="ident" id="5292429"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292308">s2</a></span>&nbsp;<span class="op" id="5292432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292437"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292330">pc</a></span>&nbsp;<span class="op" id="5292440">=</span>&nbsp;<span class="ident" id="5292442"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292350">br</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292450">case</span>&nbsp;<span class="num" id="5292455">33</span><span class="op" id="5292457">:</span>&nbsp;<span class="comment" id="5292459">//&nbsp;beq</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292468">if</span>&nbsp;<span class="ident" id="5292471"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292286">s1</a></span>&nbsp;<span class="op" id="5292474">==</span>&nbsp;<span class="ident" id="5292477"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292308">s2</a></span>&nbsp;<span class="op" id="5292480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292485"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292330">pc</a></span>&nbsp;<span class="op" id="5292488">=</span>&nbsp;<span class="ident" id="5292490"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292350">br</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292498">default</span><span class="op" id="5292505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292509">return</span>&nbsp;<span class="ident" id="5292516"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290905">errInvalidInst</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292536"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292107">cpu</a></span><span class="op" id="5292539">.</span><span class="ident" id="5292540">regs</span><span class="op" id="5292544">[</span><span class="ident" id="5292545"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5311636">PC</a></span><span class="op" id="5292547">]</span>&nbsp;<span class="op" id="5292549">=</span>&nbsp;<span class="ident" id="5292551"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5292330">pc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292555">return</span>&nbsp;<span class="ident" id="5292562">nil</span><br>
<span class="lineno"></span><span class="op" id="5292566">}</span>
</div>
</body>
</html>
