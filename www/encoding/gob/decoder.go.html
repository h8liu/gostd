<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5862902">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5862957">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5863011">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5863062">package</span>&nbsp;<span class="ident" id="5863070">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5863075">import</span>&nbsp;<span class="op" id="5863082">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5863085">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5863094">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5863104">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5863110">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5863121">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5863128">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5863131">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="5863200">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="5863272">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="5863303">const</span>&nbsp;<span class="ident" id="5863309">tooBig</span>&nbsp;<span class="op" id="5863316">=</span>&nbsp;<span class="num" id="5863318">1</span>&nbsp;<span class="op" id="5863320">&lt;&lt;</span>&nbsp;<span class="num" id="5863323">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5863327">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5863403">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="5863435">type</span>&nbsp;<span class="ident" id="5863440">Decoder</span>&nbsp;<span class="keyword" id="5863448">struct</span>&nbsp;<span class="op" id="5863455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5863458">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863471"><a href="/encoding/gob/decoder.go.html#5863121">sync</a></span><span class="op" id="5863475">.</span><span class="ident" id="5863476">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863511">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5863553">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863566"><a href="/encoding/gob/decoder.go.html#5863104">io</a></span><span class="op" id="5863568">.</span><span class="ident" id="5863569">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863606">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5863629">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863642"><a href="/encoding/gob/decode.go.html#5825500">decBuffer</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863682">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5863723">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863736">map</span><span class="op" id="5863739">[</span><span class="ident" id="5863740"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><span class="op" id="5863746">]</span><span class="op" id="5863747">*</span><span class="ident" id="5863748"><a href="/encoding/gob/type.go.html#5943888">wireType</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863776">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5863820">decoderCache</span>&nbsp;<span class="keyword" id="5863833">map</span><span class="op" id="5863836">[</span><span class="ident" id="5863837"><a href="/encoding/gob/decoder.go.html#5863110">reflect</a></span><span class="op" id="5863844">.</span><span class="ident" id="5863845">Type</span><span class="op" id="5863849">]</span><span class="keyword" id="5863850">map</span><span class="op" id="5863853">[</span><span class="ident" id="5863854"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><span class="op" id="5863860">]</span><span class="op" id="5863861">*</span><span class="op" id="5863862">*</span><span class="ident" id="5863863"><a href="/encoding/gob/decode.go.html#5836227">decEngine</a></span>&nbsp;<span class="comment" id="5863873">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5863903">ignorerCache</span>&nbsp;<span class="keyword" id="5863916">map</span><span class="op" id="5863919">[</span><span class="ident" id="5863920"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><span class="op" id="5863926">]</span><span class="op" id="5863927">*</span><span class="op" id="5863928">*</span><span class="ident" id="5863929"><a href="/encoding/gob/decode.go.html#5836227">decEngine</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863956">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5863986">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5863999">*</span><span class="ident" id="5864000"><a href="/encoding/gob/decode.go.html#5824999">decoderState</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5864039">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864091">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5864104">[</span><span class="op" id="5864105">]</span><span class="builtintype" id="5864106">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5864144">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864198">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5864211">error</span><br>
<span class="lineno"></span><span class="op" id="5864217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5864220">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="5864287">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5864358">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5864375">func</span>&nbsp;<span class="ident" id="5864380">NewDecoder</span><span class="op" id="5864390">(</span><span class="ident" id="5864391">r</span>&nbsp;<span class="ident" id="5864393"><a href="/encoding/gob/decoder.go.html#5863104">io</a></span><span class="op" id="5864395">.</span><span class="ident" id="5864396">Reader</span><span class="op" id="5864402">)</span>&nbsp;<span class="op" id="5864404">*</span><span class="ident" id="5864405"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span>&nbsp;<span class="op" id="5864413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864416">dec</span>&nbsp;<span class="op" id="5864420">:=</span>&nbsp;<span class="builtinfunc" id="5864423">new</span><span class="op" id="5864426">(</span><span class="ident" id="5864427"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5864434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5864437">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5864514">if</span>&nbsp;<span class="ident" id="5864517">_</span><span class="op" id="5864518">,</span>&nbsp;<span class="ident" id="5864520">ok</span>&nbsp;<span class="op" id="5864523">:=</span>&nbsp;<span class="ident" id="5864526"><a href="/encoding/gob/decoder.go.html#5864391">r</a></span><span class="op" id="5864527">.</span><span class="op" id="5864528">(</span><span class="ident" id="5864529"><a href="/encoding/gob/decoder.go.html#5863104">io</a></span><span class="op" id="5864531">.</span><span class="ident" id="5864532">ByteReader</span><span class="op" id="5864542">)</span><span class="op" id="5864543">;</span>&nbsp;<span class="op" id="5864545">!</span><span class="ident" id="5864546"><a href="/encoding/gob/decoder.go.html#5864520">ok</a></span>&nbsp;<span class="op" id="5864549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864553"><a href="/encoding/gob/decoder.go.html#5864391">r</a></span>&nbsp;<span class="op" id="5864555">=</span>&nbsp;<span class="ident" id="5864557"><a href="/encoding/gob/decoder.go.html#5863085">bufio</a></span><span class="op" id="5864562">.</span><span class="ident" id="5864563">NewReader</span><span class="op" id="5864572">(</span><span class="ident" id="5864573"><a href="/encoding/gob/decoder.go.html#5864391">r</a></span><span class="op" id="5864574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5864577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864580"><a href="/encoding/gob/decoder.go.html#5864416">dec</a></span><span class="op" id="5864583">.</span><span class="ident" id="5864584">r</span>&nbsp;<span class="op" id="5864586">=</span>&nbsp;<span class="ident" id="5864588"><a href="/encoding/gob/decoder.go.html#5864391">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864591"><a href="/encoding/gob/decoder.go.html#5864416">dec</a></span><span class="op" id="5864594">.</span><span class="ident" id="5864595">wireType</span>&nbsp;<span class="op" id="5864604">=</span>&nbsp;<span class="builtinfunc" id="5864606">make</span><span class="op" id="5864610">(</span><span class="keyword" id="5864611">map</span><span class="op" id="5864614">[</span><span class="ident" id="5864615"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><span class="op" id="5864621">]</span><span class="op" id="5864622">*</span><span class="ident" id="5864623"><a href="/encoding/gob/type.go.html#5943888">wireType</a></span><span class="op" id="5864631">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864634"><a href="/encoding/gob/decoder.go.html#5864416">dec</a></span><span class="op" id="5864637">.</span><span class="ident" id="5864638">decoderCache</span>&nbsp;<span class="op" id="5864651">=</span>&nbsp;<span class="builtinfunc" id="5864653">make</span><span class="op" id="5864657">(</span><span class="keyword" id="5864658">map</span><span class="op" id="5864661">[</span><span class="ident" id="5864662"><a href="/encoding/gob/decoder.go.html#5863110">reflect</a></span><span class="op" id="5864669">.</span><span class="ident" id="5864670">Type</span><span class="op" id="5864674">]</span><span class="keyword" id="5864675">map</span><span class="op" id="5864678">[</span><span class="ident" id="5864679"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><span class="op" id="5864685">]</span><span class="op" id="5864686">*</span><span class="op" id="5864687">*</span><span class="ident" id="5864688"><a href="/encoding/gob/decode.go.html#5836227">decEngine</a></span><span class="op" id="5864697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864700"><a href="/encoding/gob/decoder.go.html#5864416">dec</a></span><span class="op" id="5864703">.</span><span class="ident" id="5864704">ignorerCache</span>&nbsp;<span class="op" id="5864717">=</span>&nbsp;<span class="builtinfunc" id="5864719">make</span><span class="op" id="5864723">(</span><span class="keyword" id="5864724">map</span><span class="op" id="5864727">[</span><span class="ident" id="5864728"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><span class="op" id="5864734">]</span><span class="op" id="5864735">*</span><span class="op" id="5864736">*</span><span class="ident" id="5864737"><a href="/encoding/gob/decode.go.html#5836227">decEngine</a></span><span class="op" id="5864746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5864749"><a href="/encoding/gob/decoder.go.html#5864416">dec</a></span><span class="op" id="5864752">.</span><span class="ident" id="5864753">countBuf</span>&nbsp;<span class="op" id="5864762">=</span>&nbsp;<span class="builtinfunc" id="5864764">make</span><span class="op" id="5864768">(</span><span class="op" id="5864769">[</span><span class="op" id="5864770">]</span><span class="builtintype" id="5864771">byte</span><span class="op" id="5864775">,</span>&nbsp;<span class="num" id="5864777">9</span><span class="op" id="5864778">)</span>&nbsp;<span class="comment" id="5864780">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5864836">return</span>&nbsp;<span class="ident" id="5864843"><a href="/encoding/gob/decoder.go.html#5864416">dec</a></span><br>
<span class="lineno">50</span><span class="op" id="5864847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5864850">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5864894">func</span>&nbsp;<span class="op" id="5864899">(</span><span class="ident" id="5864900">dec</span>&nbsp;<span class="op" id="5864904">*</span><span class="ident" id="5864905"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5864912">)</span>&nbsp;<span class="ident" id="5864914">recvType</span><span class="op" id="5864922">(</span><span class="ident" id="5864923">id</span>&nbsp;<span class="ident" id="5864926"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><span class="op" id="5864932">)</span>&nbsp;<span class="op" id="5864934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5864937">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5864990">if</span>&nbsp;<span class="ident" id="5864993"><a href="/encoding/gob/decoder.go.html#5864923">id</a></span>&nbsp;<span class="op" id="5864996">&lt;</span>&nbsp;<span class="ident" id="5864998"><a href="/encoding/gob/type.go.html#5930373">firstUserId</a></span>&nbsp;<span class="op" id="5865010">||</span>&nbsp;<span class="ident" id="5865013"><a href="/encoding/gob/decoder.go.html#5864900">dec</a></span><span class="op" id="5865016">.</span><span class="ident" id="5865017">wireType</span><span class="op" id="5865025">[</span><span class="ident" id="5865026"><a href="/encoding/gob/decoder.go.html#5864923">id</a></span><span class="op" id="5865028">]</span>&nbsp;<span class="op" id="5865030">!=</span>&nbsp;<span class="ident" id="5865033">nil</span>&nbsp;<span class="op" id="5865037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5865041"><a href="/encoding/gob/decoder.go.html#5864900">dec</a></span><span class="op" id="5865044">.</span><span class="ident" id="5865045">err</span>&nbsp;<span class="op" id="5865049">=</span>&nbsp;<span class="ident" id="5865051"><a href="/encoding/gob/decoder.go.html#5863094">errors</a></span><span class="op" id="5865057">.</span><span class="ident" id="5865058">New</span><span class="op" id="5865061">(</span><span class="string" id="5865062">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="5865092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865096">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5865104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5865108">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5865118">wire</span>&nbsp;<span class="op" id="5865123">:=</span>&nbsp;<span class="builtinfunc" id="5865126">new</span><span class="op" id="5865129">(</span><span class="ident" id="5865130"><a href="/encoding/gob/type.go.html#5943888">wireType</a></span><span class="op" id="5865138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5865141"><a href="/encoding/gob/decoder.go.html#5864900">dec</a></span><span class="op" id="5865144">.</span><span class="ident" id="5865145">decodeValue</span><span class="op" id="5865156">(</span><span class="ident" id="5865157"><a href="/encoding/gob/type.go.html#5933329">tWireType</a></span><span class="op" id="5865166">,</span>&nbsp;<span class="ident" id="5865168"><a href="/encoding/gob/decoder.go.html#5863110">reflect</a></span><span class="op" id="5865175">.</span><span class="ident" id="5865176">ValueOf</span><span class="op" id="5865183">(</span><span class="ident" id="5865184"><a href="/encoding/gob/decoder.go.html#5865118">wire</a></span><span class="op" id="5865188">)</span><span class="op" id="5865189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865192">if</span>&nbsp;<span class="ident" id="5865195"><a href="/encoding/gob/decoder.go.html#5864900">dec</a></span><span class="op" id="5865198">.</span><span class="ident" id="5865199">err</span>&nbsp;<span class="op" id="5865203">!=</span>&nbsp;<span class="ident" id="5865206">nil</span>&nbsp;<span class="op" id="5865210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865214">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5865222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5865225">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5865260"><a href="/encoding/gob/decoder.go.html#5864900">dec</a></span><span class="op" id="5865263">.</span><span class="ident" id="5865264">wireType</span><span class="op" id="5865272">[</span><span class="ident" id="5865273"><a href="/encoding/gob/decoder.go.html#5864923">id</a></span><span class="op" id="5865275">]</span>&nbsp;<span class="op" id="5865277">=</span>&nbsp;<span class="ident" id="5865279"><a href="/encoding/gob/decoder.go.html#5865118">wire</a></span><br>
<span class="lineno"></span><span class="op" id="5865284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="5865287">var</span>&nbsp;<span class="ident" id="5865291">errBadCount</span>&nbsp;<span class="op" id="5865303">=</span>&nbsp;<span class="ident" id="5865305"><a href="/encoding/gob/decoder.go.html#5863094">errors</a></span><span class="op" id="5865311">.</span><span class="ident" id="5865312">New</span><span class="op" id="5865315">(</span><span class="string" id="5865316">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="5865340">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5865343">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="5865429">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="5865517">func</span>&nbsp;<span class="op" id="5865522">(</span><span class="ident" id="5865523">dec</span>&nbsp;<span class="op" id="5865527">*</span><span class="ident" id="5865528"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5865535">)</span>&nbsp;<span class="ident" id="5865537">recvMessage</span><span class="op" id="5865548">(</span><span class="op" id="5865549">)</span>&nbsp;<span class="builtintype" id="5865551">bool</span>&nbsp;<span class="op" id="5865556">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5865559">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5865577">nbytes</span><span class="op" id="5865583">,</span>&nbsp;<span class="ident" id="5865585">_</span><span class="op" id="5865586">,</span>&nbsp;<span class="ident" id="5865588">err</span>&nbsp;<span class="op" id="5865592">:=</span>&nbsp;<span class="ident" id="5865595"><a href="/encoding/gob/decode.go.html#5827119">decodeUintReader</a></span><span class="op" id="5865611">(</span><span class="ident" id="5865612"><a href="/encoding/gob/decoder.go.html#5865523">dec</a></span><span class="op" id="5865615">.</span><span class="ident" id="5865616">r</span><span class="op" id="5865617">,</span>&nbsp;<span class="ident" id="5865619"><a href="/encoding/gob/decoder.go.html#5865523">dec</a></span><span class="op" id="5865622">.</span><span class="ident" id="5865623">countBuf</span><span class="op" id="5865631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865634">if</span>&nbsp;<span class="ident" id="5865637"><a href="/encoding/gob/decoder.go.html#5865588">err</a></span>&nbsp;<span class="op" id="5865641">!=</span>&nbsp;<span class="ident" id="5865644">nil</span>&nbsp;<span class="op" id="5865648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5865652"><a href="/encoding/gob/decoder.go.html#5865523">dec</a></span><span class="op" id="5865655">.</span><span class="ident" id="5865656">err</span>&nbsp;<span class="op" id="5865660">=</span>&nbsp;<span class="ident" id="5865662"><a href="/encoding/gob/decoder.go.html#5865588">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865668">return</span>&nbsp;<span class="builtintype" id="5865675">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5865682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865685">if</span>&nbsp;<span class="ident" id="5865688"><a href="/encoding/gob/decoder.go.html#5865577">nbytes</a></span>&nbsp;<span class="op" id="5865695">&gt;=</span>&nbsp;<span class="ident" id="5865698"><a href="/encoding/gob/decoder.go.html#5863309">tooBig</a></span>&nbsp;<span class="op" id="5865705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5865709"><a href="/encoding/gob/decoder.go.html#5865523">dec</a></span><span class="op" id="5865712">.</span><span class="ident" id="5865713">err</span>&nbsp;<span class="op" id="5865717">=</span>&nbsp;<span class="ident" id="5865719"><a href="/encoding/gob/decoder.go.html#5865291">errBadCount</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865733">return</span>&nbsp;<span class="builtintype" id="5865740">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5865747">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5865750"><a href="/encoding/gob/decoder.go.html#5865523">dec</a></span><span class="op" id="5865753">.</span><span class="ident" id="5865754">readMessage</span><span class="op" id="5865765">(</span><span class="builtintype" id="5865766">int</span><span class="op" id="5865769">(</span><span class="ident" id="5865770"><a href="/encoding/gob/decoder.go.html#5865577">nbytes</a></span><span class="op" id="5865776">)</span><span class="op" id="5865777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865780">return</span>&nbsp;<span class="ident" id="5865787"><a href="/encoding/gob/decoder.go.html#5865523">dec</a></span><span class="op" id="5865790">.</span><span class="ident" id="5865791">err</span>&nbsp;<span class="op" id="5865795">==</span>&nbsp;<span class="ident" id="5865798">nil</span><br>
<span class="lineno"></span><span class="op" id="5865802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5865805">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="5865864">func</span>&nbsp;<span class="op" id="5865869">(</span><span class="ident" id="5865870">dec</span>&nbsp;<span class="op" id="5865874">*</span><span class="ident" id="5865875"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5865882">)</span>&nbsp;<span class="ident" id="5865884">readMessage</span><span class="op" id="5865895">(</span><span class="ident" id="5865896">nbytes</span>&nbsp;<span class="builtintype" id="5865903">int</span><span class="op" id="5865906">)</span>&nbsp;<span class="op" id="5865908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5865911">if</span>&nbsp;<span class="ident" id="5865914"><a href="/encoding/gob/decoder.go.html#5865870">dec</a></span><span class="op" id="5865917">.</span><span class="ident" id="5865918">buf</span><span class="op" id="5865921">.</span><span class="ident" id="5865922">Len</span><span class="op" id="5865925">(</span><span class="op" id="5865926">)</span>&nbsp;<span class="op" id="5865928">!=</span>&nbsp;<span class="num" id="5865931">0</span>&nbsp;<span class="op" id="5865933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5865937">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5865981">panic</span><span class="op" id="5865986">(</span><span class="string" id="5865987">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="5866013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5866016">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5866019">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866037"><a href="/encoding/gob/decoder.go.html#5865870">dec</a></span><span class="op" id="5866040">.</span><span class="ident" id="5866041">buf</span><span class="op" id="5866044">.</span><span class="ident" id="5866045">Size</span><span class="op" id="5866049">(</span><span class="ident" id="5866050"><a href="/encoding/gob/decoder.go.html#5865896">nbytes</a></span><span class="op" id="5866056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866059">_</span><span class="op" id="5866060">,</span>&nbsp;<span class="ident" id="5866062"><a href="/encoding/gob/decoder.go.html#5865870">dec</a></span><span class="op" id="5866065">.</span><span class="ident" id="5866066">err</span>&nbsp;<span class="op" id="5866070">=</span>&nbsp;<span class="ident" id="5866072"><a href="/encoding/gob/decoder.go.html#5863104">io</a></span><span class="op" id="5866074">.</span><span class="ident" id="5866075">ReadFull</span><span class="op" id="5866083">(</span><span class="ident" id="5866084"><a href="/encoding/gob/decoder.go.html#5865870">dec</a></span><span class="op" id="5866087">.</span><span class="ident" id="5866088">r</span><span class="op" id="5866089">,</span>&nbsp;<span class="ident" id="5866091"><a href="/encoding/gob/decoder.go.html#5865870">dec</a></span><span class="op" id="5866094">.</span><span class="ident" id="5866095">buf</span><span class="op" id="5866098">.</span><span class="ident" id="5866099">Bytes</span><span class="op" id="5866104">(</span><span class="op" id="5866105">)</span><span class="op" id="5866106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5866109">if</span>&nbsp;<span class="ident" id="5866112"><a href="/encoding/gob/decoder.go.html#5865870">dec</a></span><span class="op" id="5866115">.</span><span class="ident" id="5866116">err</span>&nbsp;<span class="op" id="5866120">!=</span>&nbsp;<span class="ident" id="5866123">nil</span>&nbsp;<span class="op" id="5866127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5866131">if</span>&nbsp;<span class="ident" id="5866134"><a href="/encoding/gob/decoder.go.html#5865870">dec</a></span><span class="op" id="5866137">.</span><span class="ident" id="5866138">err</span>&nbsp;<span class="op" id="5866142">==</span>&nbsp;<span class="ident" id="5866145"><a href="/encoding/gob/decoder.go.html#5863104">io</a></span><span class="op" id="5866147">.</span><span class="ident" id="5866148">EOF</span>&nbsp;<span class="op" id="5866152">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866157"><a href="/encoding/gob/decoder.go.html#5865870">dec</a></span><span class="op" id="5866160">.</span><span class="ident" id="5866161">err</span>&nbsp;<span class="op" id="5866165">=</span>&nbsp;<span class="ident" id="5866167"><a href="/encoding/gob/decoder.go.html#5863104">io</a></span><span class="op" id="5866169">.</span><span class="ident" id="5866170">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5866189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5866192">}</span><br>
<span class="lineno"></span><span class="op" id="5866194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5866197">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="5866278">func</span>&nbsp;<span class="ident" id="5866283">toInt</span><span class="op" id="5866288">(</span><span class="ident" id="5866289">x</span>&nbsp;<span class="ident" id="5866291">uint64</span><span class="op" id="5866297">)</span>&nbsp;<span class="ident" id="5866299">int64</span>&nbsp;<span class="op" id="5866305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866308">i</span>&nbsp;<span class="op" id="5866310">:=</span>&nbsp;<span class="ident" id="5866313">int64</span><span class="op" id="5866318">(</span><span class="ident" id="5866319"><a href="/encoding/gob/decoder.go.html#5866289">x</a></span>&nbsp;<span class="op" id="5866321">&gt;&gt;</span>&nbsp;<span class="num" id="5866324">1</span><span class="op" id="5866325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5866328">if</span>&nbsp;<span class="ident" id="5866331"><a href="/encoding/gob/decoder.go.html#5866289">x</a></span><span class="op" id="5866332">&amp;</span><span class="num" id="5866333">1</span>&nbsp;<span class="op" id="5866335">!=</span>&nbsp;<span class="num" id="5866338">0</span>&nbsp;<span class="op" id="5866340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866344"><a href="/encoding/gob/decoder.go.html#5866308">i</a></span>&nbsp;<span class="op" id="5866346">=</span>&nbsp;<span class="op" id="5866348">^</span><span class="ident" id="5866349"><a href="/encoding/gob/decoder.go.html#5866308">i</a></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5866352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5866355">return</span>&nbsp;<span class="ident" id="5866362"><a href="/encoding/gob/decoder.go.html#5866308">i</a></span><br>
<span class="lineno"></span><span class="op" id="5866364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5866367">func</span>&nbsp;<span class="op" id="5866372">(</span><span class="ident" id="5866373">dec</span>&nbsp;<span class="op" id="5866377">*</span><span class="ident" id="5866378"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5866385">)</span>&nbsp;<span class="ident" id="5866387">nextInt</span><span class="op" id="5866394">(</span><span class="op" id="5866395">)</span>&nbsp;<span class="ident" id="5866397">int64</span>&nbsp;<span class="op" id="5866403">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866406">n</span><span class="op" id="5866407">,</span>&nbsp;<span class="ident" id="5866409">_</span><span class="op" id="5866410">,</span>&nbsp;<span class="ident" id="5866412">err</span>&nbsp;<span class="op" id="5866416">:=</span>&nbsp;<span class="ident" id="5866419"><a href="/encoding/gob/decode.go.html#5827119">decodeUintReader</a></span><span class="op" id="5866435">(</span><span class="op" id="5866436">&amp;</span><span class="ident" id="5866437"><a href="/encoding/gob/decoder.go.html#5866373">dec</a></span><span class="op" id="5866440">.</span><span class="ident" id="5866441">buf</span><span class="op" id="5866444">,</span>&nbsp;<span class="ident" id="5866446"><a href="/encoding/gob/decoder.go.html#5866373">dec</a></span><span class="op" id="5866449">.</span><span class="ident" id="5866450">countBuf</span><span class="op" id="5866458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5866461">if</span>&nbsp;<span class="ident" id="5866464"><a href="/encoding/gob/decoder.go.html#5866412">err</a></span>&nbsp;<span class="op" id="5866468">!=</span>&nbsp;<span class="ident" id="5866471">nil</span>&nbsp;<span class="op" id="5866475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866479"><a href="/encoding/gob/decoder.go.html#5866373">dec</a></span><span class="op" id="5866482">.</span><span class="ident" id="5866483">err</span>&nbsp;<span class="op" id="5866487">=</span>&nbsp;<span class="ident" id="5866489"><a href="/encoding/gob/decoder.go.html#5866412">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5866494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5866497">return</span>&nbsp;<span class="ident" id="5866504"><a href="/encoding/gob/decoder.go.html#5866283">toInt</a></span><span class="op" id="5866509">(</span><span class="ident" id="5866510"><a href="/encoding/gob/decoder.go.html#5866406">n</a></span><span class="op" id="5866511">)</span><br>
<span class="lineno">120</span><span class="op" id="5866513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5866516">func</span>&nbsp;<span class="op" id="5866521">(</span><span class="ident" id="5866522">dec</span>&nbsp;<span class="op" id="5866526">*</span><span class="ident" id="5866527"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5866534">)</span>&nbsp;<span class="ident" id="5866536">nextUint</span><span class="op" id="5866544">(</span><span class="op" id="5866545">)</span>&nbsp;<span class="ident" id="5866547">uint64</span>&nbsp;<span class="op" id="5866554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866557">n</span><span class="op" id="5866558">,</span>&nbsp;<span class="ident" id="5866560">_</span><span class="op" id="5866561">,</span>&nbsp;<span class="ident" id="5866563">err</span>&nbsp;<span class="op" id="5866567">:=</span>&nbsp;<span class="ident" id="5866570"><a href="/encoding/gob/decode.go.html#5827119">decodeUintReader</a></span><span class="op" id="5866586">(</span><span class="op" id="5866587">&amp;</span><span class="ident" id="5866588"><a href="/encoding/gob/decoder.go.html#5866522">dec</a></span><span class="op" id="5866591">.</span><span class="ident" id="5866592">buf</span><span class="op" id="5866595">,</span>&nbsp;<span class="ident" id="5866597"><a href="/encoding/gob/decoder.go.html#5866522">dec</a></span><span class="op" id="5866600">.</span><span class="ident" id="5866601">countBuf</span><span class="op" id="5866609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5866612">if</span>&nbsp;<span class="ident" id="5866615"><a href="/encoding/gob/decoder.go.html#5866563">err</a></span>&nbsp;<span class="op" id="5866619">!=</span>&nbsp;<span class="ident" id="5866622">nil</span>&nbsp;<span class="op" id="5866626">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5866630"><a href="/encoding/gob/decoder.go.html#5866522">dec</a></span><span class="op" id="5866633">.</span><span class="ident" id="5866634">err</span>&nbsp;<span class="op" id="5866638">=</span>&nbsp;<span class="ident" id="5866640"><a href="/encoding/gob/decoder.go.html#5866563">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5866645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5866648">return</span>&nbsp;<span class="ident" id="5866655"><a href="/encoding/gob/decoder.go.html#5866557">n</a></span><br>
<span class="lineno"></span><span class="op" id="5866657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5866660">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="5866690">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="5866706">//&nbsp;&nbsp;&nbsp;&nbsp(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="5866752">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="5866816">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="5866882">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5866947">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="5866973">func</span>&nbsp;<span class="op" id="5866978">(</span><span class="ident" id="5866979">dec</span>&nbsp;<span class="op" id="5866983">*</span><span class="ident" id="5866984"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5866991">)</span>&nbsp;<span class="ident" id="5866993">decodeTypeSequence</span><span class="op" id="5867011">(</span><span class="ident" id="5867012">isInterface</span>&nbsp;<span class="builtintype" id="5867024">bool</span><span class="op" id="5867028">)</span>&nbsp;<span class="ident" id="5867030"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span>&nbsp;<span class="op" id="5867037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867040">for</span>&nbsp;<span class="ident" id="5867044"><a href="/encoding/gob/decoder.go.html#5866979">dec</a></span><span class="op" id="5867047">.</span><span class="ident" id="5867048">err</span>&nbsp;<span class="op" id="5867052">==</span>&nbsp;<span class="ident" id="5867055">nil</span>&nbsp;<span class="op" id="5867059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867063">if</span>&nbsp;<span class="ident" id="5867066"><a href="/encoding/gob/decoder.go.html#5866979">dec</a></span><span class="op" id="5867069">.</span><span class="ident" id="5867070">buf</span><span class="op" id="5867073">.</span><span class="ident" id="5867074">Len</span><span class="op" id="5867077">(</span><span class="op" id="5867078">)</span>&nbsp;<span class="op" id="5867080">==</span>&nbsp;<span class="num" id="5867083">0</span>&nbsp;<span class="op" id="5867085">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867090">if</span>&nbsp;<span class="op" id="5867093">!</span><span class="ident" id="5867094"><a href="/encoding/gob/decoder.go.html#5866979">dec</a></span><span class="op" id="5867097">.</span><span class="ident" id="5867098">recvMessage</span><span class="op" id="5867109">(</span><span class="op" id="5867110">)</span>&nbsp;<span class="op" id="5867112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867118">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5867127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5867131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5867135">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5867159">id</span>&nbsp;<span class="op" id="5867162">:=</span>&nbsp;<span class="ident" id="5867165"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><span class="op" id="5867171">(</span><span class="ident" id="5867172"><a href="/encoding/gob/decoder.go.html#5866979">dec</a></span><span class="op" id="5867175">.</span><span class="ident" id="5867176">nextInt</span><span class="op" id="5867183">(</span><span class="op" id="5867184">)</span><span class="op" id="5867185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867189">if</span>&nbsp;<span class="ident" id="5867192"><a href="/encoding/gob/decoder.go.html#5867159">id</a></span>&nbsp;<span class="op" id="5867195">&gt;=</span>&nbsp;<span class="num" id="5867198">0</span>&nbsp;<span class="op" id="5867200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5867205">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867226">return</span>&nbsp;<span class="ident" id="5867233"><a href="/encoding/gob/decoder.go.html#5867159">id</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5867238">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5867242">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5867282"><a href="/encoding/gob/decoder.go.html#5866979">dec</a></span><span class="op" id="5867285">.</span><span class="ident" id="5867286">recvType</span><span class="op" id="5867294">(</span><span class="op" id="5867295">-</span><span class="ident" id="5867296"><a href="/encoding/gob/decoder.go.html#5867159">id</a></span><span class="op" id="5867298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5867302">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5867363">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5867421">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5867481">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867520">if</span>&nbsp;<span class="ident" id="5867523"><a href="/encoding/gob/decoder.go.html#5866979">dec</a></span><span class="op" id="5867526">.</span><span class="ident" id="5867527">buf</span><span class="op" id="5867530">.</span><span class="ident" id="5867531">Len</span><span class="op" id="5867534">(</span><span class="op" id="5867535">)</span>&nbsp;<span class="op" id="5867537">&gt;</span>&nbsp;<span class="num" id="5867539">0</span>&nbsp;<span class="op" id="5867541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867546">if</span>&nbsp;<span class="op" id="5867549">!</span><span class="ident" id="5867550"><a href="/encoding/gob/decoder.go.html#5867012">isInterface</a></span>&nbsp;<span class="op" id="5867562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5867568"><a href="/encoding/gob/decoder.go.html#5866979">dec</a></span><span class="op" id="5867571">.</span><span class="ident" id="5867572">err</span>&nbsp;<span class="op" id="5867576">=</span>&nbsp;<span class="ident" id="5867578"><a href="/encoding/gob/decoder.go.html#5863094">errors</a></span><span class="op" id="5867584">.</span><span class="ident" id="5867585">New</span><span class="op" id="5867588">(</span><span class="string" id="5867589">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="5867611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867617">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5867626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5867631"><a href="/encoding/gob/decoder.go.html#5866979">dec</a></span><span class="op" id="5867634">.</span><span class="ident" id="5867635">nextUint</span><span class="op" id="5867643">(</span><span class="op" id="5867644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5867648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5867651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5867654">return</span>&nbsp;<span class="op" id="5867661">-</span><span class="num" id="5867662">1</span><br>
<span class="lineno">165</span><span class="op" id="5867664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5867667">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="5867731">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5867791">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="5867847">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5867898">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="5867947">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5868000">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="5868022">func</span>&nbsp;<span class="op" id="5868027">(</span><span class="ident" id="5868028">dec</span>&nbsp;<span class="op" id="5868032">*</span><span class="ident" id="5868033"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5868040">)</span>&nbsp;<span class="ident" id="5868042">Decode</span><span class="op" id="5868048">(</span><span class="ident" id="5868049">e</span>&nbsp;<span class="keyword" id="5868051">interface</span><span class="op" id="5868060">{</span><span class="op" id="5868061">}</span><span class="op" id="5868062">)</span>&nbsp;<span class="builtintype" id="5868064">error</span>&nbsp;<span class="op" id="5868070">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868073">if</span>&nbsp;<span class="ident" id="5868076"><a href="/encoding/gob/decoder.go.html#5868049">e</a></span>&nbsp;<span class="op" id="5868078">==</span>&nbsp;<span class="ident" id="5868081">nil</span>&nbsp;<span class="op" id="5868085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868089">return</span>&nbsp;<span class="ident" id="5868096"><a href="/encoding/gob/decoder.go.html#5868028">dec</a></span><span class="op" id="5868099">.</span><span class="ident" id="5868100">DecodeValue</span><span class="op" id="5868111">(</span><span class="ident" id="5868112"><a href="/encoding/gob/decoder.go.html#5863110">reflect</a></span><span class="op" id="5868119">.</span><span class="ident" id="5868120">Value</span><span class="op" id="5868125">{</span><span class="op" id="5868126">}</span><span class="op" id="5868127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5868130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5868133">value</span>&nbsp;<span class="op" id="5868139">:=</span>&nbsp;<span class="ident" id="5868142"><a href="/encoding/gob/decoder.go.html#5863110">reflect</a></span><span class="op" id="5868149">.</span><span class="ident" id="5868150">ValueOf</span><span class="op" id="5868157">(</span><span class="ident" id="5868158"><a href="/encoding/gob/decoder.go.html#5868049">e</a></span><span class="op" id="5868159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5868162">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5868232">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868287">if</span>&nbsp;<span class="ident" id="5868290"><a href="/encoding/gob/decoder.go.html#5868133">value</a></span><span class="op" id="5868295">.</span><span class="ident" id="5868296">Type</span><span class="op" id="5868300">(</span><span class="op" id="5868301">)</span><span class="op" id="5868302">.</span><span class="ident" id="5868303">Kind</span><span class="op" id="5868307">(</span><span class="op" id="5868308">)</span>&nbsp;<span class="op" id="5868310">!=</span>&nbsp;<span class="ident" id="5868313"><a href="/encoding/gob/decoder.go.html#5863110">reflect</a></span><span class="op" id="5868320">.</span><span class="ident" id="5868321">Ptr</span>&nbsp;<span class="op" id="5868325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5868329"><a href="/encoding/gob/decoder.go.html#5868028">dec</a></span><span class="op" id="5868332">.</span><span class="ident" id="5868333">err</span>&nbsp;<span class="op" id="5868337">=</span>&nbsp;<span class="ident" id="5868339"><a href="/encoding/gob/decoder.go.html#5863094">errors</a></span><span class="op" id="5868345">.</span><span class="ident" id="5868346">New</span><span class="op" id="5868349">(</span><span class="string" id="5868350">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="5868393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868397">return</span>&nbsp;<span class="ident" id="5868404"><a href="/encoding/gob/decoder.go.html#5868028">dec</a></span><span class="op" id="5868407">.</span><span class="ident" id="5868408">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5868413">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868416">return</span>&nbsp;<span class="ident" id="5868423"><a href="/encoding/gob/decoder.go.html#5868028">dec</a></span><span class="op" id="5868426">.</span><span class="ident" id="5868427">DecodeValue</span><span class="op" id="5868438">(</span><span class="ident" id="5868439"><a href="/encoding/gob/decoder.go.html#5868133">value</a></span><span class="op" id="5868444">)</span><br>
<span class="lineno"></span><span class="op" id="5868446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5868449">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="5868508">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="5868597">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="5868671">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="5868747">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5868805">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5868827">func</span>&nbsp;<span class="op" id="5868832">(</span><span class="ident" id="5868833">dec</span>&nbsp;<span class="op" id="5868837">*</span><span class="ident" id="5868838"><a href="/encoding/gob/decoder.go.html#5863440">Decoder</a></span><span class="op" id="5868845">)</span>&nbsp;<span class="ident" id="5868847">DecodeValue</span><span class="op" id="5868858">(</span><span class="ident" id="5868859">v</span>&nbsp;<span class="ident" id="5868861"><a href="/encoding/gob/decoder.go.html#5863110">reflect</a></span><span class="op" id="5868868">.</span><span class="ident" id="5868869">Value</span><span class="op" id="5868874">)</span>&nbsp;<span class="builtintype" id="5868876">error</span>&nbsp;<span class="op" id="5868882">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868885">if</span>&nbsp;<span class="ident" id="5868888"><a href="/encoding/gob/decoder.go.html#5868859">v</a></span><span class="op" id="5868889">.</span><span class="ident" id="5868890">IsValid</span><span class="op" id="5868897">(</span><span class="op" id="5868898">)</span>&nbsp;<span class="op" id="5868900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868904">if</span>&nbsp;<span class="ident" id="5868907"><a href="/encoding/gob/decoder.go.html#5868859">v</a></span><span class="op" id="5868908">.</span><span class="ident" id="5868909">Kind</span><span class="op" id="5868913">(</span><span class="op" id="5868914">)</span>&nbsp;<span class="op" id="5868916">==</span>&nbsp;<span class="ident" id="5868919"><a href="/encoding/gob/decoder.go.html#5863110">reflect</a></span><span class="op" id="5868926">.</span><span class="ident" id="5868927">Ptr</span>&nbsp;<span class="op" id="5868931">&amp;&amp;</span>&nbsp;<span class="op" id="5868934">!</span><span class="ident" id="5868935"><a href="/encoding/gob/decoder.go.html#5868859">v</a></span><span class="op" id="5868936">.</span><span class="ident" id="5868937">IsNil</span><span class="op" id="5868942">(</span><span class="op" id="5868943">)</span>&nbsp;<span class="op" id="5868945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5868950">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5869001">}</span>&nbsp;<span class="keyword" id="5869003">else</span>&nbsp;<span class="keyword" id="5869008">if</span>&nbsp;<span class="op" id="5869011">!</span><span class="ident" id="5869012"><a href="/encoding/gob/decoder.go.html#5868859">v</a></span><span class="op" id="5869013">.</span><span class="ident" id="5869014">CanSet</span><span class="op" id="5869020">(</span><span class="op" id="5869021">)</span>&nbsp;<span class="op" id="5869023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5869028">return</span>&nbsp;<span class="ident" id="5869035"><a href="/encoding/gob/decoder.go.html#5863094">errors</a></span><span class="op" id="5869041">.</span><span class="ident" id="5869042">New</span><span class="op" id="5869045">(</span><span class="string" id="5869046">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="5869086">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5869090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5869093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5869096">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5869146"><a href="/encoding/gob/decoder.go.html#5868833">dec</a></span><span class="op" id="5869149">.</span><span class="ident" id="5869150">mutex</span><span class="op" id="5869155">.</span><span class="ident" id="5869156">Lock</span><span class="op" id="5869160">(</span><span class="op" id="5869161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5869164">defer</span>&nbsp;<span class="ident" id="5869170"><a href="/encoding/gob/decoder.go.html#5868833">dec</a></span><span class="op" id="5869173">.</span><span class="ident" id="5869174">mutex</span><span class="op" id="5869179">.</span><span class="ident" id="5869180">Unlock</span><span class="op" id="5869186">(</span><span class="op" id="5869187">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5869191"><a href="/encoding/gob/decoder.go.html#5868833">dec</a></span><span class="op" id="5869194">.</span><span class="ident" id="5869195">buf</span><span class="op" id="5869198">.</span><span class="ident" id="5869199">Reset</span><span class="op" id="5869204">(</span><span class="op" id="5869205">)</span>&nbsp;<span class="comment" id="5869207">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5869258"><a href="/encoding/gob/decoder.go.html#5868833">dec</a></span><span class="op" id="5869261">.</span><span class="ident" id="5869262">err</span>&nbsp;<span class="op" id="5869266">=</span>&nbsp;<span class="ident" id="5869268">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5869273">id</span>&nbsp;<span class="op" id="5869276">:=</span>&nbsp;<span class="ident" id="5869279"><a href="/encoding/gob/decoder.go.html#5868833">dec</a></span><span class="op" id="5869282">.</span><span class="ident" id="5869283">decodeTypeSequence</span><span class="op" id="5869301">(</span><span class="builtintype" id="5869302">false</span><span class="op" id="5869307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5869310">if</span>&nbsp;<span class="ident" id="5869313"><a href="/encoding/gob/decoder.go.html#5868833">dec</a></span><span class="op" id="5869316">.</span><span class="ident" id="5869317">err</span>&nbsp;<span class="op" id="5869321">==</span>&nbsp;<span class="ident" id="5869324">nil</span>&nbsp;<span class="op" id="5869328">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5869332"><a href="/encoding/gob/decoder.go.html#5868833">dec</a></span><span class="op" id="5869335">.</span><span class="ident" id="5869336">decodeValue</span><span class="op" id="5869347">(</span><span class="ident" id="5869348"><a href="/encoding/gob/decoder.go.html#5869273">id</a></span><span class="op" id="5869350">,</span>&nbsp;<span class="ident" id="5869352"><a href="/encoding/gob/decoder.go.html#5868859">v</a></span><span class="op" id="5869353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5869356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5869359">return</span>&nbsp;<span class="ident" id="5869366"><a href="/encoding/gob/decoder.go.html#5868833">dec</a></span><span class="op" id="5869369">.</span><span class="ident" id="5869370">err</span><br>
<span class="lineno"></span><span class="op" id="5869374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="5869377">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="5869457">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="5869542">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5869566">var</span>&nbsp;<span class="ident" id="5869570">debugFunc</span>&nbsp;<span class="keyword" id="5869580">func</span><span class="op" id="5869584">(</span><span class="ident" id="5869585"><a href="/encoding/gob/decoder.go.html#5863104">io</a></span><span class="op" id="5869587">.</span><span class="ident" id="5869588">Reader</span><span class="op" id="5869594">)</span>
</div>
</body>
</html>
