<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html" class="current">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6928874">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6928930">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6928984">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6929035">package</span>&nbsp;<span class="ident" id="6929043">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6929050">import</span>&nbsp;<span class="op" id="6929057">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929060">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929066">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929077">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6929087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6929090">const</span>&nbsp;<span class="ident" id="6929096">quote</span>&nbsp;<span class="op" id="6929102">=</span>&nbsp;<span class="string" id="6929104">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6929109">type</span>&nbsp;<span class="ident" id="6929114">readTest</span>&nbsp;<span class="keyword" id="6929123">struct</span>&nbsp;<span class="op" id="6929130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6929133">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929192">in</span>&nbsp;&nbsp;<span class="builtintype" id="6929196">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929204">err</span>&nbsp;<span class="builtintype" id="6929208">string</span><br>
<span class="lineno"></span><span class="op" id="6929215">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6929218">var</span>&nbsp;<span class="ident" id="6929222">readImportsTests</span>&nbsp;<span class="op" id="6929239">=</span>&nbsp;<span class="op" id="6929241">[</span><span class="op" id="6929242">]</span><span class="ident" id="6929243">readTest</span><span class="op" id="6929251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929258">`package&nbsp;p`</span><span class="op" id="6929269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929273">&#34;&#34;</span><span class="op" id="6929275">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929278">}</span><span class="op" id="6929279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929286">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="6929309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929313">&#34;&#34;</span><span class="op" id="6929315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929318">}</span><span class="op" id="6929319">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929326">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="6929351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929355">&#34;&#34;</span><span class="op" id="6929357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929360">}</span><span class="op" id="6929361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929364">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929368">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="6929404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929408">&#34;&#34;</span><span class="op" id="6929410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929413">}</span><span class="op" id="6929414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929421">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`</span>&nbsp;<span class="op" id="6929582">+</span>&nbsp;<span class="ident" id="6929584">quote</span>&nbsp;<span class="op" id="6929590">+</span>&nbsp;<span class="string" id="6929592">`x`</span>&nbsp;<span class="op" id="6929596">+</span>&nbsp;<span class="ident" id="6929598">quote</span>&nbsp;<span class="op" id="6929604">+</span>&nbsp;<span class="string" id="6929606">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="6929627">+</span>&nbsp;<span class="ident" id="6929629">quote</span>&nbsp;<span class="op" id="6929635">+</span>&nbsp;<span class="string" id="6929637">`x`</span>&nbsp;<span class="op" id="6929641">+</span>&nbsp;<span class="ident" id="6929643">quote</span>&nbsp;<span class="op" id="6929649">+</span>&nbsp;<span class="string" id="6929651">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;`</span>&nbsp;<span class="op" id="6929660">+</span>&nbsp;<span class="ident" id="6929662">quote</span>&nbsp;<span class="op" id="6929668">+</span>&nbsp;<span class="string" id="6929670">`x`</span>&nbsp;<span class="op" id="6929674">+</span>&nbsp;<span class="ident" id="6929676">quote</span>&nbsp;<span class="op" id="6929682">+</span>&nbsp;<span class="string" id="6929684">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`</span><span class="op" id="6929794">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929798">&#34;&#34;</span><span class="op" id="6929800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929803">}</span><span class="op" id="6929804">,</span><br>
<span class="lineno"></span><span class="op" id="6929806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6929809">var</span>&nbsp;<span class="ident" id="6929813">readCommentsTests</span>&nbsp;<span class="op" id="6929831">=</span>&nbsp;<span class="op" id="6929833">[</span><span class="op" id="6929834">]</span><span class="ident" id="6929835">readTest</span><span class="op" id="6929843">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929850">`ℙpackage&nbsp;p`</span><span class="op" id="6929864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929868">&#34;&#34;</span><span class="op" id="6929870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929873">}</span><span class="op" id="6929874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929877">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929881">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="6929907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929911">&#34;&#34;</span><span class="op" id="6929913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929916">}</span><span class="op" id="6929917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929924">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="6929952">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929956">&#34;&#34;</span><span class="op" id="6929958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929961">}</span><span class="op" id="6929962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6929969">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ℙHello,&nbsp;world`</span><span class="op" id="6930056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6930060">&#34;&#34;</span><span class="op" id="6930062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930065">}</span><span class="op" id="6930066">,</span><br>
<span class="lineno">95</span><span class="op" id="6930068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6930071">func</span>&nbsp;<span class="ident" id="6930076">testRead</span><span class="op" id="6930084">(</span><span class="ident" id="6930085">t</span>&nbsp;<span class="op" id="6930087">*</span><span class="ident" id="6930088">testing</span><span class="op" id="6930095">.</span><span class="ident" id="6930096">T</span><span class="op" id="6930097">,</span>&nbsp;<span class="ident" id="6930099">tests</span>&nbsp;<span class="op" id="6930105">[</span><span class="op" id="6930106">]</span><span class="ident" id="6930107">readTest</span><span class="op" id="6930115">,</span>&nbsp;<span class="ident" id="6930117">read</span>&nbsp;<span class="keyword" id="6930122">func</span><span class="op" id="6930126">(</span><span class="ident" id="6930127">io</span><span class="op" id="6930129">.</span><span class="ident" id="6930130">Reader</span><span class="op" id="6930136">)</span>&nbsp;<span class="op" id="6930138">(</span><span class="op" id="6930139">[</span><span class="op" id="6930140">]</span><span class="builtintype" id="6930141">byte</span><span class="op" id="6930145">,</span>&nbsp;<span class="builtintype" id="6930147">error</span><span class="op" id="6930152">)</span><span class="op" id="6930153">)</span>&nbsp;<span class="op" id="6930155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930158">for</span>&nbsp;<span class="ident" id="6930162">i</span><span class="op" id="6930163">,</span>&nbsp;<span class="ident" id="6930165">tt</span>&nbsp;<span class="op" id="6930168">:=</span>&nbsp;<span class="keyword" id="6930171">range</span>&nbsp;<span class="ident" id="6930177">tests</span>&nbsp;<span class="op" id="6930183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930187">var</span>&nbsp;<span class="ident" id="6930191">in</span><span class="op" id="6930193">,</span>&nbsp;<span class="ident" id="6930195">testOut</span>&nbsp;<span class="builtintype" id="6930203">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930212">j</span>&nbsp;<span class="op" id="6930214">:=</span>&nbsp;<span class="ident" id="6930217">strings</span><span class="op" id="6930224">.</span><span class="ident" id="6930225">Index</span><span class="op" id="6930230">(</span><span class="ident" id="6930231">tt</span><span class="op" id="6930233">.</span><span class="ident" id="6930234">in</span><span class="op" id="6930236">,</span>&nbsp;<span class="string" id="6930238">&#34;ℙ&#34;</span><span class="op" id="6930243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930247">if</span>&nbsp;<span class="ident" id="6930250">j</span>&nbsp;<span class="op" id="6930252">&lt;</span>&nbsp;<span class="num" id="6930254">0</span>&nbsp;<span class="op" id="6930256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930261">in</span>&nbsp;<span class="op" id="6930264">=</span>&nbsp;<span class="ident" id="6930266">tt</span><span class="op" id="6930268">.</span><span class="ident" id="6930269">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930275">testOut</span>&nbsp;<span class="op" id="6930283">=</span>&nbsp;<span class="ident" id="6930285">tt</span><span class="op" id="6930287">.</span><span class="ident" id="6930288">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930293">}</span>&nbsp;<span class="keyword" id="6930295">else</span>&nbsp;<span class="op" id="6930300">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930305">in</span>&nbsp;<span class="op" id="6930308">=</span>&nbsp;<span class="ident" id="6930310">tt</span><span class="op" id="6930312">.</span><span class="ident" id="6930313">in</span><span class="op" id="6930315">[</span><span class="op" id="6930316">:</span><span class="ident" id="6930317">j</span><span class="op" id="6930318">]</span>&nbsp;<span class="op" id="6930320">+</span>&nbsp;<span class="ident" id="6930322">tt</span><span class="op" id="6930324">.</span><span class="ident" id="6930325">in</span><span class="op" id="6930327">[</span><span class="ident" id="6930328">j</span><span class="op" id="6930329">+</span><span class="builtinfunc" id="6930330">len</span><span class="op" id="6930333">(</span><span class="string" id="6930334">&#34;ℙ&#34;</span><span class="op" id="6930339">)</span><span class="op" id="6930340">:</span><span class="op" id="6930341">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930346">testOut</span>&nbsp;<span class="op" id="6930354">=</span>&nbsp;<span class="ident" id="6930356">tt</span><span class="op" id="6930358">.</span><span class="ident" id="6930359">in</span><span class="op" id="6930361">[</span><span class="op" id="6930362">:</span><span class="ident" id="6930363">j</span><span class="op" id="6930364">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930372">r</span>&nbsp;<span class="op" id="6930374">:=</span>&nbsp;<span class="ident" id="6930377">strings</span><span class="op" id="6930384">.</span><span class="ident" id="6930385">NewReader</span><span class="op" id="6930394">(</span><span class="ident" id="6930395">in</span><span class="op" id="6930397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930401">buf</span><span class="op" id="6930404">,</span>&nbsp;<span class="ident" id="6930406">err</span>&nbsp;<span class="op" id="6930410">:=</span>&nbsp;<span class="ident" id="6930413">read</span><span class="op" id="6930417">(</span><span class="ident" id="6930418">r</span><span class="op" id="6930419">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930423">if</span>&nbsp;<span class="ident" id="6930426">err</span>&nbsp;<span class="op" id="6930430">!=</span>&nbsp;<span class="ident" id="6930433">nil</span>&nbsp;<span class="op" id="6930437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930442">if</span>&nbsp;<span class="ident" id="6930445">tt</span><span class="op" id="6930447">.</span><span class="ident" id="6930448">err</span>&nbsp;<span class="op" id="6930452">==</span>&nbsp;<span class="string" id="6930455">&#34;&#34;</span>&nbsp;<span class="op" id="6930458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930464">t</span><span class="op" id="6930465">.</span><span class="ident" id="6930466">Errorf</span><span class="op" id="6930472">(</span><span class="string" id="6930473">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="6930509">,</span>&nbsp;<span class="ident" id="6930511">i</span><span class="op" id="6930512">,</span>&nbsp;<span class="ident" id="6930514">err</span><span class="op" id="6930517">,</span>&nbsp;<span class="builtintype" id="6930519">string</span><span class="op" id="6930525">(</span><span class="ident" id="6930526">buf</span><span class="op" id="6930529">)</span><span class="op" id="6930530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930536">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930548">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930553">if</span>&nbsp;<span class="op" id="6930556">!</span><span class="ident" id="6930557">strings</span><span class="op" id="6930564">.</span><span class="ident" id="6930565">Contains</span><span class="op" id="6930573">(</span><span class="ident" id="6930574">err</span><span class="op" id="6930577">.</span><span class="ident" id="6930578">Error</span><span class="op" id="6930583">(</span><span class="op" id="6930584">)</span><span class="op" id="6930585">,</span>&nbsp;<span class="ident" id="6930587">tt</span><span class="op" id="6930589">.</span><span class="ident" id="6930590">err</span><span class="op" id="6930593">)</span>&nbsp;<span class="op" id="6930595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930601">t</span><span class="op" id="6930602">.</span><span class="ident" id="6930603">Errorf</span><span class="op" id="6930609">(</span><span class="string" id="6930610">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6930636">,</span>&nbsp;<span class="ident" id="6930638">i</span><span class="op" id="6930639">,</span>&nbsp;<span class="ident" id="6930641">err</span><span class="op" id="6930644">,</span>&nbsp;<span class="ident" id="6930646">tt</span><span class="op" id="6930648">.</span><span class="ident" id="6930649">err</span><span class="op" id="6930652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930658">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930675">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930690">if</span>&nbsp;<span class="ident" id="6930693">err</span>&nbsp;<span class="op" id="6930697">==</span>&nbsp;<span class="ident" id="6930700">nil</span>&nbsp;<span class="op" id="6930704">&amp;&amp;</span>&nbsp;<span class="ident" id="6930707">tt</span><span class="op" id="6930709">.</span><span class="ident" id="6930710">err</span>&nbsp;<span class="op" id="6930714">!=</span>&nbsp;<span class="string" id="6930717">&#34;&#34;</span>&nbsp;<span class="op" id="6930720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930725">t</span><span class="op" id="6930726">.</span><span class="ident" id="6930727">Errorf</span><span class="op" id="6930733">(</span><span class="string" id="6930734">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6930761">,</span>&nbsp;<span class="ident" id="6930763">i</span><span class="op" id="6930764">,</span>&nbsp;<span class="ident" id="6930766">tt</span><span class="op" id="6930768">.</span><span class="ident" id="6930769">err</span><span class="op" id="6930772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930777">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930788">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930793">out</span>&nbsp;<span class="op" id="6930797">:=</span>&nbsp;<span class="builtintype" id="6930800">string</span><span class="op" id="6930806">(</span><span class="ident" id="6930807">buf</span><span class="op" id="6930810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930814">if</span>&nbsp;<span class="ident" id="6930817">out</span>&nbsp;<span class="op" id="6930821">!=</span>&nbsp;<span class="ident" id="6930824">testOut</span>&nbsp;<span class="op" id="6930832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930837">t</span><span class="op" id="6930838">.</span><span class="ident" id="6930839">Errorf</span><span class="op" id="6930845">(</span><span class="string" id="6930846">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="6930886">,</span>&nbsp;<span class="ident" id="6930888">i</span><span class="op" id="6930889">,</span>&nbsp;<span class="ident" id="6930891">out</span><span class="op" id="6930894">,</span>&nbsp;<span class="ident" id="6930896">testOut</span><span class="op" id="6930903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930907">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930910">}</span><br>
<span class="lineno"></span><span class="op" id="6930912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6930915">func</span>&nbsp;<span class="ident" id="6930920">TestReadImports</span><span class="op" id="6930935">(</span><span class="ident" id="6930936">t</span>&nbsp;<span class="op" id="6930938">*</span><span class="ident" id="6930939">testing</span><span class="op" id="6930946">.</span><span class="ident" id="6930947">T</span><span class="op" id="6930948">)</span>&nbsp;<span class="op" id="6930950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6930953">testRead</span><span class="op" id="6930961">(</span><span class="ident" id="6930962">t</span><span class="op" id="6930963">,</span>&nbsp;<span class="ident" id="6930965">readImportsTests</span><span class="op" id="6930981">,</span>&nbsp;<span class="keyword" id="6930983">func</span><span class="op" id="6930987">(</span><span class="ident" id="6930988">r</span>&nbsp;<span class="ident" id="6930990">io</span><span class="op" id="6930992">.</span><span class="ident" id="6930993">Reader</span><span class="op" id="6930999">)</span>&nbsp;<span class="op" id="6931001">(</span><span class="op" id="6931002">[</span><span class="op" id="6931003">]</span><span class="builtintype" id="6931004">byte</span><span class="op" id="6931008">,</span>&nbsp;<span class="builtintype" id="6931010">error</span><span class="op" id="6931015">)</span>&nbsp;<span class="op" id="6931017">{</span>&nbsp;<span class="keyword" id="6931019">return</span>&nbsp;<span class="ident" id="6931026">readImports</span><span class="op" id="6931037">(</span><span class="ident" id="6931038">r</span><span class="op" id="6931039">,</span>&nbsp;<span class="builtintype" id="6931041">true</span><span class="op" id="6931045">)</span>&nbsp;<span class="op" id="6931047">}</span><span class="op" id="6931048">)</span><br>
<span class="lineno">135</span><span class="op" id="6931050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6931053">func</span>&nbsp;<span class="ident" id="6931058">TestReadComments</span><span class="op" id="6931074">(</span><span class="ident" id="6931075">t</span>&nbsp;<span class="op" id="6931077">*</span><span class="ident" id="6931078">testing</span><span class="op" id="6931085">.</span><span class="ident" id="6931086">T</span><span class="op" id="6931087">)</span>&nbsp;<span class="op" id="6931089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6931092">testRead</span><span class="op" id="6931100">(</span><span class="ident" id="6931101">t</span><span class="op" id="6931102">,</span>&nbsp;<span class="ident" id="6931104">readCommentsTests</span><span class="op" id="6931121">,</span>&nbsp;<span class="ident" id="6931123">readComments</span><span class="op" id="6931135">)</span><br>
<span class="lineno"></span><span class="op" id="6931137">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6931140">var</span>&nbsp;<span class="ident" id="6931144">readFailuresTests</span>&nbsp;<span class="op" id="6931162">=</span>&nbsp;<span class="op" id="6931164">[</span><span class="op" id="6931165">]</span><span class="ident" id="6931166">readTest</span><span class="op" id="6931174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931181">`package`</span><span class="op" id="6931190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931194">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931208">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931211">}</span><span class="op" id="6931212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931219">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="6931253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931257">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="6931282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931285">}</span><span class="op" id="6931286">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931293">`package&nbsp;p;&nbsp;import`</span><span class="op" id="6931312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931316">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931333">}</span><span class="op" id="6931334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931337">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931341">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="6931362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931366">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931383">}</span><span class="op" id="6931384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931391">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="6931417">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931421">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931438">}</span><span class="op" id="6931439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931446">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="6931468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931472">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931486">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931489">}</span><span class="op" id="6931490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931497">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="6931518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931522">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931539">}</span><span class="op" id="6931540">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931547">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="6931570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931574">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931591">}</span><span class="op" id="6931592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931595">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931599">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="6931623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931627">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931644">}</span><span class="op" id="6931645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931652">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="6931673">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931677">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931694">}</span><span class="op" id="6931695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931702">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="6931725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931729">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931743">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931746">}</span><span class="op" id="6931747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931754">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="6931778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931782">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931799">}</span><span class="op" id="6931800">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931807">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="6931828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931832">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931849">}</span><span class="op" id="6931850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931853">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931857">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="6931879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931883">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931900">}</span><span class="op" id="6931901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931908">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="6931931">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931935">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6931949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931952">}</span><span class="op" id="6931953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6931956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931960">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="6931984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6931988">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6932002">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6932005">}</span><span class="op" id="6932006">,</span><br>
<span class="lineno"></span><span class="op" id="6932008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6932011">func</span>&nbsp;<span class="ident" id="6932016">TestReadFailures</span><span class="op" id="6932032">(</span><span class="ident" id="6932033">t</span>&nbsp;<span class="op" id="6932035">*</span><span class="ident" id="6932036">testing</span><span class="op" id="6932043">.</span><span class="ident" id="6932044">T</span><span class="op" id="6932045">)</span>&nbsp;<span class="op" id="6932047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6932050">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6932107">testRead</span><span class="op" id="6932115">(</span><span class="ident" id="6932116">t</span><span class="op" id="6932117">,</span>&nbsp;<span class="ident" id="6932119">readFailuresTests</span><span class="op" id="6932136">,</span>&nbsp;<span class="keyword" id="6932138">func</span><span class="op" id="6932142">(</span><span class="ident" id="6932143">r</span>&nbsp;<span class="ident" id="6932145">io</span><span class="op" id="6932147">.</span><span class="ident" id="6932148">Reader</span><span class="op" id="6932154">)</span>&nbsp;<span class="op" id="6932156">(</span><span class="op" id="6932157">[</span><span class="op" id="6932158">]</span><span class="builtintype" id="6932159">byte</span><span class="op" id="6932163">,</span>&nbsp;<span class="builtintype" id="6932165">error</span><span class="op" id="6932170">)</span>&nbsp;<span class="op" id="6932172">{</span>&nbsp;<span class="keyword" id="6932174">return</span>&nbsp;<span class="ident" id="6932181">readImports</span><span class="op" id="6932192">(</span><span class="ident" id="6932193">r</span><span class="op" id="6932194">,</span>&nbsp;<span class="builtintype" id="6932196">true</span><span class="op" id="6932200">)</span>&nbsp;<span class="op" id="6932202">}</span><span class="op" id="6932203">)</span><br>
<span class="lineno"></span><span class="op" id="6932205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6932208">func</span>&nbsp;<span class="ident" id="6932213">TestReadFailuresIgnored</span><span class="op" id="6932236">(</span><span class="ident" id="6932237">t</span>&nbsp;<span class="op" id="6932239">*</span><span class="ident" id="6932240">testing</span><span class="op" id="6932247">.</span><span class="ident" id="6932248">T</span><span class="op" id="6932249">)</span>&nbsp;<span class="op" id="6932251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6932254">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6932323">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6932383">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6932430">tests</span>&nbsp;<span class="op" id="6932436">:=</span>&nbsp;<span class="builtinfunc" id="6932439">make</span><span class="op" id="6932443">(</span><span class="op" id="6932444">[</span><span class="op" id="6932445">]</span><span class="ident" id="6932446">readTest</span><span class="op" id="6932454">,</span>&nbsp;<span class="builtinfunc" id="6932456">len</span><span class="op" id="6932459">(</span><span class="ident" id="6932460">readFailuresTests</span><span class="op" id="6932477">)</span><span class="op" id="6932478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6932481">copy</span><span class="op" id="6932485">(</span><span class="ident" id="6932486">tests</span><span class="op" id="6932491">,</span>&nbsp;<span class="ident" id="6932493">readFailuresTests</span><span class="op" id="6932510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6932513">for</span>&nbsp;<span class="ident" id="6932517">i</span>&nbsp;<span class="op" id="6932519">:=</span>&nbsp;<span class="keyword" id="6932522">range</span>&nbsp;<span class="ident" id="6932528">tests</span>&nbsp;<span class="op" id="6932534">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6932538">tt</span>&nbsp;<span class="op" id="6932541">:=</span>&nbsp;<span class="op" id="6932544">&amp;</span><span class="ident" id="6932545">tests</span><span class="op" id="6932550">[</span><span class="ident" id="6932551">i</span><span class="op" id="6932552">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6932556">if</span>&nbsp;<span class="op" id="6932559">!</span><span class="ident" id="6932560">strings</span><span class="op" id="6932567">.</span><span class="ident" id="6932568">Contains</span><span class="op" id="6932576">(</span><span class="ident" id="6932577">tt</span><span class="op" id="6932579">.</span><span class="ident" id="6932580">err</span><span class="op" id="6932583">,</span>&nbsp;<span class="string" id="6932585">&#34;NUL&#34;</span><span class="op" id="6932590">)</span>&nbsp;<span class="op" id="6932592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6932597">tt</span><span class="op" id="6932599">.</span><span class="ident" id="6932600">err</span>&nbsp;<span class="op" id="6932604">=</span>&nbsp;<span class="string" id="6932606">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6932611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6932614">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6932617">testRead</span><span class="op" id="6932625">(</span><span class="ident" id="6932626">t</span><span class="op" id="6932627">,</span>&nbsp;<span class="ident" id="6932629">tests</span><span class="op" id="6932634">,</span>&nbsp;<span class="keyword" id="6932636">func</span><span class="op" id="6932640">(</span><span class="ident" id="6932641">r</span>&nbsp;<span class="ident" id="6932643">io</span><span class="op" id="6932645">.</span><span class="ident" id="6932646">Reader</span><span class="op" id="6932652">)</span>&nbsp;<span class="op" id="6932654">(</span><span class="op" id="6932655">[</span><span class="op" id="6932656">]</span><span class="builtintype" id="6932657">byte</span><span class="op" id="6932661">,</span>&nbsp;<span class="builtintype" id="6932663">error</span><span class="op" id="6932668">)</span>&nbsp;<span class="op" id="6932670">{</span>&nbsp;<span class="keyword" id="6932672">return</span>&nbsp;<span class="ident" id="6932679">readImports</span><span class="op" id="6932690">(</span><span class="ident" id="6932691">r</span><span class="op" id="6932692">,</span>&nbsp;<span class="builtintype" id="6932694">false</span><span class="op" id="6932699">)</span>&nbsp;<span class="op" id="6932701">}</span><span class="op" id="6932702">)</span><br>
<span class="lineno"></span><span class="op" id="6932704">}</span>
</div>
</body>
</html>
