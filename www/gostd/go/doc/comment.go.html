<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html" class="current">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3479116">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3479171">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3479225">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3479276">//&nbsp;Godoc&nbsp;comment&nbsp;extraction&nbsp;and&nbsp;comment&nbsp;-&gt;&nbsp;HTML&nbsp;formatting.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3479337">package</span>&nbsp;<span class="ident" id="3479345">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3479350">import</span>&nbsp;<span class="op" id="3479357">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3479360">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3479366">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3479376">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3479387">&#34;text/template&#34;</span>&nbsp;<span class="comment" id="3479403">//&nbsp;for&nbsp;HTMLEscape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3479422">&#34;unicode&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3479433">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3479448">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3479451">var</span>&nbsp;<span class="op" id="3479455">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479458">ldquo</span>&nbsp;<span class="op" id="3479464">=</span>&nbsp;<span class="op" id="3479466">[</span><span class="op" id="3479467">]</span><span class="builtintype" id="3479468">byte</span><span class="op" id="3479472">(</span><span class="string" id="3479473">&#34;&amp;ldquo;&#34;</span><span class="op" id="3479482">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479485">rdquo</span>&nbsp;<span class="op" id="3479491">=</span>&nbsp;<span class="op" id="3479493">[</span><span class="op" id="3479494">]</span><span class="builtintype" id="3479495">byte</span><span class="op" id="3479499">(</span><span class="string" id="3479500">&#34;&amp;rdquo;&#34;</span><span class="op" id="3479509">)</span><br>
<span class="lineno"></span><span class="op" id="3479511">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3479514">//&nbsp;Escape&nbsp;comment&nbsp;text&nbsp;for&nbsp;HTML.&nbsp;If&nbsp;nice&nbsp;is&nbsp;set,</span><br>
<span class="lineno"></span><span class="comment" id="3479563">//&nbsp;also&nbsp;turn&nbsp;``&nbsp;into&nbsp;&amp;ldquo;&nbsp;and&nbsp;&#39;&#39;&nbsp;into&nbsp;&amp;rdquo;.</span><br>
<span class="lineno">25</span><span class="keyword" id="3479613">func</span>&nbsp;<span class="ident" id="3479618">commentEscape</span><span class="op" id="3479631">(</span><span class="ident" id="3479632">w</span>&nbsp;<span class="ident" id="3479634"><a href="/gostd/go/doc/comment.go.html#3479360">io</a></span><span class="op" id="3479636">.</span><span class="ident" id="3479637"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="3479643">,</span>&nbsp;<span class="ident" id="3479645">text</span>&nbsp;<span class="builtintype" id="3479650">string</span><span class="op" id="3479656">,</span>&nbsp;<span class="ident" id="3479658">nice</span>&nbsp;<span class="builtintype" id="3479663">bool</span><span class="op" id="3479667">)</span>&nbsp;<span class="op" id="3479669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479672">last</span>&nbsp;<span class="op" id="3479677">:=</span>&nbsp;<span class="num" id="3479680">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479683">if</span>&nbsp;<span class="ident" id="3479686"><a href="/gostd/go/doc/comment.go.html#3479658">nice</a></span>&nbsp;<span class="op" id="3479691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479695">for</span>&nbsp;<span class="ident" id="3479699">i</span>&nbsp;<span class="op" id="3479701">:=</span>&nbsp;<span class="num" id="3479704">0</span><span class="op" id="3479705">;</span>&nbsp;<span class="ident" id="3479707"><a href="/gostd/go/doc/comment.go.html#3479699">i</a></span>&nbsp;<span class="op" id="3479709">&lt;</span>&nbsp;<span class="builtinfunc" id="3479711">len</span><span class="op" id="3479714">(</span><span class="ident" id="3479715"><a href="/gostd/go/doc/comment.go.html#3479645">text</a></span><span class="op" id="3479719">)</span><span class="op" id="3479720">-</span><span class="num" id="3479721">1</span><span class="op" id="3479722">;</span>&nbsp;<span class="ident" id="3479724"><a href="/gostd/go/doc/comment.go.html#3479699">i</a></span><span class="op" id="3479725">++</span>&nbsp;<span class="op" id="3479728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479733">ch</span>&nbsp;<span class="op" id="3479736">:=</span>&nbsp;<span class="ident" id="3479739"><a href="/gostd/go/doc/comment.go.html#3479645">text</a></span><span class="op" id="3479743">[</span><span class="ident" id="3479744"><a href="/gostd/go/doc/comment.go.html#3479699">i</a></span><span class="op" id="3479745">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479750">if</span>&nbsp;<span class="ident" id="3479753"><a href="/gostd/go/doc/comment.go.html#3479733">ch</a></span>&nbsp;<span class="op" id="3479756">==</span>&nbsp;<span class="ident" id="3479759"><a href="/gostd/go/doc/comment.go.html#3479645">text</a></span><span class="op" id="3479763">[</span><span class="ident" id="3479764"><a href="/gostd/go/doc/comment.go.html#3479699">i</a></span><span class="op" id="3479765">+</span><span class="num" id="3479766">1</span><span class="op" id="3479767">]</span>&nbsp;<span class="op" id="3479769">&amp;&amp;</span>&nbsp;<span class="op" id="3479772">(</span><span class="ident" id="3479773"><a href="/gostd/go/doc/comment.go.html#3479733">ch</a></span>&nbsp;<span class="op" id="3479776">==</span>&nbsp;<span class="string" id="3479779">&#39;`&#39;</span>&nbsp;<span class="op" id="3479783">||</span>&nbsp;<span class="ident" id="3479786"><a href="/gostd/go/doc/comment.go.html#3479733">ch</a></span>&nbsp;<span class="op" id="3479789">==</span>&nbsp;<span class="string" id="3479792">&#39;\&#39;&#39;</span><span class="op" id="3479796">)</span>&nbsp;<span class="op" id="3479798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479804"><a href="/gostd/go/doc/comment.go.html#3479387">template</a></span><span class="op" id="3479812">.</span><span class="ident" id="3479813"><a href="/gostd/text/template/funcs.go.html#3731757">HTMLEscape</a></span><span class="op" id="3479823">(</span><span class="ident" id="3479824"><a href="/gostd/go/doc/comment.go.html#3479632">w</a></span><span class="op" id="3479825">,</span>&nbsp;<span class="op" id="3479827">[</span><span class="op" id="3479828">]</span><span class="builtintype" id="3479829">byte</span><span class="op" id="3479833">(</span><span class="ident" id="3479834"><a href="/gostd/go/doc/comment.go.html#3479645">text</a></span><span class="op" id="3479838">[</span><span class="ident" id="3479839"><a href="/gostd/go/doc/comment.go.html#3479672">last</a></span><span class="op" id="3479843">:</span><span class="ident" id="3479844"><a href="/gostd/go/doc/comment.go.html#3479699">i</a></span><span class="op" id="3479845">]</span><span class="op" id="3479846">)</span><span class="op" id="3479847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479853"><a href="/gostd/go/doc/comment.go.html#3479672">last</a></span>&nbsp;<span class="op" id="3479858">=</span>&nbsp;<span class="ident" id="3479860"><a href="/gostd/go/doc/comment.go.html#3479699">i</a></span>&nbsp;<span class="op" id="3479862">+</span>&nbsp;<span class="num" id="3479864">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479870">switch</span>&nbsp;<span class="ident" id="3479877"><a href="/gostd/go/doc/comment.go.html#3479733">ch</a></span>&nbsp;<span class="op" id="3479880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479886">case</span>&nbsp;<span class="string" id="3479891">&#39;`&#39;</span><span class="op" id="3479894">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479901"><a href="/gostd/go/doc/comment.go.html#3479632">w</a></span><span class="op" id="3479902">.</span><span class="ident" id="3479903"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3479908">(</span><span class="ident" id="3479909"><a href="/gostd/go/doc/comment.go.html#3479458">ldquo</a></span><span class="op" id="3479914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479920">case</span>&nbsp;<span class="string" id="3479925">&#39;\&#39;&#39;</span><span class="op" id="3479929">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479936"><a href="/gostd/go/doc/comment.go.html#3479632">w</a></span><span class="op" id="3479937">.</span><span class="ident" id="3479938"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3479943">(</span><span class="ident" id="3479944"><a href="/gostd/go/doc/comment.go.html#3479485">rdquo</a></span><span class="op" id="3479949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479961"><a href="/gostd/go/doc/comment.go.html#3479699">i</a></span><span class="op" id="3479962">++</span>&nbsp;<span class="comment" id="3479965">//&nbsp;loop&nbsp;will&nbsp;add&nbsp;one&nbsp;more</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480004"><a href="/gostd/go/doc/comment.go.html#3479387">template</a></span><span class="op" id="3480012">.</span><span class="ident" id="3480013"><a href="/gostd/text/template/funcs.go.html#3731757">HTMLEscape</a></span><span class="op" id="3480023">(</span><span class="ident" id="3480024"><a href="/gostd/go/doc/comment.go.html#3479632">w</a></span><span class="op" id="3480025">,</span>&nbsp;<span class="op" id="3480027">[</span><span class="op" id="3480028">]</span><span class="builtintype" id="3480029">byte</span><span class="op" id="3480033">(</span><span class="ident" id="3480034"><a href="/gostd/go/doc/comment.go.html#3479645">text</a></span><span class="op" id="3480038">[</span><span class="ident" id="3480039"><a href="/gostd/go/doc/comment.go.html#3479672">last</a></span><span class="op" id="3480043">:</span><span class="op" id="3480044">]</span><span class="op" id="3480045">)</span><span class="op" id="3480046">)</span><br>
<span class="lineno"></span><span class="op" id="3480048">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3480051">const</span>&nbsp;<span class="op" id="3480057">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3480060">//&nbsp;Regexp&nbsp;for&nbsp;Go&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480090">identRx</span>&nbsp;<span class="op" id="3480098">=</span>&nbsp;<span class="string" id="3480100">`[\pL_][\pL_0-9]*`</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3480121">//&nbsp;Regexp&nbsp;for&nbsp;URLs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480141">protocol</span>&nbsp;<span class="op" id="3480150">=</span>&nbsp;<span class="string" id="3480152">`https?|ftp|file|gopher|mailto|news|nntp|telnet|wais|prospero`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480216">hostPart</span>&nbsp;<span class="op" id="3480225">=</span>&nbsp;<span class="string" id="3480227">`[a-zA-Z0-9_@\-]+`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480247">filePart</span>&nbsp;<span class="op" id="3480256">=</span>&nbsp;<span class="string" id="3480258">`[a-zA-Z0-9_?%#~&amp;/\-+=()]+`</span>&nbsp;<span class="comment" id="3480286">//&nbsp;parentheses&nbsp;may&nbsp;not&nbsp;be&nbsp;matching;&nbsp;see&nbsp;pairedParensPrefixLen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480349">urlRx</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480358">=</span>&nbsp;<span class="string" id="3480360">`(`</span>&nbsp;<span class="op" id="3480364">+</span>&nbsp;<span class="ident" id="3480366"><a href="/gostd/go/doc/comment.go.html#3480141">protocol</a></span>&nbsp;<span class="op" id="3480375">+</span>&nbsp;<span class="string" id="3480377">`)://`</span>&nbsp;<span class="op" id="3480384">+</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3480388">//&nbsp;http://</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480401"><a href="/gostd/go/doc/comment.go.html#3480216">hostPart</a></span>&nbsp;<span class="op" id="3480410">+</span>&nbsp;<span class="string" id="3480412">`([.:]`</span>&nbsp;<span class="op" id="3480420">+</span>&nbsp;<span class="ident" id="3480422"><a href="/gostd/go/doc/comment.go.html#3480216">hostPart</a></span>&nbsp;<span class="op" id="3480431">+</span>&nbsp;<span class="string" id="3480433">`)*/?`</span>&nbsp;<span class="op" id="3480440">+</span>&nbsp;<span class="comment" id="3480442">//&nbsp;//www.google.com:8080/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480470"><a href="/gostd/go/doc/comment.go.html#3480247">filePart</a></span>&nbsp;<span class="op" id="3480479">+</span>&nbsp;<span class="string" id="3480481">`([:.,]`</span>&nbsp;<span class="op" id="3480490">+</span>&nbsp;<span class="ident" id="3480492"><a href="/gostd/go/doc/comment.go.html#3480247">filePart</a></span>&nbsp;<span class="op" id="3480501">+</span>&nbsp;<span class="string" id="3480503">`)*`</span><br>
<span class="lineno"></span><span class="op" id="3480508">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3480511">var</span>&nbsp;<span class="ident" id="3480515">matchRx</span>&nbsp;<span class="op" id="3480523">=</span>&nbsp;<span class="ident" id="3480525"><a href="/gostd/go/doc/comment.go.html#3479366">regexp</a></span><span class="op" id="3480531">.</span><span class="ident" id="3480532"><a href="/gostd/regexp/regexp.go.html#3571892">MustCompile</a></span><span class="op" id="3480543">(</span><span class="string" id="3480544">`(`</span>&nbsp;<span class="op" id="3480548">+</span>&nbsp;<span class="ident" id="3480550"><a href="/gostd/go/doc/comment.go.html#3480349">urlRx</a></span>&nbsp;<span class="op" id="3480556">+</span>&nbsp;<span class="string" id="3480558">`)|(`</span>&nbsp;<span class="op" id="3480564">+</span>&nbsp;<span class="ident" id="3480566"><a href="/gostd/go/doc/comment.go.html#3480090">identRx</a></span>&nbsp;<span class="op" id="3480574">+</span>&nbsp;<span class="string" id="3480576">`)`</span><span class="op" id="3480579">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3480582">var</span>&nbsp;<span class="op" id="3480586">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480589">html_a</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480601">=</span>&nbsp;<span class="op" id="3480603">[</span><span class="op" id="3480604">]</span><span class="builtintype" id="3480605">byte</span><span class="op" id="3480609">(</span><span class="string" id="3480610">`&lt;a&nbsp;href=&#34;`</span><span class="op" id="3480621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480624">html_aq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480636">=</span>&nbsp;<span class="op" id="3480638">[</span><span class="op" id="3480639">]</span><span class="builtintype" id="3480640">byte</span><span class="op" id="3480644">(</span><span class="string" id="3480645">`&#34;&gt;`</span><span class="op" id="3480649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480652">html_enda</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3480664">=</span>&nbsp;<span class="op" id="3480666">[</span><span class="op" id="3480667">]</span><span class="builtintype" id="3480668">byte</span><span class="op" id="3480672">(</span><span class="string" id="3480673">&#34;&lt;/a&gt;&#34;</span><span class="op" id="3480679">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480682">html_i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480694">=</span>&nbsp;<span class="op" id="3480696">[</span><span class="op" id="3480697">]</span><span class="builtintype" id="3480698">byte</span><span class="op" id="3480702">(</span><span class="string" id="3480703">&#34;&lt;i&gt;&#34;</span><span class="op" id="3480708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480711">html_endi</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3480723">=</span>&nbsp;<span class="op" id="3480725">[</span><span class="op" id="3480726">]</span><span class="builtintype" id="3480727">byte</span><span class="op" id="3480731">(</span><span class="string" id="3480732">&#34;&lt;/i&gt;&#34;</span><span class="op" id="3480738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480741">html_p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480753">=</span>&nbsp;<span class="op" id="3480755">[</span><span class="op" id="3480756">]</span><span class="builtintype" id="3480757">byte</span><span class="op" id="3480761">(</span><span class="string" id="3480762">&#34;&lt;p&gt;\n&#34;</span><span class="op" id="3480769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480772">html_endp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3480784">=</span>&nbsp;<span class="op" id="3480786">[</span><span class="op" id="3480787">]</span><span class="builtintype" id="3480788">byte</span><span class="op" id="3480792">(</span><span class="string" id="3480793">&#34;&lt;/p&gt;\n&#34;</span><span class="op" id="3480801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480804">html_pre</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480816">=</span>&nbsp;<span class="op" id="3480818">[</span><span class="op" id="3480819">]</span><span class="builtintype" id="3480820">byte</span><span class="op" id="3480824">(</span><span class="string" id="3480825">&#34;&lt;pre&gt;&#34;</span><span class="op" id="3480832">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480835">html_endpre</span>&nbsp;<span class="op" id="3480847">=</span>&nbsp;<span class="op" id="3480849">[</span><span class="op" id="3480850">]</span><span class="builtintype" id="3480851">byte</span><span class="op" id="3480855">(</span><span class="string" id="3480856">&#34;&lt;/pre&gt;\n&#34;</span><span class="op" id="3480866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480869">html_h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480881">=</span>&nbsp;<span class="op" id="3480883">[</span><span class="op" id="3480884">]</span><span class="builtintype" id="3480885">byte</span><span class="op" id="3480889">(</span><span class="string" id="3480890">`&lt;h3&nbsp;id=&#34;`</span><span class="op" id="3480900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480903">html_hq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480915">=</span>&nbsp;<span class="op" id="3480917">[</span><span class="op" id="3480918">]</span><span class="builtintype" id="3480919">byte</span><span class="op" id="3480923">(</span><span class="string" id="3480924">`&#34;&gt;`</span><span class="op" id="3480928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480931">html_endh</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3480943">=</span>&nbsp;<span class="op" id="3480945">[</span><span class="op" id="3480946">]</span><span class="builtintype" id="3480947">byte</span><span class="op" id="3480951">(</span><span class="string" id="3480952">&#34;&lt;/h3&gt;\n&#34;</span><span class="op" id="3480961">)</span><br>
<span class="lineno"></span><span class="op" id="3480963">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="3480966">//&nbsp;pairedParensPrefixLen&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;longest&nbsp;prefix&nbsp;of&nbsp;s&nbsp;containing&nbsp;paired&nbsp;parentheses.</span><br>
<span class="lineno"></span><span class="keyword" id="3481068">func</span>&nbsp;<span class="ident" id="3481073">pairedParensPrefixLen</span><span class="op" id="3481094">(</span><span class="ident" id="3481095">s</span>&nbsp;<span class="builtintype" id="3481097">string</span><span class="op" id="3481103">)</span>&nbsp;<span class="builtintype" id="3481105">int</span>&nbsp;<span class="op" id="3481109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481112">parens</span>&nbsp;<span class="op" id="3481119">:=</span>&nbsp;<span class="num" id="3481122">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481125">l</span>&nbsp;<span class="op" id="3481127">:=</span>&nbsp;<span class="builtinfunc" id="3481130">len</span><span class="op" id="3481133">(</span><span class="ident" id="3481134"><a href="/gostd/go/doc/comment.go.html#3481095">s</a></span><span class="op" id="3481135">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481138">for</span>&nbsp;<span class="ident" id="3481142">i</span><span class="op" id="3481143">,</span>&nbsp;<span class="ident" id="3481145">ch</span>&nbsp;<span class="op" id="3481148">:=</span>&nbsp;<span class="keyword" id="3481151">range</span>&nbsp;<span class="ident" id="3481157"><a href="/gostd/go/doc/comment.go.html#3481095">s</a></span>&nbsp;<span class="op" id="3481159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481163">switch</span>&nbsp;<span class="ident" id="3481170"><a href="/gostd/go/doc/comment.go.html#3481145">ch</a></span>&nbsp;<span class="op" id="3481173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481177">case</span>&nbsp;<span class="string" id="3481182">&#39;(&#39;</span><span class="op" id="3481185">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481190">if</span>&nbsp;<span class="ident" id="3481193"><a href="/gostd/go/doc/comment.go.html#3481112">parens</a></span>&nbsp;<span class="op" id="3481200">==</span>&nbsp;<span class="num" id="3481203">0</span>&nbsp;<span class="op" id="3481205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481211"><a href="/gostd/go/doc/comment.go.html#3481125">l</a></span>&nbsp;<span class="op" id="3481213">=</span>&nbsp;<span class="ident" id="3481215"><a href="/gostd/go/doc/comment.go.html#3481142">i</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3481220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481225"><a href="/gostd/go/doc/comment.go.html#3481112">parens</a></span><span class="op" id="3481231">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481236">case</span>&nbsp;<span class="string" id="3481241">&#39;)&#39;</span><span class="op" id="3481244">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481249"><a href="/gostd/go/doc/comment.go.html#3481112">parens</a></span><span class="op" id="3481255">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481261">if</span>&nbsp;<span class="ident" id="3481264"><a href="/gostd/go/doc/comment.go.html#3481112">parens</a></span>&nbsp;<span class="op" id="3481271">==</span>&nbsp;<span class="num" id="3481274">0</span>&nbsp;<span class="op" id="3481276">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481282"><a href="/gostd/go/doc/comment.go.html#3481125">l</a></span>&nbsp;<span class="op" id="3481284">=</span>&nbsp;<span class="builtinfunc" id="3481286">len</span><span class="op" id="3481289">(</span><span class="ident" id="3481290"><a href="/gostd/go/doc/comment.go.html#3481095">s</a></span><span class="op" id="3481291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3481296">}</span>&nbsp;<span class="keyword" id="3481298">else</span>&nbsp;<span class="keyword" id="3481303">if</span>&nbsp;<span class="ident" id="3481306"><a href="/gostd/go/doc/comment.go.html#3481112">parens</a></span>&nbsp;<span class="op" id="3481313">&lt;</span>&nbsp;<span class="num" id="3481315">0</span>&nbsp;<span class="op" id="3481317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481323">return</span>&nbsp;<span class="ident" id="3481330"><a href="/gostd/go/doc/comment.go.html#3481142">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3481335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3481339">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3481342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481345">return</span>&nbsp;<span class="ident" id="3481352"><a href="/gostd/go/doc/comment.go.html#3481125">l</a></span><br>
<span class="lineno"></span><span class="op" id="3481354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3481357">//&nbsp;Emphasize&nbsp;and&nbsp;escape&nbsp;a&nbsp;line&nbsp;of&nbsp;text&nbsp;for&nbsp;HTML.&nbsp;URLs&nbsp;are&nbsp;converted&nbsp;into&nbsp;links;</span><br>
<span class="lineno">100</span><span class="comment" id="3481437">//&nbsp;if&nbsp;the&nbsp;URL&nbsp;also&nbsp;appears&nbsp;in&nbsp;the&nbsp;words&nbsp;map,&nbsp;the&nbsp;link&nbsp;is&nbsp;taken&nbsp;from&nbsp;the&nbsp;map&nbsp;(if</span><br>
<span class="lineno"></span><span class="comment" id="3481517">//&nbsp;the&nbsp;corresponding&nbsp;map&nbsp;value&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;the&nbsp;URL&nbsp;is&nbsp;not&nbsp;converted</span><br>
<span class="lineno"></span><span class="comment" id="3481594">//&nbsp;into&nbsp;a&nbsp;link).&nbsp;Go&nbsp;identifiers&nbsp;that&nbsp;appear&nbsp;in&nbsp;the&nbsp;words&nbsp;map&nbsp;are&nbsp;italicized;&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="3481674">//&nbsp;the&nbsp;corresponding&nbsp;map&nbsp;value&nbsp;is&nbsp;not&nbsp;the&nbsp;empty&nbsp;string,&nbsp;it&nbsp;is&nbsp;considered&nbsp;a&nbsp;URL</span><br>
<span class="lineno"></span><span class="comment" id="3481753">//&nbsp;and&nbsp;the&nbsp;word&nbsp;is&nbsp;converted&nbsp;into&nbsp;a&nbsp;link.&nbsp;If&nbsp;nice&nbsp;is&nbsp;set,&nbsp;the&nbsp;remaining&nbsp;text&#39;s</span><br>
<span class="lineno">105</span><span class="comment" id="3481832">//&nbsp;appearance&nbsp;is&nbsp;improved&nbsp;where&nbsp;it&nbsp;makes&nbsp;sense&nbsp;(e.g.,&nbsp;``&nbsp;is&nbsp;turned&nbsp;into&nbsp;&amp;ldquo;</span><br>
<span class="lineno"></span><span class="comment" id="3481912">//&nbsp;and&nbsp;&#39;&#39;&nbsp;into&nbsp;&amp;rdquo;).</span><br>
<span class="lineno"></span><span class="keyword" id="3481937">func</span>&nbsp;<span class="ident" id="3481942">emphasize</span><span class="op" id="3481951">(</span><span class="ident" id="3481952">w</span>&nbsp;<span class="ident" id="3481954"><a href="/gostd/go/doc/comment.go.html#3479360">io</a></span><span class="op" id="3481956">.</span><span class="ident" id="3481957"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="3481963">,</span>&nbsp;<span class="ident" id="3481965">line</span>&nbsp;<span class="builtintype" id="3481970">string</span><span class="op" id="3481976">,</span>&nbsp;<span class="ident" id="3481978">words</span>&nbsp;<span class="keyword" id="3481984">map</span><span class="op" id="3481987">[</span><span class="builtintype" id="3481988">string</span><span class="op" id="3481994">]</span><span class="builtintype" id="3481995">string</span><span class="op" id="3482001">,</span>&nbsp;<span class="ident" id="3482003">nice</span>&nbsp;<span class="builtintype" id="3482008">bool</span><span class="op" id="3482012">)</span>&nbsp;<span class="op" id="3482014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3482017">for</span>&nbsp;<span class="op" id="3482021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482025">m</span>&nbsp;<span class="op" id="3482027">:=</span>&nbsp;<span class="ident" id="3482030"><a href="/gostd/go/doc/comment.go.html#3480515">matchRx</a></span><span class="op" id="3482037">.</span><span class="ident" id="3482038"><a href="/gostd/regexp/regexp.go.html#3591482">FindStringSubmatchIndex</a></span><span class="op" id="3482061">(</span><span class="ident" id="3482062"><a href="/gostd/go/doc/comment.go.html#3481965">line</a></span><span class="op" id="3482066">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3482070">if</span>&nbsp;<span class="ident" id="3482073"><a href="/gostd/go/doc/comment.go.html#3482025">m</a></span>&nbsp;<span class="op" id="3482075">==</span>&nbsp;<span class="builtintype" id="3482078">nil</span>&nbsp;<span class="op" id="3482082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3482087">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3482095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482099">//&nbsp;m&nbsp;&gt;=&nbsp;6&nbsp;(two&nbsp;parenthesized&nbsp;sub-regexps&nbsp;in&nbsp;matchRx,&nbsp;1st&nbsp;one&nbsp;is&nbsp;urlRx)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482173">//&nbsp;write&nbsp;text&nbsp;before&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482202"><a href="/gostd/go/doc/comment.go.html#3479618">commentEscape</a></span><span class="op" id="3482215">(</span><span class="ident" id="3482216"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3482217">,</span>&nbsp;<span class="ident" id="3482219"><a href="/gostd/go/doc/comment.go.html#3481965">line</a></span><span class="op" id="3482223">[</span><span class="num" id="3482224">0</span><span class="op" id="3482225">:</span><span class="ident" id="3482226"><a href="/gostd/go/doc/comment.go.html#3482025">m</a></span><span class="op" id="3482227">[</span><span class="num" id="3482228">0</span><span class="op" id="3482229">]</span><span class="op" id="3482230">]</span><span class="op" id="3482231">,</span>&nbsp;<span class="ident" id="3482233"><a href="/gostd/go/doc/comment.go.html#3482003">nice</a></span><span class="op" id="3482237">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482242">//&nbsp;adjust&nbsp;match&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482273">match</span>&nbsp;<span class="op" id="3482279">:=</span>&nbsp;<span class="ident" id="3482282"><a href="/gostd/go/doc/comment.go.html#3481965">line</a></span><span class="op" id="3482286">[</span><span class="ident" id="3482287"><a href="/gostd/go/doc/comment.go.html#3482025">m</a></span><span class="op" id="3482288">[</span><span class="num" id="3482289">0</span><span class="op" id="3482290">]</span><span class="op" id="3482291">:</span><span class="ident" id="3482292"><a href="/gostd/go/doc/comment.go.html#3482025">m</a></span><span class="op" id="3482293">[</span><span class="num" id="3482294">1</span><span class="op" id="3482295">]</span><span class="op" id="3482296">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3482300">if</span>&nbsp;<span class="ident" id="3482303">n</span>&nbsp;<span class="op" id="3482305">:=</span>&nbsp;<span class="ident" id="3482308"><a href="/gostd/go/doc/comment.go.html#3481073">pairedParensPrefixLen</a></span><span class="op" id="3482329">(</span><span class="ident" id="3482330"><a href="/gostd/go/doc/comment.go.html#3482273">match</a></span><span class="op" id="3482335">)</span><span class="op" id="3482336">;</span>&nbsp;<span class="ident" id="3482338"><a href="/gostd/go/doc/comment.go.html#3482303">n</a></span>&nbsp;<span class="op" id="3482340">&lt;</span>&nbsp;<span class="builtinfunc" id="3482342">len</span><span class="op" id="3482345">(</span><span class="ident" id="3482346"><a href="/gostd/go/doc/comment.go.html#3482273">match</a></span><span class="op" id="3482351">)</span>&nbsp;<span class="op" id="3482353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482358">//&nbsp;match&nbsp;contains&nbsp;unpaired&nbsp;parentheses&nbsp;(rare);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482408">//&nbsp;redo&nbsp;matching&nbsp;with&nbsp;shortened&nbsp;line&nbsp;for&nbsp;correct&nbsp;indices</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482468"><a href="/gostd/go/doc/comment.go.html#3482025">m</a></span>&nbsp;<span class="op" id="3482470">=</span>&nbsp;<span class="ident" id="3482472"><a href="/gostd/go/doc/comment.go.html#3480515">matchRx</a></span><span class="op" id="3482479">.</span><span class="ident" id="3482480"><a href="/gostd/regexp/regexp.go.html#3591482">FindStringSubmatchIndex</a></span><span class="op" id="3482503">(</span><span class="ident" id="3482504"><a href="/gostd/go/doc/comment.go.html#3481965">line</a></span><span class="op" id="3482508">[</span><span class="op" id="3482509">:</span><span class="ident" id="3482510"><a href="/gostd/go/doc/comment.go.html#3482025">m</a></span><span class="op" id="3482511">[</span><span class="num" id="3482512">0</span><span class="op" id="3482513">]</span><span class="op" id="3482514">+</span><span class="ident" id="3482515"><a href="/gostd/go/doc/comment.go.html#3482303">n</a></span><span class="op" id="3482516">]</span><span class="op" id="3482517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482522"><a href="/gostd/go/doc/comment.go.html#3482273">match</a></span>&nbsp;<span class="op" id="3482528">=</span>&nbsp;<span class="ident" id="3482530"><a href="/gostd/go/doc/comment.go.html#3482273">match</a></span><span class="op" id="3482535">[</span><span class="op" id="3482536">:</span><span class="ident" id="3482537"><a href="/gostd/go/doc/comment.go.html#3482303">n</a></span><span class="op" id="3482538">]</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3482542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482547">//&nbsp;analyze&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482566">url</span>&nbsp;<span class="op" id="3482570">:=</span>&nbsp;<span class="string" id="3482573">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482578">italics</span>&nbsp;<span class="op" id="3482586">:=</span>&nbsp;<span class="builtintype" id="3482589">false</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3482597">if</span>&nbsp;<span class="ident" id="3482600"><a href="/gostd/go/doc/comment.go.html#3481978">words</a></span>&nbsp;<span class="op" id="3482606">!=</span>&nbsp;<span class="builtintype" id="3482609">nil</span>&nbsp;<span class="op" id="3482613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482618"><a href="/gostd/go/doc/comment.go.html#3482566">url</a></span><span class="op" id="3482621">,</span>&nbsp;<span class="ident" id="3482623"><a href="/gostd/go/doc/comment.go.html#3482578">italics</a></span>&nbsp;<span class="op" id="3482631">=</span>&nbsp;<span class="ident" id="3482633"><a href="/gostd/go/doc/comment.go.html#3481978">words</a></span><span class="op" id="3482638">[</span><span class="ident" id="3482639"><a href="/gostd/go/doc/comment.go.html#3482273">match</a></span><span class="op" id="3482644">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3482648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3482652">if</span>&nbsp;<span class="ident" id="3482655"><a href="/gostd/go/doc/comment.go.html#3482025">m</a></span><span class="op" id="3482656">[</span><span class="num" id="3482657">2</span><span class="op" id="3482658">]</span>&nbsp;<span class="op" id="3482660">&gt;=</span>&nbsp;<span class="num" id="3482663">0</span>&nbsp;<span class="op" id="3482665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482670">//&nbsp;match&nbsp;against&nbsp;first&nbsp;parenthesized&nbsp;sub-regexp;&nbsp;must&nbsp;be&nbsp;match&nbsp;against&nbsp;urlRx</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3482750">if</span>&nbsp;<span class="op" id="3482753">!</span><span class="ident" id="3482754"><a href="/gostd/go/doc/comment.go.html#3482578">italics</a></span>&nbsp;<span class="op" id="3482762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482768">//&nbsp;no&nbsp;alternative&nbsp;URL&nbsp;in&nbsp;words&nbsp;list,&nbsp;use&nbsp;match&nbsp;instead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482827"><a href="/gostd/go/doc/comment.go.html#3482566">url</a></span>&nbsp;<span class="op" id="3482831">=</span>&nbsp;<span class="ident" id="3482833"><a href="/gostd/go/doc/comment.go.html#3482273">match</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3482842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482847"><a href="/gostd/go/doc/comment.go.html#3482578">italics</a></span>&nbsp;<span class="op" id="3482855">=</span>&nbsp;<span class="builtintype" id="3482857">false</span>&nbsp;<span class="comment" id="3482863">//&nbsp;don&#39;t&nbsp;italicize&nbsp;URLs</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3482889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3482894">//&nbsp;write&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3482911">if</span>&nbsp;<span class="builtinfunc" id="3482914">len</span><span class="op" id="3482917">(</span><span class="ident" id="3482918"><a href="/gostd/go/doc/comment.go.html#3482566">url</a></span><span class="op" id="3482921">)</span>&nbsp;<span class="op" id="3482923">&gt;</span>&nbsp;<span class="num" id="3482925">0</span>&nbsp;<span class="op" id="3482927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482932"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3482933">.</span><span class="ident" id="3482934"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3482939">(</span><span class="ident" id="3482940"><a href="/gostd/go/doc/comment.go.html#3480589">html_a</a></span><span class="op" id="3482946">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482951"><a href="/gostd/go/doc/comment.go.html#3479387">template</a></span><span class="op" id="3482959">.</span><span class="ident" id="3482960"><a href="/gostd/text/template/funcs.go.html#3731757">HTMLEscape</a></span><span class="op" id="3482970">(</span><span class="ident" id="3482971"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3482972">,</span>&nbsp;<span class="op" id="3482974">[</span><span class="op" id="3482975">]</span><span class="builtintype" id="3482976">byte</span><span class="op" id="3482980">(</span><span class="ident" id="3482981"><a href="/gostd/go/doc/comment.go.html#3482566">url</a></span><span class="op" id="3482984">)</span><span class="op" id="3482985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3482990"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3482991">.</span><span class="ident" id="3482992"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3482997">(</span><span class="ident" id="3482998"><a href="/gostd/go/doc/comment.go.html#3480624">html_aq</a></span><span class="op" id="3483005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483013">if</span>&nbsp;<span class="ident" id="3483016"><a href="/gostd/go/doc/comment.go.html#3482578">italics</a></span>&nbsp;<span class="op" id="3483024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483029"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3483030">.</span><span class="ident" id="3483031"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3483036">(</span><span class="ident" id="3483037"><a href="/gostd/go/doc/comment.go.html#3480682">html_i</a></span><span class="op" id="3483043">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483051"><a href="/gostd/go/doc/comment.go.html#3479618">commentEscape</a></span><span class="op" id="3483064">(</span><span class="ident" id="3483065"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3483066">,</span>&nbsp;<span class="ident" id="3483068"><a href="/gostd/go/doc/comment.go.html#3482273">match</a></span><span class="op" id="3483073">,</span>&nbsp;<span class="ident" id="3483075"><a href="/gostd/go/doc/comment.go.html#3482003">nice</a></span><span class="op" id="3483079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483083">if</span>&nbsp;<span class="ident" id="3483086"><a href="/gostd/go/doc/comment.go.html#3482578">italics</a></span>&nbsp;<span class="op" id="3483094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483099"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3483100">.</span><span class="ident" id="3483101"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3483106">(</span><span class="ident" id="3483107"><a href="/gostd/go/doc/comment.go.html#3480711">html_endi</a></span><span class="op" id="3483116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483120">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483124">if</span>&nbsp;<span class="builtinfunc" id="3483127">len</span><span class="op" id="3483130">(</span><span class="ident" id="3483131"><a href="/gostd/go/doc/comment.go.html#3482566">url</a></span><span class="op" id="3483134">)</span>&nbsp;<span class="op" id="3483136">&gt;</span>&nbsp;<span class="num" id="3483138">0</span>&nbsp;<span class="op" id="3483140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483145"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3483146">.</span><span class="ident" id="3483147"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3483152">(</span><span class="ident" id="3483153"><a href="/gostd/go/doc/comment.go.html#3480652">html_enda</a></span><span class="op" id="3483162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3483171">//&nbsp;advance</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483184"><a href="/gostd/go/doc/comment.go.html#3481965">line</a></span>&nbsp;<span class="op" id="3483189">=</span>&nbsp;<span class="ident" id="3483191"><a href="/gostd/go/doc/comment.go.html#3481965">line</a></span><span class="op" id="3483195">[</span><span class="ident" id="3483196"><a href="/gostd/go/doc/comment.go.html#3482025">m</a></span><span class="op" id="3483197">[</span><span class="num" id="3483198">1</span><span class="op" id="3483199">]</span><span class="op" id="3483200">:</span><span class="op" id="3483201">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483207"><a href="/gostd/go/doc/comment.go.html#3479618">commentEscape</a></span><span class="op" id="3483220">(</span><span class="ident" id="3483221"><a href="/gostd/go/doc/comment.go.html#3481952">w</a></span><span class="op" id="3483222">,</span>&nbsp;<span class="ident" id="3483224"><a href="/gostd/go/doc/comment.go.html#3481965">line</a></span><span class="op" id="3483228">,</span>&nbsp;<span class="ident" id="3483230"><a href="/gostd/go/doc/comment.go.html#3482003">nice</a></span><span class="op" id="3483234">)</span><br>
<span class="lineno"></span><span class="op" id="3483236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="3483239">func</span>&nbsp;<span class="ident" id="3483244">indentLen</span><span class="op" id="3483253">(</span><span class="ident" id="3483254">s</span>&nbsp;<span class="builtintype" id="3483256">string</span><span class="op" id="3483262">)</span>&nbsp;<span class="builtintype" id="3483264">int</span>&nbsp;<span class="op" id="3483268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483271">i</span>&nbsp;<span class="op" id="3483273">:=</span>&nbsp;<span class="num" id="3483276">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483279">for</span>&nbsp;<span class="ident" id="3483283"><a href="/gostd/go/doc/comment.go.html#3483271">i</a></span>&nbsp;<span class="op" id="3483285">&lt;</span>&nbsp;<span class="builtinfunc" id="3483287">len</span><span class="op" id="3483290">(</span><span class="ident" id="3483291"><a href="/gostd/go/doc/comment.go.html#3483254">s</a></span><span class="op" id="3483292">)</span>&nbsp;<span class="op" id="3483294">&amp;&amp;</span>&nbsp;<span class="op" id="3483297">(</span><span class="ident" id="3483298"><a href="/gostd/go/doc/comment.go.html#3483254">s</a></span><span class="op" id="3483299">[</span><span class="ident" id="3483300"><a href="/gostd/go/doc/comment.go.html#3483271">i</a></span><span class="op" id="3483301">]</span>&nbsp;<span class="op" id="3483303">==</span>&nbsp;<span class="string" id="3483306">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3483310">||</span>&nbsp;<span class="ident" id="3483313"><a href="/gostd/go/doc/comment.go.html#3483254">s</a></span><span class="op" id="3483314">[</span><span class="ident" id="3483315"><a href="/gostd/go/doc/comment.go.html#3483271">i</a></span><span class="op" id="3483316">]</span>&nbsp;<span class="op" id="3483318">==</span>&nbsp;<span class="string" id="3483321">&#39;\t&#39;</span><span class="op" id="3483325">)</span>&nbsp;<span class="op" id="3483327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483331"><a href="/gostd/go/doc/comment.go.html#3483271">i</a></span><span class="op" id="3483332">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483336">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483339">return</span>&nbsp;<span class="ident" id="3483346"><a href="/gostd/go/doc/comment.go.html#3483271">i</a></span><br>
<span class="lineno"></span><span class="op" id="3483348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3483351">func</span>&nbsp;<span class="ident" id="3483356">isBlank</span><span class="op" id="3483363">(</span><span class="ident" id="3483364">s</span>&nbsp;<span class="builtintype" id="3483366">string</span><span class="op" id="3483372">)</span>&nbsp;<span class="builtintype" id="3483374">bool</span>&nbsp;<span class="op" id="3483379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483382">return</span>&nbsp;<span class="builtinfunc" id="3483389">len</span><span class="op" id="3483392">(</span><span class="ident" id="3483393"><a href="/gostd/go/doc/comment.go.html#3483364">s</a></span><span class="op" id="3483394">)</span>&nbsp;<span class="op" id="3483396">==</span>&nbsp;<span class="num" id="3483399">0</span>&nbsp;<span class="op" id="3483401">||</span>&nbsp;<span class="op" id="3483404">(</span><span class="builtinfunc" id="3483405">len</span><span class="op" id="3483408">(</span><span class="ident" id="3483409"><a href="/gostd/go/doc/comment.go.html#3483364">s</a></span><span class="op" id="3483410">)</span>&nbsp;<span class="op" id="3483412">==</span>&nbsp;<span class="num" id="3483415">1</span>&nbsp;<span class="op" id="3483417">&amp;&amp;</span>&nbsp;<span class="ident" id="3483420"><a href="/gostd/go/doc/comment.go.html#3483364">s</a></span><span class="op" id="3483421">[</span><span class="num" id="3483422">0</span><span class="op" id="3483423">]</span>&nbsp;<span class="op" id="3483425">==</span>&nbsp;<span class="string" id="3483428">&#39;\n&#39;</span><span class="op" id="3483432">)</span><br>
<span class="lineno">175</span><span class="op" id="3483434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3483437">func</span>&nbsp;<span class="ident" id="3483442">commonPrefix</span><span class="op" id="3483454">(</span><span class="ident" id="3483455">a</span><span class="op" id="3483456">,</span>&nbsp;<span class="ident" id="3483458">b</span>&nbsp;<span class="builtintype" id="3483460">string</span><span class="op" id="3483466">)</span>&nbsp;<span class="builtintype" id="3483468">string</span>&nbsp;<span class="op" id="3483475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483478">i</span>&nbsp;<span class="op" id="3483480">:=</span>&nbsp;<span class="num" id="3483483">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483486">for</span>&nbsp;<span class="ident" id="3483490"><a href="/gostd/go/doc/comment.go.html#3483478">i</a></span>&nbsp;<span class="op" id="3483492">&lt;</span>&nbsp;<span class="builtinfunc" id="3483494">len</span><span class="op" id="3483497">(</span><span class="ident" id="3483498"><a href="/gostd/go/doc/comment.go.html#3483455">a</a></span><span class="op" id="3483499">)</span>&nbsp;<span class="op" id="3483501">&amp;&amp;</span>&nbsp;<span class="ident" id="3483504"><a href="/gostd/go/doc/comment.go.html#3483478">i</a></span>&nbsp;<span class="op" id="3483506">&lt;</span>&nbsp;<span class="builtinfunc" id="3483508">len</span><span class="op" id="3483511">(</span><span class="ident" id="3483512"><a href="/gostd/go/doc/comment.go.html#3483458">b</a></span><span class="op" id="3483513">)</span>&nbsp;<span class="op" id="3483515">&amp;&amp;</span>&nbsp;<span class="ident" id="3483518"><a href="/gostd/go/doc/comment.go.html#3483455">a</a></span><span class="op" id="3483519">[</span><span class="ident" id="3483520"><a href="/gostd/go/doc/comment.go.html#3483478">i</a></span><span class="op" id="3483521">]</span>&nbsp;<span class="op" id="3483523">==</span>&nbsp;<span class="ident" id="3483526"><a href="/gostd/go/doc/comment.go.html#3483458">b</a></span><span class="op" id="3483527">[</span><span class="ident" id="3483528"><a href="/gostd/go/doc/comment.go.html#3483478">i</a></span><span class="op" id="3483529">]</span>&nbsp;<span class="op" id="3483531">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483535"><a href="/gostd/go/doc/comment.go.html#3483478">i</a></span><span class="op" id="3483536">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483543">return</span>&nbsp;<span class="ident" id="3483550"><a href="/gostd/go/doc/comment.go.html#3483455">a</a></span><span class="op" id="3483551">[</span><span class="num" id="3483552">0</span><span class="op" id="3483553">:</span><span class="ident" id="3483554"><a href="/gostd/go/doc/comment.go.html#3483478">i</a></span><span class="op" id="3483555">]</span><br>
<span class="lineno"></span><span class="op" id="3483557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="3483560">func</span>&nbsp;<span class="ident" id="3483565">unindent</span><span class="op" id="3483573">(</span><span class="ident" id="3483574">block</span>&nbsp;<span class="op" id="3483580">[</span><span class="op" id="3483581">]</span><span class="builtintype" id="3483582">string</span><span class="op" id="3483588">)</span>&nbsp;<span class="op" id="3483590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483593">if</span>&nbsp;<span class="builtinfunc" id="3483596">len</span><span class="op" id="3483599">(</span><span class="ident" id="3483600"><a href="/gostd/go/doc/comment.go.html#3483574">block</a></span><span class="op" id="3483605">)</span>&nbsp;<span class="op" id="3483607">==</span>&nbsp;<span class="num" id="3483610">0</span>&nbsp;<span class="op" id="3483612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483616">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3483628">//&nbsp;compute&nbsp;maximum&nbsp;common&nbsp;white&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483668">prefix</span>&nbsp;<span class="op" id="3483675">:=</span>&nbsp;<span class="ident" id="3483678"><a href="/gostd/go/doc/comment.go.html#3483574">block</a></span><span class="op" id="3483683">[</span><span class="num" id="3483684">0</span><span class="op" id="3483685">]</span><span class="op" id="3483686">[</span><span class="num" id="3483687">0</span><span class="op" id="3483688">:</span><span class="ident" id="3483689"><a href="/gostd/go/doc/comment.go.html#3483244">indentLen</a></span><span class="op" id="3483698">(</span><span class="ident" id="3483699"><a href="/gostd/go/doc/comment.go.html#3483574">block</a></span><span class="op" id="3483704">[</span><span class="num" id="3483705">0</span><span class="op" id="3483706">]</span><span class="op" id="3483707">)</span><span class="op" id="3483708">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483711">for</span>&nbsp;<span class="ident" id="3483715">_</span><span class="op" id="3483716">,</span>&nbsp;<span class="ident" id="3483718">line</span>&nbsp;<span class="op" id="3483723">:=</span>&nbsp;<span class="keyword" id="3483726">range</span>&nbsp;<span class="ident" id="3483732"><a href="/gostd/go/doc/comment.go.html#3483574">block</a></span>&nbsp;<span class="op" id="3483738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483742">if</span>&nbsp;<span class="op" id="3483745">!</span><span class="ident" id="3483746"><a href="/gostd/go/doc/comment.go.html#3483356">isBlank</a></span><span class="op" id="3483753">(</span><span class="ident" id="3483754"><a href="/gostd/go/doc/comment.go.html#3483718">line</a></span><span class="op" id="3483758">)</span>&nbsp;<span class="op" id="3483760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483765"><a href="/gostd/go/doc/comment.go.html#3483668">prefix</a></span>&nbsp;<span class="op" id="3483772">=</span>&nbsp;<span class="ident" id="3483774"><a href="/gostd/go/doc/comment.go.html#3483442">commonPrefix</a></span><span class="op" id="3483786">(</span><span class="ident" id="3483787"><a href="/gostd/go/doc/comment.go.html#3483668">prefix</a></span><span class="op" id="3483793">,</span>&nbsp;<span class="ident" id="3483795"><a href="/gostd/go/doc/comment.go.html#3483718">line</a></span><span class="op" id="3483799">[</span><span class="num" id="3483800">0</span><span class="op" id="3483801">:</span><span class="ident" id="3483802"><a href="/gostd/go/doc/comment.go.html#3483244">indentLen</a></span><span class="op" id="3483811">(</span><span class="ident" id="3483812"><a href="/gostd/go/doc/comment.go.html#3483718">line</a></span><span class="op" id="3483816">)</span><span class="op" id="3483817">]</span><span class="op" id="3483818">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483828">n</span>&nbsp;<span class="op" id="3483830">:=</span>&nbsp;<span class="builtinfunc" id="3483833">len</span><span class="op" id="3483836">(</span><span class="ident" id="3483837"><a href="/gostd/go/doc/comment.go.html#3483668">prefix</a></span><span class="op" id="3483843">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3483847">//&nbsp;remove</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483858">for</span>&nbsp;<span class="ident" id="3483862">i</span><span class="op" id="3483863">,</span>&nbsp;<span class="ident" id="3483865">line</span>&nbsp;<span class="op" id="3483870">:=</span>&nbsp;<span class="keyword" id="3483873">range</span>&nbsp;<span class="ident" id="3483879"><a href="/gostd/go/doc/comment.go.html#3483574">block</a></span>&nbsp;<span class="op" id="3483885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3483889">if</span>&nbsp;<span class="op" id="3483892">!</span><span class="ident" id="3483893"><a href="/gostd/go/doc/comment.go.html#3483356">isBlank</a></span><span class="op" id="3483900">(</span><span class="ident" id="3483901"><a href="/gostd/go/doc/comment.go.html#3483865">line</a></span><span class="op" id="3483905">)</span>&nbsp;<span class="op" id="3483907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3483912"><a href="/gostd/go/doc/comment.go.html#3483574">block</a></span><span class="op" id="3483917">[</span><span class="ident" id="3483918"><a href="/gostd/go/doc/comment.go.html#3483862">i</a></span><span class="op" id="3483919">]</span>&nbsp;<span class="op" id="3483921">=</span>&nbsp;<span class="ident" id="3483923"><a href="/gostd/go/doc/comment.go.html#3483865">line</a></span><span class="op" id="3483927">[</span><span class="ident" id="3483928"><a href="/gostd/go/doc/comment.go.html#3483828">n</a></span><span class="op" id="3483929">:</span><span class="op" id="3483930">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3483937">}</span><br>
<span class="lineno">205</span><span class="op" id="3483939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3483942">//&nbsp;heading&nbsp;returns&nbsp;the&nbsp;trimmed&nbsp;line&nbsp;if&nbsp;it&nbsp;passes&nbsp;as&nbsp;a&nbsp;section&nbsp;heading;</span><br>
<span class="lineno"></span><span class="comment" id="3484013">//&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3484055">func</span>&nbsp;<span class="ident" id="3484060">heading</span><span class="op" id="3484067">(</span><span class="ident" id="3484068">line</span>&nbsp;<span class="builtintype" id="3484073">string</span><span class="op" id="3484079">)</span>&nbsp;<span class="builtintype" id="3484081">string</span>&nbsp;<span class="op" id="3484088">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484091"><a href="/gostd/go/doc/comment.go.html#3484068">line</a></span>&nbsp;<span class="op" id="3484096">=</span>&nbsp;<span class="ident" id="3484098"><a href="/gostd/go/doc/comment.go.html#3479376">strings</a></span><span class="op" id="3484105">.</span><span class="ident" id="3484106"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="3484115">(</span><span class="ident" id="3484116"><a href="/gostd/go/doc/comment.go.html#3484068">line</a></span><span class="op" id="3484120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484123">if</span>&nbsp;<span class="builtinfunc" id="3484126">len</span><span class="op" id="3484129">(</span><span class="ident" id="3484130"><a href="/gostd/go/doc/comment.go.html#3484068">line</a></span><span class="op" id="3484134">)</span>&nbsp;<span class="op" id="3484136">==</span>&nbsp;<span class="num" id="3484139">0</span>&nbsp;<span class="op" id="3484141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484145">return</span>&nbsp;<span class="string" id="3484152">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3484156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3484160">//&nbsp;a&nbsp;heading&nbsp;must&nbsp;start&nbsp;with&nbsp;an&nbsp;uppercase&nbsp;letter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484210">r</span><span class="op" id="3484211">,</span>&nbsp;<span class="ident" id="3484213">_</span>&nbsp;<span class="op" id="3484215">:=</span>&nbsp;<span class="ident" id="3484218"><a href="/gostd/go/doc/comment.go.html#3479433">utf8</a></span><span class="op" id="3484222">.</span><span class="ident" id="3484223"><a href="/gostd/unicode/utf8/utf8.go.html#1810428">DecodeRuneInString</a></span><span class="op" id="3484241">(</span><span class="ident" id="3484242"><a href="/gostd/go/doc/comment.go.html#3484068">line</a></span><span class="op" id="3484246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484249">if</span>&nbsp;<span class="op" id="3484252">!</span><span class="ident" id="3484253"><a href="/gostd/go/doc/comment.go.html#3479422">unicode</a></span><span class="op" id="3484260">.</span><span class="ident" id="3484261"><a href="/gostd/unicode/graphic.go.html#1819623">IsLetter</a></span><span class="op" id="3484269">(</span><span class="ident" id="3484270"><a href="/gostd/go/doc/comment.go.html#3484210">r</a></span><span class="op" id="3484271">)</span>&nbsp;<span class="op" id="3484273">||</span>&nbsp;<span class="op" id="3484276">!</span><span class="ident" id="3484277"><a href="/gostd/go/doc/comment.go.html#3479422">unicode</a></span><span class="op" id="3484284">.</span><span class="ident" id="3484285"><a href="/gostd/unicode/letter.go.html#1826318">IsUpper</a></span><span class="op" id="3484292">(</span><span class="ident" id="3484293"><a href="/gostd/go/doc/comment.go.html#3484210">r</a></span><span class="op" id="3484294">)</span>&nbsp;<span class="op" id="3484296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484300">return</span>&nbsp;<span class="string" id="3484307">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3484311">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3484315">//&nbsp;it&nbsp;must&nbsp;end&nbsp;in&nbsp;a&nbsp;letter&nbsp;or&nbsp;digit:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484353"><a href="/gostd/go/doc/comment.go.html#3484210">r</a></span><span class="op" id="3484354">,</span>&nbsp;<span class="ident" id="3484356">_</span>&nbsp;<span class="op" id="3484358">=</span>&nbsp;<span class="ident" id="3484360"><a href="/gostd/go/doc/comment.go.html#3479433">utf8</a></span><span class="op" id="3484364">.</span><span class="ident" id="3484365"><a href="/gostd/unicode/utf8/utf8.go.html#1811991">DecodeLastRuneInString</a></span><span class="op" id="3484387">(</span><span class="ident" id="3484388"><a href="/gostd/go/doc/comment.go.html#3484068">line</a></span><span class="op" id="3484392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484395">if</span>&nbsp;<span class="op" id="3484398">!</span><span class="ident" id="3484399"><a href="/gostd/go/doc/comment.go.html#3479422">unicode</a></span><span class="op" id="3484406">.</span><span class="ident" id="3484407"><a href="/gostd/unicode/graphic.go.html#1819623">IsLetter</a></span><span class="op" id="3484415">(</span><span class="ident" id="3484416"><a href="/gostd/go/doc/comment.go.html#3484210">r</a></span><span class="op" id="3484417">)</span>&nbsp;<span class="op" id="3484419">&amp;&amp;</span>&nbsp;<span class="op" id="3484422">!</span><span class="ident" id="3484423"><a href="/gostd/go/doc/comment.go.html#3479422">unicode</a></span><span class="op" id="3484430">.</span><span class="ident" id="3484431"><a href="/gostd/unicode/digit.go.html#1816545">IsDigit</a></span><span class="op" id="3484438">(</span><span class="ident" id="3484439"><a href="/gostd/go/doc/comment.go.html#3484210">r</a></span><span class="op" id="3484440">)</span>&nbsp;<span class="op" id="3484442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484446">return</span>&nbsp;<span class="string" id="3484453">&#34;&#34;</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3484457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3484461">//&nbsp;exclude&nbsp;lines&nbsp;with&nbsp;illegal&nbsp;characters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484503">if</span>&nbsp;<span class="ident" id="3484506"><a href="/gostd/go/doc/comment.go.html#3479376">strings</a></span><span class="op" id="3484513">.</span><span class="ident" id="3484514"><a href="/gostd/strings/strings.go.html#2970774">IndexAny</a></span><span class="op" id="3484522">(</span><span class="ident" id="3484523"><a href="/gostd/go/doc/comment.go.html#3484068">line</a></span><span class="op" id="3484527">,</span>&nbsp;<span class="string" id="3484529">&#34;,.;:!?+*/=()[]{}_^&amp;~%#@&lt;\&#34;&gt;\\&#34;</span><span class="op" id="3484564">)</span>&nbsp;<span class="op" id="3484566">&gt;=</span>&nbsp;<span class="num" id="3484569">0</span>&nbsp;<span class="op" id="3484571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484575">return</span>&nbsp;<span class="string" id="3484582">&#34;&#34;</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3484586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3484590">//&nbsp;allow&nbsp;&#34;&#39;&#34;&nbsp;for&nbsp;possessive&nbsp;&#34;&#39;s&#34;&nbsp;only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484629">for</span>&nbsp;<span class="ident" id="3484633">b</span>&nbsp;<span class="op" id="3484635">:=</span>&nbsp;<span class="ident" id="3484638"><a href="/gostd/go/doc/comment.go.html#3484068">line</a></span><span class="op" id="3484642">;</span>&nbsp;<span class="op" id="3484644">;</span>&nbsp;<span class="op" id="3484646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484650">i</span>&nbsp;<span class="op" id="3484652">:=</span>&nbsp;<span class="ident" id="3484655"><a href="/gostd/go/doc/comment.go.html#3479376">strings</a></span><span class="op" id="3484662">.</span><span class="ident" id="3484663"><a href="/gostd/strings/strings.go.html#2970424">IndexRune</a></span><span class="op" id="3484672">(</span><span class="ident" id="3484673"><a href="/gostd/go/doc/comment.go.html#3484633">b</a></span><span class="op" id="3484674">,</span>&nbsp;<span class="string" id="3484676">&#39;\&#39;&#39;</span><span class="op" id="3484680">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484684">if</span>&nbsp;<span class="ident" id="3484687"><a href="/gostd/go/doc/comment.go.html#3484650">i</a></span>&nbsp;<span class="op" id="3484689">&lt;</span>&nbsp;<span class="num" id="3484691">0</span>&nbsp;<span class="op" id="3484693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484698">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3484706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484710">if</span>&nbsp;<span class="ident" id="3484713"><a href="/gostd/go/doc/comment.go.html#3484650">i</a></span><span class="op" id="3484714">+</span><span class="num" id="3484715">1</span>&nbsp;<span class="op" id="3484717">&gt;=</span>&nbsp;<span class="builtinfunc" id="3484720">len</span><span class="op" id="3484723">(</span><span class="ident" id="3484724"><a href="/gostd/go/doc/comment.go.html#3484633">b</a></span><span class="op" id="3484725">)</span>&nbsp;<span class="op" id="3484727">||</span>&nbsp;<span class="ident" id="3484730"><a href="/gostd/go/doc/comment.go.html#3484633">b</a></span><span class="op" id="3484731">[</span><span class="ident" id="3484732"><a href="/gostd/go/doc/comment.go.html#3484650">i</a></span><span class="op" id="3484733">+</span><span class="num" id="3484734">1</span><span class="op" id="3484735">]</span>&nbsp;<span class="op" id="3484737">!=</span>&nbsp;<span class="string" id="3484740">&#39;s&#39;</span>&nbsp;<span class="op" id="3484744">||</span>&nbsp;<span class="op" id="3484747">(</span><span class="ident" id="3484748"><a href="/gostd/go/doc/comment.go.html#3484650">i</a></span><span class="op" id="3484749">+</span><span class="num" id="3484750">2</span>&nbsp;<span class="op" id="3484752">&lt;</span>&nbsp;<span class="builtinfunc" id="3484754">len</span><span class="op" id="3484757">(</span><span class="ident" id="3484758"><a href="/gostd/go/doc/comment.go.html#3484633">b</a></span><span class="op" id="3484759">)</span>&nbsp;<span class="op" id="3484761">&amp;&amp;</span>&nbsp;<span class="ident" id="3484764"><a href="/gostd/go/doc/comment.go.html#3484633">b</a></span><span class="op" id="3484765">[</span><span class="ident" id="3484766"><a href="/gostd/go/doc/comment.go.html#3484650">i</a></span><span class="op" id="3484767">+</span><span class="num" id="3484768">2</span><span class="op" id="3484769">]</span>&nbsp;<span class="op" id="3484771">!=</span>&nbsp;<span class="string" id="3484774">&#39;&nbsp;&#39;</span><span class="op" id="3484777">)</span>&nbsp;<span class="op" id="3484779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484784">return</span>&nbsp;<span class="string" id="3484791">&#34;&#34;</span>&nbsp;<span class="comment" id="3484794">//&nbsp;not&nbsp;followed&nbsp;by&nbsp;&#34;s&nbsp;&#34;</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3484820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484824"><a href="/gostd/go/doc/comment.go.html#3484633">b</a></span>&nbsp;<span class="op" id="3484826">=</span>&nbsp;<span class="ident" id="3484828"><a href="/gostd/go/doc/comment.go.html#3484633">b</a></span><span class="op" id="3484829">[</span><span class="ident" id="3484830"><a href="/gostd/go/doc/comment.go.html#3484650">i</a></span><span class="op" id="3484831">+</span><span class="num" id="3484832">2</span><span class="op" id="3484833">:</span><span class="op" id="3484834">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3484837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3484841">return</span>&nbsp;<span class="ident" id="3484848"><a href="/gostd/go/doc/comment.go.html#3484068">line</a></span><br>
<span class="lineno">245</span><span class="op" id="3484853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3484856">type</span>&nbsp;<span class="ident" id="3484861">op</span>&nbsp;<span class="builtintype" id="3484864">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3484869">const</span>&nbsp;<span class="op" id="3484875">(</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484878">opPara</span>&nbsp;<span class="ident" id="3484885"><a href="/gostd/go/doc/comment.go.html#3484861">op</a></span>&nbsp;<span class="op" id="3484888">=</span>&nbsp;<span class="ident" id="3484890">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484896">opHead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484904">opPre</span><br>
<span class="lineno"></span><span class="op" id="3484910">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="3484913">type</span>&nbsp;<span class="ident" id="3484918">block</span>&nbsp;<span class="keyword" id="3484924">struct</span>&nbsp;<span class="op" id="3484931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484934">op</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484940"><a href="/gostd/go/doc/comment.go.html#3484861">op</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3484944">lines</span>&nbsp;<span class="op" id="3484950">[</span><span class="op" id="3484951">]</span><span class="builtintype" id="3484952">string</span><br>
<span class="lineno"></span><span class="op" id="3484959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="3484962">var</span>&nbsp;<span class="ident" id="3484966">nonAlphaNumRx</span>&nbsp;<span class="op" id="3484980">=</span>&nbsp;<span class="ident" id="3484982"><a href="/gostd/go/doc/comment.go.html#3479366">regexp</a></span><span class="op" id="3484988">.</span><span class="ident" id="3484989"><a href="/gostd/regexp/regexp.go.html#3571892">MustCompile</a></span><span class="op" id="3485000">(</span><span class="string" id="3485001">`[^a-zA-Z0-9]`</span><span class="op" id="3485015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3485018">func</span>&nbsp;<span class="ident" id="3485023">anchorID</span><span class="op" id="3485031">(</span><span class="ident" id="3485032">line</span>&nbsp;<span class="builtintype" id="3485037">string</span><span class="op" id="3485043">)</span>&nbsp;<span class="builtintype" id="3485045">string</span>&nbsp;<span class="op" id="3485052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3485055">//&nbsp;Add&nbsp;a&nbsp;&#34;hdr-&#34;&nbsp;prefix&nbsp;to&nbsp;avoid&nbsp;conflicting&nbsp;with&nbsp;IDs&nbsp;used&nbsp;for&nbsp;package&nbsp;symbols.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3485135">return</span>&nbsp;<span class="string" id="3485142">&#34;hdr-&#34;</span>&nbsp;<span class="op" id="3485149">+</span>&nbsp;<span class="ident" id="3485151"><a href="/gostd/go/doc/comment.go.html#3484966">nonAlphaNumRx</a></span><span class="op" id="3485164">.</span><span class="ident" id="3485165"><a href="/gostd/regexp/regexp.go.html#3577810">ReplaceAllString</a></span><span class="op" id="3485181">(</span><span class="ident" id="3485182"><a href="/gostd/go/doc/comment.go.html#3485032">line</a></span><span class="op" id="3485186">,</span>&nbsp;<span class="string" id="3485188">&#34;_&#34;</span><span class="op" id="3485191">)</span><br>
<span class="lineno">265</span><span class="op" id="3485193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3485196">//&nbsp;ToHTML&nbsp;converts&nbsp;comment&nbsp;text&nbsp;to&nbsp;formatted&nbsp;HTML.</span><br>
<span class="lineno"></span><span class="comment" id="3485247">//&nbsp;The&nbsp;comment&nbsp;was&nbsp;prepared&nbsp;by&nbsp;DocReader,</span><br>
<span class="lineno"></span><span class="comment" id="3485289">//&nbsp;so&nbsp;it&nbsp;is&nbsp;known&nbsp;not&nbsp;to&nbsp;have&nbsp;leading,&nbsp;trailing&nbsp;blank&nbsp;lines</span><br>
<span class="lineno">270</span><span class="comment" id="3485349">//&nbsp;nor&nbsp;to&nbsp;have&nbsp;trailing&nbsp;spaces&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;lines.</span><br>
<span class="lineno"></span><span class="comment" id="3485401">//&nbsp;The&nbsp;comment&nbsp;markers&nbsp;have&nbsp;already&nbsp;been&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3485451">//</span><br>
<span class="lineno"></span><span class="comment" id="3485454">//&nbsp;Each&nbsp;span&nbsp;of&nbsp;unindented&nbsp;non-blank&nbsp;lines&nbsp;is&nbsp;converted&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="3485515">//&nbsp;a&nbsp;single&nbsp;paragraph.&nbsp;There&nbsp;is&nbsp;one&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule:&nbsp;a&nbsp;span&nbsp;that</span><br>
<span class="lineno">275</span><span class="comment" id="3485586">//&nbsp;consists&nbsp;of&nbsp;a&nbsp;single&nbsp;line,&nbsp;is&nbsp;followed&nbsp;by&nbsp;another&nbsp;paragraph&nbsp;span,</span><br>
<span class="lineno"></span><span class="comment" id="3485655">//&nbsp;begins&nbsp;with&nbsp;a&nbsp;capital&nbsp;letter,&nbsp;and&nbsp;contains&nbsp;no&nbsp;punctuation</span><br>
<span class="lineno"></span><span class="comment" id="3485716">//&nbsp;is&nbsp;formatted&nbsp;as&nbsp;a&nbsp;heading.</span><br>
<span class="lineno"></span><span class="comment" id="3485746">//</span><br>
<span class="lineno"></span><span class="comment" id="3485749">//&nbsp;A&nbsp;span&nbsp;of&nbsp;indented&nbsp;lines&nbsp;is&nbsp;converted&nbsp;into&nbsp;a&nbsp;&lt;pre&gt;&nbsp;block,</span><br>
<span class="lineno">280</span><span class="comment" id="3485810">//&nbsp;with&nbsp;the&nbsp;common&nbsp;indent&nbsp;prefix&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3485852">//</span><br>
<span class="lineno"></span><span class="comment" id="3485855">//&nbsp;URLs&nbsp;in&nbsp;the&nbsp;comment&nbsp;text&nbsp;are&nbsp;converted&nbsp;into&nbsp;links;&nbsp;if&nbsp;the&nbsp;URL&nbsp;also&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="3485933">//&nbsp;in&nbsp;the&nbsp;words&nbsp;map,&nbsp;the&nbsp;link&nbsp;is&nbsp;taken&nbsp;from&nbsp;the&nbsp;map&nbsp;(if&nbsp;the&nbsp;corresponding&nbsp;map</span><br>
<span class="lineno"></span><span class="comment" id="3486011">//&nbsp;value&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;the&nbsp;URL&nbsp;is&nbsp;not&nbsp;converted&nbsp;into&nbsp;a&nbsp;link).</span><br>
<span class="lineno">285</span><span class="comment" id="3486080">//</span><br>
<span class="lineno"></span><span class="comment" id="3486083">//&nbsp;Go&nbsp;identifiers&nbsp;that&nbsp;appear&nbsp;in&nbsp;the&nbsp;words&nbsp;map&nbsp;are&nbsp;italicized;&nbsp;if&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="3486167">//&nbsp;map&nbsp;value&nbsp;is&nbsp;not&nbsp;the&nbsp;empty&nbsp;string,&nbsp;it&nbsp;is&nbsp;considered&nbsp;a&nbsp;URL&nbsp;and&nbsp;the&nbsp;word&nbsp;is&nbsp;converted</span><br>
<span class="lineno"></span><span class="comment" id="3486254">//&nbsp;into&nbsp;a&nbsp;link.</span><br>
<span class="lineno"></span><span class="keyword" id="3486270">func</span>&nbsp;<span class="ident" id="3486275">ToHTML</span><span class="op" id="3486281">(</span><span class="ident" id="3486282">w</span>&nbsp;<span class="ident" id="3486284"><a href="/gostd/go/doc/comment.go.html#3479360">io</a></span><span class="op" id="3486286">.</span><span class="ident" id="3486287"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="3486293">,</span>&nbsp;<span class="ident" id="3486295">text</span>&nbsp;<span class="builtintype" id="3486300">string</span><span class="op" id="3486306">,</span>&nbsp;<span class="ident" id="3486308">words</span>&nbsp;<span class="keyword" id="3486314">map</span><span class="op" id="3486317">[</span><span class="builtintype" id="3486318">string</span><span class="op" id="3486324">]</span><span class="builtintype" id="3486325">string</span><span class="op" id="3486331">)</span>&nbsp;<span class="op" id="3486333">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486336">for</span>&nbsp;<span class="ident" id="3486340">_</span><span class="op" id="3486341">,</span>&nbsp;<span class="ident" id="3486343">b</span>&nbsp;<span class="op" id="3486345">:=</span>&nbsp;<span class="keyword" id="3486348">range</span>&nbsp;<span class="ident" id="3486354"><a href="/gostd/go/doc/comment.go.html#3486943">blocks</a></span><span class="op" id="3486360">(</span><span class="ident" id="3486361"><a href="/gostd/go/doc/comment.go.html#3486295">text</a></span><span class="op" id="3486365">)</span>&nbsp;<span class="op" id="3486367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486371">switch</span>&nbsp;<span class="ident" id="3486378"><a href="/gostd/go/doc/comment.go.html#3486343">b</a></span><span class="op" id="3486379">.</span><span class="ident" id="3486380"><a href="/gostd/go/doc/comment.go.html#3484934">op</a></span>&nbsp;<span class="op" id="3486383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486387">case</span>&nbsp;<span class="ident" id="3486392"><a href="/gostd/go/doc/comment.go.html#3484878">opPara</a></span><span class="op" id="3486398">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486403"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486404">.</span><span class="ident" id="3486405"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486410">(</span><span class="ident" id="3486411"><a href="/gostd/go/doc/comment.go.html#3480741">html_p</a></span><span class="op" id="3486417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486422">for</span>&nbsp;<span class="ident" id="3486426">_</span><span class="op" id="3486427">,</span>&nbsp;<span class="ident" id="3486429">line</span>&nbsp;<span class="op" id="3486434">:=</span>&nbsp;<span class="keyword" id="3486437">range</span>&nbsp;<span class="ident" id="3486443"><a href="/gostd/go/doc/comment.go.html#3486343">b</a></span><span class="op" id="3486444">.</span><span class="ident" id="3486445"><a href="/gostd/go/doc/comment.go.html#3484944">lines</a></span>&nbsp;<span class="op" id="3486451">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486457"><a href="/gostd/go/doc/comment.go.html#3481942">emphasize</a></span><span class="op" id="3486466">(</span><span class="ident" id="3486467"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486468">,</span>&nbsp;<span class="ident" id="3486470"><a href="/gostd/go/doc/comment.go.html#3486429">line</a></span><span class="op" id="3486474">,</span>&nbsp;<span class="ident" id="3486476"><a href="/gostd/go/doc/comment.go.html#3486308">words</a></span><span class="op" id="3486481">,</span>&nbsp;<span class="builtintype" id="3486483">true</span><span class="op" id="3486487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3486492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486497"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486498">.</span><span class="ident" id="3486499"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486504">(</span><span class="ident" id="3486505"><a href="/gostd/go/doc/comment.go.html#3480772">html_endp</a></span><span class="op" id="3486514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486518">case</span>&nbsp;<span class="ident" id="3486523"><a href="/gostd/go/doc/comment.go.html#3484896">opHead</a></span><span class="op" id="3486529">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486534"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486535">.</span><span class="ident" id="3486536"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486541">(</span><span class="ident" id="3486542"><a href="/gostd/go/doc/comment.go.html#3480869">html_h</a></span><span class="op" id="3486548">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486553">id</span>&nbsp;<span class="op" id="3486556">:=</span>&nbsp;<span class="string" id="3486559">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486565">for</span>&nbsp;<span class="ident" id="3486569">_</span><span class="op" id="3486570">,</span>&nbsp;<span class="ident" id="3486572">line</span>&nbsp;<span class="op" id="3486577">:=</span>&nbsp;<span class="keyword" id="3486580">range</span>&nbsp;<span class="ident" id="3486586"><a href="/gostd/go/doc/comment.go.html#3486343">b</a></span><span class="op" id="3486587">.</span><span class="ident" id="3486588"><a href="/gostd/go/doc/comment.go.html#3484944">lines</a></span>&nbsp;<span class="op" id="3486594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486600">if</span>&nbsp;<span class="ident" id="3486603"><a href="/gostd/go/doc/comment.go.html#3486553">id</a></span>&nbsp;<span class="op" id="3486606">==</span>&nbsp;<span class="string" id="3486609">&#34;&#34;</span>&nbsp;<span class="op" id="3486612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486619"><a href="/gostd/go/doc/comment.go.html#3486553">id</a></span>&nbsp;<span class="op" id="3486622">=</span>&nbsp;<span class="ident" id="3486624"><a href="/gostd/go/doc/comment.go.html#3485023">anchorID</a></span><span class="op" id="3486632">(</span><span class="ident" id="3486633"><a href="/gostd/go/doc/comment.go.html#3486572">line</a></span><span class="op" id="3486637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486644"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486645">.</span><span class="ident" id="3486646"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486651">(</span><span class="op" id="3486652">[</span><span class="op" id="3486653">]</span><span class="builtintype" id="3486654">byte</span><span class="op" id="3486658">(</span><span class="ident" id="3486659"><a href="/gostd/go/doc/comment.go.html#3486553">id</a></span><span class="op" id="3486661">)</span><span class="op" id="3486662">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486669"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486670">.</span><span class="ident" id="3486671"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486676">(</span><span class="ident" id="3486677"><a href="/gostd/go/doc/comment.go.html#3480903">html_hq</a></span><span class="op" id="3486684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3486690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486696"><a href="/gostd/go/doc/comment.go.html#3479618">commentEscape</a></span><span class="op" id="3486709">(</span><span class="ident" id="3486710"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486711">,</span>&nbsp;<span class="ident" id="3486713"><a href="/gostd/go/doc/comment.go.html#3486572">line</a></span><span class="op" id="3486717">,</span>&nbsp;<span class="builtintype" id="3486719">true</span><span class="op" id="3486723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3486728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486733">if</span>&nbsp;<span class="ident" id="3486736"><a href="/gostd/go/doc/comment.go.html#3486553">id</a></span>&nbsp;<span class="op" id="3486739">==</span>&nbsp;<span class="string" id="3486742">&#34;&#34;</span>&nbsp;<span class="op" id="3486745">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486751"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486752">.</span><span class="ident" id="3486753"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486758">(</span><span class="ident" id="3486759"><a href="/gostd/go/doc/comment.go.html#3480903">html_hq</a></span><span class="op" id="3486766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3486771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486776"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486777">.</span><span class="ident" id="3486778"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486783">(</span><span class="ident" id="3486784"><a href="/gostd/go/doc/comment.go.html#3480931">html_endh</a></span><span class="op" id="3486793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486797">case</span>&nbsp;<span class="ident" id="3486802"><a href="/gostd/go/doc/comment.go.html#3484904">opPre</a></span><span class="op" id="3486807">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486812"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486813">.</span><span class="ident" id="3486814"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486819">(</span><span class="ident" id="3486820"><a href="/gostd/go/doc/comment.go.html#3480804">html_pre</a></span><span class="op" id="3486828">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486833">for</span>&nbsp;<span class="ident" id="3486837">_</span><span class="op" id="3486838">,</span>&nbsp;<span class="ident" id="3486840">line</span>&nbsp;<span class="op" id="3486845">:=</span>&nbsp;<span class="keyword" id="3486848">range</span>&nbsp;<span class="ident" id="3486854"><a href="/gostd/go/doc/comment.go.html#3486343">b</a></span><span class="op" id="3486855">.</span><span class="ident" id="3486856"><a href="/gostd/go/doc/comment.go.html#3484944">lines</a></span>&nbsp;<span class="op" id="3486862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486868"><a href="/gostd/go/doc/comment.go.html#3481942">emphasize</a></span><span class="op" id="3486877">(</span><span class="ident" id="3486878"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486879">,</span>&nbsp;<span class="ident" id="3486881"><a href="/gostd/go/doc/comment.go.html#3486840">line</a></span><span class="op" id="3486885">,</span>&nbsp;<span class="builtintype" id="3486887">nil</span><span class="op" id="3486890">,</span>&nbsp;<span class="builtintype" id="3486892">false</span><span class="op" id="3486897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3486902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486907"><a href="/gostd/go/doc/comment.go.html#3486282">w</a></span><span class="op" id="3486908">.</span><span class="ident" id="3486909"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3486914">(</span><span class="ident" id="3486915"><a href="/gostd/go/doc/comment.go.html#3480835">html_endpre</a></span><span class="op" id="3486926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3486930">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3486933">}</span><br>
<span class="lineno"></span><span class="op" id="3486935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3486938">func</span>&nbsp;<span class="ident" id="3486943">blocks</span><span class="op" id="3486949">(</span><span class="ident" id="3486950">text</span>&nbsp;<span class="builtintype" id="3486955">string</span><span class="op" id="3486961">)</span>&nbsp;<span class="op" id="3486963">[</span><span class="op" id="3486964">]</span><span class="ident" id="3486965"><a href="/gostd/go/doc/comment.go.html#3484918">block</a></span>&nbsp;<span class="op" id="3486971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3486974">var</span>&nbsp;<span class="op" id="3486978">(</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486982">out</span>&nbsp;&nbsp;<span class="op" id="3486987">[</span><span class="op" id="3486988">]</span><span class="ident" id="3486989"><a href="/gostd/go/doc/comment.go.html#3484918">block</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3486997">para</span>&nbsp;<span class="op" id="3487002">[</span><span class="op" id="3487003">]</span><span class="builtintype" id="3487004">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487014">lastWasBlank</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3487029">=</span>&nbsp;<span class="builtintype" id="3487031">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487039">lastWasHeading</span>&nbsp;<span class="op" id="3487054">=</span>&nbsp;<span class="builtintype" id="3487056">false</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3487063">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3487067">close</span>&nbsp;<span class="op" id="3487073">:=</span>&nbsp;<span class="keyword" id="3487076">func</span><span class="op" id="3487080">(</span><span class="op" id="3487081">)</span>&nbsp;<span class="op" id="3487083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487087">if</span>&nbsp;<span class="ident" id="3487090"><a href="/gostd/go/doc/comment.go.html#3486997">para</a></span>&nbsp;<span class="op" id="3487095">!=</span>&nbsp;<span class="builtintype" id="3487098">nil</span>&nbsp;<span class="op" id="3487102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487107"><a href="/gostd/go/doc/comment.go.html#3486982">out</a></span>&nbsp;<span class="op" id="3487111">=</span>&nbsp;<span class="builtinfunc" id="3487113">append</span><span class="op" id="3487119">(</span><span class="ident" id="3487120"><a href="/gostd/go/doc/comment.go.html#3486982">out</a></span><span class="op" id="3487123">,</span>&nbsp;<span class="ident" id="3487125"><a href="/gostd/go/doc/comment.go.html#3484918">block</a></span><span class="op" id="3487130">{</span><span class="ident" id="3487131"><a href="/gostd/go/doc/comment.go.html#3484878">opPara</a></span><span class="op" id="3487137">,</span>&nbsp;<span class="ident" id="3487139"><a href="/gostd/go/doc/comment.go.html#3486997">para</a></span><span class="op" id="3487143">}</span><span class="op" id="3487144">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487149"><a href="/gostd/go/doc/comment.go.html#3486997">para</a></span>&nbsp;<span class="op" id="3487154">=</span>&nbsp;<span class="builtintype" id="3487156">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3487162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3487165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487169">lines</span>&nbsp;<span class="op" id="3487175">:=</span>&nbsp;<span class="ident" id="3487178"><a href="/gostd/go/doc/comment.go.html#3479376">strings</a></span><span class="op" id="3487185">.</span><span class="ident" id="3487186"><a href="/gostd/strings/strings.go.html#2973441">SplitAfter</a></span><span class="op" id="3487196">(</span><span class="ident" id="3487197"><a href="/gostd/go/doc/comment.go.html#3486950">text</a></span><span class="op" id="3487201">,</span>&nbsp;<span class="string" id="3487203">&#34;\n&#34;</span><span class="op" id="3487207">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487210"><a href="/gostd/go/doc/comment.go.html#3483565">unindent</a></span><span class="op" id="3487218">(</span><span class="ident" id="3487219"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487227">for</span>&nbsp;<span class="ident" id="3487231">i</span>&nbsp;<span class="op" id="3487233">:=</span>&nbsp;<span class="num" id="3487236">0</span><span class="op" id="3487237">;</span>&nbsp;<span class="ident" id="3487239"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span>&nbsp;<span class="op" id="3487241">&lt;</span>&nbsp;<span class="builtinfunc" id="3487243">len</span><span class="op" id="3487246">(</span><span class="ident" id="3487247"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487252">)</span><span class="op" id="3487253">;</span>&nbsp;<span class="op" id="3487255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487259">line</span>&nbsp;<span class="op" id="3487264">:=</span>&nbsp;<span class="ident" id="3487267"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487272">[</span><span class="ident" id="3487273"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3487274">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487278">if</span>&nbsp;<span class="ident" id="3487281"><a href="/gostd/go/doc/comment.go.html#3483356">isBlank</a></span><span class="op" id="3487288">(</span><span class="ident" id="3487289"><a href="/gostd/go/doc/comment.go.html#3487259">line</a></span><span class="op" id="3487293">)</span>&nbsp;<span class="op" id="3487295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3487300">//&nbsp;close&nbsp;paragraph</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3487322"><a href="/gostd/go/doc/comment.go.html#3487067">close</a></span><span class="op" id="3487327">(</span><span class="op" id="3487328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487333"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3487334">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487340"><a href="/gostd/go/doc/comment.go.html#3487014">lastWasBlank</a></span>&nbsp;<span class="op" id="3487353">=</span>&nbsp;<span class="builtintype" id="3487355">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487363">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3487374">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487378">if</span>&nbsp;<span class="ident" id="3487381"><a href="/gostd/go/doc/comment.go.html#3483244">indentLen</a></span><span class="op" id="3487390">(</span><span class="ident" id="3487391"><a href="/gostd/go/doc/comment.go.html#3487259">line</a></span><span class="op" id="3487395">)</span>&nbsp;<span class="op" id="3487397">&gt;</span>&nbsp;<span class="num" id="3487399">0</span>&nbsp;<span class="op" id="3487401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3487406">//&nbsp;close&nbsp;paragraph</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3487428"><a href="/gostd/go/doc/comment.go.html#3487067">close</a></span><span class="op" id="3487433">(</span><span class="op" id="3487434">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3487440">//&nbsp;count&nbsp;indented&nbsp;or&nbsp;blank&nbsp;lines</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487476">j</span>&nbsp;<span class="op" id="3487478">:=</span>&nbsp;<span class="ident" id="3487481"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span>&nbsp;<span class="op" id="3487483">+</span>&nbsp;<span class="num" id="3487485">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487490">for</span>&nbsp;<span class="ident" id="3487494"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span>&nbsp;<span class="op" id="3487496">&lt;</span>&nbsp;<span class="builtinfunc" id="3487498">len</span><span class="op" id="3487501">(</span><span class="ident" id="3487502"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487507">)</span>&nbsp;<span class="op" id="3487509">&amp;&amp;</span>&nbsp;<span class="op" id="3487512">(</span><span class="ident" id="3487513"><a href="/gostd/go/doc/comment.go.html#3483356">isBlank</a></span><span class="op" id="3487520">(</span><span class="ident" id="3487521"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487526">[</span><span class="ident" id="3487527"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span><span class="op" id="3487528">]</span><span class="op" id="3487529">)</span>&nbsp;<span class="op" id="3487531">||</span>&nbsp;<span class="ident" id="3487534"><a href="/gostd/go/doc/comment.go.html#3483244">indentLen</a></span><span class="op" id="3487543">(</span><span class="ident" id="3487544"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487549">[</span><span class="ident" id="3487550"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span><span class="op" id="3487551">]</span><span class="op" id="3487552">)</span>&nbsp;<span class="op" id="3487554">&gt;</span>&nbsp;<span class="num" id="3487556">0</span><span class="op" id="3487557">)</span>&nbsp;<span class="op" id="3487559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487565"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span><span class="op" id="3487566">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3487572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3487577">//&nbsp;but&nbsp;not&nbsp;trailing&nbsp;blank&nbsp;lines</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487612">for</span>&nbsp;<span class="ident" id="3487616"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span>&nbsp;<span class="op" id="3487618">&gt;</span>&nbsp;<span class="ident" id="3487620"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span>&nbsp;<span class="op" id="3487622">&amp;&amp;</span>&nbsp;<span class="ident" id="3487625"><a href="/gostd/go/doc/comment.go.html#3483356">isBlank</a></span><span class="op" id="3487632">(</span><span class="ident" id="3487633"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487638">[</span><span class="ident" id="3487639"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span><span class="op" id="3487640">-</span><span class="num" id="3487641">1</span><span class="op" id="3487642">]</span><span class="op" id="3487643">)</span>&nbsp;<span class="op" id="3487645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487651"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span><span class="op" id="3487652">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3487658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487663">pre</span>&nbsp;<span class="op" id="3487667">:=</span>&nbsp;<span class="ident" id="3487670"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487675">[</span><span class="ident" id="3487676"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3487677">:</span><span class="ident" id="3487678"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span><span class="op" id="3487679">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487684"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span>&nbsp;<span class="op" id="3487686">=</span>&nbsp;<span class="ident" id="3487688"><a href="/gostd/go/doc/comment.go.html#3487476">j</a></span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487694"><a href="/gostd/go/doc/comment.go.html#3483565">unindent</a></span><span class="op" id="3487702">(</span><span class="ident" id="3487703"><a href="/gostd/go/doc/comment.go.html#3487663">pre</a></span><span class="op" id="3487706">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3487712">//&nbsp;put&nbsp;those&nbsp;lines&nbsp;in&nbsp;a&nbsp;pre&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487749"><a href="/gostd/go/doc/comment.go.html#3486982">out</a></span>&nbsp;<span class="op" id="3487753">=</span>&nbsp;<span class="builtinfunc" id="3487755">append</span><span class="op" id="3487761">(</span><span class="ident" id="3487762"><a href="/gostd/go/doc/comment.go.html#3486982">out</a></span><span class="op" id="3487765">,</span>&nbsp;<span class="ident" id="3487767"><a href="/gostd/go/doc/comment.go.html#3484918">block</a></span><span class="op" id="3487772">{</span><span class="ident" id="3487773"><a href="/gostd/go/doc/comment.go.html#3484904">opPre</a></span><span class="op" id="3487778">,</span>&nbsp;<span class="ident" id="3487780"><a href="/gostd/go/doc/comment.go.html#3487663">pre</a></span><span class="op" id="3487783">}</span><span class="op" id="3487784">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487789"><a href="/gostd/go/doc/comment.go.html#3487039">lastWasHeading</a></span>&nbsp;<span class="op" id="3487804">=</span>&nbsp;<span class="builtintype" id="3487806">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487815">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3487826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3487831">if</span>&nbsp;<span class="ident" id="3487834"><a href="/gostd/go/doc/comment.go.html#3487014">lastWasBlank</a></span>&nbsp;<span class="op" id="3487847">&amp;&amp;</span>&nbsp;<span class="op" id="3487850">!</span><span class="ident" id="3487851"><a href="/gostd/go/doc/comment.go.html#3487039">lastWasHeading</a></span>&nbsp;<span class="op" id="3487866">&amp;&amp;</span>&nbsp;<span class="ident" id="3487869"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3487870">+</span><span class="num" id="3487871">2</span>&nbsp;<span class="op" id="3487873">&lt;</span>&nbsp;<span class="builtinfunc" id="3487875">len</span><span class="op" id="3487878">(</span><span class="ident" id="3487879"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487884">)</span>&nbsp;<span class="op" id="3487886">&amp;&amp;</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3487892"><a href="/gostd/go/doc/comment.go.html#3483356">isBlank</a></span><span class="op" id="3487899">(</span><span class="ident" id="3487900"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487905">[</span><span class="ident" id="3487906"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3487907">+</span><span class="num" id="3487908">1</span><span class="op" id="3487909">]</span><span class="op" id="3487910">)</span>&nbsp;<span class="op" id="3487912">&amp;&amp;</span>&nbsp;<span class="op" id="3487915">!</span><span class="ident" id="3487916"><a href="/gostd/go/doc/comment.go.html#3483356">isBlank</a></span><span class="op" id="3487923">(</span><span class="ident" id="3487924"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487929">[</span><span class="ident" id="3487930"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3487931">+</span><span class="num" id="3487932">2</span><span class="op" id="3487933">]</span><span class="op" id="3487934">)</span>&nbsp;<span class="op" id="3487936">&amp;&amp;</span>&nbsp;<span class="ident" id="3487939"><a href="/gostd/go/doc/comment.go.html#3483244">indentLen</a></span><span class="op" id="3487948">(</span><span class="ident" id="3487949"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3487954">[</span><span class="ident" id="3487955"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3487956">+</span><span class="num" id="3487957">2</span><span class="op" id="3487958">]</span><span class="op" id="3487959">)</span>&nbsp;<span class="op" id="3487961">==</span>&nbsp;<span class="num" id="3487964">0</span>&nbsp;<span class="op" id="3487966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3487971">//&nbsp;current&nbsp;line&nbsp;is&nbsp;non-blank,&nbsp;surrounded&nbsp;by&nbsp;blank&nbsp;lines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3488030">//&nbsp;and&nbsp;the&nbsp;next&nbsp;non-blank&nbsp;line&nbsp;is&nbsp;not&nbsp;indented:&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3488086">//&nbsp;might&nbsp;be&nbsp;a&nbsp;heading.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3488112">if</span>&nbsp;<span class="ident" id="3488115">head</span>&nbsp;<span class="op" id="3488120">:=</span>&nbsp;<span class="ident" id="3488123"><a href="/gostd/go/doc/comment.go.html#3484060">heading</a></span><span class="op" id="3488130">(</span><span class="ident" id="3488131"><a href="/gostd/go/doc/comment.go.html#3487259">line</a></span><span class="op" id="3488135">)</span><span class="op" id="3488136">;</span>&nbsp;<span class="ident" id="3488138"><a href="/gostd/go/doc/comment.go.html#3488115">head</a></span>&nbsp;<span class="op" id="3488143">!=</span>&nbsp;<span class="string" id="3488146">&#34;&#34;</span>&nbsp;<span class="op" id="3488149">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3488155"><a href="/gostd/go/doc/comment.go.html#3487067">close</a></span><span class="op" id="3488160">(</span><span class="op" id="3488161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488167"><a href="/gostd/go/doc/comment.go.html#3486982">out</a></span>&nbsp;<span class="op" id="3488171">=</span>&nbsp;<span class="builtinfunc" id="3488173">append</span><span class="op" id="3488179">(</span><span class="ident" id="3488180"><a href="/gostd/go/doc/comment.go.html#3486982">out</a></span><span class="op" id="3488183">,</span>&nbsp;<span class="ident" id="3488185"><a href="/gostd/go/doc/comment.go.html#3484918">block</a></span><span class="op" id="3488190">{</span><span class="ident" id="3488191"><a href="/gostd/go/doc/comment.go.html#3484896">opHead</a></span><span class="op" id="3488197">,</span>&nbsp;<span class="op" id="3488199">[</span><span class="op" id="3488200">]</span><span class="builtintype" id="3488201">string</span><span class="op" id="3488207">{</span><span class="ident" id="3488208"><a href="/gostd/go/doc/comment.go.html#3488115">head</a></span><span class="op" id="3488212">}</span><span class="op" id="3488213">}</span><span class="op" id="3488214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488220"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span>&nbsp;<span class="op" id="3488222">+=</span>&nbsp;<span class="num" id="3488225">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488231"><a href="/gostd/go/doc/comment.go.html#3487039">lastWasHeading</a></span>&nbsp;<span class="op" id="3488246">=</span>&nbsp;<span class="builtintype" id="3488248">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3488257">continue</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3488269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3488273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3488278">//&nbsp;open&nbsp;paragraph</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488298"><a href="/gostd/go/doc/comment.go.html#3487014">lastWasBlank</a></span>&nbsp;<span class="op" id="3488311">=</span>&nbsp;<span class="builtintype" id="3488313">false</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488321"><a href="/gostd/go/doc/comment.go.html#3487039">lastWasHeading</a></span>&nbsp;<span class="op" id="3488336">=</span>&nbsp;<span class="builtintype" id="3488338">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488346"><a href="/gostd/go/doc/comment.go.html#3486997">para</a></span>&nbsp;<span class="op" id="3488351">=</span>&nbsp;<span class="builtinfunc" id="3488353">append</span><span class="op" id="3488359">(</span><span class="ident" id="3488360"><a href="/gostd/go/doc/comment.go.html#3486997">para</a></span><span class="op" id="3488364">,</span>&nbsp;<span class="ident" id="3488366"><a href="/gostd/go/doc/comment.go.html#3487169">lines</a></span><span class="op" id="3488371">[</span><span class="ident" id="3488372"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3488373">]</span><span class="op" id="3488374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488378"><a href="/gostd/go/doc/comment.go.html#3487231">i</a></span><span class="op" id="3488379">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3488383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3488386"><a href="/gostd/go/doc/comment.go.html#3487067">close</a></span><span class="op" id="3488391">(</span><span class="op" id="3488392">)</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3488396">return</span>&nbsp;<span class="ident" id="3488403"><a href="/gostd/go/doc/comment.go.html#3486982">out</a></span><br>
<span class="lineno"></span><span class="op" id="3488407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3488410">//&nbsp;ToText&nbsp;prepares&nbsp;comment&nbsp;text&nbsp;for&nbsp;presentation&nbsp;in&nbsp;textual&nbsp;output.</span><br>
<span class="lineno">400</span><span class="comment" id="3488478">//&nbsp;It&nbsp;wraps&nbsp;paragraphs&nbsp;of&nbsp;text&nbsp;to&nbsp;width&nbsp;or&nbsp;fewer&nbsp;Unicode&nbsp;code&nbsp;points</span><br>
<span class="lineno"></span><span class="comment" id="3488547">//&nbsp;and&nbsp;then&nbsp;prefixes&nbsp;each&nbsp;line&nbsp;with&nbsp;the&nbsp;indent.&nbsp;&nbsp;In&nbsp;preformatted&nbsp;sections</span><br>
<span class="lineno"></span><span class="comment" id="3488621">//&nbsp;(such&nbsp;as&nbsp;program&nbsp;text),&nbsp;it&nbsp;prefixes&nbsp;each&nbsp;non-blank&nbsp;line&nbsp;with&nbsp;preIndent.</span><br>
<span class="lineno"></span><span class="keyword" id="3488696">func</span>&nbsp;<span class="ident" id="3488701">ToText</span><span class="op" id="3488707">(</span><span class="ident" id="3488708">w</span>&nbsp;<span class="ident" id="3488710"><a href="/gostd/go/doc/comment.go.html#3479360">io</a></span><span class="op" id="3488712">.</span><span class="ident" id="3488713"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="3488719">,</span>&nbsp;<span class="ident" id="3488721">text</span>&nbsp;<span class="builtintype" id="3488726">string</span><span class="op" id="3488732">,</span>&nbsp;<span class="ident" id="3488734">indent</span><span class="op" id="3488740">,</span>&nbsp;<span class="ident" id="3488742">preIndent</span>&nbsp;<span class="builtintype" id="3488752">string</span><span class="op" id="3488758">,</span>&nbsp;<span class="ident" id="3488760">width</span>&nbsp;<span class="builtintype" id="3488766">int</span><span class="op" id="3488769">)</span>&nbsp;<span class="op" id="3488771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488774">l</span>&nbsp;<span class="op" id="3488776">:=</span>&nbsp;<span class="ident" id="3488779"><a href="/gostd/go/doc/comment.go.html#3489347">lineWrapper</a></span><span class="op" id="3488790">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488794"><a href="/gostd/go/doc/comment.go.html#3489369">out</a></span><span class="op" id="3488797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488802"><a href="/gostd/go/doc/comment.go.html#3488708">w</a></span><span class="op" id="3488803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488807"><a href="/gostd/go/doc/comment.go.html#3489406">width</a></span><span class="op" id="3488812">:</span>&nbsp;&nbsp;<span class="ident" id="3488815"><a href="/gostd/go/doc/comment.go.html#3488760">width</a></span><span class="op" id="3488820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488824"><a href="/gostd/go/doc/comment.go.html#3489421">indent</a></span><span class="op" id="3488830">:</span>&nbsp;<span class="ident" id="3488832"><a href="/gostd/go/doc/comment.go.html#3488734">indent</a></span><span class="op" id="3488838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3488841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3488844">for</span>&nbsp;<span class="ident" id="3488848">_</span><span class="op" id="3488849">,</span>&nbsp;<span class="ident" id="3488851">b</span>&nbsp;<span class="op" id="3488853">:=</span>&nbsp;<span class="keyword" id="3488856">range</span>&nbsp;<span class="ident" id="3488862"><a href="/gostd/go/doc/comment.go.html#3486943">blocks</a></span><span class="op" id="3488868">(</span><span class="ident" id="3488869"><a href="/gostd/go/doc/comment.go.html#3488721">text</a></span><span class="op" id="3488873">)</span>&nbsp;<span class="op" id="3488875">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3488879">switch</span>&nbsp;<span class="ident" id="3488886"><a href="/gostd/go/doc/comment.go.html#3488851">b</a></span><span class="op" id="3488887">.</span><span class="ident" id="3488888"><a href="/gostd/go/doc/comment.go.html#3484934">op</a></span>&nbsp;<span class="op" id="3488891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3488895">case</span>&nbsp;<span class="ident" id="3488900"><a href="/gostd/go/doc/comment.go.html#3484878">opPara</a></span><span class="op" id="3488906">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3488911">//&nbsp;l.write&nbsp;will&nbsp;add&nbsp;leading&nbsp;newline&nbsp;if&nbsp;required</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3488962">for</span>&nbsp;<span class="ident" id="3488966">_</span><span class="op" id="3488967">,</span>&nbsp;<span class="ident" id="3488969">line</span>&nbsp;<span class="op" id="3488974">:=</span>&nbsp;<span class="keyword" id="3488977">range</span>&nbsp;<span class="ident" id="3488983"><a href="/gostd/go/doc/comment.go.html#3488851">b</a></span><span class="op" id="3488984">.</span><span class="ident" id="3488985"><a href="/gostd/go/doc/comment.go.html#3484944">lines</a></span>&nbsp;<span class="op" id="3488991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3488997"><a href="/gostd/go/doc/comment.go.html#3488774">l</a></span><span class="op" id="3488998">.</span><span class="ident" id="3488999"><a href="/gostd/go/doc/comment.go.html#3489540">write</a></span><span class="op" id="3489004">(</span><span class="ident" id="3489005"><a href="/gostd/go/doc/comment.go.html#3488969">line</a></span><span class="op" id="3489009">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489019"><a href="/gostd/go/doc/comment.go.html#3488774">l</a></span><span class="op" id="3489020">.</span><span class="ident" id="3489021"><a href="/gostd/go/doc/comment.go.html#3490052">flush</a></span><span class="op" id="3489026">(</span><span class="op" id="3489027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489031">case</span>&nbsp;<span class="ident" id="3489036"><a href="/gostd/go/doc/comment.go.html#3484896">opHead</a></span><span class="op" id="3489042">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489047"><a href="/gostd/go/doc/comment.go.html#3488708">w</a></span><span class="op" id="3489048">.</span><span class="ident" id="3489049"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489054">(</span><span class="ident" id="3489055"><a href="/gostd/go/doc/comment.go.html#3489475">nl</a></span><span class="op" id="3489057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489062">for</span>&nbsp;<span class="ident" id="3489066">_</span><span class="op" id="3489067">,</span>&nbsp;<span class="ident" id="3489069">line</span>&nbsp;<span class="op" id="3489074">:=</span>&nbsp;<span class="keyword" id="3489077">range</span>&nbsp;<span class="ident" id="3489083"><a href="/gostd/go/doc/comment.go.html#3488851">b</a></span><span class="op" id="3489084">.</span><span class="ident" id="3489085"><a href="/gostd/go/doc/comment.go.html#3484944">lines</a></span>&nbsp;<span class="op" id="3489091">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489097"><a href="/gostd/go/doc/comment.go.html#3488774">l</a></span><span class="op" id="3489098">.</span><span class="ident" id="3489099"><a href="/gostd/go/doc/comment.go.html#3489540">write</a></span><span class="op" id="3489104">(</span><span class="ident" id="3489105"><a href="/gostd/go/doc/comment.go.html#3489069">line</a></span>&nbsp;<span class="op" id="3489110">+</span>&nbsp;<span class="string" id="3489112">&#34;\n&#34;</span><span class="op" id="3489116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489126"><a href="/gostd/go/doc/comment.go.html#3488774">l</a></span><span class="op" id="3489127">.</span><span class="ident" id="3489128"><a href="/gostd/go/doc/comment.go.html#3490052">flush</a></span><span class="op" id="3489133">(</span><span class="op" id="3489134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489138">case</span>&nbsp;<span class="ident" id="3489143"><a href="/gostd/go/doc/comment.go.html#3484904">opPre</a></span><span class="op" id="3489148">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489153"><a href="/gostd/go/doc/comment.go.html#3488708">w</a></span><span class="op" id="3489154">.</span><span class="ident" id="3489155"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489160">(</span><span class="ident" id="3489161"><a href="/gostd/go/doc/comment.go.html#3489475">nl</a></span><span class="op" id="3489163">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489168">for</span>&nbsp;<span class="ident" id="3489172">_</span><span class="op" id="3489173">,</span>&nbsp;<span class="ident" id="3489175">line</span>&nbsp;<span class="op" id="3489180">:=</span>&nbsp;<span class="keyword" id="3489183">range</span>&nbsp;<span class="ident" id="3489189"><a href="/gostd/go/doc/comment.go.html#3488851">b</a></span><span class="op" id="3489190">.</span><span class="ident" id="3489191"><a href="/gostd/go/doc/comment.go.html#3484944">lines</a></span>&nbsp;<span class="op" id="3489197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489203">if</span>&nbsp;<span class="ident" id="3489206"><a href="/gostd/go/doc/comment.go.html#3483356">isBlank</a></span><span class="op" id="3489213">(</span><span class="ident" id="3489214"><a href="/gostd/go/doc/comment.go.html#3489175">line</a></span><span class="op" id="3489218">)</span>&nbsp;<span class="op" id="3489220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489227"><a href="/gostd/go/doc/comment.go.html#3488708">w</a></span><span class="op" id="3489228">.</span><span class="ident" id="3489229"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489234">(</span><span class="op" id="3489235">[</span><span class="op" id="3489236">]</span><span class="builtintype" id="3489237">byte</span><span class="op" id="3489241">(</span><span class="string" id="3489242">&#34;\n&#34;</span><span class="op" id="3489246">)</span><span class="op" id="3489247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489253">}</span>&nbsp;<span class="keyword" id="3489255">else</span>&nbsp;<span class="op" id="3489260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489267"><a href="/gostd/go/doc/comment.go.html#3488708">w</a></span><span class="op" id="3489268">.</span><span class="ident" id="3489269"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489274">(</span><span class="op" id="3489275">[</span><span class="op" id="3489276">]</span><span class="builtintype" id="3489277">byte</span><span class="op" id="3489281">(</span><span class="ident" id="3489282"><a href="/gostd/go/doc/comment.go.html#3488742">preIndent</a></span><span class="op" id="3489291">)</span><span class="op" id="3489292">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489299"><a href="/gostd/go/doc/comment.go.html#3488708">w</a></span><span class="op" id="3489300">.</span><span class="ident" id="3489301"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489306">(</span><span class="op" id="3489307">[</span><span class="op" id="3489308">]</span><span class="builtintype" id="3489309">byte</span><span class="op" id="3489313">(</span><span class="ident" id="3489314"><a href="/gostd/go/doc/comment.go.html#3489175">line</a></span><span class="op" id="3489318">)</span><span class="op" id="3489319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489337">}</span><br>
<span class="lineno">435</span><span class="op" id="3489339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3489342">type</span>&nbsp;<span class="ident" id="3489347">lineWrapper</span>&nbsp;<span class="keyword" id="3489359">struct</span>&nbsp;<span class="op" id="3489366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489369">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489379"><a href="/gostd/go/doc/comment.go.html#3479360">io</a></span><span class="op" id="3489381">.</span><span class="ident" id="3489382"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489390">printed</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3489400">bool</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489406">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3489416">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489421">indent</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3489431">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489439">n</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3489449">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489454">pendSpace</span>&nbsp;<span class="builtintype" id="3489464">int</span><br>
<span class="lineno"></span><span class="op" id="3489468">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span><span class="keyword" id="3489471">var</span>&nbsp;<span class="ident" id="3489475">nl</span>&nbsp;<span class="op" id="3489478">=</span>&nbsp;<span class="op" id="3489480">[</span><span class="op" id="3489481">]</span><span class="builtintype" id="3489482">byte</span><span class="op" id="3489486">(</span><span class="string" id="3489487">&#34;\n&#34;</span><span class="op" id="3489491">)</span><br>
<span class="lineno"></span><span class="keyword" id="3489493">var</span>&nbsp;<span class="ident" id="3489497">space</span>&nbsp;<span class="op" id="3489503">=</span>&nbsp;<span class="op" id="3489505">[</span><span class="op" id="3489506">]</span><span class="builtintype" id="3489507">byte</span><span class="op" id="3489511">(</span><span class="string" id="3489512">&#34;&nbsp;&#34;</span><span class="op" id="3489515">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3489518">func</span>&nbsp;<span class="op" id="3489523">(</span><span class="ident" id="3489524">l</span>&nbsp;<span class="op" id="3489526">*</span><span class="ident" id="3489527"><a href="/gostd/go/doc/comment.go.html#3489347">lineWrapper</a></span><span class="op" id="3489538">)</span>&nbsp;<span class="ident" id="3489540">write</span><span class="op" id="3489545">(</span><span class="ident" id="3489546">text</span>&nbsp;<span class="builtintype" id="3489551">string</span><span class="op" id="3489557">)</span>&nbsp;<span class="op" id="3489559">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489562">if</span>&nbsp;<span class="ident" id="3489565"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489566">.</span><span class="ident" id="3489567"><a href="/gostd/go/doc/comment.go.html#3489439">n</a></span>&nbsp;<span class="op" id="3489569">==</span>&nbsp;<span class="num" id="3489572">0</span>&nbsp;<span class="op" id="3489574">&amp;&amp;</span>&nbsp;<span class="ident" id="3489577"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489578">.</span><span class="ident" id="3489579"><a href="/gostd/go/doc/comment.go.html#3489390">printed</a></span>&nbsp;<span class="op" id="3489587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489591"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489592">.</span><span class="ident" id="3489593"><a href="/gostd/go/doc/comment.go.html#3489369">out</a></span><span class="op" id="3489596">.</span><span class="ident" id="3489597"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489602">(</span><span class="ident" id="3489603"><a href="/gostd/go/doc/comment.go.html#3489475">nl</a></span><span class="op" id="3489605">)</span>&nbsp;<span class="comment" id="3489607">//&nbsp;blank&nbsp;line&nbsp;before&nbsp;new&nbsp;paragraph</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489646"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489647">.</span><span class="ident" id="3489648"><a href="/gostd/go/doc/comment.go.html#3489390">printed</a></span>&nbsp;<span class="op" id="3489656">=</span>&nbsp;<span class="builtintype" id="3489658">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489665">for</span>&nbsp;<span class="ident" id="3489669">_</span><span class="op" id="3489670">,</span>&nbsp;<span class="ident" id="3489672">f</span>&nbsp;<span class="op" id="3489674">:=</span>&nbsp;<span class="keyword" id="3489677">range</span>&nbsp;<span class="ident" id="3489683"><a href="/gostd/go/doc/comment.go.html#3479376">strings</a></span><span class="op" id="3489690">.</span><span class="ident" id="3489691"><a href="/gostd/strings/strings.go.html#2973751">Fields</a></span><span class="op" id="3489697">(</span><span class="ident" id="3489698"><a href="/gostd/go/doc/comment.go.html#3489546">text</a></span><span class="op" id="3489702">)</span>&nbsp;<span class="op" id="3489704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489708">w</span>&nbsp;<span class="op" id="3489710">:=</span>&nbsp;<span class="ident" id="3489713"><a href="/gostd/go/doc/comment.go.html#3479433">utf8</a></span><span class="op" id="3489717">.</span><span class="ident" id="3489718"><a href="/gostd/unicode/utf8/utf8.go.html#1814113">RuneCountInString</a></span><span class="op" id="3489735">(</span><span class="ident" id="3489736"><a href="/gostd/go/doc/comment.go.html#3489672">f</a></span><span class="op" id="3489737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3489741">//&nbsp;wrap&nbsp;if&nbsp;line&nbsp;is&nbsp;too&nbsp;long</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489771">if</span>&nbsp;<span class="ident" id="3489774"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489775">.</span><span class="ident" id="3489776"><a href="/gostd/go/doc/comment.go.html#3489439">n</a></span>&nbsp;<span class="op" id="3489778">&gt;</span>&nbsp;<span class="num" id="3489780">0</span>&nbsp;<span class="op" id="3489782">&amp;&amp;</span>&nbsp;<span class="ident" id="3489785"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489786">.</span><span class="ident" id="3489787"><a href="/gostd/go/doc/comment.go.html#3489439">n</a></span><span class="op" id="3489788">+</span><span class="ident" id="3489789"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489790">.</span><span class="ident" id="3489791"><a href="/gostd/go/doc/comment.go.html#3489454">pendSpace</a></span><span class="op" id="3489800">+</span><span class="ident" id="3489801"><a href="/gostd/go/doc/comment.go.html#3489708">w</a></span>&nbsp;<span class="op" id="3489803">&gt;</span>&nbsp;<span class="ident" id="3489805"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489806">.</span><span class="ident" id="3489807"><a href="/gostd/go/doc/comment.go.html#3489406">width</a></span>&nbsp;<span class="op" id="3489813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489818"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489819">.</span><span class="ident" id="3489820"><a href="/gostd/go/doc/comment.go.html#3489369">out</a></span><span class="op" id="3489823">.</span><span class="ident" id="3489824"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489829">(</span><span class="ident" id="3489830"><a href="/gostd/go/doc/comment.go.html#3489475">nl</a></span><span class="op" id="3489832">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489837"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489838">.</span><span class="ident" id="3489839"><a href="/gostd/go/doc/comment.go.html#3489439">n</a></span>&nbsp;<span class="op" id="3489841">=</span>&nbsp;<span class="num" id="3489843">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489848"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489849">.</span><span class="ident" id="3489850"><a href="/gostd/go/doc/comment.go.html#3489454">pendSpace</a></span>&nbsp;<span class="op" id="3489860">=</span>&nbsp;<span class="num" id="3489862">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3489870">if</span>&nbsp;<span class="ident" id="3489873"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489874">.</span><span class="ident" id="3489875"><a href="/gostd/go/doc/comment.go.html#3489439">n</a></span>&nbsp;<span class="op" id="3489877">==</span>&nbsp;<span class="num" id="3489880">0</span>&nbsp;<span class="op" id="3489882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489887"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489888">.</span><span class="ident" id="3489889"><a href="/gostd/go/doc/comment.go.html#3489369">out</a></span><span class="op" id="3489892">.</span><span class="ident" id="3489893"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489898">(</span><span class="op" id="3489899">[</span><span class="op" id="3489900">]</span><span class="builtintype" id="3489901">byte</span><span class="op" id="3489905">(</span><span class="ident" id="3489906"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489907">.</span><span class="ident" id="3489908"><a href="/gostd/go/doc/comment.go.html#3489421">indent</a></span><span class="op" id="3489914">)</span><span class="op" id="3489915">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3489919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489923"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489924">.</span><span class="ident" id="3489925"><a href="/gostd/go/doc/comment.go.html#3489369">out</a></span><span class="op" id="3489928">.</span><span class="ident" id="3489929"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489934">(</span><span class="ident" id="3489935"><a href="/gostd/go/doc/comment.go.html#3489497">space</a></span><span class="op" id="3489940">[</span><span class="op" id="3489941">:</span><span class="ident" id="3489942"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489943">.</span><span class="ident" id="3489944"><a href="/gostd/go/doc/comment.go.html#3489454">pendSpace</a></span><span class="op" id="3489953">]</span><span class="op" id="3489954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489958"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489959">.</span><span class="ident" id="3489960"><a href="/gostd/go/doc/comment.go.html#3489369">out</a></span><span class="op" id="3489963">.</span><span class="ident" id="3489964"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3489969">(</span><span class="op" id="3489970">[</span><span class="op" id="3489971">]</span><span class="builtintype" id="3489972">byte</span><span class="op" id="3489976">(</span><span class="ident" id="3489977"><a href="/gostd/go/doc/comment.go.html#3489672">f</a></span><span class="op" id="3489978">)</span><span class="op" id="3489979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3489983"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489984">.</span><span class="ident" id="3489985"><a href="/gostd/go/doc/comment.go.html#3489439">n</a></span>&nbsp;<span class="op" id="3489987">+=</span>&nbsp;<span class="ident" id="3489990"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3489991">.</span><span class="ident" id="3489992"><a href="/gostd/go/doc/comment.go.html#3489454">pendSpace</a></span>&nbsp;<span class="op" id="3490002">+</span>&nbsp;<span class="ident" id="3490004"><a href="/gostd/go/doc/comment.go.html#3489708">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3490008"><a href="/gostd/go/doc/comment.go.html#3489524">l</a></span><span class="op" id="3490009">.</span><span class="ident" id="3490010"><a href="/gostd/go/doc/comment.go.html#3489454">pendSpace</a></span>&nbsp;<span class="op" id="3490020">=</span>&nbsp;<span class="num" id="3490022">1</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3490025">}</span><br>
<span class="lineno"></span><span class="op" id="3490027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3490030">func</span>&nbsp;<span class="op" id="3490035">(</span><span class="ident" id="3490036">l</span>&nbsp;<span class="op" id="3490038">*</span><span class="ident" id="3490039"><a href="/gostd/go/doc/comment.go.html#3489347">lineWrapper</a></span><span class="op" id="3490050">)</span>&nbsp;<span class="ident" id="3490052">flush</span><span class="op" id="3490057">(</span><span class="op" id="3490058">)</span>&nbsp;<span class="op" id="3490060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3490063">if</span>&nbsp;<span class="ident" id="3490066"><a href="/gostd/go/doc/comment.go.html#3490036">l</a></span><span class="op" id="3490067">.</span><span class="ident" id="3490068"><a href="/gostd/go/doc/comment.go.html#3489439">n</a></span>&nbsp;<span class="op" id="3490070">==</span>&nbsp;<span class="num" id="3490073">0</span>&nbsp;<span class="op" id="3490075">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3490079">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3490087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3490090"><a href="/gostd/go/doc/comment.go.html#3490036">l</a></span><span class="op" id="3490091">.</span><span class="ident" id="3490092"><a href="/gostd/go/doc/comment.go.html#3489369">out</a></span><span class="op" id="3490095">.</span><span class="ident" id="3490096"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="3490101">(</span><span class="ident" id="3490102"><a href="/gostd/go/doc/comment.go.html#3489475">nl</a></span><span class="op" id="3490104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3490107"><a href="/gostd/go/doc/comment.go.html#3490036">l</a></span><span class="op" id="3490108">.</span><span class="ident" id="3490109"><a href="/gostd/go/doc/comment.go.html#3489454">pendSpace</a></span>&nbsp;<span class="op" id="3490119">=</span>&nbsp;<span class="num" id="3490121">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3490124"><a href="/gostd/go/doc/comment.go.html#3490036">l</a></span><span class="op" id="3490125">.</span><span class="ident" id="3490126"><a href="/gostd/go/doc/comment.go.html#3489439">n</a></span>&nbsp;<span class="op" id="3490128">=</span>&nbsp;<span class="num" id="3490130">0</span><br>
<span class="lineno">480</span><span class="op" id="3490132">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
