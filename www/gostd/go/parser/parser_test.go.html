<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6668131">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6668186">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6668240">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6668291">package</span>&nbsp;<span class="ident" id="6668299">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6668307">import</span>&nbsp;<span class="op" id="6668314">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668317">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668326">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668333">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668343">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668355">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668361">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668372">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6668382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6668385">var</span>&nbsp;<span class="ident" id="6668389">fset</span>&nbsp;<span class="op" id="6668394">=</span>&nbsp;<span class="ident" id="6668396">token</span><span class="op" id="6668401">.</span><span class="ident" id="6668402">NewFileSet</span><span class="op" id="6668412">(</span><span class="op" id="6668413">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6668416">var</span>&nbsp;<span class="ident" id="6668420">validFiles</span>&nbsp;<span class="op" id="6668431">=</span>&nbsp;<span class="op" id="6668433">[</span><span class="op" id="6668434">]</span><span class="builtintype" id="6668435">string</span><span class="op" id="6668441">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668444">&#34;parser.go&#34;</span><span class="op" id="6668455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668458">&#34;parser_test.go&#34;</span><span class="op" id="6668474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668477">&#34;error_test.go&#34;</span><span class="op" id="6668492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6668495">&#34;short_test.go&#34;</span><span class="op" id="6668510">,</span><br>
<span class="lineno"></span><span class="op" id="6668512">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6668515">func</span>&nbsp;<span class="ident" id="6668520">TestParse</span><span class="op" id="6668529">(</span><span class="ident" id="6668530">t</span>&nbsp;<span class="op" id="6668532">*</span><span class="ident" id="6668533">testing</span><span class="op" id="6668540">.</span><span class="ident" id="6668541">T</span><span class="op" id="6668542">)</span>&nbsp;<span class="op" id="6668544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6668547">for</span>&nbsp;<span class="ident" id="6668551">_</span><span class="op" id="6668552">,</span>&nbsp;<span class="ident" id="6668554">filename</span>&nbsp;<span class="op" id="6668563">:=</span>&nbsp;<span class="keyword" id="6668566">range</span>&nbsp;<span class="ident" id="6668572">validFiles</span>&nbsp;<span class="op" id="6668583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6668587">_</span><span class="op" id="6668588">,</span>&nbsp;<span class="ident" id="6668590">err</span>&nbsp;<span class="op" id="6668594">:=</span>&nbsp;<span class="ident" id="6668597">ParseFile</span><span class="op" id="6668606">(</span><span class="ident" id="6668607">fset</span><span class="op" id="6668611">,</span>&nbsp;<span class="ident" id="6668613">filename</span><span class="op" id="6668621">,</span>&nbsp;<span class="ident" id="6668623">nil</span><span class="op" id="6668626">,</span>&nbsp;<span class="ident" id="6668628">DeclarationErrors</span><span class="op" id="6668645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6668649">if</span>&nbsp;<span class="ident" id="6668652">err</span>&nbsp;<span class="op" id="6668656">!=</span>&nbsp;<span class="ident" id="6668659">nil</span>&nbsp;<span class="op" id="6668663">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6668668">t</span><span class="op" id="6668669">.</span><span class="ident" id="6668670">Fatalf</span><span class="op" id="6668676">(</span><span class="string" id="6668677">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="6668696">,</span>&nbsp;<span class="ident" id="6668698">filename</span><span class="op" id="6668706">,</span>&nbsp;<span class="ident" id="6668708">err</span><span class="op" id="6668711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6668715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6668718">}</span><br>
<span class="lineno"></span><span class="op" id="6668720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6668723">func</span>&nbsp;<span class="ident" id="6668728">nameFilter</span><span class="op" id="6668738">(</span><span class="ident" id="6668739">filename</span>&nbsp;<span class="builtintype" id="6668748">string</span><span class="op" id="6668754">)</span>&nbsp;<span class="builtintype" id="6668756">bool</span>&nbsp;<span class="op" id="6668761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6668764">switch</span>&nbsp;<span class="ident" id="6668771">filename</span>&nbsp;<span class="op" id="6668780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6668783">case</span>&nbsp;<span class="string" id="6668788">&#34;parser.go&#34;</span><span class="op" id="6668799">,</span>&nbsp;<span class="string" id="6668801">&#34;interface.go&#34;</span><span class="op" id="6668815">,</span>&nbsp;<span class="string" id="6668817">&#34;parser_test.go&#34;</span><span class="op" id="6668833">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6668837">return</span>&nbsp;<span class="builtintype" id="6668844">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6668850">case</span>&nbsp;<span class="string" id="6668855">&#34;parser.go.orig&#34;</span><span class="op" id="6668871">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6668875">return</span>&nbsp;<span class="builtintype" id="6668882">true</span>&nbsp;<span class="comment" id="6668887">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6668932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6668935">return</span>&nbsp;<span class="builtintype" id="6668942">false</span><br>
<span class="lineno"></span><span class="op" id="6668948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="6668951">func</span>&nbsp;<span class="ident" id="6668956">dirFilter</span><span class="op" id="6668965">(</span><span class="ident" id="6668966">f</span>&nbsp;<span class="ident" id="6668968">os</span><span class="op" id="6668970">.</span><span class="ident" id="6668971">FileInfo</span><span class="op" id="6668979">)</span>&nbsp;<span class="builtintype" id="6668981">bool</span>&nbsp;<span class="op" id="6668986">{</span>&nbsp;<span class="keyword" id="6668988">return</span>&nbsp;<span class="ident" id="6668995">nameFilter</span><span class="op" id="6669005">(</span><span class="ident" id="6669006">f</span><span class="op" id="6669007">.</span><span class="ident" id="6669008">Name</span><span class="op" id="6669012">(</span><span class="op" id="6669013">)</span><span class="op" id="6669014">)</span>&nbsp;<span class="op" id="6669016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6669019">func</span>&nbsp;<span class="ident" id="6669024">TestParseDir</span><span class="op" id="6669036">(</span><span class="ident" id="6669037">t</span>&nbsp;<span class="op" id="6669039">*</span><span class="ident" id="6669040">testing</span><span class="op" id="6669047">.</span><span class="ident" id="6669048">T</span><span class="op" id="6669049">)</span>&nbsp;<span class="op" id="6669051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669054">path</span>&nbsp;<span class="op" id="6669059">:=</span>&nbsp;<span class="string" id="6669062">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669067">pkgs</span><span class="op" id="6669071">,</span>&nbsp;<span class="ident" id="6669073">err</span>&nbsp;<span class="op" id="6669077">:=</span>&nbsp;<span class="ident" id="6669080">ParseDir</span><span class="op" id="6669088">(</span><span class="ident" id="6669089">fset</span><span class="op" id="6669093">,</span>&nbsp;<span class="ident" id="6669095">path</span><span class="op" id="6669099">,</span>&nbsp;<span class="ident" id="6669101">dirFilter</span><span class="op" id="6669110">,</span>&nbsp;<span class="num" id="6669112">0</span><span class="op" id="6669113">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669116">if</span>&nbsp;<span class="ident" id="6669119">err</span>&nbsp;<span class="op" id="6669123">!=</span>&nbsp;<span class="ident" id="6669126">nil</span>&nbsp;<span class="op" id="6669130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669134">t</span><span class="op" id="6669135">.</span><span class="ident" id="6669136">Fatalf</span><span class="op" id="6669142">(</span><span class="string" id="6669143">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="6669161">,</span>&nbsp;<span class="ident" id="6669163">path</span><span class="op" id="6669167">,</span>&nbsp;<span class="ident" id="6669169">err</span><span class="op" id="6669172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6669175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669178">if</span>&nbsp;<span class="ident" id="6669181">n</span>&nbsp;<span class="op" id="6669183">:=</span>&nbsp;<span class="builtinfunc" id="6669186">len</span><span class="op" id="6669189">(</span><span class="ident" id="6669190">pkgs</span><span class="op" id="6669194">)</span><span class="op" id="6669195">;</span>&nbsp;<span class="ident" id="6669197">n</span>&nbsp;<span class="op" id="6669199">!=</span>&nbsp;<span class="num" id="6669202">1</span>&nbsp;<span class="op" id="6669204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669208">t</span><span class="op" id="6669209">.</span><span class="ident" id="6669210">Errorf</span><span class="op" id="6669216">(</span><span class="string" id="6669217">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="6669242">,</span>&nbsp;<span class="ident" id="6669244">n</span><span class="op" id="6669245">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6669248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669251">pkg</span>&nbsp;<span class="op" id="6669255">:=</span>&nbsp;<span class="ident" id="6669258">pkgs</span><span class="op" id="6669262">[</span><span class="string" id="6669263">&#34;parser&#34;</span><span class="op" id="6669271">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669274">if</span>&nbsp;<span class="ident" id="6669277">pkg</span>&nbsp;<span class="op" id="6669281">==</span>&nbsp;<span class="ident" id="6669284">nil</span>&nbsp;<span class="op" id="6669288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669292">t</span><span class="op" id="6669293">.</span><span class="ident" id="6669294">Errorf</span><span class="op" id="6669300">(</span><span class="string" id="6669301">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="6669329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669333">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6669341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669344">if</span>&nbsp;<span class="ident" id="6669347">n</span>&nbsp;<span class="op" id="6669349">:=</span>&nbsp;<span class="builtinfunc" id="6669352">len</span><span class="op" id="6669355">(</span><span class="ident" id="6669356">pkg</span><span class="op" id="6669359">.</span><span class="ident" id="6669360">Files</span><span class="op" id="6669365">)</span><span class="op" id="6669366">;</span>&nbsp;<span class="ident" id="6669368">n</span>&nbsp;<span class="op" id="6669370">!=</span>&nbsp;<span class="num" id="6669373">3</span>&nbsp;<span class="op" id="6669375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669379">t</span><span class="op" id="6669380">.</span><span class="ident" id="6669381">Errorf</span><span class="op" id="6669387">(</span><span class="string" id="6669388">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="6669418">,</span>&nbsp;<span class="ident" id="6669420">n</span><span class="op" id="6669421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6669424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669427">for</span>&nbsp;<span class="ident" id="6669431">filename</span>&nbsp;<span class="op" id="6669440">:=</span>&nbsp;<span class="keyword" id="6669443">range</span>&nbsp;<span class="ident" id="6669449">pkg</span><span class="op" id="6669452">.</span><span class="ident" id="6669453">Files</span>&nbsp;<span class="op" id="6669459">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669463">if</span>&nbsp;<span class="op" id="6669466">!</span><span class="ident" id="6669467">nameFilter</span><span class="op" id="6669477">(</span><span class="ident" id="6669478">filename</span><span class="op" id="6669486">)</span>&nbsp;<span class="op" id="6669488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669493">t</span><span class="op" id="6669494">.</span><span class="ident" id="6669495">Errorf</span><span class="op" id="6669501">(</span><span class="string" id="6669502">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="6669531">,</span>&nbsp;<span class="ident" id="6669533">filename</span><span class="op" id="6669541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6669545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6669548">}</span><br>
<span class="lineno"></span><span class="op" id="6669550">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="6669553">func</span>&nbsp;<span class="ident" id="6669558">TestParseExpr</span><span class="op" id="6669571">(</span><span class="ident" id="6669572">t</span>&nbsp;<span class="op" id="6669574">*</span><span class="ident" id="6669575">testing</span><span class="op" id="6669582">.</span><span class="ident" id="6669583">T</span><span class="op" id="6669584">)</span>&nbsp;<span class="op" id="6669586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6669589">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6669617">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669651">src</span>&nbsp;<span class="op" id="6669655">:=</span>&nbsp;<span class="string" id="6669658">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669667">x</span><span class="op" id="6669668">,</span>&nbsp;<span class="ident" id="6669670">err</span>&nbsp;<span class="op" id="6669674">:=</span>&nbsp;<span class="ident" id="6669677">ParseExpr</span><span class="op" id="6669686">(</span><span class="ident" id="6669687">src</span><span class="op" id="6669690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669693">if</span>&nbsp;<span class="ident" id="6669696">err</span>&nbsp;<span class="op" id="6669700">!=</span>&nbsp;<span class="ident" id="6669703">nil</span>&nbsp;<span class="op" id="6669707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669711">t</span><span class="op" id="6669712">.</span><span class="ident" id="6669713">Errorf</span><span class="op" id="6669719">(</span><span class="string" id="6669720">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="6669739">,</span>&nbsp;<span class="ident" id="6669741">src</span><span class="op" id="6669744">,</span>&nbsp;<span class="ident" id="6669746">err</span><span class="op" id="6669749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6669752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6669755">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669772">if</span>&nbsp;<span class="ident" id="6669775">_</span><span class="op" id="6669776">,</span>&nbsp;<span class="ident" id="6669778">ok</span>&nbsp;<span class="op" id="6669781">:=</span>&nbsp;<span class="ident" id="6669784">x</span><span class="op" id="6669785">.</span><span class="op" id="6669786">(</span><span class="op" id="6669787">*</span><span class="ident" id="6669788">ast</span><span class="op" id="6669791">.</span><span class="ident" id="6669792">BinaryExpr</span><span class="op" id="6669802">)</span><span class="op" id="6669803">;</span>&nbsp;<span class="op" id="6669805">!</span><span class="ident" id="6669806">ok</span>&nbsp;<span class="op" id="6669809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669813">t</span><span class="op" id="6669814">.</span><span class="ident" id="6669815">Errorf</span><span class="op" id="6669821">(</span><span class="string" id="6669822">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="6669867">,</span>&nbsp;<span class="ident" id="6669869">src</span><span class="op" id="6669872">,</span>&nbsp;<span class="ident" id="6669874">x</span><span class="op" id="6669875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6669878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6669882">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669910">src</span>&nbsp;<span class="op" id="6669914">=</span>&nbsp;<span class="string" id="6669916">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669934">x</span><span class="op" id="6669935">,</span>&nbsp;<span class="ident" id="6669937">err</span>&nbsp;<span class="op" id="6669941">=</span>&nbsp;<span class="ident" id="6669943">ParseExpr</span><span class="op" id="6669952">(</span><span class="ident" id="6669953">src</span><span class="op" id="6669956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6669959">if</span>&nbsp;<span class="ident" id="6669962">err</span>&nbsp;<span class="op" id="6669966">!=</span>&nbsp;<span class="ident" id="6669969">nil</span>&nbsp;<span class="op" id="6669973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6669977">t</span><span class="op" id="6669978">.</span><span class="ident" id="6669979">Errorf</span><span class="op" id="6669985">(</span><span class="string" id="6669986">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="6670005">,</span>&nbsp;<span class="ident" id="6670007">src</span><span class="op" id="6670010">,</span>&nbsp;<span class="ident" id="6670012">err</span><span class="op" id="6670015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6670018">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6670021">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670038">if</span>&nbsp;<span class="ident" id="6670041">_</span><span class="op" id="6670042">,</span>&nbsp;<span class="ident" id="6670044">ok</span>&nbsp;<span class="op" id="6670047">:=</span>&nbsp;<span class="ident" id="6670050">x</span><span class="op" id="6670051">.</span><span class="op" id="6670052">(</span><span class="op" id="6670053">*</span><span class="ident" id="6670054">ast</span><span class="op" id="6670057">.</span><span class="ident" id="6670058">StructType</span><span class="op" id="6670068">)</span><span class="op" id="6670069">;</span>&nbsp;<span class="op" id="6670071">!</span><span class="ident" id="6670072">ok</span>&nbsp;<span class="op" id="6670075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670079">t</span><span class="op" id="6670080">.</span><span class="ident" id="6670081">Errorf</span><span class="op" id="6670087">(</span><span class="string" id="6670088">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="6670133">,</span>&nbsp;<span class="ident" id="6670135">src</span><span class="op" id="6670138">,</span>&nbsp;<span class="ident" id="6670140">x</span><span class="op" id="6670141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6670144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6670148">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670174">src</span>&nbsp;<span class="op" id="6670178">=</span>&nbsp;<span class="string" id="6670180">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670189">if</span>&nbsp;<span class="ident" id="6670192">_</span><span class="op" id="6670193">,</span>&nbsp;<span class="ident" id="6670195">err</span>&nbsp;<span class="op" id="6670199">:=</span>&nbsp;<span class="ident" id="6670202">ParseExpr</span><span class="op" id="6670211">(</span><span class="ident" id="6670212">src</span><span class="op" id="6670215">)</span><span class="op" id="6670216">;</span>&nbsp;<span class="ident" id="6670218">err</span>&nbsp;<span class="op" id="6670222">==</span>&nbsp;<span class="ident" id="6670225">nil</span>&nbsp;<span class="op" id="6670229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670233">t</span><span class="op" id="6670234">.</span><span class="ident" id="6670235">Errorf</span><span class="op" id="6670241">(</span><span class="string" id="6670242">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="6670271">,</span>&nbsp;<span class="ident" id="6670273">src</span><span class="op" id="6670276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6670279">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6670283">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670342">src</span>&nbsp;<span class="op" id="6670346">=</span>&nbsp;<span class="string" id="6670348">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670361">if</span>&nbsp;<span class="ident" id="6670364">_</span><span class="op" id="6670365">,</span>&nbsp;<span class="ident" id="6670367">err</span>&nbsp;<span class="op" id="6670371">:=</span>&nbsp;<span class="ident" id="6670374">ParseExpr</span><span class="op" id="6670383">(</span><span class="ident" id="6670384">src</span><span class="op" id="6670387">)</span><span class="op" id="6670388">;</span>&nbsp;<span class="ident" id="6670390">err</span>&nbsp;<span class="op" id="6670394">==</span>&nbsp;<span class="ident" id="6670397">nil</span>&nbsp;<span class="op" id="6670401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670405">t</span><span class="op" id="6670406">.</span><span class="ident" id="6670407">Errorf</span><span class="op" id="6670413">(</span><span class="string" id="6670414">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="6670443">,</span>&nbsp;<span class="ident" id="6670445">src</span><span class="op" id="6670448">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6670451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6670455">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670518">src</span>&nbsp;<span class="op" id="6670522">=</span>&nbsp;<span class="string" id="6670524">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670535">if</span>&nbsp;<span class="ident" id="6670538">_</span><span class="op" id="6670539">,</span>&nbsp;<span class="ident" id="6670541">err</span>&nbsp;<span class="op" id="6670545">:=</span>&nbsp;<span class="ident" id="6670548">ParseExpr</span><span class="op" id="6670557">(</span><span class="ident" id="6670558">src</span><span class="op" id="6670561">)</span><span class="op" id="6670562">;</span>&nbsp;<span class="ident" id="6670564">err</span>&nbsp;<span class="op" id="6670568">!=</span>&nbsp;<span class="ident" id="6670571">nil</span>&nbsp;<span class="op" id="6670575">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670579">t</span><span class="op" id="6670580">.</span><span class="ident" id="6670581">Errorf</span><span class="op" id="6670587">(</span><span class="string" id="6670588">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="6670617">,</span>&nbsp;<span class="ident" id="6670619">src</span><span class="op" id="6670622">,</span>&nbsp;<span class="ident" id="6670624">err</span><span class="op" id="6670627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6670630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670633">src</span>&nbsp;<span class="op" id="6670637">=</span>&nbsp;<span class="string" id="6670639">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670649">if</span>&nbsp;<span class="ident" id="6670652">_</span><span class="op" id="6670653">,</span>&nbsp;<span class="ident" id="6670655">err</span>&nbsp;<span class="op" id="6670659">:=</span>&nbsp;<span class="ident" id="6670662">ParseExpr</span><span class="op" id="6670671">(</span><span class="ident" id="6670672">src</span><span class="op" id="6670675">)</span><span class="op" id="6670676">;</span>&nbsp;<span class="ident" id="6670678">err</span>&nbsp;<span class="op" id="6670682">==</span>&nbsp;<span class="ident" id="6670685">nil</span>&nbsp;<span class="op" id="6670689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670693">t</span><span class="op" id="6670694">.</span><span class="ident" id="6670695">Errorf</span><span class="op" id="6670701">(</span><span class="string" id="6670702">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="6670731">,</span>&nbsp;<span class="ident" id="6670733">src</span><span class="op" id="6670736">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6670739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6670743">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670796">const</span>&nbsp;<span class="ident" id="6670802">validExpr</span>&nbsp;<span class="op" id="6670812">=</span>&nbsp;<span class="string" id="6670814">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670823">const</span>&nbsp;<span class="ident" id="6670829">anything</span>&nbsp;<span class="op" id="6670838">=</span>&nbsp;<span class="string" id="6670840">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670853">for</span>&nbsp;<span class="ident" id="6670857">_</span><span class="op" id="6670858">,</span>&nbsp;<span class="ident" id="6670860">c</span>&nbsp;<span class="op" id="6670862">:=</span>&nbsp;<span class="keyword" id="6670865">range</span>&nbsp;<span class="string" id="6670871">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="6670880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670884">src</span>&nbsp;<span class="op" id="6670888">:=</span>&nbsp;<span class="ident" id="6670891">validExpr</span>&nbsp;<span class="op" id="6670901">+</span>&nbsp;<span class="builtintype" id="6670903">string</span><span class="op" id="6670909">(</span><span class="ident" id="6670910">c</span><span class="op" id="6670911">)</span>&nbsp;<span class="op" id="6670913">+</span>&nbsp;<span class="ident" id="6670915">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6670926">if</span>&nbsp;<span class="ident" id="6670929">_</span><span class="op" id="6670930">,</span>&nbsp;<span class="ident" id="6670932">err</span>&nbsp;<span class="op" id="6670936">:=</span>&nbsp;<span class="ident" id="6670939">ParseExpr</span><span class="op" id="6670948">(</span><span class="ident" id="6670949">src</span><span class="op" id="6670952">)</span><span class="op" id="6670953">;</span>&nbsp;<span class="ident" id="6670955">err</span>&nbsp;<span class="op" id="6670959">==</span>&nbsp;<span class="ident" id="6670962">nil</span>&nbsp;<span class="op" id="6670966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670971">t</span><span class="op" id="6670972">.</span><span class="ident" id="6670973">Errorf</span><span class="op" id="6670979">(</span><span class="string" id="6670980">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="6671009">,</span>&nbsp;<span class="ident" id="6671011">src</span><span class="op" id="6671014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671018">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6671025">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6671054">for</span>&nbsp;<span class="ident" id="6671058">_</span><span class="op" id="6671059">,</span>&nbsp;<span class="ident" id="6671061">src</span>&nbsp;<span class="op" id="6671065">:=</span>&nbsp;<span class="keyword" id="6671068">range</span>&nbsp;<span class="ident" id="6671074">valids</span>&nbsp;<span class="op" id="6671081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671085">ParseExpr</span><span class="op" id="6671094">(</span><span class="ident" id="6671095">src</span><span class="op" id="6671098">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671101">}</span><br>
<span class="lineno"></span><span class="op" id="6671103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6671106">func</span>&nbsp;<span class="ident" id="6671111">TestColonEqualsScope</span><span class="op" id="6671131">(</span><span class="ident" id="6671132">t</span>&nbsp;<span class="op" id="6671134">*</span><span class="ident" id="6671135">testing</span><span class="op" id="6671142">.</span><span class="ident" id="6671143">T</span><span class="op" id="6671144">)</span>&nbsp;<span class="op" id="6671146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671149">f</span><span class="op" id="6671150">,</span>&nbsp;<span class="ident" id="6671152">err</span>&nbsp;<span class="op" id="6671156">:=</span>&nbsp;<span class="ident" id="6671159">ParseFile</span><span class="op" id="6671168">(</span><span class="ident" id="6671169">fset</span><span class="op" id="6671173">,</span>&nbsp;<span class="string" id="6671175">&#34;&#34;</span><span class="op" id="6671177">,</span>&nbsp;<span class="string" id="6671179">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="6671223">,</span>&nbsp;<span class="num" id="6671225">0</span><span class="op" id="6671226">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6671229">if</span>&nbsp;<span class="ident" id="6671232">err</span>&nbsp;<span class="op" id="6671236">!=</span>&nbsp;<span class="ident" id="6671239">nil</span>&nbsp;<span class="op" id="6671243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671247">t</span><span class="op" id="6671248">.</span><span class="ident" id="6671249">Fatal</span><span class="op" id="6671254">(</span><span class="ident" id="6671255">err</span><span class="op" id="6671258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6671265">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671316">as</span>&nbsp;<span class="op" id="6671319">:=</span>&nbsp;<span class="ident" id="6671322">f</span><span class="op" id="6671323">.</span><span class="ident" id="6671324">Decls</span><span class="op" id="6671329">[</span><span class="num" id="6671330">0</span><span class="op" id="6671331">]</span><span class="op" id="6671332">.</span><span class="op" id="6671333">(</span><span class="op" id="6671334">*</span><span class="ident" id="6671335">ast</span><span class="op" id="6671338">.</span><span class="ident" id="6671339">FuncDecl</span><span class="op" id="6671347">)</span><span class="op" id="6671348">.</span><span class="ident" id="6671349">Body</span><span class="op" id="6671353">.</span><span class="ident" id="6671354">List</span><span class="op" id="6671358">[</span><span class="num" id="6671359">0</span><span class="op" id="6671360">]</span><span class="op" id="6671361">.</span><span class="op" id="6671362">(</span><span class="op" id="6671363">*</span><span class="ident" id="6671364">ast</span><span class="op" id="6671367">.</span><span class="ident" id="6671368">AssignStmt</span><span class="op" id="6671378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6671381">for</span>&nbsp;<span class="ident" id="6671385">_</span><span class="op" id="6671386">,</span>&nbsp;<span class="ident" id="6671388">v</span>&nbsp;<span class="op" id="6671390">:=</span>&nbsp;<span class="keyword" id="6671393">range</span>&nbsp;<span class="ident" id="6671399">as</span><span class="op" id="6671401">.</span><span class="ident" id="6671402">Rhs</span>&nbsp;<span class="op" id="6671406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671410">id</span>&nbsp;<span class="op" id="6671413">:=</span>&nbsp;<span class="ident" id="6671416">v</span><span class="op" id="6671417">.</span><span class="op" id="6671418">(</span><span class="op" id="6671419">*</span><span class="ident" id="6671420">ast</span><span class="op" id="6671423">.</span><span class="ident" id="6671424">Ident</span><span class="op" id="6671429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6671433">if</span>&nbsp;<span class="ident" id="6671436">id</span><span class="op" id="6671438">.</span><span class="ident" id="6671439">Obj</span>&nbsp;<span class="op" id="6671443">!=</span>&nbsp;<span class="ident" id="6671446">nil</span>&nbsp;<span class="op" id="6671450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671455">t</span><span class="op" id="6671456">.</span><span class="ident" id="6671457">Errorf</span><span class="op" id="6671463">(</span><span class="string" id="6671464">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="6671492">,</span>&nbsp;<span class="ident" id="6671494">id</span><span class="op" id="6671496">.</span><span class="ident" id="6671497">Name</span><span class="op" id="6671501">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6671511">for</span>&nbsp;<span class="ident" id="6671515">_</span><span class="op" id="6671516">,</span>&nbsp;<span class="ident" id="6671518">v</span>&nbsp;<span class="op" id="6671520">:=</span>&nbsp;<span class="keyword" id="6671523">range</span>&nbsp;<span class="ident" id="6671529">as</span><span class="op" id="6671531">.</span><span class="ident" id="6671532">Lhs</span>&nbsp;<span class="op" id="6671536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671540">id</span>&nbsp;<span class="op" id="6671543">:=</span>&nbsp;<span class="ident" id="6671546">v</span><span class="op" id="6671547">.</span><span class="op" id="6671548">(</span><span class="op" id="6671549">*</span><span class="ident" id="6671550">ast</span><span class="op" id="6671553">.</span><span class="ident" id="6671554">Ident</span><span class="op" id="6671559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6671563">if</span>&nbsp;<span class="ident" id="6671566">id</span><span class="op" id="6671568">.</span><span class="ident" id="6671569">Obj</span>&nbsp;<span class="op" id="6671573">==</span>&nbsp;<span class="ident" id="6671576">nil</span>&nbsp;<span class="op" id="6671580">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671585">t</span><span class="op" id="6671586">.</span><span class="ident" id="6671587">Errorf</span><span class="op" id="6671593">(</span><span class="string" id="6671594">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="6671628">,</span>&nbsp;<span class="ident" id="6671630">id</span><span class="op" id="6671632">.</span><span class="ident" id="6671633">Name</span><span class="op" id="6671637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671644">}</span><br>
<span class="lineno"></span><span class="op" id="6671646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="6671649">func</span>&nbsp;<span class="ident" id="6671654">TestVarScope</span><span class="op" id="6671666">(</span><span class="ident" id="6671667">t</span>&nbsp;<span class="op" id="6671669">*</span><span class="ident" id="6671670">testing</span><span class="op" id="6671677">.</span><span class="ident" id="6671678">T</span><span class="op" id="6671679">)</span>&nbsp;<span class="op" id="6671681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671684">f</span><span class="op" id="6671685">,</span>&nbsp;<span class="ident" id="6671687">err</span>&nbsp;<span class="op" id="6671691">:=</span>&nbsp;<span class="ident" id="6671694">ParseFile</span><span class="op" id="6671703">(</span><span class="ident" id="6671704">fset</span><span class="op" id="6671708">,</span>&nbsp;<span class="string" id="6671710">&#34;&#34;</span><span class="op" id="6671712">,</span>&nbsp;<span class="string" id="6671714">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="6671761">,</span>&nbsp;<span class="num" id="6671763">0</span><span class="op" id="6671764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6671767">if</span>&nbsp;<span class="ident" id="6671770">err</span>&nbsp;<span class="op" id="6671774">!=</span>&nbsp;<span class="ident" id="6671777">nil</span>&nbsp;<span class="op" id="6671781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671785">t</span><span class="op" id="6671786">.</span><span class="ident" id="6671787">Fatal</span><span class="op" id="6671792">(</span><span class="ident" id="6671793">err</span><span class="op" id="6671796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6671799">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6671803">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671854">as</span>&nbsp;<span class="op" id="6671857">:=</span>&nbsp;<span class="ident" id="6671860">f</span><span class="op" id="6671861">.</span><span class="ident" id="6671862">Decls</span><span class="op" id="6671867">[</span><span class="num" id="6671868">0</span><span class="op" id="6671869">]</span><span class="op" id="6671870">.</span><span class="op" id="6671871">(</span><span class="op" id="6671872">*</span><span class="ident" id="6671873">ast</span><span class="op" id="6671876">.</span><span class="ident" id="6671877">FuncDecl</span><span class="op" id="6671885">)</span><span class="op" id="6671886">.</span><span class="ident" id="6671887">Body</span><span class="op" id="6671891">.</span><span class="ident" id="6671892">List</span><span class="op" id="6671896">[</span><span class="num" id="6671897">0</span><span class="op" id="6671898">]</span><span class="op" id="6671899">.</span><span class="op" id="6671900">(</span><span class="op" id="6671901">*</span><span class="ident" id="6671902">ast</span><span class="op" id="6671905">.</span><span class="ident" id="6671906">DeclStmt</span><span class="op" id="6671914">)</span><span class="op" id="6671915">.</span><span class="ident" id="6671916">Decl</span><span class="op" id="6671920">.</span><span class="op" id="6671921">(</span><span class="op" id="6671922">*</span><span class="ident" id="6671923">ast</span><span class="op" id="6671926">.</span><span class="ident" id="6671927">GenDecl</span><span class="op" id="6671934">)</span><span class="op" id="6671935">.</span><span class="ident" id="6671936">Specs</span><span class="op" id="6671941">[</span><span class="num" id="6671942">0</span><span class="op" id="6671943">]</span><span class="op" id="6671944">.</span><span class="op" id="6671945">(</span><span class="op" id="6671946">*</span><span class="ident" id="6671947">ast</span><span class="op" id="6671950">.</span><span class="ident" id="6671951">ValueSpec</span><span class="op" id="6671960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6671963">for</span>&nbsp;<span class="ident" id="6671967">_</span><span class="op" id="6671968">,</span>&nbsp;<span class="ident" id="6671970">v</span>&nbsp;<span class="op" id="6671972">:=</span>&nbsp;<span class="keyword" id="6671975">range</span>&nbsp;<span class="ident" id="6671981">as</span><span class="op" id="6671983">.</span><span class="ident" id="6671984">Values</span>&nbsp;<span class="op" id="6671991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6671995">id</span>&nbsp;<span class="op" id="6671998">:=</span>&nbsp;<span class="ident" id="6672001">v</span><span class="op" id="6672002">.</span><span class="op" id="6672003">(</span><span class="op" id="6672004">*</span><span class="ident" id="6672005">ast</span><span class="op" id="6672008">.</span><span class="ident" id="6672009">Ident</span><span class="op" id="6672014">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672018">if</span>&nbsp;<span class="ident" id="6672021">id</span><span class="op" id="6672023">.</span><span class="ident" id="6672024">Obj</span>&nbsp;<span class="op" id="6672028">!=</span>&nbsp;<span class="ident" id="6672031">nil</span>&nbsp;<span class="op" id="6672035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672040">t</span><span class="op" id="6672041">.</span><span class="ident" id="6672042">Errorf</span><span class="op" id="6672048">(</span><span class="string" id="6672049">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="6672077">,</span>&nbsp;<span class="ident" id="6672079">id</span><span class="op" id="6672081">.</span><span class="ident" id="6672082">Name</span><span class="op" id="6672086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6672090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6672093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672096">for</span>&nbsp;<span class="ident" id="6672100">_</span><span class="op" id="6672101">,</span>&nbsp;<span class="ident" id="6672103">id</span>&nbsp;<span class="op" id="6672106">:=</span>&nbsp;<span class="keyword" id="6672109">range</span>&nbsp;<span class="ident" id="6672115">as</span><span class="op" id="6672117">.</span><span class="ident" id="6672118">Names</span>&nbsp;<span class="op" id="6672124">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672128">if</span>&nbsp;<span class="ident" id="6672131">id</span><span class="op" id="6672133">.</span><span class="ident" id="6672134">Obj</span>&nbsp;<span class="op" id="6672138">==</span>&nbsp;<span class="ident" id="6672141">nil</span>&nbsp;<span class="op" id="6672145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672150">t</span><span class="op" id="6672151">.</span><span class="ident" id="6672152">Errorf</span><span class="op" id="6672158">(</span><span class="string" id="6672159">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="6672193">,</span>&nbsp;<span class="ident" id="6672195">id</span><span class="op" id="6672197">.</span><span class="ident" id="6672198">Name</span><span class="op" id="6672202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6672206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6672209">}</span><br>
<span class="lineno"></span><span class="op" id="6672211">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="6672214">func</span>&nbsp;<span class="ident" id="6672219">TestObjects</span><span class="op" id="6672230">(</span><span class="ident" id="6672231">t</span>&nbsp;<span class="op" id="6672233">*</span><span class="ident" id="6672234">testing</span><span class="op" id="6672241">.</span><span class="ident" id="6672242">T</span><span class="op" id="6672243">)</span>&nbsp;<span class="op" id="6672245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672248">const</span>&nbsp;<span class="ident" id="6672254">src</span>&nbsp;<span class="op" id="6672258">=</span>&nbsp;<span class="string" id="6672260">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672351">f</span><span class="op" id="6672352">,</span>&nbsp;<span class="ident" id="6672354">err</span>&nbsp;<span class="op" id="6672358">:=</span>&nbsp;<span class="ident" id="6672361">ParseFile</span><span class="op" id="6672370">(</span><span class="ident" id="6672371">fset</span><span class="op" id="6672375">,</span>&nbsp;<span class="string" id="6672377">&#34;&#34;</span><span class="op" id="6672379">,</span>&nbsp;<span class="ident" id="6672381">src</span><span class="op" id="6672384">,</span>&nbsp;<span class="num" id="6672386">0</span><span class="op" id="6672387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672390">if</span>&nbsp;<span class="ident" id="6672393">err</span>&nbsp;<span class="op" id="6672397">!=</span>&nbsp;<span class="ident" id="6672400">nil</span>&nbsp;<span class="op" id="6672404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672408">t</span><span class="op" id="6672409">.</span><span class="ident" id="6672410">Fatal</span><span class="op" id="6672415">(</span><span class="ident" id="6672416">err</span><span class="op" id="6672419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6672422">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672426">objects</span>&nbsp;<span class="op" id="6672434">:=</span>&nbsp;<span class="keyword" id="6672437">map</span><span class="op" id="6672440">[</span><span class="builtintype" id="6672441">string</span><span class="op" id="6672447">]</span><span class="ident" id="6672448">ast</span><span class="op" id="6672451">.</span><span class="ident" id="6672452">ObjKind</span><span class="op" id="6672459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6672463">&#34;p&#34;</span><span class="op" id="6672466">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6672470">ast</span><span class="op" id="6672473">.</span><span class="ident" id="6672474">Bad</span><span class="op" id="6672477">,</span>&nbsp;<span class="comment" id="6672479">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6672499">&#34;fmt&#34;</span><span class="op" id="6672504">:</span>&nbsp;<span class="ident" id="6672506">ast</span><span class="op" id="6672509">.</span><span class="ident" id="6672510">Bad</span><span class="op" id="6672513">,</span>&nbsp;<span class="comment" id="6672515">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6672537">&#34;pi&#34;</span><span class="op" id="6672541">:</span>&nbsp;&nbsp;<span class="ident" id="6672544">ast</span><span class="op" id="6672547">.</span><span class="ident" id="6672548">Con</span><span class="op" id="6672551">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6672555">&#34;T&#34;</span><span class="op" id="6672558">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6672562">ast</span><span class="op" id="6672565">.</span><span class="ident" id="6672566">Typ</span><span class="op" id="6672569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6672573">&#34;x&#34;</span><span class="op" id="6672576">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6672580">ast</span><span class="op" id="6672583">.</span><span class="ident" id="6672584">Var</span><span class="op" id="6672587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6672591">&#34;int&#34;</span><span class="op" id="6672596">:</span>&nbsp;<span class="ident" id="6672598">ast</span><span class="op" id="6672601">.</span><span class="ident" id="6672602">Bad</span><span class="op" id="6672605">,</span>&nbsp;<span class="comment" id="6672607">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6672629">&#34;f&#34;</span><span class="op" id="6672632">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6672636">ast</span><span class="op" id="6672639">.</span><span class="ident" id="6672640">Fun</span><span class="op" id="6672643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6672647">&#34;L&#34;</span><span class="op" id="6672650">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6672654">ast</span><span class="op" id="6672657">.</span><span class="ident" id="6672658">Lbl</span><span class="op" id="6672661">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6672664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672668">ast</span><span class="op" id="6672671">.</span><span class="ident" id="6672672">Inspect</span><span class="op" id="6672679">(</span><span class="ident" id="6672680">f</span><span class="op" id="6672681">,</span>&nbsp;<span class="keyword" id="6672683">func</span><span class="op" id="6672687">(</span><span class="ident" id="6672688">n</span>&nbsp;<span class="ident" id="6672690">ast</span><span class="op" id="6672693">.</span><span class="ident" id="6672694">Node</span><span class="op" id="6672698">)</span>&nbsp;<span class="builtintype" id="6672700">bool</span>&nbsp;<span class="op" id="6672705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672709">if</span>&nbsp;<span class="ident" id="6672712">ident</span><span class="op" id="6672717">,</span>&nbsp;<span class="ident" id="6672719">ok</span>&nbsp;<span class="op" id="6672722">:=</span>&nbsp;<span class="ident" id="6672725">n</span><span class="op" id="6672726">.</span><span class="op" id="6672727">(</span><span class="op" id="6672728">*</span><span class="ident" id="6672729">ast</span><span class="op" id="6672732">.</span><span class="ident" id="6672733">Ident</span><span class="op" id="6672738">)</span><span class="op" id="6672739">;</span>&nbsp;<span class="ident" id="6672741">ok</span>&nbsp;<span class="op" id="6672744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672749">obj</span>&nbsp;<span class="op" id="6672753">:=</span>&nbsp;<span class="ident" id="6672756">ident</span><span class="op" id="6672761">.</span><span class="ident" id="6672762">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672769">if</span>&nbsp;<span class="ident" id="6672772">obj</span>&nbsp;<span class="op" id="6672776">==</span>&nbsp;<span class="ident" id="6672779">nil</span>&nbsp;<span class="op" id="6672783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672789">if</span>&nbsp;<span class="ident" id="6672792">objects</span><span class="op" id="6672799">[</span><span class="ident" id="6672800">ident</span><span class="op" id="6672805">.</span><span class="ident" id="6672806">Name</span><span class="op" id="6672810">]</span>&nbsp;<span class="op" id="6672812">!=</span>&nbsp;<span class="ident" id="6672815">ast</span><span class="op" id="6672818">.</span><span class="ident" id="6672819">Bad</span>&nbsp;<span class="op" id="6672823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672830">t</span><span class="op" id="6672831">.</span><span class="ident" id="6672832">Errorf</span><span class="op" id="6672838">(</span><span class="string" id="6672839">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="6672857">,</span>&nbsp;<span class="ident" id="6672859">ident</span><span class="op" id="6672864">.</span><span class="ident" id="6672865">Name</span><span class="op" id="6672869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6672875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672881">return</span>&nbsp;<span class="builtintype" id="6672888">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6672896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6672901">if</span>&nbsp;<span class="ident" id="6672904">obj</span><span class="op" id="6672907">.</span><span class="ident" id="6672908">Name</span>&nbsp;<span class="op" id="6672913">!=</span>&nbsp;<span class="ident" id="6672916">ident</span><span class="op" id="6672921">.</span><span class="ident" id="6672922">Name</span>&nbsp;<span class="op" id="6672927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6672933">t</span><span class="op" id="6672934">.</span><span class="ident" id="6672935">Errorf</span><span class="op" id="6672941">(</span><span class="string" id="6672942">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="6672993">,</span>&nbsp;<span class="ident" id="6672995">obj</span><span class="op" id="6672998">.</span><span class="ident" id="6672999">Name</span><span class="op" id="6673003">,</span>&nbsp;<span class="ident" id="6673005">ident</span><span class="op" id="6673010">.</span><span class="ident" id="6673011">Name</span><span class="op" id="6673015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6673020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6673025">kind</span>&nbsp;<span class="op" id="6673030">:=</span>&nbsp;<span class="ident" id="6673033">objects</span><span class="op" id="6673040">[</span><span class="ident" id="6673041">ident</span><span class="op" id="6673046">.</span><span class="ident" id="6673047">Name</span><span class="op" id="6673051">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6673056">if</span>&nbsp;<span class="ident" id="6673059">obj</span><span class="op" id="6673062">.</span><span class="ident" id="6673063">Kind</span>&nbsp;<span class="op" id="6673068">!=</span>&nbsp;<span class="ident" id="6673071">kind</span>&nbsp;<span class="op" id="6673076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6673082">t</span><span class="op" id="6673083">.</span><span class="ident" id="6673084">Errorf</span><span class="op" id="6673090">(</span><span class="string" id="6673091">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6673119">,</span>&nbsp;<span class="ident" id="6673121">ident</span><span class="op" id="6673126">.</span><span class="ident" id="6673127">Name</span><span class="op" id="6673131">,</span>&nbsp;<span class="ident" id="6673133">obj</span><span class="op" id="6673136">.</span><span class="ident" id="6673137">Kind</span><span class="op" id="6673141">,</span>&nbsp;<span class="ident" id="6673143">kind</span><span class="op" id="6673147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6673152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6673156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6673160">return</span>&nbsp;<span class="builtintype" id="6673167">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6673173">}</span><span class="op" id="6673174">)</span><br>
<span class="lineno"></span><span class="op" id="6673176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6673179">func</span>&nbsp;<span class="ident" id="6673184">TestUnresolved</span><span class="op" id="6673198">(</span><span class="ident" id="6673199">t</span>&nbsp;<span class="op" id="6673201">*</span><span class="ident" id="6673202">testing</span><span class="op" id="6673209">.</span><span class="ident" id="6673210">T</span><span class="op" id="6673211">)</span>&nbsp;<span class="op" id="6673213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6673216">f</span><span class="op" id="6673217">,</span>&nbsp;<span class="ident" id="6673219">err</span>&nbsp;<span class="op" id="6673223">:=</span>&nbsp;<span class="ident" id="6673226">ParseFile</span><span class="op" id="6673235">(</span><span class="ident" id="6673236">fset</span><span class="op" id="6673240">,</span>&nbsp;<span class="string" id="6673242">&#34;&#34;</span><span class="op" id="6673244">,</span>&nbsp;<span class="string" id="6673246">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="6673724">,</span>&nbsp;<span class="num" id="6673726">0</span><span class="op" id="6673727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6673730">if</span>&nbsp;<span class="ident" id="6673733">err</span>&nbsp;<span class="op" id="6673737">!=</span>&nbsp;<span class="ident" id="6673740">nil</span>&nbsp;<span class="op" id="6673744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6673748">t</span><span class="op" id="6673749">.</span><span class="ident" id="6673750">Fatal</span><span class="op" id="6673755">(</span><span class="ident" id="6673756">err</span><span class="op" id="6673759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6673762">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6673766">want</span>&nbsp;<span class="op" id="6673771">:=</span>&nbsp;<span class="string" id="6673774">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6673781">+</span>&nbsp;<span class="comment" id="6673783">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673792">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6673810">+</span>&nbsp;<span class="comment" id="6673812">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673821">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6673834">+</span>&nbsp;<span class="comment" id="6673836">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673845">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="6673856">+</span>&nbsp;<span class="comment" id="6673858">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673867">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="6673878">+</span>&nbsp;<span class="comment" id="6673880">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6673889">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673894">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6673901">+</span>&nbsp;<span class="comment" id="6673903">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673912">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6673930">+</span>&nbsp;<span class="comment" id="6673932">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673941">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6673954">+</span>&nbsp;<span class="comment" id="6673956">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673965">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="6673976">+</span>&nbsp;<span class="comment" id="6673978">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6673987">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="6673998">+</span>&nbsp;<span class="comment" id="6674000">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6674009">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674014">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6674021">+</span>&nbsp;<span class="comment" id="6674023">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674032">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6674044">+</span>&nbsp;<span class="comment" id="6674046">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674055">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6674068">+</span>&nbsp;<span class="comment" id="6674070">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6674079">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674084">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6674091">+</span>&nbsp;<span class="comment" id="6674093">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674102">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6674120">+</span>&nbsp;<span class="comment" id="6674122">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674131">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="6674140">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6674149">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6674184">var</span>&nbsp;<span class="ident" id="6674188">buf</span>&nbsp;<span class="ident" id="6674192">bytes</span><span class="op" id="6674197">.</span><span class="ident" id="6674198">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6674206">for</span>&nbsp;<span class="ident" id="6674210">_</span><span class="op" id="6674211">,</span>&nbsp;<span class="ident" id="6674213">u</span>&nbsp;<span class="op" id="6674215">:=</span>&nbsp;<span class="keyword" id="6674218">range</span>&nbsp;<span class="ident" id="6674224">f</span><span class="op" id="6674225">.</span><span class="ident" id="6674226">Unresolved</span>&nbsp;<span class="op" id="6674237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6674241">buf</span><span class="op" id="6674244">.</span><span class="ident" id="6674245">WriteString</span><span class="op" id="6674256">(</span><span class="ident" id="6674257">u</span><span class="op" id="6674258">.</span><span class="ident" id="6674259">Name</span><span class="op" id="6674263">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6674267">buf</span><span class="op" id="6674270">.</span><span class="ident" id="6674271">WriteByte</span><span class="op" id="6674280">(</span><span class="string" id="6674281">&#39;&nbsp;&#39;</span><span class="op" id="6674284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6674287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6674290">got</span>&nbsp;<span class="op" id="6674294">:=</span>&nbsp;<span class="ident" id="6674297">buf</span><span class="op" id="6674300">.</span><span class="ident" id="6674301">String</span><span class="op" id="6674307">(</span><span class="op" id="6674308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6674312">if</span>&nbsp;<span class="ident" id="6674315">got</span>&nbsp;<span class="op" id="6674319">!=</span>&nbsp;<span class="ident" id="6674322">want</span>&nbsp;<span class="op" id="6674327">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6674331">t</span><span class="op" id="6674332">.</span><span class="ident" id="6674333">Errorf</span><span class="op" id="6674339">(</span><span class="string" id="6674340">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="6674362">,</span>&nbsp;<span class="ident" id="6674364">got</span><span class="op" id="6674367">,</span>&nbsp;<span class="ident" id="6674369">want</span><span class="op" id="6674373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6674376">}</span><br>
<span class="lineno"></span><span class="op" id="6674378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6674381">var</span>&nbsp;<span class="ident" id="6674385">imports</span>&nbsp;<span class="op" id="6674393">=</span>&nbsp;<span class="keyword" id="6674395">map</span><span class="op" id="6674398">[</span><span class="builtintype" id="6674399">string</span><span class="op" id="6674405">]</span><span class="builtintype" id="6674406">bool</span><span class="op" id="6674410">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674413">`&#34;a&#34;`</span><span class="op" id="6674418">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674427">true</span><span class="op" id="6674431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674434">&#34;`a`&#34;</span><span class="op" id="6674439">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674448">true</span><span class="op" id="6674452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674455">`&#34;a/b&#34;`</span><span class="op" id="6674462">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674469">true</span><span class="op" id="6674473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674476">`&#34;a.b&#34;`</span><span class="op" id="6674483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674490">true</span><span class="op" id="6674494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674497">`&#34;m\x61th&#34;`</span><span class="op" id="6674508">:</span>&nbsp;&nbsp;<span class="builtintype" id="6674511">true</span><span class="op" id="6674515">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674518">`&#34;greek/αβ&#34;`</span><span class="op" id="6674532">:</span>&nbsp;<span class="builtintype" id="6674534">true</span><span class="op" id="6674538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674541">`&#34;&#34;`</span><span class="op" id="6674545">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674555">false</span><span class="op" id="6674560">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6674564">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6674616">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6674670">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6674713">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6674758">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674811">`&#34;\x00&#34;`</span><span class="op" id="6674819">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674825">false</span><span class="op" id="6674830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674833">&#34;`\x00`&#34;</span><span class="op" id="6674841">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674847">false</span><span class="op" id="6674852">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674855">`&#34;\x7f&#34;`</span><span class="op" id="6674863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674869">false</span><span class="op" id="6674874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674877">&#34;`\x7f`&#34;</span><span class="op" id="6674885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674891">false</span><span class="op" id="6674896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674899">`&#34;a!&#34;`</span><span class="op" id="6674905">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674913">false</span><span class="op" id="6674918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674921">&#34;`a!`&#34;</span><span class="op" id="6674927">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674935">false</span><span class="op" id="6674940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674943">`&#34;a&nbsp;b&#34;`</span><span class="op" id="6674950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674957">false</span><span class="op" id="6674962">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674965">&#34;`a&nbsp;b`&#34;</span><span class="op" id="6674972">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6674979">false</span><span class="op" id="6674984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6674987">`&#34;a\\b&#34;`</span><span class="op" id="6674995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6675001">false</span><span class="op" id="6675006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6675009">&#34;`a\\b`&#34;</span><span class="op" id="6675017">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6675023">false</span><span class="op" id="6675028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6675031">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="6675040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6675045">false</span><span class="op" id="6675050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6675053">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="6675062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6675067">false</span><span class="op" id="6675072">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6675075">`&#34;\x80\x80&#34;`</span><span class="op" id="6675087">:</span>&nbsp;<span class="builtintype" id="6675089">false</span><span class="op" id="6675094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6675097">&#34;`\x80\x80`&#34;</span><span class="op" id="6675109">:</span>&nbsp;<span class="builtintype" id="6675111">false</span><span class="op" id="6675116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6675119">`&#34;\xFFFD&#34;`</span><span class="op" id="6675129">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6675133">false</span><span class="op" id="6675138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6675141">&#34;`\xFFFD`&#34;</span><span class="op" id="6675151">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6675155">false</span><span class="op" id="6675160">,</span><br>
<span class="lineno"></span><span class="op" id="6675162">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="6675165">func</span>&nbsp;<span class="ident" id="6675170">TestImports</span><span class="op" id="6675181">(</span><span class="ident" id="6675182">t</span>&nbsp;<span class="op" id="6675184">*</span><span class="ident" id="6675185">testing</span><span class="op" id="6675192">.</span><span class="ident" id="6675193">T</span><span class="op" id="6675194">)</span>&nbsp;<span class="op" id="6675196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6675199">for</span>&nbsp;<span class="ident" id="6675203">path</span><span class="op" id="6675207">,</span>&nbsp;<span class="ident" id="6675209">isValid</span>&nbsp;<span class="op" id="6675217">:=</span>&nbsp;<span class="keyword" id="6675220">range</span>&nbsp;<span class="ident" id="6675226">imports</span>&nbsp;<span class="op" id="6675234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6675238">src</span>&nbsp;<span class="op" id="6675242">:=</span>&nbsp;<span class="ident" id="6675245">fmt</span><span class="op" id="6675248">.</span><span class="ident" id="6675249">Sprintf</span><span class="op" id="6675256">(</span><span class="string" id="6675257">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="6675279">,</span>&nbsp;<span class="ident" id="6675281">path</span><span class="op" id="6675285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6675289">_</span><span class="op" id="6675290">,</span>&nbsp;<span class="ident" id="6675292">err</span>&nbsp;<span class="op" id="6675296">:=</span>&nbsp;<span class="ident" id="6675299">ParseFile</span><span class="op" id="6675308">(</span><span class="ident" id="6675309">fset</span><span class="op" id="6675313">,</span>&nbsp;<span class="string" id="6675315">&#34;&#34;</span><span class="op" id="6675317">,</span>&nbsp;<span class="ident" id="6675319">src</span><span class="op" id="6675322">,</span>&nbsp;<span class="num" id="6675324">0</span><span class="op" id="6675325">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6675329">switch</span>&nbsp;<span class="op" id="6675336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6675340">case</span>&nbsp;<span class="ident" id="6675345">err</span>&nbsp;<span class="op" id="6675349">!=</span>&nbsp;<span class="ident" id="6675352">nil</span>&nbsp;<span class="op" id="6675356">&amp;&amp;</span>&nbsp;<span class="ident" id="6675359">isValid</span><span class="op" id="6675366">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6675371">t</span><span class="op" id="6675372">.</span><span class="ident" id="6675373">Errorf</span><span class="op" id="6675379">(</span><span class="string" id="6675380">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="6675422">,</span>&nbsp;<span class="ident" id="6675424">src</span><span class="op" id="6675427">,</span>&nbsp;<span class="ident" id="6675429">err</span><span class="op" id="6675432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6675436">case</span>&nbsp;<span class="ident" id="6675441">err</span>&nbsp;<span class="op" id="6675445">==</span>&nbsp;<span class="ident" id="6675448">nil</span>&nbsp;<span class="op" id="6675452">&amp;&amp;</span>&nbsp;<span class="op" id="6675455">!</span><span class="ident" id="6675456">isValid</span><span class="op" id="6675463">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6675468">t</span><span class="op" id="6675469">.</span><span class="ident" id="6675470">Errorf</span><span class="op" id="6675476">(</span><span class="string" id="6675477">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="6675520">,</span>&nbsp;<span class="ident" id="6675522">src</span><span class="op" id="6675525">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6675529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6675532">}</span><br>
<span class="lineno"></span><span class="op" id="6675534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6675537">func</span>&nbsp;<span class="ident" id="6675542">TestCommentGroups</span><span class="op" id="6675559">(</span><span class="ident" id="6675560">t</span>&nbsp;<span class="op" id="6675562">*</span><span class="ident" id="6675563">testing</span><span class="op" id="6675570">.</span><span class="ident" id="6675571">T</span><span class="op" id="6675572">)</span>&nbsp;<span class="op" id="6675574">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6675577">f</span><span class="op" id="6675578">,</span>&nbsp;<span class="ident" id="6675580">err</span>&nbsp;<span class="op" id="6675584">:=</span>&nbsp;<span class="ident" id="6675587">ParseFile</span><span class="op" id="6675596">(</span><span class="ident" id="6675597">fset</span><span class="op" id="6675601">,</span>&nbsp;<span class="string" id="6675603">&#34;&#34;</span><span class="op" id="6675605">,</span>&nbsp;<span class="string" id="6675607">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="6675919">,</span>&nbsp;<span class="ident" id="6675921">ParseComments</span><span class="op" id="6675934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6675937">if</span>&nbsp;<span class="ident" id="6675940">err</span>&nbsp;<span class="op" id="6675944">!=</span>&nbsp;<span class="ident" id="6675947">nil</span>&nbsp;<span class="op" id="6675951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6675955">t</span><span class="op" id="6675956">.</span><span class="ident" id="6675957">Fatal</span><span class="op" id="6675962">(</span><span class="ident" id="6675963">err</span><span class="op" id="6675966">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6675969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6675972">expected</span>&nbsp;<span class="op" id="6675981">:=</span>&nbsp;<span class="op" id="6675984">[</span><span class="op" id="6675985">]</span><span class="op" id="6675986">[</span><span class="op" id="6675987">]</span><span class="builtintype" id="6675988">string</span><span class="op" id="6675994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6675998">{</span><span class="string" id="6675999">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="6676009">,</span>&nbsp;<span class="string" id="6676011">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="6676021">,</span>&nbsp;<span class="string" id="6676023">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="6676033">,</span>&nbsp;<span class="string" id="6676035">&#34;//&nbsp;1d&#34;</span><span class="op" id="6676042">}</span><span class="op" id="6676043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676047">{</span><span class="string" id="6676048">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="6676059">,</span>&nbsp;<span class="string" id="6676061">&#34;//&nbsp;2b&#34;</span><span class="op" id="6676068">}</span><span class="op" id="6676069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676073">{</span><span class="string" id="6676074">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="6676084">,</span>&nbsp;<span class="string" id="6676086">&#34;//&nbsp;3b&#34;</span><span class="op" id="6676093">,</span>&nbsp;<span class="string" id="6676095">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="6676105">}</span><span class="op" id="6676106">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676110">{</span><span class="string" id="6676111">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="6676139">}</span><span class="op" id="6676140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676144">{</span><span class="string" id="6676145">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="6676174">}</span><span class="op" id="6676175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676179">{</span><span class="string" id="6676180">&#34;//&nbsp;Output:&#34;</span><span class="op" id="6676192">,</span>&nbsp;<span class="string" id="6676194">&#34;//&nbsp;3&#34;</span><span class="op" id="6676200">,</span>&nbsp;<span class="string" id="6676202">&#34;//&nbsp;5&#34;</span><span class="op" id="6676208">}</span><span class="op" id="6676209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676215">if</span>&nbsp;<span class="builtinfunc" id="6676218">len</span><span class="op" id="6676221">(</span><span class="ident" id="6676222">f</span><span class="op" id="6676223">.</span><span class="ident" id="6676224">Comments</span><span class="op" id="6676232">)</span>&nbsp;<span class="op" id="6676234">!=</span>&nbsp;<span class="builtinfunc" id="6676237">len</span><span class="op" id="6676240">(</span><span class="ident" id="6676241">expected</span><span class="op" id="6676249">)</span>&nbsp;<span class="op" id="6676251">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6676255">t</span><span class="op" id="6676256">.</span><span class="ident" id="6676257">Fatalf</span><span class="op" id="6676263">(</span><span class="string" id="6676264">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="6676300">,</span>&nbsp;<span class="builtinfunc" id="6676302">len</span><span class="op" id="6676305">(</span><span class="ident" id="6676306">f</span><span class="op" id="6676307">.</span><span class="ident" id="6676308">Comments</span><span class="op" id="6676316">)</span><span class="op" id="6676317">,</span>&nbsp;<span class="builtinfunc" id="6676319">len</span><span class="op" id="6676322">(</span><span class="ident" id="6676323">expected</span><span class="op" id="6676331">)</span><span class="op" id="6676332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676338">for</span>&nbsp;<span class="ident" id="6676342">i</span><span class="op" id="6676343">,</span>&nbsp;<span class="ident" id="6676345">exp</span>&nbsp;<span class="op" id="6676349">:=</span>&nbsp;<span class="keyword" id="6676352">range</span>&nbsp;<span class="ident" id="6676358">expected</span>&nbsp;<span class="op" id="6676367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6676371">got</span>&nbsp;<span class="op" id="6676375">:=</span>&nbsp;<span class="ident" id="6676378">f</span><span class="op" id="6676379">.</span><span class="ident" id="6676380">Comments</span><span class="op" id="6676388">[</span><span class="ident" id="6676389">i</span><span class="op" id="6676390">]</span><span class="op" id="6676391">.</span><span class="ident" id="6676392">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676399">if</span>&nbsp;<span class="builtinfunc" id="6676402">len</span><span class="op" id="6676405">(</span><span class="ident" id="6676406">got</span><span class="op" id="6676409">)</span>&nbsp;<span class="op" id="6676411">!=</span>&nbsp;<span class="builtinfunc" id="6676414">len</span><span class="op" id="6676417">(</span><span class="ident" id="6676418">exp</span><span class="op" id="6676421">)</span>&nbsp;<span class="op" id="6676423">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6676428">t</span><span class="op" id="6676429">.</span><span class="ident" id="6676430">Errorf</span><span class="op" id="6676436">(</span><span class="string" id="6676437">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="6676479">,</span>&nbsp;<span class="builtinfunc" id="6676481">len</span><span class="op" id="6676484">(</span><span class="ident" id="6676485">got</span><span class="op" id="6676488">)</span><span class="op" id="6676489">,</span>&nbsp;<span class="ident" id="6676491">i</span><span class="op" id="6676492">,</span>&nbsp;<span class="builtinfunc" id="6676494">len</span><span class="op" id="6676497">(</span><span class="ident" id="6676498">exp</span><span class="op" id="6676501">)</span><span class="op" id="6676502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676507">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676522">for</span>&nbsp;<span class="ident" id="6676526">j</span><span class="op" id="6676527">,</span>&nbsp;<span class="ident" id="6676529">exp</span>&nbsp;<span class="op" id="6676533">:=</span>&nbsp;<span class="keyword" id="6676536">range</span>&nbsp;<span class="ident" id="6676542">exp</span>&nbsp;<span class="op" id="6676546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6676551">got</span>&nbsp;<span class="op" id="6676555">:=</span>&nbsp;<span class="ident" id="6676558">got</span><span class="op" id="6676561">[</span><span class="ident" id="6676562">j</span><span class="op" id="6676563">]</span><span class="op" id="6676564">.</span><span class="ident" id="6676565">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676573">if</span>&nbsp;<span class="ident" id="6676576">got</span>&nbsp;<span class="op" id="6676580">!=</span>&nbsp;<span class="ident" id="6676583">exp</span>&nbsp;<span class="op" id="6676587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6676593">t</span><span class="op" id="6676594">.</span><span class="ident" id="6676595">Errorf</span><span class="op" id="6676601">(</span><span class="string" id="6676602">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6676635">,</span>&nbsp;<span class="ident" id="6676637">got</span><span class="op" id="6676640">,</span>&nbsp;<span class="ident" id="6676642">i</span><span class="op" id="6676643">,</span>&nbsp;<span class="ident" id="6676645">exp</span><span class="op" id="6676648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6676660">}</span><br>
<span class="lineno">375</span><span class="op" id="6676662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6676665">func</span>&nbsp;<span class="ident" id="6676670">getField</span><span class="op" id="6676678">(</span><span class="ident" id="6676679">file</span>&nbsp;<span class="op" id="6676684">*</span><span class="ident" id="6676685">ast</span><span class="op" id="6676688">.</span><span class="ident" id="6676689">File</span><span class="op" id="6676693">,</span>&nbsp;<span class="ident" id="6676695">fieldname</span>&nbsp;<span class="builtintype" id="6676705">string</span><span class="op" id="6676711">)</span>&nbsp;<span class="op" id="6676713">*</span><span class="ident" id="6676714">ast</span><span class="op" id="6676717">.</span><span class="ident" id="6676718">Field</span>&nbsp;<span class="op" id="6676724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6676727">parts</span>&nbsp;<span class="op" id="6676733">:=</span>&nbsp;<span class="ident" id="6676736">strings</span><span class="op" id="6676743">.</span><span class="ident" id="6676744">Split</span><span class="op" id="6676749">(</span><span class="ident" id="6676750">fieldname</span><span class="op" id="6676759">,</span>&nbsp;<span class="string" id="6676761">&#34;.&#34;</span><span class="op" id="6676764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676767">for</span>&nbsp;<span class="ident" id="6676771">_</span><span class="op" id="6676772">,</span>&nbsp;<span class="ident" id="6676774">d</span>&nbsp;<span class="op" id="6676776">:=</span>&nbsp;<span class="keyword" id="6676779">range</span>&nbsp;<span class="ident" id="6676785">file</span><span class="op" id="6676789">.</span><span class="ident" id="6676790">Decls</span>&nbsp;<span class="op" id="6676796">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676800">if</span>&nbsp;<span class="ident" id="6676803">d</span><span class="op" id="6676804">,</span>&nbsp;<span class="ident" id="6676806">ok</span>&nbsp;<span class="op" id="6676809">:=</span>&nbsp;<span class="ident" id="6676812">d</span><span class="op" id="6676813">.</span><span class="op" id="6676814">(</span><span class="op" id="6676815">*</span><span class="ident" id="6676816">ast</span><span class="op" id="6676819">.</span><span class="ident" id="6676820">GenDecl</span><span class="op" id="6676827">)</span><span class="op" id="6676828">;</span>&nbsp;<span class="ident" id="6676830">ok</span>&nbsp;<span class="op" id="6676833">&amp;&amp;</span>&nbsp;<span class="ident" id="6676836">d</span><span class="op" id="6676837">.</span><span class="ident" id="6676838">Tok</span>&nbsp;<span class="op" id="6676842">==</span>&nbsp;<span class="ident" id="6676845">token</span><span class="op" id="6676850">.</span><span class="ident" id="6676851">TYPE</span>&nbsp;<span class="op" id="6676856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676861">for</span>&nbsp;<span class="ident" id="6676865">_</span><span class="op" id="6676866">,</span>&nbsp;<span class="ident" id="6676868">s</span>&nbsp;<span class="op" id="6676870">:=</span>&nbsp;<span class="keyword" id="6676873">range</span>&nbsp;<span class="ident" id="6676879">d</span><span class="op" id="6676880">.</span><span class="ident" id="6676881">Specs</span>&nbsp;<span class="op" id="6676887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676893">if</span>&nbsp;<span class="ident" id="6676896">s</span><span class="op" id="6676897">,</span>&nbsp;<span class="ident" id="6676899">ok</span>&nbsp;<span class="op" id="6676902">:=</span>&nbsp;<span class="ident" id="6676905">s</span><span class="op" id="6676906">.</span><span class="op" id="6676907">(</span><span class="op" id="6676908">*</span><span class="ident" id="6676909">ast</span><span class="op" id="6676912">.</span><span class="ident" id="6676913">TypeSpec</span><span class="op" id="6676921">)</span><span class="op" id="6676922">;</span>&nbsp;<span class="ident" id="6676924">ok</span>&nbsp;<span class="op" id="6676927">&amp;&amp;</span>&nbsp;<span class="ident" id="6676930">s</span><span class="op" id="6676931">.</span><span class="ident" id="6676932">Name</span><span class="op" id="6676936">.</span><span class="ident" id="6676937">Name</span>&nbsp;<span class="op" id="6676942">==</span>&nbsp;<span class="ident" id="6676945">parts</span><span class="op" id="6676950">[</span><span class="num" id="6676951">0</span><span class="op" id="6676952">]</span>&nbsp;<span class="op" id="6676954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6676961">if</span>&nbsp;<span class="ident" id="6676964">s</span><span class="op" id="6676965">,</span>&nbsp;<span class="ident" id="6676967">ok</span>&nbsp;<span class="op" id="6676970">:=</span>&nbsp;<span class="ident" id="6676973">s</span><span class="op" id="6676974">.</span><span class="ident" id="6676975">Type</span><span class="op" id="6676979">.</span><span class="op" id="6676980">(</span><span class="op" id="6676981">*</span><span class="ident" id="6676982">ast</span><span class="op" id="6676985">.</span><span class="ident" id="6676986">StructType</span><span class="op" id="6676996">)</span><span class="op" id="6676997">;</span>&nbsp;<span class="ident" id="6676999">ok</span>&nbsp;<span class="op" id="6677002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677010">for</span>&nbsp;<span class="ident" id="6677014">_</span><span class="op" id="6677015">,</span>&nbsp;<span class="ident" id="6677017">f</span>&nbsp;<span class="op" id="6677019">:=</span>&nbsp;<span class="keyword" id="6677022">range</span>&nbsp;<span class="ident" id="6677028">s</span><span class="op" id="6677029">.</span><span class="ident" id="6677030">Fields</span><span class="op" id="6677036">.</span><span class="ident" id="6677037">List</span>&nbsp;<span class="op" id="6677042">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677051">for</span>&nbsp;<span class="ident" id="6677055">_</span><span class="op" id="6677056">,</span>&nbsp;<span class="ident" id="6677058">name</span>&nbsp;<span class="op" id="6677063">:=</span>&nbsp;<span class="keyword" id="6677066">range</span>&nbsp;<span class="ident" id="6677072">f</span><span class="op" id="6677073">.</span><span class="ident" id="6677074">Names</span>&nbsp;<span class="op" id="6677080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677090">if</span>&nbsp;<span class="ident" id="6677093">name</span><span class="op" id="6677097">.</span><span class="ident" id="6677098">Name</span>&nbsp;<span class="op" id="6677103">==</span>&nbsp;<span class="ident" id="6677106">parts</span><span class="op" id="6677111">[</span><span class="num" id="6677112">1</span><span class="op" id="6677113">]</span>&nbsp;<span class="op" id="6677115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677126">return</span>&nbsp;<span class="ident" id="6677133">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677152">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677182">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677188">return</span>&nbsp;<span class="ident" id="6677195">nil</span><br>
<span class="lineno"></span><span class="op" id="6677199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6677202">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="6677276">func</span>&nbsp;<span class="ident" id="6677281">commentText</span><span class="op" id="6677292">(</span><span class="ident" id="6677293">c</span>&nbsp;<span class="op" id="6677295">*</span><span class="ident" id="6677296">ast</span><span class="op" id="6677299">.</span><span class="ident" id="6677300">CommentGroup</span><span class="op" id="6677312">)</span>&nbsp;<span class="builtintype" id="6677314">string</span>&nbsp;<span class="op" id="6677321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677324">var</span>&nbsp;<span class="ident" id="6677328">buf</span>&nbsp;<span class="ident" id="6677332">bytes</span><span class="op" id="6677337">.</span><span class="ident" id="6677338">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677346">if</span>&nbsp;<span class="ident" id="6677349">c</span>&nbsp;<span class="op" id="6677351">!=</span>&nbsp;<span class="ident" id="6677354">nil</span>&nbsp;<span class="op" id="6677358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677362">for</span>&nbsp;<span class="ident" id="6677366">_</span><span class="op" id="6677367">,</span>&nbsp;<span class="ident" id="6677369">c</span>&nbsp;<span class="op" id="6677371">:=</span>&nbsp;<span class="keyword" id="6677374">range</span>&nbsp;<span class="ident" id="6677380">c</span><span class="op" id="6677381">.</span><span class="ident" id="6677382">List</span>&nbsp;<span class="op" id="6677387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6677392">buf</span><span class="op" id="6677395">.</span><span class="ident" id="6677396">WriteString</span><span class="op" id="6677407">(</span><span class="ident" id="6677408">c</span><span class="op" id="6677409">.</span><span class="ident" id="6677410">Text</span><span class="op" id="6677414">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677424">return</span>&nbsp;<span class="ident" id="6677431">buf</span><span class="op" id="6677434">.</span><span class="ident" id="6677435">String</span><span class="op" id="6677441">(</span><span class="op" id="6677442">)</span><br>
<span class="lineno"></span><span class="op" id="6677444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="6677447">func</span>&nbsp;<span class="ident" id="6677452">checkFieldComments</span><span class="op" id="6677470">(</span><span class="ident" id="6677471">t</span>&nbsp;<span class="op" id="6677473">*</span><span class="ident" id="6677474">testing</span><span class="op" id="6677481">.</span><span class="ident" id="6677482">T</span><span class="op" id="6677483">,</span>&nbsp;<span class="ident" id="6677485">file</span>&nbsp;<span class="op" id="6677490">*</span><span class="ident" id="6677491">ast</span><span class="op" id="6677494">.</span><span class="ident" id="6677495">File</span><span class="op" id="6677499">,</span>&nbsp;<span class="ident" id="6677501">fieldname</span><span class="op" id="6677510">,</span>&nbsp;<span class="ident" id="6677512">lead</span><span class="op" id="6677516">,</span>&nbsp;<span class="ident" id="6677518">line</span>&nbsp;<span class="builtintype" id="6677523">string</span><span class="op" id="6677529">)</span>&nbsp;<span class="op" id="6677531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6677534">f</span>&nbsp;<span class="op" id="6677536">:=</span>&nbsp;<span class="ident" id="6677539">getField</span><span class="op" id="6677547">(</span><span class="ident" id="6677548">file</span><span class="op" id="6677552">,</span>&nbsp;<span class="ident" id="6677554">fieldname</span><span class="op" id="6677563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677566">if</span>&nbsp;<span class="ident" id="6677569">f</span>&nbsp;<span class="op" id="6677571">==</span>&nbsp;<span class="ident" id="6677574">nil</span>&nbsp;<span class="op" id="6677578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6677582">t</span><span class="op" id="6677583">.</span><span class="ident" id="6677584">Fatalf</span><span class="op" id="6677590">(</span><span class="string" id="6677591">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="6677612">,</span>&nbsp;<span class="ident" id="6677614">fieldname</span><span class="op" id="6677623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677626">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677629">if</span>&nbsp;<span class="ident" id="6677632">got</span>&nbsp;<span class="op" id="6677636">:=</span>&nbsp;<span class="ident" id="6677639">commentText</span><span class="op" id="6677650">(</span><span class="ident" id="6677651">f</span><span class="op" id="6677652">.</span><span class="ident" id="6677653">Doc</span><span class="op" id="6677656">)</span><span class="op" id="6677657">;</span>&nbsp;<span class="ident" id="6677659">got</span>&nbsp;<span class="op" id="6677663">!=</span>&nbsp;<span class="ident" id="6677666">lead</span>&nbsp;<span class="op" id="6677671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6677675">t</span><span class="op" id="6677676">.</span><span class="ident" id="6677677">Errorf</span><span class="op" id="6677683">(</span><span class="string" id="6677684">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6677718">,</span>&nbsp;<span class="ident" id="6677720">got</span><span class="op" id="6677723">,</span>&nbsp;<span class="ident" id="6677725">lead</span><span class="op" id="6677729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6677735">if</span>&nbsp;<span class="ident" id="6677738">got</span>&nbsp;<span class="op" id="6677742">:=</span>&nbsp;<span class="ident" id="6677745">commentText</span><span class="op" id="6677756">(</span><span class="ident" id="6677757">f</span><span class="op" id="6677758">.</span><span class="ident" id="6677759">Comment</span><span class="op" id="6677766">)</span><span class="op" id="6677767">;</span>&nbsp;<span class="ident" id="6677769">got</span>&nbsp;<span class="op" id="6677773">!=</span>&nbsp;<span class="ident" id="6677776">line</span>&nbsp;<span class="op" id="6677781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6677785">t</span><span class="op" id="6677786">.</span><span class="ident" id="6677787">Errorf</span><span class="op" id="6677793">(</span><span class="string" id="6677794">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6677828">,</span>&nbsp;<span class="ident" id="6677830">got</span><span class="op" id="6677833">,</span>&nbsp;<span class="ident" id="6677835">line</span><span class="op" id="6677839">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6677842">}</span><br>
<span class="lineno"></span><span class="op" id="6677844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6677847">func</span>&nbsp;<span class="ident" id="6677852">TestLeadAndLineComments</span><span class="op" id="6677875">(</span><span class="ident" id="6677876">t</span>&nbsp;<span class="op" id="6677878">*</span><span class="ident" id="6677879">testing</span><span class="op" id="6677886">.</span><span class="ident" id="6677887">T</span><span class="op" id="6677888">)</span>&nbsp;<span class="op" id="6677890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6677893">f</span><span class="op" id="6677894">,</span>&nbsp;<span class="ident" id="6677896">err</span>&nbsp;<span class="op" id="6677900">:=</span>&nbsp;<span class="ident" id="6677903">ParseFile</span><span class="op" id="6677912">(</span><span class="ident" id="6677913">fset</span><span class="op" id="6677917">,</span>&nbsp;<span class="string" id="6677919">&#34;&#34;</span><span class="op" id="6677921">,</span>&nbsp;<span class="string" id="6677923">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspf3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="6678115">,</span>&nbsp;<span class="ident" id="6678117">ParseComments</span><span class="op" id="6678130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6678133">if</span>&nbsp;<span class="ident" id="6678136">err</span>&nbsp;<span class="op" id="6678140">!=</span>&nbsp;<span class="ident" id="6678143">nil</span>&nbsp;<span class="op" id="6678147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6678151">t</span><span class="op" id="6678152">.</span><span class="ident" id="6678153">Fatal</span><span class="op" id="6678158">(</span><span class="ident" id="6678159">err</span><span class="op" id="6678162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6678165">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6678168">checkFieldComments</span><span class="op" id="6678186">(</span><span class="ident" id="6678187">t</span><span class="op" id="6678188">,</span>&nbsp;<span class="ident" id="6678190">f</span><span class="op" id="6678191">,</span>&nbsp;<span class="string" id="6678193">&#34;T.F1&#34;</span><span class="op" id="6678199">,</span>&nbsp;<span class="string" id="6678201">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="6678226">,</span>&nbsp;<span class="string" id="6678228">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6678253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6678256">checkFieldComments</span><span class="op" id="6678274">(</span><span class="ident" id="6678275">t</span><span class="op" id="6678276">,</span>&nbsp;<span class="ident" id="6678278">f</span><span class="op" id="6678279">,</span>&nbsp;<span class="string" id="6678281">&#34;T.F2&#34;</span><span class="op" id="6678287">,</span>&nbsp;<span class="string" id="6678289">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="6678311">,</span>&nbsp;<span class="string" id="6678313">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6678333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6678336">checkFieldComments</span><span class="op" id="6678354">(</span><span class="ident" id="6678355">t</span><span class="op" id="6678356">,</span>&nbsp;<span class="ident" id="6678358">f</span><span class="op" id="6678359">,</span>&nbsp;<span class="string" id="6678361">&#34;T.f3&#34;</span><span class="op" id="6678367">,</span>&nbsp;<span class="string" id="6678369">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="6678389">,</span>&nbsp;<span class="string" id="6678391">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6678411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6678414">ast</span><span class="op" id="6678417">.</span><span class="ident" id="6678418">FileExports</span><span class="op" id="6678429">(</span><span class="ident" id="6678430">f</span><span class="op" id="6678431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6678434">checkFieldComments</span><span class="op" id="6678452">(</span><span class="ident" id="6678453">t</span><span class="op" id="6678454">,</span>&nbsp;<span class="ident" id="6678456">f</span><span class="op" id="6678457">,</span>&nbsp;<span class="string" id="6678459">&#34;T.F1&#34;</span><span class="op" id="6678465">,</span>&nbsp;<span class="string" id="6678467">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="6678492">,</span>&nbsp;<span class="string" id="6678494">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6678519">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6678522">checkFieldComments</span><span class="op" id="6678540">(</span><span class="ident" id="6678541">t</span><span class="op" id="6678542">,</span>&nbsp;<span class="ident" id="6678544">f</span><span class="op" id="6678545">,</span>&nbsp;<span class="string" id="6678547">&#34;T.F2&#34;</span><span class="op" id="6678553">,</span>&nbsp;<span class="string" id="6678555">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="6678577">,</span>&nbsp;<span class="string" id="6678579">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6678599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6678602">if</span>&nbsp;<span class="ident" id="6678605">getField</span><span class="op" id="6678613">(</span><span class="ident" id="6678614">f</span><span class="op" id="6678615">,</span>&nbsp;<span class="string" id="6678617">&#34;T.f3&#34;</span><span class="op" id="6678623">)</span>&nbsp;<span class="op" id="6678625">!=</span>&nbsp;<span class="ident" id="6678628">nil</span>&nbsp;<span class="op" id="6678632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6678636">t</span><span class="op" id="6678637">.</span><span class="ident" id="6678638">Error</span><span class="op" id="6678643">(</span><span class="string" id="6678644">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="6678671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6678674">}</span><br>
<span class="lineno"></span><span class="op" id="6678676">}</span>
</div>
</body>
</html>
