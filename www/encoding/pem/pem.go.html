<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4374061">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4374116">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4374170">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4374221">//&nbsp;Package&nbsp;pem&nbsp;implements&nbsp;the&nbsp;PEM&nbsp;data&nbsp;encoding,&nbsp;which&nbsp;originated&nbsp;in&nbsp;Privacy</span><br>
<span class="lineno"></span><span class="comment" id="4374298">//&nbsp;Enhanced&nbsp;Mail.&nbsp;The&nbsp;most&nbsp;common&nbsp;use&nbsp;of&nbsp;PEM&nbsp;encoding&nbsp;today&nbsp;is&nbsp;in&nbsp;TLS&nbsp;keys&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4374377">//&nbsp;certificates.&nbsp;See&nbsp;RFC&nbsp;1421.</span><br>
<span class="lineno"></span><span class="keyword" id="4374408">package</span>&nbsp;<span class="ident" id="4374416">pem</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4374421">import</span>&nbsp;<span class="op" id="4374428">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4374431">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4374440">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4374459">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4374465">&#34;sort&#34;</span><br>
<span class="lineno">15</span><span class="op" id="4374472">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4374475">//&nbsp;A&nbsp;Block&nbsp;represents&nbsp;a&nbsp;PEM&nbsp;encoded&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="4374522">//</span><br>
<span class="lineno"></span><span class="comment" id="4374525">//&nbsp;The&nbsp;encoded&nbsp;form&nbsp;is:</span><br>
<span class="lineno">20</span><span class="comment" id="4374549">//&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;Type-----</span><br>
<span class="lineno"></span><span class="comment" id="4374576">//&nbsp;&nbsp;&nbsp;&nbsp;Headers</span><br>
<span class="lineno"></span><span class="comment" id="4374590">//&nbsp;&nbsp;&nbsp;&nbsp;base64-encoded&nbsp;Bytes</span><br>
<span class="lineno"></span><span class="comment" id="4374617">//&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;Type-----</span><br>
<span class="lineno"></span><span class="comment" id="4374642">//&nbsp;where&nbsp;Headers&nbsp;is&nbsp;a&nbsp;possibly&nbsp;empty&nbsp;sequence&nbsp;of&nbsp;Key:&nbsp;Value&nbsp;lines.</span><br>
<span class="lineno">25</span><span class="keyword" id="4374709">type</span>&nbsp;<span class="ident" id="4374714">Block</span>&nbsp;<span class="keyword" id="4374720">struct</span>&nbsp;<span class="op" id="4374727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4374730">Type</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4374738">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4374756">//&nbsp;The&nbsp;type,&nbsp;taken&nbsp;from&nbsp;the&nbsp;preamble&nbsp;(i.e.&nbsp;&#34;RSA&nbsp;PRIVATE&nbsp;KEY&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4374820">Headers</span>&nbsp;<span class="keyword" id="4374828">map</span><span class="op" id="4374831">[</span><span class="builtintype" id="4374832">string</span><span class="op" id="4374838">]</span><span class="builtintype" id="4374839">string</span>&nbsp;<span class="comment" id="4374846">//&nbsp;Optional&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4374868">Bytes</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4374876">[</span><span class="op" id="4374877">]</span><span class="builtintype" id="4374878">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4374894">//&nbsp;The&nbsp;decoded&nbsp;bytes&nbsp;of&nbsp;the&nbsp;contents.&nbsp;Typically&nbsp;a&nbsp;DER&nbsp;encoded&nbsp;ASN.1&nbsp;structure.</span><br>
<span class="lineno"></span><span class="op" id="4374973">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="4374976">//&nbsp;getLine&nbsp;results&nbsp;the&nbsp;first&nbsp;\r\n&nbsp;or&nbsp;\n&nbsp;delineated&nbsp;line&nbsp;from&nbsp;the&nbsp;given&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="4375052">//&nbsp;array.&nbsp;The&nbsp;line&nbsp;does&nbsp;not&nbsp;include&nbsp;trailing&nbsp;whitespace&nbsp;or&nbsp;the&nbsp;trailing&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="4375128">//&nbsp;line&nbsp;bytes.&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;byte&nbsp;array&nbsp;(also&nbsp;not&nbsp;including&nbsp;the&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="4375208">//&nbsp;bytes)&nbsp;is&nbsp;also&nbsp;returned&nbsp;and&nbsp;this&nbsp;will&nbsp;always&nbsp;be&nbsp;smaller&nbsp;than&nbsp;the&nbsp;original</span><br>
<span class="lineno">35</span><span class="comment" id="4375285">//&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4375298">func</span>&nbsp;<span class="ident" id="4375303">getLine</span><span class="op" id="4375310">(</span><span class="ident" id="4375311">data</span>&nbsp;<span class="op" id="4375316">[</span><span class="op" id="4375317">]</span><span class="builtintype" id="4375318">byte</span><span class="op" id="4375322">)</span>&nbsp;<span class="op" id="4375324">(</span><span class="ident" id="4375325">line</span><span class="op" id="4375329">,</span>&nbsp;<span class="ident" id="4375331">rest</span>&nbsp;<span class="op" id="4375336">[</span><span class="op" id="4375337">]</span><span class="builtintype" id="4375338">byte</span><span class="op" id="4375342">)</span>&nbsp;<span class="op" id="4375344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375347">i</span>&nbsp;<span class="op" id="4375349">:=</span>&nbsp;<span class="ident" id="4375352"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4375357">.</span><span class="ident" id="4375358">Index</span><span class="op" id="4375363">(</span><span class="ident" id="4375364"><a href="/encoding/pem/pem.go.html#4375311">data</a></span><span class="op" id="4375368">,</span>&nbsp;<span class="op" id="4375370">[</span><span class="op" id="4375371">]</span><span class="builtintype" id="4375372">byte</span><span class="op" id="4375376">{</span><span class="string" id="4375377">&#39;\n&#39;</span><span class="op" id="4375381">}</span><span class="op" id="4375382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4375385">var</span>&nbsp;<span class="ident" id="4375389">j</span>&nbsp;<span class="builtintype" id="4375391">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4375396">if</span>&nbsp;<span class="ident" id="4375399"><a href="/encoding/pem/pem.go.html#4375347">i</a></span>&nbsp;<span class="op" id="4375401">&lt;</span>&nbsp;<span class="num" id="4375403">0</span>&nbsp;<span class="op" id="4375405">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375409"><a href="/encoding/pem/pem.go.html#4375347">i</a></span>&nbsp;<span class="op" id="4375411">=</span>&nbsp;<span class="builtinfunc" id="4375413">len</span><span class="op" id="4375416">(</span><span class="ident" id="4375417"><a href="/encoding/pem/pem.go.html#4375311">data</a></span><span class="op" id="4375421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375425"><a href="/encoding/pem/pem.go.html#4375389">j</a></span>&nbsp;<span class="op" id="4375427">=</span>&nbsp;<span class="ident" id="4375429"><a href="/encoding/pem/pem.go.html#4375347">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4375432">}</span>&nbsp;<span class="keyword" id="4375434">else</span>&nbsp;<span class="op" id="4375439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375443"><a href="/encoding/pem/pem.go.html#4375389">j</a></span>&nbsp;<span class="op" id="4375445">=</span>&nbsp;<span class="ident" id="4375447"><a href="/encoding/pem/pem.go.html#4375347">i</a></span>&nbsp;<span class="op" id="4375449">+</span>&nbsp;<span class="num" id="4375451">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4375455">if</span>&nbsp;<span class="ident" id="4375458"><a href="/encoding/pem/pem.go.html#4375347">i</a></span>&nbsp;<span class="op" id="4375460">&gt;</span>&nbsp;<span class="num" id="4375462">0</span>&nbsp;<span class="op" id="4375464">&amp;&amp;</span>&nbsp;<span class="ident" id="4375467"><a href="/encoding/pem/pem.go.html#4375311">data</a></span><span class="op" id="4375471">[</span><span class="ident" id="4375472"><a href="/encoding/pem/pem.go.html#4375347">i</a></span><span class="op" id="4375473">-</span><span class="num" id="4375474">1</span><span class="op" id="4375475">]</span>&nbsp;<span class="op" id="4375477">==</span>&nbsp;<span class="string" id="4375480">&#39;\r&#39;</span>&nbsp;<span class="op" id="4375485">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375490"><a href="/encoding/pem/pem.go.html#4375347">i</a></span><span class="op" id="4375491">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4375496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4375499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4375502">return</span>&nbsp;<span class="ident" id="4375509"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4375514">.</span><span class="ident" id="4375515">TrimRight</span><span class="op" id="4375524">(</span><span class="ident" id="4375525"><a href="/encoding/pem/pem.go.html#4375311">data</a></span><span class="op" id="4375529">[</span><span class="num" id="4375530">0</span><span class="op" id="4375531">:</span><span class="ident" id="4375532"><a href="/encoding/pem/pem.go.html#4375347">i</a></span><span class="op" id="4375533">]</span><span class="op" id="4375534">,</span>&nbsp;<span class="string" id="4375536">&#34;&nbsp;\t&#34;</span><span class="op" id="4375541">)</span><span class="op" id="4375542">,</span>&nbsp;<span class="ident" id="4375544"><a href="/encoding/pem/pem.go.html#4375311">data</a></span><span class="op" id="4375548">[</span><span class="ident" id="4375549"><a href="/encoding/pem/pem.go.html#4375389">j</a></span><span class="op" id="4375550">:</span><span class="op" id="4375551">]</span><br>
<span class="lineno"></span><span class="op" id="4375553">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4375556">//&nbsp;removeWhitespace&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;its&nbsp;input&nbsp;with&nbsp;all&nbsp;spaces,&nbsp;tab&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4375629">//&nbsp;newline&nbsp;characters&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="4375660">func</span>&nbsp;<span class="ident" id="4375665">removeWhitespace</span><span class="op" id="4375681">(</span><span class="ident" id="4375682">data</span>&nbsp;<span class="op" id="4375687">[</span><span class="op" id="4375688">]</span><span class="builtintype" id="4375689">byte</span><span class="op" id="4375693">)</span>&nbsp;<span class="op" id="4375695">[</span><span class="op" id="4375696">]</span><span class="builtintype" id="4375697">byte</span>&nbsp;<span class="op" id="4375702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375705">result</span>&nbsp;<span class="op" id="4375712">:=</span>&nbsp;<span class="builtinfunc" id="4375715">make</span><span class="op" id="4375719">(</span><span class="op" id="4375720">[</span><span class="op" id="4375721">]</span><span class="builtintype" id="4375722">byte</span><span class="op" id="4375726">,</span>&nbsp;<span class="builtinfunc" id="4375728">len</span><span class="op" id="4375731">(</span><span class="ident" id="4375732"><a href="/encoding/pem/pem.go.html#4375682">data</a></span><span class="op" id="4375736">)</span><span class="op" id="4375737">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375740">n</span>&nbsp;<span class="op" id="4375742">:=</span>&nbsp;<span class="num" id="4375745">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4375749">for</span>&nbsp;<span class="ident" id="4375753">_</span><span class="op" id="4375754">,</span>&nbsp;<span class="ident" id="4375756">b</span>&nbsp;<span class="op" id="4375758">:=</span>&nbsp;<span class="keyword" id="4375761">range</span>&nbsp;<span class="ident" id="4375767"><a href="/encoding/pem/pem.go.html#4375682">data</a></span>&nbsp;<span class="op" id="4375772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4375776">if</span>&nbsp;<span class="ident" id="4375779"><a href="/encoding/pem/pem.go.html#4375756">b</a></span>&nbsp;<span class="op" id="4375781">==</span>&nbsp;<span class="string" id="4375784">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4375788">||</span>&nbsp;<span class="ident" id="4375791"><a href="/encoding/pem/pem.go.html#4375756">b</a></span>&nbsp;<span class="op" id="4375793">==</span>&nbsp;<span class="string" id="4375796">&#39;\t&#39;</span>&nbsp;<span class="op" id="4375801">||</span>&nbsp;<span class="ident" id="4375804"><a href="/encoding/pem/pem.go.html#4375756">b</a></span>&nbsp;<span class="op" id="4375806">==</span>&nbsp;<span class="string" id="4375809">&#39;\r&#39;</span>&nbsp;<span class="op" id="4375814">||</span>&nbsp;<span class="ident" id="4375817"><a href="/encoding/pem/pem.go.html#4375756">b</a></span>&nbsp;<span class="op" id="4375819">==</span>&nbsp;<span class="string" id="4375822">&#39;\n&#39;</span>&nbsp;<span class="op" id="4375827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4375832">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4375843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375847"><a href="/encoding/pem/pem.go.html#4375705">result</a></span><span class="op" id="4375853">[</span><span class="ident" id="4375854"><a href="/encoding/pem/pem.go.html#4375740">n</a></span><span class="op" id="4375855">]</span>&nbsp;<span class="op" id="4375857">=</span>&nbsp;<span class="ident" id="4375859"><a href="/encoding/pem/pem.go.html#4375756">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4375863"><a href="/encoding/pem/pem.go.html#4375740">n</a></span><span class="op" id="4375864">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4375868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4375872">return</span>&nbsp;<span class="ident" id="4375879"><a href="/encoding/pem/pem.go.html#4375705">result</a></span><span class="op" id="4375885">[</span><span class="num" id="4375886">0</span><span class="op" id="4375887">:</span><span class="ident" id="4375888"><a href="/encoding/pem/pem.go.html#4375740">n</a></span><span class="op" id="4375889">]</span><br>
<span class="lineno"></span><span class="op" id="4375891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4375894">var</span>&nbsp;<span class="ident" id="4375898">pemStart</span>&nbsp;<span class="op" id="4375907">=</span>&nbsp;<span class="op" id="4375909">[</span><span class="op" id="4375910">]</span><span class="builtintype" id="4375911">byte</span><span class="op" id="4375915">(</span><span class="string" id="4375916">&#34;\n-----BEGIN&nbsp;&#34;</span><span class="op" id="4375931">)</span><br>
<span class="lineno"></span><span class="keyword" id="4375933">var</span>&nbsp;<span class="ident" id="4375937">pemEnd</span>&nbsp;<span class="op" id="4375944">=</span>&nbsp;<span class="op" id="4375946">[</span><span class="op" id="4375947">]</span><span class="builtintype" id="4375948">byte</span><span class="op" id="4375952">(</span><span class="string" id="4375953">&#34;\n-----END&nbsp;&#34;</span><span class="op" id="4375966">)</span><br>
<span class="lineno">70</span><span class="keyword" id="4375968">var</span>&nbsp;<span class="ident" id="4375972">pemEndOfLine</span>&nbsp;<span class="op" id="4375985">=</span>&nbsp;<span class="op" id="4375987">[</span><span class="op" id="4375988">]</span><span class="builtintype" id="4375989">byte</span><span class="op" id="4375993">(</span><span class="string" id="4375994">&#34;-----&#34;</span><span class="op" id="4376001">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4376004">//&nbsp;Decode&nbsp;will&nbsp;find&nbsp;the&nbsp;next&nbsp;PEM&nbsp;formatted&nbsp;block&nbsp;(certificate,&nbsp;private&nbsp;key</span><br>
<span class="lineno"></span><span class="comment" id="4376079">//&nbsp;etc)&nbsp;in&nbsp;the&nbsp;input.&nbsp;It&nbsp;returns&nbsp;that&nbsp;block&nbsp;and&nbsp;the&nbsp;remainder&nbsp;of&nbsp;the&nbsp;input.&nbsp;If</span><br>
<span class="lineno"></span><span class="comment" id="4376158">//&nbsp;no&nbsp;PEM&nbsp;data&nbsp;is&nbsp;found,&nbsp;p&nbsp;is&nbsp;nil&nbsp;and&nbsp;the&nbsp;whole&nbsp;of&nbsp;the&nbsp;input&nbsp;is&nbsp;returned&nbsp;in</span><br>
<span class="lineno">75</span><span class="comment" id="4376234">//&nbsp;rest.</span><br>
<span class="lineno"></span><span class="keyword" id="4376243">func</span>&nbsp;<span class="ident" id="4376248">Decode</span><span class="op" id="4376254">(</span><span class="ident" id="4376255">data</span>&nbsp;<span class="op" id="4376260">[</span><span class="op" id="4376261">]</span><span class="builtintype" id="4376262">byte</span><span class="op" id="4376266">)</span>&nbsp;<span class="op" id="4376268">(</span><span class="ident" id="4376269">p</span>&nbsp;<span class="op" id="4376271">*</span><span class="ident" id="4376272"><a href="/encoding/pem/pem.go.html#4374714">Block</a></span><span class="op" id="4376277">,</span>&nbsp;<span class="ident" id="4376279">rest</span>&nbsp;<span class="op" id="4376284">[</span><span class="op" id="4376285">]</span><span class="builtintype" id="4376286">byte</span><span class="op" id="4376290">)</span>&nbsp;<span class="op" id="4376292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4376295">//&nbsp;pemStart&nbsp;begins&nbsp;with&nbsp;a&nbsp;newline.&nbsp;However,&nbsp;at&nbsp;the&nbsp;very&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4376365">//&nbsp;the&nbsp;byte&nbsp;array,&nbsp;we&#39;ll&nbsp;accept&nbsp;the&nbsp;start&nbsp;string&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4376427"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span>&nbsp;<span class="op" id="4376432">=</span>&nbsp;<span class="ident" id="4376434"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4376440">if</span>&nbsp;<span class="ident" id="4376443"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4376448">.</span><span class="ident" id="4376449">HasPrefix</span><span class="op" id="4376458">(</span><span class="ident" id="4376459"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><span class="op" id="4376463">,</span>&nbsp;<span class="ident" id="4376465"><a href="/encoding/pem/pem.go.html#4375898">pemStart</a></span><span class="op" id="4376473">[</span><span class="num" id="4376474">1</span><span class="op" id="4376475">:</span><span class="op" id="4376476">]</span><span class="op" id="4376477">)</span>&nbsp;<span class="op" id="4376479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4376483"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span>&nbsp;<span class="op" id="4376488">=</span>&nbsp;<span class="ident" id="4376490"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4376494">[</span><span class="builtinfunc" id="4376495">len</span><span class="op" id="4376498">(</span><span class="ident" id="4376499"><a href="/encoding/pem/pem.go.html#4375898">pemStart</a></span><span class="op" id="4376507">)</span><span class="op" id="4376508">-</span><span class="num" id="4376509">1</span>&nbsp;<span class="op" id="4376511">:</span>&nbsp;<span class="builtinfunc" id="4376513">len</span><span class="op" id="4376516">(</span><span class="ident" id="4376517"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><span class="op" id="4376521">)</span><span class="op" id="4376522">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4376525">}</span>&nbsp;<span class="keyword" id="4376527">else</span>&nbsp;<span class="keyword" id="4376532">if</span>&nbsp;<span class="ident" id="4376535">i</span>&nbsp;<span class="op" id="4376537">:=</span>&nbsp;<span class="ident" id="4376540"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4376545">.</span><span class="ident" id="4376546">Index</span><span class="op" id="4376551">(</span><span class="ident" id="4376552"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><span class="op" id="4376556">,</span>&nbsp;<span class="ident" id="4376558"><a href="/encoding/pem/pem.go.html#4375898">pemStart</a></span><span class="op" id="4376566">)</span><span class="op" id="4376567">;</span>&nbsp;<span class="ident" id="4376569"><a href="/encoding/pem/pem.go.html#4376535">i</a></span>&nbsp;<span class="op" id="4376571">&gt;=</span>&nbsp;<span class="num" id="4376574">0</span>&nbsp;<span class="op" id="4376576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4376580"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span>&nbsp;<span class="op" id="4376585">=</span>&nbsp;<span class="ident" id="4376587"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4376591">[</span><span class="ident" id="4376592"><a href="/encoding/pem/pem.go.html#4376535">i</a></span><span class="op" id="4376593">+</span><span class="builtinfunc" id="4376594">len</span><span class="op" id="4376597">(</span><span class="ident" id="4376598"><a href="/encoding/pem/pem.go.html#4375898">pemStart</a></span><span class="op" id="4376606">)</span>&nbsp;<span class="op" id="4376608">:</span>&nbsp;<span class="builtinfunc" id="4376610">len</span><span class="op" id="4376613">(</span><span class="ident" id="4376614"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><span class="op" id="4376618">)</span><span class="op" id="4376619">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4376622">}</span>&nbsp;<span class="keyword" id="4376624">else</span>&nbsp;<span class="op" id="4376629">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4376633">return</span>&nbsp;<span class="ident" id="4376640">nil</span><span class="op" id="4376643">,</span>&nbsp;<span class="ident" id="4376645"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4376651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4376655">typeLine</span><span class="op" id="4376663">,</span>&nbsp;<span class="ident" id="4376665"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span>&nbsp;<span class="op" id="4376670">:=</span>&nbsp;<span class="ident" id="4376673"><a href="/encoding/pem/pem.go.html#4375303">getLine</a></span><span class="op" id="4376680">(</span><span class="ident" id="4376681"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4376685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4376688">if</span>&nbsp;<span class="op" id="4376691">!</span><span class="ident" id="4376692"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4376697">.</span><span class="ident" id="4376698">HasSuffix</span><span class="op" id="4376707">(</span><span class="ident" id="4376708"><a href="/encoding/pem/pem.go.html#4376655">typeLine</a></span><span class="op" id="4376716">,</span>&nbsp;<span class="ident" id="4376718"><a href="/encoding/pem/pem.go.html#4375972">pemEndOfLine</a></span><span class="op" id="4376730">)</span>&nbsp;<span class="op" id="4376732">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4376736">return</span>&nbsp;<span class="ident" id="4376743"><a href="/encoding/pem/pem.go.html#4377770">decodeError</a></span><span class="op" id="4376754">(</span><span class="ident" id="4376755"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><span class="op" id="4376759">,</span>&nbsp;<span class="ident" id="4376761"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4376765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4376768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4376771"><a href="/encoding/pem/pem.go.html#4376655">typeLine</a></span>&nbsp;<span class="op" id="4376780">=</span>&nbsp;<span class="ident" id="4376782"><a href="/encoding/pem/pem.go.html#4376655">typeLine</a></span><span class="op" id="4376790">[</span><span class="num" id="4376791">0</span>&nbsp;<span class="op" id="4376793">:</span>&nbsp;<span class="builtinfunc" id="4376795">len</span><span class="op" id="4376798">(</span><span class="ident" id="4376799"><a href="/encoding/pem/pem.go.html#4376655">typeLine</a></span><span class="op" id="4376807">)</span><span class="op" id="4376808">-</span><span class="builtinfunc" id="4376809">len</span><span class="op" id="4376812">(</span><span class="ident" id="4376813"><a href="/encoding/pem/pem.go.html#4375972">pemEndOfLine</a></span><span class="op" id="4376825">)</span><span class="op" id="4376826">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4376830"><a href="/encoding/pem/pem.go.html#4376269">p</a></span>&nbsp;<span class="op" id="4376832">=</span>&nbsp;<span class="op" id="4376834">&amp;</span><span class="ident" id="4376835"><a href="/encoding/pem/pem.go.html#4374714">Block</a></span><span class="op" id="4376840">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4376844">Headers</span><span class="op" id="4376851">:</span>&nbsp;<span class="builtinfunc" id="4376853">make</span><span class="op" id="4376857">(</span><span class="keyword" id="4376858">map</span><span class="op" id="4376861">[</span><span class="builtintype" id="4376862">string</span><span class="op" id="4376868">]</span><span class="builtintype" id="4376869">string</span><span class="op" id="4376875">)</span><span class="op" id="4376876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4376880">Type</span><span class="op" id="4376884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4376889">string</span><span class="op" id="4376895">(</span><span class="ident" id="4376896"><a href="/encoding/pem/pem.go.html#4376655">typeLine</a></span><span class="op" id="4376904">)</span><span class="op" id="4376905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4376908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4376912">for</span>&nbsp;<span class="op" id="4376916">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4376920">//&nbsp;This&nbsp;loop&nbsp;terminates&nbsp;because&nbsp;getLine&#39;s&nbsp;second&nbsp;result&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4376981">//&nbsp;always&nbsp;smaller&nbsp;than&nbsp;its&nbsp;argument.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377020">if</span>&nbsp;<span class="builtinfunc" id="4377023">len</span><span class="op" id="4377026">(</span><span class="ident" id="4377027"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4377031">)</span>&nbsp;<span class="op" id="4377033">==</span>&nbsp;<span class="num" id="4377036">0</span>&nbsp;<span class="op" id="4377038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377043">return</span>&nbsp;<span class="ident" id="4377050">nil</span><span class="op" id="4377053">,</span>&nbsp;<span class="ident" id="4377055"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4377062">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377066">line</span><span class="op" id="4377070">,</span>&nbsp;<span class="ident" id="4377072">next</span>&nbsp;<span class="op" id="4377077">:=</span>&nbsp;<span class="ident" id="4377080"><a href="/encoding/pem/pem.go.html#4375303">getLine</a></span><span class="op" id="4377087">(</span><span class="ident" id="4377088"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4377092">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377097">i</span>&nbsp;<span class="op" id="4377099">:=</span>&nbsp;<span class="ident" id="4377102"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4377107">.</span><span class="ident" id="4377108">Index</span><span class="op" id="4377113">(</span><span class="ident" id="4377114"><a href="/encoding/pem/pem.go.html#4377066">line</a></span><span class="op" id="4377118">,</span>&nbsp;<span class="op" id="4377120">[</span><span class="op" id="4377121">]</span><span class="builtintype" id="4377122">byte</span><span class="op" id="4377126">{</span><span class="string" id="4377127">&#39;:&#39;</span><span class="op" id="4377130">}</span><span class="op" id="4377131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377135">if</span>&nbsp;<span class="ident" id="4377138"><a href="/encoding/pem/pem.go.html#4377097">i</a></span>&nbsp;<span class="op" id="4377140">==</span>&nbsp;<span class="op" id="4377143">-</span><span class="num" id="4377144">1</span>&nbsp;<span class="op" id="4377146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377151">break</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4377159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4377164">//&nbsp;TODO(agl):&nbsp;need&nbsp;to&nbsp;cope&nbsp;with&nbsp;values&nbsp;that&nbsp;spread&nbsp;across&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377231">key</span><span class="op" id="4377234">,</span>&nbsp;<span class="ident" id="4377236">val</span>&nbsp;<span class="op" id="4377240">:=</span>&nbsp;<span class="ident" id="4377243"><a href="/encoding/pem/pem.go.html#4377066">line</a></span><span class="op" id="4377247">[</span><span class="num" id="4377248">0</span><span class="op" id="4377249">:</span><span class="ident" id="4377250"><a href="/encoding/pem/pem.go.html#4377097">i</a></span><span class="op" id="4377251">]</span><span class="op" id="4377252">,</span>&nbsp;<span class="ident" id="4377254"><a href="/encoding/pem/pem.go.html#4377066">line</a></span><span class="op" id="4377258">[</span><span class="ident" id="4377259"><a href="/encoding/pem/pem.go.html#4377097">i</a></span><span class="op" id="4377260">+</span><span class="num" id="4377261">1</span><span class="op" id="4377262">:</span><span class="op" id="4377263">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377267"><a href="/encoding/pem/pem.go.html#4377231">key</a></span>&nbsp;<span class="op" id="4377271">=</span>&nbsp;<span class="ident" id="4377273"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4377278">.</span><span class="ident" id="4377279">TrimSpace</span><span class="op" id="4377288">(</span><span class="ident" id="4377289"><a href="/encoding/pem/pem.go.html#4377231">key</a></span><span class="op" id="4377292">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377296"><a href="/encoding/pem/pem.go.html#4377236">val</a></span>&nbsp;<span class="op" id="4377300">=</span>&nbsp;<span class="ident" id="4377302"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4377307">.</span><span class="ident" id="4377308">TrimSpace</span><span class="op" id="4377317">(</span><span class="ident" id="4377318"><a href="/encoding/pem/pem.go.html#4377236">val</a></span><span class="op" id="4377321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377325"><a href="/encoding/pem/pem.go.html#4376269">p</a></span><span class="op" id="4377326">.</span><span class="ident" id="4377327">Headers</span><span class="op" id="4377334">[</span><span class="builtintype" id="4377335">string</span><span class="op" id="4377341">(</span><span class="ident" id="4377342"><a href="/encoding/pem/pem.go.html#4377231">key</a></span><span class="op" id="4377345">)</span><span class="op" id="4377346">]</span>&nbsp;<span class="op" id="4377348">=</span>&nbsp;<span class="builtintype" id="4377350">string</span><span class="op" id="4377356">(</span><span class="ident" id="4377357"><a href="/encoding/pem/pem.go.html#4377236">val</a></span><span class="op" id="4377360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377364"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span>&nbsp;<span class="op" id="4377369">=</span>&nbsp;<span class="ident" id="4377371"><a href="/encoding/pem/pem.go.html#4377072">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4377377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377381">i</span>&nbsp;<span class="op" id="4377383">:=</span>&nbsp;<span class="ident" id="4377386"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4377391">.</span><span class="ident" id="4377392">Index</span><span class="op" id="4377397">(</span><span class="ident" id="4377398"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4377402">,</span>&nbsp;<span class="ident" id="4377404"><a href="/encoding/pem/pem.go.html#4375937">pemEnd</a></span><span class="op" id="4377410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377413">if</span>&nbsp;<span class="ident" id="4377416"><a href="/encoding/pem/pem.go.html#4377381">i</a></span>&nbsp;<span class="op" id="4377418">&lt;</span>&nbsp;<span class="num" id="4377420">0</span>&nbsp;<span class="op" id="4377422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377426">return</span>&nbsp;<span class="ident" id="4377433"><a href="/encoding/pem/pem.go.html#4377770">decodeError</a></span><span class="op" id="4377444">(</span><span class="ident" id="4377445"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><span class="op" id="4377449">,</span>&nbsp;<span class="ident" id="4377451"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4377455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4377458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377461">base64Data</span>&nbsp;<span class="op" id="4377472">:=</span>&nbsp;<span class="ident" id="4377475"><a href="/encoding/pem/pem.go.html#4375665">removeWhitespace</a></span><span class="op" id="4377491">(</span><span class="ident" id="4377492"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4377496">[</span><span class="num" id="4377497">0</span><span class="op" id="4377498">:</span><span class="ident" id="4377499"><a href="/encoding/pem/pem.go.html#4377381">i</a></span><span class="op" id="4377500">]</span><span class="op" id="4377501">)</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377505"><a href="/encoding/pem/pem.go.html#4376269">p</a></span><span class="op" id="4377506">.</span><span class="ident" id="4377507">Bytes</span>&nbsp;<span class="op" id="4377513">=</span>&nbsp;<span class="builtinfunc" id="4377515">make</span><span class="op" id="4377519">(</span><span class="op" id="4377520">[</span><span class="op" id="4377521">]</span><span class="builtintype" id="4377522">byte</span><span class="op" id="4377526">,</span>&nbsp;<span class="ident" id="4377528"><a href="/encoding/pem/pem.go.html#4374440">base64</a></span><span class="op" id="4377534">.</span><span class="ident" id="4377535">StdEncoding</span><span class="op" id="4377546">.</span><span class="ident" id="4377547">DecodedLen</span><span class="op" id="4377557">(</span><span class="builtinfunc" id="4377558">len</span><span class="op" id="4377561">(</span><span class="ident" id="4377562"><a href="/encoding/pem/pem.go.html#4377461">base64Data</a></span><span class="op" id="4377572">)</span><span class="op" id="4377573">)</span><span class="op" id="4377574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377577">n</span><span class="op" id="4377578">,</span>&nbsp;<span class="ident" id="4377580">err</span>&nbsp;<span class="op" id="4377584">:=</span>&nbsp;<span class="ident" id="4377587"><a href="/encoding/pem/pem.go.html#4374440">base64</a></span><span class="op" id="4377593">.</span><span class="ident" id="4377594">StdEncoding</span><span class="op" id="4377605">.</span><span class="ident" id="4377606">Decode</span><span class="op" id="4377612">(</span><span class="ident" id="4377613"><a href="/encoding/pem/pem.go.html#4376269">p</a></span><span class="op" id="4377614">.</span><span class="ident" id="4377615">Bytes</span><span class="op" id="4377620">,</span>&nbsp;<span class="ident" id="4377622"><a href="/encoding/pem/pem.go.html#4377461">base64Data</a></span><span class="op" id="4377632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377635">if</span>&nbsp;<span class="ident" id="4377638"><a href="/encoding/pem/pem.go.html#4377580">err</a></span>&nbsp;<span class="op" id="4377642">!=</span>&nbsp;<span class="ident" id="4377645">nil</span>&nbsp;<span class="op" id="4377649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377653">return</span>&nbsp;<span class="ident" id="4377660"><a href="/encoding/pem/pem.go.html#4377770">decodeError</a></span><span class="op" id="4377671">(</span><span class="ident" id="4377672"><a href="/encoding/pem/pem.go.html#4376255">data</a></span><span class="op" id="4377676">,</span>&nbsp;<span class="ident" id="4377678"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4377682">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4377685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377688"><a href="/encoding/pem/pem.go.html#4376269">p</a></span><span class="op" id="4377689">.</span><span class="ident" id="4377690">Bytes</span>&nbsp;<span class="op" id="4377696">=</span>&nbsp;<span class="ident" id="4377698"><a href="/encoding/pem/pem.go.html#4376269">p</a></span><span class="op" id="4377699">.</span><span class="ident" id="4377700">Bytes</span><span class="op" id="4377705">[</span><span class="num" id="4377706">0</span><span class="op" id="4377707">:</span><span class="ident" id="4377708"><a href="/encoding/pem/pem.go.html#4377577">n</a></span><span class="op" id="4377709">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4377713">_</span><span class="op" id="4377714">,</span>&nbsp;<span class="ident" id="4377716"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span>&nbsp;<span class="op" id="4377721">=</span>&nbsp;<span class="ident" id="4377723"><a href="/encoding/pem/pem.go.html#4375303">getLine</a></span><span class="op" id="4377730">(</span><span class="ident" id="4377731"><a href="/encoding/pem/pem.go.html#4376279">rest</a></span><span class="op" id="4377735">[</span><span class="ident" id="4377736"><a href="/encoding/pem/pem.go.html#4377381">i</a></span><span class="op" id="4377737">+</span><span class="builtinfunc" id="4377738">len</span><span class="op" id="4377741">(</span><span class="ident" id="4377742"><a href="/encoding/pem/pem.go.html#4375937">pemEnd</a></span><span class="op" id="4377748">)</span><span class="op" id="4377749">:</span><span class="op" id="4377750">]</span><span class="op" id="4377751">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4377755">return</span><br>
<span class="lineno"></span><span class="op" id="4377762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4377765">func</span>&nbsp;<span class="ident" id="4377770">decodeError</span><span class="op" id="4377781">(</span><span class="ident" id="4377782">data</span><span class="op" id="4377786">,</span>&nbsp;<span class="ident" id="4377788">rest</span>&nbsp;<span class="op" id="4377793">[</span><span class="op" id="4377794">]</span><span class="builtintype" id="4377795">byte</span><span class="op" id="4377799">)</span>&nbsp;<span class="op" id="4377801">(</span><span class="op" id="4377802">*</span><span class="ident" id="4377803"><a href="/encoding/pem/pem.go.html#4374714">Block</a></span><span class="op" id="4377808">,</span>&nbsp;<span class="op" id="4377810">[</span><span class="op" id="4377811">]</span><span class="builtintype" id="4377812">byte</span><span class="op" id="4377816">)</span>&nbsp;<span class="op" id="4377818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4377821">//&nbsp;If&nbsp;we&nbsp;get&nbsp;here&nbsp;then&nbsp;we&nbsp;have&nbsp;rejected&nbsp;a&nbsp;likely&nbsp;looking,&nbsp;but</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4377884">//&nbsp;ultimately&nbsp;invalid&nbsp;PEM&nbsp;block.&nbsp;We&nbsp;need&nbsp;to&nbsp;start&nbsp;over&nbsp;from&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4377951">//&nbsp;position.&nbsp;&nbsp;We&nbsp;have&nbsp;consumed&nbsp;the&nbsp;preamble&nbsp;line&nbsp;and&nbsp;will&nbsp;have&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378024">//&nbsp;any&nbsp;lines&nbsp;which&nbsp;could&nbsp;be&nbsp;header&nbsp;lines.&nbsp;However,&nbsp;a&nbsp;valid&nbsp;preamble</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378093">//&nbsp;line&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;header&nbsp;line,&nbsp;therefore&nbsp;we&nbsp;cannot&nbsp;have&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378164">//&nbsp;the&nbsp;preamble&nbsp;line&nbsp;for&nbsp;the&nbsp;any&nbsp;subsequent&nbsp;block.&nbsp;Thus,&nbsp;we&nbsp;will&nbsp;always</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378237">//&nbsp;find&nbsp;any&nbsp;valid&nbsp;block,&nbsp;no&nbsp;matter&nbsp;what&nbsp;bytes&nbsp;precede&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378296">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378300">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;the&nbsp;input&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378333">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378337">//&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;MALFORMED&nbsp;BLOCK-----</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378376">//&nbsp;&nbsp;&nbsp;&nbsp;junk&nbsp;that&nbsp;may&nbsp;look&nbsp;like&nbsp;header&nbsp;lines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378420">//&nbsp;&nbsp;&nbsp;or&nbsp;data&nbsp;lines,&nbsp;but&nbsp;no&nbsp;END&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378457">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378461">//&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;ACTUAL&nbsp;BLOCK-----</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378497">//&nbsp;&nbsp;&nbsp;&nbsp;realdata</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378513">//&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;ACTUAL&nbsp;BLOCK-----</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378547">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378551">//&nbsp;we&#39;ve&nbsp;failed&nbsp;to&nbsp;parse&nbsp;using&nbsp;the&nbsp;first&nbsp;BEGIN&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4378604">//&nbsp;and&nbsp;now&nbsp;will&nbsp;try&nbsp;again,&nbsp;using&nbsp;the&nbsp;second&nbsp;BEGIN&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4378661">p</span><span class="op" id="4378662">,</span>&nbsp;<span class="ident" id="4378664"><a href="/encoding/pem/pem.go.html#4377788">rest</a></span>&nbsp;<span class="op" id="4378669">:=</span>&nbsp;<span class="ident" id="4378672"><a href="/encoding/pem/pem.go.html#4376248">Decode</a></span><span class="op" id="4378678">(</span><span class="ident" id="4378679"><a href="/encoding/pem/pem.go.html#4377788">rest</a></span><span class="op" id="4378683">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4378686">if</span>&nbsp;<span class="ident" id="4378689"><a href="/encoding/pem/pem.go.html#4378661">p</a></span>&nbsp;<span class="op" id="4378691">==</span>&nbsp;<span class="ident" id="4378694">nil</span>&nbsp;<span class="op" id="4378698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4378702"><a href="/encoding/pem/pem.go.html#4377788">rest</a></span>&nbsp;<span class="op" id="4378707">=</span>&nbsp;<span class="ident" id="4378709"><a href="/encoding/pem/pem.go.html#4377782">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4378715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4378718">return</span>&nbsp;<span class="ident" id="4378725"><a href="/encoding/pem/pem.go.html#4378661">p</a></span><span class="op" id="4378726">,</span>&nbsp;<span class="ident" id="4378728"><a href="/encoding/pem/pem.go.html#4377788">rest</a></span><br>
<span class="lineno"></span><span class="op" id="4378733">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="4378736">const</span>&nbsp;<span class="ident" id="4378742">pemLineLength</span>&nbsp;<span class="op" id="4378756">=</span>&nbsp;<span class="num" id="4378758">64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4378762">type</span>&nbsp;<span class="ident" id="4378767">lineBreaker</span>&nbsp;<span class="keyword" id="4378779">struct</span>&nbsp;<span class="op" id="4378786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4378789">line</span>&nbsp;<span class="op" id="4378794">[</span><span class="ident" id="4378795"><a href="/encoding/pem/pem.go.html#4378742">pemLineLength</a></span><span class="op" id="4378808">]</span><span class="builtintype" id="4378809">byte</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4378815">used</span>&nbsp;<span class="builtintype" id="4378820">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4378825">out</span>&nbsp;&nbsp;<span class="ident" id="4378830"><a href="/encoding/pem/pem.go.html#4374459">io</a></span><span class="op" id="4378832">.</span><span class="ident" id="4378833">Writer</span><br>
<span class="lineno"></span><span class="op" id="4378840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4378843">func</span>&nbsp;<span class="op" id="4378848">(</span><span class="ident" id="4378849">l</span>&nbsp;<span class="op" id="4378851">*</span><span class="ident" id="4378852"><a href="/encoding/pem/pem.go.html#4378767">lineBreaker</a></span><span class="op" id="4378863">)</span>&nbsp;<span class="ident" id="4378865">Write</span><span class="op" id="4378870">(</span><span class="ident" id="4378871">b</span>&nbsp;<span class="op" id="4378873">[</span><span class="op" id="4378874">]</span><span class="builtintype" id="4378875">byte</span><span class="op" id="4378879">)</span>&nbsp;<span class="op" id="4378881">(</span><span class="ident" id="4378882">n</span>&nbsp;<span class="builtintype" id="4378884">int</span><span class="op" id="4378887">,</span>&nbsp;<span class="ident" id="4378889">err</span>&nbsp;<span class="builtintype" id="4378893">error</span><span class="op" id="4378898">)</span>&nbsp;<span class="op" id="4378900">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4378903">if</span>&nbsp;<span class="ident" id="4378906"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4378907">.</span><span class="ident" id="4378908">used</span><span class="op" id="4378912">+</span><span class="builtinfunc" id="4378913">len</span><span class="op" id="4378916">(</span><span class="ident" id="4378917"><a href="/encoding/pem/pem.go.html#4378871">b</a></span><span class="op" id="4378918">)</span>&nbsp;<span class="op" id="4378920">&lt;</span>&nbsp;<span class="ident" id="4378922"><a href="/encoding/pem/pem.go.html#4378742">pemLineLength</a></span>&nbsp;<span class="op" id="4378936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4378940">copy</span><span class="op" id="4378944">(</span><span class="ident" id="4378945"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4378946">.</span><span class="ident" id="4378947">line</span><span class="op" id="4378951">[</span><span class="ident" id="4378952"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4378953">.</span><span class="ident" id="4378954">used</span><span class="op" id="4378958">:</span><span class="op" id="4378959">]</span><span class="op" id="4378960">,</span>&nbsp;<span class="ident" id="4378962"><a href="/encoding/pem/pem.go.html#4378871">b</a></span><span class="op" id="4378963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4378967"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4378968">.</span><span class="ident" id="4378969">used</span>&nbsp;<span class="op" id="4378974">+=</span>&nbsp;<span class="builtinfunc" id="4378977">len</span><span class="op" id="4378980">(</span><span class="ident" id="4378981"><a href="/encoding/pem/pem.go.html#4378871">b</a></span><span class="op" id="4378982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4378986">return</span>&nbsp;<span class="builtinfunc" id="4378993">len</span><span class="op" id="4378996">(</span><span class="ident" id="4378997"><a href="/encoding/pem/pem.go.html#4378871">b</a></span><span class="op" id="4378998">)</span><span class="op" id="4378999">,</span>&nbsp;<span class="ident" id="4379001">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379006">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379010"><a href="/encoding/pem/pem.go.html#4378882">n</a></span><span class="op" id="4379011">,</span>&nbsp;<span class="ident" id="4379013"><a href="/encoding/pem/pem.go.html#4378889">err</a></span>&nbsp;<span class="op" id="4379017">=</span>&nbsp;<span class="ident" id="4379019"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4379020">.</span><span class="ident" id="4379021">out</span><span class="op" id="4379024">.</span><span class="ident" id="4379025">Write</span><span class="op" id="4379030">(</span><span class="ident" id="4379031"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4379032">.</span><span class="ident" id="4379033">line</span><span class="op" id="4379037">[</span><span class="num" id="4379038">0</span><span class="op" id="4379039">:</span><span class="ident" id="4379040"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4379041">.</span><span class="ident" id="4379042">used</span><span class="op" id="4379046">]</span><span class="op" id="4379047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379050">if</span>&nbsp;<span class="ident" id="4379053"><a href="/encoding/pem/pem.go.html#4378889">err</a></span>&nbsp;<span class="op" id="4379057">!=</span>&nbsp;<span class="ident" id="4379060">nil</span>&nbsp;<span class="op" id="4379064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379068">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379076">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379079">excess</span>&nbsp;<span class="op" id="4379086">:=</span>&nbsp;<span class="ident" id="4379089"><a href="/encoding/pem/pem.go.html#4378742">pemLineLength</a></span>&nbsp;<span class="op" id="4379103">-</span>&nbsp;<span class="ident" id="4379105"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4379106">.</span><span class="ident" id="4379107">used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379113"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4379114">.</span><span class="ident" id="4379115">used</span>&nbsp;<span class="op" id="4379120">=</span>&nbsp;<span class="num" id="4379122">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379126"><a href="/encoding/pem/pem.go.html#4378882">n</a></span><span class="op" id="4379127">,</span>&nbsp;<span class="ident" id="4379129"><a href="/encoding/pem/pem.go.html#4378889">err</a></span>&nbsp;<span class="op" id="4379133">=</span>&nbsp;<span class="ident" id="4379135"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4379136">.</span><span class="ident" id="4379137">out</span><span class="op" id="4379140">.</span><span class="ident" id="4379141">Write</span><span class="op" id="4379146">(</span><span class="ident" id="4379147"><a href="/encoding/pem/pem.go.html#4378871">b</a></span><span class="op" id="4379148">[</span><span class="num" id="4379149">0</span><span class="op" id="4379150">:</span><span class="ident" id="4379151"><a href="/encoding/pem/pem.go.html#4379079">excess</a></span><span class="op" id="4379157">]</span><span class="op" id="4379158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379161">if</span>&nbsp;<span class="ident" id="4379164"><a href="/encoding/pem/pem.go.html#4378889">err</a></span>&nbsp;<span class="op" id="4379168">!=</span>&nbsp;<span class="ident" id="4379171">nil</span>&nbsp;<span class="op" id="4379175">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379179">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379191"><a href="/encoding/pem/pem.go.html#4378882">n</a></span><span class="op" id="4379192">,</span>&nbsp;<span class="ident" id="4379194"><a href="/encoding/pem/pem.go.html#4378889">err</a></span>&nbsp;<span class="op" id="4379198">=</span>&nbsp;<span class="ident" id="4379200"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4379201">.</span><span class="ident" id="4379202">out</span><span class="op" id="4379205">.</span><span class="ident" id="4379206">Write</span><span class="op" id="4379211">(</span><span class="op" id="4379212">[</span><span class="op" id="4379213">]</span><span class="builtintype" id="4379214">byte</span><span class="op" id="4379218">{</span><span class="string" id="4379219">&#39;\n&#39;</span><span class="op" id="4379223">}</span><span class="op" id="4379224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379227">if</span>&nbsp;<span class="ident" id="4379230"><a href="/encoding/pem/pem.go.html#4378889">err</a></span>&nbsp;<span class="op" id="4379234">!=</span>&nbsp;<span class="ident" id="4379237">nil</span>&nbsp;<span class="op" id="4379241">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379245">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379257">return</span>&nbsp;<span class="ident" id="4379264"><a href="/encoding/pem/pem.go.html#4378849">l</a></span><span class="op" id="4379265">.</span><span class="ident" id="4379266">Write</span><span class="op" id="4379271">(</span><span class="ident" id="4379272"><a href="/encoding/pem/pem.go.html#4378871">b</a></span><span class="op" id="4379273">[</span><span class="ident" id="4379274"><a href="/encoding/pem/pem.go.html#4379079">excess</a></span><span class="op" id="4379280">:</span><span class="op" id="4379281">]</span><span class="op" id="4379282">)</span><br>
<span class="lineno"></span><span class="op" id="4379284">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="4379287">func</span>&nbsp;<span class="op" id="4379292">(</span><span class="ident" id="4379293">l</span>&nbsp;<span class="op" id="4379295">*</span><span class="ident" id="4379296"><a href="/encoding/pem/pem.go.html#4378767">lineBreaker</a></span><span class="op" id="4379307">)</span>&nbsp;<span class="ident" id="4379309">Close</span><span class="op" id="4379314">(</span><span class="op" id="4379315">)</span>&nbsp;<span class="op" id="4379317">(</span><span class="ident" id="4379318">err</span>&nbsp;<span class="builtintype" id="4379322">error</span><span class="op" id="4379327">)</span>&nbsp;<span class="op" id="4379329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379332">if</span>&nbsp;<span class="ident" id="4379335"><a href="/encoding/pem/pem.go.html#4379293">l</a></span><span class="op" id="4379336">.</span><span class="ident" id="4379337">used</span>&nbsp;<span class="op" id="4379342">&gt;</span>&nbsp;<span class="num" id="4379344">0</span>&nbsp;<span class="op" id="4379346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379350">_</span><span class="op" id="4379351">,</span>&nbsp;<span class="ident" id="4379353"><a href="/encoding/pem/pem.go.html#4379318">err</a></span>&nbsp;<span class="op" id="4379357">=</span>&nbsp;<span class="ident" id="4379359"><a href="/encoding/pem/pem.go.html#4379293">l</a></span><span class="op" id="4379360">.</span><span class="ident" id="4379361">out</span><span class="op" id="4379364">.</span><span class="ident" id="4379365">Write</span><span class="op" id="4379370">(</span><span class="ident" id="4379371"><a href="/encoding/pem/pem.go.html#4379293">l</a></span><span class="op" id="4379372">.</span><span class="ident" id="4379373">line</span><span class="op" id="4379377">[</span><span class="num" id="4379378">0</span><span class="op" id="4379379">:</span><span class="ident" id="4379380"><a href="/encoding/pem/pem.go.html#4379293">l</a></span><span class="op" id="4379381">.</span><span class="ident" id="4379382">used</span><span class="op" id="4379386">]</span><span class="op" id="4379387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379391">if</span>&nbsp;<span class="ident" id="4379394"><a href="/encoding/pem/pem.go.html#4379318">err</a></span>&nbsp;<span class="op" id="4379398">!=</span>&nbsp;<span class="ident" id="4379401">nil</span>&nbsp;<span class="op" id="4379405">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379410">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379423">_</span><span class="op" id="4379424">,</span>&nbsp;<span class="ident" id="4379426"><a href="/encoding/pem/pem.go.html#4379318">err</a></span>&nbsp;<span class="op" id="4379430">=</span>&nbsp;<span class="ident" id="4379432"><a href="/encoding/pem/pem.go.html#4379293">l</a></span><span class="op" id="4379433">.</span><span class="ident" id="4379434">out</span><span class="op" id="4379437">.</span><span class="ident" id="4379438">Write</span><span class="op" id="4379443">(</span><span class="op" id="4379444">[</span><span class="op" id="4379445">]</span><span class="builtintype" id="4379446">byte</span><span class="op" id="4379450">{</span><span class="string" id="4379451">&#39;\n&#39;</span><span class="op" id="4379455">}</span><span class="op" id="4379456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379463">return</span><br>
<span class="lineno"></span><span class="op" id="4379470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4379473">func</span>&nbsp;<span class="ident" id="4379478">writeHeader</span><span class="op" id="4379489">(</span><span class="ident" id="4379490">out</span>&nbsp;<span class="ident" id="4379494"><a href="/encoding/pem/pem.go.html#4374459">io</a></span><span class="op" id="4379496">.</span><span class="ident" id="4379497">Writer</span><span class="op" id="4379503">,</span>&nbsp;<span class="ident" id="4379505">k</span><span class="op" id="4379506">,</span>&nbsp;<span class="ident" id="4379508">v</span>&nbsp;<span class="builtintype" id="4379510">string</span><span class="op" id="4379516">)</span>&nbsp;<span class="builtintype" id="4379518">error</span>&nbsp;<span class="op" id="4379524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379527">_</span><span class="op" id="4379528">,</span>&nbsp;<span class="ident" id="4379530">err</span>&nbsp;<span class="op" id="4379534">:=</span>&nbsp;<span class="ident" id="4379537"><a href="/encoding/pem/pem.go.html#4379490">out</a></span><span class="op" id="4379540">.</span><span class="ident" id="4379541">Write</span><span class="op" id="4379546">(</span><span class="op" id="4379547">[</span><span class="op" id="4379548">]</span><span class="builtintype" id="4379549">byte</span><span class="op" id="4379553">(</span><span class="ident" id="4379554"><a href="/encoding/pem/pem.go.html#4379505">k</a></span>&nbsp;<span class="op" id="4379556">+</span>&nbsp;<span class="string" id="4379558">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4379563">+</span>&nbsp;<span class="ident" id="4379565"><a href="/encoding/pem/pem.go.html#4379508">v</a></span>&nbsp;<span class="op" id="4379567">+</span>&nbsp;<span class="string" id="4379569">&#34;\n&#34;</span><span class="op" id="4379573">)</span><span class="op" id="4379574">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379577">return</span>&nbsp;<span class="ident" id="4379584"><a href="/encoding/pem/pem.go.html#4379530">err</a></span><br>
<span class="lineno"></span><span class="op" id="4379588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4379591">func</span>&nbsp;<span class="ident" id="4379596">Encode</span><span class="op" id="4379602">(</span><span class="ident" id="4379603">out</span>&nbsp;<span class="ident" id="4379607"><a href="/encoding/pem/pem.go.html#4374459">io</a></span><span class="op" id="4379609">.</span><span class="ident" id="4379610">Writer</span><span class="op" id="4379616">,</span>&nbsp;<span class="ident" id="4379618">b</span>&nbsp;<span class="op" id="4379620">*</span><span class="ident" id="4379621"><a href="/encoding/pem/pem.go.html#4374714">Block</a></span><span class="op" id="4379626">)</span>&nbsp;<span class="builtintype" id="4379628">error</span>&nbsp;<span class="op" id="4379634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379637">if</span>&nbsp;<span class="ident" id="4379640">_</span><span class="op" id="4379641">,</span>&nbsp;<span class="ident" id="4379643">err</span>&nbsp;<span class="op" id="4379647">:=</span>&nbsp;<span class="ident" id="4379650"><a href="/encoding/pem/pem.go.html#4379603">out</a></span><span class="op" id="4379653">.</span><span class="ident" id="4379654">Write</span><span class="op" id="4379659">(</span><span class="ident" id="4379660"><a href="/encoding/pem/pem.go.html#4375898">pemStart</a></span><span class="op" id="4379668">[</span><span class="num" id="4379669">1</span><span class="op" id="4379670">:</span><span class="op" id="4379671">]</span><span class="op" id="4379672">)</span><span class="op" id="4379673">;</span>&nbsp;<span class="ident" id="4379675"><a href="/encoding/pem/pem.go.html#4379643">err</a></span>&nbsp;<span class="op" id="4379679">!=</span>&nbsp;<span class="ident" id="4379682">nil</span>&nbsp;<span class="op" id="4379686">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379690">return</span>&nbsp;<span class="ident" id="4379697"><a href="/encoding/pem/pem.go.html#4379643">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379705">if</span>&nbsp;<span class="ident" id="4379708">_</span><span class="op" id="4379709">,</span>&nbsp;<span class="ident" id="4379711">err</span>&nbsp;<span class="op" id="4379715">:=</span>&nbsp;<span class="ident" id="4379718"><a href="/encoding/pem/pem.go.html#4379603">out</a></span><span class="op" id="4379721">.</span><span class="ident" id="4379722">Write</span><span class="op" id="4379727">(</span><span class="op" id="4379728">[</span><span class="op" id="4379729">]</span><span class="builtintype" id="4379730">byte</span><span class="op" id="4379734">(</span><span class="ident" id="4379735"><a href="/encoding/pem/pem.go.html#4379618">b</a></span><span class="op" id="4379736">.</span><span class="ident" id="4379737">Type</span>&nbsp;<span class="op" id="4379742">+</span>&nbsp;<span class="string" id="4379744">&#34;-----\n&#34;</span><span class="op" id="4379753">)</span><span class="op" id="4379754">)</span><span class="op" id="4379755">;</span>&nbsp;<span class="ident" id="4379757"><a href="/encoding/pem/pem.go.html#4379711">err</a></span>&nbsp;<span class="op" id="4379761">!=</span>&nbsp;<span class="ident" id="4379764">nil</span>&nbsp;<span class="op" id="4379768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379772">return</span>&nbsp;<span class="ident" id="4379779"><a href="/encoding/pem/pem.go.html#4379711">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379784">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379788">if</span>&nbsp;<span class="builtinfunc" id="4379791">len</span><span class="op" id="4379794">(</span><span class="ident" id="4379795"><a href="/encoding/pem/pem.go.html#4379618">b</a></span><span class="op" id="4379796">.</span><span class="ident" id="4379797">Headers</span><span class="op" id="4379804">)</span>&nbsp;<span class="op" id="4379806">&gt;</span>&nbsp;<span class="num" id="4379808">0</span>&nbsp;<span class="op" id="4379810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379814">const</span>&nbsp;<span class="ident" id="4379820">procType</span>&nbsp;<span class="op" id="4379829">=</span>&nbsp;<span class="string" id="4379831">&#34;Proc-Type&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379845">h</span>&nbsp;<span class="op" id="4379847">:=</span>&nbsp;<span class="builtinfunc" id="4379850">make</span><span class="op" id="4379854">(</span><span class="op" id="4379855">[</span><span class="op" id="4379856">]</span><span class="builtintype" id="4379857">string</span><span class="op" id="4379863">,</span>&nbsp;<span class="num" id="4379865">0</span><span class="op" id="4379866">,</span>&nbsp;<span class="builtinfunc" id="4379868">len</span><span class="op" id="4379871">(</span><span class="ident" id="4379872"><a href="/encoding/pem/pem.go.html#4379618">b</a></span><span class="op" id="4379873">.</span><span class="ident" id="4379874">Headers</span><span class="op" id="4379881">)</span><span class="op" id="4379882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379886">hasProcType</span>&nbsp;<span class="op" id="4379898">:=</span>&nbsp;<span class="ident" id="4379901">false</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379909">for</span>&nbsp;<span class="ident" id="4379913">k</span>&nbsp;<span class="op" id="4379915">:=</span>&nbsp;<span class="keyword" id="4379918">range</span>&nbsp;<span class="ident" id="4379924"><a href="/encoding/pem/pem.go.html#4379618">b</a></span><span class="op" id="4379925">.</span><span class="ident" id="4379926">Headers</span>&nbsp;<span class="op" id="4379934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379939">if</span>&nbsp;<span class="ident" id="4379942"><a href="/encoding/pem/pem.go.html#4379913">k</a></span>&nbsp;<span class="op" id="4379944">==</span>&nbsp;<span class="ident" id="4379947"><a href="/encoding/pem/pem.go.html#4379820">procType</a></span>&nbsp;<span class="op" id="4379956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4379962"><a href="/encoding/pem/pem.go.html#4379886">hasProcType</a></span>&nbsp;<span class="op" id="4379974">=</span>&nbsp;<span class="ident" id="4379976">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4379985">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4379997">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4380002"><a href="/encoding/pem/pem.go.html#4379845">h</a></span>&nbsp;<span class="op" id="4380004">=</span>&nbsp;<span class="builtinfunc" id="4380006">append</span><span class="op" id="4380012">(</span><span class="ident" id="4380013"><a href="/encoding/pem/pem.go.html#4379845">h</a></span><span class="op" id="4380014">,</span>&nbsp;<span class="ident" id="4380016"><a href="/encoding/pem/pem.go.html#4379913">k</a></span><span class="op" id="4380017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4380025">//&nbsp;The&nbsp;Proc-Type&nbsp;header&nbsp;must&nbsp;be&nbsp;written&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4380074">//&nbsp;See&nbsp;RFC&nbsp;1421,&nbsp;section&nbsp;4.6.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380109">if</span>&nbsp;<span class="ident" id="4380112"><a href="/encoding/pem/pem.go.html#4379886">hasProcType</a></span>&nbsp;<span class="op" id="4380124">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380129">if</span>&nbsp;<span class="ident" id="4380132">err</span>&nbsp;<span class="op" id="4380136">:=</span>&nbsp;<span class="ident" id="4380139"><a href="/encoding/pem/pem.go.html#4379478">writeHeader</a></span><span class="op" id="4380150">(</span><span class="ident" id="4380151"><a href="/encoding/pem/pem.go.html#4379603">out</a></span><span class="op" id="4380154">,</span>&nbsp;<span class="ident" id="4380156"><a href="/encoding/pem/pem.go.html#4379820">procType</a></span><span class="op" id="4380164">,</span>&nbsp;<span class="ident" id="4380166"><a href="/encoding/pem/pem.go.html#4379618">b</a></span><span class="op" id="4380167">.</span><span class="ident" id="4380168">Headers</span><span class="op" id="4380175">[</span><span class="ident" id="4380176"><a href="/encoding/pem/pem.go.html#4379820">procType</a></span><span class="op" id="4380184">]</span><span class="op" id="4380185">)</span><span class="op" id="4380186">;</span>&nbsp;<span class="ident" id="4380188"><a href="/encoding/pem/pem.go.html#4380132">err</a></span>&nbsp;<span class="op" id="4380192">!=</span>&nbsp;<span class="ident" id="4380195">nil</span>&nbsp;<span class="op" id="4380199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380205">return</span>&nbsp;<span class="ident" id="4380212"><a href="/encoding/pem/pem.go.html#4380132">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4380227">//&nbsp;For&nbsp;consistency&nbsp;of&nbsp;output,&nbsp;write&nbsp;other&nbsp;headers&nbsp;sorted&nbsp;by&nbsp;key.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4380294"><a href="/encoding/pem/pem.go.html#4374465">sort</a></span><span class="op" id="4380298">.</span><span class="ident" id="4380299">Strings</span><span class="op" id="4380306">(</span><span class="ident" id="4380307"><a href="/encoding/pem/pem.go.html#4379845">h</a></span><span class="op" id="4380308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380312">for</span>&nbsp;<span class="ident" id="4380316">_</span><span class="op" id="4380317">,</span>&nbsp;<span class="ident" id="4380319">k</span>&nbsp;<span class="op" id="4380321">:=</span>&nbsp;<span class="keyword" id="4380324">range</span>&nbsp;<span class="ident" id="4380330"><a href="/encoding/pem/pem.go.html#4379845">h</a></span>&nbsp;<span class="op" id="4380332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380337">if</span>&nbsp;<span class="ident" id="4380340">err</span>&nbsp;<span class="op" id="4380344">:=</span>&nbsp;<span class="ident" id="4380347"><a href="/encoding/pem/pem.go.html#4379478">writeHeader</a></span><span class="op" id="4380358">(</span><span class="ident" id="4380359"><a href="/encoding/pem/pem.go.html#4379603">out</a></span><span class="op" id="4380362">,</span>&nbsp;<span class="ident" id="4380364"><a href="/encoding/pem/pem.go.html#4380319">k</a></span><span class="op" id="4380365">,</span>&nbsp;<span class="ident" id="4380367"><a href="/encoding/pem/pem.go.html#4379618">b</a></span><span class="op" id="4380368">.</span><span class="ident" id="4380369">Headers</span><span class="op" id="4380376">[</span><span class="ident" id="4380377"><a href="/encoding/pem/pem.go.html#4380319">k</a></span><span class="op" id="4380378">]</span><span class="op" id="4380379">)</span><span class="op" id="4380380">;</span>&nbsp;<span class="ident" id="4380382"><a href="/encoding/pem/pem.go.html#4380340">err</a></span>&nbsp;<span class="op" id="4380386">!=</span>&nbsp;<span class="ident" id="4380389">nil</span>&nbsp;<span class="op" id="4380393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380399">return</span>&nbsp;<span class="ident" id="4380406"><a href="/encoding/pem/pem.go.html#4380340">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380413">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380421">if</span>&nbsp;<span class="ident" id="4380424">_</span><span class="op" id="4380425">,</span>&nbsp;<span class="ident" id="4380427">err</span>&nbsp;<span class="op" id="4380431">:=</span>&nbsp;<span class="ident" id="4380434"><a href="/encoding/pem/pem.go.html#4379603">out</a></span><span class="op" id="4380437">.</span><span class="ident" id="4380438">Write</span><span class="op" id="4380443">(</span><span class="op" id="4380444">[</span><span class="op" id="4380445">]</span><span class="builtintype" id="4380446">byte</span><span class="op" id="4380450">{</span><span class="string" id="4380451">&#39;\n&#39;</span><span class="op" id="4380455">}</span><span class="op" id="4380456">)</span><span class="op" id="4380457">;</span>&nbsp;<span class="ident" id="4380459"><a href="/encoding/pem/pem.go.html#4380427">err</a></span>&nbsp;<span class="op" id="4380463">!=</span>&nbsp;<span class="ident" id="4380466">nil</span>&nbsp;<span class="op" id="4380470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380475">return</span>&nbsp;<span class="ident" id="4380482"><a href="/encoding/pem/pem.go.html#4380427">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380491">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380495">var</span>&nbsp;<span class="ident" id="4380499">breaker</span>&nbsp;<span class="ident" id="4380507"><a href="/encoding/pem/pem.go.html#4378767">lineBreaker</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4380520"><a href="/encoding/pem/pem.go.html#4380499">breaker</a></span><span class="op" id="4380527">.</span><span class="ident" id="4380528">out</span>&nbsp;<span class="op" id="4380532">=</span>&nbsp;<span class="ident" id="4380534"><a href="/encoding/pem/pem.go.html#4379603">out</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4380540">b64</span>&nbsp;<span class="op" id="4380544">:=</span>&nbsp;<span class="ident" id="4380547"><a href="/encoding/pem/pem.go.html#4374440">base64</a></span><span class="op" id="4380553">.</span><span class="ident" id="4380554">NewEncoder</span><span class="op" id="4380564">(</span><span class="ident" id="4380565"><a href="/encoding/pem/pem.go.html#4374440">base64</a></span><span class="op" id="4380571">.</span><span class="ident" id="4380572">StdEncoding</span><span class="op" id="4380583">,</span>&nbsp;<span class="op" id="4380585">&amp;</span><span class="ident" id="4380586"><a href="/encoding/pem/pem.go.html#4380499">breaker</a></span><span class="op" id="4380593">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380596">if</span>&nbsp;<span class="ident" id="4380599">_</span><span class="op" id="4380600">,</span>&nbsp;<span class="ident" id="4380602">err</span>&nbsp;<span class="op" id="4380606">:=</span>&nbsp;<span class="ident" id="4380609"><a href="/encoding/pem/pem.go.html#4380540">b64</a></span><span class="op" id="4380612">.</span><span class="ident" id="4380613">Write</span><span class="op" id="4380618">(</span><span class="ident" id="4380619"><a href="/encoding/pem/pem.go.html#4379618">b</a></span><span class="op" id="4380620">.</span><span class="ident" id="4380621">Bytes</span><span class="op" id="4380626">)</span><span class="op" id="4380627">;</span>&nbsp;<span class="ident" id="4380629"><a href="/encoding/pem/pem.go.html#4380602">err</a></span>&nbsp;<span class="op" id="4380633">!=</span>&nbsp;<span class="ident" id="4380636">nil</span>&nbsp;<span class="op" id="4380640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380644">return</span>&nbsp;<span class="ident" id="4380651"><a href="/encoding/pem/pem.go.html#4380602">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4380659"><a href="/encoding/pem/pem.go.html#4380540">b64</a></span><span class="op" id="4380662">.</span><span class="ident" id="4380663">Close</span><span class="op" id="4380668">(</span><span class="op" id="4380669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4380672"><a href="/encoding/pem/pem.go.html#4380499">breaker</a></span><span class="op" id="4380679">.</span><span class="ident" id="4380680">Close</span><span class="op" id="4380685">(</span><span class="op" id="4380686">)</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380690">if</span>&nbsp;<span class="ident" id="4380693">_</span><span class="op" id="4380694">,</span>&nbsp;<span class="ident" id="4380696">err</span>&nbsp;<span class="op" id="4380700">:=</span>&nbsp;<span class="ident" id="4380703"><a href="/encoding/pem/pem.go.html#4379603">out</a></span><span class="op" id="4380706">.</span><span class="ident" id="4380707">Write</span><span class="op" id="4380712">(</span><span class="ident" id="4380713"><a href="/encoding/pem/pem.go.html#4375937">pemEnd</a></span><span class="op" id="4380719">[</span><span class="num" id="4380720">1</span><span class="op" id="4380721">:</span><span class="op" id="4380722">]</span><span class="op" id="4380723">)</span><span class="op" id="4380724">;</span>&nbsp;<span class="ident" id="4380726"><a href="/encoding/pem/pem.go.html#4380696">err</a></span>&nbsp;<span class="op" id="4380730">!=</span>&nbsp;<span class="ident" id="4380733">nil</span>&nbsp;<span class="op" id="4380737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380741">return</span>&nbsp;<span class="ident" id="4380748"><a href="/encoding/pem/pem.go.html#4380696">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4380753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4380756">_</span><span class="op" id="4380757">,</span>&nbsp;<span class="ident" id="4380759">err</span>&nbsp;<span class="op" id="4380763">:=</span>&nbsp;<span class="ident" id="4380766"><a href="/encoding/pem/pem.go.html#4379603">out</a></span><span class="op" id="4380769">.</span><span class="ident" id="4380770">Write</span><span class="op" id="4380775">(</span><span class="op" id="4380776">[</span><span class="op" id="4380777">]</span><span class="builtintype" id="4380778">byte</span><span class="op" id="4380782">(</span><span class="ident" id="4380783"><a href="/encoding/pem/pem.go.html#4379618">b</a></span><span class="op" id="4380784">.</span><span class="ident" id="4380785">Type</span>&nbsp;<span class="op" id="4380790">+</span>&nbsp;<span class="string" id="4380792">&#34;-----\n&#34;</span><span class="op" id="4380801">)</span><span class="op" id="4380802">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380805">return</span>&nbsp;<span class="ident" id="4380812"><a href="/encoding/pem/pem.go.html#4380759">err</a></span><br>
<span class="lineno"></span><span class="op" id="4380816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4380819">func</span>&nbsp;<span class="ident" id="4380824">EncodeToMemory</span><span class="op" id="4380838">(</span><span class="ident" id="4380839">b</span>&nbsp;<span class="op" id="4380841">*</span><span class="ident" id="4380842"><a href="/encoding/pem/pem.go.html#4374714">Block</a></span><span class="op" id="4380847">)</span>&nbsp;<span class="op" id="4380849">[</span><span class="op" id="4380850">]</span><span class="builtintype" id="4380851">byte</span>&nbsp;<span class="op" id="4380856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380859">var</span>&nbsp;<span class="ident" id="4380863">buf</span>&nbsp;<span class="ident" id="4380867"><a href="/encoding/pem/pem.go.html#4374431">bytes</a></span><span class="op" id="4380872">.</span><span class="ident" id="4380873">Buffer</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4380881"><a href="/encoding/pem/pem.go.html#4379596">Encode</a></span><span class="op" id="4380887">(</span><span class="op" id="4380888">&amp;</span><span class="ident" id="4380889"><a href="/encoding/pem/pem.go.html#4380863">buf</a></span><span class="op" id="4380892">,</span>&nbsp;<span class="ident" id="4380894"><a href="/encoding/pem/pem.go.html#4380839">b</a></span><span class="op" id="4380895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4380898">return</span>&nbsp;<span class="ident" id="4380905"><a href="/encoding/pem/pem.go.html#4380863">buf</a></span><span class="op" id="4380908">.</span><span class="ident" id="4380909">Bytes</span><span class="op" id="4380914">(</span><span class="op" id="4380915">)</span><br>
<span class="lineno"></span><span class="op" id="4380917">}</span>
</div>
</body>
</html>
