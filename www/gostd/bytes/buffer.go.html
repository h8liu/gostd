<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>bytes</h2>
<ul>
<li><a href="/gostd/bytes/buffer.go.html" class="current">buffer.go</a></li>
<li><a href="/gostd/bytes/buffer_test.go.html">buffer_test.go</a></li>
<li><a href="/gostd/bytes/bytes.go.html">bytes.go</a></li>
<li><a href="/gostd/bytes/bytes_decl.go.html">bytes_decl.go</a></li>
<li><a href="/gostd/bytes/bytes_test.go.html">bytes_test.go</a></li>
<li><a href="/gostd/bytes/compare_test.go.html">compare_test.go</a></li>
<li><a href="/gostd/bytes/equal_test.go.html">equal_test.go</a></li>
<li><a href="/gostd/bytes/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/bytes/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/bytes/reader.go.html">reader.go</a></li>
<li><a href="/gostd/bytes/reader_test.go.html">reader_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1382844">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1382899">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1382953">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1383004">package</span>&nbsp;<span class="ident" id="1383012">bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1383019">//&nbsp;Simple&nbsp;byte&nbsp;buffer&nbsp;for&nbsp;marshaling&nbsp;data.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1383063">import</span>&nbsp;<span class="op" id="1383070">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1383073">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1383083">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1383089">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="1383104">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1383107">//&nbsp;A&nbsp;Buffer&nbsp;is&nbsp;a&nbsp;variable-sized&nbsp;buffer&nbsp;of&nbsp;bytes&nbsp;with&nbsp;Read&nbsp;and&nbsp;Write&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="1383184">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;Buffer&nbsp;is&nbsp;an&nbsp;empty&nbsp;buffer&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="1383246">type</span>&nbsp;<span class="ident" id="1383251">Buffer</span>&nbsp;<span class="keyword" id="1383258">struct</span>&nbsp;<span class="op" id="1383265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1383268">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1383278">[</span><span class="op" id="1383279">]</span><span class="builtintype" id="1383280">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1383296">//&nbsp;contents&nbsp;are&nbsp;the&nbsp;bytes&nbsp;buf[off&nbsp;:&nbsp;len(buf)]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1383343">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1383353">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1383371">//&nbsp;read&nbsp;at&nbsp;&amp;buf[off],&nbsp;write&nbsp;at&nbsp;&amp;buf[len(buf)]</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1383418">runeBytes</span>&nbsp;<span class="op" id="1383428">[</span><span class="ident" id="1383429"><a href="/gostd/bytes/buffer.go.html#1383089">utf8</a></span><span class="op" id="1383433">.</span><span class="ident" id="1383434"><a href="/gostd/unicode/utf8/utf8.go.html#1805617">UTFMax</a></span><span class="op" id="1383440">]</span><span class="builtintype" id="1383441">byte</span>&nbsp;<span class="comment" id="1383446">//&nbsp;avoid&nbsp;allocation&nbsp;of&nbsp;slice&nbsp;on&nbsp;each&nbsp;WriteByte&nbsp;or&nbsp;Rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1383502">bootstrap</span>&nbsp;<span class="op" id="1383512">[</span><span class="num" id="1383513">64</span><span class="op" id="1383515">]</span><span class="builtintype" id="1383516">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1383530">//&nbsp;memory&nbsp;to&nbsp;hold&nbsp;first&nbsp;slice;&nbsp;helps&nbsp;small&nbsp;buffers&nbsp;(Printf)&nbsp;avoid&nbsp;allocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1383609">lastRead</span>&nbsp;&nbsp;<span class="ident" id="1383619"><a href="/gostd/bytes/buffer.go.html#1383848">readOp</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1383637">//&nbsp;last&nbsp;read&nbsp;operation,&nbsp;so&nbsp;that&nbsp;Unread*&nbsp;can&nbsp;work&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="op" id="1383697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="1383700">//&nbsp;The&nbsp;readOp&nbsp;constants&nbsp;describe&nbsp;the&nbsp;last&nbsp;action&nbsp;performed&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1383762">//&nbsp;the&nbsp;buffer,&nbsp;so&nbsp;that&nbsp;UnreadRune&nbsp;and&nbsp;UnreadByte&nbsp;can</span><br>
<span class="lineno"></span><span class="comment" id="1383815">//&nbsp;check&nbsp;for&nbsp;invalid&nbsp;usage.</span><br>
<span class="lineno"></span><span class="keyword" id="1383843">type</span>&nbsp;<span class="ident" id="1383848">readOp</span>&nbsp;<span class="builtintype" id="1383855">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="1383860">const</span>&nbsp;<span class="op" id="1383866">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1383869">opInvalid</span>&nbsp;&nbsp;<span class="ident" id="1383880"><a href="/gostd/bytes/buffer.go.html#1383848">readOp</a></span>&nbsp;<span class="op" id="1383887">=</span>&nbsp;<span class="ident" id="1383889">iota</span>&nbsp;<span class="comment" id="1383894">//&nbsp;Non-read&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1383918">opReadRune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1383943">//&nbsp;Read&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1383958">opRead</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1383983">//&nbsp;Any&nbsp;other&nbsp;read&nbsp;operation.</span><br>
<span class="lineno"></span><span class="op" id="1384012">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1384015">//&nbsp;ErrTooLarge&nbsp;is&nbsp;passed&nbsp;to&nbsp;panic&nbsp;if&nbsp;memory&nbsp;cannot&nbsp;be&nbsp;allocated&nbsp;to&nbsp;store&nbsp;data&nbsp;in&nbsp;a&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1384106">var</span>&nbsp;<span class="ident" id="1384110">ErrTooLarge</span>&nbsp;<span class="op" id="1384122">=</span>&nbsp;<span class="ident" id="1384124"><a href="/gostd/bytes/buffer.go.html#1383073">errors</a></span><span class="op" id="1384130">.</span><span class="ident" id="1384131"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1384134">(</span><span class="string" id="1384135">&#34;bytes.Buffer:&nbsp;too&nbsp;large&#34;</span><span class="op" id="1384160">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1384163">//&nbsp;Bytes&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer;</span><br>
<span class="lineno">40</span><span class="comment" id="1384241">//&nbsp;len(b.Bytes())&nbsp;==&nbsp;b.Len().&nbsp;&nbsp;If&nbsp;the&nbsp;caller&nbsp;changes&nbsp;the&nbsp;contents&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1384314">//&nbsp;returned&nbsp;slice,&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;buffer&nbsp;will&nbsp;change&nbsp;provided&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="1384387">//&nbsp;are&nbsp;no&nbsp;intervening&nbsp;method&nbsp;calls&nbsp;on&nbsp;the&nbsp;Buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1384437">func</span>&nbsp;<span class="op" id="1384442">(</span><span class="ident" id="1384443">b</span>&nbsp;<span class="op" id="1384445">*</span><span class="ident" id="1384446"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1384452">)</span>&nbsp;<span class="ident" id="1384454">Bytes</span><span class="op" id="1384459">(</span><span class="op" id="1384460">)</span>&nbsp;<span class="op" id="1384462">[</span><span class="op" id="1384463">]</span><span class="builtintype" id="1384464">byte</span>&nbsp;<span class="op" id="1384469">{</span>&nbsp;<span class="keyword" id="1384471">return</span>&nbsp;<span class="ident" id="1384478"><a href="/gostd/bytes/buffer.go.html#1384443">b</a></span><span class="op" id="1384479">.</span><span class="ident" id="1384480"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1384483">[</span><span class="ident" id="1384484"><a href="/gostd/bytes/buffer.go.html#1384443">b</a></span><span class="op" id="1384485">.</span><span class="ident" id="1384486"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1384489">:</span><span class="op" id="1384490">]</span>&nbsp;<span class="op" id="1384492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="1384495">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="1384562">//&nbsp;as&nbsp;a&nbsp;string.&nbsp;&nbsp;If&nbsp;the&nbsp;Buffer&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;it&nbsp;returns&nbsp;&#34;&lt;nil&gt;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="1384631">func</span>&nbsp;<span class="op" id="1384636">(</span><span class="ident" id="1384637">b</span>&nbsp;<span class="op" id="1384639">*</span><span class="ident" id="1384640"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1384646">)</span>&nbsp;<span class="ident" id="1384648">String</span><span class="op" id="1384654">(</span><span class="op" id="1384655">)</span>&nbsp;<span class="builtintype" id="1384657">string</span>&nbsp;<span class="op" id="1384664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1384667">if</span>&nbsp;<span class="ident" id="1384670"><a href="/gostd/bytes/buffer.go.html#1384637">b</a></span>&nbsp;<span class="op" id="1384672">==</span>&nbsp;<span class="builtintype" id="1384675">nil</span>&nbsp;<span class="op" id="1384679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1384683">//&nbsp;Special&nbsp;case,&nbsp;useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1384723">return</span>&nbsp;<span class="string" id="1384730">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1384739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1384742">return</span>&nbsp;<span class="builtintype" id="1384749">string</span><span class="op" id="1384755">(</span><span class="ident" id="1384756"><a href="/gostd/bytes/buffer.go.html#1384637">b</a></span><span class="op" id="1384757">.</span><span class="ident" id="1384758"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1384761">[</span><span class="ident" id="1384762"><a href="/gostd/bytes/buffer.go.html#1384637">b</a></span><span class="op" id="1384763">.</span><span class="ident" id="1384764"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1384767">:</span><span class="op" id="1384768">]</span><span class="op" id="1384769">)</span><br>
<span class="lineno"></span><span class="op" id="1384771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="1384774">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer;</span><br>
<span class="lineno"></span><span class="comment" id="1384846">//&nbsp;b.Len()&nbsp;==&nbsp;len(b.Bytes()).</span><br>
<span class="lineno"></span><span class="keyword" id="1384876">func</span>&nbsp;<span class="op" id="1384881">(</span><span class="ident" id="1384882">b</span>&nbsp;<span class="op" id="1384884">*</span><span class="ident" id="1384885"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1384891">)</span>&nbsp;<span class="ident" id="1384893">Len</span><span class="op" id="1384896">(</span><span class="op" id="1384897">)</span>&nbsp;<span class="builtintype" id="1384899">int</span>&nbsp;<span class="op" id="1384903">{</span>&nbsp;<span class="keyword" id="1384905">return</span>&nbsp;<span class="builtinfunc" id="1384912">len</span><span class="op" id="1384915">(</span><span class="ident" id="1384916"><a href="/gostd/bytes/buffer.go.html#1384882">b</a></span><span class="op" id="1384917">.</span><span class="ident" id="1384918"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1384921">)</span>&nbsp;<span class="op" id="1384923">-</span>&nbsp;<span class="ident" id="1384925"><a href="/gostd/bytes/buffer.go.html#1384882">b</a></span><span class="op" id="1384926">.</span><span class="ident" id="1384927"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1384931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1384934">//&nbsp;Truncate&nbsp;discards&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;n&nbsp;unread&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno">60</span><span class="comment" id="1385005">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or&nbsp;greater&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1385077">func</span>&nbsp;<span class="op" id="1385082">(</span><span class="ident" id="1385083">b</span>&nbsp;<span class="op" id="1385085">*</span><span class="ident" id="1385086"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1385092">)</span>&nbsp;<span class="ident" id="1385094">Truncate</span><span class="op" id="1385102">(</span><span class="ident" id="1385103">n</span>&nbsp;<span class="builtintype" id="1385105">int</span><span class="op" id="1385108">)</span>&nbsp;<span class="op" id="1385110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1385113"><a href="/gostd/bytes/buffer.go.html#1385083">b</a></span><span class="op" id="1385114">.</span><span class="ident" id="1385115"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1385124">=</span>&nbsp;<span class="ident" id="1385126"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1385137">switch</span>&nbsp;<span class="op" id="1385144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1385147">case</span>&nbsp;<span class="ident" id="1385152"><a href="/gostd/bytes/buffer.go.html#1385103">n</a></span>&nbsp;<span class="op" id="1385154">&lt;</span>&nbsp;<span class="num" id="1385156">0</span>&nbsp;<span class="op" id="1385158">||</span>&nbsp;<span class="ident" id="1385161"><a href="/gostd/bytes/buffer.go.html#1385103">n</a></span>&nbsp;<span class="op" id="1385163">&gt;</span>&nbsp;<span class="ident" id="1385165"><a href="/gostd/bytes/buffer.go.html#1385083">b</a></span><span class="op" id="1385166">.</span><span class="ident" id="1385167"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="1385170">(</span><span class="op" id="1385171">)</span><span class="op" id="1385172">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1385176">panic</span><span class="op" id="1385181">(</span><span class="string" id="1385182">&#34;bytes.Buffer:&nbsp;truncation&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1385221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1385224">case</span>&nbsp;<span class="ident" id="1385229"><a href="/gostd/bytes/buffer.go.html#1385103">n</a></span>&nbsp;<span class="op" id="1385231">==</span>&nbsp;<span class="num" id="1385234">0</span><span class="op" id="1385235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1385239">//&nbsp;Reuse&nbsp;buffer&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1385264"><a href="/gostd/bytes/buffer.go.html#1385083">b</a></span><span class="op" id="1385265">.</span><span class="ident" id="1385266"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1385270">=</span>&nbsp;<span class="num" id="1385272">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1385275">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1385278"><a href="/gostd/bytes/buffer.go.html#1385083">b</a></span><span class="op" id="1385279">.</span><span class="ident" id="1385280"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span>&nbsp;<span class="op" id="1385284">=</span>&nbsp;<span class="ident" id="1385286"><a href="/gostd/bytes/buffer.go.html#1385083">b</a></span><span class="op" id="1385287">.</span><span class="ident" id="1385288"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1385291">[</span><span class="num" id="1385292">0</span>&nbsp;<span class="op" id="1385294">:</span>&nbsp;<span class="ident" id="1385296"><a href="/gostd/bytes/buffer.go.html#1385083">b</a></span><span class="op" id="1385297">.</span><span class="ident" id="1385298"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1385301">+</span><span class="ident" id="1385302"><a href="/gostd/bytes/buffer.go.html#1385103">n</a></span><span class="op" id="1385303">]</span><br>
<span class="lineno"></span><span class="op" id="1385305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1385308">//&nbsp;Reset&nbsp;resets&nbsp;the&nbsp;buffer&nbsp;so&nbsp;it&nbsp;has&nbsp;no&nbsp;content.</span><br>
<span class="lineno"></span><span class="comment" id="1385357">//&nbsp;b.Reset()&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;b.Truncate(0).</span><br>
<span class="lineno">75</span><span class="keyword" id="1385400">func</span>&nbsp;<span class="op" id="1385405">(</span><span class="ident" id="1385406">b</span>&nbsp;<span class="op" id="1385408">*</span><span class="ident" id="1385409"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1385415">)</span>&nbsp;<span class="ident" id="1385417">Reset</span><span class="op" id="1385422">(</span><span class="op" id="1385423">)</span>&nbsp;<span class="op" id="1385425">{</span>&nbsp;<span class="ident" id="1385427"><a href="/gostd/bytes/buffer.go.html#1385406">b</a></span><span class="op" id="1385428">.</span><span class="ident" id="1385429"><a href="/gostd/bytes/buffer.go.html#1385094">Truncate</a></span><span class="op" id="1385437">(</span><span class="num" id="1385438">0</span><span class="op" id="1385439">)</span>&nbsp;<span class="op" id="1385441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1385444">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;buffer&nbsp;to&nbsp;guarantee&nbsp;space&nbsp;for&nbsp;n&nbsp;more&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1385506">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;bytes&nbsp;should&nbsp;be&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="1385561">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;can&#39;t&nbsp;grow&nbsp;it&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">80</span><span class="keyword" id="1385621">func</span>&nbsp;<span class="op" id="1385626">(</span><span class="ident" id="1385627">b</span>&nbsp;<span class="op" id="1385629">*</span><span class="ident" id="1385630"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1385636">)</span>&nbsp;<span class="ident" id="1385638">grow</span><span class="op" id="1385642">(</span><span class="ident" id="1385643">n</span>&nbsp;<span class="builtintype" id="1385645">int</span><span class="op" id="1385648">)</span>&nbsp;<span class="builtintype" id="1385650">int</span>&nbsp;<span class="op" id="1385654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1385657">m</span>&nbsp;<span class="op" id="1385659">:=</span>&nbsp;<span class="ident" id="1385662"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385663">.</span><span class="ident" id="1385664"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="1385667">(</span><span class="op" id="1385668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1385671">//&nbsp;If&nbsp;buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1385719">if</span>&nbsp;<span class="ident" id="1385722"><a href="/gostd/bytes/buffer.go.html#1385657">m</a></span>&nbsp;<span class="op" id="1385724">==</span>&nbsp;<span class="num" id="1385727">0</span>&nbsp;<span class="op" id="1385729">&amp;&amp;</span>&nbsp;<span class="ident" id="1385732"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385733">.</span><span class="ident" id="1385734"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1385738">!=</span>&nbsp;<span class="num" id="1385741">0</span>&nbsp;<span class="op" id="1385743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1385747"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385748">.</span><span class="ident" id="1385749"><a href="/gostd/bytes/buffer.go.html#1385094">Truncate</a></span><span class="op" id="1385757">(</span><span class="num" id="1385758">0</span><span class="op" id="1385759">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1385762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1385765">if</span>&nbsp;<span class="builtinfunc" id="1385768">len</span><span class="op" id="1385771">(</span><span class="ident" id="1385772"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385773">.</span><span class="ident" id="1385774"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1385777">)</span><span class="op" id="1385778">+</span><span class="ident" id="1385779"><a href="/gostd/bytes/buffer.go.html#1385643">n</a></span>&nbsp;<span class="op" id="1385781">&gt;</span>&nbsp;<span class="builtinfunc" id="1385783">cap</span><span class="op" id="1385786">(</span><span class="ident" id="1385787"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385788">.</span><span class="ident" id="1385789"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1385792">)</span>&nbsp;<span class="op" id="1385794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1385798">var</span>&nbsp;<span class="ident" id="1385802">buf</span>&nbsp;<span class="op" id="1385806">[</span><span class="op" id="1385807">]</span><span class="builtintype" id="1385808">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1385815">if</span>&nbsp;<span class="ident" id="1385818"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385819">.</span><span class="ident" id="1385820"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span>&nbsp;<span class="op" id="1385824">==</span>&nbsp;<span class="builtintype" id="1385827">nil</span>&nbsp;<span class="op" id="1385831">&amp;&amp;</span>&nbsp;<span class="ident" id="1385834"><a href="/gostd/bytes/buffer.go.html#1385643">n</a></span>&nbsp;<span class="op" id="1385836">&lt;=</span>&nbsp;<span class="builtinfunc" id="1385839">len</span><span class="op" id="1385842">(</span><span class="ident" id="1385843"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385844">.</span><span class="ident" id="1385845"><a href="/gostd/bytes/buffer.go.html#1383502">bootstrap</a></span><span class="op" id="1385854">)</span>&nbsp;<span class="op" id="1385856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1385861"><a href="/gostd/bytes/buffer.go.html#1385802">buf</a></span>&nbsp;<span class="op" id="1385865">=</span>&nbsp;<span class="ident" id="1385867"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385868">.</span><span class="ident" id="1385869"><a href="/gostd/bytes/buffer.go.html#1383502">bootstrap</a></span><span class="op" id="1385878">[</span><span class="num" id="1385879">0</span><span class="op" id="1385880">:</span><span class="op" id="1385881">]</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1385885">}</span>&nbsp;<span class="keyword" id="1385887">else</span>&nbsp;<span class="keyword" id="1385892">if</span>&nbsp;<span class="ident" id="1385895"><a href="/gostd/bytes/buffer.go.html#1385657">m</a></span><span class="op" id="1385896">+</span><span class="ident" id="1385897"><a href="/gostd/bytes/buffer.go.html#1385643">n</a></span>&nbsp;<span class="op" id="1385899">&lt;=</span>&nbsp;<span class="builtinfunc" id="1385902">cap</span><span class="op" id="1385905">(</span><span class="ident" id="1385906"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1385907">.</span><span class="ident" id="1385908"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1385911">)</span><span class="op" id="1385912">/</span><span class="num" id="1385913">2</span>&nbsp;<span class="op" id="1385915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1385920">//&nbsp;We&nbsp;can&nbsp;slide&nbsp;things&nbsp;down&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1385979">//&nbsp;slice.&nbsp;We&nbsp;only&nbsp;need&nbsp;m+n&nbsp;&lt;=&nbsp;cap(b.buf)&nbsp;to&nbsp;slide,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1386037">//&nbsp;we&nbsp;instead&nbsp;let&nbsp;capacity&nbsp;get&nbsp;twice&nbsp;as&nbsp;large&nbsp;so&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1386092">//&nbsp;don&#39;t&nbsp;spend&nbsp;all&nbsp;our&nbsp;time&nbsp;copying.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1386132">copy</span><span class="op" id="1386136">(</span><span class="ident" id="1386137"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386138">.</span><span class="ident" id="1386139"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1386142">[</span><span class="op" id="1386143">:</span><span class="op" id="1386144">]</span><span class="op" id="1386145">,</span>&nbsp;<span class="ident" id="1386147"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386148">.</span><span class="ident" id="1386149"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1386152">[</span><span class="ident" id="1386153"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386154">.</span><span class="ident" id="1386155"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1386158">:</span><span class="op" id="1386159">]</span><span class="op" id="1386160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1386165"><a href="/gostd/bytes/buffer.go.html#1385802">buf</a></span>&nbsp;<span class="op" id="1386169">=</span>&nbsp;<span class="ident" id="1386171"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386172">.</span><span class="ident" id="1386173"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1386176">[</span><span class="op" id="1386177">:</span><span class="ident" id="1386178"><a href="/gostd/bytes/buffer.go.html#1385657">m</a></span><span class="op" id="1386179">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1386183">}</span>&nbsp;<span class="keyword" id="1386185">else</span>&nbsp;<span class="op" id="1386190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1386195">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;anywhere</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1386227"><a href="/gostd/bytes/buffer.go.html#1385802">buf</a></span>&nbsp;<span class="op" id="1386231">=</span>&nbsp;<span class="ident" id="1386233"><a href="/gostd/bytes/buffer.go.html#1388916">makeSlice</a></span><span class="op" id="1386242">(</span><span class="num" id="1386243">2</span><span class="op" id="1386244">*</span><span class="builtinfunc" id="1386245">cap</span><span class="op" id="1386248">(</span><span class="ident" id="1386249"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386250">.</span><span class="ident" id="1386251"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1386254">)</span>&nbsp;<span class="op" id="1386256">+</span>&nbsp;<span class="ident" id="1386258"><a href="/gostd/bytes/buffer.go.html#1385643">n</a></span><span class="op" id="1386259">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1386264">copy</span><span class="op" id="1386268">(</span><span class="ident" id="1386269"><a href="/gostd/bytes/buffer.go.html#1385802">buf</a></span><span class="op" id="1386272">,</span>&nbsp;<span class="ident" id="1386274"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386275">.</span><span class="ident" id="1386276"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1386279">[</span><span class="ident" id="1386280"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386281">.</span><span class="ident" id="1386282"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1386285">:</span><span class="op" id="1386286">]</span><span class="op" id="1386287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1386291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1386295"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386296">.</span><span class="ident" id="1386297"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span>&nbsp;<span class="op" id="1386301">=</span>&nbsp;<span class="ident" id="1386303"><a href="/gostd/bytes/buffer.go.html#1385802">buf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1386309"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386310">.</span><span class="ident" id="1386311"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1386315">=</span>&nbsp;<span class="num" id="1386317">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1386320">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1386323"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386324">.</span><span class="ident" id="1386325"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span>&nbsp;<span class="op" id="1386329">=</span>&nbsp;<span class="ident" id="1386331"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386332">.</span><span class="ident" id="1386333"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1386336">[</span><span class="num" id="1386337">0</span>&nbsp;<span class="op" id="1386339">:</span>&nbsp;<span class="ident" id="1386341"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386342">.</span><span class="ident" id="1386343"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1386346">+</span><span class="ident" id="1386347"><a href="/gostd/bytes/buffer.go.html#1385657">m</a></span><span class="op" id="1386348">+</span><span class="ident" id="1386349"><a href="/gostd/bytes/buffer.go.html#1385643">n</a></span><span class="op" id="1386350">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1386353">return</span>&nbsp;<span class="ident" id="1386360"><a href="/gostd/bytes/buffer.go.html#1385627">b</a></span><span class="op" id="1386361">.</span><span class="ident" id="1386362"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1386366">+</span>&nbsp;<span class="ident" id="1386368"><a href="/gostd/bytes/buffer.go.html#1385657">m</a></span><br>
<span class="lineno"></span><span class="op" id="1386370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1386373">//&nbsp;Grow&nbsp;grows&nbsp;the&nbsp;buffer&#39;s&nbsp;capacity,&nbsp;if&nbsp;necessary,&nbsp;to&nbsp;guarantee&nbsp;space&nbsp;for</span><br>
<span class="lineno">110</span><span class="comment" id="1386447">//&nbsp;another&nbsp;n&nbsp;bytes.&nbsp;After&nbsp;Grow(n),&nbsp;at&nbsp;least&nbsp;n&nbsp;bytes&nbsp;can&nbsp;be&nbsp;written&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1386521">//&nbsp;buffer&nbsp;without&nbsp;another&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="comment" id="1386559">//&nbsp;If&nbsp;n&nbsp;is&nbsp;negative,&nbsp;Grow&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="1386597">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;can&#39;t&nbsp;grow&nbsp;it&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="1386657">func</span>&nbsp;<span class="op" id="1386662">(</span><span class="ident" id="1386663">b</span>&nbsp;<span class="op" id="1386665">*</span><span class="ident" id="1386666"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1386672">)</span>&nbsp;<span class="ident" id="1386674">Grow</span><span class="op" id="1386678">(</span><span class="ident" id="1386679">n</span>&nbsp;<span class="builtintype" id="1386681">int</span><span class="op" id="1386684">)</span>&nbsp;<span class="op" id="1386686">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1386689">if</span>&nbsp;<span class="ident" id="1386692"><a href="/gostd/bytes/buffer.go.html#1386679">n</a></span>&nbsp;<span class="op" id="1386694">&lt;</span>&nbsp;<span class="num" id="1386696">0</span>&nbsp;<span class="op" id="1386698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1386702">panic</span><span class="op" id="1386707">(</span><span class="string" id="1386708">&#34;bytes.Buffer.Grow:&nbsp;negative&nbsp;count&#34;</span><span class="op" id="1386743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1386746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1386749">m</span>&nbsp;<span class="op" id="1386751">:=</span>&nbsp;<span class="ident" id="1386754"><a href="/gostd/bytes/buffer.go.html#1386663">b</a></span><span class="op" id="1386755">.</span><span class="ident" id="1386756"><a href="/gostd/bytes/buffer.go.html#1385638">grow</a></span><span class="op" id="1386760">(</span><span class="ident" id="1386761"><a href="/gostd/bytes/buffer.go.html#1386679">n</a></span><span class="op" id="1386762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1386765"><a href="/gostd/bytes/buffer.go.html#1386663">b</a></span><span class="op" id="1386766">.</span><span class="ident" id="1386767"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span>&nbsp;<span class="op" id="1386771">=</span>&nbsp;<span class="ident" id="1386773"><a href="/gostd/bytes/buffer.go.html#1386663">b</a></span><span class="op" id="1386774">.</span><span class="ident" id="1386775"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1386778">[</span><span class="num" id="1386779">0</span><span class="op" id="1386780">:</span><span class="ident" id="1386781"><a href="/gostd/bytes/buffer.go.html#1386749">m</a></span><span class="op" id="1386782">]</span><br>
<span class="lineno">120</span><span class="op" id="1386784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1386787">//&nbsp;Write&nbsp;appends&nbsp;the&nbsp;contents&nbsp;of&nbsp;p&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="1386859">//&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;length&nbsp;of&nbsp;p;&nbsp;err&nbsp;is&nbsp;always&nbsp;nil.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1386935">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;Write&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">125</span><span class="keyword" id="1386999">func</span>&nbsp;<span class="op" id="1387004">(</span><span class="ident" id="1387005">b</span>&nbsp;<span class="op" id="1387007">*</span><span class="ident" id="1387008"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1387014">)</span>&nbsp;<span class="ident" id="1387016">Write</span><span class="op" id="1387021">(</span><span class="ident" id="1387022">p</span>&nbsp;<span class="op" id="1387024">[</span><span class="op" id="1387025">]</span><span class="builtintype" id="1387026">byte</span><span class="op" id="1387030">)</span>&nbsp;<span class="op" id="1387032">(</span><span class="ident" id="1387033">n</span>&nbsp;<span class="builtintype" id="1387035">int</span><span class="op" id="1387038">,</span>&nbsp;<span class="ident" id="1387040">err</span>&nbsp;<span class="builtintype" id="1387044">error</span><span class="op" id="1387049">)</span>&nbsp;<span class="op" id="1387051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1387054"><a href="/gostd/bytes/buffer.go.html#1387005">b</a></span><span class="op" id="1387055">.</span><span class="ident" id="1387056"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1387065">=</span>&nbsp;<span class="ident" id="1387067"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1387078">m</span>&nbsp;<span class="op" id="1387080">:=</span>&nbsp;<span class="ident" id="1387083"><a href="/gostd/bytes/buffer.go.html#1387005">b</a></span><span class="op" id="1387084">.</span><span class="ident" id="1387085"><a href="/gostd/bytes/buffer.go.html#1385638">grow</a></span><span class="op" id="1387089">(</span><span class="builtinfunc" id="1387090">len</span><span class="op" id="1387093">(</span><span class="ident" id="1387094"><a href="/gostd/bytes/buffer.go.html#1387022">p</a></span><span class="op" id="1387095">)</span><span class="op" id="1387096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1387099">return</span>&nbsp;<span class="builtinfunc" id="1387106">copy</span><span class="op" id="1387110">(</span><span class="ident" id="1387111"><a href="/gostd/bytes/buffer.go.html#1387005">b</a></span><span class="op" id="1387112">.</span><span class="ident" id="1387113"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1387116">[</span><span class="ident" id="1387117"><a href="/gostd/bytes/buffer.go.html#1387078">m</a></span><span class="op" id="1387118">:</span><span class="op" id="1387119">]</span><span class="op" id="1387120">,</span>&nbsp;<span class="ident" id="1387122"><a href="/gostd/bytes/buffer.go.html#1387022">p</a></span><span class="op" id="1387123">)</span><span class="op" id="1387124">,</span>&nbsp;<span class="builtintype" id="1387126">nil</span><br>
<span class="lineno"></span><span class="op" id="1387130">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="1387133">//&nbsp;WriteString&nbsp;appends&nbsp;the&nbsp;contents&nbsp;of&nbsp;s&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="1387211">//&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;length&nbsp;of&nbsp;s;&nbsp;err&nbsp;is&nbsp;always&nbsp;nil.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1387287">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteString&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="1387357">func</span>&nbsp;<span class="op" id="1387362">(</span><span class="ident" id="1387363">b</span>&nbsp;<span class="op" id="1387365">*</span><span class="ident" id="1387366"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1387372">)</span>&nbsp;<span class="ident" id="1387374">WriteString</span><span class="op" id="1387385">(</span><span class="ident" id="1387386">s</span>&nbsp;<span class="builtintype" id="1387388">string</span><span class="op" id="1387394">)</span>&nbsp;<span class="op" id="1387396">(</span><span class="ident" id="1387397">n</span>&nbsp;<span class="builtintype" id="1387399">int</span><span class="op" id="1387402">,</span>&nbsp;<span class="ident" id="1387404">err</span>&nbsp;<span class="builtintype" id="1387408">error</span><span class="op" id="1387413">)</span>&nbsp;<span class="op" id="1387415">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1387418"><a href="/gostd/bytes/buffer.go.html#1387363">b</a></span><span class="op" id="1387419">.</span><span class="ident" id="1387420"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1387429">=</span>&nbsp;<span class="ident" id="1387431"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1387442">m</span>&nbsp;<span class="op" id="1387444">:=</span>&nbsp;<span class="ident" id="1387447"><a href="/gostd/bytes/buffer.go.html#1387363">b</a></span><span class="op" id="1387448">.</span><span class="ident" id="1387449"><a href="/gostd/bytes/buffer.go.html#1385638">grow</a></span><span class="op" id="1387453">(</span><span class="builtinfunc" id="1387454">len</span><span class="op" id="1387457">(</span><span class="ident" id="1387458"><a href="/gostd/bytes/buffer.go.html#1387386">s</a></span><span class="op" id="1387459">)</span><span class="op" id="1387460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1387463">return</span>&nbsp;<span class="builtinfunc" id="1387470">copy</span><span class="op" id="1387474">(</span><span class="ident" id="1387475"><a href="/gostd/bytes/buffer.go.html#1387363">b</a></span><span class="op" id="1387476">.</span><span class="ident" id="1387477"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1387480">[</span><span class="ident" id="1387481"><a href="/gostd/bytes/buffer.go.html#1387442">m</a></span><span class="op" id="1387482">:</span><span class="op" id="1387483">]</span><span class="op" id="1387484">,</span>&nbsp;<span class="ident" id="1387486"><a href="/gostd/bytes/buffer.go.html#1387386">s</a></span><span class="op" id="1387487">)</span><span class="op" id="1387488">,</span>&nbsp;<span class="builtintype" id="1387490">nil</span><br>
<span class="lineno"></span><span class="op" id="1387494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="1387497">//&nbsp;MinRead&nbsp;is&nbsp;the&nbsp;minimum&nbsp;slice&nbsp;size&nbsp;passed&nbsp;to&nbsp;a&nbsp;Read&nbsp;call&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="1387559">//&nbsp;Buffer.ReadFrom.&nbsp;&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;Buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;MinRead&nbsp;bytes&nbsp;beyond</span><br>
<span class="lineno"></span><span class="comment" id="1387636">//&nbsp;what&nbsp;is&nbsp;required&nbsp;to&nbsp;hold&nbsp;the&nbsp;contents&nbsp;of&nbsp;r,&nbsp;ReadFrom&nbsp;will&nbsp;not&nbsp;grow&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1387710">//&nbsp;underlying&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1387732">const</span>&nbsp;<span class="ident" id="1387738">MinRead</span>&nbsp;<span class="op" id="1387746">=</span>&nbsp;<span class="num" id="1387748">512</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="1387753">//&nbsp;ReadFrom&nbsp;reads&nbsp;data&nbsp;from&nbsp;r&nbsp;until&nbsp;EOF&nbsp;and&nbsp;appends&nbsp;it&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing</span><br>
<span class="lineno"></span><span class="comment" id="1387831">//&nbsp;the&nbsp;buffer&nbsp;as&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.&nbsp;Any</span><br>
<span class="lineno"></span><span class="comment" id="1387908">//&nbsp;error&nbsp;except&nbsp;io.EOF&nbsp;encountered&nbsp;during&nbsp;the&nbsp;read&nbsp;is&nbsp;also&nbsp;returned.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1387984">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;ReadFrom&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">150</span><span class="keyword" id="1388051">func</span>&nbsp;<span class="op" id="1388056">(</span><span class="ident" id="1388057">b</span>&nbsp;<span class="op" id="1388059">*</span><span class="ident" id="1388060"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1388066">)</span>&nbsp;<span class="ident" id="1388068">ReadFrom</span><span class="op" id="1388076">(</span><span class="ident" id="1388077">r</span>&nbsp;<span class="ident" id="1388079"><a href="/gostd/bytes/buffer.go.html#1383083">io</a></span><span class="op" id="1388081">.</span><span class="ident" id="1388082"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="1388088">)</span>&nbsp;<span class="op" id="1388090">(</span><span class="ident" id="1388091">n</span>&nbsp;<span class="builtintype" id="1388093">int64</span><span class="op" id="1388098">,</span>&nbsp;<span class="ident" id="1388100">err</span>&nbsp;<span class="builtintype" id="1388104">error</span><span class="op" id="1388109">)</span>&nbsp;<span class="op" id="1388111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388114"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388115">.</span><span class="ident" id="1388116"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1388125">=</span>&nbsp;<span class="ident" id="1388127"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1388138">//&nbsp;If&nbsp;buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388186">if</span>&nbsp;<span class="ident" id="1388189"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388190">.</span><span class="ident" id="1388191"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1388195">&gt;=</span>&nbsp;<span class="builtinfunc" id="1388198">len</span><span class="op" id="1388201">(</span><span class="ident" id="1388202"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388203">.</span><span class="ident" id="1388204"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388207">)</span>&nbsp;<span class="op" id="1388209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388213"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388214">.</span><span class="ident" id="1388215"><a href="/gostd/bytes/buffer.go.html#1385094">Truncate</a></span><span class="op" id="1388223">(</span><span class="num" id="1388224">0</span><span class="op" id="1388225">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1388228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388231">for</span>&nbsp;<span class="op" id="1388235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388239">if</span>&nbsp;<span class="ident" id="1388242">free</span>&nbsp;<span class="op" id="1388247">:=</span>&nbsp;<span class="builtinfunc" id="1388250">cap</span><span class="op" id="1388253">(</span><span class="ident" id="1388254"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388255">.</span><span class="ident" id="1388256"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388259">)</span>&nbsp;<span class="op" id="1388261">-</span>&nbsp;<span class="builtinfunc" id="1388263">len</span><span class="op" id="1388266">(</span><span class="ident" id="1388267"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388268">.</span><span class="ident" id="1388269"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388272">)</span><span class="op" id="1388273">;</span>&nbsp;<span class="ident" id="1388275"><a href="/gostd/bytes/buffer.go.html#1388242">free</a></span>&nbsp;<span class="op" id="1388280">&lt;</span>&nbsp;<span class="ident" id="1388282"><a href="/gostd/bytes/buffer.go.html#1387738">MinRead</a></span>&nbsp;<span class="op" id="1388290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1388295">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;at&nbsp;end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388325">newBuf</span>&nbsp;<span class="op" id="1388332">:=</span>&nbsp;<span class="ident" id="1388335"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388336">.</span><span class="ident" id="1388337"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388344">if</span>&nbsp;<span class="ident" id="1388347"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388348">.</span><span class="ident" id="1388349"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1388352">+</span><span class="ident" id="1388353"><a href="/gostd/bytes/buffer.go.html#1388242">free</a></span>&nbsp;<span class="op" id="1388358">&lt;</span>&nbsp;<span class="ident" id="1388360"><a href="/gostd/bytes/buffer.go.html#1387738">MinRead</a></span>&nbsp;<span class="op" id="1388368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1388374">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;using&nbsp;beginning&nbsp;of&nbsp;buffer;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1388425">//&nbsp;double&nbsp;buffer&nbsp;capacity</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388455"><a href="/gostd/bytes/buffer.go.html#1388325">newBuf</a></span>&nbsp;<span class="op" id="1388462">=</span>&nbsp;<span class="ident" id="1388464"><a href="/gostd/bytes/buffer.go.html#1388916">makeSlice</a></span><span class="op" id="1388473">(</span><span class="num" id="1388474">2</span><span class="op" id="1388475">*</span><span class="builtinfunc" id="1388476">cap</span><span class="op" id="1388479">(</span><span class="ident" id="1388480"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388481">.</span><span class="ident" id="1388482"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388485">)</span>&nbsp;<span class="op" id="1388487">+</span>&nbsp;<span class="ident" id="1388489"><a href="/gostd/bytes/buffer.go.html#1387738">MinRead</a></span><span class="op" id="1388496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1388501">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1388506">copy</span><span class="op" id="1388510">(</span><span class="ident" id="1388511"><a href="/gostd/bytes/buffer.go.html#1388325">newBuf</a></span><span class="op" id="1388517">,</span>&nbsp;<span class="ident" id="1388519"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388520">.</span><span class="ident" id="1388521"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388524">[</span><span class="ident" id="1388525"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388526">.</span><span class="ident" id="1388527"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1388530">:</span><span class="op" id="1388531">]</span><span class="op" id="1388532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388537"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388538">.</span><span class="ident" id="1388539"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span>&nbsp;<span class="op" id="1388543">=</span>&nbsp;<span class="ident" id="1388545"><a href="/gostd/bytes/buffer.go.html#1388325">newBuf</a></span><span class="op" id="1388551">[</span><span class="op" id="1388552">:</span><span class="builtinfunc" id="1388553">len</span><span class="op" id="1388556">(</span><span class="ident" id="1388557"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388558">.</span><span class="ident" id="1388559"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388562">)</span><span class="op" id="1388563">-</span><span class="ident" id="1388564"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388565">.</span><span class="ident" id="1388566"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1388569">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388574"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388575">.</span><span class="ident" id="1388576"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1388580">=</span>&nbsp;<span class="num" id="1388582">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1388586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388590">m</span><span class="op" id="1388591">,</span>&nbsp;<span class="ident" id="1388593">e</span>&nbsp;<span class="op" id="1388595">:=</span>&nbsp;<span class="ident" id="1388598"><a href="/gostd/bytes/buffer.go.html#1388077">r</a></span><span class="op" id="1388599">.</span><span class="ident" id="1388600"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="1388604">(</span><span class="ident" id="1388605"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388606">.</span><span class="ident" id="1388607"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388610">[</span><span class="builtinfunc" id="1388611">len</span><span class="op" id="1388614">(</span><span class="ident" id="1388615"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388616">.</span><span class="ident" id="1388617"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388620">)</span><span class="op" id="1388621">:</span><span class="builtinfunc" id="1388622">cap</span><span class="op" id="1388625">(</span><span class="ident" id="1388626"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388627">.</span><span class="ident" id="1388628"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388631">)</span><span class="op" id="1388632">]</span><span class="op" id="1388633">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388637"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388638">.</span><span class="ident" id="1388639"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span>&nbsp;<span class="op" id="1388643">=</span>&nbsp;<span class="ident" id="1388645"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388646">.</span><span class="ident" id="1388647"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388650">[</span><span class="num" id="1388651">0</span>&nbsp;<span class="op" id="1388653">:</span>&nbsp;<span class="builtinfunc" id="1388655">len</span><span class="op" id="1388658">(</span><span class="ident" id="1388659"><a href="/gostd/bytes/buffer.go.html#1388057">b</a></span><span class="op" id="1388660">.</span><span class="ident" id="1388661"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1388664">)</span><span class="op" id="1388665">+</span><span class="ident" id="1388666"><a href="/gostd/bytes/buffer.go.html#1388590">m</a></span><span class="op" id="1388667">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1388671"><a href="/gostd/bytes/buffer.go.html#1388091">n</a></span>&nbsp;<span class="op" id="1388673">+=</span>&nbsp;<span class="builtintype" id="1388676">int64</span><span class="op" id="1388681">(</span><span class="ident" id="1388682"><a href="/gostd/bytes/buffer.go.html#1388590">m</a></span><span class="op" id="1388683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388687">if</span>&nbsp;<span class="ident" id="1388690"><a href="/gostd/bytes/buffer.go.html#1388593">e</a></span>&nbsp;<span class="op" id="1388692">==</span>&nbsp;<span class="ident" id="1388695"><a href="/gostd/bytes/buffer.go.html#1383083">io</a></span><span class="op" id="1388697">.</span><span class="ident" id="1388698"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="1388702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388707">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1388715">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388719">if</span>&nbsp;<span class="ident" id="1388722"><a href="/gostd/bytes/buffer.go.html#1388593">e</a></span>&nbsp;<span class="op" id="1388724">!=</span>&nbsp;<span class="builtintype" id="1388727">nil</span>&nbsp;<span class="op" id="1388731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388736">return</span>&nbsp;<span class="ident" id="1388743"><a href="/gostd/bytes/buffer.go.html#1388091">n</a></span><span class="op" id="1388744">,</span>&nbsp;<span class="ident" id="1388746"><a href="/gostd/bytes/buffer.go.html#1388593">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1388750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1388753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388756">return</span>&nbsp;<span class="ident" id="1388763"><a href="/gostd/bytes/buffer.go.html#1388091">n</a></span><span class="op" id="1388764">,</span>&nbsp;<span class="builtintype" id="1388766">nil</span>&nbsp;<span class="comment" id="1388770">//&nbsp;err&nbsp;is&nbsp;EOF,&nbsp;so&nbsp;return&nbsp;nil&nbsp;explicitly</span><br>
<span class="lineno">180</span><span class="op" id="1388810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1388813">//&nbsp;makeSlice&nbsp;allocates&nbsp;a&nbsp;slice&nbsp;of&nbsp;size&nbsp;n.&nbsp;If&nbsp;the&nbsp;allocation&nbsp;fails,&nbsp;it&nbsp;panics</span><br>
<span class="lineno"></span><span class="comment" id="1388890">//&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="1388911">func</span>&nbsp;<span class="ident" id="1388916">makeSlice</span><span class="op" id="1388925">(</span><span class="ident" id="1388926">n</span>&nbsp;<span class="builtintype" id="1388928">int</span><span class="op" id="1388931">)</span>&nbsp;<span class="op" id="1388933">[</span><span class="op" id="1388934">]</span><span class="builtintype" id="1388935">byte</span>&nbsp;<span class="op" id="1388940">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1388943">//&nbsp;If&nbsp;the&nbsp;make&nbsp;fails,&nbsp;give&nbsp;a&nbsp;known&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1388986">defer</span>&nbsp;<span class="keyword" id="1388992">func</span><span class="op" id="1388996">(</span><span class="op" id="1388997">)</span>&nbsp;<span class="op" id="1388999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389003">if</span>&nbsp;<span class="builtinfunc" id="1389006">recover</span><span class="op" id="1389013">(</span><span class="op" id="1389014">)</span>&nbsp;<span class="op" id="1389016">!=</span>&nbsp;<span class="builtintype" id="1389019">nil</span>&nbsp;<span class="op" id="1389023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1389028">panic</span><span class="op" id="1389033">(</span><span class="ident" id="1389034"><a href="/gostd/bytes/buffer.go.html#1384110">ErrTooLarge</a></span><span class="op" id="1389045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1389049">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1389052">}</span><span class="op" id="1389053">(</span><span class="op" id="1389054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389057">return</span>&nbsp;<span class="builtinfunc" id="1389064">make</span><span class="op" id="1389068">(</span><span class="op" id="1389069">[</span><span class="op" id="1389070">]</span><span class="builtintype" id="1389071">byte</span><span class="op" id="1389075">,</span>&nbsp;<span class="ident" id="1389077"><a href="/gostd/bytes/buffer.go.html#1388926">n</a></span><span class="op" id="1389078">)</span><br>
<span class="lineno"></span><span class="op" id="1389080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1389083">//&nbsp;WriteTo&nbsp;writes&nbsp;data&nbsp;to&nbsp;w&nbsp;until&nbsp;the&nbsp;buffer&nbsp;is&nbsp;drained&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno">195</span><span class="comment" id="1389159">//&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written;&nbsp;it&nbsp;always&nbsp;fits&nbsp;into&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="1389236">//&nbsp;int,&nbsp;but&nbsp;it&nbsp;is&nbsp;int64&nbsp;to&nbsp;match&nbsp;the&nbsp;io.WriterTo&nbsp;interface.&nbsp;Any&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="1389306">//&nbsp;encountered&nbsp;during&nbsp;the&nbsp;write&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="1389356">func</span>&nbsp;<span class="op" id="1389361">(</span><span class="ident" id="1389362">b</span>&nbsp;<span class="op" id="1389364">*</span><span class="ident" id="1389365"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1389371">)</span>&nbsp;<span class="ident" id="1389373">WriteTo</span><span class="op" id="1389380">(</span><span class="ident" id="1389381">w</span>&nbsp;<span class="ident" id="1389383"><a href="/gostd/bytes/buffer.go.html#1383083">io</a></span><span class="op" id="1389385">.</span><span class="ident" id="1389386"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="1389392">)</span>&nbsp;<span class="op" id="1389394">(</span><span class="ident" id="1389395">n</span>&nbsp;<span class="builtintype" id="1389397">int64</span><span class="op" id="1389402">,</span>&nbsp;<span class="ident" id="1389404">err</span>&nbsp;<span class="builtintype" id="1389408">error</span><span class="op" id="1389413">)</span>&nbsp;<span class="op" id="1389415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1389418"><a href="/gostd/bytes/buffer.go.html#1389362">b</a></span><span class="op" id="1389419">.</span><span class="ident" id="1389420"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1389429">=</span>&nbsp;<span class="ident" id="1389431"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389442">if</span>&nbsp;<span class="ident" id="1389445"><a href="/gostd/bytes/buffer.go.html#1389362">b</a></span><span class="op" id="1389446">.</span><span class="ident" id="1389447"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1389451">&lt;</span>&nbsp;<span class="builtinfunc" id="1389453">len</span><span class="op" id="1389456">(</span><span class="ident" id="1389457"><a href="/gostd/bytes/buffer.go.html#1389362">b</a></span><span class="op" id="1389458">.</span><span class="ident" id="1389459"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1389462">)</span>&nbsp;<span class="op" id="1389464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1389468">nBytes</span>&nbsp;<span class="op" id="1389475">:=</span>&nbsp;<span class="ident" id="1389478"><a href="/gostd/bytes/buffer.go.html#1389362">b</a></span><span class="op" id="1389479">.</span><span class="ident" id="1389480"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="1389483">(</span><span class="op" id="1389484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1389488">m</span><span class="op" id="1389489">,</span>&nbsp;<span class="ident" id="1389491">e</span>&nbsp;<span class="op" id="1389493">:=</span>&nbsp;<span class="ident" id="1389496"><a href="/gostd/bytes/buffer.go.html#1389381">w</a></span><span class="op" id="1389497">.</span><span class="ident" id="1389498"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="1389503">(</span><span class="ident" id="1389504"><a href="/gostd/bytes/buffer.go.html#1389362">b</a></span><span class="op" id="1389505">.</span><span class="ident" id="1389506"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1389509">[</span><span class="ident" id="1389510"><a href="/gostd/bytes/buffer.go.html#1389362">b</a></span><span class="op" id="1389511">.</span><span class="ident" id="1389512"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1389515">:</span><span class="op" id="1389516">]</span><span class="op" id="1389517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389521">if</span>&nbsp;<span class="ident" id="1389524"><a href="/gostd/bytes/buffer.go.html#1389488">m</a></span>&nbsp;<span class="op" id="1389526">&gt;</span>&nbsp;<span class="ident" id="1389528"><a href="/gostd/bytes/buffer.go.html#1389468">nBytes</a></span>&nbsp;<span class="op" id="1389535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1389540">panic</span><span class="op" id="1389545">(</span><span class="string" id="1389546">&#34;bytes.Buffer.WriteTo:&nbsp;invalid&nbsp;Write&nbsp;count&#34;</span><span class="op" id="1389589">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1389593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1389597"><a href="/gostd/bytes/buffer.go.html#1389362">b</a></span><span class="op" id="1389598">.</span><span class="ident" id="1389599"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1389603">+=</span>&nbsp;<span class="ident" id="1389606"><a href="/gostd/bytes/buffer.go.html#1389488">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1389610"><a href="/gostd/bytes/buffer.go.html#1389395">n</a></span>&nbsp;<span class="op" id="1389612">=</span>&nbsp;<span class="builtintype" id="1389614">int64</span><span class="op" id="1389619">(</span><span class="ident" id="1389620"><a href="/gostd/bytes/buffer.go.html#1389488">m</a></span><span class="op" id="1389621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389625">if</span>&nbsp;<span class="ident" id="1389628"><a href="/gostd/bytes/buffer.go.html#1389491">e</a></span>&nbsp;<span class="op" id="1389630">!=</span>&nbsp;<span class="builtintype" id="1389633">nil</span>&nbsp;<span class="op" id="1389637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389642">return</span>&nbsp;<span class="ident" id="1389649"><a href="/gostd/bytes/buffer.go.html#1389395">n</a></span><span class="op" id="1389650">,</span>&nbsp;<span class="ident" id="1389652"><a href="/gostd/bytes/buffer.go.html#1389491">e</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1389656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1389660">//&nbsp;all&nbsp;bytes&nbsp;should&nbsp;have&nbsp;been&nbsp;written,&nbsp;by&nbsp;definition&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1389718">//&nbsp;Write&nbsp;method&nbsp;in&nbsp;io.Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389749">if</span>&nbsp;<span class="ident" id="1389752"><a href="/gostd/bytes/buffer.go.html#1389488">m</a></span>&nbsp;<span class="op" id="1389754">!=</span>&nbsp;<span class="ident" id="1389757"><a href="/gostd/bytes/buffer.go.html#1389468">nBytes</a></span>&nbsp;<span class="op" id="1389764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389769">return</span>&nbsp;<span class="ident" id="1389776"><a href="/gostd/bytes/buffer.go.html#1389395">n</a></span><span class="op" id="1389777">,</span>&nbsp;<span class="ident" id="1389779"><a href="/gostd/bytes/buffer.go.html#1383083">io</a></span><span class="op" id="1389781">.</span><span class="ident" id="1389782"><a href="/gostd/io/io.go.html#1419475">ErrShortWrite</a></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1389798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1389801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1389804">//&nbsp;Buffer&nbsp;is&nbsp;now&nbsp;empty;&nbsp;reset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1389836"><a href="/gostd/bytes/buffer.go.html#1389362">b</a></span><span class="op" id="1389837">.</span><span class="ident" id="1389838"><a href="/gostd/bytes/buffer.go.html#1385094">Truncate</a></span><span class="op" id="1389846">(</span><span class="num" id="1389847">0</span><span class="op" id="1389848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1389851">return</span><br>
<span class="lineno">220</span><span class="op" id="1389858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1389861">//&nbsp;WriteByte&nbsp;appends&nbsp;the&nbsp;byte&nbsp;c&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as&nbsp;needed.</span><br>
<span class="lineno"></span><span class="comment" id="1389938">//&nbsp;The&nbsp;returned&nbsp;error&nbsp;is&nbsp;always&nbsp;nil,&nbsp;but&nbsp;is&nbsp;included&nbsp;to&nbsp;match&nbsp;bufio.Writer&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="1390015">//&nbsp;WriteByte.&nbsp;If&nbsp;the&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteByte&nbsp;will&nbsp;panic&nbsp;with</span><br>
<span class="lineno">225</span><span class="comment" id="1390088">//&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="1390104">func</span>&nbsp;<span class="op" id="1390109">(</span><span class="ident" id="1390110">b</span>&nbsp;<span class="op" id="1390112">*</span><span class="ident" id="1390113"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1390119">)</span>&nbsp;<span class="ident" id="1390121">WriteByte</span><span class="op" id="1390130">(</span><span class="ident" id="1390131">c</span>&nbsp;<span class="builtintype" id="1390133">byte</span><span class="op" id="1390137">)</span>&nbsp;<span class="builtintype" id="1390139">error</span>&nbsp;<span class="op" id="1390145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1390148"><a href="/gostd/bytes/buffer.go.html#1390110">b</a></span><span class="op" id="1390149">.</span><span class="ident" id="1390150"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1390159">=</span>&nbsp;<span class="ident" id="1390161"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1390172">m</span>&nbsp;<span class="op" id="1390174">:=</span>&nbsp;<span class="ident" id="1390177"><a href="/gostd/bytes/buffer.go.html#1390110">b</a></span><span class="op" id="1390178">.</span><span class="ident" id="1390179"><a href="/gostd/bytes/buffer.go.html#1385638">grow</a></span><span class="op" id="1390183">(</span><span class="num" id="1390184">1</span><span class="op" id="1390185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1390188"><a href="/gostd/bytes/buffer.go.html#1390110">b</a></span><span class="op" id="1390189">.</span><span class="ident" id="1390190"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1390193">[</span><span class="ident" id="1390194"><a href="/gostd/bytes/buffer.go.html#1390172">m</a></span><span class="op" id="1390195">]</span>&nbsp;<span class="op" id="1390197">=</span>&nbsp;<span class="ident" id="1390199"><a href="/gostd/bytes/buffer.go.html#1390131">c</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1390202">return</span>&nbsp;<span class="builtintype" id="1390209">nil</span><br>
<span class="lineno"></span><span class="op" id="1390213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1390216">//&nbsp;WriteRune&nbsp;appends&nbsp;the&nbsp;UTF-8&nbsp;encoding&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;r&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1390287">//&nbsp;buffer,&nbsp;returning&nbsp;its&nbsp;length&nbsp;and&nbsp;an&nbsp;error,&nbsp;which&nbsp;is&nbsp;always&nbsp;nil&nbsp;but&nbsp;is</span><br>
<span class="lineno">235</span><span class="comment" id="1390360">//&nbsp;included&nbsp;to&nbsp;match&nbsp;bufio.Writer&#39;s&nbsp;WriteRune.&nbsp;The&nbsp;buffer&nbsp;is&nbsp;grown&nbsp;as&nbsp;needed;</span><br>
<span class="lineno"></span><span class="comment" id="1390438">//&nbsp;if&nbsp;it&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteRune&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="1390505">func</span>&nbsp;<span class="op" id="1390510">(</span><span class="ident" id="1390511">b</span>&nbsp;<span class="op" id="1390513">*</span><span class="ident" id="1390514"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1390520">)</span>&nbsp;<span class="ident" id="1390522">WriteRune</span><span class="op" id="1390531">(</span><span class="ident" id="1390532">r</span>&nbsp;<span class="builtintype" id="1390534">rune</span><span class="op" id="1390538">)</span>&nbsp;<span class="op" id="1390540">(</span><span class="ident" id="1390541">n</span>&nbsp;<span class="builtintype" id="1390543">int</span><span class="op" id="1390546">,</span>&nbsp;<span class="ident" id="1390548">err</span>&nbsp;<span class="builtintype" id="1390552">error</span><span class="op" id="1390557">)</span>&nbsp;<span class="op" id="1390559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1390562">if</span>&nbsp;<span class="ident" id="1390565"><a href="/gostd/bytes/buffer.go.html#1390532">r</a></span>&nbsp;<span class="op" id="1390567">&lt;</span>&nbsp;<span class="ident" id="1390569"><a href="/gostd/bytes/buffer.go.html#1383089">utf8</a></span><span class="op" id="1390573">.</span><span class="ident" id="1390574"><a href="/gostd/unicode/utf8/utf8.go.html#1805451">RuneSelf</a></span>&nbsp;<span class="op" id="1390583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1390587"><a href="/gostd/bytes/buffer.go.html#1390511">b</a></span><span class="op" id="1390588">.</span><span class="ident" id="1390589"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="1390598">(</span><span class="builtintype" id="1390599">byte</span><span class="op" id="1390603">(</span><span class="ident" id="1390604"><a href="/gostd/bytes/buffer.go.html#1390532">r</a></span><span class="op" id="1390605">)</span><span class="op" id="1390606">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1390610">return</span>&nbsp;<span class="num" id="1390617">1</span><span class="op" id="1390618">,</span>&nbsp;<span class="builtintype" id="1390620">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1390625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1390628"><a href="/gostd/bytes/buffer.go.html#1390541">n</a></span>&nbsp;<span class="op" id="1390630">=</span>&nbsp;<span class="ident" id="1390632"><a href="/gostd/bytes/buffer.go.html#1383089">utf8</a></span><span class="op" id="1390636">.</span><span class="ident" id="1390637"><a href="/gostd/unicode/utf8/utf8.go.html#1813107">EncodeRune</a></span><span class="op" id="1390647">(</span><span class="ident" id="1390648"><a href="/gostd/bytes/buffer.go.html#1390511">b</a></span><span class="op" id="1390649">.</span><span class="ident" id="1390650"><a href="/gostd/bytes/buffer.go.html#1383418">runeBytes</a></span><span class="op" id="1390659">[</span><span class="num" id="1390660">0</span><span class="op" id="1390661">:</span><span class="op" id="1390662">]</span><span class="op" id="1390663">,</span>&nbsp;<span class="ident" id="1390665"><a href="/gostd/bytes/buffer.go.html#1390532">r</a></span><span class="op" id="1390666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1390669"><a href="/gostd/bytes/buffer.go.html#1390511">b</a></span><span class="op" id="1390670">.</span><span class="ident" id="1390671"><a href="/gostd/bytes/buffer.go.html#1387016">Write</a></span><span class="op" id="1390676">(</span><span class="ident" id="1390677"><a href="/gostd/bytes/buffer.go.html#1390511">b</a></span><span class="op" id="1390678">.</span><span class="ident" id="1390679"><a href="/gostd/bytes/buffer.go.html#1383418">runeBytes</a></span><span class="op" id="1390688">[</span><span class="num" id="1390689">0</span><span class="op" id="1390690">:</span><span class="ident" id="1390691"><a href="/gostd/bytes/buffer.go.html#1390541">n</a></span><span class="op" id="1390692">]</span><span class="op" id="1390693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1390696">return</span>&nbsp;<span class="ident" id="1390703"><a href="/gostd/bytes/buffer.go.html#1390541">n</a></span><span class="op" id="1390704">,</span>&nbsp;<span class="builtintype" id="1390706">nil</span><br>
<span class="lineno">245</span><span class="op" id="1390710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1390713">//&nbsp;Read&nbsp;reads&nbsp;the&nbsp;next&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer&nbsp;or&nbsp;until&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="1390785">//&nbsp;is&nbsp;drained.&nbsp;&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.&nbsp;&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1390857">//&nbsp;buffer&nbsp;has&nbsp;no&nbsp;data&nbsp;to&nbsp;return,&nbsp;err&nbsp;is&nbsp;io.EOF&nbsp;(unless&nbsp;len(p)&nbsp;is&nbsp;zero);</span><br>
<span class="lineno">250</span><span class="comment" id="1390929">//&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1390953">func</span>&nbsp;<span class="op" id="1390958">(</span><span class="ident" id="1390959">b</span>&nbsp;<span class="op" id="1390961">*</span><span class="ident" id="1390962"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1390968">)</span>&nbsp;<span class="ident" id="1390970">Read</span><span class="op" id="1390974">(</span><span class="ident" id="1390975">p</span>&nbsp;<span class="op" id="1390977">[</span><span class="op" id="1390978">]</span><span class="builtintype" id="1390979">byte</span><span class="op" id="1390983">)</span>&nbsp;<span class="op" id="1390985">(</span><span class="ident" id="1390986">n</span>&nbsp;<span class="builtintype" id="1390988">int</span><span class="op" id="1390991">,</span>&nbsp;<span class="ident" id="1390993">err</span>&nbsp;<span class="builtintype" id="1390997">error</span><span class="op" id="1391002">)</span>&nbsp;<span class="op" id="1391004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391007"><a href="/gostd/bytes/buffer.go.html#1390959">b</a></span><span class="op" id="1391008">.</span><span class="ident" id="1391009"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1391018">=</span>&nbsp;<span class="ident" id="1391020"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391031">if</span>&nbsp;<span class="ident" id="1391034"><a href="/gostd/bytes/buffer.go.html#1390959">b</a></span><span class="op" id="1391035">.</span><span class="ident" id="1391036"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1391040">&gt;=</span>&nbsp;<span class="builtinfunc" id="1391043">len</span><span class="op" id="1391046">(</span><span class="ident" id="1391047"><a href="/gostd/bytes/buffer.go.html#1390959">b</a></span><span class="op" id="1391048">.</span><span class="ident" id="1391049"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1391052">)</span>&nbsp;<span class="op" id="1391054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1391058">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391104"><a href="/gostd/bytes/buffer.go.html#1390959">b</a></span><span class="op" id="1391105">.</span><span class="ident" id="1391106"><a href="/gostd/bytes/buffer.go.html#1385094">Truncate</a></span><span class="op" id="1391114">(</span><span class="num" id="1391115">0</span><span class="op" id="1391116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391120">if</span>&nbsp;<span class="builtinfunc" id="1391123">len</span><span class="op" id="1391126">(</span><span class="ident" id="1391127"><a href="/gostd/bytes/buffer.go.html#1390975">p</a></span><span class="op" id="1391128">)</span>&nbsp;<span class="op" id="1391130">==</span>&nbsp;<span class="num" id="1391133">0</span>&nbsp;<span class="op" id="1391135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391140">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1391149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391153">return</span>&nbsp;<span class="num" id="1391160">0</span><span class="op" id="1391161">,</span>&nbsp;<span class="ident" id="1391163"><a href="/gostd/bytes/buffer.go.html#1383083">io</a></span><span class="op" id="1391165">.</span><span class="ident" id="1391166"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1391171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391174"><a href="/gostd/bytes/buffer.go.html#1390986">n</a></span>&nbsp;<span class="op" id="1391176">=</span>&nbsp;<span class="builtinfunc" id="1391178">copy</span><span class="op" id="1391182">(</span><span class="ident" id="1391183"><a href="/gostd/bytes/buffer.go.html#1390975">p</a></span><span class="op" id="1391184">,</span>&nbsp;<span class="ident" id="1391186"><a href="/gostd/bytes/buffer.go.html#1390959">b</a></span><span class="op" id="1391187">.</span><span class="ident" id="1391188"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1391191">[</span><span class="ident" id="1391192"><a href="/gostd/bytes/buffer.go.html#1390959">b</a></span><span class="op" id="1391193">.</span><span class="ident" id="1391194"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1391197">:</span><span class="op" id="1391198">]</span><span class="op" id="1391199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391202"><a href="/gostd/bytes/buffer.go.html#1390959">b</a></span><span class="op" id="1391203">.</span><span class="ident" id="1391204"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1391208">+=</span>&nbsp;<span class="ident" id="1391211"><a href="/gostd/bytes/buffer.go.html#1390986">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391214">if</span>&nbsp;<span class="ident" id="1391217"><a href="/gostd/bytes/buffer.go.html#1390986">n</a></span>&nbsp;<span class="op" id="1391219">&gt;</span>&nbsp;<span class="num" id="1391221">0</span>&nbsp;<span class="op" id="1391223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391227"><a href="/gostd/bytes/buffer.go.html#1390959">b</a></span><span class="op" id="1391228">.</span><span class="ident" id="1391229"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1391238">=</span>&nbsp;<span class="ident" id="1391240"><a href="/gostd/bytes/buffer.go.html#1383958">opRead</a></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1391248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391251">return</span><br>
<span class="lineno"></span><span class="op" id="1391258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1391261">//&nbsp;Next&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;next&nbsp;n&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer,</span><br>
<span class="lineno">270</span><span class="comment" id="1391330">//&nbsp;advancing&nbsp;the&nbsp;buffer&nbsp;as&nbsp;if&nbsp;the&nbsp;bytes&nbsp;had&nbsp;been&nbsp;returned&nbsp;by&nbsp;Read.</span><br>
<span class="lineno"></span><span class="comment" id="1391397">//&nbsp;If&nbsp;there&nbsp;are&nbsp;fewer&nbsp;than&nbsp;n&nbsp;bytes&nbsp;in&nbsp;the&nbsp;buffer,&nbsp;Next&nbsp;returns&nbsp;the&nbsp;entire&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="1391479">//&nbsp;The&nbsp;slice&nbsp;is&nbsp;only&nbsp;valid&nbsp;until&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;a&nbsp;read&nbsp;or&nbsp;write&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1391553">func</span>&nbsp;<span class="op" id="1391558">(</span><span class="ident" id="1391559">b</span>&nbsp;<span class="op" id="1391561">*</span><span class="ident" id="1391562"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1391568">)</span>&nbsp;<span class="ident" id="1391570">Next</span><span class="op" id="1391574">(</span><span class="ident" id="1391575">n</span>&nbsp;<span class="builtintype" id="1391577">int</span><span class="op" id="1391580">)</span>&nbsp;<span class="op" id="1391582">[</span><span class="op" id="1391583">]</span><span class="builtintype" id="1391584">byte</span>&nbsp;<span class="op" id="1391589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391592"><a href="/gostd/bytes/buffer.go.html#1391559">b</a></span><span class="op" id="1391593">.</span><span class="ident" id="1391594"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1391603">=</span>&nbsp;<span class="ident" id="1391605"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391616">m</span>&nbsp;<span class="op" id="1391618">:=</span>&nbsp;<span class="ident" id="1391621"><a href="/gostd/bytes/buffer.go.html#1391559">b</a></span><span class="op" id="1391622">.</span><span class="ident" id="1391623"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="1391626">(</span><span class="op" id="1391627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391630">if</span>&nbsp;<span class="ident" id="1391633"><a href="/gostd/bytes/buffer.go.html#1391575">n</a></span>&nbsp;<span class="op" id="1391635">&gt;</span>&nbsp;<span class="ident" id="1391637"><a href="/gostd/bytes/buffer.go.html#1391616">m</a></span>&nbsp;<span class="op" id="1391639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391643"><a href="/gostd/bytes/buffer.go.html#1391575">n</a></span>&nbsp;<span class="op" id="1391645">=</span>&nbsp;<span class="ident" id="1391647"><a href="/gostd/bytes/buffer.go.html#1391616">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1391650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391653">data</span>&nbsp;<span class="op" id="1391658">:=</span>&nbsp;<span class="ident" id="1391661"><a href="/gostd/bytes/buffer.go.html#1391559">b</a></span><span class="op" id="1391662">.</span><span class="ident" id="1391663"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1391666">[</span><span class="ident" id="1391667"><a href="/gostd/bytes/buffer.go.html#1391559">b</a></span><span class="op" id="1391668">.</span><span class="ident" id="1391669"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1391673">:</span>&nbsp;<span class="ident" id="1391675"><a href="/gostd/bytes/buffer.go.html#1391559">b</a></span><span class="op" id="1391676">.</span><span class="ident" id="1391677"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1391680">+</span><span class="ident" id="1391681"><a href="/gostd/bytes/buffer.go.html#1391575">n</a></span><span class="op" id="1391682">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391685"><a href="/gostd/bytes/buffer.go.html#1391559">b</a></span><span class="op" id="1391686">.</span><span class="ident" id="1391687"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1391691">+=</span>&nbsp;<span class="ident" id="1391694"><a href="/gostd/bytes/buffer.go.html#1391575">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391697">if</span>&nbsp;<span class="ident" id="1391700"><a href="/gostd/bytes/buffer.go.html#1391575">n</a></span>&nbsp;<span class="op" id="1391702">&gt;</span>&nbsp;<span class="num" id="1391704">0</span>&nbsp;<span class="op" id="1391706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391710"><a href="/gostd/bytes/buffer.go.html#1391559">b</a></span><span class="op" id="1391711">.</span><span class="ident" id="1391712"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1391721">=</span>&nbsp;<span class="ident" id="1391723"><a href="/gostd/bytes/buffer.go.html#1383958">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1391731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391734">return</span>&nbsp;<span class="ident" id="1391741"><a href="/gostd/bytes/buffer.go.html#1391653">data</a></span><br>
<span class="lineno">285</span><span class="op" id="1391746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1391749">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="1391810">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;it&nbsp;returns&nbsp;error&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="1391863">func</span>&nbsp;<span class="op" id="1391868">(</span><span class="ident" id="1391869">b</span>&nbsp;<span class="op" id="1391871">*</span><span class="ident" id="1391872"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1391878">)</span>&nbsp;<span class="ident" id="1391880">ReadByte</span><span class="op" id="1391888">(</span><span class="op" id="1391889">)</span>&nbsp;<span class="op" id="1391891">(</span><span class="ident" id="1391892">c</span>&nbsp;<span class="builtintype" id="1391894">byte</span><span class="op" id="1391898">,</span>&nbsp;<span class="ident" id="1391900">err</span>&nbsp;<span class="builtintype" id="1391904">error</span><span class="op" id="1391909">)</span>&nbsp;<span class="op" id="1391911">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1391914"><a href="/gostd/bytes/buffer.go.html#1391869">b</a></span><span class="op" id="1391915">.</span><span class="ident" id="1391916"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1391925">=</span>&nbsp;<span class="ident" id="1391927"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1391938">if</span>&nbsp;<span class="ident" id="1391941"><a href="/gostd/bytes/buffer.go.html#1391869">b</a></span><span class="op" id="1391942">.</span><span class="ident" id="1391943"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1391947">&gt;=</span>&nbsp;<span class="builtinfunc" id="1391950">len</span><span class="op" id="1391953">(</span><span class="ident" id="1391954"><a href="/gostd/bytes/buffer.go.html#1391869">b</a></span><span class="op" id="1391955">.</span><span class="ident" id="1391956"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1391959">)</span>&nbsp;<span class="op" id="1391961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1391965">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392011"><a href="/gostd/bytes/buffer.go.html#1391869">b</a></span><span class="op" id="1392012">.</span><span class="ident" id="1392013"><a href="/gostd/bytes/buffer.go.html#1385094">Truncate</a></span><span class="op" id="1392021">(</span><span class="num" id="1392022">0</span><span class="op" id="1392023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1392027">return</span>&nbsp;<span class="num" id="1392034">0</span><span class="op" id="1392035">,</span>&nbsp;<span class="ident" id="1392037"><a href="/gostd/bytes/buffer.go.html#1383083">io</a></span><span class="op" id="1392039">.</span><span class="ident" id="1392040"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1392045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392048"><a href="/gostd/bytes/buffer.go.html#1391892">c</a></span>&nbsp;<span class="op" id="1392050">=</span>&nbsp;<span class="ident" id="1392052"><a href="/gostd/bytes/buffer.go.html#1391869">b</a></span><span class="op" id="1392053">.</span><span class="ident" id="1392054"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1392057">[</span><span class="ident" id="1392058"><a href="/gostd/bytes/buffer.go.html#1391869">b</a></span><span class="op" id="1392059">.</span><span class="ident" id="1392060"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1392063">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392066"><a href="/gostd/bytes/buffer.go.html#1391869">b</a></span><span class="op" id="1392067">.</span><span class="ident" id="1392068"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1392071">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392075"><a href="/gostd/bytes/buffer.go.html#1391869">b</a></span><span class="op" id="1392076">.</span><span class="ident" id="1392077"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1392086">=</span>&nbsp;<span class="ident" id="1392088"><a href="/gostd/bytes/buffer.go.html#1383958">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1392096">return</span>&nbsp;<span class="ident" id="1392103"><a href="/gostd/bytes/buffer.go.html#1391892">c</a></span><span class="op" id="1392104">,</span>&nbsp;<span class="builtintype" id="1392106">nil</span><br>
<span class="lineno">300</span><span class="op" id="1392110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1392113">//&nbsp;ReadRune&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;UTF-8-encoded</span><br>
<span class="lineno"></span><span class="comment" id="1392166">//&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="1392205">//&nbsp;If&nbsp;no&nbsp;bytes&nbsp;are&nbsp;available,&nbsp;the&nbsp;error&nbsp;returned&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno">305</span><span class="comment" id="1392265">//&nbsp;If&nbsp;the&nbsp;bytes&nbsp;are&nbsp;an&nbsp;erroneous&nbsp;UTF-8&nbsp;encoding,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="1392317">//&nbsp;consumes&nbsp;one&nbsp;byte&nbsp;and&nbsp;returns&nbsp;U+FFFD,&nbsp;1.</span><br>
<span class="lineno"></span><span class="keyword" id="1392361">func</span>&nbsp;<span class="op" id="1392366">(</span><span class="ident" id="1392367">b</span>&nbsp;<span class="op" id="1392369">*</span><span class="ident" id="1392370"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1392376">)</span>&nbsp;<span class="ident" id="1392378">ReadRune</span><span class="op" id="1392386">(</span><span class="op" id="1392387">)</span>&nbsp;<span class="op" id="1392389">(</span><span class="ident" id="1392390">r</span>&nbsp;<span class="builtintype" id="1392392">rune</span><span class="op" id="1392396">,</span>&nbsp;<span class="ident" id="1392398">size</span>&nbsp;<span class="builtintype" id="1392403">int</span><span class="op" id="1392406">,</span>&nbsp;<span class="ident" id="1392408">err</span>&nbsp;<span class="builtintype" id="1392412">error</span><span class="op" id="1392417">)</span>&nbsp;<span class="op" id="1392419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392422"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392423">.</span><span class="ident" id="1392424"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1392433">=</span>&nbsp;<span class="ident" id="1392435"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1392446">if</span>&nbsp;<span class="ident" id="1392449"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392450">.</span><span class="ident" id="1392451"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1392455">&gt;=</span>&nbsp;<span class="builtinfunc" id="1392458">len</span><span class="op" id="1392461">(</span><span class="ident" id="1392462"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392463">.</span><span class="ident" id="1392464"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1392467">)</span>&nbsp;<span class="op" id="1392469">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1392473">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392519"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392520">.</span><span class="ident" id="1392521"><a href="/gostd/bytes/buffer.go.html#1385094">Truncate</a></span><span class="op" id="1392529">(</span><span class="num" id="1392530">0</span><span class="op" id="1392531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1392535">return</span>&nbsp;<span class="num" id="1392542">0</span><span class="op" id="1392543">,</span>&nbsp;<span class="num" id="1392545">0</span><span class="op" id="1392546">,</span>&nbsp;<span class="ident" id="1392548"><a href="/gostd/bytes/buffer.go.html#1383083">io</a></span><span class="op" id="1392550">.</span><span class="ident" id="1392551"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1392556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392559"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392560">.</span><span class="ident" id="1392561"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1392570">=</span>&nbsp;<span class="ident" id="1392572"><a href="/gostd/bytes/buffer.go.html#1383918">opReadRune</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392584">c</span>&nbsp;<span class="op" id="1392586">:=</span>&nbsp;<span class="ident" id="1392589"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392590">.</span><span class="ident" id="1392591"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1392594">[</span><span class="ident" id="1392595"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392596">.</span><span class="ident" id="1392597"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1392600">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1392603">if</span>&nbsp;<span class="ident" id="1392606"><a href="/gostd/bytes/buffer.go.html#1392584">c</a></span>&nbsp;<span class="op" id="1392608">&lt;</span>&nbsp;<span class="ident" id="1392610"><a href="/gostd/bytes/buffer.go.html#1383089">utf8</a></span><span class="op" id="1392614">.</span><span class="ident" id="1392615"><a href="/gostd/unicode/utf8/utf8.go.html#1805451">RuneSelf</a></span>&nbsp;<span class="op" id="1392624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392628"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392629">.</span><span class="ident" id="1392630"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1392633">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1392638">return</span>&nbsp;<span class="builtintype" id="1392645">rune</span><span class="op" id="1392649">(</span><span class="ident" id="1392650"><a href="/gostd/bytes/buffer.go.html#1392584">c</a></span><span class="op" id="1392651">)</span><span class="op" id="1392652">,</span>&nbsp;<span class="num" id="1392654">1</span><span class="op" id="1392655">,</span>&nbsp;<span class="builtintype" id="1392657">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1392662">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392665"><a href="/gostd/bytes/buffer.go.html#1392390">r</a></span><span class="op" id="1392666">,</span>&nbsp;<span class="ident" id="1392668">n</span>&nbsp;<span class="op" id="1392670">:=</span>&nbsp;<span class="ident" id="1392673"><a href="/gostd/bytes/buffer.go.html#1383089">utf8</a></span><span class="op" id="1392677">.</span><span class="ident" id="1392678"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="1392688">(</span><span class="ident" id="1392689"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392690">.</span><span class="ident" id="1392691"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1392694">[</span><span class="ident" id="1392695"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392696">.</span><span class="ident" id="1392697"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1392700">:</span><span class="op" id="1392701">]</span><span class="op" id="1392702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1392705"><a href="/gostd/bytes/buffer.go.html#1392367">b</a></span><span class="op" id="1392706">.</span><span class="ident" id="1392707"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1392711">+=</span>&nbsp;<span class="ident" id="1392714"><a href="/gostd/bytes/buffer.go.html#1392668">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1392717">return</span>&nbsp;<span class="ident" id="1392724"><a href="/gostd/bytes/buffer.go.html#1392390">r</a></span><span class="op" id="1392725">,</span>&nbsp;<span class="ident" id="1392727"><a href="/gostd/bytes/buffer.go.html#1392668">n</a></span><span class="op" id="1392728">,</span>&nbsp;<span class="builtintype" id="1392730">nil</span><br>
<span class="lineno"></span><span class="op" id="1392734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="1392737">//&nbsp;UnreadRune&nbsp;unreads&nbsp;the&nbsp;last&nbsp;rune&nbsp;returned&nbsp;by&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="comment" id="1392795">//&nbsp;If&nbsp;the&nbsp;most&nbsp;recent&nbsp;read&nbsp;or&nbsp;write&nbsp;operation&nbsp;on&nbsp;the&nbsp;buffer&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="1392859">//&nbsp;not&nbsp;a&nbsp;ReadRune,&nbsp;UnreadRune&nbsp;returns&nbsp;an&nbsp;error.&nbsp;&nbsp;(In&nbsp;this&nbsp;regard</span><br>
<span class="lineno"></span><span class="comment" id="1392924">//&nbsp;it&nbsp;is&nbsp;stricter&nbsp;than&nbsp;UnreadByte,&nbsp;which&nbsp;will&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="1392991">//&nbsp;from&nbsp;any&nbsp;read&nbsp;operation.)</span><br>
<span class="lineno">330</span><span class="keyword" id="1393020">func</span>&nbsp;<span class="op" id="1393025">(</span><span class="ident" id="1393026">b</span>&nbsp;<span class="op" id="1393028">*</span><span class="ident" id="1393029"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1393035">)</span>&nbsp;<span class="ident" id="1393037">UnreadRune</span><span class="op" id="1393047">(</span><span class="op" id="1393048">)</span>&nbsp;<span class="builtintype" id="1393050">error</span>&nbsp;<span class="op" id="1393056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1393059">if</span>&nbsp;<span class="ident" id="1393062"><a href="/gostd/bytes/buffer.go.html#1393026">b</a></span><span class="op" id="1393063">.</span><span class="ident" id="1393064"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1393073">!=</span>&nbsp;<span class="ident" id="1393076"><a href="/gostd/bytes/buffer.go.html#1383918">opReadRune</a></span>&nbsp;<span class="op" id="1393087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1393091">return</span>&nbsp;<span class="ident" id="1393098"><a href="/gostd/bytes/buffer.go.html#1383073">errors</a></span><span class="op" id="1393104">.</span><span class="ident" id="1393105"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1393108">(</span><span class="string" id="1393109">&#34;bytes.Buffer:&nbsp;UnreadRune:&nbsp;previous&nbsp;operation&nbsp;was&nbsp;not&nbsp;ReadRune&#34;</span><span class="op" id="1393172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1393175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1393178"><a href="/gostd/bytes/buffer.go.html#1393026">b</a></span><span class="op" id="1393179">.</span><span class="ident" id="1393180"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1393189">=</span>&nbsp;<span class="ident" id="1393191"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1393202">if</span>&nbsp;<span class="ident" id="1393205"><a href="/gostd/bytes/buffer.go.html#1393026">b</a></span><span class="op" id="1393206">.</span><span class="ident" id="1393207"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1393211">&gt;</span>&nbsp;<span class="num" id="1393213">0</span>&nbsp;<span class="op" id="1393215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1393219">_</span><span class="op" id="1393220">,</span>&nbsp;<span class="ident" id="1393222">n</span>&nbsp;<span class="op" id="1393224">:=</span>&nbsp;<span class="ident" id="1393227"><a href="/gostd/bytes/buffer.go.html#1383089">utf8</a></span><span class="op" id="1393231">.</span><span class="ident" id="1393232"><a href="/gostd/unicode/utf8/utf8.go.html#1810995">DecodeLastRune</a></span><span class="op" id="1393246">(</span><span class="ident" id="1393247"><a href="/gostd/bytes/buffer.go.html#1393026">b</a></span><span class="op" id="1393248">.</span><span class="ident" id="1393249"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1393252">[</span><span class="num" id="1393253">0</span><span class="op" id="1393254">:</span><span class="ident" id="1393255"><a href="/gostd/bytes/buffer.go.html#1393026">b</a></span><span class="op" id="1393256">.</span><span class="ident" id="1393257"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1393260">]</span><span class="op" id="1393261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1393265"><a href="/gostd/bytes/buffer.go.html#1393026">b</a></span><span class="op" id="1393266">.</span><span class="ident" id="1393267"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1393271">-=</span>&nbsp;<span class="ident" id="1393274"><a href="/gostd/bytes/buffer.go.html#1393222">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1393277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1393280">return</span>&nbsp;<span class="builtintype" id="1393287">nil</span><br>
<span class="lineno">340</span><span class="op" id="1393291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1393294">//&nbsp;UnreadByte&nbsp;unreads&nbsp;the&nbsp;last&nbsp;byte&nbsp;returned&nbsp;by&nbsp;the&nbsp;most&nbsp;recent</span><br>
<span class="lineno"></span><span class="comment" id="1393358">//&nbsp;read&nbsp;operation.&nbsp;&nbsp;If&nbsp;write&nbsp;has&nbsp;happened&nbsp;since&nbsp;the&nbsp;last&nbsp;read,&nbsp;UnreadByte</span><br>
<span class="lineno"></span><span class="comment" id="1393432">//&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">345</span><span class="keyword" id="1393453">func</span>&nbsp;<span class="op" id="1393458">(</span><span class="ident" id="1393459">b</span>&nbsp;<span class="op" id="1393461">*</span><span class="ident" id="1393462"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1393468">)</span>&nbsp;<span class="ident" id="1393470">UnreadByte</span><span class="op" id="1393480">(</span><span class="op" id="1393481">)</span>&nbsp;<span class="builtintype" id="1393483">error</span>&nbsp;<span class="op" id="1393489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1393492">if</span>&nbsp;<span class="ident" id="1393495"><a href="/gostd/bytes/buffer.go.html#1393459">b</a></span><span class="op" id="1393496">.</span><span class="ident" id="1393497"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1393506">!=</span>&nbsp;<span class="ident" id="1393509"><a href="/gostd/bytes/buffer.go.html#1383918">opReadRune</a></span>&nbsp;<span class="op" id="1393520">&amp;&amp;</span>&nbsp;<span class="ident" id="1393523"><a href="/gostd/bytes/buffer.go.html#1393459">b</a></span><span class="op" id="1393524">.</span><span class="ident" id="1393525"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1393534">!=</span>&nbsp;<span class="ident" id="1393537"><a href="/gostd/bytes/buffer.go.html#1383958">opRead</a></span>&nbsp;<span class="op" id="1393544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1393548">return</span>&nbsp;<span class="ident" id="1393555"><a href="/gostd/bytes/buffer.go.html#1383073">errors</a></span><span class="op" id="1393561">.</span><span class="ident" id="1393562"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1393565">(</span><span class="string" id="1393566">&#34;bytes.Buffer:&nbsp;UnreadByte:&nbsp;previous&nbsp;operation&nbsp;was&nbsp;not&nbsp;a&nbsp;read&#34;</span><span class="op" id="1393627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1393630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1393633"><a href="/gostd/bytes/buffer.go.html#1393459">b</a></span><span class="op" id="1393634">.</span><span class="ident" id="1393635"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1393644">=</span>&nbsp;<span class="ident" id="1393646"><a href="/gostd/bytes/buffer.go.html#1383869">opInvalid</a></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1393657">if</span>&nbsp;<span class="ident" id="1393660"><a href="/gostd/bytes/buffer.go.html#1393459">b</a></span><span class="op" id="1393661">.</span><span class="ident" id="1393662"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1393666">&gt;</span>&nbsp;<span class="num" id="1393668">0</span>&nbsp;<span class="op" id="1393670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1393674"><a href="/gostd/bytes/buffer.go.html#1393459">b</a></span><span class="op" id="1393675">.</span><span class="ident" id="1393676"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1393679">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1393683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1393686">return</span>&nbsp;<span class="builtintype" id="1393693">nil</span><br>
<span class="lineno"></span><span class="op" id="1393697">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="1393700">//&nbsp;ReadBytes&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="1393769">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="1393845">//&nbsp;If&nbsp;ReadBytes&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="1393909">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">360</span><span class="comment" id="1393991">//&nbsp;ReadBytes&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="1394072">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="keyword" id="1394082">func</span>&nbsp;<span class="op" id="1394087">(</span><span class="ident" id="1394088">b</span>&nbsp;<span class="op" id="1394090">*</span><span class="ident" id="1394091"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1394097">)</span>&nbsp;<span class="ident" id="1394099">ReadBytes</span><span class="op" id="1394108">(</span><span class="ident" id="1394109">delim</span>&nbsp;<span class="builtintype" id="1394115">byte</span><span class="op" id="1394119">)</span>&nbsp;<span class="op" id="1394121">(</span><span class="ident" id="1394122">line</span>&nbsp;<span class="op" id="1394127">[</span><span class="op" id="1394128">]</span><span class="builtintype" id="1394129">byte</span><span class="op" id="1394133">,</span>&nbsp;<span class="ident" id="1394135">err</span>&nbsp;<span class="builtintype" id="1394139">error</span><span class="op" id="1394144">)</span>&nbsp;<span class="op" id="1394146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394149">slice</span><span class="op" id="1394154">,</span>&nbsp;<span class="ident" id="1394156"><a href="/gostd/bytes/buffer.go.html#1394135">err</a></span>&nbsp;<span class="op" id="1394160">:=</span>&nbsp;<span class="ident" id="1394163"><a href="/gostd/bytes/buffer.go.html#1394088">b</a></span><span class="op" id="1394164">.</span><span class="ident" id="1394165"><a href="/gostd/bytes/buffer.go.html#1394415">readSlice</a></span><span class="op" id="1394174">(</span><span class="ident" id="1394175"><a href="/gostd/bytes/buffer.go.html#1394109">delim</a></span><span class="op" id="1394180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1394183">//&nbsp;return&nbsp;a&nbsp;copy&nbsp;of&nbsp;slice.&nbsp;The&nbsp;buffer&#39;s&nbsp;backing&nbsp;array&nbsp;may</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1394242">//&nbsp;be&nbsp;overwritten&nbsp;by&nbsp;later&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394277"><a href="/gostd/bytes/buffer.go.html#1394122">line</a></span>&nbsp;<span class="op" id="1394282">=</span>&nbsp;<span class="builtinfunc" id="1394284">append</span><span class="op" id="1394290">(</span><span class="ident" id="1394291"><a href="/gostd/bytes/buffer.go.html#1394122">line</a></span><span class="op" id="1394295">,</span>&nbsp;<span class="ident" id="1394297"><a href="/gostd/bytes/buffer.go.html#1394149">slice</a></span><span class="op" id="1394302">...</span><span class="op" id="1394305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1394308">return</span><br>
<span class="lineno"></span><span class="op" id="1394315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="comment" id="1394318">//&nbsp;readSlice&nbsp;is&nbsp;like&nbsp;ReadBytes&nbsp;but&nbsp;returns&nbsp;a&nbsp;reference&nbsp;to&nbsp;internal&nbsp;buffer&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="1394398">func</span>&nbsp;<span class="op" id="1394403">(</span><span class="ident" id="1394404">b</span>&nbsp;<span class="op" id="1394406">*</span><span class="ident" id="1394407"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1394413">)</span>&nbsp;<span class="ident" id="1394415">readSlice</span><span class="op" id="1394424">(</span><span class="ident" id="1394425">delim</span>&nbsp;<span class="builtintype" id="1394431">byte</span><span class="op" id="1394435">)</span>&nbsp;<span class="op" id="1394437">(</span><span class="ident" id="1394438">line</span>&nbsp;<span class="op" id="1394443">[</span><span class="op" id="1394444">]</span><span class="builtintype" id="1394445">byte</span><span class="op" id="1394449">,</span>&nbsp;<span class="ident" id="1394451">err</span>&nbsp;<span class="builtintype" id="1394455">error</span><span class="op" id="1394460">)</span>&nbsp;<span class="op" id="1394462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394465">i</span>&nbsp;<span class="op" id="1394467">:=</span>&nbsp;<span class="ident" id="1394470"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="1394479">(</span><span class="ident" id="1394480"><a href="/gostd/bytes/buffer.go.html#1394404">b</a></span><span class="op" id="1394481">.</span><span class="ident" id="1394482"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1394485">[</span><span class="ident" id="1394486"><a href="/gostd/bytes/buffer.go.html#1394404">b</a></span><span class="op" id="1394487">.</span><span class="ident" id="1394488"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1394491">:</span><span class="op" id="1394492">]</span><span class="op" id="1394493">,</span>&nbsp;<span class="ident" id="1394495"><a href="/gostd/bytes/buffer.go.html#1394425">delim</a></span><span class="op" id="1394500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394503">end</span>&nbsp;<span class="op" id="1394507">:=</span>&nbsp;<span class="ident" id="1394510"><a href="/gostd/bytes/buffer.go.html#1394404">b</a></span><span class="op" id="1394511">.</span><span class="ident" id="1394512"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1394516">+</span>&nbsp;<span class="ident" id="1394518"><a href="/gostd/bytes/buffer.go.html#1394465">i</a></span>&nbsp;<span class="op" id="1394520">+</span>&nbsp;<span class="num" id="1394522">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1394525">if</span>&nbsp;<span class="ident" id="1394528"><a href="/gostd/bytes/buffer.go.html#1394465">i</a></span>&nbsp;<span class="op" id="1394530">&lt;</span>&nbsp;<span class="num" id="1394532">0</span>&nbsp;<span class="op" id="1394534">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394538"><a href="/gostd/bytes/buffer.go.html#1394503">end</a></span>&nbsp;<span class="op" id="1394542">=</span>&nbsp;<span class="builtinfunc" id="1394544">len</span><span class="op" id="1394547">(</span><span class="ident" id="1394548"><a href="/gostd/bytes/buffer.go.html#1394404">b</a></span><span class="op" id="1394549">.</span><span class="ident" id="1394550"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1394553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394557"><a href="/gostd/bytes/buffer.go.html#1394451">err</a></span>&nbsp;<span class="op" id="1394561">=</span>&nbsp;<span class="ident" id="1394563"><a href="/gostd/bytes/buffer.go.html#1383083">io</a></span><span class="op" id="1394565">.</span><span class="ident" id="1394566"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1394571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394574"><a href="/gostd/bytes/buffer.go.html#1394438">line</a></span>&nbsp;<span class="op" id="1394579">=</span>&nbsp;<span class="ident" id="1394581"><a href="/gostd/bytes/buffer.go.html#1394404">b</a></span><span class="op" id="1394582">.</span><span class="ident" id="1394583"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1394586">[</span><span class="ident" id="1394587"><a href="/gostd/bytes/buffer.go.html#1394404">b</a></span><span class="op" id="1394588">.</span><span class="ident" id="1394589"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span><span class="op" id="1394592">:</span><span class="ident" id="1394593"><a href="/gostd/bytes/buffer.go.html#1394503">end</a></span><span class="op" id="1394596">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394599"><a href="/gostd/bytes/buffer.go.html#1394404">b</a></span><span class="op" id="1394600">.</span><span class="ident" id="1394601"><a href="/gostd/bytes/buffer.go.html#1383343">off</a></span>&nbsp;<span class="op" id="1394605">=</span>&nbsp;<span class="ident" id="1394607"><a href="/gostd/bytes/buffer.go.html#1394503">end</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1394612"><a href="/gostd/bytes/buffer.go.html#1394404">b</a></span><span class="op" id="1394613">.</span><span class="ident" id="1394614"><a href="/gostd/bytes/buffer.go.html#1383609">lastRead</a></span>&nbsp;<span class="op" id="1394623">=</span>&nbsp;<span class="ident" id="1394625"><a href="/gostd/bytes/buffer.go.html#1383958">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1394633">return</span>&nbsp;<span class="ident" id="1394640"><a href="/gostd/bytes/buffer.go.html#1394438">line</a></span><span class="op" id="1394644">,</span>&nbsp;<span class="ident" id="1394646"><a href="/gostd/bytes/buffer.go.html#1394451">err</a></span><br>
<span class="lineno"></span><span class="op" id="1394650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1394653">//&nbsp;ReadString&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno">385</span><span class="comment" id="1394723">//&nbsp;returning&nbsp;a&nbsp;string&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="1394800">//&nbsp;If&nbsp;ReadString&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="1394865">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno"></span><span class="comment" id="1394947">//&nbsp;ReadString&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end</span><br>
<span class="lineno"></span><span class="comment" id="1395026">//&nbsp;in&nbsp;delim.</span><br>
<span class="lineno">390</span><span class="keyword" id="1395039">func</span>&nbsp;<span class="op" id="1395044">(</span><span class="ident" id="1395045">b</span>&nbsp;<span class="op" id="1395047">*</span><span class="ident" id="1395048"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1395054">)</span>&nbsp;<span class="ident" id="1395056">ReadString</span><span class="op" id="1395066">(</span><span class="ident" id="1395067">delim</span>&nbsp;<span class="builtintype" id="1395073">byte</span><span class="op" id="1395077">)</span>&nbsp;<span class="op" id="1395079">(</span><span class="ident" id="1395080">line</span>&nbsp;<span class="builtintype" id="1395085">string</span><span class="op" id="1395091">,</span>&nbsp;<span class="ident" id="1395093">err</span>&nbsp;<span class="builtintype" id="1395097">error</span><span class="op" id="1395102">)</span>&nbsp;<span class="op" id="1395104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1395107">slice</span><span class="op" id="1395112">,</span>&nbsp;<span class="ident" id="1395114"><a href="/gostd/bytes/buffer.go.html#1395093">err</a></span>&nbsp;<span class="op" id="1395118">:=</span>&nbsp;<span class="ident" id="1395121"><a href="/gostd/bytes/buffer.go.html#1395045">b</a></span><span class="op" id="1395122">.</span><span class="ident" id="1395123"><a href="/gostd/bytes/buffer.go.html#1394415">readSlice</a></span><span class="op" id="1395132">(</span><span class="ident" id="1395133"><a href="/gostd/bytes/buffer.go.html#1395067">delim</a></span><span class="op" id="1395138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1395141">return</span>&nbsp;<span class="builtintype" id="1395148">string</span><span class="op" id="1395154">(</span><span class="ident" id="1395155"><a href="/gostd/bytes/buffer.go.html#1395107">slice</a></span><span class="op" id="1395160">)</span><span class="op" id="1395161">,</span>&nbsp;<span class="ident" id="1395163"><a href="/gostd/bytes/buffer.go.html#1395093">err</a></span><br>
<span class="lineno"></span><span class="op" id="1395167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="comment" id="1395170">//&nbsp;NewBuffer&nbsp;creates&nbsp;and&nbsp;initializes&nbsp;a&nbsp;new&nbsp;Buffer&nbsp;using&nbsp;buf&nbsp;as&nbsp;its&nbsp;initial</span><br>
<span class="lineno"></span><span class="comment" id="1395245">//&nbsp;contents.&nbsp;&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;prepare&nbsp;a&nbsp;Buffer&nbsp;to&nbsp;read&nbsp;existing&nbsp;data.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="1395321">//&nbsp;can&nbsp;also&nbsp;be&nbsp;used&nbsp;to&nbsp;size&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;for&nbsp;writing.&nbsp;To&nbsp;do&nbsp;that,</span><br>
<span class="lineno"></span><span class="comment" id="1395394">//&nbsp;buf&nbsp;should&nbsp;have&nbsp;the&nbsp;desired&nbsp;capacity&nbsp;but&nbsp;a&nbsp;length&nbsp;of&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="1395456">//</span><br>
<span class="lineno">400</span><span class="comment" id="1395459">//&nbsp;In&nbsp;most&nbsp;cases,&nbsp;new(Buffer)&nbsp;(or&nbsp;just&nbsp;declaring&nbsp;a&nbsp;Buffer&nbsp;variable)&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1395530">//&nbsp;sufficient&nbsp;to&nbsp;initialize&nbsp;a&nbsp;Buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1395568">func</span>&nbsp;<span class="ident" id="1395573">NewBuffer</span><span class="op" id="1395582">(</span><span class="ident" id="1395583">buf</span>&nbsp;<span class="op" id="1395587">[</span><span class="op" id="1395588">]</span><span class="builtintype" id="1395589">byte</span><span class="op" id="1395593">)</span>&nbsp;<span class="op" id="1395595">*</span><span class="ident" id="1395596"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span>&nbsp;<span class="op" id="1395603">{</span>&nbsp;<span class="keyword" id="1395605">return</span>&nbsp;<span class="op" id="1395612">&amp;</span><span class="ident" id="1395613"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1395619">{</span><span class="ident" id="1395620"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1395623">:</span>&nbsp;<span class="ident" id="1395625"><a href="/gostd/bytes/buffer.go.html#1395583">buf</a></span><span class="op" id="1395628">}</span>&nbsp;<span class="op" id="1395630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1395633">//&nbsp;NewBufferString&nbsp;creates&nbsp;and&nbsp;initializes&nbsp;a&nbsp;new&nbsp;Buffer&nbsp;using&nbsp;string&nbsp;s&nbsp;as&nbsp;its</span><br>
<span class="lineno">405</span><span class="comment" id="1395711">//&nbsp;initial&nbsp;contents.&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;prepare&nbsp;a&nbsp;buffer&nbsp;to&nbsp;read&nbsp;an&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="1395787">//&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="1395798">//</span><br>
<span class="lineno"></span><span class="comment" id="1395801">//&nbsp;In&nbsp;most&nbsp;cases,&nbsp;new(Buffer)&nbsp;(or&nbsp;just&nbsp;declaring&nbsp;a&nbsp;Buffer&nbsp;variable)&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1395872">//&nbsp;sufficient&nbsp;to&nbsp;initialize&nbsp;a&nbsp;Buffer.</span><br>
<span class="lineno">410</span><span class="keyword" id="1395910">func</span>&nbsp;<span class="ident" id="1395915">NewBufferString</span><span class="op" id="1395930">(</span><span class="ident" id="1395931">s</span>&nbsp;<span class="builtintype" id="1395933">string</span><span class="op" id="1395939">)</span>&nbsp;<span class="op" id="1395941">*</span><span class="ident" id="1395942"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span>&nbsp;<span class="op" id="1395949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1395952">return</span>&nbsp;<span class="op" id="1395959">&amp;</span><span class="ident" id="1395960"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="1395966">{</span><span class="ident" id="1395967"><a href="/gostd/bytes/buffer.go.html#1383268">buf</a></span><span class="op" id="1395970">:</span>&nbsp;<span class="op" id="1395972">[</span><span class="op" id="1395973">]</span><span class="builtintype" id="1395974">byte</span><span class="op" id="1395978">(</span><span class="ident" id="1395979"><a href="/gostd/bytes/buffer.go.html#1395931">s</a></span><span class="op" id="1395980">)</span><span class="op" id="1395981">}</span><br>
<span class="lineno"></span><span class="op" id="1395983">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
