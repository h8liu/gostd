<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7028341">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7028396">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7028450">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7028501">package</span>&nbsp;<span class="ident" id="7028509">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028517">import</span>&nbsp;<span class="op" id="7028524">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028527">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028536">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028549">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028561">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028574">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028585">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7028595">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7028598">const</span>&nbsp;<span class="ident" id="7028604">testfile</span>&nbsp;<span class="op" id="7028613">=</span>&nbsp;<span class="string" id="7028615">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028633">func</span>&nbsp;<span class="ident" id="7028638">diff</span><span class="op" id="7028642">(</span><span class="ident" id="7028643">t</span>&nbsp;<span class="op" id="7028645">*</span><span class="ident" id="7028646">testing</span><span class="op" id="7028653">.</span><span class="ident" id="7028654">T</span><span class="op" id="7028655">,</span>&nbsp;<span class="ident" id="7028657">dst</span><span class="op" id="7028660">,</span>&nbsp;<span class="ident" id="7028662">src</span>&nbsp;<span class="op" id="7028666">[</span><span class="op" id="7028667">]</span><span class="builtintype" id="7028668">byte</span><span class="op" id="7028672">)</span>&nbsp;<span class="op" id="7028674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028677">line</span>&nbsp;<span class="op" id="7028682">:=</span>&nbsp;<span class="num" id="7028685">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028688">offs</span>&nbsp;<span class="op" id="7028693">:=</span>&nbsp;<span class="num" id="7028696">0</span>&nbsp;<span class="comment" id="7028698">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7028714">for</span>&nbsp;<span class="ident" id="7028718">i</span>&nbsp;<span class="op" id="7028720">:=</span>&nbsp;<span class="num" id="7028723">0</span><span class="op" id="7028724">;</span>&nbsp;<span class="ident" id="7028726">i</span>&nbsp;<span class="op" id="7028728">&lt;</span>&nbsp;<span class="builtinfunc" id="7028730">len</span><span class="op" id="7028733">(</span><span class="ident" id="7028734">dst</span><span class="op" id="7028737">)</span>&nbsp;<span class="op" id="7028739">&amp;&amp;</span>&nbsp;<span class="ident" id="7028742">i</span>&nbsp;<span class="op" id="7028744">&lt;</span>&nbsp;<span class="builtinfunc" id="7028746">len</span><span class="op" id="7028749">(</span><span class="ident" id="7028750">src</span><span class="op" id="7028753">)</span><span class="op" id="7028754">;</span>&nbsp;<span class="ident" id="7028756">i</span><span class="op" id="7028757">++</span>&nbsp;<span class="op" id="7028760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028764">d</span>&nbsp;<span class="op" id="7028766">:=</span>&nbsp;<span class="ident" id="7028769">dst</span><span class="op" id="7028772">[</span><span class="ident" id="7028773">i</span><span class="op" id="7028774">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028778">s</span>&nbsp;<span class="op" id="7028780">:=</span>&nbsp;<span class="ident" id="7028783">src</span><span class="op" id="7028786">[</span><span class="ident" id="7028787">i</span><span class="op" id="7028788">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7028792">if</span>&nbsp;<span class="ident" id="7028795">d</span>&nbsp;<span class="op" id="7028797">!=</span>&nbsp;<span class="ident" id="7028800">s</span>&nbsp;<span class="op" id="7028802">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028807">t</span><span class="op" id="7028808">.</span><span class="ident" id="7028809">Errorf</span><span class="op" id="7028815">(</span><span class="string" id="7028816">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="7028830">,</span>&nbsp;<span class="ident" id="7028832">line</span><span class="op" id="7028836">,</span>&nbsp;<span class="ident" id="7028838">dst</span><span class="op" id="7028841">[</span><span class="ident" id="7028842">offs</span><span class="op" id="7028846">:</span><span class="ident" id="7028847">i</span><span class="op" id="7028848">+</span><span class="num" id="7028849">1</span><span class="op" id="7028850">]</span><span class="op" id="7028851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028856">t</span><span class="op" id="7028857">.</span><span class="ident" id="7028858">Errorf</span><span class="op" id="7028864">(</span><span class="string" id="7028865">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="7028879">,</span>&nbsp;<span class="ident" id="7028881">line</span><span class="op" id="7028885">,</span>&nbsp;<span class="ident" id="7028887">src</span><span class="op" id="7028890">[</span><span class="ident" id="7028891">offs</span><span class="op" id="7028895">:</span><span class="ident" id="7028896">i</span><span class="op" id="7028897">+</span><span class="num" id="7028898">1</span><span class="op" id="7028899">]</span><span class="op" id="7028900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7028905">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7028918">if</span>&nbsp;<span class="ident" id="7028921">s</span>&nbsp;<span class="op" id="7028923">==</span>&nbsp;<span class="string" id="7028926">&#39;\n&#39;</span>&nbsp;<span class="op" id="7028931">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028936">line</span><span class="op" id="7028940">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028946">offs</span>&nbsp;<span class="op" id="7028951">=</span>&nbsp;<span class="ident" id="7028953">i</span>&nbsp;<span class="op" id="7028955">+</span>&nbsp;<span class="num" id="7028957">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7028967">if</span>&nbsp;<span class="builtinfunc" id="7028970">len</span><span class="op" id="7028973">(</span><span class="ident" id="7028974">dst</span><span class="op" id="7028977">)</span>&nbsp;<span class="op" id="7028979">!=</span>&nbsp;<span class="builtinfunc" id="7028982">len</span><span class="op" id="7028985">(</span><span class="ident" id="7028986">src</span><span class="op" id="7028989">)</span>&nbsp;<span class="op" id="7028991">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028995">t</span><span class="op" id="7028996">.</span><span class="ident" id="7028997">Errorf</span><span class="op" id="7029003">(</span><span class="string" id="7029004">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="7029044">,</span>&nbsp;<span class="builtinfunc" id="7029046">len</span><span class="op" id="7029049">(</span><span class="ident" id="7029050">dst</span><span class="op" id="7029053">)</span><span class="op" id="7029054">,</span>&nbsp;<span class="builtinfunc" id="7029056">len</span><span class="op" id="7029059">(</span><span class="ident" id="7029060">src</span><span class="op" id="7029063">)</span><span class="op" id="7029064">,</span>&nbsp;<span class="ident" id="7029066">src</span><span class="op" id="7029069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029072">}</span><br>
<span class="lineno"></span><span class="op" id="7029074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7029077">func</span>&nbsp;<span class="ident" id="7029082">TestNode</span><span class="op" id="7029090">(</span><span class="ident" id="7029091">t</span>&nbsp;<span class="op" id="7029093">*</span><span class="ident" id="7029094">testing</span><span class="op" id="7029101">.</span><span class="ident" id="7029102">T</span><span class="op" id="7029103">)</span>&nbsp;<span class="op" id="7029105">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029108">src</span><span class="op" id="7029111">,</span>&nbsp;<span class="ident" id="7029113">err</span>&nbsp;<span class="op" id="7029117">:=</span>&nbsp;<span class="ident" id="7029120">ioutil</span><span class="op" id="7029126">.</span><span class="ident" id="7029127">ReadFile</span><span class="op" id="7029135">(</span><span class="ident" id="7029136">testfile</span><span class="op" id="7029144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029147">if</span>&nbsp;<span class="ident" id="7029150">err</span>&nbsp;<span class="op" id="7029154">!=</span>&nbsp;<span class="ident" id="7029157">nil</span>&nbsp;<span class="op" id="7029161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029165">t</span><span class="op" id="7029166">.</span><span class="ident" id="7029167">Fatal</span><span class="op" id="7029172">(</span><span class="ident" id="7029173">err</span><span class="op" id="7029176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029183">fset</span>&nbsp;<span class="op" id="7029188">:=</span>&nbsp;<span class="ident" id="7029191">token</span><span class="op" id="7029196">.</span><span class="ident" id="7029197">NewFileSet</span><span class="op" id="7029207">(</span><span class="op" id="7029208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029211">file</span><span class="op" id="7029215">,</span>&nbsp;<span class="ident" id="7029217">err</span>&nbsp;<span class="op" id="7029221">:=</span>&nbsp;<span class="ident" id="7029224">parser</span><span class="op" id="7029230">.</span><span class="ident" id="7029231">ParseFile</span><span class="op" id="7029240">(</span><span class="ident" id="7029241">fset</span><span class="op" id="7029245">,</span>&nbsp;<span class="ident" id="7029247">testfile</span><span class="op" id="7029255">,</span>&nbsp;<span class="ident" id="7029257">src</span><span class="op" id="7029260">,</span>&nbsp;<span class="ident" id="7029262">parser</span><span class="op" id="7029268">.</span><span class="ident" id="7029269">ParseComments</span><span class="op" id="7029282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029285">if</span>&nbsp;<span class="ident" id="7029288">err</span>&nbsp;<span class="op" id="7029292">!=</span>&nbsp;<span class="ident" id="7029295">nil</span>&nbsp;<span class="op" id="7029299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029303">t</span><span class="op" id="7029304">.</span><span class="ident" id="7029305">Fatal</span><span class="op" id="7029310">(</span><span class="ident" id="7029311">err</span><span class="op" id="7029314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029317">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029321">var</span>&nbsp;<span class="ident" id="7029325">buf</span>&nbsp;<span class="ident" id="7029329">bytes</span><span class="op" id="7029334">.</span><span class="ident" id="7029335">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029344">if</span>&nbsp;<span class="ident" id="7029347">err</span>&nbsp;<span class="op" id="7029351">=</span>&nbsp;<span class="ident" id="7029353">Node</span><span class="op" id="7029357">(</span><span class="op" id="7029358">&amp;</span><span class="ident" id="7029359">buf</span><span class="op" id="7029362">,</span>&nbsp;<span class="ident" id="7029364">fset</span><span class="op" id="7029368">,</span>&nbsp;<span class="ident" id="7029370">file</span><span class="op" id="7029374">)</span><span class="op" id="7029375">;</span>&nbsp;<span class="ident" id="7029377">err</span>&nbsp;<span class="op" id="7029381">!=</span>&nbsp;<span class="ident" id="7029384">nil</span>&nbsp;<span class="op" id="7029388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029392">t</span><span class="op" id="7029393">.</span><span class="ident" id="7029394">Fatal</span><span class="op" id="7029399">(</span><span class="string" id="7029400">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="7029414">,</span>&nbsp;<span class="ident" id="7029416">err</span><span class="op" id="7029419">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029426">diff</span><span class="op" id="7029430">(</span><span class="ident" id="7029431">t</span><span class="op" id="7029432">,</span>&nbsp;<span class="ident" id="7029434">buf</span><span class="op" id="7029437">.</span><span class="ident" id="7029438">Bytes</span><span class="op" id="7029443">(</span><span class="op" id="7029444">)</span><span class="op" id="7029445">,</span>&nbsp;<span class="ident" id="7029447">src</span><span class="op" id="7029450">)</span><br>
<span class="lineno"></span><span class="op" id="7029452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7029455">func</span>&nbsp;<span class="ident" id="7029460">TestSource</span><span class="op" id="7029470">(</span><span class="ident" id="7029471">t</span>&nbsp;<span class="op" id="7029473">*</span><span class="ident" id="7029474">testing</span><span class="op" id="7029481">.</span><span class="ident" id="7029482">T</span><span class="op" id="7029483">)</span>&nbsp;<span class="op" id="7029485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029488">src</span><span class="op" id="7029491">,</span>&nbsp;<span class="ident" id="7029493">err</span>&nbsp;<span class="op" id="7029497">:=</span>&nbsp;<span class="ident" id="7029500">ioutil</span><span class="op" id="7029506">.</span><span class="ident" id="7029507">ReadFile</span><span class="op" id="7029515">(</span><span class="ident" id="7029516">testfile</span><span class="op" id="7029524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029527">if</span>&nbsp;<span class="ident" id="7029530">err</span>&nbsp;<span class="op" id="7029534">!=</span>&nbsp;<span class="ident" id="7029537">nil</span>&nbsp;<span class="op" id="7029541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029545">t</span><span class="op" id="7029546">.</span><span class="ident" id="7029547">Fatal</span><span class="op" id="7029552">(</span><span class="ident" id="7029553">err</span><span class="op" id="7029556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029559">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029563">res</span><span class="op" id="7029566">,</span>&nbsp;<span class="ident" id="7029568">err</span>&nbsp;<span class="op" id="7029572">:=</span>&nbsp;<span class="ident" id="7029575">Source</span><span class="op" id="7029581">(</span><span class="ident" id="7029582">src</span><span class="op" id="7029585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029588">if</span>&nbsp;<span class="ident" id="7029591">err</span>&nbsp;<span class="op" id="7029595">!=</span>&nbsp;<span class="ident" id="7029598">nil</span>&nbsp;<span class="op" id="7029602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029606">t</span><span class="op" id="7029607">.</span><span class="ident" id="7029608">Fatal</span><span class="op" id="7029613">(</span><span class="string" id="7029614">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="7029630">,</span>&nbsp;<span class="ident" id="7029632">err</span><span class="op" id="7029635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029638">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029642">diff</span><span class="op" id="7029646">(</span><span class="ident" id="7029647">t</span><span class="op" id="7029648">,</span>&nbsp;<span class="ident" id="7029650">res</span><span class="op" id="7029653">,</span>&nbsp;<span class="ident" id="7029655">src</span><span class="op" id="7029658">)</span><br>
<span class="lineno"></span><span class="op" id="7029660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7029663">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="7029737">var</span>&nbsp;<span class="ident" id="7029741">tests</span>&nbsp;<span class="op" id="7029747">=</span>&nbsp;<span class="op" id="7029749">[</span><span class="op" id="7029750">]</span><span class="builtintype" id="7029751">string</span><span class="op" id="7029757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7029760">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029782">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="7029802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029805">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="7029816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029819">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="7029849">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7029853">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029873">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="7029881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029884">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="7029920">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7029924">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029968">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="7029988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029991">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7030017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7030020">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7030056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7030059">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7030103">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7030106">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="7030163">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7030169">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7030213">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="7030274">,</span>&nbsp;<span class="comment" id="7030276">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7030323">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7030336">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="7030358">,</span>&nbsp;<span class="comment" id="7030360">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7030377">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7030400">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="7030414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7030417">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="7030431">,</span><br>
<span class="lineno"></span><span class="op" id="7030433">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="7030436">func</span>&nbsp;<span class="ident" id="7030441">String</span><span class="op" id="7030447">(</span><span class="ident" id="7030448">s</span>&nbsp;<span class="builtintype" id="7030450">string</span><span class="op" id="7030456">)</span>&nbsp;<span class="op" id="7030458">(</span><span class="builtintype" id="7030459">string</span><span class="op" id="7030465">,</span>&nbsp;<span class="builtintype" id="7030467">error</span><span class="op" id="7030472">)</span>&nbsp;<span class="op" id="7030474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030477">res</span><span class="op" id="7030480">,</span>&nbsp;<span class="ident" id="7030482">err</span>&nbsp;<span class="op" id="7030486">:=</span>&nbsp;<span class="ident" id="7030489">Source</span><span class="op" id="7030495">(</span><span class="op" id="7030496">[</span><span class="op" id="7030497">]</span><span class="builtintype" id="7030498">byte</span><span class="op" id="7030502">(</span><span class="ident" id="7030503">s</span><span class="op" id="7030504">)</span><span class="op" id="7030505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030508">if</span>&nbsp;<span class="ident" id="7030511">err</span>&nbsp;<span class="op" id="7030515">!=</span>&nbsp;<span class="ident" id="7030518">nil</span>&nbsp;<span class="op" id="7030522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030526">return</span>&nbsp;<span class="string" id="7030533">&#34;&#34;</span><span class="op" id="7030535">,</span>&nbsp;<span class="ident" id="7030537">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030545">return</span>&nbsp;<span class="builtintype" id="7030552">string</span><span class="op" id="7030558">(</span><span class="ident" id="7030559">res</span><span class="op" id="7030562">)</span><span class="op" id="7030563">,</span>&nbsp;<span class="ident" id="7030565">nil</span><br>
<span class="lineno"></span><span class="op" id="7030569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7030572">func</span>&nbsp;<span class="ident" id="7030577">TestPartial</span><span class="op" id="7030588">(</span><span class="ident" id="7030589">t</span>&nbsp;<span class="op" id="7030591">*</span><span class="ident" id="7030592">testing</span><span class="op" id="7030599">.</span><span class="ident" id="7030600">T</span><span class="op" id="7030601">)</span>&nbsp;<span class="op" id="7030603">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030606">for</span>&nbsp;<span class="ident" id="7030610">_</span><span class="op" id="7030611">,</span>&nbsp;<span class="ident" id="7030613">src</span>&nbsp;<span class="op" id="7030617">:=</span>&nbsp;<span class="keyword" id="7030620">range</span>&nbsp;<span class="ident" id="7030626">tests</span>&nbsp;<span class="op" id="7030632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030636">if</span>&nbsp;<span class="ident" id="7030639">strings</span><span class="op" id="7030646">.</span><span class="ident" id="7030647">HasPrefix</span><span class="op" id="7030656">(</span><span class="ident" id="7030657">src</span><span class="op" id="7030660">,</span>&nbsp;<span class="string" id="7030662">&#34;ERROR&#34;</span><span class="op" id="7030669">)</span>&nbsp;<span class="op" id="7030671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7030676">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030704">src</span>&nbsp;<span class="op" id="7030708">=</span>&nbsp;<span class="ident" id="7030710">src</span><span class="op" id="7030713">[</span><span class="num" id="7030714">5</span><span class="op" id="7030715">:</span><span class="op" id="7030716">]</span>&nbsp;<span class="comment" id="7030718">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030744">res</span><span class="op" id="7030747">,</span>&nbsp;<span class="ident" id="7030749">err</span>&nbsp;<span class="op" id="7030753">:=</span>&nbsp;<span class="ident" id="7030756">String</span><span class="op" id="7030762">(</span><span class="ident" id="7030763">src</span><span class="op" id="7030766">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030771">if</span>&nbsp;<span class="ident" id="7030774">err</span>&nbsp;<span class="op" id="7030778">==</span>&nbsp;<span class="ident" id="7030781">nil</span>&nbsp;<span class="op" id="7030785">&amp;&amp;</span>&nbsp;<span class="ident" id="7030788">res</span>&nbsp;<span class="op" id="7030792">==</span>&nbsp;<span class="ident" id="7030795">src</span>&nbsp;<span class="op" id="7030799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030805">t</span><span class="op" id="7030806">.</span><span class="ident" id="7030807">Errorf</span><span class="op" id="7030813">(</span><span class="string" id="7030814">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="7030866">,</span>&nbsp;<span class="ident" id="7030868">src</span><span class="op" id="7030871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030880">}</span>&nbsp;<span class="keyword" id="7030882">else</span>&nbsp;<span class="op" id="7030887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7030892">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030923">res</span><span class="op" id="7030926">,</span>&nbsp;<span class="ident" id="7030928">err</span>&nbsp;<span class="op" id="7030932">:=</span>&nbsp;<span class="ident" id="7030935">String</span><span class="op" id="7030941">(</span><span class="ident" id="7030942">src</span><span class="op" id="7030945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030950">if</span>&nbsp;<span class="ident" id="7030953">err</span>&nbsp;<span class="op" id="7030957">!=</span>&nbsp;<span class="ident" id="7030960">nil</span>&nbsp;<span class="op" id="7030964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030970">t</span><span class="op" id="7030971">.</span><span class="ident" id="7030972">Errorf</span><span class="op" id="7030978">(</span><span class="string" id="7030979">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="7031008">,</span>&nbsp;<span class="ident" id="7031010">err</span><span class="op" id="7031013">,</span>&nbsp;<span class="ident" id="7031015">src</span><span class="op" id="7031018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031023">}</span>&nbsp;<span class="keyword" id="7031025">else</span>&nbsp;<span class="keyword" id="7031030">if</span>&nbsp;<span class="ident" id="7031033">res</span>&nbsp;<span class="op" id="7031037">!=</span>&nbsp;<span class="ident" id="7031040">src</span>&nbsp;<span class="op" id="7031044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031050">t</span><span class="op" id="7031051">.</span><span class="ident" id="7031052">Errorf</span><span class="op" id="7031058">(</span><span class="string" id="7031059">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="7031106">,</span>&nbsp;<span class="ident" id="7031108">src</span><span class="op" id="7031111">,</span>&nbsp;<span class="ident" id="7031113">res</span><span class="op" id="7031116">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031128">}</span><br>
<span class="lineno"></span><span class="op" id="7031130">}</span>
</div>
</body>
</html>
