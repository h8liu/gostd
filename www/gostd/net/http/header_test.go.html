<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html" class="current">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7478194">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7478250">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7478304">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7478355">package</span>&nbsp;<span class="ident" id="7478363">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7478369">import</span>&nbsp;<span class="op" id="7478376">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478379">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478388">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478399">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478410">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7478417">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7478420">var</span>&nbsp;<span class="ident" id="7478424">headerWriteTests</span>&nbsp;<span class="op" id="7478441">=</span>&nbsp;<span class="op" id="7478443">[</span><span class="op" id="7478444">]</span><span class="keyword" id="7478445">struct</span>&nbsp;<span class="op" id="7478452">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7478455">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7478464">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7478472">exclude</span>&nbsp;&nbsp;<span class="keyword" id="7478481">map</span><span class="op" id="7478484">[</span><span class="builtintype" id="7478485">string</span><span class="op" id="7478491">]</span><span class="builtintype" id="7478492">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7478498">expected</span>&nbsp;<span class="builtintype" id="7478507">string</span><br>
<span class="lineno"></span><span class="op" id="7478514">}</span><span class="op" id="7478515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478518">{</span><span class="ident" id="7478519">Header</span><span class="op" id="7478525">{</span><span class="op" id="7478526">}</span><span class="op" id="7478527">,</span>&nbsp;<span class="builtintype" id="7478529">nil</span><span class="op" id="7478532">,</span>&nbsp;<span class="string" id="7478534">&#34;&#34;</span><span class="op" id="7478536">}</span><span class="op" id="7478537">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7478544">Header</span><span class="op" id="7478550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478555">&#34;Content-Type&#34;</span><span class="op" id="7478569">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7478573">{</span><span class="string" id="7478574">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="7478600">}</span><span class="op" id="7478601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478606">&#34;Content-Length&#34;</span><span class="op" id="7478622">:</span>&nbsp;<span class="op" id="7478624">{</span><span class="string" id="7478625">&#34;0&#34;</span><span class="op" id="7478628">}</span><span class="op" id="7478629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478633">}</span><span class="op" id="7478634">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7478638">nil</span><span class="op" id="7478641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478645">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="7478710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478713">}</span><span class="op" id="7478714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7478721">Header</span><span class="op" id="7478727">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478732">&#34;Content-Length&#34;</span><span class="op" id="7478748">:</span>&nbsp;<span class="op" id="7478750">{</span><span class="string" id="7478751">&#34;0&#34;</span><span class="op" id="7478754">,</span>&nbsp;<span class="string" id="7478756">&#34;1&#34;</span><span class="op" id="7478759">,</span>&nbsp;<span class="string" id="7478761">&#34;2&#34;</span><span class="op" id="7478764">}</span><span class="op" id="7478765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478769">}</span><span class="op" id="7478770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7478774">nil</span><span class="op" id="7478777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478781">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="7478846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478849">}</span><span class="op" id="7478850">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7478857">Header</span><span class="op" id="7478863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478868">&#34;Expires&#34;</span><span class="op" id="7478877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478888">{</span><span class="string" id="7478889">&#34;-1&#34;</span><span class="op" id="7478893">}</span><span class="op" id="7478894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478899">&#34;Content-Length&#34;</span><span class="op" id="7478915">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7478919">{</span><span class="string" id="7478920">&#34;0&#34;</span><span class="op" id="7478923">}</span><span class="op" id="7478924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7478929">&#34;Content-Encoding&#34;</span><span class="op" id="7478947">:</span>&nbsp;<span class="op" id="7478949">{</span><span class="string" id="7478950">&#34;gzip&#34;</span><span class="op" id="7478956">}</span><span class="op" id="7478957">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7478961">}</span><span class="op" id="7478962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7478966">map</span><span class="op" id="7478969">[</span><span class="builtintype" id="7478970">string</span><span class="op" id="7478976">]</span><span class="builtintype" id="7478977">bool</span><span class="op" id="7478981">{</span><span class="string" id="7478982">&#34;Content-Length&#34;</span><span class="op" id="7478998">:</span>&nbsp;<span class="builtintype" id="7479000">true</span><span class="op" id="7479004">}</span><span class="op" id="7479005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479009">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7479052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479055">}</span><span class="op" id="7479056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479059">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7479063">Header</span><span class="op" id="7479069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479074">&#34;Expires&#34;</span><span class="op" id="7479083">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479094">{</span><span class="string" id="7479095">&#34;-1&#34;</span><span class="op" id="7479099">}</span><span class="op" id="7479100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479105">&#34;Content-Length&#34;</span><span class="op" id="7479121">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7479125">{</span><span class="string" id="7479126">&#34;0&#34;</span><span class="op" id="7479129">,</span>&nbsp;<span class="string" id="7479131">&#34;1&#34;</span><span class="op" id="7479134">,</span>&nbsp;<span class="string" id="7479136">&#34;2&#34;</span><span class="op" id="7479139">}</span><span class="op" id="7479140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479145">&#34;Content-Encoding&#34;</span><span class="op" id="7479163">:</span>&nbsp;<span class="op" id="7479165">{</span><span class="string" id="7479166">&#34;gzip&#34;</span><span class="op" id="7479172">}</span><span class="op" id="7479173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479177">}</span><span class="op" id="7479178">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7479182">map</span><span class="op" id="7479185">[</span><span class="builtintype" id="7479186">string</span><span class="op" id="7479192">]</span><span class="builtintype" id="7479193">bool</span><span class="op" id="7479197">{</span><span class="string" id="7479198">&#34;Content-Length&#34;</span><span class="op" id="7479214">:</span>&nbsp;<span class="builtintype" id="7479216">true</span><span class="op" id="7479220">}</span><span class="op" id="7479221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479225">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7479268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479271">}</span><span class="op" id="7479272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7479279">Header</span><span class="op" id="7479285">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479290">&#34;Expires&#34;</span><span class="op" id="7479299">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479310">{</span><span class="string" id="7479311">&#34;-1&#34;</span><span class="op" id="7479315">}</span><span class="op" id="7479316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479321">&#34;Content-Length&#34;</span><span class="op" id="7479337">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7479341">{</span><span class="string" id="7479342">&#34;0&#34;</span><span class="op" id="7479345">}</span><span class="op" id="7479346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479351">&#34;Content-Encoding&#34;</span><span class="op" id="7479369">:</span>&nbsp;<span class="op" id="7479371">{</span><span class="string" id="7479372">&#34;gzip&#34;</span><span class="op" id="7479378">}</span><span class="op" id="7479379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479383">}</span><span class="op" id="7479384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7479388">map</span><span class="op" id="7479391">[</span><span class="builtintype" id="7479392">string</span><span class="op" id="7479398">]</span><span class="builtintype" id="7479399">bool</span><span class="op" id="7479403">{</span><span class="string" id="7479404">&#34;Content-Length&#34;</span><span class="op" id="7479420">:</span>&nbsp;<span class="builtintype" id="7479422">true</span><span class="op" id="7479426">,</span>&nbsp;<span class="string" id="7479428">&#34;Expires&#34;</span><span class="op" id="7479437">:</span>&nbsp;<span class="builtintype" id="7479439">true</span><span class="op" id="7479443">,</span>&nbsp;<span class="string" id="7479445">&#34;Content-Encoding&#34;</span><span class="op" id="7479463">:</span>&nbsp;<span class="builtintype" id="7479465">true</span><span class="op" id="7479469">}</span><span class="op" id="7479470">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479474">&#34;&#34;</span><span class="op" id="7479476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479479">}</span><span class="op" id="7479480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7479487">Header</span><span class="op" id="7479493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479498">&#34;Nil&#34;</span><span class="op" id="7479503">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7479514">nil</span><span class="op" id="7479517">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479522">&#34;Empty&#34;</span><span class="op" id="7479529">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479538">{</span><span class="op" id="7479539">}</span><span class="op" id="7479540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479545">&#34;Blank&#34;</span><span class="op" id="7479552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479561">{</span><span class="string" id="7479562">&#34;&#34;</span><span class="op" id="7479564">}</span><span class="op" id="7479565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479570">&#34;Double-Blank&#34;</span><span class="op" id="7479584">:</span>&nbsp;<span class="op" id="7479586">{</span><span class="string" id="7479587">&#34;&#34;</span><span class="op" id="7479589">,</span>&nbsp;<span class="string" id="7479591">&#34;&#34;</span><span class="op" id="7479593">}</span><span class="op" id="7479594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479598">}</span><span class="op" id="7479599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7479603">nil</span><span class="op" id="7479606">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479610">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="7479659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479662">}</span><span class="op" id="7479663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7479666">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7479740">Header</span><span class="op" id="7479746">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479751">&#34;k1&#34;</span><span class="op" id="7479755">:</span>&nbsp;<span class="op" id="7479757">{</span><span class="string" id="7479758">&#34;1a&#34;</span><span class="op" id="7479762">,</span>&nbsp;<span class="string" id="7479764">&#34;1b&#34;</span><span class="op" id="7479768">}</span><span class="op" id="7479769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479774">&#34;k2&#34;</span><span class="op" id="7479778">:</span>&nbsp;<span class="op" id="7479780">{</span><span class="string" id="7479781">&#34;2a&#34;</span><span class="op" id="7479785">,</span>&nbsp;<span class="string" id="7479787">&#34;2b&#34;</span><span class="op" id="7479791">}</span><span class="op" id="7479792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479797">&#34;k3&#34;</span><span class="op" id="7479801">:</span>&nbsp;<span class="op" id="7479803">{</span><span class="string" id="7479804">&#34;3a&#34;</span><span class="op" id="7479808">,</span>&nbsp;<span class="string" id="7479810">&#34;3b&#34;</span><span class="op" id="7479814">}</span><span class="op" id="7479815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479820">&#34;k4&#34;</span><span class="op" id="7479824">:</span>&nbsp;<span class="op" id="7479826">{</span><span class="string" id="7479827">&#34;4a&#34;</span><span class="op" id="7479831">,</span>&nbsp;<span class="string" id="7479833">&#34;4b&#34;</span><span class="op" id="7479837">}</span><span class="op" id="7479838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479843">&#34;k5&#34;</span><span class="op" id="7479847">:</span>&nbsp;<span class="op" id="7479849">{</span><span class="string" id="7479850">&#34;5a&#34;</span><span class="op" id="7479854">,</span>&nbsp;<span class="string" id="7479856">&#34;5b&#34;</span><span class="op" id="7479860">}</span><span class="op" id="7479861">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479866">&#34;k6&#34;</span><span class="op" id="7479870">:</span>&nbsp;<span class="op" id="7479872">{</span><span class="string" id="7479873">&#34;6a&#34;</span><span class="op" id="7479877">,</span>&nbsp;<span class="string" id="7479879">&#34;6b&#34;</span><span class="op" id="7479883">}</span><span class="op" id="7479884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479889">&#34;k7&#34;</span><span class="op" id="7479893">:</span>&nbsp;<span class="op" id="7479895">{</span><span class="string" id="7479896">&#34;7a&#34;</span><span class="op" id="7479900">,</span>&nbsp;<span class="string" id="7479902">&#34;7b&#34;</span><span class="op" id="7479906">}</span><span class="op" id="7479907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479912">&#34;k8&#34;</span><span class="op" id="7479916">:</span>&nbsp;<span class="op" id="7479918">{</span><span class="string" id="7479919">&#34;8a&#34;</span><span class="op" id="7479923">,</span>&nbsp;<span class="string" id="7479925">&#34;8b&#34;</span><span class="op" id="7479929">}</span><span class="op" id="7479930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479935">&#34;k9&#34;</span><span class="op" id="7479939">:</span>&nbsp;<span class="op" id="7479941">{</span><span class="string" id="7479942">&#34;9a&#34;</span><span class="op" id="7479946">,</span>&nbsp;<span class="string" id="7479948">&#34;9b&#34;</span><span class="op" id="7479952">}</span><span class="op" id="7479953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7479957">}</span><span class="op" id="7479958">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7479962">map</span><span class="op" id="7479965">[</span><span class="builtintype" id="7479966">string</span><span class="op" id="7479972">]</span><span class="builtintype" id="7479973">bool</span><span class="op" id="7479977">{</span><span class="string" id="7479978">&#34;k5&#34;</span><span class="op" id="7479982">:</span>&nbsp;<span class="builtintype" id="7479984">true</span><span class="op" id="7479988">}</span><span class="op" id="7479989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7479993">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="7480056">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7480061">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="7480104">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7480109">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="7480171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480174">}</span><span class="op" id="7480175">,</span><br>
<span class="lineno">90</span><span class="op" id="7480177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7480180">func</span>&nbsp;<span class="ident" id="7480185">TestHeaderWrite</span><span class="op" id="7480200">(</span><span class="ident" id="7480201">t</span>&nbsp;<span class="op" id="7480203">*</span><span class="ident" id="7480204">testing</span><span class="op" id="7480211">.</span><span class="ident" id="7480212">T</span><span class="op" id="7480213">)</span>&nbsp;<span class="op" id="7480215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7480218">var</span>&nbsp;<span class="ident" id="7480222">buf</span>&nbsp;<span class="ident" id="7480226">bytes</span><span class="op" id="7480231">.</span><span class="ident" id="7480232">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7480240">for</span>&nbsp;<span class="ident" id="7480244">i</span><span class="op" id="7480245">,</span>&nbsp;<span class="ident" id="7480247">test</span>&nbsp;<span class="op" id="7480252">:=</span>&nbsp;<span class="keyword" id="7480255">range</span>&nbsp;<span class="ident" id="7480261">headerWriteTests</span>&nbsp;<span class="op" id="7480278">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7480282">test</span><span class="op" id="7480286">.</span><span class="ident" id="7480287">h</span><span class="op" id="7480288">.</span><span class="ident" id="7480289">WriteSubset</span><span class="op" id="7480300">(</span><span class="op" id="7480301">&amp;</span><span class="ident" id="7480302">buf</span><span class="op" id="7480305">,</span>&nbsp;<span class="ident" id="7480307">test</span><span class="op" id="7480311">.</span><span class="ident" id="7480312">exclude</span><span class="op" id="7480319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7480323">if</span>&nbsp;<span class="ident" id="7480326">buf</span><span class="op" id="7480329">.</span><span class="ident" id="7480330">String</span><span class="op" id="7480336">(</span><span class="op" id="7480337">)</span>&nbsp;<span class="op" id="7480339">!=</span>&nbsp;<span class="ident" id="7480342">test</span><span class="op" id="7480346">.</span><span class="ident" id="7480347">expected</span>&nbsp;<span class="op" id="7480356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7480361">t</span><span class="op" id="7480362">.</span><span class="ident" id="7480363">Errorf</span><span class="op" id="7480369">(</span><span class="string" id="7480370">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7480396">,</span>&nbsp;<span class="ident" id="7480398">i</span><span class="op" id="7480399">,</span>&nbsp;<span class="ident" id="7480401">buf</span><span class="op" id="7480404">.</span><span class="ident" id="7480405">String</span><span class="op" id="7480411">(</span><span class="op" id="7480412">)</span><span class="op" id="7480413">,</span>&nbsp;<span class="ident" id="7480415">test</span><span class="op" id="7480419">.</span><span class="ident" id="7480420">expected</span><span class="op" id="7480428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7480436">buf</span><span class="op" id="7480439">.</span><span class="ident" id="7480440">Reset</span><span class="op" id="7480445">(</span><span class="op" id="7480446">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480449">}</span><br>
<span class="lineno"></span><span class="op" id="7480451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7480454">var</span>&nbsp;<span class="ident" id="7480458">parseTimeTests</span>&nbsp;<span class="op" id="7480473">=</span>&nbsp;<span class="op" id="7480475">[</span><span class="op" id="7480476">]</span><span class="keyword" id="7480477">struct</span>&nbsp;<span class="op" id="7480484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7480487">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7480491">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7480499">err</span>&nbsp;<span class="builtintype" id="7480503">bool</span><br>
<span class="lineno"></span><span class="op" id="7480508">}</span><span class="op" id="7480509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480512">{</span><span class="ident" id="7480513">Header</span><span class="op" id="7480519">{</span><span class="string" id="7480520">&#34;Date&#34;</span><span class="op" id="7480526">:</span>&nbsp;<span class="op" id="7480528">{</span><span class="string" id="7480529">&#34;&#34;</span><span class="op" id="7480531">}</span><span class="op" id="7480532">}</span><span class="op" id="7480533">,</span>&nbsp;<span class="builtintype" id="7480535">true</span><span class="op" id="7480539">}</span><span class="op" id="7480540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480543">{</span><span class="ident" id="7480544">Header</span><span class="op" id="7480550">{</span><span class="string" id="7480551">&#34;Date&#34;</span><span class="op" id="7480557">:</span>&nbsp;<span class="op" id="7480559">{</span><span class="string" id="7480560">&#34;invalid&#34;</span><span class="op" id="7480569">}</span><span class="op" id="7480570">}</span><span class="op" id="7480571">,</span>&nbsp;<span class="builtintype" id="7480573">true</span><span class="op" id="7480577">}</span><span class="op" id="7480578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480581">{</span><span class="ident" id="7480582">Header</span><span class="op" id="7480588">{</span><span class="string" id="7480589">&#34;Date&#34;</span><span class="op" id="7480595">:</span>&nbsp;<span class="op" id="7480597">{</span><span class="string" id="7480598">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="7480625">}</span><span class="op" id="7480626">}</span><span class="op" id="7480627">,</span>&nbsp;<span class="builtintype" id="7480629">true</span><span class="op" id="7480633">}</span><span class="op" id="7480634">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480637">{</span><span class="ident" id="7480638">Header</span><span class="op" id="7480644">{</span><span class="string" id="7480645">&#34;Date&#34;</span><span class="op" id="7480651">:</span>&nbsp;<span class="op" id="7480653">{</span><span class="string" id="7480654">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7480685">}</span><span class="op" id="7480686">}</span><span class="op" id="7480687">,</span>&nbsp;<span class="builtintype" id="7480689">false</span><span class="op" id="7480694">}</span><span class="op" id="7480695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480698">{</span><span class="ident" id="7480699">Header</span><span class="op" id="7480705">{</span><span class="string" id="7480706">&#34;Date&#34;</span><span class="op" id="7480712">:</span>&nbsp;<span class="op" id="7480714">{</span><span class="string" id="7480715">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7480747">}</span><span class="op" id="7480748">}</span><span class="op" id="7480749">,</span>&nbsp;<span class="builtintype" id="7480751">false</span><span class="op" id="7480756">}</span><span class="op" id="7480757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7480760">{</span><span class="ident" id="7480761">Header</span><span class="op" id="7480767">{</span><span class="string" id="7480768">&#34;Date&#34;</span><span class="op" id="7480774">:</span>&nbsp;<span class="op" id="7480776">{</span><span class="string" id="7480777">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="7480803">}</span><span class="op" id="7480804">}</span><span class="op" id="7480805">,</span>&nbsp;<span class="builtintype" id="7480807">false</span><span class="op" id="7480812">}</span><span class="op" id="7480813">,</span><br>
<span class="lineno"></span><span class="op" id="7480815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7480818">func</span>&nbsp;<span class="ident" id="7480823">TestParseTime</span><span class="op" id="7480836">(</span><span class="ident" id="7480837">t</span>&nbsp;<span class="op" id="7480839">*</span><span class="ident" id="7480840">testing</span><span class="op" id="7480847">.</span><span class="ident" id="7480848">T</span><span class="op" id="7480849">)</span>&nbsp;<span class="op" id="7480851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7480854">expect</span>&nbsp;<span class="op" id="7480861">:=</span>&nbsp;<span class="ident" id="7480864">time</span><span class="op" id="7480868">.</span><span class="ident" id="7480869">Date</span><span class="op" id="7480873">(</span><span class="num" id="7480874">1994</span><span class="op" id="7480878">,</span>&nbsp;<span class="num" id="7480880">11</span><span class="op" id="7480882">,</span>&nbsp;<span class="num" id="7480884">6</span><span class="op" id="7480885">,</span>&nbsp;<span class="num" id="7480887">8</span><span class="op" id="7480888">,</span>&nbsp;<span class="num" id="7480890">49</span><span class="op" id="7480892">,</span>&nbsp;<span class="num" id="7480894">37</span><span class="op" id="7480896">,</span>&nbsp;<span class="num" id="7480898">0</span><span class="op" id="7480899">,</span>&nbsp;<span class="ident" id="7480901">time</span><span class="op" id="7480905">.</span><span class="ident" id="7480906">UTC</span><span class="op" id="7480909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7480912">for</span>&nbsp;<span class="ident" id="7480916">i</span><span class="op" id="7480917">,</span>&nbsp;<span class="ident" id="7480919">test</span>&nbsp;<span class="op" id="7480924">:=</span>&nbsp;<span class="keyword" id="7480927">range</span>&nbsp;<span class="ident" id="7480933">parseTimeTests</span>&nbsp;<span class="op" id="7480948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7480952">d</span><span class="op" id="7480953">,</span>&nbsp;<span class="ident" id="7480955">err</span>&nbsp;<span class="op" id="7480959">:=</span>&nbsp;<span class="ident" id="7480962">ParseTime</span><span class="op" id="7480971">(</span><span class="ident" id="7480972">test</span><span class="op" id="7480976">.</span><span class="ident" id="7480977">h</span><span class="op" id="7480978">.</span><span class="ident" id="7480979">Get</span><span class="op" id="7480982">(</span><span class="string" id="7480983">&#34;Date&#34;</span><span class="op" id="7480989">)</span><span class="op" id="7480990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7480994">if</span>&nbsp;<span class="ident" id="7480997">err</span>&nbsp;<span class="op" id="7481001">!=</span>&nbsp;<span class="builtintype" id="7481004">nil</span>&nbsp;<span class="op" id="7481008">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7481013">if</span>&nbsp;<span class="op" id="7481016">!</span><span class="ident" id="7481017">test</span><span class="op" id="7481021">.</span><span class="ident" id="7481022">err</span>&nbsp;<span class="op" id="7481026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7481032">t</span><span class="op" id="7481033">.</span><span class="ident" id="7481034">Errorf</span><span class="op" id="7481040">(</span><span class="string" id="7481041">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="7481061">,</span>&nbsp;<span class="ident" id="7481063">i</span><span class="op" id="7481064">,</span>&nbsp;<span class="ident" id="7481066">err</span><span class="op" id="7481069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7481079">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481090">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7481094">if</span>&nbsp;<span class="ident" id="7481097">test</span><span class="op" id="7481101">.</span><span class="ident" id="7481102">err</span>&nbsp;<span class="op" id="7481106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7481111">t</span><span class="op" id="7481112">.</span><span class="ident" id="7481113">Errorf</span><span class="op" id="7481119">(</span><span class="string" id="7481120">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="7481140">,</span>&nbsp;<span class="ident" id="7481142">i</span><span class="op" id="7481143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7481148">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7481163">if</span>&nbsp;<span class="op" id="7481166">!</span><span class="ident" id="7481167">expect</span><span class="op" id="7481173">.</span><span class="ident" id="7481174">Equal</span><span class="op" id="7481179">(</span><span class="ident" id="7481180">d</span><span class="op" id="7481181">)</span>&nbsp;<span class="op" id="7481183">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7481188">t</span><span class="op" id="7481189">.</span><span class="ident" id="7481190">Errorf</span><span class="op" id="7481196">(</span><span class="string" id="7481197">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7481223">,</span>&nbsp;<span class="ident" id="7481225">i</span><span class="op" id="7481226">,</span>&nbsp;<span class="ident" id="7481228">d</span><span class="op" id="7481229">,</span>&nbsp;<span class="ident" id="7481231">expect</span><span class="op" id="7481237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481244">}</span><br>
<span class="lineno"></span><span class="op" id="7481246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7481249">type</span>&nbsp;<span class="ident" id="7481254">hasTokenTest</span>&nbsp;<span class="keyword" id="7481267">struct</span>&nbsp;<span class="op" id="7481274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7481277">header</span>&nbsp;<span class="builtintype" id="7481284">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7481292">token</span>&nbsp;&nbsp;<span class="builtintype" id="7481299">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7481307">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7481314">bool</span><br>
<span class="lineno"></span><span class="op" id="7481319">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7481322">var</span>&nbsp;<span class="ident" id="7481326">hasTokenTests</span>&nbsp;<span class="op" id="7481340">=</span>&nbsp;<span class="op" id="7481342">[</span><span class="op" id="7481343">]</span><span class="ident" id="7481344">hasTokenTest</span><span class="op" id="7481356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481359">{</span><span class="string" id="7481360">&#34;&#34;</span><span class="op" id="7481362">,</span>&nbsp;<span class="string" id="7481364">&#34;&#34;</span><span class="op" id="7481366">,</span>&nbsp;<span class="builtintype" id="7481368">false</span><span class="op" id="7481373">}</span><span class="op" id="7481374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481377">{</span><span class="string" id="7481378">&#34;&#34;</span><span class="op" id="7481380">,</span>&nbsp;<span class="string" id="7481382">&#34;foo&#34;</span><span class="op" id="7481387">,</span>&nbsp;<span class="builtintype" id="7481389">false</span><span class="op" id="7481394">}</span><span class="op" id="7481395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481398">{</span><span class="string" id="7481399">&#34;foo&#34;</span><span class="op" id="7481404">,</span>&nbsp;<span class="string" id="7481406">&#34;foo&#34;</span><span class="op" id="7481411">,</span>&nbsp;<span class="builtintype" id="7481413">true</span><span class="op" id="7481417">}</span><span class="op" id="7481418">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481421">{</span><span class="string" id="7481422">&#34;foo&nbsp;&#34;</span><span class="op" id="7481428">,</span>&nbsp;<span class="string" id="7481430">&#34;foo&#34;</span><span class="op" id="7481435">,</span>&nbsp;<span class="builtintype" id="7481437">true</span><span class="op" id="7481441">}</span><span class="op" id="7481442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481445">{</span><span class="string" id="7481446">&#34;&nbsp;foo&#34;</span><span class="op" id="7481452">,</span>&nbsp;<span class="string" id="7481454">&#34;foo&#34;</span><span class="op" id="7481459">,</span>&nbsp;<span class="builtintype" id="7481461">true</span><span class="op" id="7481465">}</span><span class="op" id="7481466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481469">{</span><span class="string" id="7481470">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="7481477">,</span>&nbsp;<span class="string" id="7481479">&#34;foo&#34;</span><span class="op" id="7481484">,</span>&nbsp;<span class="builtintype" id="7481486">true</span><span class="op" id="7481490">}</span><span class="op" id="7481491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481494">{</span><span class="string" id="7481495">&#34;foo,bar&#34;</span><span class="op" id="7481504">,</span>&nbsp;<span class="string" id="7481506">&#34;foo&#34;</span><span class="op" id="7481511">,</span>&nbsp;<span class="builtintype" id="7481513">true</span><span class="op" id="7481517">}</span><span class="op" id="7481518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481521">{</span><span class="string" id="7481522">&#34;bar,foo&#34;</span><span class="op" id="7481531">,</span>&nbsp;<span class="string" id="7481533">&#34;foo&#34;</span><span class="op" id="7481538">,</span>&nbsp;<span class="builtintype" id="7481540">true</span><span class="op" id="7481544">}</span><span class="op" id="7481545">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481548">{</span><span class="string" id="7481549">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="7481559">,</span>&nbsp;<span class="string" id="7481561">&#34;foo&#34;</span><span class="op" id="7481566">,</span>&nbsp;<span class="builtintype" id="7481568">true</span><span class="op" id="7481572">}</span><span class="op" id="7481573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481576">{</span><span class="string" id="7481577">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7481591">,</span>&nbsp;<span class="string" id="7481593">&#34;foo&#34;</span><span class="op" id="7481598">,</span>&nbsp;<span class="builtintype" id="7481600">true</span><span class="op" id="7481604">}</span><span class="op" id="7481605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481608">{</span><span class="string" id="7481609">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="7481623">,</span>&nbsp;<span class="string" id="7481625">&#34;foo&#34;</span><span class="op" id="7481630">,</span>&nbsp;<span class="builtintype" id="7481632">true</span><span class="op" id="7481636">}</span><span class="op" id="7481637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481640">{</span><span class="string" id="7481641">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7481655">,</span>&nbsp;<span class="string" id="7481657">&#34;foo&#34;</span><span class="op" id="7481662">,</span>&nbsp;<span class="builtintype" id="7481664">true</span><span class="op" id="7481668">}</span><span class="op" id="7481669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481672">{</span><span class="string" id="7481673">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="7481688">,</span>&nbsp;<span class="string" id="7481690">&#34;foo&#34;</span><span class="op" id="7481695">,</span>&nbsp;<span class="builtintype" id="7481697">true</span><span class="op" id="7481701">}</span><span class="op" id="7481702">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481705">{</span><span class="string" id="7481706">&#34;FOO&#34;</span><span class="op" id="7481711">,</span>&nbsp;<span class="string" id="7481713">&#34;foo&#34;</span><span class="op" id="7481718">,</span>&nbsp;<span class="builtintype" id="7481720">true</span><span class="op" id="7481724">}</span><span class="op" id="7481725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481728">{</span><span class="string" id="7481729">&#34;FOO&nbsp;&#34;</span><span class="op" id="7481735">,</span>&nbsp;<span class="string" id="7481737">&#34;foo&#34;</span><span class="op" id="7481742">,</span>&nbsp;<span class="builtintype" id="7481744">true</span><span class="op" id="7481748">}</span><span class="op" id="7481749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481752">{</span><span class="string" id="7481753">&#34;&nbsp;FOO&#34;</span><span class="op" id="7481759">,</span>&nbsp;<span class="string" id="7481761">&#34;foo&#34;</span><span class="op" id="7481766">,</span>&nbsp;<span class="builtintype" id="7481768">true</span><span class="op" id="7481772">}</span><span class="op" id="7481773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481776">{</span><span class="string" id="7481777">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="7481784">,</span>&nbsp;<span class="string" id="7481786">&#34;foo&#34;</span><span class="op" id="7481791">,</span>&nbsp;<span class="builtintype" id="7481793">true</span><span class="op" id="7481797">}</span><span class="op" id="7481798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481801">{</span><span class="string" id="7481802">&#34;FOO,BAR&#34;</span><span class="op" id="7481811">,</span>&nbsp;<span class="string" id="7481813">&#34;foo&#34;</span><span class="op" id="7481818">,</span>&nbsp;<span class="builtintype" id="7481820">true</span><span class="op" id="7481824">}</span><span class="op" id="7481825">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481828">{</span><span class="string" id="7481829">&#34;BAR,FOO&#34;</span><span class="op" id="7481838">,</span>&nbsp;<span class="string" id="7481840">&#34;foo&#34;</span><span class="op" id="7481845">,</span>&nbsp;<span class="builtintype" id="7481847">true</span><span class="op" id="7481851">}</span><span class="op" id="7481852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481855">{</span><span class="string" id="7481856">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="7481866">,</span>&nbsp;<span class="string" id="7481868">&#34;foo&#34;</span><span class="op" id="7481873">,</span>&nbsp;<span class="builtintype" id="7481875">true</span><span class="op" id="7481879">}</span><span class="op" id="7481880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481883">{</span><span class="string" id="7481884">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="7481898">,</span>&nbsp;<span class="string" id="7481900">&#34;foo&#34;</span><span class="op" id="7481905">,</span>&nbsp;<span class="builtintype" id="7481907">true</span><span class="op" id="7481911">}</span><span class="op" id="7481912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481915">{</span><span class="string" id="7481916">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="7481930">,</span>&nbsp;<span class="string" id="7481932">&#34;foo&#34;</span><span class="op" id="7481937">,</span>&nbsp;<span class="builtintype" id="7481939">true</span><span class="op" id="7481943">}</span><span class="op" id="7481944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481947">{</span><span class="string" id="7481948">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="7481962">,</span>&nbsp;<span class="string" id="7481964">&#34;foo&#34;</span><span class="op" id="7481969">,</span>&nbsp;<span class="builtintype" id="7481971">true</span><span class="op" id="7481975">}</span><span class="op" id="7481976">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7481979">{</span><span class="string" id="7481980">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="7481995">,</span>&nbsp;<span class="string" id="7481997">&#34;foo&#34;</span><span class="op" id="7482002">,</span>&nbsp;<span class="builtintype" id="7482004">true</span><span class="op" id="7482008">}</span><span class="op" id="7482009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482012">{</span><span class="string" id="7482013">&#34;foobar&#34;</span><span class="op" id="7482021">,</span>&nbsp;<span class="string" id="7482023">&#34;foo&#34;</span><span class="op" id="7482028">,</span>&nbsp;<span class="builtintype" id="7482030">false</span><span class="op" id="7482035">}</span><span class="op" id="7482036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482039">{</span><span class="string" id="7482040">&#34;barfoo&nbsp;&#34;</span><span class="op" id="7482049">,</span>&nbsp;<span class="string" id="7482051">&#34;foo&#34;</span><span class="op" id="7482056">,</span>&nbsp;<span class="builtintype" id="7482058">false</span><span class="op" id="7482063">}</span><span class="op" id="7482064">,</span><br>
<span class="lineno"></span><span class="op" id="7482066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7482069">func</span>&nbsp;<span class="ident" id="7482074">TestHasToken</span><span class="op" id="7482086">(</span><span class="ident" id="7482087">t</span>&nbsp;<span class="op" id="7482089">*</span><span class="ident" id="7482090">testing</span><span class="op" id="7482097">.</span><span class="ident" id="7482098">T</span><span class="op" id="7482099">)</span>&nbsp;<span class="op" id="7482101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7482104">for</span>&nbsp;<span class="ident" id="7482108">_</span><span class="op" id="7482109">,</span>&nbsp;<span class="ident" id="7482111">tt</span>&nbsp;<span class="op" id="7482114">:=</span>&nbsp;<span class="keyword" id="7482117">range</span>&nbsp;<span class="ident" id="7482123">hasTokenTests</span>&nbsp;<span class="op" id="7482137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7482141">if</span>&nbsp;<span class="ident" id="7482144">hasToken</span><span class="op" id="7482152">(</span><span class="ident" id="7482153">tt</span><span class="op" id="7482155">.</span><span class="ident" id="7482156">header</span><span class="op" id="7482162">,</span>&nbsp;<span class="ident" id="7482164">tt</span><span class="op" id="7482166">.</span><span class="ident" id="7482167">token</span><span class="op" id="7482172">)</span>&nbsp;<span class="op" id="7482174">!=</span>&nbsp;<span class="ident" id="7482177">tt</span><span class="op" id="7482179">.</span><span class="ident" id="7482180">want</span>&nbsp;<span class="op" id="7482185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482190">t</span><span class="op" id="7482191">.</span><span class="ident" id="7482192">Errorf</span><span class="op" id="7482198">(</span><span class="string" id="7482199">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7482231">,</span>&nbsp;<span class="ident" id="7482233">tt</span><span class="op" id="7482235">.</span><span class="ident" id="7482236">header</span><span class="op" id="7482242">,</span>&nbsp;<span class="ident" id="7482244">tt</span><span class="op" id="7482246">.</span><span class="ident" id="7482247">token</span><span class="op" id="7482252">,</span>&nbsp;<span class="op" id="7482254">!</span><span class="ident" id="7482255">tt</span><span class="op" id="7482257">.</span><span class="ident" id="7482258">want</span><span class="op" id="7482262">,</span>&nbsp;<span class="ident" id="7482264">tt</span><span class="op" id="7482266">.</span><span class="ident" id="7482267">want</span><span class="op" id="7482271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482275">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482278">}</span><br>
<span class="lineno"></span><span class="op" id="7482280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7482283">var</span>&nbsp;<span class="ident" id="7482287">testHeader</span>&nbsp;<span class="op" id="7482298">=</span>&nbsp;<span class="ident" id="7482300">Header</span><span class="op" id="7482306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7482309">&#34;Content-Length&#34;</span><span class="op" id="7482325">:</span>&nbsp;<span class="op" id="7482327">{</span><span class="string" id="7482328">&#34;123&#34;</span><span class="op" id="7482333">}</span><span class="op" id="7482334">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7482337">&#34;Content-Type&#34;</span><span class="op" id="7482351">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7482355">{</span><span class="string" id="7482356">&#34;text/plain&#34;</span><span class="op" id="7482368">}</span><span class="op" id="7482369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7482372">&#34;Date&#34;</span><span class="op" id="7482378">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482390">{</span><span class="string" id="7482391">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="7482417">}</span><span class="op" id="7482418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7482421">&#34;Server&#34;</span><span class="op" id="7482429">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482439">{</span><span class="ident" id="7482440">DefaultUserAgent</span><span class="op" id="7482456">}</span><span class="op" id="7482457">,</span><br>
<span class="lineno"></span><span class="op" id="7482459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="7482462">var</span>&nbsp;<span class="ident" id="7482466">buf</span>&nbsp;<span class="ident" id="7482470">bytes</span><span class="op" id="7482475">.</span><span class="ident" id="7482476">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7482484">func</span>&nbsp;<span class="ident" id="7482489">BenchmarkHeaderWriteSubset</span><span class="op" id="7482515">(</span><span class="ident" id="7482516">b</span>&nbsp;<span class="op" id="7482518">*</span><span class="ident" id="7482519">testing</span><span class="op" id="7482526">.</span><span class="ident" id="7482527">B</span><span class="op" id="7482528">)</span>&nbsp;<span class="op" id="7482530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482533">b</span><span class="op" id="7482534">.</span><span class="ident" id="7482535">ReportAllocs</span><span class="op" id="7482547">(</span><span class="op" id="7482548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7482551">for</span>&nbsp;<span class="ident" id="7482555">i</span>&nbsp;<span class="op" id="7482557">:=</span>&nbsp;<span class="num" id="7482560">0</span><span class="op" id="7482561">;</span>&nbsp;<span class="ident" id="7482563">i</span>&nbsp;<span class="op" id="7482565">&lt;</span>&nbsp;<span class="ident" id="7482567">b</span><span class="op" id="7482568">.</span><span class="ident" id="7482569">N</span><span class="op" id="7482570">;</span>&nbsp;<span class="ident" id="7482572">i</span><span class="op" id="7482573">++</span>&nbsp;<span class="op" id="7482576">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482580">buf</span><span class="op" id="7482583">.</span><span class="ident" id="7482584">Reset</span><span class="op" id="7482589">(</span><span class="op" id="7482590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482594">testHeader</span><span class="op" id="7482604">.</span><span class="ident" id="7482605">WriteSubset</span><span class="op" id="7482616">(</span><span class="op" id="7482617">&amp;</span><span class="ident" id="7482618">buf</span><span class="op" id="7482621">,</span>&nbsp;<span class="builtintype" id="7482623">nil</span><span class="op" id="7482626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482629">}</span><br>
<span class="lineno"></span><span class="op" id="7482631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7482634">func</span>&nbsp;<span class="ident" id="7482639">TestHeaderWriteSubsetAllocs</span><span class="op" id="7482666">(</span><span class="ident" id="7482667">t</span>&nbsp;<span class="op" id="7482669">*</span><span class="ident" id="7482670">testing</span><span class="op" id="7482677">.</span><span class="ident" id="7482678">T</span><span class="op" id="7482679">)</span>&nbsp;<span class="op" id="7482681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7482684">if</span>&nbsp;<span class="ident" id="7482687">testing</span><span class="op" id="7482694">.</span><span class="ident" id="7482695">Short</span><span class="op" id="7482700">(</span><span class="op" id="7482701">)</span>&nbsp;<span class="op" id="7482703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482707">t</span><span class="op" id="7482708">.</span><span class="ident" id="7482709">Skip</span><span class="op" id="7482713">(</span><span class="string" id="7482714">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7482749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7482755">if</span>&nbsp;<span class="ident" id="7482758">raceEnabled</span>&nbsp;<span class="op" id="7482770">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482774">t</span><span class="op" id="7482775">.</span><span class="ident" id="7482776">Skip</span><span class="op" id="7482780">(</span><span class="string" id="7482781">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="7482816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7482822">if</span>&nbsp;<span class="ident" id="7482825">runtime</span><span class="op" id="7482832">.</span><span class="ident" id="7482833">GOMAXPROCS</span><span class="op" id="7482843">(</span><span class="num" id="7482844">0</span><span class="op" id="7482845">)</span>&nbsp;<span class="op" id="7482847">&gt;</span>&nbsp;<span class="num" id="7482849">1</span>&nbsp;<span class="op" id="7482851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482855">t</span><span class="op" id="7482856">.</span><span class="ident" id="7482857">Skip</span><span class="op" id="7482861">(</span><span class="string" id="7482862">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7482886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482889">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482892">n</span>&nbsp;<span class="op" id="7482894">:=</span>&nbsp;<span class="ident" id="7482897">testing</span><span class="op" id="7482904">.</span><span class="ident" id="7482905">AllocsPerRun</span><span class="op" id="7482917">(</span><span class="num" id="7482918">100</span><span class="op" id="7482921">,</span>&nbsp;<span class="keyword" id="7482923">func</span><span class="op" id="7482927">(</span><span class="op" id="7482928">)</span>&nbsp;<span class="op" id="7482930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482934">buf</span><span class="op" id="7482937">.</span><span class="ident" id="7482938">Reset</span><span class="op" id="7482943">(</span><span class="op" id="7482944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7482948">testHeader</span><span class="op" id="7482958">.</span><span class="ident" id="7482959">WriteSubset</span><span class="op" id="7482970">(</span><span class="op" id="7482971">&amp;</span><span class="ident" id="7482972">buf</span><span class="op" id="7482975">,</span>&nbsp;<span class="builtintype" id="7482977">nil</span><span class="op" id="7482980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7482983">}</span><span class="op" id="7482984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7482987">if</span>&nbsp;<span class="ident" id="7482990">n</span>&nbsp;<span class="op" id="7482992">&gt;</span>&nbsp;<span class="num" id="7482994">0</span>&nbsp;<span class="op" id="7482996">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7483000">t</span><span class="op" id="7483001">.</span><span class="ident" id="7483002">Errorf</span><span class="op" id="7483008">(</span><span class="string" id="7483009">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7483030">,</span>&nbsp;<span class="ident" id="7483032">n</span><span class="op" id="7483033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7483036">}</span><br>
<span class="lineno"></span><span class="op" id="7483038">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
