<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7680100">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7680155">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7680209">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7680260">package</span>&nbsp;<span class="ident" id="7680268">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7680276">import</span>&nbsp;<span class="op" id="7680283">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7680286">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7680298">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7680311">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7680321">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7680324">var</span>&nbsp;<span class="ident" id="7680328">src</span>&nbsp;<span class="op" id="7680332">=</span>&nbsp;<span class="ident" id="7680334">readFile</span><span class="op" id="7680342">(</span><span class="string" id="7680343">&#34;parser.go&#34;</span><span class="op" id="7680354">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7680357">func</span>&nbsp;<span class="ident" id="7680362">readFile</span><span class="op" id="7680370">(</span><span class="ident" id="7680371">filename</span>&nbsp;<span class="builtintype" id="7680380">string</span><span class="op" id="7680386">)</span>&nbsp;<span class="op" id="7680388">[</span><span class="op" id="7680389">]</span><span class="builtintype" id="7680390">byte</span>&nbsp;<span class="op" id="7680395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7680398">data</span><span class="op" id="7680402">,</span>&nbsp;<span class="ident" id="7680404">err</span>&nbsp;<span class="op" id="7680408">:=</span>&nbsp;<span class="ident" id="7680411">ioutil</span><span class="op" id="7680417">.</span><span class="ident" id="7680418">ReadFile</span><span class="op" id="7680426">(</span><span class="ident" id="7680427">filename</span><span class="op" id="7680435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7680438">if</span>&nbsp;<span class="ident" id="7680441">err</span>&nbsp;<span class="op" id="7680445">!=</span>&nbsp;<span class="ident" id="7680448">nil</span>&nbsp;<span class="op" id="7680452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7680456">panic</span><span class="op" id="7680461">(</span><span class="ident" id="7680462">err</span><span class="op" id="7680465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7680468">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7680471">return</span>&nbsp;<span class="ident" id="7680478">data</span><br>
<span class="lineno"></span><span class="op" id="7680483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7680486">func</span>&nbsp;<span class="ident" id="7680491">BenchmarkParse</span><span class="op" id="7680505">(</span><span class="ident" id="7680506">b</span>&nbsp;<span class="op" id="7680508">*</span><span class="ident" id="7680509">testing</span><span class="op" id="7680516">.</span><span class="ident" id="7680517">B</span><span class="op" id="7680518">)</span>&nbsp;<span class="op" id="7680520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7680523">b</span><span class="op" id="7680524">.</span><span class="ident" id="7680525">SetBytes</span><span class="op" id="7680533">(</span><span class="ident" id="7680534">int64</span><span class="op" id="7680539">(</span><span class="builtinfunc" id="7680540">len</span><span class="op" id="7680543">(</span><span class="ident" id="7680544">src</span><span class="op" id="7680547">)</span><span class="op" id="7680548">)</span><span class="op" id="7680549">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7680552">for</span>&nbsp;<span class="ident" id="7680556">i</span>&nbsp;<span class="op" id="7680558">:=</span>&nbsp;<span class="num" id="7680561">0</span><span class="op" id="7680562">;</span>&nbsp;<span class="ident" id="7680564">i</span>&nbsp;<span class="op" id="7680566">&lt;</span>&nbsp;<span class="ident" id="7680568">b</span><span class="op" id="7680569">.</span><span class="ident" id="7680570">N</span><span class="op" id="7680571">;</span>&nbsp;<span class="ident" id="7680573">i</span><span class="op" id="7680574">++</span>&nbsp;<span class="op" id="7680577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7680581">if</span>&nbsp;<span class="ident" id="7680584">_</span><span class="op" id="7680585">,</span>&nbsp;<span class="ident" id="7680587">err</span>&nbsp;<span class="op" id="7680591">:=</span>&nbsp;<span class="ident" id="7680594">ParseFile</span><span class="op" id="7680603">(</span><span class="ident" id="7680604">token</span><span class="op" id="7680609">.</span><span class="ident" id="7680610">NewFileSet</span><span class="op" id="7680620">(</span><span class="op" id="7680621">)</span><span class="op" id="7680622">,</span>&nbsp;<span class="string" id="7680624">&#34;&#34;</span><span class="op" id="7680626">,</span>&nbsp;<span class="ident" id="7680628">src</span><span class="op" id="7680631">,</span>&nbsp;<span class="ident" id="7680633">ParseComments</span><span class="op" id="7680646">)</span><span class="op" id="7680647">;</span>&nbsp;<span class="ident" id="7680649">err</span>&nbsp;<span class="op" id="7680653">!=</span>&nbsp;<span class="ident" id="7680656">nil</span>&nbsp;<span class="op" id="7680660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7680665">b</span><span class="op" id="7680666">.</span><span class="ident" id="7680667">Fatalf</span><span class="op" id="7680673">(</span><span class="string" id="7680674">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7680715">,</span>&nbsp;<span class="ident" id="7680717">err</span><span class="op" id="7680720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7680724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7680727">}</span><br>
<span class="lineno">30</span><span class="op" id="7680729">}</span>
</div>
</body>
</html>
