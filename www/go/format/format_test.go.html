<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6597808">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6597863">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6597917">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6597968">package</span>&nbsp;<span class="ident" id="6597976">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6597984">import</span>&nbsp;<span class="op" id="6597991">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6597994">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6598003">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6598016">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6598028">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6598041">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6598052">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6598062">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6598065">const</span>&nbsp;<span class="ident" id="6598071">testfile</span>&nbsp;<span class="op" id="6598080">=</span>&nbsp;<span class="string" id="6598082">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6598100">func</span>&nbsp;<span class="ident" id="6598105">diff</span><span class="op" id="6598109">(</span><span class="ident" id="6598110">t</span>&nbsp;<span class="op" id="6598112">*</span><span class="ident" id="6598113"><a href="/go/format/format_test.go.html#6598052">testing</a></span><span class="op" id="6598120">.</span><span class="ident" id="6598121">T</span><span class="op" id="6598122">,</span>&nbsp;<span class="ident" id="6598124">dst</span><span class="op" id="6598127">,</span>&nbsp;<span class="ident" id="6598129">src</span>&nbsp;<span class="op" id="6598133">[</span><span class="op" id="6598134">]</span><span class="builtintype" id="6598135">byte</span><span class="op" id="6598139">)</span>&nbsp;<span class="op" id="6598141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598144">line</span>&nbsp;<span class="op" id="6598149">:=</span>&nbsp;<span class="num" id="6598152">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598155">offs</span>&nbsp;<span class="op" id="6598160">:=</span>&nbsp;<span class="num" id="6598163">0</span>&nbsp;<span class="comment" id="6598165">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598181">for</span>&nbsp;<span class="ident" id="6598185">i</span>&nbsp;<span class="op" id="6598187">:=</span>&nbsp;<span class="num" id="6598190">0</span><span class="op" id="6598191">;</span>&nbsp;<span class="ident" id="6598193"><a href="/go/format/format_test.go.html#6598185">i</a></span>&nbsp;<span class="op" id="6598195">&lt;</span>&nbsp;<span class="builtinfunc" id="6598197">len</span><span class="op" id="6598200">(</span><span class="ident" id="6598201"><a href="/go/format/format_test.go.html#6598124">dst</a></span><span class="op" id="6598204">)</span>&nbsp;<span class="op" id="6598206">&amp;&amp;</span>&nbsp;<span class="ident" id="6598209"><a href="/go/format/format_test.go.html#6598185">i</a></span>&nbsp;<span class="op" id="6598211">&lt;</span>&nbsp;<span class="builtinfunc" id="6598213">len</span><span class="op" id="6598216">(</span><span class="ident" id="6598217"><a href="/go/format/format_test.go.html#6598129">src</a></span><span class="op" id="6598220">)</span><span class="op" id="6598221">;</span>&nbsp;<span class="ident" id="6598223"><a href="/go/format/format_test.go.html#6598185">i</a></span><span class="op" id="6598224">++</span>&nbsp;<span class="op" id="6598227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598231">d</span>&nbsp;<span class="op" id="6598233">:=</span>&nbsp;<span class="ident" id="6598236"><a href="/go/format/format_test.go.html#6598124">dst</a></span><span class="op" id="6598239">[</span><span class="ident" id="6598240"><a href="/go/format/format_test.go.html#6598185">i</a></span><span class="op" id="6598241">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598245">s</span>&nbsp;<span class="op" id="6598247">:=</span>&nbsp;<span class="ident" id="6598250"><a href="/go/format/format_test.go.html#6598129">src</a></span><span class="op" id="6598253">[</span><span class="ident" id="6598254"><a href="/go/format/format_test.go.html#6598185">i</a></span><span class="op" id="6598255">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598259">if</span>&nbsp;<span class="ident" id="6598262"><a href="/go/format/format_test.go.html#6598231">d</a></span>&nbsp;<span class="op" id="6598264">!=</span>&nbsp;<span class="ident" id="6598267"><a href="/go/format/format_test.go.html#6598245">s</a></span>&nbsp;<span class="op" id="6598269">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598274"><a href="/go/format/format_test.go.html#6598110">t</a></span><span class="op" id="6598275">.</span><span class="ident" id="6598276">Errorf</span><span class="op" id="6598282">(</span><span class="string" id="6598283">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="6598297">,</span>&nbsp;<span class="ident" id="6598299"><a href="/go/format/format_test.go.html#6598144">line</a></span><span class="op" id="6598303">,</span>&nbsp;<span class="ident" id="6598305"><a href="/go/format/format_test.go.html#6598124">dst</a></span><span class="op" id="6598308">[</span><span class="ident" id="6598309"><a href="/go/format/format_test.go.html#6598155">offs</a></span><span class="op" id="6598313">:</span><span class="ident" id="6598314"><a href="/go/format/format_test.go.html#6598185">i</a></span><span class="op" id="6598315">+</span><span class="num" id="6598316">1</span><span class="op" id="6598317">]</span><span class="op" id="6598318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598323"><a href="/go/format/format_test.go.html#6598110">t</a></span><span class="op" id="6598324">.</span><span class="ident" id="6598325">Errorf</span><span class="op" id="6598331">(</span><span class="string" id="6598332">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="6598346">,</span>&nbsp;<span class="ident" id="6598348"><a href="/go/format/format_test.go.html#6598144">line</a></span><span class="op" id="6598352">,</span>&nbsp;<span class="ident" id="6598354"><a href="/go/format/format_test.go.html#6598129">src</a></span><span class="op" id="6598357">[</span><span class="ident" id="6598358"><a href="/go/format/format_test.go.html#6598155">offs</a></span><span class="op" id="6598362">:</span><span class="ident" id="6598363"><a href="/go/format/format_test.go.html#6598185">i</a></span><span class="op" id="6598364">+</span><span class="num" id="6598365">1</span><span class="op" id="6598366">]</span><span class="op" id="6598367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598372">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6598381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598385">if</span>&nbsp;<span class="ident" id="6598388"><a href="/go/format/format_test.go.html#6598245">s</a></span>&nbsp;<span class="op" id="6598390">==</span>&nbsp;<span class="string" id="6598393">&#39;\n&#39;</span>&nbsp;<span class="op" id="6598398">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598403"><a href="/go/format/format_test.go.html#6598144">line</a></span><span class="op" id="6598407">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598413"><a href="/go/format/format_test.go.html#6598155">offs</a></span>&nbsp;<span class="op" id="6598418">=</span>&nbsp;<span class="ident" id="6598420"><a href="/go/format/format_test.go.html#6598185">i</a></span>&nbsp;<span class="op" id="6598422">+</span>&nbsp;<span class="num" id="6598424">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6598428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6598431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598434">if</span>&nbsp;<span class="builtinfunc" id="6598437">len</span><span class="op" id="6598440">(</span><span class="ident" id="6598441"><a href="/go/format/format_test.go.html#6598124">dst</a></span><span class="op" id="6598444">)</span>&nbsp;<span class="op" id="6598446">!=</span>&nbsp;<span class="builtinfunc" id="6598449">len</span><span class="op" id="6598452">(</span><span class="ident" id="6598453"><a href="/go/format/format_test.go.html#6598129">src</a></span><span class="op" id="6598456">)</span>&nbsp;<span class="op" id="6598458">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598462"><a href="/go/format/format_test.go.html#6598110">t</a></span><span class="op" id="6598463">.</span><span class="ident" id="6598464">Errorf</span><span class="op" id="6598470">(</span><span class="string" id="6598471">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="6598511">,</span>&nbsp;<span class="builtinfunc" id="6598513">len</span><span class="op" id="6598516">(</span><span class="ident" id="6598517"><a href="/go/format/format_test.go.html#6598124">dst</a></span><span class="op" id="6598520">)</span><span class="op" id="6598521">,</span>&nbsp;<span class="builtinfunc" id="6598523">len</span><span class="op" id="6598526">(</span><span class="ident" id="6598527"><a href="/go/format/format_test.go.html#6598129">src</a></span><span class="op" id="6598530">)</span><span class="op" id="6598531">,</span>&nbsp;<span class="ident" id="6598533"><a href="/go/format/format_test.go.html#6598129">src</a></span><span class="op" id="6598536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6598539">}</span><br>
<span class="lineno"></span><span class="op" id="6598541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6598544">func</span>&nbsp;<span class="ident" id="6598549">TestNode</span><span class="op" id="6598557">(</span><span class="ident" id="6598558">t</span>&nbsp;<span class="op" id="6598560">*</span><span class="ident" id="6598561"><a href="/go/format/format_test.go.html#6598052">testing</a></span><span class="op" id="6598568">.</span><span class="ident" id="6598569">T</span><span class="op" id="6598570">)</span>&nbsp;<span class="op" id="6598572">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598575">src</span><span class="op" id="6598578">,</span>&nbsp;<span class="ident" id="6598580">err</span>&nbsp;<span class="op" id="6598584">:=</span>&nbsp;<span class="ident" id="6598587"><a href="/go/format/format_test.go.html#6598028">ioutil</a></span><span class="op" id="6598593">.</span><span class="ident" id="6598594">ReadFile</span><span class="op" id="6598602">(</span><span class="ident" id="6598603"><a href="/go/format/format_test.go.html#6598071">testfile</a></span><span class="op" id="6598611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598614">if</span>&nbsp;<span class="ident" id="6598617"><a href="/go/format/format_test.go.html#6598580">err</a></span>&nbsp;<span class="op" id="6598621">!=</span>&nbsp;<span class="ident" id="6598624">nil</span>&nbsp;<span class="op" id="6598628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598632"><a href="/go/format/format_test.go.html#6598558">t</a></span><span class="op" id="6598633">.</span><span class="ident" id="6598634">Fatal</span><span class="op" id="6598639">(</span><span class="ident" id="6598640"><a href="/go/format/format_test.go.html#6598580">err</a></span><span class="op" id="6598643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6598646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598650">fset</span>&nbsp;<span class="op" id="6598655">:=</span>&nbsp;<span class="ident" id="6598658"><a href="/go/format/format_test.go.html#6598016">token</a></span><span class="op" id="6598663">.</span><span class="ident" id="6598664">NewFileSet</span><span class="op" id="6598674">(</span><span class="op" id="6598675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598678">file</span><span class="op" id="6598682">,</span>&nbsp;<span class="ident" id="6598684"><a href="/go/format/format_test.go.html#6598580">err</a></span>&nbsp;<span class="op" id="6598688">:=</span>&nbsp;<span class="ident" id="6598691"><a href="/go/format/format_test.go.html#6598003">parser</a></span><span class="op" id="6598697">.</span><span class="ident" id="6598698">ParseFile</span><span class="op" id="6598707">(</span><span class="ident" id="6598708"><a href="/go/format/format_test.go.html#6598650">fset</a></span><span class="op" id="6598712">,</span>&nbsp;<span class="ident" id="6598714"><a href="/go/format/format_test.go.html#6598071">testfile</a></span><span class="op" id="6598722">,</span>&nbsp;<span class="ident" id="6598724"><a href="/go/format/format_test.go.html#6598575">src</a></span><span class="op" id="6598727">,</span>&nbsp;<span class="ident" id="6598729"><a href="/go/format/format_test.go.html#6598003">parser</a></span><span class="op" id="6598735">.</span><span class="ident" id="6598736">ParseComments</span><span class="op" id="6598749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598752">if</span>&nbsp;<span class="ident" id="6598755"><a href="/go/format/format_test.go.html#6598580">err</a></span>&nbsp;<span class="op" id="6598759">!=</span>&nbsp;<span class="ident" id="6598762">nil</span>&nbsp;<span class="op" id="6598766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598770"><a href="/go/format/format_test.go.html#6598558">t</a></span><span class="op" id="6598771">.</span><span class="ident" id="6598772">Fatal</span><span class="op" id="6598777">(</span><span class="ident" id="6598778"><a href="/go/format/format_test.go.html#6598580">err</a></span><span class="op" id="6598781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6598784">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598788">var</span>&nbsp;<span class="ident" id="6598792">buf</span>&nbsp;<span class="ident" id="6598796"><a href="/go/format/format_test.go.html#6597994">bytes</a></span><span class="op" id="6598801">.</span><span class="ident" id="6598802">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598811">if</span>&nbsp;<span class="ident" id="6598814"><a href="/go/format/format_test.go.html#6598580">err</a></span>&nbsp;<span class="op" id="6598818">=</span>&nbsp;<span class="ident" id="6598820"><a href="/go/format/format.go.html#6357773">Node</a></span><span class="op" id="6598824">(</span><span class="op" id="6598825">&amp;</span><span class="ident" id="6598826"><a href="/go/format/format_test.go.html#6598792">buf</a></span><span class="op" id="6598829">,</span>&nbsp;<span class="ident" id="6598831"><a href="/go/format/format_test.go.html#6598650">fset</a></span><span class="op" id="6598835">,</span>&nbsp;<span class="ident" id="6598837"><a href="/go/format/format_test.go.html#6598678">file</a></span><span class="op" id="6598841">)</span><span class="op" id="6598842">;</span>&nbsp;<span class="ident" id="6598844"><a href="/go/format/format_test.go.html#6598580">err</a></span>&nbsp;<span class="op" id="6598848">!=</span>&nbsp;<span class="ident" id="6598851">nil</span>&nbsp;<span class="op" id="6598855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598859"><a href="/go/format/format_test.go.html#6598558">t</a></span><span class="op" id="6598860">.</span><span class="ident" id="6598861">Fatal</span><span class="op" id="6598866">(</span><span class="string" id="6598867">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="6598881">,</span>&nbsp;<span class="ident" id="6598883"><a href="/go/format/format_test.go.html#6598580">err</a></span><span class="op" id="6598886">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6598889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598893"><a href="/go/format/format_test.go.html#6598105">diff</a></span><span class="op" id="6598897">(</span><span class="ident" id="6598898"><a href="/go/format/format_test.go.html#6598558">t</a></span><span class="op" id="6598899">,</span>&nbsp;<span class="ident" id="6598901"><a href="/go/format/format_test.go.html#6598792">buf</a></span><span class="op" id="6598904">.</span><span class="ident" id="6598905">Bytes</span><span class="op" id="6598910">(</span><span class="op" id="6598911">)</span><span class="op" id="6598912">,</span>&nbsp;<span class="ident" id="6598914"><a href="/go/format/format_test.go.html#6598575">src</a></span><span class="op" id="6598917">)</span><br>
<span class="lineno"></span><span class="op" id="6598919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6598922">func</span>&nbsp;<span class="ident" id="6598927">TestSource</span><span class="op" id="6598937">(</span><span class="ident" id="6598938">t</span>&nbsp;<span class="op" id="6598940">*</span><span class="ident" id="6598941"><a href="/go/format/format_test.go.html#6598052">testing</a></span><span class="op" id="6598948">.</span><span class="ident" id="6598949">T</span><span class="op" id="6598950">)</span>&nbsp;<span class="op" id="6598952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6598955">src</span><span class="op" id="6598958">,</span>&nbsp;<span class="ident" id="6598960">err</span>&nbsp;<span class="op" id="6598964">:=</span>&nbsp;<span class="ident" id="6598967"><a href="/go/format/format_test.go.html#6598028">ioutil</a></span><span class="op" id="6598973">.</span><span class="ident" id="6598974">ReadFile</span><span class="op" id="6598982">(</span><span class="ident" id="6598983"><a href="/go/format/format_test.go.html#6598071">testfile</a></span><span class="op" id="6598991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6598994">if</span>&nbsp;<span class="ident" id="6598997"><a href="/go/format/format_test.go.html#6598960">err</a></span>&nbsp;<span class="op" id="6599001">!=</span>&nbsp;<span class="ident" id="6599004">nil</span>&nbsp;<span class="op" id="6599008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6599012"><a href="/go/format/format_test.go.html#6598938">t</a></span><span class="op" id="6599013">.</span><span class="ident" id="6599014">Fatal</span><span class="op" id="6599019">(</span><span class="ident" id="6599020"><a href="/go/format/format_test.go.html#6598960">err</a></span><span class="op" id="6599023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6599026">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6599030">res</span><span class="op" id="6599033">,</span>&nbsp;<span class="ident" id="6599035"><a href="/go/format/format_test.go.html#6598960">err</a></span>&nbsp;<span class="op" id="6599039">:=</span>&nbsp;<span class="ident" id="6599042"><a href="/go/format/format.go.html#6359371">Source</a></span><span class="op" id="6599048">(</span><span class="ident" id="6599049"><a href="/go/format/format_test.go.html#6598955">src</a></span><span class="op" id="6599052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6599055">if</span>&nbsp;<span class="ident" id="6599058"><a href="/go/format/format_test.go.html#6598960">err</a></span>&nbsp;<span class="op" id="6599062">!=</span>&nbsp;<span class="ident" id="6599065">nil</span>&nbsp;<span class="op" id="6599069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6599073"><a href="/go/format/format_test.go.html#6598938">t</a></span><span class="op" id="6599074">.</span><span class="ident" id="6599075">Fatal</span><span class="op" id="6599080">(</span><span class="string" id="6599081">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="6599097">,</span>&nbsp;<span class="ident" id="6599099"><a href="/go/format/format_test.go.html#6598960">err</a></span><span class="op" id="6599102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6599105">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6599109"><a href="/go/format/format_test.go.html#6598105">diff</a></span><span class="op" id="6599113">(</span><span class="ident" id="6599114"><a href="/go/format/format_test.go.html#6598938">t</a></span><span class="op" id="6599115">,</span>&nbsp;<span class="ident" id="6599117"><a href="/go/format/format_test.go.html#6599030">res</a></span><span class="op" id="6599120">,</span>&nbsp;<span class="ident" id="6599122"><a href="/go/format/format_test.go.html#6598955">src</a></span><span class="op" id="6599125">)</span><br>
<span class="lineno"></span><span class="op" id="6599127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6599130">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="6599204">var</span>&nbsp;<span class="ident" id="6599208">tests</span>&nbsp;<span class="op" id="6599214">=</span>&nbsp;<span class="op" id="6599216">[</span><span class="op" id="6599217">]</span><span class="builtintype" id="6599218">string</span><span class="op" id="6599224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6599227">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599249">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="6599269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599272">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="6599283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599286">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="6599316">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6599320">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599340">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="6599348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599351">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="6599387">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6599391">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599435">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="6599455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599458">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="6599484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599487">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="6599523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599526">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="6599570">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599573">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="6599630">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6599636">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599680">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="6599741">,</span>&nbsp;<span class="comment" id="6599743">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6599790">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599803">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="6599825">,</span>&nbsp;<span class="comment" id="6599827">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6599844">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599867">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="6599881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6599884">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="6599898">,</span><br>
<span class="lineno"></span><span class="op" id="6599900">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="6599903">func</span>&nbsp;<span class="ident" id="6599908">String</span><span class="op" id="6599914">(</span><span class="ident" id="6599915">s</span>&nbsp;<span class="builtintype" id="6599917">string</span><span class="op" id="6599923">)</span>&nbsp;<span class="op" id="6599925">(</span><span class="builtintype" id="6599926">string</span><span class="op" id="6599932">,</span>&nbsp;<span class="builtintype" id="6599934">error</span><span class="op" id="6599939">)</span>&nbsp;<span class="op" id="6599941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6599944">res</span><span class="op" id="6599947">,</span>&nbsp;<span class="ident" id="6599949">err</span>&nbsp;<span class="op" id="6599953">:=</span>&nbsp;<span class="ident" id="6599956"><a href="/go/format/format.go.html#6359371">Source</a></span><span class="op" id="6599962">(</span><span class="op" id="6599963">[</span><span class="op" id="6599964">]</span><span class="builtintype" id="6599965">byte</span><span class="op" id="6599969">(</span><span class="ident" id="6599970"><a href="/go/format/format_test.go.html#6599915">s</a></span><span class="op" id="6599971">)</span><span class="op" id="6599972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6599975">if</span>&nbsp;<span class="ident" id="6599978"><a href="/go/format/format_test.go.html#6599949">err</a></span>&nbsp;<span class="op" id="6599982">!=</span>&nbsp;<span class="ident" id="6599985">nil</span>&nbsp;<span class="op" id="6599989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6599993">return</span>&nbsp;<span class="string" id="6600000">&#34;&#34;</span><span class="op" id="6600002">,</span>&nbsp;<span class="ident" id="6600004"><a href="/go/format/format_test.go.html#6599949">err</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600012">return</span>&nbsp;<span class="builtintype" id="6600019">string</span><span class="op" id="6600025">(</span><span class="ident" id="6600026"><a href="/go/format/format_test.go.html#6599944">res</a></span><span class="op" id="6600029">)</span><span class="op" id="6600030">,</span>&nbsp;<span class="ident" id="6600032">nil</span><br>
<span class="lineno"></span><span class="op" id="6600036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6600039">func</span>&nbsp;<span class="ident" id="6600044">TestPartial</span><span class="op" id="6600055">(</span><span class="ident" id="6600056">t</span>&nbsp;<span class="op" id="6600058">*</span><span class="ident" id="6600059"><a href="/go/format/format_test.go.html#6598052">testing</a></span><span class="op" id="6600066">.</span><span class="ident" id="6600067">T</span><span class="op" id="6600068">)</span>&nbsp;<span class="op" id="6600070">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600073">for</span>&nbsp;<span class="ident" id="6600077">_</span><span class="op" id="6600078">,</span>&nbsp;<span class="ident" id="6600080">src</span>&nbsp;<span class="op" id="6600084">:=</span>&nbsp;<span class="keyword" id="6600087">range</span>&nbsp;<span class="ident" id="6600093"><a href="/go/format/format_test.go.html#6599208">tests</a></span>&nbsp;<span class="op" id="6600099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600103">if</span>&nbsp;<span class="ident" id="6600106"><a href="/go/format/format_test.go.html#6598041">strings</a></span><span class="op" id="6600113">.</span><span class="ident" id="6600114">HasPrefix</span><span class="op" id="6600123">(</span><span class="ident" id="6600124"><a href="/go/format/format_test.go.html#6600080">src</a></span><span class="op" id="6600127">,</span>&nbsp;<span class="string" id="6600129">&#34;ERROR&#34;</span><span class="op" id="6600136">)</span>&nbsp;<span class="op" id="6600138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6600143">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600171"><a href="/go/format/format_test.go.html#6600080">src</a></span>&nbsp;<span class="op" id="6600175">=</span>&nbsp;<span class="ident" id="6600177"><a href="/go/format/format_test.go.html#6600080">src</a></span><span class="op" id="6600180">[</span><span class="num" id="6600181">5</span><span class="op" id="6600182">:</span><span class="op" id="6600183">]</span>&nbsp;<span class="comment" id="6600185">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600211">res</span><span class="op" id="6600214">,</span>&nbsp;<span class="ident" id="6600216">err</span>&nbsp;<span class="op" id="6600220">:=</span>&nbsp;<span class="ident" id="6600223"><a href="/go/format/format_test.go.html#6599908">String</a></span><span class="op" id="6600229">(</span><span class="ident" id="6600230"><a href="/go/format/format_test.go.html#6600080">src</a></span><span class="op" id="6600233">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600238">if</span>&nbsp;<span class="ident" id="6600241"><a href="/go/format/format_test.go.html#6600216">err</a></span>&nbsp;<span class="op" id="6600245">==</span>&nbsp;<span class="ident" id="6600248">nil</span>&nbsp;<span class="op" id="6600252">&amp;&amp;</span>&nbsp;<span class="ident" id="6600255"><a href="/go/format/format_test.go.html#6600211">res</a></span>&nbsp;<span class="op" id="6600259">==</span>&nbsp;<span class="ident" id="6600262"><a href="/go/format/format_test.go.html#6600080">src</a></span>&nbsp;<span class="op" id="6600266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600272"><a href="/go/format/format_test.go.html#6600056">t</a></span><span class="op" id="6600273">.</span><span class="ident" id="6600274">Errorf</span><span class="op" id="6600280">(</span><span class="string" id="6600281">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="6600333">,</span>&nbsp;<span class="ident" id="6600335"><a href="/go/format/format_test.go.html#6600080">src</a></span><span class="op" id="6600338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600347">}</span>&nbsp;<span class="keyword" id="6600349">else</span>&nbsp;<span class="op" id="6600354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6600359">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600390">res</span><span class="op" id="6600393">,</span>&nbsp;<span class="ident" id="6600395">err</span>&nbsp;<span class="op" id="6600399">:=</span>&nbsp;<span class="ident" id="6600402"><a href="/go/format/format_test.go.html#6599908">String</a></span><span class="op" id="6600408">(</span><span class="ident" id="6600409"><a href="/go/format/format_test.go.html#6600080">src</a></span><span class="op" id="6600412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600417">if</span>&nbsp;<span class="ident" id="6600420"><a href="/go/format/format_test.go.html#6600395">err</a></span>&nbsp;<span class="op" id="6600424">!=</span>&nbsp;<span class="ident" id="6600427">nil</span>&nbsp;<span class="op" id="6600431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600437"><a href="/go/format/format_test.go.html#6600056">t</a></span><span class="op" id="6600438">.</span><span class="ident" id="6600439">Errorf</span><span class="op" id="6600445">(</span><span class="string" id="6600446">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="6600475">,</span>&nbsp;<span class="ident" id="6600477"><a href="/go/format/format_test.go.html#6600395">err</a></span><span class="op" id="6600480">,</span>&nbsp;<span class="ident" id="6600482"><a href="/go/format/format_test.go.html#6600080">src</a></span><span class="op" id="6600485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600490">}</span>&nbsp;<span class="keyword" id="6600492">else</span>&nbsp;<span class="keyword" id="6600497">if</span>&nbsp;<span class="ident" id="6600500"><a href="/go/format/format_test.go.html#6600390">res</a></span>&nbsp;<span class="op" id="6600504">!=</span>&nbsp;<span class="ident" id="6600507"><a href="/go/format/format_test.go.html#6600080">src</a></span>&nbsp;<span class="op" id="6600511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600517"><a href="/go/format/format_test.go.html#6600056">t</a></span><span class="op" id="6600518">.</span><span class="ident" id="6600519">Errorf</span><span class="op" id="6600525">(</span><span class="string" id="6600526">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="6600573">,</span>&nbsp;<span class="ident" id="6600575"><a href="/go/format/format_test.go.html#6600080">src</a></span><span class="op" id="6600578">,</span>&nbsp;<span class="ident" id="6600580"><a href="/go/format/format_test.go.html#6600390">res</a></span><span class="op" id="6600583">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600595">}</span><br>
<span class="lineno"></span><span class="op" id="6600597">}</span>
</div>
</body>
</html>
