<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/gzip</h2>
<ul>
<li><a href="/gostd/compress/gzip/gunzip.go.html" class="current">gunzip.go</a></li>
<li><a href="/gostd/compress/gzip/gunzip_test.go.html">gunzip_test.go</a></li>
<li><a href="/gostd/compress/gzip/gzip.go.html">gzip.go</a></li>
<li><a href="/gostd/compress/gzip/gzip_test.go.html">gzip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4777328">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4777383">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4777437">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4777488">//&nbsp;Package&nbsp;gzip&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;gzip&nbsp;format&nbsp;compressed&nbsp;files,</span><br>
<span class="lineno"></span><span class="comment" id="4777568">//&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1952.</span><br>
<span class="lineno"></span><span class="keyword" id="4777597">package</span>&nbsp;<span class="ident" id="4777605">gzip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4777611">import</span>&nbsp;<span class="op" id="4777618">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4777621">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4777630">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4777648">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4777658">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4777666">&#34;hash/crc32&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4777680">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4777686">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="4777693">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4777696">const</span>&nbsp;<span class="op" id="4777702">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777705">gzipID1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777717">=</span>&nbsp;<span class="num" id="4777719">0x1f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777725">gzipID2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777737">=</span>&nbsp;<span class="num" id="4777739">0x8b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777745">gzipDeflate</span>&nbsp;<span class="op" id="4777757">=</span>&nbsp;<span class="num" id="4777759">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777762">flagText</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777774">=</span>&nbsp;<span class="num" id="4777776">1</span>&nbsp;<span class="op" id="4777778">&lt;&lt;</span>&nbsp;<span class="num" id="4777781">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777784">flagHdrCrc</span>&nbsp;&nbsp;<span class="op" id="4777796">=</span>&nbsp;<span class="num" id="4777798">1</span>&nbsp;<span class="op" id="4777800">&lt;&lt;</span>&nbsp;<span class="num" id="4777803">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777806">flagExtra</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4777818">=</span>&nbsp;<span class="num" id="4777820">1</span>&nbsp;<span class="op" id="4777822">&lt;&lt;</span>&nbsp;<span class="num" id="4777825">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777828">flagName</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777840">=</span>&nbsp;<span class="num" id="4777842">1</span>&nbsp;<span class="op" id="4777844">&lt;&lt;</span>&nbsp;<span class="num" id="4777847">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777850">flagComment</span>&nbsp;<span class="op" id="4777862">=</span>&nbsp;<span class="num" id="4777864">1</span>&nbsp;<span class="op" id="4777866">&lt;&lt;</span>&nbsp;<span class="num" id="4777869">4</span><br>
<span class="lineno"></span><span class="op" id="4777871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="4777874">func</span>&nbsp;<span class="ident" id="4777879">makeReader</span><span class="op" id="4777889">(</span><span class="ident" id="4777890">r</span>&nbsp;<span class="ident" id="4777892"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4777894">.</span><span class="ident" id="4777895"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="4777901">)</span>&nbsp;<span class="ident" id="4777903"><a href="/gostd/compress/gzip/gunzip.go.html#4777630">flate</a></span><span class="op" id="4777908">.</span><span class="ident" id="4777909"><a href="/gostd/compress/flate/inflate.go.html#4840236">Reader</a></span>&nbsp;<span class="op" id="4777916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777919">if</span>&nbsp;<span class="ident" id="4777922">rr</span><span class="op" id="4777924">,</span>&nbsp;<span class="ident" id="4777926">ok</span>&nbsp;<span class="op" id="4777929">:=</span>&nbsp;<span class="ident" id="4777932"><a href="/gostd/compress/gzip/gunzip.go.html#4777890">r</a></span><span class="op" id="4777933">.</span><span class="op" id="4777934">(</span><span class="ident" id="4777935"><a href="/gostd/compress/gzip/gunzip.go.html#4777630">flate</a></span><span class="op" id="4777940">.</span><span class="ident" id="4777941"><a href="/gostd/compress/flate/inflate.go.html#4840236">Reader</a></span><span class="op" id="4777947">)</span><span class="op" id="4777948">;</span>&nbsp;<span class="ident" id="4777950"><a href="/gostd/compress/gzip/gunzip.go.html#4777926">ok</a></span>&nbsp;<span class="op" id="4777953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777957">return</span>&nbsp;<span class="ident" id="4777964"><a href="/gostd/compress/gzip/gunzip.go.html#4777922">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777971">return</span>&nbsp;<span class="ident" id="4777978"><a href="/gostd/compress/gzip/gunzip.go.html#4777621">bufio</a></span><span class="op" id="4777983">.</span><span class="ident" id="4777984"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="4777993">(</span><span class="ident" id="4777994"><a href="/gostd/compress/gzip/gunzip.go.html#4777890">r</a></span><span class="op" id="4777995">)</span><br>
<span class="lineno">35</span><span class="op" id="4777997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4778000">var</span>&nbsp;<span class="op" id="4778004">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4778007">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;GZIP&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778088">ErrChecksum</span>&nbsp;<span class="op" id="4778100">=</span>&nbsp;<span class="ident" id="4778102"><a href="/gostd/compress/gzip/gunzip.go.html#4777648">errors</a></span><span class="op" id="4778108">.</span><span class="ident" id="4778109"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4778112">(</span><span class="string" id="4778113">&#34;gzip:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="4778137">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4778140">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;GZIP&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778217">ErrHeader</span>&nbsp;<span class="op" id="4778227">=</span>&nbsp;<span class="ident" id="4778229"><a href="/gostd/compress/gzip/gunzip.go.html#4777648">errors</a></span><span class="op" id="4778235">.</span><span class="ident" id="4778236"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4778239">(</span><span class="string" id="4778240">&#34;gzip:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="4778262">)</span><br>
<span class="lineno"></span><span class="op" id="4778264">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4778267">//&nbsp;The&nbsp;gzip&nbsp;file&nbsp;stores&nbsp;a&nbsp;header&nbsp;giving&nbsp;metadata&nbsp;about&nbsp;the&nbsp;compressed&nbsp;file.</span><br>
<span class="lineno">45</span><span class="comment" id="4778343">//&nbsp;That&nbsp;header&nbsp;is&nbsp;exposed&nbsp;as&nbsp;the&nbsp;fields&nbsp;of&nbsp;the&nbsp;Writer&nbsp;and&nbsp;Reader&nbsp;structs.</span><br>
<span class="lineno"></span><span class="keyword" id="4778417">type</span>&nbsp;<span class="ident" id="4778422">Header</span>&nbsp;<span class="keyword" id="4778429">struct</span>&nbsp;<span class="op" id="4778436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778439">Comment</span>&nbsp;<span class="builtintype" id="4778447">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4778457">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778469">Extra</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4778477">[</span><span class="op" id="4778478">]</span><span class="builtintype" id="4778479">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4778487">//&nbsp;&#34;extra&nbsp;data&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778504">ModTime</span>&nbsp;<span class="ident" id="4778512"><a href="/gostd/compress/gzip/gunzip.go.html#4777686">time</a></span><span class="op" id="4778516">.</span><span class="ident" id="4778517"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="comment" id="4778522">//&nbsp;modification&nbsp;time</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778544">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4778552">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4778562">//&nbsp;file&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778576">OS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4778584">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4778594">//&nbsp;operating&nbsp;system&nbsp;type</span><br>
<span class="lineno"></span><span class="op" id="4778619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4778622">//&nbsp;A&nbsp;Reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;be&nbsp;read&nbsp;to&nbsp;retrieve</span><br>
<span class="lineno">55</span><span class="comment" id="4778679">//&nbsp;uncompressed&nbsp;data&nbsp;from&nbsp;a&nbsp;gzip-format&nbsp;compressed&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="4778736">//</span><br>
<span class="lineno"></span><span class="comment" id="4778739">//&nbsp;In&nbsp;general,&nbsp;a&nbsp;gzip&nbsp;file&nbsp;can&nbsp;be&nbsp;a&nbsp;concatenation&nbsp;of&nbsp;gzip&nbsp;files,</span><br>
<span class="lineno"></span><span class="comment" id="4778804">//&nbsp;each&nbsp;with&nbsp;its&nbsp;own&nbsp;header.&nbsp;&nbsp;Reads&nbsp;from&nbsp;the&nbsp;Reader</span><br>
<span class="lineno"></span><span class="comment" id="4778856">//&nbsp;return&nbsp;the&nbsp;concatenation&nbsp;of&nbsp;the&nbsp;uncompressed&nbsp;data&nbsp;of&nbsp;each.</span><br>
<span class="lineno">60</span><span class="comment" id="4778918">//&nbsp;Only&nbsp;the&nbsp;first&nbsp;header&nbsp;is&nbsp;recorded&nbsp;in&nbsp;the&nbsp;Reader&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="4778977">//</span><br>
<span class="lineno"></span><span class="comment" id="4778980">//&nbsp;Gzip&nbsp;files&nbsp;store&nbsp;a&nbsp;length&nbsp;and&nbsp;checksum&nbsp;of&nbsp;the&nbsp;uncompressed&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="4779048">//&nbsp;The&nbsp;Reader&nbsp;will&nbsp;return&nbsp;a&nbsp;ErrChecksum&nbsp;when&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="4779098">//&nbsp;reaches&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;uncompressed&nbsp;data&nbsp;if&nbsp;it&nbsp;does&nbsp;not</span><br>
<span class="lineno">65</span><span class="comment" id="4779157">//&nbsp;have&nbsp;the&nbsp;expected&nbsp;length&nbsp;or&nbsp;checksum.&nbsp;&nbsp;Clients&nbsp;should&nbsp;treat&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="4779225">//&nbsp;returned&nbsp;by&nbsp;Read&nbsp;as&nbsp;tentative&nbsp;until&nbsp;they&nbsp;receive&nbsp;the&nbsp;io.EOF</span><br>
<span class="lineno"></span><span class="comment" id="4779288">//&nbsp;marking&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="4779320">type</span>&nbsp;<span class="ident" id="4779325">Reader</span>&nbsp;<span class="keyword" id="4779332">struct</span>&nbsp;<span class="op" id="4779339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779342"><a href="/gostd/compress/gzip/gunzip.go.html#4778422">Header</a></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779350">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779363"><a href="/gostd/compress/gzip/gunzip.go.html#4777630">flate</a></span><span class="op" id="4779368">.</span><span class="ident" id="4779369"><a href="/gostd/compress/flate/inflate.go.html#4840236">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779377">decompressor</span>&nbsp;<span class="ident" id="4779390"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4779392">.</span><span class="ident" id="4779393"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779405">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779418"><a href="/gostd/compress/gzip/gunzip.go.html#4777658">hash</a></span><span class="op" id="4779422">.</span><span class="ident" id="4779423"><a href="/gostd/hash/hash.go.html#3014832">Hash32</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779431">size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4779444">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779452">flg</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4779465">byte</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779471">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4779484">[</span><span class="num" id="4779485">512</span><span class="op" id="4779488">]</span><span class="builtintype" id="4779489">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779495">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4779508">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779515">multistream</span>&nbsp;&nbsp;<span class="builtintype" id="4779528">bool</span><br>
<span class="lineno"></span><span class="op" id="4779533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4779536">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;Reader&nbsp;reading&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno"></span><span class="comment" id="4779596">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,</span><br>
<span class="lineno"></span><span class="comment" id="4779643">//&nbsp;the&nbsp;decompressor&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="4779705">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;Reader&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="keyword" id="4779781">func</span>&nbsp;<span class="ident" id="4779786">NewReader</span><span class="op" id="4779795">(</span><span class="ident" id="4779796">r</span>&nbsp;<span class="ident" id="4779798"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4779800">.</span><span class="ident" id="4779801"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="4779807">)</span>&nbsp;<span class="op" id="4779809">(</span><span class="op" id="4779810">*</span><span class="ident" id="4779811"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4779817">,</span>&nbsp;<span class="builtintype" id="4779819">error</span><span class="op" id="4779824">)</span>&nbsp;<span class="op" id="4779826">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779829">z</span>&nbsp;<span class="op" id="4779831">:=</span>&nbsp;<span class="builtinfunc" id="4779834">new</span><span class="op" id="4779837">(</span><span class="ident" id="4779838"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4779844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779847"><a href="/gostd/compress/gzip/gunzip.go.html#4779829">z</a></span><span class="op" id="4779848">.</span><span class="ident" id="4779849"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span>&nbsp;<span class="op" id="4779851">=</span>&nbsp;<span class="ident" id="4779853"><a href="/gostd/compress/gzip/gunzip.go.html#4777879">makeReader</a></span><span class="op" id="4779863">(</span><span class="ident" id="4779864"><a href="/gostd/compress/gzip/gunzip.go.html#4779796">r</a></span><span class="op" id="4779865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779868"><a href="/gostd/compress/gzip/gunzip.go.html#4779829">z</a></span><span class="op" id="4779869">.</span><span class="ident" id="4779870"><a href="/gostd/compress/gzip/gunzip.go.html#4779515">multistream</a></span>&nbsp;<span class="op" id="4779882">=</span>&nbsp;<span class="builtintype" id="4779884">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779890"><a href="/gostd/compress/gzip/gunzip.go.html#4779829">z</a></span><span class="op" id="4779891">.</span><span class="ident" id="4779892"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span>&nbsp;<span class="op" id="4779899">=</span>&nbsp;<span class="ident" id="4779901"><a href="/gostd/compress/gzip/gunzip.go.html#4777666">crc32</a></span><span class="op" id="4779906">.</span><span class="ident" id="4779907"><a href="/gostd/hash/crc32/crc32.go.html#4859679">NewIEEE</a></span><span class="op" id="4779914">(</span><span class="op" id="4779915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779918">if</span>&nbsp;<span class="ident" id="4779921">err</span>&nbsp;<span class="op" id="4779925">:=</span>&nbsp;<span class="ident" id="4779928"><a href="/gostd/compress/gzip/gunzip.go.html#4779829">z</a></span><span class="op" id="4779929">.</span><span class="ident" id="4779930"><a href="/gostd/compress/gzip/gunzip.go.html#4782435">readHeader</a></span><span class="op" id="4779940">(</span><span class="builtintype" id="4779941">true</span><span class="op" id="4779945">)</span><span class="op" id="4779946">;</span>&nbsp;<span class="ident" id="4779948"><a href="/gostd/compress/gzip/gunzip.go.html#4779921">err</a></span>&nbsp;<span class="op" id="4779952">!=</span>&nbsp;<span class="builtintype" id="4779955">nil</span>&nbsp;<span class="op" id="4779959">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779963">return</span>&nbsp;<span class="builtintype" id="4779970">nil</span><span class="op" id="4779973">,</span>&nbsp;<span class="ident" id="4779975"><a href="/gostd/compress/gzip/gunzip.go.html#4779921">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4779980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779983">return</span>&nbsp;<span class="ident" id="4779990"><a href="/gostd/compress/gzip/gunzip.go.html#4779829">z</a></span><span class="op" id="4779991">,</span>&nbsp;<span class="builtintype" id="4779993">nil</span><br>
<span class="lineno"></span><span class="op" id="4779997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="4780000">//&nbsp;Reset&nbsp;discards&nbsp;the&nbsp;Reader&nbsp;z&#39;s&nbsp;state&nbsp;and&nbsp;makes&nbsp;it&nbsp;equivalent&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4780070">//&nbsp;result&nbsp;of&nbsp;its&nbsp;original&nbsp;state&nbsp;from&nbsp;NewReader,&nbsp;but&nbsp;reading&nbsp;from&nbsp;r&nbsp;instead.</span><br>
<span class="lineno"></span><span class="comment" id="4780146">//&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;Reader&nbsp;rather&nbsp;than&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="4780213">func</span>&nbsp;<span class="op" id="4780218">(</span><span class="ident" id="4780219">z</span>&nbsp;<span class="op" id="4780221">*</span><span class="ident" id="4780222"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4780228">)</span>&nbsp;<span class="ident" id="4780230">Reset</span><span class="op" id="4780235">(</span><span class="ident" id="4780236">r</span>&nbsp;<span class="ident" id="4780238"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4780240">.</span><span class="ident" id="4780241"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="4780247">)</span>&nbsp;<span class="builtintype" id="4780249">error</span>&nbsp;<span class="op" id="4780255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780258"><a href="/gostd/compress/gzip/gunzip.go.html#4780219">z</a></span><span class="op" id="4780259">.</span><span class="ident" id="4780260"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span>&nbsp;<span class="op" id="4780262">=</span>&nbsp;<span class="ident" id="4780264"><a href="/gostd/compress/gzip/gunzip.go.html#4777879">makeReader</a></span><span class="op" id="4780274">(</span><span class="ident" id="4780275"><a href="/gostd/compress/gzip/gunzip.go.html#4780236">r</a></span><span class="op" id="4780276">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780279">if</span>&nbsp;<span class="ident" id="4780282"><a href="/gostd/compress/gzip/gunzip.go.html#4780219">z</a></span><span class="op" id="4780283">.</span><span class="ident" id="4780284"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span>&nbsp;<span class="op" id="4780291">==</span>&nbsp;<span class="builtintype" id="4780294">nil</span>&nbsp;<span class="op" id="4780298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780302"><a href="/gostd/compress/gzip/gunzip.go.html#4780219">z</a></span><span class="op" id="4780303">.</span><span class="ident" id="4780304"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span>&nbsp;<span class="op" id="4780311">=</span>&nbsp;<span class="ident" id="4780313"><a href="/gostd/compress/gzip/gunzip.go.html#4777666">crc32</a></span><span class="op" id="4780318">.</span><span class="ident" id="4780319"><a href="/gostd/hash/crc32/crc32.go.html#4859679">NewIEEE</a></span><span class="op" id="4780326">(</span><span class="op" id="4780327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780330">}</span>&nbsp;<span class="keyword" id="4780332">else</span>&nbsp;<span class="op" id="4780337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780341"><a href="/gostd/compress/gzip/gunzip.go.html#4780219">z</a></span><span class="op" id="4780342">.</span><span class="ident" id="4780343"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span><span class="op" id="4780349">.</span><span class="ident" id="4780350"><a href="/gostd/hash/hash.go.html#3014443">Reset</a></span><span class="op" id="4780355">(</span><span class="op" id="4780356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780359">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780362"><a href="/gostd/compress/gzip/gunzip.go.html#4780219">z</a></span><span class="op" id="4780363">.</span><span class="ident" id="4780364"><a href="/gostd/compress/gzip/gunzip.go.html#4779431">size</a></span>&nbsp;<span class="op" id="4780369">=</span>&nbsp;<span class="num" id="4780371">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780374"><a href="/gostd/compress/gzip/gunzip.go.html#4780219">z</a></span><span class="op" id="4780375">.</span><span class="ident" id="4780376"><a href="/gostd/compress/gzip/gunzip.go.html#4779495">err</a></span>&nbsp;<span class="op" id="4780380">=</span>&nbsp;<span class="builtintype" id="4780382">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780387"><a href="/gostd/compress/gzip/gunzip.go.html#4780219">z</a></span><span class="op" id="4780388">.</span><span class="ident" id="4780389"><a href="/gostd/compress/gzip/gunzip.go.html#4779515">multistream</a></span>&nbsp;<span class="op" id="4780401">=</span>&nbsp;<span class="builtintype" id="4780403">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780409">return</span>&nbsp;<span class="ident" id="4780416"><a href="/gostd/compress/gzip/gunzip.go.html#4780219">z</a></span><span class="op" id="4780417">.</span><span class="ident" id="4780418"><a href="/gostd/compress/gzip/gunzip.go.html#4782435">readHeader</a></span><span class="op" id="4780428">(</span><span class="builtintype" id="4780429">true</span><span class="op" id="4780433">)</span><br>
<span class="lineno"></span><span class="op" id="4780435">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="4780438">//&nbsp;Multistream&nbsp;controls&nbsp;whether&nbsp;the&nbsp;reader&nbsp;supports&nbsp;multistream&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="4780509">//</span><br>
<span class="lineno"></span><span class="comment" id="4780512">//&nbsp;If&nbsp;enabled&nbsp;(the&nbsp;default),&nbsp;the&nbsp;Reader&nbsp;expects&nbsp;the&nbsp;input&nbsp;to&nbsp;be&nbsp;a&nbsp;sequence</span><br>
<span class="lineno"></span><span class="comment" id="4780587">//&nbsp;of&nbsp;individually&nbsp;gzipped&nbsp;data&nbsp;streams,&nbsp;each&nbsp;with&nbsp;its&nbsp;own&nbsp;header&nbsp;and</span><br>
<span class="lineno">115</span><span class="comment" id="4780657">//&nbsp;trailer,&nbsp;ending&nbsp;at&nbsp;EOF.&nbsp;The&nbsp;effect&nbsp;is&nbsp;that&nbsp;the&nbsp;concatenation&nbsp;of&nbsp;a&nbsp;sequence</span><br>
<span class="lineno"></span><span class="comment" id="4780735">//&nbsp;of&nbsp;gzipped&nbsp;files&nbsp;is&nbsp;treated&nbsp;as&nbsp;equivalent&nbsp;to&nbsp;the&nbsp;gzip&nbsp;of&nbsp;the&nbsp;concatenation</span><br>
<span class="lineno"></span><span class="comment" id="4780813">//&nbsp;of&nbsp;the&nbsp;sequence.&nbsp;This&nbsp;is&nbsp;standard&nbsp;behavior&nbsp;for&nbsp;gzip&nbsp;readers.</span><br>
<span class="lineno"></span><span class="comment" id="4780877">//</span><br>
<span class="lineno"></span><span class="comment" id="4780880">//&nbsp;Calling&nbsp;Multistream(false)&nbsp;disables&nbsp;this&nbsp;behavior;&nbsp;disabling&nbsp;the&nbsp;behavior</span><br>
<span class="lineno">120</span><span class="comment" id="4780957">//&nbsp;can&nbsp;be&nbsp;useful&nbsp;when&nbsp;reading&nbsp;file&nbsp;formats&nbsp;that&nbsp;distinguish&nbsp;individual&nbsp;gzip</span><br>
<span class="lineno"></span><span class="comment" id="4781033">//&nbsp;data&nbsp;streams&nbsp;or&nbsp;mix&nbsp;gzip&nbsp;data&nbsp;streams&nbsp;with&nbsp;other&nbsp;data&nbsp;streams.</span><br>
<span class="lineno"></span><span class="comment" id="4781099">//&nbsp;In&nbsp;this&nbsp;mode,&nbsp;when&nbsp;the&nbsp;Reader&nbsp;reaches&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;data&nbsp;stream,</span><br>
<span class="lineno"></span><span class="comment" id="4781168">//&nbsp;Read&nbsp;returns&nbsp;io.EOF.&nbsp;If&nbsp;the&nbsp;underlying&nbsp;reader&nbsp;implements&nbsp;io.ByteReader,</span><br>
<span class="lineno"></span><span class="comment" id="4781243">//&nbsp;it&nbsp;will&nbsp;be&nbsp;left&nbsp;positioned&nbsp;just&nbsp;after&nbsp;the&nbsp;gzip&nbsp;stream.</span><br>
<span class="lineno">125</span><span class="comment" id="4781301">//&nbsp;To&nbsp;start&nbsp;the&nbsp;next&nbsp;stream,&nbsp;call&nbsp;z.Reset(r)&nbsp;followed&nbsp;by&nbsp;z.Multistream(false).</span><br>
<span class="lineno"></span><span class="comment" id="4781380">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;next&nbsp;stream,&nbsp;z.Reset(r)&nbsp;will&nbsp;return&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="4781442">func</span>&nbsp;<span class="op" id="4781447">(</span><span class="ident" id="4781448">z</span>&nbsp;<span class="op" id="4781450">*</span><span class="ident" id="4781451"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4781457">)</span>&nbsp;<span class="ident" id="4781459">Multistream</span><span class="op" id="4781470">(</span><span class="ident" id="4781471">ok</span>&nbsp;<span class="builtintype" id="4781474">bool</span><span class="op" id="4781478">)</span>&nbsp;<span class="op" id="4781480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781483"><a href="/gostd/compress/gzip/gunzip.go.html#4781448">z</a></span><span class="op" id="4781484">.</span><span class="ident" id="4781485"><a href="/gostd/compress/gzip/gunzip.go.html#4779515">multistream</a></span>&nbsp;<span class="op" id="4781497">=</span>&nbsp;<span class="ident" id="4781499"><a href="/gostd/compress/gzip/gunzip.go.html#4781471">ok</a></span><br>
<span class="lineno"></span><span class="op" id="4781502">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="4781505">//&nbsp;GZIP&nbsp;(RFC&nbsp;1952)&nbsp;is&nbsp;little-endian,&nbsp;unlike&nbsp;ZLIB&nbsp;(RFC&nbsp;1950).</span><br>
<span class="lineno"></span><span class="keyword" id="4781566">func</span>&nbsp;<span class="ident" id="4781571">get4</span><span class="op" id="4781575">(</span><span class="ident" id="4781576">p</span>&nbsp;<span class="op" id="4781578">[</span><span class="op" id="4781579">]</span><span class="builtintype" id="4781580">byte</span><span class="op" id="4781584">)</span>&nbsp;<span class="builtintype" id="4781586">uint32</span>&nbsp;<span class="op" id="4781593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781596">return</span>&nbsp;<span class="builtintype" id="4781603">uint32</span><span class="op" id="4781609">(</span><span class="ident" id="4781610"><a href="/gostd/compress/gzip/gunzip.go.html#4781576">p</a></span><span class="op" id="4781611">[</span><span class="num" id="4781612">0</span><span class="op" id="4781613">]</span><span class="op" id="4781614">)</span>&nbsp;<span class="op" id="4781616">|</span>&nbsp;<span class="builtintype" id="4781618">uint32</span><span class="op" id="4781624">(</span><span class="ident" id="4781625"><a href="/gostd/compress/gzip/gunzip.go.html#4781576">p</a></span><span class="op" id="4781626">[</span><span class="num" id="4781627">1</span><span class="op" id="4781628">]</span><span class="op" id="4781629">)</span><span class="op" id="4781630">&lt;&lt;</span><span class="num" id="4781632">8</span>&nbsp;<span class="op" id="4781634">|</span>&nbsp;<span class="builtintype" id="4781636">uint32</span><span class="op" id="4781642">(</span><span class="ident" id="4781643"><a href="/gostd/compress/gzip/gunzip.go.html#4781576">p</a></span><span class="op" id="4781644">[</span><span class="num" id="4781645">2</span><span class="op" id="4781646">]</span><span class="op" id="4781647">)</span><span class="op" id="4781648">&lt;&lt;</span><span class="num" id="4781650">16</span>&nbsp;<span class="op" id="4781653">|</span>&nbsp;<span class="builtintype" id="4781655">uint32</span><span class="op" id="4781661">(</span><span class="ident" id="4781662"><a href="/gostd/compress/gzip/gunzip.go.html#4781576">p</a></span><span class="op" id="4781663">[</span><span class="num" id="4781664">3</span><span class="op" id="4781665">]</span><span class="op" id="4781666">)</span><span class="op" id="4781667">&lt;&lt;</span><span class="num" id="4781669">24</span><br>
<span class="lineno"></span><span class="op" id="4781672">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="4781675">func</span>&nbsp;<span class="op" id="4781680">(</span><span class="ident" id="4781681">z</span>&nbsp;<span class="op" id="4781683">*</span><span class="ident" id="4781684"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4781690">)</span>&nbsp;<span class="ident" id="4781692">readString</span><span class="op" id="4781702">(</span><span class="op" id="4781703">)</span>&nbsp;<span class="op" id="4781705">(</span><span class="builtintype" id="4781706">string</span><span class="op" id="4781712">,</span>&nbsp;<span class="builtintype" id="4781714">error</span><span class="op" id="4781719">)</span>&nbsp;<span class="op" id="4781721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781724">var</span>&nbsp;<span class="ident" id="4781728">err</span>&nbsp;<span class="builtintype" id="4781732">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781739">needconv</span>&nbsp;<span class="op" id="4781748">:=</span>&nbsp;<span class="builtintype" id="4781751">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781758">for</span>&nbsp;<span class="ident" id="4781762">i</span>&nbsp;<span class="op" id="4781764">:=</span>&nbsp;<span class="num" id="4781767">0</span><span class="op" id="4781768">;</span>&nbsp;<span class="op" id="4781770">;</span>&nbsp;<span class="ident" id="4781772"><a href="/gostd/compress/gzip/gunzip.go.html#4781762">i</a></span><span class="op" id="4781773">++</span>&nbsp;<span class="op" id="4781776">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781780">if</span>&nbsp;<span class="ident" id="4781783"><a href="/gostd/compress/gzip/gunzip.go.html#4781762">i</a></span>&nbsp;<span class="op" id="4781785">&gt;=</span>&nbsp;<span class="builtinfunc" id="4781788">len</span><span class="op" id="4781791">(</span><span class="ident" id="4781792"><a href="/gostd/compress/gzip/gunzip.go.html#4781681">z</a></span><span class="op" id="4781793">.</span><span class="ident" id="4781794"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4781797">)</span>&nbsp;<span class="op" id="4781799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781804">return</span>&nbsp;<span class="string" id="4781811">&#34;&#34;</span><span class="op" id="4781813">,</span>&nbsp;<span class="ident" id="4781815"><a href="/gostd/compress/gzip/gunzip.go.html#4778217">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781831"><a href="/gostd/compress/gzip/gunzip.go.html#4781681">z</a></span><span class="op" id="4781832">.</span><span class="ident" id="4781833"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4781836">[</span><span class="ident" id="4781837"><a href="/gostd/compress/gzip/gunzip.go.html#4781762">i</a></span><span class="op" id="4781838">]</span><span class="op" id="4781839">,</span>&nbsp;<span class="ident" id="4781841"><a href="/gostd/compress/gzip/gunzip.go.html#4781728">err</a></span>&nbsp;<span class="op" id="4781845">=</span>&nbsp;<span class="ident" id="4781847"><a href="/gostd/compress/gzip/gunzip.go.html#4781681">z</a></span><span class="op" id="4781848">.</span><span class="ident" id="4781849"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span><span class="op" id="4781850">.</span><span class="ident" id="4781851"><a href="/gostd/io/io.go.html#1426989">ReadByte</a></span><span class="op" id="4781859">(</span><span class="op" id="4781860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781864">if</span>&nbsp;<span class="ident" id="4781867"><a href="/gostd/compress/gzip/gunzip.go.html#4781728">err</a></span>&nbsp;<span class="op" id="4781871">!=</span>&nbsp;<span class="builtintype" id="4781874">nil</span>&nbsp;<span class="op" id="4781878">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781883">return</span>&nbsp;<span class="string" id="4781890">&#34;&#34;</span><span class="op" id="4781892">,</span>&nbsp;<span class="ident" id="4781894"><a href="/gostd/compress/gzip/gunzip.go.html#4781728">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781904">if</span>&nbsp;<span class="ident" id="4781907"><a href="/gostd/compress/gzip/gunzip.go.html#4781681">z</a></span><span class="op" id="4781908">.</span><span class="ident" id="4781909"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4781912">[</span><span class="ident" id="4781913"><a href="/gostd/compress/gzip/gunzip.go.html#4781762">i</a></span><span class="op" id="4781914">]</span>&nbsp;<span class="op" id="4781916">&gt;</span>&nbsp;<span class="num" id="4781918">0x7f</span>&nbsp;<span class="op" id="4781923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781928"><a href="/gostd/compress/gzip/gunzip.go.html#4781739">needconv</a></span>&nbsp;<span class="op" id="4781937">=</span>&nbsp;<span class="builtintype" id="4781939">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781946">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781950">if</span>&nbsp;<span class="ident" id="4781953"><a href="/gostd/compress/gzip/gunzip.go.html#4781681">z</a></span><span class="op" id="4781954">.</span><span class="ident" id="4781955"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4781958">[</span><span class="ident" id="4781959"><a href="/gostd/compress/gzip/gunzip.go.html#4781762">i</a></span><span class="op" id="4781960">]</span>&nbsp;<span class="op" id="4781962">==</span>&nbsp;<span class="num" id="4781965">0</span>&nbsp;<span class="op" id="4781967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781972">//&nbsp;GZIP&nbsp;(RFC&nbsp;1952)&nbsp;specifies&nbsp;that&nbsp;strings&nbsp;are&nbsp;NUL-terminated&nbsp;ISO&nbsp;8859-1&nbsp;(Latin-1).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782058">if</span>&nbsp;<span class="ident" id="4782061"><a href="/gostd/compress/gzip/gunzip.go.html#4781739">needconv</a></span>&nbsp;<span class="op" id="4782070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782076">s</span>&nbsp;<span class="op" id="4782078">:=</span>&nbsp;<span class="builtinfunc" id="4782081">make</span><span class="op" id="4782085">(</span><span class="op" id="4782086">[</span><span class="op" id="4782087">]</span><span class="builtintype" id="4782088">rune</span><span class="op" id="4782092">,</span>&nbsp;<span class="num" id="4782094">0</span><span class="op" id="4782095">,</span>&nbsp;<span class="ident" id="4782097"><a href="/gostd/compress/gzip/gunzip.go.html#4781762">i</a></span><span class="op" id="4782098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782104">for</span>&nbsp;<span class="ident" id="4782108">_</span><span class="op" id="4782109">,</span>&nbsp;<span class="ident" id="4782111">v</span>&nbsp;<span class="op" id="4782113">:=</span>&nbsp;<span class="keyword" id="4782116">range</span>&nbsp;<span class="ident" id="4782122"><a href="/gostd/compress/gzip/gunzip.go.html#4781681">z</a></span><span class="op" id="4782123">.</span><span class="ident" id="4782124"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782127">[</span><span class="num" id="4782128">0</span><span class="op" id="4782129">:</span><span class="ident" id="4782130"><a href="/gostd/compress/gzip/gunzip.go.html#4781762">i</a></span><span class="op" id="4782131">]</span>&nbsp;<span class="op" id="4782133">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782140"><a href="/gostd/compress/gzip/gunzip.go.html#4782076">s</a></span>&nbsp;<span class="op" id="4782142">=</span>&nbsp;<span class="builtinfunc" id="4782144">append</span><span class="op" id="4782150">(</span><span class="ident" id="4782151"><a href="/gostd/compress/gzip/gunzip.go.html#4782076">s</a></span><span class="op" id="4782152">,</span>&nbsp;<span class="builtintype" id="4782154">rune</span><span class="op" id="4782158">(</span><span class="ident" id="4782159"><a href="/gostd/compress/gzip/gunzip.go.html#4782111">v</a></span><span class="op" id="4782160">)</span><span class="op" id="4782161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782173">return</span>&nbsp;<span class="builtintype" id="4782180">string</span><span class="op" id="4782186">(</span><span class="ident" id="4782187"><a href="/gostd/compress/gzip/gunzip.go.html#4782076">s</a></span><span class="op" id="4782188">)</span><span class="op" id="4782189">,</span>&nbsp;<span class="builtintype" id="4782191">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782203">return</span>&nbsp;<span class="builtintype" id="4782210">string</span><span class="op" id="4782216">(</span><span class="ident" id="4782217"><a href="/gostd/compress/gzip/gunzip.go.html#4781681">z</a></span><span class="op" id="4782218">.</span><span class="ident" id="4782219"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782222">[</span><span class="num" id="4782223">0</span><span class="op" id="4782224">:</span><span class="ident" id="4782225"><a href="/gostd/compress/gzip/gunzip.go.html#4781762">i</a></span><span class="op" id="4782226">]</span><span class="op" id="4782227">)</span><span class="op" id="4782228">,</span>&nbsp;<span class="builtintype" id="4782230">nil</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782239">}</span><br>
<span class="lineno"></span><span class="op" id="4782241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4782244">func</span>&nbsp;<span class="op" id="4782249">(</span><span class="ident" id="4782250">z</span>&nbsp;<span class="op" id="4782252">*</span><span class="ident" id="4782253"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4782259">)</span>&nbsp;<span class="ident" id="4782261">read2</span><span class="op" id="4782266">(</span><span class="op" id="4782267">)</span>&nbsp;<span class="op" id="4782269">(</span><span class="builtintype" id="4782270">uint32</span><span class="op" id="4782276">,</span>&nbsp;<span class="builtintype" id="4782278">error</span><span class="op" id="4782283">)</span>&nbsp;<span class="op" id="4782285">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782288">_</span><span class="op" id="4782289">,</span>&nbsp;<span class="ident" id="4782291">err</span>&nbsp;<span class="op" id="4782295">:=</span>&nbsp;<span class="ident" id="4782298"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4782300">.</span><span class="ident" id="4782301"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="4782309">(</span><span class="ident" id="4782310"><a href="/gostd/compress/gzip/gunzip.go.html#4782250">z</a></span><span class="op" id="4782311">.</span><span class="ident" id="4782312"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span><span class="op" id="4782313">,</span>&nbsp;<span class="ident" id="4782315"><a href="/gostd/compress/gzip/gunzip.go.html#4782250">z</a></span><span class="op" id="4782316">.</span><span class="ident" id="4782317"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782320">[</span><span class="num" id="4782321">0</span><span class="op" id="4782322">:</span><span class="num" id="4782323">2</span><span class="op" id="4782324">]</span><span class="op" id="4782325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782328">if</span>&nbsp;<span class="ident" id="4782331"><a href="/gostd/compress/gzip/gunzip.go.html#4782291">err</a></span>&nbsp;<span class="op" id="4782335">!=</span>&nbsp;<span class="builtintype" id="4782338">nil</span>&nbsp;<span class="op" id="4782342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782346">return</span>&nbsp;<span class="num" id="4782353">0</span><span class="op" id="4782354">,</span>&nbsp;<span class="ident" id="4782356"><a href="/gostd/compress/gzip/gunzip.go.html#4782291">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782364">return</span>&nbsp;<span class="builtintype" id="4782371">uint32</span><span class="op" id="4782377">(</span><span class="ident" id="4782378"><a href="/gostd/compress/gzip/gunzip.go.html#4782250">z</a></span><span class="op" id="4782379">.</span><span class="ident" id="4782380"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782383">[</span><span class="num" id="4782384">0</span><span class="op" id="4782385">]</span><span class="op" id="4782386">)</span>&nbsp;<span class="op" id="4782388">|</span>&nbsp;<span class="builtintype" id="4782390">uint32</span><span class="op" id="4782396">(</span><span class="ident" id="4782397"><a href="/gostd/compress/gzip/gunzip.go.html#4782250">z</a></span><span class="op" id="4782398">.</span><span class="ident" id="4782399"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782402">[</span><span class="num" id="4782403">1</span><span class="op" id="4782404">]</span><span class="op" id="4782405">)</span><span class="op" id="4782406">&lt;&lt;</span><span class="num" id="4782408">8</span><span class="op" id="4782409">,</span>&nbsp;<span class="builtintype" id="4782411">nil</span><br>
<span class="lineno">170</span><span class="op" id="4782415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4782418">func</span>&nbsp;<span class="op" id="4782423">(</span><span class="ident" id="4782424">z</span>&nbsp;<span class="op" id="4782426">*</span><span class="ident" id="4782427"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4782433">)</span>&nbsp;<span class="ident" id="4782435">readHeader</span><span class="op" id="4782445">(</span><span class="ident" id="4782446">save</span>&nbsp;<span class="builtintype" id="4782451">bool</span><span class="op" id="4782455">)</span>&nbsp;<span class="builtintype" id="4782457">error</span>&nbsp;<span class="op" id="4782463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782466">_</span><span class="op" id="4782467">,</span>&nbsp;<span class="ident" id="4782469">err</span>&nbsp;<span class="op" id="4782473">:=</span>&nbsp;<span class="ident" id="4782476"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4782478">.</span><span class="ident" id="4782479"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="4782487">(</span><span class="ident" id="4782488"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782489">.</span><span class="ident" id="4782490"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span><span class="op" id="4782491">,</span>&nbsp;<span class="ident" id="4782493"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782494">.</span><span class="ident" id="4782495"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782498">[</span><span class="num" id="4782499">0</span><span class="op" id="4782500">:</span><span class="num" id="4782501">10</span><span class="op" id="4782503">]</span><span class="op" id="4782504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782507">if</span>&nbsp;<span class="ident" id="4782510"><a href="/gostd/compress/gzip/gunzip.go.html#4782469">err</a></span>&nbsp;<span class="op" id="4782514">!=</span>&nbsp;<span class="builtintype" id="4782517">nil</span>&nbsp;<span class="op" id="4782521">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782525">return</span>&nbsp;<span class="ident" id="4782532"><a href="/gostd/compress/gzip/gunzip.go.html#4782469">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782540">if</span>&nbsp;<span class="ident" id="4782543"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782544">.</span><span class="ident" id="4782545"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782548">[</span><span class="num" id="4782549">0</span><span class="op" id="4782550">]</span>&nbsp;<span class="op" id="4782552">!=</span>&nbsp;<span class="ident" id="4782555"><a href="/gostd/compress/gzip/gunzip.go.html#4777705">gzipID1</a></span>&nbsp;<span class="op" id="4782563">||</span>&nbsp;<span class="ident" id="4782566"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782567">.</span><span class="ident" id="4782568"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782571">[</span><span class="num" id="4782572">1</span><span class="op" id="4782573">]</span>&nbsp;<span class="op" id="4782575">!=</span>&nbsp;<span class="ident" id="4782578"><a href="/gostd/compress/gzip/gunzip.go.html#4777725">gzipID2</a></span>&nbsp;<span class="op" id="4782586">||</span>&nbsp;<span class="ident" id="4782589"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782590">.</span><span class="ident" id="4782591"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782594">[</span><span class="num" id="4782595">2</span><span class="op" id="4782596">]</span>&nbsp;<span class="op" id="4782598">!=</span>&nbsp;<span class="ident" id="4782601"><a href="/gostd/compress/gzip/gunzip.go.html#4777745">gzipDeflate</a></span>&nbsp;<span class="op" id="4782613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782617">return</span>&nbsp;<span class="ident" id="4782624"><a href="/gostd/compress/gzip/gunzip.go.html#4778217">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782635">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782638"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782639">.</span><span class="ident" id="4782640"><a href="/gostd/compress/gzip/gunzip.go.html#4779452">flg</a></span>&nbsp;<span class="op" id="4782644">=</span>&nbsp;<span class="ident" id="4782646"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782647">.</span><span class="ident" id="4782648"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782651">[</span><span class="num" id="4782652">3</span><span class="op" id="4782653">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782656">if</span>&nbsp;<span class="ident" id="4782659"><a href="/gostd/compress/gzip/gunzip.go.html#4782446">save</a></span>&nbsp;<span class="op" id="4782664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782668"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782669">.</span><span class="ident" id="4782670"><a href="/gostd/compress/gzip/gunzip.go.html#4778504">ModTime</a></span>&nbsp;<span class="op" id="4782678">=</span>&nbsp;<span class="ident" id="4782680"><a href="/gostd/compress/gzip/gunzip.go.html#4777686">time</a></span><span class="op" id="4782684">.</span><span class="ident" id="4782685"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="4782689">(</span><span class="builtintype" id="4782690">int64</span><span class="op" id="4782695">(</span><span class="ident" id="4782696"><a href="/gostd/compress/gzip/gunzip.go.html#4781571">get4</a></span><span class="op" id="4782700">(</span><span class="ident" id="4782701"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782702">.</span><span class="ident" id="4782703"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782706">[</span><span class="num" id="4782707">4</span><span class="op" id="4782708">:</span><span class="num" id="4782709">8</span><span class="op" id="4782710">]</span><span class="op" id="4782711">)</span><span class="op" id="4782712">)</span><span class="op" id="4782713">,</span>&nbsp;<span class="num" id="4782715">0</span><span class="op" id="4782716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4782720">//&nbsp;z.buf[8]&nbsp;is&nbsp;xfl,&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782750"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782751">.</span><span class="ident" id="4782752"><a href="/gostd/compress/gzip/gunzip.go.html#4778576">OS</a></span>&nbsp;<span class="op" id="4782755">=</span>&nbsp;<span class="ident" id="4782757"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782758">.</span><span class="ident" id="4782759"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782762">[</span><span class="num" id="4782763">9</span><span class="op" id="4782764">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782770"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782771">.</span><span class="ident" id="4782772"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span><span class="op" id="4782778">.</span><span class="ident" id="4782779"><a href="/gostd/hash/hash.go.html#3014443">Reset</a></span><span class="op" id="4782784">(</span><span class="op" id="4782785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782788"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782789">.</span><span class="ident" id="4782790"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span><span class="op" id="4782796">.</span><span class="ident" id="4782797"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4782802">(</span><span class="ident" id="4782803"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782804">.</span><span class="ident" id="4782805"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4782808">[</span><span class="num" id="4782809">0</span><span class="op" id="4782810">:</span><span class="num" id="4782811">10</span><span class="op" id="4782813">]</span><span class="op" id="4782814">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782818">if</span>&nbsp;<span class="ident" id="4782821"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782822">.</span><span class="ident" id="4782823"><a href="/gostd/compress/gzip/gunzip.go.html#4779452">flg</a></span><span class="op" id="4782826">&amp;</span><span class="ident" id="4782827"><a href="/gostd/compress/gzip/gunzip.go.html#4777806">flagExtra</a></span>&nbsp;<span class="op" id="4782837">!=</span>&nbsp;<span class="num" id="4782840">0</span>&nbsp;<span class="op" id="4782842">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782846">n</span><span class="op" id="4782847">,</span>&nbsp;<span class="ident" id="4782849">err</span>&nbsp;<span class="op" id="4782853">:=</span>&nbsp;<span class="ident" id="4782856"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782857">.</span><span class="ident" id="4782858"><a href="/gostd/compress/gzip/gunzip.go.html#4782261">read2</a></span><span class="op" id="4782863">(</span><span class="op" id="4782864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782868">if</span>&nbsp;<span class="ident" id="4782871"><a href="/gostd/compress/gzip/gunzip.go.html#4782849">err</a></span>&nbsp;<span class="op" id="4782875">!=</span>&nbsp;<span class="builtintype" id="4782878">nil</span>&nbsp;<span class="op" id="4782882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782887">return</span>&nbsp;<span class="ident" id="4782894"><a href="/gostd/compress/gzip/gunzip.go.html#4782849">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782904">data</span>&nbsp;<span class="op" id="4782909">:=</span>&nbsp;<span class="builtinfunc" id="4782912">make</span><span class="op" id="4782916">(</span><span class="op" id="4782917">[</span><span class="op" id="4782918">]</span><span class="builtintype" id="4782919">byte</span><span class="op" id="4782923">,</span>&nbsp;<span class="ident" id="4782925"><a href="/gostd/compress/gzip/gunzip.go.html#4782846">n</a></span><span class="op" id="4782926">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782930">if</span>&nbsp;<span class="ident" id="4782933">_</span><span class="op" id="4782934">,</span>&nbsp;<span class="ident" id="4782936"><a href="/gostd/compress/gzip/gunzip.go.html#4782849">err</a></span>&nbsp;<span class="op" id="4782940">=</span>&nbsp;<span class="ident" id="4782942"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4782944">.</span><span class="ident" id="4782945"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="4782953">(</span><span class="ident" id="4782954"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4782955">.</span><span class="ident" id="4782956"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span><span class="op" id="4782957">,</span>&nbsp;<span class="ident" id="4782959"><a href="/gostd/compress/gzip/gunzip.go.html#4782904">data</a></span><span class="op" id="4782963">)</span><span class="op" id="4782964">;</span>&nbsp;<span class="ident" id="4782966"><a href="/gostd/compress/gzip/gunzip.go.html#4782849">err</a></span>&nbsp;<span class="op" id="4782970">!=</span>&nbsp;<span class="builtintype" id="4782973">nil</span>&nbsp;<span class="op" id="4782977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782982">return</span>&nbsp;<span class="ident" id="4782989"><a href="/gostd/compress/gzip/gunzip.go.html#4782849">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782999">if</span>&nbsp;<span class="ident" id="4783002"><a href="/gostd/compress/gzip/gunzip.go.html#4782446">save</a></span>&nbsp;<span class="op" id="4783007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783012"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783013">.</span><span class="ident" id="4783014"><a href="/gostd/compress/gzip/gunzip.go.html#4778469">Extra</a></span>&nbsp;<span class="op" id="4783020">=</span>&nbsp;<span class="ident" id="4783022"><a href="/gostd/compress/gzip/gunzip.go.html#4782904">data</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783036">var</span>&nbsp;<span class="ident" id="4783040">s</span>&nbsp;<span class="builtintype" id="4783042">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783050">if</span>&nbsp;<span class="ident" id="4783053"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783054">.</span><span class="ident" id="4783055"><a href="/gostd/compress/gzip/gunzip.go.html#4779452">flg</a></span><span class="op" id="4783058">&amp;</span><span class="ident" id="4783059"><a href="/gostd/compress/gzip/gunzip.go.html#4777828">flagName</a></span>&nbsp;<span class="op" id="4783068">!=</span>&nbsp;<span class="num" id="4783071">0</span>&nbsp;<span class="op" id="4783073">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783077">if</span>&nbsp;<span class="ident" id="4783080"><a href="/gostd/compress/gzip/gunzip.go.html#4783040">s</a></span><span class="op" id="4783081">,</span>&nbsp;<span class="ident" id="4783083"><a href="/gostd/compress/gzip/gunzip.go.html#4782469">err</a></span>&nbsp;<span class="op" id="4783087">=</span>&nbsp;<span class="ident" id="4783089"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783090">.</span><span class="ident" id="4783091"><a href="/gostd/compress/gzip/gunzip.go.html#4781692">readString</a></span><span class="op" id="4783101">(</span><span class="op" id="4783102">)</span><span class="op" id="4783103">;</span>&nbsp;<span class="ident" id="4783105"><a href="/gostd/compress/gzip/gunzip.go.html#4782469">err</a></span>&nbsp;<span class="op" id="4783109">!=</span>&nbsp;<span class="builtintype" id="4783112">nil</span>&nbsp;<span class="op" id="4783116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783121">return</span>&nbsp;<span class="ident" id="4783128"><a href="/gostd/compress/gzip/gunzip.go.html#4782469">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783138">if</span>&nbsp;<span class="ident" id="4783141"><a href="/gostd/compress/gzip/gunzip.go.html#4782446">save</a></span>&nbsp;<span class="op" id="4783146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783151"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783152">.</span><span class="ident" id="4783153"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span>&nbsp;<span class="op" id="4783158">=</span>&nbsp;<span class="ident" id="4783160"><a href="/gostd/compress/gzip/gunzip.go.html#4783040">s</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783171">if</span>&nbsp;<span class="ident" id="4783174"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783175">.</span><span class="ident" id="4783176"><a href="/gostd/compress/gzip/gunzip.go.html#4779452">flg</a></span><span class="op" id="4783179">&amp;</span><span class="ident" id="4783180"><a href="/gostd/compress/gzip/gunzip.go.html#4777850">flagComment</a></span>&nbsp;<span class="op" id="4783192">!=</span>&nbsp;<span class="num" id="4783195">0</span>&nbsp;<span class="op" id="4783197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783201">if</span>&nbsp;<span class="ident" id="4783204"><a href="/gostd/compress/gzip/gunzip.go.html#4783040">s</a></span><span class="op" id="4783205">,</span>&nbsp;<span class="ident" id="4783207"><a href="/gostd/compress/gzip/gunzip.go.html#4782469">err</a></span>&nbsp;<span class="op" id="4783211">=</span>&nbsp;<span class="ident" id="4783213"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783214">.</span><span class="ident" id="4783215"><a href="/gostd/compress/gzip/gunzip.go.html#4781692">readString</a></span><span class="op" id="4783225">(</span><span class="op" id="4783226">)</span><span class="op" id="4783227">;</span>&nbsp;<span class="ident" id="4783229"><a href="/gostd/compress/gzip/gunzip.go.html#4782469">err</a></span>&nbsp;<span class="op" id="4783233">!=</span>&nbsp;<span class="builtintype" id="4783236">nil</span>&nbsp;<span class="op" id="4783240">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783245">return</span>&nbsp;<span class="ident" id="4783252"><a href="/gostd/compress/gzip/gunzip.go.html#4782469">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783262">if</span>&nbsp;<span class="ident" id="4783265"><a href="/gostd/compress/gzip/gunzip.go.html#4782446">save</a></span>&nbsp;<span class="op" id="4783270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783275"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783276">.</span><span class="ident" id="4783277"><a href="/gostd/compress/gzip/gunzip.go.html#4778439">Comment</a></span>&nbsp;<span class="op" id="4783285">=</span>&nbsp;<span class="ident" id="4783287"><a href="/gostd/compress/gzip/gunzip.go.html#4783040">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783291">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783298">if</span>&nbsp;<span class="ident" id="4783301"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783302">.</span><span class="ident" id="4783303"><a href="/gostd/compress/gzip/gunzip.go.html#4779452">flg</a></span><span class="op" id="4783306">&amp;</span><span class="ident" id="4783307"><a href="/gostd/compress/gzip/gunzip.go.html#4777784">flagHdrCrc</a></span>&nbsp;<span class="op" id="4783318">!=</span>&nbsp;<span class="num" id="4783321">0</span>&nbsp;<span class="op" id="4783323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783327">n</span><span class="op" id="4783328">,</span>&nbsp;<span class="ident" id="4783330">err</span>&nbsp;<span class="op" id="4783334">:=</span>&nbsp;<span class="ident" id="4783337"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783338">.</span><span class="ident" id="4783339"><a href="/gostd/compress/gzip/gunzip.go.html#4782261">read2</a></span><span class="op" id="4783344">(</span><span class="op" id="4783345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783349">if</span>&nbsp;<span class="ident" id="4783352"><a href="/gostd/compress/gzip/gunzip.go.html#4783330">err</a></span>&nbsp;<span class="op" id="4783356">!=</span>&nbsp;<span class="builtintype" id="4783359">nil</span>&nbsp;<span class="op" id="4783363">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783368">return</span>&nbsp;<span class="ident" id="4783375"><a href="/gostd/compress/gzip/gunzip.go.html#4783330">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783385">sum</span>&nbsp;<span class="op" id="4783389">:=</span>&nbsp;<span class="ident" id="4783392"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783393">.</span><span class="ident" id="4783394"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span><span class="op" id="4783400">.</span><span class="ident" id="4783401"><a href="/gostd/hash/hash.go.html#3014858">Sum32</a></span><span class="op" id="4783406">(</span><span class="op" id="4783407">)</span>&nbsp;<span class="op" id="4783409">&amp;</span>&nbsp;<span class="num" id="4783411">0xFFFF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783420">if</span>&nbsp;<span class="ident" id="4783423"><a href="/gostd/compress/gzip/gunzip.go.html#4783327">n</a></span>&nbsp;<span class="op" id="4783425">!=</span>&nbsp;<span class="ident" id="4783428"><a href="/gostd/compress/gzip/gunzip.go.html#4783385">sum</a></span>&nbsp;<span class="op" id="4783432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783437">return</span>&nbsp;<span class="ident" id="4783444"><a href="/gostd/compress/gzip/gunzip.go.html#4778217">ErrHeader</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783463"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783464">.</span><span class="ident" id="4783465"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span><span class="op" id="4783471">.</span><span class="ident" id="4783472"><a href="/gostd/hash/hash.go.html#3014443">Reset</a></span><span class="op" id="4783477">(</span><span class="op" id="4783478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783481">if</span>&nbsp;<span class="ident" id="4783484"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783485">.</span><span class="ident" id="4783486"><a href="/gostd/compress/gzip/gunzip.go.html#4779377">decompressor</a></span>&nbsp;<span class="op" id="4783499">==</span>&nbsp;<span class="builtintype" id="4783502">nil</span>&nbsp;<span class="op" id="4783506">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783510"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783511">.</span><span class="ident" id="4783512"><a href="/gostd/compress/gzip/gunzip.go.html#4779377">decompressor</a></span>&nbsp;<span class="op" id="4783525">=</span>&nbsp;<span class="ident" id="4783527"><a href="/gostd/compress/gzip/gunzip.go.html#4777630">flate</a></span><span class="op" id="4783532">.</span><span class="ident" id="4783533"><a href="/gostd/compress/flate/inflate.go.html#4850562">NewReader</a></span><span class="op" id="4783542">(</span><span class="ident" id="4783543"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783544">.</span><span class="ident" id="4783545"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span><span class="op" id="4783546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783549">}</span>&nbsp;<span class="keyword" id="4783551">else</span>&nbsp;<span class="op" id="4783556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783560"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783561">.</span><span class="ident" id="4783562"><a href="/gostd/compress/gzip/gunzip.go.html#4779377">decompressor</a></span><span class="op" id="4783574">.</span><span class="op" id="4783575">(</span><span class="ident" id="4783576"><a href="/gostd/compress/gzip/gunzip.go.html#4777630">flate</a></span><span class="op" id="4783581">.</span><span class="ident" id="4783582"><a href="/gostd/compress/flate/inflate.go.html#4836467">Resetter</a></span><span class="op" id="4783590">)</span><span class="op" id="4783591">.</span><span class="ident" id="4783592"><a href="/gostd/compress/flate/inflate.go.html#4836608">Reset</a></span><span class="op" id="4783597">(</span><span class="ident" id="4783598"><a href="/gostd/compress/gzip/gunzip.go.html#4782424">z</a></span><span class="op" id="4783599">.</span><span class="ident" id="4783600"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span><span class="op" id="4783601">,</span>&nbsp;<span class="builtintype" id="4783603">nil</span><span class="op" id="4783606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783612">return</span>&nbsp;<span class="builtintype" id="4783619">nil</span><br>
<span class="lineno">240</span><span class="op" id="4783623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4783626">func</span>&nbsp;<span class="op" id="4783631">(</span><span class="ident" id="4783632">z</span>&nbsp;<span class="op" id="4783634">*</span><span class="ident" id="4783635"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4783641">)</span>&nbsp;<span class="ident" id="4783643">Read</span><span class="op" id="4783647">(</span><span class="ident" id="4783648">p</span>&nbsp;<span class="op" id="4783650">[</span><span class="op" id="4783651">]</span><span class="builtintype" id="4783652">byte</span><span class="op" id="4783656">)</span>&nbsp;<span class="op" id="4783658">(</span><span class="ident" id="4783659">n</span>&nbsp;<span class="builtintype" id="4783661">int</span><span class="op" id="4783664">,</span>&nbsp;<span class="ident" id="4783666">err</span>&nbsp;<span class="builtintype" id="4783670">error</span><span class="op" id="4783675">)</span>&nbsp;<span class="op" id="4783677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783680">if</span>&nbsp;<span class="ident" id="4783683"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783684">.</span><span class="ident" id="4783685"><a href="/gostd/compress/gzip/gunzip.go.html#4779495">err</a></span>&nbsp;<span class="op" id="4783689">!=</span>&nbsp;<span class="builtintype" id="4783692">nil</span>&nbsp;<span class="op" id="4783696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783700">return</span>&nbsp;<span class="num" id="4783707">0</span><span class="op" id="4783708">,</span>&nbsp;<span class="ident" id="4783710"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783711">.</span><span class="ident" id="4783712"><a href="/gostd/compress/gzip/gunzip.go.html#4779495">err</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783720">if</span>&nbsp;<span class="builtinfunc" id="4783723">len</span><span class="op" id="4783726">(</span><span class="ident" id="4783727"><a href="/gostd/compress/gzip/gunzip.go.html#4783648">p</a></span><span class="op" id="4783728">)</span>&nbsp;<span class="op" id="4783730">==</span>&nbsp;<span class="num" id="4783733">0</span>&nbsp;<span class="op" id="4783735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783739">return</span>&nbsp;<span class="num" id="4783746">0</span><span class="op" id="4783747">,</span>&nbsp;<span class="builtintype" id="4783749">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783758"><a href="/gostd/compress/gzip/gunzip.go.html#4783659">n</a></span><span class="op" id="4783759">,</span>&nbsp;<span class="ident" id="4783761"><a href="/gostd/compress/gzip/gunzip.go.html#4783666">err</a></span>&nbsp;<span class="op" id="4783765">=</span>&nbsp;<span class="ident" id="4783767"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783768">.</span><span class="ident" id="4783769"><a href="/gostd/compress/gzip/gunzip.go.html#4779377">decompressor</a></span><span class="op" id="4783781">.</span><span class="ident" id="4783782"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="4783786">(</span><span class="ident" id="4783787"><a href="/gostd/compress/gzip/gunzip.go.html#4783648">p</a></span><span class="op" id="4783788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783791"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783792">.</span><span class="ident" id="4783793"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span><span class="op" id="4783799">.</span><span class="ident" id="4783800"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4783805">(</span><span class="ident" id="4783806"><a href="/gostd/compress/gzip/gunzip.go.html#4783648">p</a></span><span class="op" id="4783807">[</span><span class="num" id="4783808">0</span><span class="op" id="4783809">:</span><span class="ident" id="4783810"><a href="/gostd/compress/gzip/gunzip.go.html#4783659">n</a></span><span class="op" id="4783811">]</span><span class="op" id="4783812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783815"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783816">.</span><span class="ident" id="4783817"><a href="/gostd/compress/gzip/gunzip.go.html#4779431">size</a></span>&nbsp;<span class="op" id="4783822">+=</span>&nbsp;<span class="builtintype" id="4783825">uint32</span><span class="op" id="4783831">(</span><span class="ident" id="4783832"><a href="/gostd/compress/gzip/gunzip.go.html#4783659">n</a></span><span class="op" id="4783833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783836">if</span>&nbsp;<span class="ident" id="4783839"><a href="/gostd/compress/gzip/gunzip.go.html#4783659">n</a></span>&nbsp;<span class="op" id="4783841">!=</span>&nbsp;<span class="num" id="4783844">0</span>&nbsp;<span class="op" id="4783846">||</span>&nbsp;<span class="ident" id="4783849"><a href="/gostd/compress/gzip/gunzip.go.html#4783666">err</a></span>&nbsp;<span class="op" id="4783853">!=</span>&nbsp;<span class="ident" id="4783856"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4783858">.</span><span class="ident" id="4783859"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="4783863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783867"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783868">.</span><span class="ident" id="4783869"><a href="/gostd/compress/gzip/gunzip.go.html#4779495">err</a></span>&nbsp;<span class="op" id="4783873">=</span>&nbsp;<span class="ident" id="4783875"><a href="/gostd/compress/gzip/gunzip.go.html#4783666">err</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783881">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4783893">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum&nbsp;+&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783935">if</span>&nbsp;<span class="ident" id="4783938">_</span><span class="op" id="4783939">,</span>&nbsp;<span class="ident" id="4783941">err</span>&nbsp;<span class="op" id="4783945">:=</span>&nbsp;<span class="ident" id="4783948"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4783950">.</span><span class="ident" id="4783951"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="4783959">(</span><span class="ident" id="4783960"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783961">.</span><span class="ident" id="4783962"><a href="/gostd/compress/gzip/gunzip.go.html#4779350">r</a></span><span class="op" id="4783963">,</span>&nbsp;<span class="ident" id="4783965"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783966">.</span><span class="ident" id="4783967"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4783970">[</span><span class="num" id="4783971">0</span><span class="op" id="4783972">:</span><span class="num" id="4783973">8</span><span class="op" id="4783974">]</span><span class="op" id="4783975">)</span><span class="op" id="4783976">;</span>&nbsp;<span class="ident" id="4783978"><a href="/gostd/compress/gzip/gunzip.go.html#4783941">err</a></span>&nbsp;<span class="op" id="4783982">!=</span>&nbsp;<span class="builtintype" id="4783985">nil</span>&nbsp;<span class="op" id="4783989">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783993"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4783994">.</span><span class="ident" id="4783995"><a href="/gostd/compress/gzip/gunzip.go.html#4779495">err</a></span>&nbsp;<span class="op" id="4783999">=</span>&nbsp;<span class="ident" id="4784001"><a href="/gostd/compress/gzip/gunzip.go.html#4783941">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784007">return</span>&nbsp;<span class="num" id="4784014">0</span><span class="op" id="4784015">,</span>&nbsp;<span class="ident" id="4784017"><a href="/gostd/compress/gzip/gunzip.go.html#4783941">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784025">crc32</span><span class="op" id="4784030">,</span>&nbsp;<span class="ident" id="4784032">isize</span>&nbsp;<span class="op" id="4784038">:=</span>&nbsp;<span class="ident" id="4784041"><a href="/gostd/compress/gzip/gunzip.go.html#4781571">get4</a></span><span class="op" id="4784045">(</span><span class="ident" id="4784046"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784047">.</span><span class="ident" id="4784048"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4784051">[</span><span class="num" id="4784052">0</span><span class="op" id="4784053">:</span><span class="num" id="4784054">4</span><span class="op" id="4784055">]</span><span class="op" id="4784056">)</span><span class="op" id="4784057">,</span>&nbsp;<span class="ident" id="4784059"><a href="/gostd/compress/gzip/gunzip.go.html#4781571">get4</a></span><span class="op" id="4784063">(</span><span class="ident" id="4784064"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784065">.</span><span class="ident" id="4784066"><a href="/gostd/compress/gzip/gunzip.go.html#4779471">buf</a></span><span class="op" id="4784069">[</span><span class="num" id="4784070">4</span><span class="op" id="4784071">:</span><span class="num" id="4784072">8</span><span class="op" id="4784073">]</span><span class="op" id="4784074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784077">sum</span>&nbsp;<span class="op" id="4784081">:=</span>&nbsp;<span class="ident" id="4784084"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784085">.</span><span class="ident" id="4784086"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span><span class="op" id="4784092">.</span><span class="ident" id="4784093"><a href="/gostd/hash/hash.go.html#3014858">Sum32</a></span><span class="op" id="4784098">(</span><span class="op" id="4784099">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784102">if</span>&nbsp;<span class="ident" id="4784105"><a href="/gostd/compress/gzip/gunzip.go.html#4784077">sum</a></span>&nbsp;<span class="op" id="4784109">!=</span>&nbsp;<span class="ident" id="4784112"><a href="/gostd/compress/gzip/gunzip.go.html#4784025">crc32</a></span>&nbsp;<span class="op" id="4784118">||</span>&nbsp;<span class="ident" id="4784121"><a href="/gostd/compress/gzip/gunzip.go.html#4784032">isize</a></span>&nbsp;<span class="op" id="4784127">!=</span>&nbsp;<span class="ident" id="4784130"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784131">.</span><span class="ident" id="4784132"><a href="/gostd/compress/gzip/gunzip.go.html#4779431">size</a></span>&nbsp;<span class="op" id="4784137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784141"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784142">.</span><span class="ident" id="4784143"><a href="/gostd/compress/gzip/gunzip.go.html#4779495">err</a></span>&nbsp;<span class="op" id="4784147">=</span>&nbsp;<span class="ident" id="4784149"><a href="/gostd/compress/gzip/gunzip.go.html#4778088">ErrChecksum</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784163">return</span>&nbsp;<span class="num" id="4784170">0</span><span class="op" id="4784171">,</span>&nbsp;<span class="ident" id="4784173"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784174">.</span><span class="ident" id="4784175"><a href="/gostd/compress/gzip/gunzip.go.html#4779495">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4784184">//&nbsp;File&nbsp;is&nbsp;ok;&nbsp;is&nbsp;there&nbsp;another?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784218">if</span>&nbsp;<span class="op" id="4784221">!</span><span class="ident" id="4784222"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784223">.</span><span class="ident" id="4784224"><a href="/gostd/compress/gzip/gunzip.go.html#4779515">multistream</a></span>&nbsp;<span class="op" id="4784236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784240">return</span>&nbsp;<span class="num" id="4784247">0</span><span class="op" id="4784248">,</span>&nbsp;<span class="ident" id="4784250"><a href="/gostd/compress/gzip/gunzip.go.html#4777680">io</a></span><span class="op" id="4784252">.</span><span class="ident" id="4784253"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784262">if</span>&nbsp;<span class="ident" id="4784265"><a href="/gostd/compress/gzip/gunzip.go.html#4783666">err</a></span>&nbsp;<span class="op" id="4784269">=</span>&nbsp;<span class="ident" id="4784271"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784272">.</span><span class="ident" id="4784273"><a href="/gostd/compress/gzip/gunzip.go.html#4782435">readHeader</a></span><span class="op" id="4784283">(</span><span class="builtintype" id="4784284">false</span><span class="op" id="4784289">)</span><span class="op" id="4784290">;</span>&nbsp;<span class="ident" id="4784292"><a href="/gostd/compress/gzip/gunzip.go.html#4783666">err</a></span>&nbsp;<span class="op" id="4784296">!=</span>&nbsp;<span class="builtintype" id="4784299">nil</span>&nbsp;<span class="op" id="4784303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784307"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784308">.</span><span class="ident" id="4784309"><a href="/gostd/compress/gzip/gunzip.go.html#4779495">err</a></span>&nbsp;<span class="op" id="4784313">=</span>&nbsp;<span class="ident" id="4784315"><a href="/gostd/compress/gzip/gunzip.go.html#4783666">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784321">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4784333">//&nbsp;Yes.&nbsp;&nbsp;Reset&nbsp;and&nbsp;read&nbsp;from&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784367"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784368">.</span><span class="ident" id="4784369"><a href="/gostd/compress/gzip/gunzip.go.html#4779405">digest</a></span><span class="op" id="4784375">.</span><span class="ident" id="4784376"><a href="/gostd/hash/hash.go.html#3014443">Reset</a></span><span class="op" id="4784381">(</span><span class="op" id="4784382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784385"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784386">.</span><span class="ident" id="4784387"><a href="/gostd/compress/gzip/gunzip.go.html#4779431">size</a></span>&nbsp;<span class="op" id="4784392">=</span>&nbsp;<span class="num" id="4784394">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784397">return</span>&nbsp;<span class="ident" id="4784404"><a href="/gostd/compress/gzip/gunzip.go.html#4783632">z</a></span><span class="op" id="4784405">.</span><span class="ident" id="4784406"><a href="/gostd/compress/gzip/gunzip.go.html#4783643">Read</a></span><span class="op" id="4784410">(</span><span class="ident" id="4784411"><a href="/gostd/compress/gzip/gunzip.go.html#4783648">p</a></span><span class="op" id="4784412">)</span><br>
<span class="lineno"></span><span class="op" id="4784414">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span><span class="comment" id="4784417">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;Reader.&nbsp;It&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;underlying&nbsp;io.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="4784489">func</span>&nbsp;<span class="op" id="4784494">(</span><span class="ident" id="4784495">z</span>&nbsp;<span class="op" id="4784497">*</span><span class="ident" id="4784498"><a href="/gostd/compress/gzip/gunzip.go.html#4779325">Reader</a></span><span class="op" id="4784504">)</span>&nbsp;<span class="ident" id="4784506">Close</span><span class="op" id="4784511">(</span><span class="op" id="4784512">)</span>&nbsp;<span class="builtintype" id="4784514">error</span>&nbsp;<span class="op" id="4784520">{</span>&nbsp;<span class="keyword" id="4784522">return</span>&nbsp;<span class="ident" id="4784529"><a href="/gostd/compress/gzip/gunzip.go.html#4784495">z</a></span><span class="op" id="4784530">.</span><span class="ident" id="4784531"><a href="/gostd/compress/gzip/gunzip.go.html#4779377">decompressor</a></span><span class="op" id="4784543">.</span><span class="ident" id="4784544"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="4784549">(</span><span class="op" id="4784550">)</span>&nbsp;<span class="op" id="4784552">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
