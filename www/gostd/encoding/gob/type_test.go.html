<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8143347">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8143402">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8143456">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8143507">package</span>&nbsp;<span class="ident" id="8143515">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8143520">import</span>&nbsp;<span class="op" id="8143527">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8143530">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8143539">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8143550">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8143560">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8143563">type</span>&nbsp;<span class="ident" id="8143568">typeT</span>&nbsp;<span class="keyword" id="8143574">struct</span>&nbsp;<span class="op" id="8143581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143584">id</span>&nbsp;&nbsp;<span class="ident" id="8143588">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143596">str</span>&nbsp;<span class="builtintype" id="8143600">string</span><br>
<span class="lineno"></span><span class="op" id="8143607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8143610">var</span>&nbsp;<span class="ident" id="8143614">basicTypes</span>&nbsp;<span class="op" id="8143625">=</span>&nbsp;<span class="op" id="8143627">[</span><span class="op" id="8143628">]</span><span class="ident" id="8143629">typeT</span><span class="op" id="8143634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143637">{</span><span class="ident" id="8143638">tBool</span><span class="op" id="8143643">,</span>&nbsp;<span class="string" id="8143645">&#34;bool&#34;</span><span class="op" id="8143651">}</span><span class="op" id="8143652">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143655">{</span><span class="ident" id="8143656">tInt</span><span class="op" id="8143660">,</span>&nbsp;<span class="string" id="8143662">&#34;int&#34;</span><span class="op" id="8143667">}</span><span class="op" id="8143668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143671">{</span><span class="ident" id="8143672">tUint</span><span class="op" id="8143677">,</span>&nbsp;<span class="string" id="8143679">&#34;uint&#34;</span><span class="op" id="8143685">}</span><span class="op" id="8143686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143689">{</span><span class="ident" id="8143690">tFloat</span><span class="op" id="8143696">,</span>&nbsp;<span class="string" id="8143698">&#34;float&#34;</span><span class="op" id="8143705">}</span><span class="op" id="8143706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143709">{</span><span class="ident" id="8143710">tBytes</span><span class="op" id="8143716">,</span>&nbsp;<span class="string" id="8143718">&#34;bytes&#34;</span><span class="op" id="8143725">}</span><span class="op" id="8143726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143729">{</span><span class="ident" id="8143730">tString</span><span class="op" id="8143737">,</span>&nbsp;<span class="string" id="8143739">&#34;string&#34;</span><span class="op" id="8143747">}</span><span class="op" id="8143748">,</span><br>
<span class="lineno">25</span><span class="op" id="8143750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8143753">func</span>&nbsp;<span class="ident" id="8143758">getTypeUnlocked</span><span class="op" id="8143773">(</span><span class="ident" id="8143774">name</span>&nbsp;<span class="builtintype" id="8143779">string</span><span class="op" id="8143785">,</span>&nbsp;<span class="ident" id="8143787">rt</span>&nbsp;<span class="ident" id="8143790">reflect</span><span class="op" id="8143797">.</span><span class="ident" id="8143798">Type</span><span class="op" id="8143802">)</span>&nbsp;<span class="ident" id="8143804">gobType</span>&nbsp;<span class="op" id="8143812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143815">typeLock</span><span class="op" id="8143823">.</span><span class="ident" id="8143824">Lock</span><span class="op" id="8143828">(</span><span class="op" id="8143829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143832">defer</span>&nbsp;<span class="ident" id="8143838">typeLock</span><span class="op" id="8143846">.</span><span class="ident" id="8143847">Unlock</span><span class="op" id="8143853">(</span><span class="op" id="8143854">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143857">t</span><span class="op" id="8143858">,</span>&nbsp;<span class="ident" id="8143860">err</span>&nbsp;<span class="op" id="8143864">:=</span>&nbsp;<span class="ident" id="8143867">getBaseType</span><span class="op" id="8143878">(</span><span class="ident" id="8143879">name</span><span class="op" id="8143883">,</span>&nbsp;<span class="ident" id="8143885">rt</span><span class="op" id="8143887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143890">if</span>&nbsp;<span class="ident" id="8143893">err</span>&nbsp;<span class="op" id="8143897">!=</span>&nbsp;<span class="ident" id="8143900">nil</span>&nbsp;<span class="op" id="8143904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8143908">panic</span><span class="op" id="8143913">(</span><span class="string" id="8143914">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="8143934">+</span>&nbsp;<span class="ident" id="8143936">err</span><span class="op" id="8143939">.</span><span class="ident" id="8143940">Error</span><span class="op" id="8143945">(</span><span class="op" id="8143946">)</span><span class="op" id="8143947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143953">return</span>&nbsp;<span class="ident" id="8143960">t</span><br>
<span class="lineno">35</span><span class="op" id="8143962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8143965">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="8143982">func</span>&nbsp;<span class="ident" id="8143987">TestBasic</span><span class="op" id="8143996">(</span><span class="ident" id="8143997">t</span>&nbsp;<span class="op" id="8143999">*</span><span class="ident" id="8144000">testing</span><span class="op" id="8144007">.</span><span class="ident" id="8144008">T</span><span class="op" id="8144009">)</span>&nbsp;<span class="op" id="8144011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144014">for</span>&nbsp;<span class="ident" id="8144018">_</span><span class="op" id="8144019">,</span>&nbsp;<span class="ident" id="8144021">tt</span>&nbsp;<span class="op" id="8144024">:=</span>&nbsp;<span class="keyword" id="8144027">range</span>&nbsp;<span class="ident" id="8144033">basicTypes</span>&nbsp;<span class="op" id="8144044">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144048">if</span>&nbsp;<span class="ident" id="8144051">tt</span><span class="op" id="8144053">.</span><span class="ident" id="8144054">id</span><span class="op" id="8144056">.</span><span class="builtintype" id="8144057">string</span><span class="op" id="8144063">(</span><span class="op" id="8144064">)</span>&nbsp;<span class="op" id="8144066">!=</span>&nbsp;<span class="ident" id="8144069">tt</span><span class="op" id="8144071">.</span><span class="ident" id="8144072">str</span>&nbsp;<span class="op" id="8144076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144081">t</span><span class="op" id="8144082">.</span><span class="ident" id="8144083">Errorf</span><span class="op" id="8144089">(</span><span class="string" id="8144090">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8144121">,</span>&nbsp;<span class="ident" id="8144123">tt</span><span class="op" id="8144125">.</span><span class="ident" id="8144126">str</span><span class="op" id="8144129">,</span>&nbsp;<span class="ident" id="8144131">tt</span><span class="op" id="8144133">.</span><span class="ident" id="8144134">id</span><span class="op" id="8144136">.</span><span class="builtintype" id="8144137">string</span><span class="op" id="8144143">(</span><span class="op" id="8144144">)</span><span class="op" id="8144145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144153">if</span>&nbsp;<span class="ident" id="8144156">tt</span><span class="op" id="8144158">.</span><span class="ident" id="8144159">id</span>&nbsp;<span class="op" id="8144162">==</span>&nbsp;<span class="num" id="8144165">0</span>&nbsp;<span class="op" id="8144167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144172">t</span><span class="op" id="8144173">.</span><span class="ident" id="8144174">Errorf</span><span class="op" id="8144180">(</span><span class="string" id="8144181">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="8144200">,</span>&nbsp;<span class="ident" id="8144202">tt</span><span class="op" id="8144204">.</span><span class="ident" id="8144205">str</span><span class="op" id="8144208">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144215">}</span><br>
<span class="lineno"></span><span class="op" id="8144217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8144220">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="8144288">func</span>&nbsp;<span class="ident" id="8144293">TestReregistration</span><span class="op" id="8144311">(</span><span class="ident" id="8144312">t</span>&nbsp;<span class="op" id="8144314">*</span><span class="ident" id="8144315">testing</span><span class="op" id="8144322">.</span><span class="ident" id="8144323">T</span><span class="op" id="8144324">)</span>&nbsp;<span class="op" id="8144326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144329">newtyp</span>&nbsp;<span class="op" id="8144336">:=</span>&nbsp;<span class="ident" id="8144339">getTypeUnlocked</span><span class="op" id="8144354">(</span><span class="string" id="8144355">&#34;int&#34;</span><span class="op" id="8144360">,</span>&nbsp;<span class="ident" id="8144362">reflect</span><span class="op" id="8144369">.</span><span class="ident" id="8144370">TypeOf</span><span class="op" id="8144376">(</span><span class="builtintype" id="8144377">int</span><span class="op" id="8144380">(</span><span class="num" id="8144381">0</span><span class="op" id="8144382">)</span><span class="op" id="8144383">)</span><span class="op" id="8144384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144387">if</span>&nbsp;<span class="ident" id="8144390">newtyp</span>&nbsp;<span class="op" id="8144397">!=</span>&nbsp;<span class="ident" id="8144400">tInt</span><span class="op" id="8144404">.</span><span class="ident" id="8144405">gobType</span><span class="op" id="8144412">(</span><span class="op" id="8144413">)</span>&nbsp;<span class="op" id="8144415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144419">t</span><span class="op" id="8144420">.</span><span class="ident" id="8144421">Errorf</span><span class="op" id="8144427">(</span><span class="string" id="8144428">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8144463">,</span>&nbsp;<span class="ident" id="8144465">newtyp</span><span class="op" id="8144471">.</span><span class="builtintype" id="8144472">string</span><span class="op" id="8144478">(</span><span class="op" id="8144479">)</span><span class="op" id="8144480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144483">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144486">newtyp</span>&nbsp;<span class="op" id="8144493">=</span>&nbsp;<span class="ident" id="8144495">getTypeUnlocked</span><span class="op" id="8144510">(</span><span class="string" id="8144511">&#34;uint&#34;</span><span class="op" id="8144517">,</span>&nbsp;<span class="ident" id="8144519">reflect</span><span class="op" id="8144526">.</span><span class="ident" id="8144527">TypeOf</span><span class="op" id="8144533">(</span><span class="builtintype" id="8144534">uint</span><span class="op" id="8144538">(</span><span class="num" id="8144539">0</span><span class="op" id="8144540">)</span><span class="op" id="8144541">)</span><span class="op" id="8144542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144545">if</span>&nbsp;<span class="ident" id="8144548">newtyp</span>&nbsp;<span class="op" id="8144555">!=</span>&nbsp;<span class="ident" id="8144558">tUint</span><span class="op" id="8144563">.</span><span class="ident" id="8144564">gobType</span><span class="op" id="8144571">(</span><span class="op" id="8144572">)</span>&nbsp;<span class="op" id="8144574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144578">t</span><span class="op" id="8144579">.</span><span class="ident" id="8144580">Errorf</span><span class="op" id="8144586">(</span><span class="string" id="8144587">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8144622">,</span>&nbsp;<span class="ident" id="8144624">newtyp</span><span class="op" id="8144630">.</span><span class="builtintype" id="8144631">string</span><span class="op" id="8144637">(</span><span class="op" id="8144638">)</span><span class="op" id="8144639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144645">newtyp</span>&nbsp;<span class="op" id="8144652">=</span>&nbsp;<span class="ident" id="8144654">getTypeUnlocked</span><span class="op" id="8144669">(</span><span class="string" id="8144670">&#34;string&#34;</span><span class="op" id="8144678">,</span>&nbsp;<span class="ident" id="8144680">reflect</span><span class="op" id="8144687">.</span><span class="ident" id="8144688">TypeOf</span><span class="op" id="8144694">(</span><span class="string" id="8144695">&#34;hello&#34;</span><span class="op" id="8144702">)</span><span class="op" id="8144703">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144706">if</span>&nbsp;<span class="ident" id="8144709">newtyp</span>&nbsp;<span class="op" id="8144716">!=</span>&nbsp;<span class="ident" id="8144719">tString</span><span class="op" id="8144726">.</span><span class="ident" id="8144727">gobType</span><span class="op" id="8144734">(</span><span class="op" id="8144735">)</span>&nbsp;<span class="op" id="8144737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144741">t</span><span class="op" id="8144742">.</span><span class="ident" id="8144743">Errorf</span><span class="op" id="8144749">(</span><span class="string" id="8144750">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8144785">,</span>&nbsp;<span class="ident" id="8144787">newtyp</span><span class="op" id="8144793">.</span><span class="builtintype" id="8144794">string</span><span class="op" id="8144800">(</span><span class="op" id="8144801">)</span><span class="op" id="8144802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144805">}</span><br>
<span class="lineno"></span><span class="op" id="8144807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8144810">func</span>&nbsp;<span class="ident" id="8144815">TestArrayType</span><span class="op" id="8144828">(</span><span class="ident" id="8144829">t</span>&nbsp;<span class="op" id="8144831">*</span><span class="ident" id="8144832">testing</span><span class="op" id="8144839">.</span><span class="ident" id="8144840">T</span><span class="op" id="8144841">)</span>&nbsp;<span class="op" id="8144843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144846">var</span>&nbsp;<span class="ident" id="8144850">a3</span>&nbsp;<span class="op" id="8144853">[</span><span class="num" id="8144854">3</span><span class="op" id="8144855">]</span><span class="builtintype" id="8144856">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144861">a3int</span>&nbsp;<span class="op" id="8144867">:=</span>&nbsp;<span class="ident" id="8144870">getTypeUnlocked</span><span class="op" id="8144885">(</span><span class="string" id="8144886">&#34;foo&#34;</span><span class="op" id="8144891">,</span>&nbsp;<span class="ident" id="8144893">reflect</span><span class="op" id="8144900">.</span><span class="ident" id="8144901">TypeOf</span><span class="op" id="8144907">(</span><span class="ident" id="8144908">a3</span><span class="op" id="8144910">)</span><span class="op" id="8144911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144914">newa3int</span>&nbsp;<span class="op" id="8144923">:=</span>&nbsp;<span class="ident" id="8144926">getTypeUnlocked</span><span class="op" id="8144941">(</span><span class="string" id="8144942">&#34;bar&#34;</span><span class="op" id="8144947">,</span>&nbsp;<span class="ident" id="8144949">reflect</span><span class="op" id="8144956">.</span><span class="ident" id="8144957">TypeOf</span><span class="op" id="8144963">(</span><span class="ident" id="8144964">a3</span><span class="op" id="8144966">)</span><span class="op" id="8144967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144970">if</span>&nbsp;<span class="ident" id="8144973">a3int</span>&nbsp;<span class="op" id="8144979">!=</span>&nbsp;<span class="ident" id="8144982">newa3int</span>&nbsp;<span class="op" id="8144991">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144995">t</span><span class="op" id="8144996">.</span><span class="ident" id="8144997">Errorf</span><span class="op" id="8145003">(</span><span class="string" id="8145004">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8145052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145058">var</span>&nbsp;<span class="ident" id="8145062">a4</span>&nbsp;<span class="op" id="8145065">[</span><span class="num" id="8145066">4</span><span class="op" id="8145067">]</span><span class="builtintype" id="8145068">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145073">a4int</span>&nbsp;<span class="op" id="8145079">:=</span>&nbsp;<span class="ident" id="8145082">getTypeUnlocked</span><span class="op" id="8145097">(</span><span class="string" id="8145098">&#34;goo&#34;</span><span class="op" id="8145103">,</span>&nbsp;<span class="ident" id="8145105">reflect</span><span class="op" id="8145112">.</span><span class="ident" id="8145113">TypeOf</span><span class="op" id="8145119">(</span><span class="ident" id="8145120">a4</span><span class="op" id="8145122">)</span><span class="op" id="8145123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145126">if</span>&nbsp;<span class="ident" id="8145129">a3int</span>&nbsp;<span class="op" id="8145135">==</span>&nbsp;<span class="ident" id="8145138">a4int</span>&nbsp;<span class="op" id="8145144">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145148">t</span><span class="op" id="8145149">.</span><span class="ident" id="8145150">Errorf</span><span class="op" id="8145156">(</span><span class="string" id="8145157">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="8145209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145215">var</span>&nbsp;<span class="ident" id="8145219">b3</span>&nbsp;<span class="op" id="8145222">[</span><span class="num" id="8145223">3</span><span class="op" id="8145224">]</span><span class="builtintype" id="8145225">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145231">a3bool</span>&nbsp;<span class="op" id="8145238">:=</span>&nbsp;<span class="ident" id="8145241">getTypeUnlocked</span><span class="op" id="8145256">(</span><span class="string" id="8145257">&#34;&#34;</span><span class="op" id="8145259">,</span>&nbsp;<span class="ident" id="8145261">reflect</span><span class="op" id="8145268">.</span><span class="ident" id="8145269">TypeOf</span><span class="op" id="8145275">(</span><span class="ident" id="8145276">b3</span><span class="op" id="8145278">)</span><span class="op" id="8145279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145282">if</span>&nbsp;<span class="ident" id="8145285">a3int</span>&nbsp;<span class="op" id="8145291">==</span>&nbsp;<span class="ident" id="8145294">a3bool</span>&nbsp;<span class="op" id="8145301">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145305">t</span><span class="op" id="8145306">.</span><span class="ident" id="8145307">Errorf</span><span class="op" id="8145313">(</span><span class="string" id="8145314">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="8145367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145373">str</span>&nbsp;<span class="op" id="8145377">:=</span>&nbsp;<span class="ident" id="8145380">a3bool</span><span class="op" id="8145386">.</span><span class="builtintype" id="8145387">string</span><span class="op" id="8145393">(</span><span class="op" id="8145394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145397">expected</span>&nbsp;<span class="op" id="8145406">:=</span>&nbsp;<span class="string" id="8145409">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145420">if</span>&nbsp;<span class="ident" id="8145423">str</span>&nbsp;<span class="op" id="8145427">!=</span>&nbsp;<span class="ident" id="8145430">expected</span>&nbsp;<span class="op" id="8145439">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145443">t</span><span class="op" id="8145444">.</span><span class="ident" id="8145445">Errorf</span><span class="op" id="8145451">(</span><span class="string" id="8145452">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8145486">,</span>&nbsp;<span class="ident" id="8145488">str</span><span class="op" id="8145491">,</span>&nbsp;<span class="ident" id="8145493">expected</span><span class="op" id="8145501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145504">}</span><br>
<span class="lineno"></span><span class="op" id="8145506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8145509">func</span>&nbsp;<span class="ident" id="8145514">TestSliceType</span><span class="op" id="8145527">(</span><span class="ident" id="8145528">t</span>&nbsp;<span class="op" id="8145530">*</span><span class="ident" id="8145531">testing</span><span class="op" id="8145538">.</span><span class="ident" id="8145539">T</span><span class="op" id="8145540">)</span>&nbsp;<span class="op" id="8145542">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145545">var</span>&nbsp;<span class="ident" id="8145549">s</span>&nbsp;<span class="op" id="8145551">[</span><span class="op" id="8145552">]</span><span class="builtintype" id="8145553">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145558">sint</span>&nbsp;<span class="op" id="8145563">:=</span>&nbsp;<span class="ident" id="8145566">getTypeUnlocked</span><span class="op" id="8145581">(</span><span class="string" id="8145582">&#34;slice&#34;</span><span class="op" id="8145589">,</span>&nbsp;<span class="ident" id="8145591">reflect</span><span class="op" id="8145598">.</span><span class="ident" id="8145599">TypeOf</span><span class="op" id="8145605">(</span><span class="ident" id="8145606">s</span><span class="op" id="8145607">)</span><span class="op" id="8145608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145611">var</span>&nbsp;<span class="ident" id="8145615">news</span>&nbsp;<span class="op" id="8145620">[</span><span class="op" id="8145621">]</span><span class="builtintype" id="8145622">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145627">newsint</span>&nbsp;<span class="op" id="8145635">:=</span>&nbsp;<span class="ident" id="8145638">getTypeUnlocked</span><span class="op" id="8145653">(</span><span class="string" id="8145654">&#34;slice1&#34;</span><span class="op" id="8145662">,</span>&nbsp;<span class="ident" id="8145664">reflect</span><span class="op" id="8145671">.</span><span class="ident" id="8145672">TypeOf</span><span class="op" id="8145678">(</span><span class="ident" id="8145679">news</span><span class="op" id="8145683">)</span><span class="op" id="8145684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145687">if</span>&nbsp;<span class="ident" id="8145690">sint</span>&nbsp;<span class="op" id="8145695">!=</span>&nbsp;<span class="ident" id="8145698">newsint</span>&nbsp;<span class="op" id="8145706">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145710">t</span><span class="op" id="8145711">.</span><span class="ident" id="8145712">Errorf</span><span class="op" id="8145718">(</span><span class="string" id="8145719">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8145766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145772">var</span>&nbsp;<span class="ident" id="8145776">b</span>&nbsp;<span class="op" id="8145778">[</span><span class="op" id="8145779">]</span><span class="builtintype" id="8145780">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145786">sbool</span>&nbsp;<span class="op" id="8145792">:=</span>&nbsp;<span class="ident" id="8145795">getTypeUnlocked</span><span class="op" id="8145810">(</span><span class="string" id="8145811">&#34;&#34;</span><span class="op" id="8145813">,</span>&nbsp;<span class="ident" id="8145815">reflect</span><span class="op" id="8145822">.</span><span class="ident" id="8145823">TypeOf</span><span class="op" id="8145829">(</span><span class="ident" id="8145830">b</span><span class="op" id="8145831">)</span><span class="op" id="8145832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145835">if</span>&nbsp;<span class="ident" id="8145838">sbool</span>&nbsp;<span class="op" id="8145844">==</span>&nbsp;<span class="ident" id="8145847">sint</span>&nbsp;<span class="op" id="8145852">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145856">t</span><span class="op" id="8145857">.</span><span class="ident" id="8145858">Errorf</span><span class="op" id="8145864">(</span><span class="string" id="8145865">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="8145916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145922">str</span>&nbsp;<span class="op" id="8145926">:=</span>&nbsp;<span class="ident" id="8145929">sbool</span><span class="op" id="8145934">.</span><span class="builtintype" id="8145935">string</span><span class="op" id="8145941">(</span><span class="op" id="8145942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145945">expected</span>&nbsp;<span class="op" id="8145954">:=</span>&nbsp;<span class="string" id="8145957">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145967">if</span>&nbsp;<span class="ident" id="8145970">str</span>&nbsp;<span class="op" id="8145974">!=</span>&nbsp;<span class="ident" id="8145977">expected</span>&nbsp;<span class="op" id="8145986">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145990">t</span><span class="op" id="8145991">.</span><span class="ident" id="8145992">Errorf</span><span class="op" id="8145998">(</span><span class="string" id="8145999">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8146033">,</span>&nbsp;<span class="ident" id="8146035">str</span><span class="op" id="8146038">,</span>&nbsp;<span class="ident" id="8146040">expected</span><span class="op" id="8146048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146051">}</span><br>
<span class="lineno"></span><span class="op" id="8146053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146056">func</span>&nbsp;<span class="ident" id="8146061">TestMapType</span><span class="op" id="8146072">(</span><span class="ident" id="8146073">t</span>&nbsp;<span class="op" id="8146075">*</span><span class="ident" id="8146076">testing</span><span class="op" id="8146083">.</span><span class="ident" id="8146084">T</span><span class="op" id="8146085">)</span>&nbsp;<span class="op" id="8146087">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146090">var</span>&nbsp;<span class="ident" id="8146094">m</span>&nbsp;<span class="keyword" id="8146096">map</span><span class="op" id="8146099">[</span><span class="builtintype" id="8146100">string</span><span class="op" id="8146106">]</span><span class="builtintype" id="8146107">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146112">mapStringInt</span>&nbsp;<span class="op" id="8146125">:=</span>&nbsp;<span class="ident" id="8146128">getTypeUnlocked</span><span class="op" id="8146143">(</span><span class="string" id="8146144">&#34;map&#34;</span><span class="op" id="8146149">,</span>&nbsp;<span class="ident" id="8146151">reflect</span><span class="op" id="8146158">.</span><span class="ident" id="8146159">TypeOf</span><span class="op" id="8146165">(</span><span class="ident" id="8146166">m</span><span class="op" id="8146167">)</span><span class="op" id="8146168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146171">var</span>&nbsp;<span class="ident" id="8146175">newm</span>&nbsp;<span class="keyword" id="8146180">map</span><span class="op" id="8146183">[</span><span class="builtintype" id="8146184">string</span><span class="op" id="8146190">]</span><span class="builtintype" id="8146191">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146196">newMapStringInt</span>&nbsp;<span class="op" id="8146212">:=</span>&nbsp;<span class="ident" id="8146215">getTypeUnlocked</span><span class="op" id="8146230">(</span><span class="string" id="8146231">&#34;map1&#34;</span><span class="op" id="8146237">,</span>&nbsp;<span class="ident" id="8146239">reflect</span><span class="op" id="8146246">.</span><span class="ident" id="8146247">TypeOf</span><span class="op" id="8146253">(</span><span class="ident" id="8146254">newm</span><span class="op" id="8146258">)</span><span class="op" id="8146259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146262">if</span>&nbsp;<span class="ident" id="8146265">mapStringInt</span>&nbsp;<span class="op" id="8146278">!=</span>&nbsp;<span class="ident" id="8146281">newMapStringInt</span>&nbsp;<span class="op" id="8146297">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146301">t</span><span class="op" id="8146302">.</span><span class="ident" id="8146303">Errorf</span><span class="op" id="8146309">(</span><span class="string" id="8146310">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8146366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146372">var</span>&nbsp;<span class="ident" id="8146376">b</span>&nbsp;<span class="keyword" id="8146378">map</span><span class="op" id="8146381">[</span><span class="builtintype" id="8146382">string</span><span class="op" id="8146388">]</span><span class="builtintype" id="8146389">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146395">mapStringBool</span>&nbsp;<span class="op" id="8146409">:=</span>&nbsp;<span class="ident" id="8146412">getTypeUnlocked</span><span class="op" id="8146427">(</span><span class="string" id="8146428">&#34;&#34;</span><span class="op" id="8146430">,</span>&nbsp;<span class="ident" id="8146432">reflect</span><span class="op" id="8146439">.</span><span class="ident" id="8146440">TypeOf</span><span class="op" id="8146446">(</span><span class="ident" id="8146447">b</span><span class="op" id="8146448">)</span><span class="op" id="8146449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146452">if</span>&nbsp;<span class="ident" id="8146455">mapStringBool</span>&nbsp;<span class="op" id="8146469">==</span>&nbsp;<span class="ident" id="8146472">mapStringInt</span>&nbsp;<span class="op" id="8146485">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146489">t</span><span class="op" id="8146490">.</span><span class="ident" id="8146491">Errorf</span><span class="op" id="8146497">(</span><span class="string" id="8146498">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="8146567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146573">str</span>&nbsp;<span class="op" id="8146577">:=</span>&nbsp;<span class="ident" id="8146580">mapStringBool</span><span class="op" id="8146593">.</span><span class="builtintype" id="8146594">string</span><span class="op" id="8146600">(</span><span class="op" id="8146601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146604">expected</span>&nbsp;<span class="op" id="8146613">:=</span>&nbsp;<span class="string" id="8146616">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146635">if</span>&nbsp;<span class="ident" id="8146638">str</span>&nbsp;<span class="op" id="8146642">!=</span>&nbsp;<span class="ident" id="8146645">expected</span>&nbsp;<span class="op" id="8146654">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146658">t</span><span class="op" id="8146659">.</span><span class="ident" id="8146660">Errorf</span><span class="op" id="8146666">(</span><span class="string" id="8146667">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8146699">,</span>&nbsp;<span class="ident" id="8146701">str</span><span class="op" id="8146704">,</span>&nbsp;<span class="ident" id="8146706">expected</span><span class="op" id="8146714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146717">}</span><br>
<span class="lineno"></span><span class="op" id="8146719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146722">type</span>&nbsp;<span class="ident" id="8146727">Bar</span>&nbsp;<span class="keyword" id="8146731">struct</span>&nbsp;<span class="op" id="8146738">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146741">X</span>&nbsp;<span class="builtintype" id="8146743">string</span><br>
<span class="lineno"></span><span class="op" id="8146750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8146753">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="8146834">type</span>&nbsp;<span class="ident" id="8146839">Foo</span>&nbsp;<span class="keyword" id="8146843">struct</span>&nbsp;<span class="op" id="8146850">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146853">A</span>&nbsp;<span class="builtintype" id="8146855">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146860">B</span>&nbsp;<span class="builtintype" id="8146862">int32</span>&nbsp;<span class="comment" id="8146868">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146888">C</span>&nbsp;<span class="builtintype" id="8146890">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146898">D</span>&nbsp;<span class="op" id="8146900">[</span><span class="op" id="8146901">]</span><span class="builtintype" id="8146902">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146908">E</span>&nbsp;<span class="op" id="8146910">*</span><span class="builtintype" id="8146911">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8146922">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146946">F</span>&nbsp;<span class="op" id="8146948">*</span><span class="op" id="8146949">*</span><span class="op" id="8146950">*</span><span class="op" id="8146951">*</span><span class="builtintype" id="8146952">float64</span>&nbsp;<span class="comment" id="8146960">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146984">G</span>&nbsp;<span class="op" id="8146986">*</span><span class="ident" id="8146987">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146992">H</span>&nbsp;<span class="op" id="8146994">*</span><span class="ident" id="8146995">Bar</span>&nbsp;<span class="comment" id="8146999">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147054">I</span>&nbsp;<span class="op" id="8147056">*</span><span class="ident" id="8147057">Foo</span>&nbsp;<span class="comment" id="8147061">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="8147081">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="8147084">func</span>&nbsp;<span class="ident" id="8147089">TestStructType</span><span class="op" id="8147103">(</span><span class="ident" id="8147104">t</span>&nbsp;<span class="op" id="8147106">*</span><span class="ident" id="8147107">testing</span><span class="op" id="8147114">.</span><span class="ident" id="8147115">T</span><span class="op" id="8147116">)</span>&nbsp;<span class="op" id="8147118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147121">sstruct</span>&nbsp;<span class="op" id="8147129">:=</span>&nbsp;<span class="ident" id="8147132">getTypeUnlocked</span><span class="op" id="8147147">(</span><span class="string" id="8147148">&#34;Foo&#34;</span><span class="op" id="8147153">,</span>&nbsp;<span class="ident" id="8147155">reflect</span><span class="op" id="8147162">.</span><span class="ident" id="8147163">TypeOf</span><span class="op" id="8147169">(</span><span class="ident" id="8147170">Foo</span><span class="op" id="8147173">{</span><span class="op" id="8147174">}</span><span class="op" id="8147175">)</span><span class="op" id="8147176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147179">str</span>&nbsp;<span class="op" id="8147183">:=</span>&nbsp;<span class="ident" id="8147186">sstruct</span><span class="op" id="8147193">.</span><span class="builtintype" id="8147194">string</span><span class="op" id="8147200">(</span><span class="op" id="8147201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8147204">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147261">expected</span>&nbsp;<span class="op" id="8147270">:=</span>&nbsp;<span class="string" id="8147273">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147388">if</span>&nbsp;<span class="ident" id="8147391">str</span>&nbsp;<span class="op" id="8147395">!=</span>&nbsp;<span class="ident" id="8147398">expected</span>&nbsp;<span class="op" id="8147407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147411">t</span><span class="op" id="8147412">.</span><span class="ident" id="8147413">Errorf</span><span class="op" id="8147419">(</span><span class="string" id="8147420">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8147455">,</span>&nbsp;<span class="ident" id="8147457">str</span><span class="op" id="8147460">,</span>&nbsp;<span class="ident" id="8147462">expected</span><span class="op" id="8147470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147473">}</span><br>
<span class="lineno"></span><span class="op" id="8147475">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="8147478">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="8147555">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="8147592">func</span>&nbsp;<span class="ident" id="8147597">TestRegistration</span><span class="op" id="8147613">(</span><span class="ident" id="8147614">t</span>&nbsp;<span class="op" id="8147616">*</span><span class="ident" id="8147617">testing</span><span class="op" id="8147624">.</span><span class="ident" id="8147625">T</span><span class="op" id="8147626">)</span>&nbsp;<span class="op" id="8147628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147631">type</span>&nbsp;<span class="ident" id="8147636">T</span>&nbsp;<span class="keyword" id="8147638">struct</span><span class="op" id="8147644">{</span>&nbsp;<span class="ident" id="8147646">a</span>&nbsp;<span class="builtintype" id="8147648">int</span>&nbsp;<span class="op" id="8147652">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147655">Register</span><span class="op" id="8147663">(</span><span class="builtinfunc" id="8147664">new</span><span class="op" id="8147667">(</span><span class="ident" id="8147668">T</span><span class="op" id="8147669">)</span><span class="op" id="8147670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147673">Register</span><span class="op" id="8147681">(</span><span class="builtinfunc" id="8147682">new</span><span class="op" id="8147685">(</span><span class="ident" id="8147686">T</span><span class="op" id="8147687">)</span><span class="op" id="8147688">)</span><br>
<span class="lineno"></span><span class="op" id="8147690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8147693">type</span>&nbsp;<span class="ident" id="8147698">N1</span>&nbsp;<span class="keyword" id="8147701">struct</span><span class="op" id="8147707">{</span><span class="op" id="8147708">}</span><br>
<span class="lineno">165</span><span class="keyword" id="8147710">type</span>&nbsp;<span class="ident" id="8147715">N2</span>&nbsp;<span class="keyword" id="8147718">struct</span><span class="op" id="8147724">{</span><span class="op" id="8147725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8147728">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="8147764">func</span>&nbsp;<span class="ident" id="8147769">TestRegistrationNaming</span><span class="op" id="8147791">(</span><span class="ident" id="8147792">t</span>&nbsp;<span class="op" id="8147794">*</span><span class="ident" id="8147795">testing</span><span class="op" id="8147802">.</span><span class="ident" id="8147803">T</span><span class="op" id="8147804">)</span>&nbsp;<span class="op" id="8147806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147809">testCases</span>&nbsp;<span class="op" id="8147819">:=</span>&nbsp;<span class="op" id="8147822">[</span><span class="op" id="8147823">]</span><span class="keyword" id="8147824">struct</span>&nbsp;<span class="op" id="8147831">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147835">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8147840">interface</span><span class="op" id="8147849">{</span><span class="op" id="8147850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147854">name</span>&nbsp;<span class="builtintype" id="8147859">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147867">}</span><span class="op" id="8147868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147872">{</span><span class="op" id="8147873">&amp;</span><span class="ident" id="8147874">N1</span><span class="op" id="8147876">{</span><span class="op" id="8147877">}</span><span class="op" id="8147878">,</span>&nbsp;<span class="string" id="8147880">&#34;*gob.N1&#34;</span><span class="op" id="8147889">}</span><span class="op" id="8147890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147894">{</span><span class="ident" id="8147895">N2</span><span class="op" id="8147897">{</span><span class="op" id="8147898">}</span><span class="op" id="8147899">,</span>&nbsp;<span class="string" id="8147901">&#34;encoding/gob.N2&#34;</span><span class="op" id="8147918">}</span><span class="op" id="8147919">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147926">for</span>&nbsp;<span class="ident" id="8147930">_</span><span class="op" id="8147931">,</span>&nbsp;<span class="ident" id="8147933">tc</span>&nbsp;<span class="op" id="8147936">:=</span>&nbsp;<span class="keyword" id="8147939">range</span>&nbsp;<span class="ident" id="8147945">testCases</span>&nbsp;<span class="op" id="8147955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147959">Register</span><span class="op" id="8147967">(</span><span class="ident" id="8147968">tc</span><span class="op" id="8147970">.</span><span class="ident" id="8147971">t</span><span class="op" id="8147972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147977">tct</span>&nbsp;<span class="op" id="8147981">:=</span>&nbsp;<span class="ident" id="8147984">reflect</span><span class="op" id="8147991">.</span><span class="ident" id="8147992">TypeOf</span><span class="op" id="8147998">(</span><span class="ident" id="8147999">tc</span><span class="op" id="8148001">.</span><span class="ident" id="8148002">t</span><span class="op" id="8148003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148007">registerLock</span><span class="op" id="8148019">.</span><span class="ident" id="8148020">RLock</span><span class="op" id="8148025">(</span><span class="op" id="8148026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148030">ct</span>&nbsp;<span class="op" id="8148033">:=</span>&nbsp;<span class="ident" id="8148036">nameToConcreteType</span><span class="op" id="8148054">[</span><span class="ident" id="8148055">tc</span><span class="op" id="8148057">.</span><span class="ident" id="8148058">name</span><span class="op" id="8148062">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148066">registerLock</span><span class="op" id="8148078">.</span><span class="ident" id="8148079">RUnlock</span><span class="op" id="8148086">(</span><span class="op" id="8148087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148091">if</span>&nbsp;<span class="ident" id="8148094">ct</span>&nbsp;<span class="op" id="8148097">!=</span>&nbsp;<span class="ident" id="8148100">tct</span>&nbsp;<span class="op" id="8148104">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148109">t</span><span class="op" id="8148110">.</span><span class="ident" id="8148111">Errorf</span><span class="op" id="8148117">(</span><span class="string" id="8148118">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8148156">,</span>&nbsp;<span class="ident" id="8148158">tc</span><span class="op" id="8148160">.</span><span class="ident" id="8148161">name</span><span class="op" id="8148165">,</span>&nbsp;<span class="ident" id="8148167">ct</span><span class="op" id="8148169">,</span>&nbsp;<span class="ident" id="8148171">tct</span><span class="op" id="8148174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8148182">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148234">if</span>&nbsp;<span class="ident" id="8148237">tct</span><span class="op" id="8148240">.</span><span class="ident" id="8148241">Kind</span><span class="op" id="8148245">(</span><span class="op" id="8148246">)</span>&nbsp;<span class="op" id="8148248">==</span>&nbsp;<span class="ident" id="8148251">reflect</span><span class="op" id="8148258">.</span><span class="ident" id="8148259">Ptr</span>&nbsp;<span class="op" id="8148263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148268">tct</span>&nbsp;<span class="op" id="8148272">=</span>&nbsp;<span class="ident" id="8148274">tct</span><span class="op" id="8148277">.</span><span class="ident" id="8148278">Elem</span><span class="op" id="8148282">(</span><span class="op" id="8148283">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148291">if</span>&nbsp;<span class="ident" id="8148294">n</span>&nbsp;<span class="op" id="8148296">:=</span>&nbsp;<span class="ident" id="8148299">concreteTypeToName</span><span class="op" id="8148317">[</span><span class="ident" id="8148318">tct</span><span class="op" id="8148321">]</span><span class="op" id="8148322">;</span>&nbsp;<span class="ident" id="8148324">n</span>&nbsp;<span class="op" id="8148326">!=</span>&nbsp;<span class="ident" id="8148329">tc</span><span class="op" id="8148331">.</span><span class="ident" id="8148332">name</span>&nbsp;<span class="op" id="8148337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148342">t</span><span class="op" id="8148343">.</span><span class="ident" id="8148344">Errorf</span><span class="op" id="8148350">(</span><span class="string" id="8148351">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8148391">,</span>&nbsp;<span class="ident" id="8148393">tct</span><span class="op" id="8148396">,</span>&nbsp;<span class="ident" id="8148398">n</span><span class="op" id="8148399">,</span>&nbsp;<span class="ident" id="8148401">tc</span><span class="op" id="8148403">.</span><span class="ident" id="8148404">name</span><span class="op" id="8148408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148415">}</span><br>
<span class="lineno">195</span><span class="op" id="8148417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8148420">func</span>&nbsp;<span class="ident" id="8148425">TestStressParallel</span><span class="op" id="8148443">(</span><span class="ident" id="8148444">t</span>&nbsp;<span class="op" id="8148446">*</span><span class="ident" id="8148447">testing</span><span class="op" id="8148454">.</span><span class="ident" id="8148455">T</span><span class="op" id="8148456">)</span>&nbsp;<span class="op" id="8148458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148461">type</span>&nbsp;<span class="ident" id="8148466">T2</span>&nbsp;<span class="keyword" id="8148469">struct</span><span class="op" id="8148475">{</span>&nbsp;<span class="ident" id="8148477">A</span>&nbsp;<span class="builtintype" id="8148479">int</span>&nbsp;<span class="op" id="8148483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148486">c</span>&nbsp;<span class="op" id="8148488">:=</span>&nbsp;<span class="builtinfunc" id="8148491">make</span><span class="op" id="8148495">(</span><span class="keyword" id="8148496">chan</span>&nbsp;<span class="builtintype" id="8148501">bool</span><span class="op" id="8148505">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148508">const</span>&nbsp;<span class="ident" id="8148514">N</span>&nbsp;<span class="op" id="8148516">=</span>&nbsp;<span class="num" id="8148518">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148522">for</span>&nbsp;<span class="ident" id="8148526">i</span>&nbsp;<span class="op" id="8148528">:=</span>&nbsp;<span class="num" id="8148531">0</span><span class="op" id="8148532">;</span>&nbsp;<span class="ident" id="8148534">i</span>&nbsp;<span class="op" id="8148536">&lt;</span>&nbsp;<span class="ident" id="8148538">N</span><span class="op" id="8148539">;</span>&nbsp;<span class="ident" id="8148541">i</span><span class="op" id="8148542">++</span>&nbsp;<span class="op" id="8148545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148549">go</span>&nbsp;<span class="keyword" id="8148552">func</span><span class="op" id="8148556">(</span><span class="op" id="8148557">)</span>&nbsp;<span class="op" id="8148559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148564">p</span>&nbsp;<span class="op" id="8148566">:=</span>&nbsp;<span class="builtinfunc" id="8148569">new</span><span class="op" id="8148572">(</span><span class="ident" id="8148573">T2</span><span class="op" id="8148575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148580">Register</span><span class="op" id="8148588">(</span><span class="ident" id="8148589">p</span><span class="op" id="8148590">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148595">b</span>&nbsp;<span class="op" id="8148597">:=</span>&nbsp;<span class="builtinfunc" id="8148600">new</span><span class="op" id="8148603">(</span><span class="ident" id="8148604">bytes</span><span class="op" id="8148609">.</span><span class="ident" id="8148610">Buffer</span><span class="op" id="8148616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148621">enc</span>&nbsp;<span class="op" id="8148625">:=</span>&nbsp;<span class="ident" id="8148628">NewEncoder</span><span class="op" id="8148638">(</span><span class="ident" id="8148639">b</span><span class="op" id="8148640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148645">err</span>&nbsp;<span class="op" id="8148649">:=</span>&nbsp;<span class="ident" id="8148652">enc</span><span class="op" id="8148655">.</span><span class="ident" id="8148656">Encode</span><span class="op" id="8148662">(</span><span class="ident" id="8148663">p</span><span class="op" id="8148664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148669">if</span>&nbsp;<span class="ident" id="8148672">err</span>&nbsp;<span class="op" id="8148676">!=</span>&nbsp;<span class="ident" id="8148679">nil</span>&nbsp;<span class="op" id="8148683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148689">t</span><span class="op" id="8148690">.</span><span class="ident" id="8148691">Error</span><span class="op" id="8148696">(</span><span class="string" id="8148697">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8148712">,</span>&nbsp;<span class="ident" id="8148714">err</span><span class="op" id="8148717">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148727">dec</span>&nbsp;<span class="op" id="8148731">:=</span>&nbsp;<span class="ident" id="8148734">NewDecoder</span><span class="op" id="8148744">(</span><span class="ident" id="8148745">b</span><span class="op" id="8148746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148751">err</span>&nbsp;<span class="op" id="8148755">=</span>&nbsp;<span class="ident" id="8148757">dec</span><span class="op" id="8148760">.</span><span class="ident" id="8148761">Decode</span><span class="op" id="8148767">(</span><span class="ident" id="8148768">p</span><span class="op" id="8148769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148774">if</span>&nbsp;<span class="ident" id="8148777">err</span>&nbsp;<span class="op" id="8148781">!=</span>&nbsp;<span class="ident" id="8148784">nil</span>&nbsp;<span class="op" id="8148788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148794">t</span><span class="op" id="8148795">.</span><span class="ident" id="8148796">Error</span><span class="op" id="8148801">(</span><span class="string" id="8148802">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="8148817">,</span>&nbsp;<span class="ident" id="8148819">err</span><span class="op" id="8148822">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148832">c</span>&nbsp;<span class="op" id="8148834">&lt;-</span>&nbsp;<span class="builtintype" id="8148837">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148844">}</span><span class="op" id="8148845">(</span><span class="op" id="8148846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148852">for</span>&nbsp;<span class="ident" id="8148856">i</span>&nbsp;<span class="op" id="8148858">:=</span>&nbsp;<span class="num" id="8148861">0</span><span class="op" id="8148862">;</span>&nbsp;<span class="ident" id="8148864">i</span>&nbsp;<span class="op" id="8148866">&lt;</span>&nbsp;<span class="ident" id="8148868">N</span><span class="op" id="8148869">;</span>&nbsp;<span class="ident" id="8148871">i</span><span class="op" id="8148872">++</span>&nbsp;<span class="op" id="8148875">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148879">&lt;-</span><span class="ident" id="8148881">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8148884">}</span><br>
<span class="lineno"></span><span class="op" id="8148886">}</span>
</div>
</body>
</html>
