<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html" class="current">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3661056">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3661111">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3661165">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3661216">package</span>&nbsp;<span class="ident" id="3661224">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3661235">import</span>&nbsp;<span class="op" id="3661242">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3661245">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3661254">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3661264">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3661270">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3661283">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3661300">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3661305">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3661308">//&nbsp;TODO(adg,bradfitz):&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;unify&nbsp;the&nbsp;DoS-prevention&nbsp;strategy&nbsp;here</span><br>
<span class="lineno"></span><span class="comment" id="3661384">//&nbsp;with&nbsp;that&nbsp;of&nbsp;the&nbsp;http&nbsp;package&#39;s&nbsp;ParseForm.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3661431">//&nbsp;ReadForm&nbsp;parses&nbsp;an&nbsp;entire&nbsp;multipart&nbsp;message&nbsp;whose&nbsp;parts&nbsp;have</span><br>
<span class="lineno">20</span><span class="comment" id="3661495">//&nbsp;a&nbsp;Content-Disposition&nbsp;of&nbsp;&#34;form-data&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3661536">//&nbsp;It&nbsp;stores&nbsp;up&nbsp;to&nbsp;maxMemory&nbsp;bytes&nbsp;of&nbsp;the&nbsp;file&nbsp;parts&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span><span class="comment" id="3661599">//&nbsp;and&nbsp;the&nbsp;remainder&nbsp;on&nbsp;disk&nbsp;in&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="3661648">func</span>&nbsp;<span class="op" id="3661653">(</span><span class="ident" id="3661654">r</span>&nbsp;<span class="op" id="3661656">*</span><span class="ident" id="3661657">Reader</span><span class="op" id="3661663">)</span>&nbsp;<span class="ident" id="3661665">ReadForm</span><span class="op" id="3661673">(</span><span class="ident" id="3661674">maxMemory</span>&nbsp;<span class="ident" id="3661684">int64</span><span class="op" id="3661689">)</span>&nbsp;<span class="op" id="3661691">(</span><span class="ident" id="3661692">f</span>&nbsp;<span class="op" id="3661694">*</span><span class="ident" id="3661695">Form</span><span class="op" id="3661699">,</span>&nbsp;<span class="ident" id="3661701">err</span>&nbsp;<span class="builtintype" id="3661705">error</span><span class="op" id="3661710">)</span>&nbsp;<span class="op" id="3661712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3661715">form</span>&nbsp;<span class="op" id="3661720">:=</span>&nbsp;<span class="op" id="3661723">&amp;</span><span class="ident" id="3661724">Form</span><span class="op" id="3661728">{</span><span class="builtinfunc" id="3661729">make</span><span class="op" id="3661733">(</span><span class="keyword" id="3661734">map</span><span class="op" id="3661737">[</span><span class="builtintype" id="3661738">string</span><span class="op" id="3661744">]</span><span class="op" id="3661745">[</span><span class="op" id="3661746">]</span><span class="builtintype" id="3661747">string</span><span class="op" id="3661753">)</span><span class="op" id="3661754">,</span>&nbsp;<span class="builtinfunc" id="3661756">make</span><span class="op" id="3661760">(</span><span class="keyword" id="3661761">map</span><span class="op" id="3661764">[</span><span class="builtintype" id="3661765">string</span><span class="op" id="3661771">]</span><span class="op" id="3661772">[</span><span class="op" id="3661773">]</span><span class="op" id="3661774">*</span><span class="ident" id="3661775">FileHeader</span><span class="op" id="3661785">)</span><span class="op" id="3661786">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3661789">defer</span>&nbsp;<span class="keyword" id="3661795">func</span><span class="op" id="3661799">(</span><span class="op" id="3661800">)</span>&nbsp;<span class="op" id="3661802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3661806">if</span>&nbsp;<span class="ident" id="3661809">err</span>&nbsp;<span class="op" id="3661813">!=</span>&nbsp;<span class="ident" id="3661816">nil</span>&nbsp;<span class="op" id="3661820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3661825">form</span><span class="op" id="3661829">.</span><span class="ident" id="3661830">RemoveAll</span><span class="op" id="3661839">(</span><span class="op" id="3661840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3661844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3661847">}</span><span class="op" id="3661848">(</span><span class="op" id="3661849">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3661853">maxValueBytes</span>&nbsp;<span class="op" id="3661867">:=</span>&nbsp;<span class="ident" id="3661870">int64</span><span class="op" id="3661875">(</span><span class="num" id="3661876">10</span>&nbsp;<span class="op" id="3661879">&lt;&lt;</span>&nbsp;<span class="num" id="3661882">20</span><span class="op" id="3661884">)</span>&nbsp;<span class="comment" id="3661886">//&nbsp;10&nbsp;MB&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3661914">for</span>&nbsp;<span class="op" id="3661918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3661922">p</span><span class="op" id="3661923">,</span>&nbsp;<span class="ident" id="3661925">err</span>&nbsp;<span class="op" id="3661929">:=</span>&nbsp;<span class="ident" id="3661932">r</span><span class="op" id="3661933">.</span><span class="ident" id="3661934">NextPart</span><span class="op" id="3661942">(</span><span class="op" id="3661943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3661947">if</span>&nbsp;<span class="ident" id="3661950">err</span>&nbsp;<span class="op" id="3661954">==</span>&nbsp;<span class="ident" id="3661957">io</span><span class="op" id="3661959">.</span><span class="ident" id="3661960">EOF</span>&nbsp;<span class="op" id="3661964">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3661969">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3661977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3661981">if</span>&nbsp;<span class="ident" id="3661984">err</span>&nbsp;<span class="op" id="3661988">!=</span>&nbsp;<span class="ident" id="3661991">nil</span>&nbsp;<span class="op" id="3661995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662000">return</span>&nbsp;<span class="ident" id="3662007">nil</span><span class="op" id="3662010">,</span>&nbsp;<span class="ident" id="3662012">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662018">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662023">name</span>&nbsp;<span class="op" id="3662028">:=</span>&nbsp;<span class="ident" id="3662031">p</span><span class="op" id="3662032">.</span><span class="ident" id="3662033">FormName</span><span class="op" id="3662041">(</span><span class="op" id="3662042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662046">if</span>&nbsp;<span class="ident" id="3662049">name</span>&nbsp;<span class="op" id="3662054">==</span>&nbsp;<span class="string" id="3662057">&#34;&#34;</span>&nbsp;<span class="op" id="3662060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662065">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662076">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662080">filename</span>&nbsp;<span class="op" id="3662089">:=</span>&nbsp;<span class="ident" id="3662092">p</span><span class="op" id="3662093">.</span><span class="ident" id="3662094">FileName</span><span class="op" id="3662102">(</span><span class="op" id="3662103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662108">var</span>&nbsp;<span class="ident" id="3662112">b</span>&nbsp;<span class="ident" id="3662114">bytes</span><span class="op" id="3662119">.</span><span class="ident" id="3662120">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662130">if</span>&nbsp;<span class="ident" id="3662133">filename</span>&nbsp;<span class="op" id="3662142">==</span>&nbsp;<span class="string" id="3662145">&#34;&#34;</span>&nbsp;<span class="op" id="3662148">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3662153">//&nbsp;value,&nbsp;store&nbsp;as&nbsp;string&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662192">n</span><span class="op" id="3662193">,</span>&nbsp;<span class="ident" id="3662195">err</span>&nbsp;<span class="op" id="3662199">:=</span>&nbsp;<span class="ident" id="3662202">io</span><span class="op" id="3662204">.</span><span class="ident" id="3662205">CopyN</span><span class="op" id="3662210">(</span><span class="op" id="3662211">&amp;</span><span class="ident" id="3662212">b</span><span class="op" id="3662213">,</span>&nbsp;<span class="ident" id="3662215">p</span><span class="op" id="3662216">,</span>&nbsp;<span class="ident" id="3662218">maxValueBytes</span><span class="op" id="3662231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662236">if</span>&nbsp;<span class="ident" id="3662239">err</span>&nbsp;<span class="op" id="3662243">!=</span>&nbsp;<span class="ident" id="3662246">nil</span>&nbsp;<span class="op" id="3662250">&amp;&amp;</span>&nbsp;<span class="ident" id="3662253">err</span>&nbsp;<span class="op" id="3662257">!=</span>&nbsp;<span class="ident" id="3662260">io</span><span class="op" id="3662262">.</span><span class="ident" id="3662263">EOF</span>&nbsp;<span class="op" id="3662267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662273">return</span>&nbsp;<span class="ident" id="3662280">nil</span><span class="op" id="3662283">,</span>&nbsp;<span class="ident" id="3662285">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662292">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662297">maxValueBytes</span>&nbsp;<span class="op" id="3662311">-=</span>&nbsp;<span class="ident" id="3662314">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662319">if</span>&nbsp;<span class="ident" id="3662322">maxValueBytes</span>&nbsp;<span class="op" id="3662336">==</span>&nbsp;<span class="num" id="3662339">0</span>&nbsp;<span class="op" id="3662341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662347">return</span>&nbsp;<span class="ident" id="3662354">nil</span><span class="op" id="3662357">,</span>&nbsp;<span class="ident" id="3662359">errors</span><span class="op" id="3662365">.</span><span class="ident" id="3662366">New</span><span class="op" id="3662369">(</span><span class="string" id="3662370">&#34;multipart:&nbsp;message&nbsp;too&nbsp;large&#34;</span><span class="op" id="3662400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662410">form</span><span class="op" id="3662414">.</span><span class="ident" id="3662415">Value</span><span class="op" id="3662420">[</span><span class="ident" id="3662421">name</span><span class="op" id="3662425">]</span>&nbsp;<span class="op" id="3662427">=</span>&nbsp;<span class="builtinfunc" id="3662429">append</span><span class="op" id="3662435">(</span><span class="ident" id="3662436">form</span><span class="op" id="3662440">.</span><span class="ident" id="3662441">Value</span><span class="op" id="3662446">[</span><span class="ident" id="3662447">name</span><span class="op" id="3662451">]</span><span class="op" id="3662452">,</span>&nbsp;<span class="ident" id="3662454">b</span><span class="op" id="3662455">.</span><span class="ident" id="3662456">String</span><span class="op" id="3662462">(</span><span class="op" id="3662463">)</span><span class="op" id="3662464">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662469">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3662485">//&nbsp;file,&nbsp;store&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662523">fh</span>&nbsp;<span class="op" id="3662526">:=</span>&nbsp;<span class="op" id="3662529">&amp;</span><span class="ident" id="3662530">FileHeader</span><span class="op" id="3662540">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662545">Filename</span><span class="op" id="3662553">:</span>&nbsp;<span class="ident" id="3662555">filename</span><span class="op" id="3662563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662568">Header</span><span class="op" id="3662574">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3662578">p</span><span class="op" id="3662579">.</span><span class="ident" id="3662580">Header</span><span class="op" id="3662586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662594">n</span><span class="op" id="3662595">,</span>&nbsp;<span class="ident" id="3662597">err</span>&nbsp;<span class="op" id="3662601">:=</span>&nbsp;<span class="ident" id="3662604">io</span><span class="op" id="3662606">.</span><span class="ident" id="3662607">CopyN</span><span class="op" id="3662612">(</span><span class="op" id="3662613">&amp;</span><span class="ident" id="3662614">b</span><span class="op" id="3662615">,</span>&nbsp;<span class="ident" id="3662617">p</span><span class="op" id="3662618">,</span>&nbsp;<span class="ident" id="3662620">maxMemory</span><span class="op" id="3662629">+</span><span class="num" id="3662630">1</span><span class="op" id="3662631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662635">if</span>&nbsp;<span class="ident" id="3662638">err</span>&nbsp;<span class="op" id="3662642">!=</span>&nbsp;<span class="ident" id="3662645">nil</span>&nbsp;<span class="op" id="3662649">&amp;&amp;</span>&nbsp;<span class="ident" id="3662652">err</span>&nbsp;<span class="op" id="3662656">!=</span>&nbsp;<span class="ident" id="3662659">io</span><span class="op" id="3662661">.</span><span class="ident" id="3662662">EOF</span>&nbsp;<span class="op" id="3662666">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662671">return</span>&nbsp;<span class="ident" id="3662678">nil</span><span class="op" id="3662681">,</span>&nbsp;<span class="ident" id="3662683">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662693">if</span>&nbsp;<span class="ident" id="3662696">n</span>&nbsp;<span class="op" id="3662698">&gt;</span>&nbsp;<span class="ident" id="3662700">maxMemory</span>&nbsp;<span class="op" id="3662710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3662715">//&nbsp;too&nbsp;big,&nbsp;write&nbsp;to&nbsp;disk&nbsp;and&nbsp;flush&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662761">file</span><span class="op" id="3662765">,</span>&nbsp;<span class="ident" id="3662767">err</span>&nbsp;<span class="op" id="3662771">:=</span>&nbsp;<span class="ident" id="3662774">ioutil</span><span class="op" id="3662780">.</span><span class="ident" id="3662781">TempFile</span><span class="op" id="3662789">(</span><span class="string" id="3662790">&#34;&#34;</span><span class="op" id="3662792">,</span>&nbsp;<span class="string" id="3662794">&#34;multipart-&#34;</span><span class="op" id="3662806">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662811">if</span>&nbsp;<span class="ident" id="3662814">err</span>&nbsp;<span class="op" id="3662818">!=</span>&nbsp;<span class="ident" id="3662821">nil</span>&nbsp;<span class="op" id="3662825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662831">return</span>&nbsp;<span class="ident" id="3662838">nil</span><span class="op" id="3662841">,</span>&nbsp;<span class="ident" id="3662843">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662855">defer</span>&nbsp;<span class="ident" id="3662861">file</span><span class="op" id="3662865">.</span><span class="ident" id="3662866">Close</span><span class="op" id="3662871">(</span><span class="op" id="3662872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662877">_</span><span class="op" id="3662878">,</span>&nbsp;<span class="ident" id="3662880">err</span>&nbsp;<span class="op" id="3662884">=</span>&nbsp;<span class="ident" id="3662886">io</span><span class="op" id="3662888">.</span><span class="ident" id="3662889">Copy</span><span class="op" id="3662893">(</span><span class="ident" id="3662894">file</span><span class="op" id="3662898">,</span>&nbsp;<span class="ident" id="3662900">io</span><span class="op" id="3662902">.</span><span class="ident" id="3662903">MultiReader</span><span class="op" id="3662914">(</span><span class="op" id="3662915">&amp;</span><span class="ident" id="3662916">b</span><span class="op" id="3662917">,</span>&nbsp;<span class="ident" id="3662919">p</span><span class="op" id="3662920">)</span><span class="op" id="3662921">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662926">if</span>&nbsp;<span class="ident" id="3662929">err</span>&nbsp;<span class="op" id="3662933">!=</span>&nbsp;<span class="ident" id="3662936">nil</span>&nbsp;<span class="op" id="3662940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662946">os</span><span class="op" id="3662948">.</span><span class="ident" id="3662949">Remove</span><span class="op" id="3662955">(</span><span class="ident" id="3662956">file</span><span class="op" id="3662960">.</span><span class="ident" id="3662961">Name</span><span class="op" id="3662965">(</span><span class="op" id="3662966">)</span><span class="op" id="3662967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3662973">return</span>&nbsp;<span class="ident" id="3662980">nil</span><span class="op" id="3662983">,</span>&nbsp;<span class="ident" id="3662985">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3662992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3662997">fh</span><span class="op" id="3662999">.</span><span class="ident" id="3663000">tmpfile</span>&nbsp;<span class="op" id="3663008">=</span>&nbsp;<span class="ident" id="3663010">file</span><span class="op" id="3663014">.</span><span class="ident" id="3663015">Name</span><span class="op" id="3663019">(</span><span class="op" id="3663020">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3663024">}</span>&nbsp;<span class="keyword" id="3663026">else</span>&nbsp;<span class="op" id="3663031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663036">fh</span><span class="op" id="3663038">.</span><span class="ident" id="3663039">content</span>&nbsp;<span class="op" id="3663047">=</span>&nbsp;<span class="ident" id="3663049">b</span><span class="op" id="3663050">.</span><span class="ident" id="3663051">Bytes</span><span class="op" id="3663056">(</span><span class="op" id="3663057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663062">maxMemory</span>&nbsp;<span class="op" id="3663072">-=</span>&nbsp;<span class="ident" id="3663075">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3663079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663083">form</span><span class="op" id="3663087">.</span><span class="ident" id="3663088">File</span><span class="op" id="3663092">[</span><span class="ident" id="3663093">name</span><span class="op" id="3663097">]</span>&nbsp;<span class="op" id="3663099">=</span>&nbsp;<span class="builtinfunc" id="3663101">append</span><span class="op" id="3663107">(</span><span class="ident" id="3663108">form</span><span class="op" id="3663112">.</span><span class="ident" id="3663113">File</span><span class="op" id="3663117">[</span><span class="ident" id="3663118">name</span><span class="op" id="3663122">]</span><span class="op" id="3663123">,</span>&nbsp;<span class="ident" id="3663125">fh</span><span class="op" id="3663127">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3663130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3663134">return</span>&nbsp;<span class="ident" id="3663141">form</span><span class="op" id="3663145">,</span>&nbsp;<span class="ident" id="3663147">nil</span><br>
<span class="lineno"></span><span class="op" id="3663151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3663154">//&nbsp;Form&nbsp;is&nbsp;a&nbsp;parsed&nbsp;multipart&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3663190">//&nbsp;Its&nbsp;File&nbsp;parts&nbsp;are&nbsp;stored&nbsp;either&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk,</span><br>
<span class="lineno"></span><span class="comment" id="3663248">//&nbsp;and&nbsp;are&nbsp;accessible&nbsp;via&nbsp;the&nbsp;*FileHeader&#39;s&nbsp;Open&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="3663305">//&nbsp;Its&nbsp;Value&nbsp;parts&nbsp;are&nbsp;stored&nbsp;as&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="3663347">//&nbsp;Both&nbsp;are&nbsp;keyed&nbsp;by&nbsp;field&nbsp;name.</span><br>
<span class="lineno">100</span><span class="keyword" id="3663380">type</span>&nbsp;<span class="ident" id="3663385">Form</span>&nbsp;<span class="keyword" id="3663390">struct</span>&nbsp;<span class="op" id="3663397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663400">Value</span>&nbsp;<span class="keyword" id="3663406">map</span><span class="op" id="3663409">[</span><span class="builtintype" id="3663410">string</span><span class="op" id="3663416">]</span><span class="op" id="3663417">[</span><span class="op" id="3663418">]</span><span class="builtintype" id="3663419">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663427">File</span>&nbsp;&nbsp;<span class="keyword" id="3663433">map</span><span class="op" id="3663436">[</span><span class="builtintype" id="3663437">string</span><span class="op" id="3663443">]</span><span class="op" id="3663444">[</span><span class="op" id="3663445">]</span><span class="op" id="3663446">*</span><span class="ident" id="3663447">FileHeader</span><br>
<span class="lineno"></span><span class="op" id="3663458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3663461">//&nbsp;RemoveAll&nbsp;removes&nbsp;any&nbsp;temporary&nbsp;files&nbsp;associated&nbsp;with&nbsp;a&nbsp;Form.</span><br>
<span class="lineno"></span><span class="keyword" id="3663526">func</span>&nbsp;<span class="op" id="3663531">(</span><span class="ident" id="3663532">f</span>&nbsp;<span class="op" id="3663534">*</span><span class="ident" id="3663535">Form</span><span class="op" id="3663539">)</span>&nbsp;<span class="ident" id="3663541">RemoveAll</span><span class="op" id="3663550">(</span><span class="op" id="3663551">)</span>&nbsp;<span class="builtintype" id="3663553">error</span>&nbsp;<span class="op" id="3663559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3663562">var</span>&nbsp;<span class="ident" id="3663566">err</span>&nbsp;<span class="builtintype" id="3663570">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3663577">for</span>&nbsp;<span class="ident" id="3663581">_</span><span class="op" id="3663582">,</span>&nbsp;<span class="ident" id="3663584">fhs</span>&nbsp;<span class="op" id="3663588">:=</span>&nbsp;<span class="keyword" id="3663591">range</span>&nbsp;<span class="ident" id="3663597">f</span><span class="op" id="3663598">.</span><span class="ident" id="3663599">File</span>&nbsp;<span class="op" id="3663604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3663608">for</span>&nbsp;<span class="ident" id="3663612">_</span><span class="op" id="3663613">,</span>&nbsp;<span class="ident" id="3663615">fh</span>&nbsp;<span class="op" id="3663618">:=</span>&nbsp;<span class="keyword" id="3663621">range</span>&nbsp;<span class="ident" id="3663627">fhs</span>&nbsp;<span class="op" id="3663631">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3663636">if</span>&nbsp;<span class="ident" id="3663639">fh</span><span class="op" id="3663641">.</span><span class="ident" id="3663642">tmpfile</span>&nbsp;<span class="op" id="3663650">!=</span>&nbsp;<span class="string" id="3663653">&#34;&#34;</span>&nbsp;<span class="op" id="3663656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663662">e</span>&nbsp;<span class="op" id="3663664">:=</span>&nbsp;<span class="ident" id="3663667">os</span><span class="op" id="3663669">.</span><span class="ident" id="3663670">Remove</span><span class="op" id="3663676">(</span><span class="ident" id="3663677">fh</span><span class="op" id="3663679">.</span><span class="ident" id="3663680">tmpfile</span><span class="op" id="3663687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3663693">if</span>&nbsp;<span class="ident" id="3663696">e</span>&nbsp;<span class="op" id="3663698">!=</span>&nbsp;<span class="ident" id="3663701">nil</span>&nbsp;<span class="op" id="3663705">&amp;&amp;</span>&nbsp;<span class="ident" id="3663708">err</span>&nbsp;<span class="op" id="3663712">==</span>&nbsp;<span class="ident" id="3663715">nil</span>&nbsp;<span class="op" id="3663719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663726">err</span>&nbsp;<span class="op" id="3663730">=</span>&nbsp;<span class="ident" id="3663732">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3663738">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3663743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3663747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3663750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3663753">return</span>&nbsp;<span class="ident" id="3663760">err</span><br>
<span class="lineno"></span><span class="op" id="3663764">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3663767">//&nbsp;A&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="3663829">type</span>&nbsp;<span class="ident" id="3663834">FileHeader</span>&nbsp;<span class="keyword" id="3663845">struct</span>&nbsp;<span class="op" id="3663852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663855">Filename</span>&nbsp;<span class="builtintype" id="3663864">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663872">Header</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3663881">textproto</span><span class="op" id="3663890">.</span><span class="ident" id="3663891">MIMEHeader</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663904">content</span>&nbsp;<span class="op" id="3663912">[</span><span class="op" id="3663913">]</span><span class="builtintype" id="3663914">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3663920">tmpfile</span>&nbsp;<span class="builtintype" id="3663928">string</span><br>
<span class="lineno"></span><span class="op" id="3663935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="3663938">//&nbsp;Open&nbsp;opens&nbsp;and&nbsp;returns&nbsp;the&nbsp;FileHeader&#39;s&nbsp;associated&nbsp;File.</span><br>
<span class="lineno"></span><span class="keyword" id="3663998">func</span>&nbsp;<span class="op" id="3664003">(</span><span class="ident" id="3664004">fh</span>&nbsp;<span class="op" id="3664007">*</span><span class="ident" id="3664008">FileHeader</span><span class="op" id="3664018">)</span>&nbsp;<span class="ident" id="3664020">Open</span><span class="op" id="3664024">(</span><span class="op" id="3664025">)</span>&nbsp;<span class="op" id="3664027">(</span><span class="ident" id="3664028">File</span><span class="op" id="3664032">,</span>&nbsp;<span class="builtintype" id="3664034">error</span><span class="op" id="3664039">)</span>&nbsp;<span class="op" id="3664041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3664044">if</span>&nbsp;<span class="ident" id="3664047">b</span>&nbsp;<span class="op" id="3664049">:=</span>&nbsp;<span class="ident" id="3664052">fh</span><span class="op" id="3664054">.</span><span class="ident" id="3664055">content</span><span class="op" id="3664062">;</span>&nbsp;<span class="ident" id="3664064">b</span>&nbsp;<span class="op" id="3664066">!=</span>&nbsp;<span class="ident" id="3664069">nil</span>&nbsp;<span class="op" id="3664073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3664077">r</span>&nbsp;<span class="op" id="3664079">:=</span>&nbsp;<span class="ident" id="3664082">io</span><span class="op" id="3664084">.</span><span class="ident" id="3664085">NewSectionReader</span><span class="op" id="3664101">(</span><span class="ident" id="3664102">bytes</span><span class="op" id="3664107">.</span><span class="ident" id="3664108">NewReader</span><span class="op" id="3664117">(</span><span class="ident" id="3664118">b</span><span class="op" id="3664119">)</span><span class="op" id="3664120">,</span>&nbsp;<span class="num" id="3664122">0</span><span class="op" id="3664123">,</span>&nbsp;<span class="ident" id="3664125">int64</span><span class="op" id="3664130">(</span><span class="builtinfunc" id="3664131">len</span><span class="op" id="3664134">(</span><span class="ident" id="3664135">b</span><span class="op" id="3664136">)</span><span class="op" id="3664137">)</span><span class="op" id="3664138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3664142">return</span>&nbsp;<span class="ident" id="3664149">sectionReadCloser</span><span class="op" id="3664166">{</span><span class="ident" id="3664167">r</span><span class="op" id="3664168">}</span><span class="op" id="3664169">,</span>&nbsp;<span class="ident" id="3664171">nil</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3664176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3664179">return</span>&nbsp;<span class="ident" id="3664186">os</span><span class="op" id="3664188">.</span><span class="ident" id="3664189">Open</span><span class="op" id="3664193">(</span><span class="ident" id="3664194">fh</span><span class="op" id="3664196">.</span><span class="ident" id="3664197">tmpfile</span><span class="op" id="3664204">)</span><br>
<span class="lineno"></span><span class="op" id="3664206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3664209">//&nbsp;File&nbsp;is&nbsp;an&nbsp;interface&nbsp;to&nbsp;access&nbsp;the&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;message.</span><br>
<span class="lineno">140</span><span class="comment" id="3664281">//&nbsp;Its&nbsp;contents&nbsp;may&nbsp;be&nbsp;either&nbsp;stored&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk.</span><br>
<span class="lineno"></span><span class="comment" id="3664340">//&nbsp;If&nbsp;stored&nbsp;on&nbsp;disk,&nbsp;the&nbsp;File&#39;s&nbsp;underlying&nbsp;concrete&nbsp;type&nbsp;will&nbsp;be&nbsp;an&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="keyword" id="3664419">type</span>&nbsp;<span class="ident" id="3664424">File</span>&nbsp;<span class="keyword" id="3664429">interface</span>&nbsp;<span class="op" id="3664439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3664442">io</span><span class="op" id="3664444">.</span><span class="ident" id="3664445">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3664453">io</span><span class="op" id="3664455">.</span><span class="ident" id="3664456">ReaderAt</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3664466">io</span><span class="op" id="3664468">.</span><span class="ident" id="3664469">Seeker</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3664477">io</span><span class="op" id="3664479">.</span><span class="ident" id="3664480">Closer</span><br>
<span class="lineno"></span><span class="op" id="3664487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3664490">//&nbsp;helper&nbsp;types&nbsp;to&nbsp;turn&nbsp;a&nbsp;[]byte&nbsp;into&nbsp;a&nbsp;File</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3664536">type</span>&nbsp;<span class="ident" id="3664541">sectionReadCloser</span>&nbsp;<span class="keyword" id="3664559">struct</span>&nbsp;<span class="op" id="3664566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3664569">*</span><span class="ident" id="3664570">io</span><span class="op" id="3664572">.</span><span class="ident" id="3664573">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="3664587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="3664590">func</span>&nbsp;<span class="op" id="3664595">(</span><span class="ident" id="3664596">rc</span>&nbsp;<span class="ident" id="3664599">sectionReadCloser</span><span class="op" id="3664616">)</span>&nbsp;<span class="ident" id="3664618">Close</span><span class="op" id="3664623">(</span><span class="op" id="3664624">)</span>&nbsp;<span class="builtintype" id="3664626">error</span>&nbsp;<span class="op" id="3664632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3664635">return</span>&nbsp;<span class="ident" id="3664642">nil</span><br>
<span class="lineno"></span><span class="op" id="3664646">}</span>
</div>
</body>
</html>
