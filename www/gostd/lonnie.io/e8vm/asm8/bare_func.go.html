<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5079859">package</span>&nbsp;<span class="ident" id="5079867">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5079873">import</span>&nbsp;<span class="op" id="5079880">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5079883">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5079890">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5079913">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5079936">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="comment" id="5079939">//&nbsp;BuildBareFunc&nbsp;builds&nbsp;a&nbsp;function&nbsp;body&nbsp;into&nbsp;an&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5079994">func</span>&nbsp;<span class="ident" id="5079999">BuildBareFunc</span><span class="op" id="5080012">(</span><span class="ident" id="5080013">f</span>&nbsp;<span class="builtintype" id="5080015">string</span><span class="op" id="5080021">,</span>&nbsp;<span class="ident" id="5080023">rc</span>&nbsp;<span class="ident" id="5080026">io</span><span class="op" id="5080028">.</span><span class="ident" id="5080029">ReadCloser</span><span class="op" id="5080039">)</span>&nbsp;<span class="op" id="5080041">(</span><span class="op" id="5080042">[</span><span class="op" id="5080043">]</span><span class="builtintype" id="5080044">byte</span><span class="op" id="5080048">,</span>&nbsp;<span class="op" id="5080050">[</span><span class="op" id="5080051">]</span><span class="op" id="5080052">*</span><span class="ident" id="5080053">lex8</span><span class="op" id="5080057">.</span><span class="ident" id="5080058">Error</span><span class="op" id="5080063">)</span>&nbsp;<span class="op" id="5080065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080068">p</span>&nbsp;<span class="op" id="5080070">:=</span>&nbsp;<span class="ident" id="5080073">newParser</span><span class="op" id="5080082">(</span><span class="ident" id="5080083">f</span><span class="op" id="5080084">,</span>&nbsp;<span class="ident" id="5080086">rc</span><span class="op" id="5080088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080091">fn</span>&nbsp;<span class="op" id="5080094">:=</span>&nbsp;<span class="ident" id="5080097">parseBareFunc</span><span class="op" id="5080110">(</span><span class="ident" id="5080111">p</span><span class="op" id="5080112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080115">if</span>&nbsp;<span class="ident" id="5080118">es</span>&nbsp;<span class="op" id="5080121">:=</span>&nbsp;<span class="ident" id="5080124">p</span><span class="op" id="5080125">.</span><span class="ident" id="5080126">Errs</span><span class="op" id="5080130">(</span><span class="op" id="5080131">)</span><span class="op" id="5080132">;</span>&nbsp;<span class="ident" id="5080134">es</span>&nbsp;<span class="op" id="5080137">!=</span>&nbsp;<span class="ident" id="5080140">nil</span>&nbsp;<span class="op" id="5080144">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080148">return</span>&nbsp;<span class="ident" id="5080155">nil</span><span class="op" id="5080158">,</span>&nbsp;<span class="ident" id="5080160">es</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080168">b</span>&nbsp;<span class="op" id="5080170">:=</span>&nbsp;<span class="ident" id="5080173">newBuilder</span><span class="op" id="5080183">(</span><span class="op" id="5080184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080187">fobj</span>&nbsp;<span class="op" id="5080192">:=</span>&nbsp;<span class="ident" id="5080195">buildFunc</span><span class="op" id="5080204">(</span><span class="ident" id="5080205">b</span><span class="op" id="5080206">,</span>&nbsp;<span class="ident" id="5080208">fn</span><span class="op" id="5080210">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080213">if</span>&nbsp;<span class="ident" id="5080216">es</span>&nbsp;<span class="op" id="5080219">:=</span>&nbsp;<span class="ident" id="5080222">b</span><span class="op" id="5080223">.</span><span class="ident" id="5080224">Errs</span><span class="op" id="5080228">(</span><span class="op" id="5080229">)</span><span class="op" id="5080230">;</span>&nbsp;<span class="ident" id="5080232">es</span>&nbsp;<span class="op" id="5080235">!=</span>&nbsp;<span class="ident" id="5080238">nil</span>&nbsp;<span class="op" id="5080242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080246">return</span>&nbsp;<span class="ident" id="5080253">nil</span><span class="op" id="5080256">,</span>&nbsp;<span class="ident" id="5080258">es</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080266">ret</span><span class="op" id="5080269">,</span>&nbsp;<span class="ident" id="5080271">e</span>&nbsp;<span class="op" id="5080273">:=</span>&nbsp;<span class="ident" id="5080276">link8</span><span class="op" id="5080281">.</span><span class="ident" id="5080282">LinkBareFunc</span><span class="op" id="5080294">(</span><span class="ident" id="5080295">fobj</span><span class="op" id="5080299">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080302">if</span>&nbsp;<span class="ident" id="5080305">e</span>&nbsp;<span class="op" id="5080307">!=</span>&nbsp;<span class="ident" id="5080310">nil</span>&nbsp;<span class="op" id="5080314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080318">return</span>&nbsp;<span class="ident" id="5080325">nil</span><span class="op" id="5080328">,</span>&nbsp;<span class="ident" id="5080330">lex8</span><span class="op" id="5080334">.</span><span class="ident" id="5080335">SingleErr</span><span class="op" id="5080344">(</span><span class="ident" id="5080345">e</span><span class="op" id="5080346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080353">return</span>&nbsp;<span class="ident" id="5080360">ret</span><span class="op" id="5080363">,</span>&nbsp;<span class="ident" id="5080365">nil</span><br>
<span class="lineno">30</span><span class="op" id="5080369">}</span>
</div>
</body>
</html>
