<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/internal</h2>
<ul>
<li><a href="/gostd/net/http/internal/chunked.go.html" class="current">chunked.go</a></li>
<li><a href="/gostd/net/http/internal/chunked_test.go.html">chunked_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4772245">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4772300">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4772354">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4772405">//&nbsp;The&nbsp;wire&nbsp;protocol&nbsp;for&nbsp;HTTP&#39;s&nbsp;&#34;chunked&#34;&nbsp;Transfer-Encoding.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4772467">//&nbsp;Package&nbsp;internal&nbsp;contains&nbsp;HTTP&nbsp;internals&nbsp;shared&nbsp;by&nbsp;net/http&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4772534">//&nbsp;net/http/httputil.</span><br>
<span class="lineno"></span><span class="keyword" id="4772556">package</span>&nbsp;<span class="ident" id="4772564">internal</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4772574">import</span>&nbsp;<span class="op" id="4772581">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772584">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772593">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772602">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772612">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772619">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4772624">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4772627">const</span>&nbsp;<span class="ident" id="4772633">maxLineLength</span>&nbsp;<span class="op" id="4772647">=</span>&nbsp;<span class="num" id="4772649">4096</span>&nbsp;<span class="comment" id="4772654">//&nbsp;assumed&nbsp;&lt;=&nbsp;bufio.defaultBufSize</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4772690">var</span>&nbsp;<span class="ident" id="4772694">ErrLineTooLong</span>&nbsp;<span class="op" id="4772709">=</span>&nbsp;<span class="ident" id="4772711"><a href="/gostd/net/http/internal/chunked.go.html#4772602">errors</a></span><span class="op" id="4772717">.</span><span class="ident" id="4772718"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4772721">(</span><span class="string" id="4772722">&#34;header&nbsp;line&nbsp;too&nbsp;long&#34;</span><span class="op" id="4772744">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4772747">//&nbsp;NewChunkedReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;chunkedReader&nbsp;that&nbsp;translates&nbsp;the&nbsp;data&nbsp;read&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="4772832">//&nbsp;out&nbsp;of&nbsp;HTTP&nbsp;&#34;chunked&#34;&nbsp;format&nbsp;before&nbsp;returning&nbsp;it.</span><br>
<span class="lineno">25</span><span class="comment" id="4772885">//&nbsp;The&nbsp;chunkedReader&nbsp;returns&nbsp;io.EOF&nbsp;when&nbsp;the&nbsp;final&nbsp;0-length&nbsp;chunk&nbsp;is&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="4772960">//</span><br>
<span class="lineno"></span><span class="comment" id="4772963">//&nbsp;NewChunkedReader&nbsp;is&nbsp;not&nbsp;needed&nbsp;by&nbsp;normal&nbsp;applications.&nbsp;The&nbsp;http&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="4773038">//&nbsp;automatically&nbsp;decodes&nbsp;chunking&nbsp;when&nbsp;reading&nbsp;response&nbsp;bodies.</span><br>
<span class="lineno"></span><span class="keyword" id="4773102">func</span>&nbsp;<span class="ident" id="4773107">NewChunkedReader</span><span class="op" id="4773123">(</span><span class="ident" id="4773124">r</span>&nbsp;<span class="ident" id="4773126"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4773128">.</span><span class="ident" id="4773129"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="4773135">)</span>&nbsp;<span class="ident" id="4773137"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4773139">.</span><span class="ident" id="4773140"><a href="/gostd/io/io.go.html#1421823">Reader</a></span>&nbsp;<span class="op" id="4773147">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773150">br</span><span class="op" id="4773152">,</span>&nbsp;<span class="ident" id="4773154">ok</span>&nbsp;<span class="op" id="4773157">:=</span>&nbsp;<span class="ident" id="4773160"><a href="/gostd/net/http/internal/chunked.go.html#4773124">r</a></span><span class="op" id="4773161">.</span><span class="op" id="4773162">(</span><span class="op" id="4773163">*</span><span class="ident" id="4773164"><a href="/gostd/net/http/internal/chunked.go.html#4772584">bufio</a></span><span class="op" id="4773169">.</span><span class="ident" id="4773170"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="4773176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773179">if</span>&nbsp;<span class="op" id="4773182">!</span><span class="ident" id="4773183"><a href="/gostd/net/http/internal/chunked.go.html#4773154">ok</a></span>&nbsp;<span class="op" id="4773186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773190"><a href="/gostd/net/http/internal/chunked.go.html#4773150">br</a></span>&nbsp;<span class="op" id="4773193">=</span>&nbsp;<span class="ident" id="4773195"><a href="/gostd/net/http/internal/chunked.go.html#4772584">bufio</a></span><span class="op" id="4773200">.</span><span class="ident" id="4773201"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="4773210">(</span><span class="ident" id="4773211"><a href="/gostd/net/http/internal/chunked.go.html#4773124">r</a></span><span class="op" id="4773212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773218">return</span>&nbsp;<span class="op" id="4773225">&amp;</span><span class="ident" id="4773226"><a href="/gostd/net/http/internal/chunked.go.html#4773255">chunkedReader</a></span><span class="op" id="4773239">{</span><span class="ident" id="4773240"><a href="/gostd/net/http/internal/chunked.go.html#4773279">r</a></span><span class="op" id="4773241">:</span>&nbsp;<span class="ident" id="4773243"><a href="/gostd/net/http/internal/chunked.go.html#4773150">br</a></span><span class="op" id="4773245">}</span><br>
<span class="lineno">35</span><span class="op" id="4773247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4773250">type</span>&nbsp;<span class="ident" id="4773255">chunkedReader</span>&nbsp;<span class="keyword" id="4773269">struct</span>&nbsp;<span class="op" id="4773276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773279">r</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4773283">*</span><span class="ident" id="4773284"><a href="/gostd/net/http/internal/chunked.go.html#4772584">bufio</a></span><span class="op" id="4773289">.</span><span class="ident" id="4773290"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773298">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4773302">uint64</span>&nbsp;<span class="comment" id="4773309">//&nbsp;unread&nbsp;bytes&nbsp;in&nbsp;chunk</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773335">err</span>&nbsp;<span class="builtintype" id="4773339">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773346">buf</span>&nbsp;<span class="op" id="4773350">[</span><span class="num" id="4773351">2</span><span class="op" id="4773352">]</span><span class="builtintype" id="4773353">byte</span><br>
<span class="lineno"></span><span class="op" id="4773358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4773361">func</span>&nbsp;<span class="op" id="4773366">(</span><span class="ident" id="4773367">cr</span>&nbsp;<span class="op" id="4773370">*</span><span class="ident" id="4773371"><a href="/gostd/net/http/internal/chunked.go.html#4773255">chunkedReader</a></span><span class="op" id="4773384">)</span>&nbsp;<span class="ident" id="4773386">beginChunk</span><span class="op" id="4773396">(</span><span class="op" id="4773397">)</span>&nbsp;<span class="op" id="4773399">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4773402">//&nbsp;chunk-size&nbsp;CRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773422">var</span>&nbsp;<span class="ident" id="4773426">line</span>&nbsp;<span class="op" id="4773431">[</span><span class="op" id="4773432">]</span><span class="builtintype" id="4773433">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773439"><a href="/gostd/net/http/internal/chunked.go.html#4773426">line</a></span><span class="op" id="4773443">,</span>&nbsp;<span class="ident" id="4773445"><a href="/gostd/net/http/internal/chunked.go.html#4773367">cr</a></span><span class="op" id="4773447">.</span><span class="ident" id="4773448"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4773452">=</span>&nbsp;<span class="ident" id="4773454"><a href="/gostd/net/http/internal/chunked.go.html#4774798">readLine</a></span><span class="op" id="4773462">(</span><span class="ident" id="4773463"><a href="/gostd/net/http/internal/chunked.go.html#4773367">cr</a></span><span class="op" id="4773465">.</span><span class="ident" id="4773466"><a href="/gostd/net/http/internal/chunked.go.html#4773279">r</a></span><span class="op" id="4773467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773470">if</span>&nbsp;<span class="ident" id="4773473"><a href="/gostd/net/http/internal/chunked.go.html#4773367">cr</a></span><span class="op" id="4773475">.</span><span class="ident" id="4773476"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4773480">!=</span>&nbsp;<span class="builtintype" id="4773483">nil</span>&nbsp;<span class="op" id="4773487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773491">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773502"><a href="/gostd/net/http/internal/chunked.go.html#4773367">cr</a></span><span class="op" id="4773504">.</span><span class="ident" id="4773505"><a href="/gostd/net/http/internal/chunked.go.html#4773298">n</a></span><span class="op" id="4773506">,</span>&nbsp;<span class="ident" id="4773508"><a href="/gostd/net/http/internal/chunked.go.html#4773367">cr</a></span><span class="op" id="4773510">.</span><span class="ident" id="4773511"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4773515">=</span>&nbsp;<span class="ident" id="4773517"><a href="/gostd/net/http/internal/chunked.go.html#4776993">parseHexUint</a></span><span class="op" id="4773529">(</span><span class="ident" id="4773530"><a href="/gostd/net/http/internal/chunked.go.html#4773426">line</a></span><span class="op" id="4773534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773537">if</span>&nbsp;<span class="ident" id="4773540"><a href="/gostd/net/http/internal/chunked.go.html#4773367">cr</a></span><span class="op" id="4773542">.</span><span class="ident" id="4773543"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4773547">!=</span>&nbsp;<span class="builtintype" id="4773550">nil</span>&nbsp;<span class="op" id="4773554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773558">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773566">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773569">if</span>&nbsp;<span class="ident" id="4773572"><a href="/gostd/net/http/internal/chunked.go.html#4773367">cr</a></span><span class="op" id="4773574">.</span><span class="ident" id="4773575"><a href="/gostd/net/http/internal/chunked.go.html#4773298">n</a></span>&nbsp;<span class="op" id="4773577">==</span>&nbsp;<span class="num" id="4773580">0</span>&nbsp;<span class="op" id="4773582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773586"><a href="/gostd/net/http/internal/chunked.go.html#4773367">cr</a></span><span class="op" id="4773588">.</span><span class="ident" id="4773589"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4773593">=</span>&nbsp;<span class="ident" id="4773595"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4773597">.</span><span class="ident" id="4773598"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773603">}</span><br>
<span class="lineno"></span><span class="op" id="4773605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4773608">func</span>&nbsp;<span class="op" id="4773613">(</span><span class="ident" id="4773614">cr</span>&nbsp;<span class="op" id="4773617">*</span><span class="ident" id="4773618"><a href="/gostd/net/http/internal/chunked.go.html#4773255">chunkedReader</a></span><span class="op" id="4773631">)</span>&nbsp;<span class="ident" id="4773633">chunkHeaderAvailable</span><span class="op" id="4773653">(</span><span class="op" id="4773654">)</span>&nbsp;<span class="builtintype" id="4773656">bool</span>&nbsp;<span class="op" id="4773661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773664">n</span>&nbsp;<span class="op" id="4773666">:=</span>&nbsp;<span class="ident" id="4773669"><a href="/gostd/net/http/internal/chunked.go.html#4773614">cr</a></span><span class="op" id="4773671">.</span><span class="ident" id="4773672"><a href="/gostd/net/http/internal/chunked.go.html#4773279">r</a></span><span class="op" id="4773673">.</span><span class="ident" id="4773674"><a href="/gostd/bufio/bufio.go.html#1360477">Buffered</a></span><span class="op" id="4773682">(</span><span class="op" id="4773683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773686">if</span>&nbsp;<span class="ident" id="4773689"><a href="/gostd/net/http/internal/chunked.go.html#4773664">n</a></span>&nbsp;<span class="op" id="4773691">&gt;</span>&nbsp;<span class="num" id="4773693">0</span>&nbsp;<span class="op" id="4773695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773699">peek</span><span class="op" id="4773703">,</span>&nbsp;<span class="ident" id="4773705">_</span>&nbsp;<span class="op" id="4773707">:=</span>&nbsp;<span class="ident" id="4773710"><a href="/gostd/net/http/internal/chunked.go.html#4773614">cr</a></span><span class="op" id="4773712">.</span><span class="ident" id="4773713"><a href="/gostd/net/http/internal/chunked.go.html#4773279">r</a></span><span class="op" id="4773714">.</span><span class="ident" id="4773715"><a href="/gostd/bufio/bufio.go.html#1357192">Peek</a></span><span class="op" id="4773719">(</span><span class="ident" id="4773720"><a href="/gostd/net/http/internal/chunked.go.html#4773664">n</a></span><span class="op" id="4773721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773725">return</span>&nbsp;<span class="ident" id="4773732"><a href="/gostd/net/http/internal/chunked.go.html#4772593">bytes</a></span><span class="op" id="4773737">.</span><span class="ident" id="4773738"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="4773747">(</span><span class="ident" id="4773748"><a href="/gostd/net/http/internal/chunked.go.html#4773699">peek</a></span><span class="op" id="4773752">,</span>&nbsp;<span class="string" id="4773754">&#39;\n&#39;</span><span class="op" id="4773758">)</span>&nbsp;<span class="op" id="4773760">&gt;=</span>&nbsp;<span class="num" id="4773763">0</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773769">return</span>&nbsp;<span class="builtintype" id="4773776">false</span><br>
<span class="lineno"></span><span class="op" id="4773782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4773785">func</span>&nbsp;<span class="op" id="4773790">(</span><span class="ident" id="4773791">cr</span>&nbsp;<span class="op" id="4773794">*</span><span class="ident" id="4773795"><a href="/gostd/net/http/internal/chunked.go.html#4773255">chunkedReader</a></span><span class="op" id="4773808">)</span>&nbsp;<span class="ident" id="4773810">Read</span><span class="op" id="4773814">(</span><span class="ident" id="4773815">b</span>&nbsp;<span class="op" id="4773817">[</span><span class="op" id="4773818">]</span><span class="builtintype" id="4773819">uint8</span><span class="op" id="4773824">)</span>&nbsp;<span class="op" id="4773826">(</span><span class="ident" id="4773827">n</span>&nbsp;<span class="builtintype" id="4773829">int</span><span class="op" id="4773832">,</span>&nbsp;<span class="ident" id="4773834">err</span>&nbsp;<span class="builtintype" id="4773838">error</span><span class="op" id="4773843">)</span>&nbsp;<span class="op" id="4773845">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773848">for</span>&nbsp;<span class="ident" id="4773852"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4773854">.</span><span class="ident" id="4773855"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4773859">==</span>&nbsp;<span class="builtintype" id="4773862">nil</span>&nbsp;<span class="op" id="4773866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773870">if</span>&nbsp;<span class="ident" id="4773873"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4773875">.</span><span class="ident" id="4773876"><a href="/gostd/net/http/internal/chunked.go.html#4773298">n</a></span>&nbsp;<span class="op" id="4773878">==</span>&nbsp;<span class="num" id="4773881">0</span>&nbsp;<span class="op" id="4773883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773888">if</span>&nbsp;<span class="ident" id="4773891"><a href="/gostd/net/http/internal/chunked.go.html#4773827">n</a></span>&nbsp;<span class="op" id="4773893">&gt;</span>&nbsp;<span class="num" id="4773895">0</span>&nbsp;<span class="op" id="4773897">&amp;&amp;</span>&nbsp;<span class="op" id="4773900">!</span><span class="ident" id="4773901"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4773903">.</span><span class="ident" id="4773904"><a href="/gostd/net/http/internal/chunked.go.html#4773633">chunkHeaderAvailable</a></span><span class="op" id="4773924">(</span><span class="op" id="4773925">)</span>&nbsp;<span class="op" id="4773927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4773933">//&nbsp;We&#39;ve&nbsp;read&nbsp;enough.&nbsp;Don&#39;t&nbsp;potentially&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4773983">//&nbsp;reading&nbsp;a&nbsp;new&nbsp;chunk&nbsp;header.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774018">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774032"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774034">.</span><span class="ident" id="4774035"><a href="/gostd/net/http/internal/chunked.go.html#4773386">beginChunk</a></span><span class="op" id="4774045">(</span><span class="op" id="4774046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774051">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774062">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774066">if</span>&nbsp;<span class="builtinfunc" id="4774069">len</span><span class="op" id="4774072">(</span><span class="ident" id="4774073"><a href="/gostd/net/http/internal/chunked.go.html#4773815">b</a></span><span class="op" id="4774074">)</span>&nbsp;<span class="op" id="4774076">==</span>&nbsp;<span class="num" id="4774079">0</span>&nbsp;<span class="op" id="4774081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774086">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774098">rbuf</span>&nbsp;<span class="op" id="4774103">:=</span>&nbsp;<span class="ident" id="4774106"><a href="/gostd/net/http/internal/chunked.go.html#4773815">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774110">if</span>&nbsp;<span class="builtintype" id="4774113">uint64</span><span class="op" id="4774119">(</span><span class="builtinfunc" id="4774120">len</span><span class="op" id="4774123">(</span><span class="ident" id="4774124"><a href="/gostd/net/http/internal/chunked.go.html#4774098">rbuf</a></span><span class="op" id="4774128">)</span><span class="op" id="4774129">)</span>&nbsp;<span class="op" id="4774131">&gt;</span>&nbsp;<span class="ident" id="4774133"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774135">.</span><span class="ident" id="4774136"><a href="/gostd/net/http/internal/chunked.go.html#4773298">n</a></span>&nbsp;<span class="op" id="4774138">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774143"><a href="/gostd/net/http/internal/chunked.go.html#4774098">rbuf</a></span>&nbsp;<span class="op" id="4774148">=</span>&nbsp;<span class="ident" id="4774150"><a href="/gostd/net/http/internal/chunked.go.html#4774098">rbuf</a></span><span class="op" id="4774154">[</span><span class="op" id="4774155">:</span><span class="ident" id="4774156"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774158">.</span><span class="ident" id="4774159"><a href="/gostd/net/http/internal/chunked.go.html#4773298">n</a></span><span class="op" id="4774160">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774168">var</span>&nbsp;<span class="ident" id="4774172">n0</span>&nbsp;<span class="builtintype" id="4774175">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774181"><a href="/gostd/net/http/internal/chunked.go.html#4774172">n0</a></span><span class="op" id="4774183">,</span>&nbsp;<span class="ident" id="4774185"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774187">.</span><span class="ident" id="4774188"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4774192">=</span>&nbsp;<span class="ident" id="4774194"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774196">.</span><span class="ident" id="4774197"><a href="/gostd/net/http/internal/chunked.go.html#4773279">r</a></span><span class="op" id="4774198">.</span><span class="ident" id="4774199"><a href="/gostd/bufio/bufio.go.html#1357879">Read</a></span><span class="op" id="4774203">(</span><span class="ident" id="4774204"><a href="/gostd/net/http/internal/chunked.go.html#4774098">rbuf</a></span><span class="op" id="4774208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774212"><a href="/gostd/net/http/internal/chunked.go.html#4773827">n</a></span>&nbsp;<span class="op" id="4774214">+=</span>&nbsp;<span class="ident" id="4774217"><a href="/gostd/net/http/internal/chunked.go.html#4774172">n0</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774222"><a href="/gostd/net/http/internal/chunked.go.html#4773815">b</a></span>&nbsp;<span class="op" id="4774224">=</span>&nbsp;<span class="ident" id="4774226"><a href="/gostd/net/http/internal/chunked.go.html#4773815">b</a></span><span class="op" id="4774227">[</span><span class="ident" id="4774228"><a href="/gostd/net/http/internal/chunked.go.html#4774172">n0</a></span><span class="op" id="4774230">:</span><span class="op" id="4774231">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774235"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774237">.</span><span class="ident" id="4774238"><a href="/gostd/net/http/internal/chunked.go.html#4773298">n</a></span>&nbsp;<span class="op" id="4774240">-=</span>&nbsp;<span class="builtintype" id="4774243">uint64</span><span class="op" id="4774249">(</span><span class="ident" id="4774250"><a href="/gostd/net/http/internal/chunked.go.html#4774172">n0</a></span><span class="op" id="4774252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4774256">//&nbsp;If&nbsp;we&#39;re&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;chunk,&nbsp;read&nbsp;the&nbsp;next&nbsp;two</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4774311">//&nbsp;bytes&nbsp;to&nbsp;verify&nbsp;they&nbsp;are&nbsp;&#34;\r\n&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774349">if</span>&nbsp;<span class="ident" id="4774352"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774354">.</span><span class="ident" id="4774355"><a href="/gostd/net/http/internal/chunked.go.html#4773298">n</a></span>&nbsp;<span class="op" id="4774357">==</span>&nbsp;<span class="num" id="4774360">0</span>&nbsp;<span class="op" id="4774362">&amp;&amp;</span>&nbsp;<span class="ident" id="4774365"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774367">.</span><span class="ident" id="4774368"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4774372">==</span>&nbsp;<span class="builtintype" id="4774375">nil</span>&nbsp;<span class="op" id="4774379">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774384">if</span>&nbsp;<span class="ident" id="4774387">_</span><span class="op" id="4774388">,</span>&nbsp;<span class="ident" id="4774390"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774392">.</span><span class="ident" id="4774393"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4774397">=</span>&nbsp;<span class="ident" id="4774399"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4774401">.</span><span class="ident" id="4774402"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="4774410">(</span><span class="ident" id="4774411"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774413">.</span><span class="ident" id="4774414"><a href="/gostd/net/http/internal/chunked.go.html#4773279">r</a></span><span class="op" id="4774415">,</span>&nbsp;<span class="ident" id="4774417"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774419">.</span><span class="ident" id="4774420"><a href="/gostd/net/http/internal/chunked.go.html#4773346">buf</a></span><span class="op" id="4774423">[</span><span class="op" id="4774424">:</span><span class="num" id="4774425">2</span><span class="op" id="4774426">]</span><span class="op" id="4774427">)</span><span class="op" id="4774428">;</span>&nbsp;<span class="ident" id="4774430"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774432">.</span><span class="ident" id="4774433"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4774437">==</span>&nbsp;<span class="builtintype" id="4774440">nil</span>&nbsp;<span class="op" id="4774444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774450">if</span>&nbsp;<span class="ident" id="4774453"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774455">.</span><span class="ident" id="4774456"><a href="/gostd/net/http/internal/chunked.go.html#4773346">buf</a></span><span class="op" id="4774459">[</span><span class="num" id="4774460">0</span><span class="op" id="4774461">]</span>&nbsp;<span class="op" id="4774463">!=</span>&nbsp;<span class="string" id="4774466">&#39;\r&#39;</span>&nbsp;<span class="op" id="4774471">||</span>&nbsp;<span class="ident" id="4774474"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774476">.</span><span class="ident" id="4774477"><a href="/gostd/net/http/internal/chunked.go.html#4773346">buf</a></span><span class="op" id="4774480">[</span><span class="num" id="4774481">1</span><span class="op" id="4774482">]</span>&nbsp;<span class="op" id="4774484">!=</span>&nbsp;<span class="string" id="4774487">&#39;\n&#39;</span>&nbsp;<span class="op" id="4774492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774499"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774501">.</span><span class="ident" id="4774502"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span>&nbsp;<span class="op" id="4774506">=</span>&nbsp;<span class="ident" id="4774508"><a href="/gostd/net/http/internal/chunked.go.html#4772602">errors</a></span><span class="op" id="4774514">.</span><span class="ident" id="4774515"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4774518">(</span><span class="string" id="4774519">&#34;malformed&nbsp;chunked&nbsp;encoding&#34;</span><span class="op" id="4774547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774558">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774568">return</span>&nbsp;<span class="ident" id="4774575"><a href="/gostd/net/http/internal/chunked.go.html#4773827">n</a></span><span class="op" id="4774576">,</span>&nbsp;<span class="ident" id="4774578"><a href="/gostd/net/http/internal/chunked.go.html#4773791">cr</a></span><span class="op" id="4774580">.</span><span class="ident" id="4774581"><a href="/gostd/net/http/internal/chunked.go.html#4773335">err</a></span><br>
<span class="lineno"></span><span class="op" id="4774585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4774588">//&nbsp;Read&nbsp;a&nbsp;line&nbsp;of&nbsp;bytes&nbsp;(up&nbsp;to&nbsp;\n)&nbsp;from&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="4774631">//&nbsp;Give&nbsp;up&nbsp;if&nbsp;the&nbsp;line&nbsp;exceeds&nbsp;maxLineLength.</span><br>
<span class="lineno"></span><span class="comment" id="4774677">//&nbsp;The&nbsp;returned&nbsp;bytes&nbsp;are&nbsp;a&nbsp;pointer&nbsp;into&nbsp;storage&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="4774729">//&nbsp;the&nbsp;bufio,&nbsp;so&nbsp;they&nbsp;are&nbsp;only&nbsp;valid&nbsp;until&nbsp;the&nbsp;next&nbsp;bufio&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="4774793">func</span>&nbsp;<span class="ident" id="4774798">readLine</span><span class="op" id="4774806">(</span><span class="ident" id="4774807">b</span>&nbsp;<span class="op" id="4774809">*</span><span class="ident" id="4774810"><a href="/gostd/net/http/internal/chunked.go.html#4772584">bufio</a></span><span class="op" id="4774815">.</span><span class="ident" id="4774816"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="4774822">)</span>&nbsp;<span class="op" id="4774824">(</span><span class="ident" id="4774825">p</span>&nbsp;<span class="op" id="4774827">[</span><span class="op" id="4774828">]</span><span class="builtintype" id="4774829">byte</span><span class="op" id="4774833">,</span>&nbsp;<span class="ident" id="4774835">err</span>&nbsp;<span class="builtintype" id="4774839">error</span><span class="op" id="4774844">)</span>&nbsp;<span class="op" id="4774846">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774849">if</span>&nbsp;<span class="ident" id="4774852"><a href="/gostd/net/http/internal/chunked.go.html#4774825">p</a></span><span class="op" id="4774853">,</span>&nbsp;<span class="ident" id="4774855"><a href="/gostd/net/http/internal/chunked.go.html#4774835">err</a></span>&nbsp;<span class="op" id="4774859">=</span>&nbsp;<span class="ident" id="4774861"><a href="/gostd/net/http/internal/chunked.go.html#4774807">b</a></span><span class="op" id="4774862">.</span><span class="ident" id="4774863"><a href="/gostd/bufio/bufio.go.html#1361158">ReadSlice</a></span><span class="op" id="4774872">(</span><span class="string" id="4774873">&#39;\n&#39;</span><span class="op" id="4774877">)</span><span class="op" id="4774878">;</span>&nbsp;<span class="ident" id="4774880"><a href="/gostd/net/http/internal/chunked.go.html#4774835">err</a></span>&nbsp;<span class="op" id="4774884">!=</span>&nbsp;<span class="builtintype" id="4774887">nil</span>&nbsp;<span class="op" id="4774891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4774895">//&nbsp;We&nbsp;always&nbsp;know&nbsp;when&nbsp;EOF&nbsp;is&nbsp;coming.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4774935">//&nbsp;If&nbsp;the&nbsp;caller&nbsp;asked&nbsp;for&nbsp;a&nbsp;line,&nbsp;there&nbsp;should&nbsp;be&nbsp;a&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774996">if</span>&nbsp;<span class="ident" id="4774999"><a href="/gostd/net/http/internal/chunked.go.html#4774835">err</a></span>&nbsp;<span class="op" id="4775003">==</span>&nbsp;<span class="ident" id="4775006"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4775008">.</span><span class="ident" id="4775009"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="4775013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4775018"><a href="/gostd/net/http/internal/chunked.go.html#4774835">err</a></span>&nbsp;<span class="op" id="4775022">=</span>&nbsp;<span class="ident" id="4775024"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4775026">.</span><span class="ident" id="4775027"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4775046">}</span>&nbsp;<span class="keyword" id="4775048">else</span>&nbsp;<span class="keyword" id="4775053">if</span>&nbsp;<span class="ident" id="4775056"><a href="/gostd/net/http/internal/chunked.go.html#4774835">err</a></span>&nbsp;<span class="op" id="4775060">==</span>&nbsp;<span class="ident" id="4775063"><a href="/gostd/net/http/internal/chunked.go.html#4772584">bufio</a></span><span class="op" id="4775068">.</span><span class="ident" id="4775069"><a href="/gostd/bufio/bufio.go.html#1354774">ErrBufferFull</a></span>&nbsp;<span class="op" id="4775083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4775088"><a href="/gostd/net/http/internal/chunked.go.html#4774835">err</a></span>&nbsp;<span class="op" id="4775092">=</span>&nbsp;<span class="ident" id="4775094"><a href="/gostd/net/http/internal/chunked.go.html#4772694">ErrLineTooLong</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4775111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775115">return</span>&nbsp;<span class="builtintype" id="4775122">nil</span><span class="op" id="4775125">,</span>&nbsp;<span class="ident" id="4775127"><a href="/gostd/net/http/internal/chunked.go.html#4774835">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4775132">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775135">if</span>&nbsp;<span class="builtinfunc" id="4775138">len</span><span class="op" id="4775141">(</span><span class="ident" id="4775142"><a href="/gostd/net/http/internal/chunked.go.html#4774825">p</a></span><span class="op" id="4775143">)</span>&nbsp;<span class="op" id="4775145">&gt;=</span>&nbsp;<span class="ident" id="4775148"><a href="/gostd/net/http/internal/chunked.go.html#4772633">maxLineLength</a></span>&nbsp;<span class="op" id="4775162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775166">return</span>&nbsp;<span class="builtintype" id="4775173">nil</span><span class="op" id="4775176">,</span>&nbsp;<span class="ident" id="4775178"><a href="/gostd/net/http/internal/chunked.go.html#4772694">ErrLineTooLong</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4775194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775197">return</span>&nbsp;<span class="ident" id="4775204"><a href="/gostd/net/http/internal/chunked.go.html#4775243">trimTrailingWhitespace</a></span><span class="op" id="4775226">(</span><span class="ident" id="4775227"><a href="/gostd/net/http/internal/chunked.go.html#4774825">p</a></span><span class="op" id="4775228">)</span><span class="op" id="4775229">,</span>&nbsp;<span class="builtintype" id="4775231">nil</span><br>
<span class="lineno"></span><span class="op" id="4775235">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="4775238">func</span>&nbsp;<span class="ident" id="4775243">trimTrailingWhitespace</span><span class="op" id="4775265">(</span><span class="ident" id="4775266">b</span>&nbsp;<span class="op" id="4775268">[</span><span class="op" id="4775269">]</span><span class="builtintype" id="4775270">byte</span><span class="op" id="4775274">)</span>&nbsp;<span class="op" id="4775276">[</span><span class="op" id="4775277">]</span><span class="builtintype" id="4775278">byte</span>&nbsp;<span class="op" id="4775283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775286">for</span>&nbsp;<span class="builtinfunc" id="4775290">len</span><span class="op" id="4775293">(</span><span class="ident" id="4775294"><a href="/gostd/net/http/internal/chunked.go.html#4775266">b</a></span><span class="op" id="4775295">)</span>&nbsp;<span class="op" id="4775297">&gt;</span>&nbsp;<span class="num" id="4775299">0</span>&nbsp;<span class="op" id="4775301">&amp;&amp;</span>&nbsp;<span class="ident" id="4775304"><a href="/gostd/net/http/internal/chunked.go.html#4775372">isASCIISpace</a></span><span class="op" id="4775316">(</span><span class="ident" id="4775317"><a href="/gostd/net/http/internal/chunked.go.html#4775266">b</a></span><span class="op" id="4775318">[</span><span class="builtinfunc" id="4775319">len</span><span class="op" id="4775322">(</span><span class="ident" id="4775323"><a href="/gostd/net/http/internal/chunked.go.html#4775266">b</a></span><span class="op" id="4775324">)</span><span class="op" id="4775325">-</span><span class="num" id="4775326">1</span><span class="op" id="4775327">]</span><span class="op" id="4775328">)</span>&nbsp;<span class="op" id="4775330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4775334"><a href="/gostd/net/http/internal/chunked.go.html#4775266">b</a></span>&nbsp;<span class="op" id="4775336">=</span>&nbsp;<span class="ident" id="4775338"><a href="/gostd/net/http/internal/chunked.go.html#4775266">b</a></span><span class="op" id="4775339">[</span><span class="op" id="4775340">:</span><span class="builtinfunc" id="4775341">len</span><span class="op" id="4775344">(</span><span class="ident" id="4775345"><a href="/gostd/net/http/internal/chunked.go.html#4775266">b</a></span><span class="op" id="4775346">)</span><span class="op" id="4775347">-</span><span class="num" id="4775348">1</span><span class="op" id="4775349">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4775352">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775355">return</span>&nbsp;<span class="ident" id="4775362"><a href="/gostd/net/http/internal/chunked.go.html#4775266">b</a></span><br>
<span class="lineno"></span><span class="op" id="4775364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4775367">func</span>&nbsp;<span class="ident" id="4775372">isASCIISpace</span><span class="op" id="4775384">(</span><span class="ident" id="4775385">b</span>&nbsp;<span class="builtintype" id="4775387">byte</span><span class="op" id="4775391">)</span>&nbsp;<span class="builtintype" id="4775393">bool</span>&nbsp;<span class="op" id="4775398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775401">return</span>&nbsp;<span class="ident" id="4775408"><a href="/gostd/net/http/internal/chunked.go.html#4775385">b</a></span>&nbsp;<span class="op" id="4775410">==</span>&nbsp;<span class="string" id="4775413">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4775417">||</span>&nbsp;<span class="ident" id="4775420"><a href="/gostd/net/http/internal/chunked.go.html#4775385">b</a></span>&nbsp;<span class="op" id="4775422">==</span>&nbsp;<span class="string" id="4775425">&#39;\t&#39;</span>&nbsp;<span class="op" id="4775430">||</span>&nbsp;<span class="ident" id="4775433"><a href="/gostd/net/http/internal/chunked.go.html#4775385">b</a></span>&nbsp;<span class="op" id="4775435">==</span>&nbsp;<span class="string" id="4775438">&#39;\n&#39;</span>&nbsp;<span class="op" id="4775443">||</span>&nbsp;<span class="ident" id="4775446"><a href="/gostd/net/http/internal/chunked.go.html#4775385">b</a></span>&nbsp;<span class="op" id="4775448">==</span>&nbsp;<span class="string" id="4775451">&#39;\r&#39;</span><br>
<span class="lineno">135</span><span class="op" id="4775456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4775459">//&nbsp;NewChunkedWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;chunkedWriter&nbsp;that&nbsp;translates&nbsp;writes&nbsp;into&nbsp;HTTP</span><br>
<span class="lineno"></span><span class="comment" id="4775540">//&nbsp;&#34;chunked&#34;&nbsp;format&nbsp;before&nbsp;writing&nbsp;them&nbsp;to&nbsp;w.&nbsp;Closing&nbsp;the&nbsp;returned&nbsp;chunkedWriter</span><br>
<span class="lineno"></span><span class="comment" id="4775621">//&nbsp;sends&nbsp;the&nbsp;final&nbsp;0-length&nbsp;chunk&nbsp;that&nbsp;marks&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;stream.</span><br>
<span class="lineno">140</span><span class="comment" id="4775689">//</span><br>
<span class="lineno"></span><span class="comment" id="4775692">//&nbsp;NewChunkedWriter&nbsp;is&nbsp;not&nbsp;needed&nbsp;by&nbsp;normal&nbsp;applications.&nbsp;The&nbsp;http</span><br>
<span class="lineno"></span><span class="comment" id="4775759">//&nbsp;package&nbsp;adds&nbsp;chunking&nbsp;automatically&nbsp;if&nbsp;handlers&nbsp;don&#39;t&nbsp;set&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4775822">//&nbsp;Content-Length&nbsp;header.&nbsp;Using&nbsp;newChunkedWriter&nbsp;inside&nbsp;a&nbsp;handler</span><br>
<span class="lineno"></span><span class="comment" id="4775888">//&nbsp;would&nbsp;result&nbsp;in&nbsp;double&nbsp;chunking&nbsp;or&nbsp;chunking&nbsp;with&nbsp;a&nbsp;Content-Length</span><br>
<span class="lineno">145</span><span class="comment" id="4775957">//&nbsp;length,&nbsp;both&nbsp;of&nbsp;which&nbsp;are&nbsp;wrong.</span><br>
<span class="lineno"></span><span class="keyword" id="4775993">func</span>&nbsp;<span class="ident" id="4775998">NewChunkedWriter</span><span class="op" id="4776014">(</span><span class="ident" id="4776015">w</span>&nbsp;<span class="ident" id="4776017"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4776019">.</span><span class="ident" id="4776020"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4776026">)</span>&nbsp;<span class="ident" id="4776028"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4776030">.</span><span class="ident" id="4776031"><a href="/gostd/io/io.go.html#1423540">WriteCloser</a></span>&nbsp;<span class="op" id="4776043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776046">return</span>&nbsp;<span class="op" id="4776053">&amp;</span><span class="ident" id="4776054"><a href="/gostd/net/http/internal/chunked.go.html#4776216">chunkedWriter</a></span><span class="op" id="4776067">{</span><span class="ident" id="4776068"><a href="/gostd/net/http/internal/chunked.go.html#4776015">w</a></span><span class="op" id="4776069">}</span><br>
<span class="lineno"></span><span class="op" id="4776071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="4776074">//&nbsp;Writing&nbsp;to&nbsp;chunkedWriter&nbsp;translates&nbsp;to&nbsp;writing&nbsp;in&nbsp;HTTP&nbsp;chunked&nbsp;Transfer</span><br>
<span class="lineno"></span><span class="comment" id="4776149">//&nbsp;Encoding&nbsp;wire&nbsp;format&nbsp;to&nbsp;the&nbsp;underlying&nbsp;Wire&nbsp;chunkedWriter.</span><br>
<span class="lineno"></span><span class="keyword" id="4776211">type</span>&nbsp;<span class="ident" id="4776216">chunkedWriter</span>&nbsp;<span class="keyword" id="4776230">struct</span>&nbsp;<span class="op" id="4776237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776240">Wire</span>&nbsp;<span class="ident" id="4776245"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4776247">.</span><span class="ident" id="4776248"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><br>
<span class="lineno"></span><span class="op" id="4776255">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="4776258">//&nbsp;Write&nbsp;the&nbsp;contents&nbsp;of&nbsp;data&nbsp;as&nbsp;one&nbsp;chunk&nbsp;to&nbsp;Wire.</span><br>
<span class="lineno"></span><span class="comment" id="4776310">//&nbsp;NOTE:&nbsp;Note&nbsp;that&nbsp;the&nbsp;corresponding&nbsp;chunk-writing&nbsp;procedure&nbsp;in&nbsp;Conn.Write&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="4776389">//&nbsp;a&nbsp;bug&nbsp;since&nbsp;it&nbsp;does&nbsp;not&nbsp;check&nbsp;for&nbsp;success&nbsp;of&nbsp;io.WriteString</span><br>
<span class="lineno"></span><span class="keyword" id="4776452">func</span>&nbsp;<span class="op" id="4776457">(</span><span class="ident" id="4776458">cw</span>&nbsp;<span class="op" id="4776461">*</span><span class="ident" id="4776462"><a href="/gostd/net/http/internal/chunked.go.html#4776216">chunkedWriter</a></span><span class="op" id="4776475">)</span>&nbsp;<span class="ident" id="4776477">Write</span><span class="op" id="4776482">(</span><span class="ident" id="4776483">data</span>&nbsp;<span class="op" id="4776488">[</span><span class="op" id="4776489">]</span><span class="builtintype" id="4776490">byte</span><span class="op" id="4776494">)</span>&nbsp;<span class="op" id="4776496">(</span><span class="ident" id="4776497">n</span>&nbsp;<span class="builtintype" id="4776499">int</span><span class="op" id="4776502">,</span>&nbsp;<span class="ident" id="4776504">err</span>&nbsp;<span class="builtintype" id="4776508">error</span><span class="op" id="4776513">)</span>&nbsp;<span class="op" id="4776515">{</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776519">//&nbsp;Don&#39;t&nbsp;send&nbsp;0-length&nbsp;data.&nbsp;It&nbsp;looks&nbsp;like&nbsp;EOF&nbsp;for&nbsp;chunked&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776589">if</span>&nbsp;<span class="builtinfunc" id="4776592">len</span><span class="op" id="4776595">(</span><span class="ident" id="4776596"><a href="/gostd/net/http/internal/chunked.go.html#4776483">data</a></span><span class="op" id="4776600">)</span>&nbsp;<span class="op" id="4776602">==</span>&nbsp;<span class="num" id="4776605">0</span>&nbsp;<span class="op" id="4776607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776611">return</span>&nbsp;<span class="num" id="4776618">0</span><span class="op" id="4776619">,</span>&nbsp;<span class="builtintype" id="4776621">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4776626">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776630">if</span>&nbsp;<span class="ident" id="4776633">_</span><span class="op" id="4776634">,</span>&nbsp;<span class="ident" id="4776636"><a href="/gostd/net/http/internal/chunked.go.html#4776504">err</a></span>&nbsp;<span class="op" id="4776640">=</span>&nbsp;<span class="ident" id="4776642"><a href="/gostd/net/http/internal/chunked.go.html#4772612">fmt</a></span><span class="op" id="4776645">.</span><span class="ident" id="4776646"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="4776653">(</span><span class="ident" id="4776654"><a href="/gostd/net/http/internal/chunked.go.html#4776458">cw</a></span><span class="op" id="4776656">.</span><span class="ident" id="4776657"><a href="/gostd/net/http/internal/chunked.go.html#4776240">Wire</a></span><span class="op" id="4776661">,</span>&nbsp;<span class="string" id="4776663">&#34;%x\r\n&#34;</span><span class="op" id="4776671">,</span>&nbsp;<span class="builtinfunc" id="4776673">len</span><span class="op" id="4776676">(</span><span class="ident" id="4776677"><a href="/gostd/net/http/internal/chunked.go.html#4776483">data</a></span><span class="op" id="4776681">)</span><span class="op" id="4776682">)</span><span class="op" id="4776683">;</span>&nbsp;<span class="ident" id="4776685"><a href="/gostd/net/http/internal/chunked.go.html#4776504">err</a></span>&nbsp;<span class="op" id="4776689">!=</span>&nbsp;<span class="builtintype" id="4776692">nil</span>&nbsp;<span class="op" id="4776696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776700">return</span>&nbsp;<span class="num" id="4776707">0</span><span class="op" id="4776708">,</span>&nbsp;<span class="ident" id="4776710"><a href="/gostd/net/http/internal/chunked.go.html#4776504">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4776715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776718">if</span>&nbsp;<span class="ident" id="4776721"><a href="/gostd/net/http/internal/chunked.go.html#4776497">n</a></span><span class="op" id="4776722">,</span>&nbsp;<span class="ident" id="4776724"><a href="/gostd/net/http/internal/chunked.go.html#4776504">err</a></span>&nbsp;<span class="op" id="4776728">=</span>&nbsp;<span class="ident" id="4776730"><a href="/gostd/net/http/internal/chunked.go.html#4776458">cw</a></span><span class="op" id="4776732">.</span><span class="ident" id="4776733"><a href="/gostd/net/http/internal/chunked.go.html#4776240">Wire</a></span><span class="op" id="4776737">.</span><span class="ident" id="4776738"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4776743">(</span><span class="ident" id="4776744"><a href="/gostd/net/http/internal/chunked.go.html#4776483">data</a></span><span class="op" id="4776748">)</span><span class="op" id="4776749">;</span>&nbsp;<span class="ident" id="4776751"><a href="/gostd/net/http/internal/chunked.go.html#4776504">err</a></span>&nbsp;<span class="op" id="4776755">!=</span>&nbsp;<span class="builtintype" id="4776758">nil</span>&nbsp;<span class="op" id="4776762">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776766">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4776774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776777">if</span>&nbsp;<span class="ident" id="4776780"><a href="/gostd/net/http/internal/chunked.go.html#4776497">n</a></span>&nbsp;<span class="op" id="4776782">!=</span>&nbsp;<span class="builtinfunc" id="4776785">len</span><span class="op" id="4776788">(</span><span class="ident" id="4776789"><a href="/gostd/net/http/internal/chunked.go.html#4776483">data</a></span><span class="op" id="4776793">)</span>&nbsp;<span class="op" id="4776795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776799"><a href="/gostd/net/http/internal/chunked.go.html#4776504">err</a></span>&nbsp;<span class="op" id="4776803">=</span>&nbsp;<span class="ident" id="4776805"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4776807">.</span><span class="ident" id="4776808"><a href="/gostd/io/io.go.html#1419475">ErrShortWrite</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776824">return</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4776832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776835">_</span><span class="op" id="4776836">,</span>&nbsp;<span class="ident" id="4776838"><a href="/gostd/net/http/internal/chunked.go.html#4776504">err</a></span>&nbsp;<span class="op" id="4776842">=</span>&nbsp;<span class="ident" id="4776844"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4776846">.</span><span class="ident" id="4776847"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="4776858">(</span><span class="ident" id="4776859"><a href="/gostd/net/http/internal/chunked.go.html#4776458">cw</a></span><span class="op" id="4776861">.</span><span class="ident" id="4776862"><a href="/gostd/net/http/internal/chunked.go.html#4776240">Wire</a></span><span class="op" id="4776866">,</span>&nbsp;<span class="string" id="4776868">&#34;\r\n&#34;</span><span class="op" id="4776874">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776878">return</span><br>
<span class="lineno"></span><span class="op" id="4776885">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="4776888">func</span>&nbsp;<span class="op" id="4776893">(</span><span class="ident" id="4776894">cw</span>&nbsp;<span class="op" id="4776897">*</span><span class="ident" id="4776898"><a href="/gostd/net/http/internal/chunked.go.html#4776216">chunkedWriter</a></span><span class="op" id="4776911">)</span>&nbsp;<span class="ident" id="4776913">Close</span><span class="op" id="4776918">(</span><span class="op" id="4776919">)</span>&nbsp;<span class="builtintype" id="4776921">error</span>&nbsp;<span class="op" id="4776927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776930">_</span><span class="op" id="4776931">,</span>&nbsp;<span class="ident" id="4776933">err</span>&nbsp;<span class="op" id="4776937">:=</span>&nbsp;<span class="ident" id="4776940"><a href="/gostd/net/http/internal/chunked.go.html#4772619">io</a></span><span class="op" id="4776942">.</span><span class="ident" id="4776943"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="4776954">(</span><span class="ident" id="4776955"><a href="/gostd/net/http/internal/chunked.go.html#4776894">cw</a></span><span class="op" id="4776957">.</span><span class="ident" id="4776958"><a href="/gostd/net/http/internal/chunked.go.html#4776240">Wire</a></span><span class="op" id="4776962">,</span>&nbsp;<span class="string" id="4776964">&#34;0\r\n&#34;</span><span class="op" id="4776971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776974">return</span>&nbsp;<span class="ident" id="4776981"><a href="/gostd/net/http/internal/chunked.go.html#4776933">err</a></span><br>
<span class="lineno"></span><span class="op" id="4776985">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="4776988">func</span>&nbsp;<span class="ident" id="4776993">parseHexUint</span><span class="op" id="4777005">(</span><span class="ident" id="4777006">v</span>&nbsp;<span class="op" id="4777008">[</span><span class="op" id="4777009">]</span><span class="builtintype" id="4777010">byte</span><span class="op" id="4777014">)</span>&nbsp;<span class="op" id="4777016">(</span><span class="ident" id="4777017">n</span>&nbsp;<span class="builtintype" id="4777019">uint64</span><span class="op" id="4777025">,</span>&nbsp;<span class="ident" id="4777027">err</span>&nbsp;<span class="builtintype" id="4777031">error</span><span class="op" id="4777036">)</span>&nbsp;<span class="op" id="4777038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777041">for</span>&nbsp;<span class="ident" id="4777045">_</span><span class="op" id="4777046">,</span>&nbsp;<span class="ident" id="4777048">b</span>&nbsp;<span class="op" id="4777050">:=</span>&nbsp;<span class="keyword" id="4777053">range</span>&nbsp;<span class="ident" id="4777059"><a href="/gostd/net/http/internal/chunked.go.html#4777006">v</a></span>&nbsp;<span class="op" id="4777061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777065"><a href="/gostd/net/http/internal/chunked.go.html#4777017">n</a></span>&nbsp;<span class="op" id="4777067">&lt;&lt;=</span>&nbsp;<span class="num" id="4777071">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777075">switch</span>&nbsp;<span class="op" id="4777082">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777086">case</span>&nbsp;<span class="string" id="4777091">&#39;0&#39;</span>&nbsp;<span class="op" id="4777095">&lt;=</span>&nbsp;<span class="ident" id="4777098"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777100">&amp;&amp;</span>&nbsp;<span class="ident" id="4777103"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777105">&lt;=</span>&nbsp;<span class="string" id="4777108">&#39;9&#39;</span><span class="op" id="4777111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777116"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777118">=</span>&nbsp;<span class="ident" id="4777120"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777122">-</span>&nbsp;<span class="string" id="4777124">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777130">case</span>&nbsp;<span class="string" id="4777135">&#39;a&#39;</span>&nbsp;<span class="op" id="4777139">&lt;=</span>&nbsp;<span class="ident" id="4777142"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777144">&amp;&amp;</span>&nbsp;<span class="ident" id="4777147"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777149">&lt;=</span>&nbsp;<span class="string" id="4777152">&#39;f&#39;</span><span class="op" id="4777155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777160"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777162">=</span>&nbsp;<span class="ident" id="4777164"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777166">-</span>&nbsp;<span class="string" id="4777168">&#39;a&#39;</span>&nbsp;<span class="op" id="4777172">+</span>&nbsp;<span class="num" id="4777174">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777179">case</span>&nbsp;<span class="string" id="4777184">&#39;A&#39;</span>&nbsp;<span class="op" id="4777188">&lt;=</span>&nbsp;<span class="ident" id="4777191"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777193">&amp;&amp;</span>&nbsp;<span class="ident" id="4777196"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777198">&lt;=</span>&nbsp;<span class="string" id="4777201">&#39;F&#39;</span><span class="op" id="4777204">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777209"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777211">=</span>&nbsp;<span class="ident" id="4777213"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span>&nbsp;<span class="op" id="4777215">-</span>&nbsp;<span class="string" id="4777217">&#39;A&#39;</span>&nbsp;<span class="op" id="4777221">+</span>&nbsp;<span class="num" id="4777223">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777228">default</span><span class="op" id="4777235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777240">return</span>&nbsp;<span class="num" id="4777247">0</span><span class="op" id="4777248">,</span>&nbsp;<span class="ident" id="4777250"><a href="/gostd/net/http/internal/chunked.go.html#4772602">errors</a></span><span class="op" id="4777256">.</span><span class="ident" id="4777257"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4777260">(</span><span class="string" id="4777261">&#34;invalid&nbsp;byte&nbsp;in&nbsp;chunk&nbsp;length&#34;</span><span class="op" id="4777291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777299"><a href="/gostd/net/http/internal/chunked.go.html#4777017">n</a></span>&nbsp;<span class="op" id="4777301">|=</span>&nbsp;<span class="builtintype" id="4777304">uint64</span><span class="op" id="4777310">(</span><span class="ident" id="4777311"><a href="/gostd/net/http/internal/chunked.go.html#4777048">b</a></span><span class="op" id="4777312">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777318">return</span><br>
<span class="lineno"></span><span class="op" id="4777325">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
