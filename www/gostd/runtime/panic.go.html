<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html" class="current">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1651448">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1651503">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1651557">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1651608">package</span>&nbsp;<span class="ident" id="1651616">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1651625">import</span>&nbsp;<span class="string" id="1651632">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1651642">var</span>&nbsp;<span class="ident" id="1651646">indexError</span>&nbsp;<span class="op" id="1651657">=</span>&nbsp;<span class="builtintype" id="1651659">error</span><span class="op" id="1651664">(</span><span class="ident" id="1651665"><a href="/gostd/runtime/error.go.html#1525495">errorString</a></span><span class="op" id="1651676">(</span><span class="string" id="1651677">&#34;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1651697">)</span><span class="op" id="1651698">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1651701">func</span>&nbsp;<span class="ident" id="1651706">panicindex</span><span class="op" id="1651716">(</span><span class="op" id="1651717">)</span>&nbsp;<span class="op" id="1651719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1651722">panic</span><span class="op" id="1651727">(</span><span class="ident" id="1651728"><a href="/gostd/runtime/panic.go.html#1651646">indexError</a></span><span class="op" id="1651738">)</span><br>
<span class="lineno"></span><span class="op" id="1651740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1651743">var</span>&nbsp;<span class="ident" id="1651747">sliceError</span>&nbsp;<span class="op" id="1651758">=</span>&nbsp;<span class="builtintype" id="1651760">error</span><span class="op" id="1651765">(</span><span class="ident" id="1651766"><a href="/gostd/runtime/error.go.html#1525495">errorString</a></span><span class="op" id="1651777">(</span><span class="string" id="1651778">&#34;slice&nbsp;bounds&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1651805">)</span><span class="op" id="1651806">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1651809">func</span>&nbsp;<span class="ident" id="1651814">panicslice</span><span class="op" id="1651824">(</span><span class="op" id="1651825">)</span>&nbsp;<span class="op" id="1651827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1651830">panic</span><span class="op" id="1651835">(</span><span class="ident" id="1651836"><a href="/gostd/runtime/panic.go.html#1651747">sliceError</a></span><span class="op" id="1651846">)</span><br>
<span class="lineno"></span><span class="op" id="1651848">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="1651851">var</span>&nbsp;<span class="ident" id="1651855">divideError</span>&nbsp;<span class="op" id="1651867">=</span>&nbsp;<span class="builtintype" id="1651869">error</span><span class="op" id="1651874">(</span><span class="ident" id="1651875"><a href="/gostd/runtime/error.go.html#1525495">errorString</a></span><span class="op" id="1651886">(</span><span class="string" id="1651887">&#34;integer&nbsp;divide&nbsp;by&nbsp;zero&#34;</span><span class="op" id="1651911">)</span><span class="op" id="1651912">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1651915">func</span>&nbsp;<span class="ident" id="1651920">panicdivide</span><span class="op" id="1651931">(</span><span class="op" id="1651932">)</span>&nbsp;<span class="op" id="1651934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1651937">panic</span><span class="op" id="1651942">(</span><span class="ident" id="1651943"><a href="/gostd/runtime/panic.go.html#1651855">divideError</a></span><span class="op" id="1651954">)</span><br>
<span class="lineno">25</span><span class="op" id="1651956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1651959">var</span>&nbsp;<span class="ident" id="1651963">overflowError</span>&nbsp;<span class="op" id="1651977">=</span>&nbsp;<span class="builtintype" id="1651979">error</span><span class="op" id="1651984">(</span><span class="ident" id="1651985"><a href="/gostd/runtime/error.go.html#1525495">errorString</a></span><span class="op" id="1651996">(</span><span class="string" id="1651997">&#34;integer&nbsp;overflow&#34;</span><span class="op" id="1652015">)</span><span class="op" id="1652016">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1652019">func</span>&nbsp;<span class="ident" id="1652024">panicoverflow</span><span class="op" id="1652037">(</span><span class="op" id="1652038">)</span>&nbsp;<span class="op" id="1652040">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1652043">panic</span><span class="op" id="1652048">(</span><span class="ident" id="1652049"><a href="/gostd/runtime/panic.go.html#1651963">overflowError</a></span><span class="op" id="1652062">)</span><br>
<span class="lineno"></span><span class="op" id="1652064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1652067">var</span>&nbsp;<span class="ident" id="1652071">floatError</span>&nbsp;<span class="op" id="1652082">=</span>&nbsp;<span class="builtintype" id="1652084">error</span><span class="op" id="1652089">(</span><span class="ident" id="1652090"><a href="/gostd/runtime/error.go.html#1525495">errorString</a></span><span class="op" id="1652101">(</span><span class="string" id="1652102">&#34;floating&nbsp;point&nbsp;error&#34;</span><span class="op" id="1652124">)</span><span class="op" id="1652125">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="1652128">func</span>&nbsp;<span class="ident" id="1652133">panicfloat</span><span class="op" id="1652143">(</span><span class="op" id="1652144">)</span>&nbsp;<span class="op" id="1652146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1652149">panic</span><span class="op" id="1652154">(</span><span class="ident" id="1652155"><a href="/gostd/runtime/panic.go.html#1652071">floatError</a></span><span class="op" id="1652165">)</span><br>
<span class="lineno"></span><span class="op" id="1652167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1652170">var</span>&nbsp;<span class="ident" id="1652174">memoryError</span>&nbsp;<span class="op" id="1652186">=</span>&nbsp;<span class="builtintype" id="1652188">error</span><span class="op" id="1652193">(</span><span class="ident" id="1652194"><a href="/gostd/runtime/error.go.html#1525495">errorString</a></span><span class="op" id="1652205">(</span><span class="string" id="1652206">&#34;invalid&nbsp;memory&nbsp;address&nbsp;or&nbsp;nil&nbsp;pointer&nbsp;dereference&#34;</span><span class="op" id="1652257">)</span><span class="op" id="1652258">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1652261">func</span>&nbsp;<span class="ident" id="1652266">panicmem</span><span class="op" id="1652274">(</span><span class="op" id="1652275">)</span>&nbsp;<span class="op" id="1652277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1652280">panic</span><span class="op" id="1652285">(</span><span class="ident" id="1652286"><a href="/gostd/runtime/panic.go.html#1652174">memoryError</a></span><span class="op" id="1652297">)</span><br>
<span class="lineno"></span><span class="op" id="1652299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="1652302">func</span>&nbsp;<span class="ident" id="1652307">throwreturn</span><span class="op" id="1652318">(</span><span class="op" id="1652319">)</span>&nbsp;<span class="op" id="1652321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1652324"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1652331">(</span><span class="string" id="1652332">&#34;no&nbsp;return&nbsp;at&nbsp;end&nbsp;of&nbsp;a&nbsp;typed&nbsp;function&nbsp;-&nbsp;compiler&nbsp;is&nbsp;broken&#34;</span><span class="op" id="1652391">)</span><br>
<span class="lineno"></span><span class="op" id="1652393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1652396">func</span>&nbsp;<span class="ident" id="1652401">throwinit</span><span class="op" id="1652410">(</span><span class="op" id="1652411">)</span>&nbsp;<span class="op" id="1652413">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1652416"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1652423">(</span><span class="string" id="1652424">&#34;recursive&nbsp;call&nbsp;during&nbsp;initialization&nbsp;-&nbsp;linker&nbsp;skew&#34;</span><span class="op" id="1652476">)</span><br>
<span class="lineno"></span><span class="op" id="1652478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1652481">//&nbsp;Create&nbsp;a&nbsp;new&nbsp;deferred&nbsp;function&nbsp;fn&nbsp;with&nbsp;siz&nbsp;bytes&nbsp;of&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="comment" id="1652547">//&nbsp;The&nbsp;compiler&nbsp;turns&nbsp;a&nbsp;defer&nbsp;statement&nbsp;into&nbsp;a&nbsp;call&nbsp;to&nbsp;this.</span><br>
<span class="lineno">55</span><span class="comment" id="1652608">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1652621">func</span>&nbsp;<span class="ident" id="1652626">deferproc</span><span class="op" id="1652635">(</span><span class="ident" id="1652636">siz</span>&nbsp;<span class="builtintype" id="1652640">int32</span><span class="op" id="1652645">,</span>&nbsp;<span class="ident" id="1652647">fn</span>&nbsp;<span class="op" id="1652650">*</span><span class="ident" id="1652651"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786324">funcval</a></span><span class="op" id="1652658">)</span>&nbsp;<span class="op" id="1652660">{</span>&nbsp;<span class="comment" id="1652662">//&nbsp;arguments&nbsp;of&nbsp;fn&nbsp;follow&nbsp;fn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1652692">//&nbsp;the&nbsp;arguments&nbsp;of&nbsp;fn&nbsp;are&nbsp;in&nbsp;a&nbsp;perilous&nbsp;state.&nbsp;&nbsp;The&nbsp;stack&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1652756">//&nbsp;for&nbsp;deferproc&nbsp;does&nbsp;not&nbsp;describe&nbsp;them.&nbsp;&nbsp;So&nbsp;we&nbsp;can&#39;t&nbsp;let&nbsp;garbage</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1652823">//&nbsp;collection&nbsp;or&nbsp;stack&nbsp;copying&nbsp;trigger&nbsp;until&nbsp;we&#39;ve&nbsp;copied&nbsp;them&nbsp;out</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1652891">//&nbsp;to&nbsp;somewhere&nbsp;safe.&nbsp;&nbsp;deferproc_m&nbsp;does&nbsp;that.&nbsp;&nbsp;Until&nbsp;deferproc_m,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1652958">//&nbsp;we&nbsp;can&nbsp;only&nbsp;call&nbsp;nosplit&nbsp;routines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1652997">argp</span>&nbsp;<span class="op" id="1653002">:=</span>&nbsp;<span class="builtintype" id="1653005">uintptr</span><span class="op" id="1653012">(</span><span class="ident" id="1653013"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1653019">.</span><span class="ident" id="1653020">Pointer</span><span class="op" id="1653027">(</span><span class="op" id="1653028">&amp;</span><span class="ident" id="1653029"><a href="/gostd/runtime/panic.go.html#1652647">fn</a></span><span class="op" id="1653031">)</span><span class="op" id="1653032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653035"><a href="/gostd/runtime/panic.go.html#1652997">argp</a></span>&nbsp;<span class="op" id="1653040">+=</span>&nbsp;<span class="ident" id="1653043"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1653049">.</span><span class="ident" id="1653050">Sizeof</span><span class="op" id="1653056">(</span><span class="ident" id="1653057"><a href="/gostd/runtime/panic.go.html#1652647">fn</a></span><span class="op" id="1653059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1653062">if</span>&nbsp;<span class="ident" id="1653065"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span>&nbsp;<span class="op" id="1653072">==</span>&nbsp;<span class="string" id="1653075">&#34;arm&#34;</span>&nbsp;<span class="op" id="1653081">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653085"><a href="/gostd/runtime/panic.go.html#1652997">argp</a></span>&nbsp;<span class="op" id="1653090">+=</span>&nbsp;<span class="ident" id="1653093"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span>&nbsp;<span class="comment" id="1653101">//&nbsp;skip&nbsp;caller&#39;s&nbsp;saved&nbsp;link&nbsp;register</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1653139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653142">mp</span>&nbsp;<span class="op" id="1653145">:=</span>&nbsp;<span class="ident" id="1653148"><a href="/gostd/runtime/stubs.go.html#1738934">acquirem</a></span><span class="op" id="1653156">(</span><span class="op" id="1653157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653160"><a href="/gostd/runtime/panic.go.html#1653142">mp</a></span><span class="op" id="1653162">.</span><span class="ident" id="1653163"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788525">scalararg</a></span><span class="op" id="1653172">[</span><span class="num" id="1653173">0</span><span class="op" id="1653174">]</span>&nbsp;<span class="op" id="1653176">=</span>&nbsp;<span class="builtintype" id="1653178">uintptr</span><span class="op" id="1653185">(</span><span class="ident" id="1653186"><a href="/gostd/runtime/panic.go.html#1652636">siz</a></span><span class="op" id="1653189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653192"><a href="/gostd/runtime/panic.go.html#1653142">mp</a></span><span class="op" id="1653194">.</span><span class="ident" id="1653195"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788547">ptrarg</a></span><span class="op" id="1653201">[</span><span class="num" id="1653202">0</span><span class="op" id="1653203">]</span>&nbsp;<span class="op" id="1653205">=</span>&nbsp;<span class="ident" id="1653207"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1653213">.</span><span class="ident" id="1653214">Pointer</span><span class="op" id="1653221">(</span><span class="ident" id="1653222"><a href="/gostd/runtime/panic.go.html#1652647">fn</a></span><span class="op" id="1653224">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653227"><a href="/gostd/runtime/panic.go.html#1653142">mp</a></span><span class="op" id="1653229">.</span><span class="ident" id="1653230"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788525">scalararg</a></span><span class="op" id="1653239">[</span><span class="num" id="1653240">1</span><span class="op" id="1653241">]</span>&nbsp;<span class="op" id="1653243">=</span>&nbsp;<span class="ident" id="1653245"><a href="/gostd/runtime/panic.go.html#1652997">argp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653251"><a href="/gostd/runtime/panic.go.html#1653142">mp</a></span><span class="op" id="1653253">.</span><span class="ident" id="1653254"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788525">scalararg</a></span><span class="op" id="1653263">[</span><span class="num" id="1653264">2</span><span class="op" id="1653265">]</span>&nbsp;<span class="op" id="1653267">=</span>&nbsp;<span class="ident" id="1653269"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1653280">(</span><span class="ident" id="1653281"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1653287">.</span><span class="ident" id="1653288">Pointer</span><span class="op" id="1653295">(</span><span class="op" id="1653296">&amp;</span><span class="ident" id="1653297"><a href="/gostd/runtime/panic.go.html#1652636">siz</a></span><span class="op" id="1653300">)</span><span class="op" id="1653301">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1653305">if</span>&nbsp;<span class="ident" id="1653308"><a href="/gostd/runtime/panic.go.html#1653142">mp</a></span><span class="op" id="1653310">.</span><span class="ident" id="1653311"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span>&nbsp;<span class="op" id="1653316">!=</span>&nbsp;<span class="ident" id="1653319"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1653323">(</span><span class="op" id="1653324">)</span>&nbsp;<span class="op" id="1653326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653330">//&nbsp;go&nbsp;code&nbsp;on&nbsp;the&nbsp;m&nbsp;stack&nbsp;can&#39;t&nbsp;defer</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653370"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1653377">(</span><span class="string" id="1653378">&#34;defer&nbsp;on&nbsp;m&#34;</span><span class="op" id="1653390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1653393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653397"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1653400">(</span><span class="ident" id="1653401"><a href="/gostd/runtime/stubs.go.html#1742394">deferproc_m</a></span><span class="op" id="1653412">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653416"><a href="/gostd/runtime/stubs.go.html#1738953">releasem</a></span><span class="op" id="1653424">(</span><span class="ident" id="1653425"><a href="/gostd/runtime/panic.go.html#1653142">mp</a></span><span class="op" id="1653427">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653431">//&nbsp;deferproc&nbsp;returns&nbsp;0&nbsp;normally.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653465">//&nbsp;a&nbsp;deferred&nbsp;func&nbsp;that&nbsp;stops&nbsp;a&nbsp;panic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653504">//&nbsp;makes&nbsp;the&nbsp;deferproc&nbsp;return&nbsp;1.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653538">//&nbsp;the&nbsp;code&nbsp;the&nbsp;compiler&nbsp;generates&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653581">//&nbsp;checks&nbsp;the&nbsp;return&nbsp;value&nbsp;and&nbsp;jumps&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653626">//&nbsp;end&nbsp;of&nbsp;the&nbsp;function&nbsp;if&nbsp;deferproc&nbsp;returns&nbsp;!=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1653677"><a href="/gostd/runtime/stubs.go.html#1747032">return0</a></span><span class="op" id="1653684">(</span><span class="op" id="1653685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653688">//&nbsp;No&nbsp;code&nbsp;can&nbsp;go&nbsp;here&nbsp;-&nbsp;the&nbsp;C&nbsp;return&nbsp;register&nbsp;has</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1653740">//&nbsp;been&nbsp;set&nbsp;and&nbsp;must&nbsp;not&nbsp;be&nbsp;clobbered.</span><br>
<span class="lineno"></span><span class="op" id="1653779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1653782">//&nbsp;Small&nbsp;malloc&nbsp;size&nbsp;classes&nbsp;&gt;=&nbsp;16&nbsp;are&nbsp;the&nbsp;multiples&nbsp;of&nbsp;16:&nbsp;16,&nbsp;32,&nbsp;48,&nbsp;64,&nbsp;80,&nbsp;96,&nbsp;112,&nbsp;128,&nbsp;144,&nbsp;...</span><br>
<span class="lineno"></span><span class="comment" id="1653885">//&nbsp;Each&nbsp;P&nbsp;holds&nbsp;a&nbsp;pool&nbsp;for&nbsp;defers&nbsp;with&nbsp;small&nbsp;arg&nbsp;sizes.</span><br>
<span class="lineno">95</span><span class="comment" id="1653941">//&nbsp;Assign&nbsp;defer&nbsp;allocations&nbsp;to&nbsp;pools&nbsp;by&nbsp;rounding&nbsp;to&nbsp;16,&nbsp;to&nbsp;match&nbsp;malloc&nbsp;size&nbsp;classes.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1654028">const</span>&nbsp;<span class="op" id="1654034">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1654037">deferHeaderSize</span>&nbsp;<span class="op" id="1654053">=</span>&nbsp;<span class="ident" id="1654055"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1654061">.</span><span class="ident" id="1654062">Sizeof</span><span class="op" id="1654068">(</span><span class="ident" id="1654069"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790701">_defer</a></span><span class="op" id="1654075">{</span><span class="op" id="1654076">}</span><span class="op" id="1654077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1654080">minDeferAlloc</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1654096">=</span>&nbsp;<span class="op" id="1654098">(</span><span class="ident" id="1654099"><a href="/gostd/runtime/panic.go.html#1654037">deferHeaderSize</a></span>&nbsp;<span class="op" id="1654115">+</span>&nbsp;<span class="num" id="1654117">15</span><span class="op" id="1654119">)</span>&nbsp;<span class="op" id="1654121">&amp;^</span>&nbsp;<span class="num" id="1654124">15</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1654128">minDeferArgs</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1654144">=</span>&nbsp;<span class="ident" id="1654146"><a href="/gostd/runtime/panic.go.html#1654080">minDeferAlloc</a></span>&nbsp;<span class="op" id="1654160">-</span>&nbsp;<span class="ident" id="1654162"><a href="/gostd/runtime/panic.go.html#1654037">deferHeaderSize</a></span><br>
<span class="lineno"></span><span class="op" id="1654178">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1654181">//&nbsp;defer&nbsp;size&nbsp;class&nbsp;for&nbsp;arg&nbsp;size&nbsp;sz</span><br>
<span class="lineno"></span><span class="comment" id="1654217">//go:nosplit</span><br>
<span class="lineno">105</span><span class="keyword" id="1654230">func</span>&nbsp;<span class="ident" id="1654235">deferclass</span><span class="op" id="1654245">(</span><span class="ident" id="1654246">siz</span>&nbsp;<span class="builtintype" id="1654250">uintptr</span><span class="op" id="1654257">)</span>&nbsp;<span class="builtintype" id="1654259">uintptr</span>&nbsp;<span class="op" id="1654267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654270">if</span>&nbsp;<span class="ident" id="1654273"><a href="/gostd/runtime/panic.go.html#1654246">siz</a></span>&nbsp;<span class="op" id="1654277">&lt;=</span>&nbsp;<span class="ident" id="1654280"><a href="/gostd/runtime/panic.go.html#1654128">minDeferArgs</a></span>&nbsp;<span class="op" id="1654293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654297">return</span>&nbsp;<span class="num" id="1654304">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1654307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654310">return</span>&nbsp;<span class="op" id="1654317">(</span><span class="ident" id="1654318"><a href="/gostd/runtime/panic.go.html#1654246">siz</a></span>&nbsp;<span class="op" id="1654322">-</span>&nbsp;<span class="ident" id="1654324"><a href="/gostd/runtime/panic.go.html#1654128">minDeferArgs</a></span>&nbsp;<span class="op" id="1654337">+</span>&nbsp;<span class="num" id="1654339">15</span><span class="op" id="1654341">)</span>&nbsp;<span class="op" id="1654343">/</span>&nbsp;<span class="num" id="1654345">16</span><br>
<span class="lineno">110</span><span class="op" id="1654348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1654351">//&nbsp;total&nbsp;size&nbsp;of&nbsp;memory&nbsp;block&nbsp;for&nbsp;defer&nbsp;with&nbsp;arg&nbsp;size&nbsp;sz</span><br>
<span class="lineno"></span><span class="keyword" id="1654408">func</span>&nbsp;<span class="ident" id="1654413">totaldefersize</span><span class="op" id="1654427">(</span><span class="ident" id="1654428">siz</span>&nbsp;<span class="builtintype" id="1654432">uintptr</span><span class="op" id="1654439">)</span>&nbsp;<span class="builtintype" id="1654441">uintptr</span>&nbsp;<span class="op" id="1654449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654452">if</span>&nbsp;<span class="ident" id="1654455"><a href="/gostd/runtime/panic.go.html#1654428">siz</a></span>&nbsp;<span class="op" id="1654459">&lt;=</span>&nbsp;<span class="ident" id="1654462"><a href="/gostd/runtime/panic.go.html#1654128">minDeferArgs</a></span>&nbsp;<span class="op" id="1654475">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654479">return</span>&nbsp;<span class="ident" id="1654486"><a href="/gostd/runtime/panic.go.html#1654080">minDeferAlloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1654501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654504">return</span>&nbsp;<span class="ident" id="1654511"><a href="/gostd/runtime/panic.go.html#1654037">deferHeaderSize</a></span>&nbsp;<span class="op" id="1654527">+</span>&nbsp;<span class="ident" id="1654529"><a href="/gostd/runtime/panic.go.html#1654428">siz</a></span><br>
<span class="lineno"></span><span class="op" id="1654533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="1654536">//&nbsp;Ensure&nbsp;that&nbsp;defer&nbsp;arg&nbsp;sizes&nbsp;that&nbsp;map&nbsp;to&nbsp;the&nbsp;same&nbsp;defer&nbsp;size&nbsp;class</span><br>
<span class="lineno"></span><span class="comment" id="1654605">//&nbsp;also&nbsp;map&nbsp;to&nbsp;the&nbsp;same&nbsp;malloc&nbsp;size&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="1654648">func</span>&nbsp;<span class="ident" id="1654653">testdefersizes</span><span class="op" id="1654667">(</span><span class="op" id="1654668">)</span>&nbsp;<span class="op" id="1654670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654673">var</span>&nbsp;<span class="ident" id="1654677">m</span>&nbsp;<span class="op" id="1654679">[</span><span class="builtinfunc" id="1654680">len</span><span class="op" id="1654683">(</span><span class="ident" id="1654684"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788596">p</a></span><span class="op" id="1654685">{</span><span class="op" id="1654686">}</span><span class="op" id="1654687">.</span><span class="ident" id="1654688"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788714">deferpool</a></span><span class="op" id="1654697">)</span><span class="op" id="1654698">]</span><span class="builtintype" id="1654699">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654707">for</span>&nbsp;<span class="ident" id="1654711">i</span>&nbsp;<span class="op" id="1654713">:=</span>&nbsp;<span class="keyword" id="1654716">range</span>&nbsp;<span class="ident" id="1654722"><a href="/gostd/runtime/panic.go.html#1654677">m</a></span>&nbsp;<span class="op" id="1654724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1654728"><a href="/gostd/runtime/panic.go.html#1654677">m</a></span><span class="op" id="1654729">[</span><span class="ident" id="1654730"><a href="/gostd/runtime/panic.go.html#1654711">i</a></span><span class="op" id="1654731">]</span>&nbsp;<span class="op" id="1654733">=</span>&nbsp;<span class="op" id="1654735">-</span><span class="num" id="1654736">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1654739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654742">for</span>&nbsp;<span class="ident" id="1654746">i</span>&nbsp;<span class="op" id="1654748">:=</span>&nbsp;<span class="builtintype" id="1654751">uintptr</span><span class="op" id="1654758">(</span><span class="num" id="1654759">0</span><span class="op" id="1654760">)</span><span class="op" id="1654761">;</span>&nbsp;<span class="op" id="1654763">;</span>&nbsp;<span class="ident" id="1654765"><a href="/gostd/runtime/panic.go.html#1654746">i</a></span><span class="op" id="1654766">++</span>&nbsp;<span class="op" id="1654769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1654773">defersc</span>&nbsp;<span class="op" id="1654781">:=</span>&nbsp;<span class="ident" id="1654784"><a href="/gostd/runtime/panic.go.html#1654235">deferclass</a></span><span class="op" id="1654794">(</span><span class="ident" id="1654795"><a href="/gostd/runtime/panic.go.html#1654746">i</a></span><span class="op" id="1654796">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654800">if</span>&nbsp;<span class="ident" id="1654803"><a href="/gostd/runtime/panic.go.html#1654773">defersc</a></span>&nbsp;<span class="op" id="1654811">&gt;=</span>&nbsp;<span class="builtintype" id="1654814">uintptr</span><span class="op" id="1654821">(</span><span class="builtinfunc" id="1654822">len</span><span class="op" id="1654825">(</span><span class="ident" id="1654826"><a href="/gostd/runtime/panic.go.html#1654677">m</a></span><span class="op" id="1654827">)</span><span class="op" id="1654828">)</span>&nbsp;<span class="op" id="1654830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654835">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1654843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1654847">siz</span>&nbsp;<span class="op" id="1654851">:=</span>&nbsp;<span class="ident" id="1654854"><a href="/gostd/runtime/malloc.go.html#1599278">goroundupsize</a></span><span class="op" id="1654867">(</span><span class="ident" id="1654868"><a href="/gostd/runtime/panic.go.html#1654413">totaldefersize</a></span><span class="op" id="1654882">(</span><span class="ident" id="1654883"><a href="/gostd/runtime/panic.go.html#1654746">i</a></span><span class="op" id="1654884">)</span><span class="op" id="1654885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654889">if</span>&nbsp;<span class="ident" id="1654892"><a href="/gostd/runtime/panic.go.html#1654677">m</a></span><span class="op" id="1654893">[</span><span class="ident" id="1654894"><a href="/gostd/runtime/panic.go.html#1654773">defersc</a></span><span class="op" id="1654901">]</span>&nbsp;<span class="op" id="1654903">&lt;</span>&nbsp;<span class="num" id="1654905">0</span>&nbsp;<span class="op" id="1654907">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1654912"><a href="/gostd/runtime/panic.go.html#1654677">m</a></span><span class="op" id="1654913">[</span><span class="ident" id="1654914"><a href="/gostd/runtime/panic.go.html#1654773">defersc</a></span><span class="op" id="1654921">]</span>&nbsp;<span class="op" id="1654923">=</span>&nbsp;<span class="builtintype" id="1654925">int32</span><span class="op" id="1654930">(</span><span class="ident" id="1654931"><a href="/gostd/runtime/panic.go.html#1654847">siz</a></span><span class="op" id="1654934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654939">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1654950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1654954">if</span>&nbsp;<span class="ident" id="1654957"><a href="/gostd/runtime/panic.go.html#1654677">m</a></span><span class="op" id="1654958">[</span><span class="ident" id="1654959"><a href="/gostd/runtime/panic.go.html#1654773">defersc</a></span><span class="op" id="1654966">]</span>&nbsp;<span class="op" id="1654968">!=</span>&nbsp;<span class="builtintype" id="1654971">int32</span><span class="op" id="1654976">(</span><span class="ident" id="1654977"><a href="/gostd/runtime/panic.go.html#1654847">siz</a></span><span class="op" id="1654980">)</span>&nbsp;<span class="op" id="1654982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1654987">print</span><span class="op" id="1654992">(</span><span class="string" id="1654993">&#34;bad&nbsp;defer&nbsp;size&nbsp;class:&nbsp;i=&#34;</span><span class="op" id="1655019">,</span>&nbsp;<span class="ident" id="1655021"><a href="/gostd/runtime/panic.go.html#1654746">i</a></span><span class="op" id="1655022">,</span>&nbsp;<span class="string" id="1655024">&#34;&nbsp;siz=&#34;</span><span class="op" id="1655031">,</span>&nbsp;<span class="ident" id="1655033"><a href="/gostd/runtime/panic.go.html#1654847">siz</a></span><span class="op" id="1655036">,</span>&nbsp;<span class="string" id="1655038">&#34;&nbsp;defersc=&#34;</span><span class="op" id="1655049">,</span>&nbsp;<span class="ident" id="1655051"><a href="/gostd/runtime/panic.go.html#1654773">defersc</a></span><span class="op" id="1655058">,</span>&nbsp;<span class="string" id="1655060">&#34;\n&#34;</span><span class="op" id="1655064">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655069"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1655076">(</span><span class="string" id="1655077">&#34;bad&nbsp;defer&nbsp;size&nbsp;class&#34;</span><span class="op" id="1655099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1655103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1655106">}</span><br>
<span class="lineno"></span><span class="op" id="1655108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="1655111">//&nbsp;The&nbsp;arguments&nbsp;associated&nbsp;with&nbsp;a&nbsp;deferred&nbsp;call&nbsp;are&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="1655171">//&nbsp;immediately&nbsp;after&nbsp;the&nbsp;_defer&nbsp;header&nbsp;in&nbsp;memory.</span><br>
<span class="lineno"></span><span class="comment" id="1655221">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1655234">func</span>&nbsp;<span class="ident" id="1655239">deferArgs</span><span class="op" id="1655248">(</span><span class="ident" id="1655249">d</span>&nbsp;<span class="op" id="1655251">*</span><span class="ident" id="1655252"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790701">_defer</a></span><span class="op" id="1655258">)</span>&nbsp;<span class="ident" id="1655260"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1655266">.</span><span class="ident" id="1655267">Pointer</span>&nbsp;<span class="op" id="1655275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1655278">return</span>&nbsp;<span class="ident" id="1655285"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1655288">(</span><span class="ident" id="1655289"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1655295">.</span><span class="ident" id="1655296">Pointer</span><span class="op" id="1655303">(</span><span class="ident" id="1655304"><a href="/gostd/runtime/panic.go.html#1655249">d</a></span><span class="op" id="1655305">)</span><span class="op" id="1655306">,</span>&nbsp;<span class="ident" id="1655308"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1655314">.</span><span class="ident" id="1655315">Sizeof</span><span class="op" id="1655321">(</span><span class="op" id="1655322">*</span><span class="ident" id="1655323"><a href="/gostd/runtime/panic.go.html#1655249">d</a></span><span class="op" id="1655324">)</span><span class="op" id="1655325">)</span><br>
<span class="lineno">150</span><span class="op" id="1655327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1655330">var</span>&nbsp;<span class="ident" id="1655334">deferType</span>&nbsp;<span class="op" id="1655344">*</span><span class="ident" id="1655345"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795605">_type</a></span>&nbsp;<span class="comment" id="1655351">//&nbsp;type&nbsp;of&nbsp;_defer&nbsp;struct</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1655377">func</span>&nbsp;<span class="ident" id="1655382">init</span><span class="op" id="1655386">(</span><span class="op" id="1655387">)</span>&nbsp;<span class="op" id="1655389">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1655392">var</span>&nbsp;<span class="ident" id="1655396">x</span>&nbsp;<span class="keyword" id="1655398">interface</span><span class="op" id="1655407">{</span><span class="op" id="1655408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655411"><a href="/gostd/runtime/panic.go.html#1655396">x</a></span>&nbsp;<span class="op" id="1655413">=</span>&nbsp;<span class="op" id="1655415">(</span><span class="op" id="1655416">*</span><span class="ident" id="1655417"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790701">_defer</a></span><span class="op" id="1655423">)</span><span class="op" id="1655424">(</span><span class="builtintype" id="1655425">nil</span><span class="op" id="1655428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655431"><a href="/gostd/runtime/panic.go.html#1655334">deferType</a></span>&nbsp;<span class="op" id="1655441">=</span>&nbsp;<span class="op" id="1655443">(</span><span class="op" id="1655444">*</span><span class="op" id="1655445">(</span><span class="op" id="1655446">*</span><span class="op" id="1655447">*</span><span class="ident" id="1655448"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796522">ptrtype</a></span><span class="op" id="1655455">)</span><span class="op" id="1655456">(</span><span class="ident" id="1655457"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1655463">.</span><span class="ident" id="1655464">Pointer</span><span class="op" id="1655471">(</span><span class="op" id="1655472">&amp;</span><span class="ident" id="1655473"><a href="/gostd/runtime/panic.go.html#1655396">x</a></span><span class="op" id="1655474">)</span><span class="op" id="1655475">)</span><span class="op" id="1655476">)</span><span class="op" id="1655477">.</span><span class="ident" id="1655478"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796551">elem</a></span><br>
<span class="lineno"></span><span class="op" id="1655483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="1655486">//&nbsp;Allocate&nbsp;a&nbsp;Defer,&nbsp;usually&nbsp;using&nbsp;per-P&nbsp;pool.</span><br>
<span class="lineno"></span><span class="comment" id="1655533">//&nbsp;Each&nbsp;defer&nbsp;must&nbsp;be&nbsp;released&nbsp;with&nbsp;freedefer.</span><br>
<span class="lineno"></span><span class="comment" id="1655580">//&nbsp;Note:&nbsp;runs&nbsp;on&nbsp;M&nbsp;stack</span><br>
<span class="lineno"></span><span class="keyword" id="1655605">func</span>&nbsp;<span class="ident" id="1655610">newdefer</span><span class="op" id="1655618">(</span><span class="ident" id="1655619">siz</span>&nbsp;<span class="builtintype" id="1655623">int32</span><span class="op" id="1655628">)</span>&nbsp;<span class="op" id="1655630">*</span><span class="ident" id="1655631"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790701">_defer</a></span>&nbsp;<span class="op" id="1655638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1655641">var</span>&nbsp;<span class="ident" id="1655645">d</span>&nbsp;<span class="op" id="1655647">*</span><span class="ident" id="1655648"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790701">_defer</a></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655656">sc</span>&nbsp;<span class="op" id="1655659">:=</span>&nbsp;<span class="ident" id="1655662"><a href="/gostd/runtime/panic.go.html#1654235">deferclass</a></span><span class="op" id="1655672">(</span><span class="builtintype" id="1655673">uintptr</span><span class="op" id="1655680">(</span><span class="ident" id="1655681"><a href="/gostd/runtime/panic.go.html#1655619">siz</a></span><span class="op" id="1655684">)</span><span class="op" id="1655685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655688">mp</span>&nbsp;<span class="op" id="1655691">:=</span>&nbsp;<span class="ident" id="1655694"><a href="/gostd/runtime/stubs.go.html#1738934">acquirem</a></span><span class="op" id="1655702">(</span><span class="op" id="1655703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1655706">if</span>&nbsp;<span class="ident" id="1655709"><a href="/gostd/runtime/panic.go.html#1655656">sc</a></span>&nbsp;<span class="op" id="1655712">&lt;</span>&nbsp;<span class="builtintype" id="1655714">uintptr</span><span class="op" id="1655721">(</span><span class="builtinfunc" id="1655722">len</span><span class="op" id="1655725">(</span><span class="ident" id="1655726"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788596">p</a></span><span class="op" id="1655727">{</span><span class="op" id="1655728">}</span><span class="op" id="1655729">.</span><span class="ident" id="1655730"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788714">deferpool</a></span><span class="op" id="1655739">)</span><span class="op" id="1655740">)</span>&nbsp;<span class="op" id="1655742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655746">pp</span>&nbsp;<span class="op" id="1655749">:=</span>&nbsp;<span class="ident" id="1655752"><a href="/gostd/runtime/panic.go.html#1655688">mp</a></span><span class="op" id="1655754">.</span><span class="ident" id="1655755"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787935">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655759"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span>&nbsp;<span class="op" id="1655761">=</span>&nbsp;<span class="ident" id="1655763"><a href="/gostd/runtime/panic.go.html#1655746">pp</a></span><span class="op" id="1655765">.</span><span class="ident" id="1655766"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788714">deferpool</a></span><span class="op" id="1655775">[</span><span class="ident" id="1655776"><a href="/gostd/runtime/panic.go.html#1655656">sc</a></span><span class="op" id="1655778">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1655782">if</span>&nbsp;<span class="ident" id="1655785"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span>&nbsp;<span class="op" id="1655787">!=</span>&nbsp;<span class="builtintype" id="1655790">nil</span>&nbsp;<span class="op" id="1655794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655799"><a href="/gostd/runtime/panic.go.html#1655746">pp</a></span><span class="op" id="1655801">.</span><span class="ident" id="1655802"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788714">deferpool</a></span><span class="op" id="1655811">[</span><span class="ident" id="1655812"><a href="/gostd/runtime/panic.go.html#1655656">sc</a></span><span class="op" id="1655814">]</span>&nbsp;<span class="op" id="1655816">=</span>&nbsp;<span class="ident" id="1655818"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span><span class="op" id="1655819">.</span><span class="ident" id="1655820"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1655827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1655830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1655833">if</span>&nbsp;<span class="ident" id="1655836"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span>&nbsp;<span class="op" id="1655838">==</span>&nbsp;<span class="builtintype" id="1655841">nil</span>&nbsp;<span class="op" id="1655845">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1655849">//&nbsp;Allocate&nbsp;new&nbsp;defer+args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655879">total</span>&nbsp;<span class="op" id="1655885">:=</span>&nbsp;<span class="ident" id="1655888"><a href="/gostd/runtime/malloc.go.html#1599278">goroundupsize</a></span><span class="op" id="1655901">(</span><span class="ident" id="1655902"><a href="/gostd/runtime/panic.go.html#1654413">totaldefersize</a></span><span class="op" id="1655916">(</span><span class="builtintype" id="1655917">uintptr</span><span class="op" id="1655924">(</span><span class="ident" id="1655925"><a href="/gostd/runtime/panic.go.html#1655619">siz</a></span><span class="op" id="1655928">)</span><span class="op" id="1655929">)</span><span class="op" id="1655930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655934"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span>&nbsp;<span class="op" id="1655936">=</span>&nbsp;<span class="op" id="1655938">(</span><span class="op" id="1655939">*</span><span class="ident" id="1655940"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790701">_defer</a></span><span class="op" id="1655946">)</span><span class="op" id="1655947">(</span><span class="ident" id="1655948"><a href="/gostd/runtime/malloc.go.html#1589627">mallocgc</a></span><span class="op" id="1655956">(</span><span class="ident" id="1655957"><a href="/gostd/runtime/panic.go.html#1655879">total</a></span><span class="op" id="1655962">,</span>&nbsp;<span class="ident" id="1655964"><a href="/gostd/runtime/panic.go.html#1655334">deferType</a></span><span class="op" id="1655973">,</span>&nbsp;<span class="num" id="1655975">0</span><span class="op" id="1655976">)</span><span class="op" id="1655977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1655980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655983"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span><span class="op" id="1655984">.</span><span class="ident" id="1655985"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790718">siz</a></span>&nbsp;<span class="op" id="1655989">=</span>&nbsp;<span class="ident" id="1655991"><a href="/gostd/runtime/panic.go.html#1655619">siz</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1655996">gp</span>&nbsp;<span class="op" id="1655999">:=</span>&nbsp;<span class="ident" id="1656002"><a href="/gostd/runtime/panic.go.html#1655688">mp</a></span><span class="op" id="1656004">.</span><span class="ident" id="1656005"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656011"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span><span class="op" id="1656012">.</span><span class="ident" id="1656013"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span>&nbsp;<span class="op" id="1656018">=</span>&nbsp;<span class="ident" id="1656020"><a href="/gostd/runtime/panic.go.html#1655996">gp</a></span><span class="op" id="1656022">.</span><span class="ident" id="1656023"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656031"><a href="/gostd/runtime/panic.go.html#1655996">gp</a></span><span class="op" id="1656033">.</span><span class="ident" id="1656034"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span>&nbsp;<span class="op" id="1656041">=</span>&nbsp;<span class="ident" id="1656043"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656046"><a href="/gostd/runtime/stubs.go.html#1738953">releasem</a></span><span class="op" id="1656054">(</span><span class="ident" id="1656055"><a href="/gostd/runtime/panic.go.html#1655688">mp</a></span><span class="op" id="1656057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1656060">return</span>&nbsp;<span class="ident" id="1656067"><a href="/gostd/runtime/panic.go.html#1655645">d</a></span><br>
<span class="lineno">185</span><span class="op" id="1656069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1656072">//&nbsp;Free&nbsp;the&nbsp;given&nbsp;defer.</span><br>
<span class="lineno"></span><span class="comment" id="1656097">//&nbsp;The&nbsp;defer&nbsp;cannot&nbsp;be&nbsp;used&nbsp;after&nbsp;this&nbsp;call.</span><br>
<span class="lineno"></span><span class="comment" id="1656142">//go:nosplit</span><br>
<span class="lineno">190</span><span class="keyword" id="1656155">func</span>&nbsp;<span class="ident" id="1656160">freedefer</span><span class="op" id="1656169">(</span><span class="ident" id="1656170">d</span>&nbsp;<span class="op" id="1656172">*</span><span class="ident" id="1656173"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790701">_defer</a></span><span class="op" id="1656179">)</span>&nbsp;<span class="op" id="1656181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1656184">if</span>&nbsp;<span class="ident" id="1656187"><a href="/gostd/runtime/panic.go.html#1656170">d</a></span><span class="op" id="1656188">.</span><span class="ident" id="1656189"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span>&nbsp;<span class="op" id="1656196">!=</span>&nbsp;<span class="builtintype" id="1656199">nil</span>&nbsp;<span class="op" id="1656203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656207"><a href="/gostd/runtime/panic.go.html#1656557">freedeferpanic</a></span><span class="op" id="1656221">(</span><span class="op" id="1656222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1656225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1656228">if</span>&nbsp;<span class="ident" id="1656231"><a href="/gostd/runtime/panic.go.html#1656170">d</a></span><span class="op" id="1656232">.</span><span class="ident" id="1656233"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span>&nbsp;<span class="op" id="1656236">!=</span>&nbsp;<span class="builtintype" id="1656239">nil</span>&nbsp;<span class="op" id="1656243">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656247"><a href="/gostd/runtime/panic.go.html#1656684">freedeferfn</a></span><span class="op" id="1656258">(</span><span class="op" id="1656259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1656262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656265">sc</span>&nbsp;<span class="op" id="1656268">:=</span>&nbsp;<span class="ident" id="1656271"><a href="/gostd/runtime/panic.go.html#1654235">deferclass</a></span><span class="op" id="1656281">(</span><span class="builtintype" id="1656282">uintptr</span><span class="op" id="1656289">(</span><span class="ident" id="1656290"><a href="/gostd/runtime/panic.go.html#1656170">d</a></span><span class="op" id="1656291">.</span><span class="ident" id="1656292"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790718">siz</a></span><span class="op" id="1656295">)</span><span class="op" id="1656296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1656299">if</span>&nbsp;<span class="ident" id="1656302"><a href="/gostd/runtime/panic.go.html#1656265">sc</a></span>&nbsp;<span class="op" id="1656305">&lt;</span>&nbsp;<span class="builtintype" id="1656307">uintptr</span><span class="op" id="1656314">(</span><span class="builtinfunc" id="1656315">len</span><span class="op" id="1656318">(</span><span class="ident" id="1656319"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788596">p</a></span><span class="op" id="1656320">{</span><span class="op" id="1656321">}</span><span class="op" id="1656322">.</span><span class="ident" id="1656323"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788714">deferpool</a></span><span class="op" id="1656332">)</span><span class="op" id="1656333">)</span>&nbsp;<span class="op" id="1656335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656339">mp</span>&nbsp;<span class="op" id="1656342">:=</span>&nbsp;<span class="ident" id="1656345"><a href="/gostd/runtime/stubs.go.html#1738934">acquirem</a></span><span class="op" id="1656353">(</span><span class="op" id="1656354">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656358">pp</span>&nbsp;<span class="op" id="1656361">:=</span>&nbsp;<span class="ident" id="1656364"><a href="/gostd/runtime/panic.go.html#1656339">mp</a></span><span class="op" id="1656366">.</span><span class="ident" id="1656367"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787935">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1656371">*</span><span class="ident" id="1656372"><a href="/gostd/runtime/panic.go.html#1656170">d</a></span>&nbsp;<span class="op" id="1656374">=</span>&nbsp;<span class="ident" id="1656376"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790701">_defer</a></span><span class="op" id="1656382">{</span><span class="op" id="1656383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656387"><a href="/gostd/runtime/panic.go.html#1656170">d</a></span><span class="op" id="1656388">.</span><span class="ident" id="1656389"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span>&nbsp;<span class="op" id="1656394">=</span>&nbsp;<span class="ident" id="1656396"><a href="/gostd/runtime/panic.go.html#1656358">pp</a></span><span class="op" id="1656398">.</span><span class="ident" id="1656399"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788714">deferpool</a></span><span class="op" id="1656408">[</span><span class="ident" id="1656409"><a href="/gostd/runtime/panic.go.html#1656265">sc</a></span><span class="op" id="1656411">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656415"><a href="/gostd/runtime/panic.go.html#1656358">pp</a></span><span class="op" id="1656417">.</span><span class="ident" id="1656418"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788714">deferpool</a></span><span class="op" id="1656427">[</span><span class="ident" id="1656428"><a href="/gostd/runtime/panic.go.html#1656265">sc</a></span><span class="op" id="1656430">]</span>&nbsp;<span class="op" id="1656432">=</span>&nbsp;<span class="ident" id="1656434"><a href="/gostd/runtime/panic.go.html#1656170">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656438"><a href="/gostd/runtime/stubs.go.html#1738953">releasem</a></span><span class="op" id="1656446">(</span><span class="ident" id="1656447"><a href="/gostd/runtime/panic.go.html#1656339">mp</a></span><span class="op" id="1656449">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1656452">}</span><br>
<span class="lineno"></span><span class="op" id="1656454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1656457">//&nbsp;Separate&nbsp;function&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;split&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="1656506">//&nbsp;Windows&nbsp;otherwise&nbsp;runs&nbsp;out&nbsp;of&nbsp;stack&nbsp;space.</span><br>
<span class="lineno">210</span><span class="keyword" id="1656552">func</span>&nbsp;<span class="ident" id="1656557">freedeferpanic</span><span class="op" id="1656571">(</span><span class="op" id="1656572">)</span>&nbsp;<span class="op" id="1656574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1656577">//&nbsp;_panic&nbsp;must&nbsp;be&nbsp;cleared&nbsp;before&nbsp;d&nbsp;is&nbsp;unlinked&nbsp;from&nbsp;gp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656634"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1656641">(</span><span class="string" id="1656642">&#34;freedefer&nbsp;with&nbsp;d._panic&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="1656674">)</span><br>
<span class="lineno"></span><span class="op" id="1656676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="1656679">func</span>&nbsp;<span class="ident" id="1656684">freedeferfn</span><span class="op" id="1656695">(</span><span class="op" id="1656696">)</span>&nbsp;<span class="op" id="1656698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1656701">//&nbsp;fn&nbsp;must&nbsp;be&nbsp;cleared&nbsp;before&nbsp;d&nbsp;is&nbsp;unlinked&nbsp;from&nbsp;gp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1656754"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1656761">(</span><span class="string" id="1656762">&#34;freedefer&nbsp;with&nbsp;d.fn&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="1656790">)</span><br>
<span class="lineno"></span><span class="op" id="1656792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="1656795">//&nbsp;Run&nbsp;a&nbsp;deferred&nbsp;function&nbsp;if&nbsp;there&nbsp;is&nbsp;one.</span><br>
<span class="lineno"></span><span class="comment" id="1656839">//&nbsp;The&nbsp;compiler&nbsp;inserts&nbsp;a&nbsp;call&nbsp;to&nbsp;this&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="1656896">//&nbsp;function&nbsp;which&nbsp;calls&nbsp;defer.</span><br>
<span class="lineno"></span><span class="comment" id="1656927">//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;deferred&nbsp;function,&nbsp;this&nbsp;will&nbsp;call&nbsp;runtimejmpdefer,</span><br>
<span class="lineno"></span><span class="comment" id="1656997">//&nbsp;which&nbsp;will&nbsp;jump&nbsp;to&nbsp;the&nbsp;deferred&nbsp;function&nbsp;such&nbsp;that&nbsp;it&nbsp;appears</span><br>
<span class="lineno">225</span><span class="comment" id="1657062">//&nbsp;to&nbsp;have&nbsp;been&nbsp;called&nbsp;by&nbsp;the&nbsp;caller&nbsp;of&nbsp;deferreturn&nbsp;at&nbsp;the&nbsp;point</span><br>
<span class="lineno"></span><span class="comment" id="1657127">//&nbsp;just&nbsp;before&nbsp;deferreturn&nbsp;was&nbsp;called.&nbsp;&nbsp;The&nbsp;effect&nbsp;is&nbsp;that&nbsp;deferreturn</span><br>
<span class="lineno"></span><span class="comment" id="1657198">//&nbsp;is&nbsp;called&nbsp;again&nbsp;and&nbsp;again&nbsp;until&nbsp;there&nbsp;are&nbsp;no&nbsp;more&nbsp;deferred&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="1657271">//&nbsp;Cannot&nbsp;split&nbsp;the&nbsp;stack&nbsp;because&nbsp;we&nbsp;reuse&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1657336">//&nbsp;call&nbsp;the&nbsp;deferred&nbsp;function.</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="1657368">//&nbsp;The&nbsp;single&nbsp;argument&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;-&nbsp;it&nbsp;just&nbsp;has&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="1657437">//&nbsp;taken&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;matched&nbsp;against&nbsp;pending&nbsp;defers.</span><br>
<span class="lineno"></span><span class="comment" id="1657491">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1657504">func</span>&nbsp;<span class="ident" id="1657509">deferreturn</span><span class="op" id="1657520">(</span><span class="ident" id="1657521">arg0</span>&nbsp;<span class="builtintype" id="1657526">uintptr</span><span class="op" id="1657533">)</span>&nbsp;<span class="op" id="1657535">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657538">gp</span>&nbsp;<span class="op" id="1657541">:=</span>&nbsp;<span class="ident" id="1657544"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1657548">(</span><span class="op" id="1657549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657552">d</span>&nbsp;<span class="op" id="1657554">:=</span>&nbsp;<span class="ident" id="1657557"><a href="/gostd/runtime/panic.go.html#1657538">gp</a></span><span class="op" id="1657559">.</span><span class="ident" id="1657560"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1657568">if</span>&nbsp;<span class="ident" id="1657571"><a href="/gostd/runtime/panic.go.html#1657552">d</a></span>&nbsp;<span class="op" id="1657573">==</span>&nbsp;<span class="builtintype" id="1657576">nil</span>&nbsp;<span class="op" id="1657580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1657584">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1657592">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657595">argp</span>&nbsp;<span class="op" id="1657600">:=</span>&nbsp;<span class="builtintype" id="1657603">uintptr</span><span class="op" id="1657610">(</span><span class="ident" id="1657611"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1657617">.</span><span class="ident" id="1657618">Pointer</span><span class="op" id="1657625">(</span><span class="op" id="1657626">&amp;</span><span class="ident" id="1657627"><a href="/gostd/runtime/panic.go.html#1657521">arg0</a></span><span class="op" id="1657631">)</span><span class="op" id="1657632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1657635">if</span>&nbsp;<span class="ident" id="1657638"><a href="/gostd/runtime/panic.go.html#1657552">d</a></span><span class="op" id="1657639">.</span><span class="ident" id="1657640"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790743">argp</a></span>&nbsp;<span class="op" id="1657645">!=</span>&nbsp;<span class="ident" id="1657648"><a href="/gostd/runtime/panic.go.html#1657595">argp</a></span>&nbsp;<span class="op" id="1657653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1657657">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1657665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1657669">//&nbsp;Moving&nbsp;arguments&nbsp;around.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1657698">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;preemption&nbsp;here,&nbsp;because&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1657762">//&nbsp;won&#39;t&nbsp;know&nbsp;the&nbsp;form&nbsp;of&nbsp;the&nbsp;arguments&nbsp;until&nbsp;the&nbsp;jmpdefer&nbsp;can</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1657826">//&nbsp;flip&nbsp;the&nbsp;PC&nbsp;over&nbsp;to&nbsp;fn.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657854">mp</span>&nbsp;<span class="op" id="1657857">:=</span>&nbsp;<span class="ident" id="1657860"><a href="/gostd/runtime/stubs.go.html#1738934">acquirem</a></span><span class="op" id="1657868">(</span><span class="op" id="1657869">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657872"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1657879">(</span><span class="ident" id="1657880"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1657886">.</span><span class="ident" id="1657887">Pointer</span><span class="op" id="1657894">(</span><span class="ident" id="1657895"><a href="/gostd/runtime/panic.go.html#1657595">argp</a></span><span class="op" id="1657899">)</span><span class="op" id="1657900">,</span>&nbsp;<span class="ident" id="1657902"><a href="/gostd/runtime/panic.go.html#1655239">deferArgs</a></span><span class="op" id="1657911">(</span><span class="ident" id="1657912"><a href="/gostd/runtime/panic.go.html#1657552">d</a></span><span class="op" id="1657913">)</span><span class="op" id="1657914">,</span>&nbsp;<span class="builtintype" id="1657916">uintptr</span><span class="op" id="1657923">(</span><span class="ident" id="1657924"><a href="/gostd/runtime/panic.go.html#1657552">d</a></span><span class="op" id="1657925">.</span><span class="ident" id="1657926"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790718">siz</a></span><span class="op" id="1657929">)</span><span class="op" id="1657930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657933">fn</span>&nbsp;<span class="op" id="1657936">:=</span>&nbsp;<span class="ident" id="1657939"><a href="/gostd/runtime/panic.go.html#1657552">d</a></span><span class="op" id="1657940">.</span><span class="ident" id="1657941"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657945"><a href="/gostd/runtime/panic.go.html#1657552">d</a></span><span class="op" id="1657946">.</span><span class="ident" id="1657947"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span>&nbsp;<span class="op" id="1657950">=</span>&nbsp;<span class="builtintype" id="1657952">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657957"><a href="/gostd/runtime/panic.go.html#1657538">gp</a></span><span class="op" id="1657959">.</span><span class="ident" id="1657960"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span>&nbsp;<span class="op" id="1657967">=</span>&nbsp;<span class="ident" id="1657969"><a href="/gostd/runtime/panic.go.html#1657552">d</a></span><span class="op" id="1657970">.</span><span class="ident" id="1657971"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657977"><a href="/gostd/runtime/panic.go.html#1656160">freedefer</a></span><span class="op" id="1657986">(</span><span class="ident" id="1657987"><a href="/gostd/runtime/panic.go.html#1657552">d</a></span><span class="op" id="1657988">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1657991"><a href="/gostd/runtime/stubs.go.html#1738953">releasem</a></span><span class="op" id="1657999">(</span><span class="ident" id="1658000"><a href="/gostd/runtime/panic.go.html#1657854">mp</a></span><span class="op" id="1658002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658005"><a href="/gostd/runtime/stubs.go.html#1743800">jmpdefer</a></span><span class="op" id="1658013">(</span><span class="ident" id="1658014"><a href="/gostd/runtime/panic.go.html#1657933">fn</a></span><span class="op" id="1658016">,</span>&nbsp;<span class="ident" id="1658018"><a href="/gostd/runtime/panic.go.html#1657595">argp</a></span><span class="op" id="1658022">)</span><br>
<span class="lineno"></span><span class="op" id="1658024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1658027">//&nbsp;Goexit&nbsp;terminates&nbsp;the&nbsp;goroutine&nbsp;that&nbsp;calls&nbsp;it.&nbsp;&nbsp;No&nbsp;other&nbsp;goroutine&nbsp;is&nbsp;affected.</span><br>
<span class="lineno">260</span><span class="comment" id="1658110">//&nbsp;Goexit&nbsp;runs&nbsp;all&nbsp;deferred&nbsp;calls&nbsp;before&nbsp;terminating&nbsp;the&nbsp;goroutine.&nbsp;&nbsp;Because&nbsp;Goexit</span><br>
<span class="lineno"></span><span class="comment" id="1658194">//&nbsp;is&nbsp;not&nbsp;panic,&nbsp;however,&nbsp;any&nbsp;recover&nbsp;calls&nbsp;in&nbsp;those&nbsp;deferred&nbsp;functions&nbsp;will&nbsp;return&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="1658283">//</span><br>
<span class="lineno"></span><span class="comment" id="1658286">//&nbsp;Calling&nbsp;Goexit&nbsp;from&nbsp;the&nbsp;main&nbsp;goroutine&nbsp;terminates&nbsp;that&nbsp;goroutine</span><br>
<span class="lineno"></span><span class="comment" id="1658354">//&nbsp;without&nbsp;func&nbsp;main&nbsp;returning.&nbsp;Since&nbsp;func&nbsp;main&nbsp;has&nbsp;not&nbsp;returned,</span><br>
<span class="lineno">265</span><span class="comment" id="1658420">//&nbsp;the&nbsp;program&nbsp;continues&nbsp;execution&nbsp;of&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="comment" id="1658476">//&nbsp;If&nbsp;all&nbsp;other&nbsp;goroutines&nbsp;exit,&nbsp;the&nbsp;program&nbsp;crashes.</span><br>
<span class="lineno"></span><span class="keyword" id="1658530">func</span>&nbsp;<span class="ident" id="1658535">Goexit</span><span class="op" id="1658541">(</span><span class="op" id="1658542">)</span>&nbsp;<span class="op" id="1658544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1658547">//&nbsp;Run&nbsp;all&nbsp;deferred&nbsp;functions&nbsp;for&nbsp;the&nbsp;current&nbsp;goroutine.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1658605">//&nbsp;This&nbsp;code&nbsp;is&nbsp;similar&nbsp;to&nbsp;gopanic,&nbsp;see&nbsp;that&nbsp;implementation</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1658666">//&nbsp;for&nbsp;detailed&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658693">gp</span>&nbsp;<span class="op" id="1658696">:=</span>&nbsp;<span class="ident" id="1658699"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1658703">(</span><span class="op" id="1658704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1658707">for</span>&nbsp;<span class="op" id="1658711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658715">d</span>&nbsp;<span class="op" id="1658717">:=</span>&nbsp;<span class="ident" id="1658720"><a href="/gostd/runtime/panic.go.html#1658693">gp</a></span><span class="op" id="1658722">.</span><span class="ident" id="1658723"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1658732">if</span>&nbsp;<span class="ident" id="1658735"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span>&nbsp;<span class="op" id="1658737">==</span>&nbsp;<span class="builtintype" id="1658740">nil</span>&nbsp;<span class="op" id="1658744">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1658749">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1658757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1658761">if</span>&nbsp;<span class="ident" id="1658764"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658765">.</span><span class="ident" id="1658766"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790729">started</a></span>&nbsp;<span class="op" id="1658774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1658779">if</span>&nbsp;<span class="ident" id="1658782"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658783">.</span><span class="ident" id="1658784"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span>&nbsp;<span class="op" id="1658791">!=</span>&nbsp;<span class="builtintype" id="1658794">nil</span>&nbsp;<span class="op" id="1658798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658804"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658805">.</span><span class="ident" id="1658806"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span><span class="op" id="1658812">.</span><span class="ident" id="1658813"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790904">aborted</a></span>&nbsp;<span class="op" id="1658821">=</span>&nbsp;<span class="builtintype" id="1658823">true</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658832"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658833">.</span><span class="ident" id="1658834"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span>&nbsp;<span class="op" id="1658841">=</span>&nbsp;<span class="builtintype" id="1658843">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1658850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658855"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658856">.</span><span class="ident" id="1658857"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span>&nbsp;<span class="op" id="1658860">=</span>&nbsp;<span class="builtintype" id="1658862">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658869"><a href="/gostd/runtime/panic.go.html#1658693">gp</a></span><span class="op" id="1658871">.</span><span class="ident" id="1658872"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span>&nbsp;<span class="op" id="1658879">=</span>&nbsp;<span class="ident" id="1658881"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658882">.</span><span class="ident" id="1658883"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658891"><a href="/gostd/runtime/panic.go.html#1656160">freedefer</a></span><span class="op" id="1658900">(</span><span class="ident" id="1658901"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658902">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1658907">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1658918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658922"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658923">.</span><span class="ident" id="1658924"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790729">started</a></span>&nbsp;<span class="op" id="1658932">=</span>&nbsp;<span class="builtintype" id="1658934">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1658941"><a href="/gostd/runtime/stubs.go.html#1744361">reflectcall</a></span><span class="op" id="1658952">(</span><span class="ident" id="1658953"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1658959">.</span><span class="ident" id="1658960">Pointer</span><span class="op" id="1658967">(</span><span class="ident" id="1658968"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658969">.</span><span class="ident" id="1658970"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span><span class="op" id="1658972">)</span><span class="op" id="1658973">,</span>&nbsp;<span class="ident" id="1658975"><a href="/gostd/runtime/panic.go.html#1655239">deferArgs</a></span><span class="op" id="1658984">(</span><span class="ident" id="1658985"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658986">)</span><span class="op" id="1658987">,</span>&nbsp;<span class="builtintype" id="1658989">uint32</span><span class="op" id="1658995">(</span><span class="ident" id="1658996"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1658997">.</span><span class="ident" id="1658998"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790718">siz</a></span><span class="op" id="1659001">)</span><span class="op" id="1659002">,</span>&nbsp;<span class="builtintype" id="1659004">uint32</span><span class="op" id="1659010">(</span><span class="ident" id="1659011"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1659012">.</span><span class="ident" id="1659013"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790718">siz</a></span><span class="op" id="1659016">)</span><span class="op" id="1659017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1659021">if</span>&nbsp;<span class="ident" id="1659024"><a href="/gostd/runtime/panic.go.html#1658693">gp</a></span><span class="op" id="1659026">.</span><span class="ident" id="1659027"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span>&nbsp;<span class="op" id="1659034">!=</span>&nbsp;<span class="ident" id="1659037"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span>&nbsp;<span class="op" id="1659039">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659044"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1659051">(</span><span class="string" id="1659052">&#34;bad&nbsp;defer&nbsp;entry&nbsp;in&nbsp;Goexit&#34;</span><span class="op" id="1659079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1659083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659087"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1659088">.</span><span class="ident" id="1659089"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span>&nbsp;<span class="op" id="1659096">=</span>&nbsp;<span class="builtintype" id="1659098">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659104"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1659105">.</span><span class="ident" id="1659106"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span>&nbsp;<span class="op" id="1659109">=</span>&nbsp;<span class="builtintype" id="1659111">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659117"><a href="/gostd/runtime/panic.go.html#1658693">gp</a></span><span class="op" id="1659119">.</span><span class="ident" id="1659120"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span>&nbsp;<span class="op" id="1659127">=</span>&nbsp;<span class="ident" id="1659129"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1659130">.</span><span class="ident" id="1659131"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659138"><a href="/gostd/runtime/panic.go.html#1656160">freedefer</a></span><span class="op" id="1659147">(</span><span class="ident" id="1659148"><a href="/gostd/runtime/panic.go.html#1658715">d</a></span><span class="op" id="1659149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1659153">//&nbsp;Note:&nbsp;we&nbsp;ignore&nbsp;recovers&nbsp;here&nbsp;because&nbsp;Goexit&nbsp;isn&#39;t&nbsp;a&nbsp;panic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1659216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659219"><a href="/gostd/runtime/stubs.go.html#1744644">goexit</a></span><span class="op" id="1659225">(</span><span class="op" id="1659226">)</span><br>
<span class="lineno"></span><span class="op" id="1659228">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="keyword" id="1659231">func</span>&nbsp;<span class="ident" id="1659236">canpanic</span><span class="op" id="1659244">(</span><span class="op" id="1659245">*</span><span class="ident" id="1659246"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1659247">)</span>&nbsp;<span class="builtintype" id="1659249">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1659255">//&nbsp;Print&nbsp;all&nbsp;currently&nbsp;active&nbsp;panics.&nbsp;&nbsp;Used&nbsp;when&nbsp;crashing.</span><br>
<span class="lineno"></span><span class="keyword" id="1659314">func</span>&nbsp;<span class="ident" id="1659319">printpanics</span><span class="op" id="1659330">(</span><span class="ident" id="1659331">p</span>&nbsp;<span class="op" id="1659333">*</span><span class="ident" id="1659334"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790819">_panic</a></span><span class="op" id="1659340">)</span>&nbsp;<span class="op" id="1659342">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1659345">if</span>&nbsp;<span class="ident" id="1659348"><a href="/gostd/runtime/panic.go.html#1659331">p</a></span><span class="op" id="1659349">.</span><span class="ident" id="1659350"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790874">link</a></span>&nbsp;<span class="op" id="1659355">!=</span>&nbsp;<span class="builtintype" id="1659358">nil</span>&nbsp;<span class="op" id="1659362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659366"><a href="/gostd/runtime/panic.go.html#1659319">printpanics</a></span><span class="op" id="1659377">(</span><span class="ident" id="1659378"><a href="/gostd/runtime/panic.go.html#1659331">p</a></span><span class="op" id="1659379">.</span><span class="ident" id="1659380"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790874">link</a></span><span class="op" id="1659384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1659388">print</span><span class="op" id="1659393">(</span><span class="string" id="1659394">&#34;\t&#34;</span><span class="op" id="1659398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1659401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1659404">print</span><span class="op" id="1659409">(</span><span class="string" id="1659410">&#34;panic:&nbsp;&#34;</span><span class="op" id="1659419">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659422"><a href="/gostd/runtime/error.go.html#1525988">printany</a></span><span class="op" id="1659430">(</span><span class="ident" id="1659431"><a href="/gostd/runtime/panic.go.html#1659331">p</a></span><span class="op" id="1659432">.</span><span class="ident" id="1659433"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790857">arg</a></span><span class="op" id="1659436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1659439">if</span>&nbsp;<span class="ident" id="1659442"><a href="/gostd/runtime/panic.go.html#1659331">p</a></span><span class="op" id="1659443">.</span><span class="ident" id="1659444"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790888">recovered</a></span>&nbsp;<span class="op" id="1659454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1659458">print</span><span class="op" id="1659463">(</span><span class="string" id="1659464">&#34;&nbsp;[recovered]&#34;</span><span class="op" id="1659478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1659481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1659484">print</span><span class="op" id="1659489">(</span><span class="string" id="1659490">&#34;\n&#34;</span><span class="op" id="1659494">)</span><br>
<span class="lineno">315</span><span class="op" id="1659496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1659499">//&nbsp;The&nbsp;implementation&nbsp;of&nbsp;the&nbsp;predeclared&nbsp;function&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="1659556">func</span>&nbsp;<span class="ident" id="1659561">gopanic</span><span class="op" id="1659568">(</span><span class="ident" id="1659569">e</span>&nbsp;<span class="keyword" id="1659571">interface</span><span class="op" id="1659580">{</span><span class="op" id="1659581">}</span><span class="op" id="1659582">)</span>&nbsp;<span class="op" id="1659584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659587">gp</span>&nbsp;<span class="op" id="1659590">:=</span>&nbsp;<span class="ident" id="1659593"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1659597">(</span><span class="op" id="1659598">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1659601">if</span>&nbsp;<span class="ident" id="1659604"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1659606">.</span><span class="ident" id="1659607"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1659608">.</span><span class="ident" id="1659609"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span>&nbsp;<span class="op" id="1659614">!=</span>&nbsp;<span class="ident" id="1659617"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span>&nbsp;<span class="op" id="1659620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659624"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1659631">(</span><span class="string" id="1659632">&#34;panic&nbsp;on&nbsp;m&nbsp;stack&#34;</span><span class="op" id="1659650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1659653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1659657">//&nbsp;m.softfloat&nbsp;is&nbsp;set&nbsp;during&nbsp;software&nbsp;floating&nbsp;point.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1659712">//&nbsp;It&nbsp;increments&nbsp;m.locks&nbsp;to&nbsp;avoid&nbsp;preemption.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1659759">//&nbsp;We&nbsp;moved&nbsp;the&nbsp;memory&nbsp;loads&nbsp;out,&nbsp;so&nbsp;there&nbsp;shouldn&#39;t&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1659816">//&nbsp;any&nbsp;reason&nbsp;for&nbsp;it&nbsp;to&nbsp;panic&nbsp;anymore.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1659856">if</span>&nbsp;<span class="ident" id="1659859"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1659861">.</span><span class="ident" id="1659862"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1659863">.</span><span class="ident" id="1659864"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788020">softfloat</a></span>&nbsp;<span class="op" id="1659874">!=</span>&nbsp;<span class="num" id="1659877">0</span>&nbsp;<span class="op" id="1659879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659883"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1659885">.</span><span class="ident" id="1659886"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1659887">.</span><span class="ident" id="1659888"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788007">locks</a></span><span class="op" id="1659893">--</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659898"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1659900">.</span><span class="ident" id="1659901"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1659902">.</span><span class="ident" id="1659903"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788020">softfloat</a></span>&nbsp;<span class="op" id="1659913">=</span>&nbsp;<span class="num" id="1659915">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1659919"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1659926">(</span><span class="string" id="1659927">&#34;panic&nbsp;during&nbsp;softfloat&#34;</span><span class="op" id="1659951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1659954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1659957">if</span>&nbsp;<span class="ident" id="1659960"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1659962">.</span><span class="ident" id="1659963"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1659964">.</span><span class="ident" id="1659965"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787961">mallocing</a></span>&nbsp;<span class="op" id="1659975">!=</span>&nbsp;<span class="num" id="1659978">0</span>&nbsp;<span class="op" id="1659980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1659984">print</span><span class="op" id="1659989">(</span><span class="string" id="1659990">&#34;panic:&nbsp;&#34;</span><span class="op" id="1659999">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660003"><a href="/gostd/runtime/error.go.html#1525988">printany</a></span><span class="op" id="1660011">(</span><span class="ident" id="1660012"><a href="/gostd/runtime/panic.go.html#1659569">e</a></span><span class="op" id="1660013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1660017">print</span><span class="op" id="1660022">(</span><span class="string" id="1660023">&#34;\n&#34;</span><span class="op" id="1660027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660031"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1660038">(</span><span class="string" id="1660039">&#34;panic&nbsp;during&nbsp;malloc&#34;</span><span class="op" id="1660060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1660063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660066">if</span>&nbsp;<span class="ident" id="1660069"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1660071">.</span><span class="ident" id="1660072"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1660073">.</span><span class="ident" id="1660074"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787994">gcing</a></span>&nbsp;<span class="op" id="1660080">!=</span>&nbsp;<span class="num" id="1660083">0</span>&nbsp;<span class="op" id="1660085">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1660089">print</span><span class="op" id="1660094">(</span><span class="string" id="1660095">&#34;panic:&nbsp;&#34;</span><span class="op" id="1660104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660108"><a href="/gostd/runtime/error.go.html#1525988">printany</a></span><span class="op" id="1660116">(</span><span class="ident" id="1660117"><a href="/gostd/runtime/panic.go.html#1659569">e</a></span><span class="op" id="1660118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1660122">print</span><span class="op" id="1660127">(</span><span class="string" id="1660128">&#34;\n&#34;</span><span class="op" id="1660132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660136"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1660143">(</span><span class="string" id="1660144">&#34;panic&nbsp;during&nbsp;gc&#34;</span><span class="op" id="1660161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1660164">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660167">if</span>&nbsp;<span class="ident" id="1660170"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1660172">.</span><span class="ident" id="1660173"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1660174">.</span><span class="ident" id="1660175"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788007">locks</a></span>&nbsp;<span class="op" id="1660181">!=</span>&nbsp;<span class="num" id="1660184">0</span>&nbsp;<span class="op" id="1660186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1660190">print</span><span class="op" id="1660195">(</span><span class="string" id="1660196">&#34;panic:&nbsp;&#34;</span><span class="op" id="1660205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660209"><a href="/gostd/runtime/error.go.html#1525988">printany</a></span><span class="op" id="1660217">(</span><span class="ident" id="1660218"><a href="/gostd/runtime/panic.go.html#1659569">e</a></span><span class="op" id="1660219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1660223">print</span><span class="op" id="1660228">(</span><span class="string" id="1660229">&#34;\n&#34;</span><span class="op" id="1660233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660237"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1660244">(</span><span class="string" id="1660245">&#34;panic&nbsp;holding&nbsp;locks&#34;</span><span class="op" id="1660266">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1660269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660273">var</span>&nbsp;<span class="ident" id="1660277">p</span>&nbsp;<span class="ident" id="1660279"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790819">_panic</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660287"><a href="/gostd/runtime/panic.go.html#1660277">p</a></span><span class="op" id="1660288">.</span><span class="ident" id="1660289"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790857">arg</a></span>&nbsp;<span class="op" id="1660293">=</span>&nbsp;<span class="ident" id="1660295"><a href="/gostd/runtime/panic.go.html#1659569">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660298"><a href="/gostd/runtime/panic.go.html#1660277">p</a></span><span class="op" id="1660299">.</span><span class="ident" id="1660300"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790874">link</a></span>&nbsp;<span class="op" id="1660305">=</span>&nbsp;<span class="ident" id="1660307"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1660309">.</span><span class="ident" id="1660310"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660318"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1660320">.</span><span class="ident" id="1660321"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span>&nbsp;<span class="op" id="1660328">=</span>&nbsp;<span class="op" id="1660330">(</span><span class="op" id="1660331">*</span><span class="ident" id="1660332"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790819">_panic</a></span><span class="op" id="1660338">)</span><span class="op" id="1660339">(</span><span class="ident" id="1660340"><a href="/gostd/runtime/stubs.go.html#1743320">noescape</a></span><span class="op" id="1660348">(</span><span class="ident" id="1660349"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1660355">.</span><span class="ident" id="1660356">Pointer</span><span class="op" id="1660363">(</span><span class="op" id="1660364">&amp;</span><span class="ident" id="1660365"><a href="/gostd/runtime/panic.go.html#1660277">p</a></span><span class="op" id="1660366">)</span><span class="op" id="1660367">)</span><span class="op" id="1660368">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660372">for</span>&nbsp;<span class="op" id="1660376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660380">d</span>&nbsp;<span class="op" id="1660382">:=</span>&nbsp;<span class="ident" id="1660385"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1660387">.</span><span class="ident" id="1660388"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660397">if</span>&nbsp;<span class="ident" id="1660400"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span>&nbsp;<span class="op" id="1660402">==</span>&nbsp;<span class="builtintype" id="1660405">nil</span>&nbsp;<span class="op" id="1660409">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660414">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1660422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1660427">//&nbsp;If&nbsp;defer&nbsp;was&nbsp;started&nbsp;by&nbsp;earlier&nbsp;panic&nbsp;or&nbsp;Goexit&nbsp;(and,&nbsp;since&nbsp;we&#39;re&nbsp;back&nbsp;here,&nbsp;that&nbsp;triggered&nbsp;a&nbsp;new&nbsp;panic),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1660538">//&nbsp;take&nbsp;defer&nbsp;off&nbsp;list.&nbsp;The&nbsp;earlier&nbsp;panic&nbsp;or&nbsp;Goexit&nbsp;will&nbsp;not&nbsp;continue&nbsp;running.</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660619">if</span>&nbsp;<span class="ident" id="1660622"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1660623">.</span><span class="ident" id="1660624"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790729">started</a></span>&nbsp;<span class="op" id="1660632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660637">if</span>&nbsp;<span class="ident" id="1660640"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1660641">.</span><span class="ident" id="1660642"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span>&nbsp;<span class="op" id="1660649">!=</span>&nbsp;<span class="builtintype" id="1660652">nil</span>&nbsp;<span class="op" id="1660656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660662"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1660663">.</span><span class="ident" id="1660664"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span><span class="op" id="1660670">.</span><span class="ident" id="1660671"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790904">aborted</a></span>&nbsp;<span class="op" id="1660679">=</span>&nbsp;<span class="builtintype" id="1660681">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1660689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660694"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1660695">.</span><span class="ident" id="1660696"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span>&nbsp;<span class="op" id="1660703">=</span>&nbsp;<span class="builtintype" id="1660705">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660712"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1660713">.</span><span class="ident" id="1660714"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span>&nbsp;<span class="op" id="1660717">=</span>&nbsp;<span class="builtintype" id="1660719">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660726"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1660728">.</span><span class="ident" id="1660729"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span>&nbsp;<span class="op" id="1660736">=</span>&nbsp;<span class="ident" id="1660738"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1660739">.</span><span class="ident" id="1660740"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660748"><a href="/gostd/runtime/panic.go.html#1656160">freedefer</a></span><span class="op" id="1660757">(</span><span class="ident" id="1660758"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1660759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1660764">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1660775">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1660780">//&nbsp;Mark&nbsp;defer&nbsp;as&nbsp;started,&nbsp;but&nbsp;keep&nbsp;on&nbsp;list,&nbsp;so&nbsp;that&nbsp;traceback</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1660844">//&nbsp;can&nbsp;find&nbsp;and&nbsp;update&nbsp;the&nbsp;defer&#39;s&nbsp;argument&nbsp;frame&nbsp;if&nbsp;stack&nbsp;growth</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1660912">//&nbsp;or&nbsp;a&nbsp;garbage&nbsp;collection&nbsp;hapens&nbsp;before&nbsp;reflectcall&nbsp;starts&nbsp;executing&nbsp;d.fn.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1660990"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1660991">.</span><span class="ident" id="1660992"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790729">started</a></span>&nbsp;<span class="op" id="1661000">=</span>&nbsp;<span class="builtintype" id="1661002">true</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1661010">//&nbsp;Record&nbsp;the&nbsp;panic&nbsp;that&nbsp;is&nbsp;running&nbsp;the&nbsp;defer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1661059">//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;new&nbsp;panic&nbsp;during&nbsp;the&nbsp;deferred&nbsp;call,&nbsp;that&nbsp;panic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1661125">//&nbsp;will&nbsp;find&nbsp;d&nbsp;in&nbsp;the&nbsp;list&nbsp;and&nbsp;will&nbsp;mark&nbsp;d._panic&nbsp;(this&nbsp;panic)&nbsp;aborted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661199"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661200">.</span><span class="ident" id="1661201"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span>&nbsp;<span class="op" id="1661208">=</span>&nbsp;<span class="op" id="1661210">(</span><span class="op" id="1661211">*</span><span class="ident" id="1661212"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790819">_panic</a></span><span class="op" id="1661218">)</span><span class="op" id="1661219">(</span><span class="ident" id="1661220"><a href="/gostd/runtime/stubs.go.html#1743320">noescape</a></span><span class="op" id="1661228">(</span><span class="op" id="1661229">(</span><span class="ident" id="1661230"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1661236">.</span><span class="ident" id="1661237">Pointer</span><span class="op" id="1661244">)</span><span class="op" id="1661245">(</span><span class="op" id="1661246">&amp;</span><span class="ident" id="1661247"><a href="/gostd/runtime/panic.go.html#1660277">p</a></span><span class="op" id="1661248">)</span><span class="op" id="1661249">)</span><span class="op" id="1661250">)</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661255"><a href="/gostd/runtime/panic.go.html#1660277">p</a></span><span class="op" id="1661256">.</span><span class="ident" id="1661257"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790836">argp</a></span>&nbsp;<span class="op" id="1661262">=</span>&nbsp;<span class="ident" id="1661264"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1661270">.</span><span class="ident" id="1661271">Pointer</span><span class="op" id="1661278">(</span><span class="ident" id="1661279"><a href="/gostd/runtime/panic.go.html#1662518">getargp</a></span><span class="op" id="1661286">(</span><span class="num" id="1661287">0</span><span class="op" id="1661288">)</span><span class="op" id="1661289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661293"><a href="/gostd/runtime/stubs.go.html#1744361">reflectcall</a></span><span class="op" id="1661304">(</span><span class="ident" id="1661305"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1661311">.</span><span class="ident" id="1661312">Pointer</span><span class="op" id="1661319">(</span><span class="ident" id="1661320"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661321">.</span><span class="ident" id="1661322"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span><span class="op" id="1661324">)</span><span class="op" id="1661325">,</span>&nbsp;<span class="ident" id="1661327"><a href="/gostd/runtime/panic.go.html#1655239">deferArgs</a></span><span class="op" id="1661336">(</span><span class="ident" id="1661337"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661338">)</span><span class="op" id="1661339">,</span>&nbsp;<span class="builtintype" id="1661341">uint32</span><span class="op" id="1661347">(</span><span class="ident" id="1661348"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661349">.</span><span class="ident" id="1661350"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790718">siz</a></span><span class="op" id="1661353">)</span><span class="op" id="1661354">,</span>&nbsp;<span class="builtintype" id="1661356">uint32</span><span class="op" id="1661362">(</span><span class="ident" id="1661363"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661364">.</span><span class="ident" id="1661365"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790718">siz</a></span><span class="op" id="1661368">)</span><span class="op" id="1661369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661373"><a href="/gostd/runtime/panic.go.html#1660277">p</a></span><span class="op" id="1661374">.</span><span class="ident" id="1661375"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790836">argp</a></span>&nbsp;<span class="op" id="1661380">=</span>&nbsp;<span class="builtintype" id="1661382">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1661389">//&nbsp;reflectcall&nbsp;did&nbsp;not&nbsp;panic.&nbsp;Remove&nbsp;d.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1661431">if</span>&nbsp;<span class="ident" id="1661434"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1661436">.</span><span class="ident" id="1661437"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span>&nbsp;<span class="op" id="1661444">!=</span>&nbsp;<span class="ident" id="1661447"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span>&nbsp;<span class="op" id="1661449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661454"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1661461">(</span><span class="string" id="1661462">&#34;bad&nbsp;defer&nbsp;entry&nbsp;in&nbsp;panic&#34;</span><span class="op" id="1661488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1661492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661496"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661497">.</span><span class="ident" id="1661498"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790782">_panic</a></span>&nbsp;<span class="op" id="1661505">=</span>&nbsp;<span class="builtintype" id="1661507">nil</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661513"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661514">.</span><span class="ident" id="1661515"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span>&nbsp;<span class="op" id="1661518">=</span>&nbsp;<span class="builtintype" id="1661520">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661526"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1661528">.</span><span class="ident" id="1661529"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span>&nbsp;<span class="op" id="1661536">=</span>&nbsp;<span class="ident" id="1661538"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661539">.</span><span class="ident" id="1661540"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1661548">//&nbsp;trigger&nbsp;shrinkage&nbsp;to&nbsp;test&nbsp;stack&nbsp;copy.&nbsp;&nbsp;See&nbsp;stack_test.go:TestStackPanic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1661625">//GC()</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661635">pc</span>&nbsp;<span class="op" id="1661638">:=</span>&nbsp;<span class="ident" id="1661641"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661642">.</span><span class="ident" id="1661643"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790757">pc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661648">argp</span>&nbsp;<span class="op" id="1661653">:=</span>&nbsp;<span class="ident" id="1661656"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1661662">.</span><span class="ident" id="1661663">Pointer</span><span class="op" id="1661670">(</span><span class="ident" id="1661671"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661672">.</span><span class="ident" id="1661673"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790743">argp</a></span><span class="op" id="1661677">)</span>&nbsp;<span class="comment" id="1661679">//&nbsp;must&nbsp;be&nbsp;pointer&nbsp;so&nbsp;it&nbsp;gets&nbsp;adjusted&nbsp;during&nbsp;stack&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661738"><a href="/gostd/runtime/panic.go.html#1656160">freedefer</a></span><span class="op" id="1661747">(</span><span class="ident" id="1661748"><a href="/gostd/runtime/panic.go.html#1660380">d</a></span><span class="op" id="1661749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1661753">if</span>&nbsp;<span class="ident" id="1661756"><a href="/gostd/runtime/panic.go.html#1660277">p</a></span><span class="op" id="1661757">.</span><span class="ident" id="1661758"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790888">recovered</a></span>&nbsp;<span class="op" id="1661768">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661773"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1661775">.</span><span class="ident" id="1661776"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span>&nbsp;<span class="op" id="1661783">=</span>&nbsp;<span class="ident" id="1661785"><a href="/gostd/runtime/panic.go.html#1660277">p</a></span><span class="op" id="1661786">.</span><span class="ident" id="1661787"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790874">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1661795">//&nbsp;Aborted&nbsp;panics&nbsp;are&nbsp;marked&nbsp;but&nbsp;remain&nbsp;on&nbsp;the&nbsp;g.panic&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1661859">//&nbsp;Remove&nbsp;them&nbsp;from&nbsp;the&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1661892">for</span>&nbsp;<span class="ident" id="1661896"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1661898">.</span><span class="ident" id="1661899"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span>&nbsp;<span class="op" id="1661906">!=</span>&nbsp;<span class="builtintype" id="1661909">nil</span>&nbsp;<span class="op" id="1661913">&amp;&amp;</span>&nbsp;<span class="ident" id="1661916"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1661918">.</span><span class="ident" id="1661919"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span><span class="op" id="1661925">.</span><span class="ident" id="1661926"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790904">aborted</a></span>&nbsp;<span class="op" id="1661934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1661940"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1661942">.</span><span class="ident" id="1661943"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span>&nbsp;<span class="op" id="1661950">=</span>&nbsp;<span class="ident" id="1661952"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1661954">.</span><span class="ident" id="1661955"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span><span class="op" id="1661961">.</span><span class="ident" id="1661962"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790874">link</a></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1661970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1661975">if</span>&nbsp;<span class="ident" id="1661978"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1661980">.</span><span class="ident" id="1661981"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span>&nbsp;<span class="op" id="1661988">==</span>&nbsp;<span class="builtintype" id="1661991">nil</span>&nbsp;<span class="op" id="1661995">{</span>&nbsp;<span class="comment" id="1661997">//&nbsp;must&nbsp;be&nbsp;done&nbsp;with&nbsp;signal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1662029"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1662031">.</span><span class="ident" id="1662032"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787661">sig</a></span>&nbsp;<span class="op" id="1662036">=</span>&nbsp;<span class="num" id="1662038">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1662043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1662048">//&nbsp;Pass&nbsp;information&nbsp;about&nbsp;recovering&nbsp;frame&nbsp;to&nbsp;recovery.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1662107"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1662109">.</span><span class="ident" id="1662110"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787689">sigcode0</a></span>&nbsp;<span class="op" id="1662119">=</span>&nbsp;<span class="builtintype" id="1662121">uintptr</span><span class="op" id="1662128">(</span><span class="ident" id="1662129"><a href="/gostd/runtime/panic.go.html#1661648">argp</a></span><span class="op" id="1662133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1662138"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1662140">.</span><span class="ident" id="1662141"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787707">sigcode1</a></span>&nbsp;<span class="op" id="1662150">=</span>&nbsp;<span class="ident" id="1662152"><a href="/gostd/runtime/panic.go.html#1661635">pc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1662158"><a href="/gostd/runtime/stubs.go.html#1739644">mcall</a></span><span class="op" id="1662163">(</span><span class="ident" id="1662164"><a href="/gostd/runtime/stubs.go.html#1742056">recovery_m</a></span><span class="op" id="1662174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1662179"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1662186">(</span><span class="string" id="1662187">&#34;recovery&nbsp;failed&#34;</span><span class="op" id="1662204">)</span>&nbsp;<span class="comment" id="1662206">//&nbsp;mcall&nbsp;should&nbsp;not&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1662235">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1662238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1662242">//&nbsp;ran&nbsp;out&nbsp;of&nbsp;deferred&nbsp;calls&nbsp;-&nbsp;old-school&nbsp;panic&nbsp;now</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1662295"><a href="/gostd/runtime/panic.go.html#1663763">startpanic</a></span><span class="op" id="1662305">(</span><span class="op" id="1662306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1662309"><a href="/gostd/runtime/panic.go.html#1659319">printpanics</a></span><span class="op" id="1662320">(</span><span class="ident" id="1662321"><a href="/gostd/runtime/panic.go.html#1659587">gp</a></span><span class="op" id="1662323">.</span><span class="ident" id="1662324"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span><span class="op" id="1662330">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1662333"><a href="/gostd/runtime/panic.go.html#1663827">dopanic</a></span><span class="op" id="1662340">(</span><span class="num" id="1662341">0</span><span class="op" id="1662342">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1662350">//&nbsp;should&nbsp;not&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1662372">*</span><span class="op" id="1662373">(</span><span class="op" id="1662374">*</span><span class="builtintype" id="1662375">int</span><span class="op" id="1662378">)</span><span class="op" id="1662379">(</span><span class="builtintype" id="1662380">nil</span><span class="op" id="1662383">)</span>&nbsp;<span class="op" id="1662385">=</span>&nbsp;<span class="num" id="1662387">0</span>&nbsp;<span class="comment" id="1662389">//&nbsp;not&nbsp;reached</span><br>
<span class="lineno"></span><span class="op" id="1662404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1662407">//&nbsp;getargp&nbsp;returns&nbsp;the&nbsp;location&nbsp;where&nbsp;the&nbsp;caller</span><br>
<span class="lineno">430</span><span class="comment" id="1662456">//&nbsp;writes&nbsp;outgoing&nbsp;function&nbsp;call&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="comment" id="1662500">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1662513">func</span>&nbsp;<span class="ident" id="1662518">getargp</span><span class="op" id="1662525">(</span><span class="ident" id="1662526">x</span>&nbsp;<span class="builtintype" id="1662528">int</span><span class="op" id="1662531">)</span>&nbsp;<span class="builtintype" id="1662533">uintptr</span>&nbsp;<span class="op" id="1662541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1662544">//&nbsp;x&nbsp;is&nbsp;an&nbsp;argument&nbsp;mainly&nbsp;so&nbsp;that&nbsp;we&nbsp;can&nbsp;return&nbsp;its&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1662607">//&nbsp;However,&nbsp;we&nbsp;need&nbsp;to&nbsp;make&nbsp;the&nbsp;function&nbsp;complex&nbsp;enough</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1662664">//&nbsp;that&nbsp;it&nbsp;won&#39;t&nbsp;be&nbsp;inlined.&nbsp;We&nbsp;always&nbsp;pass&nbsp;x&nbsp;=&nbsp;0,&nbsp;so&nbsp;this&nbsp;code</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1662729">//&nbsp;does&nbsp;nothing&nbsp;other&nbsp;than&nbsp;keep&nbsp;the&nbsp;compiler&nbsp;from&nbsp;thinking</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1662789">//&nbsp;the&nbsp;function&nbsp;is&nbsp;simple&nbsp;enough&nbsp;to&nbsp;inline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1662834">if</span>&nbsp;<span class="ident" id="1662837"><a href="/gostd/runtime/panic.go.html#1662526">x</a></span>&nbsp;<span class="op" id="1662839">&gt;</span>&nbsp;<span class="num" id="1662841">0</span>&nbsp;<span class="op" id="1662843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1662847">return</span>&nbsp;<span class="ident" id="1662854"><a href="/gostd/runtime/stubs.go.html#1746458">getcallersp</a></span><span class="op" id="1662865">(</span><span class="ident" id="1662866"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1662872">.</span><span class="ident" id="1662873">Pointer</span><span class="op" id="1662880">(</span><span class="op" id="1662881">&amp;</span><span class="ident" id="1662882"><a href="/gostd/runtime/panic.go.html#1662526">x</a></span><span class="op" id="1662883">)</span><span class="op" id="1662884">)</span>&nbsp;<span class="op" id="1662886">*</span>&nbsp;<span class="num" id="1662888">0</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1662891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1662894">return</span>&nbsp;<span class="builtintype" id="1662901">uintptr</span><span class="op" id="1662908">(</span><span class="ident" id="1662909"><a href="/gostd/runtime/stubs.go.html#1743320">noescape</a></span><span class="op" id="1662917">(</span><span class="ident" id="1662918"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1662924">.</span><span class="ident" id="1662925">Pointer</span><span class="op" id="1662932">(</span><span class="op" id="1662933">&amp;</span><span class="ident" id="1662934"><a href="/gostd/runtime/panic.go.html#1662526">x</a></span><span class="op" id="1662935">)</span><span class="op" id="1662936">)</span><span class="op" id="1662937">)</span><br>
<span class="lineno"></span><span class="op" id="1662939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1662942">//&nbsp;The&nbsp;implementation&nbsp;of&nbsp;the&nbsp;predeclared&nbsp;function&nbsp;recover.</span><br>
<span class="lineno">445</span><span class="comment" id="1663001">//&nbsp;Cannot&nbsp;split&nbsp;the&nbsp;stack&nbsp;because&nbsp;it&nbsp;needs&nbsp;to&nbsp;reliably</span><br>
<span class="lineno"></span><span class="comment" id="1663056">//&nbsp;find&nbsp;the&nbsp;stack&nbsp;segment&nbsp;of&nbsp;its&nbsp;caller.</span><br>
<span class="lineno"></span><span class="comment" id="1663097">//</span><br>
<span class="lineno"></span><span class="comment" id="1663100">//&nbsp;TODO(rsc):&nbsp;Once&nbsp;we&nbsp;commit&nbsp;to&nbsp;CopyStackAlways,</span><br>
<span class="lineno"></span><span class="comment" id="1663149">//&nbsp;this&nbsp;doesn&#39;t&nbsp;need&nbsp;to&nbsp;be&nbsp;nosplit.</span><br>
<span class="lineno">450</span><span class="comment" id="1663185">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1663198">func</span>&nbsp;<span class="ident" id="1663203">gorecover</span><span class="op" id="1663212">(</span><span class="ident" id="1663213">argp</span>&nbsp;<span class="builtintype" id="1663218">uintptr</span><span class="op" id="1663225">)</span>&nbsp;<span class="keyword" id="1663227">interface</span><span class="op" id="1663236">{</span><span class="op" id="1663237">}</span>&nbsp;<span class="op" id="1663239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1663242">//&nbsp;Must&nbsp;be&nbsp;in&nbsp;a&nbsp;function&nbsp;running&nbsp;as&nbsp;part&nbsp;of&nbsp;a&nbsp;deferred&nbsp;call&nbsp;during&nbsp;the&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1663321">//&nbsp;Must&nbsp;be&nbsp;called&nbsp;from&nbsp;the&nbsp;topmost&nbsp;function&nbsp;of&nbsp;the&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1663378">//&nbsp;(the&nbsp;function&nbsp;used&nbsp;in&nbsp;the&nbsp;defer&nbsp;statement).</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1663426">//&nbsp;p.argp&nbsp;is&nbsp;the&nbsp;argument&nbsp;pointer&nbsp;of&nbsp;that&nbsp;topmost&nbsp;deferred&nbsp;function&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1663501">//&nbsp;Compare&nbsp;against&nbsp;argp&nbsp;reported&nbsp;by&nbsp;caller.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1663546">//&nbsp;If&nbsp;they&nbsp;match,&nbsp;the&nbsp;caller&nbsp;is&nbsp;the&nbsp;one&nbsp;who&nbsp;can&nbsp;recover.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663604">gp</span>&nbsp;<span class="op" id="1663607">:=</span>&nbsp;<span class="ident" id="1663610"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1663614">(</span><span class="op" id="1663615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663618">p</span>&nbsp;<span class="op" id="1663620">:=</span>&nbsp;<span class="ident" id="1663623"><a href="/gostd/runtime/panic.go.html#1663604">gp</a></span><span class="op" id="1663625">.</span><span class="ident" id="1663626"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787338">_panic</a></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1663634">if</span>&nbsp;<span class="ident" id="1663637"><a href="/gostd/runtime/panic.go.html#1663618">p</a></span>&nbsp;<span class="op" id="1663639">!=</span>&nbsp;<span class="builtintype" id="1663642">nil</span>&nbsp;<span class="op" id="1663646">&amp;&amp;</span>&nbsp;<span class="op" id="1663649">!</span><span class="ident" id="1663650"><a href="/gostd/runtime/panic.go.html#1663618">p</a></span><span class="op" id="1663651">.</span><span class="ident" id="1663652"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790888">recovered</a></span>&nbsp;<span class="op" id="1663662">&amp;&amp;</span>&nbsp;<span class="ident" id="1663665"><a href="/gostd/runtime/panic.go.html#1663213">argp</a></span>&nbsp;<span class="op" id="1663670">==</span>&nbsp;<span class="builtintype" id="1663673">uintptr</span><span class="op" id="1663680">(</span><span class="ident" id="1663681"><a href="/gostd/runtime/panic.go.html#1663618">p</a></span><span class="op" id="1663682">.</span><span class="ident" id="1663683"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790836">argp</a></span><span class="op" id="1663687">)</span>&nbsp;<span class="op" id="1663689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663693"><a href="/gostd/runtime/panic.go.html#1663618">p</a></span><span class="op" id="1663694">.</span><span class="ident" id="1663695"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790888">recovered</a></span>&nbsp;<span class="op" id="1663705">=</span>&nbsp;<span class="builtintype" id="1663707">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1663714">return</span>&nbsp;<span class="ident" id="1663721"><a href="/gostd/runtime/panic.go.html#1663618">p</a></span><span class="op" id="1663722">.</span><span class="ident" id="1663723"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790857">arg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1663728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1663731">return</span>&nbsp;<span class="builtintype" id="1663738">nil</span><br>
<span class="lineno">465</span><span class="op" id="1663742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1663745">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1663758">func</span>&nbsp;<span class="ident" id="1663763">startpanic</span><span class="op" id="1663773">(</span><span class="op" id="1663774">)</span>&nbsp;<span class="op" id="1663776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663779"><a href="/gostd/runtime/stubs.go.html#1741866">onM_signalok</a></span><span class="op" id="1663791">(</span><span class="ident" id="1663792"><a href="/gostd/runtime/stubs.go.html#1742429">startpanic_m</a></span><span class="op" id="1663804">)</span><br>
<span class="lineno">470</span><span class="op" id="1663806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1663809">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1663822">func</span>&nbsp;<span class="ident" id="1663827">dopanic</span><span class="op" id="1663834">(</span><span class="ident" id="1663835">unused</span>&nbsp;<span class="builtintype" id="1663842">int</span><span class="op" id="1663845">)</span>&nbsp;<span class="op" id="1663847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663850">gp</span>&nbsp;<span class="op" id="1663853">:=</span>&nbsp;<span class="ident" id="1663856"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1663860">(</span><span class="op" id="1663861">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663864">mp</span>&nbsp;<span class="op" id="1663867">:=</span>&nbsp;<span class="ident" id="1663870"><a href="/gostd/runtime/stubs.go.html#1738934">acquirem</a></span><span class="op" id="1663878">(</span><span class="op" id="1663879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663882"><a href="/gostd/runtime/panic.go.html#1663864">mp</a></span><span class="op" id="1663884">.</span><span class="ident" id="1663885"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788547">ptrarg</a></span><span class="op" id="1663891">[</span><span class="num" id="1663892">0</span><span class="op" id="1663893">]</span>&nbsp;<span class="op" id="1663895">=</span>&nbsp;<span class="ident" id="1663897"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1663903">.</span><span class="ident" id="1663904">Pointer</span><span class="op" id="1663911">(</span><span class="ident" id="1663912"><a href="/gostd/runtime/panic.go.html#1663850">gp</a></span><span class="op" id="1663914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663917"><a href="/gostd/runtime/panic.go.html#1663864">mp</a></span><span class="op" id="1663919">.</span><span class="ident" id="1663920"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788525">scalararg</a></span><span class="op" id="1663929">[</span><span class="num" id="1663930">0</span><span class="op" id="1663931">]</span>&nbsp;<span class="op" id="1663933">=</span>&nbsp;<span class="ident" id="1663935"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1663946">(</span><span class="op" id="1663947">(</span><span class="ident" id="1663948"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1663954">.</span><span class="ident" id="1663955">Pointer</span><span class="op" id="1663962">)</span><span class="op" id="1663963">(</span><span class="op" id="1663964">&amp;</span><span class="ident" id="1663965"><a href="/gostd/runtime/panic.go.html#1663835">unused</a></span><span class="op" id="1663971">)</span><span class="op" id="1663972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663975"><a href="/gostd/runtime/panic.go.html#1663864">mp</a></span><span class="op" id="1663977">.</span><span class="ident" id="1663978"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788525">scalararg</a></span><span class="op" id="1663987">[</span><span class="num" id="1663988">1</span><span class="op" id="1663989">]</span>&nbsp;<span class="op" id="1663991">=</span>&nbsp;<span class="ident" id="1663993"><a href="/gostd/runtime/stubs.go.html#1746458">getcallersp</a></span><span class="op" id="1664004">(</span><span class="op" id="1664005">(</span><span class="ident" id="1664006"><a href="/gostd/runtime/panic.go.html#1651632">unsafe</a></span><span class="op" id="1664012">.</span><span class="ident" id="1664013">Pointer</span><span class="op" id="1664020">)</span><span class="op" id="1664021">(</span><span class="op" id="1664022">&amp;</span><span class="ident" id="1664023"><a href="/gostd/runtime/panic.go.html#1663835">unused</a></span><span class="op" id="1664029">)</span><span class="op" id="1664030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664033"><a href="/gostd/runtime/stubs.go.html#1741866">onM_signalok</a></span><span class="op" id="1664045">(</span><span class="ident" id="1664046"><a href="/gostd/runtime/stubs.go.html#1742449">dopanic_m</a></span><span class="op" id="1664055">)</span>&nbsp;<span class="comment" id="1664057">//&nbsp;should&nbsp;never&nbsp;return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664081">*</span><span class="op" id="1664082">(</span><span class="op" id="1664083">*</span><span class="builtintype" id="1664084">int</span><span class="op" id="1664087">)</span><span class="op" id="1664088">(</span><span class="builtintype" id="1664089">nil</span><span class="op" id="1664092">)</span>&nbsp;<span class="op" id="1664094">=</span>&nbsp;<span class="num" id="1664096">0</span><br>
<span class="lineno"></span><span class="op" id="1664098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1664101">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1664114">func</span>&nbsp;<span class="ident" id="1664119">throw</span><span class="op" id="1664124">(</span><span class="ident" id="1664125">s</span>&nbsp;<span class="op" id="1664127">*</span><span class="builtintype" id="1664128">byte</span><span class="op" id="1664132">)</span>&nbsp;<span class="op" id="1664134">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664137">gp</span>&nbsp;<span class="op" id="1664140">:=</span>&nbsp;<span class="ident" id="1664143"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1664147">(</span><span class="op" id="1664148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664151">if</span>&nbsp;<span class="ident" id="1664154"><a href="/gostd/runtime/panic.go.html#1664137">gp</a></span><span class="op" id="1664156">.</span><span class="ident" id="1664157"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1664158">.</span><span class="ident" id="1664159"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787978">throwing</a></span>&nbsp;<span class="op" id="1664168">==</span>&nbsp;<span class="num" id="1664171">0</span>&nbsp;<span class="op" id="1664173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664177"><a href="/gostd/runtime/panic.go.html#1664137">gp</a></span><span class="op" id="1664179">.</span><span class="ident" id="1664180"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1664181">.</span><span class="ident" id="1664182"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787978">throwing</a></span>&nbsp;<span class="op" id="1664191">=</span>&nbsp;<span class="num" id="1664193">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664199"><a href="/gostd/runtime/panic.go.html#1663763">startpanic</a></span><span class="op" id="1664209">(</span><span class="op" id="1664210">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1664213">print</span><span class="op" id="1664218">(</span><span class="string" id="1664219">&#34;fatal&nbsp;error:&nbsp;&#34;</span><span class="op" id="1664234">,</span>&nbsp;<span class="ident" id="1664236"><a href="/gostd/runtime/stubs.go.html#1744608">gostringnocopy</a></span><span class="op" id="1664250">(</span><span class="ident" id="1664251"><a href="/gostd/runtime/panic.go.html#1664125">s</a></span><span class="op" id="1664252">)</span><span class="op" id="1664253">,</span>&nbsp;<span class="string" id="1664255">&#34;\n&#34;</span><span class="op" id="1664259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664262"><a href="/gostd/runtime/panic.go.html#1663827">dopanic</a></span><span class="op" id="1664269">(</span><span class="num" id="1664270">0</span><span class="op" id="1664271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664274">*</span><span class="op" id="1664275">(</span><span class="op" id="1664276">*</span><span class="builtintype" id="1664277">int</span><span class="op" id="1664280">)</span><span class="op" id="1664281">(</span><span class="builtintype" id="1664282">nil</span><span class="op" id="1664285">)</span>&nbsp;<span class="op" id="1664287">=</span>&nbsp;<span class="num" id="1664289">0</span>&nbsp;<span class="comment" id="1664291">//&nbsp;not&nbsp;reached</span><br>
<span class="lineno"></span><span class="op" id="1664306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="comment" id="1664309">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1664322">func</span>&nbsp;<span class="ident" id="1664327">gothrow</span><span class="op" id="1664334">(</span><span class="ident" id="1664335">s</span>&nbsp;<span class="builtintype" id="1664337">string</span><span class="op" id="1664343">)</span>&nbsp;<span class="op" id="1664345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664348">gp</span>&nbsp;<span class="op" id="1664351">:=</span>&nbsp;<span class="ident" id="1664354"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1664358">(</span><span class="op" id="1664359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664362">if</span>&nbsp;<span class="ident" id="1664365"><a href="/gostd/runtime/panic.go.html#1664348">gp</a></span><span class="op" id="1664367">.</span><span class="ident" id="1664368"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1664369">.</span><span class="ident" id="1664370"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787978">throwing</a></span>&nbsp;<span class="op" id="1664379">==</span>&nbsp;<span class="num" id="1664382">0</span>&nbsp;<span class="op" id="1664384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664388"><a href="/gostd/runtime/panic.go.html#1664348">gp</a></span><span class="op" id="1664390">.</span><span class="ident" id="1664391"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1664392">.</span><span class="ident" id="1664393"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787978">throwing</a></span>&nbsp;<span class="op" id="1664402">=</span>&nbsp;<span class="num" id="1664404">1</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664410"><a href="/gostd/runtime/panic.go.html#1663763">startpanic</a></span><span class="op" id="1664420">(</span><span class="op" id="1664421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1664424">print</span><span class="op" id="1664429">(</span><span class="string" id="1664430">&#34;fatal&nbsp;error:&nbsp;&#34;</span><span class="op" id="1664445">,</span>&nbsp;<span class="ident" id="1664447"><a href="/gostd/runtime/panic.go.html#1664335">s</a></span><span class="op" id="1664448">,</span>&nbsp;<span class="string" id="1664450">&#34;\n&#34;</span><span class="op" id="1664454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664457"><a href="/gostd/runtime/panic.go.html#1663827">dopanic</a></span><span class="op" id="1664464">(</span><span class="num" id="1664465">0</span><span class="op" id="1664466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664469">*</span><span class="op" id="1664470">(</span><span class="op" id="1664471">*</span><span class="builtintype" id="1664472">int</span><span class="op" id="1664475">)</span><span class="op" id="1664476">(</span><span class="builtintype" id="1664477">nil</span><span class="op" id="1664480">)</span>&nbsp;<span class="op" id="1664482">=</span>&nbsp;<span class="num" id="1664484">0</span>&nbsp;<span class="comment" id="1664486">//&nbsp;not&nbsp;reached</span><br>
<span class="lineno">505</span><span class="op" id="1664501">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
