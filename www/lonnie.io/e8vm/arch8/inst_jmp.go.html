<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5293713">package</span>&nbsp;<span class="ident" id="5293721">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5293728">//&nbsp;InstJmp&nbsp;executes&nbsp;jump&nbsp;instruction</span><br>
<span class="lineno"></span><span class="keyword" id="5293765">type</span>&nbsp;<span class="ident" id="5293770">instJmp</span>&nbsp;<span class="keyword" id="5293778">struct</span><span class="op" id="5293784">{</span><span class="op" id="5293785">}</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="5293788">//&nbsp;I&nbsp;executes&nbsp;the&nbsp;jump&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="5293824">//&nbsp;Might&nbsp;return&nbsp;invalid&nbsp;instruction&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="5293871">func</span>&nbsp;<span class="op" id="5293876">(</span><span class="ident" id="5293877">i</span>&nbsp;<span class="op" id="5293879">*</span><span class="ident" id="5293880"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293770">instJmp</a></span><span class="op" id="5293887">)</span>&nbsp;<span class="ident" id="5293889">I</span><span class="op" id="5293890">(</span><span class="ident" id="5293891">cpu</span>&nbsp;<span class="op" id="5293895">*</span><span class="ident" id="5293896"><a href="/lonnie.io/e8vm/arch8/cpu.go.html#5285853">cpu</a></span><span class="op" id="5293899">,</span>&nbsp;<span class="ident" id="5293901">in</span>&nbsp;<span class="builtintype" id="5293904">uint32</span><span class="op" id="5293910">)</span>&nbsp;<span class="op" id="5293912">*</span><span class="ident" id="5293913"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span>&nbsp;<span class="op" id="5293919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293922">op</span>&nbsp;<span class="op" id="5293925">:=</span>&nbsp;<span class="op" id="5293928">(</span><span class="ident" id="5293929"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293901">in</a></span>&nbsp;<span class="op" id="5293932">&gt;&gt;</span>&nbsp;<span class="num" id="5293935">30</span><span class="op" id="5293937">)</span>&nbsp;<span class="op" id="5293939">&amp;</span>&nbsp;<span class="num" id="5293941">0x3</span>&nbsp;<span class="comment" id="5293945">//&nbsp;(32:30]</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293957">off</span>&nbsp;<span class="op" id="5293961">:=</span>&nbsp;<span class="ident" id="5293964"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293901">in</a></span>&nbsp;<span class="op" id="5293967">&amp;</span>&nbsp;<span class="num" id="5293969">0x3fffffff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293982">pc</span>&nbsp;<span class="op" id="5293985">:=</span>&nbsp;<span class="ident" id="5293988"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293891">cpu</a></span><span class="op" id="5293991">.</span><span class="ident" id="5293992">regs</span><span class="op" id="5293996">[</span><span class="ident" id="5293997"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5311636">PC</a></span><span class="op" id="5293999">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294002">to</span>&nbsp;<span class="op" id="5294005">:=</span>&nbsp;<span class="ident" id="5294008"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293982">pc</a></span>&nbsp;<span class="op" id="5294011">+</span>&nbsp;<span class="op" id="5294013">(</span><span class="ident" id="5294014"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293957">off</a></span>&nbsp;<span class="op" id="5294018">&lt;&lt;</span>&nbsp;<span class="num" id="5294021">2</span><span class="op" id="5294022">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294026">switch</span>&nbsp;<span class="ident" id="5294033"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293922">op</a></span>&nbsp;<span class="op" id="5294036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294039">case</span>&nbsp;<span class="num" id="5294044">2</span><span class="op" id="5294045">:</span>&nbsp;<span class="comment" id="5294047">//&nbsp;j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5294054">/*&nbsp;do&nbsp;nothing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294072">case</span>&nbsp;<span class="num" id="5294077">3</span><span class="op" id="5294078">:</span>&nbsp;<span class="comment" id="5294080">//&nbsp;jal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294089"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293891">cpu</a></span><span class="op" id="5294092">.</span><span class="ident" id="5294093">regs</span><span class="op" id="5294097">[</span><span class="ident" id="5294098"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5311627">RET</a></span><span class="op" id="5294101">]</span>&nbsp;<span class="op" id="5294103">=</span>&nbsp;<span class="ident" id="5294105"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293982">pc</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294109">default</span><span class="op" id="5294116">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294120">return</span>&nbsp;<span class="ident" id="5294127"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290905">errInvalidInst</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294147"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5293891">cpu</a></span><span class="op" id="5294150">.</span><span class="ident" id="5294151">regs</span><span class="op" id="5294155">[</span><span class="ident" id="5294156"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5311636">PC</a></span><span class="op" id="5294158">]</span>&nbsp;<span class="op" id="5294160">=</span>&nbsp;<span class="ident" id="5294162"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5294002">to</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294166">return</span>&nbsp;<span class="ident" id="5294173">nil</span><br>
<span class="lineno"></span><span class="op" id="5294177">}</span>
</div>
</body>
</html>
