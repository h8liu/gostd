<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7732826">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7732881">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7732935">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7732986">package</span>&nbsp;<span class="ident" id="7732994">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732999">import</span>&nbsp;<span class="op" id="7733006">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733009">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733018">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733029">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7733039">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733042">type</span>&nbsp;<span class="ident" id="7733047">typeT</span>&nbsp;<span class="keyword" id="7733053">struct</span>&nbsp;<span class="op" id="7733060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733063">id</span>&nbsp;&nbsp;<span class="ident" id="7733067">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733075">str</span>&nbsp;<span class="builtintype" id="7733079">string</span><br>
<span class="lineno"></span><span class="op" id="7733086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733089">var</span>&nbsp;<span class="ident" id="7733093">basicTypes</span>&nbsp;<span class="op" id="7733104">=</span>&nbsp;<span class="op" id="7733106">[</span><span class="op" id="7733107">]</span><span class="ident" id="7733108">typeT</span><span class="op" id="7733113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733116">{</span><span class="ident" id="7733117">tBool</span><span class="op" id="7733122">,</span>&nbsp;<span class="string" id="7733124">&#34;bool&#34;</span><span class="op" id="7733130">}</span><span class="op" id="7733131">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733134">{</span><span class="ident" id="7733135">tInt</span><span class="op" id="7733139">,</span>&nbsp;<span class="string" id="7733141">&#34;int&#34;</span><span class="op" id="7733146">}</span><span class="op" id="7733147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733150">{</span><span class="ident" id="7733151">tUint</span><span class="op" id="7733156">,</span>&nbsp;<span class="string" id="7733158">&#34;uint&#34;</span><span class="op" id="7733164">}</span><span class="op" id="7733165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733168">{</span><span class="ident" id="7733169">tFloat</span><span class="op" id="7733175">,</span>&nbsp;<span class="string" id="7733177">&#34;float&#34;</span><span class="op" id="7733184">}</span><span class="op" id="7733185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733188">{</span><span class="ident" id="7733189">tBytes</span><span class="op" id="7733195">,</span>&nbsp;<span class="string" id="7733197">&#34;bytes&#34;</span><span class="op" id="7733204">}</span><span class="op" id="7733205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733208">{</span><span class="ident" id="7733209">tString</span><span class="op" id="7733216">,</span>&nbsp;<span class="string" id="7733218">&#34;string&#34;</span><span class="op" id="7733226">}</span><span class="op" id="7733227">,</span><br>
<span class="lineno">25</span><span class="op" id="7733229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733232">func</span>&nbsp;<span class="ident" id="7733237">getTypeUnlocked</span><span class="op" id="7733252">(</span><span class="ident" id="7733253">name</span>&nbsp;<span class="builtintype" id="7733258">string</span><span class="op" id="7733264">,</span>&nbsp;<span class="ident" id="7733266">rt</span>&nbsp;<span class="ident" id="7733269">reflect</span><span class="op" id="7733276">.</span><span class="ident" id="7733277">Type</span><span class="op" id="7733281">)</span>&nbsp;<span class="ident" id="7733283">gobType</span>&nbsp;<span class="op" id="7733291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733294">typeLock</span><span class="op" id="7733302">.</span><span class="ident" id="7733303">Lock</span><span class="op" id="7733307">(</span><span class="op" id="7733308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733311">defer</span>&nbsp;<span class="ident" id="7733317">typeLock</span><span class="op" id="7733325">.</span><span class="ident" id="7733326">Unlock</span><span class="op" id="7733332">(</span><span class="op" id="7733333">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733336">t</span><span class="op" id="7733337">,</span>&nbsp;<span class="ident" id="7733339">err</span>&nbsp;<span class="op" id="7733343">:=</span>&nbsp;<span class="ident" id="7733346">getBaseType</span><span class="op" id="7733357">(</span><span class="ident" id="7733358">name</span><span class="op" id="7733362">,</span>&nbsp;<span class="ident" id="7733364">rt</span><span class="op" id="7733366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733369">if</span>&nbsp;<span class="ident" id="7733372">err</span>&nbsp;<span class="op" id="7733376">!=</span>&nbsp;<span class="ident" id="7733379">nil</span>&nbsp;<span class="op" id="7733383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7733387">panic</span><span class="op" id="7733392">(</span><span class="string" id="7733393">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="7733413">+</span>&nbsp;<span class="ident" id="7733415">err</span><span class="op" id="7733418">.</span><span class="ident" id="7733419">Error</span><span class="op" id="7733424">(</span><span class="op" id="7733425">)</span><span class="op" id="7733426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733432">return</span>&nbsp;<span class="ident" id="7733439">t</span><br>
<span class="lineno">35</span><span class="op" id="7733441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7733444">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="7733461">func</span>&nbsp;<span class="ident" id="7733466">TestBasic</span><span class="op" id="7733475">(</span><span class="ident" id="7733476">t</span>&nbsp;<span class="op" id="7733478">*</span><span class="ident" id="7733479">testing</span><span class="op" id="7733486">.</span><span class="ident" id="7733487">T</span><span class="op" id="7733488">)</span>&nbsp;<span class="op" id="7733490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733493">for</span>&nbsp;<span class="ident" id="7733497">_</span><span class="op" id="7733498">,</span>&nbsp;<span class="ident" id="7733500">tt</span>&nbsp;<span class="op" id="7733503">:=</span>&nbsp;<span class="keyword" id="7733506">range</span>&nbsp;<span class="ident" id="7733512">basicTypes</span>&nbsp;<span class="op" id="7733523">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733527">if</span>&nbsp;<span class="ident" id="7733530">tt</span><span class="op" id="7733532">.</span><span class="ident" id="7733533">id</span><span class="op" id="7733535">.</span><span class="builtintype" id="7733536">string</span><span class="op" id="7733542">(</span><span class="op" id="7733543">)</span>&nbsp;<span class="op" id="7733545">!=</span>&nbsp;<span class="ident" id="7733548">tt</span><span class="op" id="7733550">.</span><span class="ident" id="7733551">str</span>&nbsp;<span class="op" id="7733555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733560">t</span><span class="op" id="7733561">.</span><span class="ident" id="7733562">Errorf</span><span class="op" id="7733568">(</span><span class="string" id="7733569">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7733600">,</span>&nbsp;<span class="ident" id="7733602">tt</span><span class="op" id="7733604">.</span><span class="ident" id="7733605">str</span><span class="op" id="7733608">,</span>&nbsp;<span class="ident" id="7733610">tt</span><span class="op" id="7733612">.</span><span class="ident" id="7733613">id</span><span class="op" id="7733615">.</span><span class="builtintype" id="7733616">string</span><span class="op" id="7733622">(</span><span class="op" id="7733623">)</span><span class="op" id="7733624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733632">if</span>&nbsp;<span class="ident" id="7733635">tt</span><span class="op" id="7733637">.</span><span class="ident" id="7733638">id</span>&nbsp;<span class="op" id="7733641">==</span>&nbsp;<span class="num" id="7733644">0</span>&nbsp;<span class="op" id="7733646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733651">t</span><span class="op" id="7733652">.</span><span class="ident" id="7733653">Errorf</span><span class="op" id="7733659">(</span><span class="string" id="7733660">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="7733679">,</span>&nbsp;<span class="ident" id="7733681">tt</span><span class="op" id="7733683">.</span><span class="ident" id="7733684">str</span><span class="op" id="7733687">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733694">}</span><br>
<span class="lineno"></span><span class="op" id="7733696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7733699">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="7733767">func</span>&nbsp;<span class="ident" id="7733772">TestReregistration</span><span class="op" id="7733790">(</span><span class="ident" id="7733791">t</span>&nbsp;<span class="op" id="7733793">*</span><span class="ident" id="7733794">testing</span><span class="op" id="7733801">.</span><span class="ident" id="7733802">T</span><span class="op" id="7733803">)</span>&nbsp;<span class="op" id="7733805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733808">newtyp</span>&nbsp;<span class="op" id="7733815">:=</span>&nbsp;<span class="ident" id="7733818">getTypeUnlocked</span><span class="op" id="7733833">(</span><span class="string" id="7733834">&#34;int&#34;</span><span class="op" id="7733839">,</span>&nbsp;<span class="ident" id="7733841">reflect</span><span class="op" id="7733848">.</span><span class="ident" id="7733849">TypeOf</span><span class="op" id="7733855">(</span><span class="builtintype" id="7733856">int</span><span class="op" id="7733859">(</span><span class="num" id="7733860">0</span><span class="op" id="7733861">)</span><span class="op" id="7733862">)</span><span class="op" id="7733863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733866">if</span>&nbsp;<span class="ident" id="7733869">newtyp</span>&nbsp;<span class="op" id="7733876">!=</span>&nbsp;<span class="ident" id="7733879">tInt</span><span class="op" id="7733883">.</span><span class="ident" id="7733884">gobType</span><span class="op" id="7733891">(</span><span class="op" id="7733892">)</span>&nbsp;<span class="op" id="7733894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733898">t</span><span class="op" id="7733899">.</span><span class="ident" id="7733900">Errorf</span><span class="op" id="7733906">(</span><span class="string" id="7733907">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7733942">,</span>&nbsp;<span class="ident" id="7733944">newtyp</span><span class="op" id="7733950">.</span><span class="builtintype" id="7733951">string</span><span class="op" id="7733957">(</span><span class="op" id="7733958">)</span><span class="op" id="7733959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733962">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733965">newtyp</span>&nbsp;<span class="op" id="7733972">=</span>&nbsp;<span class="ident" id="7733974">getTypeUnlocked</span><span class="op" id="7733989">(</span><span class="string" id="7733990">&#34;uint&#34;</span><span class="op" id="7733996">,</span>&nbsp;<span class="ident" id="7733998">reflect</span><span class="op" id="7734005">.</span><span class="ident" id="7734006">TypeOf</span><span class="op" id="7734012">(</span><span class="builtintype" id="7734013">uint</span><span class="op" id="7734017">(</span><span class="num" id="7734018">0</span><span class="op" id="7734019">)</span><span class="op" id="7734020">)</span><span class="op" id="7734021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734024">if</span>&nbsp;<span class="ident" id="7734027">newtyp</span>&nbsp;<span class="op" id="7734034">!=</span>&nbsp;<span class="ident" id="7734037">tUint</span><span class="op" id="7734042">.</span><span class="ident" id="7734043">gobType</span><span class="op" id="7734050">(</span><span class="op" id="7734051">)</span>&nbsp;<span class="op" id="7734053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734057">t</span><span class="op" id="7734058">.</span><span class="ident" id="7734059">Errorf</span><span class="op" id="7734065">(</span><span class="string" id="7734066">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7734101">,</span>&nbsp;<span class="ident" id="7734103">newtyp</span><span class="op" id="7734109">.</span><span class="builtintype" id="7734110">string</span><span class="op" id="7734116">(</span><span class="op" id="7734117">)</span><span class="op" id="7734118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734124">newtyp</span>&nbsp;<span class="op" id="7734131">=</span>&nbsp;<span class="ident" id="7734133">getTypeUnlocked</span><span class="op" id="7734148">(</span><span class="string" id="7734149">&#34;string&#34;</span><span class="op" id="7734157">,</span>&nbsp;<span class="ident" id="7734159">reflect</span><span class="op" id="7734166">.</span><span class="ident" id="7734167">TypeOf</span><span class="op" id="7734173">(</span><span class="string" id="7734174">&#34;hello&#34;</span><span class="op" id="7734181">)</span><span class="op" id="7734182">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734185">if</span>&nbsp;<span class="ident" id="7734188">newtyp</span>&nbsp;<span class="op" id="7734195">!=</span>&nbsp;<span class="ident" id="7734198">tString</span><span class="op" id="7734205">.</span><span class="ident" id="7734206">gobType</span><span class="op" id="7734213">(</span><span class="op" id="7734214">)</span>&nbsp;<span class="op" id="7734216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734220">t</span><span class="op" id="7734221">.</span><span class="ident" id="7734222">Errorf</span><span class="op" id="7734228">(</span><span class="string" id="7734229">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7734264">,</span>&nbsp;<span class="ident" id="7734266">newtyp</span><span class="op" id="7734272">.</span><span class="builtintype" id="7734273">string</span><span class="op" id="7734279">(</span><span class="op" id="7734280">)</span><span class="op" id="7734281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734284">}</span><br>
<span class="lineno"></span><span class="op" id="7734286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7734289">func</span>&nbsp;<span class="ident" id="7734294">TestArrayType</span><span class="op" id="7734307">(</span><span class="ident" id="7734308">t</span>&nbsp;<span class="op" id="7734310">*</span><span class="ident" id="7734311">testing</span><span class="op" id="7734318">.</span><span class="ident" id="7734319">T</span><span class="op" id="7734320">)</span>&nbsp;<span class="op" id="7734322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734325">var</span>&nbsp;<span class="ident" id="7734329">a3</span>&nbsp;<span class="op" id="7734332">[</span><span class="num" id="7734333">3</span><span class="op" id="7734334">]</span><span class="builtintype" id="7734335">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734340">a3int</span>&nbsp;<span class="op" id="7734346">:=</span>&nbsp;<span class="ident" id="7734349">getTypeUnlocked</span><span class="op" id="7734364">(</span><span class="string" id="7734365">&#34;foo&#34;</span><span class="op" id="7734370">,</span>&nbsp;<span class="ident" id="7734372">reflect</span><span class="op" id="7734379">.</span><span class="ident" id="7734380">TypeOf</span><span class="op" id="7734386">(</span><span class="ident" id="7734387">a3</span><span class="op" id="7734389">)</span><span class="op" id="7734390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734393">newa3int</span>&nbsp;<span class="op" id="7734402">:=</span>&nbsp;<span class="ident" id="7734405">getTypeUnlocked</span><span class="op" id="7734420">(</span><span class="string" id="7734421">&#34;bar&#34;</span><span class="op" id="7734426">,</span>&nbsp;<span class="ident" id="7734428">reflect</span><span class="op" id="7734435">.</span><span class="ident" id="7734436">TypeOf</span><span class="op" id="7734442">(</span><span class="ident" id="7734443">a3</span><span class="op" id="7734445">)</span><span class="op" id="7734446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734449">if</span>&nbsp;<span class="ident" id="7734452">a3int</span>&nbsp;<span class="op" id="7734458">!=</span>&nbsp;<span class="ident" id="7734461">newa3int</span>&nbsp;<span class="op" id="7734470">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734474">t</span><span class="op" id="7734475">.</span><span class="ident" id="7734476">Errorf</span><span class="op" id="7734482">(</span><span class="string" id="7734483">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7734531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734537">var</span>&nbsp;<span class="ident" id="7734541">a4</span>&nbsp;<span class="op" id="7734544">[</span><span class="num" id="7734545">4</span><span class="op" id="7734546">]</span><span class="builtintype" id="7734547">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734552">a4int</span>&nbsp;<span class="op" id="7734558">:=</span>&nbsp;<span class="ident" id="7734561">getTypeUnlocked</span><span class="op" id="7734576">(</span><span class="string" id="7734577">&#34;goo&#34;</span><span class="op" id="7734582">,</span>&nbsp;<span class="ident" id="7734584">reflect</span><span class="op" id="7734591">.</span><span class="ident" id="7734592">TypeOf</span><span class="op" id="7734598">(</span><span class="ident" id="7734599">a4</span><span class="op" id="7734601">)</span><span class="op" id="7734602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734605">if</span>&nbsp;<span class="ident" id="7734608">a3int</span>&nbsp;<span class="op" id="7734614">==</span>&nbsp;<span class="ident" id="7734617">a4int</span>&nbsp;<span class="op" id="7734623">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734627">t</span><span class="op" id="7734628">.</span><span class="ident" id="7734629">Errorf</span><span class="op" id="7734635">(</span><span class="string" id="7734636">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="7734688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734694">var</span>&nbsp;<span class="ident" id="7734698">b3</span>&nbsp;<span class="op" id="7734701">[</span><span class="num" id="7734702">3</span><span class="op" id="7734703">]</span><span class="builtintype" id="7734704">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734710">a3bool</span>&nbsp;<span class="op" id="7734717">:=</span>&nbsp;<span class="ident" id="7734720">getTypeUnlocked</span><span class="op" id="7734735">(</span><span class="string" id="7734736">&#34;&#34;</span><span class="op" id="7734738">,</span>&nbsp;<span class="ident" id="7734740">reflect</span><span class="op" id="7734747">.</span><span class="ident" id="7734748">TypeOf</span><span class="op" id="7734754">(</span><span class="ident" id="7734755">b3</span><span class="op" id="7734757">)</span><span class="op" id="7734758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734761">if</span>&nbsp;<span class="ident" id="7734764">a3int</span>&nbsp;<span class="op" id="7734770">==</span>&nbsp;<span class="ident" id="7734773">a3bool</span>&nbsp;<span class="op" id="7734780">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734784">t</span><span class="op" id="7734785">.</span><span class="ident" id="7734786">Errorf</span><span class="op" id="7734792">(</span><span class="string" id="7734793">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="7734846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734852">str</span>&nbsp;<span class="op" id="7734856">:=</span>&nbsp;<span class="ident" id="7734859">a3bool</span><span class="op" id="7734865">.</span><span class="builtintype" id="7734866">string</span><span class="op" id="7734872">(</span><span class="op" id="7734873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734876">expected</span>&nbsp;<span class="op" id="7734885">:=</span>&nbsp;<span class="string" id="7734888">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734899">if</span>&nbsp;<span class="ident" id="7734902">str</span>&nbsp;<span class="op" id="7734906">!=</span>&nbsp;<span class="ident" id="7734909">expected</span>&nbsp;<span class="op" id="7734918">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734922">t</span><span class="op" id="7734923">.</span><span class="ident" id="7734924">Errorf</span><span class="op" id="7734930">(</span><span class="string" id="7734931">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7734965">,</span>&nbsp;<span class="ident" id="7734967">str</span><span class="op" id="7734970">,</span>&nbsp;<span class="ident" id="7734972">expected</span><span class="op" id="7734980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734983">}</span><br>
<span class="lineno"></span><span class="op" id="7734985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7734988">func</span>&nbsp;<span class="ident" id="7734993">TestSliceType</span><span class="op" id="7735006">(</span><span class="ident" id="7735007">t</span>&nbsp;<span class="op" id="7735009">*</span><span class="ident" id="7735010">testing</span><span class="op" id="7735017">.</span><span class="ident" id="7735018">T</span><span class="op" id="7735019">)</span>&nbsp;<span class="op" id="7735021">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735024">var</span>&nbsp;<span class="ident" id="7735028">s</span>&nbsp;<span class="op" id="7735030">[</span><span class="op" id="7735031">]</span><span class="builtintype" id="7735032">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735037">sint</span>&nbsp;<span class="op" id="7735042">:=</span>&nbsp;<span class="ident" id="7735045">getTypeUnlocked</span><span class="op" id="7735060">(</span><span class="string" id="7735061">&#34;slice&#34;</span><span class="op" id="7735068">,</span>&nbsp;<span class="ident" id="7735070">reflect</span><span class="op" id="7735077">.</span><span class="ident" id="7735078">TypeOf</span><span class="op" id="7735084">(</span><span class="ident" id="7735085">s</span><span class="op" id="7735086">)</span><span class="op" id="7735087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735090">var</span>&nbsp;<span class="ident" id="7735094">news</span>&nbsp;<span class="op" id="7735099">[</span><span class="op" id="7735100">]</span><span class="builtintype" id="7735101">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735106">newsint</span>&nbsp;<span class="op" id="7735114">:=</span>&nbsp;<span class="ident" id="7735117">getTypeUnlocked</span><span class="op" id="7735132">(</span><span class="string" id="7735133">&#34;slice1&#34;</span><span class="op" id="7735141">,</span>&nbsp;<span class="ident" id="7735143">reflect</span><span class="op" id="7735150">.</span><span class="ident" id="7735151">TypeOf</span><span class="op" id="7735157">(</span><span class="ident" id="7735158">news</span><span class="op" id="7735162">)</span><span class="op" id="7735163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735166">if</span>&nbsp;<span class="ident" id="7735169">sint</span>&nbsp;<span class="op" id="7735174">!=</span>&nbsp;<span class="ident" id="7735177">newsint</span>&nbsp;<span class="op" id="7735185">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735189">t</span><span class="op" id="7735190">.</span><span class="ident" id="7735191">Errorf</span><span class="op" id="7735197">(</span><span class="string" id="7735198">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7735245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735251">var</span>&nbsp;<span class="ident" id="7735255">b</span>&nbsp;<span class="op" id="7735257">[</span><span class="op" id="7735258">]</span><span class="builtintype" id="7735259">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735265">sbool</span>&nbsp;<span class="op" id="7735271">:=</span>&nbsp;<span class="ident" id="7735274">getTypeUnlocked</span><span class="op" id="7735289">(</span><span class="string" id="7735290">&#34;&#34;</span><span class="op" id="7735292">,</span>&nbsp;<span class="ident" id="7735294">reflect</span><span class="op" id="7735301">.</span><span class="ident" id="7735302">TypeOf</span><span class="op" id="7735308">(</span><span class="ident" id="7735309">b</span><span class="op" id="7735310">)</span><span class="op" id="7735311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735314">if</span>&nbsp;<span class="ident" id="7735317">sbool</span>&nbsp;<span class="op" id="7735323">==</span>&nbsp;<span class="ident" id="7735326">sint</span>&nbsp;<span class="op" id="7735331">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735335">t</span><span class="op" id="7735336">.</span><span class="ident" id="7735337">Errorf</span><span class="op" id="7735343">(</span><span class="string" id="7735344">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="7735395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735401">str</span>&nbsp;<span class="op" id="7735405">:=</span>&nbsp;<span class="ident" id="7735408">sbool</span><span class="op" id="7735413">.</span><span class="builtintype" id="7735414">string</span><span class="op" id="7735420">(</span><span class="op" id="7735421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735424">expected</span>&nbsp;<span class="op" id="7735433">:=</span>&nbsp;<span class="string" id="7735436">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735446">if</span>&nbsp;<span class="ident" id="7735449">str</span>&nbsp;<span class="op" id="7735453">!=</span>&nbsp;<span class="ident" id="7735456">expected</span>&nbsp;<span class="op" id="7735465">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735469">t</span><span class="op" id="7735470">.</span><span class="ident" id="7735471">Errorf</span><span class="op" id="7735477">(</span><span class="string" id="7735478">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7735512">,</span>&nbsp;<span class="ident" id="7735514">str</span><span class="op" id="7735517">,</span>&nbsp;<span class="ident" id="7735519">expected</span><span class="op" id="7735527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735530">}</span><br>
<span class="lineno"></span><span class="op" id="7735532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7735535">func</span>&nbsp;<span class="ident" id="7735540">TestMapType</span><span class="op" id="7735551">(</span><span class="ident" id="7735552">t</span>&nbsp;<span class="op" id="7735554">*</span><span class="ident" id="7735555">testing</span><span class="op" id="7735562">.</span><span class="ident" id="7735563">T</span><span class="op" id="7735564">)</span>&nbsp;<span class="op" id="7735566">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735569">var</span>&nbsp;<span class="ident" id="7735573">m</span>&nbsp;<span class="keyword" id="7735575">map</span><span class="op" id="7735578">[</span><span class="builtintype" id="7735579">string</span><span class="op" id="7735585">]</span><span class="builtintype" id="7735586">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735591">mapStringInt</span>&nbsp;<span class="op" id="7735604">:=</span>&nbsp;<span class="ident" id="7735607">getTypeUnlocked</span><span class="op" id="7735622">(</span><span class="string" id="7735623">&#34;map&#34;</span><span class="op" id="7735628">,</span>&nbsp;<span class="ident" id="7735630">reflect</span><span class="op" id="7735637">.</span><span class="ident" id="7735638">TypeOf</span><span class="op" id="7735644">(</span><span class="ident" id="7735645">m</span><span class="op" id="7735646">)</span><span class="op" id="7735647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735650">var</span>&nbsp;<span class="ident" id="7735654">newm</span>&nbsp;<span class="keyword" id="7735659">map</span><span class="op" id="7735662">[</span><span class="builtintype" id="7735663">string</span><span class="op" id="7735669">]</span><span class="builtintype" id="7735670">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735675">newMapStringInt</span>&nbsp;<span class="op" id="7735691">:=</span>&nbsp;<span class="ident" id="7735694">getTypeUnlocked</span><span class="op" id="7735709">(</span><span class="string" id="7735710">&#34;map1&#34;</span><span class="op" id="7735716">,</span>&nbsp;<span class="ident" id="7735718">reflect</span><span class="op" id="7735725">.</span><span class="ident" id="7735726">TypeOf</span><span class="op" id="7735732">(</span><span class="ident" id="7735733">newm</span><span class="op" id="7735737">)</span><span class="op" id="7735738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735741">if</span>&nbsp;<span class="ident" id="7735744">mapStringInt</span>&nbsp;<span class="op" id="7735757">!=</span>&nbsp;<span class="ident" id="7735760">newMapStringInt</span>&nbsp;<span class="op" id="7735776">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735780">t</span><span class="op" id="7735781">.</span><span class="ident" id="7735782">Errorf</span><span class="op" id="7735788">(</span><span class="string" id="7735789">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7735845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735851">var</span>&nbsp;<span class="ident" id="7735855">b</span>&nbsp;<span class="keyword" id="7735857">map</span><span class="op" id="7735860">[</span><span class="builtintype" id="7735861">string</span><span class="op" id="7735867">]</span><span class="builtintype" id="7735868">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735874">mapStringBool</span>&nbsp;<span class="op" id="7735888">:=</span>&nbsp;<span class="ident" id="7735891">getTypeUnlocked</span><span class="op" id="7735906">(</span><span class="string" id="7735907">&#34;&#34;</span><span class="op" id="7735909">,</span>&nbsp;<span class="ident" id="7735911">reflect</span><span class="op" id="7735918">.</span><span class="ident" id="7735919">TypeOf</span><span class="op" id="7735925">(</span><span class="ident" id="7735926">b</span><span class="op" id="7735927">)</span><span class="op" id="7735928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735931">if</span>&nbsp;<span class="ident" id="7735934">mapStringBool</span>&nbsp;<span class="op" id="7735948">==</span>&nbsp;<span class="ident" id="7735951">mapStringInt</span>&nbsp;<span class="op" id="7735964">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735968">t</span><span class="op" id="7735969">.</span><span class="ident" id="7735970">Errorf</span><span class="op" id="7735976">(</span><span class="string" id="7735977">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="7736046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736052">str</span>&nbsp;<span class="op" id="7736056">:=</span>&nbsp;<span class="ident" id="7736059">mapStringBool</span><span class="op" id="7736072">.</span><span class="builtintype" id="7736073">string</span><span class="op" id="7736079">(</span><span class="op" id="7736080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736083">expected</span>&nbsp;<span class="op" id="7736092">:=</span>&nbsp;<span class="string" id="7736095">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736114">if</span>&nbsp;<span class="ident" id="7736117">str</span>&nbsp;<span class="op" id="7736121">!=</span>&nbsp;<span class="ident" id="7736124">expected</span>&nbsp;<span class="op" id="7736133">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736137">t</span><span class="op" id="7736138">.</span><span class="ident" id="7736139">Errorf</span><span class="op" id="7736145">(</span><span class="string" id="7736146">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7736178">,</span>&nbsp;<span class="ident" id="7736180">str</span><span class="op" id="7736183">,</span>&nbsp;<span class="ident" id="7736185">expected</span><span class="op" id="7736193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736196">}</span><br>
<span class="lineno"></span><span class="op" id="7736198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7736201">type</span>&nbsp;<span class="ident" id="7736206">Bar</span>&nbsp;<span class="keyword" id="7736210">struct</span>&nbsp;<span class="op" id="7736217">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736220">X</span>&nbsp;<span class="builtintype" id="7736222">string</span><br>
<span class="lineno"></span><span class="op" id="7736229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7736232">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="7736313">type</span>&nbsp;<span class="ident" id="7736318">Foo</span>&nbsp;<span class="keyword" id="7736322">struct</span>&nbsp;<span class="op" id="7736329">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736332">A</span>&nbsp;<span class="builtintype" id="7736334">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736339">B</span>&nbsp;<span class="builtintype" id="7736341">int32</span>&nbsp;<span class="comment" id="7736347">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736367">C</span>&nbsp;<span class="builtintype" id="7736369">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736377">D</span>&nbsp;<span class="op" id="7736379">[</span><span class="op" id="7736380">]</span><span class="builtintype" id="7736381">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736387">E</span>&nbsp;<span class="op" id="7736389">*</span><span class="builtintype" id="7736390">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7736401">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736425">F</span>&nbsp;<span class="op" id="7736427">*</span><span class="op" id="7736428">*</span><span class="op" id="7736429">*</span><span class="op" id="7736430">*</span><span class="builtintype" id="7736431">float64</span>&nbsp;<span class="comment" id="7736439">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736463">G</span>&nbsp;<span class="op" id="7736465">*</span><span class="ident" id="7736466">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736471">H</span>&nbsp;<span class="op" id="7736473">*</span><span class="ident" id="7736474">Bar</span>&nbsp;<span class="comment" id="7736478">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736533">I</span>&nbsp;<span class="op" id="7736535">*</span><span class="ident" id="7736536">Foo</span>&nbsp;<span class="comment" id="7736540">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="7736560">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="7736563">func</span>&nbsp;<span class="ident" id="7736568">TestStructType</span><span class="op" id="7736582">(</span><span class="ident" id="7736583">t</span>&nbsp;<span class="op" id="7736585">*</span><span class="ident" id="7736586">testing</span><span class="op" id="7736593">.</span><span class="ident" id="7736594">T</span><span class="op" id="7736595">)</span>&nbsp;<span class="op" id="7736597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736600">sstruct</span>&nbsp;<span class="op" id="7736608">:=</span>&nbsp;<span class="ident" id="7736611">getTypeUnlocked</span><span class="op" id="7736626">(</span><span class="string" id="7736627">&#34;Foo&#34;</span><span class="op" id="7736632">,</span>&nbsp;<span class="ident" id="7736634">reflect</span><span class="op" id="7736641">.</span><span class="ident" id="7736642">TypeOf</span><span class="op" id="7736648">(</span><span class="ident" id="7736649">Foo</span><span class="op" id="7736652">{</span><span class="op" id="7736653">}</span><span class="op" id="7736654">)</span><span class="op" id="7736655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736658">str</span>&nbsp;<span class="op" id="7736662">:=</span>&nbsp;<span class="ident" id="7736665">sstruct</span><span class="op" id="7736672">.</span><span class="builtintype" id="7736673">string</span><span class="op" id="7736679">(</span><span class="op" id="7736680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7736683">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736740">expected</span>&nbsp;<span class="op" id="7736749">:=</span>&nbsp;<span class="string" id="7736752">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736867">if</span>&nbsp;<span class="ident" id="7736870">str</span>&nbsp;<span class="op" id="7736874">!=</span>&nbsp;<span class="ident" id="7736877">expected</span>&nbsp;<span class="op" id="7736886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736890">t</span><span class="op" id="7736891">.</span><span class="ident" id="7736892">Errorf</span><span class="op" id="7736898">(</span><span class="string" id="7736899">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7736934">,</span>&nbsp;<span class="ident" id="7736936">str</span><span class="op" id="7736939">,</span>&nbsp;<span class="ident" id="7736941">expected</span><span class="op" id="7736949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736952">}</span><br>
<span class="lineno"></span><span class="op" id="7736954">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="7736957">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="7737034">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="7737071">func</span>&nbsp;<span class="ident" id="7737076">TestRegistration</span><span class="op" id="7737092">(</span><span class="ident" id="7737093">t</span>&nbsp;<span class="op" id="7737095">*</span><span class="ident" id="7737096">testing</span><span class="op" id="7737103">.</span><span class="ident" id="7737104">T</span><span class="op" id="7737105">)</span>&nbsp;<span class="op" id="7737107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737110">type</span>&nbsp;<span class="ident" id="7737115">T</span>&nbsp;<span class="keyword" id="7737117">struct</span><span class="op" id="7737123">{</span>&nbsp;<span class="ident" id="7737125">a</span>&nbsp;<span class="builtintype" id="7737127">int</span>&nbsp;<span class="op" id="7737131">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737134">Register</span><span class="op" id="7737142">(</span><span class="builtinfunc" id="7737143">new</span><span class="op" id="7737146">(</span><span class="ident" id="7737147">T</span><span class="op" id="7737148">)</span><span class="op" id="7737149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737152">Register</span><span class="op" id="7737160">(</span><span class="builtinfunc" id="7737161">new</span><span class="op" id="7737164">(</span><span class="ident" id="7737165">T</span><span class="op" id="7737166">)</span><span class="op" id="7737167">)</span><br>
<span class="lineno"></span><span class="op" id="7737169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7737172">type</span>&nbsp;<span class="ident" id="7737177">N1</span>&nbsp;<span class="keyword" id="7737180">struct</span><span class="op" id="7737186">{</span><span class="op" id="7737187">}</span><br>
<span class="lineno">165</span><span class="keyword" id="7737189">type</span>&nbsp;<span class="ident" id="7737194">N2</span>&nbsp;<span class="keyword" id="7737197">struct</span><span class="op" id="7737203">{</span><span class="op" id="7737204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7737207">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="7737243">func</span>&nbsp;<span class="ident" id="7737248">TestRegistrationNaming</span><span class="op" id="7737270">(</span><span class="ident" id="7737271">t</span>&nbsp;<span class="op" id="7737273">*</span><span class="ident" id="7737274">testing</span><span class="op" id="7737281">.</span><span class="ident" id="7737282">T</span><span class="op" id="7737283">)</span>&nbsp;<span class="op" id="7737285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737288">testCases</span>&nbsp;<span class="op" id="7737298">:=</span>&nbsp;<span class="op" id="7737301">[</span><span class="op" id="7737302">]</span><span class="keyword" id="7737303">struct</span>&nbsp;<span class="op" id="7737310">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737314">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7737319">interface</span><span class="op" id="7737328">{</span><span class="op" id="7737329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737333">name</span>&nbsp;<span class="builtintype" id="7737338">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737346">}</span><span class="op" id="7737347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737351">{</span><span class="op" id="7737352">&amp;</span><span class="ident" id="7737353">N1</span><span class="op" id="7737355">{</span><span class="op" id="7737356">}</span><span class="op" id="7737357">,</span>&nbsp;<span class="string" id="7737359">&#34;*gob.N1&#34;</span><span class="op" id="7737368">}</span><span class="op" id="7737369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737373">{</span><span class="ident" id="7737374">N2</span><span class="op" id="7737376">{</span><span class="op" id="7737377">}</span><span class="op" id="7737378">,</span>&nbsp;<span class="string" id="7737380">&#34;encoding/gob.N2&#34;</span><span class="op" id="7737397">}</span><span class="op" id="7737398">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737405">for</span>&nbsp;<span class="ident" id="7737409">_</span><span class="op" id="7737410">,</span>&nbsp;<span class="ident" id="7737412">tc</span>&nbsp;<span class="op" id="7737415">:=</span>&nbsp;<span class="keyword" id="7737418">range</span>&nbsp;<span class="ident" id="7737424">testCases</span>&nbsp;<span class="op" id="7737434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737438">Register</span><span class="op" id="7737446">(</span><span class="ident" id="7737447">tc</span><span class="op" id="7737449">.</span><span class="ident" id="7737450">t</span><span class="op" id="7737451">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737456">tct</span>&nbsp;<span class="op" id="7737460">:=</span>&nbsp;<span class="ident" id="7737463">reflect</span><span class="op" id="7737470">.</span><span class="ident" id="7737471">TypeOf</span><span class="op" id="7737477">(</span><span class="ident" id="7737478">tc</span><span class="op" id="7737480">.</span><span class="ident" id="7737481">t</span><span class="op" id="7737482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737486">registerLock</span><span class="op" id="7737498">.</span><span class="ident" id="7737499">RLock</span><span class="op" id="7737504">(</span><span class="op" id="7737505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737509">ct</span>&nbsp;<span class="op" id="7737512">:=</span>&nbsp;<span class="ident" id="7737515">nameToConcreteType</span><span class="op" id="7737533">[</span><span class="ident" id="7737534">tc</span><span class="op" id="7737536">.</span><span class="ident" id="7737537">name</span><span class="op" id="7737541">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737545">registerLock</span><span class="op" id="7737557">.</span><span class="ident" id="7737558">RUnlock</span><span class="op" id="7737565">(</span><span class="op" id="7737566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737570">if</span>&nbsp;<span class="ident" id="7737573">ct</span>&nbsp;<span class="op" id="7737576">!=</span>&nbsp;<span class="ident" id="7737579">tct</span>&nbsp;<span class="op" id="7737583">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737588">t</span><span class="op" id="7737589">.</span><span class="ident" id="7737590">Errorf</span><span class="op" id="7737596">(</span><span class="string" id="7737597">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7737635">,</span>&nbsp;<span class="ident" id="7737637">tc</span><span class="op" id="7737639">.</span><span class="ident" id="7737640">name</span><span class="op" id="7737644">,</span>&nbsp;<span class="ident" id="7737646">ct</span><span class="op" id="7737648">,</span>&nbsp;<span class="ident" id="7737650">tct</span><span class="op" id="7737653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7737661">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737713">if</span>&nbsp;<span class="ident" id="7737716">tct</span><span class="op" id="7737719">.</span><span class="ident" id="7737720">Kind</span><span class="op" id="7737724">(</span><span class="op" id="7737725">)</span>&nbsp;<span class="op" id="7737727">==</span>&nbsp;<span class="ident" id="7737730">reflect</span><span class="op" id="7737737">.</span><span class="ident" id="7737738">Ptr</span>&nbsp;<span class="op" id="7737742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737747">tct</span>&nbsp;<span class="op" id="7737751">=</span>&nbsp;<span class="ident" id="7737753">tct</span><span class="op" id="7737756">.</span><span class="ident" id="7737757">Elem</span><span class="op" id="7737761">(</span><span class="op" id="7737762">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737770">if</span>&nbsp;<span class="ident" id="7737773">n</span>&nbsp;<span class="op" id="7737775">:=</span>&nbsp;<span class="ident" id="7737778">concreteTypeToName</span><span class="op" id="7737796">[</span><span class="ident" id="7737797">tct</span><span class="op" id="7737800">]</span><span class="op" id="7737801">;</span>&nbsp;<span class="ident" id="7737803">n</span>&nbsp;<span class="op" id="7737805">!=</span>&nbsp;<span class="ident" id="7737808">tc</span><span class="op" id="7737810">.</span><span class="ident" id="7737811">name</span>&nbsp;<span class="op" id="7737816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737821">t</span><span class="op" id="7737822">.</span><span class="ident" id="7737823">Errorf</span><span class="op" id="7737829">(</span><span class="string" id="7737830">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7737870">,</span>&nbsp;<span class="ident" id="7737872">tct</span><span class="op" id="7737875">,</span>&nbsp;<span class="ident" id="7737877">n</span><span class="op" id="7737878">,</span>&nbsp;<span class="ident" id="7737880">tc</span><span class="op" id="7737882">.</span><span class="ident" id="7737883">name</span><span class="op" id="7737887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737894">}</span><br>
<span class="lineno">195</span><span class="op" id="7737896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7737899">func</span>&nbsp;<span class="ident" id="7737904">TestStressParallel</span><span class="op" id="7737922">(</span><span class="ident" id="7737923">t</span>&nbsp;<span class="op" id="7737925">*</span><span class="ident" id="7737926">testing</span><span class="op" id="7737933">.</span><span class="ident" id="7737934">T</span><span class="op" id="7737935">)</span>&nbsp;<span class="op" id="7737937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737940">type</span>&nbsp;<span class="ident" id="7737945">T2</span>&nbsp;<span class="keyword" id="7737948">struct</span><span class="op" id="7737954">{</span>&nbsp;<span class="ident" id="7737956">A</span>&nbsp;<span class="builtintype" id="7737958">int</span>&nbsp;<span class="op" id="7737962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737965">c</span>&nbsp;<span class="op" id="7737967">:=</span>&nbsp;<span class="builtinfunc" id="7737970">make</span><span class="op" id="7737974">(</span><span class="keyword" id="7737975">chan</span>&nbsp;<span class="builtintype" id="7737980">bool</span><span class="op" id="7737984">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737987">const</span>&nbsp;<span class="ident" id="7737993">N</span>&nbsp;<span class="op" id="7737995">=</span>&nbsp;<span class="num" id="7737997">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738001">for</span>&nbsp;<span class="ident" id="7738005">i</span>&nbsp;<span class="op" id="7738007">:=</span>&nbsp;<span class="num" id="7738010">0</span><span class="op" id="7738011">;</span>&nbsp;<span class="ident" id="7738013">i</span>&nbsp;<span class="op" id="7738015">&lt;</span>&nbsp;<span class="ident" id="7738017">N</span><span class="op" id="7738018">;</span>&nbsp;<span class="ident" id="7738020">i</span><span class="op" id="7738021">++</span>&nbsp;<span class="op" id="7738024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738028">go</span>&nbsp;<span class="keyword" id="7738031">func</span><span class="op" id="7738035">(</span><span class="op" id="7738036">)</span>&nbsp;<span class="op" id="7738038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738043">p</span>&nbsp;<span class="op" id="7738045">:=</span>&nbsp;<span class="builtinfunc" id="7738048">new</span><span class="op" id="7738051">(</span><span class="ident" id="7738052">T2</span><span class="op" id="7738054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738059">Register</span><span class="op" id="7738067">(</span><span class="ident" id="7738068">p</span><span class="op" id="7738069">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738074">b</span>&nbsp;<span class="op" id="7738076">:=</span>&nbsp;<span class="builtinfunc" id="7738079">new</span><span class="op" id="7738082">(</span><span class="ident" id="7738083">bytes</span><span class="op" id="7738088">.</span><span class="ident" id="7738089">Buffer</span><span class="op" id="7738095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738100">enc</span>&nbsp;<span class="op" id="7738104">:=</span>&nbsp;<span class="ident" id="7738107">NewEncoder</span><span class="op" id="7738117">(</span><span class="ident" id="7738118">b</span><span class="op" id="7738119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738124">err</span>&nbsp;<span class="op" id="7738128">:=</span>&nbsp;<span class="ident" id="7738131">enc</span><span class="op" id="7738134">.</span><span class="ident" id="7738135">Encode</span><span class="op" id="7738141">(</span><span class="ident" id="7738142">p</span><span class="op" id="7738143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738148">if</span>&nbsp;<span class="ident" id="7738151">err</span>&nbsp;<span class="op" id="7738155">!=</span>&nbsp;<span class="ident" id="7738158">nil</span>&nbsp;<span class="op" id="7738162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738168">t</span><span class="op" id="7738169">.</span><span class="ident" id="7738170">Error</span><span class="op" id="7738175">(</span><span class="string" id="7738176">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="7738191">,</span>&nbsp;<span class="ident" id="7738193">err</span><span class="op" id="7738196">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738206">dec</span>&nbsp;<span class="op" id="7738210">:=</span>&nbsp;<span class="ident" id="7738213">NewDecoder</span><span class="op" id="7738223">(</span><span class="ident" id="7738224">b</span><span class="op" id="7738225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738230">err</span>&nbsp;<span class="op" id="7738234">=</span>&nbsp;<span class="ident" id="7738236">dec</span><span class="op" id="7738239">.</span><span class="ident" id="7738240">Decode</span><span class="op" id="7738246">(</span><span class="ident" id="7738247">p</span><span class="op" id="7738248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738253">if</span>&nbsp;<span class="ident" id="7738256">err</span>&nbsp;<span class="op" id="7738260">!=</span>&nbsp;<span class="ident" id="7738263">nil</span>&nbsp;<span class="op" id="7738267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738273">t</span><span class="op" id="7738274">.</span><span class="ident" id="7738275">Error</span><span class="op" id="7738280">(</span><span class="string" id="7738281">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="7738296">,</span>&nbsp;<span class="ident" id="7738298">err</span><span class="op" id="7738301">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738311">c</span>&nbsp;<span class="op" id="7738313">&lt;-</span>&nbsp;<span class="builtintype" id="7738316">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738323">}</span><span class="op" id="7738324">(</span><span class="op" id="7738325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738331">for</span>&nbsp;<span class="ident" id="7738335">i</span>&nbsp;<span class="op" id="7738337">:=</span>&nbsp;<span class="num" id="7738340">0</span><span class="op" id="7738341">;</span>&nbsp;<span class="ident" id="7738343">i</span>&nbsp;<span class="op" id="7738345">&lt;</span>&nbsp;<span class="ident" id="7738347">N</span><span class="op" id="7738348">;</span>&nbsp;<span class="ident" id="7738350">i</span><span class="op" id="7738351">++</span>&nbsp;<span class="op" id="7738354">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738358">&lt;-</span><span class="ident" id="7738360">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738363">}</span><br>
<span class="lineno"></span><span class="op" id="7738365">}</span>
</div>
</body>
</html>
