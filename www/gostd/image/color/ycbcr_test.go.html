<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html" class="current">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8518468">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8518523">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8518577">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8518628">package</span>&nbsp;<span class="ident" id="8518636">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8518643">import</span>&nbsp;<span class="op" id="8518650">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8518653">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8518663">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8518666">func</span>&nbsp;<span class="ident" id="8518671">delta</span><span class="op" id="8518676">(</span><span class="ident" id="8518677">x</span><span class="op" id="8518678">,</span>&nbsp;<span class="ident" id="8518680">y</span>&nbsp;<span class="builtintype" id="8518682">uint8</span><span class="op" id="8518687">)</span>&nbsp;<span class="builtintype" id="8518689">uint8</span>&nbsp;<span class="op" id="8518695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8518698">if</span>&nbsp;<span class="ident" id="8518701">x</span>&nbsp;<span class="op" id="8518703">&gt;=</span>&nbsp;<span class="ident" id="8518706">y</span>&nbsp;<span class="op" id="8518708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8518712">return</span>&nbsp;<span class="ident" id="8518719">x</span>&nbsp;<span class="op" id="8518721">-</span>&nbsp;<span class="ident" id="8518723">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8518726">}</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8518729">return</span>&nbsp;<span class="ident" id="8518736">y</span>&nbsp;<span class="op" id="8518738">-</span>&nbsp;<span class="ident" id="8518740">x</span><br>
<span class="lineno"></span><span class="op" id="8518742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8518745">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;subset&nbsp;of&nbsp;RGB&nbsp;space&nbsp;can&nbsp;be&nbsp;converted&nbsp;to&nbsp;YCbCr&nbsp;and&nbsp;back&nbsp;to&nbsp;within</span><br>
<span class="lineno"></span><span class="comment" id="8518825">//&nbsp;1/256&nbsp;tolerance.</span><br>
<span class="lineno">20</span><span class="keyword" id="8518845">func</span>&nbsp;<span class="ident" id="8518850">TestRoundtrip</span><span class="op" id="8518863">(</span><span class="ident" id="8518864">t</span>&nbsp;<span class="op" id="8518866">*</span><span class="ident" id="8518867">testing</span><span class="op" id="8518874">.</span><span class="ident" id="8518875">T</span><span class="op" id="8518876">)</span>&nbsp;<span class="op" id="8518878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8518881">for</span>&nbsp;<span class="ident" id="8518885">r</span>&nbsp;<span class="op" id="8518887">:=</span>&nbsp;<span class="num" id="8518890">0</span><span class="op" id="8518891">;</span>&nbsp;<span class="ident" id="8518893">r</span>&nbsp;<span class="op" id="8518895">&lt;</span>&nbsp;<span class="num" id="8518897">255</span><span class="op" id="8518900">;</span>&nbsp;<span class="ident" id="8518902">r</span>&nbsp;<span class="op" id="8518904">+=</span>&nbsp;<span class="num" id="8518907">7</span>&nbsp;<span class="op" id="8518909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8518913">for</span>&nbsp;<span class="ident" id="8518917">g</span>&nbsp;<span class="op" id="8518919">:=</span>&nbsp;<span class="num" id="8518922">0</span><span class="op" id="8518923">;</span>&nbsp;<span class="ident" id="8518925">g</span>&nbsp;<span class="op" id="8518927">&lt;</span>&nbsp;<span class="num" id="8518929">255</span><span class="op" id="8518932">;</span>&nbsp;<span class="ident" id="8518934">g</span>&nbsp;<span class="op" id="8518936">+=</span>&nbsp;<span class="num" id="8518939">5</span>&nbsp;<span class="op" id="8518941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8518946">for</span>&nbsp;<span class="ident" id="8518950">b</span>&nbsp;<span class="op" id="8518952">:=</span>&nbsp;<span class="num" id="8518955">0</span><span class="op" id="8518956">;</span>&nbsp;<span class="ident" id="8518958">b</span>&nbsp;<span class="op" id="8518960">&lt;</span>&nbsp;<span class="num" id="8518962">255</span><span class="op" id="8518965">;</span>&nbsp;<span class="ident" id="8518967">b</span>&nbsp;<span class="op" id="8518969">+=</span>&nbsp;<span class="num" id="8518972">3</span>&nbsp;<span class="op" id="8518974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8518980">r0</span><span class="op" id="8518982">,</span>&nbsp;<span class="ident" id="8518984">g0</span><span class="op" id="8518986">,</span>&nbsp;<span class="ident" id="8518988">b0</span>&nbsp;<span class="op" id="8518991">:=</span>&nbsp;<span class="builtintype" id="8518994">uint8</span><span class="op" id="8518999">(</span><span class="ident" id="8519000">r</span><span class="op" id="8519001">)</span><span class="op" id="8519002">,</span>&nbsp;<span class="builtintype" id="8519004">uint8</span><span class="op" id="8519009">(</span><span class="ident" id="8519010">g</span><span class="op" id="8519011">)</span><span class="op" id="8519012">,</span>&nbsp;<span class="builtintype" id="8519014">uint8</span><span class="op" id="8519019">(</span><span class="ident" id="8519020">b</span><span class="op" id="8519021">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8519027">y</span><span class="op" id="8519028">,</span>&nbsp;<span class="ident" id="8519030">cb</span><span class="op" id="8519032">,</span>&nbsp;<span class="ident" id="8519034">cr</span>&nbsp;<span class="op" id="8519037">:=</span>&nbsp;<span class="ident" id="8519040">RGBToYCbCr</span><span class="op" id="8519050">(</span><span class="ident" id="8519051">r0</span><span class="op" id="8519053">,</span>&nbsp;<span class="ident" id="8519055">g0</span><span class="op" id="8519057">,</span>&nbsp;<span class="ident" id="8519059">b0</span><span class="op" id="8519061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8519067">r1</span><span class="op" id="8519069">,</span>&nbsp;<span class="ident" id="8519071">g1</span><span class="op" id="8519073">,</span>&nbsp;<span class="ident" id="8519075">b1</span>&nbsp;<span class="op" id="8519078">:=</span>&nbsp;<span class="ident" id="8519081">YCbCrToRGB</span><span class="op" id="8519091">(</span><span class="ident" id="8519092">y</span><span class="op" id="8519093">,</span>&nbsp;<span class="ident" id="8519095">cb</span><span class="op" id="8519097">,</span>&nbsp;<span class="ident" id="8519099">cr</span><span class="op" id="8519101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8519107">if</span>&nbsp;<span class="ident" id="8519110">delta</span><span class="op" id="8519115">(</span><span class="ident" id="8519116">r0</span><span class="op" id="8519118">,</span>&nbsp;<span class="ident" id="8519120">r1</span><span class="op" id="8519122">)</span>&nbsp;<span class="op" id="8519124">&gt;</span>&nbsp;<span class="num" id="8519126">1</span>&nbsp;<span class="op" id="8519128">||</span>&nbsp;<span class="ident" id="8519131">delta</span><span class="op" id="8519136">(</span><span class="ident" id="8519137">g0</span><span class="op" id="8519139">,</span>&nbsp;<span class="ident" id="8519141">g1</span><span class="op" id="8519143">)</span>&nbsp;<span class="op" id="8519145">&gt;</span>&nbsp;<span class="num" id="8519147">1</span>&nbsp;<span class="op" id="8519149">||</span>&nbsp;<span class="ident" id="8519152">delta</span><span class="op" id="8519157">(</span><span class="ident" id="8519158">b0</span><span class="op" id="8519160">,</span>&nbsp;<span class="ident" id="8519162">b1</span><span class="op" id="8519164">)</span>&nbsp;<span class="op" id="8519166">&gt;</span>&nbsp;<span class="num" id="8519168">1</span>&nbsp;<span class="op" id="8519170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8519177">t</span><span class="op" id="8519178">.</span><span class="ident" id="8519179">Fatalf</span><span class="op" id="8519185">(</span><span class="string" id="8519186">&#34;r0,&nbsp;g0,&nbsp;b0&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&nbsp;&nbsp;&nbsp;r1,&nbsp;g1,&nbsp;b1&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&#34;</span><span class="op" id="8519237">,</span>&nbsp;<span class="ident" id="8519239">r0</span><span class="op" id="8519241">,</span>&nbsp;<span class="ident" id="8519243">g0</span><span class="op" id="8519245">,</span>&nbsp;<span class="ident" id="8519247">b0</span><span class="op" id="8519249">,</span>&nbsp;<span class="ident" id="8519251">r1</span><span class="op" id="8519253">,</span>&nbsp;<span class="ident" id="8519255">g1</span><span class="op" id="8519257">,</span>&nbsp;<span class="ident" id="8519259">b1</span><span class="op" id="8519261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8519267">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8519272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8519276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8519279">}</span><br>
<span class="lineno"></span><span class="op" id="8519281">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
