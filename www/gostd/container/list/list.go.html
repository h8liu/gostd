<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/list</h2>
<ul>
<li><a href="/gostd/container/list/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/container/list/list.go.html" class="current">list.go</a></li>
<li><a href="/gostd/container/list/list_test.go.html">list_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4325110">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4325165">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4325219">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4325270">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4325319">//</span><br>
<span class="lineno"></span><span class="comment" id="4325322">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4325370">//&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4325418">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4325451">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="4325456">//</span><br>
<span class="lineno"></span><span class="keyword" id="4325459">package</span>&nbsp;<span class="ident" id="4325467">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4325473">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4325516">type</span>&nbsp;<span class="ident" id="4325521">Element</span>&nbsp;<span class="keyword" id="4325529">struct</span>&nbsp;<span class="op" id="4325536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4325539">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4325609">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4325680">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4325750">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4325821">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4325846">next</span><span class="op" id="4325850">,</span>&nbsp;<span class="ident" id="4325852">prev</span>&nbsp;<span class="op" id="4325857">*</span><span class="ident" id="4325858">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4325868">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4325912">list</span>&nbsp;<span class="op" id="4325917">*</span><span class="ident" id="4325918">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4325925">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4325965">Value</span>&nbsp;<span class="keyword" id="4325971">interface</span><span class="op" id="4325980">{</span><span class="op" id="4325981">}</span><br>
<span class="lineno"></span><span class="op" id="4325983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4325986">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4326032">func</span>&nbsp;<span class="op" id="4326037">(</span><span class="ident" id="4326038">e</span>&nbsp;<span class="op" id="4326040">*</span><span class="ident" id="4326041">Element</span><span class="op" id="4326048">)</span>&nbsp;<span class="ident" id="4326050">Next</span><span class="op" id="4326054">(</span><span class="op" id="4326055">)</span>&nbsp;<span class="op" id="4326057">*</span><span class="ident" id="4326058">Element</span>&nbsp;<span class="op" id="4326066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4326069">if</span>&nbsp;<span class="ident" id="4326072">p</span>&nbsp;<span class="op" id="4326074">:=</span>&nbsp;<span class="ident" id="4326077">e</span><span class="op" id="4326078">.</span><span class="ident" id="4326079">next</span><span class="op" id="4326083">;</span>&nbsp;<span class="ident" id="4326085">e</span><span class="op" id="4326086">.</span><span class="ident" id="4326087">list</span>&nbsp;<span class="op" id="4326092">!=</span>&nbsp;<span class="ident" id="4326095">nil</span>&nbsp;<span class="op" id="4326099">&amp;&amp;</span>&nbsp;<span class="ident" id="4326102">p</span>&nbsp;<span class="op" id="4326104">!=</span>&nbsp;<span class="op" id="4326107">&amp;</span><span class="ident" id="4326108">e</span><span class="op" id="4326109">.</span><span class="ident" id="4326110">list</span><span class="op" id="4326114">.</span><span class="ident" id="4326115">root</span>&nbsp;<span class="op" id="4326120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4326124">return</span>&nbsp;<span class="ident" id="4326131">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4326134">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4326137">return</span>&nbsp;<span class="ident" id="4326144">nil</span><br>
<span class="lineno"></span><span class="op" id="4326148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4326151">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4326201">func</span>&nbsp;<span class="op" id="4326206">(</span><span class="ident" id="4326207">e</span>&nbsp;<span class="op" id="4326209">*</span><span class="ident" id="4326210">Element</span><span class="op" id="4326217">)</span>&nbsp;<span class="ident" id="4326219">Prev</span><span class="op" id="4326223">(</span><span class="op" id="4326224">)</span>&nbsp;<span class="op" id="4326226">*</span><span class="ident" id="4326227">Element</span>&nbsp;<span class="op" id="4326235">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4326238">if</span>&nbsp;<span class="ident" id="4326241">p</span>&nbsp;<span class="op" id="4326243">:=</span>&nbsp;<span class="ident" id="4326246">e</span><span class="op" id="4326247">.</span><span class="ident" id="4326248">prev</span><span class="op" id="4326252">;</span>&nbsp;<span class="ident" id="4326254">e</span><span class="op" id="4326255">.</span><span class="ident" id="4326256">list</span>&nbsp;<span class="op" id="4326261">!=</span>&nbsp;<span class="ident" id="4326264">nil</span>&nbsp;<span class="op" id="4326268">&amp;&amp;</span>&nbsp;<span class="ident" id="4326271">p</span>&nbsp;<span class="op" id="4326273">!=</span>&nbsp;<span class="op" id="4326276">&amp;</span><span class="ident" id="4326277">e</span><span class="op" id="4326278">.</span><span class="ident" id="4326279">list</span><span class="op" id="4326283">.</span><span class="ident" id="4326284">root</span>&nbsp;<span class="op" id="4326289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4326293">return</span>&nbsp;<span class="ident" id="4326300">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4326303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4326306">return</span>&nbsp;<span class="ident" id="4326313">nil</span><br>
<span class="lineno"></span><span class="op" id="4326317">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4326320">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4326361">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4326419">type</span>&nbsp;<span class="ident" id="4326424">List</span>&nbsp;<span class="keyword" id="4326429">struct</span>&nbsp;<span class="op" id="4326436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4326439">root</span>&nbsp;<span class="ident" id="4326444">Element</span>&nbsp;<span class="comment" id="4326452">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4326525">len</span>&nbsp;&nbsp;<span class="builtintype" id="4326530">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4326538">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4326595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4326598">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4326636">func</span>&nbsp;<span class="op" id="4326641">(</span><span class="ident" id="4326642">l</span>&nbsp;<span class="op" id="4326644">*</span><span class="ident" id="4326645">List</span><span class="op" id="4326649">)</span>&nbsp;<span class="ident" id="4326651">Init</span><span class="op" id="4326655">(</span><span class="op" id="4326656">)</span>&nbsp;<span class="op" id="4326658">*</span><span class="ident" id="4326659">List</span>&nbsp;<span class="op" id="4326664">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4326667">l</span><span class="op" id="4326668">.</span><span class="ident" id="4326669">root</span><span class="op" id="4326673">.</span><span class="ident" id="4326674">next</span>&nbsp;<span class="op" id="4326679">=</span>&nbsp;<span class="op" id="4326681">&amp;</span><span class="ident" id="4326682">l</span><span class="op" id="4326683">.</span><span class="ident" id="4326684">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4326690">l</span><span class="op" id="4326691">.</span><span class="ident" id="4326692">root</span><span class="op" id="4326696">.</span><span class="ident" id="4326697">prev</span>&nbsp;<span class="op" id="4326702">=</span>&nbsp;<span class="op" id="4326704">&amp;</span><span class="ident" id="4326705">l</span><span class="op" id="4326706">.</span><span class="ident" id="4326707">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4326713">l</span><span class="op" id="4326714">.</span><span class="builtinfunc" id="4326715">len</span>&nbsp;<span class="op" id="4326719">=</span>&nbsp;<span class="num" id="4326721">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4326724">return</span>&nbsp;<span class="ident" id="4326731">l</span><br>
<span class="lineno"></span><span class="op" id="4326733">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4326736">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4326772">func</span>&nbsp;<span class="ident" id="4326777">New</span><span class="op" id="4326780">(</span><span class="op" id="4326781">)</span>&nbsp;<span class="op" id="4326783">*</span><span class="ident" id="4326784">List</span>&nbsp;<span class="op" id="4326789">{</span>&nbsp;<span class="keyword" id="4326791">return</span>&nbsp;<span class="builtinfunc" id="4326798">new</span><span class="op" id="4326801">(</span><span class="ident" id="4326802">List</span><span class="op" id="4326806">)</span><span class="op" id="4326807">.</span><span class="ident" id="4326808">Init</span><span class="op" id="4326812">(</span><span class="op" id="4326813">)</span>&nbsp;<span class="op" id="4326815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4326818">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4326867">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4326894">func</span>&nbsp;<span class="op" id="4326899">(</span><span class="ident" id="4326900">l</span>&nbsp;<span class="op" id="4326902">*</span><span class="ident" id="4326903">List</span><span class="op" id="4326907">)</span>&nbsp;<span class="ident" id="4326909">Len</span><span class="op" id="4326912">(</span><span class="op" id="4326913">)</span>&nbsp;<span class="builtintype" id="4326915">int</span>&nbsp;<span class="op" id="4326919">{</span>&nbsp;<span class="keyword" id="4326921">return</span>&nbsp;<span class="ident" id="4326928">l</span><span class="op" id="4326929">.</span><span class="builtinfunc" id="4326930">len</span>&nbsp;<span class="op" id="4326934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4326937">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4326990">func</span>&nbsp;<span class="op" id="4326995">(</span><span class="ident" id="4326996">l</span>&nbsp;<span class="op" id="4326998">*</span><span class="ident" id="4326999">List</span><span class="op" id="4327003">)</span>&nbsp;<span class="ident" id="4327005">Front</span><span class="op" id="4327010">(</span><span class="op" id="4327011">)</span>&nbsp;<span class="op" id="4327013">*</span><span class="ident" id="4327014">Element</span>&nbsp;<span class="op" id="4327022">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327025">if</span>&nbsp;<span class="ident" id="4327028">l</span><span class="op" id="4327029">.</span><span class="builtinfunc" id="4327030">len</span>&nbsp;<span class="op" id="4327034">==</span>&nbsp;<span class="num" id="4327037">0</span>&nbsp;<span class="op" id="4327039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327043">return</span>&nbsp;<span class="ident" id="4327050">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4327055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327058">return</span>&nbsp;<span class="ident" id="4327065">l</span><span class="op" id="4327066">.</span><span class="ident" id="4327067">root</span><span class="op" id="4327071">.</span><span class="ident" id="4327072">next</span><br>
<span class="lineno"></span><span class="op" id="4327077">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4327080">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4327131">func</span>&nbsp;<span class="op" id="4327136">(</span><span class="ident" id="4327137">l</span>&nbsp;<span class="op" id="4327139">*</span><span class="ident" id="4327140">List</span><span class="op" id="4327144">)</span>&nbsp;<span class="ident" id="4327146">Back</span><span class="op" id="4327150">(</span><span class="op" id="4327151">)</span>&nbsp;<span class="op" id="4327153">*</span><span class="ident" id="4327154">Element</span>&nbsp;<span class="op" id="4327162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327165">if</span>&nbsp;<span class="ident" id="4327168">l</span><span class="op" id="4327169">.</span><span class="builtinfunc" id="4327170">len</span>&nbsp;<span class="op" id="4327174">==</span>&nbsp;<span class="num" id="4327177">0</span>&nbsp;<span class="op" id="4327179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327183">return</span>&nbsp;<span class="ident" id="4327190">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4327195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327198">return</span>&nbsp;<span class="ident" id="4327205">l</span><span class="op" id="4327206">.</span><span class="ident" id="4327207">root</span><span class="op" id="4327211">.</span><span class="ident" id="4327212">prev</span><br>
<span class="lineno"></span><span class="op" id="4327217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4327220">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4327270">func</span>&nbsp;<span class="op" id="4327275">(</span><span class="ident" id="4327276">l</span>&nbsp;<span class="op" id="4327278">*</span><span class="ident" id="4327279">List</span><span class="op" id="4327283">)</span>&nbsp;<span class="ident" id="4327285">lazyInit</span><span class="op" id="4327293">(</span><span class="op" id="4327294">)</span>&nbsp;<span class="op" id="4327296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327299">if</span>&nbsp;<span class="ident" id="4327302">l</span><span class="op" id="4327303">.</span><span class="ident" id="4327304">root</span><span class="op" id="4327308">.</span><span class="ident" id="4327309">next</span>&nbsp;<span class="op" id="4327314">==</span>&nbsp;<span class="ident" id="4327317">nil</span>&nbsp;<span class="op" id="4327321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327325">l</span><span class="op" id="4327326">.</span><span class="ident" id="4327327">Init</span><span class="op" id="4327331">(</span><span class="op" id="4327332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4327335">}</span><br>
<span class="lineno"></span><span class="op" id="4327337">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4327340">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4327403">func</span>&nbsp;<span class="op" id="4327408">(</span><span class="ident" id="4327409">l</span>&nbsp;<span class="op" id="4327411">*</span><span class="ident" id="4327412">List</span><span class="op" id="4327416">)</span>&nbsp;<span class="ident" id="4327418">insert</span><span class="op" id="4327424">(</span><span class="ident" id="4327425">e</span><span class="op" id="4327426">,</span>&nbsp;<span class="ident" id="4327428">at</span>&nbsp;<span class="op" id="4327431">*</span><span class="ident" id="4327432">Element</span><span class="op" id="4327439">)</span>&nbsp;<span class="op" id="4327441">*</span><span class="ident" id="4327442">Element</span>&nbsp;<span class="op" id="4327450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327453">n</span>&nbsp;<span class="op" id="4327455">:=</span>&nbsp;<span class="ident" id="4327458">at</span><span class="op" id="4327460">.</span><span class="ident" id="4327461">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327467">at</span><span class="op" id="4327469">.</span><span class="ident" id="4327470">next</span>&nbsp;<span class="op" id="4327475">=</span>&nbsp;<span class="ident" id="4327477">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327480">e</span><span class="op" id="4327481">.</span><span class="ident" id="4327482">prev</span>&nbsp;<span class="op" id="4327487">=</span>&nbsp;<span class="ident" id="4327489">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327493">e</span><span class="op" id="4327494">.</span><span class="ident" id="4327495">next</span>&nbsp;<span class="op" id="4327500">=</span>&nbsp;<span class="ident" id="4327502">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327505">n</span><span class="op" id="4327506">.</span><span class="ident" id="4327507">prev</span>&nbsp;<span class="op" id="4327512">=</span>&nbsp;<span class="ident" id="4327514">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327517">e</span><span class="op" id="4327518">.</span><span class="ident" id="4327519">list</span>&nbsp;<span class="op" id="4327524">=</span>&nbsp;<span class="ident" id="4327526">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327529">l</span><span class="op" id="4327530">.</span><span class="builtinfunc" id="4327531">len</span><span class="op" id="4327534">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327538">return</span>&nbsp;<span class="ident" id="4327545">e</span><br>
<span class="lineno"></span><span class="op" id="4327547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4327550">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4327626">func</span>&nbsp;<span class="op" id="4327631">(</span><span class="ident" id="4327632">l</span>&nbsp;<span class="op" id="4327634">*</span><span class="ident" id="4327635">List</span><span class="op" id="4327639">)</span>&nbsp;<span class="ident" id="4327641">insertValue</span><span class="op" id="4327652">(</span><span class="ident" id="4327653">v</span>&nbsp;<span class="keyword" id="4327655">interface</span><span class="op" id="4327664">{</span><span class="op" id="4327665">}</span><span class="op" id="4327666">,</span>&nbsp;<span class="ident" id="4327668">at</span>&nbsp;<span class="op" id="4327671">*</span><span class="ident" id="4327672">Element</span><span class="op" id="4327679">)</span>&nbsp;<span class="op" id="4327681">*</span><span class="ident" id="4327682">Element</span>&nbsp;<span class="op" id="4327690">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327693">return</span>&nbsp;<span class="ident" id="4327700">l</span><span class="op" id="4327701">.</span><span class="ident" id="4327702">insert</span><span class="op" id="4327708">(</span><span class="op" id="4327709">&amp;</span><span class="ident" id="4327710">Element</span><span class="op" id="4327717">{</span><span class="ident" id="4327718">Value</span><span class="op" id="4327723">:</span>&nbsp;<span class="ident" id="4327725">v</span><span class="op" id="4327726">}</span><span class="op" id="4327727">,</span>&nbsp;<span class="ident" id="4327729">at</span><span class="op" id="4327731">)</span><br>
<span class="lineno"></span><span class="op" id="4327733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4327736">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4327804">func</span>&nbsp;<span class="op" id="4327809">(</span><span class="ident" id="4327810">l</span>&nbsp;<span class="op" id="4327812">*</span><span class="ident" id="4327813">List</span><span class="op" id="4327817">)</span>&nbsp;<span class="ident" id="4327819">remove</span><span class="op" id="4327825">(</span><span class="ident" id="4327826">e</span>&nbsp;<span class="op" id="4327828">*</span><span class="ident" id="4327829">Element</span><span class="op" id="4327836">)</span>&nbsp;<span class="op" id="4327838">*</span><span class="ident" id="4327839">Element</span>&nbsp;<span class="op" id="4327847">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327850">e</span><span class="op" id="4327851">.</span><span class="ident" id="4327852">prev</span><span class="op" id="4327856">.</span><span class="ident" id="4327857">next</span>&nbsp;<span class="op" id="4327862">=</span>&nbsp;<span class="ident" id="4327864">e</span><span class="op" id="4327865">.</span><span class="ident" id="4327866">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327872">e</span><span class="op" id="4327873">.</span><span class="ident" id="4327874">next</span><span class="op" id="4327878">.</span><span class="ident" id="4327879">prev</span>&nbsp;<span class="op" id="4327884">=</span>&nbsp;<span class="ident" id="4327886">e</span><span class="op" id="4327887">.</span><span class="ident" id="4327888">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327894">e</span><span class="op" id="4327895">.</span><span class="ident" id="4327896">next</span>&nbsp;<span class="op" id="4327901">=</span>&nbsp;<span class="ident" id="4327903">nil</span>&nbsp;<span class="comment" id="4327907">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327930">e</span><span class="op" id="4327931">.</span><span class="ident" id="4327932">prev</span>&nbsp;<span class="op" id="4327937">=</span>&nbsp;<span class="ident" id="4327939">nil</span>&nbsp;<span class="comment" id="4327943">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327966">e</span><span class="op" id="4327967">.</span><span class="ident" id="4327968">list</span>&nbsp;<span class="op" id="4327973">=</span>&nbsp;<span class="ident" id="4327975">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4327980">l</span><span class="op" id="4327981">.</span><span class="builtinfunc" id="4327982">len</span><span class="op" id="4327985">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4327989">return</span>&nbsp;<span class="ident" id="4327996">e</span><br>
<span class="lineno"></span><span class="op" id="4327998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4328001">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4328058">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4328099">func</span>&nbsp;<span class="op" id="4328104">(</span><span class="ident" id="4328105">l</span>&nbsp;<span class="op" id="4328107">*</span><span class="ident" id="4328108">List</span><span class="op" id="4328112">)</span>&nbsp;<span class="ident" id="4328114">Remove</span><span class="op" id="4328120">(</span><span class="ident" id="4328121">e</span>&nbsp;<span class="op" id="4328123">*</span><span class="ident" id="4328124">Element</span><span class="op" id="4328131">)</span>&nbsp;<span class="keyword" id="4328133">interface</span><span class="op" id="4328142">{</span><span class="op" id="4328143">}</span>&nbsp;<span class="op" id="4328145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4328148">if</span>&nbsp;<span class="ident" id="4328151">e</span><span class="op" id="4328152">.</span><span class="ident" id="4328153">list</span>&nbsp;<span class="op" id="4328158">==</span>&nbsp;<span class="ident" id="4328161">l</span>&nbsp;<span class="op" id="4328163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4328167">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4328237">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4328305">l</span><span class="op" id="4328306">.</span><span class="ident" id="4328307">remove</span><span class="op" id="4328313">(</span><span class="ident" id="4328314">e</span><span class="op" id="4328315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4328318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4328321">return</span>&nbsp;<span class="ident" id="4328328">e</span><span class="op" id="4328329">.</span><span class="ident" id="4328330">Value</span><br>
<span class="lineno"></span><span class="op" id="4328336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4328339">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4328427">func</span>&nbsp;<span class="op" id="4328432">(</span><span class="ident" id="4328433">l</span>&nbsp;<span class="op" id="4328435">*</span><span class="ident" id="4328436">List</span><span class="op" id="4328440">)</span>&nbsp;<span class="ident" id="4328442">PushFront</span><span class="op" id="4328451">(</span><span class="ident" id="4328452">v</span>&nbsp;<span class="keyword" id="4328454">interface</span><span class="op" id="4328463">{</span><span class="op" id="4328464">}</span><span class="op" id="4328465">)</span>&nbsp;<span class="op" id="4328467">*</span><span class="ident" id="4328468">Element</span>&nbsp;<span class="op" id="4328476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4328479">l</span><span class="op" id="4328480">.</span><span class="ident" id="4328481">lazyInit</span><span class="op" id="4328489">(</span><span class="op" id="4328490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4328493">return</span>&nbsp;<span class="ident" id="4328500">l</span><span class="op" id="4328501">.</span><span class="ident" id="4328502">insertValue</span><span class="op" id="4328513">(</span><span class="ident" id="4328514">v</span><span class="op" id="4328515">,</span>&nbsp;<span class="op" id="4328517">&amp;</span><span class="ident" id="4328518">l</span><span class="op" id="4328519">.</span><span class="ident" id="4328520">root</span><span class="op" id="4328524">)</span><br>
<span class="lineno"></span><span class="op" id="4328526">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4328529">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4328615">func</span>&nbsp;<span class="op" id="4328620">(</span><span class="ident" id="4328621">l</span>&nbsp;<span class="op" id="4328623">*</span><span class="ident" id="4328624">List</span><span class="op" id="4328628">)</span>&nbsp;<span class="ident" id="4328630">PushBack</span><span class="op" id="4328638">(</span><span class="ident" id="4328639">v</span>&nbsp;<span class="keyword" id="4328641">interface</span><span class="op" id="4328650">{</span><span class="op" id="4328651">}</span><span class="op" id="4328652">)</span>&nbsp;<span class="op" id="4328654">*</span><span class="ident" id="4328655">Element</span>&nbsp;<span class="op" id="4328663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4328666">l</span><span class="op" id="4328667">.</span><span class="ident" id="4328668">lazyInit</span><span class="op" id="4328676">(</span><span class="op" id="4328677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4328680">return</span>&nbsp;<span class="ident" id="4328687">l</span><span class="op" id="4328688">.</span><span class="ident" id="4328689">insertValue</span><span class="op" id="4328700">(</span><span class="ident" id="4328701">v</span><span class="op" id="4328702">,</span>&nbsp;<span class="ident" id="4328704">l</span><span class="op" id="4328705">.</span><span class="ident" id="4328706">root</span><span class="op" id="4328710">.</span><span class="ident" id="4328711">prev</span><span class="op" id="4328715">)</span><br>
<span class="lineno">140</span><span class="op" id="4328717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4328720">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4328812">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4328873">func</span>&nbsp;<span class="op" id="4328878">(</span><span class="ident" id="4328879">l</span>&nbsp;<span class="op" id="4328881">*</span><span class="ident" id="4328882">List</span><span class="op" id="4328886">)</span>&nbsp;<span class="ident" id="4328888">InsertBefore</span><span class="op" id="4328900">(</span><span class="ident" id="4328901">v</span>&nbsp;<span class="keyword" id="4328903">interface</span><span class="op" id="4328912">{</span><span class="op" id="4328913">}</span><span class="op" id="4328914">,</span>&nbsp;<span class="ident" id="4328916">mark</span>&nbsp;<span class="op" id="4328921">*</span><span class="ident" id="4328922">Element</span><span class="op" id="4328929">)</span>&nbsp;<span class="op" id="4328931">*</span><span class="ident" id="4328932">Element</span>&nbsp;<span class="op" id="4328940">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4328943">if</span>&nbsp;<span class="ident" id="4328946">mark</span><span class="op" id="4328950">.</span><span class="ident" id="4328951">list</span>&nbsp;<span class="op" id="4328956">!=</span>&nbsp;<span class="ident" id="4328959">l</span>&nbsp;<span class="op" id="4328961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4328965">return</span>&nbsp;<span class="ident" id="4328972">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4328977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4328980">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4329037">return</span>&nbsp;<span class="ident" id="4329044">l</span><span class="op" id="4329045">.</span><span class="ident" id="4329046">insertValue</span><span class="op" id="4329057">(</span><span class="ident" id="4329058">v</span><span class="op" id="4329059">,</span>&nbsp;<span class="ident" id="4329061">mark</span><span class="op" id="4329065">.</span><span class="ident" id="4329066">prev</span><span class="op" id="4329070">)</span><br>
<span class="lineno">150</span><span class="op" id="4329072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4329075">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4329165">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4329226">func</span>&nbsp;<span class="op" id="4329231">(</span><span class="ident" id="4329232">l</span>&nbsp;<span class="op" id="4329234">*</span><span class="ident" id="4329235">List</span><span class="op" id="4329239">)</span>&nbsp;<span class="ident" id="4329241">InsertAfter</span><span class="op" id="4329252">(</span><span class="ident" id="4329253">v</span>&nbsp;<span class="keyword" id="4329255">interface</span><span class="op" id="4329264">{</span><span class="op" id="4329265">}</span><span class="op" id="4329266">,</span>&nbsp;<span class="ident" id="4329268">mark</span>&nbsp;<span class="op" id="4329273">*</span><span class="ident" id="4329274">Element</span><span class="op" id="4329281">)</span>&nbsp;<span class="op" id="4329283">*</span><span class="ident" id="4329284">Element</span>&nbsp;<span class="op" id="4329292">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4329295">if</span>&nbsp;<span class="ident" id="4329298">mark</span><span class="op" id="4329302">.</span><span class="ident" id="4329303">list</span>&nbsp;<span class="op" id="4329308">!=</span>&nbsp;<span class="ident" id="4329311">l</span>&nbsp;<span class="op" id="4329313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4329317">return</span>&nbsp;<span class="ident" id="4329324">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4329329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4329332">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4329389">return</span>&nbsp;<span class="ident" id="4329396">l</span><span class="op" id="4329397">.</span><span class="ident" id="4329398">insertValue</span><span class="op" id="4329409">(</span><span class="ident" id="4329410">v</span><span class="op" id="4329411">,</span>&nbsp;<span class="ident" id="4329413">mark</span><span class="op" id="4329417">)</span><br>
<span class="lineno">160</span><span class="op" id="4329419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4329422">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4329477">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4329535">func</span>&nbsp;<span class="op" id="4329540">(</span><span class="ident" id="4329541">l</span>&nbsp;<span class="op" id="4329543">*</span><span class="ident" id="4329544">List</span><span class="op" id="4329548">)</span>&nbsp;<span class="ident" id="4329550">MoveToFront</span><span class="op" id="4329561">(</span><span class="ident" id="4329562">e</span>&nbsp;<span class="op" id="4329564">*</span><span class="ident" id="4329565">Element</span><span class="op" id="4329572">)</span>&nbsp;<span class="op" id="4329574">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4329577">if</span>&nbsp;<span class="ident" id="4329580">e</span><span class="op" id="4329581">.</span><span class="ident" id="4329582">list</span>&nbsp;<span class="op" id="4329587">!=</span>&nbsp;<span class="ident" id="4329590">l</span>&nbsp;<span class="op" id="4329592">||</span>&nbsp;<span class="ident" id="4329595">l</span><span class="op" id="4329596">.</span><span class="ident" id="4329597">root</span><span class="op" id="4329601">.</span><span class="ident" id="4329602">next</span>&nbsp;<span class="op" id="4329607">==</span>&nbsp;<span class="ident" id="4329610">e</span>&nbsp;<span class="op" id="4329612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4329616">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4329624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4329627">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4329684">l</span><span class="op" id="4329685">.</span><span class="ident" id="4329686">insert</span><span class="op" id="4329692">(</span><span class="ident" id="4329693">l</span><span class="op" id="4329694">.</span><span class="ident" id="4329695">remove</span><span class="op" id="4329701">(</span><span class="ident" id="4329702">e</span><span class="op" id="4329703">)</span><span class="op" id="4329704">,</span>&nbsp;<span class="op" id="4329706">&amp;</span><span class="ident" id="4329707">l</span><span class="op" id="4329708">.</span><span class="ident" id="4329709">root</span><span class="op" id="4329713">)</span><br>
<span class="lineno">170</span><span class="op" id="4329715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4329718">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4329771">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4329829">func</span>&nbsp;<span class="op" id="4329834">(</span><span class="ident" id="4329835">l</span>&nbsp;<span class="op" id="4329837">*</span><span class="ident" id="4329838">List</span><span class="op" id="4329842">)</span>&nbsp;<span class="ident" id="4329844">MoveToBack</span><span class="op" id="4329854">(</span><span class="ident" id="4329855">e</span>&nbsp;<span class="op" id="4329857">*</span><span class="ident" id="4329858">Element</span><span class="op" id="4329865">)</span>&nbsp;<span class="op" id="4329867">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4329870">if</span>&nbsp;<span class="ident" id="4329873">e</span><span class="op" id="4329874">.</span><span class="ident" id="4329875">list</span>&nbsp;<span class="op" id="4329880">!=</span>&nbsp;<span class="ident" id="4329883">l</span>&nbsp;<span class="op" id="4329885">||</span>&nbsp;<span class="ident" id="4329888">l</span><span class="op" id="4329889">.</span><span class="ident" id="4329890">root</span><span class="op" id="4329894">.</span><span class="ident" id="4329895">prev</span>&nbsp;<span class="op" id="4329900">==</span>&nbsp;<span class="ident" id="4329903">e</span>&nbsp;<span class="op" id="4329905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4329909">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4329917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4329920">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4329977">l</span><span class="op" id="4329978">.</span><span class="ident" id="4329979">insert</span><span class="op" id="4329985">(</span><span class="ident" id="4329986">l</span><span class="op" id="4329987">.</span><span class="ident" id="4329988">remove</span><span class="op" id="4329994">(</span><span class="ident" id="4329995">e</span><span class="op" id="4329996">)</span><span class="op" id="4329997">,</span>&nbsp;<span class="ident" id="4329999">l</span><span class="op" id="4330000">.</span><span class="ident" id="4330001">root</span><span class="op" id="4330005">.</span><span class="ident" id="4330006">prev</span><span class="op" id="4330010">)</span><br>
<span class="lineno">180</span><span class="op" id="4330012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4330015">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4330078">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4330158">func</span>&nbsp;<span class="op" id="4330163">(</span><span class="ident" id="4330164">l</span>&nbsp;<span class="op" id="4330166">*</span><span class="ident" id="4330167">List</span><span class="op" id="4330171">)</span>&nbsp;<span class="ident" id="4330173">MoveBefore</span><span class="op" id="4330183">(</span><span class="ident" id="4330184">e</span><span class="op" id="4330185">,</span>&nbsp;<span class="ident" id="4330187">mark</span>&nbsp;<span class="op" id="4330192">*</span><span class="ident" id="4330193">Element</span><span class="op" id="4330200">)</span>&nbsp;<span class="op" id="4330202">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4330205">if</span>&nbsp;<span class="ident" id="4330208">e</span><span class="op" id="4330209">.</span><span class="ident" id="4330210">list</span>&nbsp;<span class="op" id="4330215">!=</span>&nbsp;<span class="ident" id="4330218">l</span>&nbsp;<span class="op" id="4330220">||</span>&nbsp;<span class="ident" id="4330223">e</span>&nbsp;<span class="op" id="4330225">==</span>&nbsp;<span class="ident" id="4330228">mark</span>&nbsp;<span class="op" id="4330233">||</span>&nbsp;<span class="ident" id="4330236">mark</span><span class="op" id="4330240">.</span><span class="ident" id="4330241">list</span>&nbsp;<span class="op" id="4330246">!=</span>&nbsp;<span class="ident" id="4330249">l</span>&nbsp;<span class="op" id="4330251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4330255">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4330263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4330266">l</span><span class="op" id="4330267">.</span><span class="ident" id="4330268">insert</span><span class="op" id="4330274">(</span><span class="ident" id="4330275">l</span><span class="op" id="4330276">.</span><span class="ident" id="4330277">remove</span><span class="op" id="4330283">(</span><span class="ident" id="4330284">e</span><span class="op" id="4330285">)</span><span class="op" id="4330286">,</span>&nbsp;<span class="ident" id="4330288">mark</span><span class="op" id="4330292">.</span><span class="ident" id="4330293">prev</span><span class="op" id="4330297">)</span><br>
<span class="lineno"></span><span class="op" id="4330299">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4330302">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4330363">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4330443">func</span>&nbsp;<span class="op" id="4330448">(</span><span class="ident" id="4330449">l</span>&nbsp;<span class="op" id="4330451">*</span><span class="ident" id="4330452">List</span><span class="op" id="4330456">)</span>&nbsp;<span class="ident" id="4330458">MoveAfter</span><span class="op" id="4330467">(</span><span class="ident" id="4330468">e</span><span class="op" id="4330469">,</span>&nbsp;<span class="ident" id="4330471">mark</span>&nbsp;<span class="op" id="4330476">*</span><span class="ident" id="4330477">Element</span><span class="op" id="4330484">)</span>&nbsp;<span class="op" id="4330486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4330489">if</span>&nbsp;<span class="ident" id="4330492">e</span><span class="op" id="4330493">.</span><span class="ident" id="4330494">list</span>&nbsp;<span class="op" id="4330499">!=</span>&nbsp;<span class="ident" id="4330502">l</span>&nbsp;<span class="op" id="4330504">||</span>&nbsp;<span class="ident" id="4330507">e</span>&nbsp;<span class="op" id="4330509">==</span>&nbsp;<span class="ident" id="4330512">mark</span>&nbsp;<span class="op" id="4330517">||</span>&nbsp;<span class="ident" id="4330520">mark</span><span class="op" id="4330524">.</span><span class="ident" id="4330525">list</span>&nbsp;<span class="op" id="4330530">!=</span>&nbsp;<span class="ident" id="4330533">l</span>&nbsp;<span class="op" id="4330535">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4330539">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4330547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4330550">l</span><span class="op" id="4330551">.</span><span class="ident" id="4330552">insert</span><span class="op" id="4330558">(</span><span class="ident" id="4330559">l</span><span class="op" id="4330560">.</span><span class="ident" id="4330561">remove</span><span class="op" id="4330567">(</span><span class="ident" id="4330568">e</span><span class="op" id="4330569">)</span><span class="op" id="4330570">,</span>&nbsp;<span class="ident" id="4330572">mark</span><span class="op" id="4330576">)</span><br>
<span class="lineno"></span><span class="op" id="4330578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4330581">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4330652">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4330694">func</span>&nbsp;<span class="op" id="4330699">(</span><span class="ident" id="4330700">l</span>&nbsp;<span class="op" id="4330702">*</span><span class="ident" id="4330703">List</span><span class="op" id="4330707">)</span>&nbsp;<span class="ident" id="4330709">PushBackList</span><span class="op" id="4330721">(</span><span class="ident" id="4330722">other</span>&nbsp;<span class="op" id="4330728">*</span><span class="ident" id="4330729">List</span><span class="op" id="4330733">)</span>&nbsp;<span class="op" id="4330735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4330738">l</span><span class="op" id="4330739">.</span><span class="ident" id="4330740">lazyInit</span><span class="op" id="4330748">(</span><span class="op" id="4330749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4330752">for</span>&nbsp;<span class="ident" id="4330756">i</span><span class="op" id="4330757">,</span>&nbsp;<span class="ident" id="4330759">e</span>&nbsp;<span class="op" id="4330761">:=</span>&nbsp;<span class="ident" id="4330764">other</span><span class="op" id="4330769">.</span><span class="ident" id="4330770">Len</span><span class="op" id="4330773">(</span><span class="op" id="4330774">)</span><span class="op" id="4330775">,</span>&nbsp;<span class="ident" id="4330777">other</span><span class="op" id="4330782">.</span><span class="ident" id="4330783">Front</span><span class="op" id="4330788">(</span><span class="op" id="4330789">)</span><span class="op" id="4330790">;</span>&nbsp;<span class="ident" id="4330792">i</span>&nbsp;<span class="op" id="4330794">&gt;</span>&nbsp;<span class="num" id="4330796">0</span><span class="op" id="4330797">;</span>&nbsp;<span class="ident" id="4330799">i</span><span class="op" id="4330800">,</span>&nbsp;<span class="ident" id="4330802">e</span>&nbsp;<span class="op" id="4330804">=</span>&nbsp;<span class="ident" id="4330806">i</span><span class="op" id="4330807">-</span><span class="num" id="4330808">1</span><span class="op" id="4330809">,</span>&nbsp;<span class="ident" id="4330811">e</span><span class="op" id="4330812">.</span><span class="ident" id="4330813">Next</span><span class="op" id="4330817">(</span><span class="op" id="4330818">)</span>&nbsp;<span class="op" id="4330820">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4330824">l</span><span class="op" id="4330825">.</span><span class="ident" id="4330826">insertValue</span><span class="op" id="4330837">(</span><span class="ident" id="4330838">e</span><span class="op" id="4330839">.</span><span class="ident" id="4330840">Value</span><span class="op" id="4330845">,</span>&nbsp;<span class="ident" id="4330847">l</span><span class="op" id="4330848">.</span><span class="ident" id="4330849">root</span><span class="op" id="4330853">.</span><span class="ident" id="4330854">prev</span><span class="op" id="4330858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4330861">}</span><br>
<span class="lineno"></span><span class="op" id="4330863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4330866">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4330939">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4330981">func</span>&nbsp;<span class="op" id="4330986">(</span><span class="ident" id="4330987">l</span>&nbsp;<span class="op" id="4330989">*</span><span class="ident" id="4330990">List</span><span class="op" id="4330994">)</span>&nbsp;<span class="ident" id="4330996">PushFrontList</span><span class="op" id="4331009">(</span><span class="ident" id="4331010">other</span>&nbsp;<span class="op" id="4331016">*</span><span class="ident" id="4331017">List</span><span class="op" id="4331021">)</span>&nbsp;<span class="op" id="4331023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4331026">l</span><span class="op" id="4331027">.</span><span class="ident" id="4331028">lazyInit</span><span class="op" id="4331036">(</span><span class="op" id="4331037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4331040">for</span>&nbsp;<span class="ident" id="4331044">i</span><span class="op" id="4331045">,</span>&nbsp;<span class="ident" id="4331047">e</span>&nbsp;<span class="op" id="4331049">:=</span>&nbsp;<span class="ident" id="4331052">other</span><span class="op" id="4331057">.</span><span class="ident" id="4331058">Len</span><span class="op" id="4331061">(</span><span class="op" id="4331062">)</span><span class="op" id="4331063">,</span>&nbsp;<span class="ident" id="4331065">other</span><span class="op" id="4331070">.</span><span class="ident" id="4331071">Back</span><span class="op" id="4331075">(</span><span class="op" id="4331076">)</span><span class="op" id="4331077">;</span>&nbsp;<span class="ident" id="4331079">i</span>&nbsp;<span class="op" id="4331081">&gt;</span>&nbsp;<span class="num" id="4331083">0</span><span class="op" id="4331084">;</span>&nbsp;<span class="ident" id="4331086">i</span><span class="op" id="4331087">,</span>&nbsp;<span class="ident" id="4331089">e</span>&nbsp;<span class="op" id="4331091">=</span>&nbsp;<span class="ident" id="4331093">i</span><span class="op" id="4331094">-</span><span class="num" id="4331095">1</span><span class="op" id="4331096">,</span>&nbsp;<span class="ident" id="4331098">e</span><span class="op" id="4331099">.</span><span class="ident" id="4331100">Prev</span><span class="op" id="4331104">(</span><span class="op" id="4331105">)</span>&nbsp;<span class="op" id="4331107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4331111">l</span><span class="op" id="4331112">.</span><span class="ident" id="4331113">insertValue</span><span class="op" id="4331124">(</span><span class="ident" id="4331125">e</span><span class="op" id="4331126">.</span><span class="ident" id="4331127">Value</span><span class="op" id="4331132">,</span>&nbsp;<span class="op" id="4331134">&amp;</span><span class="ident" id="4331135">l</span><span class="op" id="4331136">.</span><span class="ident" id="4331137">root</span><span class="op" id="4331141">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4331144">}</span><br>
<span class="lineno"></span><span class="op" id="4331146">}</span>
</div>
</body>
</html>
