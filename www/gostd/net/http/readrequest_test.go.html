<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8509305">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8509361">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8509415">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8509466">package</span>&nbsp;<span class="ident" id="8509474">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8509480">import</span>&nbsp;<span class="op" id="8509487">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509490">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509499">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509508">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509515">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509521">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509532">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509543">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509554">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8509564">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8509567">type</span>&nbsp;<span class="ident" id="8509572">reqTest</span>&nbsp;<span class="keyword" id="8509580">struct</span>&nbsp;<span class="op" id="8509587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509590">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8509598">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509606">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8509614">*</span><span class="ident" id="8509615">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509624">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8509632">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509640">Trailer</span>&nbsp;<span class="ident" id="8509648">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509656">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8509664">string</span><br>
<span class="lineno"></span><span class="op" id="8509671">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8509674">var</span>&nbsp;<span class="ident" id="8509678">noError</span>&nbsp;<span class="op" id="8509686">=</span>&nbsp;<span class="string" id="8509688">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="8509691">var</span>&nbsp;<span class="ident" id="8509695">noBody</span>&nbsp;<span class="op" id="8509702">=</span>&nbsp;<span class="string" id="8509704">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="8509707">var</span>&nbsp;<span class="ident" id="8509711">noTrailer</span>&nbsp;<span class="ident" id="8509721">Header</span>&nbsp;<span class="op" id="8509728">=</span>&nbsp;<span class="ident" id="8509730">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8509735">var</span>&nbsp;<span class="ident" id="8509739">reqTests</span>&nbsp;<span class="op" id="8509748">=</span>&nbsp;<span class="op" id="8509750">[</span><span class="op" id="8509751">]</span><span class="ident" id="8509752">reqTest</span><span class="op" id="8509759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8509762">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509830">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8509876">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509881">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="8509912">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509917">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="8509940">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8509945">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="8510023">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510028">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="8510066">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510071">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="8510107">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510112">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="8510165">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510170">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="8510192">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510197">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="8510221">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510226">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8510265">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510270">&#34;abcdef\n???&#34;</span><span class="op" id="8510283">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510288">&amp;</span><span class="ident" id="8510289">Request</span><span class="op" id="8510296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510301">Method</span><span class="op" id="8510307">:</span>&nbsp;<span class="string" id="8510309">&#34;GET&#34;</span><span class="op" id="8510314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510319">URL</span><span class="op" id="8510322">:</span>&nbsp;<span class="op" id="8510324">&amp;</span><span class="ident" id="8510325">url</span><span class="op" id="8510328">.</span><span class="ident" id="8510329">URL</span><span class="op" id="8510332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510338">Scheme</span><span class="op" id="8510344">:</span>&nbsp;<span class="string" id="8510346">&#34;http&#34;</span><span class="op" id="8510352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510358">Host</span><span class="op" id="8510362">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8510366">&#34;www.techcrunch.com&#34;</span><span class="op" id="8510386">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510392">Path</span><span class="op" id="8510396">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8510400">&#34;/&#34;</span><span class="op" id="8510403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510408">}</span><span class="op" id="8510409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510414">Proto</span><span class="op" id="8510419">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8510426">&#34;HTTP/1.1&#34;</span><span class="op" id="8510436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510441">ProtoMajor</span><span class="op" id="8510451">:</span>&nbsp;<span class="num" id="8510453">1</span><span class="op" id="8510454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510459">ProtoMinor</span><span class="op" id="8510469">:</span>&nbsp;<span class="num" id="8510471">1</span><span class="op" id="8510472">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510477">Header</span><span class="op" id="8510483">:</span>&nbsp;<span class="ident" id="8510485">Header</span><span class="op" id="8510491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510497">&#34;Accept&#34;</span><span class="op" id="8510505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8510517">{</span><span class="string" id="8510518">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="8510583">}</span><span class="op" id="8510584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510590">&#34;Accept-Language&#34;</span><span class="op" id="8510607">:</span>&nbsp;&nbsp;<span class="op" id="8510610">{</span><span class="string" id="8510611">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="8510627">}</span><span class="op" id="8510628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510634">&#34;Accept-Encoding&#34;</span><span class="op" id="8510651">:</span>&nbsp;&nbsp;<span class="op" id="8510654">{</span><span class="string" id="8510655">&#34;gzip,deflate&#34;</span><span class="op" id="8510669">}</span><span class="op" id="8510670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510676">&#34;Accept-Charset&#34;</span><span class="op" id="8510692">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8510696">{</span><span class="string" id="8510697">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="8510729">}</span><span class="op" id="8510730">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510736">&#34;Keep-Alive&#34;</span><span class="op" id="8510748">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8510756">{</span><span class="string" id="8510757">&#34;300&#34;</span><span class="op" id="8510762">}</span><span class="op" id="8510763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510769">&#34;Proxy-Connection&#34;</span><span class="op" id="8510787">:</span>&nbsp;<span class="op" id="8510789">{</span><span class="string" id="8510790">&#34;keep-alive&#34;</span><span class="op" id="8510802">}</span><span class="op" id="8510803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510809">&#34;Content-Length&#34;</span><span class="op" id="8510825">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8510829">{</span><span class="string" id="8510830">&#34;7&#34;</span><span class="op" id="8510833">}</span><span class="op" id="8510834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8510840">&#34;User-Agent&#34;</span><span class="op" id="8510852">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8510860">{</span><span class="string" id="8510861">&#34;Fake&#34;</span><span class="op" id="8510867">}</span><span class="op" id="8510868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510873">}</span><span class="op" id="8510874">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510879">Close</span><span class="op" id="8510884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8510894">false</span><span class="op" id="8510899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510904">ContentLength</span><span class="op" id="8510917">:</span>&nbsp;<span class="num" id="8510919">7</span><span class="op" id="8510920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510925">Host</span><span class="op" id="8510929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8510940">&#34;www.techcrunch.com&#34;</span><span class="op" id="8510960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510965">RequestURI</span><span class="op" id="8510975">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8510980">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="8511008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511012">}</span><span class="op" id="8511013">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8511018">&#34;abcdef\n&#34;</span><span class="op" id="8511028">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511033">noTrailer</span><span class="op" id="8511042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511046">noError</span><span class="op" id="8511053">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511056">}</span><span class="op" id="8511057">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8511061">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8511112">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8511133">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8511138">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="8511161">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511166">&amp;</span><span class="ident" id="8511167">Request</span><span class="op" id="8511174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511179">Method</span><span class="op" id="8511185">:</span>&nbsp;<span class="string" id="8511187">&#34;GET&#34;</span><span class="op" id="8511192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511197">URL</span><span class="op" id="8511200">:</span>&nbsp;<span class="op" id="8511202">&amp;</span><span class="ident" id="8511203">url</span><span class="op" id="8511206">.</span><span class="ident" id="8511207">URL</span><span class="op" id="8511210">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511216">Path</span><span class="op" id="8511220">:</span>&nbsp;<span class="string" id="8511222">&#34;/&#34;</span><span class="op" id="8511225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511230">}</span><span class="op" id="8511231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511236">Proto</span><span class="op" id="8511241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511251">&#34;HTTP/1.1&#34;</span><span class="op" id="8511261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511266">ProtoMajor</span><span class="op" id="8511276">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8511281">1</span><span class="op" id="8511282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511287">ProtoMinor</span><span class="op" id="8511297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8511302">1</span><span class="op" id="8511303">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511308">Header</span><span class="op" id="8511314">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8511323">Header</span><span class="op" id="8511329">{</span><span class="op" id="8511330">}</span><span class="op" id="8511331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511336">Close</span><span class="op" id="8511341">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8511351">false</span><span class="op" id="8511356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511361">ContentLength</span><span class="op" id="8511374">:</span>&nbsp;<span class="num" id="8511376">0</span><span class="op" id="8511377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511382">Host</span><span class="op" id="8511386">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511397">&#34;foo.com&#34;</span><span class="op" id="8511406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511411">RequestURI</span><span class="op" id="8511421">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511426">&#34;/&#34;</span><span class="op" id="8511429">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511433">}</span><span class="op" id="8511434">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511439">noBody</span><span class="op" id="8511445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511449">noTrailer</span><span class="op" id="8511458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511462">noError</span><span class="op" id="8511469">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511472">}</span><span class="op" id="8511473">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8511477">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8511532">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511582">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8511586">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8511637">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8511642">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8511662">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511667">&amp;</span><span class="ident" id="8511668">Request</span><span class="op" id="8511675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511680">Method</span><span class="op" id="8511686">:</span>&nbsp;<span class="string" id="8511688">&#34;GET&#34;</span><span class="op" id="8511693">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511698">URL</span><span class="op" id="8511701">:</span>&nbsp;<span class="op" id="8511703">&amp;</span><span class="ident" id="8511704">url</span><span class="op" id="8511707">.</span><span class="ident" id="8511708">URL</span><span class="op" id="8511711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511717">Path</span><span class="op" id="8511721">:</span>&nbsp;<span class="string" id="8511723">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8511756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511761">}</span><span class="op" id="8511762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511767">Proto</span><span class="op" id="8511772">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511782">&#34;HTTP/1.1&#34;</span><span class="op" id="8511792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511797">ProtoMajor</span><span class="op" id="8511807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8511812">1</span><span class="op" id="8511813">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511818">ProtoMinor</span><span class="op" id="8511828">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8511833">1</span><span class="op" id="8511834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511839">Header</span><span class="op" id="8511845">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8511854">Header</span><span class="op" id="8511860">{</span><span class="op" id="8511861">}</span><span class="op" id="8511862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511867">Close</span><span class="op" id="8511872">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8511882">false</span><span class="op" id="8511887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511892">ContentLength</span><span class="op" id="8511905">:</span>&nbsp;<span class="num" id="8511907">0</span><span class="op" id="8511908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511913">Host</span><span class="op" id="8511917">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511928">&#34;test&#34;</span><span class="op" id="8511934">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511939">RequestURI</span><span class="op" id="8511949">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511954">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8511987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511991">}</span><span class="op" id="8511992">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511997">noBody</span><span class="op" id="8512003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512007">noTrailer</span><span class="op" id="8512016">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512020">noError</span><span class="op" id="8512027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512030">}</span><span class="op" id="8512031">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8512035">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512107">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512111">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8512153">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512158">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8512178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512182">nil</span><span class="op" id="8512185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512189">noBody</span><span class="op" id="8512195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512199">noTrailer</span><span class="op" id="8512208">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512212">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="8512267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512270">}</span><span class="op" id="8512271">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8512275">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512298">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512302">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8512322">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512327">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8512347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512351">nil</span><span class="op" id="8512354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512358">noBody</span><span class="op" id="8512364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512368">noTrailer</span><span class="op" id="8512377">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512381">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="8512400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512403">}</span><span class="op" id="8512404">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8512408">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512445">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512449">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8512471">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512476">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="8512496">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512501">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8512538">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512543">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="8512558">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512563">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="8512578">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512583">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="8512591">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512596">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="8512629">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512634">&#34;\r\n&#34;</span><span class="op" id="8512640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512644">&amp;</span><span class="ident" id="8512645">Request</span><span class="op" id="8512652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512657">Method</span><span class="op" id="8512663">:</span>&nbsp;<span class="string" id="8512665">&#34;POST&#34;</span><span class="op" id="8512671">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512676">URL</span><span class="op" id="8512679">:</span>&nbsp;<span class="op" id="8512681">&amp;</span><span class="ident" id="8512682">url</span><span class="op" id="8512685">.</span><span class="ident" id="8512686">URL</span><span class="op" id="8512689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512695">Path</span><span class="op" id="8512699">:</span>&nbsp;<span class="string" id="8512701">&#34;/&#34;</span><span class="op" id="8512704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512709">}</span><span class="op" id="8512710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512715">TransferEncoding</span><span class="op" id="8512731">:</span>&nbsp;<span class="op" id="8512733">[</span><span class="op" id="8512734">]</span><span class="builtintype" id="8512735">string</span><span class="op" id="8512741">{</span><span class="string" id="8512742">&#34;chunked&#34;</span><span class="op" id="8512751">}</span><span class="op" id="8512752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512757">Proto</span><span class="op" id="8512762">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8512775">&#34;HTTP/1.1&#34;</span><span class="op" id="8512785">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512790">ProtoMajor</span><span class="op" id="8512800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8512808">1</span><span class="op" id="8512809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512814">ProtoMinor</span><span class="op" id="8512824">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8512832">1</span><span class="op" id="8512833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512838">Header</span><span class="op" id="8512844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512856">Header</span><span class="op" id="8512862">{</span><span class="op" id="8512863">}</span><span class="op" id="8512864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512869">ContentLength</span><span class="op" id="8512882">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512887">-</span><span class="num" id="8512888">1</span><span class="op" id="8512889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512894">Host</span><span class="op" id="8512898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8512912">&#34;foo.com&#34;</span><span class="op" id="8512921">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512926">RequestURI</span><span class="op" id="8512936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8512944">&#34;/&#34;</span><span class="op" id="8512947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512951">}</span><span class="op" id="8512952">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512957">&#34;foobar&#34;</span><span class="op" id="8512965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512969">Header</span><span class="op" id="8512975">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8512980">&#34;Trailer-Key&#34;</span><span class="op" id="8512993">:</span>&nbsp;<span class="op" id="8512995">{</span><span class="string" id="8512996">&#34;Trailer-Value&#34;</span><span class="op" id="8513011">}</span><span class="op" id="8513012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513016">}</span><span class="op" id="8513017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513021">noError</span><span class="op" id="8513028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513031">}</span><span class="op" id="8513032">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8513036">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8513078">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8513123">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513128">&amp;</span><span class="ident" id="8513129">Request</span><span class="op" id="8513136">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513141">Method</span><span class="op" id="8513147">:</span>&nbsp;<span class="string" id="8513149">&#34;CONNECT&#34;</span><span class="op" id="8513158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513163">URL</span><span class="op" id="8513166">:</span>&nbsp;<span class="op" id="8513168">&amp;</span><span class="ident" id="8513169">url</span><span class="op" id="8513172">.</span><span class="ident" id="8513173">URL</span><span class="op" id="8513176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513182">Host</span><span class="op" id="8513186">:</span>&nbsp;<span class="string" id="8513188">&#34;www.google.com:443&#34;</span><span class="op" id="8513208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513213">}</span><span class="op" id="8513214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513219">Proto</span><span class="op" id="8513224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8513234">&#34;HTTP/1.1&#34;</span><span class="op" id="8513244">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513249">ProtoMajor</span><span class="op" id="8513259">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8513264">1</span><span class="op" id="8513265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513270">ProtoMinor</span><span class="op" id="8513280">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8513285">1</span><span class="op" id="8513286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513291">Header</span><span class="op" id="8513297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513306">Header</span><span class="op" id="8513312">{</span><span class="op" id="8513313">}</span><span class="op" id="8513314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513319">Close</span><span class="op" id="8513324">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8513334">false</span><span class="op" id="8513339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513344">ContentLength</span><span class="op" id="8513357">:</span>&nbsp;<span class="num" id="8513359">0</span><span class="op" id="8513360">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513365">Host</span><span class="op" id="8513369">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8513380">&#34;www.google.com:443&#34;</span><span class="op" id="8513400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513405">RequestURI</span><span class="op" id="8513415">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8513420">&#34;www.google.com:443&#34;</span><span class="op" id="8513440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513444">}</span><span class="op" id="8513445">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513450">noBody</span><span class="op" id="8513456">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513460">noTrailer</span><span class="op" id="8513469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513473">noError</span><span class="op" id="8513480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513483">}</span><span class="op" id="8513484">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8513488">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8513529">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8513570">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513575">&amp;</span><span class="ident" id="8513576">Request</span><span class="op" id="8513583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513588">Method</span><span class="op" id="8513594">:</span>&nbsp;<span class="string" id="8513596">&#34;CONNECT&#34;</span><span class="op" id="8513605">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513610">URL</span><span class="op" id="8513613">:</span>&nbsp;<span class="op" id="8513615">&amp;</span><span class="ident" id="8513616">url</span><span class="op" id="8513619">.</span><span class="ident" id="8513620">URL</span><span class="op" id="8513623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513629">Host</span><span class="op" id="8513633">:</span>&nbsp;<span class="string" id="8513635">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8513651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513656">}</span><span class="op" id="8513657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513662">Proto</span><span class="op" id="8513667">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8513677">&#34;HTTP/1.1&#34;</span><span class="op" id="8513687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513692">ProtoMajor</span><span class="op" id="8513702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8513707">1</span><span class="op" id="8513708">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513713">ProtoMinor</span><span class="op" id="8513723">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8513728">1</span><span class="op" id="8513729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513734">Header</span><span class="op" id="8513740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513749">Header</span><span class="op" id="8513755">{</span><span class="op" id="8513756">}</span><span class="op" id="8513757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513762">Close</span><span class="op" id="8513767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8513777">false</span><span class="op" id="8513782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513787">ContentLength</span><span class="op" id="8513800">:</span>&nbsp;<span class="num" id="8513802">0</span><span class="op" id="8513803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513808">Host</span><span class="op" id="8513812">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8513823">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8513839">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513844">RequestURI</span><span class="op" id="8513854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8513859">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8513875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513879">}</span><span class="op" id="8513880">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513885">noBody</span><span class="op" id="8513891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513895">noTrailer</span><span class="op" id="8513904">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8513908">noError</span><span class="op" id="8513915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513918">}</span><span class="op" id="8513919">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8513923">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513952">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8513956">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8513991">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8513996">&amp;</span><span class="ident" id="8513997">Request</span><span class="op" id="8514004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514009">Method</span><span class="op" id="8514015">:</span>&nbsp;<span class="string" id="8514017">&#34;CONNECT&#34;</span><span class="op" id="8514026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514031">URL</span><span class="op" id="8514034">:</span>&nbsp;<span class="op" id="8514036">&amp;</span><span class="ident" id="8514037">url</span><span class="op" id="8514040">.</span><span class="ident" id="8514041">URL</span><span class="op" id="8514044">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514050">Path</span><span class="op" id="8514054">:</span>&nbsp;<span class="string" id="8514056">&#34;/_goRPC_&#34;</span><span class="op" id="8514066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514071">}</span><span class="op" id="8514072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514077">Proto</span><span class="op" id="8514082">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8514092">&#34;HTTP/1.1&#34;</span><span class="op" id="8514102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514107">ProtoMajor</span><span class="op" id="8514117">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8514122">1</span><span class="op" id="8514123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514128">ProtoMinor</span><span class="op" id="8514138">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8514143">1</span><span class="op" id="8514144">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514149">Header</span><span class="op" id="8514155">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8514164">Header</span><span class="op" id="8514170">{</span><span class="op" id="8514171">}</span><span class="op" id="8514172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514177">Close</span><span class="op" id="8514182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8514192">false</span><span class="op" id="8514197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514202">ContentLength</span><span class="op" id="8514215">:</span>&nbsp;<span class="num" id="8514217">0</span><span class="op" id="8514218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514223">Host</span><span class="op" id="8514227">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8514238">&#34;&#34;</span><span class="op" id="8514240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514245">RequestURI</span><span class="op" id="8514255">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8514260">&#34;/_goRPC_&#34;</span><span class="op" id="8514270">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514274">}</span><span class="op" id="8514275">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514280">noBody</span><span class="op" id="8514286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514290">noTrailer</span><span class="op" id="8514299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514303">noError</span><span class="op" id="8514310">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514313">}</span><span class="op" id="8514314">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8514318">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8514369">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8514411">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514415">&amp;</span><span class="ident" id="8514416">Request</span><span class="op" id="8514423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514428">Method</span><span class="op" id="8514434">:</span>&nbsp;<span class="string" id="8514436">&#34;NOTIFY&#34;</span><span class="op" id="8514444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514449">URL</span><span class="op" id="8514452">:</span>&nbsp;<span class="op" id="8514454">&amp;</span><span class="ident" id="8514455">url</span><span class="op" id="8514458">.</span><span class="ident" id="8514459">URL</span><span class="op" id="8514462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514468">Path</span><span class="op" id="8514472">:</span>&nbsp;<span class="string" id="8514474">&#34;*&#34;</span><span class="op" id="8514477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514482">}</span><span class="op" id="8514483">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514488">Proto</span><span class="op" id="8514493">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8514500">&#34;HTTP/1.1&#34;</span><span class="op" id="8514510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514515">ProtoMajor</span><span class="op" id="8514525">:</span>&nbsp;<span class="num" id="8514527">1</span><span class="op" id="8514528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514533">ProtoMinor</span><span class="op" id="8514543">:</span>&nbsp;<span class="num" id="8514545">1</span><span class="op" id="8514546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514551">Header</span><span class="op" id="8514557">:</span>&nbsp;<span class="ident" id="8514559">Header</span><span class="op" id="8514565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8514571">&#34;Server&#34;</span><span class="op" id="8514579">:</span>&nbsp;<span class="op" id="8514581">[</span><span class="op" id="8514582">]</span><span class="builtintype" id="8514583">string</span><span class="op" id="8514589">{</span><span class="string" id="8514590">&#34;foo&#34;</span><span class="op" id="8514595">}</span><span class="op" id="8514596">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514601">}</span><span class="op" id="8514602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514607">Close</span><span class="op" id="8514612">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8514622">false</span><span class="op" id="8514627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514632">ContentLength</span><span class="op" id="8514645">:</span>&nbsp;<span class="num" id="8514647">0</span><span class="op" id="8514648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514653">RequestURI</span><span class="op" id="8514663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8514668">&#34;*&#34;</span><span class="op" id="8514671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514675">}</span><span class="op" id="8514676">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514681">noBody</span><span class="op" id="8514687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514691">noTrailer</span><span class="op" id="8514700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514704">noError</span><span class="op" id="8514711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514714">}</span><span class="op" id="8514715">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8514719">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8514777">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8514820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514824">&amp;</span><span class="ident" id="8514825">Request</span><span class="op" id="8514832">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514837">Method</span><span class="op" id="8514843">:</span>&nbsp;<span class="string" id="8514845">&#34;OPTIONS&#34;</span><span class="op" id="8514854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514859">URL</span><span class="op" id="8514862">:</span>&nbsp;<span class="op" id="8514864">&amp;</span><span class="ident" id="8514865">url</span><span class="op" id="8514868">.</span><span class="ident" id="8514869">URL</span><span class="op" id="8514872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514878">Path</span><span class="op" id="8514882">:</span>&nbsp;<span class="string" id="8514884">&#34;*&#34;</span><span class="op" id="8514887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8514892">}</span><span class="op" id="8514893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514898">Proto</span><span class="op" id="8514903">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8514910">&#34;HTTP/1.1&#34;</span><span class="op" id="8514920">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514925">ProtoMajor</span><span class="op" id="8514935">:</span>&nbsp;<span class="num" id="8514937">1</span><span class="op" id="8514938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514943">ProtoMinor</span><span class="op" id="8514953">:</span>&nbsp;<span class="num" id="8514955">1</span><span class="op" id="8514956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8514961">Header</span><span class="op" id="8514967">:</span>&nbsp;<span class="ident" id="8514969">Header</span><span class="op" id="8514975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8514981">&#34;Server&#34;</span><span class="op" id="8514989">:</span>&nbsp;<span class="op" id="8514991">[</span><span class="op" id="8514992">]</span><span class="builtintype" id="8514993">string</span><span class="op" id="8514999">{</span><span class="string" id="8515000">&#34;foo&#34;</span><span class="op" id="8515005">}</span><span class="op" id="8515006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515011">}</span><span class="op" id="8515012">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515017">Close</span><span class="op" id="8515022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8515032">false</span><span class="op" id="8515037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515042">ContentLength</span><span class="op" id="8515055">:</span>&nbsp;<span class="num" id="8515057">0</span><span class="op" id="8515058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515063">RequestURI</span><span class="op" id="8515073">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8515078">&#34;*&#34;</span><span class="op" id="8515081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515085">}</span><span class="op" id="8515086">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515091">noBody</span><span class="op" id="8515097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515101">noTrailer</span><span class="op" id="8515110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515114">noError</span><span class="op" id="8515121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515124">}</span><span class="op" id="8515125">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8515129">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8515178">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="8515246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515250">&amp;</span><span class="ident" id="8515251">Request</span><span class="op" id="8515258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515263">Method</span><span class="op" id="8515269">:</span>&nbsp;<span class="string" id="8515271">&#34;GET&#34;</span><span class="op" id="8515276">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515281">URL</span><span class="op" id="8515284">:</span>&nbsp;<span class="op" id="8515286">&amp;</span><span class="ident" id="8515287">url</span><span class="op" id="8515290">.</span><span class="ident" id="8515291">URL</span><span class="op" id="8515294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515300">Path</span><span class="op" id="8515304">:</span>&nbsp;<span class="string" id="8515306">&#34;/&#34;</span><span class="op" id="8515309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515314">}</span><span class="op" id="8515315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515320">Header</span><span class="op" id="8515326">:</span>&nbsp;<span class="ident" id="8515328">Header</span><span class="op" id="8515334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8515340">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8515382">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8515422">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8515440">&#34;Connection&#34;</span><span class="op" id="8515452">:</span>&nbsp;<span class="op" id="8515454">[</span><span class="op" id="8515455">]</span><span class="builtintype" id="8515456">string</span><span class="op" id="8515462">{</span><span class="string" id="8515463">&#34;close&#34;</span><span class="op" id="8515470">}</span><span class="op" id="8515471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515476">}</span><span class="op" id="8515477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515482">Host</span><span class="op" id="8515486">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8515494">&#34;issue8261.com&#34;</span><span class="op" id="8515509">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515514">Proto</span><span class="op" id="8515519">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8515526">&#34;HTTP/1.1&#34;</span><span class="op" id="8515536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515541">ProtoMajor</span><span class="op" id="8515551">:</span>&nbsp;<span class="num" id="8515553">1</span><span class="op" id="8515554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515559">ProtoMinor</span><span class="op" id="8515569">:</span>&nbsp;<span class="num" id="8515571">1</span><span class="op" id="8515572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515577">Close</span><span class="op" id="8515582">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8515589">true</span><span class="op" id="8515593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515598">RequestURI</span><span class="op" id="8515608">:</span>&nbsp;<span class="string" id="8515610">&#34;/&#34;</span><span class="op" id="8515613">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515617">}</span><span class="op" id="8515618">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515623">noBody</span><span class="op" id="8515629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515633">noTrailer</span><span class="op" id="8515642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515646">noError</span><span class="op" id="8515653">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515656">}</span><span class="op" id="8515657">,</span><br>
<span class="lineno"></span><span class="op" id="8515659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8515662">func</span>&nbsp;<span class="ident" id="8515667">TestReadRequest</span><span class="op" id="8515682">(</span><span class="ident" id="8515683">t</span>&nbsp;<span class="op" id="8515685">*</span><span class="ident" id="8515686">testing</span><span class="op" id="8515693">.</span><span class="ident" id="8515694">T</span><span class="op" id="8515695">)</span>&nbsp;<span class="op" id="8515697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8515700">for</span>&nbsp;<span class="ident" id="8515704">i</span>&nbsp;<span class="op" id="8515706">:=</span>&nbsp;<span class="keyword" id="8515709">range</span>&nbsp;<span class="ident" id="8515715">reqTests</span>&nbsp;<span class="op" id="8515724">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515728">tt</span>&nbsp;<span class="op" id="8515731">:=</span>&nbsp;<span class="op" id="8515734">&amp;</span><span class="ident" id="8515735">reqTests</span><span class="op" id="8515743">[</span><span class="ident" id="8515744">i</span><span class="op" id="8515745">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515749">req</span><span class="op" id="8515752">,</span>&nbsp;<span class="ident" id="8515754">err</span>&nbsp;<span class="op" id="8515758">:=</span>&nbsp;<span class="ident" id="8515761">ReadRequest</span><span class="op" id="8515772">(</span><span class="ident" id="8515773">bufio</span><span class="op" id="8515778">.</span><span class="ident" id="8515779">NewReader</span><span class="op" id="8515788">(</span><span class="ident" id="8515789">strings</span><span class="op" id="8515796">.</span><span class="ident" id="8515797">NewReader</span><span class="op" id="8515806">(</span><span class="ident" id="8515807">tt</span><span class="op" id="8515809">.</span><span class="ident" id="8515810">Raw</span><span class="op" id="8515813">)</span><span class="op" id="8515814">)</span><span class="op" id="8515815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8515819">if</span>&nbsp;<span class="ident" id="8515822">err</span>&nbsp;<span class="op" id="8515826">!=</span>&nbsp;<span class="ident" id="8515829">nil</span>&nbsp;<span class="op" id="8515833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8515838">if</span>&nbsp;<span class="ident" id="8515841">err</span><span class="op" id="8515844">.</span><span class="ident" id="8515845">Error</span><span class="op" id="8515850">(</span><span class="op" id="8515851">)</span>&nbsp;<span class="op" id="8515853">!=</span>&nbsp;<span class="ident" id="8515856">tt</span><span class="op" id="8515858">.</span><span class="ident" id="8515859">Error</span>&nbsp;<span class="op" id="8515865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515871">t</span><span class="op" id="8515872">.</span><span class="ident" id="8515873">Errorf</span><span class="op" id="8515879">(</span><span class="string" id="8515880">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="8515910">,</span>&nbsp;<span class="ident" id="8515912">i</span><span class="op" id="8515913">,</span>&nbsp;<span class="ident" id="8515915">err</span><span class="op" id="8515918">.</span><span class="ident" id="8515919">Error</span><span class="op" id="8515924">(</span><span class="op" id="8515925">)</span><span class="op" id="8515926">,</span>&nbsp;<span class="ident" id="8515928">tt</span><span class="op" id="8515930">.</span><span class="ident" id="8515931">Error</span><span class="op" id="8515936">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8515946">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8515957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515961">rbody</span>&nbsp;<span class="op" id="8515967">:=</span>&nbsp;<span class="ident" id="8515970">req</span><span class="op" id="8515973">.</span><span class="ident" id="8515974">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515981">req</span><span class="op" id="8515984">.</span><span class="ident" id="8515985">Body</span>&nbsp;<span class="op" id="8515990">=</span>&nbsp;<span class="ident" id="8515992">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515998">testName</span>&nbsp;<span class="op" id="8516007">:=</span>&nbsp;<span class="ident" id="8516010">fmt</span><span class="op" id="8516013">.</span><span class="ident" id="8516014">Sprintf</span><span class="op" id="8516021">(</span><span class="string" id="8516022">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="8516036">,</span>&nbsp;<span class="ident" id="8516038">i</span><span class="op" id="8516039">,</span>&nbsp;<span class="ident" id="8516041">tt</span><span class="op" id="8516043">.</span><span class="ident" id="8516044">Raw</span><span class="op" id="8516047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8516051">diff</span><span class="op" id="8516055">(</span><span class="ident" id="8516056">t</span><span class="op" id="8516057">,</span>&nbsp;<span class="ident" id="8516059">testName</span><span class="op" id="8516067">,</span>&nbsp;<span class="ident" id="8516069">req</span><span class="op" id="8516072">,</span>&nbsp;<span class="ident" id="8516074">tt</span><span class="op" id="8516076">.</span><span class="ident" id="8516077">Req</span><span class="op" id="8516080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8516084">var</span>&nbsp;<span class="ident" id="8516088">bout</span>&nbsp;<span class="ident" id="8516093">bytes</span><span class="op" id="8516098">.</span><span class="ident" id="8516099">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8516108">if</span>&nbsp;<span class="ident" id="8516111">rbody</span>&nbsp;<span class="op" id="8516117">!=</span>&nbsp;<span class="ident" id="8516120">nil</span>&nbsp;<span class="op" id="8516124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8516129">_</span><span class="op" id="8516130">,</span>&nbsp;<span class="ident" id="8516132">err</span>&nbsp;<span class="op" id="8516136">:=</span>&nbsp;<span class="ident" id="8516139">io</span><span class="op" id="8516141">.</span><span class="ident" id="8516142">Copy</span><span class="op" id="8516146">(</span><span class="op" id="8516147">&amp;</span><span class="ident" id="8516148">bout</span><span class="op" id="8516152">,</span>&nbsp;<span class="ident" id="8516154">rbody</span><span class="op" id="8516159">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8516164">if</span>&nbsp;<span class="ident" id="8516167">err</span>&nbsp;<span class="op" id="8516171">!=</span>&nbsp;<span class="ident" id="8516174">nil</span>&nbsp;<span class="op" id="8516178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8516184">t</span><span class="op" id="8516185">.</span><span class="ident" id="8516186">Fatalf</span><span class="op" id="8516192">(</span><span class="string" id="8516193">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="8516215">,</span>&nbsp;<span class="ident" id="8516217">testName</span><span class="op" id="8516225">,</span>&nbsp;<span class="ident" id="8516227">err</span><span class="op" id="8516230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8516235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8516240">rbody</span><span class="op" id="8516245">.</span><span class="ident" id="8516246">Close</span><span class="op" id="8516251">(</span><span class="op" id="8516252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8516256">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8516260">body</span>&nbsp;<span class="op" id="8516265">:=</span>&nbsp;<span class="ident" id="8516268">bout</span><span class="op" id="8516272">.</span><span class="ident" id="8516273">String</span><span class="op" id="8516279">(</span><span class="op" id="8516280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8516284">if</span>&nbsp;<span class="ident" id="8516287">body</span>&nbsp;<span class="op" id="8516292">!=</span>&nbsp;<span class="ident" id="8516295">tt</span><span class="op" id="8516297">.</span><span class="ident" id="8516298">Body</span>&nbsp;<span class="op" id="8516303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8516308">t</span><span class="op" id="8516309">.</span><span class="ident" id="8516310">Errorf</span><span class="op" id="8516316">(</span><span class="string" id="8516317">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8516340">,</span>&nbsp;<span class="ident" id="8516342">testName</span><span class="op" id="8516350">,</span>&nbsp;<span class="ident" id="8516352">body</span><span class="op" id="8516356">,</span>&nbsp;<span class="ident" id="8516358">tt</span><span class="op" id="8516360">.</span><span class="ident" id="8516361">Body</span><span class="op" id="8516365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8516369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8516373">if</span>&nbsp;<span class="op" id="8516376">!</span><span class="ident" id="8516377">reflect</span><span class="op" id="8516384">.</span><span class="ident" id="8516385">DeepEqual</span><span class="op" id="8516394">(</span><span class="ident" id="8516395">tt</span><span class="op" id="8516397">.</span><span class="ident" id="8516398">Trailer</span><span class="op" id="8516405">,</span>&nbsp;<span class="ident" id="8516407">req</span><span class="op" id="8516410">.</span><span class="ident" id="8516411">Trailer</span><span class="op" id="8516418">)</span>&nbsp;<span class="op" id="8516420">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8516425">t</span><span class="op" id="8516426">.</span><span class="ident" id="8516427">Errorf</span><span class="op" id="8516433">(</span><span class="string" id="8516434">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8516476">,</span>&nbsp;<span class="ident" id="8516478">testName</span><span class="op" id="8516486">,</span>&nbsp;<span class="ident" id="8516488">req</span><span class="op" id="8516491">.</span><span class="ident" id="8516492">Trailer</span><span class="op" id="8516499">,</span>&nbsp;<span class="ident" id="8516501">tt</span><span class="op" id="8516503">.</span><span class="ident" id="8516504">Trailer</span><span class="op" id="8516511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8516515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8516518">}</span><br>
<span class="lineno"></span><span class="op" id="8516520">}</span>
</div>
</body>
</html>
