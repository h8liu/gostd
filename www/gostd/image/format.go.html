<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5585518">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5585573">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5585627">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5585678">package</span>&nbsp;<span class="ident" id="5585686">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5585693">import</span>&nbsp;<span class="op" id="5585700">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5585703">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5585712">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5585722">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5585727">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5585730">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="5585798">var</span>&nbsp;<span class="ident" id="5585802">ErrFormat</span>&nbsp;<span class="op" id="5585812">=</span>&nbsp;<span class="ident" id="5585814">errors</span><span class="op" id="5585820">.</span><span class="ident" id="5585821">New</span><span class="op" id="5585824">(</span><span class="string" id="5585825">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="5585848">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5585851">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5585928">type</span>&nbsp;<span class="ident" id="5585933">format</span>&nbsp;<span class="keyword" id="5585940">struct</span>&nbsp;<span class="op" id="5585947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585950">name</span><span class="op" id="5585954">,</span>&nbsp;<span class="ident" id="5585956">magic</span>&nbsp;&nbsp;<span class="builtintype" id="5585963">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585971">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5585984">func</span><span class="op" id="5585988">(</span><span class="ident" id="5585989">io</span><span class="op" id="5585991">.</span><span class="ident" id="5585992">Reader</span><span class="op" id="5585998">)</span>&nbsp;<span class="op" id="5586000">(</span><span class="ident" id="5586001">Image</span><span class="op" id="5586006">,</span>&nbsp;<span class="builtintype" id="5586008">error</span><span class="op" id="5586013">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586016">decodeConfig</span>&nbsp;<span class="keyword" id="5586029">func</span><span class="op" id="5586033">(</span><span class="ident" id="5586034">io</span><span class="op" id="5586036">.</span><span class="ident" id="5586037">Reader</span><span class="op" id="5586043">)</span>&nbsp;<span class="op" id="5586045">(</span><span class="ident" id="5586046">Config</span><span class="op" id="5586052">,</span>&nbsp;<span class="builtintype" id="5586054">error</span><span class="op" id="5586059">)</span><br>
<span class="lineno"></span><span class="op" id="5586061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5586064">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="5586110">var</span>&nbsp;<span class="ident" id="5586114">formats</span>&nbsp;<span class="op" id="5586122">[</span><span class="op" id="5586123">]</span><span class="ident" id="5586124">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5586132">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="5586195">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5586252">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="5586330">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="5586396">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="5586454">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="5586523">func</span>&nbsp;<span class="ident" id="5586528">RegisterFormat</span><span class="op" id="5586542">(</span><span class="ident" id="5586543">name</span><span class="op" id="5586547">,</span>&nbsp;<span class="ident" id="5586549">magic</span>&nbsp;<span class="builtintype" id="5586555">string</span><span class="op" id="5586561">,</span>&nbsp;<span class="ident" id="5586563">decode</span>&nbsp;<span class="keyword" id="5586570">func</span><span class="op" id="5586574">(</span><span class="ident" id="5586575">io</span><span class="op" id="5586577">.</span><span class="ident" id="5586578">Reader</span><span class="op" id="5586584">)</span>&nbsp;<span class="op" id="5586586">(</span><span class="ident" id="5586587">Image</span><span class="op" id="5586592">,</span>&nbsp;<span class="builtintype" id="5586594">error</span><span class="op" id="5586599">)</span><span class="op" id="5586600">,</span>&nbsp;<span class="ident" id="5586602">decodeConfig</span>&nbsp;<span class="keyword" id="5586615">func</span><span class="op" id="5586619">(</span><span class="ident" id="5586620">io</span><span class="op" id="5586622">.</span><span class="ident" id="5586623">Reader</span><span class="op" id="5586629">)</span>&nbsp;<span class="op" id="5586631">(</span><span class="ident" id="5586632">Config</span><span class="op" id="5586638">,</span>&nbsp;<span class="builtintype" id="5586640">error</span><span class="op" id="5586645">)</span><span class="op" id="5586646">)</span>&nbsp;<span class="op" id="5586648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586651">formats</span>&nbsp;<span class="op" id="5586659">=</span>&nbsp;<span class="builtinfunc" id="5586661">append</span><span class="op" id="5586667">(</span><span class="ident" id="5586668">formats</span><span class="op" id="5586675">,</span>&nbsp;<span class="ident" id="5586677">format</span><span class="op" id="5586683">{</span><span class="ident" id="5586684">name</span><span class="op" id="5586688">,</span>&nbsp;<span class="ident" id="5586690">magic</span><span class="op" id="5586695">,</span>&nbsp;<span class="ident" id="5586697">decode</span><span class="op" id="5586703">,</span>&nbsp;<span class="ident" id="5586705">decodeConfig</span><span class="op" id="5586717">}</span><span class="op" id="5586718">)</span><br>
<span class="lineno"></span><span class="op" id="5586720">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5586723">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="5586777">type</span>&nbsp;<span class="ident" id="5586782">reader</span>&nbsp;<span class="keyword" id="5586789">interface</span>&nbsp;<span class="op" id="5586799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586802">io</span><span class="op" id="5586804">.</span><span class="ident" id="5586805">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586813">Peek</span><span class="op" id="5586817">(</span><span class="builtintype" id="5586818">int</span><span class="op" id="5586821">)</span>&nbsp;<span class="op" id="5586823">(</span><span class="op" id="5586824">[</span><span class="op" id="5586825">]</span><span class="builtintype" id="5586826">byte</span><span class="op" id="5586830">,</span>&nbsp;<span class="builtintype" id="5586832">error</span><span class="op" id="5586837">)</span><br>
<span class="lineno">40</span><span class="op" id="5586839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5586842">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5586889">func</span>&nbsp;<span class="ident" id="5586894">asReader</span><span class="op" id="5586902">(</span><span class="ident" id="5586903">r</span>&nbsp;<span class="ident" id="5586905">io</span><span class="op" id="5586907">.</span><span class="ident" id="5586908">Reader</span><span class="op" id="5586914">)</span>&nbsp;<span class="ident" id="5586916">reader</span>&nbsp;<span class="op" id="5586923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586926">if</span>&nbsp;<span class="ident" id="5586929">rr</span><span class="op" id="5586931">,</span>&nbsp;<span class="ident" id="5586933">ok</span>&nbsp;<span class="op" id="5586936">:=</span>&nbsp;<span class="ident" id="5586939">r</span><span class="op" id="5586940">.</span><span class="op" id="5586941">(</span><span class="ident" id="5586942">reader</span><span class="op" id="5586948">)</span><span class="op" id="5586949">;</span>&nbsp;<span class="ident" id="5586951">ok</span>&nbsp;<span class="op" id="5586954">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586958">return</span>&nbsp;<span class="ident" id="5586965">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5586969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586972">return</span>&nbsp;<span class="ident" id="5586979">bufio</span><span class="op" id="5586984">.</span><span class="ident" id="5586985">NewReader</span><span class="op" id="5586994">(</span><span class="ident" id="5586995">r</span><span class="op" id="5586996">)</span><br>
<span class="lineno"></span><span class="op" id="5586998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5587001">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="5587076">func</span>&nbsp;<span class="ident" id="5587081">match</span><span class="op" id="5587086">(</span><span class="ident" id="5587087">magic</span>&nbsp;<span class="builtintype" id="5587093">string</span><span class="op" id="5587099">,</span>&nbsp;<span class="ident" id="5587101">b</span>&nbsp;<span class="op" id="5587103">[</span><span class="op" id="5587104">]</span><span class="builtintype" id="5587105">byte</span><span class="op" id="5587109">)</span>&nbsp;<span class="builtintype" id="5587111">bool</span>&nbsp;<span class="op" id="5587116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587119">if</span>&nbsp;<span class="builtinfunc" id="5587122">len</span><span class="op" id="5587125">(</span><span class="ident" id="5587126">magic</span><span class="op" id="5587131">)</span>&nbsp;<span class="op" id="5587133">!=</span>&nbsp;<span class="builtinfunc" id="5587136">len</span><span class="op" id="5587139">(</span><span class="ident" id="5587140">b</span><span class="op" id="5587141">)</span>&nbsp;<span class="op" id="5587143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587147">return</span>&nbsp;<span class="builtintype" id="5587154">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5587161">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587164">for</span>&nbsp;<span class="ident" id="5587168">i</span><span class="op" id="5587169">,</span>&nbsp;<span class="ident" id="5587171">c</span>&nbsp;<span class="op" id="5587173">:=</span>&nbsp;<span class="keyword" id="5587176">range</span>&nbsp;<span class="ident" id="5587182">b</span>&nbsp;<span class="op" id="5587184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587188">if</span>&nbsp;<span class="ident" id="5587191">magic</span><span class="op" id="5587196">[</span><span class="ident" id="5587197">i</span><span class="op" id="5587198">]</span>&nbsp;<span class="op" id="5587200">!=</span>&nbsp;<span class="ident" id="5587203">c</span>&nbsp;<span class="op" id="5587205">&amp;&amp;</span>&nbsp;<span class="ident" id="5587208">magic</span><span class="op" id="5587213">[</span><span class="ident" id="5587214">i</span><span class="op" id="5587215">]</span>&nbsp;<span class="op" id="5587217">!=</span>&nbsp;<span class="string" id="5587220">&#39;?&#39;</span>&nbsp;<span class="op" id="5587224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587229">return</span>&nbsp;<span class="builtintype" id="5587236">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5587244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5587247">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587250">return</span>&nbsp;<span class="builtintype" id="5587257">true</span><br>
<span class="lineno"></span><span class="op" id="5587262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5587265">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5587309">func</span>&nbsp;<span class="ident" id="5587314">sniff</span><span class="op" id="5587319">(</span><span class="ident" id="5587320">r</span>&nbsp;<span class="ident" id="5587322">reader</span><span class="op" id="5587328">)</span>&nbsp;<span class="ident" id="5587330">format</span>&nbsp;<span class="op" id="5587337">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587340">for</span>&nbsp;<span class="ident" id="5587344">_</span><span class="op" id="5587345">,</span>&nbsp;<span class="ident" id="5587347">f</span>&nbsp;<span class="op" id="5587349">:=</span>&nbsp;<span class="keyword" id="5587352">range</span>&nbsp;<span class="ident" id="5587358">formats</span>&nbsp;<span class="op" id="5587366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587370">b</span><span class="op" id="5587371">,</span>&nbsp;<span class="ident" id="5587373">err</span>&nbsp;<span class="op" id="5587377">:=</span>&nbsp;<span class="ident" id="5587380">r</span><span class="op" id="5587381">.</span><span class="ident" id="5587382">Peek</span><span class="op" id="5587386">(</span><span class="builtinfunc" id="5587387">len</span><span class="op" id="5587390">(</span><span class="ident" id="5587391">f</span><span class="op" id="5587392">.</span><span class="ident" id="5587393">magic</span><span class="op" id="5587398">)</span><span class="op" id="5587399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587403">if</span>&nbsp;<span class="ident" id="5587406">err</span>&nbsp;<span class="op" id="5587410">==</span>&nbsp;<span class="ident" id="5587413">nil</span>&nbsp;<span class="op" id="5587417">&amp;&amp;</span>&nbsp;<span class="ident" id="5587420">match</span><span class="op" id="5587425">(</span><span class="ident" id="5587426">f</span><span class="op" id="5587427">.</span><span class="ident" id="5587428">magic</span><span class="op" id="5587433">,</span>&nbsp;<span class="ident" id="5587435">b</span><span class="op" id="5587436">)</span>&nbsp;<span class="op" id="5587438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587443">return</span>&nbsp;<span class="ident" id="5587450">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5587454">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5587457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587460">return</span>&nbsp;<span class="ident" id="5587467">format</span><span class="op" id="5587473">{</span><span class="op" id="5587474">}</span><br>
<span class="lineno"></span><span class="op" id="5587476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5587479">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="5587552">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="5587627">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="5587702">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5587723">func</span>&nbsp;<span class="ident" id="5587728">Decode</span><span class="op" id="5587734">(</span><span class="ident" id="5587735">r</span>&nbsp;<span class="ident" id="5587737">io</span><span class="op" id="5587739">.</span><span class="ident" id="5587740">Reader</span><span class="op" id="5587746">)</span>&nbsp;<span class="op" id="5587748">(</span><span class="ident" id="5587749">Image</span><span class="op" id="5587754">,</span>&nbsp;<span class="builtintype" id="5587756">string</span><span class="op" id="5587762">,</span>&nbsp;<span class="builtintype" id="5587764">error</span><span class="op" id="5587769">)</span>&nbsp;<span class="op" id="5587771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587774">rr</span>&nbsp;<span class="op" id="5587777">:=</span>&nbsp;<span class="ident" id="5587780">asReader</span><span class="op" id="5587788">(</span><span class="ident" id="5587789">r</span><span class="op" id="5587790">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587793">f</span>&nbsp;<span class="op" id="5587795">:=</span>&nbsp;<span class="ident" id="5587798">sniff</span><span class="op" id="5587803">(</span><span class="ident" id="5587804">rr</span><span class="op" id="5587806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587809">if</span>&nbsp;<span class="ident" id="5587812">f</span><span class="op" id="5587813">.</span><span class="ident" id="5587814">decode</span>&nbsp;<span class="op" id="5587821">==</span>&nbsp;<span class="ident" id="5587824">nil</span>&nbsp;<span class="op" id="5587828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587832">return</span>&nbsp;<span class="ident" id="5587839">nil</span><span class="op" id="5587842">,</span>&nbsp;<span class="string" id="5587844">&#34;&#34;</span><span class="op" id="5587846">,</span>&nbsp;<span class="ident" id="5587848">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5587859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587862">m</span><span class="op" id="5587863">,</span>&nbsp;<span class="ident" id="5587865">err</span>&nbsp;<span class="op" id="5587869">:=</span>&nbsp;<span class="ident" id="5587872">f</span><span class="op" id="5587873">.</span><span class="ident" id="5587874">decode</span><span class="op" id="5587880">(</span><span class="ident" id="5587881">rr</span><span class="op" id="5587883">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587886">return</span>&nbsp;<span class="ident" id="5587893">m</span><span class="op" id="5587894">,</span>&nbsp;<span class="ident" id="5587896">f</span><span class="op" id="5587897">.</span><span class="ident" id="5587898">name</span><span class="op" id="5587902">,</span>&nbsp;<span class="ident" id="5587904">err</span><br>
<span class="lineno"></span><span class="op" id="5587908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5587911">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="5587987">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="5588066">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5588143">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5588194">func</span>&nbsp;<span class="ident" id="5588199">DecodeConfig</span><span class="op" id="5588211">(</span><span class="ident" id="5588212">r</span>&nbsp;<span class="ident" id="5588214">io</span><span class="op" id="5588216">.</span><span class="ident" id="5588217">Reader</span><span class="op" id="5588223">)</span>&nbsp;<span class="op" id="5588225">(</span><span class="ident" id="5588226">Config</span><span class="op" id="5588232">,</span>&nbsp;<span class="builtintype" id="5588234">string</span><span class="op" id="5588240">,</span>&nbsp;<span class="builtintype" id="5588242">error</span><span class="op" id="5588247">)</span>&nbsp;<span class="op" id="5588249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588252">rr</span>&nbsp;<span class="op" id="5588255">:=</span>&nbsp;<span class="ident" id="5588258">asReader</span><span class="op" id="5588266">(</span><span class="ident" id="5588267">r</span><span class="op" id="5588268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588271">f</span>&nbsp;<span class="op" id="5588273">:=</span>&nbsp;<span class="ident" id="5588276">sniff</span><span class="op" id="5588281">(</span><span class="ident" id="5588282">rr</span><span class="op" id="5588284">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588287">if</span>&nbsp;<span class="ident" id="5588290">f</span><span class="op" id="5588291">.</span><span class="ident" id="5588292">decodeConfig</span>&nbsp;<span class="op" id="5588305">==</span>&nbsp;<span class="ident" id="5588308">nil</span>&nbsp;<span class="op" id="5588312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588316">return</span>&nbsp;<span class="ident" id="5588323">Config</span><span class="op" id="5588329">{</span><span class="op" id="5588330">}</span><span class="op" id="5588331">,</span>&nbsp;<span class="string" id="5588333">&#34;&#34;</span><span class="op" id="5588335">,</span>&nbsp;<span class="ident" id="5588337">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5588348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588351">c</span><span class="op" id="5588352">,</span>&nbsp;<span class="ident" id="5588354">err</span>&nbsp;<span class="op" id="5588358">:=</span>&nbsp;<span class="ident" id="5588361">f</span><span class="op" id="5588362">.</span><span class="ident" id="5588363">decodeConfig</span><span class="op" id="5588375">(</span><span class="ident" id="5588376">rr</span><span class="op" id="5588378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588381">return</span>&nbsp;<span class="ident" id="5588388">c</span><span class="op" id="5588389">,</span>&nbsp;<span class="ident" id="5588391">f</span><span class="op" id="5588392">.</span><span class="ident" id="5588393">name</span><span class="op" id="5588397">,</span>&nbsp;<span class="ident" id="5588399">err</span><br>
<span class="lineno">100</span><span class="op" id="5588403">}</span>
</div>
</body>
</html>
