<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="977929">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="977984">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="978038">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="978089">package</span>&nbsp;<span class="ident" id="978097">runtime_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="978111">import</span>&nbsp;<span class="op" id="978118">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="978121">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="978132">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="978143">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="978153">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="978156">func</span>&nbsp;<span class="ident" id="978161">TestCaller</span><span class="op" id="978171">(</span><span class="ident" id="978172">t</span>&nbsp;<span class="op" id="978174">*</span><span class="ident" id="978175"><a href="/runtime/symtab_test.go.html#978143">testing</a></span><span class="op" id="978182">.</span><span class="ident" id="978183">T</span><span class="op" id="978184">)</span>&nbsp;<span class="op" id="978186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978189">procs</span>&nbsp;<span class="op" id="978195">:=</span>&nbsp;<span class="ident" id="978198"><a href="/runtime/symtab_test.go.html#978121">runtime</a></span><span class="op" id="978205">.</span><span class="ident" id="978206">GOMAXPROCS</span><span class="op" id="978216">(</span><span class="op" id="978217">-</span><span class="num" id="978218">1</span><span class="op" id="978219">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978222">c</span>&nbsp;<span class="op" id="978224">:=</span>&nbsp;<span class="builtinfunc" id="978227">make</span><span class="op" id="978231">(</span><span class="keyword" id="978232">chan</span>&nbsp;<span class="builtintype" id="978237">bool</span><span class="op" id="978241">,</span>&nbsp;<span class="ident" id="978243"><a href="/runtime/symtab_test.go.html#978189">procs</a></span><span class="op" id="978248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="978251">for</span>&nbsp;<span class="ident" id="978255">p</span>&nbsp;<span class="op" id="978257">:=</span>&nbsp;<span class="num" id="978260">0</span><span class="op" id="978261">;</span>&nbsp;<span class="ident" id="978263"><a href="/runtime/symtab_test.go.html#978255">p</a></span>&nbsp;<span class="op" id="978265">&lt;</span>&nbsp;<span class="ident" id="978267"><a href="/runtime/symtab_test.go.html#978189">procs</a></span><span class="op" id="978272">;</span>&nbsp;<span class="ident" id="978274"><a href="/runtime/symtab_test.go.html#978255">p</a></span><span class="op" id="978275">++</span>&nbsp;<span class="op" id="978278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="978282">go</span>&nbsp;<span class="keyword" id="978285">func</span><span class="op" id="978289">(</span><span class="op" id="978290">)</span>&nbsp;<span class="op" id="978292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="978297">for</span>&nbsp;<span class="ident" id="978301">i</span>&nbsp;<span class="op" id="978303">:=</span>&nbsp;<span class="num" id="978306">0</span><span class="op" id="978307">;</span>&nbsp;<span class="ident" id="978309"><a href="/runtime/symtab_test.go.html#978301">i</a></span>&nbsp;<span class="op" id="978311">&lt;</span>&nbsp;<span class="num" id="978313">1000</span><span class="op" id="978317">;</span>&nbsp;<span class="ident" id="978319"><a href="/runtime/symtab_test.go.html#978301">i</a></span><span class="op" id="978320">++</span>&nbsp;<span class="op" id="978323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978329"><a href="/runtime/symtab_test.go.html#978411">testCallerFoo</a></span><span class="op" id="978342">(</span><span class="ident" id="978343"><a href="/runtime/symtab_test.go.html#978172">t</a></span><span class="op" id="978344">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978354"><a href="/runtime/symtab_test.go.html#978222">c</a></span>&nbsp;<span class="op" id="978356">&lt;-</span>&nbsp;<span class="ident" id="978359">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978366">}</span><span class="op" id="978367">(</span><span class="op" id="978368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="978372">defer</span>&nbsp;<span class="keyword" id="978378">func</span><span class="op" id="978382">(</span><span class="op" id="978383">)</span>&nbsp;<span class="op" id="978385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978390">&lt;-</span><span class="ident" id="978392"><a href="/runtime/symtab_test.go.html#978222">c</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978396">}</span><span class="op" id="978397">(</span><span class="op" id="978398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978401">}</span><br>
<span class="lineno"></span><span class="op" id="978403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="978406">func</span>&nbsp;<span class="ident" id="978411">testCallerFoo</span><span class="op" id="978424">(</span><span class="ident" id="978425">t</span>&nbsp;<span class="op" id="978427">*</span><span class="ident" id="978428"><a href="/runtime/symtab_test.go.html#978143">testing</a></span><span class="op" id="978435">.</span><span class="ident" id="978436">T</span><span class="op" id="978437">)</span>&nbsp;<span class="op" id="978439">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978442"><a href="/runtime/symtab_test.go.html#978467">testCallerBar</a></span><span class="op" id="978455">(</span><span class="ident" id="978456"><a href="/runtime/symtab_test.go.html#978425">t</a></span><span class="op" id="978457">)</span><br>
<span class="lineno"></span><span class="op" id="978459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="978462">func</span>&nbsp;<span class="ident" id="978467">testCallerBar</span><span class="op" id="978480">(</span><span class="ident" id="978481">t</span>&nbsp;<span class="op" id="978483">*</span><span class="ident" id="978484"><a href="/runtime/symtab_test.go.html#978143">testing</a></span><span class="op" id="978491">.</span><span class="ident" id="978492">T</span><span class="op" id="978493">)</span>&nbsp;<span class="op" id="978495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="978498">for</span>&nbsp;<span class="ident" id="978502">i</span>&nbsp;<span class="op" id="978504">:=</span>&nbsp;<span class="num" id="978507">0</span><span class="op" id="978508">;</span>&nbsp;<span class="ident" id="978510"><a href="/runtime/symtab_test.go.html#978502">i</a></span>&nbsp;<span class="op" id="978512">&lt;</span>&nbsp;<span class="num" id="978514">2</span><span class="op" id="978515">;</span>&nbsp;<span class="ident" id="978517"><a href="/runtime/symtab_test.go.html#978502">i</a></span><span class="op" id="978518">++</span>&nbsp;<span class="op" id="978521">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978525">pc</span><span class="op" id="978527">,</span>&nbsp;<span class="ident" id="978529">file</span><span class="op" id="978533">,</span>&nbsp;<span class="ident" id="978535">line</span><span class="op" id="978539">,</span>&nbsp;<span class="ident" id="978541">ok</span>&nbsp;<span class="op" id="978544">:=</span>&nbsp;<span class="ident" id="978547"><a href="/runtime/symtab_test.go.html#978121">runtime</a></span><span class="op" id="978554">.</span><span class="ident" id="978555">Caller</span><span class="op" id="978561">(</span><span class="ident" id="978562"><a href="/runtime/symtab_test.go.html#978502">i</a></span><span class="op" id="978563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978567">f</span>&nbsp;<span class="op" id="978569">:=</span>&nbsp;<span class="ident" id="978572"><a href="/runtime/symtab_test.go.html#978121">runtime</a></span><span class="op" id="978579">.</span><span class="ident" id="978580">FuncForPC</span><span class="op" id="978589">(</span><span class="ident" id="978590"><a href="/runtime/symtab_test.go.html#978525">pc</a></span><span class="op" id="978592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="978596">if</span>&nbsp;<span class="op" id="978599">!</span><span class="ident" id="978600"><a href="/runtime/symtab_test.go.html#978541">ok</a></span>&nbsp;<span class="op" id="978603">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978609">!</span><span class="ident" id="978610"><a href="/runtime/symtab_test.go.html#978132">strings</a></span><span class="op" id="978617">.</span><span class="ident" id="978618">HasSuffix</span><span class="op" id="978627">(</span><span class="ident" id="978628"><a href="/runtime/symtab_test.go.html#978529">file</a></span><span class="op" id="978632">,</span>&nbsp;<span class="string" id="978634">&#34;symtab_test.go&#34;</span><span class="op" id="978650">)</span>&nbsp;<span class="op" id="978652">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978658">(</span><span class="ident" id="978659"><a href="/runtime/symtab_test.go.html#978502">i</a></span>&nbsp;<span class="op" id="978661">==</span>&nbsp;<span class="num" id="978664">0</span>&nbsp;<span class="op" id="978666">&amp;&amp;</span>&nbsp;<span class="op" id="978669">!</span><span class="ident" id="978670"><a href="/runtime/symtab_test.go.html#978132">strings</a></span><span class="op" id="978677">.</span><span class="ident" id="978678">HasSuffix</span><span class="op" id="978687">(</span><span class="ident" id="978688"><a href="/runtime/symtab_test.go.html#978567">f</a></span><span class="op" id="978689">.</span><span class="ident" id="978690">Name</span><span class="op" id="978694">(</span><span class="op" id="978695">)</span><span class="op" id="978696">,</span>&nbsp;<span class="string" id="978698">&#34;testCallerBar&#34;</span><span class="op" id="978713">)</span><span class="op" id="978714">)</span>&nbsp;<span class="op" id="978716">||</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978722">(</span><span class="ident" id="978723"><a href="/runtime/symtab_test.go.html#978502">i</a></span>&nbsp;<span class="op" id="978725">==</span>&nbsp;<span class="num" id="978728">1</span>&nbsp;<span class="op" id="978730">&amp;&amp;</span>&nbsp;<span class="op" id="978733">!</span><span class="ident" id="978734"><a href="/runtime/symtab_test.go.html#978132">strings</a></span><span class="op" id="978741">.</span><span class="ident" id="978742">HasSuffix</span><span class="op" id="978751">(</span><span class="ident" id="978752"><a href="/runtime/symtab_test.go.html#978567">f</a></span><span class="op" id="978753">.</span><span class="ident" id="978754">Name</span><span class="op" id="978758">(</span><span class="op" id="978759">)</span><span class="op" id="978760">,</span>&nbsp;<span class="string" id="978762">&#34;testCallerFoo&#34;</span><span class="op" id="978777">)</span><span class="op" id="978778">)</span>&nbsp;<span class="op" id="978780">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978786"><a href="/runtime/symtab_test.go.html#978535">line</a></span>&nbsp;<span class="op" id="978791">&lt;</span>&nbsp;<span class="num" id="978793">5</span>&nbsp;<span class="op" id="978795">||</span>&nbsp;<span class="ident" id="978798"><a href="/runtime/symtab_test.go.html#978535">line</a></span>&nbsp;<span class="op" id="978803">&gt;</span>&nbsp;<span class="num" id="978805">1000</span>&nbsp;<span class="op" id="978810">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978816"><a href="/runtime/symtab_test.go.html#978567">f</a></span><span class="op" id="978817">.</span><span class="ident" id="978818">Entry</span><span class="op" id="978823">(</span><span class="op" id="978824">)</span>&nbsp;<span class="op" id="978826">&gt;=</span>&nbsp;<span class="ident" id="978829"><a href="/runtime/symtab_test.go.html#978525">pc</a></span>&nbsp;<span class="op" id="978832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978837"><a href="/runtime/symtab_test.go.html#978481">t</a></span><span class="op" id="978838">.</span><span class="ident" id="978839">Errorf</span><span class="op" id="978845">(</span><span class="string" id="978846">&#34;incorrect&nbsp;symbol&nbsp;info&nbsp;%d:&nbsp;%t&nbsp;%d&nbsp;%d&nbsp;%s&nbsp;%s&nbsp;%d&#34;</span><span class="op" id="978891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="978897"><a href="/runtime/symtab_test.go.html#978502">i</a></span><span class="op" id="978898">,</span>&nbsp;<span class="ident" id="978900"><a href="/runtime/symtab_test.go.html#978541">ok</a></span><span class="op" id="978902">,</span>&nbsp;<span class="ident" id="978904"><a href="/runtime/symtab_test.go.html#978567">f</a></span><span class="op" id="978905">.</span><span class="ident" id="978906">Entry</span><span class="op" id="978911">(</span><span class="op" id="978912">)</span><span class="op" id="978913">,</span>&nbsp;<span class="ident" id="978915"><a href="/runtime/symtab_test.go.html#978525">pc</a></span><span class="op" id="978917">,</span>&nbsp;<span class="ident" id="978919"><a href="/runtime/symtab_test.go.html#978567">f</a></span><span class="op" id="978920">.</span><span class="ident" id="978921">Name</span><span class="op" id="978925">(</span><span class="op" id="978926">)</span><span class="op" id="978927">,</span>&nbsp;<span class="ident" id="978929"><a href="/runtime/symtab_test.go.html#978529">file</a></span><span class="op" id="978933">,</span>&nbsp;<span class="ident" id="978935"><a href="/runtime/symtab_test.go.html#978535">line</a></span><span class="op" id="978939">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="978946">}</span><br>
<span class="lineno"></span><span class="op" id="978948">}</span>
</div>
</body>
</html>
