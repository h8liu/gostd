<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1631561">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1631616">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1631670">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1631721">package</span>&nbsp;<span class="ident" id="1631729">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1631735">func</span>&nbsp;<span class="ident" id="1631740">isOddInt</span><span class="op" id="1631748">(</span><span class="ident" id="1631749">x</span>&nbsp;<span class="builtintype" id="1631751">float64</span><span class="op" id="1631758">)</span>&nbsp;<span class="builtintype" id="1631760">bool</span>&nbsp;<span class="op" id="1631765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1631768">xi</span><span class="op" id="1631770">,</span>&nbsp;<span class="ident" id="1631772">xf</span>&nbsp;<span class="op" id="1631775">:=</span>&nbsp;<span class="ident" id="1631778">Modf</span><span class="op" id="1631782">(</span><span class="ident" id="1631783">x</span><span class="op" id="1631784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1631787">return</span>&nbsp;<span class="ident" id="1631794">xf</span>&nbsp;<span class="op" id="1631797">==</span>&nbsp;<span class="num" id="1631800">0</span>&nbsp;<span class="op" id="1631802">&amp;&amp;</span>&nbsp;<span class="ident" id="1631805">int64</span><span class="op" id="1631810">(</span><span class="ident" id="1631811">xi</span><span class="op" id="1631813">)</span><span class="op" id="1631814">&amp;</span><span class="num" id="1631815">1</span>&nbsp;<span class="op" id="1631817">==</span>&nbsp;<span class="num" id="1631820">1</span><br>
<span class="lineno">10</span><span class="op" id="1631822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1631825">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="1631893">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1631959">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="1632009">//</span><br>
<span class="lineno"></span><span class="comment" id="1632012">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="1632045">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="1632074">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="1632101">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="1632128">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1632149">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1632170">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1632218">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="1632243">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="1632266">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="1632328">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1632374">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="1632434">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="1632456">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1632491">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1632524">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1632557">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1632592">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="1632625">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1632656">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="1632686">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="1632747">func</span>&nbsp;<span class="ident" id="1632752">Pow</span><span class="op" id="1632755">(</span><span class="ident" id="1632756">x</span><span class="op" id="1632757">,</span>&nbsp;<span class="ident" id="1632759">y</span>&nbsp;<span class="builtintype" id="1632761">float64</span><span class="op" id="1632768">)</span>&nbsp;<span class="builtintype" id="1632770">float64</span>&nbsp;<span class="op" id="1632778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632781">switch</span>&nbsp;<span class="op" id="1632788">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632791">case</span>&nbsp;<span class="ident" id="1632796">y</span>&nbsp;<span class="op" id="1632798">==</span>&nbsp;<span class="num" id="1632801">0</span>&nbsp;<span class="op" id="1632803">||</span>&nbsp;<span class="ident" id="1632806">x</span>&nbsp;<span class="op" id="1632808">==</span>&nbsp;<span class="num" id="1632811">1</span><span class="op" id="1632812">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632816">return</span>&nbsp;<span class="num" id="1632823">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632826">case</span>&nbsp;<span class="ident" id="1632831">y</span>&nbsp;<span class="op" id="1632833">==</span>&nbsp;<span class="num" id="1632836">1</span><span class="op" id="1632837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632841">return</span>&nbsp;<span class="ident" id="1632848">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632851">case</span>&nbsp;<span class="ident" id="1632856">y</span>&nbsp;<span class="op" id="1632858">==</span>&nbsp;<span class="num" id="1632861">0.5</span><span class="op" id="1632864">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632868">return</span>&nbsp;<span class="ident" id="1632875">Sqrt</span><span class="op" id="1632879">(</span><span class="ident" id="1632880">x</span><span class="op" id="1632881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632884">case</span>&nbsp;<span class="ident" id="1632889">y</span>&nbsp;<span class="op" id="1632891">==</span>&nbsp;<span class="op" id="1632894">-</span><span class="num" id="1632895">0.5</span><span class="op" id="1632898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632902">return</span>&nbsp;<span class="num" id="1632909">1</span>&nbsp;<span class="op" id="1632911">/</span>&nbsp;<span class="ident" id="1632913">Sqrt</span><span class="op" id="1632917">(</span><span class="ident" id="1632918">x</span><span class="op" id="1632919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632922">case</span>&nbsp;<span class="ident" id="1632927">IsNaN</span><span class="op" id="1632932">(</span><span class="ident" id="1632933">x</span><span class="op" id="1632934">)</span>&nbsp;<span class="op" id="1632936">||</span>&nbsp;<span class="ident" id="1632939">IsNaN</span><span class="op" id="1632944">(</span><span class="ident" id="1632945">y</span><span class="op" id="1632946">)</span><span class="op" id="1632947">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632951">return</span>&nbsp;<span class="ident" id="1632958">NaN</span><span class="op" id="1632961">(</span><span class="op" id="1632962">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632965">case</span>&nbsp;<span class="ident" id="1632970">x</span>&nbsp;<span class="op" id="1632972">==</span>&nbsp;<span class="num" id="1632975">0</span><span class="op" id="1632976">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632980">switch</span>&nbsp;<span class="op" id="1632987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1632991">case</span>&nbsp;<span class="ident" id="1632996">y</span>&nbsp;<span class="op" id="1632998">&lt;</span>&nbsp;<span class="num" id="1633000">0</span><span class="op" id="1633001">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633006">if</span>&nbsp;<span class="ident" id="1633009">isOddInt</span><span class="op" id="1633017">(</span><span class="ident" id="1633018">y</span><span class="op" id="1633019">)</span>&nbsp;<span class="op" id="1633021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633027">return</span>&nbsp;<span class="ident" id="1633034">Copysign</span><span class="op" id="1633042">(</span><span class="ident" id="1633043">Inf</span><span class="op" id="1633046">(</span><span class="num" id="1633047">1</span><span class="op" id="1633048">)</span><span class="op" id="1633049">,</span>&nbsp;<span class="ident" id="1633051">x</span><span class="op" id="1633052">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633062">return</span>&nbsp;<span class="ident" id="1633069">Inf</span><span class="op" id="1633072">(</span><span class="num" id="1633073">1</span><span class="op" id="1633074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633078">case</span>&nbsp;<span class="ident" id="1633083">y</span>&nbsp;<span class="op" id="1633085">&gt;</span>&nbsp;<span class="num" id="1633087">0</span><span class="op" id="1633088">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633093">if</span>&nbsp;<span class="ident" id="1633096">isOddInt</span><span class="op" id="1633104">(</span><span class="ident" id="1633105">y</span><span class="op" id="1633106">)</span>&nbsp;<span class="op" id="1633108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633114">return</span>&nbsp;<span class="ident" id="1633121">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633131">return</span>&nbsp;<span class="num" id="1633138">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633145">case</span>&nbsp;<span class="ident" id="1633150">IsInf</span><span class="op" id="1633155">(</span><span class="ident" id="1633156">y</span><span class="op" id="1633157">,</span>&nbsp;<span class="num" id="1633159">0</span><span class="op" id="1633160">)</span><span class="op" id="1633161">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633165">switch</span>&nbsp;<span class="op" id="1633172">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633176">case</span>&nbsp;<span class="ident" id="1633181">x</span>&nbsp;<span class="op" id="1633183">==</span>&nbsp;<span class="op" id="1633186">-</span><span class="num" id="1633187">1</span><span class="op" id="1633188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633193">return</span>&nbsp;<span class="num" id="1633200">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633204">case</span>&nbsp;<span class="op" id="1633209">(</span><span class="ident" id="1633210">Abs</span><span class="op" id="1633213">(</span><span class="ident" id="1633214">x</span><span class="op" id="1633215">)</span>&nbsp;<span class="op" id="1633217">&lt;</span>&nbsp;<span class="num" id="1633219">1</span><span class="op" id="1633220">)</span>&nbsp;<span class="op" id="1633222">==</span>&nbsp;<span class="ident" id="1633225">IsInf</span><span class="op" id="1633230">(</span><span class="ident" id="1633231">y</span><span class="op" id="1633232">,</span>&nbsp;<span class="num" id="1633234">1</span><span class="op" id="1633235">)</span><span class="op" id="1633236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633241">return</span>&nbsp;<span class="num" id="1633248">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633252">default</span><span class="op" id="1633259">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633264">return</span>&nbsp;<span class="ident" id="1633271">Inf</span><span class="op" id="1633274">(</span><span class="num" id="1633275">1</span><span class="op" id="1633276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633283">case</span>&nbsp;<span class="ident" id="1633288">IsInf</span><span class="op" id="1633293">(</span><span class="ident" id="1633294">x</span><span class="op" id="1633295">,</span>&nbsp;<span class="num" id="1633297">0</span><span class="op" id="1633298">)</span><span class="op" id="1633299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633303">if</span>&nbsp;<span class="ident" id="1633306">IsInf</span><span class="op" id="1633311">(</span><span class="ident" id="1633312">x</span><span class="op" id="1633313">,</span>&nbsp;<span class="op" id="1633315">-</span><span class="num" id="1633316">1</span><span class="op" id="1633317">)</span>&nbsp;<span class="op" id="1633319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633324">return</span>&nbsp;<span class="ident" id="1633331">Pow</span><span class="op" id="1633334">(</span><span class="num" id="1633335">1</span><span class="op" id="1633336">/</span><span class="ident" id="1633337">x</span><span class="op" id="1633338">,</span>&nbsp;<span class="op" id="1633340">-</span><span class="ident" id="1633341">y</span><span class="op" id="1633342">)</span>&nbsp;<span class="comment" id="1633344">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633365">switch</span>&nbsp;<span class="op" id="1633372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633376">case</span>&nbsp;<span class="ident" id="1633381">y</span>&nbsp;<span class="op" id="1633383">&lt;</span>&nbsp;<span class="num" id="1633385">0</span><span class="op" id="1633386">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633391">return</span>&nbsp;<span class="num" id="1633398">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633402">case</span>&nbsp;<span class="ident" id="1633407">y</span>&nbsp;<span class="op" id="1633409">&gt;</span>&nbsp;<span class="num" id="1633411">0</span><span class="op" id="1633412">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633417">return</span>&nbsp;<span class="ident" id="1633424">Inf</span><span class="op" id="1633427">(</span><span class="num" id="1633428">1</span><span class="op" id="1633429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633440">absy</span>&nbsp;<span class="op" id="1633445">:=</span>&nbsp;<span class="ident" id="1633448">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633451">flip</span>&nbsp;<span class="op" id="1633456">:=</span>&nbsp;<span class="builtintype" id="1633459">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633466">if</span>&nbsp;<span class="ident" id="1633469">absy</span>&nbsp;<span class="op" id="1633474">&lt;</span>&nbsp;<span class="num" id="1633476">0</span>&nbsp;<span class="op" id="1633478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633482">absy</span>&nbsp;<span class="op" id="1633487">=</span>&nbsp;<span class="op" id="1633489">-</span><span class="ident" id="1633490">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633497">flip</span>&nbsp;<span class="op" id="1633502">=</span>&nbsp;<span class="builtintype" id="1633504">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633510">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633513">yi</span><span class="op" id="1633515">,</span>&nbsp;<span class="ident" id="1633517">yf</span>&nbsp;<span class="op" id="1633520">:=</span>&nbsp;<span class="ident" id="1633523">Modf</span><span class="op" id="1633527">(</span><span class="ident" id="1633528">absy</span><span class="op" id="1633532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633535">if</span>&nbsp;<span class="ident" id="1633538">yf</span>&nbsp;<span class="op" id="1633541">!=</span>&nbsp;<span class="num" id="1633544">0</span>&nbsp;<span class="op" id="1633546">&amp;&amp;</span>&nbsp;<span class="ident" id="1633549">x</span>&nbsp;<span class="op" id="1633551">&lt;</span>&nbsp;<span class="num" id="1633553">0</span>&nbsp;<span class="op" id="1633555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633559">return</span>&nbsp;<span class="ident" id="1633566">NaN</span><span class="op" id="1633569">(</span><span class="op" id="1633570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633576">if</span>&nbsp;<span class="ident" id="1633579">yi</span>&nbsp;<span class="op" id="1633582">&gt;=</span>&nbsp;<span class="num" id="1633585">1</span><span class="op" id="1633586">&lt;&lt;</span><span class="num" id="1633588">63</span>&nbsp;<span class="op" id="1633591">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633595">return</span>&nbsp;<span class="ident" id="1633602">Exp</span><span class="op" id="1633605">(</span><span class="ident" id="1633606">y</span>&nbsp;<span class="op" id="1633608">*</span>&nbsp;<span class="ident" id="1633610">Log</span><span class="op" id="1633613">(</span><span class="ident" id="1633614">x</span><span class="op" id="1633615">)</span><span class="op" id="1633616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1633623">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633659">a1</span>&nbsp;<span class="op" id="1633662">:=</span>&nbsp;<span class="num" id="1633665">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633670">ae</span>&nbsp;<span class="op" id="1633673">:=</span>&nbsp;<span class="num" id="1633676">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1633680">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633697">if</span>&nbsp;<span class="ident" id="1633700">yf</span>&nbsp;<span class="op" id="1633703">!=</span>&nbsp;<span class="num" id="1633706">0</span>&nbsp;<span class="op" id="1633708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633712">if</span>&nbsp;<span class="ident" id="1633715">yf</span>&nbsp;<span class="op" id="1633718">&gt;</span>&nbsp;<span class="num" id="1633720">0.5</span>&nbsp;<span class="op" id="1633724">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633729">yf</span><span class="op" id="1633731">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633737">yi</span><span class="op" id="1633739">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633748">a1</span>&nbsp;<span class="op" id="1633751">=</span>&nbsp;<span class="ident" id="1633753">Exp</span><span class="op" id="1633756">(</span><span class="ident" id="1633757">yf</span>&nbsp;<span class="op" id="1633760">*</span>&nbsp;<span class="ident" id="1633762">Log</span><span class="op" id="1633765">(</span><span class="ident" id="1633766">x</span><span class="op" id="1633767">)</span><span class="op" id="1633768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1633771">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1633775">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1633792">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1633835">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1633869">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633908">x1</span><span class="op" id="1633910">,</span>&nbsp;<span class="ident" id="1633912">xe</span>&nbsp;<span class="op" id="1633915">:=</span>&nbsp;<span class="ident" id="1633918">Frexp</span><span class="op" id="1633923">(</span><span class="ident" id="1633924">x</span><span class="op" id="1633925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633928">for</span>&nbsp;<span class="ident" id="1633932">i</span>&nbsp;<span class="op" id="1633934">:=</span>&nbsp;<span class="ident" id="1633937">int64</span><span class="op" id="1633942">(</span><span class="ident" id="1633943">yi</span><span class="op" id="1633945">)</span><span class="op" id="1633946">;</span>&nbsp;<span class="ident" id="1633948">i</span>&nbsp;<span class="op" id="1633950">!=</span>&nbsp;<span class="num" id="1633953">0</span><span class="op" id="1633954">;</span>&nbsp;<span class="ident" id="1633956">i</span>&nbsp;<span class="op" id="1633958">&gt;&gt;=</span>&nbsp;<span class="num" id="1633962">1</span>&nbsp;<span class="op" id="1633964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1633968">if</span>&nbsp;<span class="ident" id="1633971">i</span><span class="op" id="1633972">&amp;</span><span class="num" id="1633973">1</span>&nbsp;<span class="op" id="1633975">==</span>&nbsp;<span class="num" id="1633978">1</span>&nbsp;<span class="op" id="1633980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633985">a1</span>&nbsp;<span class="op" id="1633988">*=</span>&nbsp;<span class="ident" id="1633991">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1633997">ae</span>&nbsp;<span class="op" id="1634000">+=</span>&nbsp;<span class="ident" id="1634003">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1634008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1634012">x1</span>&nbsp;<span class="op" id="1634015">*=</span>&nbsp;<span class="ident" id="1634018">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1634023">xe</span>&nbsp;<span class="op" id="1634026">&lt;&lt;=</span>&nbsp;<span class="num" id="1634030">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1634034">if</span>&nbsp;<span class="ident" id="1634037">x1</span>&nbsp;<span class="op" id="1634040">&lt;</span>&nbsp;<span class="num" id="1634042">.5</span>&nbsp;<span class="op" id="1634045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1634050">x1</span>&nbsp;<span class="op" id="1634053">+=</span>&nbsp;<span class="ident" id="1634056">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1634062">xe</span><span class="op" id="1634064">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1634069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1634072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1634076">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1634095">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1634125">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1634155">if</span>&nbsp;<span class="ident" id="1634158">flip</span>&nbsp;<span class="op" id="1634163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1634167">a1</span>&nbsp;<span class="op" id="1634170">=</span>&nbsp;<span class="num" id="1634172">1</span>&nbsp;<span class="op" id="1634174">/</span>&nbsp;<span class="ident" id="1634176">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1634181">ae</span>&nbsp;<span class="op" id="1634184">=</span>&nbsp;<span class="op" id="1634186">-</span><span class="ident" id="1634187">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1634191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1634194">return</span>&nbsp;<span class="ident" id="1634201">Ldexp</span><span class="op" id="1634206">(</span><span class="ident" id="1634207">a1</span><span class="op" id="1634209">,</span>&nbsp;<span class="ident" id="1634211">ae</span><span class="op" id="1634213">)</span><br>
<span class="lineno"></span><span class="op" id="1634215">}</span>
</div>
</body>
</html>
