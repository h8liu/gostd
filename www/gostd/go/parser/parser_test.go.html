<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html" class="current">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8196265">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8196320">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8196374">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8196425">package</span>&nbsp;<span class="ident" id="8196433">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8196441">import</span>&nbsp;<span class="op" id="8196448">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196451">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196460">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196467">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196477">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196489">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196495">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196506">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8196516">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8196519">var</span>&nbsp;<span class="ident" id="8196523">fset</span>&nbsp;<span class="op" id="8196528">=</span>&nbsp;<span class="ident" id="8196530"><a href="/gostd/go/parser/parser_test.go.html#8196477">token</a></span><span class="op" id="8196535">.</span><span class="ident" id="8196536"><a href="/gostd/go/token/position.go.html#3883646">NewFileSet</a></span><span class="op" id="8196546">(</span><span class="op" id="8196547">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8196550">var</span>&nbsp;<span class="ident" id="8196554">validFiles</span>&nbsp;<span class="op" id="8196565">=</span>&nbsp;<span class="op" id="8196567">[</span><span class="op" id="8196568">]</span><span class="builtintype" id="8196569">string</span><span class="op" id="8196575">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196578">&#34;parser.go&#34;</span><span class="op" id="8196589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196592">&#34;parser_test.go&#34;</span><span class="op" id="8196608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196611">&#34;error_test.go&#34;</span><span class="op" id="8196626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8196629">&#34;short_test.go&#34;</span><span class="op" id="8196644">,</span><br>
<span class="lineno"></span><span class="op" id="8196646">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8196649">func</span>&nbsp;<span class="ident" id="8196654">TestParse</span><span class="op" id="8196663">(</span><span class="ident" id="8196664">t</span>&nbsp;<span class="op" id="8196666">*</span><span class="ident" id="8196667"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8196674">.</span><span class="ident" id="8196675"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8196676">)</span>&nbsp;<span class="op" id="8196678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8196681">for</span>&nbsp;<span class="ident" id="8196685">_</span><span class="op" id="8196686">,</span>&nbsp;<span class="ident" id="8196688">filename</span>&nbsp;<span class="op" id="8196697">:=</span>&nbsp;<span class="keyword" id="8196700">range</span>&nbsp;<span class="ident" id="8196706"><a href="/gostd/go/parser/parser_test.go.html#8196554">validFiles</a></span>&nbsp;<span class="op" id="8196717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8196721">_</span><span class="op" id="8196722">,</span>&nbsp;<span class="ident" id="8196724">err</span>&nbsp;<span class="op" id="8196728">:=</span>&nbsp;<span class="ident" id="8196731"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="8196740">(</span><span class="ident" id="8196741"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8196745">,</span>&nbsp;<span class="ident" id="8196747"><a href="/gostd/go/parser/parser_test.go.html#8196688">filename</a></span><span class="op" id="8196755">,</span>&nbsp;<span class="builtintype" id="8196757">nil</span><span class="op" id="8196760">,</span>&nbsp;<span class="ident" id="8196762"><a href="/gostd/go/parser/interface.go.html#5951903">DeclarationErrors</a></span><span class="op" id="8196779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8196783">if</span>&nbsp;<span class="ident" id="8196786"><a href="/gostd/go/parser/parser_test.go.html#8196724">err</a></span>&nbsp;<span class="op" id="8196790">!=</span>&nbsp;<span class="builtintype" id="8196793">nil</span>&nbsp;<span class="op" id="8196797">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8196802"><a href="/gostd/go/parser/parser_test.go.html#8196664">t</a></span><span class="op" id="8196803">.</span><span class="ident" id="8196804"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="8196810">(</span><span class="string" id="8196811">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="8196830">,</span>&nbsp;<span class="ident" id="8196832"><a href="/gostd/go/parser/parser_test.go.html#8196688">filename</a></span><span class="op" id="8196840">,</span>&nbsp;<span class="ident" id="8196842"><a href="/gostd/go/parser/parser_test.go.html#8196724">err</a></span><span class="op" id="8196845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8196849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8196852">}</span><br>
<span class="lineno"></span><span class="op" id="8196854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8196857">func</span>&nbsp;<span class="ident" id="8196862">nameFilter</span><span class="op" id="8196872">(</span><span class="ident" id="8196873">filename</span>&nbsp;<span class="builtintype" id="8196882">string</span><span class="op" id="8196888">)</span>&nbsp;<span class="builtintype" id="8196890">bool</span>&nbsp;<span class="op" id="8196895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8196898">switch</span>&nbsp;<span class="ident" id="8196905"><a href="/gostd/go/parser/parser_test.go.html#8196873">filename</a></span>&nbsp;<span class="op" id="8196914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8196917">case</span>&nbsp;<span class="string" id="8196922">&#34;parser.go&#34;</span><span class="op" id="8196933">,</span>&nbsp;<span class="string" id="8196935">&#34;interface.go&#34;</span><span class="op" id="8196949">,</span>&nbsp;<span class="string" id="8196951">&#34;parser_test.go&#34;</span><span class="op" id="8196967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8196971">return</span>&nbsp;<span class="builtintype" id="8196978">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8196984">case</span>&nbsp;<span class="string" id="8196989">&#34;parser.go.orig&#34;</span><span class="op" id="8197005">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197009">return</span>&nbsp;<span class="builtintype" id="8197016">true</span>&nbsp;<span class="comment" id="8197021">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8197066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197069">return</span>&nbsp;<span class="builtintype" id="8197076">false</span><br>
<span class="lineno"></span><span class="op" id="8197082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8197085">func</span>&nbsp;<span class="ident" id="8197090">dirFilter</span><span class="op" id="8197099">(</span><span class="ident" id="8197100">f</span>&nbsp;<span class="ident" id="8197102"><a href="/gostd/go/parser/parser_test.go.html#8196489">os</a></span><span class="op" id="8197104">.</span><span class="ident" id="8197105"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="8197113">)</span>&nbsp;<span class="builtintype" id="8197115">bool</span>&nbsp;<span class="op" id="8197120">{</span>&nbsp;<span class="keyword" id="8197122">return</span>&nbsp;<span class="ident" id="8197129"><a href="/gostd/go/parser/parser_test.go.html#8196862">nameFilter</a></span><span class="op" id="8197139">(</span><span class="ident" id="8197140"><a href="/gostd/go/parser/parser_test.go.html#8197100">f</a></span><span class="op" id="8197141">.</span><span class="ident" id="8197142"><a href="/gostd/os/types.go.html#2472482">Name</a></span><span class="op" id="8197146">(</span><span class="op" id="8197147">)</span><span class="op" id="8197148">)</span>&nbsp;<span class="op" id="8197150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8197153">func</span>&nbsp;<span class="ident" id="8197158">TestParseDir</span><span class="op" id="8197170">(</span><span class="ident" id="8197171">t</span>&nbsp;<span class="op" id="8197173">*</span><span class="ident" id="8197174"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8197181">.</span><span class="ident" id="8197182"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8197183">)</span>&nbsp;<span class="op" id="8197185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197188">path</span>&nbsp;<span class="op" id="8197193">:=</span>&nbsp;<span class="string" id="8197196">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197201">pkgs</span><span class="op" id="8197205">,</span>&nbsp;<span class="ident" id="8197207">err</span>&nbsp;<span class="op" id="8197211">:=</span>&nbsp;<span class="ident" id="8197214"><a href="/gostd/go/parser/interface.go.html#5954536">ParseDir</a></span><span class="op" id="8197222">(</span><span class="ident" id="8197223"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8197227">,</span>&nbsp;<span class="ident" id="8197229"><a href="/gostd/go/parser/parser_test.go.html#8197188">path</a></span><span class="op" id="8197233">,</span>&nbsp;<span class="ident" id="8197235"><a href="/gostd/go/parser/parser_test.go.html#8197090">dirFilter</a></span><span class="op" id="8197244">,</span>&nbsp;<span class="num" id="8197246">0</span><span class="op" id="8197247">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197250">if</span>&nbsp;<span class="ident" id="8197253"><a href="/gostd/go/parser/parser_test.go.html#8197207">err</a></span>&nbsp;<span class="op" id="8197257">!=</span>&nbsp;<span class="builtintype" id="8197260">nil</span>&nbsp;<span class="op" id="8197264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197268"><a href="/gostd/go/parser/parser_test.go.html#8197171">t</a></span><span class="op" id="8197269">.</span><span class="ident" id="8197270"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="8197276">(</span><span class="string" id="8197277">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="8197295">,</span>&nbsp;<span class="ident" id="8197297"><a href="/gostd/go/parser/parser_test.go.html#8197188">path</a></span><span class="op" id="8197301">,</span>&nbsp;<span class="ident" id="8197303"><a href="/gostd/go/parser/parser_test.go.html#8197207">err</a></span><span class="op" id="8197306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8197309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197312">if</span>&nbsp;<span class="ident" id="8197315">n</span>&nbsp;<span class="op" id="8197317">:=</span>&nbsp;<span class="builtinfunc" id="8197320">len</span><span class="op" id="8197323">(</span><span class="ident" id="8197324"><a href="/gostd/go/parser/parser_test.go.html#8197201">pkgs</a></span><span class="op" id="8197328">)</span><span class="op" id="8197329">;</span>&nbsp;<span class="ident" id="8197331"><a href="/gostd/go/parser/parser_test.go.html#8197315">n</a></span>&nbsp;<span class="op" id="8197333">!=</span>&nbsp;<span class="num" id="8197336">1</span>&nbsp;<span class="op" id="8197338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197342"><a href="/gostd/go/parser/parser_test.go.html#8197171">t</a></span><span class="op" id="8197343">.</span><span class="ident" id="8197344"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8197350">(</span><span class="string" id="8197351">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="8197376">,</span>&nbsp;<span class="ident" id="8197378"><a href="/gostd/go/parser/parser_test.go.html#8197315">n</a></span><span class="op" id="8197379">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8197382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197385">pkg</span>&nbsp;<span class="op" id="8197389">:=</span>&nbsp;<span class="ident" id="8197392"><a href="/gostd/go/parser/parser_test.go.html#8197201">pkgs</a></span><span class="op" id="8197396">[</span><span class="string" id="8197397">&#34;parser&#34;</span><span class="op" id="8197405">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197408">if</span>&nbsp;<span class="ident" id="8197411"><a href="/gostd/go/parser/parser_test.go.html#8197385">pkg</a></span>&nbsp;<span class="op" id="8197415">==</span>&nbsp;<span class="builtintype" id="8197418">nil</span>&nbsp;<span class="op" id="8197422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197426"><a href="/gostd/go/parser/parser_test.go.html#8197171">t</a></span><span class="op" id="8197427">.</span><span class="ident" id="8197428"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8197434">(</span><span class="string" id="8197435">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="8197463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197467">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8197475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197478">if</span>&nbsp;<span class="ident" id="8197481">n</span>&nbsp;<span class="op" id="8197483">:=</span>&nbsp;<span class="builtinfunc" id="8197486">len</span><span class="op" id="8197489">(</span><span class="ident" id="8197490"><a href="/gostd/go/parser/parser_test.go.html#8197385">pkg</a></span><span class="op" id="8197493">.</span><span class="ident" id="8197494"><a href="/gostd/go/ast/ast.go.html#3824829">Files</a></span><span class="op" id="8197499">)</span><span class="op" id="8197500">;</span>&nbsp;<span class="ident" id="8197502"><a href="/gostd/go/parser/parser_test.go.html#8197481">n</a></span>&nbsp;<span class="op" id="8197504">!=</span>&nbsp;<span class="num" id="8197507">3</span>&nbsp;<span class="op" id="8197509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197513"><a href="/gostd/go/parser/parser_test.go.html#8197171">t</a></span><span class="op" id="8197514">.</span><span class="ident" id="8197515"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8197521">(</span><span class="string" id="8197522">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="8197552">,</span>&nbsp;<span class="ident" id="8197554"><a href="/gostd/go/parser/parser_test.go.html#8197481">n</a></span><span class="op" id="8197555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8197558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197561">for</span>&nbsp;<span class="ident" id="8197565">filename</span>&nbsp;<span class="op" id="8197574">:=</span>&nbsp;<span class="keyword" id="8197577">range</span>&nbsp;<span class="ident" id="8197583"><a href="/gostd/go/parser/parser_test.go.html#8197385">pkg</a></span><span class="op" id="8197586">.</span><span class="ident" id="8197587"><a href="/gostd/go/ast/ast.go.html#3824829">Files</a></span>&nbsp;<span class="op" id="8197593">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197597">if</span>&nbsp;<span class="op" id="8197600">!</span><span class="ident" id="8197601"><a href="/gostd/go/parser/parser_test.go.html#8196862">nameFilter</a></span><span class="op" id="8197611">(</span><span class="ident" id="8197612"><a href="/gostd/go/parser/parser_test.go.html#8197565">filename</a></span><span class="op" id="8197620">)</span>&nbsp;<span class="op" id="8197622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197627"><a href="/gostd/go/parser/parser_test.go.html#8197171">t</a></span><span class="op" id="8197628">.</span><span class="ident" id="8197629"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8197635">(</span><span class="string" id="8197636">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="8197665">,</span>&nbsp;<span class="ident" id="8197667"><a href="/gostd/go/parser/parser_test.go.html#8197565">filename</a></span><span class="op" id="8197675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8197679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8197682">}</span><br>
<span class="lineno"></span><span class="op" id="8197684">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="8197687">func</span>&nbsp;<span class="ident" id="8197692">TestParseExpr</span><span class="op" id="8197705">(</span><span class="ident" id="8197706">t</span>&nbsp;<span class="op" id="8197708">*</span><span class="ident" id="8197709"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8197716">.</span><span class="ident" id="8197717"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8197718">)</span>&nbsp;<span class="op" id="8197720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8197723">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8197751">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197785">src</span>&nbsp;<span class="op" id="8197789">:=</span>&nbsp;<span class="string" id="8197792">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197801">x</span><span class="op" id="8197802">,</span>&nbsp;<span class="ident" id="8197804">err</span>&nbsp;<span class="op" id="8197808">:=</span>&nbsp;<span class="ident" id="8197811"><a href="/gostd/go/parser/interface.go.html#5955570">ParseExpr</a></span><span class="op" id="8197820">(</span><span class="ident" id="8197821"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8197824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197827">if</span>&nbsp;<span class="ident" id="8197830"><a href="/gostd/go/parser/parser_test.go.html#8197804">err</a></span>&nbsp;<span class="op" id="8197834">!=</span>&nbsp;<span class="builtintype" id="8197837">nil</span>&nbsp;<span class="op" id="8197841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197845"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8197846">.</span><span class="ident" id="8197847"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8197853">(</span><span class="string" id="8197854">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8197873">,</span>&nbsp;<span class="ident" id="8197875"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8197878">,</span>&nbsp;<span class="ident" id="8197880"><a href="/gostd/go/parser/parser_test.go.html#8197804">err</a></span><span class="op" id="8197883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8197886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8197889">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8197906">if</span>&nbsp;<span class="ident" id="8197909">_</span><span class="op" id="8197910">,</span>&nbsp;<span class="ident" id="8197912">ok</span>&nbsp;<span class="op" id="8197915">:=</span>&nbsp;<span class="ident" id="8197918"><a href="/gostd/go/parser/parser_test.go.html#8197801">x</a></span><span class="op" id="8197919">.</span><span class="op" id="8197920">(</span><span class="op" id="8197921">*</span><span class="ident" id="8197922"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8197925">.</span><span class="ident" id="8197926"><a href="/gostd/go/ast/ast.go.html#3803544">BinaryExpr</a></span><span class="op" id="8197936">)</span><span class="op" id="8197937">;</span>&nbsp;<span class="op" id="8197939">!</span><span class="ident" id="8197940"><a href="/gostd/go/parser/parser_test.go.html#8197912">ok</a></span>&nbsp;<span class="op" id="8197943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8197947"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8197948">.</span><span class="ident" id="8197949"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8197955">(</span><span class="string" id="8197956">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="8198001">,</span>&nbsp;<span class="ident" id="8198003"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198006">,</span>&nbsp;<span class="ident" id="8198008"><a href="/gostd/go/parser/parser_test.go.html#8197801">x</a></span><span class="op" id="8198009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8198012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8198016">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198044"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span>&nbsp;<span class="op" id="8198048">=</span>&nbsp;<span class="string" id="8198050">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198068"><a href="/gostd/go/parser/parser_test.go.html#8197801">x</a></span><span class="op" id="8198069">,</span>&nbsp;<span class="ident" id="8198071"><a href="/gostd/go/parser/parser_test.go.html#8197804">err</a></span>&nbsp;<span class="op" id="8198075">=</span>&nbsp;<span class="ident" id="8198077"><a href="/gostd/go/parser/interface.go.html#5955570">ParseExpr</a></span><span class="op" id="8198086">(</span><span class="ident" id="8198087"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198093">if</span>&nbsp;<span class="ident" id="8198096"><a href="/gostd/go/parser/parser_test.go.html#8197804">err</a></span>&nbsp;<span class="op" id="8198100">!=</span>&nbsp;<span class="builtintype" id="8198103">nil</span>&nbsp;<span class="op" id="8198107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198111"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8198112">.</span><span class="ident" id="8198113"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8198119">(</span><span class="string" id="8198120">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8198139">,</span>&nbsp;<span class="ident" id="8198141"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198144">,</span>&nbsp;<span class="ident" id="8198146"><a href="/gostd/go/parser/parser_test.go.html#8197804">err</a></span><span class="op" id="8198149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8198152">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8198155">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198172">if</span>&nbsp;<span class="ident" id="8198175">_</span><span class="op" id="8198176">,</span>&nbsp;<span class="ident" id="8198178">ok</span>&nbsp;<span class="op" id="8198181">:=</span>&nbsp;<span class="ident" id="8198184"><a href="/gostd/go/parser/parser_test.go.html#8197801">x</a></span><span class="op" id="8198185">.</span><span class="op" id="8198186">(</span><span class="op" id="8198187">*</span><span class="ident" id="8198188"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8198191">.</span><span class="ident" id="8198192"><a href="/gostd/go/ast/ast.go.html#3804448">StructType</a></span><span class="op" id="8198202">)</span><span class="op" id="8198203">;</span>&nbsp;<span class="op" id="8198205">!</span><span class="ident" id="8198206"><a href="/gostd/go/parser/parser_test.go.html#8198178">ok</a></span>&nbsp;<span class="op" id="8198209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198213"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8198214">.</span><span class="ident" id="8198215"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8198221">(</span><span class="string" id="8198222">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="8198267">,</span>&nbsp;<span class="ident" id="8198269"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198272">,</span>&nbsp;<span class="ident" id="8198274"><a href="/gostd/go/parser/parser_test.go.html#8197801">x</a></span><span class="op" id="8198275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8198278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8198282">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198308"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span>&nbsp;<span class="op" id="8198312">=</span>&nbsp;<span class="string" id="8198314">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198323">if</span>&nbsp;<span class="ident" id="8198326">_</span><span class="op" id="8198327">,</span>&nbsp;<span class="ident" id="8198329">err</span>&nbsp;<span class="op" id="8198333">:=</span>&nbsp;<span class="ident" id="8198336"><a href="/gostd/go/parser/interface.go.html#5955570">ParseExpr</a></span><span class="op" id="8198345">(</span><span class="ident" id="8198346"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198349">)</span><span class="op" id="8198350">;</span>&nbsp;<span class="ident" id="8198352"><a href="/gostd/go/parser/parser_test.go.html#8198329">err</a></span>&nbsp;<span class="op" id="8198356">==</span>&nbsp;<span class="builtintype" id="8198359">nil</span>&nbsp;<span class="op" id="8198363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198367"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8198368">.</span><span class="ident" id="8198369"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8198375">(</span><span class="string" id="8198376">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8198405">,</span>&nbsp;<span class="ident" id="8198407"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8198413">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8198417">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198476"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span>&nbsp;<span class="op" id="8198480">=</span>&nbsp;<span class="string" id="8198482">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198495">if</span>&nbsp;<span class="ident" id="8198498">_</span><span class="op" id="8198499">,</span>&nbsp;<span class="ident" id="8198501">err</span>&nbsp;<span class="op" id="8198505">:=</span>&nbsp;<span class="ident" id="8198508"><a href="/gostd/go/parser/interface.go.html#5955570">ParseExpr</a></span><span class="op" id="8198517">(</span><span class="ident" id="8198518"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198521">)</span><span class="op" id="8198522">;</span>&nbsp;<span class="ident" id="8198524"><a href="/gostd/go/parser/parser_test.go.html#8198501">err</a></span>&nbsp;<span class="op" id="8198528">==</span>&nbsp;<span class="builtintype" id="8198531">nil</span>&nbsp;<span class="op" id="8198535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198539"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8198540">.</span><span class="ident" id="8198541"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8198547">(</span><span class="string" id="8198548">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8198577">,</span>&nbsp;<span class="ident" id="8198579"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198582">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8198585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8198589">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198652"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span>&nbsp;<span class="op" id="8198656">=</span>&nbsp;<span class="string" id="8198658">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198669">if</span>&nbsp;<span class="ident" id="8198672">_</span><span class="op" id="8198673">,</span>&nbsp;<span class="ident" id="8198675">err</span>&nbsp;<span class="op" id="8198679">:=</span>&nbsp;<span class="ident" id="8198682"><a href="/gostd/go/parser/interface.go.html#5955570">ParseExpr</a></span><span class="op" id="8198691">(</span><span class="ident" id="8198692"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198695">)</span><span class="op" id="8198696">;</span>&nbsp;<span class="ident" id="8198698"><a href="/gostd/go/parser/parser_test.go.html#8198675">err</a></span>&nbsp;<span class="op" id="8198702">!=</span>&nbsp;<span class="builtintype" id="8198705">nil</span>&nbsp;<span class="op" id="8198709">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198713"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8198714">.</span><span class="ident" id="8198715"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8198721">(</span><span class="string" id="8198722">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="8198751">,</span>&nbsp;<span class="ident" id="8198753"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198756">,</span>&nbsp;<span class="ident" id="8198758"><a href="/gostd/go/parser/parser_test.go.html#8198675">err</a></span><span class="op" id="8198761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8198764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198767"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span>&nbsp;<span class="op" id="8198771">=</span>&nbsp;<span class="string" id="8198773">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198783">if</span>&nbsp;<span class="ident" id="8198786">_</span><span class="op" id="8198787">,</span>&nbsp;<span class="ident" id="8198789">err</span>&nbsp;<span class="op" id="8198793">:=</span>&nbsp;<span class="ident" id="8198796"><a href="/gostd/go/parser/interface.go.html#5955570">ParseExpr</a></span><span class="op" id="8198805">(</span><span class="ident" id="8198806"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198809">)</span><span class="op" id="8198810">;</span>&nbsp;<span class="ident" id="8198812"><a href="/gostd/go/parser/parser_test.go.html#8198789">err</a></span>&nbsp;<span class="op" id="8198816">==</span>&nbsp;<span class="builtintype" id="8198819">nil</span>&nbsp;<span class="op" id="8198823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8198827"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8198828">.</span><span class="ident" id="8198829"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8198835">(</span><span class="string" id="8198836">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8198865">,</span>&nbsp;<span class="ident" id="8198867"><a href="/gostd/go/parser/parser_test.go.html#8197785">src</a></span><span class="op" id="8198870">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8198873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8198877">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198930">const</span>&nbsp;<span class="ident" id="8198936">validExpr</span>&nbsp;<span class="op" id="8198946">=</span>&nbsp;<span class="string" id="8198948">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198957">const</span>&nbsp;<span class="ident" id="8198963">anything</span>&nbsp;<span class="op" id="8198972">=</span>&nbsp;<span class="string" id="8198974">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8198987">for</span>&nbsp;<span class="ident" id="8198991">_</span><span class="op" id="8198992">,</span>&nbsp;<span class="ident" id="8198994">c</span>&nbsp;<span class="op" id="8198996">:=</span>&nbsp;<span class="keyword" id="8198999">range</span>&nbsp;<span class="string" id="8199005">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="8199014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199018">src</span>&nbsp;<span class="op" id="8199022">:=</span>&nbsp;<span class="ident" id="8199025"><a href="/gostd/go/parser/parser_test.go.html#8198936">validExpr</a></span>&nbsp;<span class="op" id="8199035">+</span>&nbsp;<span class="builtintype" id="8199037">string</span><span class="op" id="8199043">(</span><span class="ident" id="8199044"><a href="/gostd/go/parser/parser_test.go.html#8198994">c</a></span><span class="op" id="8199045">)</span>&nbsp;<span class="op" id="8199047">+</span>&nbsp;<span class="ident" id="8199049"><a href="/gostd/go/parser/parser_test.go.html#8198963">anything</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8199060">if</span>&nbsp;<span class="ident" id="8199063">_</span><span class="op" id="8199064">,</span>&nbsp;<span class="ident" id="8199066">err</span>&nbsp;<span class="op" id="8199070">:=</span>&nbsp;<span class="ident" id="8199073"><a href="/gostd/go/parser/interface.go.html#5955570">ParseExpr</a></span><span class="op" id="8199082">(</span><span class="ident" id="8199083"><a href="/gostd/go/parser/parser_test.go.html#8199018">src</a></span><span class="op" id="8199086">)</span><span class="op" id="8199087">;</span>&nbsp;<span class="ident" id="8199089"><a href="/gostd/go/parser/parser_test.go.html#8199066">err</a></span>&nbsp;<span class="op" id="8199093">==</span>&nbsp;<span class="builtintype" id="8199096">nil</span>&nbsp;<span class="op" id="8199100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199105"><a href="/gostd/go/parser/parser_test.go.html#8197706">t</a></span><span class="op" id="8199106">.</span><span class="ident" id="8199107"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8199113">(</span><span class="string" id="8199114">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8199143">,</span>&nbsp;<span class="ident" id="8199145"><a href="/gostd/go/parser/parser_test.go.html#8199018">src</a></span><span class="op" id="8199148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199152">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8199159">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8199188">for</span>&nbsp;<span class="ident" id="8199192">_</span><span class="op" id="8199193">,</span>&nbsp;<span class="ident" id="8199195">src</span>&nbsp;<span class="op" id="8199199">:=</span>&nbsp;<span class="keyword" id="8199202">range</span>&nbsp;<span class="ident" id="8199208"><a href="/gostd/go/parser/short_test.go.html#8207715">valids</a></span>&nbsp;<span class="op" id="8199215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199219"><a href="/gostd/go/parser/interface.go.html#5955570">ParseExpr</a></span><span class="op" id="8199228">(</span><span class="ident" id="8199229"><a href="/gostd/go/parser/parser_test.go.html#8199195">src</a></span><span class="op" id="8199232">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199235">}</span><br>
<span class="lineno"></span><span class="op" id="8199237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8199240">func</span>&nbsp;<span class="ident" id="8199245">TestColonEqualsScope</span><span class="op" id="8199265">(</span><span class="ident" id="8199266">t</span>&nbsp;<span class="op" id="8199268">*</span><span class="ident" id="8199269"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8199276">.</span><span class="ident" id="8199277"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8199278">)</span>&nbsp;<span class="op" id="8199280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199283">f</span><span class="op" id="8199284">,</span>&nbsp;<span class="ident" id="8199286">err</span>&nbsp;<span class="op" id="8199290">:=</span>&nbsp;<span class="ident" id="8199293"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="8199302">(</span><span class="ident" id="8199303"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8199307">,</span>&nbsp;<span class="string" id="8199309">&#34;&#34;</span><span class="op" id="8199311">,</span>&nbsp;<span class="string" id="8199313">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8199357">,</span>&nbsp;<span class="num" id="8199359">0</span><span class="op" id="8199360">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8199363">if</span>&nbsp;<span class="ident" id="8199366"><a href="/gostd/go/parser/parser_test.go.html#8199286">err</a></span>&nbsp;<span class="op" id="8199370">!=</span>&nbsp;<span class="builtintype" id="8199373">nil</span>&nbsp;<span class="op" id="8199377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199381"><a href="/gostd/go/parser/parser_test.go.html#8199266">t</a></span><span class="op" id="8199382">.</span><span class="ident" id="8199383"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8199388">(</span><span class="ident" id="8199389"><a href="/gostd/go/parser/parser_test.go.html#8199286">err</a></span><span class="op" id="8199392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8199399">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199450">as</span>&nbsp;<span class="op" id="8199453">:=</span>&nbsp;<span class="ident" id="8199456"><a href="/gostd/go/parser/parser_test.go.html#8199283">f</a></span><span class="op" id="8199457">.</span><span class="ident" id="8199458"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span><span class="op" id="8199463">[</span><span class="num" id="8199464">0</span><span class="op" id="8199465">]</span><span class="op" id="8199466">.</span><span class="op" id="8199467">(</span><span class="op" id="8199468">*</span><span class="ident" id="8199469"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8199472">.</span><span class="ident" id="8199473"><a href="/gostd/go/ast/ast.go.html#3822503">FuncDecl</a></span><span class="op" id="8199481">)</span><span class="op" id="8199482">.</span><span class="ident" id="8199483"><a href="/gostd/go/ast/ast.go.html#3822784">Body</a></span><span class="op" id="8199487">.</span><span class="ident" id="8199488"><a href="/gostd/go/ast/ast.go.html#3813020">List</a></span><span class="op" id="8199492">[</span><span class="num" id="8199493">0</span><span class="op" id="8199494">]</span><span class="op" id="8199495">.</span><span class="op" id="8199496">(</span><span class="op" id="8199497">*</span><span class="ident" id="8199498"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8199501">.</span><span class="ident" id="8199502"><a href="/gostd/go/ast/ast.go.html#3812033">AssignStmt</a></span><span class="op" id="8199512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8199515">for</span>&nbsp;<span class="ident" id="8199519">_</span><span class="op" id="8199520">,</span>&nbsp;<span class="ident" id="8199522">v</span>&nbsp;<span class="op" id="8199524">:=</span>&nbsp;<span class="keyword" id="8199527">range</span>&nbsp;<span class="ident" id="8199533"><a href="/gostd/go/parser/parser_test.go.html#8199450">as</a></span><span class="op" id="8199535">.</span><span class="ident" id="8199536"><a href="/gostd/go/ast/ast.go.html#3812160">Rhs</a></span>&nbsp;<span class="op" id="8199540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199544">id</span>&nbsp;<span class="op" id="8199547">:=</span>&nbsp;<span class="ident" id="8199550"><a href="/gostd/go/parser/parser_test.go.html#8199522">v</a></span><span class="op" id="8199551">.</span><span class="op" id="8199552">(</span><span class="op" id="8199553">*</span><span class="ident" id="8199554"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8199557">.</span><span class="ident" id="8199558"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="8199563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8199567">if</span>&nbsp;<span class="ident" id="8199570"><a href="/gostd/go/parser/parser_test.go.html#8199544">id</a></span><span class="op" id="8199572">.</span><span class="ident" id="8199573"><a href="/gostd/go/ast/ast.go.html#3800338">Obj</a></span>&nbsp;<span class="op" id="8199577">!=</span>&nbsp;<span class="builtintype" id="8199580">nil</span>&nbsp;<span class="op" id="8199584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199589"><a href="/gostd/go/parser/parser_test.go.html#8199266">t</a></span><span class="op" id="8199590">.</span><span class="ident" id="8199591"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8199597">(</span><span class="string" id="8199598">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8199626">,</span>&nbsp;<span class="ident" id="8199628"><a href="/gostd/go/parser/parser_test.go.html#8199544">id</a></span><span class="op" id="8199630">.</span><span class="ident" id="8199631"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8199635">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8199645">for</span>&nbsp;<span class="ident" id="8199649">_</span><span class="op" id="8199650">,</span>&nbsp;<span class="ident" id="8199652">v</span>&nbsp;<span class="op" id="8199654">:=</span>&nbsp;<span class="keyword" id="8199657">range</span>&nbsp;<span class="ident" id="8199663"><a href="/gostd/go/parser/parser_test.go.html#8199450">as</a></span><span class="op" id="8199665">.</span><span class="ident" id="8199666"><a href="/gostd/go/ast/ast.go.html#3812055">Lhs</a></span>&nbsp;<span class="op" id="8199670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199674">id</span>&nbsp;<span class="op" id="8199677">:=</span>&nbsp;<span class="ident" id="8199680"><a href="/gostd/go/parser/parser_test.go.html#8199652">v</a></span><span class="op" id="8199681">.</span><span class="op" id="8199682">(</span><span class="op" id="8199683">*</span><span class="ident" id="8199684"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8199687">.</span><span class="ident" id="8199688"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="8199693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8199697">if</span>&nbsp;<span class="ident" id="8199700"><a href="/gostd/go/parser/parser_test.go.html#8199674">id</a></span><span class="op" id="8199702">.</span><span class="ident" id="8199703"><a href="/gostd/go/ast/ast.go.html#3800338">Obj</a></span>&nbsp;<span class="op" id="8199707">==</span>&nbsp;<span class="builtintype" id="8199710">nil</span>&nbsp;<span class="op" id="8199714">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199719"><a href="/gostd/go/parser/parser_test.go.html#8199266">t</a></span><span class="op" id="8199720">.</span><span class="ident" id="8199721"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8199727">(</span><span class="string" id="8199728">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8199762">,</span>&nbsp;<span class="ident" id="8199764"><a href="/gostd/go/parser/parser_test.go.html#8199674">id</a></span><span class="op" id="8199766">.</span><span class="ident" id="8199767"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8199771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199778">}</span><br>
<span class="lineno"></span><span class="op" id="8199780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="8199783">func</span>&nbsp;<span class="ident" id="8199788">TestVarScope</span><span class="op" id="8199800">(</span><span class="ident" id="8199801">t</span>&nbsp;<span class="op" id="8199803">*</span><span class="ident" id="8199804"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8199811">.</span><span class="ident" id="8199812"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8199813">)</span>&nbsp;<span class="op" id="8199815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199818">f</span><span class="op" id="8199819">,</span>&nbsp;<span class="ident" id="8199821">err</span>&nbsp;<span class="op" id="8199825">:=</span>&nbsp;<span class="ident" id="8199828"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="8199837">(</span><span class="ident" id="8199838"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8199842">,</span>&nbsp;<span class="string" id="8199844">&#34;&#34;</span><span class="op" id="8199846">,</span>&nbsp;<span class="string" id="8199848">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8199895">,</span>&nbsp;<span class="num" id="8199897">0</span><span class="op" id="8199898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8199901">if</span>&nbsp;<span class="ident" id="8199904"><a href="/gostd/go/parser/parser_test.go.html#8199821">err</a></span>&nbsp;<span class="op" id="8199908">!=</span>&nbsp;<span class="builtintype" id="8199911">nil</span>&nbsp;<span class="op" id="8199915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199919"><a href="/gostd/go/parser/parser_test.go.html#8199801">t</a></span><span class="op" id="8199920">.</span><span class="ident" id="8199921"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8199926">(</span><span class="ident" id="8199927"><a href="/gostd/go/parser/parser_test.go.html#8199821">err</a></span><span class="op" id="8199930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8199933">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8199937">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8199988">as</span>&nbsp;<span class="op" id="8199991">:=</span>&nbsp;<span class="ident" id="8199994"><a href="/gostd/go/parser/parser_test.go.html#8199818">f</a></span><span class="op" id="8199995">.</span><span class="ident" id="8199996"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span><span class="op" id="8200001">[</span><span class="num" id="8200002">0</span><span class="op" id="8200003">]</span><span class="op" id="8200004">.</span><span class="op" id="8200005">(</span><span class="op" id="8200006">*</span><span class="ident" id="8200007"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200010">.</span><span class="ident" id="8200011"><a href="/gostd/go/ast/ast.go.html#3822503">FuncDecl</a></span><span class="op" id="8200019">)</span><span class="op" id="8200020">.</span><span class="ident" id="8200021"><a href="/gostd/go/ast/ast.go.html#3822784">Body</a></span><span class="op" id="8200025">.</span><span class="ident" id="8200026"><a href="/gostd/go/ast/ast.go.html#3813020">List</a></span><span class="op" id="8200030">[</span><span class="num" id="8200031">0</span><span class="op" id="8200032">]</span><span class="op" id="8200033">.</span><span class="op" id="8200034">(</span><span class="op" id="8200035">*</span><span class="ident" id="8200036"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200039">.</span><span class="ident" id="8200040"><a href="/gostd/go/ast/ast.go.html#3811031">DeclStmt</a></span><span class="op" id="8200048">)</span><span class="op" id="8200049">.</span><span class="ident" id="8200050"><a href="/gostd/go/ast/ast.go.html#3811051">Decl</a></span><span class="op" id="8200054">.</span><span class="op" id="8200055">(</span><span class="op" id="8200056">*</span><span class="ident" id="8200057"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200060">.</span><span class="ident" id="8200061"><a href="/gostd/go/ast/ast.go.html#3822162">GenDecl</a></span><span class="op" id="8200068">)</span><span class="op" id="8200069">.</span><span class="ident" id="8200070"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="8200075">[</span><span class="num" id="8200076">0</span><span class="op" id="8200077">]</span><span class="op" id="8200078">.</span><span class="op" id="8200079">(</span><span class="op" id="8200080">*</span><span class="ident" id="8200081"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200084">.</span><span class="ident" id="8200085"><a href="/gostd/go/ast/ast.go.html#3820033">ValueSpec</a></span><span class="op" id="8200094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200097">for</span>&nbsp;<span class="ident" id="8200101">_</span><span class="op" id="8200102">,</span>&nbsp;<span class="ident" id="8200104">v</span>&nbsp;<span class="op" id="8200106">:=</span>&nbsp;<span class="keyword" id="8200109">range</span>&nbsp;<span class="ident" id="8200115"><a href="/gostd/go/parser/parser_test.go.html#8199988">as</a></span><span class="op" id="8200117">.</span><span class="ident" id="8200118"><a href="/gostd/go/ast/ast.go.html#3820216">Values</a></span>&nbsp;<span class="op" id="8200125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200129">id</span>&nbsp;<span class="op" id="8200132">:=</span>&nbsp;<span class="ident" id="8200135"><a href="/gostd/go/parser/parser_test.go.html#8200104">v</a></span><span class="op" id="8200136">.</span><span class="op" id="8200137">(</span><span class="op" id="8200138">*</span><span class="ident" id="8200139"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200142">.</span><span class="ident" id="8200143"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="8200148">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200152">if</span>&nbsp;<span class="ident" id="8200155"><a href="/gostd/go/parser/parser_test.go.html#8200129">id</a></span><span class="op" id="8200157">.</span><span class="ident" id="8200158"><a href="/gostd/go/ast/ast.go.html#3800338">Obj</a></span>&nbsp;<span class="op" id="8200162">!=</span>&nbsp;<span class="builtintype" id="8200165">nil</span>&nbsp;<span class="op" id="8200169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200174"><a href="/gostd/go/parser/parser_test.go.html#8199801">t</a></span><span class="op" id="8200175">.</span><span class="ident" id="8200176"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8200182">(</span><span class="string" id="8200183">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8200211">,</span>&nbsp;<span class="ident" id="8200213"><a href="/gostd/go/parser/parser_test.go.html#8200129">id</a></span><span class="op" id="8200215">.</span><span class="ident" id="8200216"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8200220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8200224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8200227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200230">for</span>&nbsp;<span class="ident" id="8200234">_</span><span class="op" id="8200235">,</span>&nbsp;<span class="ident" id="8200237">id</span>&nbsp;<span class="op" id="8200240">:=</span>&nbsp;<span class="keyword" id="8200243">range</span>&nbsp;<span class="ident" id="8200249"><a href="/gostd/go/parser/parser_test.go.html#8199988">as</a></span><span class="op" id="8200251">.</span><span class="ident" id="8200252"><a href="/gostd/go/ast/ast.go.html#3820114">Names</a></span>&nbsp;<span class="op" id="8200258">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200262">if</span>&nbsp;<span class="ident" id="8200265"><a href="/gostd/go/parser/parser_test.go.html#8200237">id</a></span><span class="op" id="8200267">.</span><span class="ident" id="8200268"><a href="/gostd/go/ast/ast.go.html#3800338">Obj</a></span>&nbsp;<span class="op" id="8200272">==</span>&nbsp;<span class="builtintype" id="8200275">nil</span>&nbsp;<span class="op" id="8200279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200284"><a href="/gostd/go/parser/parser_test.go.html#8199801">t</a></span><span class="op" id="8200285">.</span><span class="ident" id="8200286"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8200292">(</span><span class="string" id="8200293">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8200327">,</span>&nbsp;<span class="ident" id="8200329"><a href="/gostd/go/parser/parser_test.go.html#8200237">id</a></span><span class="op" id="8200331">.</span><span class="ident" id="8200332"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8200336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8200340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8200343">}</span><br>
<span class="lineno"></span><span class="op" id="8200345">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="8200348">func</span>&nbsp;<span class="ident" id="8200353">TestObjects</span><span class="op" id="8200364">(</span><span class="ident" id="8200365">t</span>&nbsp;<span class="op" id="8200367">*</span><span class="ident" id="8200368"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8200375">.</span><span class="ident" id="8200376"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8200377">)</span>&nbsp;<span class="op" id="8200379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200382">const</span>&nbsp;<span class="ident" id="8200388">src</span>&nbsp;<span class="op" id="8200392">=</span>&nbsp;<span class="string" id="8200394">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200485">f</span><span class="op" id="8200486">,</span>&nbsp;<span class="ident" id="8200488">err</span>&nbsp;<span class="op" id="8200492">:=</span>&nbsp;<span class="ident" id="8200495"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="8200504">(</span><span class="ident" id="8200505"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8200509">,</span>&nbsp;<span class="string" id="8200511">&#34;&#34;</span><span class="op" id="8200513">,</span>&nbsp;<span class="ident" id="8200515"><a href="/gostd/go/parser/parser_test.go.html#8200388">src</a></span><span class="op" id="8200518">,</span>&nbsp;<span class="num" id="8200520">0</span><span class="op" id="8200521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200524">if</span>&nbsp;<span class="ident" id="8200527"><a href="/gostd/go/parser/parser_test.go.html#8200488">err</a></span>&nbsp;<span class="op" id="8200531">!=</span>&nbsp;<span class="builtintype" id="8200534">nil</span>&nbsp;<span class="op" id="8200538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200542"><a href="/gostd/go/parser/parser_test.go.html#8200365">t</a></span><span class="op" id="8200543">.</span><span class="ident" id="8200544"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8200549">(</span><span class="ident" id="8200550"><a href="/gostd/go/parser/parser_test.go.html#8200488">err</a></span><span class="op" id="8200553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8200556">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200560">objects</span>&nbsp;<span class="op" id="8200568">:=</span>&nbsp;<span class="keyword" id="8200571">map</span><span class="op" id="8200574">[</span><span class="builtintype" id="8200575">string</span><span class="op" id="8200581">]</span><span class="ident" id="8200582"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200585">.</span><span class="ident" id="8200586"><a href="/gostd/go/ast/scope.go.html#3866654">ObjKind</a></span><span class="op" id="8200593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8200597">&#34;p&#34;</span><span class="op" id="8200600">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8200604"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200607">.</span><span class="ident" id="8200608"><a href="/gostd/go/ast/scope.go.html#3866714">Bad</a></span><span class="op" id="8200611">,</span>&nbsp;<span class="comment" id="8200613">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8200633">&#34;fmt&#34;</span><span class="op" id="8200638">:</span>&nbsp;<span class="ident" id="8200640"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200643">.</span><span class="ident" id="8200644"><a href="/gostd/go/ast/scope.go.html#3866714">Bad</a></span><span class="op" id="8200647">,</span>&nbsp;<span class="comment" id="8200649">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8200671">&#34;pi&#34;</span><span class="op" id="8200675">:</span>&nbsp;&nbsp;<span class="ident" id="8200678"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200681">.</span><span class="ident" id="8200682"><a href="/gostd/go/ast/scope.go.html#3866787">Con</a></span><span class="op" id="8200685">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8200689">&#34;T&#34;</span><span class="op" id="8200692">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8200696"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200699">.</span><span class="ident" id="8200700"><a href="/gostd/go/ast/scope.go.html#3866819">Typ</a></span><span class="op" id="8200703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8200707">&#34;x&#34;</span><span class="op" id="8200710">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8200714"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200717">.</span><span class="ident" id="8200718"><a href="/gostd/go/ast/scope.go.html#3866847">Var</a></span><span class="op" id="8200721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8200725">&#34;int&#34;</span><span class="op" id="8200730">:</span>&nbsp;<span class="ident" id="8200732"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200735">.</span><span class="ident" id="8200736"><a href="/gostd/go/ast/scope.go.html#3866714">Bad</a></span><span class="op" id="8200739">,</span>&nbsp;<span class="comment" id="8200741">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8200763">&#34;f&#34;</span><span class="op" id="8200766">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8200770"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200773">.</span><span class="ident" id="8200774"><a href="/gostd/go/ast/scope.go.html#3866879">Fun</a></span><span class="op" id="8200777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8200781">&#34;L&#34;</span><span class="op" id="8200784">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8200788"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200791">.</span><span class="ident" id="8200792"><a href="/gostd/go/ast/scope.go.html#3866921">Lbl</a></span><span class="op" id="8200795">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8200798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200802"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200805">.</span><span class="ident" id="8200806"><a href="/gostd/go/ast/walk.go.html#3873431">Inspect</a></span><span class="op" id="8200813">(</span><span class="ident" id="8200814"><a href="/gostd/go/parser/parser_test.go.html#8200485">f</a></span><span class="op" id="8200815">,</span>&nbsp;<span class="keyword" id="8200817">func</span><span class="op" id="8200821">(</span><span class="ident" id="8200822">n</span>&nbsp;<span class="ident" id="8200824"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200827">.</span><span class="ident" id="8200828"><a href="/gostd/go/ast/ast.go.html#3795014">Node</a></span><span class="op" id="8200832">)</span>&nbsp;<span class="builtintype" id="8200834">bool</span>&nbsp;<span class="op" id="8200839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200843">if</span>&nbsp;<span class="ident" id="8200846">ident</span><span class="op" id="8200851">,</span>&nbsp;<span class="ident" id="8200853">ok</span>&nbsp;<span class="op" id="8200856">:=</span>&nbsp;<span class="ident" id="8200859"><a href="/gostd/go/parser/parser_test.go.html#8200822">n</a></span><span class="op" id="8200860">.</span><span class="op" id="8200861">(</span><span class="op" id="8200862">*</span><span class="ident" id="8200863"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200866">.</span><span class="ident" id="8200867"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="8200872">)</span><span class="op" id="8200873">;</span>&nbsp;<span class="ident" id="8200875"><a href="/gostd/go/parser/parser_test.go.html#8200853">ok</a></span>&nbsp;<span class="op" id="8200878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200883">obj</span>&nbsp;<span class="op" id="8200887">:=</span>&nbsp;<span class="ident" id="8200890"><a href="/gostd/go/parser/parser_test.go.html#8200846">ident</a></span><span class="op" id="8200895">.</span><span class="ident" id="8200896"><a href="/gostd/go/ast/ast.go.html#3800338">Obj</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200903">if</span>&nbsp;<span class="ident" id="8200906"><a href="/gostd/go/parser/parser_test.go.html#8200883">obj</a></span>&nbsp;<span class="op" id="8200910">==</span>&nbsp;<span class="builtintype" id="8200913">nil</span>&nbsp;<span class="op" id="8200917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8200923">if</span>&nbsp;<span class="ident" id="8200926"><a href="/gostd/go/parser/parser_test.go.html#8200560">objects</a></span><span class="op" id="8200933">[</span><span class="ident" id="8200934"><a href="/gostd/go/parser/parser_test.go.html#8200846">ident</a></span><span class="op" id="8200939">.</span><span class="ident" id="8200940"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8200944">]</span>&nbsp;<span class="op" id="8200946">!=</span>&nbsp;<span class="ident" id="8200949"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8200952">.</span><span class="ident" id="8200953"><a href="/gostd/go/ast/scope.go.html#3866714">Bad</a></span>&nbsp;<span class="op" id="8200957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8200964"><a href="/gostd/go/parser/parser_test.go.html#8200365">t</a></span><span class="op" id="8200965">.</span><span class="ident" id="8200966"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8200972">(</span><span class="string" id="8200973">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="8200991">,</span>&nbsp;<span class="ident" id="8200993"><a href="/gostd/go/parser/parser_test.go.html#8200846">ident</a></span><span class="op" id="8200998">.</span><span class="ident" id="8200999"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8201003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8201015">return</span>&nbsp;<span class="builtintype" id="8201022">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8201035">if</span>&nbsp;<span class="ident" id="8201038"><a href="/gostd/go/parser/parser_test.go.html#8200883">obj</a></span><span class="op" id="8201041">.</span><span class="ident" id="8201042"><a href="/gostd/go/ast/scope.go.html#3865173">Name</a></span>&nbsp;<span class="op" id="8201047">!=</span>&nbsp;<span class="ident" id="8201050"><a href="/gostd/go/parser/parser_test.go.html#8200846">ident</a></span><span class="op" id="8201055">.</span><span class="ident" id="8201056"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span>&nbsp;<span class="op" id="8201061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8201067"><a href="/gostd/go/parser/parser_test.go.html#8200365">t</a></span><span class="op" id="8201068">.</span><span class="ident" id="8201069"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8201075">(</span><span class="string" id="8201076">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8201127">,</span>&nbsp;<span class="ident" id="8201129"><a href="/gostd/go/parser/parser_test.go.html#8200883">obj</a></span><span class="op" id="8201132">.</span><span class="ident" id="8201133"><a href="/gostd/go/ast/scope.go.html#3865173">Name</a></span><span class="op" id="8201137">,</span>&nbsp;<span class="ident" id="8201139"><a href="/gostd/go/parser/parser_test.go.html#8200846">ident</a></span><span class="op" id="8201144">.</span><span class="ident" id="8201145"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8201149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8201159">kind</span>&nbsp;<span class="op" id="8201164">:=</span>&nbsp;<span class="ident" id="8201167"><a href="/gostd/go/parser/parser_test.go.html#8200560">objects</a></span><span class="op" id="8201174">[</span><span class="ident" id="8201175"><a href="/gostd/go/parser/parser_test.go.html#8200846">ident</a></span><span class="op" id="8201180">.</span><span class="ident" id="8201181"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8201185">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8201190">if</span>&nbsp;<span class="ident" id="8201193"><a href="/gostd/go/parser/parser_test.go.html#8200883">obj</a></span><span class="op" id="8201196">.</span><span class="ident" id="8201197"><a href="/gostd/go/ast/scope.go.html#3865159">Kind</a></span>&nbsp;<span class="op" id="8201202">!=</span>&nbsp;<span class="ident" id="8201205"><a href="/gostd/go/parser/parser_test.go.html#8201159">kind</a></span>&nbsp;<span class="op" id="8201210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8201216"><a href="/gostd/go/parser/parser_test.go.html#8200365">t</a></span><span class="op" id="8201217">.</span><span class="ident" id="8201218"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8201224">(</span><span class="string" id="8201225">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8201253">,</span>&nbsp;<span class="ident" id="8201255"><a href="/gostd/go/parser/parser_test.go.html#8200846">ident</a></span><span class="op" id="8201260">.</span><span class="ident" id="8201261"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8201265">,</span>&nbsp;<span class="ident" id="8201267"><a href="/gostd/go/parser/parser_test.go.html#8200883">obj</a></span><span class="op" id="8201270">.</span><span class="ident" id="8201271"><a href="/gostd/go/ast/scope.go.html#3865159">Kind</a></span><span class="op" id="8201275">,</span>&nbsp;<span class="ident" id="8201277"><a href="/gostd/go/parser/parser_test.go.html#8201159">kind</a></span><span class="op" id="8201281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8201294">return</span>&nbsp;<span class="builtintype" id="8201301">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201307">}</span><span class="op" id="8201308">)</span><br>
<span class="lineno"></span><span class="op" id="8201310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8201313">func</span>&nbsp;<span class="ident" id="8201318">TestUnresolved</span><span class="op" id="8201332">(</span><span class="ident" id="8201333">t</span>&nbsp;<span class="op" id="8201335">*</span><span class="ident" id="8201336"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8201343">.</span><span class="ident" id="8201344"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8201345">)</span>&nbsp;<span class="op" id="8201347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8201350">f</span><span class="op" id="8201351">,</span>&nbsp;<span class="ident" id="8201353">err</span>&nbsp;<span class="op" id="8201357">:=</span>&nbsp;<span class="ident" id="8201360"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="8201369">(</span><span class="ident" id="8201370"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8201374">,</span>&nbsp;<span class="string" id="8201376">&#34;&#34;</span><span class="op" id="8201378">,</span>&nbsp;<span class="string" id="8201380">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="8201858">,</span>&nbsp;<span class="num" id="8201860">0</span><span class="op" id="8201861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8201864">if</span>&nbsp;<span class="ident" id="8201867"><a href="/gostd/go/parser/parser_test.go.html#8201353">err</a></span>&nbsp;<span class="op" id="8201871">!=</span>&nbsp;<span class="builtintype" id="8201874">nil</span>&nbsp;<span class="op" id="8201878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8201882"><a href="/gostd/go/parser/parser_test.go.html#8201333">t</a></span><span class="op" id="8201883">.</span><span class="ident" id="8201884"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8201889">(</span><span class="ident" id="8201890"><a href="/gostd/go/parser/parser_test.go.html#8201353">err</a></span><span class="op" id="8201893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201896">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8201900">want</span>&nbsp;<span class="op" id="8201905">:=</span>&nbsp;<span class="string" id="8201908">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8201915">+</span>&nbsp;<span class="comment" id="8201917">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8201926">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8201944">+</span>&nbsp;<span class="comment" id="8201946">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8201955">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8201968">+</span>&nbsp;<span class="comment" id="8201970">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8201979">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8201990">+</span>&nbsp;<span class="comment" id="8201992">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202001">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8202012">+</span>&nbsp;<span class="comment" id="8202014">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202023">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202028">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8202035">+</span>&nbsp;<span class="comment" id="8202037">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202046">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8202064">+</span>&nbsp;<span class="comment" id="8202066">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202075">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8202088">+</span>&nbsp;<span class="comment" id="8202090">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202099">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8202110">+</span>&nbsp;<span class="comment" id="8202112">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202121">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8202132">+</span>&nbsp;<span class="comment" id="8202134">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202143">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202148">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8202155">+</span>&nbsp;<span class="comment" id="8202157">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202166">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8202178">+</span>&nbsp;<span class="comment" id="8202180">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202189">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8202202">+</span>&nbsp;<span class="comment" id="8202204">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202213">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202218">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8202225">+</span>&nbsp;<span class="comment" id="8202227">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202236">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8202254">+</span>&nbsp;<span class="comment" id="8202256">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202265">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="8202274">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202283">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8202318">var</span>&nbsp;<span class="ident" id="8202322">buf</span>&nbsp;<span class="ident" id="8202326"><a href="/gostd/go/parser/parser_test.go.html#8196451">bytes</a></span><span class="op" id="8202331">.</span><span class="ident" id="8202332"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8202340">for</span>&nbsp;<span class="ident" id="8202344">_</span><span class="op" id="8202345">,</span>&nbsp;<span class="ident" id="8202347">u</span>&nbsp;<span class="op" id="8202349">:=</span>&nbsp;<span class="keyword" id="8202352">range</span>&nbsp;<span class="ident" id="8202358"><a href="/gostd/go/parser/parser_test.go.html#8201350">f</a></span><span class="op" id="8202359">.</span><span class="ident" id="8202360"><a href="/gostd/go/ast/ast.go.html#3824229">Unresolved</a></span>&nbsp;<span class="op" id="8202371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8202375"><a href="/gostd/go/parser/parser_test.go.html#8202322">buf</a></span><span class="op" id="8202378">.</span><span class="ident" id="8202379"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="8202390">(</span><span class="ident" id="8202391"><a href="/gostd/go/parser/parser_test.go.html#8202347">u</a></span><span class="op" id="8202392">.</span><span class="ident" id="8202393"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="8202397">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8202401"><a href="/gostd/go/parser/parser_test.go.html#8202322">buf</a></span><span class="op" id="8202404">.</span><span class="ident" id="8202405"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="8202414">(</span><span class="string" id="8202415">&#39;&nbsp;&#39;</span><span class="op" id="8202418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8202421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8202424">got</span>&nbsp;<span class="op" id="8202428">:=</span>&nbsp;<span class="ident" id="8202431"><a href="/gostd/go/parser/parser_test.go.html#8202322">buf</a></span><span class="op" id="8202434">.</span><span class="ident" id="8202435"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="8202441">(</span><span class="op" id="8202442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8202446">if</span>&nbsp;<span class="ident" id="8202449"><a href="/gostd/go/parser/parser_test.go.html#8202424">got</a></span>&nbsp;<span class="op" id="8202453">!=</span>&nbsp;<span class="ident" id="8202456"><a href="/gostd/go/parser/parser_test.go.html#8201900">want</a></span>&nbsp;<span class="op" id="8202461">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8202465"><a href="/gostd/go/parser/parser_test.go.html#8201333">t</a></span><span class="op" id="8202466">.</span><span class="ident" id="8202467"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8202473">(</span><span class="string" id="8202474">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="8202496">,</span>&nbsp;<span class="ident" id="8202498"><a href="/gostd/go/parser/parser_test.go.html#8202424">got</a></span><span class="op" id="8202501">,</span>&nbsp;<span class="ident" id="8202503"><a href="/gostd/go/parser/parser_test.go.html#8201900">want</a></span><span class="op" id="8202507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8202510">}</span><br>
<span class="lineno"></span><span class="op" id="8202512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8202515">var</span>&nbsp;<span class="ident" id="8202519">imports</span>&nbsp;<span class="op" id="8202527">=</span>&nbsp;<span class="keyword" id="8202529">map</span><span class="op" id="8202532">[</span><span class="builtintype" id="8202533">string</span><span class="op" id="8202539">]</span><span class="builtintype" id="8202540">bool</span><span class="op" id="8202544">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202547">`&#34;a&#34;`</span><span class="op" id="8202552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202561">true</span><span class="op" id="8202565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202568">&#34;`a`&#34;</span><span class="op" id="8202573">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202582">true</span><span class="op" id="8202586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202589">`&#34;a/b&#34;`</span><span class="op" id="8202596">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202603">true</span><span class="op" id="8202607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202610">`&#34;a.b&#34;`</span><span class="op" id="8202617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202624">true</span><span class="op" id="8202628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202631">`&#34;m\x61th&#34;`</span><span class="op" id="8202642">:</span>&nbsp;&nbsp;<span class="builtintype" id="8202645">true</span><span class="op" id="8202649">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202652">`&#34;greek/αβ&#34;`</span><span class="op" id="8202666">:</span>&nbsp;<span class="builtintype" id="8202668">true</span><span class="op" id="8202672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202675">`&#34;&#34;`</span><span class="op" id="8202679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202689">false</span><span class="op" id="8202694">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202698">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202750">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202804">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202847">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8202892">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202945">`&#34;\x00&#34;`</span><span class="op" id="8202953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202959">false</span><span class="op" id="8202964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202967">&#34;`\x00`&#34;</span><span class="op" id="8202975">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202981">false</span><span class="op" id="8202986">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202989">`&#34;\x7f&#34;`</span><span class="op" id="8202997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203003">false</span><span class="op" id="8203008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203011">&#34;`\x7f`&#34;</span><span class="op" id="8203019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203025">false</span><span class="op" id="8203030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203033">`&#34;a!&#34;`</span><span class="op" id="8203039">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203047">false</span><span class="op" id="8203052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203055">&#34;`a!`&#34;</span><span class="op" id="8203061">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203069">false</span><span class="op" id="8203074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203077">`&#34;a&nbsp;b&#34;`</span><span class="op" id="8203084">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203091">false</span><span class="op" id="8203096">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203099">&#34;`a&nbsp;b`&#34;</span><span class="op" id="8203106">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203113">false</span><span class="op" id="8203118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203121">`&#34;a\\b&#34;`</span><span class="op" id="8203129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203135">false</span><span class="op" id="8203140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203143">&#34;`a\\b`&#34;</span><span class="op" id="8203151">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203157">false</span><span class="op" id="8203162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203165">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="8203174">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203179">false</span><span class="op" id="8203184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203187">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="8203196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203201">false</span><span class="op" id="8203206">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203209">`&#34;\x80\x80&#34;`</span><span class="op" id="8203221">:</span>&nbsp;<span class="builtintype" id="8203223">false</span><span class="op" id="8203228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203231">&#34;`\x80\x80`&#34;</span><span class="op" id="8203243">:</span>&nbsp;<span class="builtintype" id="8203245">false</span><span class="op" id="8203250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203253">`&#34;\xFFFD&#34;`</span><span class="op" id="8203263">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203267">false</span><span class="op" id="8203272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203275">&#34;`\xFFFD`&#34;</span><span class="op" id="8203285">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203289">false</span><span class="op" id="8203294">,</span><br>
<span class="lineno"></span><span class="op" id="8203296">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="8203299">func</span>&nbsp;<span class="ident" id="8203304">TestImports</span><span class="op" id="8203315">(</span><span class="ident" id="8203316">t</span>&nbsp;<span class="op" id="8203318">*</span><span class="ident" id="8203319"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8203326">.</span><span class="ident" id="8203327"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8203328">)</span>&nbsp;<span class="op" id="8203330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8203333">for</span>&nbsp;<span class="ident" id="8203337">path</span><span class="op" id="8203341">,</span>&nbsp;<span class="ident" id="8203343">isValid</span>&nbsp;<span class="op" id="8203351">:=</span>&nbsp;<span class="keyword" id="8203354">range</span>&nbsp;<span class="ident" id="8203360"><a href="/gostd/go/parser/parser_test.go.html#8202519">imports</a></span>&nbsp;<span class="op" id="8203368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8203372">src</span>&nbsp;<span class="op" id="8203376">:=</span>&nbsp;<span class="ident" id="8203379"><a href="/gostd/go/parser/parser_test.go.html#8196460">fmt</a></span><span class="op" id="8203382">.</span><span class="ident" id="8203383"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="8203390">(</span><span class="string" id="8203391">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="8203413">,</span>&nbsp;<span class="ident" id="8203415"><a href="/gostd/go/parser/parser_test.go.html#8203337">path</a></span><span class="op" id="8203419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8203423">_</span><span class="op" id="8203424">,</span>&nbsp;<span class="ident" id="8203426">err</span>&nbsp;<span class="op" id="8203430">:=</span>&nbsp;<span class="ident" id="8203433"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="8203442">(</span><span class="ident" id="8203443"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8203447">,</span>&nbsp;<span class="string" id="8203449">&#34;&#34;</span><span class="op" id="8203451">,</span>&nbsp;<span class="ident" id="8203453"><a href="/gostd/go/parser/parser_test.go.html#8203372">src</a></span><span class="op" id="8203456">,</span>&nbsp;<span class="num" id="8203458">0</span><span class="op" id="8203459">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8203463">switch</span>&nbsp;<span class="op" id="8203470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8203474">case</span>&nbsp;<span class="ident" id="8203479"><a href="/gostd/go/parser/parser_test.go.html#8203426">err</a></span>&nbsp;<span class="op" id="8203483">!=</span>&nbsp;<span class="builtintype" id="8203486">nil</span>&nbsp;<span class="op" id="8203490">&amp;&amp;</span>&nbsp;<span class="ident" id="8203493"><a href="/gostd/go/parser/parser_test.go.html#8203343">isValid</a></span><span class="op" id="8203500">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8203505"><a href="/gostd/go/parser/parser_test.go.html#8203316">t</a></span><span class="op" id="8203506">.</span><span class="ident" id="8203507"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8203513">(</span><span class="string" id="8203514">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="8203556">,</span>&nbsp;<span class="ident" id="8203558"><a href="/gostd/go/parser/parser_test.go.html#8203372">src</a></span><span class="op" id="8203561">,</span>&nbsp;<span class="ident" id="8203563"><a href="/gostd/go/parser/parser_test.go.html#8203426">err</a></span><span class="op" id="8203566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8203570">case</span>&nbsp;<span class="ident" id="8203575"><a href="/gostd/go/parser/parser_test.go.html#8203426">err</a></span>&nbsp;<span class="op" id="8203579">==</span>&nbsp;<span class="builtintype" id="8203582">nil</span>&nbsp;<span class="op" id="8203586">&amp;&amp;</span>&nbsp;<span class="op" id="8203589">!</span><span class="ident" id="8203590"><a href="/gostd/go/parser/parser_test.go.html#8203343">isValid</a></span><span class="op" id="8203597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8203602"><a href="/gostd/go/parser/parser_test.go.html#8203316">t</a></span><span class="op" id="8203603">.</span><span class="ident" id="8203604"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8203610">(</span><span class="string" id="8203611">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="8203654">,</span>&nbsp;<span class="ident" id="8203656"><a href="/gostd/go/parser/parser_test.go.html#8203372">src</a></span><span class="op" id="8203659">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8203663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8203666">}</span><br>
<span class="lineno"></span><span class="op" id="8203668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8203671">func</span>&nbsp;<span class="ident" id="8203676">TestCommentGroups</span><span class="op" id="8203693">(</span><span class="ident" id="8203694">t</span>&nbsp;<span class="op" id="8203696">*</span><span class="ident" id="8203697"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8203704">.</span><span class="ident" id="8203705"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8203706">)</span>&nbsp;<span class="op" id="8203708">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8203711">f</span><span class="op" id="8203712">,</span>&nbsp;<span class="ident" id="8203714">err</span>&nbsp;<span class="op" id="8203718">:=</span>&nbsp;<span class="ident" id="8203721"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="8203730">(</span><span class="ident" id="8203731"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8203735">,</span>&nbsp;<span class="string" id="8203737">&#34;&#34;</span><span class="op" id="8203739">,</span>&nbsp;<span class="string" id="8203741">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8204053">,</span>&nbsp;<span class="ident" id="8204055"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="8204068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204071">if</span>&nbsp;<span class="ident" id="8204074"><a href="/gostd/go/parser/parser_test.go.html#8203714">err</a></span>&nbsp;<span class="op" id="8204078">!=</span>&nbsp;<span class="builtintype" id="8204081">nil</span>&nbsp;<span class="op" id="8204085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204089"><a href="/gostd/go/parser/parser_test.go.html#8203694">t</a></span><span class="op" id="8204090">.</span><span class="ident" id="8204091"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8204096">(</span><span class="ident" id="8204097"><a href="/gostd/go/parser/parser_test.go.html#8203714">err</a></span><span class="op" id="8204100">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204106">expected</span>&nbsp;<span class="op" id="8204115">:=</span>&nbsp;<span class="op" id="8204118">[</span><span class="op" id="8204119">]</span><span class="op" id="8204120">[</span><span class="op" id="8204121">]</span><span class="builtintype" id="8204122">string</span><span class="op" id="8204128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204132">{</span><span class="string" id="8204133">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="8204143">,</span>&nbsp;<span class="string" id="8204145">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="8204155">,</span>&nbsp;<span class="string" id="8204157">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="8204167">,</span>&nbsp;<span class="string" id="8204169">&#34;//&nbsp;1d&#34;</span><span class="op" id="8204176">}</span><span class="op" id="8204177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204181">{</span><span class="string" id="8204182">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="8204193">,</span>&nbsp;<span class="string" id="8204195">&#34;//&nbsp;2b&#34;</span><span class="op" id="8204202">}</span><span class="op" id="8204203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204207">{</span><span class="string" id="8204208">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="8204218">,</span>&nbsp;<span class="string" id="8204220">&#34;//&nbsp;3b&#34;</span><span class="op" id="8204227">,</span>&nbsp;<span class="string" id="8204229">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="8204239">}</span><span class="op" id="8204240">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204244">{</span><span class="string" id="8204245">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="8204273">}</span><span class="op" id="8204274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204278">{</span><span class="string" id="8204279">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="8204308">}</span><span class="op" id="8204309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204313">{</span><span class="string" id="8204314">&#34;//&nbsp;Output:&#34;</span><span class="op" id="8204326">,</span>&nbsp;<span class="string" id="8204328">&#34;//&nbsp;3&#34;</span><span class="op" id="8204334">,</span>&nbsp;<span class="string" id="8204336">&#34;//&nbsp;5&#34;</span><span class="op" id="8204342">}</span><span class="op" id="8204343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204349">if</span>&nbsp;<span class="builtinfunc" id="8204352">len</span><span class="op" id="8204355">(</span><span class="ident" id="8204356"><a href="/gostd/go/parser/parser_test.go.html#8203711">f</a></span><span class="op" id="8204357">.</span><span class="ident" id="8204358"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><span class="op" id="8204366">)</span>&nbsp;<span class="op" id="8204368">!=</span>&nbsp;<span class="builtinfunc" id="8204371">len</span><span class="op" id="8204374">(</span><span class="ident" id="8204375"><a href="/gostd/go/parser/parser_test.go.html#8204106">expected</a></span><span class="op" id="8204383">)</span>&nbsp;<span class="op" id="8204385">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204389"><a href="/gostd/go/parser/parser_test.go.html#8203694">t</a></span><span class="op" id="8204390">.</span><span class="ident" id="8204391"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="8204397">(</span><span class="string" id="8204398">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8204434">,</span>&nbsp;<span class="builtinfunc" id="8204436">len</span><span class="op" id="8204439">(</span><span class="ident" id="8204440"><a href="/gostd/go/parser/parser_test.go.html#8203711">f</a></span><span class="op" id="8204441">.</span><span class="ident" id="8204442"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><span class="op" id="8204450">)</span><span class="op" id="8204451">,</span>&nbsp;<span class="builtinfunc" id="8204453">len</span><span class="op" id="8204456">(</span><span class="ident" id="8204457"><a href="/gostd/go/parser/parser_test.go.html#8204106">expected</a></span><span class="op" id="8204465">)</span><span class="op" id="8204466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204472">for</span>&nbsp;<span class="ident" id="8204476">i</span><span class="op" id="8204477">,</span>&nbsp;<span class="ident" id="8204479">exp</span>&nbsp;<span class="op" id="8204483">:=</span>&nbsp;<span class="keyword" id="8204486">range</span>&nbsp;<span class="ident" id="8204492"><a href="/gostd/go/parser/parser_test.go.html#8204106">expected</a></span>&nbsp;<span class="op" id="8204501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204505">got</span>&nbsp;<span class="op" id="8204509">:=</span>&nbsp;<span class="ident" id="8204512"><a href="/gostd/go/parser/parser_test.go.html#8203711">f</a></span><span class="op" id="8204513">.</span><span class="ident" id="8204514"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><span class="op" id="8204522">[</span><span class="ident" id="8204523"><a href="/gostd/go/parser/parser_test.go.html#8204476">i</a></span><span class="op" id="8204524">]</span><span class="op" id="8204525">.</span><span class="ident" id="8204526"><a href="/gostd/go/ast/ast.go.html#3796057">List</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204533">if</span>&nbsp;<span class="builtinfunc" id="8204536">len</span><span class="op" id="8204539">(</span><span class="ident" id="8204540"><a href="/gostd/go/parser/parser_test.go.html#8204505">got</a></span><span class="op" id="8204543">)</span>&nbsp;<span class="op" id="8204545">!=</span>&nbsp;<span class="builtinfunc" id="8204548">len</span><span class="op" id="8204551">(</span><span class="ident" id="8204552"><a href="/gostd/go/parser/parser_test.go.html#8204479">exp</a></span><span class="op" id="8204555">)</span>&nbsp;<span class="op" id="8204557">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204562"><a href="/gostd/go/parser/parser_test.go.html#8203694">t</a></span><span class="op" id="8204563">.</span><span class="ident" id="8204564"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8204570">(</span><span class="string" id="8204571">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8204613">,</span>&nbsp;<span class="builtinfunc" id="8204615">len</span><span class="op" id="8204618">(</span><span class="ident" id="8204619"><a href="/gostd/go/parser/parser_test.go.html#8204505">got</a></span><span class="op" id="8204622">)</span><span class="op" id="8204623">,</span>&nbsp;<span class="ident" id="8204625"><a href="/gostd/go/parser/parser_test.go.html#8204476">i</a></span><span class="op" id="8204626">,</span>&nbsp;<span class="builtinfunc" id="8204628">len</span><span class="op" id="8204631">(</span><span class="ident" id="8204632"><a href="/gostd/go/parser/parser_test.go.html#8204479">exp</a></span><span class="op" id="8204635">)</span><span class="op" id="8204636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204641">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204656">for</span>&nbsp;<span class="ident" id="8204660">j</span><span class="op" id="8204661">,</span>&nbsp;<span class="ident" id="8204663">exp</span>&nbsp;<span class="op" id="8204667">:=</span>&nbsp;<span class="keyword" id="8204670">range</span>&nbsp;<span class="ident" id="8204676"><a href="/gostd/go/parser/parser_test.go.html#8204479">exp</a></span>&nbsp;<span class="op" id="8204680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204685">got</span>&nbsp;<span class="op" id="8204689">:=</span>&nbsp;<span class="ident" id="8204692"><a href="/gostd/go/parser/parser_test.go.html#8204505">got</a></span><span class="op" id="8204695">[</span><span class="ident" id="8204696"><a href="/gostd/go/parser/parser_test.go.html#8204660">j</a></span><span class="op" id="8204697">]</span><span class="op" id="8204698">.</span><span class="ident" id="8204699"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204707">if</span>&nbsp;<span class="ident" id="8204710"><a href="/gostd/go/parser/parser_test.go.html#8204685">got</a></span>&nbsp;<span class="op" id="8204714">!=</span>&nbsp;<span class="ident" id="8204717"><a href="/gostd/go/parser/parser_test.go.html#8204663">exp</a></span>&nbsp;<span class="op" id="8204721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204727"><a href="/gostd/go/parser/parser_test.go.html#8203694">t</a></span><span class="op" id="8204728">.</span><span class="ident" id="8204729"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8204735">(</span><span class="string" id="8204736">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8204769">,</span>&nbsp;<span class="ident" id="8204771"><a href="/gostd/go/parser/parser_test.go.html#8204685">got</a></span><span class="op" id="8204774">,</span>&nbsp;<span class="ident" id="8204776"><a href="/gostd/go/parser/parser_test.go.html#8204476">i</a></span><span class="op" id="8204777">,</span>&nbsp;<span class="ident" id="8204779"><a href="/gostd/go/parser/parser_test.go.html#8204663">exp</a></span><span class="op" id="8204782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204794">}</span><br>
<span class="lineno">375</span><span class="op" id="8204796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8204799">func</span>&nbsp;<span class="ident" id="8204804">getField</span><span class="op" id="8204812">(</span><span class="ident" id="8204813">file</span>&nbsp;<span class="op" id="8204818">*</span><span class="ident" id="8204819"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8204822">.</span><span class="ident" id="8204823"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="8204827">,</span>&nbsp;<span class="ident" id="8204829">fieldname</span>&nbsp;<span class="builtintype" id="8204839">string</span><span class="op" id="8204845">)</span>&nbsp;<span class="op" id="8204847">*</span><span class="ident" id="8204848"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8204851">.</span><span class="ident" id="8204852"><a href="/gostd/go/ast/ast.go.html#3798258">Field</a></span>&nbsp;<span class="op" id="8204858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204861">parts</span>&nbsp;<span class="op" id="8204867">:=</span>&nbsp;<span class="ident" id="8204870"><a href="/gostd/go/parser/parser_test.go.html#8196495">strings</a></span><span class="op" id="8204877">.</span><span class="ident" id="8204878"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="8204883">(</span><span class="ident" id="8204884"><a href="/gostd/go/parser/parser_test.go.html#8204829">fieldname</a></span><span class="op" id="8204893">,</span>&nbsp;<span class="string" id="8204895">&#34;.&#34;</span><span class="op" id="8204898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204901">for</span>&nbsp;<span class="ident" id="8204905">_</span><span class="op" id="8204906">,</span>&nbsp;<span class="ident" id="8204908">d</span>&nbsp;<span class="op" id="8204910">:=</span>&nbsp;<span class="keyword" id="8204913">range</span>&nbsp;<span class="ident" id="8204919"><a href="/gostd/go/parser/parser_test.go.html#8204813">file</a></span><span class="op" id="8204923">.</span><span class="ident" id="8204924"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span>&nbsp;<span class="op" id="8204930">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204934">if</span>&nbsp;<span class="ident" id="8204937">d</span><span class="op" id="8204938">,</span>&nbsp;<span class="ident" id="8204940">ok</span>&nbsp;<span class="op" id="8204943">:=</span>&nbsp;<span class="ident" id="8204946"><a href="/gostd/go/parser/parser_test.go.html#8204908">d</a></span><span class="op" id="8204947">.</span><span class="op" id="8204948">(</span><span class="op" id="8204949">*</span><span class="ident" id="8204950"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8204953">.</span><span class="ident" id="8204954"><a href="/gostd/go/ast/ast.go.html#3822162">GenDecl</a></span><span class="op" id="8204961">)</span><span class="op" id="8204962">;</span>&nbsp;<span class="ident" id="8204964"><a href="/gostd/go/parser/parser_test.go.html#8204940">ok</a></span>&nbsp;<span class="op" id="8204967">&amp;&amp;</span>&nbsp;<span class="ident" id="8204970"><a href="/gostd/go/parser/parser_test.go.html#8204937">d</a></span><span class="op" id="8204971">.</span><span class="ident" id="8204972"><a href="/gostd/go/ast/ast.go.html#3822282">Tok</a></span>&nbsp;<span class="op" id="8204976">==</span>&nbsp;<span class="ident" id="8204979"><a href="/gostd/go/parser/parser_test.go.html#8196477">token</a></span><span class="op" id="8204984">.</span><span class="ident" id="8204985"><a href="/gostd/go/token/token.go.html#3890922">TYPE</a></span>&nbsp;<span class="op" id="8204990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8204995">for</span>&nbsp;<span class="ident" id="8204999">_</span><span class="op" id="8205000">,</span>&nbsp;<span class="ident" id="8205002">s</span>&nbsp;<span class="op" id="8205004">:=</span>&nbsp;<span class="keyword" id="8205007">range</span>&nbsp;<span class="ident" id="8205013"><a href="/gostd/go/parser/parser_test.go.html#8204937">d</a></span><span class="op" id="8205014">.</span><span class="ident" id="8205015"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span>&nbsp;<span class="op" id="8205021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205027">if</span>&nbsp;<span class="ident" id="8205030">s</span><span class="op" id="8205031">,</span>&nbsp;<span class="ident" id="8205033">ok</span>&nbsp;<span class="op" id="8205036">:=</span>&nbsp;<span class="ident" id="8205039"><a href="/gostd/go/parser/parser_test.go.html#8205002">s</a></span><span class="op" id="8205040">.</span><span class="op" id="8205041">(</span><span class="op" id="8205042">*</span><span class="ident" id="8205043"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8205046">.</span><span class="ident" id="8205047"><a href="/gostd/go/ast/ast.go.html#3820391">TypeSpec</a></span><span class="op" id="8205055">)</span><span class="op" id="8205056">;</span>&nbsp;<span class="ident" id="8205058"><a href="/gostd/go/parser/parser_test.go.html#8205033">ok</a></span>&nbsp;<span class="op" id="8205061">&amp;&amp;</span>&nbsp;<span class="ident" id="8205064"><a href="/gostd/go/parser/parser_test.go.html#8205030">s</a></span><span class="op" id="8205065">.</span><span class="ident" id="8205066"><a href="/gostd/go/ast/ast.go.html#3820471">Name</a></span><span class="op" id="8205070">.</span><span class="ident" id="8205071"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span>&nbsp;<span class="op" id="8205076">==</span>&nbsp;<span class="ident" id="8205079"><a href="/gostd/go/parser/parser_test.go.html#8204861">parts</a></span><span class="op" id="8205084">[</span><span class="num" id="8205085">0</span><span class="op" id="8205086">]</span>&nbsp;<span class="op" id="8205088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205095">if</span>&nbsp;<span class="ident" id="8205098">s</span><span class="op" id="8205099">,</span>&nbsp;<span class="ident" id="8205101">ok</span>&nbsp;<span class="op" id="8205104">:=</span>&nbsp;<span class="ident" id="8205107"><a href="/gostd/go/parser/parser_test.go.html#8205030">s</a></span><span class="op" id="8205108">.</span><span class="ident" id="8205109"><a href="/gostd/go/ast/ast.go.html#3820508">Type</a></span><span class="op" id="8205113">.</span><span class="op" id="8205114">(</span><span class="op" id="8205115">*</span><span class="ident" id="8205116"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8205119">.</span><span class="ident" id="8205120"><a href="/gostd/go/ast/ast.go.html#3804448">StructType</a></span><span class="op" id="8205130">)</span><span class="op" id="8205131">;</span>&nbsp;<span class="ident" id="8205133"><a href="/gostd/go/parser/parser_test.go.html#8205101">ok</a></span>&nbsp;<span class="op" id="8205136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205144">for</span>&nbsp;<span class="ident" id="8205148">_</span><span class="op" id="8205149">,</span>&nbsp;<span class="ident" id="8205151">f</span>&nbsp;<span class="op" id="8205153">:=</span>&nbsp;<span class="keyword" id="8205156">range</span>&nbsp;<span class="ident" id="8205162"><a href="/gostd/go/parser/parser_test.go.html#8205098">s</a></span><span class="op" id="8205163">.</span><span class="ident" id="8205164"><a href="/gostd/go/ast/ast.go.html#3804526">Fields</a></span><span class="op" id="8205170">.</span><span class="ident" id="8205171"><a href="/gostd/go/ast/ast.go.html#3798946">List</a></span>&nbsp;<span class="op" id="8205176">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205185">for</span>&nbsp;<span class="ident" id="8205189">_</span><span class="op" id="8205190">,</span>&nbsp;<span class="ident" id="8205192">name</span>&nbsp;<span class="op" id="8205197">:=</span>&nbsp;<span class="keyword" id="8205200">range</span>&nbsp;<span class="ident" id="8205206"><a href="/gostd/go/parser/parser_test.go.html#8205151">f</a></span><span class="op" id="8205207">.</span><span class="ident" id="8205208"><a href="/gostd/go/ast/ast.go.html#3798333">Names</a></span>&nbsp;<span class="op" id="8205214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205224">if</span>&nbsp;<span class="ident" id="8205227"><a href="/gostd/go/parser/parser_test.go.html#8205192">name</a></span><span class="op" id="8205231">.</span><span class="ident" id="8205232"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span>&nbsp;<span class="op" id="8205237">==</span>&nbsp;<span class="ident" id="8205240"><a href="/gostd/go/parser/parser_test.go.html#8204861">parts</a></span><span class="op" id="8205245">[</span><span class="num" id="8205246">1</span><span class="op" id="8205247">]</span>&nbsp;<span class="op" id="8205249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205260">return</span>&nbsp;<span class="ident" id="8205267"><a href="/gostd/go/parser/parser_test.go.html#8205151">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205286">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205316">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205322">return</span>&nbsp;<span class="builtintype" id="8205329">nil</span><br>
<span class="lineno"></span><span class="op" id="8205333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8205336">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="8205410">func</span>&nbsp;<span class="ident" id="8205415">commentText</span><span class="op" id="8205426">(</span><span class="ident" id="8205427">c</span>&nbsp;<span class="op" id="8205429">*</span><span class="ident" id="8205430"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8205433">.</span><span class="ident" id="8205434"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span><span class="op" id="8205446">)</span>&nbsp;<span class="builtintype" id="8205448">string</span>&nbsp;<span class="op" id="8205455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205458">var</span>&nbsp;<span class="ident" id="8205462">buf</span>&nbsp;<span class="ident" id="8205466"><a href="/gostd/go/parser/parser_test.go.html#8196451">bytes</a></span><span class="op" id="8205471">.</span><span class="ident" id="8205472"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205480">if</span>&nbsp;<span class="ident" id="8205483"><a href="/gostd/go/parser/parser_test.go.html#8205427">c</a></span>&nbsp;<span class="op" id="8205485">!=</span>&nbsp;<span class="builtintype" id="8205488">nil</span>&nbsp;<span class="op" id="8205492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205496">for</span>&nbsp;<span class="ident" id="8205500">_</span><span class="op" id="8205501">,</span>&nbsp;<span class="ident" id="8205503">c</span>&nbsp;<span class="op" id="8205505">:=</span>&nbsp;<span class="keyword" id="8205508">range</span>&nbsp;<span class="ident" id="8205514"><a href="/gostd/go/parser/parser_test.go.html#8205427">c</a></span><span class="op" id="8205515">.</span><span class="ident" id="8205516"><a href="/gostd/go/ast/ast.go.html#3796057">List</a></span>&nbsp;<span class="op" id="8205521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8205526"><a href="/gostd/go/parser/parser_test.go.html#8205462">buf</a></span><span class="op" id="8205529">.</span><span class="ident" id="8205530"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="8205541">(</span><span class="ident" id="8205542"><a href="/gostd/go/parser/parser_test.go.html#8205503">c</a></span><span class="op" id="8205543">.</span><span class="ident" id="8205544"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="8205548">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205558">return</span>&nbsp;<span class="ident" id="8205565"><a href="/gostd/go/parser/parser_test.go.html#8205462">buf</a></span><span class="op" id="8205568">.</span><span class="ident" id="8205569"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="8205575">(</span><span class="op" id="8205576">)</span><br>
<span class="lineno"></span><span class="op" id="8205578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="8205581">func</span>&nbsp;<span class="ident" id="8205586">checkFieldComments</span><span class="op" id="8205604">(</span><span class="ident" id="8205605">t</span>&nbsp;<span class="op" id="8205607">*</span><span class="ident" id="8205608"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8205615">.</span><span class="ident" id="8205616"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8205617">,</span>&nbsp;<span class="ident" id="8205619">file</span>&nbsp;<span class="op" id="8205624">*</span><span class="ident" id="8205625"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8205628">.</span><span class="ident" id="8205629"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="8205633">,</span>&nbsp;<span class="ident" id="8205635">fieldname</span><span class="op" id="8205644">,</span>&nbsp;<span class="ident" id="8205646">lead</span><span class="op" id="8205650">,</span>&nbsp;<span class="ident" id="8205652">line</span>&nbsp;<span class="builtintype" id="8205657">string</span><span class="op" id="8205663">)</span>&nbsp;<span class="op" id="8205665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8205668">f</span>&nbsp;<span class="op" id="8205670">:=</span>&nbsp;<span class="ident" id="8205673"><a href="/gostd/go/parser/parser_test.go.html#8204804">getField</a></span><span class="op" id="8205681">(</span><span class="ident" id="8205682"><a href="/gostd/go/parser/parser_test.go.html#8205619">file</a></span><span class="op" id="8205686">,</span>&nbsp;<span class="ident" id="8205688"><a href="/gostd/go/parser/parser_test.go.html#8205635">fieldname</a></span><span class="op" id="8205697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205700">if</span>&nbsp;<span class="ident" id="8205703"><a href="/gostd/go/parser/parser_test.go.html#8205668">f</a></span>&nbsp;<span class="op" id="8205705">==</span>&nbsp;<span class="builtintype" id="8205708">nil</span>&nbsp;<span class="op" id="8205712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8205716"><a href="/gostd/go/parser/parser_test.go.html#8205605">t</a></span><span class="op" id="8205717">.</span><span class="ident" id="8205718"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="8205724">(</span><span class="string" id="8205725">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="8205746">,</span>&nbsp;<span class="ident" id="8205748"><a href="/gostd/go/parser/parser_test.go.html#8205635">fieldname</a></span><span class="op" id="8205757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205760">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205763">if</span>&nbsp;<span class="ident" id="8205766">got</span>&nbsp;<span class="op" id="8205770">:=</span>&nbsp;<span class="ident" id="8205773"><a href="/gostd/go/parser/parser_test.go.html#8205415">commentText</a></span><span class="op" id="8205784">(</span><span class="ident" id="8205785"><a href="/gostd/go/parser/parser_test.go.html#8205668">f</a></span><span class="op" id="8205786">.</span><span class="ident" id="8205787"><a href="/gostd/go/ast/ast.go.html#3798274">Doc</a></span><span class="op" id="8205790">)</span><span class="op" id="8205791">;</span>&nbsp;<span class="ident" id="8205793"><a href="/gostd/go/parser/parser_test.go.html#8205766">got</a></span>&nbsp;<span class="op" id="8205797">!=</span>&nbsp;<span class="ident" id="8205800"><a href="/gostd/go/parser/parser_test.go.html#8205646">lead</a></span>&nbsp;<span class="op" id="8205805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8205809"><a href="/gostd/go/parser/parser_test.go.html#8205605">t</a></span><span class="op" id="8205810">.</span><span class="ident" id="8205811"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8205817">(</span><span class="string" id="8205818">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8205852">,</span>&nbsp;<span class="ident" id="8205854"><a href="/gostd/go/parser/parser_test.go.html#8205766">got</a></span><span class="op" id="8205857">,</span>&nbsp;<span class="ident" id="8205859"><a href="/gostd/go/parser/parser_test.go.html#8205646">lead</a></span><span class="op" id="8205863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8205869">if</span>&nbsp;<span class="ident" id="8205872">got</span>&nbsp;<span class="op" id="8205876">:=</span>&nbsp;<span class="ident" id="8205879"><a href="/gostd/go/parser/parser_test.go.html#8205415">commentText</a></span><span class="op" id="8205890">(</span><span class="ident" id="8205891"><a href="/gostd/go/parser/parser_test.go.html#8205668">f</a></span><span class="op" id="8205892">.</span><span class="ident" id="8205893"><a href="/gostd/go/ast/ast.go.html#3798513">Comment</a></span><span class="op" id="8205900">)</span><span class="op" id="8205901">;</span>&nbsp;<span class="ident" id="8205903"><a href="/gostd/go/parser/parser_test.go.html#8205872">got</a></span>&nbsp;<span class="op" id="8205907">!=</span>&nbsp;<span class="ident" id="8205910"><a href="/gostd/go/parser/parser_test.go.html#8205652">line</a></span>&nbsp;<span class="op" id="8205915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8205919"><a href="/gostd/go/parser/parser_test.go.html#8205605">t</a></span><span class="op" id="8205920">.</span><span class="ident" id="8205921"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8205927">(</span><span class="string" id="8205928">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8205962">,</span>&nbsp;<span class="ident" id="8205964"><a href="/gostd/go/parser/parser_test.go.html#8205872">got</a></span><span class="op" id="8205967">,</span>&nbsp;<span class="ident" id="8205969"><a href="/gostd/go/parser/parser_test.go.html#8205652">line</a></span><span class="op" id="8205973">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8205976">}</span><br>
<span class="lineno"></span><span class="op" id="8205978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8205981">func</span>&nbsp;<span class="ident" id="8205986">TestLeadAndLineComments</span><span class="op" id="8206009">(</span><span class="ident" id="8206010">t</span>&nbsp;<span class="op" id="8206012">*</span><span class="ident" id="8206013"><a href="/gostd/go/parser/parser_test.go.html#8196506">testing</a></span><span class="op" id="8206020">.</span><span class="ident" id="8206021"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8206022">)</span>&nbsp;<span class="op" id="8206024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206027">f</span><span class="op" id="8206028">,</span>&nbsp;<span class="ident" id="8206030">err</span>&nbsp;<span class="op" id="8206034">:=</span>&nbsp;<span class="ident" id="8206037"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="8206046">(</span><span class="ident" id="8206047"><a href="/gostd/go/parser/parser_test.go.html#8196523">fset</a></span><span class="op" id="8206051">,</span>&nbsp;<span class="string" id="8206053">&#34;&#34;</span><span class="op" id="8206055">,</span>&nbsp;<span class="string" id="8206057">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;F1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;F2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;f3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8206249">,</span>&nbsp;<span class="ident" id="8206251"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="8206264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8206267">if</span>&nbsp;<span class="ident" id="8206270"><a href="/gostd/go/parser/parser_test.go.html#8206030">err</a></span>&nbsp;<span class="op" id="8206274">!=</span>&nbsp;<span class="builtintype" id="8206277">nil</span>&nbsp;<span class="op" id="8206281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206285"><a href="/gostd/go/parser/parser_test.go.html#8206010">t</a></span><span class="op" id="8206286">.</span><span class="ident" id="8206287"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8206292">(</span><span class="ident" id="8206293"><a href="/gostd/go/parser/parser_test.go.html#8206030">err</a></span><span class="op" id="8206296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8206299">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206302"><a href="/gostd/go/parser/parser_test.go.html#8205586">checkFieldComments</a></span><span class="op" id="8206320">(</span><span class="ident" id="8206321"><a href="/gostd/go/parser/parser_test.go.html#8206010">t</a></span><span class="op" id="8206322">,</span>&nbsp;<span class="ident" id="8206324"><a href="/gostd/go/parser/parser_test.go.html#8206027">f</a></span><span class="op" id="8206325">,</span>&nbsp;<span class="string" id="8206327">&#34;T.F1&#34;</span><span class="op" id="8206333">,</span>&nbsp;<span class="string" id="8206335">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8206360">,</span>&nbsp;<span class="string" id="8206362">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8206387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206390"><a href="/gostd/go/parser/parser_test.go.html#8205586">checkFieldComments</a></span><span class="op" id="8206408">(</span><span class="ident" id="8206409"><a href="/gostd/go/parser/parser_test.go.html#8206010">t</a></span><span class="op" id="8206410">,</span>&nbsp;<span class="ident" id="8206412"><a href="/gostd/go/parser/parser_test.go.html#8206027">f</a></span><span class="op" id="8206413">,</span>&nbsp;<span class="string" id="8206415">&#34;T.F2&#34;</span><span class="op" id="8206421">,</span>&nbsp;<span class="string" id="8206423">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8206445">,</span>&nbsp;<span class="string" id="8206447">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8206467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206470"><a href="/gostd/go/parser/parser_test.go.html#8205586">checkFieldComments</a></span><span class="op" id="8206488">(</span><span class="ident" id="8206489"><a href="/gostd/go/parser/parser_test.go.html#8206010">t</a></span><span class="op" id="8206490">,</span>&nbsp;<span class="ident" id="8206492"><a href="/gostd/go/parser/parser_test.go.html#8206027">f</a></span><span class="op" id="8206493">,</span>&nbsp;<span class="string" id="8206495">&#34;T.f3&#34;</span><span class="op" id="8206501">,</span>&nbsp;<span class="string" id="8206503">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="8206523">,</span>&nbsp;<span class="string" id="8206525">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8206545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206548"><a href="/gostd/go/parser/parser_test.go.html#8196467">ast</a></span><span class="op" id="8206551">.</span><span class="ident" id="8206552"><a href="/gostd/go/ast/filter.go.html#3834940">FileExports</a></span><span class="op" id="8206563">(</span><span class="ident" id="8206564"><a href="/gostd/go/parser/parser_test.go.html#8206027">f</a></span><span class="op" id="8206565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206568"><a href="/gostd/go/parser/parser_test.go.html#8205586">checkFieldComments</a></span><span class="op" id="8206586">(</span><span class="ident" id="8206587"><a href="/gostd/go/parser/parser_test.go.html#8206010">t</a></span><span class="op" id="8206588">,</span>&nbsp;<span class="ident" id="8206590"><a href="/gostd/go/parser/parser_test.go.html#8206027">f</a></span><span class="op" id="8206591">,</span>&nbsp;<span class="string" id="8206593">&#34;T.F1&#34;</span><span class="op" id="8206599">,</span>&nbsp;<span class="string" id="8206601">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8206626">,</span>&nbsp;<span class="string" id="8206628">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8206653">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206656"><a href="/gostd/go/parser/parser_test.go.html#8205586">checkFieldComments</a></span><span class="op" id="8206674">(</span><span class="ident" id="8206675"><a href="/gostd/go/parser/parser_test.go.html#8206010">t</a></span><span class="op" id="8206676">,</span>&nbsp;<span class="ident" id="8206678"><a href="/gostd/go/parser/parser_test.go.html#8206027">f</a></span><span class="op" id="8206679">,</span>&nbsp;<span class="string" id="8206681">&#34;T.F2&#34;</span><span class="op" id="8206687">,</span>&nbsp;<span class="string" id="8206689">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8206711">,</span>&nbsp;<span class="string" id="8206713">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8206733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8206736">if</span>&nbsp;<span class="ident" id="8206739"><a href="/gostd/go/parser/parser_test.go.html#8204804">getField</a></span><span class="op" id="8206747">(</span><span class="ident" id="8206748"><a href="/gostd/go/parser/parser_test.go.html#8206027">f</a></span><span class="op" id="8206749">,</span>&nbsp;<span class="string" id="8206751">&#34;T.f3&#34;</span><span class="op" id="8206757">)</span>&nbsp;<span class="op" id="8206759">!=</span>&nbsp;<span class="builtintype" id="8206762">nil</span>&nbsp;<span class="op" id="8206766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8206770"><a href="/gostd/go/parser/parser_test.go.html#8206010">t</a></span><span class="op" id="8206771">.</span><span class="ident" id="8206772"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8206777">(</span><span class="string" id="8206778">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="8206805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8206808">}</span><br>
<span class="lineno"></span><span class="op" id="8206810">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
