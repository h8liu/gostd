<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3081590">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3081645">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3081699">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3081750">package</span>&nbsp;<span class="ident" id="3081758">fmt</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3081763">import</span>&nbsp;<span class="op" id="3081770">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3081773">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3081783">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3081789">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3081797">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3081803">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3081814">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3081825">&#34;sync&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3081833">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3081848">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3081851">//&nbsp;runeUnreader&nbsp;is&nbsp;the&nbsp;interface&nbsp;to&nbsp;something&nbsp;that&nbsp;can&nbsp;unread&nbsp;runes.</span><br>
<span class="lineno"></span><span class="comment" id="3081920">//&nbsp;If&nbsp;the&nbsp;object&nbsp;provided&nbsp;to&nbsp;Scan&nbsp;does&nbsp;not&nbsp;satisfy&nbsp;this&nbsp;interface,</span><br>
<span class="lineno">20</span><span class="comment" id="3081987">//&nbsp;a&nbsp;local&nbsp;buffer&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;back&nbsp;up&nbsp;the&nbsp;input,&nbsp;but&nbsp;its&nbsp;contents</span><br>
<span class="lineno"></span><span class="comment" id="3082057">//&nbsp;will&nbsp;be&nbsp;lost&nbsp;when&nbsp;Scan&nbsp;returns.</span><br>
<span class="lineno"></span><span class="keyword" id="3082092">type</span>&nbsp;<span class="ident" id="3082097">runeUnreader</span>&nbsp;<span class="keyword" id="3082110">interface</span>&nbsp;<span class="op" id="3082120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3082123">UnreadRune</span><span class="op" id="3082133">(</span><span class="op" id="3082134">)</span>&nbsp;<span class="builtintype" id="3082136">error</span><br>
<span class="lineno"></span><span class="op" id="3082142">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="3082145">//&nbsp;ScanState&nbsp;represents&nbsp;the&nbsp;scanner&nbsp;state&nbsp;passed&nbsp;to&nbsp;custom&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="comment" id="3082214">//&nbsp;Scanners&nbsp;may&nbsp;do&nbsp;rune-at-a-time&nbsp;scanning&nbsp;or&nbsp;ask&nbsp;the&nbsp;ScanState</span><br>
<span class="lineno"></span><span class="comment" id="3082278">//&nbsp;to&nbsp;discover&nbsp;the&nbsp;next&nbsp;space-delimited&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="3082325">type</span>&nbsp;<span class="ident" id="3082330">ScanState</span>&nbsp;<span class="keyword" id="3082340">interface</span>&nbsp;<span class="op" id="3082350">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082353">//&nbsp;ReadRune&nbsp;reads&nbsp;the&nbsp;next&nbsp;rune&nbsp;(Unicode&nbsp;code&nbsp;point)&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082423">//&nbsp;If&nbsp;invoked&nbsp;during&nbsp;Scanln,&nbsp;Fscanln,&nbsp;or&nbsp;Sscanln,&nbsp;ReadRune()&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082490">//&nbsp;return&nbsp;EOF&nbsp;after&nbsp;returning&nbsp;the&nbsp;first&nbsp;&#39;\n&#39;&nbsp;or&nbsp;when&nbsp;reading&nbsp;beyond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082559">//&nbsp;the&nbsp;specified&nbsp;width.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3082584">ReadRune</span><span class="op" id="3082592">(</span><span class="op" id="3082593">)</span>&nbsp;<span class="op" id="3082595">(</span><span class="ident" id="3082596">r</span>&nbsp;<span class="builtintype" id="3082598">rune</span><span class="op" id="3082602">,</span>&nbsp;<span class="ident" id="3082604">size</span>&nbsp;<span class="builtintype" id="3082609">int</span><span class="op" id="3082612">,</span>&nbsp;<span class="ident" id="3082614">err</span>&nbsp;<span class="builtintype" id="3082618">error</span><span class="op" id="3082623">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082626">//&nbsp;UnreadRune&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadRune&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3082699">UnreadRune</span><span class="op" id="3082709">(</span><span class="op" id="3082710">)</span>&nbsp;<span class="builtintype" id="3082712">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082719">//&nbsp;SkipSpace&nbsp;skips&nbsp;space&nbsp;in&nbsp;the&nbsp;input.&nbsp;Newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082789">//&nbsp;unless&nbsp;the&nbsp;scan&nbsp;operation&nbsp;is&nbsp;Scanln,&nbsp;Fscanln&nbsp;or&nbsp;Sscanln,&nbsp;in&nbsp;which&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082864">//&nbsp;a&nbsp;newline&nbsp;is&nbsp;treated&nbsp;as&nbsp;EOF.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3082897">SkipSpace</span><span class="op" id="3082906">(</span><span class="op" id="3082907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082910">//&nbsp;Token&nbsp;skips&nbsp;space&nbsp;in&nbsp;the&nbsp;input&nbsp;if&nbsp;skipSpace&nbsp;is&nbsp;true,&nbsp;then&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3082984">//&nbsp;run&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c).&nbsp;&nbsp;If&nbsp;f&nbsp;is&nbsp;nil,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083048">//&nbsp;!unicode.IsSpace(c)&nbsp;is&nbsp;used;&nbsp;that&nbsp;is,&nbsp;the&nbsp;token&nbsp;will&nbsp;hold&nbsp;non-space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083120">//&nbsp;characters.&nbsp;&nbsp;Newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;space&nbsp;unless&nbsp;the&nbsp;scan&nbsp;operation</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083193">//&nbsp;is&nbsp;Scanln,&nbsp;Fscanln&nbsp;or&nbsp;Sscanln,&nbsp;in&nbsp;which&nbsp;case&nbsp;a&nbsp;newline&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083266">//&nbsp;EOF.&nbsp;&nbsp;The&nbsp;returned&nbsp;slice&nbsp;points&nbsp;to&nbsp;shared&nbsp;data&nbsp;that&nbsp;may&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083341">//&nbsp;by&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;Token,&nbsp;a&nbsp;call&nbsp;to&nbsp;a&nbsp;Scan&nbsp;function&nbsp;using&nbsp;the&nbsp;ScanState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083418">//&nbsp;as&nbsp;input,&nbsp;or&nbsp;when&nbsp;the&nbsp;calling&nbsp;Scan&nbsp;method&nbsp;returns.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3083473">Token</span><span class="op" id="3083478">(</span><span class="ident" id="3083479">skipSpace</span>&nbsp;<span class="builtintype" id="3083489">bool</span><span class="op" id="3083493">,</span>&nbsp;<span class="ident" id="3083495">f</span>&nbsp;<span class="keyword" id="3083497">func</span><span class="op" id="3083501">(</span><span class="builtintype" id="3083502">rune</span><span class="op" id="3083506">)</span>&nbsp;<span class="builtintype" id="3083508">bool</span><span class="op" id="3083512">)</span>&nbsp;<span class="op" id="3083514">(</span><span class="ident" id="3083515">token</span>&nbsp;<span class="op" id="3083521">[</span><span class="op" id="3083522">]</span><span class="builtintype" id="3083523">byte</span><span class="op" id="3083527">,</span>&nbsp;<span class="ident" id="3083529">err</span>&nbsp;<span class="builtintype" id="3083533">error</span><span class="op" id="3083538">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083541">//&nbsp;Width&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;width&nbsp;option&nbsp;and&nbsp;whether&nbsp;it&nbsp;has&nbsp;been&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083618">//&nbsp;The&nbsp;unit&nbsp;is&nbsp;Unicode&nbsp;code&nbsp;points.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3083655">Width</span><span class="op" id="3083660">(</span><span class="op" id="3083661">)</span>&nbsp;<span class="op" id="3083663">(</span><span class="ident" id="3083664">wid</span>&nbsp;<span class="builtintype" id="3083668">int</span><span class="op" id="3083671">,</span>&nbsp;<span class="ident" id="3083673">ok</span>&nbsp;<span class="builtintype" id="3083676">bool</span><span class="op" id="3083680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083683">//&nbsp;Because&nbsp;ReadRune&nbsp;is&nbsp;implemented&nbsp;by&nbsp;the&nbsp;interface,&nbsp;Read&nbsp;should&nbsp;never&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083758">//&nbsp;called&nbsp;by&nbsp;the&nbsp;scanning&nbsp;routines&nbsp;and&nbsp;a&nbsp;valid&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3083824">//&nbsp;ScanState&nbsp;may&nbsp;choose&nbsp;always&nbsp;to&nbsp;return&nbsp;an&nbsp;error&nbsp;from&nbsp;Read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3083886">Read</span><span class="op" id="3083890">(</span><span class="ident" id="3083891">buf</span>&nbsp;<span class="op" id="3083895">[</span><span class="op" id="3083896">]</span><span class="builtintype" id="3083897">byte</span><span class="op" id="3083901">)</span>&nbsp;<span class="op" id="3083903">(</span><span class="ident" id="3083904">n</span>&nbsp;<span class="builtintype" id="3083906">int</span><span class="op" id="3083909">,</span>&nbsp;<span class="ident" id="3083911">err</span>&nbsp;<span class="builtintype" id="3083915">error</span><span class="op" id="3083920">)</span><br>
<span class="lineno"></span><span class="op" id="3083922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3083925">//&nbsp;Scanner&nbsp;is&nbsp;implemented&nbsp;by&nbsp;any&nbsp;value&nbsp;that&nbsp;has&nbsp;a&nbsp;Scan&nbsp;method,&nbsp;which&nbsp;scans</span><br>
<span class="lineno">60</span><span class="comment" id="3084000">//&nbsp;the&nbsp;input&nbsp;for&nbsp;the&nbsp;representation&nbsp;of&nbsp;a&nbsp;value&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3084076">//&nbsp;receiver,&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;be&nbsp;useful.&nbsp;&nbsp;The&nbsp;Scan&nbsp;method&nbsp;is&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="3084154">//&nbsp;for&nbsp;any&nbsp;argument&nbsp;to&nbsp;Scan,&nbsp;Scanf,&nbsp;or&nbsp;Scanln&nbsp;that&nbsp;implements&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="3084220">type</span>&nbsp;<span class="ident" id="3084225">Scanner</span>&nbsp;<span class="keyword" id="3084233">interface</span>&nbsp;<span class="op" id="3084243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3084246">Scan</span><span class="op" id="3084250">(</span><span class="ident" id="3084251">state</span>&nbsp;<span class="ident" id="3084257"><a href="/fmt/scan.go.html#3082330">ScanState</a></span><span class="op" id="3084266">,</span>&nbsp;<span class="ident" id="3084268">verb</span>&nbsp;<span class="builtintype" id="3084273">rune</span><span class="op" id="3084277">)</span>&nbsp;<span class="builtintype" id="3084279">error</span><br>
<span class="lineno">65</span><span class="op" id="3084285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3084288">//&nbsp;Scan&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;standard&nbsp;input,&nbsp;storing&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="3084352">//&nbsp;space-separated&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count</span><br>
<span class="lineno"></span><span class="comment" id="3084421">//&nbsp;as&nbsp;space.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.</span><br>
<span class="lineno">70</span><span class="comment" id="3084488">//&nbsp;If&nbsp;that&nbsp;is&nbsp;less&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="3084558">func</span>&nbsp;<span class="ident" id="3084563">Scan</span><span class="op" id="3084567">(</span><span class="ident" id="3084568">a</span>&nbsp;<span class="op" id="3084570">...</span><span class="keyword" id="3084573">interface</span><span class="op" id="3084582">{</span><span class="op" id="3084583">}</span><span class="op" id="3084584">)</span>&nbsp;<span class="op" id="3084586">(</span><span class="ident" id="3084587">n</span>&nbsp;<span class="builtintype" id="3084589">int</span><span class="op" id="3084592">,</span>&nbsp;<span class="ident" id="3084594">err</span>&nbsp;<span class="builtintype" id="3084598">error</span><span class="op" id="3084603">)</span>&nbsp;<span class="op" id="3084605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3084608">return</span>&nbsp;<span class="ident" id="3084615"><a href="/fmt/scan.go.html#3086513">Fscan</a></span><span class="op" id="3084620">(</span><span class="ident" id="3084621"><a href="/fmt/scan.go.html#3081797">os</a></span><span class="op" id="3084623">.</span><span class="ident" id="3084624">Stdin</span><span class="op" id="3084629">,</span>&nbsp;<span class="ident" id="3084631"><a href="/fmt/scan.go.html#3084568">a</a></span><span class="op" id="3084632">...</span><span class="op" id="3084635">)</span><br>
<span class="lineno"></span><span class="op" id="3084637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="3084640">//&nbsp;Scanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Scan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3084706">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="3084762">func</span>&nbsp;<span class="ident" id="3084767">Scanln</span><span class="op" id="3084773">(</span><span class="ident" id="3084774">a</span>&nbsp;<span class="op" id="3084776">...</span><span class="keyword" id="3084779">interface</span><span class="op" id="3084788">{</span><span class="op" id="3084789">}</span><span class="op" id="3084790">)</span>&nbsp;<span class="op" id="3084792">(</span><span class="ident" id="3084793">n</span>&nbsp;<span class="builtintype" id="3084795">int</span><span class="op" id="3084798">,</span>&nbsp;<span class="ident" id="3084800">err</span>&nbsp;<span class="builtintype" id="3084804">error</span><span class="op" id="3084809">)</span>&nbsp;<span class="op" id="3084811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3084814">return</span>&nbsp;<span class="ident" id="3084821"><a href="/fmt/scan.go.html#3086786">Fscanln</a></span><span class="op" id="3084828">(</span><span class="ident" id="3084829"><a href="/fmt/scan.go.html#3081797">os</a></span><span class="op" id="3084831">.</span><span class="ident" id="3084832">Stdin</span><span class="op" id="3084837">,</span>&nbsp;<span class="ident" id="3084839"><a href="/fmt/scan.go.html#3084774">a</a></span><span class="op" id="3084840">...</span><span class="op" id="3084843">)</span><br>
<span class="lineno"></span><span class="op" id="3084845">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="3084848">//&nbsp;Scanf&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;standard&nbsp;input,&nbsp;storing&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="3084913">//&nbsp;space-separated&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3084982">//&nbsp;the&nbsp;format.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="3085051">func</span>&nbsp;<span class="ident" id="3085056">Scanf</span><span class="op" id="3085061">(</span><span class="ident" id="3085062">format</span>&nbsp;<span class="builtintype" id="3085069">string</span><span class="op" id="3085075">,</span>&nbsp;<span class="ident" id="3085077">a</span>&nbsp;<span class="op" id="3085079">...</span><span class="keyword" id="3085082">interface</span><span class="op" id="3085091">{</span><span class="op" id="3085092">}</span><span class="op" id="3085093">)</span>&nbsp;<span class="op" id="3085095">(</span><span class="ident" id="3085096">n</span>&nbsp;<span class="builtintype" id="3085098">int</span><span class="op" id="3085101">,</span>&nbsp;<span class="ident" id="3085103">err</span>&nbsp;<span class="builtintype" id="3085107">error</span><span class="op" id="3085112">)</span>&nbsp;<span class="op" id="3085114">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3085117">return</span>&nbsp;<span class="ident" id="3085124"><a href="/fmt/scan.go.html#3087127">Fscanf</a></span><span class="op" id="3085130">(</span><span class="ident" id="3085131"><a href="/fmt/scan.go.html#3081797">os</a></span><span class="op" id="3085133">.</span><span class="ident" id="3085134">Stdin</span><span class="op" id="3085139">,</span>&nbsp;<span class="ident" id="3085141"><a href="/fmt/scan.go.html#3085062">format</a></span><span class="op" id="3085147">,</span>&nbsp;<span class="ident" id="3085149"><a href="/fmt/scan.go.html#3085077">a</a></span><span class="op" id="3085150">...</span><span class="op" id="3085153">)</span><br>
<span class="lineno"></span><span class="op" id="3085155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3085158">type</span>&nbsp;<span class="ident" id="3085163">stringReader</span>&nbsp;<span class="builtintype" id="3085176">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="3085184">func</span>&nbsp;<span class="op" id="3085189">(</span><span class="ident" id="3085190">r</span>&nbsp;<span class="op" id="3085192">*</span><span class="ident" id="3085193"><a href="/fmt/scan.go.html#3085163">stringReader</a></span><span class="op" id="3085205">)</span>&nbsp;<span class="ident" id="3085207">Read</span><span class="op" id="3085211">(</span><span class="ident" id="3085212">b</span>&nbsp;<span class="op" id="3085214">[</span><span class="op" id="3085215">]</span><span class="builtintype" id="3085216">byte</span><span class="op" id="3085220">)</span>&nbsp;<span class="op" id="3085222">(</span><span class="ident" id="3085223">n</span>&nbsp;<span class="builtintype" id="3085225">int</span><span class="op" id="3085228">,</span>&nbsp;<span class="ident" id="3085230">err</span>&nbsp;<span class="builtintype" id="3085234">error</span><span class="op" id="3085239">)</span>&nbsp;<span class="op" id="3085241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3085244"><a href="/fmt/scan.go.html#3085223">n</a></span>&nbsp;<span class="op" id="3085246">=</span>&nbsp;<span class="builtinfunc" id="3085248">copy</span><span class="op" id="3085252">(</span><span class="ident" id="3085253"><a href="/fmt/scan.go.html#3085212">b</a></span><span class="op" id="3085254">,</span>&nbsp;<span class="op" id="3085256">*</span><span class="ident" id="3085257"><a href="/fmt/scan.go.html#3085190">r</a></span><span class="op" id="3085258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3085261">*</span><span class="ident" id="3085262"><a href="/fmt/scan.go.html#3085190">r</a></span>&nbsp;<span class="op" id="3085264">=</span>&nbsp;<span class="op" id="3085266">(</span><span class="op" id="3085267">*</span><span class="ident" id="3085268"><a href="/fmt/scan.go.html#3085190">r</a></span><span class="op" id="3085269">)</span><span class="op" id="3085270">[</span><span class="ident" id="3085271"><a href="/fmt/scan.go.html#3085223">n</a></span><span class="op" id="3085272">:</span><span class="op" id="3085273">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3085276">if</span>&nbsp;<span class="ident" id="3085279"><a href="/fmt/scan.go.html#3085223">n</a></span>&nbsp;<span class="op" id="3085281">==</span>&nbsp;<span class="num" id="3085284">0</span>&nbsp;<span class="op" id="3085286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3085290"><a href="/fmt/scan.go.html#3085230">err</a></span>&nbsp;<span class="op" id="3085294">=</span>&nbsp;<span class="ident" id="3085296"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3085298">.</span><span class="ident" id="3085299">EOF</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3085304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3085307">return</span><br>
<span class="lineno"></span><span class="op" id="3085314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3085317">//&nbsp;Sscan&nbsp;scans&nbsp;the&nbsp;argument&nbsp;string,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno">100</span><span class="comment" id="3085388">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count&nbsp;as&nbsp;space.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="3085455">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="3085525">//&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="3085579">func</span>&nbsp;<span class="ident" id="3085584">Sscan</span><span class="op" id="3085589">(</span><span class="ident" id="3085590">str</span>&nbsp;<span class="builtintype" id="3085594">string</span><span class="op" id="3085600">,</span>&nbsp;<span class="ident" id="3085602">a</span>&nbsp;<span class="op" id="3085604">...</span><span class="keyword" id="3085607">interface</span><span class="op" id="3085616">{</span><span class="op" id="3085617">}</span><span class="op" id="3085618">)</span>&nbsp;<span class="op" id="3085620">(</span><span class="ident" id="3085621">n</span>&nbsp;<span class="builtintype" id="3085623">int</span><span class="op" id="3085626">,</span>&nbsp;<span class="ident" id="3085628">err</span>&nbsp;<span class="builtintype" id="3085632">error</span><span class="op" id="3085637">)</span>&nbsp;<span class="op" id="3085639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3085642">return</span>&nbsp;<span class="ident" id="3085649"><a href="/fmt/scan.go.html#3086513">Fscan</a></span><span class="op" id="3085654">(</span><span class="op" id="3085655">(</span><span class="op" id="3085656">*</span><span class="ident" id="3085657"><a href="/fmt/scan.go.html#3085163">stringReader</a></span><span class="op" id="3085669">)</span><span class="op" id="3085670">(</span><span class="op" id="3085671">&amp;</span><span class="ident" id="3085672"><a href="/fmt/scan.go.html#3085590">str</a></span><span class="op" id="3085675">)</span><span class="op" id="3085676">,</span>&nbsp;<span class="ident" id="3085678"><a href="/fmt/scan.go.html#3085602">a</a></span><span class="op" id="3085679">...</span><span class="op" id="3085682">)</span><br>
<span class="lineno">105</span><span class="op" id="3085684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3085687">//&nbsp;Sscanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Sscan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3085755">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="3085811">func</span>&nbsp;<span class="ident" id="3085816">Sscanln</span><span class="op" id="3085823">(</span><span class="ident" id="3085824">str</span>&nbsp;<span class="builtintype" id="3085828">string</span><span class="op" id="3085834">,</span>&nbsp;<span class="ident" id="3085836">a</span>&nbsp;<span class="op" id="3085838">...</span><span class="keyword" id="3085841">interface</span><span class="op" id="3085850">{</span><span class="op" id="3085851">}</span><span class="op" id="3085852">)</span>&nbsp;<span class="op" id="3085854">(</span><span class="ident" id="3085855">n</span>&nbsp;<span class="builtintype" id="3085857">int</span><span class="op" id="3085860">,</span>&nbsp;<span class="ident" id="3085862">err</span>&nbsp;<span class="builtintype" id="3085866">error</span><span class="op" id="3085871">)</span>&nbsp;<span class="op" id="3085873">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3085876">return</span>&nbsp;<span class="ident" id="3085883"><a href="/fmt/scan.go.html#3086786">Fscanln</a></span><span class="op" id="3085890">(</span><span class="op" id="3085891">(</span><span class="op" id="3085892">*</span><span class="ident" id="3085893"><a href="/fmt/scan.go.html#3085163">stringReader</a></span><span class="op" id="3085905">)</span><span class="op" id="3085906">(</span><span class="op" id="3085907">&amp;</span><span class="ident" id="3085908"><a href="/fmt/scan.go.html#3085824">str</a></span><span class="op" id="3085911">)</span><span class="op" id="3085912">,</span>&nbsp;<span class="ident" id="3085914"><a href="/fmt/scan.go.html#3085836">a</a></span><span class="op" id="3085915">...</span><span class="op" id="3085918">)</span><br>
<span class="lineno"></span><span class="op" id="3085920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3085923">//&nbsp;Sscanf&nbsp;scans&nbsp;the&nbsp;argument&nbsp;string,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="3085995">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by&nbsp;the&nbsp;format.&nbsp;&nbsp;It</span><br>
<span class="lineno">115</span><span class="comment" id="3086064">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="3086116">func</span>&nbsp;<span class="ident" id="3086121">Sscanf</span><span class="op" id="3086127">(</span><span class="ident" id="3086128">str</span>&nbsp;<span class="builtintype" id="3086132">string</span><span class="op" id="3086138">,</span>&nbsp;<span class="ident" id="3086140">format</span>&nbsp;<span class="builtintype" id="3086147">string</span><span class="op" id="3086153">,</span>&nbsp;<span class="ident" id="3086155">a</span>&nbsp;<span class="op" id="3086157">...</span><span class="keyword" id="3086160">interface</span><span class="op" id="3086169">{</span><span class="op" id="3086170">}</span><span class="op" id="3086171">)</span>&nbsp;<span class="op" id="3086173">(</span><span class="ident" id="3086174">n</span>&nbsp;<span class="builtintype" id="3086176">int</span><span class="op" id="3086179">,</span>&nbsp;<span class="ident" id="3086181">err</span>&nbsp;<span class="builtintype" id="3086185">error</span><span class="op" id="3086190">)</span>&nbsp;<span class="op" id="3086192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3086195">return</span>&nbsp;<span class="ident" id="3086202"><a href="/fmt/scan.go.html#3087127">Fscanf</a></span><span class="op" id="3086208">(</span><span class="op" id="3086209">(</span><span class="op" id="3086210">*</span><span class="ident" id="3086211"><a href="/fmt/scan.go.html#3085163">stringReader</a></span><span class="op" id="3086223">)</span><span class="op" id="3086224">(</span><span class="op" id="3086225">&amp;</span><span class="ident" id="3086226"><a href="/fmt/scan.go.html#3086128">str</a></span><span class="op" id="3086229">)</span><span class="op" id="3086230">,</span>&nbsp;<span class="ident" id="3086232"><a href="/fmt/scan.go.html#3086140">format</a></span><span class="op" id="3086238">,</span>&nbsp;<span class="ident" id="3086240"><a href="/fmt/scan.go.html#3086155">a</a></span><span class="op" id="3086241">...</span><span class="op" id="3086244">)</span><br>
<span class="lineno"></span><span class="op" id="3086246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3086249">//&nbsp;Fscan&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;r,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="3086317">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count&nbsp;as&nbsp;space.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="3086384">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="3086454">//&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="3086508">func</span>&nbsp;<span class="ident" id="3086513">Fscan</span><span class="op" id="3086518">(</span><span class="ident" id="3086519">r</span>&nbsp;<span class="ident" id="3086521"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3086523">.</span><span class="ident" id="3086524">Reader</span><span class="op" id="3086530">,</span>&nbsp;<span class="ident" id="3086532">a</span>&nbsp;<span class="op" id="3086534">...</span><span class="keyword" id="3086537">interface</span><span class="op" id="3086546">{</span><span class="op" id="3086547">}</span><span class="op" id="3086548">)</span>&nbsp;<span class="op" id="3086550">(</span><span class="ident" id="3086551">n</span>&nbsp;<span class="builtintype" id="3086553">int</span><span class="op" id="3086556">,</span>&nbsp;<span class="ident" id="3086558">err</span>&nbsp;<span class="builtintype" id="3086562">error</span><span class="op" id="3086567">)</span>&nbsp;<span class="op" id="3086569">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3086572">s</span><span class="op" id="3086573">,</span>&nbsp;<span class="ident" id="3086575">old</span>&nbsp;<span class="op" id="3086579">:=</span>&nbsp;<span class="ident" id="3086582"><a href="/fmt/scan.go.html#3092852">newScanState</a></span><span class="op" id="3086594">(</span><span class="ident" id="3086595"><a href="/fmt/scan.go.html#3086519">r</a></span><span class="op" id="3086596">,</span>&nbsp;<span class="builtintype" id="3086598">true</span><span class="op" id="3086602">,</span>&nbsp;<span class="builtintype" id="3086604">false</span><span class="op" id="3086609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3086612"><a href="/fmt/scan.go.html#3086551">n</a></span><span class="op" id="3086613">,</span>&nbsp;<span class="ident" id="3086615"><a href="/fmt/scan.go.html#3086558">err</a></span>&nbsp;<span class="op" id="3086619">=</span>&nbsp;<span class="ident" id="3086621"><a href="/fmt/scan.go.html#3086572">s</a></span><span class="op" id="3086622">.</span><span class="ident" id="3086623">doScan</span><span class="op" id="3086629">(</span><span class="ident" id="3086630"><a href="/fmt/scan.go.html#3086532">a</a></span><span class="op" id="3086631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3086634"><a href="/fmt/scan.go.html#3086572">s</a></span><span class="op" id="3086635">.</span><span class="ident" id="3086636">free</span><span class="op" id="3086640">(</span><span class="ident" id="3086641"><a href="/fmt/scan.go.html#3086575">old</a></span><span class="op" id="3086644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3086647">return</span><br>
<span class="lineno"></span><span class="op" id="3086654">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="3086657">//&nbsp;Fscanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Fscan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3086725">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="3086781">func</span>&nbsp;<span class="ident" id="3086786">Fscanln</span><span class="op" id="3086793">(</span><span class="ident" id="3086794">r</span>&nbsp;<span class="ident" id="3086796"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3086798">.</span><span class="ident" id="3086799">Reader</span><span class="op" id="3086805">,</span>&nbsp;<span class="ident" id="3086807">a</span>&nbsp;<span class="op" id="3086809">...</span><span class="keyword" id="3086812">interface</span><span class="op" id="3086821">{</span><span class="op" id="3086822">}</span><span class="op" id="3086823">)</span>&nbsp;<span class="op" id="3086825">(</span><span class="ident" id="3086826">n</span>&nbsp;<span class="builtintype" id="3086828">int</span><span class="op" id="3086831">,</span>&nbsp;<span class="ident" id="3086833">err</span>&nbsp;<span class="builtintype" id="3086837">error</span><span class="op" id="3086842">)</span>&nbsp;<span class="op" id="3086844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3086847">s</span><span class="op" id="3086848">,</span>&nbsp;<span class="ident" id="3086850">old</span>&nbsp;<span class="op" id="3086854">:=</span>&nbsp;<span class="ident" id="3086857"><a href="/fmt/scan.go.html#3092852">newScanState</a></span><span class="op" id="3086869">(</span><span class="ident" id="3086870"><a href="/fmt/scan.go.html#3086794">r</a></span><span class="op" id="3086871">,</span>&nbsp;<span class="builtintype" id="3086873">false</span><span class="op" id="3086878">,</span>&nbsp;<span class="builtintype" id="3086880">true</span><span class="op" id="3086884">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3086887"><a href="/fmt/scan.go.html#3086826">n</a></span><span class="op" id="3086888">,</span>&nbsp;<span class="ident" id="3086890"><a href="/fmt/scan.go.html#3086833">err</a></span>&nbsp;<span class="op" id="3086894">=</span>&nbsp;<span class="ident" id="3086896"><a href="/fmt/scan.go.html#3086847">s</a></span><span class="op" id="3086897">.</span><span class="ident" id="3086898">doScan</span><span class="op" id="3086904">(</span><span class="ident" id="3086905"><a href="/fmt/scan.go.html#3086807">a</a></span><span class="op" id="3086906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3086909"><a href="/fmt/scan.go.html#3086847">s</a></span><span class="op" id="3086910">.</span><span class="ident" id="3086911">free</span><span class="op" id="3086915">(</span><span class="ident" id="3086916"><a href="/fmt/scan.go.html#3086850">old</a></span><span class="op" id="3086919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3086922">return</span><br>
<span class="lineno"></span><span class="op" id="3086929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="3086932">//&nbsp;Fscanf&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;r,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="3087001">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by&nbsp;the&nbsp;format.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="3087070">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="3087122">func</span>&nbsp;<span class="ident" id="3087127">Fscanf</span><span class="op" id="3087133">(</span><span class="ident" id="3087134">r</span>&nbsp;<span class="ident" id="3087136"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3087138">.</span><span class="ident" id="3087139">Reader</span><span class="op" id="3087145">,</span>&nbsp;<span class="ident" id="3087147">format</span>&nbsp;<span class="builtintype" id="3087154">string</span><span class="op" id="3087160">,</span>&nbsp;<span class="ident" id="3087162">a</span>&nbsp;<span class="op" id="3087164">...</span><span class="keyword" id="3087167">interface</span><span class="op" id="3087176">{</span><span class="op" id="3087177">}</span><span class="op" id="3087178">)</span>&nbsp;<span class="op" id="3087180">(</span><span class="ident" id="3087181">n</span>&nbsp;<span class="builtintype" id="3087183">int</span><span class="op" id="3087186">,</span>&nbsp;<span class="ident" id="3087188">err</span>&nbsp;<span class="builtintype" id="3087192">error</span><span class="op" id="3087197">)</span>&nbsp;<span class="op" id="3087199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087202">s</span><span class="op" id="3087203">,</span>&nbsp;<span class="ident" id="3087205">old</span>&nbsp;<span class="op" id="3087209">:=</span>&nbsp;<span class="ident" id="3087212"><a href="/fmt/scan.go.html#3092852">newScanState</a></span><span class="op" id="3087224">(</span><span class="ident" id="3087225"><a href="/fmt/scan.go.html#3087134">r</a></span><span class="op" id="3087226">,</span>&nbsp;<span class="builtintype" id="3087228">false</span><span class="op" id="3087233">,</span>&nbsp;<span class="builtintype" id="3087235">false</span><span class="op" id="3087240">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087243"><a href="/fmt/scan.go.html#3087181">n</a></span><span class="op" id="3087244">,</span>&nbsp;<span class="ident" id="3087246"><a href="/fmt/scan.go.html#3087188">err</a></span>&nbsp;<span class="op" id="3087250">=</span>&nbsp;<span class="ident" id="3087252"><a href="/fmt/scan.go.html#3087202">s</a></span><span class="op" id="3087253">.</span><span class="ident" id="3087254">doScanf</span><span class="op" id="3087261">(</span><span class="ident" id="3087262"><a href="/fmt/scan.go.html#3087147">format</a></span><span class="op" id="3087268">,</span>&nbsp;<span class="ident" id="3087270"><a href="/fmt/scan.go.html#3087162">a</a></span><span class="op" id="3087271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087274"><a href="/fmt/scan.go.html#3087202">s</a></span><span class="op" id="3087275">.</span><span class="ident" id="3087276">free</span><span class="op" id="3087280">(</span><span class="ident" id="3087281"><a href="/fmt/scan.go.html#3087205">old</a></span><span class="op" id="3087284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3087287">return</span><br>
<span class="lineno"></span><span class="op" id="3087294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="3087297">//&nbsp;scanError&nbsp;represents&nbsp;an&nbsp;error&nbsp;generated&nbsp;by&nbsp;the&nbsp;scanning&nbsp;software.</span><br>
<span class="lineno"></span><span class="comment" id="3087366">//&nbsp;It&#39;s&nbsp;used&nbsp;as&nbsp;a&nbsp;unique&nbsp;signature&nbsp;to&nbsp;identify&nbsp;such&nbsp;errors&nbsp;when&nbsp;recovering.</span><br>
<span class="lineno"></span><span class="keyword" id="3087442">type</span>&nbsp;<span class="ident" id="3087447">scanError</span>&nbsp;<span class="keyword" id="3087457">struct</span>&nbsp;<span class="op" id="3087464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087467">err</span>&nbsp;<span class="builtintype" id="3087471">error</span><br>
<span class="lineno"></span><span class="op" id="3087477">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="3087480">const</span>&nbsp;<span class="ident" id="3087486">eof</span>&nbsp;<span class="op" id="3087490">=</span>&nbsp;<span class="op" id="3087492">-</span><span class="num" id="3087493">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3087496">//&nbsp;ss&nbsp;is&nbsp;the&nbsp;internal&nbsp;implementation&nbsp;of&nbsp;ScanState.</span><br>
<span class="lineno"></span><span class="keyword" id="3087547">type</span>&nbsp;<span class="ident" id="3087552">ss</span>&nbsp;<span class="keyword" id="3087555">struct</span>&nbsp;<span class="op" id="3087562">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087565">rr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3087574"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3087576">.</span><span class="ident" id="3087577">RuneReader</span>&nbsp;<span class="comment" id="3087588">//&nbsp;where&nbsp;to&nbsp;read&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087612">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3087621"><a href="/fmt/print.go.html#3053682">buffer</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3087635">//&nbsp;token&nbsp;accumulator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087657">peekRune</span>&nbsp;<span class="builtintype" id="3087666">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3087680">//&nbsp;one-rune&nbsp;lookahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087703">prevRune</span>&nbsp;<span class="builtintype" id="3087712">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3087726">//&nbsp;last&nbsp;rune&nbsp;returned&nbsp;by&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087761">count</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3087770">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3087784">//&nbsp;runes&nbsp;consumed&nbsp;so&nbsp;far.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087811">atEOF</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3087820">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3087834">//&nbsp;already&nbsp;read&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087855"><a href="/fmt/scan.go.html#3087958">ssave</a></span><br>
<span class="lineno"></span><span class="op" id="3087861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3087864">//&nbsp;ssave&nbsp;holds&nbsp;the&nbsp;parts&nbsp;of&nbsp;ss&nbsp;that&nbsp;need&nbsp;to&nbsp;be</span><br>
<span class="lineno">170</span><span class="comment" id="3087911">//&nbsp;saved&nbsp;and&nbsp;restored&nbsp;on&nbsp;recursive&nbsp;scans.</span><br>
<span class="lineno"></span><span class="keyword" id="3087953">type</span>&nbsp;<span class="ident" id="3087958">ssave</span>&nbsp;<span class="keyword" id="3087964">struct</span>&nbsp;<span class="op" id="3087971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3087974">validSave</span>&nbsp;<span class="builtintype" id="3087984">bool</span>&nbsp;<span class="comment" id="3087989">//&nbsp;is&nbsp;or&nbsp;was&nbsp;a&nbsp;part&nbsp;of&nbsp;an&nbsp;actual&nbsp;ss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088027">nlIsEnd</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3088037">bool</span>&nbsp;<span class="comment" id="3088042">//&nbsp;whether&nbsp;newline&nbsp;terminates&nbsp;scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088078">nlIsSpace</span>&nbsp;<span class="builtintype" id="3088088">bool</span>&nbsp;<span class="comment" id="3088093">//&nbsp;whether&nbsp;newline&nbsp;counts&nbsp;as&nbsp;white&nbsp;space</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088135">argLimit</span>&nbsp;&nbsp;<span class="builtintype" id="3088145">int</span>&nbsp;&nbsp;<span class="comment" id="3088150">//&nbsp;max&nbsp;value&nbsp;of&nbsp;ss.count&nbsp;for&nbsp;this&nbsp;arg;&nbsp;argLimit&nbsp;&lt;=&nbsp;limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088208">limit</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3088218">int</span>&nbsp;&nbsp;<span class="comment" id="3088223">//&nbsp;max&nbsp;value&nbsp;of&nbsp;ss.count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088250">maxWid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3088260">int</span>&nbsp;&nbsp;<span class="comment" id="3088265">//&nbsp;width&nbsp;of&nbsp;this&nbsp;arg.</span><br>
<span class="lineno"></span><span class="op" id="3088287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="3088290">//&nbsp;The&nbsp;Read&nbsp;method&nbsp;is&nbsp;only&nbsp;in&nbsp;ScanState&nbsp;so&nbsp;that&nbsp;ScanState</span><br>
<span class="lineno"></span><span class="comment" id="3088348">//&nbsp;satisfies&nbsp;io.Reader.&nbsp;It&nbsp;will&nbsp;never&nbsp;be&nbsp;called&nbsp;when&nbsp;used&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3088409">//&nbsp;intended,&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;to&nbsp;make&nbsp;it&nbsp;actually&nbsp;work.</span><br>
<span class="lineno"></span><span class="keyword" id="3088468">func</span>&nbsp;<span class="op" id="3088473">(</span><span class="ident" id="3088474">s</span>&nbsp;<span class="op" id="3088476">*</span><span class="ident" id="3088477"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3088479">)</span>&nbsp;<span class="ident" id="3088481">Read</span><span class="op" id="3088485">(</span><span class="ident" id="3088486">buf</span>&nbsp;<span class="op" id="3088490">[</span><span class="op" id="3088491">]</span><span class="builtintype" id="3088492">byte</span><span class="op" id="3088496">)</span>&nbsp;<span class="op" id="3088498">(</span><span class="ident" id="3088499">n</span>&nbsp;<span class="builtintype" id="3088501">int</span><span class="op" id="3088504">,</span>&nbsp;<span class="ident" id="3088506">err</span>&nbsp;<span class="builtintype" id="3088510">error</span><span class="op" id="3088515">)</span>&nbsp;<span class="op" id="3088517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3088520">return</span>&nbsp;<span class="num" id="3088527">0</span><span class="op" id="3088528">,</span>&nbsp;<span class="ident" id="3088530"><a href="/fmt/scan.go.html#3081773">errors</a></span><span class="op" id="3088536">.</span><span class="ident" id="3088537">New</span><span class="op" id="3088540">(</span><span class="string" id="3088541">&#34;ScanState&#39;s&nbsp;Read&nbsp;should&nbsp;not&nbsp;be&nbsp;called.&nbsp;Use&nbsp;ReadRune&#34;</span><span class="op" id="3088594">)</span><br>
<span class="lineno">185</span><span class="op" id="3088596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3088599">func</span>&nbsp;<span class="op" id="3088604">(</span><span class="ident" id="3088605">s</span>&nbsp;<span class="op" id="3088607">*</span><span class="ident" id="3088608"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3088610">)</span>&nbsp;<span class="ident" id="3088612">ReadRune</span><span class="op" id="3088620">(</span><span class="op" id="3088621">)</span>&nbsp;<span class="op" id="3088623">(</span><span class="ident" id="3088624">r</span>&nbsp;<span class="builtintype" id="3088626">rune</span><span class="op" id="3088630">,</span>&nbsp;<span class="ident" id="3088632">size</span>&nbsp;<span class="builtintype" id="3088637">int</span><span class="op" id="3088640">,</span>&nbsp;<span class="ident" id="3088642">err</span>&nbsp;<span class="builtintype" id="3088646">error</span><span class="op" id="3088651">)</span>&nbsp;<span class="op" id="3088653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3088656">if</span>&nbsp;<span class="ident" id="3088659"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088660">.</span><span class="ident" id="3088661">peekRune</span>&nbsp;<span class="op" id="3088670">&gt;=</span>&nbsp;<span class="num" id="3088673">0</span>&nbsp;<span class="op" id="3088675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088679"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088680">.</span><span class="ident" id="3088681">count</span><span class="op" id="3088686">++</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088691"><a href="/fmt/scan.go.html#3088624">r</a></span>&nbsp;<span class="op" id="3088693">=</span>&nbsp;<span class="ident" id="3088695"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088696">.</span><span class="ident" id="3088697">peekRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088708"><a href="/fmt/scan.go.html#3088632">size</a></span>&nbsp;<span class="op" id="3088713">=</span>&nbsp;<span class="ident" id="3088715"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3088719">.</span><span class="ident" id="3088720">RuneLen</span><span class="op" id="3088727">(</span><span class="ident" id="3088728"><a href="/fmt/scan.go.html#3088624">r</a></span><span class="op" id="3088729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088733"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088734">.</span><span class="ident" id="3088735">prevRune</span>&nbsp;<span class="op" id="3088744">=</span>&nbsp;<span class="ident" id="3088746"><a href="/fmt/scan.go.html#3088624">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088750"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088751">.</span><span class="ident" id="3088752">peekRune</span>&nbsp;<span class="op" id="3088761">=</span>&nbsp;<span class="op" id="3088763">-</span><span class="num" id="3088764">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3088768">return</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3088776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3088779">if</span>&nbsp;<span class="ident" id="3088782"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088783">.</span><span class="ident" id="3088784">atEOF</span>&nbsp;<span class="op" id="3088790">||</span>&nbsp;<span class="ident" id="3088793"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088794">.</span><span class="ident" id="3088795">nlIsEnd</span>&nbsp;<span class="op" id="3088803">&amp;&amp;</span>&nbsp;<span class="ident" id="3088806"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088807">.</span><span class="ident" id="3088808">prevRune</span>&nbsp;<span class="op" id="3088817">==</span>&nbsp;<span class="string" id="3088820">&#39;\n&#39;</span>&nbsp;<span class="op" id="3088825">||</span>&nbsp;<span class="ident" id="3088828"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088829">.</span><span class="ident" id="3088830">count</span>&nbsp;<span class="op" id="3088836">&gt;=</span>&nbsp;<span class="ident" id="3088839"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088840">.</span><span class="ident" id="3088841">argLimit</span>&nbsp;<span class="op" id="3088850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088854"><a href="/fmt/scan.go.html#3088642">err</a></span>&nbsp;<span class="op" id="3088858">=</span>&nbsp;<span class="ident" id="3088860"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3088862">.</span><span class="ident" id="3088863">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3088869">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3088877">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088881"><a href="/fmt/scan.go.html#3088624">r</a></span><span class="op" id="3088882">,</span>&nbsp;<span class="ident" id="3088884"><a href="/fmt/scan.go.html#3088632">size</a></span><span class="op" id="3088888">,</span>&nbsp;<span class="ident" id="3088890"><a href="/fmt/scan.go.html#3088642">err</a></span>&nbsp;<span class="op" id="3088894">=</span>&nbsp;<span class="ident" id="3088896"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088897">.</span><span class="ident" id="3088898">rr</span><span class="op" id="3088900">.</span><span class="ident" id="3088901">ReadRune</span><span class="op" id="3088909">(</span><span class="op" id="3088910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3088913">if</span>&nbsp;<span class="ident" id="3088916"><a href="/fmt/scan.go.html#3088642">err</a></span>&nbsp;<span class="op" id="3088920">==</span>&nbsp;<span class="ident" id="3088923">nil</span>&nbsp;<span class="op" id="3088927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088931"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088932">.</span><span class="ident" id="3088933">count</span><span class="op" id="3088938">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088943"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088944">.</span><span class="ident" id="3088945">prevRune</span>&nbsp;<span class="op" id="3088954">=</span>&nbsp;<span class="ident" id="3088956"><a href="/fmt/scan.go.html#3088624">r</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3088959">}</span>&nbsp;<span class="keyword" id="3088961">else</span>&nbsp;<span class="keyword" id="3088966">if</span>&nbsp;<span class="ident" id="3088969"><a href="/fmt/scan.go.html#3088642">err</a></span>&nbsp;<span class="op" id="3088973">==</span>&nbsp;<span class="ident" id="3088976"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3088978">.</span><span class="ident" id="3088979">EOF</span>&nbsp;<span class="op" id="3088983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3088987"><a href="/fmt/scan.go.html#3088605">s</a></span><span class="op" id="3088988">.</span><span class="ident" id="3088989">atEOF</span>&nbsp;<span class="op" id="3088995">=</span>&nbsp;<span class="builtintype" id="3088997">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089006">return</span><br>
<span class="lineno"></span><span class="op" id="3089013">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="3089016">func</span>&nbsp;<span class="op" id="3089021">(</span><span class="ident" id="3089022">s</span>&nbsp;<span class="op" id="3089024">*</span><span class="ident" id="3089025"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3089027">)</span>&nbsp;<span class="ident" id="3089029">Width</span><span class="op" id="3089034">(</span><span class="op" id="3089035">)</span>&nbsp;<span class="op" id="3089037">(</span><span class="ident" id="3089038">wid</span>&nbsp;<span class="builtintype" id="3089042">int</span><span class="op" id="3089045">,</span>&nbsp;<span class="ident" id="3089047">ok</span>&nbsp;<span class="builtintype" id="3089050">bool</span><span class="op" id="3089054">)</span>&nbsp;<span class="op" id="3089056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089059">if</span>&nbsp;<span class="ident" id="3089062"><a href="/fmt/scan.go.html#3089022">s</a></span><span class="op" id="3089063">.</span><span class="ident" id="3089064">maxWid</span>&nbsp;<span class="op" id="3089071">==</span>&nbsp;<span class="ident" id="3089074"><a href="/fmt/scan.go.html#3105595">hugeWid</a></span>&nbsp;<span class="op" id="3089082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089086">return</span>&nbsp;<span class="num" id="3089093">0</span><span class="op" id="3089094">,</span>&nbsp;<span class="builtintype" id="3089096">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089103">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089106">return</span>&nbsp;<span class="ident" id="3089113"><a href="/fmt/scan.go.html#3089022">s</a></span><span class="op" id="3089114">.</span><span class="ident" id="3089115">maxWid</span><span class="op" id="3089121">,</span>&nbsp;<span class="builtintype" id="3089123">true</span><br>
<span class="lineno"></span><span class="op" id="3089128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3089131">//&nbsp;The&nbsp;public&nbsp;method&nbsp;returns&nbsp;an&nbsp;error;&nbsp;this&nbsp;private&nbsp;one&nbsp;panics.</span><br>
<span class="lineno"></span><span class="comment" id="3089195">//&nbsp;If&nbsp;getRune&nbsp;reaches&nbsp;EOF,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;EOF&nbsp;(-1).</span><br>
<span class="lineno">220</span><span class="keyword" id="3089252">func</span>&nbsp;<span class="op" id="3089257">(</span><span class="ident" id="3089258">s</span>&nbsp;<span class="op" id="3089260">*</span><span class="ident" id="3089261"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3089263">)</span>&nbsp;<span class="ident" id="3089265">getRune</span><span class="op" id="3089272">(</span><span class="op" id="3089273">)</span>&nbsp;<span class="op" id="3089275">(</span><span class="ident" id="3089276">r</span>&nbsp;<span class="builtintype" id="3089278">rune</span><span class="op" id="3089282">)</span>&nbsp;<span class="op" id="3089284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089287"><a href="/fmt/scan.go.html#3089276">r</a></span><span class="op" id="3089288">,</span>&nbsp;<span class="ident" id="3089290">_</span><span class="op" id="3089291">,</span>&nbsp;<span class="ident" id="3089293">err</span>&nbsp;<span class="op" id="3089297">:=</span>&nbsp;<span class="ident" id="3089300"><a href="/fmt/scan.go.html#3089258">s</a></span><span class="op" id="3089301">.</span><span class="ident" id="3089302">ReadRune</span><span class="op" id="3089310">(</span><span class="op" id="3089311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089314">if</span>&nbsp;<span class="ident" id="3089317"><a href="/fmt/scan.go.html#3089293">err</a></span>&nbsp;<span class="op" id="3089321">!=</span>&nbsp;<span class="ident" id="3089324">nil</span>&nbsp;<span class="op" id="3089328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089332">if</span>&nbsp;<span class="ident" id="3089335"><a href="/fmt/scan.go.html#3089293">err</a></span>&nbsp;<span class="op" id="3089339">==</span>&nbsp;<span class="ident" id="3089342"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3089344">.</span><span class="ident" id="3089345">EOF</span>&nbsp;<span class="op" id="3089349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089354">return</span>&nbsp;<span class="ident" id="3089361"><a href="/fmt/scan.go.html#3087486">eof</a></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089371"><a href="/fmt/scan.go.html#3089258">s</a></span><span class="op" id="3089372">.</span><span class="builtintype" id="3089373">error</span><span class="op" id="3089378">(</span><span class="ident" id="3089379"><a href="/fmt/scan.go.html#3089293">err</a></span><span class="op" id="3089382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089388">return</span><br>
<span class="lineno"></span><span class="op" id="3089395">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="3089398">//&nbsp;mustReadRune&nbsp;turns&nbsp;io.EOF&nbsp;into&nbsp;a&nbsp;panic(io.ErrUnexpectedEOF).</span><br>
<span class="lineno"></span><span class="comment" id="3089462">//&nbsp;It&nbsp;is&nbsp;called&nbsp;in&nbsp;cases&nbsp;such&nbsp;as&nbsp;string&nbsp;scanning&nbsp;where&nbsp;an&nbsp;EOF&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3089529">//&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3089546">func</span>&nbsp;<span class="op" id="3089551">(</span><span class="ident" id="3089552">s</span>&nbsp;<span class="op" id="3089554">*</span><span class="ident" id="3089555"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3089557">)</span>&nbsp;<span class="ident" id="3089559">mustReadRune</span><span class="op" id="3089571">(</span><span class="op" id="3089572">)</span>&nbsp;<span class="op" id="3089574">(</span><span class="ident" id="3089575">r</span>&nbsp;<span class="builtintype" id="3089577">rune</span><span class="op" id="3089581">)</span>&nbsp;<span class="op" id="3089583">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089586"><a href="/fmt/scan.go.html#3089575">r</a></span>&nbsp;<span class="op" id="3089588">=</span>&nbsp;<span class="ident" id="3089590"><a href="/fmt/scan.go.html#3089552">s</a></span><span class="op" id="3089591">.</span><span class="ident" id="3089592">getRune</span><span class="op" id="3089599">(</span><span class="op" id="3089600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089603">if</span>&nbsp;<span class="ident" id="3089606"><a href="/fmt/scan.go.html#3089575">r</a></span>&nbsp;<span class="op" id="3089608">==</span>&nbsp;<span class="ident" id="3089611"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3089615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089619"><a href="/fmt/scan.go.html#3089552">s</a></span><span class="op" id="3089620">.</span><span class="builtintype" id="3089621">error</span><span class="op" id="3089626">(</span><span class="ident" id="3089627"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3089629">.</span><span class="ident" id="3089630">ErrUnexpectedEOF</span><span class="op" id="3089646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089652">return</span><br>
<span class="lineno">240</span><span class="op" id="3089659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3089662">func</span>&nbsp;<span class="op" id="3089667">(</span><span class="ident" id="3089668">s</span>&nbsp;<span class="op" id="3089670">*</span><span class="ident" id="3089671"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3089673">)</span>&nbsp;<span class="ident" id="3089675">UnreadRune</span><span class="op" id="3089685">(</span><span class="op" id="3089686">)</span>&nbsp;<span class="builtintype" id="3089688">error</span>&nbsp;<span class="op" id="3089694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089697">if</span>&nbsp;<span class="ident" id="3089700">u</span><span class="op" id="3089701">,</span>&nbsp;<span class="ident" id="3089703">ok</span>&nbsp;<span class="op" id="3089706">:=</span>&nbsp;<span class="ident" id="3089709"><a href="/fmt/scan.go.html#3089668">s</a></span><span class="op" id="3089710">.</span><span class="ident" id="3089711">rr</span><span class="op" id="3089713">.</span><span class="op" id="3089714">(</span><span class="ident" id="3089715"><a href="/fmt/scan.go.html#3082097">runeUnreader</a></span><span class="op" id="3089727">)</span><span class="op" id="3089728">;</span>&nbsp;<span class="ident" id="3089730"><a href="/fmt/scan.go.html#3089703">ok</a></span>&nbsp;<span class="op" id="3089733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089737"><a href="/fmt/scan.go.html#3089700">u</a></span><span class="op" id="3089738">.</span><span class="ident" id="3089739">UnreadRune</span><span class="op" id="3089749">(</span><span class="op" id="3089750">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089753">}</span>&nbsp;<span class="keyword" id="3089755">else</span>&nbsp;<span class="op" id="3089760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089764"><a href="/fmt/scan.go.html#3089668">s</a></span><span class="op" id="3089765">.</span><span class="ident" id="3089766">peekRune</span>&nbsp;<span class="op" id="3089775">=</span>&nbsp;<span class="ident" id="3089777"><a href="/fmt/scan.go.html#3089668">s</a></span><span class="op" id="3089778">.</span><span class="ident" id="3089779">prevRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089792"><a href="/fmt/scan.go.html#3089668">s</a></span><span class="op" id="3089793">.</span><span class="ident" id="3089794">prevRune</span>&nbsp;<span class="op" id="3089803">=</span>&nbsp;<span class="op" id="3089805">-</span><span class="num" id="3089806">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089809"><a href="/fmt/scan.go.html#3089668">s</a></span><span class="op" id="3089810">.</span><span class="ident" id="3089811">count</span><span class="op" id="3089816">--</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089820">return</span>&nbsp;<span class="ident" id="3089827">nil</span><br>
<span class="lineno"></span><span class="op" id="3089831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3089834">func</span>&nbsp;<span class="op" id="3089839">(</span><span class="ident" id="3089840">s</span>&nbsp;<span class="op" id="3089842">*</span><span class="ident" id="3089843"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3089845">)</span>&nbsp;<span class="builtintype" id="3089847">error</span><span class="op" id="3089852">(</span><span class="ident" id="3089853">err</span>&nbsp;<span class="builtintype" id="3089857">error</span><span class="op" id="3089862">)</span>&nbsp;<span class="op" id="3089864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3089867">panic</span><span class="op" id="3089872">(</span><span class="ident" id="3089873"><a href="/fmt/scan.go.html#3087447">scanError</a></span><span class="op" id="3089882">{</span><span class="ident" id="3089883"><a href="/fmt/scan.go.html#3089853">err</a></span><span class="op" id="3089886">}</span><span class="op" id="3089887">)</span><br>
<span class="lineno">255</span><span class="op" id="3089889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3089892">func</span>&nbsp;<span class="op" id="3089897">(</span><span class="ident" id="3089898">s</span>&nbsp;<span class="op" id="3089900">*</span><span class="ident" id="3089901"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3089903">)</span>&nbsp;<span class="ident" id="3089905">errorString</span><span class="op" id="3089916">(</span><span class="ident" id="3089917">err</span>&nbsp;<span class="builtintype" id="3089921">string</span><span class="op" id="3089927">)</span>&nbsp;<span class="op" id="3089929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3089932">panic</span><span class="op" id="3089937">(</span><span class="ident" id="3089938"><a href="/fmt/scan.go.html#3087447">scanError</a></span><span class="op" id="3089947">{</span><span class="ident" id="3089948"><a href="/fmt/scan.go.html#3081773">errors</a></span><span class="op" id="3089954">.</span><span class="ident" id="3089955">New</span><span class="op" id="3089958">(</span><span class="ident" id="3089959"><a href="/fmt/scan.go.html#3089917">err</a></span><span class="op" id="3089962">)</span><span class="op" id="3089963">}</span><span class="op" id="3089964">)</span><br>
<span class="lineno"></span><span class="op" id="3089966">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="3089969">func</span>&nbsp;<span class="op" id="3089974">(</span><span class="ident" id="3089975">s</span>&nbsp;<span class="op" id="3089977">*</span><span class="ident" id="3089978"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3089980">)</span>&nbsp;<span class="ident" id="3089982">Token</span><span class="op" id="3089987">(</span><span class="ident" id="3089988">skipSpace</span>&nbsp;<span class="builtintype" id="3089998">bool</span><span class="op" id="3090002">,</span>&nbsp;<span class="ident" id="3090004">f</span>&nbsp;<span class="keyword" id="3090006">func</span><span class="op" id="3090010">(</span><span class="builtintype" id="3090011">rune</span><span class="op" id="3090015">)</span>&nbsp;<span class="builtintype" id="3090017">bool</span><span class="op" id="3090021">)</span>&nbsp;<span class="op" id="3090023">(</span><span class="ident" id="3090024">tok</span>&nbsp;<span class="op" id="3090028">[</span><span class="op" id="3090029">]</span><span class="builtintype" id="3090030">byte</span><span class="op" id="3090034">,</span>&nbsp;<span class="ident" id="3090036">err</span>&nbsp;<span class="builtintype" id="3090040">error</span><span class="op" id="3090045">)</span>&nbsp;<span class="op" id="3090047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090050">defer</span>&nbsp;<span class="keyword" id="3090056">func</span><span class="op" id="3090060">(</span><span class="op" id="3090061">)</span>&nbsp;<span class="op" id="3090063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090067">if</span>&nbsp;<span class="ident" id="3090070">e</span>&nbsp;<span class="op" id="3090072">:=</span>&nbsp;<span class="builtinfunc" id="3090075">recover</span><span class="op" id="3090082">(</span><span class="op" id="3090083">)</span><span class="op" id="3090084">;</span>&nbsp;<span class="ident" id="3090086"><a href="/fmt/scan.go.html#3090070">e</a></span>&nbsp;<span class="op" id="3090088">!=</span>&nbsp;<span class="ident" id="3090091">nil</span>&nbsp;<span class="op" id="3090095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090100">if</span>&nbsp;<span class="ident" id="3090103">se</span><span class="op" id="3090105">,</span>&nbsp;<span class="ident" id="3090107">ok</span>&nbsp;<span class="op" id="3090110">:=</span>&nbsp;<span class="ident" id="3090113"><a href="/fmt/scan.go.html#3090070">e</a></span><span class="op" id="3090114">.</span><span class="op" id="3090115">(</span><span class="ident" id="3090116"><a href="/fmt/scan.go.html#3087447">scanError</a></span><span class="op" id="3090125">)</span><span class="op" id="3090126">;</span>&nbsp;<span class="ident" id="3090128"><a href="/fmt/scan.go.html#3090107">ok</a></span>&nbsp;<span class="op" id="3090131">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090137"><a href="/fmt/scan.go.html#3090036">err</a></span>&nbsp;<span class="op" id="3090141">=</span>&nbsp;<span class="ident" id="3090143"><a href="/fmt/scan.go.html#3090103">se</a></span><span class="op" id="3090145">.</span><span class="ident" id="3090146">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090153">}</span>&nbsp;<span class="keyword" id="3090155">else</span>&nbsp;<span class="op" id="3090160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3090166">panic</span><span class="op" id="3090171">(</span><span class="ident" id="3090172"><a href="/fmt/scan.go.html#3090070">e</a></span><span class="op" id="3090173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090182">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090185">}</span><span class="op" id="3090186">(</span><span class="op" id="3090187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090190">if</span>&nbsp;<span class="ident" id="3090193"><a href="/fmt/scan.go.html#3090004">f</a></span>&nbsp;<span class="op" id="3090195">==</span>&nbsp;<span class="ident" id="3090198">nil</span>&nbsp;<span class="op" id="3090202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090206"><a href="/fmt/scan.go.html#3090004">f</a></span>&nbsp;<span class="op" id="3090208">=</span>&nbsp;<span class="ident" id="3090210"><a href="/fmt/scan.go.html#3090867">notSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090223"><a href="/fmt/scan.go.html#3089975">s</a></span><span class="op" id="3090224">.</span><span class="ident" id="3090225">buf</span>&nbsp;<span class="op" id="3090229">=</span>&nbsp;<span class="ident" id="3090231"><a href="/fmt/scan.go.html#3089975">s</a></span><span class="op" id="3090232">.</span><span class="ident" id="3090233">buf</span><span class="op" id="3090236">[</span><span class="op" id="3090237">:</span><span class="num" id="3090238">0</span><span class="op" id="3090239">]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090242"><a href="/fmt/scan.go.html#3090024">tok</a></span>&nbsp;<span class="op" id="3090246">=</span>&nbsp;<span class="ident" id="3090248"><a href="/fmt/scan.go.html#3089975">s</a></span><span class="op" id="3090249">.</span><span class="ident" id="3090250">token</span><span class="op" id="3090255">(</span><span class="ident" id="3090256"><a href="/fmt/scan.go.html#3089988">skipSpace</a></span><span class="op" id="3090265">,</span>&nbsp;<span class="ident" id="3090267"><a href="/fmt/scan.go.html#3090004">f</a></span><span class="op" id="3090268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090271">return</span><br>
<span class="lineno"></span><span class="op" id="3090278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3090281">//&nbsp;space&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;unicode.White_Space&nbsp;ranges,</span><br>
<span class="lineno">280</span><span class="comment" id="3090335">//&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;package&nbsp;unicode.</span><br>
<span class="lineno"></span><span class="keyword" id="3090377">var</span>&nbsp;<span class="ident" id="3090381">space</span>&nbsp;<span class="op" id="3090387">=</span>&nbsp;<span class="op" id="3090389">[</span><span class="op" id="3090390">]</span><span class="op" id="3090391">[</span><span class="num" id="3090392">2</span><span class="op" id="3090393">]</span><span class="builtintype" id="3090394">uint16</span><span class="op" id="3090400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090403">{</span><span class="num" id="3090404">0x0009</span><span class="op" id="3090410">,</span>&nbsp;<span class="num" id="3090412">0x000d</span><span class="op" id="3090418">}</span><span class="op" id="3090419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090422">{</span><span class="num" id="3090423">0x0020</span><span class="op" id="3090429">,</span>&nbsp;<span class="num" id="3090431">0x0020</span><span class="op" id="3090437">}</span><span class="op" id="3090438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090441">{</span><span class="num" id="3090442">0x0085</span><span class="op" id="3090448">,</span>&nbsp;<span class="num" id="3090450">0x0085</span><span class="op" id="3090456">}</span><span class="op" id="3090457">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090460">{</span><span class="num" id="3090461">0x00a0</span><span class="op" id="3090467">,</span>&nbsp;<span class="num" id="3090469">0x00a0</span><span class="op" id="3090475">}</span><span class="op" id="3090476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090479">{</span><span class="num" id="3090480">0x1680</span><span class="op" id="3090486">,</span>&nbsp;<span class="num" id="3090488">0x1680</span><span class="op" id="3090494">}</span><span class="op" id="3090495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090498">{</span><span class="num" id="3090499">0x2000</span><span class="op" id="3090505">,</span>&nbsp;<span class="num" id="3090507">0x200a</span><span class="op" id="3090513">}</span><span class="op" id="3090514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090517">{</span><span class="num" id="3090518">0x2028</span><span class="op" id="3090524">,</span>&nbsp;<span class="num" id="3090526">0x2029</span><span class="op" id="3090532">}</span><span class="op" id="3090533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090536">{</span><span class="num" id="3090537">0x202f</span><span class="op" id="3090543">,</span>&nbsp;<span class="num" id="3090545">0x202f</span><span class="op" id="3090551">}</span><span class="op" id="3090552">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090555">{</span><span class="num" id="3090556">0x205f</span><span class="op" id="3090562">,</span>&nbsp;<span class="num" id="3090564">0x205f</span><span class="op" id="3090570">}</span><span class="op" id="3090571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090574">{</span><span class="num" id="3090575">0x3000</span><span class="op" id="3090581">,</span>&nbsp;<span class="num" id="3090583">0x3000</span><span class="op" id="3090589">}</span><span class="op" id="3090590">,</span><br>
<span class="lineno"></span><span class="op" id="3090592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3090595">func</span>&nbsp;<span class="ident" id="3090600">isSpace</span><span class="op" id="3090607">(</span><span class="ident" id="3090608">r</span>&nbsp;<span class="builtintype" id="3090610">rune</span><span class="op" id="3090614">)</span>&nbsp;<span class="builtintype" id="3090616">bool</span>&nbsp;<span class="op" id="3090621">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090624">if</span>&nbsp;<span class="ident" id="3090627"><a href="/fmt/scan.go.html#3090608">r</a></span>&nbsp;<span class="op" id="3090629">&gt;=</span>&nbsp;<span class="num" id="3090632">1</span><span class="op" id="3090633">&lt;&lt;</span><span class="num" id="3090635">16</span>&nbsp;<span class="op" id="3090638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090642">return</span>&nbsp;<span class="builtintype" id="3090649">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090659">rx</span>&nbsp;<span class="op" id="3090662">:=</span>&nbsp;<span class="builtintype" id="3090665">uint16</span><span class="op" id="3090671">(</span><span class="ident" id="3090672"><a href="/fmt/scan.go.html#3090608">r</a></span><span class="op" id="3090673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090676">for</span>&nbsp;<span class="ident" id="3090680">_</span><span class="op" id="3090681">,</span>&nbsp;<span class="ident" id="3090683">rng</span>&nbsp;<span class="op" id="3090687">:=</span>&nbsp;<span class="keyword" id="3090690">range</span>&nbsp;<span class="ident" id="3090696"><a href="/fmt/scan.go.html#3090381">space</a></span>&nbsp;<span class="op" id="3090702">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090706">if</span>&nbsp;<span class="ident" id="3090709"><a href="/fmt/scan.go.html#3090659">rx</a></span>&nbsp;<span class="op" id="3090712">&lt;</span>&nbsp;<span class="ident" id="3090714"><a href="/fmt/scan.go.html#3090683">rng</a></span><span class="op" id="3090717">[</span><span class="num" id="3090718">0</span><span class="op" id="3090719">]</span>&nbsp;<span class="op" id="3090721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090726">return</span>&nbsp;<span class="builtintype" id="3090733">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090745">if</span>&nbsp;<span class="ident" id="3090748"><a href="/fmt/scan.go.html#3090659">rx</a></span>&nbsp;<span class="op" id="3090751">&lt;=</span>&nbsp;<span class="ident" id="3090754"><a href="/fmt/scan.go.html#3090683">rng</a></span><span class="op" id="3090757">[</span><span class="num" id="3090758">1</span><span class="op" id="3090759">]</span>&nbsp;<span class="op" id="3090761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090766">return</span>&nbsp;<span class="builtintype" id="3090773">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090786">return</span>&nbsp;<span class="builtintype" id="3090793">false</span><br>
<span class="lineno"></span><span class="op" id="3090799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="3090802">//&nbsp;notSpace&nbsp;is&nbsp;the&nbsp;default&nbsp;scanning&nbsp;function&nbsp;used&nbsp;in&nbsp;Token.</span><br>
<span class="lineno"></span><span class="keyword" id="3090862">func</span>&nbsp;<span class="ident" id="3090867">notSpace</span><span class="op" id="3090875">(</span><span class="ident" id="3090876">r</span>&nbsp;<span class="builtintype" id="3090878">rune</span><span class="op" id="3090882">)</span>&nbsp;<span class="builtintype" id="3090884">bool</span>&nbsp;<span class="op" id="3090889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090892">return</span>&nbsp;<span class="op" id="3090899">!</span><span class="ident" id="3090900"><a href="/fmt/scan.go.html#3090600">isSpace</a></span><span class="op" id="3090907">(</span><span class="ident" id="3090908"><a href="/fmt/scan.go.html#3090876">r</a></span><span class="op" id="3090909">)</span><br>
<span class="lineno"></span><span class="op" id="3090911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="comment" id="3090914">//&nbsp;SkipSpace&nbsp;provides&nbsp;Scan&nbsp;methods&nbsp;the&nbsp;ability&nbsp;to&nbsp;skip&nbsp;space&nbsp;and&nbsp;newline</span><br>
<span class="lineno"></span><span class="comment" id="3090987">//&nbsp;characters&nbsp;in&nbsp;keeping&nbsp;with&nbsp;the&nbsp;current&nbsp;scanning&nbsp;mode&nbsp;set&nbsp;by&nbsp;format&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="3091065">//&nbsp;and&nbsp;Scan/Scanln.</span><br>
<span class="lineno"></span><span class="keyword" id="3091085">func</span>&nbsp;<span class="op" id="3091090">(</span><span class="ident" id="3091091">s</span>&nbsp;<span class="op" id="3091093">*</span><span class="ident" id="3091094"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3091096">)</span>&nbsp;<span class="ident" id="3091098">SkipSpace</span><span class="op" id="3091107">(</span><span class="op" id="3091108">)</span>&nbsp;<span class="op" id="3091110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091113"><a href="/fmt/scan.go.html#3091091">s</a></span><span class="op" id="3091114">.</span><span class="ident" id="3091115">skipSpace</span><span class="op" id="3091124">(</span><span class="builtintype" id="3091125">false</span><span class="op" id="3091130">)</span><br>
<span class="lineno">320</span><span class="op" id="3091132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3091135">//&nbsp;readRune&nbsp;is&nbsp;a&nbsp;structure&nbsp;to&nbsp;enable&nbsp;reading&nbsp;UTF-8&nbsp;encoded&nbsp;code&nbsp;points</span><br>
<span class="lineno"></span><span class="comment" id="3091206">//&nbsp;from&nbsp;an&nbsp;io.Reader.&nbsp;&nbsp;It&nbsp;is&nbsp;used&nbsp;if&nbsp;the&nbsp;Reader&nbsp;given&nbsp;to&nbsp;the&nbsp;scanner&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="3091280">//&nbsp;not&nbsp;already&nbsp;implement&nbsp;io.RuneReader.</span><br>
<span class="lineno">325</span><span class="keyword" id="3091320">type</span>&nbsp;<span class="ident" id="3091325">readRune</span>&nbsp;<span class="keyword" id="3091334">struct</span>&nbsp;<span class="op" id="3091341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091344">reader</span>&nbsp;&nbsp;<span class="ident" id="3091352"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3091354">.</span><span class="ident" id="3091355">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091363">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3091371">[</span><span class="ident" id="3091372"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3091376">.</span><span class="ident" id="3091377">UTFMax</span><span class="op" id="3091383">]</span><span class="builtintype" id="3091384">byte</span>&nbsp;<span class="comment" id="3091389">//&nbsp;used&nbsp;only&nbsp;inside&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091419">pending</span>&nbsp;<span class="builtintype" id="3091427">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3091445">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;in&nbsp;pendBuf;&nbsp;only&nbsp;&gt;0&nbsp;for&nbsp;bad&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091499">pendBuf</span>&nbsp;<span class="op" id="3091507">[</span><span class="ident" id="3091508"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3091512">.</span><span class="ident" id="3091513">UTFMax</span><span class="op" id="3091519">]</span><span class="builtintype" id="3091520">byte</span>&nbsp;<span class="comment" id="3091525">//&nbsp;bytes&nbsp;left&nbsp;over</span><br>
<span class="lineno">330</span><span class="op" id="3091544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3091547">//&nbsp;readByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;which&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3091610">//&nbsp;left&nbsp;over&nbsp;from&nbsp;a&nbsp;previous&nbsp;read&nbsp;if&nbsp;the&nbsp;UTF-8&nbsp;was&nbsp;ill-formed.</span><br>
<span class="lineno"></span><span class="keyword" id="3091673">func</span>&nbsp;<span class="op" id="3091678">(</span><span class="ident" id="3091679">r</span>&nbsp;<span class="op" id="3091681">*</span><span class="ident" id="3091682"><a href="/fmt/scan.go.html#3091325">readRune</a></span><span class="op" id="3091690">)</span>&nbsp;<span class="ident" id="3091692">readByte</span><span class="op" id="3091700">(</span><span class="op" id="3091701">)</span>&nbsp;<span class="op" id="3091703">(</span><span class="ident" id="3091704">b</span>&nbsp;<span class="builtintype" id="3091706">byte</span><span class="op" id="3091710">,</span>&nbsp;<span class="ident" id="3091712">err</span>&nbsp;<span class="builtintype" id="3091716">error</span><span class="op" id="3091721">)</span>&nbsp;<span class="op" id="3091723">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091726">if</span>&nbsp;<span class="ident" id="3091729"><a href="/fmt/scan.go.html#3091679">r</a></span><span class="op" id="3091730">.</span><span class="ident" id="3091731">pending</span>&nbsp;<span class="op" id="3091739">&gt;</span>&nbsp;<span class="num" id="3091741">0</span>&nbsp;<span class="op" id="3091743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091747"><a href="/fmt/scan.go.html#3091704">b</a></span>&nbsp;<span class="op" id="3091749">=</span>&nbsp;<span class="ident" id="3091751"><a href="/fmt/scan.go.html#3091679">r</a></span><span class="op" id="3091752">.</span><span class="ident" id="3091753">pendBuf</span><span class="op" id="3091760">[</span><span class="num" id="3091761">0</span><span class="op" id="3091762">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3091766">copy</span><span class="op" id="3091770">(</span><span class="ident" id="3091771"><a href="/fmt/scan.go.html#3091679">r</a></span><span class="op" id="3091772">.</span><span class="ident" id="3091773">pendBuf</span><span class="op" id="3091780">[</span><span class="num" id="3091781">0</span><span class="op" id="3091782">:</span><span class="op" id="3091783">]</span><span class="op" id="3091784">,</span>&nbsp;<span class="ident" id="3091786"><a href="/fmt/scan.go.html#3091679">r</a></span><span class="op" id="3091787">.</span><span class="ident" id="3091788">pendBuf</span><span class="op" id="3091795">[</span><span class="num" id="3091796">1</span><span class="op" id="3091797">:</span><span class="op" id="3091798">]</span><span class="op" id="3091799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091803"><a href="/fmt/scan.go.html#3091679">r</a></span><span class="op" id="3091804">.</span><span class="ident" id="3091805">pending</span><span class="op" id="3091812">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091817">return</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091828">n</span><span class="op" id="3091829">,</span>&nbsp;<span class="ident" id="3091831"><a href="/fmt/scan.go.html#3091712">err</a></span>&nbsp;<span class="op" id="3091835">:=</span>&nbsp;<span class="ident" id="3091838"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3091840">.</span><span class="ident" id="3091841">ReadFull</span><span class="op" id="3091849">(</span><span class="ident" id="3091850"><a href="/fmt/scan.go.html#3091679">r</a></span><span class="op" id="3091851">.</span><span class="ident" id="3091852">reader</span><span class="op" id="3091858">,</span>&nbsp;<span class="ident" id="3091860"><a href="/fmt/scan.go.html#3091679">r</a></span><span class="op" id="3091861">.</span><span class="ident" id="3091862">pendBuf</span><span class="op" id="3091869">[</span><span class="num" id="3091870">0</span><span class="op" id="3091871">:</span><span class="num" id="3091872">1</span><span class="op" id="3091873">]</span><span class="op" id="3091874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091877">if</span>&nbsp;<span class="ident" id="3091880"><a href="/fmt/scan.go.html#3091828">n</a></span>&nbsp;<span class="op" id="3091882">!=</span>&nbsp;<span class="num" id="3091885">1</span>&nbsp;<span class="op" id="3091887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091891">return</span>&nbsp;<span class="num" id="3091898">0</span><span class="op" id="3091899">,</span>&nbsp;<span class="ident" id="3091901"><a href="/fmt/scan.go.html#3091712">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091906">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091909">return</span>&nbsp;<span class="ident" id="3091916"><a href="/fmt/scan.go.html#3091679">r</a></span><span class="op" id="3091917">.</span><span class="ident" id="3091918">pendBuf</span><span class="op" id="3091925">[</span><span class="num" id="3091926">0</span><span class="op" id="3091927">]</span><span class="op" id="3091928">,</span>&nbsp;<span class="ident" id="3091930"><a href="/fmt/scan.go.html#3091712">err</a></span><br>
<span class="lineno"></span><span class="op" id="3091934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3091937">//&nbsp;unread&nbsp;saves&nbsp;the&nbsp;bytes&nbsp;for&nbsp;the&nbsp;next&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="3091982">func</span>&nbsp;<span class="op" id="3091987">(</span><span class="ident" id="3091988">r</span>&nbsp;<span class="op" id="3091990">*</span><span class="ident" id="3091991"><a href="/fmt/scan.go.html#3091325">readRune</a></span><span class="op" id="3091999">)</span>&nbsp;<span class="ident" id="3092001">unread</span><span class="op" id="3092007">(</span><span class="ident" id="3092008">buf</span>&nbsp;<span class="op" id="3092012">[</span><span class="op" id="3092013">]</span><span class="builtintype" id="3092014">byte</span><span class="op" id="3092018">)</span>&nbsp;<span class="op" id="3092020">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3092023">copy</span><span class="op" id="3092027">(</span><span class="ident" id="3092028"><a href="/fmt/scan.go.html#3091988">r</a></span><span class="op" id="3092029">.</span><span class="ident" id="3092030">pendBuf</span><span class="op" id="3092037">[</span><span class="ident" id="3092038"><a href="/fmt/scan.go.html#3091988">r</a></span><span class="op" id="3092039">.</span><span class="ident" id="3092040">pending</span><span class="op" id="3092047">:</span><span class="op" id="3092048">]</span><span class="op" id="3092049">,</span>&nbsp;<span class="ident" id="3092051"><a href="/fmt/scan.go.html#3092008">buf</a></span><span class="op" id="3092054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092057"><a href="/fmt/scan.go.html#3091988">r</a></span><span class="op" id="3092058">.</span><span class="ident" id="3092059">pending</span>&nbsp;<span class="op" id="3092067">+=</span>&nbsp;<span class="builtinfunc" id="3092070">len</span><span class="op" id="3092073">(</span><span class="ident" id="3092074"><a href="/fmt/scan.go.html#3092008">buf</a></span><span class="op" id="3092077">)</span><br>
<span class="lineno"></span><span class="op" id="3092079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3092082">//&nbsp;ReadRune&nbsp;returns&nbsp;the&nbsp;next&nbsp;UTF-8&nbsp;encoded&nbsp;code&nbsp;point&nbsp;from&nbsp;the</span><br>
<span class="lineno">355</span><span class="comment" id="3092145">//&nbsp;io.Reader&nbsp;inside&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3092168">func</span>&nbsp;<span class="op" id="3092173">(</span><span class="ident" id="3092174">r</span>&nbsp;<span class="op" id="3092176">*</span><span class="ident" id="3092177"><a href="/fmt/scan.go.html#3091325">readRune</a></span><span class="op" id="3092185">)</span>&nbsp;<span class="ident" id="3092187">ReadRune</span><span class="op" id="3092195">(</span><span class="op" id="3092196">)</span>&nbsp;<span class="op" id="3092198">(</span><span class="ident" id="3092199">rr</span>&nbsp;<span class="builtintype" id="3092202">rune</span><span class="op" id="3092206">,</span>&nbsp;<span class="ident" id="3092208">size</span>&nbsp;<span class="builtintype" id="3092213">int</span><span class="op" id="3092216">,</span>&nbsp;<span class="ident" id="3092218">err</span>&nbsp;<span class="builtintype" id="3092222">error</span><span class="op" id="3092227">)</span>&nbsp;<span class="op" id="3092229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092232"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092233">.</span><span class="ident" id="3092234">buf</span><span class="op" id="3092237">[</span><span class="num" id="3092238">0</span><span class="op" id="3092239">]</span><span class="op" id="3092240">,</span>&nbsp;<span class="ident" id="3092242"><a href="/fmt/scan.go.html#3092218">err</a></span>&nbsp;<span class="op" id="3092246">=</span>&nbsp;<span class="ident" id="3092248"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092249">.</span><span class="ident" id="3092250">readByte</span><span class="op" id="3092258">(</span><span class="op" id="3092259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092262">if</span>&nbsp;<span class="ident" id="3092265"><a href="/fmt/scan.go.html#3092218">err</a></span>&nbsp;<span class="op" id="3092269">!=</span>&nbsp;<span class="ident" id="3092272">nil</span>&nbsp;<span class="op" id="3092276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092280">return</span>&nbsp;<span class="num" id="3092287">0</span><span class="op" id="3092288">,</span>&nbsp;<span class="num" id="3092290">0</span><span class="op" id="3092291">,</span>&nbsp;<span class="ident" id="3092293"><a href="/fmt/scan.go.html#3092218">err</a></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092301">if</span>&nbsp;<span class="ident" id="3092304"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092305">.</span><span class="ident" id="3092306">buf</span><span class="op" id="3092309">[</span><span class="num" id="3092310">0</span><span class="op" id="3092311">]</span>&nbsp;<span class="op" id="3092313">&lt;</span>&nbsp;<span class="ident" id="3092315"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3092319">.</span><span class="ident" id="3092320">RuneSelf</span>&nbsp;<span class="op" id="3092329">{</span>&nbsp;<span class="comment" id="3092331">//&nbsp;fast&nbsp;check&nbsp;for&nbsp;common&nbsp;ASCII&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092369"><a href="/fmt/scan.go.html#3092199">rr</a></span>&nbsp;<span class="op" id="3092372">=</span>&nbsp;<span class="builtintype" id="3092374">rune</span><span class="op" id="3092378">(</span><span class="ident" id="3092379"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092380">.</span><span class="ident" id="3092381">buf</span><span class="op" id="3092384">[</span><span class="num" id="3092385">0</span><span class="op" id="3092386">]</span><span class="op" id="3092387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092391"><a href="/fmt/scan.go.html#3092208">size</a></span>&nbsp;<span class="op" id="3092396">=</span>&nbsp;<span class="num" id="3092398">1</span>&nbsp;<span class="comment" id="3092400">//&nbsp;Known&nbsp;to&nbsp;be&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092420">return</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092431">var</span>&nbsp;<span class="ident" id="3092435">n</span>&nbsp;<span class="builtintype" id="3092437">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092442">for</span>&nbsp;<span class="ident" id="3092446"><a href="/fmt/scan.go.html#3092435">n</a></span>&nbsp;<span class="op" id="3092448">=</span>&nbsp;<span class="num" id="3092450">1</span><span class="op" id="3092451">;</span>&nbsp;<span class="op" id="3092453">!</span><span class="ident" id="3092454"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3092458">.</span><span class="ident" id="3092459">FullRune</span><span class="op" id="3092467">(</span><span class="ident" id="3092468"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092469">.</span><span class="ident" id="3092470">buf</span><span class="op" id="3092473">[</span><span class="num" id="3092474">0</span><span class="op" id="3092475">:</span><span class="ident" id="3092476"><a href="/fmt/scan.go.html#3092435">n</a></span><span class="op" id="3092477">]</span><span class="op" id="3092478">)</span><span class="op" id="3092479">;</span>&nbsp;<span class="ident" id="3092481"><a href="/fmt/scan.go.html#3092435">n</a></span><span class="op" id="3092482">++</span>&nbsp;<span class="op" id="3092485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092489"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092490">.</span><span class="ident" id="3092491">buf</span><span class="op" id="3092494">[</span><span class="ident" id="3092495"><a href="/fmt/scan.go.html#3092435">n</a></span><span class="op" id="3092496">]</span><span class="op" id="3092497">,</span>&nbsp;<span class="ident" id="3092499"><a href="/fmt/scan.go.html#3092218">err</a></span>&nbsp;<span class="op" id="3092503">=</span>&nbsp;<span class="ident" id="3092505"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092506">.</span><span class="ident" id="3092507">readByte</span><span class="op" id="3092515">(</span><span class="op" id="3092516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092520">if</span>&nbsp;<span class="ident" id="3092523"><a href="/fmt/scan.go.html#3092218">err</a></span>&nbsp;<span class="op" id="3092527">!=</span>&nbsp;<span class="ident" id="3092530">nil</span>&nbsp;<span class="op" id="3092534">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092539">if</span>&nbsp;<span class="ident" id="3092542"><a href="/fmt/scan.go.html#3092218">err</a></span>&nbsp;<span class="op" id="3092546">==</span>&nbsp;<span class="ident" id="3092549"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3092551">.</span><span class="ident" id="3092552">EOF</span>&nbsp;<span class="op" id="3092556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092562"><a href="/fmt/scan.go.html#3092218">err</a></span>&nbsp;<span class="op" id="3092566">=</span>&nbsp;<span class="ident" id="3092568">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092576">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092590">return</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092605"><a href="/fmt/scan.go.html#3092199">rr</a></span><span class="op" id="3092607">,</span>&nbsp;<span class="ident" id="3092609"><a href="/fmt/scan.go.html#3092208">size</a></span>&nbsp;<span class="op" id="3092614">=</span>&nbsp;<span class="ident" id="3092616"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3092620">.</span><span class="ident" id="3092621">DecodeRune</span><span class="op" id="3092631">(</span><span class="ident" id="3092632"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092633">.</span><span class="ident" id="3092634">buf</span><span class="op" id="3092637">[</span><span class="num" id="3092638">0</span><span class="op" id="3092639">:</span><span class="ident" id="3092640"><a href="/fmt/scan.go.html#3092435">n</a></span><span class="op" id="3092641">]</span><span class="op" id="3092642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092645">if</span>&nbsp;<span class="ident" id="3092648"><a href="/fmt/scan.go.html#3092208">size</a></span>&nbsp;<span class="op" id="3092653">&lt;</span>&nbsp;<span class="ident" id="3092655"><a href="/fmt/scan.go.html#3092435">n</a></span>&nbsp;<span class="op" id="3092657">{</span>&nbsp;<span class="comment" id="3092659">//&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092673"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092674">.</span><span class="ident" id="3092675">unread</span><span class="op" id="3092681">(</span><span class="ident" id="3092682"><a href="/fmt/scan.go.html#3092174">r</a></span><span class="op" id="3092683">.</span><span class="ident" id="3092684">buf</span><span class="op" id="3092687">[</span><span class="ident" id="3092688"><a href="/fmt/scan.go.html#3092208">size</a></span><span class="op" id="3092692">:</span><span class="ident" id="3092693"><a href="/fmt/scan.go.html#3092435">n</a></span><span class="op" id="3092694">]</span><span class="op" id="3092695">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092701">return</span><br>
<span class="lineno"></span><span class="op" id="3092708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3092711">var</span>&nbsp;<span class="ident" id="3092715">ssFree</span>&nbsp;<span class="op" id="3092722">=</span>&nbsp;<span class="ident" id="3092724"><a href="/fmt/scan.go.html#3081825">sync</a></span><span class="op" id="3092728">.</span><span class="ident" id="3092729">Pool</span><span class="op" id="3092733">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092736">New</span><span class="op" id="3092739">:</span>&nbsp;<span class="keyword" id="3092741">func</span><span class="op" id="3092745">(</span><span class="op" id="3092746">)</span>&nbsp;<span class="keyword" id="3092748">interface</span><span class="op" id="3092757">{</span><span class="op" id="3092758">}</span>&nbsp;<span class="op" id="3092760">{</span>&nbsp;<span class="keyword" id="3092762">return</span>&nbsp;<span class="builtinfunc" id="3092769">new</span><span class="op" id="3092772">(</span><span class="ident" id="3092773"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3092775">)</span>&nbsp;<span class="op" id="3092777">}</span><span class="op" id="3092778">,</span><br>
<span class="lineno"></span><span class="op" id="3092780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3092783">//&nbsp;newScanState&nbsp;allocates&nbsp;a&nbsp;new&nbsp;ss&nbsp;struct&nbsp;or&nbsp;grab&nbsp;a&nbsp;cached&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="3092847">func</span>&nbsp;<span class="ident" id="3092852">newScanState</span><span class="op" id="3092864">(</span><span class="ident" id="3092865">r</span>&nbsp;<span class="ident" id="3092867"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3092869">.</span><span class="ident" id="3092870">Reader</span><span class="op" id="3092876">,</span>&nbsp;<span class="ident" id="3092878">nlIsSpace</span><span class="op" id="3092887">,</span>&nbsp;<span class="ident" id="3092889">nlIsEnd</span>&nbsp;<span class="builtintype" id="3092897">bool</span><span class="op" id="3092901">)</span>&nbsp;<span class="op" id="3092903">(</span><span class="ident" id="3092904">s</span>&nbsp;<span class="op" id="3092906">*</span><span class="ident" id="3092907"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3092909">,</span>&nbsp;<span class="ident" id="3092911">old</span>&nbsp;<span class="ident" id="3092915"><a href="/fmt/scan.go.html#3087958">ssave</a></span><span class="op" id="3092920">)</span>&nbsp;<span class="op" id="3092922">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3092925">//&nbsp;If&nbsp;the&nbsp;reader&nbsp;is&nbsp;a&nbsp;*ss,&nbsp;then&nbsp;we&#39;ve&nbsp;got&nbsp;a&nbsp;recursive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3092980">//&nbsp;call&nbsp;to&nbsp;Scan,&nbsp;so&nbsp;re-use&nbsp;the&nbsp;scan&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093024"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093025">,</span>&nbsp;<span class="ident" id="3093027">ok</span>&nbsp;<span class="op" id="3093030">:=</span>&nbsp;<span class="ident" id="3093033"><a href="/fmt/scan.go.html#3092865">r</a></span><span class="op" id="3093034">.</span><span class="op" id="3093035">(</span><span class="op" id="3093036">*</span><span class="ident" id="3093037"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3093039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093042">if</span>&nbsp;<span class="ident" id="3093045"><a href="/fmt/scan.go.html#3093027">ok</a></span>&nbsp;<span class="op" id="3093048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093052"><a href="/fmt/scan.go.html#3092911">old</a></span>&nbsp;<span class="op" id="3093056">=</span>&nbsp;<span class="ident" id="3093058"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093059">.</span><span class="ident" id="3093060">ssave</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093068"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093069">.</span><span class="ident" id="3093070">limit</span>&nbsp;<span class="op" id="3093076">=</span>&nbsp;<span class="ident" id="3093078"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093079">.</span><span class="ident" id="3093080">argLimit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093091"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093092">.</span><span class="ident" id="3093093">nlIsEnd</span>&nbsp;<span class="op" id="3093101">=</span>&nbsp;<span class="ident" id="3093103"><a href="/fmt/scan.go.html#3092889">nlIsEnd</a></span>&nbsp;<span class="op" id="3093111">||</span>&nbsp;<span class="ident" id="3093114"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093115">.</span><span class="ident" id="3093116">nlIsEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093126"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093127">.</span><span class="ident" id="3093128">nlIsSpace</span>&nbsp;<span class="op" id="3093138">=</span>&nbsp;<span class="ident" id="3093140"><a href="/fmt/scan.go.html#3092878">nlIsSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093152">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093160">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093164"><a href="/fmt/scan.go.html#3092904">s</a></span>&nbsp;<span class="op" id="3093166">=</span>&nbsp;<span class="ident" id="3093168"><a href="/fmt/scan.go.html#3092715">ssFree</a></span><span class="op" id="3093174">.</span><span class="ident" id="3093175">Get</span><span class="op" id="3093178">(</span><span class="op" id="3093179">)</span><span class="op" id="3093180">.</span><span class="op" id="3093181">(</span><span class="op" id="3093182">*</span><span class="ident" id="3093183"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3093185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093188">if</span>&nbsp;<span class="ident" id="3093191">rr</span><span class="op" id="3093193">,</span>&nbsp;<span class="ident" id="3093195">ok</span>&nbsp;<span class="op" id="3093198">:=</span>&nbsp;<span class="ident" id="3093201"><a href="/fmt/scan.go.html#3092865">r</a></span><span class="op" id="3093202">.</span><span class="op" id="3093203">(</span><span class="ident" id="3093204"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3093206">.</span><span class="ident" id="3093207">RuneReader</span><span class="op" id="3093217">)</span><span class="op" id="3093218">;</span>&nbsp;<span class="ident" id="3093220"><a href="/fmt/scan.go.html#3093195">ok</a></span>&nbsp;<span class="op" id="3093223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093227"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093228">.</span><span class="ident" id="3093229">rr</span>&nbsp;<span class="op" id="3093232">=</span>&nbsp;<span class="ident" id="3093234"><a href="/fmt/scan.go.html#3093191">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093238">}</span>&nbsp;<span class="keyword" id="3093240">else</span>&nbsp;<span class="op" id="3093245">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093249"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093250">.</span><span class="ident" id="3093251">rr</span>&nbsp;<span class="op" id="3093254">=</span>&nbsp;<span class="op" id="3093256">&amp;</span><span class="ident" id="3093257"><a href="/fmt/scan.go.html#3091325">readRune</a></span><span class="op" id="3093265">{</span><span class="ident" id="3093266">reader</span><span class="op" id="3093272">:</span>&nbsp;<span class="ident" id="3093274"><a href="/fmt/scan.go.html#3092865">r</a></span><span class="op" id="3093275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093281"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093282">.</span><span class="ident" id="3093283">nlIsSpace</span>&nbsp;<span class="op" id="3093293">=</span>&nbsp;<span class="ident" id="3093295"><a href="/fmt/scan.go.html#3092878">nlIsSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093306"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093307">.</span><span class="ident" id="3093308">nlIsEnd</span>&nbsp;<span class="op" id="3093316">=</span>&nbsp;<span class="ident" id="3093318"><a href="/fmt/scan.go.html#3092889">nlIsEnd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093327"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093328">.</span><span class="ident" id="3093329">prevRune</span>&nbsp;<span class="op" id="3093338">=</span>&nbsp;<span class="op" id="3093340">-</span><span class="num" id="3093341">1</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093344"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093345">.</span><span class="ident" id="3093346">peekRune</span>&nbsp;<span class="op" id="3093355">=</span>&nbsp;<span class="op" id="3093357">-</span><span class="num" id="3093358">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093361"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093362">.</span><span class="ident" id="3093363">atEOF</span>&nbsp;<span class="op" id="3093369">=</span>&nbsp;<span class="builtintype" id="3093371">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093378"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093379">.</span><span class="ident" id="3093380">limit</span>&nbsp;<span class="op" id="3093386">=</span>&nbsp;<span class="ident" id="3093388"><a href="/fmt/scan.go.html#3105595">hugeWid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093397"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093398">.</span><span class="ident" id="3093399">argLimit</span>&nbsp;<span class="op" id="3093408">=</span>&nbsp;<span class="ident" id="3093410"><a href="/fmt/scan.go.html#3105595">hugeWid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093419"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093420">.</span><span class="ident" id="3093421">maxWid</span>&nbsp;<span class="op" id="3093428">=</span>&nbsp;<span class="ident" id="3093430"><a href="/fmt/scan.go.html#3105595">hugeWid</a></span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093439"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093440">.</span><span class="ident" id="3093441">validSave</span>&nbsp;<span class="op" id="3093451">=</span>&nbsp;<span class="builtintype" id="3093453">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093459"><a href="/fmt/scan.go.html#3092904">s</a></span><span class="op" id="3093460">.</span><span class="ident" id="3093461">count</span>&nbsp;<span class="op" id="3093467">=</span>&nbsp;<span class="num" id="3093469">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093472">return</span><br>
<span class="lineno"></span><span class="op" id="3093479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="3093482">//&nbsp;free&nbsp;saves&nbsp;used&nbsp;ss&nbsp;structs&nbsp;in&nbsp;ssFree;&nbsp;avoid&nbsp;an&nbsp;allocation&nbsp;per&nbsp;invocation.</span><br>
<span class="lineno"></span><span class="keyword" id="3093559">func</span>&nbsp;<span class="op" id="3093564">(</span><span class="ident" id="3093565">s</span>&nbsp;<span class="op" id="3093567">*</span><span class="ident" id="3093568"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3093570">)</span>&nbsp;<span class="ident" id="3093572">free</span><span class="op" id="3093576">(</span><span class="ident" id="3093577">old</span>&nbsp;<span class="ident" id="3093581"><a href="/fmt/scan.go.html#3087958">ssave</a></span><span class="op" id="3093586">)</span>&nbsp;<span class="op" id="3093588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093591">//&nbsp;If&nbsp;it&nbsp;was&nbsp;used&nbsp;recursively,&nbsp;just&nbsp;restore&nbsp;the&nbsp;old&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093651">if</span>&nbsp;<span class="ident" id="3093654"><a href="/fmt/scan.go.html#3093577">old</a></span><span class="op" id="3093657">.</span><span class="ident" id="3093658">validSave</span>&nbsp;<span class="op" id="3093668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093672"><a href="/fmt/scan.go.html#3093565">s</a></span><span class="op" id="3093673">.</span><span class="ident" id="3093674">ssave</span>&nbsp;<span class="op" id="3093680">=</span>&nbsp;<span class="ident" id="3093682"><a href="/fmt/scan.go.html#3093577">old</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093688">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093699">//&nbsp;Don&#39;t&nbsp;hold&nbsp;on&nbsp;to&nbsp;ss&nbsp;structs&nbsp;with&nbsp;large&nbsp;buffers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093751">if</span>&nbsp;<span class="builtinfunc" id="3093754">cap</span><span class="op" id="3093757">(</span><span class="ident" id="3093758"><a href="/fmt/scan.go.html#3093565">s</a></span><span class="op" id="3093759">.</span><span class="ident" id="3093760">buf</span><span class="op" id="3093763">)</span>&nbsp;<span class="op" id="3093765">&gt;</span>&nbsp;<span class="num" id="3093767">1024</span>&nbsp;<span class="op" id="3093772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093776">return</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093787"><a href="/fmt/scan.go.html#3093565">s</a></span><span class="op" id="3093788">.</span><span class="ident" id="3093789">buf</span>&nbsp;<span class="op" id="3093793">=</span>&nbsp;<span class="ident" id="3093795"><a href="/fmt/scan.go.html#3093565">s</a></span><span class="op" id="3093796">.</span><span class="ident" id="3093797">buf</span><span class="op" id="3093800">[</span><span class="op" id="3093801">:</span><span class="num" id="3093802">0</span><span class="op" id="3093803">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093806"><a href="/fmt/scan.go.html#3093565">s</a></span><span class="op" id="3093807">.</span><span class="ident" id="3093808">rr</span>&nbsp;<span class="op" id="3093811">=</span>&nbsp;<span class="ident" id="3093813">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093818"><a href="/fmt/scan.go.html#3092715">ssFree</a></span><span class="op" id="3093824">.</span><span class="ident" id="3093825">Put</span><span class="op" id="3093828">(</span><span class="ident" id="3093829"><a href="/fmt/scan.go.html#3093565">s</a></span><span class="op" id="3093830">)</span><br>
<span class="lineno"></span><span class="op" id="3093832">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="3093835">//&nbsp;skipSpace&nbsp;skips&nbsp;spaces&nbsp;and&nbsp;maybe&nbsp;newlines.</span><br>
<span class="lineno"></span><span class="keyword" id="3093881">func</span>&nbsp;<span class="op" id="3093886">(</span><span class="ident" id="3093887">s</span>&nbsp;<span class="op" id="3093889">*</span><span class="ident" id="3093890"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3093892">)</span>&nbsp;<span class="ident" id="3093894">skipSpace</span><span class="op" id="3093903">(</span><span class="ident" id="3093904">stopAtNewline</span>&nbsp;<span class="builtintype" id="3093918">bool</span><span class="op" id="3093922">)</span>&nbsp;<span class="op" id="3093924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093927">for</span>&nbsp;<span class="op" id="3093931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093935">r</span>&nbsp;<span class="op" id="3093937">:=</span>&nbsp;<span class="ident" id="3093940"><a href="/fmt/scan.go.html#3093887">s</a></span><span class="op" id="3093941">.</span><span class="ident" id="3093942">getRune</span><span class="op" id="3093949">(</span><span class="op" id="3093950">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093954">if</span>&nbsp;<span class="ident" id="3093957"><a href="/fmt/scan.go.html#3093935">r</a></span>&nbsp;<span class="op" id="3093959">==</span>&nbsp;<span class="ident" id="3093962"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3093966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093971">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093984">if</span>&nbsp;<span class="ident" id="3093987"><a href="/fmt/scan.go.html#3093935">r</a></span>&nbsp;<span class="op" id="3093989">==</span>&nbsp;<span class="string" id="3093992">&#39;\r&#39;</span>&nbsp;<span class="op" id="3093997">&amp;&amp;</span>&nbsp;<span class="ident" id="3094000"><a href="/fmt/scan.go.html#3093887">s</a></span><span class="op" id="3094001">.</span><span class="ident" id="3094002">peek</span><span class="op" id="3094006">(</span><span class="string" id="3094007">&#34;\n&#34;</span><span class="op" id="3094011">)</span>&nbsp;<span class="op" id="3094013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094018">continue</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094033">if</span>&nbsp;<span class="ident" id="3094036"><a href="/fmt/scan.go.html#3093935">r</a></span>&nbsp;<span class="op" id="3094038">==</span>&nbsp;<span class="string" id="3094041">&#39;\n&#39;</span>&nbsp;<span class="op" id="3094046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094051">if</span>&nbsp;<span class="ident" id="3094054"><a href="/fmt/scan.go.html#3093904">stopAtNewline</a></span>&nbsp;<span class="op" id="3094068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094074">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094083">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094088">if</span>&nbsp;<span class="ident" id="3094091"><a href="/fmt/scan.go.html#3093887">s</a></span><span class="op" id="3094092">.</span><span class="ident" id="3094093">nlIsSpace</span>&nbsp;<span class="op" id="3094103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094109">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094126"><a href="/fmt/scan.go.html#3093887">s</a></span><span class="op" id="3094127">.</span><span class="ident" id="3094128">errorString</span><span class="op" id="3094139">(</span><span class="string" id="3094140">&#34;unexpected&nbsp;newline&#34;</span><span class="op" id="3094160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094165">return</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094178">if</span>&nbsp;<span class="op" id="3094181">!</span><span class="ident" id="3094182"><a href="/fmt/scan.go.html#3090600">isSpace</a></span><span class="op" id="3094189">(</span><span class="ident" id="3094190"><a href="/fmt/scan.go.html#3093935">r</a></span><span class="op" id="3094191">)</span>&nbsp;<span class="op" id="3094193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094198"><a href="/fmt/scan.go.html#3093887">s</a></span><span class="op" id="3094199">.</span><span class="ident" id="3094200">UnreadRune</span><span class="op" id="3094210">(</span><span class="op" id="3094211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094216">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094224">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094227">}</span><br>
<span class="lineno"></span><span class="op" id="3094229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3094232">//&nbsp;token&nbsp;returns&nbsp;the&nbsp;next&nbsp;space-delimited&nbsp;string&nbsp;from&nbsp;the&nbsp;input.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="3094301">//&nbsp;skips&nbsp;white&nbsp;space.&nbsp;&nbsp;For&nbsp;Scanln,&nbsp;it&nbsp;stops&nbsp;at&nbsp;newlines.&nbsp;&nbsp;For&nbsp;Scan,</span><br>
<span class="lineno">465</span><span class="comment" id="3094369">//&nbsp;newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno"></span><span class="keyword" id="3094404">func</span>&nbsp;<span class="op" id="3094409">(</span><span class="ident" id="3094410">s</span>&nbsp;<span class="op" id="3094412">*</span><span class="ident" id="3094413"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3094415">)</span>&nbsp;<span class="ident" id="3094417">token</span><span class="op" id="3094422">(</span><span class="ident" id="3094423">skipSpace</span>&nbsp;<span class="builtintype" id="3094433">bool</span><span class="op" id="3094437">,</span>&nbsp;<span class="ident" id="3094439">f</span>&nbsp;<span class="keyword" id="3094441">func</span><span class="op" id="3094445">(</span><span class="builtintype" id="3094446">rune</span><span class="op" id="3094450">)</span>&nbsp;<span class="builtintype" id="3094452">bool</span><span class="op" id="3094456">)</span>&nbsp;<span class="op" id="3094458">[</span><span class="op" id="3094459">]</span><span class="builtintype" id="3094460">byte</span>&nbsp;<span class="op" id="3094465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094468">if</span>&nbsp;<span class="ident" id="3094471"><a href="/fmt/scan.go.html#3094423">skipSpace</a></span>&nbsp;<span class="op" id="3094481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094485"><a href="/fmt/scan.go.html#3094410">s</a></span><span class="op" id="3094486">.</span><span class="ident" id="3094487">skipSpace</span><span class="op" id="3094496">(</span><span class="builtintype" id="3094497">false</span><span class="op" id="3094502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094505">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094508">//&nbsp;read&nbsp;until&nbsp;white&nbsp;space&nbsp;or&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094546">for</span>&nbsp;<span class="op" id="3094550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094554">r</span>&nbsp;<span class="op" id="3094556">:=</span>&nbsp;<span class="ident" id="3094559"><a href="/fmt/scan.go.html#3094410">s</a></span><span class="op" id="3094560">.</span><span class="ident" id="3094561">getRune</span><span class="op" id="3094568">(</span><span class="op" id="3094569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094573">if</span>&nbsp;<span class="ident" id="3094576"><a href="/fmt/scan.go.html#3094554">r</a></span>&nbsp;<span class="op" id="3094578">==</span>&nbsp;<span class="ident" id="3094581"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3094585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094590">break</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094602">if</span>&nbsp;<span class="op" id="3094605">!</span><span class="ident" id="3094606"><a href="/fmt/scan.go.html#3094439">f</a></span><span class="op" id="3094607">(</span><span class="ident" id="3094608"><a href="/fmt/scan.go.html#3094554">r</a></span><span class="op" id="3094609">)</span>&nbsp;<span class="op" id="3094611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094616"><a href="/fmt/scan.go.html#3094410">s</a></span><span class="op" id="3094617">.</span><span class="ident" id="3094618">UnreadRune</span><span class="op" id="3094628">(</span><span class="op" id="3094629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094634">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094642">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094646"><a href="/fmt/scan.go.html#3094410">s</a></span><span class="op" id="3094647">.</span><span class="ident" id="3094648">buf</span><span class="op" id="3094651">.</span><span class="ident" id="3094652">WriteRune</span><span class="op" id="3094661">(</span><span class="ident" id="3094662"><a href="/fmt/scan.go.html#3094554">r</a></span><span class="op" id="3094663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094669">return</span>&nbsp;<span class="ident" id="3094676"><a href="/fmt/scan.go.html#3094410">s</a></span><span class="op" id="3094677">.</span><span class="ident" id="3094678">buf</span><br>
<span class="lineno"></span><span class="op" id="3094682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="keyword" id="3094685">var</span>&nbsp;<span class="ident" id="3094689">complexError</span>&nbsp;<span class="op" id="3094702">=</span>&nbsp;<span class="ident" id="3094704"><a href="/fmt/scan.go.html#3081773">errors</a></span><span class="op" id="3094710">.</span><span class="ident" id="3094711">New</span><span class="op" id="3094714">(</span><span class="string" id="3094715">&#34;syntax&nbsp;error&nbsp;scanning&nbsp;complex&nbsp;number&#34;</span><span class="op" id="3094753">)</span><br>
<span class="lineno"></span><span class="keyword" id="3094755">var</span>&nbsp;<span class="ident" id="3094759">boolError</span>&nbsp;<span class="op" id="3094769">=</span>&nbsp;<span class="ident" id="3094771"><a href="/fmt/scan.go.html#3081773">errors</a></span><span class="op" id="3094777">.</span><span class="ident" id="3094778">New</span><span class="op" id="3094781">(</span><span class="string" id="3094782">&#34;syntax&nbsp;error&nbsp;scanning&nbsp;boolean&#34;</span><span class="op" id="3094813">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3094816">func</span>&nbsp;<span class="ident" id="3094821">indexRune</span><span class="op" id="3094830">(</span><span class="ident" id="3094831">s</span>&nbsp;<span class="builtintype" id="3094833">string</span><span class="op" id="3094839">,</span>&nbsp;<span class="ident" id="3094841">r</span>&nbsp;<span class="builtintype" id="3094843">rune</span><span class="op" id="3094847">)</span>&nbsp;<span class="builtintype" id="3094849">int</span>&nbsp;<span class="op" id="3094853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094856">for</span>&nbsp;<span class="ident" id="3094860">i</span><span class="op" id="3094861">,</span>&nbsp;<span class="ident" id="3094863">c</span>&nbsp;<span class="op" id="3094865">:=</span>&nbsp;<span class="keyword" id="3094868">range</span>&nbsp;<span class="ident" id="3094874"><a href="/fmt/scan.go.html#3094831">s</a></span>&nbsp;<span class="op" id="3094876">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094880">if</span>&nbsp;<span class="ident" id="3094883"><a href="/fmt/scan.go.html#3094863">c</a></span>&nbsp;<span class="op" id="3094885">==</span>&nbsp;<span class="ident" id="3094888"><a href="/fmt/scan.go.html#3094841">r</a></span>&nbsp;<span class="op" id="3094890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094895">return</span>&nbsp;<span class="ident" id="3094902"><a href="/fmt/scan.go.html#3094860">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094912">return</span>&nbsp;<span class="op" id="3094919">-</span><span class="num" id="3094920">1</span><br>
<span class="lineno">495</span><span class="op" id="3094922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3094925">//&nbsp;consume&nbsp;reads&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;in&nbsp;the&nbsp;ok&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3095013">//&nbsp;If&nbsp;accept&nbsp;is&nbsp;true,&nbsp;it&nbsp;puts&nbsp;the&nbsp;character&nbsp;into&nbsp;the&nbsp;input&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="3095079">func</span>&nbsp;<span class="op" id="3095084">(</span><span class="ident" id="3095085">s</span>&nbsp;<span class="op" id="3095087">*</span><span class="ident" id="3095088"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3095090">)</span>&nbsp;<span class="ident" id="3095092">consume</span><span class="op" id="3095099">(</span><span class="ident" id="3095100">ok</span>&nbsp;<span class="builtintype" id="3095103">string</span><span class="op" id="3095109">,</span>&nbsp;<span class="ident" id="3095111">accept</span>&nbsp;<span class="builtintype" id="3095118">bool</span><span class="op" id="3095122">)</span>&nbsp;<span class="builtintype" id="3095124">bool</span>&nbsp;<span class="op" id="3095129">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095132">r</span>&nbsp;<span class="op" id="3095134">:=</span>&nbsp;<span class="ident" id="3095137"><a href="/fmt/scan.go.html#3095085">s</a></span><span class="op" id="3095138">.</span><span class="ident" id="3095139">getRune</span><span class="op" id="3095146">(</span><span class="op" id="3095147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095150">if</span>&nbsp;<span class="ident" id="3095153"><a href="/fmt/scan.go.html#3095132">r</a></span>&nbsp;<span class="op" id="3095155">==</span>&nbsp;<span class="ident" id="3095158"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3095162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095166">return</span>&nbsp;<span class="builtintype" id="3095173">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095183">if</span>&nbsp;<span class="ident" id="3095186"><a href="/fmt/scan.go.html#3094821">indexRune</a></span><span class="op" id="3095195">(</span><span class="ident" id="3095196"><a href="/fmt/scan.go.html#3095100">ok</a></span><span class="op" id="3095198">,</span>&nbsp;<span class="ident" id="3095200"><a href="/fmt/scan.go.html#3095132">r</a></span><span class="op" id="3095201">)</span>&nbsp;<span class="op" id="3095203">&gt;=</span>&nbsp;<span class="num" id="3095206">0</span>&nbsp;<span class="op" id="3095208">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095212">if</span>&nbsp;<span class="ident" id="3095215"><a href="/fmt/scan.go.html#3095111">accept</a></span>&nbsp;<span class="op" id="3095222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095227"><a href="/fmt/scan.go.html#3095085">s</a></span><span class="op" id="3095228">.</span><span class="ident" id="3095229">buf</span><span class="op" id="3095232">.</span><span class="ident" id="3095233">WriteRune</span><span class="op" id="3095242">(</span><span class="ident" id="3095243"><a href="/fmt/scan.go.html#3095132">r</a></span><span class="op" id="3095244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095252">return</span>&nbsp;<span class="builtintype" id="3095259">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095265">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095268">if</span>&nbsp;<span class="ident" id="3095271"><a href="/fmt/scan.go.html#3095132">r</a></span>&nbsp;<span class="op" id="3095273">!=</span>&nbsp;<span class="ident" id="3095276"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3095280">&amp;&amp;</span>&nbsp;<span class="ident" id="3095283"><a href="/fmt/scan.go.html#3095111">accept</a></span>&nbsp;<span class="op" id="3095290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095294"><a href="/fmt/scan.go.html#3095085">s</a></span><span class="op" id="3095295">.</span><span class="ident" id="3095296">UnreadRune</span><span class="op" id="3095306">(</span><span class="op" id="3095307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095313">return</span>&nbsp;<span class="builtintype" id="3095320">false</span><br>
<span class="lineno"></span><span class="op" id="3095326">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span><span class="comment" id="3095329">//&nbsp;peek&nbsp;reports&nbsp;whether&nbsp;the&nbsp;next&nbsp;character&nbsp;is&nbsp;in&nbsp;the&nbsp;ok&nbsp;string,&nbsp;without&nbsp;consuming&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="3095415">func</span>&nbsp;<span class="op" id="3095420">(</span><span class="ident" id="3095421">s</span>&nbsp;<span class="op" id="3095423">*</span><span class="ident" id="3095424"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3095426">)</span>&nbsp;<span class="ident" id="3095428">peek</span><span class="op" id="3095432">(</span><span class="ident" id="3095433">ok</span>&nbsp;<span class="builtintype" id="3095436">string</span><span class="op" id="3095442">)</span>&nbsp;<span class="builtintype" id="3095444">bool</span>&nbsp;<span class="op" id="3095449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095452">r</span>&nbsp;<span class="op" id="3095454">:=</span>&nbsp;<span class="ident" id="3095457"><a href="/fmt/scan.go.html#3095421">s</a></span><span class="op" id="3095458">.</span><span class="ident" id="3095459">getRune</span><span class="op" id="3095466">(</span><span class="op" id="3095467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095470">if</span>&nbsp;<span class="ident" id="3095473"><a href="/fmt/scan.go.html#3095452">r</a></span>&nbsp;<span class="op" id="3095475">!=</span>&nbsp;<span class="ident" id="3095478"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3095482">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095486"><a href="/fmt/scan.go.html#3095421">s</a></span><span class="op" id="3095487">.</span><span class="ident" id="3095488">UnreadRune</span><span class="op" id="3095498">(</span><span class="op" id="3095499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095505">return</span>&nbsp;<span class="ident" id="3095512"><a href="/fmt/scan.go.html#3094821">indexRune</a></span><span class="op" id="3095521">(</span><span class="ident" id="3095522"><a href="/fmt/scan.go.html#3095433">ok</a></span><span class="op" id="3095524">,</span>&nbsp;<span class="ident" id="3095526"><a href="/fmt/scan.go.html#3095452">r</a></span><span class="op" id="3095527">)</span>&nbsp;<span class="op" id="3095529">&gt;=</span>&nbsp;<span class="num" id="3095532">0</span><br>
<span class="lineno"></span><span class="op" id="3095534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="keyword" id="3095537">func</span>&nbsp;<span class="op" id="3095542">(</span><span class="ident" id="3095543">s</span>&nbsp;<span class="op" id="3095545">*</span><span class="ident" id="3095546"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3095548">)</span>&nbsp;<span class="ident" id="3095550">notEOF</span><span class="op" id="3095556">(</span><span class="op" id="3095557">)</span>&nbsp;<span class="op" id="3095559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3095562">//&nbsp;Guarantee&nbsp;there&nbsp;is&nbsp;data&nbsp;to&nbsp;be&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095602">if</span>&nbsp;<span class="ident" id="3095605">r</span>&nbsp;<span class="op" id="3095607">:=</span>&nbsp;<span class="ident" id="3095610"><a href="/fmt/scan.go.html#3095543">s</a></span><span class="op" id="3095611">.</span><span class="ident" id="3095612">getRune</span><span class="op" id="3095619">(</span><span class="op" id="3095620">)</span><span class="op" id="3095621">;</span>&nbsp;<span class="ident" id="3095623"><a href="/fmt/scan.go.html#3095605">r</a></span>&nbsp;<span class="op" id="3095625">==</span>&nbsp;<span class="ident" id="3095628"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3095632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3095636">panic</span><span class="op" id="3095641">(</span><span class="ident" id="3095642"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3095644">.</span><span class="ident" id="3095645">EOF</span><span class="op" id="3095648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095651">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095654"><a href="/fmt/scan.go.html#3095543">s</a></span><span class="op" id="3095655">.</span><span class="ident" id="3095656">UnreadRune</span><span class="op" id="3095666">(</span><span class="op" id="3095667">)</span><br>
<span class="lineno"></span><span class="op" id="3095669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3095672">//&nbsp;accept&nbsp;checks&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.&nbsp;&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;byte&nbsp;(sic)&nbsp;in&nbsp;the&nbsp;string,&nbsp;it&nbsp;puts&nbsp;it&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3095772">//&nbsp;buffer&nbsp;and&nbsp;returns&nbsp;true.&nbsp;Otherwise&nbsp;it&nbsp;return&nbsp;false.</span><br>
<span class="lineno">535</span><span class="keyword" id="3095827">func</span>&nbsp;<span class="op" id="3095832">(</span><span class="ident" id="3095833">s</span>&nbsp;<span class="op" id="3095835">*</span><span class="ident" id="3095836"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3095838">)</span>&nbsp;<span class="ident" id="3095840">accept</span><span class="op" id="3095846">(</span><span class="ident" id="3095847">ok</span>&nbsp;<span class="builtintype" id="3095850">string</span><span class="op" id="3095856">)</span>&nbsp;<span class="builtintype" id="3095858">bool</span>&nbsp;<span class="op" id="3095863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095866">return</span>&nbsp;<span class="ident" id="3095873"><a href="/fmt/scan.go.html#3095833">s</a></span><span class="op" id="3095874">.</span><span class="ident" id="3095875">consume</span><span class="op" id="3095882">(</span><span class="ident" id="3095883"><a href="/fmt/scan.go.html#3095847">ok</a></span><span class="op" id="3095885">,</span>&nbsp;<span class="builtintype" id="3095887">true</span><span class="op" id="3095891">)</span><br>
<span class="lineno"></span><span class="op" id="3095893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3095896">//&nbsp;okVerb&nbsp;verifies&nbsp;that&nbsp;the&nbsp;verb&nbsp;is&nbsp;present&nbsp;in&nbsp;the&nbsp;list,&nbsp;setting&nbsp;s.err&nbsp;appropriately&nbsp;if&nbsp;not.</span><br>
<span class="lineno">540</span><span class="keyword" id="3095989">func</span>&nbsp;<span class="op" id="3095994">(</span><span class="ident" id="3095995">s</span>&nbsp;<span class="op" id="3095997">*</span><span class="ident" id="3095998"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3096000">)</span>&nbsp;<span class="ident" id="3096002">okVerb</span><span class="op" id="3096008">(</span><span class="ident" id="3096009">verb</span>&nbsp;<span class="builtintype" id="3096014">rune</span><span class="op" id="3096018">,</span>&nbsp;<span class="ident" id="3096020">okVerbs</span><span class="op" id="3096027">,</span>&nbsp;<span class="ident" id="3096029">typ</span>&nbsp;<span class="builtintype" id="3096033">string</span><span class="op" id="3096039">)</span>&nbsp;<span class="builtintype" id="3096041">bool</span>&nbsp;<span class="op" id="3096046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096049">for</span>&nbsp;<span class="ident" id="3096053">_</span><span class="op" id="3096054">,</span>&nbsp;<span class="ident" id="3096056">v</span>&nbsp;<span class="op" id="3096058">:=</span>&nbsp;<span class="keyword" id="3096061">range</span>&nbsp;<span class="ident" id="3096067"><a href="/fmt/scan.go.html#3096020">okVerbs</a></span>&nbsp;<span class="op" id="3096075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096079">if</span>&nbsp;<span class="ident" id="3096082"><a href="/fmt/scan.go.html#3096056">v</a></span>&nbsp;<span class="op" id="3096084">==</span>&nbsp;<span class="ident" id="3096087"><a href="/fmt/scan.go.html#3096009">verb</a></span>&nbsp;<span class="op" id="3096092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096097">return</span>&nbsp;<span class="builtintype" id="3096104">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096111">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096117"><a href="/fmt/scan.go.html#3095995">s</a></span><span class="op" id="3096118">.</span><span class="ident" id="3096119">errorString</span><span class="op" id="3096130">(</span><span class="string" id="3096131">&#34;bad&nbsp;verb&nbsp;%&#34;</span>&nbsp;<span class="op" id="3096144">+</span>&nbsp;<span class="builtintype" id="3096146">string</span><span class="op" id="3096152">(</span><span class="ident" id="3096153"><a href="/fmt/scan.go.html#3096009">verb</a></span><span class="op" id="3096157">)</span>&nbsp;<span class="op" id="3096159">+</span>&nbsp;<span class="string" id="3096161">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="3096169">+</span>&nbsp;<span class="ident" id="3096171"><a href="/fmt/scan.go.html#3096029">typ</a></span><span class="op" id="3096174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096177">return</span>&nbsp;<span class="builtintype" id="3096184">false</span><br>
<span class="lineno"></span><span class="op" id="3096190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="3096193">//&nbsp;scanBool&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;boolean&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="3096269">func</span>&nbsp;<span class="op" id="3096274">(</span><span class="ident" id="3096275">s</span>&nbsp;<span class="op" id="3096277">*</span><span class="ident" id="3096278"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3096280">)</span>&nbsp;<span class="ident" id="3096282">scanBool</span><span class="op" id="3096290">(</span><span class="ident" id="3096291">verb</span>&nbsp;<span class="builtintype" id="3096296">rune</span><span class="op" id="3096300">)</span>&nbsp;<span class="builtintype" id="3096302">bool</span>&nbsp;<span class="op" id="3096307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096310"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096311">.</span><span class="ident" id="3096312">skipSpace</span><span class="op" id="3096321">(</span><span class="builtintype" id="3096322">false</span><span class="op" id="3096327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096330"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096331">.</span><span class="ident" id="3096332">notEOF</span><span class="op" id="3096338">(</span><span class="op" id="3096339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096342">if</span>&nbsp;<span class="op" id="3096345">!</span><span class="ident" id="3096346"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096347">.</span><span class="ident" id="3096348">okVerb</span><span class="op" id="3096354">(</span><span class="ident" id="3096355"><a href="/fmt/scan.go.html#3096291">verb</a></span><span class="op" id="3096359">,</span>&nbsp;<span class="string" id="3096361">&#34;tv&#34;</span><span class="op" id="3096365">,</span>&nbsp;<span class="string" id="3096367">&#34;boolean&#34;</span><span class="op" id="3096376">)</span>&nbsp;<span class="op" id="3096378">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096382">return</span>&nbsp;<span class="builtintype" id="3096389">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3096399">//&nbsp;Syntax-checking&nbsp;a&nbsp;boolean&nbsp;is&nbsp;annoying.&nbsp;&nbsp;We&#39;re&nbsp;not&nbsp;fastidious&nbsp;about&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096476">switch</span>&nbsp;<span class="ident" id="3096483"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096484">.</span><span class="ident" id="3096485">getRune</span><span class="op" id="3096492">(</span><span class="op" id="3096493">)</span>&nbsp;<span class="op" id="3096495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096498">case</span>&nbsp;<span class="string" id="3096503">&#39;0&#39;</span><span class="op" id="3096506">:</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096510">return</span>&nbsp;<span class="builtintype" id="3096517">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096524">case</span>&nbsp;<span class="string" id="3096529">&#39;1&#39;</span><span class="op" id="3096532">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096536">return</span>&nbsp;<span class="builtintype" id="3096543">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096549">case</span>&nbsp;<span class="string" id="3096554">&#39;t&#39;</span><span class="op" id="3096557">,</span>&nbsp;<span class="string" id="3096559">&#39;T&#39;</span><span class="op" id="3096562">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096566">if</span>&nbsp;<span class="ident" id="3096569"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096570">.</span><span class="ident" id="3096571">accept</span><span class="op" id="3096577">(</span><span class="string" id="3096578">&#34;rR&#34;</span><span class="op" id="3096582">)</span>&nbsp;<span class="op" id="3096584">&amp;&amp;</span>&nbsp;<span class="op" id="3096587">(</span><span class="op" id="3096588">!</span><span class="ident" id="3096589"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096590">.</span><span class="ident" id="3096591">accept</span><span class="op" id="3096597">(</span><span class="string" id="3096598">&#34;uU&#34;</span><span class="op" id="3096602">)</span>&nbsp;<span class="op" id="3096604">||</span>&nbsp;<span class="op" id="3096607">!</span><span class="ident" id="3096608"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096609">.</span><span class="ident" id="3096610">accept</span><span class="op" id="3096616">(</span><span class="string" id="3096617">&#34;eE&#34;</span><span class="op" id="3096621">)</span><span class="op" id="3096622">)</span>&nbsp;<span class="op" id="3096624">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096629"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096630">.</span><span class="builtintype" id="3096631">error</span><span class="op" id="3096636">(</span><span class="ident" id="3096637"><a href="/fmt/scan.go.html#3094759">boolError</a></span><span class="op" id="3096646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096654">return</span>&nbsp;<span class="builtintype" id="3096661">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096667">case</span>&nbsp;<span class="string" id="3096672">&#39;f&#39;</span><span class="op" id="3096675">,</span>&nbsp;<span class="string" id="3096677">&#39;F&#39;</span><span class="op" id="3096680">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096684">if</span>&nbsp;<span class="ident" id="3096687"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096688">.</span><span class="ident" id="3096689">accept</span><span class="op" id="3096695">(</span><span class="string" id="3096696">&#34;aA&#34;</span><span class="op" id="3096700">)</span>&nbsp;<span class="op" id="3096702">&amp;&amp;</span>&nbsp;<span class="op" id="3096705">(</span><span class="op" id="3096706">!</span><span class="ident" id="3096707"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096708">.</span><span class="ident" id="3096709">accept</span><span class="op" id="3096715">(</span><span class="string" id="3096716">&#34;lL&#34;</span><span class="op" id="3096720">)</span>&nbsp;<span class="op" id="3096722">||</span>&nbsp;<span class="op" id="3096725">!</span><span class="ident" id="3096726"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096727">.</span><span class="ident" id="3096728">accept</span><span class="op" id="3096734">(</span><span class="string" id="3096735">&#34;sS&#34;</span><span class="op" id="3096739">)</span>&nbsp;<span class="op" id="3096741">||</span>&nbsp;<span class="op" id="3096744">!</span><span class="ident" id="3096745"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096746">.</span><span class="ident" id="3096747">accept</span><span class="op" id="3096753">(</span><span class="string" id="3096754">&#34;eE&#34;</span><span class="op" id="3096758">)</span><span class="op" id="3096759">)</span>&nbsp;<span class="op" id="3096761">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096766"><a href="/fmt/scan.go.html#3096275">s</a></span><span class="op" id="3096767">.</span><span class="builtintype" id="3096768">error</span><span class="op" id="3096773">(</span><span class="ident" id="3096774"><a href="/fmt/scan.go.html#3094759">boolError</a></span><span class="op" id="3096783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096791">return</span>&nbsp;<span class="builtintype" id="3096798">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096808">return</span>&nbsp;<span class="builtintype" id="3096815">false</span><br>
<span class="lineno">575</span><span class="op" id="3096821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3096824">//&nbsp;Numerical&nbsp;elements</span><br>
<span class="lineno"></span><span class="keyword" id="3096846">const</span>&nbsp;<span class="op" id="3096852">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096855">binaryDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3096873">=</span>&nbsp;<span class="string" id="3096875">&#34;01&#34;</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096881">octalDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3096899">=</span>&nbsp;<span class="string" id="3096901">&#34;01234567&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096913">decimalDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3096931">=</span>&nbsp;<span class="string" id="3096933">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096947">hexadecimalDigits</span>&nbsp;<span class="op" id="3096965">=</span>&nbsp;<span class="string" id="3096967">&#34;0123456789aAbBcCdDeEfF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096993">sign</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3097011">=</span>&nbsp;<span class="string" id="3097013">&#34;+-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097019">period</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3097037">=</span>&nbsp;<span class="string" id="3097039">&#34;.&#34;</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097044">exponent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3097062">=</span>&nbsp;<span class="string" id="3097064">&#34;eEp&#34;</span><br>
<span class="lineno"></span><span class="op" id="3097070">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3097073">//&nbsp;getBase&nbsp;returns&nbsp;the&nbsp;numeric&nbsp;base&nbsp;represented&nbsp;by&nbsp;the&nbsp;verb&nbsp;and&nbsp;its&nbsp;digit&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3097155">func</span>&nbsp;<span class="op" id="3097160">(</span><span class="ident" id="3097161">s</span>&nbsp;<span class="op" id="3097163">*</span><span class="ident" id="3097164"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3097166">)</span>&nbsp;<span class="ident" id="3097168">getBase</span><span class="op" id="3097175">(</span><span class="ident" id="3097176">verb</span>&nbsp;<span class="builtintype" id="3097181">rune</span><span class="op" id="3097185">)</span>&nbsp;<span class="op" id="3097187">(</span><span class="ident" id="3097188">base</span>&nbsp;<span class="builtintype" id="3097193">int</span><span class="op" id="3097196">,</span>&nbsp;<span class="ident" id="3097198">digits</span>&nbsp;<span class="builtintype" id="3097205">string</span><span class="op" id="3097211">)</span>&nbsp;<span class="op" id="3097213">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097216"><a href="/fmt/scan.go.html#3097161">s</a></span><span class="op" id="3097217">.</span><span class="ident" id="3097218">okVerb</span><span class="op" id="3097224">(</span><span class="ident" id="3097225"><a href="/fmt/scan.go.html#3097176">verb</a></span><span class="op" id="3097229">,</span>&nbsp;<span class="string" id="3097231">&#34;bdoUxXv&#34;</span><span class="op" id="3097240">,</span>&nbsp;<span class="string" id="3097242">&#34;integer&#34;</span><span class="op" id="3097251">)</span>&nbsp;<span class="comment" id="3097253">//&nbsp;sets&nbsp;s.err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097268"><a href="/fmt/scan.go.html#3097188">base</a></span>&nbsp;<span class="op" id="3097273">=</span>&nbsp;<span class="num" id="3097275">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097279"><a href="/fmt/scan.go.html#3097198">digits</a></span>&nbsp;<span class="op" id="3097286">=</span>&nbsp;<span class="ident" id="3097288"><a href="/fmt/scan.go.html#3096913">decimalDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097303">switch</span>&nbsp;<span class="ident" id="3097310"><a href="/fmt/scan.go.html#3097176">verb</a></span>&nbsp;<span class="op" id="3097315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097318">case</span>&nbsp;<span class="string" id="3097323">&#39;b&#39;</span><span class="op" id="3097326">:</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097330"><a href="/fmt/scan.go.html#3097188">base</a></span>&nbsp;<span class="op" id="3097335">=</span>&nbsp;<span class="num" id="3097337">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097341"><a href="/fmt/scan.go.html#3097198">digits</a></span>&nbsp;<span class="op" id="3097348">=</span>&nbsp;<span class="ident" id="3097350"><a href="/fmt/scan.go.html#3096855">binaryDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097364">case</span>&nbsp;<span class="string" id="3097369">&#39;o&#39;</span><span class="op" id="3097372">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097376"><a href="/fmt/scan.go.html#3097188">base</a></span>&nbsp;<span class="op" id="3097381">=</span>&nbsp;<span class="num" id="3097383">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097387"><a href="/fmt/scan.go.html#3097198">digits</a></span>&nbsp;<span class="op" id="3097394">=</span>&nbsp;<span class="ident" id="3097396"><a href="/fmt/scan.go.html#3096881">octalDigits</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097409">case</span>&nbsp;<span class="string" id="3097414">&#39;x&#39;</span><span class="op" id="3097417">,</span>&nbsp;<span class="string" id="3097419">&#39;X&#39;</span><span class="op" id="3097422">,</span>&nbsp;<span class="string" id="3097424">&#39;U&#39;</span><span class="op" id="3097427">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097431"><a href="/fmt/scan.go.html#3097188">base</a></span>&nbsp;<span class="op" id="3097436">=</span>&nbsp;<span class="num" id="3097438">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097443"><a href="/fmt/scan.go.html#3097198">digits</a></span>&nbsp;<span class="op" id="3097450">=</span>&nbsp;<span class="ident" id="3097452"><a href="/fmt/scan.go.html#3096947">hexadecimalDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097474">return</span><br>
<span class="lineno">605</span><span class="op" id="3097481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3097484">//&nbsp;scanNumber&nbsp;returns&nbsp;the&nbsp;numerical&nbsp;string&nbsp;with&nbsp;specified&nbsp;digits&nbsp;starting&nbsp;here.</span><br>
<span class="lineno"></span><span class="keyword" id="3097564">func</span>&nbsp;<span class="op" id="3097569">(</span><span class="ident" id="3097570">s</span>&nbsp;<span class="op" id="3097572">*</span><span class="ident" id="3097573"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3097575">)</span>&nbsp;<span class="ident" id="3097577">scanNumber</span><span class="op" id="3097587">(</span><span class="ident" id="3097588">digits</span>&nbsp;<span class="builtintype" id="3097595">string</span><span class="op" id="3097601">,</span>&nbsp;<span class="ident" id="3097603">haveDigits</span>&nbsp;<span class="builtintype" id="3097614">bool</span><span class="op" id="3097618">)</span>&nbsp;<span class="builtintype" id="3097620">string</span>&nbsp;<span class="op" id="3097627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097630">if</span>&nbsp;<span class="op" id="3097633">!</span><span class="ident" id="3097634"><a href="/fmt/scan.go.html#3097603">haveDigits</a></span>&nbsp;<span class="op" id="3097645">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097649"><a href="/fmt/scan.go.html#3097570">s</a></span><span class="op" id="3097650">.</span><span class="ident" id="3097651">notEOF</span><span class="op" id="3097657">(</span><span class="op" id="3097658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097662">if</span>&nbsp;<span class="op" id="3097665">!</span><span class="ident" id="3097666"><a href="/fmt/scan.go.html#3097570">s</a></span><span class="op" id="3097667">.</span><span class="ident" id="3097668">accept</span><span class="op" id="3097674">(</span><span class="ident" id="3097675"><a href="/fmt/scan.go.html#3097588">digits</a></span><span class="op" id="3097681">)</span>&nbsp;<span class="op" id="3097683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097688"><a href="/fmt/scan.go.html#3097570">s</a></span><span class="op" id="3097689">.</span><span class="ident" id="3097690">errorString</span><span class="op" id="3097701">(</span><span class="string" id="3097702">&#34;expected&nbsp;integer&#34;</span><span class="op" id="3097720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097727">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097730">for</span>&nbsp;<span class="ident" id="3097734"><a href="/fmt/scan.go.html#3097570">s</a></span><span class="op" id="3097735">.</span><span class="ident" id="3097736">accept</span><span class="op" id="3097742">(</span><span class="ident" id="3097743"><a href="/fmt/scan.go.html#3097588">digits</a></span><span class="op" id="3097749">)</span>&nbsp;<span class="op" id="3097751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097757">return</span>&nbsp;<span class="builtintype" id="3097764">string</span><span class="op" id="3097770">(</span><span class="ident" id="3097771"><a href="/fmt/scan.go.html#3097570">s</a></span><span class="op" id="3097772">.</span><span class="ident" id="3097773">buf</span><span class="op" id="3097776">)</span><br>
<span class="lineno"></span><span class="op" id="3097778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="3097781">//&nbsp;scanRune&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;value&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="3097835">func</span>&nbsp;<span class="op" id="3097840">(</span><span class="ident" id="3097841">s</span>&nbsp;<span class="op" id="3097843">*</span><span class="ident" id="3097844"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3097846">)</span>&nbsp;<span class="ident" id="3097848">scanRune</span><span class="op" id="3097856">(</span><span class="ident" id="3097857">bitSize</span>&nbsp;<span class="builtintype" id="3097865">int</span><span class="op" id="3097868">)</span>&nbsp;<span class="ident" id="3097870">int64</span>&nbsp;<span class="op" id="3097876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097879"><a href="/fmt/scan.go.html#3097841">s</a></span><span class="op" id="3097880">.</span><span class="ident" id="3097881">notEOF</span><span class="op" id="3097887">(</span><span class="op" id="3097888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097891">r</span>&nbsp;<span class="op" id="3097893">:=</span>&nbsp;<span class="ident" id="3097896">int64</span><span class="op" id="3097901">(</span><span class="ident" id="3097902"><a href="/fmt/scan.go.html#3097841">s</a></span><span class="op" id="3097903">.</span><span class="ident" id="3097904">getRune</span><span class="op" id="3097911">(</span><span class="op" id="3097912">)</span><span class="op" id="3097913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097916">n</span>&nbsp;<span class="op" id="3097918">:=</span>&nbsp;<span class="builtintype" id="3097921">uint</span><span class="op" id="3097925">(</span><span class="ident" id="3097926"><a href="/fmt/scan.go.html#3097857">bitSize</a></span><span class="op" id="3097933">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097936">x</span>&nbsp;<span class="op" id="3097938">:=</span>&nbsp;<span class="op" id="3097941">(</span><span class="ident" id="3097942"><a href="/fmt/scan.go.html#3097891">r</a></span>&nbsp;<span class="op" id="3097944">&lt;&lt;</span>&nbsp;<span class="op" id="3097947">(</span><span class="num" id="3097948">64</span>&nbsp;<span class="op" id="3097951">-</span>&nbsp;<span class="ident" id="3097953"><a href="/fmt/scan.go.html#3097916">n</a></span><span class="op" id="3097954">)</span><span class="op" id="3097955">)</span>&nbsp;<span class="op" id="3097957">&gt;&gt;</span>&nbsp;<span class="op" id="3097960">(</span><span class="num" id="3097961">64</span>&nbsp;<span class="op" id="3097964">-</span>&nbsp;<span class="ident" id="3097966"><a href="/fmt/scan.go.html#3097916">n</a></span><span class="op" id="3097967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097970">if</span>&nbsp;<span class="ident" id="3097973"><a href="/fmt/scan.go.html#3097936">x</a></span>&nbsp;<span class="op" id="3097975">!=</span>&nbsp;<span class="ident" id="3097978"><a href="/fmt/scan.go.html#3097891">r</a></span>&nbsp;<span class="op" id="3097980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097984"><a href="/fmt/scan.go.html#3097841">s</a></span><span class="op" id="3097985">.</span><span class="ident" id="3097986">errorString</span><span class="op" id="3097997">(</span><span class="string" id="3097998">&#34;overflow&nbsp;on&nbsp;character&nbsp;value&nbsp;&#34;</span>&nbsp;<span class="op" id="3098029">+</span>&nbsp;<span class="builtintype" id="3098031">string</span><span class="op" id="3098037">(</span><span class="ident" id="3098038"><a href="/fmt/scan.go.html#3097891">r</a></span><span class="op" id="3098039">)</span><span class="op" id="3098040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3098043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098046">return</span>&nbsp;<span class="ident" id="3098053"><a href="/fmt/scan.go.html#3097891">r</a></span><br>
<span class="lineno">630</span><span class="op" id="3098055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3098058">//&nbsp;scanBasePrefix&nbsp;reports&nbsp;whether&nbsp;the&nbsp;integer&nbsp;begins&nbsp;with&nbsp;a&nbsp;0&nbsp;or&nbsp;0x,</span><br>
<span class="lineno"></span><span class="comment" id="3098127">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;base,&nbsp;digit&nbsp;string,&nbsp;and&nbsp;whether&nbsp;a&nbsp;zero&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="3098196">//&nbsp;It&nbsp;is&nbsp;called&nbsp;only&nbsp;if&nbsp;the&nbsp;verb&nbsp;is&nbsp;%v.</span><br>
<span class="lineno">635</span><span class="keyword" id="3098236">func</span>&nbsp;<span class="op" id="3098241">(</span><span class="ident" id="3098242">s</span>&nbsp;<span class="op" id="3098244">*</span><span class="ident" id="3098245"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3098247">)</span>&nbsp;<span class="ident" id="3098249">scanBasePrefix</span><span class="op" id="3098263">(</span><span class="op" id="3098264">)</span>&nbsp;<span class="op" id="3098266">(</span><span class="ident" id="3098267">base</span>&nbsp;<span class="builtintype" id="3098272">int</span><span class="op" id="3098275">,</span>&nbsp;<span class="ident" id="3098277">digits</span>&nbsp;<span class="builtintype" id="3098284">string</span><span class="op" id="3098290">,</span>&nbsp;<span class="ident" id="3098292">found</span>&nbsp;<span class="builtintype" id="3098298">bool</span><span class="op" id="3098302">)</span>&nbsp;<span class="op" id="3098304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098307">if</span>&nbsp;<span class="op" id="3098310">!</span><span class="ident" id="3098311"><a href="/fmt/scan.go.html#3098242">s</a></span><span class="op" id="3098312">.</span><span class="ident" id="3098313">peek</span><span class="op" id="3098317">(</span><span class="string" id="3098318">&#34;0&#34;</span><span class="op" id="3098321">)</span>&nbsp;<span class="op" id="3098323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098327">return</span>&nbsp;<span class="num" id="3098334">10</span><span class="op" id="3098336">,</span>&nbsp;<span class="ident" id="3098338"><a href="/fmt/scan.go.html#3096913">decimalDigits</a></span><span class="op" id="3098351">,</span>&nbsp;<span class="builtintype" id="3098353">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3098360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098363"><a href="/fmt/scan.go.html#3098242">s</a></span><span class="op" id="3098364">.</span><span class="ident" id="3098365">accept</span><span class="op" id="3098371">(</span><span class="string" id="3098372">&#34;0&#34;</span><span class="op" id="3098375">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098378"><a href="/fmt/scan.go.html#3098292">found</a></span>&nbsp;<span class="op" id="3098384">=</span>&nbsp;<span class="builtintype" id="3098386">true</span>&nbsp;<span class="comment" id="3098391">//&nbsp;We&#39;ve&nbsp;put&nbsp;a&nbsp;digit&nbsp;into&nbsp;the&nbsp;token&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3098436">//&nbsp;Special&nbsp;cases&nbsp;for&nbsp;&#39;0&#39;&nbsp;&amp;&amp;&nbsp;&#39;0x&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098470"><a href="/fmt/scan.go.html#3098267">base</a></span><span class="op" id="3098474">,</span>&nbsp;<span class="ident" id="3098476"><a href="/fmt/scan.go.html#3098277">digits</a></span>&nbsp;<span class="op" id="3098483">=</span>&nbsp;<span class="num" id="3098485">8</span><span class="op" id="3098486">,</span>&nbsp;<span class="ident" id="3098488"><a href="/fmt/scan.go.html#3096881">octalDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098501">if</span>&nbsp;<span class="ident" id="3098504"><a href="/fmt/scan.go.html#3098242">s</a></span><span class="op" id="3098505">.</span><span class="ident" id="3098506">peek</span><span class="op" id="3098510">(</span><span class="string" id="3098511">&#34;xX&#34;</span><span class="op" id="3098515">)</span>&nbsp;<span class="op" id="3098517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098521"><a href="/fmt/scan.go.html#3098242">s</a></span><span class="op" id="3098522">.</span><span class="ident" id="3098523">consume</span><span class="op" id="3098530">(</span><span class="string" id="3098531">&#34;xX&#34;</span><span class="op" id="3098535">,</span>&nbsp;<span class="builtintype" id="3098537">false</span><span class="op" id="3098542">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098546"><a href="/fmt/scan.go.html#3098267">base</a></span><span class="op" id="3098550">,</span>&nbsp;<span class="ident" id="3098552"><a href="/fmt/scan.go.html#3098277">digits</a></span>&nbsp;<span class="op" id="3098559">=</span>&nbsp;<span class="num" id="3098561">16</span><span class="op" id="3098563">,</span>&nbsp;<span class="ident" id="3098565"><a href="/fmt/scan.go.html#3096947">hexadecimalDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3098584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098587">return</span><br>
<span class="lineno"></span><span class="op" id="3098594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span><span class="comment" id="3098597">//&nbsp;scanInt&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;integer&nbsp;represented&nbsp;by&nbsp;the&nbsp;next</span><br>
<span class="lineno"></span><span class="comment" id="3098665">//&nbsp;token,&nbsp;checking&nbsp;for&nbsp;overflow.&nbsp;&nbsp;Any&nbsp;error&nbsp;is&nbsp;stored&nbsp;in&nbsp;s.err.</span><br>
<span class="lineno"></span><span class="keyword" id="3098729">func</span>&nbsp;<span class="op" id="3098734">(</span><span class="ident" id="3098735">s</span>&nbsp;<span class="op" id="3098737">*</span><span class="ident" id="3098738"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3098740">)</span>&nbsp;<span class="ident" id="3098742">scanInt</span><span class="op" id="3098749">(</span><span class="ident" id="3098750">verb</span>&nbsp;<span class="builtintype" id="3098755">rune</span><span class="op" id="3098759">,</span>&nbsp;<span class="ident" id="3098761">bitSize</span>&nbsp;<span class="builtintype" id="3098769">int</span><span class="op" id="3098772">)</span>&nbsp;<span class="ident" id="3098774">int64</span>&nbsp;<span class="op" id="3098780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098783">if</span>&nbsp;<span class="ident" id="3098786"><a href="/fmt/scan.go.html#3098750">verb</a></span>&nbsp;<span class="op" id="3098791">==</span>&nbsp;<span class="string" id="3098794">&#39;c&#39;</span>&nbsp;<span class="op" id="3098798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098802">return</span>&nbsp;<span class="ident" id="3098809"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3098810">.</span><span class="ident" id="3098811">scanRune</span><span class="op" id="3098819">(</span><span class="ident" id="3098820"><a href="/fmt/scan.go.html#3098761">bitSize</a></span><span class="op" id="3098827">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3098830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098833"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3098834">.</span><span class="ident" id="3098835">skipSpace</span><span class="op" id="3098844">(</span><span class="builtintype" id="3098845">false</span><span class="op" id="3098850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098853"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3098854">.</span><span class="ident" id="3098855">notEOF</span><span class="op" id="3098861">(</span><span class="op" id="3098862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098865">base</span><span class="op" id="3098869">,</span>&nbsp;<span class="ident" id="3098871">digits</span>&nbsp;<span class="op" id="3098878">:=</span>&nbsp;<span class="ident" id="3098881"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3098882">.</span><span class="ident" id="3098883">getBase</span><span class="op" id="3098890">(</span><span class="ident" id="3098891"><a href="/fmt/scan.go.html#3098750">verb</a></span><span class="op" id="3098895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098898">haveDigits</span>&nbsp;<span class="op" id="3098909">:=</span>&nbsp;<span class="builtintype" id="3098912">false</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098919">if</span>&nbsp;<span class="ident" id="3098922"><a href="/fmt/scan.go.html#3098750">verb</a></span>&nbsp;<span class="op" id="3098927">==</span>&nbsp;<span class="string" id="3098930">&#39;U&#39;</span>&nbsp;<span class="op" id="3098934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098938">if</span>&nbsp;<span class="op" id="3098941">!</span><span class="ident" id="3098942"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3098943">.</span><span class="ident" id="3098944">consume</span><span class="op" id="3098951">(</span><span class="string" id="3098952">&#34;U&#34;</span><span class="op" id="3098955">,</span>&nbsp;<span class="builtintype" id="3098957">false</span><span class="op" id="3098962">)</span>&nbsp;<span class="op" id="3098964">||</span>&nbsp;<span class="op" id="3098967">!</span><span class="ident" id="3098968"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3098969">.</span><span class="ident" id="3098970">consume</span><span class="op" id="3098977">(</span><span class="string" id="3098978">&#34;+&#34;</span><span class="op" id="3098981">,</span>&nbsp;<span class="builtintype" id="3098983">false</span><span class="op" id="3098988">)</span>&nbsp;<span class="op" id="3098990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098995"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3098996">.</span><span class="ident" id="3098997">errorString</span><span class="op" id="3099008">(</span><span class="string" id="3099009">&#34;bad&nbsp;unicode&nbsp;format&nbsp;&#34;</span><span class="op" id="3099030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099037">}</span>&nbsp;<span class="keyword" id="3099039">else</span>&nbsp;<span class="op" id="3099044">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099048"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3099049">.</span><span class="ident" id="3099050">accept</span><span class="op" id="3099056">(</span><span class="ident" id="3099057"><a href="/fmt/scan.go.html#3096993">sign</a></span><span class="op" id="3099061">)</span>&nbsp;<span class="comment" id="3099063">//&nbsp;If&nbsp;there&#39;s&nbsp;a&nbsp;sign,&nbsp;it&nbsp;will&nbsp;be&nbsp;left&nbsp;in&nbsp;the&nbsp;token&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3099124">if</span>&nbsp;<span class="ident" id="3099127"><a href="/fmt/scan.go.html#3098750">verb</a></span>&nbsp;<span class="op" id="3099132">==</span>&nbsp;<span class="string" id="3099135">&#39;v&#39;</span>&nbsp;<span class="op" id="3099139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099144"><a href="/fmt/scan.go.html#3098865">base</a></span><span class="op" id="3099148">,</span>&nbsp;<span class="ident" id="3099150"><a href="/fmt/scan.go.html#3098871">digits</a></span><span class="op" id="3099156">,</span>&nbsp;<span class="ident" id="3099158"><a href="/fmt/scan.go.html#3098898">haveDigits</a></span>&nbsp;<span class="op" id="3099169">=</span>&nbsp;<span class="ident" id="3099171"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3099172">.</span><span class="ident" id="3099173">scanBasePrefix</span><span class="op" id="3099187">(</span><span class="op" id="3099188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099195">}</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099198">tok</span>&nbsp;<span class="op" id="3099202">:=</span>&nbsp;<span class="ident" id="3099205"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3099206">.</span><span class="ident" id="3099207">scanNumber</span><span class="op" id="3099217">(</span><span class="ident" id="3099218"><a href="/fmt/scan.go.html#3098871">digits</a></span><span class="op" id="3099224">,</span>&nbsp;<span class="ident" id="3099226"><a href="/fmt/scan.go.html#3098898">haveDigits</a></span><span class="op" id="3099236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099239">i</span><span class="op" id="3099240">,</span>&nbsp;<span class="ident" id="3099242">err</span>&nbsp;<span class="op" id="3099246">:=</span>&nbsp;<span class="ident" id="3099249"><a href="/fmt/scan.go.html#3081814">strconv</a></span><span class="op" id="3099256">.</span><span class="ident" id="3099257">ParseInt</span><span class="op" id="3099265">(</span><span class="ident" id="3099266"><a href="/fmt/scan.go.html#3099198">tok</a></span><span class="op" id="3099269">,</span>&nbsp;<span class="ident" id="3099271"><a href="/fmt/scan.go.html#3098865">base</a></span><span class="op" id="3099275">,</span>&nbsp;<span class="num" id="3099277">64</span><span class="op" id="3099279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3099282">if</span>&nbsp;<span class="ident" id="3099285"><a href="/fmt/scan.go.html#3099242">err</a></span>&nbsp;<span class="op" id="3099289">!=</span>&nbsp;<span class="ident" id="3099292">nil</span>&nbsp;<span class="op" id="3099296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099300"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3099301">.</span><span class="builtintype" id="3099302">error</span><span class="op" id="3099307">(</span><span class="ident" id="3099308"><a href="/fmt/scan.go.html#3099242">err</a></span><span class="op" id="3099311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099314">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099317">n</span>&nbsp;<span class="op" id="3099319">:=</span>&nbsp;<span class="builtintype" id="3099322">uint</span><span class="op" id="3099326">(</span><span class="ident" id="3099327"><a href="/fmt/scan.go.html#3098761">bitSize</a></span><span class="op" id="3099334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099337">x</span>&nbsp;<span class="op" id="3099339">:=</span>&nbsp;<span class="op" id="3099342">(</span><span class="ident" id="3099343"><a href="/fmt/scan.go.html#3099239">i</a></span>&nbsp;<span class="op" id="3099345">&lt;&lt;</span>&nbsp;<span class="op" id="3099348">(</span><span class="num" id="3099349">64</span>&nbsp;<span class="op" id="3099352">-</span>&nbsp;<span class="ident" id="3099354"><a href="/fmt/scan.go.html#3099317">n</a></span><span class="op" id="3099355">)</span><span class="op" id="3099356">)</span>&nbsp;<span class="op" id="3099358">&gt;&gt;</span>&nbsp;<span class="op" id="3099361">(</span><span class="num" id="3099362">64</span>&nbsp;<span class="op" id="3099365">-</span>&nbsp;<span class="ident" id="3099367"><a href="/fmt/scan.go.html#3099317">n</a></span><span class="op" id="3099368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3099371">if</span>&nbsp;<span class="ident" id="3099374"><a href="/fmt/scan.go.html#3099337">x</a></span>&nbsp;<span class="op" id="3099376">!=</span>&nbsp;<span class="ident" id="3099379"><a href="/fmt/scan.go.html#3099239">i</a></span>&nbsp;<span class="op" id="3099381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099385"><a href="/fmt/scan.go.html#3098735">s</a></span><span class="op" id="3099386">.</span><span class="ident" id="3099387">errorString</span><span class="op" id="3099398">(</span><span class="string" id="3099399">&#34;integer&nbsp;overflow&nbsp;on&nbsp;token&nbsp;&#34;</span>&nbsp;<span class="op" id="3099428">+</span>&nbsp;<span class="ident" id="3099430"><a href="/fmt/scan.go.html#3099198">tok</a></span><span class="op" id="3099433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099436">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3099439">return</span>&nbsp;<span class="ident" id="3099446"><a href="/fmt/scan.go.html#3099239">i</a></span><br>
<span class="lineno"></span><span class="op" id="3099448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3099451">//&nbsp;scanUint&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;represented</span><br>
<span class="lineno"></span><span class="comment" id="3099517">//&nbsp;by&nbsp;the&nbsp;next&nbsp;token,&nbsp;checking&nbsp;for&nbsp;overflow.&nbsp;&nbsp;Any&nbsp;error&nbsp;is&nbsp;stored&nbsp;in&nbsp;s.err.</span><br>
<span class="lineno">685</span><span class="keyword" id="3099593">func</span>&nbsp;<span class="op" id="3099598">(</span><span class="ident" id="3099599">s</span>&nbsp;<span class="op" id="3099601">*</span><span class="ident" id="3099602"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3099604">)</span>&nbsp;<span class="ident" id="3099606">scanUint</span><span class="op" id="3099614">(</span><span class="ident" id="3099615">verb</span>&nbsp;<span class="builtintype" id="3099620">rune</span><span class="op" id="3099624">,</span>&nbsp;<span class="ident" id="3099626">bitSize</span>&nbsp;<span class="builtintype" id="3099634">int</span><span class="op" id="3099637">)</span>&nbsp;<span class="ident" id="3099639">uint64</span>&nbsp;<span class="op" id="3099646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3099649">if</span>&nbsp;<span class="ident" id="3099652"><a href="/fmt/scan.go.html#3099615">verb</a></span>&nbsp;<span class="op" id="3099657">==</span>&nbsp;<span class="string" id="3099660">&#39;c&#39;</span>&nbsp;<span class="op" id="3099664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3099668">return</span>&nbsp;<span class="ident" id="3099675">uint64</span><span class="op" id="3099681">(</span><span class="ident" id="3099682"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099683">.</span><span class="ident" id="3099684">scanRune</span><span class="op" id="3099692">(</span><span class="ident" id="3099693"><a href="/fmt/scan.go.html#3099626">bitSize</a></span><span class="op" id="3099700">)</span><span class="op" id="3099701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099707"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099708">.</span><span class="ident" id="3099709">skipSpace</span><span class="op" id="3099718">(</span><span class="builtintype" id="3099719">false</span><span class="op" id="3099724">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099727"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099728">.</span><span class="ident" id="3099729">notEOF</span><span class="op" id="3099735">(</span><span class="op" id="3099736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099739">base</span><span class="op" id="3099743">,</span>&nbsp;<span class="ident" id="3099745">digits</span>&nbsp;<span class="op" id="3099752">:=</span>&nbsp;<span class="ident" id="3099755"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099756">.</span><span class="ident" id="3099757">getBase</span><span class="op" id="3099764">(</span><span class="ident" id="3099765"><a href="/fmt/scan.go.html#3099615">verb</a></span><span class="op" id="3099769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099772">haveDigits</span>&nbsp;<span class="op" id="3099783">:=</span>&nbsp;<span class="builtintype" id="3099786">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3099793">if</span>&nbsp;<span class="ident" id="3099796"><a href="/fmt/scan.go.html#3099615">verb</a></span>&nbsp;<span class="op" id="3099801">==</span>&nbsp;<span class="string" id="3099804">&#39;U&#39;</span>&nbsp;<span class="op" id="3099808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3099812">if</span>&nbsp;<span class="op" id="3099815">!</span><span class="ident" id="3099816"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099817">.</span><span class="ident" id="3099818">consume</span><span class="op" id="3099825">(</span><span class="string" id="3099826">&#34;U&#34;</span><span class="op" id="3099829">,</span>&nbsp;<span class="builtintype" id="3099831">false</span><span class="op" id="3099836">)</span>&nbsp;<span class="op" id="3099838">||</span>&nbsp;<span class="op" id="3099841">!</span><span class="ident" id="3099842"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099843">.</span><span class="ident" id="3099844">consume</span><span class="op" id="3099851">(</span><span class="string" id="3099852">&#34;+&#34;</span><span class="op" id="3099855">,</span>&nbsp;<span class="builtintype" id="3099857">false</span><span class="op" id="3099862">)</span>&nbsp;<span class="op" id="3099864">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099869"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099870">.</span><span class="ident" id="3099871">errorString</span><span class="op" id="3099882">(</span><span class="string" id="3099883">&#34;bad&nbsp;unicode&nbsp;format&nbsp;&#34;</span><span class="op" id="3099904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099911">}</span>&nbsp;<span class="keyword" id="3099913">else</span>&nbsp;<span class="keyword" id="3099918">if</span>&nbsp;<span class="ident" id="3099921"><a href="/fmt/scan.go.html#3099615">verb</a></span>&nbsp;<span class="op" id="3099926">==</span>&nbsp;<span class="string" id="3099929">&#39;v&#39;</span>&nbsp;<span class="op" id="3099933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099937"><a href="/fmt/scan.go.html#3099739">base</a></span><span class="op" id="3099941">,</span>&nbsp;<span class="ident" id="3099943"><a href="/fmt/scan.go.html#3099745">digits</a></span><span class="op" id="3099949">,</span>&nbsp;<span class="ident" id="3099951"><a href="/fmt/scan.go.html#3099772">haveDigits</a></span>&nbsp;<span class="op" id="3099962">=</span>&nbsp;<span class="ident" id="3099964"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099965">.</span><span class="ident" id="3099966">scanBasePrefix</span><span class="op" id="3099980">(</span><span class="op" id="3099981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3099984">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3099987">tok</span>&nbsp;<span class="op" id="3099991">:=</span>&nbsp;<span class="ident" id="3099994"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3099995">.</span><span class="ident" id="3099996">scanNumber</span><span class="op" id="3100006">(</span><span class="ident" id="3100007"><a href="/fmt/scan.go.html#3099745">digits</a></span><span class="op" id="3100013">,</span>&nbsp;<span class="ident" id="3100015"><a href="/fmt/scan.go.html#3099772">haveDigits</a></span><span class="op" id="3100025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3100028">i</span><span class="op" id="3100029">,</span>&nbsp;<span class="ident" id="3100031">err</span>&nbsp;<span class="op" id="3100035">:=</span>&nbsp;<span class="ident" id="3100038"><a href="/fmt/scan.go.html#3081814">strconv</a></span><span class="op" id="3100045">.</span><span class="ident" id="3100046">ParseUint</span><span class="op" id="3100055">(</span><span class="ident" id="3100056"><a href="/fmt/scan.go.html#3099987">tok</a></span><span class="op" id="3100059">,</span>&nbsp;<span class="ident" id="3100061"><a href="/fmt/scan.go.html#3099739">base</a></span><span class="op" id="3100065">,</span>&nbsp;<span class="num" id="3100067">64</span><span class="op" id="3100069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100072">if</span>&nbsp;<span class="ident" id="3100075"><a href="/fmt/scan.go.html#3100031">err</a></span>&nbsp;<span class="op" id="3100079">!=</span>&nbsp;<span class="ident" id="3100082">nil</span>&nbsp;<span class="op" id="3100086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3100090"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3100091">.</span><span class="builtintype" id="3100092">error</span><span class="op" id="3100097">(</span><span class="ident" id="3100098"><a href="/fmt/scan.go.html#3100031">err</a></span><span class="op" id="3100101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3100104">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3100107">n</span>&nbsp;<span class="op" id="3100109">:=</span>&nbsp;<span class="builtintype" id="3100112">uint</span><span class="op" id="3100116">(</span><span class="ident" id="3100117"><a href="/fmt/scan.go.html#3099626">bitSize</a></span><span class="op" id="3100124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3100127">x</span>&nbsp;<span class="op" id="3100129">:=</span>&nbsp;<span class="op" id="3100132">(</span><span class="ident" id="3100133"><a href="/fmt/scan.go.html#3100028">i</a></span>&nbsp;<span class="op" id="3100135">&lt;&lt;</span>&nbsp;<span class="op" id="3100138">(</span><span class="num" id="3100139">64</span>&nbsp;<span class="op" id="3100142">-</span>&nbsp;<span class="ident" id="3100144"><a href="/fmt/scan.go.html#3100107">n</a></span><span class="op" id="3100145">)</span><span class="op" id="3100146">)</span>&nbsp;<span class="op" id="3100148">&gt;&gt;</span>&nbsp;<span class="op" id="3100151">(</span><span class="num" id="3100152">64</span>&nbsp;<span class="op" id="3100155">-</span>&nbsp;<span class="ident" id="3100157"><a href="/fmt/scan.go.html#3100107">n</a></span><span class="op" id="3100158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100161">if</span>&nbsp;<span class="ident" id="3100164"><a href="/fmt/scan.go.html#3100127">x</a></span>&nbsp;<span class="op" id="3100166">!=</span>&nbsp;<span class="ident" id="3100169"><a href="/fmt/scan.go.html#3100028">i</a></span>&nbsp;<span class="op" id="3100171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3100175"><a href="/fmt/scan.go.html#3099599">s</a></span><span class="op" id="3100176">.</span><span class="ident" id="3100177">errorString</span><span class="op" id="3100188">(</span><span class="string" id="3100189">&#34;unsigned&nbsp;integer&nbsp;overflow&nbsp;on&nbsp;token&nbsp;&#34;</span>&nbsp;<span class="op" id="3100227">+</span>&nbsp;<span class="ident" id="3100229"><a href="/fmt/scan.go.html#3099987">tok</a></span><span class="op" id="3100232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3100235">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100238">return</span>&nbsp;<span class="ident" id="3100245"><a href="/fmt/scan.go.html#3100028">i</a></span><br>
<span class="lineno"></span><span class="op" id="3100247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3100250">//&nbsp;floatToken&nbsp;returns&nbsp;the&nbsp;floating-point&nbsp;number&nbsp;starting&nbsp;here,&nbsp;no&nbsp;longer&nbsp;than&nbsp;swid</span><br>
<span class="lineno"></span><span class="comment" id="3100333">//&nbsp;if&nbsp;the&nbsp;width&nbsp;is&nbsp;specified.&nbsp;It&#39;s&nbsp;not&nbsp;rigorous&nbsp;about&nbsp;syntax&nbsp;because&nbsp;it&nbsp;doesn&#39;t&nbsp;check&nbsp;that</span><br>
<span class="lineno">715</span><span class="comment" id="3100424">//&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;some&nbsp;digits,&nbsp;but&nbsp;Atof&nbsp;will&nbsp;do&nbsp;that.</span><br>
<span class="lineno"></span><span class="keyword" id="3100480">func</span>&nbsp;<span class="op" id="3100485">(</span><span class="ident" id="3100486">s</span>&nbsp;<span class="op" id="3100488">*</span><span class="ident" id="3100489"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3100491">)</span>&nbsp;<span class="ident" id="3100493">floatToken</span><span class="op" id="3100503">(</span><span class="op" id="3100504">)</span>&nbsp;<span class="builtintype" id="3100506">string</span>&nbsp;<span class="op" id="3100513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3100516"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100517">.</span><span class="ident" id="3100518">buf</span>&nbsp;<span class="op" id="3100522">=</span>&nbsp;<span class="ident" id="3100524"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100525">.</span><span class="ident" id="3100526">buf</span><span class="op" id="3100529">[</span><span class="op" id="3100530">:</span><span class="num" id="3100531">0</span><span class="op" id="3100532">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100535">//&nbsp;NaN?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100544">if</span>&nbsp;<span class="ident" id="3100547"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100548">.</span><span class="ident" id="3100549">accept</span><span class="op" id="3100555">(</span><span class="string" id="3100556">&#34;nN&#34;</span><span class="op" id="3100560">)</span>&nbsp;<span class="op" id="3100562">&amp;&amp;</span>&nbsp;<span class="ident" id="3100565"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100566">.</span><span class="ident" id="3100567">accept</span><span class="op" id="3100573">(</span><span class="string" id="3100574">&#34;aA&#34;</span><span class="op" id="3100578">)</span>&nbsp;<span class="op" id="3100580">&amp;&amp;</span>&nbsp;<span class="ident" id="3100583"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100584">.</span><span class="ident" id="3100585">accept</span><span class="op" id="3100591">(</span><span class="string" id="3100592">&#34;nN&#34;</span><span class="op" id="3100596">)</span>&nbsp;<span class="op" id="3100598">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100602">return</span>&nbsp;<span class="builtintype" id="3100609">string</span><span class="op" id="3100615">(</span><span class="ident" id="3100616"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100617">.</span><span class="ident" id="3100618">buf</span><span class="op" id="3100621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3100624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100627">//&nbsp;leading&nbsp;sign?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3100645"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100646">.</span><span class="ident" id="3100647">accept</span><span class="op" id="3100653">(</span><span class="ident" id="3100654"><a href="/fmt/scan.go.html#3096993">sign</a></span><span class="op" id="3100658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100661">//&nbsp;Inf?</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100670">if</span>&nbsp;<span class="ident" id="3100673"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100674">.</span><span class="ident" id="3100675">accept</span><span class="op" id="3100681">(</span><span class="string" id="3100682">&#34;iI&#34;</span><span class="op" id="3100686">)</span>&nbsp;<span class="op" id="3100688">&amp;&amp;</span>&nbsp;<span class="ident" id="3100691"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100692">.</span><span class="ident" id="3100693">accept</span><span class="op" id="3100699">(</span><span class="string" id="3100700">&#34;nN&#34;</span><span class="op" id="3100704">)</span>&nbsp;<span class="op" id="3100706">&amp;&amp;</span>&nbsp;<span class="ident" id="3100709"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100710">.</span><span class="ident" id="3100711">accept</span><span class="op" id="3100717">(</span><span class="string" id="3100718">&#34;fF&#34;</span><span class="op" id="3100722">)</span>&nbsp;<span class="op" id="3100724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100728">return</span>&nbsp;<span class="builtintype" id="3100735">string</span><span class="op" id="3100741">(</span><span class="ident" id="3100742"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100743">.</span><span class="ident" id="3100744">buf</span><span class="op" id="3100747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3100750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100753">//&nbsp;digits?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100765">for</span>&nbsp;<span class="ident" id="3100769"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100770">.</span><span class="ident" id="3100771">accept</span><span class="op" id="3100777">(</span><span class="ident" id="3100778"><a href="/fmt/scan.go.html#3096913">decimalDigits</a></span><span class="op" id="3100791">)</span>&nbsp;<span class="op" id="3100793">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3100796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100799">//&nbsp;decimal&nbsp;point?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100818">if</span>&nbsp;<span class="ident" id="3100821"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100822">.</span><span class="ident" id="3100823">accept</span><span class="op" id="3100829">(</span><span class="ident" id="3100830"><a href="/fmt/scan.go.html#3097019">period</a></span><span class="op" id="3100836">)</span>&nbsp;<span class="op" id="3100838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100842">//&nbsp;fraction?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100857">for</span>&nbsp;<span class="ident" id="3100861"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100862">.</span><span class="ident" id="3100863">accept</span><span class="op" id="3100869">(</span><span class="ident" id="3100870"><a href="/fmt/scan.go.html#3096913">decimalDigits</a></span><span class="op" id="3100883">)</span>&nbsp;<span class="op" id="3100885">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3100889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3100892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100895">//&nbsp;exponent?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100909">if</span>&nbsp;<span class="ident" id="3100912"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100913">.</span><span class="ident" id="3100914">accept</span><span class="op" id="3100920">(</span><span class="ident" id="3100921"><a href="/fmt/scan.go.html#3097044">exponent</a></span><span class="op" id="3100929">)</span>&nbsp;<span class="op" id="3100931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100935">//&nbsp;leading&nbsp;sign?</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3100954"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100955">.</span><span class="ident" id="3100956">accept</span><span class="op" id="3100962">(</span><span class="ident" id="3100963"><a href="/fmt/scan.go.html#3096993">sign</a></span><span class="op" id="3100967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3100971">//&nbsp;digits?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3100984">for</span>&nbsp;<span class="ident" id="3100988"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3100989">.</span><span class="ident" id="3100990">accept</span><span class="op" id="3100996">(</span><span class="ident" id="3100997"><a href="/fmt/scan.go.html#3096913">decimalDigits</a></span><span class="op" id="3101010">)</span>&nbsp;<span class="op" id="3101012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3101016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3101019">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3101022">return</span>&nbsp;<span class="builtintype" id="3101029">string</span><span class="op" id="3101035">(</span><span class="ident" id="3101036"><a href="/fmt/scan.go.html#3100486">s</a></span><span class="op" id="3101037">.</span><span class="ident" id="3101038">buf</span><span class="op" id="3101041">)</span><br>
<span class="lineno"></span><span class="op" id="3101043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3101046">//&nbsp;complexTokens&nbsp;returns&nbsp;the&nbsp;real&nbsp;and&nbsp;imaginary&nbsp;parts&nbsp;of&nbsp;the&nbsp;complex&nbsp;number&nbsp;starting&nbsp;here.</span><br>
<span class="lineno"></span><span class="comment" id="3101137">//&nbsp;The&nbsp;number&nbsp;might&nbsp;be&nbsp;parenthesized&nbsp;and&nbsp;has&nbsp;the&nbsp;format&nbsp;(N+Ni)&nbsp;where&nbsp;N&nbsp;is&nbsp;a&nbsp;floating-point</span><br>
<span class="lineno">750</span><span class="comment" id="3101228">//&nbsp;number&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;spaces&nbsp;within.</span><br>
<span class="lineno"></span><span class="keyword" id="3101270">func</span>&nbsp;<span class="op" id="3101275">(</span><span class="ident" id="3101276">s</span>&nbsp;<span class="op" id="3101278">*</span><span class="ident" id="3101279"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3101281">)</span>&nbsp;<span class="ident" id="3101283">complexTokens</span><span class="op" id="3101296">(</span><span class="op" id="3101297">)</span>&nbsp;<span class="op" id="3101299">(</span><span class="builtinfunc" id="3101300">real</span><span class="op" id="3101304">,</span>&nbsp;<span class="builtinfunc" id="3101306">imag</span>&nbsp;<span class="builtintype" id="3101311">string</span><span class="op" id="3101317">)</span>&nbsp;<span class="op" id="3101319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3101322">//&nbsp;TODO:&nbsp;accept&nbsp;N&nbsp;and&nbsp;Ni&nbsp;independently?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3101363">parens</span>&nbsp;<span class="op" id="3101370">:=</span>&nbsp;<span class="ident" id="3101373"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101374">.</span><span class="ident" id="3101375">accept</span><span class="op" id="3101381">(</span><span class="string" id="3101382">&#34;(&#34;</span><span class="op" id="3101385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3101388"><a href="/fmt/scan.go.html#3101300">real</a></span>&nbsp;<span class="op" id="3101393">=</span>&nbsp;<span class="ident" id="3101395"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101396">.</span><span class="ident" id="3101397">floatToken</span><span class="op" id="3101407">(</span><span class="op" id="3101408">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3101411"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101412">.</span><span class="ident" id="3101413">buf</span>&nbsp;<span class="op" id="3101417">=</span>&nbsp;<span class="ident" id="3101419"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101420">.</span><span class="ident" id="3101421">buf</span><span class="op" id="3101424">[</span><span class="op" id="3101425">:</span><span class="num" id="3101426">0</span><span class="op" id="3101427">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3101430">//&nbsp;Must&nbsp;now&nbsp;have&nbsp;a&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3101456">if</span>&nbsp;<span class="op" id="3101459">!</span><span class="ident" id="3101460"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101461">.</span><span class="ident" id="3101462">accept</span><span class="op" id="3101468">(</span><span class="string" id="3101469">&#34;+-&#34;</span><span class="op" id="3101473">)</span>&nbsp;<span class="op" id="3101475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3101479"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101480">.</span><span class="builtintype" id="3101481">error</span><span class="op" id="3101486">(</span><span class="ident" id="3101487"><a href="/fmt/scan.go.html#3094689">complexError</a></span><span class="op" id="3101499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3101502">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3101505">//&nbsp;Sign&nbsp;is&nbsp;now&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3101531">imagSign</span>&nbsp;<span class="op" id="3101540">:=</span>&nbsp;<span class="builtintype" id="3101543">string</span><span class="op" id="3101549">(</span><span class="ident" id="3101550"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101551">.</span><span class="ident" id="3101552">buf</span><span class="op" id="3101555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3101558"><a href="/fmt/scan.go.html#3101306">imag</a></span>&nbsp;<span class="op" id="3101563">=</span>&nbsp;<span class="ident" id="3101565"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101566">.</span><span class="ident" id="3101567">floatToken</span><span class="op" id="3101577">(</span><span class="op" id="3101578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3101581">if</span>&nbsp;<span class="op" id="3101584">!</span><span class="ident" id="3101585"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101586">.</span><span class="ident" id="3101587">accept</span><span class="op" id="3101593">(</span><span class="string" id="3101594">&#34;i&#34;</span><span class="op" id="3101597">)</span>&nbsp;<span class="op" id="3101599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3101603"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101604">.</span><span class="builtintype" id="3101605">error</span><span class="op" id="3101610">(</span><span class="ident" id="3101611"><a href="/fmt/scan.go.html#3094689">complexError</a></span><span class="op" id="3101623">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3101626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3101629">if</span>&nbsp;<span class="ident" id="3101632"><a href="/fmt/scan.go.html#3101363">parens</a></span>&nbsp;<span class="op" id="3101639">&amp;&amp;</span>&nbsp;<span class="op" id="3101642">!</span><span class="ident" id="3101643"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101644">.</span><span class="ident" id="3101645">accept</span><span class="op" id="3101651">(</span><span class="string" id="3101652">&#34;)&#34;</span><span class="op" id="3101655">)</span>&nbsp;<span class="op" id="3101657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3101661"><a href="/fmt/scan.go.html#3101276">s</a></span><span class="op" id="3101662">.</span><span class="builtintype" id="3101663">error</span><span class="op" id="3101668">(</span><span class="ident" id="3101669"><a href="/fmt/scan.go.html#3094689">complexError</a></span><span class="op" id="3101681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3101684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3101687">return</span>&nbsp;<span class="builtinfunc" id="3101694"><a href="/fmt/scan.go.html#3101300">real</a></span><span class="op" id="3101698">,</span>&nbsp;<span class="ident" id="3101700"><a href="/fmt/scan.go.html#3101531">imagSign</a></span>&nbsp;<span class="op" id="3101709">+</span>&nbsp;<span class="builtinfunc" id="3101711"><a href="/fmt/scan.go.html#3101306">imag</a></span><br>
<span class="lineno">770</span><span class="op" id="3101716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3101719">//&nbsp;convertFloat&nbsp;converts&nbsp;the&nbsp;string&nbsp;to&nbsp;a&nbsp;float64value.</span><br>
<span class="lineno"></span><span class="keyword" id="3101774">func</span>&nbsp;<span class="op" id="3101779">(</span><span class="ident" id="3101780">s</span>&nbsp;<span class="op" id="3101782">*</span><span class="ident" id="3101783"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3101785">)</span>&nbsp;<span class="ident" id="3101787">convertFloat</span><span class="op" id="3101799">(</span><span class="ident" id="3101800">str</span>&nbsp;<span class="builtintype" id="3101804">string</span><span class="op" id="3101810">,</span>&nbsp;<span class="ident" id="3101812">n</span>&nbsp;<span class="builtintype" id="3101814">int</span><span class="op" id="3101817">)</span>&nbsp;<span class="builtintype" id="3101819">float64</span>&nbsp;<span class="op" id="3101827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3101830">if</span>&nbsp;<span class="ident" id="3101833">p</span>&nbsp;<span class="op" id="3101835">:=</span>&nbsp;<span class="ident" id="3101838"><a href="/fmt/scan.go.html#3094821">indexRune</a></span><span class="op" id="3101847">(</span><span class="ident" id="3101848"><a href="/fmt/scan.go.html#3101800">str</a></span><span class="op" id="3101851">,</span>&nbsp;<span class="string" id="3101853">&#39;p&#39;</span><span class="op" id="3101856">)</span><span class="op" id="3101857">;</span>&nbsp;<span class="ident" id="3101859"><a href="/fmt/scan.go.html#3101833">p</a></span>&nbsp;<span class="op" id="3101861">&gt;=</span>&nbsp;<span class="num" id="3101864">0</span>&nbsp;<span class="op" id="3101866">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3101870">//&nbsp;Atof&nbsp;doesn&#39;t&nbsp;handle&nbsp;power-of-2&nbsp;exponents,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3101917">//&nbsp;but&nbsp;they&#39;re&nbsp;easy&nbsp;to&nbsp;evaluate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3101952">f</span><span class="op" id="3101953">,</span>&nbsp;<span class="ident" id="3101955">err</span>&nbsp;<span class="op" id="3101959">:=</span>&nbsp;<span class="ident" id="3101962"><a href="/fmt/scan.go.html#3081814">strconv</a></span><span class="op" id="3101969">.</span><span class="ident" id="3101970">ParseFloat</span><span class="op" id="3101980">(</span><span class="ident" id="3101981"><a href="/fmt/scan.go.html#3101800">str</a></span><span class="op" id="3101984">[</span><span class="op" id="3101985">:</span><span class="ident" id="3101986"><a href="/fmt/scan.go.html#3101833">p</a></span><span class="op" id="3101987">]</span><span class="op" id="3101988">,</span>&nbsp;<span class="ident" id="3101990"><a href="/fmt/scan.go.html#3101812">n</a></span><span class="op" id="3101991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3101995">if</span>&nbsp;<span class="ident" id="3101998"><a href="/fmt/scan.go.html#3101955">err</a></span>&nbsp;<span class="op" id="3102002">!=</span>&nbsp;<span class="ident" id="3102005">nil</span>&nbsp;<span class="op" id="3102009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3102014">//&nbsp;Put&nbsp;full&nbsp;string&nbsp;into&nbsp;error.</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102048">if</span>&nbsp;<span class="ident" id="3102051">e</span><span class="op" id="3102052">,</span>&nbsp;<span class="ident" id="3102054">ok</span>&nbsp;<span class="op" id="3102057">:=</span>&nbsp;<span class="ident" id="3102060"><a href="/fmt/scan.go.html#3101955">err</a></span><span class="op" id="3102063">.</span><span class="op" id="3102064">(</span><span class="op" id="3102065">*</span><span class="ident" id="3102066"><a href="/fmt/scan.go.html#3081814">strconv</a></span><span class="op" id="3102073">.</span><span class="ident" id="3102074">NumError</span><span class="op" id="3102082">)</span><span class="op" id="3102083">;</span>&nbsp;<span class="ident" id="3102085"><a href="/fmt/scan.go.html#3102054">ok</a></span>&nbsp;<span class="op" id="3102088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102094"><a href="/fmt/scan.go.html#3102051">e</a></span><span class="op" id="3102095">.</span><span class="ident" id="3102096">Num</span>&nbsp;<span class="op" id="3102100">=</span>&nbsp;<span class="ident" id="3102102"><a href="/fmt/scan.go.html#3101800">str</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3102109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102114"><a href="/fmt/scan.go.html#3101780">s</a></span><span class="op" id="3102115">.</span><span class="builtintype" id="3102116">error</span><span class="op" id="3102121">(</span><span class="ident" id="3102122"><a href="/fmt/scan.go.html#3101955">err</a></span><span class="op" id="3102125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3102129">}</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102133">m</span><span class="op" id="3102134">,</span>&nbsp;<span class="ident" id="3102136"><a href="/fmt/scan.go.html#3101955">err</a></span>&nbsp;<span class="op" id="3102140">:=</span>&nbsp;<span class="ident" id="3102143"><a href="/fmt/scan.go.html#3081814">strconv</a></span><span class="op" id="3102150">.</span><span class="ident" id="3102151">Atoi</span><span class="op" id="3102155">(</span><span class="ident" id="3102156"><a href="/fmt/scan.go.html#3101800">str</a></span><span class="op" id="3102159">[</span><span class="ident" id="3102160"><a href="/fmt/scan.go.html#3101833">p</a></span><span class="op" id="3102161">+</span><span class="num" id="3102162">1</span><span class="op" id="3102163">:</span><span class="op" id="3102164">]</span><span class="op" id="3102165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102169">if</span>&nbsp;<span class="ident" id="3102172"><a href="/fmt/scan.go.html#3101955">err</a></span>&nbsp;<span class="op" id="3102176">!=</span>&nbsp;<span class="ident" id="3102179">nil</span>&nbsp;<span class="op" id="3102183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3102188">//&nbsp;Put&nbsp;full&nbsp;string&nbsp;into&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102222">if</span>&nbsp;<span class="ident" id="3102225">e</span><span class="op" id="3102226">,</span>&nbsp;<span class="ident" id="3102228">ok</span>&nbsp;<span class="op" id="3102231">:=</span>&nbsp;<span class="ident" id="3102234"><a href="/fmt/scan.go.html#3101955">err</a></span><span class="op" id="3102237">.</span><span class="op" id="3102238">(</span><span class="op" id="3102239">*</span><span class="ident" id="3102240"><a href="/fmt/scan.go.html#3081814">strconv</a></span><span class="op" id="3102247">.</span><span class="ident" id="3102248">NumError</span><span class="op" id="3102256">)</span><span class="op" id="3102257">;</span>&nbsp;<span class="ident" id="3102259"><a href="/fmt/scan.go.html#3102228">ok</a></span>&nbsp;<span class="op" id="3102262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102268"><a href="/fmt/scan.go.html#3102225">e</a></span><span class="op" id="3102269">.</span><span class="ident" id="3102270">Num</span>&nbsp;<span class="op" id="3102274">=</span>&nbsp;<span class="ident" id="3102276"><a href="/fmt/scan.go.html#3101800">str</a></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3102283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102288"><a href="/fmt/scan.go.html#3101780">s</a></span><span class="op" id="3102289">.</span><span class="builtintype" id="3102290">error</span><span class="op" id="3102295">(</span><span class="ident" id="3102296"><a href="/fmt/scan.go.html#3101955">err</a></span><span class="op" id="3102299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3102303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102307">return</span>&nbsp;<span class="ident" id="3102314"><a href="/fmt/scan.go.html#3081789">math</a></span><span class="op" id="3102318">.</span><span class="ident" id="3102319">Ldexp</span><span class="op" id="3102324">(</span><span class="ident" id="3102325"><a href="/fmt/scan.go.html#3101952">f</a></span><span class="op" id="3102326">,</span>&nbsp;<span class="ident" id="3102328"><a href="/fmt/scan.go.html#3102133">m</a></span><span class="op" id="3102329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3102332">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102335">f</span><span class="op" id="3102336">,</span>&nbsp;<span class="ident" id="3102338">err</span>&nbsp;<span class="op" id="3102342">:=</span>&nbsp;<span class="ident" id="3102345"><a href="/fmt/scan.go.html#3081814">strconv</a></span><span class="op" id="3102352">.</span><span class="ident" id="3102353">ParseFloat</span><span class="op" id="3102363">(</span><span class="ident" id="3102364"><a href="/fmt/scan.go.html#3101800">str</a></span><span class="op" id="3102367">,</span>&nbsp;<span class="ident" id="3102369"><a href="/fmt/scan.go.html#3101812">n</a></span><span class="op" id="3102370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102373">if</span>&nbsp;<span class="ident" id="3102376"><a href="/fmt/scan.go.html#3102338">err</a></span>&nbsp;<span class="op" id="3102380">!=</span>&nbsp;<span class="ident" id="3102383">nil</span>&nbsp;<span class="op" id="3102387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102391"><a href="/fmt/scan.go.html#3101780">s</a></span><span class="op" id="3102392">.</span><span class="builtintype" id="3102393">error</span><span class="op" id="3102398">(</span><span class="ident" id="3102399"><a href="/fmt/scan.go.html#3102338">err</a></span><span class="op" id="3102402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3102405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102408">return</span>&nbsp;<span class="ident" id="3102415"><a href="/fmt/scan.go.html#3102335">f</a></span><br>
<span class="lineno">800</span><span class="op" id="3102417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3102420">//&nbsp;convertComplex&nbsp;converts&nbsp;the&nbsp;next&nbsp;token&nbsp;to&nbsp;a&nbsp;complex128&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3102485">//&nbsp;The&nbsp;atof&nbsp;argument&nbsp;is&nbsp;a&nbsp;type-specific&nbsp;reader&nbsp;for&nbsp;the&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="3102557">//&nbsp;If&nbsp;we&#39;re&nbsp;reading&nbsp;complex64,&nbsp;atof&nbsp;will&nbsp;parse&nbsp;float32s&nbsp;and&nbsp;convert&nbsp;them</span><br>
<span class="lineno">805</span><span class="comment" id="3102630">//&nbsp;to&nbsp;float64&#39;s&nbsp;to&nbsp;avoid&nbsp;reproducing&nbsp;this&nbsp;code&nbsp;for&nbsp;each&nbsp;complex&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3102700">func</span>&nbsp;<span class="op" id="3102705">(</span><span class="ident" id="3102706">s</span>&nbsp;<span class="op" id="3102708">*</span><span class="ident" id="3102709"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3102711">)</span>&nbsp;<span class="ident" id="3102713">scanComplex</span><span class="op" id="3102724">(</span><span class="ident" id="3102725">verb</span>&nbsp;<span class="builtintype" id="3102730">rune</span><span class="op" id="3102734">,</span>&nbsp;<span class="ident" id="3102736">n</span>&nbsp;<span class="builtintype" id="3102738">int</span><span class="op" id="3102741">)</span>&nbsp;<span class="builtintype" id="3102743">complex128</span>&nbsp;<span class="op" id="3102754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102757">if</span>&nbsp;<span class="op" id="3102760">!</span><span class="ident" id="3102761"><a href="/fmt/scan.go.html#3102706">s</a></span><span class="op" id="3102762">.</span><span class="ident" id="3102763">okVerb</span><span class="op" id="3102769">(</span><span class="ident" id="3102770"><a href="/fmt/scan.go.html#3102725">verb</a></span><span class="op" id="3102774">,</span>&nbsp;<span class="ident" id="3102776"><a href="/fmt/scan.go.html#3105564">floatVerbs</a></span><span class="op" id="3102786">,</span>&nbsp;<span class="string" id="3102788">&#34;complex&#34;</span><span class="op" id="3102797">)</span>&nbsp;<span class="op" id="3102799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102803">return</span>&nbsp;<span class="num" id="3102810">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3102813">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102816"><a href="/fmt/scan.go.html#3102706">s</a></span><span class="op" id="3102817">.</span><span class="ident" id="3102818">skipSpace</span><span class="op" id="3102827">(</span><span class="builtintype" id="3102828">false</span><span class="op" id="3102833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102836"><a href="/fmt/scan.go.html#3102706">s</a></span><span class="op" id="3102837">.</span><span class="ident" id="3102838">notEOF</span><span class="op" id="3102844">(</span><span class="op" id="3102845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3102848">sreal</span><span class="op" id="3102853">,</span>&nbsp;<span class="ident" id="3102855">simag</span>&nbsp;<span class="op" id="3102861">:=</span>&nbsp;<span class="ident" id="3102864"><a href="/fmt/scan.go.html#3102706">s</a></span><span class="op" id="3102865">.</span><span class="ident" id="3102866">complexTokens</span><span class="op" id="3102879">(</span><span class="op" id="3102880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3102883">real</span>&nbsp;<span class="op" id="3102888">:=</span>&nbsp;<span class="ident" id="3102891"><a href="/fmt/scan.go.html#3102706">s</a></span><span class="op" id="3102892">.</span><span class="ident" id="3102893">convertFloat</span><span class="op" id="3102905">(</span><span class="ident" id="3102906"><a href="/fmt/scan.go.html#3102848">sreal</a></span><span class="op" id="3102911">,</span>&nbsp;<span class="ident" id="3102913"><a href="/fmt/scan.go.html#3102736">n</a></span><span class="op" id="3102914">/</span><span class="num" id="3102915">2</span><span class="op" id="3102916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3102919">imag</span>&nbsp;<span class="op" id="3102924">:=</span>&nbsp;<span class="ident" id="3102927"><a href="/fmt/scan.go.html#3102706">s</a></span><span class="op" id="3102928">.</span><span class="ident" id="3102929">convertFloat</span><span class="op" id="3102941">(</span><span class="ident" id="3102942"><a href="/fmt/scan.go.html#3102855">simag</a></span><span class="op" id="3102947">,</span>&nbsp;<span class="ident" id="3102949"><a href="/fmt/scan.go.html#3102736">n</a></span><span class="op" id="3102950">/</span><span class="num" id="3102951">2</span><span class="op" id="3102952">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3102955">return</span>&nbsp;<span class="builtinfunc" id="3102962">complex</span><span class="op" id="3102969">(</span><span class="builtinfunc" id="3102970"><a href="/fmt/scan.go.html#3102883">real</a></span><span class="op" id="3102974">,</span>&nbsp;<span class="builtinfunc" id="3102976"><a href="/fmt/scan.go.html#3102919">imag</a></span><span class="op" id="3102980">)</span><br>
<span class="lineno"></span><span class="op" id="3102982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3102985">//&nbsp;convertString&nbsp;returns&nbsp;the&nbsp;string&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;input&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="3103063">//&nbsp;The&nbsp;format&nbsp;of&nbsp;the&nbsp;input&nbsp;is&nbsp;determined&nbsp;by&nbsp;the&nbsp;verb.</span><br>
<span class="lineno">820</span><span class="keyword" id="3103117">func</span>&nbsp;<span class="op" id="3103122">(</span><span class="ident" id="3103123">s</span>&nbsp;<span class="op" id="3103125">*</span><span class="ident" id="3103126"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3103128">)</span>&nbsp;<span class="ident" id="3103130">convertString</span><span class="op" id="3103143">(</span><span class="ident" id="3103144">verb</span>&nbsp;<span class="builtintype" id="3103149">rune</span><span class="op" id="3103153">)</span>&nbsp;<span class="op" id="3103155">(</span><span class="ident" id="3103156">str</span>&nbsp;<span class="builtintype" id="3103160">string</span><span class="op" id="3103166">)</span>&nbsp;<span class="op" id="3103168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103171">if</span>&nbsp;<span class="op" id="3103174">!</span><span class="ident" id="3103175"><a href="/fmt/scan.go.html#3103123">s</a></span><span class="op" id="3103176">.</span><span class="ident" id="3103177">okVerb</span><span class="op" id="3103183">(</span><span class="ident" id="3103184"><a href="/fmt/scan.go.html#3103144">verb</a></span><span class="op" id="3103188">,</span>&nbsp;<span class="string" id="3103190">&#34;svqx&#34;</span><span class="op" id="3103196">,</span>&nbsp;<span class="string" id="3103198">&#34;string&#34;</span><span class="op" id="3103206">)</span>&nbsp;<span class="op" id="3103208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103212">return</span>&nbsp;<span class="string" id="3103219">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3103223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103226"><a href="/fmt/scan.go.html#3103123">s</a></span><span class="op" id="3103227">.</span><span class="ident" id="3103228">skipSpace</span><span class="op" id="3103237">(</span><span class="builtintype" id="3103238">false</span><span class="op" id="3103243">)</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103246"><a href="/fmt/scan.go.html#3103123">s</a></span><span class="op" id="3103247">.</span><span class="ident" id="3103248">notEOF</span><span class="op" id="3103254">(</span><span class="op" id="3103255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103258">switch</span>&nbsp;<span class="ident" id="3103265"><a href="/fmt/scan.go.html#3103144">verb</a></span>&nbsp;<span class="op" id="3103270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103273">case</span>&nbsp;<span class="string" id="3103278">&#39;q&#39;</span><span class="op" id="3103281">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103285"><a href="/fmt/scan.go.html#3103156">str</a></span>&nbsp;<span class="op" id="3103289">=</span>&nbsp;<span class="ident" id="3103291"><a href="/fmt/scan.go.html#3103123">s</a></span><span class="op" id="3103292">.</span><span class="ident" id="3103293">quotedString</span><span class="op" id="3103305">(</span><span class="op" id="3103306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103309">case</span>&nbsp;<span class="string" id="3103314">&#39;x&#39;</span><span class="op" id="3103317">:</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103321"><a href="/fmt/scan.go.html#3103156">str</a></span>&nbsp;<span class="op" id="3103325">=</span>&nbsp;<span class="ident" id="3103327"><a href="/fmt/scan.go.html#3103123">s</a></span><span class="op" id="3103328">.</span><span class="ident" id="3103329">hexString</span><span class="op" id="3103338">(</span><span class="op" id="3103339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103342">default</span><span class="op" id="3103349">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103353"><a href="/fmt/scan.go.html#3103156">str</a></span>&nbsp;<span class="op" id="3103357">=</span>&nbsp;<span class="builtintype" id="3103359">string</span><span class="op" id="3103365">(</span><span class="ident" id="3103366"><a href="/fmt/scan.go.html#3103123">s</a></span><span class="op" id="3103367">.</span><span class="ident" id="3103368">token</span><span class="op" id="3103373">(</span><span class="builtintype" id="3103374">true</span><span class="op" id="3103378">,</span>&nbsp;<span class="ident" id="3103380"><a href="/fmt/scan.go.html#3090867">notSpace</a></span><span class="op" id="3103388">)</span><span class="op" id="3103389">)</span>&nbsp;<span class="comment" id="3103391">//&nbsp;%s&nbsp;and&nbsp;%v&nbsp;just&nbsp;return&nbsp;the&nbsp;next&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3103431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103434">return</span><br>
<span class="lineno">835</span><span class="op" id="3103441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3103444">//&nbsp;quotedString&nbsp;returns&nbsp;the&nbsp;double-&nbsp;or&nbsp;back-quoted&nbsp;string&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;input&nbsp;characters.</span><br>
<span class="lineno"></span><span class="keyword" id="3103544">func</span>&nbsp;<span class="op" id="3103549">(</span><span class="ident" id="3103550">s</span>&nbsp;<span class="op" id="3103552">*</span><span class="ident" id="3103553"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3103555">)</span>&nbsp;<span class="ident" id="3103557">quotedString</span><span class="op" id="3103569">(</span><span class="op" id="3103570">)</span>&nbsp;<span class="builtintype" id="3103572">string</span>&nbsp;<span class="op" id="3103579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103582"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3103583">.</span><span class="ident" id="3103584">notEOF</span><span class="op" id="3103590">(</span><span class="op" id="3103591">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103594">quote</span>&nbsp;<span class="op" id="3103600">:=</span>&nbsp;<span class="ident" id="3103603"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3103604">.</span><span class="ident" id="3103605">getRune</span><span class="op" id="3103612">(</span><span class="op" id="3103613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103616">switch</span>&nbsp;<span class="ident" id="3103623"><a href="/fmt/scan.go.html#3103594">quote</a></span>&nbsp;<span class="op" id="3103629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103632">case</span>&nbsp;<span class="string" id="3103637">&#39;`&#39;</span><span class="op" id="3103640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3103644">//&nbsp;Back-quoted:&nbsp;Anything&nbsp;goes&nbsp;until&nbsp;EOF&nbsp;or&nbsp;back&nbsp;quote.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103701">for</span>&nbsp;<span class="op" id="3103705">{</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103710">r</span>&nbsp;<span class="op" id="3103712">:=</span>&nbsp;<span class="ident" id="3103715"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3103716">.</span><span class="ident" id="3103717">mustReadRune</span><span class="op" id="3103729">(</span><span class="op" id="3103730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103735">if</span>&nbsp;<span class="ident" id="3103738"><a href="/fmt/scan.go.html#3103710">r</a></span>&nbsp;<span class="op" id="3103740">==</span>&nbsp;<span class="ident" id="3103743"><a href="/fmt/scan.go.html#3103594">quote</a></span>&nbsp;<span class="op" id="3103749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103755">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3103764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103769"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3103770">.</span><span class="ident" id="3103771">buf</span><span class="op" id="3103774">.</span><span class="ident" id="3103775">WriteRune</span><span class="op" id="3103784">(</span><span class="ident" id="3103785"><a href="/fmt/scan.go.html#3103710">r</a></span><span class="op" id="3103786">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3103790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103794">return</span>&nbsp;<span class="builtintype" id="3103801">string</span><span class="op" id="3103807">(</span><span class="ident" id="3103808"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3103809">.</span><span class="ident" id="3103810">buf</span><span class="op" id="3103813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103816">case</span>&nbsp;<span class="string" id="3103821">&#39;&#34;&#39;</span><span class="op" id="3103824">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3103828">//&nbsp;Double-quoted:&nbsp;Include&nbsp;the&nbsp;quotes&nbsp;and&nbsp;let&nbsp;strconv.Unquote&nbsp;do&nbsp;the&nbsp;backslash&nbsp;escapes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103917"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3103918">.</span><span class="ident" id="3103919">buf</span><span class="op" id="3103922">.</span><span class="ident" id="3103923">WriteRune</span><span class="op" id="3103932">(</span><span class="ident" id="3103933"><a href="/fmt/scan.go.html#3103594">quote</a></span><span class="op" id="3103938">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103942">for</span>&nbsp;<span class="op" id="3103946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103951">r</span>&nbsp;<span class="op" id="3103953">:=</span>&nbsp;<span class="ident" id="3103956"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3103957">.</span><span class="ident" id="3103958">mustReadRune</span><span class="op" id="3103970">(</span><span class="op" id="3103971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3103976"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3103977">.</span><span class="ident" id="3103978">buf</span><span class="op" id="3103981">.</span><span class="ident" id="3103982">WriteRune</span><span class="op" id="3103991">(</span><span class="ident" id="3103992"><a href="/fmt/scan.go.html#3103951">r</a></span><span class="op" id="3103993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3103998">if</span>&nbsp;<span class="ident" id="3104001"><a href="/fmt/scan.go.html#3103951">r</a></span>&nbsp;<span class="op" id="3104003">==</span>&nbsp;<span class="string" id="3104006">&#39;\\&#39;</span>&nbsp;<span class="op" id="3104011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3104017">//&nbsp;In&nbsp;a&nbsp;legal&nbsp;backslash&nbsp;escape,&nbsp;no&nbsp;matter&nbsp;how&nbsp;long,&nbsp;only&nbsp;the&nbsp;character</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3104092">//&nbsp;immediately&nbsp;after&nbsp;the&nbsp;escape&nbsp;can&nbsp;itself&nbsp;be&nbsp;a&nbsp;backslash&nbsp;or&nbsp;quote.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3104164">//&nbsp;Thus&nbsp;we&nbsp;only&nbsp;need&nbsp;to&nbsp;protect&nbsp;the&nbsp;first&nbsp;character&nbsp;after&nbsp;the&nbsp;backslash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3104241"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3104242">.</span><span class="ident" id="3104243">buf</span><span class="op" id="3104246">.</span><span class="ident" id="3104247">WriteRune</span><span class="op" id="3104256">(</span><span class="ident" id="3104257"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3104258">.</span><span class="ident" id="3104259">mustReadRune</span><span class="op" id="3104271">(</span><span class="op" id="3104272">)</span><span class="op" id="3104273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3104278">}</span>&nbsp;<span class="keyword" id="3104280">else</span>&nbsp;<span class="keyword" id="3104285">if</span>&nbsp;<span class="ident" id="3104288"><a href="/fmt/scan.go.html#3103951">r</a></span>&nbsp;<span class="op" id="3104290">==</span>&nbsp;<span class="string" id="3104293">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3104297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104303">break</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3104312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3104316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3104320">result</span><span class="op" id="3104326">,</span>&nbsp;<span class="ident" id="3104328">err</span>&nbsp;<span class="op" id="3104332">:=</span>&nbsp;<span class="ident" id="3104335"><a href="/fmt/scan.go.html#3081814">strconv</a></span><span class="op" id="3104342">.</span><span class="ident" id="3104343">Unquote</span><span class="op" id="3104350">(</span><span class="builtintype" id="3104351">string</span><span class="op" id="3104357">(</span><span class="ident" id="3104358"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3104359">.</span><span class="ident" id="3104360">buf</span><span class="op" id="3104363">)</span><span class="op" id="3104364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104368">if</span>&nbsp;<span class="ident" id="3104371"><a href="/fmt/scan.go.html#3104328">err</a></span>&nbsp;<span class="op" id="3104375">!=</span>&nbsp;<span class="ident" id="3104378">nil</span>&nbsp;<span class="op" id="3104382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3104387"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3104388">.</span><span class="builtintype" id="3104389">error</span><span class="op" id="3104394">(</span><span class="ident" id="3104395"><a href="/fmt/scan.go.html#3104328">err</a></span><span class="op" id="3104398">)</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3104402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104406">return</span>&nbsp;<span class="ident" id="3104413"><a href="/fmt/scan.go.html#3104320">result</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104421">default</span><span class="op" id="3104428">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3104432"><a href="/fmt/scan.go.html#3103550">s</a></span><span class="op" id="3104433">.</span><span class="ident" id="3104434">errorString</span><span class="op" id="3104445">(</span><span class="string" id="3104446">&#34;expected&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="3104470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3104473">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104476">return</span>&nbsp;<span class="string" id="3104483">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3104486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3104489">//&nbsp;hexDigit&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;hexadecimal&nbsp;digit</span><br>
<span class="lineno"></span><span class="keyword" id="3104544">func</span>&nbsp;<span class="op" id="3104549">(</span><span class="ident" id="3104550">s</span>&nbsp;<span class="op" id="3104552">*</span><span class="ident" id="3104553"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3104555">)</span>&nbsp;<span class="ident" id="3104557">hexDigit</span><span class="op" id="3104565">(</span><span class="ident" id="3104566">d</span>&nbsp;<span class="builtintype" id="3104568">rune</span><span class="op" id="3104572">)</span>&nbsp;<span class="builtintype" id="3104574">int</span>&nbsp;<span class="op" id="3104578">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3104581">digit</span>&nbsp;<span class="op" id="3104587">:=</span>&nbsp;<span class="builtintype" id="3104590">int</span><span class="op" id="3104593">(</span><span class="ident" id="3104594"><a href="/fmt/scan.go.html#3104566">d</a></span><span class="op" id="3104595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104598">switch</span>&nbsp;<span class="ident" id="3104605"><a href="/fmt/scan.go.html#3104581">digit</a></span>&nbsp;<span class="op" id="3104611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104614">case</span>&nbsp;<span class="string" id="3104619">&#39;0&#39;</span><span class="op" id="3104622">,</span>&nbsp;<span class="string" id="3104624">&#39;1&#39;</span><span class="op" id="3104627">,</span>&nbsp;<span class="string" id="3104629">&#39;2&#39;</span><span class="op" id="3104632">,</span>&nbsp;<span class="string" id="3104634">&#39;3&#39;</span><span class="op" id="3104637">,</span>&nbsp;<span class="string" id="3104639">&#39;4&#39;</span><span class="op" id="3104642">,</span>&nbsp;<span class="string" id="3104644">&#39;5&#39;</span><span class="op" id="3104647">,</span>&nbsp;<span class="string" id="3104649">&#39;6&#39;</span><span class="op" id="3104652">,</span>&nbsp;<span class="string" id="3104654">&#39;7&#39;</span><span class="op" id="3104657">,</span>&nbsp;<span class="string" id="3104659">&#39;8&#39;</span><span class="op" id="3104662">,</span>&nbsp;<span class="string" id="3104664">&#39;9&#39;</span><span class="op" id="3104667">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104671">return</span>&nbsp;<span class="ident" id="3104678"><a href="/fmt/scan.go.html#3104581">digit</a></span>&nbsp;<span class="op" id="3104684">-</span>&nbsp;<span class="string" id="3104686">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104691">case</span>&nbsp;<span class="string" id="3104696">&#39;a&#39;</span><span class="op" id="3104699">,</span>&nbsp;<span class="string" id="3104701">&#39;b&#39;</span><span class="op" id="3104704">,</span>&nbsp;<span class="string" id="3104706">&#39;c&#39;</span><span class="op" id="3104709">,</span>&nbsp;<span class="string" id="3104711">&#39;d&#39;</span><span class="op" id="3104714">,</span>&nbsp;<span class="string" id="3104716">&#39;e&#39;</span><span class="op" id="3104719">,</span>&nbsp;<span class="string" id="3104721">&#39;f&#39;</span><span class="op" id="3104724">:</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104728">return</span>&nbsp;<span class="num" id="3104735">10</span>&nbsp;<span class="op" id="3104738">+</span>&nbsp;<span class="ident" id="3104740"><a href="/fmt/scan.go.html#3104581">digit</a></span>&nbsp;<span class="op" id="3104746">-</span>&nbsp;<span class="string" id="3104748">&#39;a&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104753">case</span>&nbsp;<span class="string" id="3104758">&#39;A&#39;</span><span class="op" id="3104761">,</span>&nbsp;<span class="string" id="3104763">&#39;B&#39;</span><span class="op" id="3104766">,</span>&nbsp;<span class="string" id="3104768">&#39;C&#39;</span><span class="op" id="3104771">,</span>&nbsp;<span class="string" id="3104773">&#39;D&#39;</span><span class="op" id="3104776">,</span>&nbsp;<span class="string" id="3104778">&#39;E&#39;</span><span class="op" id="3104781">,</span>&nbsp;<span class="string" id="3104783">&#39;F&#39;</span><span class="op" id="3104786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104790">return</span>&nbsp;<span class="num" id="3104797">10</span>&nbsp;<span class="op" id="3104800">+</span>&nbsp;<span class="ident" id="3104802"><a href="/fmt/scan.go.html#3104581">digit</a></span>&nbsp;<span class="op" id="3104808">-</span>&nbsp;<span class="string" id="3104810">&#39;A&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3104815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3104818"><a href="/fmt/scan.go.html#3104550">s</a></span><span class="op" id="3104819">.</span><span class="ident" id="3104820">errorString</span><span class="op" id="3104831">(</span><span class="string" id="3104832">&#34;illegal&nbsp;hex&nbsp;digit&#34;</span><span class="op" id="3104851">)</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3104854">return</span>&nbsp;<span class="num" id="3104861">0</span><br>
<span class="lineno"></span><span class="op" id="3104863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3104866">//&nbsp;hexByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;hex-encoded&nbsp;(two-character)&nbsp;byte&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="3104943">//&nbsp;There&nbsp;must&nbsp;be&nbsp;either&nbsp;two&nbsp;hexadecimal&nbsp;digits&nbsp;or&nbsp;a&nbsp;space&nbsp;character&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">895</span><span class="keyword" id="3105025">func</span>&nbsp;<span class="op" id="3105030">(</span><span class="ident" id="3105031">s</span>&nbsp;<span class="op" id="3105033">*</span><span class="ident" id="3105034"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3105036">)</span>&nbsp;<span class="ident" id="3105038">hexByte</span><span class="op" id="3105045">(</span><span class="op" id="3105046">)</span>&nbsp;<span class="op" id="3105048">(</span><span class="ident" id="3105049">b</span>&nbsp;<span class="builtintype" id="3105051">byte</span><span class="op" id="3105055">,</span>&nbsp;<span class="ident" id="3105057">ok</span>&nbsp;<span class="builtintype" id="3105060">bool</span><span class="op" id="3105064">)</span>&nbsp;<span class="op" id="3105066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105069">rune1</span>&nbsp;<span class="op" id="3105075">:=</span>&nbsp;<span class="ident" id="3105078"><a href="/fmt/scan.go.html#3105031">s</a></span><span class="op" id="3105079">.</span><span class="ident" id="3105080">getRune</span><span class="op" id="3105087">(</span><span class="op" id="3105088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105091">if</span>&nbsp;<span class="ident" id="3105094"><a href="/fmt/scan.go.html#3105069">rune1</a></span>&nbsp;<span class="op" id="3105100">==</span>&nbsp;<span class="ident" id="3105103"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3105107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105111">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3105119">}</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105122">if</span>&nbsp;<span class="ident" id="3105125"><a href="/fmt/scan.go.html#3090600">isSpace</a></span><span class="op" id="3105132">(</span><span class="ident" id="3105133"><a href="/fmt/scan.go.html#3105069">rune1</a></span><span class="op" id="3105138">)</span>&nbsp;<span class="op" id="3105140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105144"><a href="/fmt/scan.go.html#3105031">s</a></span><span class="op" id="3105145">.</span><span class="ident" id="3105146">UnreadRune</span><span class="op" id="3105156">(</span><span class="op" id="3105157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105161">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3105169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105172">rune2</span>&nbsp;<span class="op" id="3105178">:=</span>&nbsp;<span class="ident" id="3105181"><a href="/fmt/scan.go.html#3105031">s</a></span><span class="op" id="3105182">.</span><span class="ident" id="3105183">mustReadRune</span><span class="op" id="3105195">(</span><span class="op" id="3105196">)</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105199">return</span>&nbsp;<span class="builtintype" id="3105206">byte</span><span class="op" id="3105210">(</span><span class="ident" id="3105211"><a href="/fmt/scan.go.html#3105031">s</a></span><span class="op" id="3105212">.</span><span class="ident" id="3105213">hexDigit</span><span class="op" id="3105221">(</span><span class="ident" id="3105222"><a href="/fmt/scan.go.html#3105069">rune1</a></span><span class="op" id="3105227">)</span><span class="op" id="3105228">&lt;&lt;</span><span class="num" id="3105230">4</span>&nbsp;<span class="op" id="3105232">|</span>&nbsp;<span class="ident" id="3105234"><a href="/fmt/scan.go.html#3105031">s</a></span><span class="op" id="3105235">.</span><span class="ident" id="3105236">hexDigit</span><span class="op" id="3105244">(</span><span class="ident" id="3105245"><a href="/fmt/scan.go.html#3105172">rune2</a></span><span class="op" id="3105250">)</span><span class="op" id="3105251">)</span><span class="op" id="3105252">,</span>&nbsp;<span class="builtintype" id="3105254">true</span><br>
<span class="lineno"></span><span class="op" id="3105259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3105262">//&nbsp;hexString&nbsp;returns&nbsp;the&nbsp;space-delimited&nbsp;hexpair-encoded&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3105327">func</span>&nbsp;<span class="op" id="3105332">(</span><span class="ident" id="3105333">s</span>&nbsp;<span class="op" id="3105335">*</span><span class="ident" id="3105336"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3105338">)</span>&nbsp;<span class="ident" id="3105340">hexString</span><span class="op" id="3105349">(</span><span class="op" id="3105350">)</span>&nbsp;<span class="builtintype" id="3105352">string</span>&nbsp;<span class="op" id="3105359">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105362"><a href="/fmt/scan.go.html#3105333">s</a></span><span class="op" id="3105363">.</span><span class="ident" id="3105364">notEOF</span><span class="op" id="3105370">(</span><span class="op" id="3105371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105374">for</span>&nbsp;<span class="op" id="3105378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105382">b</span><span class="op" id="3105383">,</span>&nbsp;<span class="ident" id="3105385">ok</span>&nbsp;<span class="op" id="3105388">:=</span>&nbsp;<span class="ident" id="3105391"><a href="/fmt/scan.go.html#3105333">s</a></span><span class="op" id="3105392">.</span><span class="ident" id="3105393">hexByte</span><span class="op" id="3105400">(</span><span class="op" id="3105401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105405">if</span>&nbsp;<span class="op" id="3105408">!</span><span class="ident" id="3105409"><a href="/fmt/scan.go.html#3105385">ok</a></span>&nbsp;<span class="op" id="3105412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105417">break</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3105425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105429"><a href="/fmt/scan.go.html#3105333">s</a></span><span class="op" id="3105430">.</span><span class="ident" id="3105431">buf</span><span class="op" id="3105434">.</span><span class="ident" id="3105435">WriteByte</span><span class="op" id="3105444">(</span><span class="ident" id="3105445"><a href="/fmt/scan.go.html#3105382">b</a></span><span class="op" id="3105446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3105449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105452">if</span>&nbsp;<span class="builtinfunc" id="3105455">len</span><span class="op" id="3105458">(</span><span class="ident" id="3105459"><a href="/fmt/scan.go.html#3105333">s</a></span><span class="op" id="3105460">.</span><span class="ident" id="3105461">buf</span><span class="op" id="3105464">)</span>&nbsp;<span class="op" id="3105466">==</span>&nbsp;<span class="num" id="3105469">0</span>&nbsp;<span class="op" id="3105471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105475"><a href="/fmt/scan.go.html#3105333">s</a></span><span class="op" id="3105476">.</span><span class="ident" id="3105477">errorString</span><span class="op" id="3105488">(</span><span class="string" id="3105489">&#34;no&nbsp;hex&nbsp;data&nbsp;for&nbsp;%x&nbsp;string&#34;</span><span class="op" id="3105516">)</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105520">return</span>&nbsp;<span class="string" id="3105527">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3105531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105534">return</span>&nbsp;<span class="builtintype" id="3105541">string</span><span class="op" id="3105547">(</span><span class="ident" id="3105548"><a href="/fmt/scan.go.html#3105333">s</a></span><span class="op" id="3105549">.</span><span class="ident" id="3105550">buf</span><span class="op" id="3105553">)</span><br>
<span class="lineno"></span><span class="op" id="3105555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="keyword" id="3105558">const</span>&nbsp;<span class="ident" id="3105564">floatVerbs</span>&nbsp;<span class="op" id="3105575">=</span>&nbsp;<span class="string" id="3105577">&#34;beEfFgGv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3105589">const</span>&nbsp;<span class="ident" id="3105595">hugeWid</span>&nbsp;<span class="op" id="3105603">=</span>&nbsp;<span class="num" id="3105605">1</span>&nbsp;<span class="op" id="3105607">&lt;&lt;</span>&nbsp;<span class="num" id="3105610">30</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3105614">//&nbsp;scanOne&nbsp;scans&nbsp;a&nbsp;single&nbsp;value,&nbsp;deriving&nbsp;the&nbsp;scanner&nbsp;from&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;argument.</span><br>
<span class="lineno">930</span><span class="keyword" id="3105699">func</span>&nbsp;<span class="op" id="3105704">(</span><span class="ident" id="3105705">s</span>&nbsp;<span class="op" id="3105707">*</span><span class="ident" id="3105708"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3105710">)</span>&nbsp;<span class="ident" id="3105712">scanOne</span><span class="op" id="3105719">(</span><span class="ident" id="3105720">verb</span>&nbsp;<span class="builtintype" id="3105725">rune</span><span class="op" id="3105729">,</span>&nbsp;<span class="ident" id="3105731">arg</span>&nbsp;<span class="keyword" id="3105735">interface</span><span class="op" id="3105744">{</span><span class="op" id="3105745">}</span><span class="op" id="3105746">)</span>&nbsp;<span class="op" id="3105748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105751"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3105752">.</span><span class="ident" id="3105753">buf</span>&nbsp;<span class="op" id="3105757">=</span>&nbsp;<span class="ident" id="3105759"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3105760">.</span><span class="ident" id="3105761">buf</span><span class="op" id="3105764">[</span><span class="op" id="3105765">:</span><span class="num" id="3105766">0</span><span class="op" id="3105767">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105770">var</span>&nbsp;<span class="ident" id="3105774">err</span>&nbsp;<span class="builtintype" id="3105778">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3105785">//&nbsp;If&nbsp;the&nbsp;parameter&nbsp;has&nbsp;its&nbsp;own&nbsp;Scan&nbsp;method,&nbsp;use&nbsp;that.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105841">if</span>&nbsp;<span class="ident" id="3105844">v</span><span class="op" id="3105845">,</span>&nbsp;<span class="ident" id="3105847">ok</span>&nbsp;<span class="op" id="3105850">:=</span>&nbsp;<span class="ident" id="3105853"><a href="/fmt/scan.go.html#3105731">arg</a></span><span class="op" id="3105856">.</span><span class="op" id="3105857">(</span><span class="ident" id="3105858"><a href="/fmt/scan.go.html#3084225">Scanner</a></span><span class="op" id="3105865">)</span><span class="op" id="3105866">;</span>&nbsp;<span class="ident" id="3105868"><a href="/fmt/scan.go.html#3105847">ok</a></span>&nbsp;<span class="op" id="3105871">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105875"><a href="/fmt/scan.go.html#3105774">err</a></span>&nbsp;<span class="op" id="3105879">=</span>&nbsp;<span class="ident" id="3105881"><a href="/fmt/scan.go.html#3105844">v</a></span><span class="op" id="3105882">.</span><span class="ident" id="3105883">Scan</span><span class="op" id="3105887">(</span><span class="ident" id="3105888"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3105889">,</span>&nbsp;<span class="ident" id="3105891"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3105895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105899">if</span>&nbsp;<span class="ident" id="3105902"><a href="/fmt/scan.go.html#3105774">err</a></span>&nbsp;<span class="op" id="3105906">!=</span>&nbsp;<span class="ident" id="3105909">nil</span>&nbsp;<span class="op" id="3105913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105918">if</span>&nbsp;<span class="ident" id="3105921"><a href="/fmt/scan.go.html#3105774">err</a></span>&nbsp;<span class="op" id="3105925">==</span>&nbsp;<span class="ident" id="3105928"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3105930">.</span><span class="ident" id="3105931">EOF</span>&nbsp;<span class="op" id="3105935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105941"><a href="/fmt/scan.go.html#3105774">err</a></span>&nbsp;<span class="op" id="3105945">=</span>&nbsp;<span class="ident" id="3105947"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3105949">.</span><span class="ident" id="3105950">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3105970">}</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3105975"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3105976">.</span><span class="builtintype" id="3105977">error</span><span class="op" id="3105982">(</span><span class="ident" id="3105983"><a href="/fmt/scan.go.html#3105774">err</a></span><span class="op" id="3105986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3105990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3105994">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106006">switch</span>&nbsp;<span class="ident" id="3106013">v</span>&nbsp;<span class="op" id="3106015">:=</span>&nbsp;<span class="ident" id="3106018"><a href="/fmt/scan.go.html#3105731">arg</a></span><span class="op" id="3106021">.</span><span class="op" id="3106022">(</span><span class="keyword" id="3106023">type</span><span class="op" id="3106027">)</span>&nbsp;<span class="op" id="3106029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106032">case</span>&nbsp;<span class="op" id="3106037">*</span><span class="builtintype" id="3106038">bool</span><span class="op" id="3106042">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106046">*</span><span class="ident" id="3106047"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106049">=</span>&nbsp;<span class="ident" id="3106051"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106052">.</span><span class="ident" id="3106053">scanBool</span><span class="op" id="3106061">(</span><span class="ident" id="3106062"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106069">case</span>&nbsp;<span class="op" id="3106074">*</span><span class="builtintype" id="3106075">complex64</span><span class="op" id="3106084">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106088">*</span><span class="ident" id="3106089"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106091">=</span>&nbsp;<span class="builtintype" id="3106093">complex64</span><span class="op" id="3106102">(</span><span class="ident" id="3106103"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106104">.</span><span class="ident" id="3106105">scanComplex</span><span class="op" id="3106116">(</span><span class="ident" id="3106117"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106121">,</span>&nbsp;<span class="num" id="3106123">64</span><span class="op" id="3106125">)</span><span class="op" id="3106126">)</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106129">case</span>&nbsp;<span class="op" id="3106134">*</span><span class="builtintype" id="3106135">complex128</span><span class="op" id="3106145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106149">*</span><span class="ident" id="3106150"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106152">=</span>&nbsp;<span class="ident" id="3106154"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106155">.</span><span class="ident" id="3106156">scanComplex</span><span class="op" id="3106167">(</span><span class="ident" id="3106168"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106172">,</span>&nbsp;<span class="num" id="3106174">128</span><span class="op" id="3106177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106180">case</span>&nbsp;<span class="op" id="3106185">*</span><span class="builtintype" id="3106186">int</span><span class="op" id="3106189">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106193">*</span><span class="ident" id="3106194"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106196">=</span>&nbsp;<span class="builtintype" id="3106198">int</span><span class="op" id="3106201">(</span><span class="ident" id="3106202"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106203">.</span><span class="ident" id="3106204">scanInt</span><span class="op" id="3106211">(</span><span class="ident" id="3106212"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106216">,</span>&nbsp;<span class="ident" id="3106218"><a href="/fmt/print.go.html#3065979">intBits</a></span><span class="op" id="3106225">)</span><span class="op" id="3106226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106229">case</span>&nbsp;<span class="op" id="3106234">*</span><span class="builtintype" id="3106235">int8</span><span class="op" id="3106239">:</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106243">*</span><span class="ident" id="3106244"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106246">=</span>&nbsp;<span class="builtintype" id="3106248">int8</span><span class="op" id="3106252">(</span><span class="ident" id="3106253"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106254">.</span><span class="ident" id="3106255">scanInt</span><span class="op" id="3106262">(</span><span class="ident" id="3106263"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106267">,</span>&nbsp;<span class="num" id="3106269">8</span><span class="op" id="3106270">)</span><span class="op" id="3106271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106274">case</span>&nbsp;<span class="op" id="3106279">*</span><span class="builtintype" id="3106280">int16</span><span class="op" id="3106285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106289">*</span><span class="ident" id="3106290"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106292">=</span>&nbsp;<span class="builtintype" id="3106294">int16</span><span class="op" id="3106299">(</span><span class="ident" id="3106300"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106301">.</span><span class="ident" id="3106302">scanInt</span><span class="op" id="3106309">(</span><span class="ident" id="3106310"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106314">,</span>&nbsp;<span class="num" id="3106316">16</span><span class="op" id="3106318">)</span><span class="op" id="3106319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106322">case</span>&nbsp;<span class="op" id="3106327">*</span><span class="builtintype" id="3106328">int32</span><span class="op" id="3106333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106337">*</span><span class="ident" id="3106338"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106340">=</span>&nbsp;<span class="builtintype" id="3106342">int32</span><span class="op" id="3106347">(</span><span class="ident" id="3106348"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106349">.</span><span class="ident" id="3106350">scanInt</span><span class="op" id="3106357">(</span><span class="ident" id="3106358"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106362">,</span>&nbsp;<span class="num" id="3106364">32</span><span class="op" id="3106366">)</span><span class="op" id="3106367">)</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106370">case</span>&nbsp;<span class="op" id="3106375">*</span><span class="ident" id="3106376">int64</span><span class="op" id="3106381">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106385">*</span><span class="ident" id="3106386"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106388">=</span>&nbsp;<span class="ident" id="3106390"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106391">.</span><span class="ident" id="3106392">scanInt</span><span class="op" id="3106399">(</span><span class="ident" id="3106400"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106404">,</span>&nbsp;<span class="num" id="3106406">64</span><span class="op" id="3106408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106411">case</span>&nbsp;<span class="op" id="3106416">*</span><span class="builtintype" id="3106417">uint</span><span class="op" id="3106421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106425">*</span><span class="ident" id="3106426"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106428">=</span>&nbsp;<span class="builtintype" id="3106430">uint</span><span class="op" id="3106434">(</span><span class="ident" id="3106435"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106436">.</span><span class="ident" id="3106437">scanUint</span><span class="op" id="3106445">(</span><span class="ident" id="3106446"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106450">,</span>&nbsp;<span class="ident" id="3106452"><a href="/fmt/print.go.html#3065979">intBits</a></span><span class="op" id="3106459">)</span><span class="op" id="3106460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106463">case</span>&nbsp;<span class="op" id="3106468">*</span><span class="builtintype" id="3106469">uint8</span><span class="op" id="3106474">:</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106478">*</span><span class="ident" id="3106479"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106481">=</span>&nbsp;<span class="builtintype" id="3106483">uint8</span><span class="op" id="3106488">(</span><span class="ident" id="3106489"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106490">.</span><span class="ident" id="3106491">scanUint</span><span class="op" id="3106499">(</span><span class="ident" id="3106500"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106504">,</span>&nbsp;<span class="num" id="3106506">8</span><span class="op" id="3106507">)</span><span class="op" id="3106508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106511">case</span>&nbsp;<span class="op" id="3106516">*</span><span class="builtintype" id="3106517">uint16</span><span class="op" id="3106523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106527">*</span><span class="ident" id="3106528"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106530">=</span>&nbsp;<span class="builtintype" id="3106532">uint16</span><span class="op" id="3106538">(</span><span class="ident" id="3106539"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106540">.</span><span class="ident" id="3106541">scanUint</span><span class="op" id="3106549">(</span><span class="ident" id="3106550"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106554">,</span>&nbsp;<span class="num" id="3106556">16</span><span class="op" id="3106558">)</span><span class="op" id="3106559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106562">case</span>&nbsp;<span class="op" id="3106567">*</span><span class="builtintype" id="3106568">uint32</span><span class="op" id="3106574">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106578">*</span><span class="ident" id="3106579"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106581">=</span>&nbsp;<span class="builtintype" id="3106583">uint32</span><span class="op" id="3106589">(</span><span class="ident" id="3106590"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106591">.</span><span class="ident" id="3106592">scanUint</span><span class="op" id="3106600">(</span><span class="ident" id="3106601"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106605">,</span>&nbsp;<span class="num" id="3106607">32</span><span class="op" id="3106609">)</span><span class="op" id="3106610">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106613">case</span>&nbsp;<span class="op" id="3106618">*</span><span class="ident" id="3106619">uint64</span><span class="op" id="3106625">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106629">*</span><span class="ident" id="3106630"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106632">=</span>&nbsp;<span class="ident" id="3106634"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106635">.</span><span class="ident" id="3106636">scanUint</span><span class="op" id="3106644">(</span><span class="ident" id="3106645"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106649">,</span>&nbsp;<span class="num" id="3106651">64</span><span class="op" id="3106653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106656">case</span>&nbsp;<span class="op" id="3106661">*</span><span class="builtintype" id="3106662">uintptr</span><span class="op" id="3106669">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106673">*</span><span class="ident" id="3106674"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106676">=</span>&nbsp;<span class="builtintype" id="3106678">uintptr</span><span class="op" id="3106685">(</span><span class="ident" id="3106686"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106687">.</span><span class="ident" id="3106688">scanUint</span><span class="op" id="3106696">(</span><span class="ident" id="3106697"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106701">,</span>&nbsp;<span class="ident" id="3106703"><a href="/fmt/print.go.html#3066019">uintptrBits</a></span><span class="op" id="3106714">)</span><span class="op" id="3106715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3106718">//&nbsp;Floats&nbsp;are&nbsp;tricky&nbsp;because&nbsp;you&nbsp;want&nbsp;to&nbsp;scan&nbsp;in&nbsp;the&nbsp;precision&nbsp;of&nbsp;the&nbsp;result,&nbsp;not</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3106801">//&nbsp;scan&nbsp;in&nbsp;high&nbsp;precision&nbsp;and&nbsp;convert,&nbsp;in&nbsp;order&nbsp;to&nbsp;preserve&nbsp;the&nbsp;correct&nbsp;error&nbsp;condition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106891">case</span>&nbsp;<span class="op" id="3106896">*</span><span class="builtintype" id="3106897">float32</span><span class="op" id="3106904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3106908">if</span>&nbsp;<span class="ident" id="3106911"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106912">.</span><span class="ident" id="3106913">okVerb</span><span class="op" id="3106919">(</span><span class="ident" id="3106920"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3106924">,</span>&nbsp;<span class="ident" id="3106926"><a href="/fmt/scan.go.html#3105564">floatVerbs</a></span><span class="op" id="3106936">,</span>&nbsp;<span class="string" id="3106938">&#34;float32&#34;</span><span class="op" id="3106947">)</span>&nbsp;<span class="op" id="3106949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3106954"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106955">.</span><span class="ident" id="3106956">skipSpace</span><span class="op" id="3106965">(</span><span class="builtintype" id="3106966">false</span><span class="op" id="3106971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3106976"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3106977">.</span><span class="ident" id="3106978">notEOF</span><span class="op" id="3106984">(</span><span class="op" id="3106985">)</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3106990">*</span><span class="ident" id="3106991"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3106993">=</span>&nbsp;<span class="builtintype" id="3106995">float32</span><span class="op" id="3107002">(</span><span class="ident" id="3107003"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107004">.</span><span class="ident" id="3107005">convertFloat</span><span class="op" id="3107017">(</span><span class="ident" id="3107018"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107019">.</span><span class="ident" id="3107020">floatToken</span><span class="op" id="3107030">(</span><span class="op" id="3107031">)</span><span class="op" id="3107032">,</span>&nbsp;<span class="num" id="3107034">32</span><span class="op" id="3107036">)</span><span class="op" id="3107037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3107041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107044">case</span>&nbsp;<span class="op" id="3107049">*</span><span class="builtintype" id="3107050">float64</span><span class="op" id="3107057">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107061">if</span>&nbsp;<span class="ident" id="3107064"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107065">.</span><span class="ident" id="3107066">okVerb</span><span class="op" id="3107072">(</span><span class="ident" id="3107073"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3107077">,</span>&nbsp;<span class="ident" id="3107079"><a href="/fmt/scan.go.html#3105564">floatVerbs</a></span><span class="op" id="3107089">,</span>&nbsp;<span class="string" id="3107091">&#34;float64&#34;</span><span class="op" id="3107100">)</span>&nbsp;<span class="op" id="3107102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107107"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107108">.</span><span class="ident" id="3107109">skipSpace</span><span class="op" id="3107118">(</span><span class="builtintype" id="3107119">false</span><span class="op" id="3107124">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107129"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107130">.</span><span class="ident" id="3107131">notEOF</span><span class="op" id="3107137">(</span><span class="op" id="3107138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3107143">*</span><span class="ident" id="3107144"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3107146">=</span>&nbsp;<span class="ident" id="3107148"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107149">.</span><span class="ident" id="3107150">convertFloat</span><span class="op" id="3107162">(</span><span class="ident" id="3107163"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107164">.</span><span class="ident" id="3107165">floatToken</span><span class="op" id="3107175">(</span><span class="op" id="3107176">)</span><span class="op" id="3107177">,</span>&nbsp;<span class="num" id="3107179">64</span><span class="op" id="3107181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3107185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107188">case</span>&nbsp;<span class="op" id="3107193">*</span><span class="builtintype" id="3107194">string</span><span class="op" id="3107200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3107204">*</span><span class="ident" id="3107205"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3107207">=</span>&nbsp;<span class="ident" id="3107209"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107210">.</span><span class="ident" id="3107211">convertString</span><span class="op" id="3107224">(</span><span class="ident" id="3107225"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3107229">)</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107232">case</span>&nbsp;<span class="op" id="3107237">*</span><span class="op" id="3107238">[</span><span class="op" id="3107239">]</span><span class="builtintype" id="3107240">byte</span><span class="op" id="3107244">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3107248">//&nbsp;We&nbsp;scan&nbsp;to&nbsp;string&nbsp;and&nbsp;convert&nbsp;so&nbsp;we&nbsp;get&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3107313">//&nbsp;If&nbsp;we&nbsp;scanned&nbsp;to&nbsp;bytes,&nbsp;the&nbsp;slice&nbsp;would&nbsp;point&nbsp;at&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3107379">*</span><span class="ident" id="3107380"><a href="/fmt/scan.go.html#3106013">v</a></span>&nbsp;<span class="op" id="3107382">=</span>&nbsp;<span class="op" id="3107384">[</span><span class="op" id="3107385">]</span><span class="builtintype" id="3107386">byte</span><span class="op" id="3107390">(</span><span class="ident" id="3107391"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107392">.</span><span class="ident" id="3107393">convertString</span><span class="op" id="3107406">(</span><span class="ident" id="3107407"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3107411">)</span><span class="op" id="3107412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107415">default</span><span class="op" id="3107422">:</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107426">val</span>&nbsp;<span class="op" id="3107430">:=</span>&nbsp;<span class="ident" id="3107433"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107440">.</span><span class="ident" id="3107441">ValueOf</span><span class="op" id="3107448">(</span><span class="ident" id="3107449"><a href="/fmt/scan.go.html#3106013">v</a></span><span class="op" id="3107450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107454">ptr</span>&nbsp;<span class="op" id="3107458">:=</span>&nbsp;<span class="ident" id="3107461"><a href="/fmt/scan.go.html#3107426">val</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107467">if</span>&nbsp;<span class="ident" id="3107470"><a href="/fmt/scan.go.html#3107454">ptr</a></span><span class="op" id="3107473">.</span><span class="ident" id="3107474">Kind</span><span class="op" id="3107478">(</span><span class="op" id="3107479">)</span>&nbsp;<span class="op" id="3107481">!=</span>&nbsp;<span class="ident" id="3107484"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107491">.</span><span class="ident" id="3107492">Ptr</span>&nbsp;<span class="op" id="3107496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107501"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107502">.</span><span class="ident" id="3107503">errorString</span><span class="op" id="3107514">(</span><span class="string" id="3107515">&#34;type&nbsp;not&nbsp;a&nbsp;pointer:&nbsp;&#34;</span>&nbsp;<span class="op" id="3107538">+</span>&nbsp;<span class="ident" id="3107540"><a href="/fmt/scan.go.html#3107426">val</a></span><span class="op" id="3107543">.</span><span class="ident" id="3107544">Type</span><span class="op" id="3107548">(</span><span class="op" id="3107549">)</span><span class="op" id="3107550">.</span><span class="ident" id="3107551">String</span><span class="op" id="3107557">(</span><span class="op" id="3107558">)</span><span class="op" id="3107559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107564">return</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3107573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107577">switch</span>&nbsp;<span class="ident" id="3107584">v</span>&nbsp;<span class="op" id="3107586">:=</span>&nbsp;<span class="ident" id="3107589"><a href="/fmt/scan.go.html#3107454">ptr</a></span><span class="op" id="3107592">.</span><span class="ident" id="3107593">Elem</span><span class="op" id="3107597">(</span><span class="op" id="3107598">)</span><span class="op" id="3107599">;</span>&nbsp;<span class="ident" id="3107601"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3107602">.</span><span class="ident" id="3107603">Kind</span><span class="op" id="3107607">(</span><span class="op" id="3107608">)</span>&nbsp;<span class="op" id="3107610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107614">case</span>&nbsp;<span class="ident" id="3107619"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107626">.</span><span class="ident" id="3107627">Bool</span><span class="op" id="3107631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107636"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3107637">.</span><span class="ident" id="3107638">SetBool</span><span class="op" id="3107645">(</span><span class="ident" id="3107646"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107647">.</span><span class="ident" id="3107648">scanBool</span><span class="op" id="3107656">(</span><span class="ident" id="3107657"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3107661">)</span><span class="op" id="3107662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107666">case</span>&nbsp;<span class="ident" id="3107671"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107678">.</span><span class="ident" id="3107679">Int</span><span class="op" id="3107682">,</span>&nbsp;<span class="ident" id="3107684"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107691">.</span><span class="ident" id="3107692">Int8</span><span class="op" id="3107696">,</span>&nbsp;<span class="ident" id="3107698"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107705">.</span><span class="ident" id="3107706">Int16</span><span class="op" id="3107711">,</span>&nbsp;<span class="ident" id="3107713"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107720">.</span><span class="ident" id="3107721">Int32</span><span class="op" id="3107726">,</span>&nbsp;<span class="ident" id="3107728"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107735">.</span><span class="ident" id="3107736">Int64</span><span class="op" id="3107741">:</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107746"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3107747">.</span><span class="ident" id="3107748">SetInt</span><span class="op" id="3107754">(</span><span class="ident" id="3107755"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107756">.</span><span class="ident" id="3107757">scanInt</span><span class="op" id="3107764">(</span><span class="ident" id="3107765"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3107769">,</span>&nbsp;<span class="ident" id="3107771"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3107772">.</span><span class="ident" id="3107773">Type</span><span class="op" id="3107777">(</span><span class="op" id="3107778">)</span><span class="op" id="3107779">.</span><span class="ident" id="3107780">Bits</span><span class="op" id="3107784">(</span><span class="op" id="3107785">)</span><span class="op" id="3107786">)</span><span class="op" id="3107787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107791">case</span>&nbsp;<span class="ident" id="3107796"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107803">.</span><span class="ident" id="3107804">Uint</span><span class="op" id="3107808">,</span>&nbsp;<span class="ident" id="3107810"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107817">.</span><span class="ident" id="3107818">Uint8</span><span class="op" id="3107823">,</span>&nbsp;<span class="ident" id="3107825"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107832">.</span><span class="ident" id="3107833">Uint16</span><span class="op" id="3107839">,</span>&nbsp;<span class="ident" id="3107841"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107848">.</span><span class="ident" id="3107849">Uint32</span><span class="op" id="3107855">,</span>&nbsp;<span class="ident" id="3107857"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107864">.</span><span class="ident" id="3107865">Uint64</span><span class="op" id="3107871">,</span>&nbsp;<span class="ident" id="3107873"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107880">.</span><span class="ident" id="3107881">Uintptr</span><span class="op" id="3107888">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107893"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3107894">.</span><span class="ident" id="3107895">SetUint</span><span class="op" id="3107902">(</span><span class="ident" id="3107903"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107904">.</span><span class="ident" id="3107905">scanUint</span><span class="op" id="3107913">(</span><span class="ident" id="3107914"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3107918">,</span>&nbsp;<span class="ident" id="3107920"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3107921">.</span><span class="ident" id="3107922">Type</span><span class="op" id="3107926">(</span><span class="op" id="3107927">)</span><span class="op" id="3107928">.</span><span class="ident" id="3107929">Bits</span><span class="op" id="3107933">(</span><span class="op" id="3107934">)</span><span class="op" id="3107935">)</span><span class="op" id="3107936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3107940">case</span>&nbsp;<span class="ident" id="3107945"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3107952">.</span><span class="ident" id="3107953">String</span><span class="op" id="3107959">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3107964"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3107965">.</span><span class="ident" id="3107966">SetString</span><span class="op" id="3107975">(</span><span class="ident" id="3107976"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3107977">.</span><span class="ident" id="3107978">convertString</span><span class="op" id="3107991">(</span><span class="ident" id="3107992"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3107996">)</span><span class="op" id="3107997">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3108001">case</span>&nbsp;<span class="ident" id="3108006"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3108013">.</span><span class="ident" id="3108014">Slice</span><span class="op" id="3108019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3108024">//&nbsp;For&nbsp;now,&nbsp;can&nbsp;only&nbsp;handle&nbsp;(renamed)&nbsp;[]byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108073">typ</span>&nbsp;<span class="op" id="3108077">:=</span>&nbsp;<span class="ident" id="3108080"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3108081">.</span><span class="ident" id="3108082">Type</span><span class="op" id="3108086">(</span><span class="op" id="3108087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3108092">if</span>&nbsp;<span class="ident" id="3108095"><a href="/fmt/scan.go.html#3108073">typ</a></span><span class="op" id="3108098">.</span><span class="ident" id="3108099">Elem</span><span class="op" id="3108103">(</span><span class="op" id="3108104">)</span><span class="op" id="3108105">.</span><span class="ident" id="3108106">Kind</span><span class="op" id="3108110">(</span><span class="op" id="3108111">)</span>&nbsp;<span class="op" id="3108113">!=</span>&nbsp;<span class="ident" id="3108116"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3108123">.</span><span class="ident" id="3108124">Uint8</span>&nbsp;<span class="op" id="3108130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108136"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3108137">.</span><span class="ident" id="3108138">errorString</span><span class="op" id="3108149">(</span><span class="string" id="3108150">&#34;can&#39;t&nbsp;scan&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="3108170">+</span>&nbsp;<span class="ident" id="3108172"><a href="/fmt/scan.go.html#3107426">val</a></span><span class="op" id="3108175">.</span><span class="ident" id="3108176">Type</span><span class="op" id="3108180">(</span><span class="op" id="3108181">)</span><span class="op" id="3108182">.</span><span class="ident" id="3108183">String</span><span class="op" id="3108189">(</span><span class="op" id="3108190">)</span><span class="op" id="3108191">)</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108201">str</span>&nbsp;<span class="op" id="3108205">:=</span>&nbsp;<span class="ident" id="3108208"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3108209">.</span><span class="ident" id="3108210">convertString</span><span class="op" id="3108223">(</span><span class="ident" id="3108224"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3108228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108233"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3108234">.</span><span class="ident" id="3108235">Set</span><span class="op" id="3108238">(</span><span class="ident" id="3108239"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3108246">.</span><span class="ident" id="3108247">MakeSlice</span><span class="op" id="3108256">(</span><span class="ident" id="3108257"><a href="/fmt/scan.go.html#3108073">typ</a></span><span class="op" id="3108260">,</span>&nbsp;<span class="builtinfunc" id="3108262">len</span><span class="op" id="3108265">(</span><span class="ident" id="3108266"><a href="/fmt/scan.go.html#3108201">str</a></span><span class="op" id="3108269">)</span><span class="op" id="3108270">,</span>&nbsp;<span class="builtinfunc" id="3108272">len</span><span class="op" id="3108275">(</span><span class="ident" id="3108276"><a href="/fmt/scan.go.html#3108201">str</a></span><span class="op" id="3108279">)</span><span class="op" id="3108280">)</span><span class="op" id="3108281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3108286">for</span>&nbsp;<span class="ident" id="3108290">i</span>&nbsp;<span class="op" id="3108292">:=</span>&nbsp;<span class="num" id="3108295">0</span><span class="op" id="3108296">;</span>&nbsp;<span class="ident" id="3108298"><a href="/fmt/scan.go.html#3108290">i</a></span>&nbsp;<span class="op" id="3108300">&lt;</span>&nbsp;<span class="builtinfunc" id="3108302">len</span><span class="op" id="3108305">(</span><span class="ident" id="3108306"><a href="/fmt/scan.go.html#3108201">str</a></span><span class="op" id="3108309">)</span><span class="op" id="3108310">;</span>&nbsp;<span class="ident" id="3108312"><a href="/fmt/scan.go.html#3108290">i</a></span><span class="op" id="3108313">++</span>&nbsp;<span class="op" id="3108316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108322"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3108323">.</span><span class="ident" id="3108324">Index</span><span class="op" id="3108329">(</span><span class="ident" id="3108330"><a href="/fmt/scan.go.html#3108290">i</a></span><span class="op" id="3108331">)</span><span class="op" id="3108332">.</span><span class="ident" id="3108333">SetUint</span><span class="op" id="3108340">(</span><span class="ident" id="3108341">uint64</span><span class="op" id="3108347">(</span><span class="ident" id="3108348"><a href="/fmt/scan.go.html#3108201">str</a></span><span class="op" id="3108351">[</span><span class="ident" id="3108352"><a href="/fmt/scan.go.html#3108290">i</a></span><span class="op" id="3108353">]</span><span class="op" id="3108354">)</span><span class="op" id="3108355">)</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3108364">case</span>&nbsp;<span class="ident" id="3108369"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3108376">.</span><span class="ident" id="3108377">Float32</span><span class="op" id="3108384">,</span>&nbsp;<span class="ident" id="3108386"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3108393">.</span><span class="ident" id="3108394">Float64</span><span class="op" id="3108401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108406"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3108407">.</span><span class="ident" id="3108408">skipSpace</span><span class="op" id="3108417">(</span><span class="builtintype" id="3108418">false</span><span class="op" id="3108423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108428"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3108429">.</span><span class="ident" id="3108430">notEOF</span><span class="op" id="3108436">(</span><span class="op" id="3108437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108442"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3108443">.</span><span class="ident" id="3108444">SetFloat</span><span class="op" id="3108452">(</span><span class="ident" id="3108453"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3108454">.</span><span class="ident" id="3108455">convertFloat</span><span class="op" id="3108467">(</span><span class="ident" id="3108468"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3108469">.</span><span class="ident" id="3108470">floatToken</span><span class="op" id="3108480">(</span><span class="op" id="3108481">)</span><span class="op" id="3108482">,</span>&nbsp;<span class="ident" id="3108484"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3108485">.</span><span class="ident" id="3108486">Type</span><span class="op" id="3108490">(</span><span class="op" id="3108491">)</span><span class="op" id="3108492">.</span><span class="ident" id="3108493">Bits</span><span class="op" id="3108497">(</span><span class="op" id="3108498">)</span><span class="op" id="3108499">)</span><span class="op" id="3108500">)</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3108504">case</span>&nbsp;<span class="ident" id="3108509"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3108516">.</span><span class="ident" id="3108517">Complex64</span><span class="op" id="3108526">,</span>&nbsp;<span class="ident" id="3108528"><a href="/fmt/scan.go.html#3081803">reflect</a></span><span class="op" id="3108535">.</span><span class="ident" id="3108536">Complex128</span><span class="op" id="3108546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108551"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3108552">.</span><span class="ident" id="3108553">SetComplex</span><span class="op" id="3108563">(</span><span class="ident" id="3108564"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3108565">.</span><span class="ident" id="3108566">scanComplex</span><span class="op" id="3108577">(</span><span class="ident" id="3108578"><a href="/fmt/scan.go.html#3105720">verb</a></span><span class="op" id="3108582">,</span>&nbsp;<span class="ident" id="3108584"><a href="/fmt/scan.go.html#3107584">v</a></span><span class="op" id="3108585">.</span><span class="ident" id="3108586">Type</span><span class="op" id="3108590">(</span><span class="op" id="3108591">)</span><span class="op" id="3108592">.</span><span class="ident" id="3108593">Bits</span><span class="op" id="3108597">(</span><span class="op" id="3108598">)</span><span class="op" id="3108599">)</span><span class="op" id="3108600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3108604">default</span><span class="op" id="3108611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3108616"><a href="/fmt/scan.go.html#3105705">s</a></span><span class="op" id="3108617">.</span><span class="ident" id="3108618">errorString</span><span class="op" id="3108629">(</span><span class="string" id="3108630">&#34;can&#39;t&nbsp;scan&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="3108650">+</span>&nbsp;<span class="ident" id="3108652"><a href="/fmt/scan.go.html#3107426">val</a></span><span class="op" id="3108655">.</span><span class="ident" id="3108656">Type</span><span class="op" id="3108660">(</span><span class="op" id="3108661">)</span><span class="op" id="3108662">.</span><span class="ident" id="3108663">String</span><span class="op" id="3108669">(</span><span class="op" id="3108670">)</span><span class="op" id="3108671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108675">}</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108678">}</span><br>
<span class="lineno"></span><span class="op" id="3108680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3108683">//&nbsp;errorHandler&nbsp;turns&nbsp;local&nbsp;panics&nbsp;into&nbsp;error&nbsp;returns.</span><br>
<span class="lineno"></span><span class="keyword" id="3108738">func</span>&nbsp;<span class="ident" id="3108743">errorHandler</span><span class="op" id="3108755">(</span><span class="ident" id="3108756">errp</span>&nbsp;<span class="op" id="3108761">*</span><span class="builtintype" id="3108762">error</span><span class="op" id="3108767">)</span>&nbsp;<span class="op" id="3108769">{</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3108772">if</span>&nbsp;<span class="ident" id="3108775">e</span>&nbsp;<span class="op" id="3108777">:=</span>&nbsp;<span class="builtinfunc" id="3108780">recover</span><span class="op" id="3108787">(</span><span class="op" id="3108788">)</span><span class="op" id="3108789">;</span>&nbsp;<span class="ident" id="3108791"><a href="/fmt/scan.go.html#3108775">e</a></span>&nbsp;<span class="op" id="3108793">!=</span>&nbsp;<span class="ident" id="3108796">nil</span>&nbsp;<span class="op" id="3108800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3108804">if</span>&nbsp;<span class="ident" id="3108807">se</span><span class="op" id="3108809">,</span>&nbsp;<span class="ident" id="3108811">ok</span>&nbsp;<span class="op" id="3108814">:=</span>&nbsp;<span class="ident" id="3108817"><a href="/fmt/scan.go.html#3108775">e</a></span><span class="op" id="3108818">.</span><span class="op" id="3108819">(</span><span class="ident" id="3108820"><a href="/fmt/scan.go.html#3087447">scanError</a></span><span class="op" id="3108829">)</span><span class="op" id="3108830">;</span>&nbsp;<span class="ident" id="3108832"><a href="/fmt/scan.go.html#3108811">ok</a></span>&nbsp;<span class="op" id="3108835">{</span>&nbsp;<span class="comment" id="3108837">//&nbsp;catch&nbsp;local&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108861">*</span><span class="ident" id="3108862"><a href="/fmt/scan.go.html#3108756">errp</a></span>&nbsp;<span class="op" id="3108867">=</span>&nbsp;<span class="ident" id="3108869"><a href="/fmt/scan.go.html#3108807">se</a></span><span class="op" id="3108871">.</span><span class="ident" id="3108872">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108878">}</span>&nbsp;<span class="keyword" id="3108880">else</span>&nbsp;<span class="keyword" id="3108885">if</span>&nbsp;<span class="ident" id="3108888">eof</span><span class="op" id="3108891">,</span>&nbsp;<span class="ident" id="3108893">ok</span>&nbsp;<span class="op" id="3108896">:=</span>&nbsp;<span class="ident" id="3108899"><a href="/fmt/scan.go.html#3108775">e</a></span><span class="op" id="3108900">.</span><span class="op" id="3108901">(</span><span class="builtintype" id="3108902">error</span><span class="op" id="3108907">)</span><span class="op" id="3108908">;</span>&nbsp;<span class="ident" id="3108910"><a href="/fmt/scan.go.html#3108893">ok</a></span>&nbsp;<span class="op" id="3108913">&amp;&amp;</span>&nbsp;<span class="ident" id="3108916"><a href="/fmt/scan.go.html#3108888">eof</a></span>&nbsp;<span class="op" id="3108920">==</span>&nbsp;<span class="ident" id="3108923"><a href="/fmt/scan.go.html#3081783">io</a></span><span class="op" id="3108925">.</span><span class="ident" id="3108926">EOF</span>&nbsp;<span class="op" id="3108930">{</span>&nbsp;<span class="comment" id="3108932">//&nbsp;out&nbsp;of&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108951">*</span><span class="ident" id="3108952"><a href="/fmt/scan.go.html#3108756">errp</a></span>&nbsp;<span class="op" id="3108957">=</span>&nbsp;<span class="ident" id="3108959"><a href="/fmt/scan.go.html#3108888">eof</a></span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108965">}</span>&nbsp;<span class="keyword" id="3108967">else</span>&nbsp;<span class="op" id="3108972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3108977">panic</span><span class="op" id="3108982">(</span><span class="ident" id="3108983"><a href="/fmt/scan.go.html#3108775">e</a></span><span class="op" id="3108984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3108991">}</span><br>
<span class="lineno"></span><span class="op" id="3108993">}</span><br>
<span class="lineno">1045</span><br>
<span class="lineno"></span><span class="comment" id="3108996">//&nbsp;doScan&nbsp;does&nbsp;the&nbsp;real&nbsp;work&nbsp;for&nbsp;scanning&nbsp;without&nbsp;a&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3109063">func</span>&nbsp;<span class="op" id="3109068">(</span><span class="ident" id="3109069">s</span>&nbsp;<span class="op" id="3109071">*</span><span class="ident" id="3109072"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3109074">)</span>&nbsp;<span class="ident" id="3109076">doScan</span><span class="op" id="3109082">(</span><span class="ident" id="3109083">a</span>&nbsp;<span class="op" id="3109085">[</span><span class="op" id="3109086">]</span><span class="keyword" id="3109087">interface</span><span class="op" id="3109096">{</span><span class="op" id="3109097">}</span><span class="op" id="3109098">)</span>&nbsp;<span class="op" id="3109100">(</span><span class="ident" id="3109101">numProcessed</span>&nbsp;<span class="builtintype" id="3109114">int</span><span class="op" id="3109117">,</span>&nbsp;<span class="ident" id="3109119">err</span>&nbsp;<span class="builtintype" id="3109123">error</span><span class="op" id="3109128">)</span>&nbsp;<span class="op" id="3109130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109133">defer</span>&nbsp;<span class="ident" id="3109139"><a href="/fmt/scan.go.html#3108743">errorHandler</a></span><span class="op" id="3109151">(</span><span class="op" id="3109152">&amp;</span><span class="ident" id="3109153"><a href="/fmt/scan.go.html#3109119">err</a></span><span class="op" id="3109156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109159">for</span>&nbsp;<span class="ident" id="3109163">_</span><span class="op" id="3109164">,</span>&nbsp;<span class="ident" id="3109166">arg</span>&nbsp;<span class="op" id="3109170">:=</span>&nbsp;<span class="keyword" id="3109173">range</span>&nbsp;<span class="ident" id="3109179"><a href="/fmt/scan.go.html#3109083">a</a></span>&nbsp;<span class="op" id="3109181">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3109185"><a href="/fmt/scan.go.html#3109069">s</a></span><span class="op" id="3109186">.</span><span class="ident" id="3109187">scanOne</span><span class="op" id="3109194">(</span><span class="string" id="3109195">&#39;v&#39;</span><span class="op" id="3109198">,</span>&nbsp;<span class="ident" id="3109200"><a href="/fmt/scan.go.html#3109166">arg</a></span><span class="op" id="3109203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3109207"><a href="/fmt/scan.go.html#3109101">numProcessed</a></span><span class="op" id="3109219">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3109223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3109226">//&nbsp;Check&nbsp;for&nbsp;newline&nbsp;if&nbsp;required.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109261">if</span>&nbsp;<span class="op" id="3109264">!</span><span class="ident" id="3109265"><a href="/fmt/scan.go.html#3109069">s</a></span><span class="op" id="3109266">.</span><span class="ident" id="3109267">nlIsSpace</span>&nbsp;<span class="op" id="3109277">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109281">for</span>&nbsp;<span class="op" id="3109285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3109290">r</span>&nbsp;<span class="op" id="3109292">:=</span>&nbsp;<span class="ident" id="3109295"><a href="/fmt/scan.go.html#3109069">s</a></span><span class="op" id="3109296">.</span><span class="ident" id="3109297">getRune</span><span class="op" id="3109304">(</span><span class="op" id="3109305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109310">if</span>&nbsp;<span class="ident" id="3109313"><a href="/fmt/scan.go.html#3109290">r</a></span>&nbsp;<span class="op" id="3109315">==</span>&nbsp;<span class="string" id="3109318">&#39;\n&#39;</span>&nbsp;<span class="op" id="3109323">||</span>&nbsp;<span class="ident" id="3109326"><a href="/fmt/scan.go.html#3109290">r</a></span>&nbsp;<span class="op" id="3109328">==</span>&nbsp;<span class="ident" id="3109331"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3109335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109341">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3109350">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109355">if</span>&nbsp;<span class="op" id="3109358">!</span><span class="ident" id="3109359"><a href="/fmt/scan.go.html#3090600">isSpace</a></span><span class="op" id="3109366">(</span><span class="ident" id="3109367"><a href="/fmt/scan.go.html#3109290">r</a></span><span class="op" id="3109368">)</span>&nbsp;<span class="op" id="3109370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3109376"><a href="/fmt/scan.go.html#3109069">s</a></span><span class="op" id="3109377">.</span><span class="ident" id="3109378">errorString</span><span class="op" id="3109389">(</span><span class="string" id="3109390">&#34;expected&nbsp;newline&#34;</span><span class="op" id="3109408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109414">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3109423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3109427">}</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3109430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109433">return</span><br>
<span class="lineno"></span><span class="op" id="3109440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3109443">//&nbsp;advance&nbsp;determines&nbsp;whether&nbsp;the&nbsp;next&nbsp;characters&nbsp;in&nbsp;the&nbsp;input&nbsp;match</span><br>
<span class="lineno">1070</span><span class="comment" id="3109512">//&nbsp;those&nbsp;of&nbsp;the&nbsp;format.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;(sic)&nbsp;consumed</span><br>
<span class="lineno"></span><span class="comment" id="3109583">//&nbsp;in&nbsp;the&nbsp;format.&nbsp;Newlines&nbsp;included,&nbsp;all&nbsp;runs&nbsp;of&nbsp;space&nbsp;characters&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3109652">//&nbsp;either&nbsp;input&nbsp;or&nbsp;format&nbsp;behave&nbsp;as&nbsp;a&nbsp;single&nbsp;space.&nbsp;This&nbsp;routine&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="3109722">//&nbsp;handles&nbsp;the&nbsp;%%&nbsp;case.&nbsp;&nbsp;If&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;zero,&nbsp;either&nbsp;format</span><br>
<span class="lineno"></span><span class="comment" id="3109790">//&nbsp;starts&nbsp;with&nbsp;a&nbsp;%&nbsp;(with&nbsp;no&nbsp;following&nbsp;%)&nbsp;or&nbsp;the&nbsp;input&nbsp;is&nbsp;empty.</span><br>
<span class="lineno">1075</span><span class="comment" id="3109854">//&nbsp;If&nbsp;it&nbsp;is&nbsp;negative,&nbsp;the&nbsp;input&nbsp;did&nbsp;not&nbsp;match&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3109912">func</span>&nbsp;<span class="op" id="3109917">(</span><span class="ident" id="3109918">s</span>&nbsp;<span class="op" id="3109920">*</span><span class="ident" id="3109921"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3109923">)</span>&nbsp;<span class="ident" id="3109925">advance</span><span class="op" id="3109932">(</span><span class="ident" id="3109933">format</span>&nbsp;<span class="builtintype" id="3109940">string</span><span class="op" id="3109946">)</span>&nbsp;<span class="op" id="3109948">(</span><span class="ident" id="3109949">i</span>&nbsp;<span class="builtintype" id="3109951">int</span><span class="op" id="3109954">)</span>&nbsp;<span class="op" id="3109956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3109959">for</span>&nbsp;<span class="ident" id="3109963"><a href="/fmt/scan.go.html#3109949">i</a></span>&nbsp;<span class="op" id="3109965">&lt;</span>&nbsp;<span class="builtinfunc" id="3109967">len</span><span class="op" id="3109970">(</span><span class="ident" id="3109971"><a href="/fmt/scan.go.html#3109933">format</a></span><span class="op" id="3109977">)</span>&nbsp;<span class="op" id="3109979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3109983">fmtc</span><span class="op" id="3109987">,</span>&nbsp;<span class="ident" id="3109989">w</span>&nbsp;<span class="op" id="3109991">:=</span>&nbsp;<span class="ident" id="3109994"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3109998">.</span><span class="ident" id="3109999">DecodeRuneInString</span><span class="op" id="3110017">(</span><span class="ident" id="3110018"><a href="/fmt/scan.go.html#3109933">format</a></span><span class="op" id="3110024">[</span><span class="ident" id="3110025"><a href="/fmt/scan.go.html#3109949">i</a></span><span class="op" id="3110026">:</span><span class="op" id="3110027">]</span><span class="op" id="3110028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110032">if</span>&nbsp;<span class="ident" id="3110035"><a href="/fmt/scan.go.html#3109983">fmtc</a></span>&nbsp;<span class="op" id="3110040">==</span>&nbsp;<span class="string" id="3110043">&#39;%&#39;</span>&nbsp;<span class="op" id="3110047">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3110052">//&nbsp;%%&nbsp;acts&nbsp;like&nbsp;a&nbsp;real&nbsp;percent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110086">nextc</span><span class="op" id="3110091">,</span>&nbsp;<span class="ident" id="3110093">_</span>&nbsp;<span class="op" id="3110095">:=</span>&nbsp;<span class="ident" id="3110098"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3110102">.</span><span class="ident" id="3110103">DecodeRuneInString</span><span class="op" id="3110121">(</span><span class="ident" id="3110122"><a href="/fmt/scan.go.html#3109933">format</a></span><span class="op" id="3110128">[</span><span class="ident" id="3110129"><a href="/fmt/scan.go.html#3109949">i</a></span><span class="op" id="3110130">+</span><span class="ident" id="3110131"><a href="/fmt/scan.go.html#3109989">w</a></span><span class="op" id="3110132">:</span><span class="op" id="3110133">]</span><span class="op" id="3110134">)</span>&nbsp;<span class="comment" id="3110136">//&nbsp;will&nbsp;not&nbsp;match&nbsp;%&nbsp;if&nbsp;string&nbsp;is&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110178">if</span>&nbsp;<span class="ident" id="3110181"><a href="/fmt/scan.go.html#3110086">nextc</a></span>&nbsp;<span class="op" id="3110187">!=</span>&nbsp;<span class="string" id="3110190">&#39;%&#39;</span>&nbsp;<span class="op" id="3110194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110200">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3110210">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110215"><a href="/fmt/scan.go.html#3109949">i</a></span>&nbsp;<span class="op" id="3110217">+=</span>&nbsp;<span class="ident" id="3110220"><a href="/fmt/scan.go.html#3109989">w</a></span>&nbsp;<span class="comment" id="3110222">//&nbsp;skip&nbsp;the&nbsp;first&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3110244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110248">sawSpace</span>&nbsp;<span class="op" id="3110257">:=</span>&nbsp;<span class="builtintype" id="3110260">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110268">for</span>&nbsp;<span class="ident" id="3110272"><a href="/fmt/scan.go.html#3090600">isSpace</a></span><span class="op" id="3110279">(</span><span class="ident" id="3110280"><a href="/fmt/scan.go.html#3109983">fmtc</a></span><span class="op" id="3110284">)</span>&nbsp;<span class="op" id="3110286">&amp;&amp;</span>&nbsp;<span class="ident" id="3110289"><a href="/fmt/scan.go.html#3109949">i</a></span>&nbsp;<span class="op" id="3110291">&lt;</span>&nbsp;<span class="builtinfunc" id="3110293">len</span><span class="op" id="3110296">(</span><span class="ident" id="3110297"><a href="/fmt/scan.go.html#3109933">format</a></span><span class="op" id="3110303">)</span>&nbsp;<span class="op" id="3110305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110310"><a href="/fmt/scan.go.html#3110248">sawSpace</a></span>&nbsp;<span class="op" id="3110319">=</span>&nbsp;<span class="builtintype" id="3110321">true</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110329"><a href="/fmt/scan.go.html#3109949">i</a></span>&nbsp;<span class="op" id="3110331">+=</span>&nbsp;<span class="ident" id="3110334"><a href="/fmt/scan.go.html#3109989">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110339"><a href="/fmt/scan.go.html#3109983">fmtc</a></span><span class="op" id="3110343">,</span>&nbsp;<span class="ident" id="3110345"><a href="/fmt/scan.go.html#3109989">w</a></span>&nbsp;<span class="op" id="3110347">=</span>&nbsp;<span class="ident" id="3110349"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3110353">.</span><span class="ident" id="3110354">DecodeRuneInString</span><span class="op" id="3110372">(</span><span class="ident" id="3110373"><a href="/fmt/scan.go.html#3109933">format</a></span><span class="op" id="3110379">[</span><span class="ident" id="3110380"><a href="/fmt/scan.go.html#3109949">i</a></span><span class="op" id="3110381">:</span><span class="op" id="3110382">]</span><span class="op" id="3110383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3110387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110391">if</span>&nbsp;<span class="ident" id="3110394"><a href="/fmt/scan.go.html#3110248">sawSpace</a></span>&nbsp;<span class="op" id="3110403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3110408">//&nbsp;There&nbsp;was&nbsp;space&nbsp;in&nbsp;the&nbsp;format,&nbsp;so&nbsp;there&nbsp;should&nbsp;be&nbsp;space&nbsp;(EOF)</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3110476">//&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110496">inputc</span>&nbsp;<span class="op" id="3110503">:=</span>&nbsp;<span class="ident" id="3110506"><a href="/fmt/scan.go.html#3109918">s</a></span><span class="op" id="3110507">.</span><span class="ident" id="3110508">getRune</span><span class="op" id="3110515">(</span><span class="op" id="3110516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110521">if</span>&nbsp;<span class="ident" id="3110524"><a href="/fmt/scan.go.html#3110496">inputc</a></span>&nbsp;<span class="op" id="3110531">==</span>&nbsp;<span class="ident" id="3110534"><a href="/fmt/scan.go.html#3087486">eof</a></span>&nbsp;<span class="op" id="3110538">||</span>&nbsp;<span class="ident" id="3110541"><a href="/fmt/scan.go.html#3110496">inputc</a></span>&nbsp;<span class="op" id="3110548">==</span>&nbsp;<span class="string" id="3110551">&#39;\n&#39;</span>&nbsp;<span class="op" id="3110556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3110562">//&nbsp;If&nbsp;we&#39;ve&nbsp;reached&nbsp;a&nbsp;newline,&nbsp;stop&nbsp;now;&nbsp;don&#39;t&nbsp;read&nbsp;ahead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110625">return</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3110635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110640">if</span>&nbsp;<span class="op" id="3110643">!</span><span class="ident" id="3110644"><a href="/fmt/scan.go.html#3090600">isSpace</a></span><span class="op" id="3110651">(</span><span class="ident" id="3110652"><a href="/fmt/scan.go.html#3110496">inputc</a></span><span class="op" id="3110658">)</span>&nbsp;<span class="op" id="3110660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3110666">//&nbsp;Space&nbsp;in&nbsp;format&nbsp;but&nbsp;not&nbsp;in&nbsp;input:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110713"><a href="/fmt/scan.go.html#3109918">s</a></span><span class="op" id="3110714">.</span><span class="ident" id="3110715">errorString</span><span class="op" id="3110726">(</span><span class="string" id="3110727">&#34;expected&nbsp;space&nbsp;in&nbsp;input&nbsp;to&nbsp;match&nbsp;format&#34;</span><span class="op" id="3110768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3110773">}</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110778"><a href="/fmt/scan.go.html#3109918">s</a></span><span class="op" id="3110779">.</span><span class="ident" id="3110780">skipSpace</span><span class="op" id="3110789">(</span><span class="builtintype" id="3110790">true</span><span class="op" id="3110794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110799">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3110810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110814">inputc</span>&nbsp;<span class="op" id="3110821">:=</span>&nbsp;<span class="ident" id="3110824"><a href="/fmt/scan.go.html#3109918">s</a></span><span class="op" id="3110825">.</span><span class="ident" id="3110826">mustReadRune</span><span class="op" id="3110838">(</span><span class="op" id="3110839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110843">if</span>&nbsp;<span class="ident" id="3110846"><a href="/fmt/scan.go.html#3109983">fmtc</a></span>&nbsp;<span class="op" id="3110851">!=</span>&nbsp;<span class="ident" id="3110854"><a href="/fmt/scan.go.html#3110814">inputc</a></span>&nbsp;<span class="op" id="3110861">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110866"><a href="/fmt/scan.go.html#3109918">s</a></span><span class="op" id="3110867">.</span><span class="ident" id="3110868">UnreadRune</span><span class="op" id="3110878">(</span><span class="op" id="3110879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110884">return</span>&nbsp;<span class="op" id="3110891">-</span><span class="num" id="3110892">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3110896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3110900"><a href="/fmt/scan.go.html#3109949">i</a></span>&nbsp;<span class="op" id="3110902">+=</span>&nbsp;<span class="ident" id="3110905"><a href="/fmt/scan.go.html#3109989">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3110908">}</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3110911">return</span><br>
<span class="lineno"></span><span class="op" id="3110918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3110921">//&nbsp;doScanf&nbsp;does&nbsp;the&nbsp;real&nbsp;work&nbsp;when&nbsp;scanning&nbsp;with&nbsp;a&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3110987">//&nbsp;&nbsp;At&nbsp;the&nbsp;moment,&nbsp;it&nbsp;handles&nbsp;only&nbsp;pointers&nbsp;to&nbsp;basic&nbsp;types.</span><br>
<span class="lineno">1120</span><span class="keyword" id="3111047">func</span>&nbsp;<span class="op" id="3111052">(</span><span class="ident" id="3111053">s</span>&nbsp;<span class="op" id="3111055">*</span><span class="ident" id="3111056"><a href="/fmt/scan.go.html#3087552">ss</a></span><span class="op" id="3111058">)</span>&nbsp;<span class="ident" id="3111060">doScanf</span><span class="op" id="3111067">(</span><span class="ident" id="3111068">format</span>&nbsp;<span class="builtintype" id="3111075">string</span><span class="op" id="3111081">,</span>&nbsp;<span class="ident" id="3111083">a</span>&nbsp;<span class="op" id="3111085">[</span><span class="op" id="3111086">]</span><span class="keyword" id="3111087">interface</span><span class="op" id="3111096">{</span><span class="op" id="3111097">}</span><span class="op" id="3111098">)</span>&nbsp;<span class="op" id="3111100">(</span><span class="ident" id="3111101">numProcessed</span>&nbsp;<span class="builtintype" id="3111114">int</span><span class="op" id="3111117">,</span>&nbsp;<span class="ident" id="3111119">err</span>&nbsp;<span class="builtintype" id="3111123">error</span><span class="op" id="3111128">)</span>&nbsp;<span class="op" id="3111130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111133">defer</span>&nbsp;<span class="ident" id="3111139"><a href="/fmt/scan.go.html#3108743">errorHandler</a></span><span class="op" id="3111151">(</span><span class="op" id="3111152">&amp;</span><span class="ident" id="3111153"><a href="/fmt/scan.go.html#3111119">err</a></span><span class="op" id="3111156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111159">end</span>&nbsp;<span class="op" id="3111163">:=</span>&nbsp;<span class="builtinfunc" id="3111166">len</span><span class="op" id="3111169">(</span><span class="ident" id="3111170"><a href="/fmt/scan.go.html#3111068">format</a></span><span class="op" id="3111176">)</span>&nbsp;<span class="op" id="3111178">-</span>&nbsp;<span class="num" id="3111180">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3111183">//&nbsp;We&nbsp;process&nbsp;one&nbsp;item&nbsp;per&nbsp;non-trivial&nbsp;format</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111230">for</span>&nbsp;<span class="ident" id="3111234">i</span>&nbsp;<span class="op" id="3111236">:=</span>&nbsp;<span class="num" id="3111239">0</span><span class="op" id="3111240">;</span>&nbsp;<span class="ident" id="3111242"><a href="/fmt/scan.go.html#3111234">i</a></span>&nbsp;<span class="op" id="3111244">&lt;=</span>&nbsp;<span class="ident" id="3111247"><a href="/fmt/scan.go.html#3111159">end</a></span><span class="op" id="3111250">;</span>&nbsp;<span class="op" id="3111252">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111256">w</span>&nbsp;<span class="op" id="3111258">:=</span>&nbsp;<span class="ident" id="3111261"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111262">.</span><span class="ident" id="3111263">advance</span><span class="op" id="3111270">(</span><span class="ident" id="3111271"><a href="/fmt/scan.go.html#3111068">format</a></span><span class="op" id="3111277">[</span><span class="ident" id="3111278"><a href="/fmt/scan.go.html#3111234">i</a></span><span class="op" id="3111279">:</span><span class="op" id="3111280">]</span><span class="op" id="3111281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111285">if</span>&nbsp;<span class="ident" id="3111288"><a href="/fmt/scan.go.html#3111256">w</a></span>&nbsp;<span class="op" id="3111290">&gt;</span>&nbsp;<span class="num" id="3111292">0</span>&nbsp;<span class="op" id="3111294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111299"><a href="/fmt/scan.go.html#3111234">i</a></span>&nbsp;<span class="op" id="3111301">+=</span>&nbsp;<span class="ident" id="3111304"><a href="/fmt/scan.go.html#3111256">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111309">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3111320">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3111324">//&nbsp;Either&nbsp;we&nbsp;failed&nbsp;to&nbsp;advance,&nbsp;we&nbsp;have&nbsp;a&nbsp;percent&nbsp;character,&nbsp;or&nbsp;we&nbsp;ran&nbsp;out&nbsp;of&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111411">if</span>&nbsp;<span class="ident" id="3111414"><a href="/fmt/scan.go.html#3111068">format</a></span><span class="op" id="3111420">[</span><span class="ident" id="3111421"><a href="/fmt/scan.go.html#3111234">i</a></span><span class="op" id="3111422">]</span>&nbsp;<span class="op" id="3111424">!=</span>&nbsp;<span class="string" id="3111427">&#39;%&#39;</span>&nbsp;<span class="op" id="3111431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3111436">//&nbsp;Can&#39;t&nbsp;advance&nbsp;format.&nbsp;&nbsp;Why&nbsp;not?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111474">if</span>&nbsp;<span class="ident" id="3111477"><a href="/fmt/scan.go.html#3111256">w</a></span>&nbsp;<span class="op" id="3111479">&lt;</span>&nbsp;<span class="num" id="3111481">0</span>&nbsp;<span class="op" id="3111483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111489"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111490">.</span><span class="ident" id="3111491">errorString</span><span class="op" id="3111502">(</span><span class="string" id="3111503">&#34;input&nbsp;does&nbsp;not&nbsp;match&nbsp;format&#34;</span><span class="op" id="3111532">)</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3111537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3111542">//&nbsp;Otherwise&nbsp;at&nbsp;EOF;&nbsp;&#34;too&nbsp;many&nbsp;operands&#34;&nbsp;error&nbsp;handled&nbsp;below</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111606">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3111614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111618"><a href="/fmt/scan.go.html#3111234">i</a></span><span class="op" id="3111619">++</span>&nbsp;<span class="comment" id="3111622">//&nbsp;%&nbsp;is&nbsp;one&nbsp;byte</span><br>
<span class="lineno">1140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3111642">//&nbsp;do&nbsp;we&nbsp;have&nbsp;20&nbsp;(width)?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111670">var</span>&nbsp;<span class="ident" id="3111674">widPresent</span>&nbsp;<span class="builtintype" id="3111685">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111692"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111693">.</span><span class="ident" id="3111694">maxWid</span><span class="op" id="3111700">,</span>&nbsp;<span class="ident" id="3111702"><a href="/fmt/scan.go.html#3111674">widPresent</a></span><span class="op" id="3111712">,</span>&nbsp;<span class="ident" id="3111714"><a href="/fmt/scan.go.html#3111234">i</a></span>&nbsp;<span class="op" id="3111716">=</span>&nbsp;<span class="ident" id="3111718"><a href="/fmt/print.go.html#3059624">parsenum</a></span><span class="op" id="3111726">(</span><span class="ident" id="3111727"><a href="/fmt/scan.go.html#3111068">format</a></span><span class="op" id="3111733">,</span>&nbsp;<span class="ident" id="3111735"><a href="/fmt/scan.go.html#3111234">i</a></span><span class="op" id="3111736">,</span>&nbsp;<span class="ident" id="3111738"><a href="/fmt/scan.go.html#3111159">end</a></span><span class="op" id="3111741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111745">if</span>&nbsp;<span class="op" id="3111748">!</span><span class="ident" id="3111749"><a href="/fmt/scan.go.html#3111674">widPresent</a></span>&nbsp;<span class="op" id="3111760">{</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111765"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111766">.</span><span class="ident" id="3111767">maxWid</span>&nbsp;<span class="op" id="3111774">=</span>&nbsp;<span class="ident" id="3111776"><a href="/fmt/scan.go.html#3105595">hugeWid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3111786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111790"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111791">.</span><span class="ident" id="3111792">argLimit</span>&nbsp;<span class="op" id="3111801">=</span>&nbsp;<span class="ident" id="3111803"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111804">.</span><span class="ident" id="3111805">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111813">if</span>&nbsp;<span class="ident" id="3111816">f</span>&nbsp;<span class="op" id="3111818">:=</span>&nbsp;<span class="ident" id="3111821"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111822">.</span><span class="ident" id="3111823">count</span>&nbsp;<span class="op" id="3111829">+</span>&nbsp;<span class="ident" id="3111831"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111832">.</span><span class="ident" id="3111833">maxWid</span><span class="op" id="3111839">;</span>&nbsp;<span class="ident" id="3111841"><a href="/fmt/scan.go.html#3111816">f</a></span>&nbsp;<span class="op" id="3111843">&lt;</span>&nbsp;<span class="ident" id="3111845"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111846">.</span><span class="ident" id="3111847">argLimit</span>&nbsp;<span class="op" id="3111856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111861"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111862">.</span><span class="ident" id="3111863">argLimit</span>&nbsp;<span class="op" id="3111872">=</span>&nbsp;<span class="ident" id="3111874"><a href="/fmt/scan.go.html#3111816">f</a></span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3111878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111883">c</span><span class="op" id="3111884">,</span>&nbsp;<span class="ident" id="3111886"><a href="/fmt/scan.go.html#3111256">w</a></span>&nbsp;<span class="op" id="3111888">:=</span>&nbsp;<span class="ident" id="3111891"><a href="/fmt/scan.go.html#3081833">utf8</a></span><span class="op" id="3111895">.</span><span class="ident" id="3111896">DecodeRuneInString</span><span class="op" id="3111914">(</span><span class="ident" id="3111915"><a href="/fmt/scan.go.html#3111068">format</a></span><span class="op" id="3111921">[</span><span class="ident" id="3111922"><a href="/fmt/scan.go.html#3111234">i</a></span><span class="op" id="3111923">:</span><span class="op" id="3111924">]</span><span class="op" id="3111925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111929"><a href="/fmt/scan.go.html#3111234">i</a></span>&nbsp;<span class="op" id="3111931">+=</span>&nbsp;<span class="ident" id="3111934"><a href="/fmt/scan.go.html#3111256">w</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3111939">if</span>&nbsp;<span class="ident" id="3111942"><a href="/fmt/scan.go.html#3111101">numProcessed</a></span>&nbsp;<span class="op" id="3111955">&gt;=</span>&nbsp;<span class="builtinfunc" id="3111958">len</span><span class="op" id="3111961">(</span><span class="ident" id="3111962"><a href="/fmt/scan.go.html#3111083">a</a></span><span class="op" id="3111963">)</span>&nbsp;<span class="op" id="3111965">{</span>&nbsp;<span class="comment" id="3111967">//&nbsp;out&nbsp;of&nbsp;operands</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3111989"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3111990">.</span><span class="ident" id="3111991">errorString</span><span class="op" id="3112002">(</span><span class="string" id="3112003">&#34;too&nbsp;few&nbsp;operands&nbsp;for&nbsp;format&nbsp;%&#34;</span>&nbsp;<span class="op" id="3112035">+</span>&nbsp;<span class="ident" id="3112037"><a href="/fmt/scan.go.html#3111068">format</a></span><span class="op" id="3112043">[</span><span class="ident" id="3112044"><a href="/fmt/scan.go.html#3111234">i</a></span><span class="op" id="3112045">-</span><span class="ident" id="3112046"><a href="/fmt/scan.go.html#3111256">w</a></span><span class="op" id="3112047">:</span><span class="op" id="3112048">]</span><span class="op" id="3112049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3112054">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3112062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3112066">arg</span>&nbsp;<span class="op" id="3112070">:=</span>&nbsp;<span class="ident" id="3112073"><a href="/fmt/scan.go.html#3111083">a</a></span><span class="op" id="3112074">[</span><span class="ident" id="3112075"><a href="/fmt/scan.go.html#3111101">numProcessed</a></span><span class="op" id="3112087">]</span><br>
<span class="lineno">1160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3112092"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3112093">.</span><span class="ident" id="3112094">scanOne</span><span class="op" id="3112101">(</span><span class="ident" id="3112102"><a href="/fmt/scan.go.html#3111883">c</a></span><span class="op" id="3112103">,</span>&nbsp;<span class="ident" id="3112105"><a href="/fmt/scan.go.html#3112066">arg</a></span><span class="op" id="3112108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3112112"><a href="/fmt/scan.go.html#3111101">numProcessed</a></span><span class="op" id="3112124">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3112129"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3112130">.</span><span class="ident" id="3112131">argLimit</span>&nbsp;<span class="op" id="3112140">=</span>&nbsp;<span class="ident" id="3112142"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3112143">.</span><span class="ident" id="3112144">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3112151">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3112154">if</span>&nbsp;<span class="ident" id="3112157"><a href="/fmt/scan.go.html#3111101">numProcessed</a></span>&nbsp;<span class="op" id="3112170">&lt;</span>&nbsp;<span class="builtinfunc" id="3112172">len</span><span class="op" id="3112175">(</span><span class="ident" id="3112176"><a href="/fmt/scan.go.html#3111083">a</a></span><span class="op" id="3112177">)</span>&nbsp;<span class="op" id="3112179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3112183"><a href="/fmt/scan.go.html#3111053">s</a></span><span class="op" id="3112184">.</span><span class="ident" id="3112185">errorString</span><span class="op" id="3112196">(</span><span class="string" id="3112197">&#34;too&nbsp;many&nbsp;operands&#34;</span><span class="op" id="3112216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3112219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3112222">return</span><br>
<span class="lineno"></span><span class="op" id="3112229">}</span>
</div>
</body>
</html>
