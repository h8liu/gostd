<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html" class="current">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3888974">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3889029">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3889083">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3889134">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3889207">package</span>&nbsp;<span class="ident" id="3889215">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3889220">import</span>&nbsp;<span class="op" id="3889227">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3889230">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3889238">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3889249">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3889256">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3889259">//&nbsp;runtimeNano&nbsp;returns&nbsp;the&nbsp;current&nbsp;value&nbsp;of&nbsp;the&nbsp;runtime&nbsp;clock&nbsp;in&nbsp;nanoseconds.</span><br>
<span class="lineno"></span><span class="keyword" id="3889337">func</span>&nbsp;<span class="ident" id="3889342">runtimeNano</span><span class="op" id="3889353">(</span><span class="op" id="3889354">)</span>&nbsp;<span class="ident" id="3889356">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3889363">func</span>&nbsp;<span class="ident" id="3889368">runtime_pollServerInit</span><span class="op" id="3889390">(</span><span class="op" id="3889391">)</span><br>
<span class="lineno"></span><span class="keyword" id="3889393">func</span>&nbsp;<span class="ident" id="3889398">runtime_pollOpen</span><span class="op" id="3889414">(</span><span class="ident" id="3889415">fd</span>&nbsp;<span class="builtintype" id="3889418">uintptr</span><span class="op" id="3889425">)</span>&nbsp;<span class="op" id="3889427">(</span><span class="builtintype" id="3889428">uintptr</span><span class="op" id="3889435">,</span>&nbsp;<span class="builtintype" id="3889437">int</span><span class="op" id="3889440">)</span><br>
<span class="lineno">20</span><span class="keyword" id="3889442">func</span>&nbsp;<span class="ident" id="3889447">runtime_pollClose</span><span class="op" id="3889464">(</span><span class="ident" id="3889465">ctx</span>&nbsp;<span class="builtintype" id="3889469">uintptr</span><span class="op" id="3889476">)</span><br>
<span class="lineno"></span><span class="keyword" id="3889478">func</span>&nbsp;<span class="ident" id="3889483">runtime_pollWait</span><span class="op" id="3889499">(</span><span class="ident" id="3889500">ctx</span>&nbsp;<span class="builtintype" id="3889504">uintptr</span><span class="op" id="3889511">,</span>&nbsp;<span class="ident" id="3889513">mode</span>&nbsp;<span class="builtintype" id="3889518">int</span><span class="op" id="3889521">)</span>&nbsp;<span class="builtintype" id="3889523">int</span><br>
<span class="lineno"></span><span class="keyword" id="3889527">func</span>&nbsp;<span class="ident" id="3889532">runtime_pollWaitCanceled</span><span class="op" id="3889556">(</span><span class="ident" id="3889557">ctx</span>&nbsp;<span class="builtintype" id="3889561">uintptr</span><span class="op" id="3889568">,</span>&nbsp;<span class="ident" id="3889570">mode</span>&nbsp;<span class="builtintype" id="3889575">int</span><span class="op" id="3889578">)</span>&nbsp;<span class="builtintype" id="3889580">int</span><br>
<span class="lineno"></span><span class="keyword" id="3889584">func</span>&nbsp;<span class="ident" id="3889589">runtime_pollReset</span><span class="op" id="3889606">(</span><span class="ident" id="3889607">ctx</span>&nbsp;<span class="builtintype" id="3889611">uintptr</span><span class="op" id="3889618">,</span>&nbsp;<span class="ident" id="3889620">mode</span>&nbsp;<span class="builtintype" id="3889625">int</span><span class="op" id="3889628">)</span>&nbsp;<span class="builtintype" id="3889630">int</span><br>
<span class="lineno"></span><span class="keyword" id="3889634">func</span>&nbsp;<span class="ident" id="3889639">runtime_pollSetDeadline</span><span class="op" id="3889662">(</span><span class="ident" id="3889663">ctx</span>&nbsp;<span class="builtintype" id="3889667">uintptr</span><span class="op" id="3889674">,</span>&nbsp;<span class="ident" id="3889676">d</span>&nbsp;<span class="ident" id="3889678">int64</span><span class="op" id="3889683">,</span>&nbsp;<span class="ident" id="3889685">mode</span>&nbsp;<span class="builtintype" id="3889690">int</span><span class="op" id="3889693">)</span><br>
<span class="lineno">25</span><span class="keyword" id="3889695">func</span>&nbsp;<span class="ident" id="3889700">runtime_pollUnblock</span><span class="op" id="3889719">(</span><span class="ident" id="3889720">ctx</span>&nbsp;<span class="builtintype" id="3889724">uintptr</span><span class="op" id="3889731">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3889734">type</span>&nbsp;<span class="ident" id="3889739">pollDesc</span>&nbsp;<span class="keyword" id="3889748">struct</span>&nbsp;<span class="op" id="3889755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3889758">runtimeCtx</span>&nbsp;<span class="builtintype" id="3889769">uintptr</span><br>
<span class="lineno"></span><span class="op" id="3889777">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="3889780">var</span>&nbsp;<span class="ident" id="3889784">serverInit</span>&nbsp;<span class="ident" id="3889795">sync</span><span class="op" id="3889799">.</span><span class="ident" id="3889800">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3889806">func</span>&nbsp;<span class="op" id="3889811">(</span><span class="ident" id="3889812">pd</span>&nbsp;<span class="op" id="3889815">*</span><span class="ident" id="3889816">pollDesc</span><span class="op" id="3889824">)</span>&nbsp;<span class="ident" id="3889826">Init</span><span class="op" id="3889830">(</span><span class="ident" id="3889831">fd</span>&nbsp;<span class="op" id="3889834">*</span><span class="ident" id="3889835">netFD</span><span class="op" id="3889840">)</span>&nbsp;<span class="builtintype" id="3889842">error</span>&nbsp;<span class="op" id="3889848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3889851">serverInit</span><span class="op" id="3889861">.</span><span class="ident" id="3889862">Do</span><span class="op" id="3889864">(</span><span class="ident" id="3889865">runtime_pollServerInit</span><span class="op" id="3889887">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3889890">ctx</span><span class="op" id="3889893">,</span>&nbsp;<span class="ident" id="3889895">errno</span>&nbsp;<span class="op" id="3889901">:=</span>&nbsp;<span class="ident" id="3889904">runtime_pollOpen</span><span class="op" id="3889920">(</span><span class="builtintype" id="3889921">uintptr</span><span class="op" id="3889928">(</span><span class="ident" id="3889929">fd</span><span class="op" id="3889931">.</span><span class="ident" id="3889932">sysfd</span><span class="op" id="3889937">)</span><span class="op" id="3889938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3889941">if</span>&nbsp;<span class="ident" id="3889944">errno</span>&nbsp;<span class="op" id="3889950">!=</span>&nbsp;<span class="num" id="3889953">0</span>&nbsp;<span class="op" id="3889955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3889959">return</span>&nbsp;<span class="ident" id="3889966">syscall</span><span class="op" id="3889973">.</span><span class="ident" id="3889974">Errno</span><span class="op" id="3889979">(</span><span class="ident" id="3889980">errno</span><span class="op" id="3889985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3889988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3889991">pd</span><span class="op" id="3889993">.</span><span class="ident" id="3889994">runtimeCtx</span>&nbsp;<span class="op" id="3890005">=</span>&nbsp;<span class="ident" id="3890007">ctx</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890012">return</span>&nbsp;<span class="builtintype" id="3890019">nil</span><br>
<span class="lineno"></span><span class="op" id="3890023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3890026">func</span>&nbsp;<span class="op" id="3890031">(</span><span class="ident" id="3890032">pd</span>&nbsp;<span class="op" id="3890035">*</span><span class="ident" id="3890036">pollDesc</span><span class="op" id="3890044">)</span>&nbsp;<span class="ident" id="3890046">Close</span><span class="op" id="3890051">(</span><span class="op" id="3890052">)</span>&nbsp;<span class="op" id="3890054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890057">if</span>&nbsp;<span class="ident" id="3890060">pd</span><span class="op" id="3890062">.</span><span class="ident" id="3890063">runtimeCtx</span>&nbsp;<span class="op" id="3890074">==</span>&nbsp;<span class="num" id="3890077">0</span>&nbsp;<span class="op" id="3890079">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890083">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3890091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3890094">runtime_pollClose</span><span class="op" id="3890111">(</span><span class="ident" id="3890112">pd</span><span class="op" id="3890114">.</span><span class="ident" id="3890115">runtimeCtx</span><span class="op" id="3890125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3890128">pd</span><span class="op" id="3890130">.</span><span class="ident" id="3890131">runtimeCtx</span>&nbsp;<span class="op" id="3890142">=</span>&nbsp;<span class="num" id="3890144">0</span><br>
<span class="lineno"></span><span class="op" id="3890146">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3890149">func</span>&nbsp;<span class="op" id="3890154">(</span><span class="ident" id="3890155">pd</span>&nbsp;<span class="op" id="3890158">*</span><span class="ident" id="3890159">pollDesc</span><span class="op" id="3890167">)</span>&nbsp;<span class="ident" id="3890169">Lock</span><span class="op" id="3890173">(</span><span class="op" id="3890174">)</span>&nbsp;<span class="op" id="3890176">{</span><br>
<span class="lineno"></span><span class="op" id="3890178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3890181">func</span>&nbsp;<span class="op" id="3890186">(</span><span class="ident" id="3890187">pd</span>&nbsp;<span class="op" id="3890190">*</span><span class="ident" id="3890191">pollDesc</span><span class="op" id="3890199">)</span>&nbsp;<span class="ident" id="3890201">Unlock</span><span class="op" id="3890207">(</span><span class="op" id="3890208">)</span>&nbsp;<span class="op" id="3890210">{</span><br>
<span class="lineno">55</span><span class="op" id="3890212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3890215">func</span>&nbsp;<span class="op" id="3890220">(</span><span class="ident" id="3890221">pd</span>&nbsp;<span class="op" id="3890224">*</span><span class="ident" id="3890225">pollDesc</span><span class="op" id="3890233">)</span>&nbsp;<span class="ident" id="3890235">Wakeup</span><span class="op" id="3890241">(</span><span class="op" id="3890242">)</span>&nbsp;<span class="op" id="3890244">{</span><br>
<span class="lineno"></span><span class="op" id="3890246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3890249">//&nbsp;Evict&nbsp;evicts&nbsp;fd&nbsp;from&nbsp;the&nbsp;pending&nbsp;list,&nbsp;unblocking&nbsp;any&nbsp;I/O&nbsp;running&nbsp;on&nbsp;fd.</span><br>
<span class="lineno"></span><span class="comment" id="3890325">//&nbsp;Return&nbsp;value&nbsp;is&nbsp;whether&nbsp;the&nbsp;pollServer&nbsp;should&nbsp;be&nbsp;woken&nbsp;up.</span><br>
<span class="lineno"></span><span class="keyword" id="3890387">func</span>&nbsp;<span class="op" id="3890392">(</span><span class="ident" id="3890393">pd</span>&nbsp;<span class="op" id="3890396">*</span><span class="ident" id="3890397">pollDesc</span><span class="op" id="3890405">)</span>&nbsp;<span class="ident" id="3890407">Evict</span><span class="op" id="3890412">(</span><span class="op" id="3890413">)</span>&nbsp;<span class="builtintype" id="3890415">bool</span>&nbsp;<span class="op" id="3890420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890423">if</span>&nbsp;<span class="ident" id="3890426">pd</span><span class="op" id="3890428">.</span><span class="ident" id="3890429">runtimeCtx</span>&nbsp;<span class="op" id="3890440">==</span>&nbsp;<span class="num" id="3890443">0</span>&nbsp;<span class="op" id="3890445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890449">return</span>&nbsp;<span class="builtintype" id="3890456">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3890463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3890466">runtime_pollUnblock</span><span class="op" id="3890485">(</span><span class="ident" id="3890486">pd</span><span class="op" id="3890488">.</span><span class="ident" id="3890489">runtimeCtx</span><span class="op" id="3890499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890502">return</span>&nbsp;<span class="builtintype" id="3890509">false</span><br>
<span class="lineno"></span><span class="op" id="3890515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="3890518">func</span>&nbsp;<span class="op" id="3890523">(</span><span class="ident" id="3890524">pd</span>&nbsp;<span class="op" id="3890527">*</span><span class="ident" id="3890528">pollDesc</span><span class="op" id="3890536">)</span>&nbsp;<span class="ident" id="3890538">Prepare</span><span class="op" id="3890545">(</span><span class="ident" id="3890546">mode</span>&nbsp;<span class="builtintype" id="3890551">int</span><span class="op" id="3890554">)</span>&nbsp;<span class="builtintype" id="3890556">error</span>&nbsp;<span class="op" id="3890562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3890565">res</span>&nbsp;<span class="op" id="3890569">:=</span>&nbsp;<span class="ident" id="3890572">runtime_pollReset</span><span class="op" id="3890589">(</span><span class="ident" id="3890590">pd</span><span class="op" id="3890592">.</span><span class="ident" id="3890593">runtimeCtx</span><span class="op" id="3890603">,</span>&nbsp;<span class="ident" id="3890605">mode</span><span class="op" id="3890609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890612">return</span>&nbsp;<span class="ident" id="3890619">convertErr</span><span class="op" id="3890629">(</span><span class="ident" id="3890630">res</span><span class="op" id="3890633">)</span><br>
<span class="lineno"></span><span class="op" id="3890635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="3890638">func</span>&nbsp;<span class="op" id="3890643">(</span><span class="ident" id="3890644">pd</span>&nbsp;<span class="op" id="3890647">*</span><span class="ident" id="3890648">pollDesc</span><span class="op" id="3890656">)</span>&nbsp;<span class="ident" id="3890658">PrepareRead</span><span class="op" id="3890669">(</span><span class="op" id="3890670">)</span>&nbsp;<span class="builtintype" id="3890672">error</span>&nbsp;<span class="op" id="3890678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890681">return</span>&nbsp;<span class="ident" id="3890688">pd</span><span class="op" id="3890690">.</span><span class="ident" id="3890691">Prepare</span><span class="op" id="3890698">(</span><span class="string" id="3890699">&#39;r&#39;</span><span class="op" id="3890702">)</span><br>
<span class="lineno"></span><span class="op" id="3890704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3890707">func</span>&nbsp;<span class="op" id="3890712">(</span><span class="ident" id="3890713">pd</span>&nbsp;<span class="op" id="3890716">*</span><span class="ident" id="3890717">pollDesc</span><span class="op" id="3890725">)</span>&nbsp;<span class="ident" id="3890727">PrepareWrite</span><span class="op" id="3890739">(</span><span class="op" id="3890740">)</span>&nbsp;<span class="builtintype" id="3890742">error</span>&nbsp;<span class="op" id="3890748">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890751">return</span>&nbsp;<span class="ident" id="3890758">pd</span><span class="op" id="3890760">.</span><span class="ident" id="3890761">Prepare</span><span class="op" id="3890768">(</span><span class="string" id="3890769">&#39;w&#39;</span><span class="op" id="3890772">)</span><br>
<span class="lineno"></span><span class="op" id="3890774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3890777">func</span>&nbsp;<span class="op" id="3890782">(</span><span class="ident" id="3890783">pd</span>&nbsp;<span class="op" id="3890786">*</span><span class="ident" id="3890787">pollDesc</span><span class="op" id="3890795">)</span>&nbsp;<span class="ident" id="3890797">Wait</span><span class="op" id="3890801">(</span><span class="ident" id="3890802">mode</span>&nbsp;<span class="builtintype" id="3890807">int</span><span class="op" id="3890810">)</span>&nbsp;<span class="builtintype" id="3890812">error</span>&nbsp;<span class="op" id="3890818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3890821">res</span>&nbsp;<span class="op" id="3890825">:=</span>&nbsp;<span class="ident" id="3890828">runtime_pollWait</span><span class="op" id="3890844">(</span><span class="ident" id="3890845">pd</span><span class="op" id="3890847">.</span><span class="ident" id="3890848">runtimeCtx</span><span class="op" id="3890858">,</span>&nbsp;<span class="ident" id="3890860">mode</span><span class="op" id="3890864">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890867">return</span>&nbsp;<span class="ident" id="3890874">convertErr</span><span class="op" id="3890884">(</span><span class="ident" id="3890885">res</span><span class="op" id="3890888">)</span><br>
<span class="lineno"></span><span class="op" id="3890890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3890893">func</span>&nbsp;<span class="op" id="3890898">(</span><span class="ident" id="3890899">pd</span>&nbsp;<span class="op" id="3890902">*</span><span class="ident" id="3890903">pollDesc</span><span class="op" id="3890911">)</span>&nbsp;<span class="ident" id="3890913">WaitRead</span><span class="op" id="3890921">(</span><span class="op" id="3890922">)</span>&nbsp;<span class="builtintype" id="3890924">error</span>&nbsp;<span class="op" id="3890930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890933">return</span>&nbsp;<span class="ident" id="3890940">pd</span><span class="op" id="3890942">.</span><span class="ident" id="3890943">Wait</span><span class="op" id="3890947">(</span><span class="string" id="3890948">&#39;r&#39;</span><span class="op" id="3890951">)</span><br>
<span class="lineno">90</span><span class="op" id="3890953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3890956">func</span>&nbsp;<span class="op" id="3890961">(</span><span class="ident" id="3890962">pd</span>&nbsp;<span class="op" id="3890965">*</span><span class="ident" id="3890966">pollDesc</span><span class="op" id="3890974">)</span>&nbsp;<span class="ident" id="3890976">WaitWrite</span><span class="op" id="3890985">(</span><span class="op" id="3890986">)</span>&nbsp;<span class="builtintype" id="3890988">error</span>&nbsp;<span class="op" id="3890994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3890997">return</span>&nbsp;<span class="ident" id="3891004">pd</span><span class="op" id="3891006">.</span><span class="ident" id="3891007">Wait</span><span class="op" id="3891011">(</span><span class="string" id="3891012">&#39;w&#39;</span><span class="op" id="3891015">)</span><br>
<span class="lineno"></span><span class="op" id="3891017">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="3891020">func</span>&nbsp;<span class="op" id="3891025">(</span><span class="ident" id="3891026">pd</span>&nbsp;<span class="op" id="3891029">*</span><span class="ident" id="3891030">pollDesc</span><span class="op" id="3891038">)</span>&nbsp;<span class="ident" id="3891040">WaitCanceled</span><span class="op" id="3891052">(</span><span class="ident" id="3891053">mode</span>&nbsp;<span class="builtintype" id="3891058">int</span><span class="op" id="3891061">)</span>&nbsp;<span class="op" id="3891063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3891066">runtime_pollWaitCanceled</span><span class="op" id="3891090">(</span><span class="ident" id="3891091">pd</span><span class="op" id="3891093">.</span><span class="ident" id="3891094">runtimeCtx</span><span class="op" id="3891104">,</span>&nbsp;<span class="ident" id="3891106">mode</span><span class="op" id="3891110">)</span><br>
<span class="lineno"></span><span class="op" id="3891112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="3891115">func</span>&nbsp;<span class="op" id="3891120">(</span><span class="ident" id="3891121">pd</span>&nbsp;<span class="op" id="3891124">*</span><span class="ident" id="3891125">pollDesc</span><span class="op" id="3891133">)</span>&nbsp;<span class="ident" id="3891135">WaitCanceledRead</span><span class="op" id="3891151">(</span><span class="op" id="3891152">)</span>&nbsp;<span class="op" id="3891154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3891157">pd</span><span class="op" id="3891159">.</span><span class="ident" id="3891160">WaitCanceled</span><span class="op" id="3891172">(</span><span class="string" id="3891173">&#39;r&#39;</span><span class="op" id="3891176">)</span><br>
<span class="lineno"></span><span class="op" id="3891178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3891181">func</span>&nbsp;<span class="op" id="3891186">(</span><span class="ident" id="3891187">pd</span>&nbsp;<span class="op" id="3891190">*</span><span class="ident" id="3891191">pollDesc</span><span class="op" id="3891199">)</span>&nbsp;<span class="ident" id="3891201">WaitCanceledWrite</span><span class="op" id="3891218">(</span><span class="op" id="3891219">)</span>&nbsp;<span class="op" id="3891221">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3891224">pd</span><span class="op" id="3891226">.</span><span class="ident" id="3891227">WaitCanceled</span><span class="op" id="3891239">(</span><span class="string" id="3891240">&#39;w&#39;</span><span class="op" id="3891243">)</span><br>
<span class="lineno"></span><span class="op" id="3891245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3891248">func</span>&nbsp;<span class="ident" id="3891253">convertErr</span><span class="op" id="3891263">(</span><span class="ident" id="3891264">res</span>&nbsp;<span class="builtintype" id="3891268">int</span><span class="op" id="3891271">)</span>&nbsp;<span class="builtintype" id="3891273">error</span>&nbsp;<span class="op" id="3891279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891282">switch</span>&nbsp;<span class="ident" id="3891289">res</span>&nbsp;<span class="op" id="3891293">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891296">case</span>&nbsp;<span class="num" id="3891301">0</span><span class="op" id="3891302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891306">return</span>&nbsp;<span class="builtintype" id="3891313">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891318">case</span>&nbsp;<span class="num" id="3891323">1</span><span class="op" id="3891324">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891328">return</span>&nbsp;<span class="ident" id="3891335">errClosing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891347">case</span>&nbsp;<span class="num" id="3891352">2</span><span class="op" id="3891353">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891357">return</span>&nbsp;<span class="ident" id="3891364">errTimeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3891376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3891379">println</span><span class="op" id="3891386">(</span><span class="string" id="3891387">&#34;unreachable:&nbsp;&#34;</span><span class="op" id="3891402">,</span>&nbsp;<span class="ident" id="3891404">res</span><span class="op" id="3891407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3891410">panic</span><span class="op" id="3891415">(</span><span class="string" id="3891416">&#34;unreachable&#34;</span><span class="op" id="3891429">)</span><br>
<span class="lineno"></span><span class="op" id="3891431">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="3891434">func</span>&nbsp;<span class="op" id="3891439">(</span><span class="ident" id="3891440">fd</span>&nbsp;<span class="op" id="3891443">*</span><span class="ident" id="3891444">netFD</span><span class="op" id="3891449">)</span>&nbsp;<span class="ident" id="3891451">setDeadline</span><span class="op" id="3891462">(</span><span class="ident" id="3891463">t</span>&nbsp;<span class="ident" id="3891465">time</span><span class="op" id="3891469">.</span><span class="ident" id="3891470">Time</span><span class="op" id="3891474">)</span>&nbsp;<span class="builtintype" id="3891476">error</span>&nbsp;<span class="op" id="3891482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891485">return</span>&nbsp;<span class="ident" id="3891492">setDeadlineImpl</span><span class="op" id="3891507">(</span><span class="ident" id="3891508">fd</span><span class="op" id="3891510">,</span>&nbsp;<span class="ident" id="3891512">t</span><span class="op" id="3891513">,</span>&nbsp;<span class="string" id="3891515">&#39;r&#39;</span><span class="op" id="3891518">+</span><span class="string" id="3891519">&#39;w&#39;</span><span class="op" id="3891522">)</span><br>
<span class="lineno"></span><span class="op" id="3891524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="3891527">func</span>&nbsp;<span class="op" id="3891532">(</span><span class="ident" id="3891533">fd</span>&nbsp;<span class="op" id="3891536">*</span><span class="ident" id="3891537">netFD</span><span class="op" id="3891542">)</span>&nbsp;<span class="ident" id="3891544">setReadDeadline</span><span class="op" id="3891559">(</span><span class="ident" id="3891560">t</span>&nbsp;<span class="ident" id="3891562">time</span><span class="op" id="3891566">.</span><span class="ident" id="3891567">Time</span><span class="op" id="3891571">)</span>&nbsp;<span class="builtintype" id="3891573">error</span>&nbsp;<span class="op" id="3891579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891582">return</span>&nbsp;<span class="ident" id="3891589">setDeadlineImpl</span><span class="op" id="3891604">(</span><span class="ident" id="3891605">fd</span><span class="op" id="3891607">,</span>&nbsp;<span class="ident" id="3891609">t</span><span class="op" id="3891610">,</span>&nbsp;<span class="string" id="3891612">&#39;r&#39;</span><span class="op" id="3891615">)</span><br>
<span class="lineno"></span><span class="op" id="3891617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3891620">func</span>&nbsp;<span class="op" id="3891625">(</span><span class="ident" id="3891626">fd</span>&nbsp;<span class="op" id="3891629">*</span><span class="ident" id="3891630">netFD</span><span class="op" id="3891635">)</span>&nbsp;<span class="ident" id="3891637">setWriteDeadline</span><span class="op" id="3891653">(</span><span class="ident" id="3891654">t</span>&nbsp;<span class="ident" id="3891656">time</span><span class="op" id="3891660">.</span><span class="ident" id="3891661">Time</span><span class="op" id="3891665">)</span>&nbsp;<span class="builtintype" id="3891667">error</span>&nbsp;<span class="op" id="3891673">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891676">return</span>&nbsp;<span class="ident" id="3891683">setDeadlineImpl</span><span class="op" id="3891698">(</span><span class="ident" id="3891699">fd</span><span class="op" id="3891701">,</span>&nbsp;<span class="ident" id="3891703">t</span><span class="op" id="3891704">,</span>&nbsp;<span class="string" id="3891706">&#39;w&#39;</span><span class="op" id="3891709">)</span><br>
<span class="lineno"></span><span class="op" id="3891711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3891714">func</span>&nbsp;<span class="ident" id="3891719">setDeadlineImpl</span><span class="op" id="3891734">(</span><span class="ident" id="3891735">fd</span>&nbsp;<span class="op" id="3891738">*</span><span class="ident" id="3891739">netFD</span><span class="op" id="3891744">,</span>&nbsp;<span class="ident" id="3891746">t</span>&nbsp;<span class="ident" id="3891748">time</span><span class="op" id="3891752">.</span><span class="ident" id="3891753">Time</span><span class="op" id="3891757">,</span>&nbsp;<span class="ident" id="3891759">mode</span>&nbsp;<span class="builtintype" id="3891764">int</span><span class="op" id="3891767">)</span>&nbsp;<span class="builtintype" id="3891769">error</span>&nbsp;<span class="op" id="3891775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3891778">d</span>&nbsp;<span class="op" id="3891780">:=</span>&nbsp;<span class="ident" id="3891783">runtimeNano</span><span class="op" id="3891794">(</span><span class="op" id="3891795">)</span>&nbsp;<span class="op" id="3891797">+</span>&nbsp;<span class="ident" id="3891799">int64</span><span class="op" id="3891804">(</span><span class="ident" id="3891805">t</span><span class="op" id="3891806">.</span><span class="ident" id="3891807">Sub</span><span class="op" id="3891810">(</span><span class="ident" id="3891811">time</span><span class="op" id="3891815">.</span><span class="ident" id="3891816">Now</span><span class="op" id="3891819">(</span><span class="op" id="3891820">)</span><span class="op" id="3891821">)</span><span class="op" id="3891822">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891825">if</span>&nbsp;<span class="ident" id="3891828">t</span><span class="op" id="3891829">.</span><span class="ident" id="3891830">IsZero</span><span class="op" id="3891836">(</span><span class="op" id="3891837">)</span>&nbsp;<span class="op" id="3891839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3891843">d</span>&nbsp;<span class="op" id="3891845">=</span>&nbsp;<span class="num" id="3891847">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3891850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891853">if</span>&nbsp;<span class="ident" id="3891856">err</span>&nbsp;<span class="op" id="3891860">:=</span>&nbsp;<span class="ident" id="3891863">fd</span><span class="op" id="3891865">.</span><span class="ident" id="3891866">incref</span><span class="op" id="3891872">(</span><span class="op" id="3891873">)</span><span class="op" id="3891874">;</span>&nbsp;<span class="ident" id="3891876">err</span>&nbsp;<span class="op" id="3891880">!=</span>&nbsp;<span class="builtintype" id="3891883">nil</span>&nbsp;<span class="op" id="3891887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891891">return</span>&nbsp;<span class="ident" id="3891898">err</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3891903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3891906">runtime_pollSetDeadline</span><span class="op" id="3891929">(</span><span class="ident" id="3891930">fd</span><span class="op" id="3891932">.</span><span class="ident" id="3891933">pd</span><span class="op" id="3891935">.</span><span class="ident" id="3891936">runtimeCtx</span><span class="op" id="3891946">,</span>&nbsp;<span class="ident" id="3891948">d</span><span class="op" id="3891949">,</span>&nbsp;<span class="ident" id="3891951">mode</span><span class="op" id="3891955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3891958">fd</span><span class="op" id="3891960">.</span><span class="ident" id="3891961">decref</span><span class="op" id="3891967">(</span><span class="op" id="3891968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3891971">return</span>&nbsp;<span class="builtintype" id="3891978">nil</span><br>
<span class="lineno"></span><span class="op" id="3891982">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
