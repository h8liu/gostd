<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html" class="current">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2762944">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2762999">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2763053">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2763104">//&nbsp;Deep&nbsp;equality&nbsp;test&nbsp;via&nbsp;reflection</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2763142">package</span>&nbsp;<span class="ident" id="2763150">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763159">//&nbsp;During&nbsp;deepValueEqual,&nbsp;must&nbsp;keep&nbsp;track&nbsp;of&nbsp;checks&nbsp;that&nbsp;are</span><br>
<span class="lineno">10</span><span class="comment" id="2763220">//&nbsp;in&nbsp;progress.&nbsp;&nbsp;The&nbsp;comparison&nbsp;algorithm&nbsp;assumes&nbsp;that&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2763279">//&nbsp;checks&nbsp;in&nbsp;progress&nbsp;are&nbsp;true&nbsp;when&nbsp;it&nbsp;reencounters&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="2763337">//&nbsp;Visited&nbsp;comparisons&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;map&nbsp;indexed&nbsp;by&nbsp;visit.</span><br>
<span class="lineno"></span><span class="keyword" id="2763398">type</span>&nbsp;<span class="ident" id="2763403">visit</span>&nbsp;<span class="keyword" id="2763409">struct</span>&nbsp;<span class="op" id="2763416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763419">a1</span>&nbsp;&nbsp;<span class="builtintype" id="2763423">uintptr</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763432">a2</span>&nbsp;&nbsp;<span class="builtintype" id="2763436">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763445">typ</span>&nbsp;<span class="ident" id="2763449">Type</span><br>
<span class="lineno"></span><span class="op" id="2763454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763457">//&nbsp;Tests&nbsp;for&nbsp;deep&nbsp;equality&nbsp;using&nbsp;reflected&nbsp;types.&nbsp;The&nbsp;map&nbsp;argument&nbsp;tracks</span><br>
<span class="lineno">20</span><span class="comment" id="2763531">//&nbsp;comparisons&nbsp;that&nbsp;have&nbsp;already&nbsp;been&nbsp;seen,&nbsp;which&nbsp;allows&nbsp;short&nbsp;circuiting&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2763608">//&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2763628">func</span>&nbsp;<span class="ident" id="2763633">deepValueEqual</span><span class="op" id="2763647">(</span><span class="ident" id="2763648">v1</span><span class="op" id="2763650">,</span>&nbsp;<span class="ident" id="2763652">v2</span>&nbsp;<span class="ident" id="2763655">Value</span><span class="op" id="2763660">,</span>&nbsp;<span class="ident" id="2763662">visited</span>&nbsp;<span class="keyword" id="2763670">map</span><span class="op" id="2763673">[</span><span class="ident" id="2763674">visit</span><span class="op" id="2763679">]</span><span class="builtintype" id="2763680">bool</span><span class="op" id="2763684">,</span>&nbsp;<span class="ident" id="2763686">depth</span>&nbsp;<span class="builtintype" id="2763692">int</span><span class="op" id="2763695">)</span>&nbsp;<span class="builtintype" id="2763697">bool</span>&nbsp;<span class="op" id="2763702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763705">if</span>&nbsp;<span class="op" id="2763708">!</span><span class="ident" id="2763709">v1</span><span class="op" id="2763711">.</span><span class="ident" id="2763712">IsValid</span><span class="op" id="2763719">(</span><span class="op" id="2763720">)</span>&nbsp;<span class="op" id="2763722">||</span>&nbsp;<span class="op" id="2763725">!</span><span class="ident" id="2763726">v2</span><span class="op" id="2763728">.</span><span class="ident" id="2763729">IsValid</span><span class="op" id="2763736">(</span><span class="op" id="2763737">)</span>&nbsp;<span class="op" id="2763739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763743">return</span>&nbsp;<span class="ident" id="2763750">v1</span><span class="op" id="2763752">.</span><span class="ident" id="2763753">IsValid</span><span class="op" id="2763760">(</span><span class="op" id="2763761">)</span>&nbsp;<span class="op" id="2763763">==</span>&nbsp;<span class="ident" id="2763766">v2</span><span class="op" id="2763768">.</span><span class="ident" id="2763769">IsValid</span><span class="op" id="2763776">(</span><span class="op" id="2763777">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2763780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763783">if</span>&nbsp;<span class="ident" id="2763786">v1</span><span class="op" id="2763788">.</span><span class="ident" id="2763789">Type</span><span class="op" id="2763793">(</span><span class="op" id="2763794">)</span>&nbsp;<span class="op" id="2763796">!=</span>&nbsp;<span class="ident" id="2763799">v2</span><span class="op" id="2763801">.</span><span class="ident" id="2763802">Type</span><span class="op" id="2763806">(</span><span class="op" id="2763807">)</span>&nbsp;<span class="op" id="2763809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763813">return</span>&nbsp;<span class="builtintype" id="2763820">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2763827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763831">//&nbsp;if&nbsp;depth&nbsp;&gt;&nbsp;10&nbsp;{&nbsp;panic(&#34;deepValueEqual&#34;)&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763894">hard</span>&nbsp;<span class="op" id="2763899">:=</span>&nbsp;<span class="keyword" id="2763902">func</span><span class="op" id="2763906">(</span><span class="ident" id="2763907">k</span>&nbsp;<span class="ident" id="2763909">Kind</span><span class="op" id="2763913">)</span>&nbsp;<span class="builtintype" id="2763915">bool</span>&nbsp;<span class="op" id="2763920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763924">switch</span>&nbsp;<span class="ident" id="2763931">k</span>&nbsp;<span class="op" id="2763933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763937">case</span>&nbsp;<span class="ident" id="2763942">Array</span><span class="op" id="2763947">,</span>&nbsp;<span class="ident" id="2763949">Map</span><span class="op" id="2763952">,</span>&nbsp;<span class="ident" id="2763954">Slice</span><span class="op" id="2763959">,</span>&nbsp;<span class="ident" id="2763961">Struct</span><span class="op" id="2763967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763972">return</span>&nbsp;<span class="builtintype" id="2763979">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2763986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763990">return</span>&nbsp;<span class="builtintype" id="2763997">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764008">if</span>&nbsp;<span class="ident" id="2764011">v1</span><span class="op" id="2764013">.</span><span class="ident" id="2764014">CanAddr</span><span class="op" id="2764021">(</span><span class="op" id="2764022">)</span>&nbsp;<span class="op" id="2764024">&amp;&amp;</span>&nbsp;<span class="ident" id="2764027">v2</span><span class="op" id="2764029">.</span><span class="ident" id="2764030">CanAddr</span><span class="op" id="2764037">(</span><span class="op" id="2764038">)</span>&nbsp;<span class="op" id="2764040">&amp;&amp;</span>&nbsp;<span class="ident" id="2764043">hard</span><span class="op" id="2764047">(</span><span class="ident" id="2764048">v1</span><span class="op" id="2764050">.</span><span class="ident" id="2764051">Kind</span><span class="op" id="2764055">(</span><span class="op" id="2764056">)</span><span class="op" id="2764057">)</span>&nbsp;<span class="op" id="2764059">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764063">addr1</span>&nbsp;<span class="op" id="2764069">:=</span>&nbsp;<span class="ident" id="2764072">v1</span><span class="op" id="2764074">.</span><span class="ident" id="2764075">UnsafeAddr</span><span class="op" id="2764085">(</span><span class="op" id="2764086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764090">addr2</span>&nbsp;<span class="op" id="2764096">:=</span>&nbsp;<span class="ident" id="2764099">v2</span><span class="op" id="2764101">.</span><span class="ident" id="2764102">UnsafeAddr</span><span class="op" id="2764112">(</span><span class="op" id="2764113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764117">if</span>&nbsp;<span class="ident" id="2764120">addr1</span>&nbsp;<span class="op" id="2764126">&gt;</span>&nbsp;<span class="ident" id="2764128">addr2</span>&nbsp;<span class="op" id="2764134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2764139">//&nbsp;Canonicalize&nbsp;order&nbsp;to&nbsp;reduce&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;visited.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764204">addr1</span><span class="op" id="2764209">,</span>&nbsp;<span class="ident" id="2764211">addr2</span>&nbsp;<span class="op" id="2764217">=</span>&nbsp;<span class="ident" id="2764219">addr2</span><span class="op" id="2764224">,</span>&nbsp;<span class="ident" id="2764226">addr1</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2764239">//&nbsp;Short&nbsp;circuit&nbsp;if&nbsp;references&nbsp;are&nbsp;identical&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764290">if</span>&nbsp;<span class="ident" id="2764293">addr1</span>&nbsp;<span class="op" id="2764299">==</span>&nbsp;<span class="ident" id="2764302">addr2</span>&nbsp;<span class="op" id="2764308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764313">return</span>&nbsp;<span class="builtintype" id="2764320">true</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2764332">//&nbsp;...&nbsp;or&nbsp;already&nbsp;seen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764357">typ</span>&nbsp;<span class="op" id="2764361">:=</span>&nbsp;<span class="ident" id="2764364">v1</span><span class="op" id="2764366">.</span><span class="ident" id="2764367">Type</span><span class="op" id="2764371">(</span><span class="op" id="2764372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764376">v</span>&nbsp;<span class="op" id="2764378">:=</span>&nbsp;<span class="ident" id="2764381">visit</span><span class="op" id="2764386">{</span><span class="ident" id="2764387">addr1</span><span class="op" id="2764392">,</span>&nbsp;<span class="ident" id="2764394">addr2</span><span class="op" id="2764399">,</span>&nbsp;<span class="ident" id="2764401">typ</span><span class="op" id="2764404">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764408">if</span>&nbsp;<span class="ident" id="2764411">visited</span><span class="op" id="2764418">[</span><span class="ident" id="2764419">v</span><span class="op" id="2764420">]</span>&nbsp;<span class="op" id="2764422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764427">return</span>&nbsp;<span class="builtintype" id="2764434">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2764446">//&nbsp;Remember&nbsp;for&nbsp;later.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764471">visited</span><span class="op" id="2764478">[</span><span class="ident" id="2764479">v</span><span class="op" id="2764480">]</span>&nbsp;<span class="op" id="2764482">=</span>&nbsp;<span class="builtintype" id="2764484">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764494">switch</span>&nbsp;<span class="ident" id="2764501">v1</span><span class="op" id="2764503">.</span><span class="ident" id="2764504">Kind</span><span class="op" id="2764508">(</span><span class="op" id="2764509">)</span>&nbsp;<span class="op" id="2764511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764514">case</span>&nbsp;<span class="ident" id="2764519">Array</span><span class="op" id="2764524">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764528">for</span>&nbsp;<span class="ident" id="2764532">i</span>&nbsp;<span class="op" id="2764534">:=</span>&nbsp;<span class="num" id="2764537">0</span><span class="op" id="2764538">;</span>&nbsp;<span class="ident" id="2764540">i</span>&nbsp;<span class="op" id="2764542">&lt;</span>&nbsp;<span class="ident" id="2764544">v1</span><span class="op" id="2764546">.</span><span class="ident" id="2764547">Len</span><span class="op" id="2764550">(</span><span class="op" id="2764551">)</span><span class="op" id="2764552">;</span>&nbsp;<span class="ident" id="2764554">i</span><span class="op" id="2764555">++</span>&nbsp;<span class="op" id="2764558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764563">if</span>&nbsp;<span class="op" id="2764566">!</span><span class="ident" id="2764567">deepValueEqual</span><span class="op" id="2764581">(</span><span class="ident" id="2764582">v1</span><span class="op" id="2764584">.</span><span class="ident" id="2764585">Index</span><span class="op" id="2764590">(</span><span class="ident" id="2764591">i</span><span class="op" id="2764592">)</span><span class="op" id="2764593">,</span>&nbsp;<span class="ident" id="2764595">v2</span><span class="op" id="2764597">.</span><span class="ident" id="2764598">Index</span><span class="op" id="2764603">(</span><span class="ident" id="2764604">i</span><span class="op" id="2764605">)</span><span class="op" id="2764606">,</span>&nbsp;<span class="ident" id="2764608">visited</span><span class="op" id="2764615">,</span>&nbsp;<span class="ident" id="2764617">depth</span><span class="op" id="2764622">+</span><span class="num" id="2764623">1</span><span class="op" id="2764624">)</span>&nbsp;<span class="op" id="2764626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764632">return</span>&nbsp;<span class="builtintype" id="2764639">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764652">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764656">return</span>&nbsp;<span class="builtintype" id="2764663">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764669">case</span>&nbsp;<span class="ident" id="2764674">Slice</span><span class="op" id="2764679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764683">if</span>&nbsp;<span class="ident" id="2764686">v1</span><span class="op" id="2764688">.</span><span class="ident" id="2764689">IsNil</span><span class="op" id="2764694">(</span><span class="op" id="2764695">)</span>&nbsp;<span class="op" id="2764697">!=</span>&nbsp;<span class="ident" id="2764700">v2</span><span class="op" id="2764702">.</span><span class="ident" id="2764703">IsNil</span><span class="op" id="2764708">(</span><span class="op" id="2764709">)</span>&nbsp;<span class="op" id="2764711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764716">return</span>&nbsp;<span class="builtintype" id="2764723">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764731">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764735">if</span>&nbsp;<span class="ident" id="2764738">v1</span><span class="op" id="2764740">.</span><span class="ident" id="2764741">Len</span><span class="op" id="2764744">(</span><span class="op" id="2764745">)</span>&nbsp;<span class="op" id="2764747">!=</span>&nbsp;<span class="ident" id="2764750">v2</span><span class="op" id="2764752">.</span><span class="ident" id="2764753">Len</span><span class="op" id="2764756">(</span><span class="op" id="2764757">)</span>&nbsp;<span class="op" id="2764759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764764">return</span>&nbsp;<span class="builtintype" id="2764771">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764783">if</span>&nbsp;<span class="ident" id="2764786">v1</span><span class="op" id="2764788">.</span><span class="ident" id="2764789">Pointer</span><span class="op" id="2764796">(</span><span class="op" id="2764797">)</span>&nbsp;<span class="op" id="2764799">==</span>&nbsp;<span class="ident" id="2764802">v2</span><span class="op" id="2764804">.</span><span class="ident" id="2764805">Pointer</span><span class="op" id="2764812">(</span><span class="op" id="2764813">)</span>&nbsp;<span class="op" id="2764815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764820">return</span>&nbsp;<span class="builtintype" id="2764827">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764838">for</span>&nbsp;<span class="ident" id="2764842">i</span>&nbsp;<span class="op" id="2764844">:=</span>&nbsp;<span class="num" id="2764847">0</span><span class="op" id="2764848">;</span>&nbsp;<span class="ident" id="2764850">i</span>&nbsp;<span class="op" id="2764852">&lt;</span>&nbsp;<span class="ident" id="2764854">v1</span><span class="op" id="2764856">.</span><span class="ident" id="2764857">Len</span><span class="op" id="2764860">(</span><span class="op" id="2764861">)</span><span class="op" id="2764862">;</span>&nbsp;<span class="ident" id="2764864">i</span><span class="op" id="2764865">++</span>&nbsp;<span class="op" id="2764868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764873">if</span>&nbsp;<span class="op" id="2764876">!</span><span class="ident" id="2764877">deepValueEqual</span><span class="op" id="2764891">(</span><span class="ident" id="2764892">v1</span><span class="op" id="2764894">.</span><span class="ident" id="2764895">Index</span><span class="op" id="2764900">(</span><span class="ident" id="2764901">i</span><span class="op" id="2764902">)</span><span class="op" id="2764903">,</span>&nbsp;<span class="ident" id="2764905">v2</span><span class="op" id="2764907">.</span><span class="ident" id="2764908">Index</span><span class="op" id="2764913">(</span><span class="ident" id="2764914">i</span><span class="op" id="2764915">)</span><span class="op" id="2764916">,</span>&nbsp;<span class="ident" id="2764918">visited</span><span class="op" id="2764925">,</span>&nbsp;<span class="ident" id="2764927">depth</span><span class="op" id="2764932">+</span><span class="num" id="2764933">1</span><span class="op" id="2764934">)</span>&nbsp;<span class="op" id="2764936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764942">return</span>&nbsp;<span class="builtintype" id="2764949">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764958">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764966">return</span>&nbsp;<span class="builtintype" id="2764973">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764979">case</span>&nbsp;<span class="ident" id="2764984">Interface</span><span class="op" id="2764993">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764997">if</span>&nbsp;<span class="ident" id="2765000">v1</span><span class="op" id="2765002">.</span><span class="ident" id="2765003">IsNil</span><span class="op" id="2765008">(</span><span class="op" id="2765009">)</span>&nbsp;<span class="op" id="2765011">||</span>&nbsp;<span class="ident" id="2765014">v2</span><span class="op" id="2765016">.</span><span class="ident" id="2765017">IsNil</span><span class="op" id="2765022">(</span><span class="op" id="2765023">)</span>&nbsp;<span class="op" id="2765025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765030">return</span>&nbsp;<span class="ident" id="2765037">v1</span><span class="op" id="2765039">.</span><span class="ident" id="2765040">IsNil</span><span class="op" id="2765045">(</span><span class="op" id="2765046">)</span>&nbsp;<span class="op" id="2765048">==</span>&nbsp;<span class="ident" id="2765051">v2</span><span class="op" id="2765053">.</span><span class="ident" id="2765054">IsNil</span><span class="op" id="2765059">(</span><span class="op" id="2765060">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765068">return</span>&nbsp;<span class="ident" id="2765075">deepValueEqual</span><span class="op" id="2765089">(</span><span class="ident" id="2765090">v1</span><span class="op" id="2765092">.</span><span class="ident" id="2765093">Elem</span><span class="op" id="2765097">(</span><span class="op" id="2765098">)</span><span class="op" id="2765099">,</span>&nbsp;<span class="ident" id="2765101">v2</span><span class="op" id="2765103">.</span><span class="ident" id="2765104">Elem</span><span class="op" id="2765108">(</span><span class="op" id="2765109">)</span><span class="op" id="2765110">,</span>&nbsp;<span class="ident" id="2765112">visited</span><span class="op" id="2765119">,</span>&nbsp;<span class="ident" id="2765121">depth</span><span class="op" id="2765126">+</span><span class="num" id="2765127">1</span><span class="op" id="2765128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765131">case</span>&nbsp;<span class="ident" id="2765136">Ptr</span><span class="op" id="2765139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765143">return</span>&nbsp;<span class="ident" id="2765150">deepValueEqual</span><span class="op" id="2765164">(</span><span class="ident" id="2765165">v1</span><span class="op" id="2765167">.</span><span class="ident" id="2765168">Elem</span><span class="op" id="2765172">(</span><span class="op" id="2765173">)</span><span class="op" id="2765174">,</span>&nbsp;<span class="ident" id="2765176">v2</span><span class="op" id="2765178">.</span><span class="ident" id="2765179">Elem</span><span class="op" id="2765183">(</span><span class="op" id="2765184">)</span><span class="op" id="2765185">,</span>&nbsp;<span class="ident" id="2765187">visited</span><span class="op" id="2765194">,</span>&nbsp;<span class="ident" id="2765196">depth</span><span class="op" id="2765201">+</span><span class="num" id="2765202">1</span><span class="op" id="2765203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765206">case</span>&nbsp;<span class="ident" id="2765211">Struct</span><span class="op" id="2765217">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765221">for</span>&nbsp;<span class="ident" id="2765225">i</span><span class="op" id="2765226">,</span>&nbsp;<span class="ident" id="2765228">n</span>&nbsp;<span class="op" id="2765230">:=</span>&nbsp;<span class="num" id="2765233">0</span><span class="op" id="2765234">,</span>&nbsp;<span class="ident" id="2765236">v1</span><span class="op" id="2765238">.</span><span class="ident" id="2765239">NumField</span><span class="op" id="2765247">(</span><span class="op" id="2765248">)</span><span class="op" id="2765249">;</span>&nbsp;<span class="ident" id="2765251">i</span>&nbsp;<span class="op" id="2765253">&lt;</span>&nbsp;<span class="ident" id="2765255">n</span><span class="op" id="2765256">;</span>&nbsp;<span class="ident" id="2765258">i</span><span class="op" id="2765259">++</span>&nbsp;<span class="op" id="2765262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765267">if</span>&nbsp;<span class="op" id="2765270">!</span><span class="ident" id="2765271">deepValueEqual</span><span class="op" id="2765285">(</span><span class="ident" id="2765286">v1</span><span class="op" id="2765288">.</span><span class="ident" id="2765289">Field</span><span class="op" id="2765294">(</span><span class="ident" id="2765295">i</span><span class="op" id="2765296">)</span><span class="op" id="2765297">,</span>&nbsp;<span class="ident" id="2765299">v2</span><span class="op" id="2765301">.</span><span class="ident" id="2765302">Field</span><span class="op" id="2765307">(</span><span class="ident" id="2765308">i</span><span class="op" id="2765309">)</span><span class="op" id="2765310">,</span>&nbsp;<span class="ident" id="2765312">visited</span><span class="op" id="2765319">,</span>&nbsp;<span class="ident" id="2765321">depth</span><span class="op" id="2765326">+</span><span class="num" id="2765327">1</span><span class="op" id="2765328">)</span>&nbsp;<span class="op" id="2765330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765336">return</span>&nbsp;<span class="builtintype" id="2765343">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765356">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765360">return</span>&nbsp;<span class="builtintype" id="2765367">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765373">case</span>&nbsp;<span class="ident" id="2765378">Map</span><span class="op" id="2765381">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765385">if</span>&nbsp;<span class="ident" id="2765388">v1</span><span class="op" id="2765390">.</span><span class="ident" id="2765391">IsNil</span><span class="op" id="2765396">(</span><span class="op" id="2765397">)</span>&nbsp;<span class="op" id="2765399">!=</span>&nbsp;<span class="ident" id="2765402">v2</span><span class="op" id="2765404">.</span><span class="ident" id="2765405">IsNil</span><span class="op" id="2765410">(</span><span class="op" id="2765411">)</span>&nbsp;<span class="op" id="2765413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765418">return</span>&nbsp;<span class="builtintype" id="2765425">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765433">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765437">if</span>&nbsp;<span class="ident" id="2765440">v1</span><span class="op" id="2765442">.</span><span class="ident" id="2765443">Len</span><span class="op" id="2765446">(</span><span class="op" id="2765447">)</span>&nbsp;<span class="op" id="2765449">!=</span>&nbsp;<span class="ident" id="2765452">v2</span><span class="op" id="2765454">.</span><span class="ident" id="2765455">Len</span><span class="op" id="2765458">(</span><span class="op" id="2765459">)</span>&nbsp;<span class="op" id="2765461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765466">return</span>&nbsp;<span class="builtintype" id="2765473">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765485">if</span>&nbsp;<span class="ident" id="2765488">v1</span><span class="op" id="2765490">.</span><span class="ident" id="2765491">Pointer</span><span class="op" id="2765498">(</span><span class="op" id="2765499">)</span>&nbsp;<span class="op" id="2765501">==</span>&nbsp;<span class="ident" id="2765504">v2</span><span class="op" id="2765506">.</span><span class="ident" id="2765507">Pointer</span><span class="op" id="2765514">(</span><span class="op" id="2765515">)</span>&nbsp;<span class="op" id="2765517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765522">return</span>&nbsp;<span class="builtintype" id="2765529">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765540">for</span>&nbsp;<span class="ident" id="2765544">_</span><span class="op" id="2765545">,</span>&nbsp;<span class="ident" id="2765547">k</span>&nbsp;<span class="op" id="2765549">:=</span>&nbsp;<span class="keyword" id="2765552">range</span>&nbsp;<span class="ident" id="2765558">v1</span><span class="op" id="2765560">.</span><span class="ident" id="2765561">MapKeys</span><span class="op" id="2765568">(</span><span class="op" id="2765569">)</span>&nbsp;<span class="op" id="2765571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765576">if</span>&nbsp;<span class="op" id="2765579">!</span><span class="ident" id="2765580">deepValueEqual</span><span class="op" id="2765594">(</span><span class="ident" id="2765595">v1</span><span class="op" id="2765597">.</span><span class="ident" id="2765598">MapIndex</span><span class="op" id="2765606">(</span><span class="ident" id="2765607">k</span><span class="op" id="2765608">)</span><span class="op" id="2765609">,</span>&nbsp;<span class="ident" id="2765611">v2</span><span class="op" id="2765613">.</span><span class="ident" id="2765614">MapIndex</span><span class="op" id="2765622">(</span><span class="ident" id="2765623">k</span><span class="op" id="2765624">)</span><span class="op" id="2765625">,</span>&nbsp;<span class="ident" id="2765627">visited</span><span class="op" id="2765634">,</span>&nbsp;<span class="ident" id="2765636">depth</span><span class="op" id="2765641">+</span><span class="num" id="2765642">1</span><span class="op" id="2765643">)</span>&nbsp;<span class="op" id="2765645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765651">return</span>&nbsp;<span class="builtintype" id="2765658">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765667">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765675">return</span>&nbsp;<span class="builtintype" id="2765682">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765688">case</span>&nbsp;<span class="ident" id="2765693">Func</span><span class="op" id="2765697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765701">if</span>&nbsp;<span class="ident" id="2765704">v1</span><span class="op" id="2765706">.</span><span class="ident" id="2765707">IsNil</span><span class="op" id="2765712">(</span><span class="op" id="2765713">)</span>&nbsp;<span class="op" id="2765715">&amp;&amp;</span>&nbsp;<span class="ident" id="2765718">v2</span><span class="op" id="2765720">.</span><span class="ident" id="2765721">IsNil</span><span class="op" id="2765726">(</span><span class="op" id="2765727">)</span>&nbsp;<span class="op" id="2765729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765734">return</span>&nbsp;<span class="builtintype" id="2765741">true</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2765752">//&nbsp;Can&#39;t&nbsp;do&nbsp;better&nbsp;than&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765784">return</span>&nbsp;<span class="builtintype" id="2765791">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765798">default</span><span class="op" id="2765805">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2765809">//&nbsp;Normal&nbsp;equality&nbsp;suffices</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765839">return</span>&nbsp;<span class="ident" id="2765846">valueInterface</span><span class="op" id="2765860">(</span><span class="ident" id="2765861">v1</span><span class="op" id="2765863">,</span>&nbsp;<span class="builtintype" id="2765865">false</span><span class="op" id="2765870">)</span>&nbsp;<span class="op" id="2765872">==</span>&nbsp;<span class="ident" id="2765875">valueInterface</span><span class="op" id="2765889">(</span><span class="ident" id="2765890">v2</span><span class="op" id="2765892">,</span>&nbsp;<span class="builtintype" id="2765894">false</span><span class="op" id="2765899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765902">}</span><br>
<span class="lineno"></span><span class="op" id="2765904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765907">//&nbsp;DeepEqual&nbsp;tests&nbsp;for&nbsp;deep&nbsp;equality.&nbsp;It&nbsp;uses&nbsp;normal&nbsp;==&nbsp;equality&nbsp;where</span><br>
<span class="lineno">130</span><span class="comment" id="2765978">//&nbsp;possible&nbsp;but&nbsp;will&nbsp;scan&nbsp;elements&nbsp;of&nbsp;arrays,&nbsp;slices,&nbsp;maps,&nbsp;and&nbsp;fields&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2766052">//&nbsp;structs.&nbsp;In&nbsp;maps,&nbsp;keys&nbsp;are&nbsp;compared&nbsp;with&nbsp;==&nbsp;but&nbsp;elements&nbsp;use&nbsp;deep</span><br>
<span class="lineno"></span><span class="comment" id="2766121">//&nbsp;equality.&nbsp;DeepEqual&nbsp;correctly&nbsp;handles&nbsp;recursive&nbsp;types.&nbsp;Functions&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><span class="comment" id="2766199">//&nbsp;only&nbsp;if&nbsp;they&nbsp;are&nbsp;both&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="2766229">//&nbsp;An&nbsp;empty&nbsp;slice&nbsp;is&nbsp;not&nbsp;equal&nbsp;to&nbsp;a&nbsp;nil&nbsp;slice.</span><br>
<span class="lineno">135</span><span class="keyword" id="2766276">func</span>&nbsp;<span class="ident" id="2766281">DeepEqual</span><span class="op" id="2766290">(</span><span class="ident" id="2766291">a1</span><span class="op" id="2766293">,</span>&nbsp;<span class="ident" id="2766295">a2</span>&nbsp;<span class="keyword" id="2766298">interface</span><span class="op" id="2766307">{</span><span class="op" id="2766308">}</span><span class="op" id="2766309">)</span>&nbsp;<span class="builtintype" id="2766311">bool</span>&nbsp;<span class="op" id="2766316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766319">if</span>&nbsp;<span class="ident" id="2766322">a1</span>&nbsp;<span class="op" id="2766325">==</span>&nbsp;<span class="builtintype" id="2766328">nil</span>&nbsp;<span class="op" id="2766332">||</span>&nbsp;<span class="ident" id="2766335">a2</span>&nbsp;<span class="op" id="2766338">==</span>&nbsp;<span class="builtintype" id="2766341">nil</span>&nbsp;<span class="op" id="2766345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766349">return</span>&nbsp;<span class="ident" id="2766356">a1</span>&nbsp;<span class="op" id="2766359">==</span>&nbsp;<span class="ident" id="2766362">a2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766369">v1</span>&nbsp;<span class="op" id="2766372">:=</span>&nbsp;<span class="ident" id="2766375">ValueOf</span><span class="op" id="2766382">(</span><span class="ident" id="2766383">a1</span><span class="op" id="2766385">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766388">v2</span>&nbsp;<span class="op" id="2766391">:=</span>&nbsp;<span class="ident" id="2766394">ValueOf</span><span class="op" id="2766401">(</span><span class="ident" id="2766402">a2</span><span class="op" id="2766404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766407">if</span>&nbsp;<span class="ident" id="2766410">v1</span><span class="op" id="2766412">.</span><span class="ident" id="2766413">Type</span><span class="op" id="2766417">(</span><span class="op" id="2766418">)</span>&nbsp;<span class="op" id="2766420">!=</span>&nbsp;<span class="ident" id="2766423">v2</span><span class="op" id="2766425">.</span><span class="ident" id="2766426">Type</span><span class="op" id="2766430">(</span><span class="op" id="2766431">)</span>&nbsp;<span class="op" id="2766433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766437">return</span>&nbsp;<span class="builtintype" id="2766444">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766454">return</span>&nbsp;<span class="ident" id="2766461">deepValueEqual</span><span class="op" id="2766475">(</span><span class="ident" id="2766476">v1</span><span class="op" id="2766478">,</span>&nbsp;<span class="ident" id="2766480">v2</span><span class="op" id="2766482">,</span>&nbsp;<span class="builtinfunc" id="2766484">make</span><span class="op" id="2766488">(</span><span class="keyword" id="2766489">map</span><span class="op" id="2766492">[</span><span class="ident" id="2766493">visit</span><span class="op" id="2766498">]</span><span class="builtintype" id="2766499">bool</span><span class="op" id="2766503">)</span><span class="op" id="2766504">,</span>&nbsp;<span class="num" id="2766506">0</span><span class="op" id="2766507">)</span><br>
<span class="lineno">145</span><span class="op" id="2766509">}</span>
</div>
</body>
</html>
