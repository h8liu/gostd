<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8101138">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8101194">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8101248">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8101299">//&nbsp;Large&nbsp;data&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="8101324">//&nbsp;The&nbsp;JSON&nbsp;data&nbsp;is&nbsp;a&nbsp;summary&nbsp;of&nbsp;agl&#39;s&nbsp;changes&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8101378">//&nbsp;go,&nbsp;webkit,&nbsp;and&nbsp;chromium&nbsp;open&nbsp;source&nbsp;projects.</span><br>
<span class="lineno"></span><span class="comment" id="8101428">//&nbsp;We&nbsp;benchmark&nbsp;converting&nbsp;between&nbsp;the&nbsp;JSON&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="8101477">//&nbsp;and&nbsp;in-memory&nbsp;data&nbsp;structures.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8101512">package</span>&nbsp;<span class="ident" id="8101520">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8101526">import</span>&nbsp;<span class="op" id="8101533">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8101536">&#34;bytes&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8101545">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8101562">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8101575">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8101581">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8101591">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8101594">type</span>&nbsp;<span class="ident" id="8101599">codeResponse</span>&nbsp;<span class="keyword" id="8101612">struct</span>&nbsp;<span class="op" id="8101619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101622">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101631">*</span><span class="ident" id="8101632">codeNode</span>&nbsp;<span class="string" id="8101641">`json:&#34;tree&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101656">Username</span>&nbsp;<span class="builtintype" id="8101665">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8101675">`json:&#34;username&#34;`</span><br>
<span class="lineno"></span><span class="op" id="8101693">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8101696">type</span>&nbsp;<span class="ident" id="8101701">codeNode</span>&nbsp;<span class="keyword" id="8101710">struct</span>&nbsp;<span class="op" id="8101717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101720">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8101729">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8101741">`json:&#34;name&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101756">Kids</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101765">[</span><span class="op" id="8101766">]</span><span class="op" id="8101767">*</span><span class="ident" id="8101768">codeNode</span>&nbsp;<span class="string" id="8101777">`json:&#34;kids&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101792">CLWeight</span>&nbsp;<span class="builtintype" id="8101801">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8101813">`json:&#34;cl_weight&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101833">Touches</span>&nbsp;&nbsp;<span class="builtintype" id="8101842">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8101854">`json:&#34;touches&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101872">MinT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8101881">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8101893">`json:&#34;min_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101909">MaxT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8101918">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8101930">`json:&#34;max_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101946">MeanT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8101955">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8101967">`json:&#34;mean_t&#34;`</span><br>
<span class="lineno"></span><span class="op" id="8101983">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8101986">var</span>&nbsp;<span class="ident" id="8101990">codeJSON</span>&nbsp;<span class="op" id="8101999">[</span><span class="op" id="8102000">]</span><span class="builtintype" id="8102001">byte</span><br>
<span class="lineno"></span><span class="keyword" id="8102006">var</span>&nbsp;<span class="ident" id="8102010">codeStruct</span>&nbsp;<span class="ident" id="8102021">codeResponse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8102035">func</span>&nbsp;<span class="ident" id="8102040">codeInit</span><span class="op" id="8102048">(</span><span class="op" id="8102049">)</span>&nbsp;<span class="op" id="8102051">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102054">f</span><span class="op" id="8102055">,</span>&nbsp;<span class="ident" id="8102057">err</span>&nbsp;<span class="op" id="8102061">:=</span>&nbsp;<span class="ident" id="8102064">os</span><span class="op" id="8102066">.</span><span class="ident" id="8102067">Open</span><span class="op" id="8102071">(</span><span class="string" id="8102072">&#34;testdata/code.json.gz&#34;</span><span class="op" id="8102095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102098">if</span>&nbsp;<span class="ident" id="8102101">err</span>&nbsp;<span class="op" id="8102105">!=</span>&nbsp;<span class="ident" id="8102108">nil</span>&nbsp;<span class="op" id="8102112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102116">panic</span><span class="op" id="8102121">(</span><span class="ident" id="8102122">err</span><span class="op" id="8102125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102131">defer</span>&nbsp;<span class="ident" id="8102137">f</span><span class="op" id="8102138">.</span><span class="ident" id="8102139">Close</span><span class="op" id="8102144">(</span><span class="op" id="8102145">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102148">gz</span><span class="op" id="8102150">,</span>&nbsp;<span class="ident" id="8102152">err</span>&nbsp;<span class="op" id="8102156">:=</span>&nbsp;<span class="ident" id="8102159">gzip</span><span class="op" id="8102163">.</span><span class="ident" id="8102164">NewReader</span><span class="op" id="8102173">(</span><span class="ident" id="8102174">f</span><span class="op" id="8102175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102178">if</span>&nbsp;<span class="ident" id="8102181">err</span>&nbsp;<span class="op" id="8102185">!=</span>&nbsp;<span class="ident" id="8102188">nil</span>&nbsp;<span class="op" id="8102192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102196">panic</span><span class="op" id="8102201">(</span><span class="ident" id="8102202">err</span><span class="op" id="8102205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102211">data</span><span class="op" id="8102215">,</span>&nbsp;<span class="ident" id="8102217">err</span>&nbsp;<span class="op" id="8102221">:=</span>&nbsp;<span class="ident" id="8102224">ioutil</span><span class="op" id="8102230">.</span><span class="ident" id="8102231">ReadAll</span><span class="op" id="8102238">(</span><span class="ident" id="8102239">gz</span><span class="op" id="8102241">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102244">if</span>&nbsp;<span class="ident" id="8102247">err</span>&nbsp;<span class="op" id="8102251">!=</span>&nbsp;<span class="ident" id="8102254">nil</span>&nbsp;<span class="op" id="8102258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102262">panic</span><span class="op" id="8102267">(</span><span class="ident" id="8102268">err</span><span class="op" id="8102271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102278">codeJSON</span>&nbsp;<span class="op" id="8102287">=</span>&nbsp;<span class="ident" id="8102289">data</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102296">if</span>&nbsp;<span class="ident" id="8102299">err</span>&nbsp;<span class="op" id="8102303">:=</span>&nbsp;<span class="ident" id="8102306">Unmarshal</span><span class="op" id="8102315">(</span><span class="ident" id="8102316">codeJSON</span><span class="op" id="8102324">,</span>&nbsp;<span class="op" id="8102326">&amp;</span><span class="ident" id="8102327">codeStruct</span><span class="op" id="8102337">)</span><span class="op" id="8102338">;</span>&nbsp;<span class="ident" id="8102340">err</span>&nbsp;<span class="op" id="8102344">!=</span>&nbsp;<span class="ident" id="8102347">nil</span>&nbsp;<span class="op" id="8102351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102355">panic</span><span class="op" id="8102360">(</span><span class="string" id="8102361">&#34;unmarshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="8102385">+</span>&nbsp;<span class="ident" id="8102387">err</span><span class="op" id="8102390">.</span><span class="ident" id="8102391">Error</span><span class="op" id="8102396">(</span><span class="op" id="8102397">)</span><span class="op" id="8102398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102405">if</span>&nbsp;<span class="ident" id="8102408">data</span><span class="op" id="8102412">,</span>&nbsp;<span class="ident" id="8102414">err</span>&nbsp;<span class="op" id="8102418">=</span>&nbsp;<span class="ident" id="8102420">Marshal</span><span class="op" id="8102427">(</span><span class="op" id="8102428">&amp;</span><span class="ident" id="8102429">codeStruct</span><span class="op" id="8102439">)</span><span class="op" id="8102440">;</span>&nbsp;<span class="ident" id="8102442">err</span>&nbsp;<span class="op" id="8102446">!=</span>&nbsp;<span class="ident" id="8102449">nil</span>&nbsp;<span class="op" id="8102453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102457">panic</span><span class="op" id="8102462">(</span><span class="string" id="8102463">&#34;marshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="8102485">+</span>&nbsp;<span class="ident" id="8102487">err</span><span class="op" id="8102490">.</span><span class="ident" id="8102491">Error</span><span class="op" id="8102496">(</span><span class="op" id="8102497">)</span><span class="op" id="8102498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102505">if</span>&nbsp;<span class="op" id="8102508">!</span><span class="ident" id="8102509">bytes</span><span class="op" id="8102514">.</span><span class="ident" id="8102515">Equal</span><span class="op" id="8102520">(</span><span class="ident" id="8102521">data</span><span class="op" id="8102525">,</span>&nbsp;<span class="ident" id="8102527">codeJSON</span><span class="op" id="8102535">)</span>&nbsp;<span class="op" id="8102537">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102541">println</span><span class="op" id="8102548">(</span><span class="string" id="8102549">&#34;different&nbsp;lengths&#34;</span><span class="op" id="8102568">,</span>&nbsp;<span class="builtinfunc" id="8102570">len</span><span class="op" id="8102573">(</span><span class="ident" id="8102574">data</span><span class="op" id="8102578">)</span><span class="op" id="8102579">,</span>&nbsp;<span class="builtinfunc" id="8102581">len</span><span class="op" id="8102584">(</span><span class="ident" id="8102585">codeJSON</span><span class="op" id="8102593">)</span><span class="op" id="8102594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102598">for</span>&nbsp;<span class="ident" id="8102602">i</span>&nbsp;<span class="op" id="8102604">:=</span>&nbsp;<span class="num" id="8102607">0</span><span class="op" id="8102608">;</span>&nbsp;<span class="ident" id="8102610">i</span>&nbsp;<span class="op" id="8102612">&lt;</span>&nbsp;<span class="builtinfunc" id="8102614">len</span><span class="op" id="8102617">(</span><span class="ident" id="8102618">data</span><span class="op" id="8102622">)</span>&nbsp;<span class="op" id="8102624">&amp;&amp;</span>&nbsp;<span class="ident" id="8102627">i</span>&nbsp;<span class="op" id="8102629">&lt;</span>&nbsp;<span class="builtinfunc" id="8102631">len</span><span class="op" id="8102634">(</span><span class="ident" id="8102635">codeJSON</span><span class="op" id="8102643">)</span><span class="op" id="8102644">;</span>&nbsp;<span class="ident" id="8102646">i</span><span class="op" id="8102647">++</span>&nbsp;<span class="op" id="8102650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102655">if</span>&nbsp;<span class="ident" id="8102658">data</span><span class="op" id="8102662">[</span><span class="ident" id="8102663">i</span><span class="op" id="8102664">]</span>&nbsp;<span class="op" id="8102666">!=</span>&nbsp;<span class="ident" id="8102669">codeJSON</span><span class="op" id="8102677">[</span><span class="ident" id="8102678">i</span><span class="op" id="8102679">]</span>&nbsp;<span class="op" id="8102681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102687">println</span><span class="op" id="8102694">(</span><span class="string" id="8102695">&#34;re-marshal:&nbsp;changed&nbsp;at&nbsp;byte&#34;</span><span class="op" id="8102724">,</span>&nbsp;<span class="ident" id="8102726">i</span><span class="op" id="8102727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102733">println</span><span class="op" id="8102740">(</span><span class="string" id="8102741">&#34;orig:&nbsp;&#34;</span><span class="op" id="8102749">,</span>&nbsp;<span class="builtintype" id="8102751">string</span><span class="op" id="8102757">(</span><span class="ident" id="8102758">codeJSON</span><span class="op" id="8102766">[</span><span class="ident" id="8102767">i</span><span class="op" id="8102768">-</span><span class="num" id="8102769">10</span><span class="op" id="8102771">:</span><span class="ident" id="8102772">i</span><span class="op" id="8102773">+</span><span class="num" id="8102774">10</span><span class="op" id="8102776">]</span><span class="op" id="8102777">)</span><span class="op" id="8102778">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102784">println</span><span class="op" id="8102791">(</span><span class="string" id="8102792">&#34;new:&nbsp;&#34;</span><span class="op" id="8102799">,</span>&nbsp;<span class="builtintype" id="8102801">string</span><span class="op" id="8102807">(</span><span class="ident" id="8102808">data</span><span class="op" id="8102812">[</span><span class="ident" id="8102813">i</span><span class="op" id="8102814">-</span><span class="num" id="8102815">10</span><span class="op" id="8102817">:</span><span class="ident" id="8102818">i</span><span class="op" id="8102819">+</span><span class="num" id="8102820">10</span><span class="op" id="8102822">]</span><span class="op" id="8102823">)</span><span class="op" id="8102824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102830">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8102847">panic</span><span class="op" id="8102852">(</span><span class="string" id="8102853">&#34;re-marshal&nbsp;code.json:&nbsp;different&nbsp;result&#34;</span><span class="op" id="8102893">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102896">}</span><br>
<span class="lineno"></span><span class="op" id="8102898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8102901">func</span>&nbsp;<span class="ident" id="8102906">BenchmarkCodeEncoder</span><span class="op" id="8102926">(</span><span class="ident" id="8102927">b</span>&nbsp;<span class="op" id="8102929">*</span><span class="ident" id="8102930">testing</span><span class="op" id="8102937">.</span><span class="ident" id="8102938">B</span><span class="op" id="8102939">)</span>&nbsp;<span class="op" id="8102941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102944">if</span>&nbsp;<span class="ident" id="8102947">codeJSON</span>&nbsp;<span class="op" id="8102956">==</span>&nbsp;<span class="ident" id="8102959">nil</span>&nbsp;<span class="op" id="8102963">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102967">b</span><span class="op" id="8102968">.</span><span class="ident" id="8102969">StopTimer</span><span class="op" id="8102978">(</span><span class="op" id="8102979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102983">codeInit</span><span class="op" id="8102991">(</span><span class="op" id="8102992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102996">b</span><span class="op" id="8102997">.</span><span class="ident" id="8102998">StartTimer</span><span class="op" id="8103008">(</span><span class="op" id="8103009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103015">enc</span>&nbsp;<span class="op" id="8103019">:=</span>&nbsp;<span class="ident" id="8103022">NewEncoder</span><span class="op" id="8103032">(</span><span class="ident" id="8103033">ioutil</span><span class="op" id="8103039">.</span><span class="ident" id="8103040">Discard</span><span class="op" id="8103047">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103050">for</span>&nbsp;<span class="ident" id="8103054">i</span>&nbsp;<span class="op" id="8103056">:=</span>&nbsp;<span class="num" id="8103059">0</span><span class="op" id="8103060">;</span>&nbsp;<span class="ident" id="8103062">i</span>&nbsp;<span class="op" id="8103064">&lt;</span>&nbsp;<span class="ident" id="8103066">b</span><span class="op" id="8103067">.</span><span class="ident" id="8103068">N</span><span class="op" id="8103069">;</span>&nbsp;<span class="ident" id="8103071">i</span><span class="op" id="8103072">++</span>&nbsp;<span class="op" id="8103075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103079">if</span>&nbsp;<span class="ident" id="8103082">err</span>&nbsp;<span class="op" id="8103086">:=</span>&nbsp;<span class="ident" id="8103089">enc</span><span class="op" id="8103092">.</span><span class="ident" id="8103093">Encode</span><span class="op" id="8103099">(</span><span class="op" id="8103100">&amp;</span><span class="ident" id="8103101">codeStruct</span><span class="op" id="8103111">)</span><span class="op" id="8103112">;</span>&nbsp;<span class="ident" id="8103114">err</span>&nbsp;<span class="op" id="8103118">!=</span>&nbsp;<span class="ident" id="8103121">nil</span>&nbsp;<span class="op" id="8103125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103130">b</span><span class="op" id="8103131">.</span><span class="ident" id="8103132">Fatal</span><span class="op" id="8103137">(</span><span class="string" id="8103138">&#34;Encode:&#34;</span><span class="op" id="8103147">,</span>&nbsp;<span class="ident" id="8103149">err</span><span class="op" id="8103152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103159">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103162">b</span><span class="op" id="8103163">.</span><span class="ident" id="8103164">SetBytes</span><span class="op" id="8103172">(</span><span class="ident" id="8103173">int64</span><span class="op" id="8103178">(</span><span class="builtinfunc" id="8103179">len</span><span class="op" id="8103182">(</span><span class="ident" id="8103183">codeJSON</span><span class="op" id="8103191">)</span><span class="op" id="8103192">)</span><span class="op" id="8103193">)</span><br>
<span class="lineno"></span><span class="op" id="8103195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8103198">func</span>&nbsp;<span class="ident" id="8103203">BenchmarkCodeMarshal</span><span class="op" id="8103223">(</span><span class="ident" id="8103224">b</span>&nbsp;<span class="op" id="8103226">*</span><span class="ident" id="8103227">testing</span><span class="op" id="8103234">.</span><span class="ident" id="8103235">B</span><span class="op" id="8103236">)</span>&nbsp;<span class="op" id="8103238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103241">if</span>&nbsp;<span class="ident" id="8103244">codeJSON</span>&nbsp;<span class="op" id="8103253">==</span>&nbsp;<span class="ident" id="8103256">nil</span>&nbsp;<span class="op" id="8103260">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103264">b</span><span class="op" id="8103265">.</span><span class="ident" id="8103266">StopTimer</span><span class="op" id="8103275">(</span><span class="op" id="8103276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103280">codeInit</span><span class="op" id="8103288">(</span><span class="op" id="8103289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103293">b</span><span class="op" id="8103294">.</span><span class="ident" id="8103295">StartTimer</span><span class="op" id="8103305">(</span><span class="op" id="8103306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103312">for</span>&nbsp;<span class="ident" id="8103316">i</span>&nbsp;<span class="op" id="8103318">:=</span>&nbsp;<span class="num" id="8103321">0</span><span class="op" id="8103322">;</span>&nbsp;<span class="ident" id="8103324">i</span>&nbsp;<span class="op" id="8103326">&lt;</span>&nbsp;<span class="ident" id="8103328">b</span><span class="op" id="8103329">.</span><span class="ident" id="8103330">N</span><span class="op" id="8103331">;</span>&nbsp;<span class="ident" id="8103333">i</span><span class="op" id="8103334">++</span>&nbsp;<span class="op" id="8103337">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103341">if</span>&nbsp;<span class="ident" id="8103344">_</span><span class="op" id="8103345">,</span>&nbsp;<span class="ident" id="8103347">err</span>&nbsp;<span class="op" id="8103351">:=</span>&nbsp;<span class="ident" id="8103354">Marshal</span><span class="op" id="8103361">(</span><span class="op" id="8103362">&amp;</span><span class="ident" id="8103363">codeStruct</span><span class="op" id="8103373">)</span><span class="op" id="8103374">;</span>&nbsp;<span class="ident" id="8103376">err</span>&nbsp;<span class="op" id="8103380">!=</span>&nbsp;<span class="ident" id="8103383">nil</span>&nbsp;<span class="op" id="8103387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103392">b</span><span class="op" id="8103393">.</span><span class="ident" id="8103394">Fatal</span><span class="op" id="8103399">(</span><span class="string" id="8103400">&#34;Marshal:&#34;</span><span class="op" id="8103410">,</span>&nbsp;<span class="ident" id="8103412">err</span><span class="op" id="8103415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103425">b</span><span class="op" id="8103426">.</span><span class="ident" id="8103427">SetBytes</span><span class="op" id="8103435">(</span><span class="ident" id="8103436">int64</span><span class="op" id="8103441">(</span><span class="builtinfunc" id="8103442">len</span><span class="op" id="8103445">(</span><span class="ident" id="8103446">codeJSON</span><span class="op" id="8103454">)</span><span class="op" id="8103455">)</span><span class="op" id="8103456">)</span><br>
<span class="lineno">105</span><span class="op" id="8103458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8103461">func</span>&nbsp;<span class="ident" id="8103466">BenchmarkCodeDecoder</span><span class="op" id="8103486">(</span><span class="ident" id="8103487">b</span>&nbsp;<span class="op" id="8103489">*</span><span class="ident" id="8103490">testing</span><span class="op" id="8103497">.</span><span class="ident" id="8103498">B</span><span class="op" id="8103499">)</span>&nbsp;<span class="op" id="8103501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103504">if</span>&nbsp;<span class="ident" id="8103507">codeJSON</span>&nbsp;<span class="op" id="8103516">==</span>&nbsp;<span class="ident" id="8103519">nil</span>&nbsp;<span class="op" id="8103523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103527">b</span><span class="op" id="8103528">.</span><span class="ident" id="8103529">StopTimer</span><span class="op" id="8103538">(</span><span class="op" id="8103539">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103543">codeInit</span><span class="op" id="8103551">(</span><span class="op" id="8103552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103556">b</span><span class="op" id="8103557">.</span><span class="ident" id="8103558">StartTimer</span><span class="op" id="8103568">(</span><span class="op" id="8103569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103575">var</span>&nbsp;<span class="ident" id="8103579">buf</span>&nbsp;<span class="ident" id="8103583">bytes</span><span class="op" id="8103588">.</span><span class="ident" id="8103589">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103597">dec</span>&nbsp;<span class="op" id="8103601">:=</span>&nbsp;<span class="ident" id="8103604">NewDecoder</span><span class="op" id="8103614">(</span><span class="op" id="8103615">&amp;</span><span class="ident" id="8103616">buf</span><span class="op" id="8103619">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103622">var</span>&nbsp;<span class="ident" id="8103626">r</span>&nbsp;<span class="ident" id="8103628">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103642">for</span>&nbsp;<span class="ident" id="8103646">i</span>&nbsp;<span class="op" id="8103648">:=</span>&nbsp;<span class="num" id="8103651">0</span><span class="op" id="8103652">;</span>&nbsp;<span class="ident" id="8103654">i</span>&nbsp;<span class="op" id="8103656">&lt;</span>&nbsp;<span class="ident" id="8103658">b</span><span class="op" id="8103659">.</span><span class="ident" id="8103660">N</span><span class="op" id="8103661">;</span>&nbsp;<span class="ident" id="8103663">i</span><span class="op" id="8103664">++</span>&nbsp;<span class="op" id="8103667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103671">buf</span><span class="op" id="8103674">.</span><span class="ident" id="8103675">Write</span><span class="op" id="8103680">(</span><span class="ident" id="8103681">codeJSON</span><span class="op" id="8103689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8103693">//&nbsp;hide&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103707">buf</span><span class="op" id="8103710">.</span><span class="ident" id="8103711">WriteByte</span><span class="op" id="8103720">(</span><span class="string" id="8103721">&#39;\n&#39;</span><span class="op" id="8103725">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103729">buf</span><span class="op" id="8103732">.</span><span class="ident" id="8103733">WriteByte</span><span class="op" id="8103742">(</span><span class="string" id="8103743">&#39;\n&#39;</span><span class="op" id="8103747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103751">buf</span><span class="op" id="8103754">.</span><span class="ident" id="8103755">WriteByte</span><span class="op" id="8103764">(</span><span class="string" id="8103765">&#39;\n&#39;</span><span class="op" id="8103769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103773">if</span>&nbsp;<span class="ident" id="8103776">err</span>&nbsp;<span class="op" id="8103780">:=</span>&nbsp;<span class="ident" id="8103783">dec</span><span class="op" id="8103786">.</span><span class="ident" id="8103787">Decode</span><span class="op" id="8103793">(</span><span class="op" id="8103794">&amp;</span><span class="ident" id="8103795">r</span><span class="op" id="8103796">)</span><span class="op" id="8103797">;</span>&nbsp;<span class="ident" id="8103799">err</span>&nbsp;<span class="op" id="8103803">!=</span>&nbsp;<span class="ident" id="8103806">nil</span>&nbsp;<span class="op" id="8103810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103815">b</span><span class="op" id="8103816">.</span><span class="ident" id="8103817">Fatal</span><span class="op" id="8103822">(</span><span class="string" id="8103823">&#34;Decode:&#34;</span><span class="op" id="8103832">,</span>&nbsp;<span class="ident" id="8103834">err</span><span class="op" id="8103837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103841">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103847">b</span><span class="op" id="8103848">.</span><span class="ident" id="8103849">SetBytes</span><span class="op" id="8103857">(</span><span class="ident" id="8103858">int64</span><span class="op" id="8103863">(</span><span class="builtinfunc" id="8103864">len</span><span class="op" id="8103867">(</span><span class="ident" id="8103868">codeJSON</span><span class="op" id="8103876">)</span><span class="op" id="8103877">)</span><span class="op" id="8103878">)</span><br>
<span class="lineno"></span><span class="op" id="8103880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8103883">func</span>&nbsp;<span class="ident" id="8103888">BenchmarkCodeUnmarshal</span><span class="op" id="8103910">(</span><span class="ident" id="8103911">b</span>&nbsp;<span class="op" id="8103913">*</span><span class="ident" id="8103914">testing</span><span class="op" id="8103921">.</span><span class="ident" id="8103922">B</span><span class="op" id="8103923">)</span>&nbsp;<span class="op" id="8103925">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103928">if</span>&nbsp;<span class="ident" id="8103931">codeJSON</span>&nbsp;<span class="op" id="8103940">==</span>&nbsp;<span class="ident" id="8103943">nil</span>&nbsp;<span class="op" id="8103947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103951">b</span><span class="op" id="8103952">.</span><span class="ident" id="8103953">StopTimer</span><span class="op" id="8103962">(</span><span class="op" id="8103963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103967">codeInit</span><span class="op" id="8103975">(</span><span class="op" id="8103976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103980">b</span><span class="op" id="8103981">.</span><span class="ident" id="8103982">StartTimer</span><span class="op" id="8103992">(</span><span class="op" id="8103993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103996">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103999">for</span>&nbsp;<span class="ident" id="8104003">i</span>&nbsp;<span class="op" id="8104005">:=</span>&nbsp;<span class="num" id="8104008">0</span><span class="op" id="8104009">;</span>&nbsp;<span class="ident" id="8104011">i</span>&nbsp;<span class="op" id="8104013">&lt;</span>&nbsp;<span class="ident" id="8104015">b</span><span class="op" id="8104016">.</span><span class="ident" id="8104017">N</span><span class="op" id="8104018">;</span>&nbsp;<span class="ident" id="8104020">i</span><span class="op" id="8104021">++</span>&nbsp;<span class="op" id="8104024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104028">var</span>&nbsp;<span class="ident" id="8104032">r</span>&nbsp;<span class="ident" id="8104034">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104049">if</span>&nbsp;<span class="ident" id="8104052">err</span>&nbsp;<span class="op" id="8104056">:=</span>&nbsp;<span class="ident" id="8104059">Unmarshal</span><span class="op" id="8104068">(</span><span class="ident" id="8104069">codeJSON</span><span class="op" id="8104077">,</span>&nbsp;<span class="op" id="8104079">&amp;</span><span class="ident" id="8104080">r</span><span class="op" id="8104081">)</span><span class="op" id="8104082">;</span>&nbsp;<span class="ident" id="8104084">err</span>&nbsp;<span class="op" id="8104088">!=</span>&nbsp;<span class="ident" id="8104091">nil</span>&nbsp;<span class="op" id="8104095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104100">b</span><span class="op" id="8104101">.</span><span class="ident" id="8104102">Fatal</span><span class="op" id="8104107">(</span><span class="string" id="8104108">&#34;Unmmarshal:&#34;</span><span class="op" id="8104121">,</span>&nbsp;<span class="ident" id="8104123">err</span><span class="op" id="8104126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104130">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104136">b</span><span class="op" id="8104137">.</span><span class="ident" id="8104138">SetBytes</span><span class="op" id="8104146">(</span><span class="ident" id="8104147">int64</span><span class="op" id="8104152">(</span><span class="builtinfunc" id="8104153">len</span><span class="op" id="8104156">(</span><span class="ident" id="8104157">codeJSON</span><span class="op" id="8104165">)</span><span class="op" id="8104166">)</span><span class="op" id="8104167">)</span><br>
<span class="lineno"></span><span class="op" id="8104169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8104172">func</span>&nbsp;<span class="ident" id="8104177">BenchmarkCodeUnmarshalReuse</span><span class="op" id="8104204">(</span><span class="ident" id="8104205">b</span>&nbsp;<span class="op" id="8104207">*</span><span class="ident" id="8104208">testing</span><span class="op" id="8104215">.</span><span class="ident" id="8104216">B</span><span class="op" id="8104217">)</span>&nbsp;<span class="op" id="8104219">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104222">if</span>&nbsp;<span class="ident" id="8104225">codeJSON</span>&nbsp;<span class="op" id="8104234">==</span>&nbsp;<span class="ident" id="8104237">nil</span>&nbsp;<span class="op" id="8104241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104245">b</span><span class="op" id="8104246">.</span><span class="ident" id="8104247">StopTimer</span><span class="op" id="8104256">(</span><span class="op" id="8104257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104261">codeInit</span><span class="op" id="8104269">(</span><span class="op" id="8104270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104274">b</span><span class="op" id="8104275">.</span><span class="ident" id="8104276">StartTimer</span><span class="op" id="8104286">(</span><span class="op" id="8104287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104290">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104293">var</span>&nbsp;<span class="ident" id="8104297">r</span>&nbsp;<span class="ident" id="8104299">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104313">for</span>&nbsp;<span class="ident" id="8104317">i</span>&nbsp;<span class="op" id="8104319">:=</span>&nbsp;<span class="num" id="8104322">0</span><span class="op" id="8104323">;</span>&nbsp;<span class="ident" id="8104325">i</span>&nbsp;<span class="op" id="8104327">&lt;</span>&nbsp;<span class="ident" id="8104329">b</span><span class="op" id="8104330">.</span><span class="ident" id="8104331">N</span><span class="op" id="8104332">;</span>&nbsp;<span class="ident" id="8104334">i</span><span class="op" id="8104335">++</span>&nbsp;<span class="op" id="8104338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104342">if</span>&nbsp;<span class="ident" id="8104345">err</span>&nbsp;<span class="op" id="8104349">:=</span>&nbsp;<span class="ident" id="8104352">Unmarshal</span><span class="op" id="8104361">(</span><span class="ident" id="8104362">codeJSON</span><span class="op" id="8104370">,</span>&nbsp;<span class="op" id="8104372">&amp;</span><span class="ident" id="8104373">r</span><span class="op" id="8104374">)</span><span class="op" id="8104375">;</span>&nbsp;<span class="ident" id="8104377">err</span>&nbsp;<span class="op" id="8104381">!=</span>&nbsp;<span class="ident" id="8104384">nil</span>&nbsp;<span class="op" id="8104388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104393">b</span><span class="op" id="8104394">.</span><span class="ident" id="8104395">Fatal</span><span class="op" id="8104400">(</span><span class="string" id="8104401">&#34;Unmmarshal:&#34;</span><span class="op" id="8104414">,</span>&nbsp;<span class="ident" id="8104416">err</span><span class="op" id="8104419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104423">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104426">}</span><br>
<span class="lineno"></span><span class="op" id="8104428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8104431">func</span>&nbsp;<span class="ident" id="8104436">BenchmarkUnmarshalString</span><span class="op" id="8104460">(</span><span class="ident" id="8104461">b</span>&nbsp;<span class="op" id="8104463">*</span><span class="ident" id="8104464">testing</span><span class="op" id="8104471">.</span><span class="ident" id="8104472">B</span><span class="op" id="8104473">)</span>&nbsp;<span class="op" id="8104475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104478">data</span>&nbsp;<span class="op" id="8104483">:=</span>&nbsp;<span class="op" id="8104486">[</span><span class="op" id="8104487">]</span><span class="builtintype" id="8104488">byte</span><span class="op" id="8104492">(</span><span class="string" id="8104493">`&#34;hello,&nbsp;world&#34;`</span><span class="op" id="8104509">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104512">var</span>&nbsp;<span class="ident" id="8104516">s</span>&nbsp;<span class="builtintype" id="8104518">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104527">for</span>&nbsp;<span class="ident" id="8104531">i</span>&nbsp;<span class="op" id="8104533">:=</span>&nbsp;<span class="num" id="8104536">0</span><span class="op" id="8104537">;</span>&nbsp;<span class="ident" id="8104539">i</span>&nbsp;<span class="op" id="8104541">&lt;</span>&nbsp;<span class="ident" id="8104543">b</span><span class="op" id="8104544">.</span><span class="ident" id="8104545">N</span><span class="op" id="8104546">;</span>&nbsp;<span class="ident" id="8104548">i</span><span class="op" id="8104549">++</span>&nbsp;<span class="op" id="8104552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104556">if</span>&nbsp;<span class="ident" id="8104559">err</span>&nbsp;<span class="op" id="8104563">:=</span>&nbsp;<span class="ident" id="8104566">Unmarshal</span><span class="op" id="8104575">(</span><span class="ident" id="8104576">data</span><span class="op" id="8104580">,</span>&nbsp;<span class="op" id="8104582">&amp;</span><span class="ident" id="8104583">s</span><span class="op" id="8104584">)</span><span class="op" id="8104585">;</span>&nbsp;<span class="ident" id="8104587">err</span>&nbsp;<span class="op" id="8104591">!=</span>&nbsp;<span class="ident" id="8104594">nil</span>&nbsp;<span class="op" id="8104598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104603">b</span><span class="op" id="8104604">.</span><span class="ident" id="8104605">Fatal</span><span class="op" id="8104610">(</span><span class="string" id="8104611">&#34;Unmarshal:&#34;</span><span class="op" id="8104623">,</span>&nbsp;<span class="ident" id="8104625">err</span><span class="op" id="8104628">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104635">}</span><br>
<span class="lineno"></span><span class="op" id="8104637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8104640">func</span>&nbsp;<span class="ident" id="8104645">BenchmarkUnmarshalFloat64</span><span class="op" id="8104670">(</span><span class="ident" id="8104671">b</span>&nbsp;<span class="op" id="8104673">*</span><span class="ident" id="8104674">testing</span><span class="op" id="8104681">.</span><span class="ident" id="8104682">B</span><span class="op" id="8104683">)</span>&nbsp;<span class="op" id="8104685">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104688">var</span>&nbsp;<span class="ident" id="8104692">f</span>&nbsp;<span class="builtintype" id="8104694">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104703">data</span>&nbsp;<span class="op" id="8104708">:=</span>&nbsp;<span class="op" id="8104711">[</span><span class="op" id="8104712">]</span><span class="builtintype" id="8104713">byte</span><span class="op" id="8104717">(</span><span class="string" id="8104718">`3.14`</span><span class="op" id="8104724">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104728">for</span>&nbsp;<span class="ident" id="8104732">i</span>&nbsp;<span class="op" id="8104734">:=</span>&nbsp;<span class="num" id="8104737">0</span><span class="op" id="8104738">;</span>&nbsp;<span class="ident" id="8104740">i</span>&nbsp;<span class="op" id="8104742">&lt;</span>&nbsp;<span class="ident" id="8104744">b</span><span class="op" id="8104745">.</span><span class="ident" id="8104746">N</span><span class="op" id="8104747">;</span>&nbsp;<span class="ident" id="8104749">i</span><span class="op" id="8104750">++</span>&nbsp;<span class="op" id="8104753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104757">if</span>&nbsp;<span class="ident" id="8104760">err</span>&nbsp;<span class="op" id="8104764">:=</span>&nbsp;<span class="ident" id="8104767">Unmarshal</span><span class="op" id="8104776">(</span><span class="ident" id="8104777">data</span><span class="op" id="8104781">,</span>&nbsp;<span class="op" id="8104783">&amp;</span><span class="ident" id="8104784">f</span><span class="op" id="8104785">)</span><span class="op" id="8104786">;</span>&nbsp;<span class="ident" id="8104788">err</span>&nbsp;<span class="op" id="8104792">!=</span>&nbsp;<span class="ident" id="8104795">nil</span>&nbsp;<span class="op" id="8104799">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104804">b</span><span class="op" id="8104805">.</span><span class="ident" id="8104806">Fatal</span><span class="op" id="8104811">(</span><span class="string" id="8104812">&#34;Unmarshal:&#34;</span><span class="op" id="8104824">,</span>&nbsp;<span class="ident" id="8104826">err</span><span class="op" id="8104829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104836">}</span><br>
<span class="lineno"></span><span class="op" id="8104838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="8104841">func</span>&nbsp;<span class="ident" id="8104846">BenchmarkUnmarshalInt64</span><span class="op" id="8104869">(</span><span class="ident" id="8104870">b</span>&nbsp;<span class="op" id="8104872">*</span><span class="ident" id="8104873">testing</span><span class="op" id="8104880">.</span><span class="ident" id="8104881">B</span><span class="op" id="8104882">)</span>&nbsp;<span class="op" id="8104884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104887">var</span>&nbsp;<span class="ident" id="8104891">x</span>&nbsp;<span class="ident" id="8104893">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104900">data</span>&nbsp;<span class="op" id="8104905">:=</span>&nbsp;<span class="op" id="8104908">[</span><span class="op" id="8104909">]</span><span class="builtintype" id="8104910">byte</span><span class="op" id="8104914">(</span><span class="string" id="8104915">`3`</span><span class="op" id="8104918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104922">for</span>&nbsp;<span class="ident" id="8104926">i</span>&nbsp;<span class="op" id="8104928">:=</span>&nbsp;<span class="num" id="8104931">0</span><span class="op" id="8104932">;</span>&nbsp;<span class="ident" id="8104934">i</span>&nbsp;<span class="op" id="8104936">&lt;</span>&nbsp;<span class="ident" id="8104938">b</span><span class="op" id="8104939">.</span><span class="ident" id="8104940">N</span><span class="op" id="8104941">;</span>&nbsp;<span class="ident" id="8104943">i</span><span class="op" id="8104944">++</span>&nbsp;<span class="op" id="8104947">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104951">if</span>&nbsp;<span class="ident" id="8104954">err</span>&nbsp;<span class="op" id="8104958">:=</span>&nbsp;<span class="ident" id="8104961">Unmarshal</span><span class="op" id="8104970">(</span><span class="ident" id="8104971">data</span><span class="op" id="8104975">,</span>&nbsp;<span class="op" id="8104977">&amp;</span><span class="ident" id="8104978">x</span><span class="op" id="8104979">)</span><span class="op" id="8104980">;</span>&nbsp;<span class="ident" id="8104982">err</span>&nbsp;<span class="op" id="8104986">!=</span>&nbsp;<span class="ident" id="8104989">nil</span>&nbsp;<span class="op" id="8104993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104998">b</span><span class="op" id="8104999">.</span><span class="ident" id="8105000">Fatal</span><span class="op" id="8105005">(</span><span class="string" id="8105006">&#34;Unmarshal:&#34;</span><span class="op" id="8105018">,</span>&nbsp;<span class="ident" id="8105020">err</span><span class="op" id="8105023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105030">}</span><br>
<span class="lineno"></span><span class="op" id="8105032">}</span>
</div>
</body>
</html>
