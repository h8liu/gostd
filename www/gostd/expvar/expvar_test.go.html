<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8212267">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8212322">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8212376">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8212427">package</span>&nbsp;<span class="ident" id="8212435">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8212443">import</span>&nbsp;<span class="op" id="8212450">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212453">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212462">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212479">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212500">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212511">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8212521">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8212524">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="8212569">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="8212596">func</span>&nbsp;<span class="ident" id="8212601">RemoveAll</span><span class="op" id="8212610">(</span><span class="op" id="8212611">)</span>&nbsp;<span class="op" id="8212613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212616">mutex</span><span class="op" id="8212621">.</span><span class="ident" id="8212622">Lock</span><span class="op" id="8212626">(</span><span class="op" id="8212627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8212630">defer</span>&nbsp;<span class="ident" id="8212636">mutex</span><span class="op" id="8212641">.</span><span class="ident" id="8212642">Unlock</span><span class="op" id="8212648">(</span><span class="op" id="8212649">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212652">vars</span>&nbsp;<span class="op" id="8212657">=</span>&nbsp;<span class="builtinfunc" id="8212659">make</span><span class="op" id="8212663">(</span><span class="keyword" id="8212664">map</span><span class="op" id="8212667">[</span><span class="builtintype" id="8212668">string</span><span class="op" id="8212674">]</span><span class="ident" id="8212675">Var</span><span class="op" id="8212678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212681">varKeys</span>&nbsp;<span class="op" id="8212689">=</span>&nbsp;<span class="ident" id="8212691">nil</span><br>
<span class="lineno"></span><span class="op" id="8212695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8212698">func</span>&nbsp;<span class="ident" id="8212703">TestInt</span><span class="op" id="8212710">(</span><span class="ident" id="8212711">t</span>&nbsp;<span class="op" id="8212713">*</span><span class="ident" id="8212714">testing</span><span class="op" id="8212721">.</span><span class="ident" id="8212722">T</span><span class="op" id="8212723">)</span>&nbsp;<span class="op" id="8212725">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212728">RemoveAll</span><span class="op" id="8212737">(</span><span class="op" id="8212738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212741">reqs</span>&nbsp;<span class="op" id="8212746">:=</span>&nbsp;<span class="ident" id="8212749">NewInt</span><span class="op" id="8212755">(</span><span class="string" id="8212756">&#34;requests&#34;</span><span class="op" id="8212766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8212769">if</span>&nbsp;<span class="ident" id="8212772">reqs</span><span class="op" id="8212776">.</span><span class="ident" id="8212777">i</span>&nbsp;<span class="op" id="8212779">!=</span>&nbsp;<span class="num" id="8212782">0</span>&nbsp;<span class="op" id="8212784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212788">t</span><span class="op" id="8212789">.</span><span class="ident" id="8212790">Errorf</span><span class="op" id="8212796">(</span><span class="string" id="8212797">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8212818">,</span>&nbsp;<span class="ident" id="8212820">reqs</span><span class="op" id="8212824">.</span><span class="ident" id="8212825">i</span><span class="op" id="8212826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8212829">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8212832">if</span>&nbsp;<span class="ident" id="8212835">reqs</span>&nbsp;<span class="op" id="8212840">!=</span>&nbsp;<span class="ident" id="8212843">Get</span><span class="op" id="8212846">(</span><span class="string" id="8212847">&#34;requests&#34;</span><span class="op" id="8212857">)</span><span class="op" id="8212858">.</span><span class="op" id="8212859">(</span><span class="op" id="8212860">*</span><span class="ident" id="8212861">Int</span><span class="op" id="8212864">)</span>&nbsp;<span class="op" id="8212866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212870">t</span><span class="op" id="8212871">.</span><span class="ident" id="8212872">Errorf</span><span class="op" id="8212878">(</span><span class="string" id="8212879">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="8212894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8212897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212901">reqs</span><span class="op" id="8212905">.</span><span class="ident" id="8212906">Add</span><span class="op" id="8212909">(</span><span class="num" id="8212910">1</span><span class="op" id="8212911">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212914">reqs</span><span class="op" id="8212918">.</span><span class="ident" id="8212919">Add</span><span class="op" id="8212922">(</span><span class="num" id="8212923">3</span><span class="op" id="8212924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8212927">if</span>&nbsp;<span class="ident" id="8212930">reqs</span><span class="op" id="8212934">.</span><span class="ident" id="8212935">i</span>&nbsp;<span class="op" id="8212937">!=</span>&nbsp;<span class="num" id="8212940">4</span>&nbsp;<span class="op" id="8212942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212946">t</span><span class="op" id="8212947">.</span><span class="ident" id="8212948">Errorf</span><span class="op" id="8212954">(</span><span class="string" id="8212955">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="8212976">,</span>&nbsp;<span class="ident" id="8212978">reqs</span><span class="op" id="8212982">.</span><span class="ident" id="8212983">i</span><span class="op" id="8212984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8212987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8212991">if</span>&nbsp;<span class="ident" id="8212994">s</span>&nbsp;<span class="op" id="8212996">:=</span>&nbsp;<span class="ident" id="8212999">reqs</span><span class="op" id="8213003">.</span><span class="ident" id="8213004">String</span><span class="op" id="8213010">(</span><span class="op" id="8213011">)</span><span class="op" id="8213012">;</span>&nbsp;<span class="ident" id="8213014">s</span>&nbsp;<span class="op" id="8213016">!=</span>&nbsp;<span class="string" id="8213019">&#34;4&#34;</span>&nbsp;<span class="op" id="8213023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213027">t</span><span class="op" id="8213028">.</span><span class="ident" id="8213029">Errorf</span><span class="op" id="8213035">(</span><span class="string" id="8213036">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="8213068">,</span>&nbsp;<span class="ident" id="8213070">s</span><span class="op" id="8213071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213078">reqs</span><span class="op" id="8213082">.</span><span class="ident" id="8213083">Set</span><span class="op" id="8213086">(</span><span class="op" id="8213087">-</span><span class="num" id="8213088">2</span><span class="op" id="8213089">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213092">if</span>&nbsp;<span class="ident" id="8213095">reqs</span><span class="op" id="8213099">.</span><span class="ident" id="8213100">i</span>&nbsp;<span class="op" id="8213102">!=</span>&nbsp;<span class="op" id="8213105">-</span><span class="num" id="8213106">2</span>&nbsp;<span class="op" id="8213108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213112">t</span><span class="op" id="8213113">.</span><span class="ident" id="8213114">Errorf</span><span class="op" id="8213120">(</span><span class="string" id="8213121">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="8213143">,</span>&nbsp;<span class="ident" id="8213145">reqs</span><span class="op" id="8213149">.</span><span class="ident" id="8213150">i</span><span class="op" id="8213151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213154">}</span><br>
<span class="lineno"></span><span class="op" id="8213156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="8213159">func</span>&nbsp;<span class="ident" id="8213164">TestFloat</span><span class="op" id="8213173">(</span><span class="ident" id="8213174">t</span>&nbsp;<span class="op" id="8213176">*</span><span class="ident" id="8213177">testing</span><span class="op" id="8213184">.</span><span class="ident" id="8213185">T</span><span class="op" id="8213186">)</span>&nbsp;<span class="op" id="8213188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213191">RemoveAll</span><span class="op" id="8213200">(</span><span class="op" id="8213201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213204">reqs</span>&nbsp;<span class="op" id="8213209">:=</span>&nbsp;<span class="ident" id="8213212">NewFloat</span><span class="op" id="8213220">(</span><span class="string" id="8213221">&#34;requests-float&#34;</span><span class="op" id="8213237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213240">if</span>&nbsp;<span class="ident" id="8213243">reqs</span><span class="op" id="8213247">.</span><span class="ident" id="8213248">f</span>&nbsp;<span class="op" id="8213250">!=</span>&nbsp;<span class="num" id="8213253">0.0</span>&nbsp;<span class="op" id="8213257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213261">t</span><span class="op" id="8213262">.</span><span class="ident" id="8213263">Errorf</span><span class="op" id="8213269">(</span><span class="string" id="8213270">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8213291">,</span>&nbsp;<span class="ident" id="8213293">reqs</span><span class="op" id="8213297">.</span><span class="ident" id="8213298">f</span><span class="op" id="8213299">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213305">if</span>&nbsp;<span class="ident" id="8213308">reqs</span>&nbsp;<span class="op" id="8213313">!=</span>&nbsp;<span class="ident" id="8213316">Get</span><span class="op" id="8213319">(</span><span class="string" id="8213320">&#34;requests-float&#34;</span><span class="op" id="8213336">)</span><span class="op" id="8213337">.</span><span class="op" id="8213338">(</span><span class="op" id="8213339">*</span><span class="ident" id="8213340">Float</span><span class="op" id="8213345">)</span>&nbsp;<span class="op" id="8213347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213351">t</span><span class="op" id="8213352">.</span><span class="ident" id="8213353">Errorf</span><span class="op" id="8213359">(</span><span class="string" id="8213360">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="8213375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213382">reqs</span><span class="op" id="8213386">.</span><span class="ident" id="8213387">Add</span><span class="op" id="8213390">(</span><span class="num" id="8213391">1.5</span><span class="op" id="8213394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213397">reqs</span><span class="op" id="8213401">.</span><span class="ident" id="8213402">Add</span><span class="op" id="8213405">(</span><span class="num" id="8213406">1.25</span><span class="op" id="8213410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213413">if</span>&nbsp;<span class="ident" id="8213416">reqs</span><span class="op" id="8213420">.</span><span class="ident" id="8213421">f</span>&nbsp;<span class="op" id="8213423">!=</span>&nbsp;<span class="num" id="8213426">2.75</span>&nbsp;<span class="op" id="8213431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213435">t</span><span class="op" id="8213436">.</span><span class="ident" id="8213437">Errorf</span><span class="op" id="8213443">(</span><span class="string" id="8213444">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="8213468">,</span>&nbsp;<span class="ident" id="8213470">reqs</span><span class="op" id="8213474">.</span><span class="ident" id="8213475">f</span><span class="op" id="8213476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213479">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213483">if</span>&nbsp;<span class="ident" id="8213486">s</span>&nbsp;<span class="op" id="8213488">:=</span>&nbsp;<span class="ident" id="8213491">reqs</span><span class="op" id="8213495">.</span><span class="ident" id="8213496">String</span><span class="op" id="8213502">(</span><span class="op" id="8213503">)</span><span class="op" id="8213504">;</span>&nbsp;<span class="ident" id="8213506">s</span>&nbsp;<span class="op" id="8213508">!=</span>&nbsp;<span class="string" id="8213511">&#34;2.75&#34;</span>&nbsp;<span class="op" id="8213518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213522">t</span><span class="op" id="8213523">.</span><span class="ident" id="8213524">Errorf</span><span class="op" id="8213530">(</span><span class="string" id="8213531">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="8213566">,</span>&nbsp;<span class="ident" id="8213568">s</span><span class="op" id="8213569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213576">reqs</span><span class="op" id="8213580">.</span><span class="ident" id="8213581">Add</span><span class="op" id="8213584">(</span><span class="op" id="8213585">-</span><span class="num" id="8213586">2</span><span class="op" id="8213587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213590">if</span>&nbsp;<span class="ident" id="8213593">reqs</span><span class="op" id="8213597">.</span><span class="ident" id="8213598">f</span>&nbsp;<span class="op" id="8213600">!=</span>&nbsp;<span class="num" id="8213603">0.75</span>&nbsp;<span class="op" id="8213608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213612">t</span><span class="op" id="8213613">.</span><span class="ident" id="8213614">Errorf</span><span class="op" id="8213620">(</span><span class="string" id="8213621">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="8213645">,</span>&nbsp;<span class="ident" id="8213647">reqs</span><span class="op" id="8213651">.</span><span class="ident" id="8213652">f</span><span class="op" id="8213653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213656">}</span><br>
<span class="lineno"></span><span class="op" id="8213658">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="8213661">func</span>&nbsp;<span class="ident" id="8213666">TestString</span><span class="op" id="8213676">(</span><span class="ident" id="8213677">t</span>&nbsp;<span class="op" id="8213679">*</span><span class="ident" id="8213680">testing</span><span class="op" id="8213687">.</span><span class="ident" id="8213688">T</span><span class="op" id="8213689">)</span>&nbsp;<span class="op" id="8213691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213694">RemoveAll</span><span class="op" id="8213703">(</span><span class="op" id="8213704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213707">name</span>&nbsp;<span class="op" id="8213712">:=</span>&nbsp;<span class="ident" id="8213715">NewString</span><span class="op" id="8213724">(</span><span class="string" id="8213725">&#34;my-name&#34;</span><span class="op" id="8213734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213737">if</span>&nbsp;<span class="ident" id="8213740">name</span><span class="op" id="8213744">.</span><span class="ident" id="8213745">s</span>&nbsp;<span class="op" id="8213747">!=</span>&nbsp;<span class="string" id="8213750">&#34;&#34;</span>&nbsp;<span class="op" id="8213753">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213757">t</span><span class="op" id="8213758">.</span><span class="ident" id="8213759">Errorf</span><span class="op" id="8213765">(</span><span class="string" id="8213766">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="8213790">,</span>&nbsp;<span class="ident" id="8213792">name</span><span class="op" id="8213796">.</span><span class="ident" id="8213797">s</span><span class="op" id="8213798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213805">name</span><span class="op" id="8213809">.</span><span class="ident" id="8213810">Set</span><span class="op" id="8213813">(</span><span class="string" id="8213814">&#34;Mike&#34;</span><span class="op" id="8213820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213823">if</span>&nbsp;<span class="ident" id="8213826">name</span><span class="op" id="8213830">.</span><span class="ident" id="8213831">s</span>&nbsp;<span class="op" id="8213833">!=</span>&nbsp;<span class="string" id="8213836">&#34;Mike&#34;</span>&nbsp;<span class="op" id="8213843">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213847">t</span><span class="op" id="8213848">.</span><span class="ident" id="8213849">Errorf</span><span class="op" id="8213855">(</span><span class="string" id="8213856">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="8213884">,</span>&nbsp;<span class="ident" id="8213886">name</span><span class="op" id="8213890">.</span><span class="ident" id="8213891">s</span><span class="op" id="8213892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213899">if</span>&nbsp;<span class="ident" id="8213902">s</span>&nbsp;<span class="op" id="8213904">:=</span>&nbsp;<span class="ident" id="8213907">name</span><span class="op" id="8213911">.</span><span class="ident" id="8213912">String</span><span class="op" id="8213918">(</span><span class="op" id="8213919">)</span><span class="op" id="8213920">;</span>&nbsp;<span class="ident" id="8213922">s</span>&nbsp;<span class="op" id="8213924">!=</span>&nbsp;<span class="string" id="8213927">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="8213938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213942">t</span><span class="op" id="8213943">.</span><span class="ident" id="8213944">Errorf</span><span class="op" id="8213950">(</span><span class="string" id="8213951">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="8213990">,</span>&nbsp;<span class="ident" id="8213992">s</span><span class="op" id="8213993">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213996">}</span><br>
<span class="lineno"></span><span class="op" id="8213998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8214001">func</span>&nbsp;<span class="ident" id="8214006">TestMapCounter</span><span class="op" id="8214020">(</span><span class="ident" id="8214021">t</span>&nbsp;<span class="op" id="8214023">*</span><span class="ident" id="8214024">testing</span><span class="op" id="8214031">.</span><span class="ident" id="8214032">T</span><span class="op" id="8214033">)</span>&nbsp;<span class="op" id="8214035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214038">RemoveAll</span><span class="op" id="8214047">(</span><span class="op" id="8214048">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214051">colors</span>&nbsp;<span class="op" id="8214058">:=</span>&nbsp;<span class="ident" id="8214061">NewMap</span><span class="op" id="8214067">(</span><span class="string" id="8214068">&#34;bike-shed-colors&#34;</span><span class="op" id="8214086">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214090">colors</span><span class="op" id="8214096">.</span><span class="ident" id="8214097">Add</span><span class="op" id="8214100">(</span><span class="string" id="8214101">&#34;red&#34;</span><span class="op" id="8214106">,</span>&nbsp;<span class="num" id="8214108">1</span><span class="op" id="8214109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214112">colors</span><span class="op" id="8214118">.</span><span class="ident" id="8214119">Add</span><span class="op" id="8214122">(</span><span class="string" id="8214123">&#34;red&#34;</span><span class="op" id="8214128">,</span>&nbsp;<span class="num" id="8214130">2</span><span class="op" id="8214131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214134">colors</span><span class="op" id="8214140">.</span><span class="ident" id="8214141">Add</span><span class="op" id="8214144">(</span><span class="string" id="8214145">&#34;blue&#34;</span><span class="op" id="8214151">,</span>&nbsp;<span class="num" id="8214153">4</span><span class="op" id="8214154">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214157">colors</span><span class="op" id="8214163">.</span><span class="ident" id="8214164">AddFloat</span><span class="op" id="8214172">(</span><span class="string" id="8214173">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="8214189">,</span>&nbsp;<span class="num" id="8214191">4.125</span><span class="op" id="8214196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214199">if</span>&nbsp;<span class="ident" id="8214202">x</span>&nbsp;<span class="op" id="8214204">:=</span>&nbsp;<span class="ident" id="8214207">colors</span><span class="op" id="8214213">.</span><span class="ident" id="8214214">m</span><span class="op" id="8214215">[</span><span class="string" id="8214216">&#34;red&#34;</span><span class="op" id="8214221">]</span><span class="op" id="8214222">.</span><span class="op" id="8214223">(</span><span class="op" id="8214224">*</span><span class="ident" id="8214225">Int</span><span class="op" id="8214228">)</span><span class="op" id="8214229">.</span><span class="ident" id="8214230">i</span><span class="op" id="8214231">;</span>&nbsp;<span class="ident" id="8214233">x</span>&nbsp;<span class="op" id="8214235">!=</span>&nbsp;<span class="num" id="8214238">3</span>&nbsp;<span class="op" id="8214240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214244">t</span><span class="op" id="8214245">.</span><span class="ident" id="8214246">Errorf</span><span class="op" id="8214252">(</span><span class="string" id="8214253">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="8214285">,</span>&nbsp;<span class="ident" id="8214287">x</span><span class="op" id="8214288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8214291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214294">if</span>&nbsp;<span class="ident" id="8214297">x</span>&nbsp;<span class="op" id="8214299">:=</span>&nbsp;<span class="ident" id="8214302">colors</span><span class="op" id="8214308">.</span><span class="ident" id="8214309">m</span><span class="op" id="8214310">[</span><span class="string" id="8214311">&#34;blue&#34;</span><span class="op" id="8214317">]</span><span class="op" id="8214318">.</span><span class="op" id="8214319">(</span><span class="op" id="8214320">*</span><span class="ident" id="8214321">Int</span><span class="op" id="8214324">)</span><span class="op" id="8214325">.</span><span class="ident" id="8214326">i</span><span class="op" id="8214327">;</span>&nbsp;<span class="ident" id="8214329">x</span>&nbsp;<span class="op" id="8214331">!=</span>&nbsp;<span class="num" id="8214334">4</span>&nbsp;<span class="op" id="8214336">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214340">t</span><span class="op" id="8214341">.</span><span class="ident" id="8214342">Errorf</span><span class="op" id="8214348">(</span><span class="string" id="8214349">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="8214382">,</span>&nbsp;<span class="ident" id="8214384">x</span><span class="op" id="8214385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8214388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214391">if</span>&nbsp;<span class="ident" id="8214394">x</span>&nbsp;<span class="op" id="8214396">:=</span>&nbsp;<span class="ident" id="8214399">colors</span><span class="op" id="8214405">.</span><span class="ident" id="8214406">m</span><span class="op" id="8214407">[</span><span class="string" id="8214408">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="8214424">]</span><span class="op" id="8214425">.</span><span class="op" id="8214426">(</span><span class="op" id="8214427">*</span><span class="ident" id="8214428">Float</span><span class="op" id="8214433">)</span><span class="op" id="8214434">.</span><span class="ident" id="8214435">f</span><span class="op" id="8214436">;</span>&nbsp;<span class="ident" id="8214438">x</span>&nbsp;<span class="op" id="8214440">!=</span>&nbsp;<span class="num" id="8214443">4.125</span>&nbsp;<span class="op" id="8214449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214453">t</span><span class="op" id="8214454">.</span><span class="ident" id="8214455">Errorf</span><span class="op" id="8214461">(</span><span class="string" id="8214462">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="8214507">,</span>&nbsp;<span class="ident" id="8214509">x</span><span class="op" id="8214510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8214513">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8214517">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8214570">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214619">s</span>&nbsp;<span class="op" id="8214621">:=</span>&nbsp;<span class="ident" id="8214624">colors</span><span class="op" id="8214630">.</span><span class="ident" id="8214631">String</span><span class="op" id="8214637">(</span><span class="op" id="8214638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214641">var</span>&nbsp;<span class="ident" id="8214645">j</span>&nbsp;<span class="keyword" id="8214647">interface</span><span class="op" id="8214656">{</span><span class="op" id="8214657">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214660">err</span>&nbsp;<span class="op" id="8214664">:=</span>&nbsp;<span class="ident" id="8214667">json</span><span class="op" id="8214671">.</span><span class="ident" id="8214672">Unmarshal</span><span class="op" id="8214681">(</span><span class="op" id="8214682">[</span><span class="op" id="8214683">]</span><span class="builtintype" id="8214684">byte</span><span class="op" id="8214688">(</span><span class="ident" id="8214689">s</span><span class="op" id="8214690">)</span><span class="op" id="8214691">,</span>&nbsp;<span class="op" id="8214693">&amp;</span><span class="ident" id="8214694">j</span><span class="op" id="8214695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214698">if</span>&nbsp;<span class="ident" id="8214701">err</span>&nbsp;<span class="op" id="8214705">!=</span>&nbsp;<span class="ident" id="8214708">nil</span>&nbsp;<span class="op" id="8214712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214716">t</span><span class="op" id="8214717">.</span><span class="ident" id="8214718">Errorf</span><span class="op" id="8214724">(</span><span class="string" id="8214725">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="8214763">,</span>&nbsp;<span class="ident" id="8214765">err</span><span class="op" id="8214768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8214771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214774">m</span><span class="op" id="8214775">,</span>&nbsp;<span class="ident" id="8214777">ok</span>&nbsp;<span class="op" id="8214780">:=</span>&nbsp;<span class="ident" id="8214783">j</span><span class="op" id="8214784">.</span><span class="op" id="8214785">(</span><span class="keyword" id="8214786">map</span><span class="op" id="8214789">[</span><span class="builtintype" id="8214790">string</span><span class="op" id="8214796">]</span><span class="keyword" id="8214797">interface</span><span class="op" id="8214806">{</span><span class="op" id="8214807">}</span><span class="op" id="8214808">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214811">if</span>&nbsp;<span class="op" id="8214814">!</span><span class="ident" id="8214815">ok</span>&nbsp;<span class="op" id="8214818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214822">t</span><span class="op" id="8214823">.</span><span class="ident" id="8214824">Error</span><span class="op" id="8214829">(</span><span class="string" id="8214830">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="8214869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8214872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214875">red</span>&nbsp;<span class="op" id="8214879">:=</span>&nbsp;<span class="ident" id="8214882">m</span><span class="op" id="8214883">[</span><span class="string" id="8214884">&#34;red&#34;</span><span class="op" id="8214889">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214892">x</span><span class="op" id="8214893">,</span>&nbsp;<span class="ident" id="8214895">ok</span>&nbsp;<span class="op" id="8214898">:=</span>&nbsp;<span class="ident" id="8214901">red</span><span class="op" id="8214904">.</span><span class="op" id="8214905">(</span><span class="builtintype" id="8214906">float64</span><span class="op" id="8214913">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214916">if</span>&nbsp;<span class="op" id="8214919">!</span><span class="ident" id="8214920">ok</span>&nbsp;<span class="op" id="8214923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214927">t</span><span class="op" id="8214928">.</span><span class="ident" id="8214929">Error</span><span class="op" id="8214934">(</span><span class="string" id="8214935">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="8214964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8214967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214970">if</span>&nbsp;<span class="ident" id="8214973">x</span>&nbsp;<span class="op" id="8214975">!=</span>&nbsp;<span class="num" id="8214978">3</span>&nbsp;<span class="op" id="8214980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214984">t</span><span class="op" id="8214985">.</span><span class="ident" id="8214986">Errorf</span><span class="op" id="8214992">(</span><span class="string" id="8214993">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="8215011">,</span>&nbsp;<span class="ident" id="8215013">x</span><span class="op" id="8215014">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215017">}</span><br>
<span class="lineno"></span><span class="op" id="8215019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8215022">func</span>&nbsp;<span class="ident" id="8215027">TestFunc</span><span class="op" id="8215035">(</span><span class="ident" id="8215036">t</span>&nbsp;<span class="op" id="8215038">*</span><span class="ident" id="8215039">testing</span><span class="op" id="8215046">.</span><span class="ident" id="8215047">T</span><span class="op" id="8215048">)</span>&nbsp;<span class="op" id="8215050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215053">RemoveAll</span><span class="op" id="8215062">(</span><span class="op" id="8215063">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8215066">var</span>&nbsp;<span class="ident" id="8215070">x</span>&nbsp;<span class="keyword" id="8215072">interface</span><span class="op" id="8215081">{</span><span class="op" id="8215082">}</span>&nbsp;<span class="op" id="8215084">=</span>&nbsp;<span class="op" id="8215086">[</span><span class="op" id="8215087">]</span><span class="builtintype" id="8215088">string</span><span class="op" id="8215094">{</span><span class="string" id="8215095">&#34;a&#34;</span><span class="op" id="8215098">,</span>&nbsp;<span class="string" id="8215100">&#34;b&#34;</span><span class="op" id="8215103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215106">f</span>&nbsp;<span class="op" id="8215108">:=</span>&nbsp;<span class="ident" id="8215111">Func</span><span class="op" id="8215115">(</span><span class="keyword" id="8215116">func</span><span class="op" id="8215120">(</span><span class="op" id="8215121">)</span>&nbsp;<span class="keyword" id="8215123">interface</span><span class="op" id="8215132">{</span><span class="op" id="8215133">}</span>&nbsp;<span class="op" id="8215135">{</span>&nbsp;<span class="keyword" id="8215137">return</span>&nbsp;<span class="ident" id="8215144">x</span>&nbsp;<span class="op" id="8215146">}</span><span class="op" id="8215147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8215150">if</span>&nbsp;<span class="ident" id="8215153">s</span><span class="op" id="8215154">,</span>&nbsp;<span class="ident" id="8215156">exp</span>&nbsp;<span class="op" id="8215160">:=</span>&nbsp;<span class="ident" id="8215163">f</span><span class="op" id="8215164">.</span><span class="ident" id="8215165">String</span><span class="op" id="8215171">(</span><span class="op" id="8215172">)</span><span class="op" id="8215173">,</span>&nbsp;<span class="string" id="8215175">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="8215186">;</span>&nbsp;<span class="ident" id="8215188">s</span>&nbsp;<span class="op" id="8215190">!=</span>&nbsp;<span class="ident" id="8215193">exp</span>&nbsp;<span class="op" id="8215197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215201">t</span><span class="op" id="8215202">.</span><span class="ident" id="8215203">Errorf</span><span class="op" id="8215209">(</span><span class="string" id="8215210">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="8215236">,</span>&nbsp;<span class="ident" id="8215238">s</span><span class="op" id="8215239">,</span>&nbsp;<span class="ident" id="8215241">exp</span><span class="op" id="8215244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215247">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215251">x</span>&nbsp;<span class="op" id="8215253">=</span>&nbsp;<span class="num" id="8215255">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8215259">if</span>&nbsp;<span class="ident" id="8215262">s</span><span class="op" id="8215263">,</span>&nbsp;<span class="ident" id="8215265">exp</span>&nbsp;<span class="op" id="8215269">:=</span>&nbsp;<span class="ident" id="8215272">f</span><span class="op" id="8215273">.</span><span class="ident" id="8215274">String</span><span class="op" id="8215280">(</span><span class="op" id="8215281">)</span><span class="op" id="8215282">,</span>&nbsp;<span class="string" id="8215284">`17`</span><span class="op" id="8215288">;</span>&nbsp;<span class="ident" id="8215290">s</span>&nbsp;<span class="op" id="8215292">!=</span>&nbsp;<span class="ident" id="8215295">exp</span>&nbsp;<span class="op" id="8215299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215303">t</span><span class="op" id="8215304">.</span><span class="ident" id="8215305">Errorf</span><span class="op" id="8215311">(</span><span class="string" id="8215312">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="8215338">,</span>&nbsp;<span class="ident" id="8215340">s</span><span class="op" id="8215341">,</span>&nbsp;<span class="ident" id="8215343">exp</span><span class="op" id="8215346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215349">}</span><br>
<span class="lineno">145</span><span class="op" id="8215351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8215354">func</span>&nbsp;<span class="ident" id="8215359">TestHandler</span><span class="op" id="8215370">(</span><span class="ident" id="8215371">t</span>&nbsp;<span class="op" id="8215373">*</span><span class="ident" id="8215374">testing</span><span class="op" id="8215381">.</span><span class="ident" id="8215382">T</span><span class="op" id="8215383">)</span>&nbsp;<span class="op" id="8215385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215388">RemoveAll</span><span class="op" id="8215397">(</span><span class="op" id="8215398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215401">m</span>&nbsp;<span class="op" id="8215403">:=</span>&nbsp;<span class="ident" id="8215406">NewMap</span><span class="op" id="8215412">(</span><span class="string" id="8215413">&#34;map1&#34;</span><span class="op" id="8215419">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215422">m</span><span class="op" id="8215423">.</span><span class="ident" id="8215424">Add</span><span class="op" id="8215427">(</span><span class="string" id="8215428">&#34;a&#34;</span><span class="op" id="8215431">,</span>&nbsp;<span class="num" id="8215433">1</span><span class="op" id="8215434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215437">m</span><span class="op" id="8215438">.</span><span class="ident" id="8215439">Add</span><span class="op" id="8215442">(</span><span class="string" id="8215443">&#34;z&#34;</span><span class="op" id="8215446">,</span>&nbsp;<span class="num" id="8215448">2</span><span class="op" id="8215449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215452">m2</span>&nbsp;<span class="op" id="8215455">:=</span>&nbsp;<span class="ident" id="8215458">NewMap</span><span class="op" id="8215464">(</span><span class="string" id="8215465">&#34;map2&#34;</span><span class="op" id="8215471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8215474">for</span>&nbsp;<span class="ident" id="8215478">i</span>&nbsp;<span class="op" id="8215480">:=</span>&nbsp;<span class="num" id="8215483">0</span><span class="op" id="8215484">;</span>&nbsp;<span class="ident" id="8215486">i</span>&nbsp;<span class="op" id="8215488">&lt;</span>&nbsp;<span class="num" id="8215490">9</span><span class="op" id="8215491">;</span>&nbsp;<span class="ident" id="8215493">i</span><span class="op" id="8215494">++</span>&nbsp;<span class="op" id="8215497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215501">m2</span><span class="op" id="8215503">.</span><span class="ident" id="8215504">Add</span><span class="op" id="8215507">(</span><span class="ident" id="8215508">strconv</span><span class="op" id="8215515">.</span><span class="ident" id="8215516">Itoa</span><span class="op" id="8215520">(</span><span class="ident" id="8215521">i</span><span class="op" id="8215522">)</span><span class="op" id="8215523">,</span>&nbsp;<span class="ident" id="8215525">int64</span><span class="op" id="8215530">(</span><span class="ident" id="8215531">i</span><span class="op" id="8215532">)</span><span class="op" id="8215533">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215539">rr</span>&nbsp;<span class="op" id="8215542">:=</span>&nbsp;<span class="ident" id="8215545">httptest</span><span class="op" id="8215553">.</span><span class="ident" id="8215554">NewRecorder</span><span class="op" id="8215565">(</span><span class="op" id="8215566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215569">rr</span><span class="op" id="8215571">.</span><span class="ident" id="8215572">Body</span>&nbsp;<span class="op" id="8215577">=</span>&nbsp;<span class="builtinfunc" id="8215579">new</span><span class="op" id="8215582">(</span><span class="ident" id="8215583">bytes</span><span class="op" id="8215588">.</span><span class="ident" id="8215589">Buffer</span><span class="op" id="8215595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215598">expvarHandler</span><span class="op" id="8215611">(</span><span class="ident" id="8215612">rr</span><span class="op" id="8215614">,</span>&nbsp;<span class="ident" id="8215616">nil</span><span class="op" id="8215619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215622">want</span>&nbsp;<span class="op" id="8215627">:=</span>&nbsp;<span class="string" id="8215630">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8215745">if</span>&nbsp;<span class="ident" id="8215748">got</span>&nbsp;<span class="op" id="8215752">:=</span>&nbsp;<span class="ident" id="8215755">rr</span><span class="op" id="8215757">.</span><span class="ident" id="8215758">Body</span><span class="op" id="8215762">.</span><span class="ident" id="8215763">String</span><span class="op" id="8215769">(</span><span class="op" id="8215770">)</span><span class="op" id="8215771">;</span>&nbsp;<span class="ident" id="8215773">got</span>&nbsp;<span class="op" id="8215777">!=</span>&nbsp;<span class="ident" id="8215780">want</span>&nbsp;<span class="op" id="8215785">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215789">t</span><span class="op" id="8215790">.</span><span class="ident" id="8215791">Errorf</span><span class="op" id="8215797">(</span><span class="string" id="8215798">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="8215834">,</span>&nbsp;<span class="ident" id="8215836">got</span><span class="op" id="8215839">,</span>&nbsp;<span class="ident" id="8215841">want</span><span class="op" id="8215845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215848">}</span><br>
<span class="lineno"></span><span class="op" id="8215850">}</span>
</div>
</body>
</html>
