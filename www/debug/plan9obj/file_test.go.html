<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8619167">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8619223">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8619277">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8619328">package</span>&nbsp;<span class="ident" id="8619336">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8619346">import</span>&nbsp;<span class="op" id="8619353">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8619356">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8619367">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8619377">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8619380">type</span>&nbsp;<span class="ident" id="8619385">fileTest</span>&nbsp;<span class="keyword" id="8619394">struct</span>&nbsp;<span class="op" id="8619401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8619404">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8619413">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8619421">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8619430"><a href="/debug/plan9obj/file.go.html#5952427">FileHeader</a></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8619442">sections</span>&nbsp;<span class="op" id="8619451">[</span><span class="op" id="8619452">]</span><span class="op" id="8619453">*</span><span class="ident" id="8619454"><a href="/debug/plan9obj/file.go.html#5952853">SectionHeader</a></span><br>
<span class="lineno"></span><span class="op" id="8619468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8619471">var</span>&nbsp;<span class="ident" id="8619475">fileTests</span>&nbsp;<span class="op" id="8619485">=</span>&nbsp;<span class="op" id="8619487">[</span><span class="op" id="8619488">]</span><span class="ident" id="8619489"><a href="/debug/plan9obj/file_test.go.html#8619385">fileTest</a></span><span class="op" id="8619497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619500">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8619504">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="8619529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8619533"><a href="/debug/plan9obj/file.go.html#5952427">FileHeader</a></span><span class="op" id="8619543">{</span><span class="ident" id="8619544"><a href="/debug/plan9obj/plan9obj.go.html#5959688">Magic386</a></span><span class="op" id="8619552">,</span>&nbsp;<span class="num" id="8619554">0x324</span><span class="op" id="8619559">,</span>&nbsp;<span class="num" id="8619561">0x14</span><span class="op" id="8619565">,</span>&nbsp;<span class="num" id="8619567">4</span><span class="op" id="8619568">,</span>&nbsp;<span class="num" id="8619570">0x1000</span><span class="op" id="8619576">,</span>&nbsp;<span class="num" id="8619578">32</span><span class="op" id="8619580">}</span><span class="op" id="8619581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619585">[</span><span class="op" id="8619586">]</span><span class="op" id="8619587">*</span><span class="ident" id="8619588"><a href="/debug/plan9obj/file.go.html#5952853">SectionHeader</a></span><span class="op" id="8619601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619606">{</span><span class="string" id="8619607">&#34;text&#34;</span><span class="op" id="8619613">,</span>&nbsp;<span class="num" id="8619615">0x4c5f</span><span class="op" id="8619621">,</span>&nbsp;<span class="num" id="8619623">0x20</span><span class="op" id="8619627">}</span><span class="op" id="8619628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619633">{</span><span class="string" id="8619634">&#34;data&#34;</span><span class="op" id="8619640">,</span>&nbsp;<span class="num" id="8619642">0x94c</span><span class="op" id="8619647">,</span>&nbsp;<span class="num" id="8619649">0x4c7f</span><span class="op" id="8619655">}</span><span class="op" id="8619656">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619661">{</span><span class="string" id="8619662">&#34;syms&#34;</span><span class="op" id="8619668">,</span>&nbsp;<span class="num" id="8619670">0x2c2b</span><span class="op" id="8619676">,</span>&nbsp;<span class="num" id="8619678">0x55cb</span><span class="op" id="8619684">}</span><span class="op" id="8619685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619690">{</span><span class="string" id="8619691">&#34;spsz&#34;</span><span class="op" id="8619697">,</span>&nbsp;<span class="num" id="8619699">0x0</span><span class="op" id="8619702">,</span>&nbsp;<span class="num" id="8619704">0x81f6</span><span class="op" id="8619710">}</span><span class="op" id="8619711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619716">{</span><span class="string" id="8619717">&#34;pcsz&#34;</span><span class="op" id="8619723">,</span>&nbsp;<span class="num" id="8619725">0xf7a</span><span class="op" id="8619730">,</span>&nbsp;<span class="num" id="8619732">0x81f6</span><span class="op" id="8619738">}</span><span class="op" id="8619739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619743">}</span><span class="op" id="8619744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619747">}</span><span class="op" id="8619748">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8619755">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="8619782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8619786"><a href="/debug/plan9obj/file.go.html#5952427">FileHeader</a></span><span class="op" id="8619796">{</span><span class="ident" id="8619797"><a href="/debug/plan9obj/plan9obj.go.html#5959718">MagicAMD64</a></span><span class="op" id="8619807">,</span>&nbsp;<span class="num" id="8619809">0x618</span><span class="op" id="8619814">,</span>&nbsp;<span class="num" id="8619816">0x13</span><span class="op" id="8619820">,</span>&nbsp;<span class="num" id="8619822">8</span><span class="op" id="8619823">,</span>&nbsp;<span class="num" id="8619825">0x200000</span><span class="op" id="8619833">,</span>&nbsp;<span class="num" id="8619835">40</span><span class="op" id="8619837">}</span><span class="op" id="8619838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619842">[</span><span class="op" id="8619843">]</span><span class="op" id="8619844">*</span><span class="ident" id="8619845"><a href="/debug/plan9obj/file.go.html#5952853">SectionHeader</a></span><span class="op" id="8619858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619863">{</span><span class="string" id="8619864">&#34;text&#34;</span><span class="op" id="8619870">,</span>&nbsp;<span class="num" id="8619872">0x4213</span><span class="op" id="8619878">,</span>&nbsp;<span class="num" id="8619880">0x28</span><span class="op" id="8619884">}</span><span class="op" id="8619885">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619890">{</span><span class="string" id="8619891">&#34;data&#34;</span><span class="op" id="8619897">,</span>&nbsp;<span class="num" id="8619899">0xa80</span><span class="op" id="8619904">,</span>&nbsp;<span class="num" id="8619906">0x423b</span><span class="op" id="8619912">}</span><span class="op" id="8619913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619918">{</span><span class="string" id="8619919">&#34;syms&#34;</span><span class="op" id="8619925">,</span>&nbsp;<span class="num" id="8619927">0x2c8c</span><span class="op" id="8619933">,</span>&nbsp;<span class="num" id="8619935">0x4cbb</span><span class="op" id="8619941">}</span><span class="op" id="8619942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619947">{</span><span class="string" id="8619948">&#34;spsz&#34;</span><span class="op" id="8619954">,</span>&nbsp;<span class="num" id="8619956">0x0</span><span class="op" id="8619959">,</span>&nbsp;<span class="num" id="8619961">0x7947</span><span class="op" id="8619967">}</span><span class="op" id="8619968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619973">{</span><span class="string" id="8619974">&#34;pcsz&#34;</span><span class="op" id="8619980">,</span>&nbsp;<span class="num" id="8619982">0xca0</span><span class="op" id="8619987">,</span>&nbsp;<span class="num" id="8619989">0x7947</span><span class="op" id="8619995">}</span><span class="op" id="8619996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620000">}</span><span class="op" id="8620001">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620004">}</span><span class="op" id="8620005">,</span><br>
<span class="lineno"></span><span class="op" id="8620007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8620010">func</span>&nbsp;<span class="ident" id="8620015">TestOpen</span><span class="op" id="8620023">(</span><span class="ident" id="8620024">t</span>&nbsp;<span class="op" id="8620026">*</span><span class="ident" id="8620027"><a href="/debug/plan9obj/file_test.go.html#8619367">testing</a></span><span class="op" id="8620034">.</span><span class="ident" id="8620035">T</span><span class="op" id="8620036">)</span>&nbsp;<span class="op" id="8620038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620041">for</span>&nbsp;<span class="ident" id="8620045">i</span>&nbsp;<span class="op" id="8620047">:=</span>&nbsp;<span class="keyword" id="8620050">range</span>&nbsp;<span class="ident" id="8620056"><a href="/debug/plan9obj/file_test.go.html#8619475">fileTests</a></span>&nbsp;<span class="op" id="8620066">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620070">tt</span>&nbsp;<span class="op" id="8620073">:=</span>&nbsp;<span class="op" id="8620076">&amp;</span><span class="ident" id="8620077"><a href="/debug/plan9obj/file_test.go.html#8619475">fileTests</a></span><span class="op" id="8620086">[</span><span class="ident" id="8620087"><a href="/debug/plan9obj/file_test.go.html#8620045">i</a></span><span class="op" id="8620088">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620093">f</span><span class="op" id="8620094">,</span>&nbsp;<span class="ident" id="8620096">err</span>&nbsp;<span class="op" id="8620100">:=</span>&nbsp;<span class="ident" id="8620103"><a href="/debug/plan9obj/file.go.html#5954315">Open</a></span><span class="op" id="8620107">(</span><span class="ident" id="8620108"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620110">.</span><span class="ident" id="8620111">file</span><span class="op" id="8620115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620119">if</span>&nbsp;<span class="ident" id="8620122"><a href="/debug/plan9obj/file_test.go.html#8620096">err</a></span>&nbsp;<span class="op" id="8620126">!=</span>&nbsp;<span class="ident" id="8620129">nil</span>&nbsp;<span class="op" id="8620133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620138"><a href="/debug/plan9obj/file_test.go.html#8620024">t</a></span><span class="op" id="8620139">.</span><span class="ident" id="8620140">Error</span><span class="op" id="8620145">(</span><span class="ident" id="8620146"><a href="/debug/plan9obj/file_test.go.html#8620096">err</a></span><span class="op" id="8620149">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620154">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620169">if</span>&nbsp;<span class="op" id="8620172">!</span><span class="ident" id="8620173"><a href="/debug/plan9obj/file_test.go.html#8619356">reflect</a></span><span class="op" id="8620180">.</span><span class="ident" id="8620181">DeepEqual</span><span class="op" id="8620190">(</span><span class="ident" id="8620191"><a href="/debug/plan9obj/file_test.go.html#8620093">f</a></span><span class="op" id="8620192">.</span><span class="ident" id="8620193">FileHeader</span><span class="op" id="8620203">,</span>&nbsp;<span class="ident" id="8620205"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620207">.</span><span class="ident" id="8620208">hdr</span><span class="op" id="8620211">)</span>&nbsp;<span class="op" id="8620213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620218"><a href="/debug/plan9obj/file_test.go.html#8620024">t</a></span><span class="op" id="8620219">.</span><span class="ident" id="8620220">Errorf</span><span class="op" id="8620226">(</span><span class="string" id="8620227">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="8620263">,</span>&nbsp;<span class="ident" id="8620265"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620267">.</span><span class="ident" id="8620268">file</span><span class="op" id="8620272">,</span>&nbsp;<span class="ident" id="8620274"><a href="/debug/plan9obj/file_test.go.html#8620093">f</a></span><span class="op" id="8620275">.</span><span class="ident" id="8620276">FileHeader</span><span class="op" id="8620286">,</span>&nbsp;<span class="ident" id="8620288"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620290">.</span><span class="ident" id="8620291">hdr</span><span class="op" id="8620294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620299">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620315">for</span>&nbsp;<span class="ident" id="8620319">i</span><span class="op" id="8620320">,</span>&nbsp;<span class="ident" id="8620322">sh</span>&nbsp;<span class="op" id="8620325">:=</span>&nbsp;<span class="keyword" id="8620328">range</span>&nbsp;<span class="ident" id="8620334"><a href="/debug/plan9obj/file_test.go.html#8620093">f</a></span><span class="op" id="8620335">.</span><span class="ident" id="8620336">Sections</span>&nbsp;<span class="op" id="8620345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620350">if</span>&nbsp;<span class="ident" id="8620353"><a href="/debug/plan9obj/file_test.go.html#8620319">i</a></span>&nbsp;<span class="op" id="8620355">&gt;=</span>&nbsp;<span class="builtinfunc" id="8620358">len</span><span class="op" id="8620361">(</span><span class="ident" id="8620362"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620364">.</span><span class="ident" id="8620365">sections</span><span class="op" id="8620373">)</span>&nbsp;<span class="op" id="8620375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620381">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620395">have</span>&nbsp;<span class="op" id="8620400">:=</span>&nbsp;<span class="op" id="8620403">&amp;</span><span class="ident" id="8620404"><a href="/debug/plan9obj/file_test.go.html#8620322">sh</a></span><span class="op" id="8620406">.</span><span class="ident" id="8620407">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620424">want</span>&nbsp;<span class="op" id="8620429">:=</span>&nbsp;<span class="ident" id="8620432"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620434">.</span><span class="ident" id="8620435">sections</span><span class="op" id="8620443">[</span><span class="ident" id="8620444"><a href="/debug/plan9obj/file_test.go.html#8620319">i</a></span><span class="op" id="8620445">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620450">if</span>&nbsp;<span class="op" id="8620453">!</span><span class="ident" id="8620454"><a href="/debug/plan9obj/file_test.go.html#8619356">reflect</a></span><span class="op" id="8620461">.</span><span class="ident" id="8620462">DeepEqual</span><span class="op" id="8620471">(</span><span class="ident" id="8620472"><a href="/debug/plan9obj/file_test.go.html#8620395">have</a></span><span class="op" id="8620476">,</span>&nbsp;<span class="ident" id="8620478"><a href="/debug/plan9obj/file_test.go.html#8620424">want</a></span><span class="op" id="8620482">)</span>&nbsp;<span class="op" id="8620484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620490"><a href="/debug/plan9obj/file_test.go.html#8620024">t</a></span><span class="op" id="8620491">.</span><span class="ident" id="8620492">Errorf</span><span class="op" id="8620498">(</span><span class="string" id="8620499">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="8620547">,</span>&nbsp;<span class="ident" id="8620549"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620551">.</span><span class="ident" id="8620552">file</span><span class="op" id="8620556">,</span>&nbsp;<span class="ident" id="8620558"><a href="/debug/plan9obj/file_test.go.html#8620319">i</a></span><span class="op" id="8620559">,</span>&nbsp;<span class="ident" id="8620561"><a href="/debug/plan9obj/file_test.go.html#8620395">have</a></span><span class="op" id="8620565">,</span>&nbsp;<span class="ident" id="8620567"><a href="/debug/plan9obj/file_test.go.html#8620424">want</a></span><span class="op" id="8620571">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620584">tn</span>&nbsp;<span class="op" id="8620587">:=</span>&nbsp;<span class="builtinfunc" id="8620590">len</span><span class="op" id="8620593">(</span><span class="ident" id="8620594"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620596">.</span><span class="ident" id="8620597">sections</span><span class="op" id="8620605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620609">fn</span>&nbsp;<span class="op" id="8620612">:=</span>&nbsp;<span class="builtinfunc" id="8620615">len</span><span class="op" id="8620618">(</span><span class="ident" id="8620619"><a href="/debug/plan9obj/file_test.go.html#8620093">f</a></span><span class="op" id="8620620">.</span><span class="ident" id="8620621">Sections</span><span class="op" id="8620629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620633">if</span>&nbsp;<span class="ident" id="8620636"><a href="/debug/plan9obj/file_test.go.html#8620584">tn</a></span>&nbsp;<span class="op" id="8620639">!=</span>&nbsp;<span class="ident" id="8620642"><a href="/debug/plan9obj/file_test.go.html#8620609">fn</a></span>&nbsp;<span class="op" id="8620645">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620650"><a href="/debug/plan9obj/file_test.go.html#8620024">t</a></span><span class="op" id="8620651">.</span><span class="ident" id="8620652">Errorf</span><span class="op" id="8620658">(</span><span class="string" id="8620659">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8620697">,</span>&nbsp;<span class="ident" id="8620699"><a href="/debug/plan9obj/file_test.go.html#8620070">tt</a></span><span class="op" id="8620701">.</span><span class="ident" id="8620702">file</span><span class="op" id="8620706">,</span>&nbsp;<span class="ident" id="8620708"><a href="/debug/plan9obj/file_test.go.html#8620609">fn</a></span><span class="op" id="8620710">,</span>&nbsp;<span class="ident" id="8620712"><a href="/debug/plan9obj/file_test.go.html#8620584">tn</a></span><span class="op" id="8620714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620721">}</span><br>
<span class="lineno"></span><span class="op" id="8620723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8620726">func</span>&nbsp;<span class="ident" id="8620731">TestOpenFailure</span><span class="op" id="8620746">(</span><span class="ident" id="8620747">t</span>&nbsp;<span class="op" id="8620749">*</span><span class="ident" id="8620750"><a href="/debug/plan9obj/file_test.go.html#8619367">testing</a></span><span class="op" id="8620757">.</span><span class="ident" id="8620758">T</span><span class="op" id="8620759">)</span>&nbsp;<span class="op" id="8620761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620764">filename</span>&nbsp;<span class="op" id="8620773">:=</span>&nbsp;<span class="string" id="8620776">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8620789">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620817">_</span><span class="op" id="8620818">,</span>&nbsp;<span class="ident" id="8620820">err</span>&nbsp;<span class="op" id="8620824">:=</span>&nbsp;<span class="ident" id="8620827"><a href="/debug/plan9obj/file.go.html#5954315">Open</a></span><span class="op" id="8620831">(</span><span class="ident" id="8620832"><a href="/debug/plan9obj/file_test.go.html#8620764">filename</a></span><span class="op" id="8620840">)</span>&nbsp;<span class="comment" id="8620842">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8620858">if</span>&nbsp;<span class="ident" id="8620861"><a href="/debug/plan9obj/file_test.go.html#8620820">err</a></span>&nbsp;<span class="op" id="8620865">==</span>&nbsp;<span class="ident" id="8620868">nil</span>&nbsp;<span class="op" id="8620872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8620876"><a href="/debug/plan9obj/file_test.go.html#8620747">t</a></span><span class="op" id="8620877">.</span><span class="ident" id="8620878">Errorf</span><span class="op" id="8620884">(</span><span class="string" id="8620885">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="8620918">,</span>&nbsp;<span class="ident" id="8620920"><a href="/debug/plan9obj/file_test.go.html#8620764">filename</a></span><span class="op" id="8620928">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8620931">}</span><br>
<span class="lineno"></span><span class="op" id="8620933">}</span>
</div>
</body>
</html>
