<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6471613">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6471668">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6471722">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6471773">package</span>&nbsp;<span class="ident" id="6471781">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6471787">import</span>&nbsp;<span class="op" id="6471794">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6471797">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6471806">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6471816">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6471819">type</span>&nbsp;<span class="ident" id="6471824">clipTest</span>&nbsp;<span class="keyword" id="6471833">struct</span>&nbsp;<span class="op" id="6471840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471843">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6471857">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471865">r</span><span class="op" id="6471866">,</span>&nbsp;<span class="ident" id="6471868">dr</span><span class="op" id="6471870">,</span>&nbsp;<span class="ident" id="6471872">sr</span><span class="op" id="6471874">,</span>&nbsp;<span class="ident" id="6471876">mr</span>&nbsp;<span class="ident" id="6471879">image</span><span class="op" id="6471884">.</span><span class="ident" id="6471885">Rectangle</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471896">sp</span><span class="op" id="6471898">,</span>&nbsp;<span class="ident" id="6471900">mp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6471910">image</span><span class="op" id="6471915">.</span><span class="ident" id="6471916">Point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471923">nilMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6471937">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471943">r0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6471957">image</span><span class="op" id="6471962">.</span><span class="ident" id="6471963">Rectangle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471974">sp0</span><span class="op" id="6471977">,</span>&nbsp;<span class="ident" id="6471979">mp0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6471988">image</span><span class="op" id="6471993">.</span><span class="ident" id="6471994">Point</span><br>
<span class="lineno"></span><span class="op" id="6472000">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6472003">var</span>&nbsp;<span class="ident" id="6472007">clipTests</span>&nbsp;<span class="op" id="6472017">=</span>&nbsp;<span class="op" id="6472019">[</span><span class="op" id="6472020">]</span><span class="ident" id="6472021">clipTest</span><span class="op" id="6472029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6472032">//&nbsp;The&nbsp;following&nbsp;tests&nbsp;all&nbsp;have&nbsp;a&nbsp;nil&nbsp;mask.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6472081">&#34;basic&#34;</span><span class="op" id="6472088">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472092">image</span><span class="op" id="6472097">.</span><span class="ident" id="6472098">Rect</span><span class="op" id="6472102">(</span><span class="num" id="6472103">0</span><span class="op" id="6472104">,</span>&nbsp;<span class="num" id="6472106">0</span><span class="op" id="6472107">,</span>&nbsp;<span class="num" id="6472109">100</span><span class="op" id="6472112">,</span>&nbsp;<span class="num" id="6472114">100</span><span class="op" id="6472117">)</span><span class="op" id="6472118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472122">image</span><span class="op" id="6472127">.</span><span class="ident" id="6472128">Rect</span><span class="op" id="6472132">(</span><span class="num" id="6472133">0</span><span class="op" id="6472134">,</span>&nbsp;<span class="num" id="6472136">0</span><span class="op" id="6472137">,</span>&nbsp;<span class="num" id="6472139">100</span><span class="op" id="6472142">,</span>&nbsp;<span class="num" id="6472144">100</span><span class="op" id="6472147">)</span><span class="op" id="6472148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472152">image</span><span class="op" id="6472157">.</span><span class="ident" id="6472158">Rect</span><span class="op" id="6472162">(</span><span class="num" id="6472163">0</span><span class="op" id="6472164">,</span>&nbsp;<span class="num" id="6472166">0</span><span class="op" id="6472167">,</span>&nbsp;<span class="num" id="6472169">100</span><span class="op" id="6472172">,</span>&nbsp;<span class="num" id="6472174">100</span><span class="op" id="6472177">)</span><span class="op" id="6472178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472182">image</span><span class="op" id="6472187">.</span><span class="ident" id="6472188">ZR</span><span class="op" id="6472190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472194">image</span><span class="op" id="6472199">.</span><span class="ident" id="6472200">ZP</span><span class="op" id="6472202">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472206">image</span><span class="op" id="6472211">.</span><span class="ident" id="6472212">ZP</span><span class="op" id="6472214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6472218">true</span><span class="op" id="6472222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472226">image</span><span class="op" id="6472231">.</span><span class="ident" id="6472232">Rect</span><span class="op" id="6472236">(</span><span class="num" id="6472237">0</span><span class="op" id="6472238">,</span>&nbsp;<span class="num" id="6472240">0</span><span class="op" id="6472241">,</span>&nbsp;<span class="num" id="6472243">100</span><span class="op" id="6472246">,</span>&nbsp;<span class="num" id="6472248">100</span><span class="op" id="6472251">)</span><span class="op" id="6472252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472256">image</span><span class="op" id="6472261">.</span><span class="ident" id="6472262">ZP</span><span class="op" id="6472264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472268">image</span><span class="op" id="6472273">.</span><span class="ident" id="6472274">ZP</span><span class="op" id="6472276">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472279">}</span><span class="op" id="6472280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6472287">&#34;clip&nbsp;dr&#34;</span><span class="op" id="6472296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472300">image</span><span class="op" id="6472305">.</span><span class="ident" id="6472306">Rect</span><span class="op" id="6472310">(</span><span class="num" id="6472311">0</span><span class="op" id="6472312">,</span>&nbsp;<span class="num" id="6472314">0</span><span class="op" id="6472315">,</span>&nbsp;<span class="num" id="6472317">100</span><span class="op" id="6472320">,</span>&nbsp;<span class="num" id="6472322">100</span><span class="op" id="6472325">)</span><span class="op" id="6472326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472330">image</span><span class="op" id="6472335">.</span><span class="ident" id="6472336">Rect</span><span class="op" id="6472340">(</span><span class="num" id="6472341">40</span><span class="op" id="6472343">,</span>&nbsp;<span class="num" id="6472345">40</span><span class="op" id="6472347">,</span>&nbsp;<span class="num" id="6472349">60</span><span class="op" id="6472351">,</span>&nbsp;<span class="num" id="6472353">60</span><span class="op" id="6472355">)</span><span class="op" id="6472356">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472360">image</span><span class="op" id="6472365">.</span><span class="ident" id="6472366">Rect</span><span class="op" id="6472370">(</span><span class="num" id="6472371">0</span><span class="op" id="6472372">,</span>&nbsp;<span class="num" id="6472374">0</span><span class="op" id="6472375">,</span>&nbsp;<span class="num" id="6472377">100</span><span class="op" id="6472380">,</span>&nbsp;<span class="num" id="6472382">100</span><span class="op" id="6472385">)</span><span class="op" id="6472386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472390">image</span><span class="op" id="6472395">.</span><span class="ident" id="6472396">ZR</span><span class="op" id="6472398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472402">image</span><span class="op" id="6472407">.</span><span class="ident" id="6472408">ZP</span><span class="op" id="6472410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472414">image</span><span class="op" id="6472419">.</span><span class="ident" id="6472420">ZP</span><span class="op" id="6472422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6472426">true</span><span class="op" id="6472430">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472434">image</span><span class="op" id="6472439">.</span><span class="ident" id="6472440">Rect</span><span class="op" id="6472444">(</span><span class="num" id="6472445">40</span><span class="op" id="6472447">,</span>&nbsp;<span class="num" id="6472449">40</span><span class="op" id="6472451">,</span>&nbsp;<span class="num" id="6472453">60</span><span class="op" id="6472455">,</span>&nbsp;<span class="num" id="6472457">60</span><span class="op" id="6472459">)</span><span class="op" id="6472460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472464">image</span><span class="op" id="6472469">.</span><span class="ident" id="6472470">Pt</span><span class="op" id="6472472">(</span><span class="num" id="6472473">40</span><span class="op" id="6472475">,</span>&nbsp;<span class="num" id="6472477">40</span><span class="op" id="6472479">)</span><span class="op" id="6472480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472484">image</span><span class="op" id="6472489">.</span><span class="ident" id="6472490">ZP</span><span class="op" id="6472492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472495">}</span><span class="op" id="6472496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472499">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6472503">&#34;clip&nbsp;sr&#34;</span><span class="op" id="6472512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472516">image</span><span class="op" id="6472521">.</span><span class="ident" id="6472522">Rect</span><span class="op" id="6472526">(</span><span class="num" id="6472527">0</span><span class="op" id="6472528">,</span>&nbsp;<span class="num" id="6472530">0</span><span class="op" id="6472531">,</span>&nbsp;<span class="num" id="6472533">100</span><span class="op" id="6472536">,</span>&nbsp;<span class="num" id="6472538">100</span><span class="op" id="6472541">)</span><span class="op" id="6472542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472546">image</span><span class="op" id="6472551">.</span><span class="ident" id="6472552">Rect</span><span class="op" id="6472556">(</span><span class="num" id="6472557">0</span><span class="op" id="6472558">,</span>&nbsp;<span class="num" id="6472560">0</span><span class="op" id="6472561">,</span>&nbsp;<span class="num" id="6472563">100</span><span class="op" id="6472566">,</span>&nbsp;<span class="num" id="6472568">100</span><span class="op" id="6472571">)</span><span class="op" id="6472572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472576">image</span><span class="op" id="6472581">.</span><span class="ident" id="6472582">Rect</span><span class="op" id="6472586">(</span><span class="num" id="6472587">20</span><span class="op" id="6472589">,</span>&nbsp;<span class="num" id="6472591">20</span><span class="op" id="6472593">,</span>&nbsp;<span class="num" id="6472595">80</span><span class="op" id="6472597">,</span>&nbsp;<span class="num" id="6472599">80</span><span class="op" id="6472601">)</span><span class="op" id="6472602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472606">image</span><span class="op" id="6472611">.</span><span class="ident" id="6472612">ZR</span><span class="op" id="6472614">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472618">image</span><span class="op" id="6472623">.</span><span class="ident" id="6472624">ZP</span><span class="op" id="6472626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472630">image</span><span class="op" id="6472635">.</span><span class="ident" id="6472636">ZP</span><span class="op" id="6472638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6472642">true</span><span class="op" id="6472646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472650">image</span><span class="op" id="6472655">.</span><span class="ident" id="6472656">Rect</span><span class="op" id="6472660">(</span><span class="num" id="6472661">20</span><span class="op" id="6472663">,</span>&nbsp;<span class="num" id="6472665">20</span><span class="op" id="6472667">,</span>&nbsp;<span class="num" id="6472669">80</span><span class="op" id="6472671">,</span>&nbsp;<span class="num" id="6472673">80</span><span class="op" id="6472675">)</span><span class="op" id="6472676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472680">image</span><span class="op" id="6472685">.</span><span class="ident" id="6472686">Pt</span><span class="op" id="6472688">(</span><span class="num" id="6472689">20</span><span class="op" id="6472691">,</span>&nbsp;<span class="num" id="6472693">20</span><span class="op" id="6472695">)</span><span class="op" id="6472696">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472700">image</span><span class="op" id="6472705">.</span><span class="ident" id="6472706">ZP</span><span class="op" id="6472708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472711">}</span><span class="op" id="6472712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6472719">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr&#34;</span><span class="op" id="6472735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472739">image</span><span class="op" id="6472744">.</span><span class="ident" id="6472745">Rect</span><span class="op" id="6472749">(</span><span class="num" id="6472750">0</span><span class="op" id="6472751">,</span>&nbsp;<span class="num" id="6472753">0</span><span class="op" id="6472754">,</span>&nbsp;<span class="num" id="6472756">100</span><span class="op" id="6472759">,</span>&nbsp;<span class="num" id="6472761">100</span><span class="op" id="6472764">)</span><span class="op" id="6472765">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472769">image</span><span class="op" id="6472774">.</span><span class="ident" id="6472775">Rect</span><span class="op" id="6472779">(</span><span class="num" id="6472780">0</span><span class="op" id="6472781">,</span>&nbsp;<span class="num" id="6472783">0</span><span class="op" id="6472784">,</span>&nbsp;<span class="num" id="6472786">50</span><span class="op" id="6472788">,</span>&nbsp;<span class="num" id="6472790">100</span><span class="op" id="6472793">)</span><span class="op" id="6472794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472798">image</span><span class="op" id="6472803">.</span><span class="ident" id="6472804">Rect</span><span class="op" id="6472808">(</span><span class="num" id="6472809">20</span><span class="op" id="6472811">,</span>&nbsp;<span class="num" id="6472813">20</span><span class="op" id="6472815">,</span>&nbsp;<span class="num" id="6472817">80</span><span class="op" id="6472819">,</span>&nbsp;<span class="num" id="6472821">80</span><span class="op" id="6472823">)</span><span class="op" id="6472824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472828">image</span><span class="op" id="6472833">.</span><span class="ident" id="6472834">ZR</span><span class="op" id="6472836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472840">image</span><span class="op" id="6472845">.</span><span class="ident" id="6472846">ZP</span><span class="op" id="6472848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472852">image</span><span class="op" id="6472857">.</span><span class="ident" id="6472858">ZP</span><span class="op" id="6472860">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6472864">true</span><span class="op" id="6472868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472872">image</span><span class="op" id="6472877">.</span><span class="ident" id="6472878">Rect</span><span class="op" id="6472882">(</span><span class="num" id="6472883">20</span><span class="op" id="6472885">,</span>&nbsp;<span class="num" id="6472887">20</span><span class="op" id="6472889">,</span>&nbsp;<span class="num" id="6472891">50</span><span class="op" id="6472893">,</span>&nbsp;<span class="num" id="6472895">80</span><span class="op" id="6472897">)</span><span class="op" id="6472898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472902">image</span><span class="op" id="6472907">.</span><span class="ident" id="6472908">Pt</span><span class="op" id="6472910">(</span><span class="num" id="6472911">20</span><span class="op" id="6472913">,</span>&nbsp;<span class="num" id="6472915">20</span><span class="op" id="6472917">)</span><span class="op" id="6472918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472922">image</span><span class="op" id="6472927">.</span><span class="ident" id="6472928">ZP</span><span class="op" id="6472930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472933">}</span><span class="op" id="6472934">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6472941">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(top-left)&#34;</span><span class="op" id="6472983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472987">image</span><span class="op" id="6472992">.</span><span class="ident" id="6472993">Rect</span><span class="op" id="6472997">(</span><span class="num" id="6472998">0</span><span class="op" id="6472999">,</span>&nbsp;<span class="num" id="6473001">0</span><span class="op" id="6473002">,</span>&nbsp;<span class="num" id="6473004">100</span><span class="op" id="6473007">,</span>&nbsp;<span class="num" id="6473009">100</span><span class="op" id="6473012">)</span><span class="op" id="6473013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473017">image</span><span class="op" id="6473022">.</span><span class="ident" id="6473023">Rect</span><span class="op" id="6473027">(</span><span class="num" id="6473028">0</span><span class="op" id="6473029">,</span>&nbsp;<span class="num" id="6473031">0</span><span class="op" id="6473032">,</span>&nbsp;<span class="num" id="6473034">50</span><span class="op" id="6473036">,</span>&nbsp;<span class="num" id="6473038">100</span><span class="op" id="6473041">)</span><span class="op" id="6473042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473046">image</span><span class="op" id="6473051">.</span><span class="ident" id="6473052">Rect</span><span class="op" id="6473056">(</span><span class="num" id="6473057">20</span><span class="op" id="6473059">,</span>&nbsp;<span class="num" id="6473061">20</span><span class="op" id="6473063">,</span>&nbsp;<span class="num" id="6473065">80</span><span class="op" id="6473067">,</span>&nbsp;<span class="num" id="6473069">80</span><span class="op" id="6473071">)</span><span class="op" id="6473072">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473076">image</span><span class="op" id="6473081">.</span><span class="ident" id="6473082">ZR</span><span class="op" id="6473084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473088">image</span><span class="op" id="6473093">.</span><span class="ident" id="6473094">Pt</span><span class="op" id="6473096">(</span><span class="num" id="6473097">15</span><span class="op" id="6473099">,</span>&nbsp;<span class="num" id="6473101">8</span><span class="op" id="6473102">)</span><span class="op" id="6473103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473107">image</span><span class="op" id="6473112">.</span><span class="ident" id="6473113">ZP</span><span class="op" id="6473115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6473119">true</span><span class="op" id="6473123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473127">image</span><span class="op" id="6473132">.</span><span class="ident" id="6473133">Rect</span><span class="op" id="6473137">(</span><span class="num" id="6473138">5</span><span class="op" id="6473139">,</span>&nbsp;<span class="num" id="6473141">12</span><span class="op" id="6473143">,</span>&nbsp;<span class="num" id="6473145">50</span><span class="op" id="6473147">,</span>&nbsp;<span class="num" id="6473149">72</span><span class="op" id="6473151">)</span><span class="op" id="6473152">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473156">image</span><span class="op" id="6473161">.</span><span class="ident" id="6473162">Pt</span><span class="op" id="6473164">(</span><span class="num" id="6473165">20</span><span class="op" id="6473167">,</span>&nbsp;<span class="num" id="6473169">20</span><span class="op" id="6473171">)</span><span class="op" id="6473172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473176">image</span><span class="op" id="6473181">.</span><span class="ident" id="6473182">ZP</span><span class="op" id="6473184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473187">}</span><span class="op" id="6473188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6473195">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(middle-left)&#34;</span><span class="op" id="6473240">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473244">image</span><span class="op" id="6473249">.</span><span class="ident" id="6473250">Rect</span><span class="op" id="6473254">(</span><span class="num" id="6473255">0</span><span class="op" id="6473256">,</span>&nbsp;<span class="num" id="6473258">0</span><span class="op" id="6473259">,</span>&nbsp;<span class="num" id="6473261">100</span><span class="op" id="6473264">,</span>&nbsp;<span class="num" id="6473266">100</span><span class="op" id="6473269">)</span><span class="op" id="6473270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473274">image</span><span class="op" id="6473279">.</span><span class="ident" id="6473280">Rect</span><span class="op" id="6473284">(</span><span class="num" id="6473285">0</span><span class="op" id="6473286">,</span>&nbsp;<span class="num" id="6473288">0</span><span class="op" id="6473289">,</span>&nbsp;<span class="num" id="6473291">50</span><span class="op" id="6473293">,</span>&nbsp;<span class="num" id="6473295">100</span><span class="op" id="6473298">)</span><span class="op" id="6473299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473303">image</span><span class="op" id="6473308">.</span><span class="ident" id="6473309">Rect</span><span class="op" id="6473313">(</span><span class="num" id="6473314">20</span><span class="op" id="6473316">,</span>&nbsp;<span class="num" id="6473318">20</span><span class="op" id="6473320">,</span>&nbsp;<span class="num" id="6473322">80</span><span class="op" id="6473324">,</span>&nbsp;<span class="num" id="6473326">80</span><span class="op" id="6473328">)</span><span class="op" id="6473329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473333">image</span><span class="op" id="6473338">.</span><span class="ident" id="6473339">ZR</span><span class="op" id="6473341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473345">image</span><span class="op" id="6473350">.</span><span class="ident" id="6473351">Pt</span><span class="op" id="6473353">(</span><span class="num" id="6473354">15</span><span class="op" id="6473356">,</span>&nbsp;<span class="num" id="6473358">66</span><span class="op" id="6473360">)</span><span class="op" id="6473361">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473365">image</span><span class="op" id="6473370">.</span><span class="ident" id="6473371">ZP</span><span class="op" id="6473373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6473377">true</span><span class="op" id="6473381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473385">image</span><span class="op" id="6473390">.</span><span class="ident" id="6473391">Rect</span><span class="op" id="6473395">(</span><span class="num" id="6473396">5</span><span class="op" id="6473397">,</span>&nbsp;<span class="num" id="6473399">0</span><span class="op" id="6473400">,</span>&nbsp;<span class="num" id="6473402">50</span><span class="op" id="6473404">,</span>&nbsp;<span class="num" id="6473406">14</span><span class="op" id="6473408">)</span><span class="op" id="6473409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473413">image</span><span class="op" id="6473418">.</span><span class="ident" id="6473419">Pt</span><span class="op" id="6473421">(</span><span class="num" id="6473422">20</span><span class="op" id="6473424">,</span>&nbsp;<span class="num" id="6473426">66</span><span class="op" id="6473428">)</span><span class="op" id="6473429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473433">image</span><span class="op" id="6473438">.</span><span class="ident" id="6473439">ZP</span><span class="op" id="6473441">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473444">}</span><span class="op" id="6473445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6473452">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(bottom-left)&#34;</span><span class="op" id="6473497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473501">image</span><span class="op" id="6473506">.</span><span class="ident" id="6473507">Rect</span><span class="op" id="6473511">(</span><span class="num" id="6473512">0</span><span class="op" id="6473513">,</span>&nbsp;<span class="num" id="6473515">0</span><span class="op" id="6473516">,</span>&nbsp;<span class="num" id="6473518">100</span><span class="op" id="6473521">,</span>&nbsp;<span class="num" id="6473523">100</span><span class="op" id="6473526">)</span><span class="op" id="6473527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473531">image</span><span class="op" id="6473536">.</span><span class="ident" id="6473537">Rect</span><span class="op" id="6473541">(</span><span class="num" id="6473542">0</span><span class="op" id="6473543">,</span>&nbsp;<span class="num" id="6473545">0</span><span class="op" id="6473546">,</span>&nbsp;<span class="num" id="6473548">50</span><span class="op" id="6473550">,</span>&nbsp;<span class="num" id="6473552">100</span><span class="op" id="6473555">)</span><span class="op" id="6473556">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473560">image</span><span class="op" id="6473565">.</span><span class="ident" id="6473566">Rect</span><span class="op" id="6473570">(</span><span class="num" id="6473571">20</span><span class="op" id="6473573">,</span>&nbsp;<span class="num" id="6473575">20</span><span class="op" id="6473577">,</span>&nbsp;<span class="num" id="6473579">80</span><span class="op" id="6473581">,</span>&nbsp;<span class="num" id="6473583">80</span><span class="op" id="6473585">)</span><span class="op" id="6473586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473590">image</span><span class="op" id="6473595">.</span><span class="ident" id="6473596">ZR</span><span class="op" id="6473598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473602">image</span><span class="op" id="6473607">.</span><span class="ident" id="6473608">Pt</span><span class="op" id="6473610">(</span><span class="num" id="6473611">15</span><span class="op" id="6473613">,</span>&nbsp;<span class="num" id="6473615">91</span><span class="op" id="6473617">)</span><span class="op" id="6473618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473622">image</span><span class="op" id="6473627">.</span><span class="ident" id="6473628">ZP</span><span class="op" id="6473630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6473634">true</span><span class="op" id="6473638">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473642">image</span><span class="op" id="6473647">.</span><span class="ident" id="6473648">ZR</span><span class="op" id="6473650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473654">image</span><span class="op" id="6473659">.</span><span class="ident" id="6473660">Pt</span><span class="op" id="6473662">(</span><span class="num" id="6473663">15</span><span class="op" id="6473665">,</span>&nbsp;<span class="num" id="6473667">91</span><span class="op" id="6473669">)</span><span class="op" id="6473670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473674">image</span><span class="op" id="6473679">.</span><span class="ident" id="6473680">ZP</span><span class="op" id="6473682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473685">}</span><span class="op" id="6473686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473689">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6473693">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;inside&nbsp;sr&#34;</span><span class="op" id="6473723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473727">image</span><span class="op" id="6473732">.</span><span class="ident" id="6473733">Rect</span><span class="op" id="6473737">(</span><span class="num" id="6473738">0</span><span class="op" id="6473739">,</span>&nbsp;<span class="num" id="6473741">0</span><span class="op" id="6473742">,</span>&nbsp;<span class="num" id="6473744">100</span><span class="op" id="6473747">,</span>&nbsp;<span class="num" id="6473749">100</span><span class="op" id="6473752">)</span><span class="op" id="6473753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473757">image</span><span class="op" id="6473762">.</span><span class="ident" id="6473763">Rect</span><span class="op" id="6473767">(</span><span class="num" id="6473768">0</span><span class="op" id="6473769">,</span>&nbsp;<span class="num" id="6473771">0</span><span class="op" id="6473772">,</span>&nbsp;<span class="num" id="6473774">50</span><span class="op" id="6473776">,</span>&nbsp;<span class="num" id="6473778">100</span><span class="op" id="6473781">)</span><span class="op" id="6473782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473786">image</span><span class="op" id="6473791">.</span><span class="ident" id="6473792">Rect</span><span class="op" id="6473796">(</span><span class="num" id="6473797">20</span><span class="op" id="6473799">,</span>&nbsp;<span class="num" id="6473801">20</span><span class="op" id="6473803">,</span>&nbsp;<span class="num" id="6473805">80</span><span class="op" id="6473807">,</span>&nbsp;<span class="num" id="6473809">80</span><span class="op" id="6473811">)</span><span class="op" id="6473812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473816">image</span><span class="op" id="6473821">.</span><span class="ident" id="6473822">ZR</span><span class="op" id="6473824">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473828">image</span><span class="op" id="6473833">.</span><span class="ident" id="6473834">Pt</span><span class="op" id="6473836">(</span><span class="num" id="6473837">44</span><span class="op" id="6473839">,</span>&nbsp;<span class="num" id="6473841">33</span><span class="op" id="6473843">)</span><span class="op" id="6473844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473848">image</span><span class="op" id="6473853">.</span><span class="ident" id="6473854">ZP</span><span class="op" id="6473856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6473860">true</span><span class="op" id="6473864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473868">image</span><span class="op" id="6473873">.</span><span class="ident" id="6473874">Rect</span><span class="op" id="6473878">(</span><span class="num" id="6473879">0</span><span class="op" id="6473880">,</span>&nbsp;<span class="num" id="6473882">0</span><span class="op" id="6473883">,</span>&nbsp;<span class="num" id="6473885">36</span><span class="op" id="6473887">,</span>&nbsp;<span class="num" id="6473889">47</span><span class="op" id="6473891">)</span><span class="op" id="6473892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473896">image</span><span class="op" id="6473901">.</span><span class="ident" id="6473902">Pt</span><span class="op" id="6473904">(</span><span class="num" id="6473905">44</span><span class="op" id="6473907">,</span>&nbsp;<span class="num" id="6473909">33</span><span class="op" id="6473911">)</span><span class="op" id="6473912">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473916">image</span><span class="op" id="6473921">.</span><span class="ident" id="6473922">ZP</span><span class="op" id="6473924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473927">}</span><span class="op" id="6473928">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6473932">//&nbsp;The&nbsp;following&nbsp;tests&nbsp;all&nbsp;have&nbsp;a&nbsp;non-nil&nbsp;mask.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473981">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6473985">&#34;basic&nbsp;mask&#34;</span><span class="op" id="6473997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474001">image</span><span class="op" id="6474006">.</span><span class="ident" id="6474007">Rect</span><span class="op" id="6474011">(</span><span class="num" id="6474012">0</span><span class="op" id="6474013">,</span>&nbsp;<span class="num" id="6474015">0</span><span class="op" id="6474016">,</span>&nbsp;<span class="num" id="6474018">80</span><span class="op" id="6474020">,</span>&nbsp;<span class="num" id="6474022">80</span><span class="op" id="6474024">)</span><span class="op" id="6474025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474029">image</span><span class="op" id="6474034">.</span><span class="ident" id="6474035">Rect</span><span class="op" id="6474039">(</span><span class="num" id="6474040">20</span><span class="op" id="6474042">,</span>&nbsp;<span class="num" id="6474044">0</span><span class="op" id="6474045">,</span>&nbsp;<span class="num" id="6474047">100</span><span class="op" id="6474050">,</span>&nbsp;<span class="num" id="6474052">80</span><span class="op" id="6474054">)</span><span class="op" id="6474055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474059">image</span><span class="op" id="6474064">.</span><span class="ident" id="6474065">Rect</span><span class="op" id="6474069">(</span><span class="num" id="6474070">0</span><span class="op" id="6474071">,</span>&nbsp;<span class="num" id="6474073">0</span><span class="op" id="6474074">,</span>&nbsp;<span class="num" id="6474076">50</span><span class="op" id="6474078">,</span>&nbsp;<span class="num" id="6474080">49</span><span class="op" id="6474082">)</span><span class="op" id="6474083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474087">image</span><span class="op" id="6474092">.</span><span class="ident" id="6474093">Rect</span><span class="op" id="6474097">(</span><span class="num" id="6474098">0</span><span class="op" id="6474099">,</span>&nbsp;<span class="num" id="6474101">0</span><span class="op" id="6474102">,</span>&nbsp;<span class="num" id="6474104">46</span><span class="op" id="6474106">,</span>&nbsp;<span class="num" id="6474108">47</span><span class="op" id="6474110">)</span><span class="op" id="6474111">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474115">image</span><span class="op" id="6474120">.</span><span class="ident" id="6474121">ZP</span><span class="op" id="6474123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474127">image</span><span class="op" id="6474132">.</span><span class="ident" id="6474133">ZP</span><span class="op" id="6474135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6474139">false</span><span class="op" id="6474144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474148">image</span><span class="op" id="6474153">.</span><span class="ident" id="6474154">Rect</span><span class="op" id="6474158">(</span><span class="num" id="6474159">20</span><span class="op" id="6474161">,</span>&nbsp;<span class="num" id="6474163">0</span><span class="op" id="6474164">,</span>&nbsp;<span class="num" id="6474166">46</span><span class="op" id="6474168">,</span>&nbsp;<span class="num" id="6474170">47</span><span class="op" id="6474172">)</span><span class="op" id="6474173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474177">image</span><span class="op" id="6474182">.</span><span class="ident" id="6474183">Pt</span><span class="op" id="6474185">(</span><span class="num" id="6474186">20</span><span class="op" id="6474188">,</span>&nbsp;<span class="num" id="6474190">0</span><span class="op" id="6474191">)</span><span class="op" id="6474192">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474196">image</span><span class="op" id="6474201">.</span><span class="ident" id="6474202">Pt</span><span class="op" id="6474204">(</span><span class="num" id="6474205">20</span><span class="op" id="6474207">,</span>&nbsp;<span class="num" id="6474209">0</span><span class="op" id="6474210">)</span><span class="op" id="6474211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474214">}</span><span class="op" id="6474215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6474218">//&nbsp;TODO(nigeltao):&nbsp;write&nbsp;more&nbsp;tests.</span><br>
<span class="lineno"></span><span class="op" id="6474255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="6474258">func</span>&nbsp;<span class="ident" id="6474263">TestClip</span><span class="op" id="6474271">(</span><span class="ident" id="6474272">t</span>&nbsp;<span class="op" id="6474274">*</span><span class="ident" id="6474275">testing</span><span class="op" id="6474282">.</span><span class="ident" id="6474283">T</span><span class="op" id="6474284">)</span>&nbsp;<span class="op" id="6474286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474289">dst0</span>&nbsp;<span class="op" id="6474294">:=</span>&nbsp;<span class="ident" id="6474297">image</span><span class="op" id="6474302">.</span><span class="ident" id="6474303">NewRGBA</span><span class="op" id="6474310">(</span><span class="ident" id="6474311">image</span><span class="op" id="6474316">.</span><span class="ident" id="6474317">Rect</span><span class="op" id="6474321">(</span><span class="num" id="6474322">0</span><span class="op" id="6474323">,</span>&nbsp;<span class="num" id="6474325">0</span><span class="op" id="6474326">,</span>&nbsp;<span class="num" id="6474328">100</span><span class="op" id="6474331">,</span>&nbsp;<span class="num" id="6474333">100</span><span class="op" id="6474336">)</span><span class="op" id="6474337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474340">src0</span>&nbsp;<span class="op" id="6474345">:=</span>&nbsp;<span class="ident" id="6474348">image</span><span class="op" id="6474353">.</span><span class="ident" id="6474354">NewRGBA</span><span class="op" id="6474361">(</span><span class="ident" id="6474362">image</span><span class="op" id="6474367">.</span><span class="ident" id="6474368">Rect</span><span class="op" id="6474372">(</span><span class="num" id="6474373">0</span><span class="op" id="6474374">,</span>&nbsp;<span class="num" id="6474376">0</span><span class="op" id="6474377">,</span>&nbsp;<span class="num" id="6474379">100</span><span class="op" id="6474382">,</span>&nbsp;<span class="num" id="6474384">100</span><span class="op" id="6474387">)</span><span class="op" id="6474388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474391">mask0</span>&nbsp;<span class="op" id="6474397">:=</span>&nbsp;<span class="ident" id="6474400">image</span><span class="op" id="6474405">.</span><span class="ident" id="6474406">NewRGBA</span><span class="op" id="6474413">(</span><span class="ident" id="6474414">image</span><span class="op" id="6474419">.</span><span class="ident" id="6474420">Rect</span><span class="op" id="6474424">(</span><span class="num" id="6474425">0</span><span class="op" id="6474426">,</span>&nbsp;<span class="num" id="6474428">0</span><span class="op" id="6474429">,</span>&nbsp;<span class="num" id="6474431">100</span><span class="op" id="6474434">,</span>&nbsp;<span class="num" id="6474436">100</span><span class="op" id="6474439">)</span><span class="op" id="6474440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474443">for</span>&nbsp;<span class="ident" id="6474447">_</span><span class="op" id="6474448">,</span>&nbsp;<span class="ident" id="6474450">c</span>&nbsp;<span class="op" id="6474452">:=</span>&nbsp;<span class="keyword" id="6474455">range</span>&nbsp;<span class="ident" id="6474461">clipTests</span>&nbsp;<span class="op" id="6474471">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474475">dst</span>&nbsp;<span class="op" id="6474479">:=</span>&nbsp;<span class="ident" id="6474482">dst0</span><span class="op" id="6474486">.</span><span class="ident" id="6474487">SubImage</span><span class="op" id="6474495">(</span><span class="ident" id="6474496">c</span><span class="op" id="6474497">.</span><span class="ident" id="6474498">dr</span><span class="op" id="6474500">)</span><span class="op" id="6474501">.</span><span class="op" id="6474502">(</span><span class="op" id="6474503">*</span><span class="ident" id="6474504">image</span><span class="op" id="6474509">.</span><span class="ident" id="6474510">RGBA</span><span class="op" id="6474514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474518">src</span>&nbsp;<span class="op" id="6474522">:=</span>&nbsp;<span class="ident" id="6474525">src0</span><span class="op" id="6474529">.</span><span class="ident" id="6474530">SubImage</span><span class="op" id="6474538">(</span><span class="ident" id="6474539">c</span><span class="op" id="6474540">.</span><span class="ident" id="6474541">sr</span><span class="op" id="6474543">)</span><span class="op" id="6474544">.</span><span class="op" id="6474545">(</span><span class="op" id="6474546">*</span><span class="ident" id="6474547">image</span><span class="op" id="6474552">.</span><span class="ident" id="6474553">RGBA</span><span class="op" id="6474557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474561">var</span>&nbsp;<span class="ident" id="6474565">mask</span>&nbsp;<span class="ident" id="6474570">image</span><span class="op" id="6474575">.</span><span class="ident" id="6474576">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474584">if</span>&nbsp;<span class="op" id="6474587">!</span><span class="ident" id="6474588">c</span><span class="op" id="6474589">.</span><span class="ident" id="6474590">nilMask</span>&nbsp;<span class="op" id="6474598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474603">mask</span>&nbsp;<span class="op" id="6474608">=</span>&nbsp;<span class="ident" id="6474610">mask0</span><span class="op" id="6474615">.</span><span class="ident" id="6474616">SubImage</span><span class="op" id="6474624">(</span><span class="ident" id="6474625">c</span><span class="op" id="6474626">.</span><span class="ident" id="6474627">mr</span><span class="op" id="6474629">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474637">r</span><span class="op" id="6474638">,</span>&nbsp;<span class="ident" id="6474640">sp</span><span class="op" id="6474642">,</span>&nbsp;<span class="ident" id="6474644">mp</span>&nbsp;<span class="op" id="6474647">:=</span>&nbsp;<span class="ident" id="6474650">c</span><span class="op" id="6474651">.</span><span class="ident" id="6474652">r</span><span class="op" id="6474653">,</span>&nbsp;<span class="ident" id="6474655">c</span><span class="op" id="6474656">.</span><span class="ident" id="6474657">sp</span><span class="op" id="6474659">,</span>&nbsp;<span class="ident" id="6474661">c</span><span class="op" id="6474662">.</span><span class="ident" id="6474663">mp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474668">clip</span><span class="op" id="6474672">(</span><span class="ident" id="6474673">dst</span><span class="op" id="6474676">,</span>&nbsp;<span class="op" id="6474678">&amp;</span><span class="ident" id="6474679">r</span><span class="op" id="6474680">,</span>&nbsp;<span class="ident" id="6474682">src</span><span class="op" id="6474685">,</span>&nbsp;<span class="op" id="6474687">&amp;</span><span class="ident" id="6474688">sp</span><span class="op" id="6474690">,</span>&nbsp;<span class="ident" id="6474692">mask</span><span class="op" id="6474696">,</span>&nbsp;<span class="op" id="6474698">&amp;</span><span class="ident" id="6474699">mp</span><span class="op" id="6474701">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6474706">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;actual&nbsp;results&nbsp;equal&nbsp;the&nbsp;expected&nbsp;results.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474769">if</span>&nbsp;<span class="op" id="6474772">!</span><span class="ident" id="6474773">c</span><span class="op" id="6474774">.</span><span class="ident" id="6474775">r0</span><span class="op" id="6474777">.</span><span class="ident" id="6474778">Eq</span><span class="op" id="6474780">(</span><span class="ident" id="6474781">r</span><span class="op" id="6474782">)</span>&nbsp;<span class="op" id="6474784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474789">t</span><span class="op" id="6474790">.</span><span class="ident" id="6474791">Errorf</span><span class="op" id="6474797">(</span><span class="string" id="6474798">&#34;%s:&nbsp;clip&nbsp;rectangle&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6474833">,</span>&nbsp;<span class="ident" id="6474835">c</span><span class="op" id="6474836">.</span><span class="ident" id="6474837">desc</span><span class="op" id="6474841">,</span>&nbsp;<span class="ident" id="6474843">c</span><span class="op" id="6474844">.</span><span class="ident" id="6474845">r0</span><span class="op" id="6474847">,</span>&nbsp;<span class="ident" id="6474849">r</span><span class="op" id="6474850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474855">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474870">if</span>&nbsp;<span class="op" id="6474873">!</span><span class="ident" id="6474874">c</span><span class="op" id="6474875">.</span><span class="ident" id="6474876">sp0</span><span class="op" id="6474879">.</span><span class="ident" id="6474880">Eq</span><span class="op" id="6474882">(</span><span class="ident" id="6474883">sp</span><span class="op" id="6474885">)</span>&nbsp;<span class="op" id="6474887">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474892">t</span><span class="op" id="6474893">.</span><span class="ident" id="6474894">Errorf</span><span class="op" id="6474900">(</span><span class="string" id="6474901">&#34;%s:&nbsp;sp&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6474924">,</span>&nbsp;<span class="ident" id="6474926">c</span><span class="op" id="6474927">.</span><span class="ident" id="6474928">desc</span><span class="op" id="6474932">,</span>&nbsp;<span class="ident" id="6474934">c</span><span class="op" id="6474935">.</span><span class="ident" id="6474936">sp0</span><span class="op" id="6474939">,</span>&nbsp;<span class="ident" id="6474941">sp</span><span class="op" id="6474943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474948">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474963">if</span>&nbsp;<span class="op" id="6474966">!</span><span class="ident" id="6474967">c</span><span class="op" id="6474968">.</span><span class="ident" id="6474969">nilMask</span>&nbsp;<span class="op" id="6474977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474982">if</span>&nbsp;<span class="op" id="6474985">!</span><span class="ident" id="6474986">c</span><span class="op" id="6474987">.</span><span class="ident" id="6474988">mp0</span><span class="op" id="6474991">.</span><span class="ident" id="6474992">Eq</span><span class="op" id="6474994">(</span><span class="ident" id="6474995">mp</span><span class="op" id="6474997">)</span>&nbsp;<span class="op" id="6474999">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475005">t</span><span class="op" id="6475006">.</span><span class="ident" id="6475007">Errorf</span><span class="op" id="6475013">(</span><span class="string" id="6475014">&#34;%s:&nbsp;mp&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6475037">,</span>&nbsp;<span class="ident" id="6475039">c</span><span class="op" id="6475040">.</span><span class="ident" id="6475041">desc</span><span class="op" id="6475045">,</span>&nbsp;<span class="ident" id="6475047">c</span><span class="op" id="6475048">.</span><span class="ident" id="6475049">mp0</span><span class="op" id="6475052">,</span>&nbsp;<span class="ident" id="6475054">mp</span><span class="op" id="6475056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475062">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475083">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;clipped&nbsp;rectangle&nbsp;is&nbsp;contained&nbsp;by&nbsp;the&nbsp;dst&nbsp;/&nbsp;src&nbsp;/&nbsp;mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475158">//&nbsp;rectangles,&nbsp;in&nbsp;their&nbsp;respective&nbsp;co-ordinate&nbsp;spaces.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475215">if</span>&nbsp;<span class="op" id="6475218">!</span><span class="ident" id="6475219">r</span><span class="op" id="6475220">.</span><span class="ident" id="6475221">In</span><span class="op" id="6475223">(</span><span class="ident" id="6475224">c</span><span class="op" id="6475225">.</span><span class="ident" id="6475226">dr</span><span class="op" id="6475228">)</span>&nbsp;<span class="op" id="6475230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475235">t</span><span class="op" id="6475236">.</span><span class="ident" id="6475237">Errorf</span><span class="op" id="6475243">(</span><span class="string" id="6475244">&#34;%s:&nbsp;c.dr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;r&nbsp;%v&#34;</span><span class="op" id="6475279">,</span>&nbsp;<span class="ident" id="6475281">c</span><span class="op" id="6475282">.</span><span class="ident" id="6475283">desc</span><span class="op" id="6475287">,</span>&nbsp;<span class="ident" id="6475289">c</span><span class="op" id="6475290">.</span><span class="ident" id="6475291">dr</span><span class="op" id="6475293">,</span>&nbsp;<span class="ident" id="6475295">r</span><span class="op" id="6475296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475300">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475304">//&nbsp;sr&nbsp;is&nbsp;r&nbsp;translated&nbsp;into&nbsp;src&#39;s&nbsp;co-ordinate&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475358">sr</span>&nbsp;<span class="op" id="6475361">:=</span>&nbsp;<span class="ident" id="6475364">r</span><span class="op" id="6475365">.</span><span class="ident" id="6475366">Add</span><span class="op" id="6475369">(</span><span class="ident" id="6475370">c</span><span class="op" id="6475371">.</span><span class="ident" id="6475372">sp</span><span class="op" id="6475374">.</span><span class="ident" id="6475375">Sub</span><span class="op" id="6475378">(</span><span class="ident" id="6475379">c</span><span class="op" id="6475380">.</span><span class="ident" id="6475381">dr</span><span class="op" id="6475383">.</span><span class="ident" id="6475384">Min</span><span class="op" id="6475387">)</span><span class="op" id="6475388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475392">if</span>&nbsp;<span class="op" id="6475395">!</span><span class="ident" id="6475396">sr</span><span class="op" id="6475398">.</span><span class="ident" id="6475399">In</span><span class="op" id="6475401">(</span><span class="ident" id="6475402">c</span><span class="op" id="6475403">.</span><span class="ident" id="6475404">sr</span><span class="op" id="6475406">)</span>&nbsp;<span class="op" id="6475408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475413">t</span><span class="op" id="6475414">.</span><span class="ident" id="6475415">Errorf</span><span class="op" id="6475421">(</span><span class="string" id="6475422">&#34;%s:&nbsp;c.sr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;sr&nbsp;%v&#34;</span><span class="op" id="6475458">,</span>&nbsp;<span class="ident" id="6475460">c</span><span class="op" id="6475461">.</span><span class="ident" id="6475462">desc</span><span class="op" id="6475466">,</span>&nbsp;<span class="ident" id="6475468">c</span><span class="op" id="6475469">.</span><span class="ident" id="6475470">sr</span><span class="op" id="6475472">,</span>&nbsp;<span class="ident" id="6475474">sr</span><span class="op" id="6475476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475480">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475484">if</span>&nbsp;<span class="op" id="6475487">!</span><span class="ident" id="6475488">c</span><span class="op" id="6475489">.</span><span class="ident" id="6475490">nilMask</span>&nbsp;<span class="op" id="6475498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475503">//&nbsp;mr&nbsp;is&nbsp;r&nbsp;translated&nbsp;into&nbsp;mask&#39;s&nbsp;co-ordinate&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475559">mr</span>&nbsp;<span class="op" id="6475562">:=</span>&nbsp;<span class="ident" id="6475565">r</span><span class="op" id="6475566">.</span><span class="ident" id="6475567">Add</span><span class="op" id="6475570">(</span><span class="ident" id="6475571">c</span><span class="op" id="6475572">.</span><span class="ident" id="6475573">mp</span><span class="op" id="6475575">.</span><span class="ident" id="6475576">Sub</span><span class="op" id="6475579">(</span><span class="ident" id="6475580">c</span><span class="op" id="6475581">.</span><span class="ident" id="6475582">dr</span><span class="op" id="6475584">.</span><span class="ident" id="6475585">Min</span><span class="op" id="6475588">)</span><span class="op" id="6475589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475594">if</span>&nbsp;<span class="op" id="6475597">!</span><span class="ident" id="6475598">mr</span><span class="op" id="6475600">.</span><span class="ident" id="6475601">In</span><span class="op" id="6475603">(</span><span class="ident" id="6475604">c</span><span class="op" id="6475605">.</span><span class="ident" id="6475606">mr</span><span class="op" id="6475608">)</span>&nbsp;<span class="op" id="6475610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475616">t</span><span class="op" id="6475617">.</span><span class="ident" id="6475618">Errorf</span><span class="op" id="6475624">(</span><span class="string" id="6475625">&#34;%s:&nbsp;c.mr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;mr&nbsp;%v&#34;</span><span class="op" id="6475661">,</span>&nbsp;<span class="ident" id="6475663">c</span><span class="op" id="6475664">.</span><span class="ident" id="6475665">desc</span><span class="op" id="6475669">,</span>&nbsp;<span class="ident" id="6475671">c</span><span class="op" id="6475672">.</span><span class="ident" id="6475673">mr</span><span class="op" id="6475675">,</span>&nbsp;<span class="ident" id="6475677">mr</span><span class="op" id="6475679">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475691">}</span><br>
<span class="lineno"></span><span class="op" id="6475693">}</span>
</div>
</body>
</html>
