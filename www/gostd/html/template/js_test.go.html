<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html" class="current">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7929380">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7929435">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7929489">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7929540">package</span>&nbsp;<span class="ident" id="7929548">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7929558">import</span>&nbsp;<span class="op" id="7929565">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7929568">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7929577">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7929585">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7929596">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7929606">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7929609">func</span>&nbsp;<span class="ident" id="7929614">TestNextJsCtx</span><span class="op" id="7929627">(</span><span class="ident" id="7929628">t</span>&nbsp;<span class="op" id="7929630">*</span><span class="ident" id="7929631">testing</span><span class="op" id="7929638">.</span><span class="ident" id="7929639">T</span><span class="op" id="7929640">)</span>&nbsp;<span class="op" id="7929642">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7929645">tests</span>&nbsp;<span class="op" id="7929651">:=</span>&nbsp;<span class="op" id="7929654">[</span><span class="op" id="7929655">]</span><span class="keyword" id="7929656">struct</span>&nbsp;<span class="op" id="7929663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7929667">jsCtx</span>&nbsp;<span class="ident" id="7929673">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7929681">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7929687">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7929695">}</span><span class="op" id="7929696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7929700">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7929744">{</span><span class="ident" id="7929745">jsCtxRegexp</span><span class="op" id="7929756">,</span>&nbsp;<span class="string" id="7929758">&#34;;&#34;</span><span class="op" id="7929761">}</span><span class="op" id="7929762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7929766">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7929793">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7929846">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7929909">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7929972">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7929995">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930045">{</span><span class="ident" id="7930046">jsCtxRegexp</span><span class="op" id="7930057">,</span>&nbsp;<span class="string" id="7930059">&#34;}&#34;</span><span class="op" id="7930062">}</span><span class="op" id="7930063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930067">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930133">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930155">{</span><span class="ident" id="7930156">jsCtxDivOp</span><span class="op" id="7930166">,</span>&nbsp;<span class="string" id="7930168">&#34;)&#34;</span><span class="op" id="7930171">}</span><span class="op" id="7930172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930176">{</span><span class="ident" id="7930177">jsCtxDivOp</span><span class="op" id="7930187">,</span>&nbsp;<span class="string" id="7930189">&#34;]&#34;</span><span class="op" id="7930192">}</span><span class="op" id="7930193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930197">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930261">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930294">{</span><span class="ident" id="7930295">jsCtxRegexp</span><span class="op" id="7930306">,</span>&nbsp;<span class="string" id="7930308">&#34;(&#34;</span><span class="op" id="7930311">}</span><span class="op" id="7930312">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930316">{</span><span class="ident" id="7930317">jsCtxRegexp</span><span class="op" id="7930328">,</span>&nbsp;<span class="string" id="7930330">&#34;[&#34;</span><span class="op" id="7930333">}</span><span class="op" id="7930334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930338">{</span><span class="ident" id="7930339">jsCtxRegexp</span><span class="op" id="7930350">,</span>&nbsp;<span class="string" id="7930352">&#34;{&#34;</span><span class="op" id="7930355">}</span><span class="op" id="7930356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930360">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930424">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930458">{</span><span class="ident" id="7930459">jsCtxRegexp</span><span class="op" id="7930470">,</span>&nbsp;<span class="string" id="7930472">&#34;=&#34;</span><span class="op" id="7930475">}</span><span class="op" id="7930476">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930480">{</span><span class="ident" id="7930481">jsCtxRegexp</span><span class="op" id="7930492">,</span>&nbsp;<span class="string" id="7930494">&#34;+=&#34;</span><span class="op" id="7930498">}</span><span class="op" id="7930499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930503">{</span><span class="ident" id="7930504">jsCtxRegexp</span><span class="op" id="7930515">,</span>&nbsp;<span class="string" id="7930517">&#34;*=&#34;</span><span class="op" id="7930521">}</span><span class="op" id="7930522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930526">{</span><span class="ident" id="7930527">jsCtxRegexp</span><span class="op" id="7930538">,</span>&nbsp;<span class="string" id="7930540">&#34;*&#34;</span><span class="op" id="7930543">}</span><span class="op" id="7930544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930548">{</span><span class="ident" id="7930549">jsCtxRegexp</span><span class="op" id="7930560">,</span>&nbsp;<span class="string" id="7930562">&#34;!&#34;</span><span class="op" id="7930565">}</span><span class="op" id="7930566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930570">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930634">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930647">{</span><span class="ident" id="7930648">jsCtxRegexp</span><span class="op" id="7930659">,</span>&nbsp;<span class="string" id="7930661">&#34;+&#34;</span><span class="op" id="7930664">}</span><span class="op" id="7930665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930669">{</span><span class="ident" id="7930670">jsCtxRegexp</span><span class="op" id="7930681">,</span>&nbsp;<span class="string" id="7930683">&#34;-&#34;</span><span class="op" id="7930686">}</span><span class="op" id="7930687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930691">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930737">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930799">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930863">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930912">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7930976">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7930989">{</span><span class="ident" id="7930990">jsCtxDivOp</span><span class="op" id="7931000">,</span>&nbsp;<span class="string" id="7931002">&#34;--&#34;</span><span class="op" id="7931006">}</span><span class="op" id="7931007">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931011">{</span><span class="ident" id="7931012">jsCtxDivOp</span><span class="op" id="7931022">,</span>&nbsp;<span class="string" id="7931024">&#34;++&#34;</span><span class="op" id="7931028">}</span><span class="op" id="7931029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931033">{</span><span class="ident" id="7931034">jsCtxDivOp</span><span class="op" id="7931044">,</span>&nbsp;<span class="string" id="7931046">&#34;x--&#34;</span><span class="op" id="7931051">}</span><span class="op" id="7931052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931056">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931119">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931139">{</span><span class="ident" id="7931140">jsCtxRegexp</span><span class="op" id="7931151">,</span>&nbsp;<span class="string" id="7931153">&#34;x---&#34;</span><span class="op" id="7931159">}</span><span class="op" id="7931160">,</span>&nbsp;<span class="comment" id="7931162">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931190">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931256">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931323">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931342">{</span><span class="ident" id="7931343">jsCtxRegexp</span><span class="op" id="7931354">,</span>&nbsp;<span class="string" id="7931356">&#34;return&#34;</span><span class="op" id="7931364">}</span><span class="op" id="7931365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931369">{</span><span class="ident" id="7931370">jsCtxRegexp</span><span class="op" id="7931381">,</span>&nbsp;<span class="string" id="7931383">&#34;return&nbsp;&#34;</span><span class="op" id="7931392">}</span><span class="op" id="7931393">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931397">{</span><span class="ident" id="7931398">jsCtxRegexp</span><span class="op" id="7931409">,</span>&nbsp;<span class="string" id="7931411">&#34;return\t&#34;</span><span class="op" id="7931421">}</span><span class="op" id="7931422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931426">{</span><span class="ident" id="7931427">jsCtxRegexp</span><span class="op" id="7931438">,</span>&nbsp;<span class="string" id="7931440">&#34;return\n&#34;</span><span class="op" id="7931450">}</span><span class="op" id="7931451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931455">{</span><span class="ident" id="7931456">jsCtxRegexp</span><span class="op" id="7931467">,</span>&nbsp;<span class="string" id="7931469">&#34;return\u2028&#34;</span><span class="op" id="7931483">}</span><span class="op" id="7931484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931488">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931554">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931616">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931682">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931747">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931813">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931824">{</span><span class="ident" id="7931825">jsCtxDivOp</span><span class="op" id="7931835">,</span>&nbsp;<span class="string" id="7931837">&#34;x&#34;</span><span class="op" id="7931840">}</span><span class="op" id="7931841">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931845">{</span><span class="ident" id="7931846">jsCtxDivOp</span><span class="op" id="7931856">,</span>&nbsp;<span class="string" id="7931858">&#34;x&nbsp;&#34;</span><span class="op" id="7931862">}</span><span class="op" id="7931863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931867">{</span><span class="ident" id="7931868">jsCtxDivOp</span><span class="op" id="7931878">,</span>&nbsp;<span class="string" id="7931880">&#34;x\t&#34;</span><span class="op" id="7931885">}</span><span class="op" id="7931886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931890">{</span><span class="ident" id="7931891">jsCtxDivOp</span><span class="op" id="7931901">,</span>&nbsp;<span class="string" id="7931903">&#34;x\n&#34;</span><span class="op" id="7931908">}</span><span class="op" id="7931909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931913">{</span><span class="ident" id="7931914">jsCtxDivOp</span><span class="op" id="7931924">,</span>&nbsp;<span class="string" id="7931926">&#34;x\u2028&#34;</span><span class="op" id="7931935">}</span><span class="op" id="7931936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931940">{</span><span class="ident" id="7931941">jsCtxDivOp</span><span class="op" id="7931951">,</span>&nbsp;<span class="string" id="7931953">&#34;preturn&#34;</span><span class="op" id="7931962">}</span><span class="op" id="7931963">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7931967">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7931997">{</span><span class="ident" id="7931998">jsCtxDivOp</span><span class="op" id="7932008">,</span>&nbsp;<span class="string" id="7932010">&#34;0&#34;</span><span class="op" id="7932013">}</span><span class="op" id="7932014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7932018">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932073">{</span><span class="ident" id="7932074">jsCtxDivOp</span><span class="op" id="7932084">,</span>&nbsp;<span class="string" id="7932086">&#34;0.&#34;</span><span class="op" id="7932090">}</span><span class="op" id="7932091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932094">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7932098">for</span>&nbsp;<span class="ident" id="7932102">_</span><span class="op" id="7932103">,</span>&nbsp;<span class="ident" id="7932105">test</span>&nbsp;<span class="op" id="7932110">:=</span>&nbsp;<span class="keyword" id="7932113">range</span>&nbsp;<span class="ident" id="7932119">tests</span>&nbsp;<span class="op" id="7932125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7932129">if</span>&nbsp;<span class="ident" id="7932132">nextJSCtx</span><span class="op" id="7932141">(</span><span class="op" id="7932142">[</span><span class="op" id="7932143">]</span><span class="builtintype" id="7932144">byte</span><span class="op" id="7932148">(</span><span class="ident" id="7932149">test</span><span class="op" id="7932153">.</span><span class="ident" id="7932154">s</span><span class="op" id="7932155">)</span><span class="op" id="7932156">,</span>&nbsp;<span class="ident" id="7932158">jsCtxRegexp</span><span class="op" id="7932169">)</span>&nbsp;<span class="op" id="7932171">!=</span>&nbsp;<span class="ident" id="7932174">test</span><span class="op" id="7932178">.</span><span class="ident" id="7932179">jsCtx</span>&nbsp;<span class="op" id="7932185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7932190">t</span><span class="op" id="7932191">.</span><span class="ident" id="7932192">Errorf</span><span class="op" id="7932198">(</span><span class="string" id="7932199">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7932215">,</span>&nbsp;<span class="ident" id="7932217">test</span><span class="op" id="7932221">.</span><span class="ident" id="7932222">jsCtx</span><span class="op" id="7932227">,</span>&nbsp;<span class="ident" id="7932229">test</span><span class="op" id="7932233">.</span><span class="ident" id="7932234">s</span><span class="op" id="7932235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932239">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7932243">if</span>&nbsp;<span class="ident" id="7932246">nextJSCtx</span><span class="op" id="7932255">(</span><span class="op" id="7932256">[</span><span class="op" id="7932257">]</span><span class="builtintype" id="7932258">byte</span><span class="op" id="7932262">(</span><span class="ident" id="7932263">test</span><span class="op" id="7932267">.</span><span class="ident" id="7932268">s</span><span class="op" id="7932269">)</span><span class="op" id="7932270">,</span>&nbsp;<span class="ident" id="7932272">jsCtxDivOp</span><span class="op" id="7932282">)</span>&nbsp;<span class="op" id="7932284">!=</span>&nbsp;<span class="ident" id="7932287">test</span><span class="op" id="7932291">.</span><span class="ident" id="7932292">jsCtx</span>&nbsp;<span class="op" id="7932298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7932303">t</span><span class="op" id="7932304">.</span><span class="ident" id="7932305">Errorf</span><span class="op" id="7932311">(</span><span class="string" id="7932312">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7932328">,</span>&nbsp;<span class="ident" id="7932330">test</span><span class="op" id="7932334">.</span><span class="ident" id="7932335">jsCtx</span><span class="op" id="7932340">,</span>&nbsp;<span class="ident" id="7932342">test</span><span class="op" id="7932346">.</span><span class="ident" id="7932347">s</span><span class="op" id="7932348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7932359">if</span>&nbsp;<span class="ident" id="7932362">nextJSCtx</span><span class="op" id="7932371">(</span><span class="op" id="7932372">[</span><span class="op" id="7932373">]</span><span class="builtintype" id="7932374">byte</span><span class="op" id="7932378">(</span><span class="string" id="7932379">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7932384">)</span><span class="op" id="7932385">,</span>&nbsp;<span class="ident" id="7932387">jsCtxRegexp</span><span class="op" id="7932398">)</span>&nbsp;<span class="op" id="7932400">!=</span>&nbsp;<span class="ident" id="7932403">jsCtxRegexp</span>&nbsp;<span class="op" id="7932415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7932419">t</span><span class="op" id="7932420">.</span><span class="ident" id="7932421">Error</span><span class="op" id="7932426">(</span><span class="string" id="7932427">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7932441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7932448">if</span>&nbsp;<span class="ident" id="7932451">nextJSCtx</span><span class="op" id="7932460">(</span><span class="op" id="7932461">[</span><span class="op" id="7932462">]</span><span class="builtintype" id="7932463">byte</span><span class="op" id="7932467">(</span><span class="string" id="7932468">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7932473">)</span><span class="op" id="7932474">,</span>&nbsp;<span class="ident" id="7932476">jsCtxDivOp</span><span class="op" id="7932486">)</span>&nbsp;<span class="op" id="7932488">!=</span>&nbsp;<span class="ident" id="7932491">jsCtxDivOp</span>&nbsp;<span class="op" id="7932502">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7932506">t</span><span class="op" id="7932507">.</span><span class="ident" id="7932508">Error</span><span class="op" id="7932513">(</span><span class="string" id="7932514">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7932528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932531">}</span><br>
<span class="lineno"></span><span class="op" id="7932533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7932536">func</span>&nbsp;<span class="ident" id="7932541">TestJSValEscaper</span><span class="op" id="7932557">(</span><span class="ident" id="7932558">t</span>&nbsp;<span class="op" id="7932560">*</span><span class="ident" id="7932561">testing</span><span class="op" id="7932568">.</span><span class="ident" id="7932569">T</span><span class="op" id="7932570">)</span>&nbsp;<span class="op" id="7932572">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7932575">tests</span>&nbsp;<span class="op" id="7932581">:=</span>&nbsp;<span class="op" id="7932584">[</span><span class="op" id="7932585">]</span><span class="keyword" id="7932586">struct</span>&nbsp;<span class="op" id="7932593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7932597">x</span>&nbsp;&nbsp;<span class="keyword" id="7932600">interface</span><span class="op" id="7932609">{</span><span class="op" id="7932610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7932614">js</span>&nbsp;<span class="builtintype" id="7932617">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932625">}</span><span class="op" id="7932626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932630">{</span><span class="builtintype" id="7932631">int</span><span class="op" id="7932634">(</span><span class="num" id="7932635">42</span><span class="op" id="7932637">)</span><span class="op" id="7932638">,</span>&nbsp;<span class="string" id="7932640">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7932646">}</span><span class="op" id="7932647">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932651">{</span><span class="builtintype" id="7932652">uint</span><span class="op" id="7932656">(</span><span class="num" id="7932657">42</span><span class="op" id="7932659">)</span><span class="op" id="7932660">,</span>&nbsp;<span class="string" id="7932662">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7932668">}</span><span class="op" id="7932669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932673">{</span><span class="builtintype" id="7932674">int16</span><span class="op" id="7932679">(</span><span class="num" id="7932680">42</span><span class="op" id="7932682">)</span><span class="op" id="7932683">,</span>&nbsp;<span class="string" id="7932685">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7932691">}</span><span class="op" id="7932692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932696">{</span><span class="builtintype" id="7932697">uint16</span><span class="op" id="7932703">(</span><span class="num" id="7932704">42</span><span class="op" id="7932706">)</span><span class="op" id="7932707">,</span>&nbsp;<span class="string" id="7932709">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7932715">}</span><span class="op" id="7932716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932720">{</span><span class="builtintype" id="7932721">int32</span><span class="op" id="7932726">(</span><span class="op" id="7932727">-</span><span class="num" id="7932728">42</span><span class="op" id="7932730">)</span><span class="op" id="7932731">,</span>&nbsp;<span class="string" id="7932733">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7932740">}</span><span class="op" id="7932741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932745">{</span><span class="builtintype" id="7932746">uint32</span><span class="op" id="7932752">(</span><span class="num" id="7932753">42</span><span class="op" id="7932755">)</span><span class="op" id="7932756">,</span>&nbsp;<span class="string" id="7932758">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7932764">}</span><span class="op" id="7932765">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932769">{</span><span class="builtintype" id="7932770">int16</span><span class="op" id="7932775">(</span><span class="op" id="7932776">-</span><span class="num" id="7932777">42</span><span class="op" id="7932779">)</span><span class="op" id="7932780">,</span>&nbsp;<span class="string" id="7932782">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7932789">}</span><span class="op" id="7932790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932794">{</span><span class="builtintype" id="7932795">uint16</span><span class="op" id="7932801">(</span><span class="num" id="7932802">42</span><span class="op" id="7932804">)</span><span class="op" id="7932805">,</span>&nbsp;<span class="string" id="7932807">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7932813">}</span><span class="op" id="7932814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932818">{</span><span class="builtintype" id="7932819">int64</span><span class="op" id="7932824">(</span><span class="op" id="7932825">-</span><span class="num" id="7932826">42</span><span class="op" id="7932828">)</span><span class="op" id="7932829">,</span>&nbsp;<span class="string" id="7932831">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7932838">}</span><span class="op" id="7932839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932843">{</span><span class="builtintype" id="7932844">uint64</span><span class="op" id="7932850">(</span><span class="num" id="7932851">42</span><span class="op" id="7932853">)</span><span class="op" id="7932854">,</span>&nbsp;<span class="string" id="7932856">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7932862">}</span><span class="op" id="7932863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7932867">{</span><span class="builtintype" id="7932868">uint64</span><span class="op" id="7932874">(</span><span class="num" id="7932875">1</span><span class="op" id="7932876">)</span>&nbsp;<span class="op" id="7932878">&lt;&lt;</span>&nbsp;<span class="num" id="7932881">53</span><span class="op" id="7932883">,</span>&nbsp;<span class="string" id="7932885">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="7932905">}</span><span class="op" id="7932906">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7932910">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7932962">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933016">{</span><span class="builtintype" id="7933017">uint64</span><span class="op" id="7933023">(</span><span class="num" id="7933024">1</span><span class="op" id="7933025">)</span><span class="op" id="7933026">&lt;&lt;</span><span class="num" id="7933028">53</span>&nbsp;<span class="op" id="7933031">+</span>&nbsp;<span class="num" id="7933033">1</span><span class="op" id="7933034">,</span>&nbsp;<span class="string" id="7933036">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="7933056">}</span><span class="op" id="7933057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933061">{</span><span class="builtintype" id="7933062">float32</span><span class="op" id="7933069">(</span><span class="num" id="7933070">1.0</span><span class="op" id="7933073">)</span><span class="op" id="7933074">,</span>&nbsp;<span class="string" id="7933076">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7933081">}</span><span class="op" id="7933082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933086">{</span><span class="builtintype" id="7933087">float32</span><span class="op" id="7933094">(</span><span class="op" id="7933095">-</span><span class="num" id="7933096">1.0</span><span class="op" id="7933099">)</span><span class="op" id="7933100">,</span>&nbsp;<span class="string" id="7933102">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7933108">}</span><span class="op" id="7933109">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933113">{</span><span class="builtintype" id="7933114">float32</span><span class="op" id="7933121">(</span><span class="num" id="7933122">0.5</span><span class="op" id="7933125">)</span><span class="op" id="7933126">,</span>&nbsp;<span class="string" id="7933128">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7933135">}</span><span class="op" id="7933136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933140">{</span><span class="builtintype" id="7933141">float32</span><span class="op" id="7933148">(</span><span class="op" id="7933149">-</span><span class="num" id="7933150">0.5</span><span class="op" id="7933153">)</span><span class="op" id="7933154">,</span>&nbsp;<span class="string" id="7933156">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7933164">}</span><span class="op" id="7933165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933169">{</span><span class="builtintype" id="7933170">float32</span><span class="op" id="7933177">(</span><span class="num" id="7933178">1.0</span><span class="op" id="7933181">)</span>&nbsp;<span class="op" id="7933183">/</span>&nbsp;<span class="builtintype" id="7933185">float32</span><span class="op" id="7933192">(</span><span class="num" id="7933193">256</span><span class="op" id="7933196">)</span><span class="op" id="7933197">,</span>&nbsp;<span class="string" id="7933199">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="7933213">}</span><span class="op" id="7933214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933218">{</span><span class="builtintype" id="7933219">float32</span><span class="op" id="7933226">(</span><span class="num" id="7933227">0</span><span class="op" id="7933228">)</span><span class="op" id="7933229">,</span>&nbsp;<span class="string" id="7933231">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7933236">}</span><span class="op" id="7933237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933241">{</span><span class="ident" id="7933242">math</span><span class="op" id="7933246">.</span><span class="ident" id="7933247">Copysign</span><span class="op" id="7933255">(</span><span class="num" id="7933256">0</span><span class="op" id="7933257">,</span>&nbsp;<span class="op" id="7933259">-</span><span class="num" id="7933260">1</span><span class="op" id="7933261">)</span><span class="op" id="7933262">,</span>&nbsp;<span class="string" id="7933264">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7933270">}</span><span class="op" id="7933271">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933275">{</span><span class="builtintype" id="7933276">float64</span><span class="op" id="7933283">(</span><span class="num" id="7933284">1.0</span><span class="op" id="7933287">)</span><span class="op" id="7933288">,</span>&nbsp;<span class="string" id="7933290">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7933295">}</span><span class="op" id="7933296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933300">{</span><span class="builtintype" id="7933301">float64</span><span class="op" id="7933308">(</span><span class="op" id="7933309">-</span><span class="num" id="7933310">1.0</span><span class="op" id="7933313">)</span><span class="op" id="7933314">,</span>&nbsp;<span class="string" id="7933316">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7933322">}</span><span class="op" id="7933323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933327">{</span><span class="builtintype" id="7933328">float64</span><span class="op" id="7933335">(</span><span class="num" id="7933336">0.5</span><span class="op" id="7933339">)</span><span class="op" id="7933340">,</span>&nbsp;<span class="string" id="7933342">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7933349">}</span><span class="op" id="7933350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933354">{</span><span class="builtintype" id="7933355">float64</span><span class="op" id="7933362">(</span><span class="op" id="7933363">-</span><span class="num" id="7933364">0.5</span><span class="op" id="7933367">)</span><span class="op" id="7933368">,</span>&nbsp;<span class="string" id="7933370">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7933378">}</span><span class="op" id="7933379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933383">{</span><span class="builtintype" id="7933384">float64</span><span class="op" id="7933391">(</span><span class="num" id="7933392">0</span><span class="op" id="7933393">)</span><span class="op" id="7933394">,</span>&nbsp;<span class="string" id="7933396">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7933401">}</span><span class="op" id="7933402">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933406">{</span><span class="ident" id="7933407">math</span><span class="op" id="7933411">.</span><span class="ident" id="7933412">Copysign</span><span class="op" id="7933420">(</span><span class="num" id="7933421">0</span><span class="op" id="7933422">,</span>&nbsp;<span class="op" id="7933424">-</span><span class="num" id="7933425">1</span><span class="op" id="7933426">)</span><span class="op" id="7933427">,</span>&nbsp;<span class="string" id="7933429">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7933435">}</span><span class="op" id="7933436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933440">{</span><span class="string" id="7933441">&#34;&#34;</span><span class="op" id="7933443">,</span>&nbsp;<span class="string" id="7933445">`&#34;&#34;`</span><span class="op" id="7933449">}</span><span class="op" id="7933450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933454">{</span><span class="string" id="7933455">&#34;foo&#34;</span><span class="op" id="7933460">,</span>&nbsp;<span class="string" id="7933462">`&#34;foo&#34;`</span><span class="op" id="7933469">}</span><span class="op" id="7933470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7933474">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933489">{</span><span class="string" id="7933490">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="7933508">,</span>&nbsp;<span class="string" id="7933510">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="7933530">}</span><span class="op" id="7933531">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7933535">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933583">{</span><span class="string" id="7933584">&#34;\t\x0b&#34;</span><span class="op" id="7933592">,</span>&nbsp;<span class="string" id="7933594">`&#34;\t\u000b&#34;`</span><span class="op" id="7933606">}</span><span class="op" id="7933607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933611">{</span><span class="keyword" id="7933612">struct</span><span class="op" id="7933618">{</span>&nbsp;<span class="ident" id="7933620">X</span><span class="op" id="7933621">,</span>&nbsp;<span class="ident" id="7933623">Y</span>&nbsp;<span class="builtintype" id="7933625">int</span>&nbsp;<span class="op" id="7933629">}</span><span class="op" id="7933630">{</span><span class="num" id="7933631">1</span><span class="op" id="7933632">,</span>&nbsp;<span class="num" id="7933634">2</span><span class="op" id="7933635">}</span><span class="op" id="7933636">,</span>&nbsp;<span class="string" id="7933638">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="7933653">}</span><span class="op" id="7933654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933658">{</span><span class="op" id="7933659">[</span><span class="op" id="7933660">]</span><span class="keyword" id="7933661">interface</span><span class="op" id="7933670">{</span><span class="op" id="7933671">}</span><span class="op" id="7933672">{</span><span class="op" id="7933673">}</span><span class="op" id="7933674">,</span>&nbsp;<span class="string" id="7933676">&#34;[]&#34;</span><span class="op" id="7933680">}</span><span class="op" id="7933681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933685">{</span><span class="op" id="7933686">[</span><span class="op" id="7933687">]</span><span class="keyword" id="7933688">interface</span><span class="op" id="7933697">{</span><span class="op" id="7933698">}</span><span class="op" id="7933699">{</span><span class="num" id="7933700">42</span><span class="op" id="7933702">,</span>&nbsp;<span class="string" id="7933704">&#34;foo&#34;</span><span class="op" id="7933709">,</span>&nbsp;<span class="builtintype" id="7933711">nil</span><span class="op" id="7933714">}</span><span class="op" id="7933715">,</span>&nbsp;<span class="string" id="7933717">`[42,&#34;foo&#34;,null]`</span><span class="op" id="7933734">}</span><span class="op" id="7933735">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933739">{</span><span class="op" id="7933740">[</span><span class="op" id="7933741">]</span><span class="builtintype" id="7933742">string</span><span class="op" id="7933748">{</span><span class="string" id="7933749">&#34;&lt;!--&#34;</span><span class="op" id="7933755">,</span>&nbsp;<span class="string" id="7933757">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7933768">,</span>&nbsp;<span class="string" id="7933770">&#34;--&gt;&#34;</span><span class="op" id="7933775">}</span><span class="op" id="7933776">,</span>&nbsp;<span class="string" id="7933778">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="7933826">}</span><span class="op" id="7933827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933831">{</span><span class="string" id="7933832">&#34;&lt;!--&#34;</span><span class="op" id="7933838">,</span>&nbsp;<span class="string" id="7933840">`&#34;\u003c!--&#34;`</span><span class="op" id="7933853">}</span><span class="op" id="7933854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933858">{</span><span class="string" id="7933859">&#34;--&gt;&#34;</span><span class="op" id="7933864">,</span>&nbsp;<span class="string" id="7933866">`&#34;--\u003e&#34;`</span><span class="op" id="7933878">}</span><span class="op" id="7933879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933883">{</span><span class="string" id="7933884">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7933895">,</span>&nbsp;<span class="string" id="7933897">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="7933915">}</span><span class="op" id="7933916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933920">{</span><span class="string" id="7933921">&#34;]]&gt;&#34;</span><span class="op" id="7933926">,</span>&nbsp;<span class="string" id="7933928">`&#34;]]\u003e&#34;`</span><span class="op" id="7933940">}</span><span class="op" id="7933941">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933945">{</span><span class="string" id="7933946">&#34;&lt;/script&#34;</span><span class="op" id="7933956">,</span>&nbsp;<span class="string" id="7933958">`&#34;\u003c/script&#34;`</span><span class="op" id="7933975">}</span><span class="op" id="7933976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7933980">{</span><span class="string" id="7933981">&#34;\U0001D11E&#34;</span><span class="op" id="7933993">,</span>&nbsp;<span class="string" id="7933995">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="7934011">}</span><span class="op" id="7934012">,</span>&nbsp;<span class="comment" id="7934014">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7934040">for</span>&nbsp;<span class="ident" id="7934044">_</span><span class="op" id="7934045">,</span>&nbsp;<span class="ident" id="7934047">test</span>&nbsp;<span class="op" id="7934052">:=</span>&nbsp;<span class="keyword" id="7934055">range</span>&nbsp;<span class="ident" id="7934061">tests</span>&nbsp;<span class="op" id="7934067">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7934071">if</span>&nbsp;<span class="ident" id="7934074">js</span>&nbsp;<span class="op" id="7934077">:=</span>&nbsp;<span class="ident" id="7934080">jsValEscaper</span><span class="op" id="7934092">(</span><span class="ident" id="7934093">test</span><span class="op" id="7934097">.</span><span class="ident" id="7934098">x</span><span class="op" id="7934099">)</span><span class="op" id="7934100">;</span>&nbsp;<span class="ident" id="7934102">js</span>&nbsp;<span class="op" id="7934105">!=</span>&nbsp;<span class="ident" id="7934108">test</span><span class="op" id="7934112">.</span><span class="ident" id="7934113">js</span>&nbsp;<span class="op" id="7934116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7934121">t</span><span class="op" id="7934122">.</span><span class="ident" id="7934123">Errorf</span><span class="op" id="7934129">(</span><span class="string" id="7934130">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7934158">,</span>&nbsp;<span class="ident" id="7934160">test</span><span class="op" id="7934164">.</span><span class="ident" id="7934165">x</span><span class="op" id="7934166">,</span>&nbsp;<span class="ident" id="7934168">test</span><span class="op" id="7934172">.</span><span class="ident" id="7934173">js</span><span class="op" id="7934175">,</span>&nbsp;<span class="ident" id="7934177">js</span><span class="op" id="7934179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7934187">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7934244">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7934261">a</span>&nbsp;<span class="op" id="7934263">:=</span>&nbsp;<span class="op" id="7934266">[</span><span class="op" id="7934267">]</span><span class="keyword" id="7934268">interface</span><span class="op" id="7934277">{</span><span class="op" id="7934278">}</span><span class="op" id="7934279">{</span><span class="ident" id="7934280">test</span><span class="op" id="7934284">.</span><span class="ident" id="7934285">x</span><span class="op" id="7934286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7934290">want</span>&nbsp;<span class="op" id="7934295">:=</span>&nbsp;<span class="string" id="7934298">&#34;[&#34;</span>&nbsp;<span class="op" id="7934302">+</span>&nbsp;<span class="ident" id="7934304">strings</span><span class="op" id="7934311">.</span><span class="ident" id="7934312">TrimSpace</span><span class="op" id="7934321">(</span><span class="ident" id="7934322">test</span><span class="op" id="7934326">.</span><span class="ident" id="7934327">js</span><span class="op" id="7934329">)</span>&nbsp;<span class="op" id="7934331">+</span>&nbsp;<span class="string" id="7934333">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7934339">if</span>&nbsp;<span class="ident" id="7934342">js</span>&nbsp;<span class="op" id="7934345">:=</span>&nbsp;<span class="ident" id="7934348">jsValEscaper</span><span class="op" id="7934360">(</span><span class="ident" id="7934361">a</span><span class="op" id="7934362">)</span><span class="op" id="7934363">;</span>&nbsp;<span class="ident" id="7934365">js</span>&nbsp;<span class="op" id="7934368">!=</span>&nbsp;<span class="ident" id="7934371">want</span>&nbsp;<span class="op" id="7934376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7934381">t</span><span class="op" id="7934382">.</span><span class="ident" id="7934383">Errorf</span><span class="op" id="7934389">(</span><span class="string" id="7934390">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7934418">,</span>&nbsp;<span class="ident" id="7934420">a</span><span class="op" id="7934421">,</span>&nbsp;<span class="ident" id="7934423">want</span><span class="op" id="7934427">,</span>&nbsp;<span class="ident" id="7934429">js</span><span class="op" id="7934431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934435">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934438">}</span><br>
<span class="lineno"></span><span class="op" id="7934440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7934443">func</span>&nbsp;<span class="ident" id="7934448">TestJSStrEscaper</span><span class="op" id="7934464">(</span><span class="ident" id="7934465">t</span>&nbsp;<span class="op" id="7934467">*</span><span class="ident" id="7934468">testing</span><span class="op" id="7934475">.</span><span class="ident" id="7934476">T</span><span class="op" id="7934477">)</span>&nbsp;<span class="op" id="7934479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7934482">tests</span>&nbsp;<span class="op" id="7934488">:=</span>&nbsp;<span class="op" id="7934491">[</span><span class="op" id="7934492">]</span><span class="keyword" id="7934493">struct</span>&nbsp;<span class="op" id="7934500">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7934504">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7934508">interface</span><span class="op" id="7934517">{</span><span class="op" id="7934518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7934522">esc</span>&nbsp;<span class="builtintype" id="7934526">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934534">}</span><span class="op" id="7934535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934539">{</span><span class="string" id="7934540">&#34;&#34;</span><span class="op" id="7934542">,</span>&nbsp;<span class="string" id="7934544">``</span><span class="op" id="7934546">}</span><span class="op" id="7934547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934551">{</span><span class="string" id="7934552">&#34;foo&#34;</span><span class="op" id="7934557">,</span>&nbsp;<span class="string" id="7934559">`foo`</span><span class="op" id="7934564">}</span><span class="op" id="7934565">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934569">{</span><span class="string" id="7934570">&#34;\u0000&#34;</span><span class="op" id="7934578">,</span>&nbsp;<span class="string" id="7934580">`\0`</span><span class="op" id="7934584">}</span><span class="op" id="7934585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934589">{</span><span class="string" id="7934590">&#34;\t&#34;</span><span class="op" id="7934594">,</span>&nbsp;<span class="string" id="7934596">`\t`</span><span class="op" id="7934600">}</span><span class="op" id="7934601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934605">{</span><span class="string" id="7934606">&#34;\n&#34;</span><span class="op" id="7934610">,</span>&nbsp;<span class="string" id="7934612">`\n`</span><span class="op" id="7934616">}</span><span class="op" id="7934617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934621">{</span><span class="string" id="7934622">&#34;\r&#34;</span><span class="op" id="7934626">,</span>&nbsp;<span class="string" id="7934628">`\r`</span><span class="op" id="7934632">}</span><span class="op" id="7934633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934637">{</span><span class="string" id="7934638">&#34;\u2028&#34;</span><span class="op" id="7934646">,</span>&nbsp;<span class="string" id="7934648">`\u2028`</span><span class="op" id="7934656">}</span><span class="op" id="7934657">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934661">{</span><span class="string" id="7934662">&#34;\u2029&#34;</span><span class="op" id="7934670">,</span>&nbsp;<span class="string" id="7934672">`\u2029`</span><span class="op" id="7934680">}</span><span class="op" id="7934681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934685">{</span><span class="string" id="7934686">&#34;\\&#34;</span><span class="op" id="7934690">,</span>&nbsp;<span class="string" id="7934692">`\\`</span><span class="op" id="7934696">}</span><span class="op" id="7934697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934701">{</span><span class="string" id="7934702">&#34;\\n&#34;</span><span class="op" id="7934707">,</span>&nbsp;<span class="string" id="7934709">`\\n`</span><span class="op" id="7934714">}</span><span class="op" id="7934715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934719">{</span><span class="string" id="7934720">&#34;foo\r\nbar&#34;</span><span class="op" id="7934732">,</span>&nbsp;<span class="string" id="7934734">`foo\r\nbar`</span><span class="op" id="7934746">}</span><span class="op" id="7934747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7934751">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934787">{</span><span class="string" id="7934788">`&#34;`</span><span class="op" id="7934791">,</span>&nbsp;<span class="string" id="7934793">`\x22`</span><span class="op" id="7934799">}</span><span class="op" id="7934800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934804">{</span><span class="string" id="7934805">`&#39;`</span><span class="op" id="7934808">,</span>&nbsp;<span class="string" id="7934810">`\x27`</span><span class="op" id="7934816">}</span><span class="op" id="7934817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7934821">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934876">{</span><span class="string" id="7934877">`&amp;amp;`</span><span class="op" id="7934884">,</span>&nbsp;<span class="string" id="7934886">`\x26amp;`</span><span class="op" id="7934896">}</span><span class="op" id="7934897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7934901">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7934964">{</span><span class="string" id="7934965">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7934976">,</span>&nbsp;<span class="string" id="7934978">`\x3c\/script\x3e`</span><span class="op" id="7934996">}</span><span class="op" id="7934997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7935001">{</span><span class="string" id="7935002">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7935013">,</span>&nbsp;<span class="string" id="7935015">`\x3c![CDATA[`</span><span class="op" id="7935029">}</span><span class="op" id="7935030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7935034">{</span><span class="string" id="7935035">&#34;]]&gt;&#34;</span><span class="op" id="7935040">,</span>&nbsp;<span class="string" id="7935042">`]]\x3e`</span><span class="op" id="7935050">}</span><span class="op" id="7935051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935055">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935127">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935191">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935252">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935299">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935363">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935430">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935496">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935556">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935620">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7935671">{</span><span class="string" id="7935672">&#34;&lt;!--&#34;</span><span class="op" id="7935678">,</span>&nbsp;<span class="string" id="7935680">`\x3c!--`</span><span class="op" id="7935689">}</span><span class="op" id="7935690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7935694">{</span><span class="string" id="7935695">&#34;--&gt;&#34;</span><span class="op" id="7935700">,</span>&nbsp;<span class="string" id="7935702">`--\x3e`</span><span class="op" id="7935710">}</span><span class="op" id="7935711">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935715">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7935775">{</span><span class="string" id="7935776">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="7935819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7935824">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="7935880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7935884">}</span><span class="op" id="7935885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935889">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7935917">{</span><span class="string" id="7935918">&#34;foo\xA0bar&#34;</span><span class="op" id="7935930">,</span>&nbsp;<span class="string" id="7935932">&#34;foo\xA0bar&#34;</span><span class="op" id="7935944">}</span><span class="op" id="7935945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7935949">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7935984">{</span><span class="string" id="7935985">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7936005">,</span>&nbsp;<span class="string" id="7936007">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7936027">}</span><span class="op" id="7936028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7936035">for</span>&nbsp;<span class="ident" id="7936039">_</span><span class="op" id="7936040">,</span>&nbsp;<span class="ident" id="7936042">test</span>&nbsp;<span class="op" id="7936047">:=</span>&nbsp;<span class="keyword" id="7936050">range</span>&nbsp;<span class="ident" id="7936056">tests</span>&nbsp;<span class="op" id="7936062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7936066">esc</span>&nbsp;<span class="op" id="7936070">:=</span>&nbsp;<span class="ident" id="7936073">jsStrEscaper</span><span class="op" id="7936085">(</span><span class="ident" id="7936086">test</span><span class="op" id="7936090">.</span><span class="ident" id="7936091">x</span><span class="op" id="7936092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7936096">if</span>&nbsp;<span class="ident" id="7936099">esc</span>&nbsp;<span class="op" id="7936103">!=</span>&nbsp;<span class="ident" id="7936106">test</span><span class="op" id="7936110">.</span><span class="ident" id="7936111">esc</span>&nbsp;<span class="op" id="7936115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7936120">t</span><span class="op" id="7936121">.</span><span class="ident" id="7936122">Errorf</span><span class="op" id="7936128">(</span><span class="string" id="7936129">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7936149">,</span>&nbsp;<span class="ident" id="7936151">test</span><span class="op" id="7936155">.</span><span class="ident" id="7936156">x</span><span class="op" id="7936157">,</span>&nbsp;<span class="ident" id="7936159">test</span><span class="op" id="7936163">.</span><span class="ident" id="7936164">esc</span><span class="op" id="7936167">,</span>&nbsp;<span class="ident" id="7936169">esc</span><span class="op" id="7936172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936176">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936179">}</span><br>
<span class="lineno"></span><span class="op" id="7936181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7936184">func</span>&nbsp;<span class="ident" id="7936189">TestJSRegexpEscaper</span><span class="op" id="7936208">(</span><span class="ident" id="7936209">t</span>&nbsp;<span class="op" id="7936211">*</span><span class="ident" id="7936212">testing</span><span class="op" id="7936219">.</span><span class="ident" id="7936220">T</span><span class="op" id="7936221">)</span>&nbsp;<span class="op" id="7936223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7936226">tests</span>&nbsp;<span class="op" id="7936232">:=</span>&nbsp;<span class="op" id="7936235">[</span><span class="op" id="7936236">]</span><span class="keyword" id="7936237">struct</span>&nbsp;<span class="op" id="7936244">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7936248">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7936252">interface</span><span class="op" id="7936261">{</span><span class="op" id="7936262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7936266">esc</span>&nbsp;<span class="builtintype" id="7936270">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936278">}</span><span class="op" id="7936279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936283">{</span><span class="string" id="7936284">&#34;&#34;</span><span class="op" id="7936286">,</span>&nbsp;<span class="string" id="7936288">`(?:)`</span><span class="op" id="7936294">}</span><span class="op" id="7936295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936299">{</span><span class="string" id="7936300">&#34;foo&#34;</span><span class="op" id="7936305">,</span>&nbsp;<span class="string" id="7936307">`foo`</span><span class="op" id="7936312">}</span><span class="op" id="7936313">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936317">{</span><span class="string" id="7936318">&#34;\u0000&#34;</span><span class="op" id="7936326">,</span>&nbsp;<span class="string" id="7936328">`\0`</span><span class="op" id="7936332">}</span><span class="op" id="7936333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936337">{</span><span class="string" id="7936338">&#34;\t&#34;</span><span class="op" id="7936342">,</span>&nbsp;<span class="string" id="7936344">`\t`</span><span class="op" id="7936348">}</span><span class="op" id="7936349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936353">{</span><span class="string" id="7936354">&#34;\n&#34;</span><span class="op" id="7936358">,</span>&nbsp;<span class="string" id="7936360">`\n`</span><span class="op" id="7936364">}</span><span class="op" id="7936365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936369">{</span><span class="string" id="7936370">&#34;\r&#34;</span><span class="op" id="7936374">,</span>&nbsp;<span class="string" id="7936376">`\r`</span><span class="op" id="7936380">}</span><span class="op" id="7936381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936385">{</span><span class="string" id="7936386">&#34;\u2028&#34;</span><span class="op" id="7936394">,</span>&nbsp;<span class="string" id="7936396">`\u2028`</span><span class="op" id="7936404">}</span><span class="op" id="7936405">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936409">{</span><span class="string" id="7936410">&#34;\u2029&#34;</span><span class="op" id="7936418">,</span>&nbsp;<span class="string" id="7936420">`\u2029`</span><span class="op" id="7936428">}</span><span class="op" id="7936429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936433">{</span><span class="string" id="7936434">&#34;\\&#34;</span><span class="op" id="7936438">,</span>&nbsp;<span class="string" id="7936440">`\\`</span><span class="op" id="7936444">}</span><span class="op" id="7936445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936449">{</span><span class="string" id="7936450">&#34;\\n&#34;</span><span class="op" id="7936455">,</span>&nbsp;<span class="string" id="7936457">`\\n`</span><span class="op" id="7936462">}</span><span class="op" id="7936463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936467">{</span><span class="string" id="7936468">&#34;foo\r\nbar&#34;</span><span class="op" id="7936480">,</span>&nbsp;<span class="string" id="7936482">`foo\r\nbar`</span><span class="op" id="7936494">}</span><span class="op" id="7936495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7936499">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936535">{</span><span class="string" id="7936536">`&#34;`</span><span class="op" id="7936539">,</span>&nbsp;<span class="string" id="7936541">`\x22`</span><span class="op" id="7936547">}</span><span class="op" id="7936548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936552">{</span><span class="string" id="7936553">`&#39;`</span><span class="op" id="7936556">,</span>&nbsp;<span class="string" id="7936558">`\x27`</span><span class="op" id="7936564">}</span><span class="op" id="7936565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7936569">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936624">{</span><span class="string" id="7936625">`&amp;amp;`</span><span class="op" id="7936632">,</span>&nbsp;<span class="string" id="7936634">`\x26amp;`</span><span class="op" id="7936644">}</span><span class="op" id="7936645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7936649">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936712">{</span><span class="string" id="7936713">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7936724">,</span>&nbsp;<span class="string" id="7936726">`\x3c\/script\x3e`</span><span class="op" id="7936744">}</span><span class="op" id="7936745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936749">{</span><span class="string" id="7936750">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7936761">,</span>&nbsp;<span class="string" id="7936763">`\x3c!\[CDATA\[`</span><span class="op" id="7936779">}</span><span class="op" id="7936780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936784">{</span><span class="string" id="7936785">&#34;]]&gt;&#34;</span><span class="op" id="7936790">,</span>&nbsp;<span class="string" id="7936792">`\]\]\x3e`</span><span class="op" id="7936802">}</span><span class="op" id="7936803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7936807">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936833">{</span><span class="string" id="7936834">&#34;&lt;!--&#34;</span><span class="op" id="7936840">,</span>&nbsp;<span class="string" id="7936842">`\x3c!\-\-`</span><span class="op" id="7936853">}</span><span class="op" id="7936854">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936858">{</span><span class="string" id="7936859">&#34;--&gt;&#34;</span><span class="op" id="7936864">,</span>&nbsp;<span class="string" id="7936866">`\-\-\x3e`</span><span class="op" id="7936876">}</span><span class="op" id="7936877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936881">{</span><span class="string" id="7936882">&#34;*&#34;</span><span class="op" id="7936885">,</span>&nbsp;<span class="string" id="7936887">`\*`</span><span class="op" id="7936891">}</span><span class="op" id="7936892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936896">{</span><span class="string" id="7936897">&#34;+&#34;</span><span class="op" id="7936900">,</span>&nbsp;<span class="string" id="7936902">`\x2b`</span><span class="op" id="7936908">}</span><span class="op" id="7936909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936913">{</span><span class="string" id="7936914">&#34;?&#34;</span><span class="op" id="7936917">,</span>&nbsp;<span class="string" id="7936919">`\?`</span><span class="op" id="7936923">}</span><span class="op" id="7936924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936928">{</span><span class="string" id="7936929">&#34;[](){}&#34;</span><span class="op" id="7936937">,</span>&nbsp;<span class="string" id="7936939">`\[\]\(\)\{\}`</span><span class="op" id="7936953">}</span><span class="op" id="7936954">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936958">{</span><span class="string" id="7936959">&#34;$foo|x.y&#34;</span><span class="op" id="7936969">,</span>&nbsp;<span class="string" id="7936971">`\$foo\|x\.y`</span><span class="op" id="7936984">}</span><span class="op" id="7936985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7936989">{</span><span class="string" id="7936990">&#34;x^y&#34;</span><span class="op" id="7936995">,</span>&nbsp;<span class="string" id="7936997">`x\^y`</span><span class="op" id="7937003">}</span><span class="op" id="7937004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7937007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7937011">for</span>&nbsp;<span class="ident" id="7937015">_</span><span class="op" id="7937016">,</span>&nbsp;<span class="ident" id="7937018">test</span>&nbsp;<span class="op" id="7937023">:=</span>&nbsp;<span class="keyword" id="7937026">range</span>&nbsp;<span class="ident" id="7937032">tests</span>&nbsp;<span class="op" id="7937038">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7937042">esc</span>&nbsp;<span class="op" id="7937046">:=</span>&nbsp;<span class="ident" id="7937049">jsRegexpEscaper</span><span class="op" id="7937064">(</span><span class="ident" id="7937065">test</span><span class="op" id="7937069">.</span><span class="ident" id="7937070">x</span><span class="op" id="7937071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7937075">if</span>&nbsp;<span class="ident" id="7937078">esc</span>&nbsp;<span class="op" id="7937082">!=</span>&nbsp;<span class="ident" id="7937085">test</span><span class="op" id="7937089">.</span><span class="ident" id="7937090">esc</span>&nbsp;<span class="op" id="7937094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7937099">t</span><span class="op" id="7937100">.</span><span class="ident" id="7937101">Errorf</span><span class="op" id="7937107">(</span><span class="string" id="7937108">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7937128">,</span>&nbsp;<span class="ident" id="7937130">test</span><span class="op" id="7937134">.</span><span class="ident" id="7937135">x</span><span class="op" id="7937136">,</span>&nbsp;<span class="ident" id="7937138">test</span><span class="op" id="7937142">.</span><span class="ident" id="7937143">esc</span><span class="op" id="7937146">,</span>&nbsp;<span class="ident" id="7937148">esc</span><span class="op" id="7937151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7937155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7937158">}</span><br>
<span class="lineno">265</span><span class="op" id="7937160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7937163">func</span>&nbsp;<span class="ident" id="7937168">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="7937211">(</span><span class="ident" id="7937212">t</span>&nbsp;<span class="op" id="7937214">*</span><span class="ident" id="7937215">testing</span><span class="op" id="7937222">.</span><span class="ident" id="7937223">T</span><span class="op" id="7937224">)</span>&nbsp;<span class="op" id="7937226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7937229">input</span>&nbsp;<span class="op" id="7937235">:=</span>&nbsp;<span class="op" id="7937238">(</span><span class="string" id="7937239">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="7937300">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937304">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7937371">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937375">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="7937394">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937398">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="7937417">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937421">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7937440">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937444">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="7937463">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937467">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7937486">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937490">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7937512">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937516">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7937558">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7937562">tests</span>&nbsp;<span class="op" id="7937568">:=</span>&nbsp;<span class="op" id="7937571">[</span><span class="op" id="7937572">]</span><span class="keyword" id="7937573">struct</span>&nbsp;<span class="op" id="7937580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7937584">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7937592">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7937601">escaper</span>&nbsp;<span class="keyword" id="7937609">func</span><span class="op" id="7937613">(</span><span class="op" id="7937614">...</span><span class="keyword" id="7937617">interface</span><span class="op" id="7937626">{</span><span class="op" id="7937627">}</span><span class="op" id="7937628">)</span>&nbsp;<span class="builtintype" id="7937630">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7937639">escaped</span>&nbsp;<span class="builtintype" id="7937647">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7937655">}</span><span class="op" id="7937656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7937660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937665">&#34;jsStrEscaper&#34;</span><span class="op" id="7937679">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7937684">jsStrEscaper</span><span class="op" id="7937696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937701">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7937735">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937741">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7937773">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937779">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7937814">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937820">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7937855">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937861">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="7937893">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937899">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="7937924">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937930">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7937949">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937955">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="7937975">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7937981">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7938000">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938006">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7938028">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938034">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7938078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7938082">}</span><span class="op" id="7938083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7938087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938092">&#34;jsRegexpEscaper&#34;</span><span class="op" id="7938109">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7938114">jsRegexpEscaper</span><span class="op" id="7938129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938134">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7938168">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938174">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7938206">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938212">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7938247">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938253">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7938288">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938294">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="7938332">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938338">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="7938364">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938370">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7938389">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938395">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="7938418">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938424">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7938443">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938449">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="7938470">+</span>&nbsp;<span class="string" id="7938472">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="7938481">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7938487">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7938531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7938535">}</span><span class="op" id="7938536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7938539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7938543">for</span>&nbsp;<span class="ident" id="7938547">_</span><span class="op" id="7938548">,</span>&nbsp;<span class="ident" id="7938550">test</span>&nbsp;<span class="op" id="7938555">:=</span>&nbsp;<span class="keyword" id="7938558">range</span>&nbsp;<span class="ident" id="7938564">tests</span>&nbsp;<span class="op" id="7938570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7938574">if</span>&nbsp;<span class="ident" id="7938577">s</span>&nbsp;<span class="op" id="7938579">:=</span>&nbsp;<span class="ident" id="7938582">test</span><span class="op" id="7938586">.</span><span class="ident" id="7938587">escaper</span><span class="op" id="7938594">(</span><span class="ident" id="7938595">input</span><span class="op" id="7938600">)</span><span class="op" id="7938601">;</span>&nbsp;<span class="ident" id="7938603">s</span>&nbsp;<span class="op" id="7938605">!=</span>&nbsp;<span class="ident" id="7938608">test</span><span class="op" id="7938612">.</span><span class="ident" id="7938613">escaped</span>&nbsp;<span class="op" id="7938621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7938626">t</span><span class="op" id="7938627">.</span><span class="ident" id="7938628">Errorf</span><span class="op" id="7938634">(</span><span class="string" id="7938635">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7938667">,</span>&nbsp;<span class="ident" id="7938669">test</span><span class="op" id="7938673">.</span><span class="ident" id="7938674">name</span><span class="op" id="7938678">,</span>&nbsp;<span class="ident" id="7938680">test</span><span class="op" id="7938684">.</span><span class="ident" id="7938685">escaped</span><span class="op" id="7938692">,</span>&nbsp;<span class="ident" id="7938694">s</span><span class="op" id="7938695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7938700">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7938711">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7938716">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7938766">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7938815">var</span>&nbsp;<span class="ident" id="7938819">buf</span>&nbsp;<span class="ident" id="7938823">bytes</span><span class="op" id="7938828">.</span><span class="ident" id="7938829">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7938838">for</span>&nbsp;<span class="ident" id="7938842">_</span><span class="op" id="7938843">,</span>&nbsp;<span class="ident" id="7938845">c</span>&nbsp;<span class="op" id="7938847">:=</span>&nbsp;<span class="keyword" id="7938850">range</span>&nbsp;<span class="ident" id="7938856">input</span>&nbsp;<span class="op" id="7938862">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7938867">buf</span><span class="op" id="7938870">.</span><span class="ident" id="7938871">WriteString</span><span class="op" id="7938882">(</span><span class="ident" id="7938883">test</span><span class="op" id="7938887">.</span><span class="ident" id="7938888">escaper</span><span class="op" id="7938895">(</span><span class="builtintype" id="7938896">string</span><span class="op" id="7938902">(</span><span class="ident" id="7938903">c</span><span class="op" id="7938904">)</span><span class="op" id="7938905">)</span><span class="op" id="7938906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7938910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7938915">if</span>&nbsp;<span class="ident" id="7938918">s</span>&nbsp;<span class="op" id="7938920">:=</span>&nbsp;<span class="ident" id="7938923">buf</span><span class="op" id="7938926">.</span><span class="ident" id="7938927">String</span><span class="op" id="7938933">(</span><span class="op" id="7938934">)</span><span class="op" id="7938935">;</span>&nbsp;<span class="ident" id="7938937">s</span>&nbsp;<span class="op" id="7938939">!=</span>&nbsp;<span class="ident" id="7938942">test</span><span class="op" id="7938946">.</span><span class="ident" id="7938947">escaped</span>&nbsp;<span class="op" id="7938955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7938960">t</span><span class="op" id="7938961">.</span><span class="ident" id="7938962">Errorf</span><span class="op" id="7938968">(</span><span class="string" id="7938969">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7939006">,</span>&nbsp;<span class="ident" id="7939008">test</span><span class="op" id="7939012">.</span><span class="ident" id="7939013">name</span><span class="op" id="7939017">,</span>&nbsp;<span class="ident" id="7939019">test</span><span class="op" id="7939023">.</span><span class="ident" id="7939024">escaped</span><span class="op" id="7939031">,</span>&nbsp;<span class="ident" id="7939033">s</span><span class="op" id="7939034">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7939039">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939053">}</span><br>
<span class="lineno"></span><span class="op" id="7939055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="7939058">func</span>&nbsp;<span class="ident" id="7939063">BenchmarkJSValEscaperWithNum</span><span class="op" id="7939091">(</span><span class="ident" id="7939092">b</span>&nbsp;<span class="op" id="7939094">*</span><span class="ident" id="7939095">testing</span><span class="op" id="7939102">.</span><span class="ident" id="7939103">B</span><span class="op" id="7939104">)</span>&nbsp;<span class="op" id="7939106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7939109">for</span>&nbsp;<span class="ident" id="7939113">i</span>&nbsp;<span class="op" id="7939115">:=</span>&nbsp;<span class="num" id="7939118">0</span><span class="op" id="7939119">;</span>&nbsp;<span class="ident" id="7939121">i</span>&nbsp;<span class="op" id="7939123">&lt;</span>&nbsp;<span class="ident" id="7939125">b</span><span class="op" id="7939126">.</span><span class="ident" id="7939127">N</span><span class="op" id="7939128">;</span>&nbsp;<span class="ident" id="7939130">i</span><span class="op" id="7939131">++</span>&nbsp;<span class="op" id="7939134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939138">jsValEscaper</span><span class="op" id="7939150">(</span><span class="num" id="7939151">3.141592654</span><span class="op" id="7939162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939165">}</span><br>
<span class="lineno"></span><span class="op" id="7939167">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7939170">func</span>&nbsp;<span class="ident" id="7939175">BenchmarkJSValEscaperWithStr</span><span class="op" id="7939203">(</span><span class="ident" id="7939204">b</span>&nbsp;<span class="op" id="7939206">*</span><span class="ident" id="7939207">testing</span><span class="op" id="7939214">.</span><span class="ident" id="7939215">B</span><span class="op" id="7939216">)</span>&nbsp;<span class="op" id="7939218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7939221">for</span>&nbsp;<span class="ident" id="7939225">i</span>&nbsp;<span class="op" id="7939227">:=</span>&nbsp;<span class="num" id="7939230">0</span><span class="op" id="7939231">;</span>&nbsp;<span class="ident" id="7939233">i</span>&nbsp;<span class="op" id="7939235">&lt;</span>&nbsp;<span class="ident" id="7939237">b</span><span class="op" id="7939238">.</span><span class="ident" id="7939239">N</span><span class="op" id="7939240">;</span>&nbsp;<span class="ident" id="7939242">i</span><span class="op" id="7939243">++</span>&nbsp;<span class="op" id="7939246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939250">jsValEscaper</span><span class="op" id="7939262">(</span><span class="string" id="7939263">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7939384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939387">}</span><br>
<span class="lineno">345</span><span class="op" id="7939389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7939392">func</span>&nbsp;<span class="ident" id="7939397">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="7939435">(</span><span class="ident" id="7939436">b</span>&nbsp;<span class="op" id="7939438">*</span><span class="ident" id="7939439">testing</span><span class="op" id="7939446">.</span><span class="ident" id="7939447">B</span><span class="op" id="7939448">)</span>&nbsp;<span class="op" id="7939450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7939453">for</span>&nbsp;<span class="ident" id="7939457">i</span>&nbsp;<span class="op" id="7939459">:=</span>&nbsp;<span class="num" id="7939462">0</span><span class="op" id="7939463">;</span>&nbsp;<span class="ident" id="7939465">i</span>&nbsp;<span class="op" id="7939467">&lt;</span>&nbsp;<span class="ident" id="7939469">b</span><span class="op" id="7939470">.</span><span class="ident" id="7939471">N</span><span class="op" id="7939472">;</span>&nbsp;<span class="ident" id="7939474">i</span><span class="op" id="7939475">++</span>&nbsp;<span class="op" id="7939478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939482">jsValEscaper</span><span class="op" id="7939494">(</span><span class="string" id="7939495">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7939541">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939544">}</span><br>
<span class="lineno"></span><span class="op" id="7939546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7939549">func</span>&nbsp;<span class="ident" id="7939554">BenchmarkJSValEscaperWithObj</span><span class="op" id="7939582">(</span><span class="ident" id="7939583">b</span>&nbsp;<span class="op" id="7939585">*</span><span class="ident" id="7939586">testing</span><span class="op" id="7939593">.</span><span class="ident" id="7939594">B</span><span class="op" id="7939595">)</span>&nbsp;<span class="op" id="7939597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939600">o</span>&nbsp;<span class="op" id="7939602">:=</span>&nbsp;<span class="keyword" id="7939605">struct</span>&nbsp;<span class="op" id="7939612">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939616">S</span>&nbsp;<span class="builtintype" id="7939618">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939627">N</span>&nbsp;<span class="builtintype" id="7939629">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939634">}</span><span class="op" id="7939635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7939639">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="7939766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7939770">42</span><span class="op" id="7939772">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7939778">for</span>&nbsp;<span class="ident" id="7939782">i</span>&nbsp;<span class="op" id="7939784">:=</span>&nbsp;<span class="num" id="7939787">0</span><span class="op" id="7939788">;</span>&nbsp;<span class="ident" id="7939790">i</span>&nbsp;<span class="op" id="7939792">&lt;</span>&nbsp;<span class="ident" id="7939794">b</span><span class="op" id="7939795">.</span><span class="ident" id="7939796">N</span><span class="op" id="7939797">;</span>&nbsp;<span class="ident" id="7939799">i</span><span class="op" id="7939800">++</span>&nbsp;<span class="op" id="7939803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939807">jsValEscaper</span><span class="op" id="7939819">(</span><span class="ident" id="7939820">o</span><span class="op" id="7939821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939824">}</span><br>
<span class="lineno"></span><span class="op" id="7939826">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7939829">func</span>&nbsp;<span class="ident" id="7939834">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="7939872">(</span><span class="ident" id="7939873">b</span>&nbsp;<span class="op" id="7939875">*</span><span class="ident" id="7939876">testing</span><span class="op" id="7939883">.</span><span class="ident" id="7939884">B</span><span class="op" id="7939885">)</span>&nbsp;<span class="op" id="7939887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939890">o</span>&nbsp;<span class="op" id="7939892">:=</span>&nbsp;<span class="keyword" id="7939895">struct</span>&nbsp;<span class="op" id="7939902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939906">S</span>&nbsp;<span class="builtintype" id="7939908">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7939917">N</span>&nbsp;<span class="builtintype" id="7939919">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939924">}</span><span class="op" id="7939925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7939929">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7939975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7939979">42</span><span class="op" id="7939981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7939984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7939987">for</span>&nbsp;<span class="ident" id="7939991">i</span>&nbsp;<span class="op" id="7939993">:=</span>&nbsp;<span class="num" id="7939996">0</span><span class="op" id="7939997">;</span>&nbsp;<span class="ident" id="7939999">i</span>&nbsp;<span class="op" id="7940001">&lt;</span>&nbsp;<span class="ident" id="7940003">b</span><span class="op" id="7940004">.</span><span class="ident" id="7940005">N</span><span class="op" id="7940006">;</span>&nbsp;<span class="ident" id="7940008">i</span><span class="op" id="7940009">++</span>&nbsp;<span class="op" id="7940012">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7940016">jsValEscaper</span><span class="op" id="7940028">(</span><span class="ident" id="7940029">o</span><span class="op" id="7940030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7940033">}</span><br>
<span class="lineno"></span><span class="op" id="7940035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7940038">func</span>&nbsp;<span class="ident" id="7940043">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="7940074">(</span><span class="ident" id="7940075">b</span>&nbsp;<span class="op" id="7940077">*</span><span class="ident" id="7940078">testing</span><span class="op" id="7940085">.</span><span class="ident" id="7940086">B</span><span class="op" id="7940087">)</span>&nbsp;<span class="op" id="7940089">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7940092">for</span>&nbsp;<span class="ident" id="7940096">i</span>&nbsp;<span class="op" id="7940098">:=</span>&nbsp;<span class="num" id="7940101">0</span><span class="op" id="7940102">;</span>&nbsp;<span class="ident" id="7940104">i</span>&nbsp;<span class="op" id="7940106">&lt;</span>&nbsp;<span class="ident" id="7940108">b</span><span class="op" id="7940109">.</span><span class="ident" id="7940110">N</span><span class="op" id="7940111">;</span>&nbsp;<span class="ident" id="7940113">i</span><span class="op" id="7940114">++</span>&nbsp;<span class="op" id="7940117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7940121">jsStrEscaper</span><span class="op" id="7940133">(</span><span class="string" id="7940134">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="7940181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7940184">}</span><br>
<span class="lineno"></span><span class="op" id="7940186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="7940189">func</span>&nbsp;<span class="ident" id="7940194">BenchmarkJSStrEscaper</span><span class="op" id="7940215">(</span><span class="ident" id="7940216">b</span>&nbsp;<span class="op" id="7940218">*</span><span class="ident" id="7940219">testing</span><span class="op" id="7940226">.</span><span class="ident" id="7940227">B</span><span class="op" id="7940228">)</span>&nbsp;<span class="op" id="7940230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7940233">for</span>&nbsp;<span class="ident" id="7940237">i</span>&nbsp;<span class="op" id="7940239">:=</span>&nbsp;<span class="num" id="7940242">0</span><span class="op" id="7940243">;</span>&nbsp;<span class="ident" id="7940245">i</span>&nbsp;<span class="op" id="7940247">&lt;</span>&nbsp;<span class="ident" id="7940249">b</span><span class="op" id="7940250">.</span><span class="ident" id="7940251">N</span><span class="op" id="7940252">;</span>&nbsp;<span class="ident" id="7940254">i</span><span class="op" id="7940255">++</span>&nbsp;<span class="op" id="7940258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7940262">jsStrEscaper</span><span class="op" id="7940274">(</span><span class="string" id="7940275">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7940396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7940399">}</span><br>
<span class="lineno"></span><span class="op" id="7940401">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7940404">func</span>&nbsp;<span class="ident" id="7940409">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="7940443">(</span><span class="ident" id="7940444">b</span>&nbsp;<span class="op" id="7940446">*</span><span class="ident" id="7940447">testing</span><span class="op" id="7940454">.</span><span class="ident" id="7940455">B</span><span class="op" id="7940456">)</span>&nbsp;<span class="op" id="7940458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7940461">for</span>&nbsp;<span class="ident" id="7940465">i</span>&nbsp;<span class="op" id="7940467">:=</span>&nbsp;<span class="num" id="7940470">0</span><span class="op" id="7940471">;</span>&nbsp;<span class="ident" id="7940473">i</span>&nbsp;<span class="op" id="7940475">&lt;</span>&nbsp;<span class="ident" id="7940477">b</span><span class="op" id="7940478">.</span><span class="ident" id="7940479">N</span><span class="op" id="7940480">;</span>&nbsp;<span class="ident" id="7940482">i</span><span class="op" id="7940483">++</span>&nbsp;<span class="op" id="7940486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7940490">jsRegexpEscaper</span><span class="op" id="7940505">(</span><span class="string" id="7940506">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7940552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7940555">}</span><br>
<span class="lineno">395</span><span class="op" id="7940557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7940560">func</span>&nbsp;<span class="ident" id="7940565">BenchmarkJSRegexpEscaper</span><span class="op" id="7940589">(</span><span class="ident" id="7940590">b</span>&nbsp;<span class="op" id="7940592">*</span><span class="ident" id="7940593">testing</span><span class="op" id="7940600">.</span><span class="ident" id="7940601">B</span><span class="op" id="7940602">)</span>&nbsp;<span class="op" id="7940604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7940607">for</span>&nbsp;<span class="ident" id="7940611">i</span>&nbsp;<span class="op" id="7940613">:=</span>&nbsp;<span class="num" id="7940616">0</span><span class="op" id="7940617">;</span>&nbsp;<span class="ident" id="7940619">i</span>&nbsp;<span class="op" id="7940621">&lt;</span>&nbsp;<span class="ident" id="7940623">b</span><span class="op" id="7940624">.</span><span class="ident" id="7940625">N</span><span class="op" id="7940626">;</span>&nbsp;<span class="ident" id="7940628">i</span><span class="op" id="7940629">++</span>&nbsp;<span class="op" id="7940632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7940636">jsRegexpEscaper</span><span class="op" id="7940651">(</span><span class="string" id="7940652">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7940773">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7940776">}</span><br>
<span class="lineno"></span><span class="op" id="7940778">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
