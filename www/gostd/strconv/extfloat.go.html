<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html" class="current">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2258857">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2258912">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2258966">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2259017">package</span>&nbsp;<span class="ident" id="2259025">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2259034">//&nbsp;An&nbsp;extFloat&nbsp;represents&nbsp;an&nbsp;extended&nbsp;floating-point&nbsp;number,&nbsp;with&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="2259105">//&nbsp;precision&nbsp;than&nbsp;a&nbsp;float64.&nbsp;It&nbsp;does&nbsp;not&nbsp;try&nbsp;to&nbsp;save&nbsp;bits:&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2259168">//&nbsp;number&nbsp;represented&nbsp;by&nbsp;the&nbsp;structure&nbsp;is&nbsp;mant*(2^exp),&nbsp;with&nbsp;a&nbsp;negative</span><br>
<span class="lineno">10</span><span class="comment" id="2259240">//&nbsp;sign&nbsp;if&nbsp;neg&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="2259264">type</span>&nbsp;<span class="ident" id="2259269">extFloat</span>&nbsp;<span class="keyword" id="2259278">struct</span>&nbsp;<span class="op" id="2259285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259288">mant</span>&nbsp;<span class="ident" id="2259293">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259301">exp</span>&nbsp;&nbsp;<span class="builtintype" id="2259306">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259311">neg</span>&nbsp;&nbsp;<span class="builtintype" id="2259316">bool</span><br>
<span class="lineno">15</span><span class="op" id="2259321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2259324">//&nbsp;Powers&nbsp;of&nbsp;ten&nbsp;taken&nbsp;from&nbsp;double-conversion&nbsp;library.</span><br>
<span class="lineno"></span><span class="comment" id="2259379">//&nbsp;http://code.google.com/p/double-conversion/</span><br>
<span class="lineno"></span><span class="keyword" id="2259426">const</span>&nbsp;<span class="op" id="2259432">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259435">firstPowerOfTen</span>&nbsp;<span class="op" id="2259451">=</span>&nbsp;<span class="op" id="2259453">-</span><span class="num" id="2259454">348</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259459">stepPowerOfTen</span>&nbsp;&nbsp;<span class="op" id="2259475">=</span>&nbsp;<span class="num" id="2259477">8</span><br>
<span class="lineno"></span><span class="op" id="2259479">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2259482">var</span>&nbsp;<span class="ident" id="2259486">smallPowersOfTen</span>&nbsp;<span class="op" id="2259503">=</span>&nbsp;<span class="op" id="2259505">[</span><span class="op" id="2259506">...</span><span class="op" id="2259509">]</span><span class="ident" id="2259510">extFloat</span><span class="op" id="2259518">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259521">{</span><span class="num" id="2259522">1</span>&nbsp;<span class="op" id="2259524">&lt;&lt;</span>&nbsp;<span class="num" id="2259527">63</span><span class="op" id="2259529">,</span>&nbsp;<span class="op" id="2259531">-</span><span class="num" id="2259532">63</span><span class="op" id="2259534">,</span>&nbsp;<span class="builtintype" id="2259536">false</span><span class="op" id="2259541">}</span><span class="op" id="2259542">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259551">//&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259557">{</span><span class="num" id="2259558">0xa</span>&nbsp;<span class="op" id="2259562">&lt;&lt;</span>&nbsp;<span class="num" id="2259565">60</span><span class="op" id="2259567">,</span>&nbsp;<span class="op" id="2259569">-</span><span class="num" id="2259570">60</span><span class="op" id="2259572">,</span>&nbsp;<span class="builtintype" id="2259574">false</span><span class="op" id="2259579">}</span><span class="op" id="2259580">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259587">//&nbsp;1e1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259595">{</span><span class="num" id="2259596">0x64</span>&nbsp;<span class="op" id="2259601">&lt;&lt;</span>&nbsp;<span class="num" id="2259604">57</span><span class="op" id="2259606">,</span>&nbsp;<span class="op" id="2259608">-</span><span class="num" id="2259609">57</span><span class="op" id="2259611">,</span>&nbsp;<span class="builtintype" id="2259613">false</span><span class="op" id="2259618">}</span><span class="op" id="2259619">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259625">//&nbsp;1e2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259633">{</span><span class="num" id="2259634">0x3e8</span>&nbsp;<span class="op" id="2259640">&lt;&lt;</span>&nbsp;<span class="num" id="2259643">54</span><span class="op" id="2259645">,</span>&nbsp;<span class="op" id="2259647">-</span><span class="num" id="2259648">54</span><span class="op" id="2259650">,</span>&nbsp;<span class="builtintype" id="2259652">false</span><span class="op" id="2259657">}</span><span class="op" id="2259658">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259663">//&nbsp;1e3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259671">{</span><span class="num" id="2259672">0x2710</span>&nbsp;<span class="op" id="2259679">&lt;&lt;</span>&nbsp;<span class="num" id="2259682">50</span><span class="op" id="2259684">,</span>&nbsp;<span class="op" id="2259686">-</span><span class="num" id="2259687">50</span><span class="op" id="2259689">,</span>&nbsp;<span class="builtintype" id="2259691">false</span><span class="op" id="2259696">}</span><span class="op" id="2259697">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2259701">//&nbsp;1e4</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259709">{</span><span class="num" id="2259710">0x186a0</span>&nbsp;<span class="op" id="2259718">&lt;&lt;</span>&nbsp;<span class="num" id="2259721">47</span><span class="op" id="2259723">,</span>&nbsp;<span class="op" id="2259725">-</span><span class="num" id="2259726">47</span><span class="op" id="2259728">,</span>&nbsp;<span class="builtintype" id="2259730">false</span><span class="op" id="2259735">}</span><span class="op" id="2259736">,</span>&nbsp;&nbsp;<span class="comment" id="2259739">//&nbsp;1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259747">{</span><span class="num" id="2259748">0xf4240</span>&nbsp;<span class="op" id="2259756">&lt;&lt;</span>&nbsp;<span class="num" id="2259759">44</span><span class="op" id="2259761">,</span>&nbsp;<span class="op" id="2259763">-</span><span class="num" id="2259764">44</span><span class="op" id="2259766">,</span>&nbsp;<span class="builtintype" id="2259768">false</span><span class="op" id="2259773">}</span><span class="op" id="2259774">,</span>&nbsp;&nbsp;<span class="comment" id="2259777">//&nbsp;1e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259785">{</span><span class="num" id="2259786">0x989680</span>&nbsp;<span class="op" id="2259795">&lt;&lt;</span>&nbsp;<span class="num" id="2259798">40</span><span class="op" id="2259800">,</span>&nbsp;<span class="op" id="2259802">-</span><span class="num" id="2259803">40</span><span class="op" id="2259805">,</span>&nbsp;<span class="builtintype" id="2259807">false</span><span class="op" id="2259812">}</span><span class="op" id="2259813">,</span>&nbsp;<span class="comment" id="2259815">//&nbsp;1e7</span><br>
<span class="lineno"></span><span class="op" id="2259822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="2259825">var</span>&nbsp;<span class="ident" id="2259829">powersOfTen</span>&nbsp;<span class="op" id="2259841">=</span>&nbsp;<span class="op" id="2259843">[</span><span class="op" id="2259844">...</span><span class="op" id="2259847">]</span><span class="ident" id="2259848">extFloat</span><span class="op" id="2259856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259859">{</span><span class="num" id="2259860">0xfa8fd5a0081c0288</span><span class="op" id="2259878">,</span>&nbsp;<span class="op" id="2259880">-</span><span class="num" id="2259881">1220</span><span class="op" id="2259885">,</span>&nbsp;<span class="builtintype" id="2259887">false</span><span class="op" id="2259892">}</span><span class="op" id="2259893">,</span>&nbsp;<span class="comment" id="2259895">//&nbsp;10^-348</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259907">{</span><span class="num" id="2259908">0xbaaee17fa23ebf76</span><span class="op" id="2259926">,</span>&nbsp;<span class="op" id="2259928">-</span><span class="num" id="2259929">1193</span><span class="op" id="2259933">,</span>&nbsp;<span class="builtintype" id="2259935">false</span><span class="op" id="2259940">}</span><span class="op" id="2259941">,</span>&nbsp;<span class="comment" id="2259943">//&nbsp;10^-340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2259955">{</span><span class="num" id="2259956">0x8b16fb203055ac76</span><span class="op" id="2259974">,</span>&nbsp;<span class="op" id="2259976">-</span><span class="num" id="2259977">1166</span><span class="op" id="2259981">,</span>&nbsp;<span class="builtintype" id="2259983">false</span><span class="op" id="2259988">}</span><span class="op" id="2259989">,</span>&nbsp;<span class="comment" id="2259991">//&nbsp;10^-332</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260003">{</span><span class="num" id="2260004">0xcf42894a5dce35ea</span><span class="op" id="2260022">,</span>&nbsp;<span class="op" id="2260024">-</span><span class="num" id="2260025">1140</span><span class="op" id="2260029">,</span>&nbsp;<span class="builtintype" id="2260031">false</span><span class="op" id="2260036">}</span><span class="op" id="2260037">,</span>&nbsp;<span class="comment" id="2260039">//&nbsp;10^-324</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260051">{</span><span class="num" id="2260052">0x9a6bb0aa55653b2d</span><span class="op" id="2260070">,</span>&nbsp;<span class="op" id="2260072">-</span><span class="num" id="2260073">1113</span><span class="op" id="2260077">,</span>&nbsp;<span class="builtintype" id="2260079">false</span><span class="op" id="2260084">}</span><span class="op" id="2260085">,</span>&nbsp;<span class="comment" id="2260087">//&nbsp;10^-316</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260099">{</span><span class="num" id="2260100">0xe61acf033d1a45df</span><span class="op" id="2260118">,</span>&nbsp;<span class="op" id="2260120">-</span><span class="num" id="2260121">1087</span><span class="op" id="2260125">,</span>&nbsp;<span class="builtintype" id="2260127">false</span><span class="op" id="2260132">}</span><span class="op" id="2260133">,</span>&nbsp;<span class="comment" id="2260135">//&nbsp;10^-308</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260147">{</span><span class="num" id="2260148">0xab70fe17c79ac6ca</span><span class="op" id="2260166">,</span>&nbsp;<span class="op" id="2260168">-</span><span class="num" id="2260169">1060</span><span class="op" id="2260173">,</span>&nbsp;<span class="builtintype" id="2260175">false</span><span class="op" id="2260180">}</span><span class="op" id="2260181">,</span>&nbsp;<span class="comment" id="2260183">//&nbsp;10^-300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260195">{</span><span class="num" id="2260196">0xff77b1fcbebcdc4f</span><span class="op" id="2260214">,</span>&nbsp;<span class="op" id="2260216">-</span><span class="num" id="2260217">1034</span><span class="op" id="2260221">,</span>&nbsp;<span class="builtintype" id="2260223">false</span><span class="op" id="2260228">}</span><span class="op" id="2260229">,</span>&nbsp;<span class="comment" id="2260231">//&nbsp;10^-292</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260243">{</span><span class="num" id="2260244">0xbe5691ef416bd60c</span><span class="op" id="2260262">,</span>&nbsp;<span class="op" id="2260264">-</span><span class="num" id="2260265">1007</span><span class="op" id="2260269">,</span>&nbsp;<span class="builtintype" id="2260271">false</span><span class="op" id="2260276">}</span><span class="op" id="2260277">,</span>&nbsp;<span class="comment" id="2260279">//&nbsp;10^-284</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260291">{</span><span class="num" id="2260292">0x8dd01fad907ffc3c</span><span class="op" id="2260310">,</span>&nbsp;<span class="op" id="2260312">-</span><span class="num" id="2260313">980</span><span class="op" id="2260316">,</span>&nbsp;<span class="builtintype" id="2260318">false</span><span class="op" id="2260323">}</span><span class="op" id="2260324">,</span>&nbsp;&nbsp;<span class="comment" id="2260327">//&nbsp;10^-276</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260339">{</span><span class="num" id="2260340">0xd3515c2831559a83</span><span class="op" id="2260358">,</span>&nbsp;<span class="op" id="2260360">-</span><span class="num" id="2260361">954</span><span class="op" id="2260364">,</span>&nbsp;<span class="builtintype" id="2260366">false</span><span class="op" id="2260371">}</span><span class="op" id="2260372">,</span>&nbsp;&nbsp;<span class="comment" id="2260375">//&nbsp;10^-268</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260387">{</span><span class="num" id="2260388">0x9d71ac8fada6c9b5</span><span class="op" id="2260406">,</span>&nbsp;<span class="op" id="2260408">-</span><span class="num" id="2260409">927</span><span class="op" id="2260412">,</span>&nbsp;<span class="builtintype" id="2260414">false</span><span class="op" id="2260419">}</span><span class="op" id="2260420">,</span>&nbsp;&nbsp;<span class="comment" id="2260423">//&nbsp;10^-260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260435">{</span><span class="num" id="2260436">0xea9c227723ee8bcb</span><span class="op" id="2260454">,</span>&nbsp;<span class="op" id="2260456">-</span><span class="num" id="2260457">901</span><span class="op" id="2260460">,</span>&nbsp;<span class="builtintype" id="2260462">false</span><span class="op" id="2260467">}</span><span class="op" id="2260468">,</span>&nbsp;&nbsp;<span class="comment" id="2260471">//&nbsp;10^-252</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260483">{</span><span class="num" id="2260484">0xaecc49914078536d</span><span class="op" id="2260502">,</span>&nbsp;<span class="op" id="2260504">-</span><span class="num" id="2260505">874</span><span class="op" id="2260508">,</span>&nbsp;<span class="builtintype" id="2260510">false</span><span class="op" id="2260515">}</span><span class="op" id="2260516">,</span>&nbsp;&nbsp;<span class="comment" id="2260519">//&nbsp;10^-244</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260531">{</span><span class="num" id="2260532">0x823c12795db6ce57</span><span class="op" id="2260550">,</span>&nbsp;<span class="op" id="2260552">-</span><span class="num" id="2260553">847</span><span class="op" id="2260556">,</span>&nbsp;<span class="builtintype" id="2260558">false</span><span class="op" id="2260563">}</span><span class="op" id="2260564">,</span>&nbsp;&nbsp;<span class="comment" id="2260567">//&nbsp;10^-236</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260579">{</span><span class="num" id="2260580">0xc21094364dfb5637</span><span class="op" id="2260598">,</span>&nbsp;<span class="op" id="2260600">-</span><span class="num" id="2260601">821</span><span class="op" id="2260604">,</span>&nbsp;<span class="builtintype" id="2260606">false</span><span class="op" id="2260611">}</span><span class="op" id="2260612">,</span>&nbsp;&nbsp;<span class="comment" id="2260615">//&nbsp;10^-228</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260627">{</span><span class="num" id="2260628">0x9096ea6f3848984f</span><span class="op" id="2260646">,</span>&nbsp;<span class="op" id="2260648">-</span><span class="num" id="2260649">794</span><span class="op" id="2260652">,</span>&nbsp;<span class="builtintype" id="2260654">false</span><span class="op" id="2260659">}</span><span class="op" id="2260660">,</span>&nbsp;&nbsp;<span class="comment" id="2260663">//&nbsp;10^-220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260675">{</span><span class="num" id="2260676">0xd77485cb25823ac7</span><span class="op" id="2260694">,</span>&nbsp;<span class="op" id="2260696">-</span><span class="num" id="2260697">768</span><span class="op" id="2260700">,</span>&nbsp;<span class="builtintype" id="2260702">false</span><span class="op" id="2260707">}</span><span class="op" id="2260708">,</span>&nbsp;&nbsp;<span class="comment" id="2260711">//&nbsp;10^-212</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260723">{</span><span class="num" id="2260724">0xa086cfcd97bf97f4</span><span class="op" id="2260742">,</span>&nbsp;<span class="op" id="2260744">-</span><span class="num" id="2260745">741</span><span class="op" id="2260748">,</span>&nbsp;<span class="builtintype" id="2260750">false</span><span class="op" id="2260755">}</span><span class="op" id="2260756">,</span>&nbsp;&nbsp;<span class="comment" id="2260759">//&nbsp;10^-204</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260771">{</span><span class="num" id="2260772">0xef340a98172aace5</span><span class="op" id="2260790">,</span>&nbsp;<span class="op" id="2260792">-</span><span class="num" id="2260793">715</span><span class="op" id="2260796">,</span>&nbsp;<span class="builtintype" id="2260798">false</span><span class="op" id="2260803">}</span><span class="op" id="2260804">,</span>&nbsp;&nbsp;<span class="comment" id="2260807">//&nbsp;10^-196</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260819">{</span><span class="num" id="2260820">0xb23867fb2a35b28e</span><span class="op" id="2260838">,</span>&nbsp;<span class="op" id="2260840">-</span><span class="num" id="2260841">688</span><span class="op" id="2260844">,</span>&nbsp;<span class="builtintype" id="2260846">false</span><span class="op" id="2260851">}</span><span class="op" id="2260852">,</span>&nbsp;&nbsp;<span class="comment" id="2260855">//&nbsp;10^-188</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260867">{</span><span class="num" id="2260868">0x84c8d4dfd2c63f3b</span><span class="op" id="2260886">,</span>&nbsp;<span class="op" id="2260888">-</span><span class="num" id="2260889">661</span><span class="op" id="2260892">,</span>&nbsp;<span class="builtintype" id="2260894">false</span><span class="op" id="2260899">}</span><span class="op" id="2260900">,</span>&nbsp;&nbsp;<span class="comment" id="2260903">//&nbsp;10^-180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260915">{</span><span class="num" id="2260916">0xc5dd44271ad3cdba</span><span class="op" id="2260934">,</span>&nbsp;<span class="op" id="2260936">-</span><span class="num" id="2260937">635</span><span class="op" id="2260940">,</span>&nbsp;<span class="builtintype" id="2260942">false</span><span class="op" id="2260947">}</span><span class="op" id="2260948">,</span>&nbsp;&nbsp;<span class="comment" id="2260951">//&nbsp;10^-172</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260963">{</span><span class="num" id="2260964">0x936b9fcebb25c996</span><span class="op" id="2260982">,</span>&nbsp;<span class="op" id="2260984">-</span><span class="num" id="2260985">608</span><span class="op" id="2260988">,</span>&nbsp;<span class="builtintype" id="2260990">false</span><span class="op" id="2260995">}</span><span class="op" id="2260996">,</span>&nbsp;&nbsp;<span class="comment" id="2260999">//&nbsp;10^-164</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261011">{</span><span class="num" id="2261012">0xdbac6c247d62a584</span><span class="op" id="2261030">,</span>&nbsp;<span class="op" id="2261032">-</span><span class="num" id="2261033">582</span><span class="op" id="2261036">,</span>&nbsp;<span class="builtintype" id="2261038">false</span><span class="op" id="2261043">}</span><span class="op" id="2261044">,</span>&nbsp;&nbsp;<span class="comment" id="2261047">//&nbsp;10^-156</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261059">{</span><span class="num" id="2261060">0xa3ab66580d5fdaf6</span><span class="op" id="2261078">,</span>&nbsp;<span class="op" id="2261080">-</span><span class="num" id="2261081">555</span><span class="op" id="2261084">,</span>&nbsp;<span class="builtintype" id="2261086">false</span><span class="op" id="2261091">}</span><span class="op" id="2261092">,</span>&nbsp;&nbsp;<span class="comment" id="2261095">//&nbsp;10^-148</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261107">{</span><span class="num" id="2261108">0xf3e2f893dec3f126</span><span class="op" id="2261126">,</span>&nbsp;<span class="op" id="2261128">-</span><span class="num" id="2261129">529</span><span class="op" id="2261132">,</span>&nbsp;<span class="builtintype" id="2261134">false</span><span class="op" id="2261139">}</span><span class="op" id="2261140">,</span>&nbsp;&nbsp;<span class="comment" id="2261143">//&nbsp;10^-140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261155">{</span><span class="num" id="2261156">0xb5b5ada8aaff80b8</span><span class="op" id="2261174">,</span>&nbsp;<span class="op" id="2261176">-</span><span class="num" id="2261177">502</span><span class="op" id="2261180">,</span>&nbsp;<span class="builtintype" id="2261182">false</span><span class="op" id="2261187">}</span><span class="op" id="2261188">,</span>&nbsp;&nbsp;<span class="comment" id="2261191">//&nbsp;10^-132</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261203">{</span><span class="num" id="2261204">0x87625f056c7c4a8b</span><span class="op" id="2261222">,</span>&nbsp;<span class="op" id="2261224">-</span><span class="num" id="2261225">475</span><span class="op" id="2261228">,</span>&nbsp;<span class="builtintype" id="2261230">false</span><span class="op" id="2261235">}</span><span class="op" id="2261236">,</span>&nbsp;&nbsp;<span class="comment" id="2261239">//&nbsp;10^-124</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261251">{</span><span class="num" id="2261252">0xc9bcff6034c13053</span><span class="op" id="2261270">,</span>&nbsp;<span class="op" id="2261272">-</span><span class="num" id="2261273">449</span><span class="op" id="2261276">,</span>&nbsp;<span class="builtintype" id="2261278">false</span><span class="op" id="2261283">}</span><span class="op" id="2261284">,</span>&nbsp;&nbsp;<span class="comment" id="2261287">//&nbsp;10^-116</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261299">{</span><span class="num" id="2261300">0x964e858c91ba2655</span><span class="op" id="2261318">,</span>&nbsp;<span class="op" id="2261320">-</span><span class="num" id="2261321">422</span><span class="op" id="2261324">,</span>&nbsp;<span class="builtintype" id="2261326">false</span><span class="op" id="2261331">}</span><span class="op" id="2261332">,</span>&nbsp;&nbsp;<span class="comment" id="2261335">//&nbsp;10^-108</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261347">{</span><span class="num" id="2261348">0xdff9772470297ebd</span><span class="op" id="2261366">,</span>&nbsp;<span class="op" id="2261368">-</span><span class="num" id="2261369">396</span><span class="op" id="2261372">,</span>&nbsp;<span class="builtintype" id="2261374">false</span><span class="op" id="2261379">}</span><span class="op" id="2261380">,</span>&nbsp;&nbsp;<span class="comment" id="2261383">//&nbsp;10^-100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261395">{</span><span class="num" id="2261396">0xa6dfbd9fb8e5b88f</span><span class="op" id="2261414">,</span>&nbsp;<span class="op" id="2261416">-</span><span class="num" id="2261417">369</span><span class="op" id="2261420">,</span>&nbsp;<span class="builtintype" id="2261422">false</span><span class="op" id="2261427">}</span><span class="op" id="2261428">,</span>&nbsp;&nbsp;<span class="comment" id="2261431">//&nbsp;10^-92</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261442">{</span><span class="num" id="2261443">0xf8a95fcf88747d94</span><span class="op" id="2261461">,</span>&nbsp;<span class="op" id="2261463">-</span><span class="num" id="2261464">343</span><span class="op" id="2261467">,</span>&nbsp;<span class="builtintype" id="2261469">false</span><span class="op" id="2261474">}</span><span class="op" id="2261475">,</span>&nbsp;&nbsp;<span class="comment" id="2261478">//&nbsp;10^-84</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261489">{</span><span class="num" id="2261490">0xb94470938fa89bcf</span><span class="op" id="2261508">,</span>&nbsp;<span class="op" id="2261510">-</span><span class="num" id="2261511">316</span><span class="op" id="2261514">,</span>&nbsp;<span class="builtintype" id="2261516">false</span><span class="op" id="2261521">}</span><span class="op" id="2261522">,</span>&nbsp;&nbsp;<span class="comment" id="2261525">//&nbsp;10^-76</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261536">{</span><span class="num" id="2261537">0x8a08f0f8bf0f156b</span><span class="op" id="2261555">,</span>&nbsp;<span class="op" id="2261557">-</span><span class="num" id="2261558">289</span><span class="op" id="2261561">,</span>&nbsp;<span class="builtintype" id="2261563">false</span><span class="op" id="2261568">}</span><span class="op" id="2261569">,</span>&nbsp;&nbsp;<span class="comment" id="2261572">//&nbsp;10^-68</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261583">{</span><span class="num" id="2261584">0xcdb02555653131b6</span><span class="op" id="2261602">,</span>&nbsp;<span class="op" id="2261604">-</span><span class="num" id="2261605">263</span><span class="op" id="2261608">,</span>&nbsp;<span class="builtintype" id="2261610">false</span><span class="op" id="2261615">}</span><span class="op" id="2261616">,</span>&nbsp;&nbsp;<span class="comment" id="2261619">//&nbsp;10^-60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261630">{</span><span class="num" id="2261631">0x993fe2c6d07b7fac</span><span class="op" id="2261649">,</span>&nbsp;<span class="op" id="2261651">-</span><span class="num" id="2261652">236</span><span class="op" id="2261655">,</span>&nbsp;<span class="builtintype" id="2261657">false</span><span class="op" id="2261662">}</span><span class="op" id="2261663">,</span>&nbsp;&nbsp;<span class="comment" id="2261666">//&nbsp;10^-52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261677">{</span><span class="num" id="2261678">0xe45c10c42a2b3b06</span><span class="op" id="2261696">,</span>&nbsp;<span class="op" id="2261698">-</span><span class="num" id="2261699">210</span><span class="op" id="2261702">,</span>&nbsp;<span class="builtintype" id="2261704">false</span><span class="op" id="2261709">}</span><span class="op" id="2261710">,</span>&nbsp;&nbsp;<span class="comment" id="2261713">//&nbsp;10^-44</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261724">{</span><span class="num" id="2261725">0xaa242499697392d3</span><span class="op" id="2261743">,</span>&nbsp;<span class="op" id="2261745">-</span><span class="num" id="2261746">183</span><span class="op" id="2261749">,</span>&nbsp;<span class="builtintype" id="2261751">false</span><span class="op" id="2261756">}</span><span class="op" id="2261757">,</span>&nbsp;&nbsp;<span class="comment" id="2261760">//&nbsp;10^-36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261771">{</span><span class="num" id="2261772">0xfd87b5f28300ca0e</span><span class="op" id="2261790">,</span>&nbsp;<span class="op" id="2261792">-</span><span class="num" id="2261793">157</span><span class="op" id="2261796">,</span>&nbsp;<span class="builtintype" id="2261798">false</span><span class="op" id="2261803">}</span><span class="op" id="2261804">,</span>&nbsp;&nbsp;<span class="comment" id="2261807">//&nbsp;10^-28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261818">{</span><span class="num" id="2261819">0xbce5086492111aeb</span><span class="op" id="2261837">,</span>&nbsp;<span class="op" id="2261839">-</span><span class="num" id="2261840">130</span><span class="op" id="2261843">,</span>&nbsp;<span class="builtintype" id="2261845">false</span><span class="op" id="2261850">}</span><span class="op" id="2261851">,</span>&nbsp;&nbsp;<span class="comment" id="2261854">//&nbsp;10^-20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261865">{</span><span class="num" id="2261866">0x8cbccc096f5088cc</span><span class="op" id="2261884">,</span>&nbsp;<span class="op" id="2261886">-</span><span class="num" id="2261887">103</span><span class="op" id="2261890">,</span>&nbsp;<span class="builtintype" id="2261892">false</span><span class="op" id="2261897">}</span><span class="op" id="2261898">,</span>&nbsp;&nbsp;<span class="comment" id="2261901">//&nbsp;10^-12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261912">{</span><span class="num" id="2261913">0xd1b71758e219652c</span><span class="op" id="2261931">,</span>&nbsp;<span class="op" id="2261933">-</span><span class="num" id="2261934">77</span><span class="op" id="2261936">,</span>&nbsp;<span class="builtintype" id="2261938">false</span><span class="op" id="2261943">}</span><span class="op" id="2261944">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2261948">//&nbsp;10^-4</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261958">{</span><span class="num" id="2261959">0x9c40000000000000</span><span class="op" id="2261977">,</span>&nbsp;<span class="op" id="2261979">-</span><span class="num" id="2261980">50</span><span class="op" id="2261982">,</span>&nbsp;<span class="builtintype" id="2261984">false</span><span class="op" id="2261989">}</span><span class="op" id="2261990">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2261994">//&nbsp;10^4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262003">{</span><span class="num" id="2262004">0xe8d4a51000000000</span><span class="op" id="2262022">,</span>&nbsp;<span class="op" id="2262024">-</span><span class="num" id="2262025">24</span><span class="op" id="2262027">,</span>&nbsp;<span class="builtintype" id="2262029">false</span><span class="op" id="2262034">}</span><span class="op" id="2262035">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262039">//&nbsp;10^12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262049">{</span><span class="num" id="2262050">0xad78ebc5ac620000</span><span class="op" id="2262068">,</span>&nbsp;<span class="num" id="2262070">3</span><span class="op" id="2262071">,</span>&nbsp;<span class="builtintype" id="2262073">false</span><span class="op" id="2262078">}</span><span class="op" id="2262079">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262085">//&nbsp;10^20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262095">{</span><span class="num" id="2262096">0x813f3978f8940984</span><span class="op" id="2262114">,</span>&nbsp;<span class="num" id="2262116">30</span><span class="op" id="2262118">,</span>&nbsp;<span class="builtintype" id="2262120">false</span><span class="op" id="2262125">}</span><span class="op" id="2262126">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262131">//&nbsp;10^28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262141">{</span><span class="num" id="2262142">0xc097ce7bc90715b3</span><span class="op" id="2262160">,</span>&nbsp;<span class="num" id="2262162">56</span><span class="op" id="2262164">,</span>&nbsp;<span class="builtintype" id="2262166">false</span><span class="op" id="2262171">}</span><span class="op" id="2262172">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262177">//&nbsp;10^36</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262187">{</span><span class="num" id="2262188">0x8f7e32ce7bea5c70</span><span class="op" id="2262206">,</span>&nbsp;<span class="num" id="2262208">83</span><span class="op" id="2262210">,</span>&nbsp;<span class="builtintype" id="2262212">false</span><span class="op" id="2262217">}</span><span class="op" id="2262218">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262223">//&nbsp;10^44</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262233">{</span><span class="num" id="2262234">0xd5d238a4abe98068</span><span class="op" id="2262252">,</span>&nbsp;<span class="num" id="2262254">109</span><span class="op" id="2262257">,</span>&nbsp;<span class="builtintype" id="2262259">false</span><span class="op" id="2262264">}</span><span class="op" id="2262265">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262269">//&nbsp;10^52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262279">{</span><span class="num" id="2262280">0x9f4f2726179a2245</span><span class="op" id="2262298">,</span>&nbsp;<span class="num" id="2262300">136</span><span class="op" id="2262303">,</span>&nbsp;<span class="builtintype" id="2262305">false</span><span class="op" id="2262310">}</span><span class="op" id="2262311">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262315">//&nbsp;10^60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262325">{</span><span class="num" id="2262326">0xed63a231d4c4fb27</span><span class="op" id="2262344">,</span>&nbsp;<span class="num" id="2262346">162</span><span class="op" id="2262349">,</span>&nbsp;<span class="builtintype" id="2262351">false</span><span class="op" id="2262356">}</span><span class="op" id="2262357">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262361">//&nbsp;10^68</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262371">{</span><span class="num" id="2262372">0xb0de65388cc8ada8</span><span class="op" id="2262390">,</span>&nbsp;<span class="num" id="2262392">189</span><span class="op" id="2262395">,</span>&nbsp;<span class="builtintype" id="2262397">false</span><span class="op" id="2262402">}</span><span class="op" id="2262403">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262407">//&nbsp;10^76</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262417">{</span><span class="num" id="2262418">0x83c7088e1aab65db</span><span class="op" id="2262436">,</span>&nbsp;<span class="num" id="2262438">216</span><span class="op" id="2262441">,</span>&nbsp;<span class="builtintype" id="2262443">false</span><span class="op" id="2262448">}</span><span class="op" id="2262449">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262453">//&nbsp;10^84</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262463">{</span><span class="num" id="2262464">0xc45d1df942711d9a</span><span class="op" id="2262482">,</span>&nbsp;<span class="num" id="2262484">242</span><span class="op" id="2262487">,</span>&nbsp;<span class="builtintype" id="2262489">false</span><span class="op" id="2262494">}</span><span class="op" id="2262495">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262499">//&nbsp;10^92</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262509">{</span><span class="num" id="2262510">0x924d692ca61be758</span><span class="op" id="2262528">,</span>&nbsp;<span class="num" id="2262530">269</span><span class="op" id="2262533">,</span>&nbsp;<span class="builtintype" id="2262535">false</span><span class="op" id="2262540">}</span><span class="op" id="2262541">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262545">//&nbsp;10^100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262556">{</span><span class="num" id="2262557">0xda01ee641a708dea</span><span class="op" id="2262575">,</span>&nbsp;<span class="num" id="2262577">295</span><span class="op" id="2262580">,</span>&nbsp;<span class="builtintype" id="2262582">false</span><span class="op" id="2262587">}</span><span class="op" id="2262588">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262592">//&nbsp;10^108</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262603">{</span><span class="num" id="2262604">0xa26da3999aef774a</span><span class="op" id="2262622">,</span>&nbsp;<span class="num" id="2262624">322</span><span class="op" id="2262627">,</span>&nbsp;<span class="builtintype" id="2262629">false</span><span class="op" id="2262634">}</span><span class="op" id="2262635">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262639">//&nbsp;10^116</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262650">{</span><span class="num" id="2262651">0xf209787bb47d6b85</span><span class="op" id="2262669">,</span>&nbsp;<span class="num" id="2262671">348</span><span class="op" id="2262674">,</span>&nbsp;<span class="builtintype" id="2262676">false</span><span class="op" id="2262681">}</span><span class="op" id="2262682">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262686">//&nbsp;10^124</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262697">{</span><span class="num" id="2262698">0xb454e4a179dd1877</span><span class="op" id="2262716">,</span>&nbsp;<span class="num" id="2262718">375</span><span class="op" id="2262721">,</span>&nbsp;<span class="builtintype" id="2262723">false</span><span class="op" id="2262728">}</span><span class="op" id="2262729">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262733">//&nbsp;10^132</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262744">{</span><span class="num" id="2262745">0x865b86925b9bc5c2</span><span class="op" id="2262763">,</span>&nbsp;<span class="num" id="2262765">402</span><span class="op" id="2262768">,</span>&nbsp;<span class="builtintype" id="2262770">false</span><span class="op" id="2262775">}</span><span class="op" id="2262776">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262780">//&nbsp;10^140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262791">{</span><span class="num" id="2262792">0xc83553c5c8965d3d</span><span class="op" id="2262810">,</span>&nbsp;<span class="num" id="2262812">428</span><span class="op" id="2262815">,</span>&nbsp;<span class="builtintype" id="2262817">false</span><span class="op" id="2262822">}</span><span class="op" id="2262823">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262827">//&nbsp;10^148</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262838">{</span><span class="num" id="2262839">0x952ab45cfa97a0b3</span><span class="op" id="2262857">,</span>&nbsp;<span class="num" id="2262859">455</span><span class="op" id="2262862">,</span>&nbsp;<span class="builtintype" id="2262864">false</span><span class="op" id="2262869">}</span><span class="op" id="2262870">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262874">//&nbsp;10^156</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262885">{</span><span class="num" id="2262886">0xde469fbd99a05fe3</span><span class="op" id="2262904">,</span>&nbsp;<span class="num" id="2262906">481</span><span class="op" id="2262909">,</span>&nbsp;<span class="builtintype" id="2262911">false</span><span class="op" id="2262916">}</span><span class="op" id="2262917">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262921">//&nbsp;10^164</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262932">{</span><span class="num" id="2262933">0xa59bc234db398c25</span><span class="op" id="2262951">,</span>&nbsp;<span class="num" id="2262953">508</span><span class="op" id="2262956">,</span>&nbsp;<span class="builtintype" id="2262958">false</span><span class="op" id="2262963">}</span><span class="op" id="2262964">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2262968">//&nbsp;10^172</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262979">{</span><span class="num" id="2262980">0xf6c69a72a3989f5c</span><span class="op" id="2262998">,</span>&nbsp;<span class="num" id="2263000">534</span><span class="op" id="2263003">,</span>&nbsp;<span class="builtintype" id="2263005">false</span><span class="op" id="2263010">}</span><span class="op" id="2263011">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263015">//&nbsp;10^180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263026">{</span><span class="num" id="2263027">0xb7dcbf5354e9bece</span><span class="op" id="2263045">,</span>&nbsp;<span class="num" id="2263047">561</span><span class="op" id="2263050">,</span>&nbsp;<span class="builtintype" id="2263052">false</span><span class="op" id="2263057">}</span><span class="op" id="2263058">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263062">//&nbsp;10^188</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263073">{</span><span class="num" id="2263074">0x88fcf317f22241e2</span><span class="op" id="2263092">,</span>&nbsp;<span class="num" id="2263094">588</span><span class="op" id="2263097">,</span>&nbsp;<span class="builtintype" id="2263099">false</span><span class="op" id="2263104">}</span><span class="op" id="2263105">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263109">//&nbsp;10^196</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263120">{</span><span class="num" id="2263121">0xcc20ce9bd35c78a5</span><span class="op" id="2263139">,</span>&nbsp;<span class="num" id="2263141">614</span><span class="op" id="2263144">,</span>&nbsp;<span class="builtintype" id="2263146">false</span><span class="op" id="2263151">}</span><span class="op" id="2263152">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263156">//&nbsp;10^204</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263167">{</span><span class="num" id="2263168">0x98165af37b2153df</span><span class="op" id="2263186">,</span>&nbsp;<span class="num" id="2263188">641</span><span class="op" id="2263191">,</span>&nbsp;<span class="builtintype" id="2263193">false</span><span class="op" id="2263198">}</span><span class="op" id="2263199">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263203">//&nbsp;10^212</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263214">{</span><span class="num" id="2263215">0xe2a0b5dc971f303a</span><span class="op" id="2263233">,</span>&nbsp;<span class="num" id="2263235">667</span><span class="op" id="2263238">,</span>&nbsp;<span class="builtintype" id="2263240">false</span><span class="op" id="2263245">}</span><span class="op" id="2263246">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263250">//&nbsp;10^220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263261">{</span><span class="num" id="2263262">0xa8d9d1535ce3b396</span><span class="op" id="2263280">,</span>&nbsp;<span class="num" id="2263282">694</span><span class="op" id="2263285">,</span>&nbsp;<span class="builtintype" id="2263287">false</span><span class="op" id="2263292">}</span><span class="op" id="2263293">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263297">//&nbsp;10^228</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263308">{</span><span class="num" id="2263309">0xfb9b7cd9a4a7443c</span><span class="op" id="2263327">,</span>&nbsp;<span class="num" id="2263329">720</span><span class="op" id="2263332">,</span>&nbsp;<span class="builtintype" id="2263334">false</span><span class="op" id="2263339">}</span><span class="op" id="2263340">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263344">//&nbsp;10^236</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263355">{</span><span class="num" id="2263356">0xbb764c4ca7a44410</span><span class="op" id="2263374">,</span>&nbsp;<span class="num" id="2263376">747</span><span class="op" id="2263379">,</span>&nbsp;<span class="builtintype" id="2263381">false</span><span class="op" id="2263386">}</span><span class="op" id="2263387">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263391">//&nbsp;10^244</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263402">{</span><span class="num" id="2263403">0x8bab8eefb6409c1a</span><span class="op" id="2263421">,</span>&nbsp;<span class="num" id="2263423">774</span><span class="op" id="2263426">,</span>&nbsp;<span class="builtintype" id="2263428">false</span><span class="op" id="2263433">}</span><span class="op" id="2263434">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263438">//&nbsp;10^252</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263449">{</span><span class="num" id="2263450">0xd01fef10a657842c</span><span class="op" id="2263468">,</span>&nbsp;<span class="num" id="2263470">800</span><span class="op" id="2263473">,</span>&nbsp;<span class="builtintype" id="2263475">false</span><span class="op" id="2263480">}</span><span class="op" id="2263481">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263485">//&nbsp;10^260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263496">{</span><span class="num" id="2263497">0x9b10a4e5e9913129</span><span class="op" id="2263515">,</span>&nbsp;<span class="num" id="2263517">827</span><span class="op" id="2263520">,</span>&nbsp;<span class="builtintype" id="2263522">false</span><span class="op" id="2263527">}</span><span class="op" id="2263528">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263532">//&nbsp;10^268</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263543">{</span><span class="num" id="2263544">0xe7109bfba19c0c9d</span><span class="op" id="2263562">,</span>&nbsp;<span class="num" id="2263564">853</span><span class="op" id="2263567">,</span>&nbsp;<span class="builtintype" id="2263569">false</span><span class="op" id="2263574">}</span><span class="op" id="2263575">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263579">//&nbsp;10^276</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263590">{</span><span class="num" id="2263591">0xac2820d9623bf429</span><span class="op" id="2263609">,</span>&nbsp;<span class="num" id="2263611">880</span><span class="op" id="2263614">,</span>&nbsp;<span class="builtintype" id="2263616">false</span><span class="op" id="2263621">}</span><span class="op" id="2263622">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263626">//&nbsp;10^284</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263637">{</span><span class="num" id="2263638">0x80444b5e7aa7cf85</span><span class="op" id="2263656">,</span>&nbsp;<span class="num" id="2263658">907</span><span class="op" id="2263661">,</span>&nbsp;<span class="builtintype" id="2263663">false</span><span class="op" id="2263668">}</span><span class="op" id="2263669">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263673">//&nbsp;10^292</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263684">{</span><span class="num" id="2263685">0xbf21e44003acdd2d</span><span class="op" id="2263703">,</span>&nbsp;<span class="num" id="2263705">933</span><span class="op" id="2263708">,</span>&nbsp;<span class="builtintype" id="2263710">false</span><span class="op" id="2263715">}</span><span class="op" id="2263716">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263720">//&nbsp;10^300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263731">{</span><span class="num" id="2263732">0x8e679c2f5e44ff8f</span><span class="op" id="2263750">,</span>&nbsp;<span class="num" id="2263752">960</span><span class="op" id="2263755">,</span>&nbsp;<span class="builtintype" id="2263757">false</span><span class="op" id="2263762">}</span><span class="op" id="2263763">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263767">//&nbsp;10^308</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263778">{</span><span class="num" id="2263779">0xd433179d9c8cb841</span><span class="op" id="2263797">,</span>&nbsp;<span class="num" id="2263799">986</span><span class="op" id="2263802">,</span>&nbsp;<span class="builtintype" id="2263804">false</span><span class="op" id="2263809">}</span><span class="op" id="2263810">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2263814">//&nbsp;10^316</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263825">{</span><span class="num" id="2263826">0x9e19db92b4e31ba9</span><span class="op" id="2263844">,</span>&nbsp;<span class="num" id="2263846">1013</span><span class="op" id="2263850">,</span>&nbsp;<span class="builtintype" id="2263852">false</span><span class="op" id="2263857">}</span><span class="op" id="2263858">,</span>&nbsp;&nbsp;<span class="comment" id="2263861">//&nbsp;10^324</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263872">{</span><span class="num" id="2263873">0xeb96bf6ebadf77d9</span><span class="op" id="2263891">,</span>&nbsp;<span class="num" id="2263893">1039</span><span class="op" id="2263897">,</span>&nbsp;<span class="builtintype" id="2263899">false</span><span class="op" id="2263904">}</span><span class="op" id="2263905">,</span>&nbsp;&nbsp;<span class="comment" id="2263908">//&nbsp;10^332</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263919">{</span><span class="num" id="2263920">0xaf87023b9bf0ee6b</span><span class="op" id="2263938">,</span>&nbsp;<span class="num" id="2263940">1066</span><span class="op" id="2263944">,</span>&nbsp;<span class="builtintype" id="2263946">false</span><span class="op" id="2263951">}</span><span class="op" id="2263952">,</span>&nbsp;&nbsp;<span class="comment" id="2263955">//&nbsp;10^340</span><br>
<span class="lineno"></span><span class="op" id="2263965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="2263968">//&nbsp;floatBits&nbsp;returns&nbsp;the&nbsp;bits&nbsp;of&nbsp;the&nbsp;float64&nbsp;that&nbsp;best&nbsp;approximates</span><br>
<span class="lineno"></span><span class="comment" id="2264036">//&nbsp;the&nbsp;extFloat&nbsp;passed&nbsp;as&nbsp;receiver.&nbsp;Overflow&nbsp;is&nbsp;set&nbsp;to&nbsp;true&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2264099">//&nbsp;the&nbsp;resulting&nbsp;float64&nbsp;is&nbsp;Inf.</span><br>
<span class="lineno"></span><span class="keyword" id="2264134">func</span>&nbsp;<span class="op" id="2264139">(</span><span class="ident" id="2264140">f</span>&nbsp;<span class="op" id="2264142">*</span><span class="ident" id="2264143">extFloat</span><span class="op" id="2264151">)</span>&nbsp;<span class="ident" id="2264153">floatBits</span><span class="op" id="2264162">(</span><span class="ident" id="2264163">flt</span>&nbsp;<span class="op" id="2264167">*</span><span class="ident" id="2264168">floatInfo</span><span class="op" id="2264177">)</span>&nbsp;<span class="op" id="2264179">(</span><span class="ident" id="2264180">bits</span>&nbsp;<span class="ident" id="2264185">uint64</span><span class="op" id="2264191">,</span>&nbsp;<span class="ident" id="2264193">overflow</span>&nbsp;<span class="builtintype" id="2264202">bool</span><span class="op" id="2264206">)</span>&nbsp;<span class="op" id="2264208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264211">f</span><span class="op" id="2264212">.</span><span class="ident" id="2264213">Normalize</span><span class="op" id="2264222">(</span><span class="op" id="2264223">)</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264227">exp</span>&nbsp;<span class="op" id="2264231">:=</span>&nbsp;<span class="ident" id="2264234">f</span><span class="op" id="2264235">.</span><span class="ident" id="2264236">exp</span>&nbsp;<span class="op" id="2264240">+</span>&nbsp;<span class="num" id="2264242">63</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2264247">//&nbsp;Exponent&nbsp;too&nbsp;small.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264271">if</span>&nbsp;<span class="ident" id="2264274">exp</span>&nbsp;<span class="op" id="2264278">&lt;</span>&nbsp;<span class="ident" id="2264280">flt</span><span class="op" id="2264283">.</span><span class="ident" id="2264284">bias</span><span class="op" id="2264288">+</span><span class="num" id="2264289">1</span>&nbsp;<span class="op" id="2264291">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264295">n</span>&nbsp;<span class="op" id="2264297">:=</span>&nbsp;<span class="ident" id="2264300">flt</span><span class="op" id="2264303">.</span><span class="ident" id="2264304">bias</span>&nbsp;<span class="op" id="2264309">+</span>&nbsp;<span class="num" id="2264311">1</span>&nbsp;<span class="op" id="2264313">-</span>&nbsp;<span class="ident" id="2264315">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264321">f</span><span class="op" id="2264322">.</span><span class="ident" id="2264323">mant</span>&nbsp;<span class="op" id="2264328">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="2264332">uint</span><span class="op" id="2264336">(</span><span class="ident" id="2264337">n</span><span class="op" id="2264338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264342">exp</span>&nbsp;<span class="op" id="2264346">+=</span>&nbsp;<span class="ident" id="2264349">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2264352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2264356">//&nbsp;Extract&nbsp;1+flt.mantbits&nbsp;bits&nbsp;from&nbsp;the&nbsp;64-bit&nbsp;mantissa.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264414">mant</span>&nbsp;<span class="op" id="2264419">:=</span>&nbsp;<span class="ident" id="2264422">f</span><span class="op" id="2264423">.</span><span class="ident" id="2264424">mant</span>&nbsp;<span class="op" id="2264429">&gt;&gt;</span>&nbsp;<span class="op" id="2264432">(</span><span class="num" id="2264433">63</span>&nbsp;<span class="op" id="2264436">-</span>&nbsp;<span class="ident" id="2264438">flt</span><span class="op" id="2264441">.</span><span class="ident" id="2264442">mantbits</span><span class="op" id="2264450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264453">if</span>&nbsp;<span class="ident" id="2264456">f</span><span class="op" id="2264457">.</span><span class="ident" id="2264458">mant</span><span class="op" id="2264462">&amp;</span><span class="op" id="2264463">(</span><span class="num" id="2264464">1</span><span class="op" id="2264465">&lt;&lt;</span><span class="op" id="2264467">(</span><span class="num" id="2264468">62</span><span class="op" id="2264470">-</span><span class="ident" id="2264471">flt</span><span class="op" id="2264474">.</span><span class="ident" id="2264475">mantbits</span><span class="op" id="2264483">)</span><span class="op" id="2264484">)</span>&nbsp;<span class="op" id="2264486">!=</span>&nbsp;<span class="num" id="2264489">0</span>&nbsp;<span class="op" id="2264491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2264495">//&nbsp;Round&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264510">mant</span>&nbsp;<span class="op" id="2264515">+=</span>&nbsp;<span class="num" id="2264518">1</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2264521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2264525">//&nbsp;Rounding&nbsp;might&nbsp;have&nbsp;added&nbsp;a&nbsp;bit;&nbsp;shift&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264574">if</span>&nbsp;<span class="ident" id="2264577">mant</span>&nbsp;<span class="op" id="2264582">==</span>&nbsp;<span class="num" id="2264585">2</span><span class="op" id="2264586">&lt;&lt;</span><span class="ident" id="2264588">flt</span><span class="op" id="2264591">.</span><span class="ident" id="2264592">mantbits</span>&nbsp;<span class="op" id="2264601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264605">mant</span>&nbsp;<span class="op" id="2264610">&gt;&gt;=</span>&nbsp;<span class="num" id="2264614">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264618">exp</span><span class="op" id="2264621">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2264625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2264629">//&nbsp;Infinities.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264645">if</span>&nbsp;<span class="ident" id="2264648">exp</span><span class="op" id="2264651">-</span><span class="ident" id="2264652">flt</span><span class="op" id="2264655">.</span><span class="ident" id="2264656">bias</span>&nbsp;<span class="op" id="2264661">&gt;=</span>&nbsp;<span class="num" id="2264664">1</span><span class="op" id="2264665">&lt;&lt;</span><span class="ident" id="2264667">flt</span><span class="op" id="2264670">.</span><span class="ident" id="2264671">expbits</span><span class="op" id="2264678">-</span><span class="num" id="2264679">1</span>&nbsp;<span class="op" id="2264681">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2264685">//&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264696">mant</span>&nbsp;<span class="op" id="2264701">=</span>&nbsp;<span class="num" id="2264703">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264707">exp</span>&nbsp;<span class="op" id="2264711">=</span>&nbsp;<span class="num" id="2264713">1</span><span class="op" id="2264714">&lt;&lt;</span><span class="ident" id="2264716">flt</span><span class="op" id="2264719">.</span><span class="ident" id="2264720">expbits</span>&nbsp;<span class="op" id="2264728">-</span>&nbsp;<span class="num" id="2264730">1</span>&nbsp;<span class="op" id="2264732">+</span>&nbsp;<span class="ident" id="2264734">flt</span><span class="op" id="2264737">.</span><span class="ident" id="2264738">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264745">overflow</span>&nbsp;<span class="op" id="2264754">=</span>&nbsp;<span class="builtintype" id="2264756">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2264762">}</span>&nbsp;<span class="keyword" id="2264764">else</span>&nbsp;<span class="keyword" id="2264769">if</span>&nbsp;<span class="ident" id="2264772">mant</span><span class="op" id="2264776">&amp;</span><span class="op" id="2264777">(</span><span class="num" id="2264778">1</span><span class="op" id="2264779">&lt;&lt;</span><span class="ident" id="2264781">flt</span><span class="op" id="2264784">.</span><span class="ident" id="2264785">mantbits</span><span class="op" id="2264793">)</span>&nbsp;<span class="op" id="2264795">==</span>&nbsp;<span class="num" id="2264798">0</span>&nbsp;<span class="op" id="2264800">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2264804">//&nbsp;Denormalized?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264823">exp</span>&nbsp;<span class="op" id="2264827">=</span>&nbsp;<span class="ident" id="2264829">flt</span><span class="op" id="2264832">.</span><span class="ident" id="2264833">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2264839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2264842">//&nbsp;Assemble&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264861">bits</span>&nbsp;<span class="op" id="2264866">=</span>&nbsp;<span class="ident" id="2264868">mant</span>&nbsp;<span class="op" id="2264873">&amp;</span>&nbsp;<span class="op" id="2264875">(</span><span class="ident" id="2264876">uint64</span><span class="op" id="2264882">(</span><span class="num" id="2264883">1</span><span class="op" id="2264884">)</span><span class="op" id="2264885">&lt;&lt;</span><span class="ident" id="2264887">flt</span><span class="op" id="2264890">.</span><span class="ident" id="2264891">mantbits</span>&nbsp;<span class="op" id="2264900">-</span>&nbsp;<span class="num" id="2264902">1</span><span class="op" id="2264903">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264906">bits</span>&nbsp;<span class="op" id="2264911">|=</span>&nbsp;<span class="ident" id="2264914">uint64</span><span class="op" id="2264920">(</span><span class="op" id="2264921">(</span><span class="ident" id="2264922">exp</span><span class="op" id="2264925">-</span><span class="ident" id="2264926">flt</span><span class="op" id="2264929">.</span><span class="ident" id="2264930">bias</span><span class="op" id="2264934">)</span><span class="op" id="2264935">&amp;</span><span class="op" id="2264936">(</span><span class="num" id="2264937">1</span><span class="op" id="2264938">&lt;&lt;</span><span class="ident" id="2264940">flt</span><span class="op" id="2264943">.</span><span class="ident" id="2264944">expbits</span><span class="op" id="2264951">-</span><span class="num" id="2264952">1</span><span class="op" id="2264953">)</span><span class="op" id="2264954">)</span>&nbsp;<span class="op" id="2264956">&lt;&lt;</span>&nbsp;<span class="ident" id="2264959">flt</span><span class="op" id="2264962">.</span><span class="ident" id="2264963">mantbits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264973">if</span>&nbsp;<span class="ident" id="2264976">f</span><span class="op" id="2264977">.</span><span class="ident" id="2264978">neg</span>&nbsp;<span class="op" id="2264982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264986">bits</span>&nbsp;<span class="op" id="2264991">|=</span>&nbsp;<span class="num" id="2264994">1</span>&nbsp;<span class="op" id="2264996">&lt;&lt;</span>&nbsp;<span class="op" id="2264999">(</span><span class="ident" id="2265000">flt</span><span class="op" id="2265003">.</span><span class="ident" id="2265004">mantbits</span>&nbsp;<span class="op" id="2265013">+</span>&nbsp;<span class="ident" id="2265015">flt</span><span class="op" id="2265018">.</span><span class="ident" id="2265019">expbits</span><span class="op" id="2265026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2265029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265032">return</span><br>
<span class="lineno">170</span><span class="op" id="2265039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2265042">//&nbsp;AssignComputeBounds&nbsp;sets&nbsp;f&nbsp;to&nbsp;the&nbsp;floating&nbsp;point&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2265100">//&nbsp;defined&nbsp;by&nbsp;mant,&nbsp;exp&nbsp;and&nbsp;precision&nbsp;given&nbsp;by&nbsp;flt.&nbsp;It&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="2265163">//&nbsp;lower,&nbsp;upper&nbsp;such&nbsp;that&nbsp;any&nbsp;number&nbsp;in&nbsp;the&nbsp;closed&nbsp;interval</span><br>
<span class="lineno">175</span><span class="comment" id="2265223">//&nbsp;[lower,&nbsp;upper]&nbsp;is&nbsp;converted&nbsp;back&nbsp;to&nbsp;the&nbsp;same&nbsp;floating&nbsp;point&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="2265294">func</span>&nbsp;<span class="op" id="2265299">(</span><span class="ident" id="2265300">f</span>&nbsp;<span class="op" id="2265302">*</span><span class="ident" id="2265303">extFloat</span><span class="op" id="2265311">)</span>&nbsp;<span class="ident" id="2265313">AssignComputeBounds</span><span class="op" id="2265332">(</span><span class="ident" id="2265333">mant</span>&nbsp;<span class="ident" id="2265338">uint64</span><span class="op" id="2265344">,</span>&nbsp;<span class="ident" id="2265346">exp</span>&nbsp;<span class="builtintype" id="2265350">int</span><span class="op" id="2265353">,</span>&nbsp;<span class="ident" id="2265355">neg</span>&nbsp;<span class="builtintype" id="2265359">bool</span><span class="op" id="2265363">,</span>&nbsp;<span class="ident" id="2265365">flt</span>&nbsp;<span class="op" id="2265369">*</span><span class="ident" id="2265370">floatInfo</span><span class="op" id="2265379">)</span>&nbsp;<span class="op" id="2265381">(</span><span class="ident" id="2265382">lower</span><span class="op" id="2265387">,</span>&nbsp;<span class="ident" id="2265389">upper</span>&nbsp;<span class="ident" id="2265395">extFloat</span><span class="op" id="2265403">)</span>&nbsp;<span class="op" id="2265405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265408">f</span><span class="op" id="2265409">.</span><span class="ident" id="2265410">mant</span>&nbsp;<span class="op" id="2265415">=</span>&nbsp;<span class="ident" id="2265417">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265423">f</span><span class="op" id="2265424">.</span><span class="ident" id="2265425">exp</span>&nbsp;<span class="op" id="2265429">=</span>&nbsp;<span class="ident" id="2265431">exp</span>&nbsp;<span class="op" id="2265435">-</span>&nbsp;<span class="builtintype" id="2265437">int</span><span class="op" id="2265440">(</span><span class="ident" id="2265441">flt</span><span class="op" id="2265444">.</span><span class="ident" id="2265445">mantbits</span><span class="op" id="2265453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265456">f</span><span class="op" id="2265457">.</span><span class="ident" id="2265458">neg</span>&nbsp;<span class="op" id="2265462">=</span>&nbsp;<span class="ident" id="2265464">neg</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265469">if</span>&nbsp;<span class="ident" id="2265472">f</span><span class="op" id="2265473">.</span><span class="ident" id="2265474">exp</span>&nbsp;<span class="op" id="2265478">&lt;=</span>&nbsp;<span class="num" id="2265481">0</span>&nbsp;<span class="op" id="2265483">&amp;&amp;</span>&nbsp;<span class="ident" id="2265486">mant</span>&nbsp;<span class="op" id="2265491">==</span>&nbsp;<span class="op" id="2265494">(</span><span class="ident" id="2265495">mant</span><span class="op" id="2265499">&gt;&gt;</span><span class="builtintype" id="2265501">uint</span><span class="op" id="2265505">(</span><span class="op" id="2265506">-</span><span class="ident" id="2265507">f</span><span class="op" id="2265508">.</span><span class="ident" id="2265509">exp</span><span class="op" id="2265512">)</span><span class="op" id="2265513">)</span><span class="op" id="2265514">&lt;&lt;</span><span class="builtintype" id="2265516">uint</span><span class="op" id="2265520">(</span><span class="op" id="2265521">-</span><span class="ident" id="2265522">f</span><span class="op" id="2265523">.</span><span class="ident" id="2265524">exp</span><span class="op" id="2265527">)</span>&nbsp;<span class="op" id="2265529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2265533">//&nbsp;An&nbsp;exact&nbsp;integer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265555">f</span><span class="op" id="2265556">.</span><span class="ident" id="2265557">mant</span>&nbsp;<span class="op" id="2265562">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="2265566">uint</span><span class="op" id="2265570">(</span><span class="op" id="2265571">-</span><span class="ident" id="2265572">f</span><span class="op" id="2265573">.</span><span class="ident" id="2265574">exp</span><span class="op" id="2265577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265581">f</span><span class="op" id="2265582">.</span><span class="ident" id="2265583">exp</span>&nbsp;<span class="op" id="2265587">=</span>&nbsp;<span class="num" id="2265589">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265593">return</span>&nbsp;<span class="op" id="2265600">*</span><span class="ident" id="2265601">f</span><span class="op" id="2265602">,</span>&nbsp;<span class="op" id="2265604">*</span><span class="ident" id="2265605">f</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2265608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265611">expBiased</span>&nbsp;<span class="op" id="2265621">:=</span>&nbsp;<span class="ident" id="2265624">exp</span>&nbsp;<span class="op" id="2265628">-</span>&nbsp;<span class="ident" id="2265630">flt</span><span class="op" id="2265633">.</span><span class="ident" id="2265634">bias</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265641">upper</span>&nbsp;<span class="op" id="2265647">=</span>&nbsp;<span class="ident" id="2265649">extFloat</span><span class="op" id="2265657">{</span><span class="ident" id="2265658">mant</span><span class="op" id="2265662">:</span>&nbsp;<span class="num" id="2265664">2</span><span class="op" id="2265665">*</span><span class="ident" id="2265666">f</span><span class="op" id="2265667">.</span><span class="ident" id="2265668">mant</span>&nbsp;<span class="op" id="2265673">+</span>&nbsp;<span class="num" id="2265675">1</span><span class="op" id="2265676">,</span>&nbsp;<span class="ident" id="2265678">exp</span><span class="op" id="2265681">:</span>&nbsp;<span class="ident" id="2265683">f</span><span class="op" id="2265684">.</span><span class="ident" id="2265685">exp</span>&nbsp;<span class="op" id="2265689">-</span>&nbsp;<span class="num" id="2265691">1</span><span class="op" id="2265692">,</span>&nbsp;<span class="ident" id="2265694">neg</span><span class="op" id="2265697">:</span>&nbsp;<span class="ident" id="2265699">f</span><span class="op" id="2265700">.</span><span class="ident" id="2265701">neg</span><span class="op" id="2265704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265707">if</span>&nbsp;<span class="ident" id="2265710">mant</span>&nbsp;<span class="op" id="2265715">!=</span>&nbsp;<span class="num" id="2265718">1</span><span class="op" id="2265719">&lt;&lt;</span><span class="ident" id="2265721">flt</span><span class="op" id="2265724">.</span><span class="ident" id="2265725">mantbits</span>&nbsp;<span class="op" id="2265734">||</span>&nbsp;<span class="ident" id="2265737">expBiased</span>&nbsp;<span class="op" id="2265747">==</span>&nbsp;<span class="num" id="2265750">1</span>&nbsp;<span class="op" id="2265752">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265756">lower</span>&nbsp;<span class="op" id="2265762">=</span>&nbsp;<span class="ident" id="2265764">extFloat</span><span class="op" id="2265772">{</span><span class="ident" id="2265773">mant</span><span class="op" id="2265777">:</span>&nbsp;<span class="num" id="2265779">2</span><span class="op" id="2265780">*</span><span class="ident" id="2265781">f</span><span class="op" id="2265782">.</span><span class="ident" id="2265783">mant</span>&nbsp;<span class="op" id="2265788">-</span>&nbsp;<span class="num" id="2265790">1</span><span class="op" id="2265791">,</span>&nbsp;<span class="ident" id="2265793">exp</span><span class="op" id="2265796">:</span>&nbsp;<span class="ident" id="2265798">f</span><span class="op" id="2265799">.</span><span class="ident" id="2265800">exp</span>&nbsp;<span class="op" id="2265804">-</span>&nbsp;<span class="num" id="2265806">1</span><span class="op" id="2265807">,</span>&nbsp;<span class="ident" id="2265809">neg</span><span class="op" id="2265812">:</span>&nbsp;<span class="ident" id="2265814">f</span><span class="op" id="2265815">.</span><span class="ident" id="2265816">neg</span><span class="op" id="2265819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2265822">}</span>&nbsp;<span class="keyword" id="2265824">else</span>&nbsp;<span class="op" id="2265829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265833">lower</span>&nbsp;<span class="op" id="2265839">=</span>&nbsp;<span class="ident" id="2265841">extFloat</span><span class="op" id="2265849">{</span><span class="ident" id="2265850">mant</span><span class="op" id="2265854">:</span>&nbsp;<span class="num" id="2265856">4</span><span class="op" id="2265857">*</span><span class="ident" id="2265858">f</span><span class="op" id="2265859">.</span><span class="ident" id="2265860">mant</span>&nbsp;<span class="op" id="2265865">-</span>&nbsp;<span class="num" id="2265867">1</span><span class="op" id="2265868">,</span>&nbsp;<span class="ident" id="2265870">exp</span><span class="op" id="2265873">:</span>&nbsp;<span class="ident" id="2265875">f</span><span class="op" id="2265876">.</span><span class="ident" id="2265877">exp</span>&nbsp;<span class="op" id="2265881">-</span>&nbsp;<span class="num" id="2265883">2</span><span class="op" id="2265884">,</span>&nbsp;<span class="ident" id="2265886">neg</span><span class="op" id="2265889">:</span>&nbsp;<span class="ident" id="2265891">f</span><span class="op" id="2265892">.</span><span class="ident" id="2265893">neg</span><span class="op" id="2265896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2265899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265902">return</span><br>
<span class="lineno">195</span><span class="op" id="2265909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2265912">//&nbsp;Normalize&nbsp;normalizes&nbsp;f&nbsp;so&nbsp;that&nbsp;the&nbsp;highest&nbsp;bit&nbsp;of&nbsp;the&nbsp;mantissa&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2265981">//&nbsp;set,&nbsp;and&nbsp;returns&nbsp;the&nbsp;number&nbsp;by&nbsp;which&nbsp;the&nbsp;mantissa&nbsp;was&nbsp;left-shifted.</span><br>
<span class="lineno"></span><span class="keyword" id="2266052">func</span>&nbsp;<span class="op" id="2266057">(</span><span class="ident" id="2266058">f</span>&nbsp;<span class="op" id="2266060">*</span><span class="ident" id="2266061">extFloat</span><span class="op" id="2266069">)</span>&nbsp;<span class="ident" id="2266071">Normalize</span><span class="op" id="2266080">(</span><span class="op" id="2266081">)</span>&nbsp;<span class="op" id="2266083">(</span><span class="ident" id="2266084">shift</span>&nbsp;<span class="builtintype" id="2266090">uint</span><span class="op" id="2266094">)</span>&nbsp;<span class="op" id="2266096">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266099">mant</span><span class="op" id="2266103">,</span>&nbsp;<span class="ident" id="2266105">exp</span>&nbsp;<span class="op" id="2266109">:=</span>&nbsp;<span class="ident" id="2266112">f</span><span class="op" id="2266113">.</span><span class="ident" id="2266114">mant</span><span class="op" id="2266118">,</span>&nbsp;<span class="ident" id="2266120">f</span><span class="op" id="2266121">.</span><span class="ident" id="2266122">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266127">if</span>&nbsp;<span class="ident" id="2266130">mant</span>&nbsp;<span class="op" id="2266135">==</span>&nbsp;<span class="num" id="2266138">0</span>&nbsp;<span class="op" id="2266140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266144">return</span>&nbsp;<span class="num" id="2266151">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266157">if</span>&nbsp;<span class="ident" id="2266160">mant</span><span class="op" id="2266164">&gt;&gt;</span><span class="op" id="2266166">(</span><span class="num" id="2266167">64</span><span class="op" id="2266169">-</span><span class="num" id="2266170">32</span><span class="op" id="2266172">)</span>&nbsp;<span class="op" id="2266174">==</span>&nbsp;<span class="num" id="2266177">0</span>&nbsp;<span class="op" id="2266179">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266183">mant</span>&nbsp;<span class="op" id="2266188">&lt;&lt;=</span>&nbsp;<span class="num" id="2266192">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266197">exp</span>&nbsp;<span class="op" id="2266201">-=</span>&nbsp;<span class="num" id="2266204">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266211">if</span>&nbsp;<span class="ident" id="2266214">mant</span><span class="op" id="2266218">&gt;&gt;</span><span class="op" id="2266220">(</span><span class="num" id="2266221">64</span><span class="op" id="2266223">-</span><span class="num" id="2266224">16</span><span class="op" id="2266226">)</span>&nbsp;<span class="op" id="2266228">==</span>&nbsp;<span class="num" id="2266231">0</span>&nbsp;<span class="op" id="2266233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266237">mant</span>&nbsp;<span class="op" id="2266242">&lt;&lt;=</span>&nbsp;<span class="num" id="2266246">16</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266251">exp</span>&nbsp;<span class="op" id="2266255">-=</span>&nbsp;<span class="num" id="2266258">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266265">if</span>&nbsp;<span class="ident" id="2266268">mant</span><span class="op" id="2266272">&gt;&gt;</span><span class="op" id="2266274">(</span><span class="num" id="2266275">64</span><span class="op" id="2266277">-</span><span class="num" id="2266278">8</span><span class="op" id="2266279">)</span>&nbsp;<span class="op" id="2266281">==</span>&nbsp;<span class="num" id="2266284">0</span>&nbsp;<span class="op" id="2266286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266290">mant</span>&nbsp;<span class="op" id="2266295">&lt;&lt;=</span>&nbsp;<span class="num" id="2266299">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266303">exp</span>&nbsp;<span class="op" id="2266307">-=</span>&nbsp;<span class="num" id="2266310">8</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266316">if</span>&nbsp;<span class="ident" id="2266319">mant</span><span class="op" id="2266323">&gt;&gt;</span><span class="op" id="2266325">(</span><span class="num" id="2266326">64</span><span class="op" id="2266328">-</span><span class="num" id="2266329">4</span><span class="op" id="2266330">)</span>&nbsp;<span class="op" id="2266332">==</span>&nbsp;<span class="num" id="2266335">0</span>&nbsp;<span class="op" id="2266337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266341">mant</span>&nbsp;<span class="op" id="2266346">&lt;&lt;=</span>&nbsp;<span class="num" id="2266350">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266354">exp</span>&nbsp;<span class="op" id="2266358">-=</span>&nbsp;<span class="num" id="2266361">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266364">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266367">if</span>&nbsp;<span class="ident" id="2266370">mant</span><span class="op" id="2266374">&gt;&gt;</span><span class="op" id="2266376">(</span><span class="num" id="2266377">64</span><span class="op" id="2266379">-</span><span class="num" id="2266380">2</span><span class="op" id="2266381">)</span>&nbsp;<span class="op" id="2266383">==</span>&nbsp;<span class="num" id="2266386">0</span>&nbsp;<span class="op" id="2266388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266392">mant</span>&nbsp;<span class="op" id="2266397">&lt;&lt;=</span>&nbsp;<span class="num" id="2266401">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266405">exp</span>&nbsp;<span class="op" id="2266409">-=</span>&nbsp;<span class="num" id="2266412">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266418">if</span>&nbsp;<span class="ident" id="2266421">mant</span><span class="op" id="2266425">&gt;&gt;</span><span class="op" id="2266427">(</span><span class="num" id="2266428">64</span><span class="op" id="2266430">-</span><span class="num" id="2266431">1</span><span class="op" id="2266432">)</span>&nbsp;<span class="op" id="2266434">==</span>&nbsp;<span class="num" id="2266437">0</span>&nbsp;<span class="op" id="2266439">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266443">mant</span>&nbsp;<span class="op" id="2266448">&lt;&lt;=</span>&nbsp;<span class="num" id="2266452">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266456">exp</span>&nbsp;<span class="op" id="2266460">-=</span>&nbsp;<span class="num" id="2266463">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266469">shift</span>&nbsp;<span class="op" id="2266475">=</span>&nbsp;<span class="builtintype" id="2266477">uint</span><span class="op" id="2266481">(</span><span class="ident" id="2266482">f</span><span class="op" id="2266483">.</span><span class="ident" id="2266484">exp</span>&nbsp;<span class="op" id="2266488">-</span>&nbsp;<span class="ident" id="2266490">exp</span><span class="op" id="2266493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266496">f</span><span class="op" id="2266497">.</span><span class="ident" id="2266498">mant</span><span class="op" id="2266502">,</span>&nbsp;<span class="ident" id="2266504">f</span><span class="op" id="2266505">.</span><span class="ident" id="2266506">exp</span>&nbsp;<span class="op" id="2266510">=</span>&nbsp;<span class="ident" id="2266512">mant</span><span class="op" id="2266516">,</span>&nbsp;<span class="ident" id="2266518">exp</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266523">return</span><br>
<span class="lineno"></span><span class="op" id="2266530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2266533">//&nbsp;Multiply&nbsp;sets&nbsp;f&nbsp;to&nbsp;the&nbsp;product&nbsp;f*g:&nbsp;the&nbsp;result&nbsp;is&nbsp;correctly&nbsp;rounded,</span><br>
<span class="lineno"></span><span class="comment" id="2266605">//&nbsp;but&nbsp;not&nbsp;normalized.</span><br>
<span class="lineno">235</span><span class="keyword" id="2266628">func</span>&nbsp;<span class="op" id="2266633">(</span><span class="ident" id="2266634">f</span>&nbsp;<span class="op" id="2266636">*</span><span class="ident" id="2266637">extFloat</span><span class="op" id="2266645">)</span>&nbsp;<span class="ident" id="2266647">Multiply</span><span class="op" id="2266655">(</span><span class="ident" id="2266656">g</span>&nbsp;<span class="ident" id="2266658">extFloat</span><span class="op" id="2266666">)</span>&nbsp;<span class="op" id="2266668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266671">fhi</span><span class="op" id="2266674">,</span>&nbsp;<span class="ident" id="2266676">flo</span>&nbsp;<span class="op" id="2266680">:=</span>&nbsp;<span class="ident" id="2266683">f</span><span class="op" id="2266684">.</span><span class="ident" id="2266685">mant</span><span class="op" id="2266689">&gt;&gt;</span><span class="num" id="2266691">32</span><span class="op" id="2266693">,</span>&nbsp;<span class="ident" id="2266695">uint64</span><span class="op" id="2266701">(</span><span class="builtintype" id="2266702">uint32</span><span class="op" id="2266708">(</span><span class="ident" id="2266709">f</span><span class="op" id="2266710">.</span><span class="ident" id="2266711">mant</span><span class="op" id="2266715">)</span><span class="op" id="2266716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266719">ghi</span><span class="op" id="2266722">,</span>&nbsp;<span class="ident" id="2266724">glo</span>&nbsp;<span class="op" id="2266728">:=</span>&nbsp;<span class="ident" id="2266731">g</span><span class="op" id="2266732">.</span><span class="ident" id="2266733">mant</span><span class="op" id="2266737">&gt;&gt;</span><span class="num" id="2266739">32</span><span class="op" id="2266741">,</span>&nbsp;<span class="ident" id="2266743">uint64</span><span class="op" id="2266749">(</span><span class="builtintype" id="2266750">uint32</span><span class="op" id="2266756">(</span><span class="ident" id="2266757">g</span><span class="op" id="2266758">.</span><span class="ident" id="2266759">mant</span><span class="op" id="2266763">)</span><span class="op" id="2266764">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2266768">//&nbsp;Cross&nbsp;products.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266788">cross1</span>&nbsp;<span class="op" id="2266795">:=</span>&nbsp;<span class="ident" id="2266798">fhi</span>&nbsp;<span class="op" id="2266802">*</span>&nbsp;<span class="ident" id="2266804">glo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266809">cross2</span>&nbsp;<span class="op" id="2266816">:=</span>&nbsp;<span class="ident" id="2266819">flo</span>&nbsp;<span class="op" id="2266823">*</span>&nbsp;<span class="ident" id="2266825">ghi</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2266831">//&nbsp;f.mant*g.mant&nbsp;is&nbsp;fhi*ghi&nbsp;&lt;&lt;&nbsp;64&nbsp;+&nbsp;(cross1+cross2)&nbsp;&lt;&lt;&nbsp;32&nbsp;+&nbsp;flo*glo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266900">f</span><span class="op" id="2266901">.</span><span class="ident" id="2266902">mant</span>&nbsp;<span class="op" id="2266907">=</span>&nbsp;<span class="ident" id="2266909">fhi</span><span class="op" id="2266912">*</span><span class="ident" id="2266913">ghi</span>&nbsp;<span class="op" id="2266917">+</span>&nbsp;<span class="op" id="2266919">(</span><span class="ident" id="2266920">cross1</span>&nbsp;<span class="op" id="2266927">&gt;&gt;</span>&nbsp;<span class="num" id="2266930">32</span><span class="op" id="2266932">)</span>&nbsp;<span class="op" id="2266934">+</span>&nbsp;<span class="op" id="2266936">(</span><span class="ident" id="2266937">cross2</span>&nbsp;<span class="op" id="2266944">&gt;&gt;</span>&nbsp;<span class="num" id="2266947">32</span><span class="op" id="2266949">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266952">rem</span>&nbsp;<span class="op" id="2266956">:=</span>&nbsp;<span class="ident" id="2266959">uint64</span><span class="op" id="2266965">(</span><span class="builtintype" id="2266966">uint32</span><span class="op" id="2266972">(</span><span class="ident" id="2266973">cross1</span><span class="op" id="2266979">)</span><span class="op" id="2266980">)</span>&nbsp;<span class="op" id="2266982">+</span>&nbsp;<span class="ident" id="2266984">uint64</span><span class="op" id="2266990">(</span><span class="builtintype" id="2266991">uint32</span><span class="op" id="2266997">(</span><span class="ident" id="2266998">cross2</span><span class="op" id="2267004">)</span><span class="op" id="2267005">)</span>&nbsp;<span class="op" id="2267007">+</span>&nbsp;<span class="op" id="2267009">(</span><span class="op" id="2267010">(</span><span class="ident" id="2267011">flo</span>&nbsp;<span class="op" id="2267015">*</span>&nbsp;<span class="ident" id="2267017">glo</span><span class="op" id="2267020">)</span>&nbsp;<span class="op" id="2267022">&gt;&gt;</span>&nbsp;<span class="num" id="2267025">32</span><span class="op" id="2267027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267030">//&nbsp;Round&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267044">rem</span>&nbsp;<span class="op" id="2267048">+=</span>&nbsp;<span class="op" id="2267051">(</span><span class="num" id="2267052">1</span>&nbsp;<span class="op" id="2267054">&lt;&lt;</span>&nbsp;<span class="num" id="2267057">31</span><span class="op" id="2267059">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267063">f</span><span class="op" id="2267064">.</span><span class="ident" id="2267065">mant</span>&nbsp;<span class="op" id="2267070">+=</span>&nbsp;<span class="op" id="2267073">(</span><span class="ident" id="2267074">rem</span>&nbsp;<span class="op" id="2267078">&gt;&gt;</span>&nbsp;<span class="num" id="2267081">32</span><span class="op" id="2267083">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267086">f</span><span class="op" id="2267087">.</span><span class="ident" id="2267088">exp</span>&nbsp;<span class="op" id="2267092">=</span>&nbsp;<span class="ident" id="2267094">f</span><span class="op" id="2267095">.</span><span class="ident" id="2267096">exp</span>&nbsp;<span class="op" id="2267100">+</span>&nbsp;<span class="ident" id="2267102">g</span><span class="op" id="2267103">.</span><span class="ident" id="2267104">exp</span>&nbsp;<span class="op" id="2267108">+</span>&nbsp;<span class="num" id="2267110">64</span><br>
<span class="lineno"></span><span class="op" id="2267113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2267116">var</span>&nbsp;<span class="ident" id="2267120">uint64pow10</span>&nbsp;<span class="op" id="2267132">=</span>&nbsp;<span class="op" id="2267134">[</span><span class="op" id="2267135">...</span><span class="op" id="2267138">]</span><span class="ident" id="2267139">uint64</span><span class="op" id="2267145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2267148">1</span><span class="op" id="2267149">,</span>&nbsp;<span class="num" id="2267151">1e1</span><span class="op" id="2267154">,</span>&nbsp;<span class="num" id="2267156">1e2</span><span class="op" id="2267159">,</span>&nbsp;<span class="num" id="2267161">1e3</span><span class="op" id="2267164">,</span>&nbsp;<span class="num" id="2267166">1e4</span><span class="op" id="2267169">,</span>&nbsp;<span class="num" id="2267171">1e5</span><span class="op" id="2267174">,</span>&nbsp;<span class="num" id="2267176">1e6</span><span class="op" id="2267179">,</span>&nbsp;<span class="num" id="2267181">1e7</span><span class="op" id="2267184">,</span>&nbsp;<span class="num" id="2267186">1e8</span><span class="op" id="2267189">,</span>&nbsp;<span class="num" id="2267191">1e9</span><span class="op" id="2267194">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2267197">1e10</span><span class="op" id="2267201">,</span>&nbsp;<span class="num" id="2267203">1e11</span><span class="op" id="2267207">,</span>&nbsp;<span class="num" id="2267209">1e12</span><span class="op" id="2267213">,</span>&nbsp;<span class="num" id="2267215">1e13</span><span class="op" id="2267219">,</span>&nbsp;<span class="num" id="2267221">1e14</span><span class="op" id="2267225">,</span>&nbsp;<span class="num" id="2267227">1e15</span><span class="op" id="2267231">,</span>&nbsp;<span class="num" id="2267233">1e16</span><span class="op" id="2267237">,</span>&nbsp;<span class="num" id="2267239">1e17</span><span class="op" id="2267243">,</span>&nbsp;<span class="num" id="2267245">1e18</span><span class="op" id="2267249">,</span>&nbsp;<span class="num" id="2267251">1e19</span><span class="op" id="2267255">,</span><br>
<span class="lineno"></span><span class="op" id="2267257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2267260">//&nbsp;AssignDecimal&nbsp;sets&nbsp;f&nbsp;to&nbsp;an&nbsp;approximate&nbsp;value&nbsp;mantissa*10^exp.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2267328">//&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;f&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;the</span><br>
<span class="lineno">260</span><span class="comment" id="2267398">//&nbsp;best&nbsp;approximation&nbsp;of&nbsp;d&nbsp;after&nbsp;being&nbsp;rounded&nbsp;to&nbsp;a&nbsp;float64&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2267461">//&nbsp;float32&nbsp;depending&nbsp;on&nbsp;flt.</span><br>
<span class="lineno"></span><span class="keyword" id="2267490">func</span>&nbsp;<span class="op" id="2267495">(</span><span class="ident" id="2267496">f</span>&nbsp;<span class="op" id="2267498">*</span><span class="ident" id="2267499">extFloat</span><span class="op" id="2267507">)</span>&nbsp;<span class="ident" id="2267509">AssignDecimal</span><span class="op" id="2267522">(</span><span class="ident" id="2267523">mantissa</span>&nbsp;<span class="ident" id="2267532">uint64</span><span class="op" id="2267538">,</span>&nbsp;<span class="ident" id="2267540">exp10</span>&nbsp;<span class="builtintype" id="2267546">int</span><span class="op" id="2267549">,</span>&nbsp;<span class="ident" id="2267551">neg</span>&nbsp;<span class="builtintype" id="2267555">bool</span><span class="op" id="2267559">,</span>&nbsp;<span class="ident" id="2267561">trunc</span>&nbsp;<span class="builtintype" id="2267567">bool</span><span class="op" id="2267571">,</span>&nbsp;<span class="ident" id="2267573">flt</span>&nbsp;<span class="op" id="2267577">*</span><span class="ident" id="2267578">floatInfo</span><span class="op" id="2267587">)</span>&nbsp;<span class="op" id="2267589">(</span><span class="ident" id="2267590">ok</span>&nbsp;<span class="builtintype" id="2267593">bool</span><span class="op" id="2267597">)</span>&nbsp;<span class="op" id="2267599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267602">const</span>&nbsp;<span class="ident" id="2267608">uint64digits</span>&nbsp;<span class="op" id="2267621">=</span>&nbsp;<span class="num" id="2267623">19</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267627">const</span>&nbsp;<span class="ident" id="2267633">errorscale</span>&nbsp;<span class="op" id="2267644">=</span>&nbsp;<span class="num" id="2267646">8</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267649">errors</span>&nbsp;<span class="op" id="2267656">:=</span>&nbsp;<span class="num" id="2267659">0</span>&nbsp;<span class="comment" id="2267661">//&nbsp;An&nbsp;upper&nbsp;bound&nbsp;for&nbsp;error,&nbsp;computed&nbsp;in&nbsp;errorscale*ulp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267719">if</span>&nbsp;<span class="ident" id="2267722">trunc</span>&nbsp;<span class="op" id="2267728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267732">//&nbsp;the&nbsp;decimal&nbsp;number&nbsp;was&nbsp;truncated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267771">errors</span>&nbsp;<span class="op" id="2267778">+=</span>&nbsp;<span class="ident" id="2267781">errorscale</span>&nbsp;<span class="op" id="2267792">/</span>&nbsp;<span class="num" id="2267794">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2267797">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267801">f</span><span class="op" id="2267802">.</span><span class="ident" id="2267803">mant</span>&nbsp;<span class="op" id="2267808">=</span>&nbsp;<span class="ident" id="2267810">mantissa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267820">f</span><span class="op" id="2267821">.</span><span class="ident" id="2267822">exp</span>&nbsp;<span class="op" id="2267826">=</span>&nbsp;<span class="num" id="2267828">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267831">f</span><span class="op" id="2267832">.</span><span class="ident" id="2267833">neg</span>&nbsp;<span class="op" id="2267837">=</span>&nbsp;<span class="ident" id="2267839">neg</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267845">//&nbsp;Multiply&nbsp;by&nbsp;powers&nbsp;of&nbsp;ten.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267876">i</span>&nbsp;<span class="op" id="2267878">:=</span>&nbsp;<span class="op" id="2267881">(</span><span class="ident" id="2267882">exp10</span>&nbsp;<span class="op" id="2267888">-</span>&nbsp;<span class="ident" id="2267890">firstPowerOfTen</span><span class="op" id="2267905">)</span>&nbsp;<span class="op" id="2267907">/</span>&nbsp;<span class="ident" id="2267909">stepPowerOfTen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267925">if</span>&nbsp;<span class="ident" id="2267928">exp10</span>&nbsp;<span class="op" id="2267934">&lt;</span>&nbsp;<span class="ident" id="2267936">firstPowerOfTen</span>&nbsp;<span class="op" id="2267952">||</span>&nbsp;<span class="ident" id="2267955">i</span>&nbsp;<span class="op" id="2267957">&gt;=</span>&nbsp;<span class="builtinfunc" id="2267960">len</span><span class="op" id="2267963">(</span><span class="ident" id="2267964">powersOfTen</span><span class="op" id="2267975">)</span>&nbsp;<span class="op" id="2267977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267981">return</span>&nbsp;<span class="builtintype" id="2267988">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2267995">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267998">adjExp</span>&nbsp;<span class="op" id="2268005">:=</span>&nbsp;<span class="op" id="2268008">(</span><span class="ident" id="2268009">exp10</span>&nbsp;<span class="op" id="2268015">-</span>&nbsp;<span class="ident" id="2268017">firstPowerOfTen</span><span class="op" id="2268032">)</span>&nbsp;<span class="op" id="2268034">%</span>&nbsp;<span class="ident" id="2268036">stepPowerOfTen</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268053">//&nbsp;We&nbsp;multiply&nbsp;by&nbsp;exp%step</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2268081">if</span>&nbsp;<span class="ident" id="2268084">adjExp</span>&nbsp;<span class="op" id="2268091">&lt;</span>&nbsp;<span class="ident" id="2268093">uint64digits</span>&nbsp;<span class="op" id="2268106">&amp;&amp;</span>&nbsp;<span class="ident" id="2268109">mantissa</span>&nbsp;<span class="op" id="2268118">&lt;</span>&nbsp;<span class="ident" id="2268120">uint64pow10</span><span class="op" id="2268131">[</span><span class="ident" id="2268132">uint64digits</span><span class="op" id="2268144">-</span><span class="ident" id="2268145">adjExp</span><span class="op" id="2268151">]</span>&nbsp;<span class="op" id="2268153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268157">//&nbsp;We&nbsp;can&nbsp;multiply&nbsp;the&nbsp;mantissa&nbsp;exactly.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268200">f</span><span class="op" id="2268201">.</span><span class="ident" id="2268202">mant</span>&nbsp;<span class="op" id="2268207">*=</span>&nbsp;<span class="ident" id="2268210">uint64pow10</span><span class="op" id="2268221">[</span><span class="ident" id="2268222">adjExp</span><span class="op" id="2268228">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268232">f</span><span class="op" id="2268233">.</span><span class="ident" id="2268234">Normalize</span><span class="op" id="2268243">(</span><span class="op" id="2268244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2268247">}</span>&nbsp;<span class="keyword" id="2268249">else</span>&nbsp;<span class="op" id="2268254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268258">f</span><span class="op" id="2268259">.</span><span class="ident" id="2268260">Normalize</span><span class="op" id="2268269">(</span><span class="op" id="2268270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268274">f</span><span class="op" id="2268275">.</span><span class="ident" id="2268276">Multiply</span><span class="op" id="2268284">(</span><span class="ident" id="2268285">smallPowersOfTen</span><span class="op" id="2268301">[</span><span class="ident" id="2268302">adjExp</span><span class="op" id="2268308">]</span><span class="op" id="2268309">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268313">errors</span>&nbsp;<span class="op" id="2268320">+=</span>&nbsp;<span class="ident" id="2268323">errorscale</span>&nbsp;<span class="op" id="2268334">/</span>&nbsp;<span class="num" id="2268336">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2268339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268343">//&nbsp;We&nbsp;multiply&nbsp;by&nbsp;10&nbsp;to&nbsp;the&nbsp;exp&nbsp;-&nbsp;exp%step.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268388">f</span><span class="op" id="2268389">.</span><span class="ident" id="2268390">Multiply</span><span class="op" id="2268398">(</span><span class="ident" id="2268399">powersOfTen</span><span class="op" id="2268410">[</span><span class="ident" id="2268411">i</span><span class="op" id="2268412">]</span><span class="op" id="2268413">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2268416">if</span>&nbsp;<span class="ident" id="2268419">errors</span>&nbsp;<span class="op" id="2268426">&gt;</span>&nbsp;<span class="num" id="2268428">0</span>&nbsp;<span class="op" id="2268430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268434">errors</span>&nbsp;<span class="op" id="2268441">+=</span>&nbsp;<span class="num" id="2268444">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2268447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268450">errors</span>&nbsp;<span class="op" id="2268457">+=</span>&nbsp;<span class="ident" id="2268460">errorscale</span>&nbsp;<span class="op" id="2268471">/</span>&nbsp;<span class="num" id="2268473">2</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268477">//&nbsp;Normalize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268491">shift</span>&nbsp;<span class="op" id="2268497">:=</span>&nbsp;<span class="ident" id="2268500">f</span><span class="op" id="2268501">.</span><span class="ident" id="2268502">Normalize</span><span class="op" id="2268511">(</span><span class="op" id="2268512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268515">errors</span>&nbsp;<span class="op" id="2268522">&lt;&lt;=</span>&nbsp;<span class="ident" id="2268526">shift</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268534">//&nbsp;Now&nbsp;f&nbsp;is&nbsp;a&nbsp;good&nbsp;approximation&nbsp;of&nbsp;the&nbsp;decimal.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268584">//&nbsp;Check&nbsp;whether&nbsp;the&nbsp;error&nbsp;is&nbsp;too&nbsp;large:&nbsp;that&nbsp;is,&nbsp;if&nbsp;the&nbsp;mantissa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268651">//&nbsp;is&nbsp;perturbated&nbsp;by&nbsp;the&nbsp;error,&nbsp;the&nbsp;resulting&nbsp;float64&nbsp;will&nbsp;change.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268719">//&nbsp;The&nbsp;64&nbsp;bits&nbsp;mantissa&nbsp;is&nbsp;1&nbsp;+&nbsp;52&nbsp;bits&nbsp;for&nbsp;float64&nbsp;+&nbsp;11&nbsp;extra&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268788">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268792">//&nbsp;In&nbsp;many&nbsp;cases&nbsp;the&nbsp;approximation&nbsp;will&nbsp;be&nbsp;good&nbsp;enough.</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268849">denormalExp</span>&nbsp;<span class="op" id="2268861">:=</span>&nbsp;<span class="ident" id="2268864">flt</span><span class="op" id="2268867">.</span><span class="ident" id="2268868">bias</span>&nbsp;<span class="op" id="2268873">-</span>&nbsp;<span class="num" id="2268875">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2268879">var</span>&nbsp;<span class="ident" id="2268883">extrabits</span>&nbsp;<span class="builtintype" id="2268893">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2268899">if</span>&nbsp;<span class="ident" id="2268902">f</span><span class="op" id="2268903">.</span><span class="ident" id="2268904">exp</span>&nbsp;<span class="op" id="2268908">&lt;=</span>&nbsp;<span class="ident" id="2268911">denormalExp</span>&nbsp;<span class="op" id="2268923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268927">//&nbsp;f.mant&nbsp;*&nbsp;2^f.exp&nbsp;is&nbsp;smaller&nbsp;than&nbsp;2^(flt.bias+1).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268981">extrabits</span>&nbsp;<span class="op" id="2268991">=</span>&nbsp;<span class="builtintype" id="2268993">uint</span><span class="op" id="2268997">(</span><span class="num" id="2268998">63</span>&nbsp;<span class="op" id="2269001">-</span>&nbsp;<span class="ident" id="2269003">flt</span><span class="op" id="2269006">.</span><span class="ident" id="2269007">mantbits</span>&nbsp;<span class="op" id="2269016">+</span>&nbsp;<span class="num" id="2269018">1</span>&nbsp;<span class="op" id="2269020">+</span>&nbsp;<span class="builtintype" id="2269022">uint</span><span class="op" id="2269026">(</span><span class="ident" id="2269027">denormalExp</span><span class="op" id="2269038">-</span><span class="ident" id="2269039">f</span><span class="op" id="2269040">.</span><span class="ident" id="2269041">exp</span><span class="op" id="2269044">)</span><span class="op" id="2269045">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2269048">}</span>&nbsp;<span class="keyword" id="2269050">else</span>&nbsp;<span class="op" id="2269055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2269059">extrabits</span>&nbsp;<span class="op" id="2269069">=</span>&nbsp;<span class="builtintype" id="2269071">uint</span><span class="op" id="2269075">(</span><span class="num" id="2269076">63</span>&nbsp;<span class="op" id="2269079">-</span>&nbsp;<span class="ident" id="2269081">flt</span><span class="op" id="2269084">.</span><span class="ident" id="2269085">mantbits</span><span class="op" id="2269093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2269096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2269100">halfway</span>&nbsp;<span class="op" id="2269108">:=</span>&nbsp;<span class="ident" id="2269111">uint64</span><span class="op" id="2269117">(</span><span class="num" id="2269118">1</span><span class="op" id="2269119">)</span>&nbsp;<span class="op" id="2269121">&lt;&lt;</span>&nbsp;<span class="op" id="2269124">(</span><span class="ident" id="2269125">extrabits</span>&nbsp;<span class="op" id="2269135">-</span>&nbsp;<span class="num" id="2269137">1</span><span class="op" id="2269138">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2269141">mant_extra</span>&nbsp;<span class="op" id="2269152">:=</span>&nbsp;<span class="ident" id="2269155">f</span><span class="op" id="2269156">.</span><span class="ident" id="2269157">mant</span>&nbsp;<span class="op" id="2269162">&amp;</span>&nbsp;<span class="op" id="2269164">(</span><span class="num" id="2269165">1</span><span class="op" id="2269166">&lt;&lt;</span><span class="ident" id="2269168">extrabits</span>&nbsp;<span class="op" id="2269178">-</span>&nbsp;<span class="num" id="2269180">1</span><span class="op" id="2269181">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2269185">//&nbsp;Do&nbsp;a&nbsp;signed&nbsp;comparison&nbsp;here!&nbsp;If&nbsp;the&nbsp;error&nbsp;estimate&nbsp;could&nbsp;make</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2269251">//&nbsp;the&nbsp;mantissa&nbsp;round&nbsp;differently&nbsp;for&nbsp;the&nbsp;conversion&nbsp;to&nbsp;double,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2269316">//&nbsp;then&nbsp;we&nbsp;can&#39;t&nbsp;give&nbsp;a&nbsp;definite&nbsp;answer.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269358">if</span>&nbsp;<span class="ident" id="2269361">int64</span><span class="op" id="2269366">(</span><span class="ident" id="2269367">halfway</span><span class="op" id="2269374">)</span><span class="op" id="2269375">-</span><span class="ident" id="2269376">int64</span><span class="op" id="2269381">(</span><span class="ident" id="2269382">errors</span><span class="op" id="2269388">)</span>&nbsp;<span class="op" id="2269390">&lt;</span>&nbsp;<span class="ident" id="2269392">int64</span><span class="op" id="2269397">(</span><span class="ident" id="2269398">mant_extra</span><span class="op" id="2269408">)</span>&nbsp;<span class="op" id="2269410">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2269415">int64</span><span class="op" id="2269420">(</span><span class="ident" id="2269421">mant_extra</span><span class="op" id="2269431">)</span>&nbsp;<span class="op" id="2269433">&lt;</span>&nbsp;<span class="ident" id="2269435">int64</span><span class="op" id="2269440">(</span><span class="ident" id="2269441">halfway</span><span class="op" id="2269448">)</span><span class="op" id="2269449">+</span><span class="ident" id="2269450">int64</span><span class="op" id="2269455">(</span><span class="ident" id="2269456">errors</span><span class="op" id="2269462">)</span>&nbsp;<span class="op" id="2269464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269468">return</span>&nbsp;<span class="builtintype" id="2269475">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2269482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269485">return</span>&nbsp;<span class="builtintype" id="2269492">true</span><br>
<span class="lineno">330</span><span class="op" id="2269497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2269500">//&nbsp;Frexp10&nbsp;is&nbsp;an&nbsp;analogue&nbsp;of&nbsp;math.Frexp&nbsp;for&nbsp;decimal&nbsp;powers.&nbsp;It&nbsp;scales</span><br>
<span class="lineno"></span><span class="comment" id="2269570">//&nbsp;f&nbsp;by&nbsp;an&nbsp;approximate&nbsp;power&nbsp;of&nbsp;ten&nbsp;10^-exp,&nbsp;and&nbsp;returns&nbsp;exp10,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2269637">//&nbsp;that&nbsp;f*10^exp10&nbsp;has&nbsp;the&nbsp;same&nbsp;value&nbsp;as&nbsp;the&nbsp;old&nbsp;f,&nbsp;up&nbsp;to&nbsp;an&nbsp;ulp,</span><br>
<span class="lineno">335</span><span class="comment" id="2269703">//&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;index&nbsp;of&nbsp;10^-exp&nbsp;in&nbsp;the&nbsp;powersOfTen&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="2269764">func</span>&nbsp;<span class="op" id="2269769">(</span><span class="ident" id="2269770">f</span>&nbsp;<span class="op" id="2269772">*</span><span class="ident" id="2269773">extFloat</span><span class="op" id="2269781">)</span>&nbsp;<span class="ident" id="2269783">frexp10</span><span class="op" id="2269790">(</span><span class="op" id="2269791">)</span>&nbsp;<span class="op" id="2269793">(</span><span class="ident" id="2269794">exp10</span><span class="op" id="2269799">,</span>&nbsp;<span class="ident" id="2269801">index</span>&nbsp;<span class="builtintype" id="2269807">int</span><span class="op" id="2269810">)</span>&nbsp;<span class="op" id="2269812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2269815">//&nbsp;The&nbsp;constants&nbsp;expMin&nbsp;and&nbsp;expMax&nbsp;constrain&nbsp;the&nbsp;final&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2269884">//&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;f.&nbsp;We&nbsp;want&nbsp;a&nbsp;small&nbsp;integral&nbsp;part&nbsp;in&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2269954">//&nbsp;because&nbsp;finding&nbsp;digits&nbsp;of&nbsp;an&nbsp;integer&nbsp;requires&nbsp;divisions,&nbsp;whereas</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270023">//&nbsp;digits&nbsp;of&nbsp;the&nbsp;fractional&nbsp;part&nbsp;can&nbsp;be&nbsp;found&nbsp;by&nbsp;repeatedly&nbsp;multiplying</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270096">//&nbsp;by&nbsp;10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270107">const</span>&nbsp;<span class="ident" id="2270113">expMin</span>&nbsp;<span class="op" id="2270120">=</span>&nbsp;<span class="op" id="2270122">-</span><span class="num" id="2270123">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270127">const</span>&nbsp;<span class="ident" id="2270133">expMax</span>&nbsp;<span class="op" id="2270140">=</span>&nbsp;<span class="op" id="2270142">-</span><span class="num" id="2270143">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270147">//&nbsp;Find&nbsp;power&nbsp;of&nbsp;ten&nbsp;such&nbsp;that&nbsp;x&nbsp;*&nbsp;10^n&nbsp;has&nbsp;a&nbsp;binary&nbsp;exponent</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270210">//&nbsp;between&nbsp;expMin&nbsp;and&nbsp;expMax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270241">approxExp10</span>&nbsp;<span class="op" id="2270253">:=</span>&nbsp;<span class="op" id="2270256">(</span><span class="op" id="2270257">(</span><span class="ident" id="2270258">expMin</span><span class="op" id="2270264">+</span><span class="ident" id="2270265">expMax</span><span class="op" id="2270271">)</span><span class="op" id="2270272">/</span><span class="num" id="2270273">2</span>&nbsp;<span class="op" id="2270275">-</span>&nbsp;<span class="ident" id="2270277">f</span><span class="op" id="2270278">.</span><span class="ident" id="2270279">exp</span><span class="op" id="2270282">)</span>&nbsp;<span class="op" id="2270284">*</span>&nbsp;<span class="num" id="2270286">28</span>&nbsp;<span class="op" id="2270289">/</span>&nbsp;<span class="num" id="2270291">93</span>&nbsp;<span class="comment" id="2270294">//&nbsp;log(10)/log(2)&nbsp;is&nbsp;close&nbsp;to&nbsp;93/28.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270332">i</span>&nbsp;<span class="op" id="2270334">:=</span>&nbsp;<span class="op" id="2270337">(</span><span class="ident" id="2270338">approxExp10</span>&nbsp;<span class="op" id="2270350">-</span>&nbsp;<span class="ident" id="2270352">firstPowerOfTen</span><span class="op" id="2270367">)</span>&nbsp;<span class="op" id="2270369">/</span>&nbsp;<span class="ident" id="2270371">stepPowerOfTen</span><br>
<span class="lineno"></span><span class="ident" id="2270386">Loop</span><span class="op" id="2270390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270393">for</span>&nbsp;<span class="op" id="2270397">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270401">exp</span>&nbsp;<span class="op" id="2270405">:=</span>&nbsp;<span class="ident" id="2270408">f</span><span class="op" id="2270409">.</span><span class="ident" id="2270410">exp</span>&nbsp;<span class="op" id="2270414">+</span>&nbsp;<span class="ident" id="2270416">powersOfTen</span><span class="op" id="2270427">[</span><span class="ident" id="2270428">i</span><span class="op" id="2270429">]</span><span class="op" id="2270430">.</span><span class="ident" id="2270431">exp</span>&nbsp;<span class="op" id="2270435">+</span>&nbsp;<span class="num" id="2270437">64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270442">switch</span>&nbsp;<span class="op" id="2270449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270453">case</span>&nbsp;<span class="ident" id="2270458">exp</span>&nbsp;<span class="op" id="2270462">&lt;</span>&nbsp;<span class="ident" id="2270464">expMin</span><span class="op" id="2270470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270475">i</span><span class="op" id="2270476">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270481">case</span>&nbsp;<span class="ident" id="2270486">exp</span>&nbsp;<span class="op" id="2270490">&gt;</span>&nbsp;<span class="ident" id="2270492">expMax</span><span class="op" id="2270498">:</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270503">i</span><span class="op" id="2270504">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270509">default</span><span class="op" id="2270516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270521">break</span>&nbsp;<span class="ident" id="2270527">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2270534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2270537">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270540">//&nbsp;Apply&nbsp;the&nbsp;desired&nbsp;decimal&nbsp;shift&nbsp;on&nbsp;f.&nbsp;It&nbsp;will&nbsp;have&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270604">//&nbsp;in&nbsp;the&nbsp;desired&nbsp;range.&nbsp;This&nbsp;is&nbsp;multiplication&nbsp;by&nbsp;10^-exp10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270667">f</span><span class="op" id="2270668">.</span><span class="ident" id="2270669">Multiply</span><span class="op" id="2270677">(</span><span class="ident" id="2270678">powersOfTen</span><span class="op" id="2270689">[</span><span class="ident" id="2270690">i</span><span class="op" id="2270691">]</span><span class="op" id="2270692">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270696">return</span>&nbsp;<span class="op" id="2270703">-</span><span class="op" id="2270704">(</span><span class="ident" id="2270705">firstPowerOfTen</span>&nbsp;<span class="op" id="2270721">+</span>&nbsp;<span class="ident" id="2270723">i</span><span class="op" id="2270724">*</span><span class="ident" id="2270725">stepPowerOfTen</span><span class="op" id="2270739">)</span><span class="op" id="2270740">,</span>&nbsp;<span class="ident" id="2270742">i</span><br>
<span class="lineno">365</span><span class="op" id="2270744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2270747">//&nbsp;frexp10Many&nbsp;applies&nbsp;a&nbsp;common&nbsp;shift&nbsp;by&nbsp;a&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;a,&nbsp;b,&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="2270815">func</span>&nbsp;<span class="ident" id="2270820">frexp10Many</span><span class="op" id="2270831">(</span><span class="ident" id="2270832">a</span><span class="op" id="2270833">,</span>&nbsp;<span class="ident" id="2270835">b</span><span class="op" id="2270836">,</span>&nbsp;<span class="ident" id="2270838">c</span>&nbsp;<span class="op" id="2270840">*</span><span class="ident" id="2270841">extFloat</span><span class="op" id="2270849">)</span>&nbsp;<span class="op" id="2270851">(</span><span class="ident" id="2270852">exp10</span>&nbsp;<span class="builtintype" id="2270858">int</span><span class="op" id="2270861">)</span>&nbsp;<span class="op" id="2270863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270866">exp10</span><span class="op" id="2270871">,</span>&nbsp;<span class="ident" id="2270873">i</span>&nbsp;<span class="op" id="2270875">:=</span>&nbsp;<span class="ident" id="2270878">c</span><span class="op" id="2270879">.</span><span class="ident" id="2270880">frexp10</span><span class="op" id="2270887">(</span><span class="op" id="2270888">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270891">a</span><span class="op" id="2270892">.</span><span class="ident" id="2270893">Multiply</span><span class="op" id="2270901">(</span><span class="ident" id="2270902">powersOfTen</span><span class="op" id="2270913">[</span><span class="ident" id="2270914">i</span><span class="op" id="2270915">]</span><span class="op" id="2270916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270919">b</span><span class="op" id="2270920">.</span><span class="ident" id="2270921">Multiply</span><span class="op" id="2270929">(</span><span class="ident" id="2270930">powersOfTen</span><span class="op" id="2270941">[</span><span class="ident" id="2270942">i</span><span class="op" id="2270943">]</span><span class="op" id="2270944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270947">return</span><br>
<span class="lineno"></span><span class="op" id="2270954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span><span class="comment" id="2270957">//&nbsp;FixedDecimal&nbsp;stores&nbsp;in&nbsp;d&nbsp;the&nbsp;first&nbsp;n&nbsp;significant&nbsp;digits</span><br>
<span class="lineno"></span><span class="comment" id="2271016">//&nbsp;of&nbsp;the&nbsp;decimal&nbsp;representation&nbsp;of&nbsp;f.&nbsp;It&nbsp;returns&nbsp;false</span><br>
<span class="lineno"></span><span class="comment" id="2271072">//&nbsp;if&nbsp;it&nbsp;cannot&nbsp;be&nbsp;sure&nbsp;of&nbsp;the&nbsp;answer.</span><br>
<span class="lineno"></span><span class="keyword" id="2271111">func</span>&nbsp;<span class="op" id="2271116">(</span><span class="ident" id="2271117">f</span>&nbsp;<span class="op" id="2271119">*</span><span class="ident" id="2271120">extFloat</span><span class="op" id="2271128">)</span>&nbsp;<span class="ident" id="2271130">FixedDecimal</span><span class="op" id="2271142">(</span><span class="ident" id="2271143">d</span>&nbsp;<span class="op" id="2271145">*</span><span class="ident" id="2271146">decimalSlice</span><span class="op" id="2271158">,</span>&nbsp;<span class="ident" id="2271160">n</span>&nbsp;<span class="builtintype" id="2271162">int</span><span class="op" id="2271165">)</span>&nbsp;<span class="builtintype" id="2271167">bool</span>&nbsp;<span class="op" id="2271172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271175">if</span>&nbsp;<span class="ident" id="2271178">f</span><span class="op" id="2271179">.</span><span class="ident" id="2271180">mant</span>&nbsp;<span class="op" id="2271185">==</span>&nbsp;<span class="num" id="2271188">0</span>&nbsp;<span class="op" id="2271190">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271194">d</span><span class="op" id="2271195">.</span><span class="ident" id="2271196">nd</span>&nbsp;<span class="op" id="2271199">=</span>&nbsp;<span class="num" id="2271201">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271205">d</span><span class="op" id="2271206">.</span><span class="ident" id="2271207">dp</span>&nbsp;<span class="op" id="2271210">=</span>&nbsp;<span class="num" id="2271212">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271216">d</span><span class="op" id="2271217">.</span><span class="ident" id="2271218">neg</span>&nbsp;<span class="op" id="2271222">=</span>&nbsp;<span class="ident" id="2271224">f</span><span class="op" id="2271225">.</span><span class="ident" id="2271226">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271232">return</span>&nbsp;<span class="builtintype" id="2271239">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271245">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271248">if</span>&nbsp;<span class="ident" id="2271251">n</span>&nbsp;<span class="op" id="2271253">==</span>&nbsp;<span class="num" id="2271256">0</span>&nbsp;<span class="op" id="2271258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2271262">panic</span><span class="op" id="2271267">(</span><span class="string" id="2271268">&#34;strconv:&nbsp;internal&nbsp;error:&nbsp;extFloat.FixedDecimal&nbsp;called&nbsp;with&nbsp;n&nbsp;==&nbsp;0&#34;</span><span class="op" id="2271335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271341">//&nbsp;Multiply&nbsp;by&nbsp;an&nbsp;appropriate&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;have&nbsp;a&nbsp;reasonable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271406">//&nbsp;number&nbsp;to&nbsp;process.</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271429">f</span><span class="op" id="2271430">.</span><span class="ident" id="2271431">Normalize</span><span class="op" id="2271440">(</span><span class="op" id="2271441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271444">exp10</span><span class="op" id="2271449">,</span>&nbsp;<span class="ident" id="2271451">_</span>&nbsp;<span class="op" id="2271453">:=</span>&nbsp;<span class="ident" id="2271456">f</span><span class="op" id="2271457">.</span><span class="ident" id="2271458">frexp10</span><span class="op" id="2271465">(</span><span class="op" id="2271466">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271470">shift</span>&nbsp;<span class="op" id="2271476">:=</span>&nbsp;<span class="builtintype" id="2271479">uint</span><span class="op" id="2271483">(</span><span class="op" id="2271484">-</span><span class="ident" id="2271485">f</span><span class="op" id="2271486">.</span><span class="ident" id="2271487">exp</span><span class="op" id="2271490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271493">integer</span>&nbsp;<span class="op" id="2271501">:=</span>&nbsp;<span class="builtintype" id="2271504">uint32</span><span class="op" id="2271510">(</span><span class="ident" id="2271511">f</span><span class="op" id="2271512">.</span><span class="ident" id="2271513">mant</span>&nbsp;<span class="op" id="2271518">&gt;&gt;</span>&nbsp;<span class="ident" id="2271521">shift</span><span class="op" id="2271526">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271529">fraction</span>&nbsp;<span class="op" id="2271538">:=</span>&nbsp;<span class="ident" id="2271541">f</span><span class="op" id="2271542">.</span><span class="ident" id="2271543">mant</span>&nbsp;<span class="op" id="2271548">-</span>&nbsp;<span class="op" id="2271550">(</span><span class="ident" id="2271551">uint64</span><span class="op" id="2271557">(</span><span class="ident" id="2271558">integer</span><span class="op" id="2271565">)</span>&nbsp;<span class="op" id="2271567">&lt;&lt;</span>&nbsp;<span class="ident" id="2271570">shift</span><span class="op" id="2271575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271578"></span>&nbsp;<span class="op" id="2271581">:=</span>&nbsp;<span class="ident" id="2271584">uint64</span><span class="op" id="2271590">(</span><span class="num" id="2271591">1</span><span class="op" id="2271592">)</span>&nbsp;<span class="comment" id="2271594">//&nbsp;&nbsp;is&nbsp;the&nbsp;uncertainty&nbsp;we&nbsp;have&nbsp;on&nbsp;the&nbsp;mantissa&nbsp;of&nbsp;f.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271651">//&nbsp;Write&nbsp;exactly&nbsp;n&nbsp;digits&nbsp;to&nbsp;d.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271684">needed</span>&nbsp;<span class="op" id="2271691">:=</span>&nbsp;<span class="ident" id="2271694">n</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271703">//&nbsp;how&nbsp;many&nbsp;digits&nbsp;are&nbsp;left&nbsp;to&nbsp;write.</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271742">integerDigits</span>&nbsp;<span class="op" id="2271756">:=</span>&nbsp;<span class="num" id="2271759">0</span>&nbsp;<span class="comment" id="2271761">//&nbsp;the&nbsp;number&nbsp;of&nbsp;decimal&nbsp;digits&nbsp;of&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271806">pow10</span>&nbsp;<span class="op" id="2271812">:=</span>&nbsp;<span class="ident" id="2271815">uint64</span><span class="op" id="2271821">(</span><span class="num" id="2271822">1</span><span class="op" id="2271823">)</span>&nbsp;<span class="comment" id="2271825">//&nbsp;the&nbsp;power&nbsp;of&nbsp;ten&nbsp;by&nbsp;which&nbsp;f&nbsp;was&nbsp;scaled.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271869">for</span>&nbsp;<span class="ident" id="2271873">i</span><span class="op" id="2271874">,</span>&nbsp;<span class="ident" id="2271876">pow</span>&nbsp;<span class="op" id="2271880">:=</span>&nbsp;<span class="num" id="2271883">0</span><span class="op" id="2271884">,</span>&nbsp;<span class="ident" id="2271886">uint64</span><span class="op" id="2271892">(</span><span class="num" id="2271893">1</span><span class="op" id="2271894">)</span><span class="op" id="2271895">;</span>&nbsp;<span class="ident" id="2271897">i</span>&nbsp;<span class="op" id="2271899">&lt;</span>&nbsp;<span class="num" id="2271901">20</span><span class="op" id="2271903">;</span>&nbsp;<span class="ident" id="2271905">i</span><span class="op" id="2271906">++</span>&nbsp;<span class="op" id="2271909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271913">if</span>&nbsp;<span class="ident" id="2271916">pow</span>&nbsp;<span class="op" id="2271920">&gt;</span>&nbsp;<span class="ident" id="2271922">uint64</span><span class="op" id="2271928">(</span><span class="ident" id="2271929">integer</span><span class="op" id="2271936">)</span>&nbsp;<span class="op" id="2271938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271943">integerDigits</span>&nbsp;<span class="op" id="2271957">=</span>&nbsp;<span class="ident" id="2271959">i</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271964">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271976">pow</span>&nbsp;<span class="op" id="2271980">*=</span>&nbsp;<span class="num" id="2271983">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271990">rest</span>&nbsp;<span class="op" id="2271995">:=</span>&nbsp;<span class="ident" id="2271998">integer</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272007">if</span>&nbsp;<span class="ident" id="2272010">integerDigits</span>&nbsp;<span class="op" id="2272024">&gt;</span>&nbsp;<span class="ident" id="2272026">needed</span>&nbsp;<span class="op" id="2272033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272037">//&nbsp;the&nbsp;integral&nbsp;part&nbsp;is&nbsp;already&nbsp;large,&nbsp;trim&nbsp;the&nbsp;last&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272100">pow10</span>&nbsp;<span class="op" id="2272106">=</span>&nbsp;<span class="ident" id="2272108">uint64pow10</span><span class="op" id="2272119">[</span><span class="ident" id="2272120">integerDigits</span><span class="op" id="2272133">-</span><span class="ident" id="2272134">needed</span><span class="op" id="2272140">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272144">integer</span>&nbsp;<span class="op" id="2272152">/=</span>&nbsp;<span class="builtintype" id="2272155">uint32</span><span class="op" id="2272161">(</span><span class="ident" id="2272162">pow10</span><span class="op" id="2272167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272171">rest</span>&nbsp;<span class="op" id="2272176">-=</span>&nbsp;<span class="ident" id="2272179">integer</span>&nbsp;<span class="op" id="2272187">*</span>&nbsp;<span class="builtintype" id="2272189">uint32</span><span class="op" id="2272195">(</span><span class="ident" id="2272196">pow10</span><span class="op" id="2272201">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272204">}</span>&nbsp;<span class="keyword" id="2272206">else</span>&nbsp;<span class="op" id="2272211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272215">rest</span>&nbsp;<span class="op" id="2272220">=</span>&nbsp;<span class="num" id="2272222">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272229">//&nbsp;Write&nbsp;the&nbsp;digits&nbsp;of&nbsp;integer:&nbsp;the&nbsp;digits&nbsp;of&nbsp;rest&nbsp;are&nbsp;omitted.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272294">var</span>&nbsp;<span class="ident" id="2272298">buf</span>&nbsp;<span class="op" id="2272302">[</span><span class="num" id="2272303">32</span><span class="op" id="2272305">]</span><span class="builtintype" id="2272306">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272312">pos</span>&nbsp;<span class="op" id="2272316">:=</span>&nbsp;<span class="builtinfunc" id="2272319">len</span><span class="op" id="2272322">(</span><span class="ident" id="2272323">buf</span><span class="op" id="2272326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272329">for</span>&nbsp;<span class="ident" id="2272333">v</span>&nbsp;<span class="op" id="2272335">:=</span>&nbsp;<span class="ident" id="2272338">integer</span><span class="op" id="2272345">;</span>&nbsp;<span class="ident" id="2272347">v</span>&nbsp;<span class="op" id="2272349">&gt;</span>&nbsp;<span class="num" id="2272351">0</span><span class="op" id="2272352">;</span>&nbsp;<span class="op" id="2272354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272358">v1</span>&nbsp;<span class="op" id="2272361">:=</span>&nbsp;<span class="ident" id="2272364">v</span>&nbsp;<span class="op" id="2272366">/</span>&nbsp;<span class="num" id="2272368">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272373">v</span>&nbsp;<span class="op" id="2272375">-=</span>&nbsp;<span class="num" id="2272378">10</span>&nbsp;<span class="op" id="2272381">*</span>&nbsp;<span class="ident" id="2272383">v1</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272388">pos</span><span class="op" id="2272391">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272396">buf</span><span class="op" id="2272399">[</span><span class="ident" id="2272400">pos</span><span class="op" id="2272403">]</span>&nbsp;<span class="op" id="2272405">=</span>&nbsp;<span class="builtintype" id="2272407">byte</span><span class="op" id="2272411">(</span><span class="ident" id="2272412">v</span>&nbsp;<span class="op" id="2272414">+</span>&nbsp;<span class="string" id="2272416">&#39;0&#39;</span><span class="op" id="2272419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272423">v</span>&nbsp;<span class="op" id="2272425">=</span>&nbsp;<span class="ident" id="2272427">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272434">for</span>&nbsp;<span class="ident" id="2272438">i</span>&nbsp;<span class="op" id="2272440">:=</span>&nbsp;<span class="ident" id="2272443">pos</span><span class="op" id="2272446">;</span>&nbsp;<span class="ident" id="2272448">i</span>&nbsp;<span class="op" id="2272450">&lt;</span>&nbsp;<span class="builtinfunc" id="2272452">len</span><span class="op" id="2272455">(</span><span class="ident" id="2272456">buf</span><span class="op" id="2272459">)</span><span class="op" id="2272460">;</span>&nbsp;<span class="ident" id="2272462">i</span><span class="op" id="2272463">++</span>&nbsp;<span class="op" id="2272466">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272470">d</span><span class="op" id="2272471">.</span><span class="ident" id="2272472">d</span><span class="op" id="2272473">[</span><span class="ident" id="2272474">i</span><span class="op" id="2272475">-</span><span class="ident" id="2272476">pos</span><span class="op" id="2272479">]</span>&nbsp;<span class="op" id="2272481">=</span>&nbsp;<span class="ident" id="2272483">buf</span><span class="op" id="2272486">[</span><span class="ident" id="2272487">i</span><span class="op" id="2272488">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272494">nd</span>&nbsp;<span class="op" id="2272497">:=</span>&nbsp;<span class="builtinfunc" id="2272500">len</span><span class="op" id="2272503">(</span><span class="ident" id="2272504">buf</span><span class="op" id="2272507">)</span>&nbsp;<span class="op" id="2272509">-</span>&nbsp;<span class="ident" id="2272511">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272516">d</span><span class="op" id="2272517">.</span><span class="ident" id="2272518">nd</span>&nbsp;<span class="op" id="2272521">=</span>&nbsp;<span class="ident" id="2272523">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272527">d</span><span class="op" id="2272528">.</span><span class="ident" id="2272529">dp</span>&nbsp;<span class="op" id="2272532">=</span>&nbsp;<span class="ident" id="2272534">integerDigits</span>&nbsp;<span class="op" id="2272548">+</span>&nbsp;<span class="ident" id="2272550">exp10</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272557">needed</span>&nbsp;<span class="op" id="2272564">-=</span>&nbsp;<span class="ident" id="2272567">nd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272572">if</span>&nbsp;<span class="ident" id="2272575">needed</span>&nbsp;<span class="op" id="2272582">&gt;</span>&nbsp;<span class="num" id="2272584">0</span>&nbsp;<span class="op" id="2272586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272590">if</span>&nbsp;<span class="ident" id="2272593">rest</span>&nbsp;<span class="op" id="2272598">!=</span>&nbsp;<span class="num" id="2272601">0</span>&nbsp;<span class="op" id="2272603">||</span>&nbsp;<span class="ident" id="2272606">pow10</span>&nbsp;<span class="op" id="2272612">!=</span>&nbsp;<span class="num" id="2272615">1</span>&nbsp;<span class="op" id="2272617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2272622">panic</span><span class="op" id="2272627">(</span><span class="string" id="2272628">&#34;strconv:&nbsp;internal&nbsp;error,&nbsp;rest&nbsp;!=&nbsp;0&nbsp;but&nbsp;needed&nbsp;&gt;&nbsp;0&#34;</span><span class="op" id="2272679">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272687">//&nbsp;Emit&nbsp;digits&nbsp;for&nbsp;the&nbsp;fractional&nbsp;part.&nbsp;Each&nbsp;time,&nbsp;10*fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272752">//&nbsp;fits&nbsp;in&nbsp;a&nbsp;uint64&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272792">for</span>&nbsp;<span class="ident" id="2272796">needed</span>&nbsp;<span class="op" id="2272803">&gt;</span>&nbsp;<span class="num" id="2272805">0</span>&nbsp;<span class="op" id="2272807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272812">fraction</span>&nbsp;<span class="op" id="2272821">*=</span>&nbsp;<span class="num" id="2272824">10</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272830"></span>&nbsp;<span class="op" id="2272833">*=</span>&nbsp;<span class="num" id="2272836">10</span>&nbsp;<span class="comment" id="2272839">//&nbsp;the&nbsp;uncertainty&nbsp;scales&nbsp;as&nbsp;we&nbsp;multiply&nbsp;by&nbsp;ten.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272891">if</span>&nbsp;<span class="num" id="2272894">2</span><span class="op" id="2272895">*</span><span class="ident" id="2272896"></span>&nbsp;<span class="op" id="2272899">&gt;</span>&nbsp;<span class="num" id="2272901">1</span><span class="op" id="2272902">&lt;&lt;</span><span class="ident" id="2272904">shift</span>&nbsp;<span class="op" id="2272910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272916">//&nbsp;the&nbsp;error&nbsp;is&nbsp;so&nbsp;large&nbsp;it&nbsp;could&nbsp;modify&nbsp;which&nbsp;digit&nbsp;to&nbsp;write,&nbsp;abort.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272990">return</span>&nbsp;<span class="builtintype" id="2272997">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273006">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273011">digit</span>&nbsp;<span class="op" id="2273017">:=</span>&nbsp;<span class="ident" id="2273020">fraction</span>&nbsp;<span class="op" id="2273029">&gt;&gt;</span>&nbsp;<span class="ident" id="2273032">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273041">d</span><span class="op" id="2273042">.</span><span class="ident" id="2273043">d</span><span class="op" id="2273044">[</span><span class="ident" id="2273045">nd</span><span class="op" id="2273047">]</span>&nbsp;<span class="op" id="2273049">=</span>&nbsp;<span class="builtintype" id="2273051">byte</span><span class="op" id="2273055">(</span><span class="ident" id="2273056">digit</span>&nbsp;<span class="op" id="2273062">+</span>&nbsp;<span class="string" id="2273064">&#39;0&#39;</span><span class="op" id="2273067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273072">fraction</span>&nbsp;<span class="op" id="2273081">-=</span>&nbsp;<span class="ident" id="2273084">digit</span>&nbsp;<span class="op" id="2273090">&lt;&lt;</span>&nbsp;<span class="ident" id="2273093">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273102">nd</span><span class="op" id="2273104">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273110">needed</span><span class="op" id="2273116">--</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273125">d</span><span class="op" id="2273126">.</span><span class="ident" id="2273127">nd</span>&nbsp;<span class="op" id="2273130">=</span>&nbsp;<span class="ident" id="2273132">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273140">//&nbsp;We&nbsp;have&nbsp;written&nbsp;a&nbsp;truncation&nbsp;of&nbsp;f&nbsp;(a&nbsp;numerator&nbsp;/&nbsp;10^d.dp).&nbsp;The&nbsp;remaining&nbsp;part</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273222">//&nbsp;can&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;small&nbsp;number&nbsp;(&lt;&nbsp;1)&nbsp;to&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;last&nbsp;digit&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273306">//&nbsp;numerator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273321">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273325">//&nbsp;If&nbsp;rest&nbsp;&gt;&nbsp;0,&nbsp;the&nbsp;amount&nbsp;is:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273357">//&nbsp;&nbsp;&nbsp;&nbsp;(rest&lt;&lt;shift&nbsp;|&nbsp;fraction)&nbsp;/&nbsp;(pow10&nbsp;&lt;&lt;&nbsp;shift)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273408">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;being&nbsp;known&nbsp;with&nbsp;a&nbsp;&nbsp;uncertainty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273461">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;fact&nbsp;that&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;guarantees&nbsp;that&nbsp;pow10&nbsp;&lt;&lt;&nbsp;shift&nbsp;does&nbsp;not&nbsp;overflow&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273547">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273551">//&nbsp;If&nbsp;rest&nbsp;=&nbsp;0,&nbsp;pow10&nbsp;==&nbsp;1&nbsp;and&nbsp;the&nbsp;amount&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273597">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;/&nbsp;(1&nbsp;&lt;&lt;&nbsp;shift)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273628">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;being&nbsp;known&nbsp;with&nbsp;a&nbsp;&nbsp;uncertainty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273681">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273685">//&nbsp;We&nbsp;pass&nbsp;this&nbsp;information&nbsp;to&nbsp;the&nbsp;rounding&nbsp;routine&nbsp;for&nbsp;adjustment.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273755">ok</span>&nbsp;<span class="op" id="2273758">:=</span>&nbsp;<span class="ident" id="2273761">adjustLastDigitFixed</span><span class="op" id="2273781">(</span><span class="ident" id="2273782">d</span><span class="op" id="2273783">,</span>&nbsp;<span class="ident" id="2273785">uint64</span><span class="op" id="2273791">(</span><span class="ident" id="2273792">rest</span><span class="op" id="2273796">)</span><span class="op" id="2273797">&lt;&lt;</span><span class="ident" id="2273799">shift</span><span class="op" id="2273804">|</span><span class="ident" id="2273805">fraction</span><span class="op" id="2273813">,</span>&nbsp;<span class="ident" id="2273815">pow10</span><span class="op" id="2273820">,</span>&nbsp;<span class="ident" id="2273822">shift</span><span class="op" id="2273827">,</span>&nbsp;<span class="ident" id="2273829"></span><span class="op" id="2273831">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273834">if</span>&nbsp;<span class="op" id="2273837">!</span><span class="ident" id="2273838">ok</span>&nbsp;<span class="op" id="2273841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273845">return</span>&nbsp;<span class="builtintype" id="2273852">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2273862">//&nbsp;Trim&nbsp;trailing&nbsp;zeros.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273887">for</span>&nbsp;<span class="ident" id="2273891">i</span>&nbsp;<span class="op" id="2273893">:=</span>&nbsp;<span class="ident" id="2273896">d</span><span class="op" id="2273897">.</span><span class="ident" id="2273898">nd</span>&nbsp;<span class="op" id="2273901">-</span>&nbsp;<span class="num" id="2273903">1</span><span class="op" id="2273904">;</span>&nbsp;<span class="ident" id="2273906">i</span>&nbsp;<span class="op" id="2273908">&gt;=</span>&nbsp;<span class="num" id="2273911">0</span><span class="op" id="2273912">;</span>&nbsp;<span class="ident" id="2273914">i</span><span class="op" id="2273915">--</span>&nbsp;<span class="op" id="2273918">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273922">if</span>&nbsp;<span class="ident" id="2273925">d</span><span class="op" id="2273926">.</span><span class="ident" id="2273927">d</span><span class="op" id="2273928">[</span><span class="ident" id="2273929">i</span><span class="op" id="2273930">]</span>&nbsp;<span class="op" id="2273932">!=</span>&nbsp;<span class="string" id="2273935">&#39;0&#39;</span>&nbsp;<span class="op" id="2273939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273944">d</span><span class="op" id="2273945">.</span><span class="ident" id="2273946">nd</span>&nbsp;<span class="op" id="2273949">=</span>&nbsp;<span class="ident" id="2273951">i</span>&nbsp;<span class="op" id="2273953">+</span>&nbsp;<span class="num" id="2273955">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273960">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273971">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273974">return</span>&nbsp;<span class="builtintype" id="2273981">true</span><br>
<span class="lineno"></span><span class="op" id="2273986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2273989">//&nbsp;adjustLastDigitFixed&nbsp;assumes&nbsp;d&nbsp;contains&nbsp;the&nbsp;representation&nbsp;of&nbsp;the&nbsp;integral&nbsp;part</span><br>
<span class="lineno"></span><span class="comment" id="2274072">//&nbsp;of&nbsp;some&nbsp;number,&nbsp;whose&nbsp;fractional&nbsp;part&nbsp;is&nbsp;num&nbsp;/&nbsp;(den&nbsp;&lt;&lt;&nbsp;shift).&nbsp;The&nbsp;numerator</span><br>
<span class="lineno">490</span><span class="comment" id="2274152">//&nbsp;num&nbsp;is&nbsp;only&nbsp;known&nbsp;up&nbsp;to&nbsp;an&nbsp;uncertainty&nbsp;of&nbsp;size&nbsp;,&nbsp;assumed&nbsp;to&nbsp;be&nbsp;less&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2274230">//&nbsp;(den&nbsp;&lt;&lt;&nbsp;shift)/2.</span><br>
<span class="lineno"></span><span class="comment" id="2274251">//</span><br>
<span class="lineno"></span><span class="comment" id="2274254">//&nbsp;It&nbsp;will&nbsp;increase&nbsp;the&nbsp;last&nbsp;digit&nbsp;by&nbsp;one&nbsp;to&nbsp;account&nbsp;for&nbsp;correct&nbsp;rounding,&nbsp;typically</span><br>
<span class="lineno"></span><span class="comment" id="2274339">//&nbsp;when&nbsp;the&nbsp;fractional&nbsp;part&nbsp;is&nbsp;greater&nbsp;than&nbsp;1/2,&nbsp;and&nbsp;will&nbsp;return&nbsp;false&nbsp;if&nbsp;&nbsp;is&nbsp;such</span><br>
<span class="lineno">495</span><span class="comment" id="2274424">//&nbsp;that&nbsp;no&nbsp;correct&nbsp;answer&nbsp;can&nbsp;be&nbsp;given.</span><br>
<span class="lineno"></span><span class="keyword" id="2274464">func</span>&nbsp;<span class="ident" id="2274469">adjustLastDigitFixed</span><span class="op" id="2274489">(</span><span class="ident" id="2274490">d</span>&nbsp;<span class="op" id="2274492">*</span><span class="ident" id="2274493">decimalSlice</span><span class="op" id="2274505">,</span>&nbsp;<span class="ident" id="2274507">num</span><span class="op" id="2274510">,</span>&nbsp;<span class="ident" id="2274512">den</span>&nbsp;<span class="ident" id="2274516">uint64</span><span class="op" id="2274522">,</span>&nbsp;<span class="ident" id="2274524">shift</span>&nbsp;<span class="builtintype" id="2274530">uint</span><span class="op" id="2274534">,</span>&nbsp;<span class="ident" id="2274536"></span>&nbsp;<span class="ident" id="2274539">uint64</span><span class="op" id="2274545">)</span>&nbsp;<span class="builtintype" id="2274547">bool</span>&nbsp;<span class="op" id="2274552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274555">if</span>&nbsp;<span class="ident" id="2274558">num</span>&nbsp;<span class="op" id="2274562">&gt;</span>&nbsp;<span class="ident" id="2274564">den</span><span class="op" id="2274567">&lt;&lt;</span><span class="ident" id="2274569">shift</span>&nbsp;<span class="op" id="2274575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2274579">panic</span><span class="op" id="2274584">(</span><span class="string" id="2274585">&#34;strconv:&nbsp;num&nbsp;&gt;&nbsp;den&lt;&lt;shift&nbsp;in&nbsp;adjustLastDigitFixed&#34;</span><span class="op" id="2274636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274639">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274642">if</span>&nbsp;<span class="num" id="2274645">2</span><span class="op" id="2274646">*</span><span class="ident" id="2274647"></span>&nbsp;<span class="op" id="2274650">&gt;</span>&nbsp;<span class="ident" id="2274652">den</span><span class="op" id="2274655">&lt;&lt;</span><span class="ident" id="2274657">shift</span>&nbsp;<span class="op" id="2274663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2274667">panic</span><span class="op" id="2274672">(</span><span class="string" id="2274673">&#34;strconv:&nbsp;&nbsp;&gt;&nbsp;(den&lt;&lt;shift)/2&#34;</span><span class="op" id="2274703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274709">if</span>&nbsp;<span class="num" id="2274712">2</span><span class="op" id="2274713">*</span><span class="op" id="2274714">(</span><span class="ident" id="2274715">num</span><span class="op" id="2274718">+</span><span class="ident" id="2274719"></span><span class="op" id="2274721">)</span>&nbsp;<span class="op" id="2274723">&lt;</span>&nbsp;<span class="ident" id="2274725">den</span><span class="op" id="2274728">&lt;&lt;</span><span class="ident" id="2274730">shift</span>&nbsp;<span class="op" id="2274736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274740">return</span>&nbsp;<span class="builtintype" id="2274747">true</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274756">if</span>&nbsp;<span class="num" id="2274759">2</span><span class="op" id="2274760">*</span><span class="op" id="2274761">(</span><span class="ident" id="2274762">num</span><span class="op" id="2274765">-</span><span class="ident" id="2274766"></span><span class="op" id="2274768">)</span>&nbsp;<span class="op" id="2274770">&gt;</span>&nbsp;<span class="ident" id="2274772">den</span><span class="op" id="2274775">&lt;&lt;</span><span class="ident" id="2274777">shift</span>&nbsp;<span class="op" id="2274783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2274787">//&nbsp;increment&nbsp;d&nbsp;by&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274810">i</span>&nbsp;<span class="op" id="2274812">:=</span>&nbsp;<span class="ident" id="2274815">d</span><span class="op" id="2274816">.</span><span class="ident" id="2274817">nd</span>&nbsp;<span class="op" id="2274820">-</span>&nbsp;<span class="num" id="2274822">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274826">for</span>&nbsp;<span class="op" id="2274830">;</span>&nbsp;<span class="ident" id="2274832">i</span>&nbsp;<span class="op" id="2274834">&gt;=</span>&nbsp;<span class="num" id="2274837">0</span><span class="op" id="2274838">;</span>&nbsp;<span class="ident" id="2274840">i</span><span class="op" id="2274841">--</span>&nbsp;<span class="op" id="2274844">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274849">if</span>&nbsp;<span class="ident" id="2274852">d</span><span class="op" id="2274853">.</span><span class="ident" id="2274854">d</span><span class="op" id="2274855">[</span><span class="ident" id="2274856">i</span><span class="op" id="2274857">]</span>&nbsp;<span class="op" id="2274859">==</span>&nbsp;<span class="string" id="2274862">&#39;9&#39;</span>&nbsp;<span class="op" id="2274866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274872">d</span><span class="op" id="2274873">.</span><span class="ident" id="2274874">nd</span><span class="op" id="2274876">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274882">}</span>&nbsp;<span class="keyword" id="2274884">else</span>&nbsp;<span class="op" id="2274889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274895">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274904">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274912">if</span>&nbsp;<span class="ident" id="2274915">i</span>&nbsp;<span class="op" id="2274917">&lt;</span>&nbsp;<span class="num" id="2274919">0</span>&nbsp;<span class="op" id="2274921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274926">d</span><span class="op" id="2274927">.</span><span class="ident" id="2274928">d</span><span class="op" id="2274929">[</span><span class="num" id="2274930">0</span><span class="op" id="2274931">]</span>&nbsp;<span class="op" id="2274933">=</span>&nbsp;<span class="string" id="2274935">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274942">d</span><span class="op" id="2274943">.</span><span class="ident" id="2274944">nd</span>&nbsp;<span class="op" id="2274947">=</span>&nbsp;<span class="num" id="2274949">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274954">d</span><span class="op" id="2274955">.</span><span class="ident" id="2274956">dp</span><span class="op" id="2274958">++</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274963">}</span>&nbsp;<span class="keyword" id="2274965">else</span>&nbsp;<span class="op" id="2274970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274975">d</span><span class="op" id="2274976">.</span><span class="ident" id="2274977">d</span><span class="op" id="2274978">[</span><span class="ident" id="2274979">i</span><span class="op" id="2274980">]</span><span class="op" id="2274981">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274990">return</span>&nbsp;<span class="builtintype" id="2274997">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275003">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275006">return</span>&nbsp;<span class="builtintype" id="2275013">false</span><br>
<span class="lineno"></span><span class="op" id="2275019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2275022">//&nbsp;ShortestDecimal&nbsp;stores&nbsp;in&nbsp;d&nbsp;the&nbsp;shortest&nbsp;decimal&nbsp;representation&nbsp;of&nbsp;f</span><br>
<span class="lineno"></span><span class="comment" id="2275094">//&nbsp;which&nbsp;belongs&nbsp;to&nbsp;the&nbsp;open&nbsp;interval&nbsp;(lower,&nbsp;upper),&nbsp;where&nbsp;f&nbsp;is&nbsp;supposed</span><br>
<span class="lineno">530</span><span class="comment" id="2275168">//&nbsp;to&nbsp;lie.&nbsp;It&nbsp;returns&nbsp;false&nbsp;whenever&nbsp;the&nbsp;result&nbsp;is&nbsp;unsure.&nbsp;The&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="2275246">//&nbsp;uses&nbsp;the&nbsp;Grisu3&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2275276">func</span>&nbsp;<span class="op" id="2275281">(</span><span class="ident" id="2275282">f</span>&nbsp;<span class="op" id="2275284">*</span><span class="ident" id="2275285">extFloat</span><span class="op" id="2275293">)</span>&nbsp;<span class="ident" id="2275295">ShortestDecimal</span><span class="op" id="2275310">(</span><span class="ident" id="2275311">d</span>&nbsp;<span class="op" id="2275313">*</span><span class="ident" id="2275314">decimalSlice</span><span class="op" id="2275326">,</span>&nbsp;<span class="ident" id="2275328">lower</span><span class="op" id="2275333">,</span>&nbsp;<span class="ident" id="2275335">upper</span>&nbsp;<span class="op" id="2275341">*</span><span class="ident" id="2275342">extFloat</span><span class="op" id="2275350">)</span>&nbsp;<span class="builtintype" id="2275352">bool</span>&nbsp;<span class="op" id="2275357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275360">if</span>&nbsp;<span class="ident" id="2275363">f</span><span class="op" id="2275364">.</span><span class="ident" id="2275365">mant</span>&nbsp;<span class="op" id="2275370">==</span>&nbsp;<span class="num" id="2275373">0</span>&nbsp;<span class="op" id="2275375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275379">d</span><span class="op" id="2275380">.</span><span class="ident" id="2275381">nd</span>&nbsp;<span class="op" id="2275384">=</span>&nbsp;<span class="num" id="2275386">0</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275390">d</span><span class="op" id="2275391">.</span><span class="ident" id="2275392">dp</span>&nbsp;<span class="op" id="2275395">=</span>&nbsp;<span class="num" id="2275397">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275401">d</span><span class="op" id="2275402">.</span><span class="ident" id="2275403">neg</span>&nbsp;<span class="op" id="2275407">=</span>&nbsp;<span class="ident" id="2275409">f</span><span class="op" id="2275410">.</span><span class="ident" id="2275411">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275417">return</span>&nbsp;<span class="builtintype" id="2275424">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275433">if</span>&nbsp;<span class="ident" id="2275436">f</span><span class="op" id="2275437">.</span><span class="ident" id="2275438">exp</span>&nbsp;<span class="op" id="2275442">==</span>&nbsp;<span class="num" id="2275445">0</span>&nbsp;<span class="op" id="2275447">&amp;&amp;</span>&nbsp;<span class="op" id="2275450">*</span><span class="ident" id="2275451">lower</span>&nbsp;<span class="op" id="2275457">==</span>&nbsp;<span class="op" id="2275460">*</span><span class="ident" id="2275461">f</span>&nbsp;<span class="op" id="2275463">&amp;&amp;</span>&nbsp;<span class="op" id="2275466">*</span><span class="ident" id="2275467">lower</span>&nbsp;<span class="op" id="2275473">==</span>&nbsp;<span class="op" id="2275476">*</span><span class="ident" id="2275477">upper</span>&nbsp;<span class="op" id="2275483">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2275487">//&nbsp;an&nbsp;exact&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275510">var</span>&nbsp;<span class="ident" id="2275514">buf</span>&nbsp;<span class="op" id="2275518">[</span><span class="num" id="2275519">24</span><span class="op" id="2275521">]</span><span class="builtintype" id="2275522">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275529">n</span>&nbsp;<span class="op" id="2275531">:=</span>&nbsp;<span class="builtinfunc" id="2275534">len</span><span class="op" id="2275537">(</span><span class="ident" id="2275538">buf</span><span class="op" id="2275541">)</span>&nbsp;<span class="op" id="2275543">-</span>&nbsp;<span class="num" id="2275545">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275549">for</span>&nbsp;<span class="ident" id="2275553">v</span>&nbsp;<span class="op" id="2275555">:=</span>&nbsp;<span class="ident" id="2275558">f</span><span class="op" id="2275559">.</span><span class="ident" id="2275560">mant</span><span class="op" id="2275564">;</span>&nbsp;<span class="ident" id="2275566">v</span>&nbsp;<span class="op" id="2275568">&gt;</span>&nbsp;<span class="num" id="2275570">0</span><span class="op" id="2275571">;</span>&nbsp;<span class="op" id="2275573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275578">v1</span>&nbsp;<span class="op" id="2275581">:=</span>&nbsp;<span class="ident" id="2275584">v</span>&nbsp;<span class="op" id="2275586">/</span>&nbsp;<span class="num" id="2275588">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275594">v</span>&nbsp;<span class="op" id="2275596">-=</span>&nbsp;<span class="num" id="2275599">10</span>&nbsp;<span class="op" id="2275602">*</span>&nbsp;<span class="ident" id="2275604">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275610">buf</span><span class="op" id="2275613">[</span><span class="ident" id="2275614">n</span><span class="op" id="2275615">]</span>&nbsp;<span class="op" id="2275617">=</span>&nbsp;<span class="builtintype" id="2275619">byte</span><span class="op" id="2275623">(</span><span class="ident" id="2275624">v</span>&nbsp;<span class="op" id="2275626">+</span>&nbsp;<span class="string" id="2275628">&#39;0&#39;</span><span class="op" id="2275631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275636">n</span><span class="op" id="2275637">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275643">v</span>&nbsp;<span class="op" id="2275645">=</span>&nbsp;<span class="ident" id="2275647">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275652">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275656">nd</span>&nbsp;<span class="op" id="2275659">:=</span>&nbsp;<span class="builtinfunc" id="2275662">len</span><span class="op" id="2275665">(</span><span class="ident" id="2275666">buf</span><span class="op" id="2275669">)</span>&nbsp;<span class="op" id="2275671">-</span>&nbsp;<span class="ident" id="2275673">n</span>&nbsp;<span class="op" id="2275675">-</span>&nbsp;<span class="num" id="2275677">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275681">for</span>&nbsp;<span class="ident" id="2275685">i</span>&nbsp;<span class="op" id="2275687">:=</span>&nbsp;<span class="num" id="2275690">0</span><span class="op" id="2275691">;</span>&nbsp;<span class="ident" id="2275693">i</span>&nbsp;<span class="op" id="2275695">&lt;</span>&nbsp;<span class="ident" id="2275697">nd</span><span class="op" id="2275699">;</span>&nbsp;<span class="ident" id="2275701">i</span><span class="op" id="2275702">++</span>&nbsp;<span class="op" id="2275705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275710">d</span><span class="op" id="2275711">.</span><span class="ident" id="2275712">d</span><span class="op" id="2275713">[</span><span class="ident" id="2275714">i</span><span class="op" id="2275715">]</span>&nbsp;<span class="op" id="2275717">=</span>&nbsp;<span class="ident" id="2275719">buf</span><span class="op" id="2275722">[</span><span class="ident" id="2275723">n</span><span class="op" id="2275724">+</span><span class="num" id="2275725">1</span><span class="op" id="2275726">+</span><span class="ident" id="2275727">i</span><span class="op" id="2275728">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275736">d</span><span class="op" id="2275737">.</span><span class="ident" id="2275738">nd</span><span class="op" id="2275740">,</span>&nbsp;<span class="ident" id="2275742">d</span><span class="op" id="2275743">.</span><span class="ident" id="2275744">dp</span>&nbsp;<span class="op" id="2275747">=</span>&nbsp;<span class="ident" id="2275749">nd</span><span class="op" id="2275751">,</span>&nbsp;<span class="ident" id="2275753">nd</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275758">for</span>&nbsp;<span class="ident" id="2275762">d</span><span class="op" id="2275763">.</span><span class="ident" id="2275764">nd</span>&nbsp;<span class="op" id="2275767">&gt;</span>&nbsp;<span class="num" id="2275769">0</span>&nbsp;<span class="op" id="2275771">&amp;&amp;</span>&nbsp;<span class="ident" id="2275774">d</span><span class="op" id="2275775">.</span><span class="ident" id="2275776">d</span><span class="op" id="2275777">[</span><span class="ident" id="2275778">d</span><span class="op" id="2275779">.</span><span class="ident" id="2275780">nd</span><span class="op" id="2275782">-</span><span class="num" id="2275783">1</span><span class="op" id="2275784">]</span>&nbsp;<span class="op" id="2275786">==</span>&nbsp;<span class="string" id="2275789">&#39;0&#39;</span>&nbsp;<span class="op" id="2275793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275798">d</span><span class="op" id="2275799">.</span><span class="ident" id="2275800">nd</span><span class="op" id="2275802">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275811">if</span>&nbsp;<span class="ident" id="2275814">d</span><span class="op" id="2275815">.</span><span class="ident" id="2275816">nd</span>&nbsp;<span class="op" id="2275819">==</span>&nbsp;<span class="num" id="2275822">0</span>&nbsp;<span class="op" id="2275824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275829">d</span><span class="op" id="2275830">.</span><span class="ident" id="2275831">dp</span>&nbsp;<span class="op" id="2275834">=</span>&nbsp;<span class="num" id="2275836">0</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275844">d</span><span class="op" id="2275845">.</span><span class="ident" id="2275846">neg</span>&nbsp;<span class="op" id="2275850">=</span>&nbsp;<span class="ident" id="2275852">f</span><span class="op" id="2275853">.</span><span class="ident" id="2275854">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275860">return</span>&nbsp;<span class="builtintype" id="2275867">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275876">upper</span><span class="op" id="2275881">.</span><span class="ident" id="2275882">Normalize</span><span class="op" id="2275891">(</span><span class="op" id="2275892">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2275895">//&nbsp;Uniformize&nbsp;exponents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275921">if</span>&nbsp;<span class="ident" id="2275924">f</span><span class="op" id="2275925">.</span><span class="ident" id="2275926">exp</span>&nbsp;<span class="op" id="2275930">&gt;</span>&nbsp;<span class="ident" id="2275932">upper</span><span class="op" id="2275937">.</span><span class="ident" id="2275938">exp</span>&nbsp;<span class="op" id="2275942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275946">f</span><span class="op" id="2275947">.</span><span class="ident" id="2275948">mant</span>&nbsp;<span class="op" id="2275953">&lt;&lt;=</span>&nbsp;<span class="builtintype" id="2275957">uint</span><span class="op" id="2275961">(</span><span class="ident" id="2275962">f</span><span class="op" id="2275963">.</span><span class="ident" id="2275964">exp</span>&nbsp;<span class="op" id="2275968">-</span>&nbsp;<span class="ident" id="2275970">upper</span><span class="op" id="2275975">.</span><span class="ident" id="2275976">exp</span><span class="op" id="2275979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275983">f</span><span class="op" id="2275984">.</span><span class="ident" id="2275985">exp</span>&nbsp;<span class="op" id="2275989">=</span>&nbsp;<span class="ident" id="2275991">upper</span><span class="op" id="2275996">.</span><span class="ident" id="2275997">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2276002">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276005">if</span>&nbsp;<span class="ident" id="2276008">lower</span><span class="op" id="2276013">.</span><span class="ident" id="2276014">exp</span>&nbsp;<span class="op" id="2276018">&gt;</span>&nbsp;<span class="ident" id="2276020">upper</span><span class="op" id="2276025">.</span><span class="ident" id="2276026">exp</span>&nbsp;<span class="op" id="2276030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276034">lower</span><span class="op" id="2276039">.</span><span class="ident" id="2276040">mant</span>&nbsp;<span class="op" id="2276045">&lt;&lt;=</span>&nbsp;<span class="builtintype" id="2276049">uint</span><span class="op" id="2276053">(</span><span class="ident" id="2276054">lower</span><span class="op" id="2276059">.</span><span class="ident" id="2276060">exp</span>&nbsp;<span class="op" id="2276064">-</span>&nbsp;<span class="ident" id="2276066">upper</span><span class="op" id="2276071">.</span><span class="ident" id="2276072">exp</span><span class="op" id="2276075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276079">lower</span><span class="op" id="2276084">.</span><span class="ident" id="2276085">exp</span>&nbsp;<span class="op" id="2276089">=</span>&nbsp;<span class="ident" id="2276091">upper</span><span class="op" id="2276096">.</span><span class="ident" id="2276097">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2276102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276106">exp10</span>&nbsp;<span class="op" id="2276112">:=</span>&nbsp;<span class="ident" id="2276115">frexp10Many</span><span class="op" id="2276126">(</span><span class="ident" id="2276127">lower</span><span class="op" id="2276132">,</span>&nbsp;<span class="ident" id="2276134">f</span><span class="op" id="2276135">,</span>&nbsp;<span class="ident" id="2276137">upper</span><span class="op" id="2276142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2276145">//&nbsp;Take&nbsp;a&nbsp;safety&nbsp;margin&nbsp;due&nbsp;to&nbsp;rounding&nbsp;in&nbsp;frexp10Many,&nbsp;but&nbsp;we&nbsp;lose&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276225">upper</span><span class="op" id="2276230">.</span><span class="ident" id="2276231">mant</span><span class="op" id="2276235">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276239">lower</span><span class="op" id="2276244">.</span><span class="ident" id="2276245">mant</span><span class="op" id="2276249">--</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2276254">//&nbsp;The&nbsp;shortest&nbsp;representation&nbsp;of&nbsp;f&nbsp;is&nbsp;either&nbsp;rounded&nbsp;up&nbsp;or&nbsp;down,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2276325">//&nbsp;in&nbsp;any&nbsp;case,&nbsp;it&nbsp;is&nbsp;a&nbsp;truncation&nbsp;of&nbsp;upper.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276371">shift</span>&nbsp;<span class="op" id="2276377">:=</span>&nbsp;<span class="builtintype" id="2276380">uint</span><span class="op" id="2276384">(</span><span class="op" id="2276385">-</span><span class="ident" id="2276386">upper</span><span class="op" id="2276391">.</span><span class="ident" id="2276392">exp</span><span class="op" id="2276395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276398">integer</span>&nbsp;<span class="op" id="2276406">:=</span>&nbsp;<span class="builtintype" id="2276409">uint32</span><span class="op" id="2276415">(</span><span class="ident" id="2276416">upper</span><span class="op" id="2276421">.</span><span class="ident" id="2276422">mant</span>&nbsp;<span class="op" id="2276427">&gt;&gt;</span>&nbsp;<span class="ident" id="2276430">shift</span><span class="op" id="2276435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276438">fraction</span>&nbsp;<span class="op" id="2276447">:=</span>&nbsp;<span class="ident" id="2276450">upper</span><span class="op" id="2276455">.</span><span class="ident" id="2276456">mant</span>&nbsp;<span class="op" id="2276461">-</span>&nbsp;<span class="op" id="2276463">(</span><span class="ident" id="2276464">uint64</span><span class="op" id="2276470">(</span><span class="ident" id="2276471">integer</span><span class="op" id="2276478">)</span>&nbsp;<span class="op" id="2276480">&lt;&lt;</span>&nbsp;<span class="ident" id="2276483">shift</span><span class="op" id="2276488">)</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2276492">//&nbsp;How&nbsp;far&nbsp;we&nbsp;can&nbsp;go&nbsp;down&nbsp;from&nbsp;upper&nbsp;until&nbsp;the&nbsp;result&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276557">allowance</span>&nbsp;<span class="op" id="2276567">:=</span>&nbsp;<span class="ident" id="2276570">upper</span><span class="op" id="2276575">.</span><span class="ident" id="2276576">mant</span>&nbsp;<span class="op" id="2276581">-</span>&nbsp;<span class="ident" id="2276583">lower</span><span class="op" id="2276588">.</span><span class="ident" id="2276589">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2276595">//&nbsp;How&nbsp;far&nbsp;we&nbsp;should&nbsp;go&nbsp;to&nbsp;get&nbsp;a&nbsp;very&nbsp;precise&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276650">targetDiff</span>&nbsp;<span class="op" id="2276661">:=</span>&nbsp;<span class="ident" id="2276664">upper</span><span class="op" id="2276669">.</span><span class="ident" id="2276670">mant</span>&nbsp;<span class="op" id="2276675">-</span>&nbsp;<span class="ident" id="2276677">f</span><span class="op" id="2276678">.</span><span class="ident" id="2276679">mant</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2276686">//&nbsp;Count&nbsp;integral&nbsp;digits:&nbsp;there&nbsp;are&nbsp;at&nbsp;most&nbsp;10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276735">var</span>&nbsp;<span class="ident" id="2276739">integerDigits</span>&nbsp;<span class="builtintype" id="2276753">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276758">for</span>&nbsp;<span class="ident" id="2276762">i</span><span class="op" id="2276763">,</span>&nbsp;<span class="ident" id="2276765">pow</span>&nbsp;<span class="op" id="2276769">:=</span>&nbsp;<span class="num" id="2276772">0</span><span class="op" id="2276773">,</span>&nbsp;<span class="ident" id="2276775">uint64</span><span class="op" id="2276781">(</span><span class="num" id="2276782">1</span><span class="op" id="2276783">)</span><span class="op" id="2276784">;</span>&nbsp;<span class="ident" id="2276786">i</span>&nbsp;<span class="op" id="2276788">&lt;</span>&nbsp;<span class="num" id="2276790">20</span><span class="op" id="2276792">;</span>&nbsp;<span class="ident" id="2276794">i</span><span class="op" id="2276795">++</span>&nbsp;<span class="op" id="2276798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276802">if</span>&nbsp;<span class="ident" id="2276805">pow</span>&nbsp;<span class="op" id="2276809">&gt;</span>&nbsp;<span class="ident" id="2276811">uint64</span><span class="op" id="2276817">(</span><span class="ident" id="2276818">integer</span><span class="op" id="2276825">)</span>&nbsp;<span class="op" id="2276827">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276832">integerDigits</span>&nbsp;<span class="op" id="2276846">=</span>&nbsp;<span class="ident" id="2276848">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276853">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2276861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276865">pow</span>&nbsp;<span class="op" id="2276869">*=</span>&nbsp;<span class="num" id="2276872">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2276876">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276879">for</span>&nbsp;<span class="ident" id="2276883">i</span>&nbsp;<span class="op" id="2276885">:=</span>&nbsp;<span class="num" id="2276888">0</span><span class="op" id="2276889">;</span>&nbsp;<span class="ident" id="2276891">i</span>&nbsp;<span class="op" id="2276893">&lt;</span>&nbsp;<span class="ident" id="2276895">integerDigits</span><span class="op" id="2276908">;</span>&nbsp;<span class="ident" id="2276910">i</span><span class="op" id="2276911">++</span>&nbsp;<span class="op" id="2276914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276918">pow</span>&nbsp;<span class="op" id="2276922">:=</span>&nbsp;<span class="ident" id="2276925">uint64pow10</span><span class="op" id="2276936">[</span><span class="ident" id="2276937">integerDigits</span><span class="op" id="2276950">-</span><span class="ident" id="2276951">i</span><span class="op" id="2276952">-</span><span class="num" id="2276953">1</span><span class="op" id="2276954">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276958">digit</span>&nbsp;<span class="op" id="2276964">:=</span>&nbsp;<span class="ident" id="2276967">integer</span>&nbsp;<span class="op" id="2276975">/</span>&nbsp;<span class="builtintype" id="2276977">uint32</span><span class="op" id="2276983">(</span><span class="ident" id="2276984">pow</span><span class="op" id="2276987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276991">d</span><span class="op" id="2276992">.</span><span class="ident" id="2276993">d</span><span class="op" id="2276994">[</span><span class="ident" id="2276995">i</span><span class="op" id="2276996">]</span>&nbsp;<span class="op" id="2276998">=</span>&nbsp;<span class="builtintype" id="2277000">byte</span><span class="op" id="2277004">(</span><span class="ident" id="2277005">digit</span>&nbsp;<span class="op" id="2277011">+</span>&nbsp;<span class="string" id="2277013">&#39;0&#39;</span><span class="op" id="2277016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277020">integer</span>&nbsp;<span class="op" id="2277028">-=</span>&nbsp;<span class="ident" id="2277031">digit</span>&nbsp;<span class="op" id="2277037">*</span>&nbsp;<span class="builtintype" id="2277039">uint32</span><span class="op" id="2277045">(</span><span class="ident" id="2277046">pow</span><span class="op" id="2277049">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277053">//&nbsp;evaluate&nbsp;whether&nbsp;we&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277091">if</span>&nbsp;<span class="ident" id="2277094">currentDiff</span>&nbsp;<span class="op" id="2277106">:=</span>&nbsp;<span class="ident" id="2277109">uint64</span><span class="op" id="2277115">(</span><span class="ident" id="2277116">integer</span><span class="op" id="2277123">)</span><span class="op" id="2277124">&lt;&lt;</span><span class="ident" id="2277126">shift</span>&nbsp;<span class="op" id="2277132">+</span>&nbsp;<span class="ident" id="2277134">fraction</span><span class="op" id="2277142">;</span>&nbsp;<span class="ident" id="2277144">currentDiff</span>&nbsp;<span class="op" id="2277156">&lt;</span>&nbsp;<span class="ident" id="2277158">allowance</span>&nbsp;<span class="op" id="2277168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277173">d</span><span class="op" id="2277174">.</span><span class="ident" id="2277175">nd</span>&nbsp;<span class="op" id="2277178">=</span>&nbsp;<span class="ident" id="2277180">i</span>&nbsp;<span class="op" id="2277182">+</span>&nbsp;<span class="num" id="2277184">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277189">d</span><span class="op" id="2277190">.</span><span class="ident" id="2277191">dp</span>&nbsp;<span class="op" id="2277194">=</span>&nbsp;<span class="ident" id="2277196">integerDigits</span>&nbsp;<span class="op" id="2277210">+</span>&nbsp;<span class="ident" id="2277212">exp10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277221">d</span><span class="op" id="2277222">.</span><span class="ident" id="2277223">neg</span>&nbsp;<span class="op" id="2277227">=</span>&nbsp;<span class="ident" id="2277229">f</span><span class="op" id="2277230">.</span><span class="ident" id="2277231">neg</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277238">//&nbsp;Sometimes&nbsp;allowance&nbsp;is&nbsp;so&nbsp;large&nbsp;the&nbsp;last&nbsp;digit&nbsp;might&nbsp;need&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277308">//&nbsp;decremented&nbsp;to&nbsp;get&nbsp;closer&nbsp;to&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277346">return</span>&nbsp;<span class="ident" id="2277353">adjustLastDigit</span><span class="op" id="2277368">(</span><span class="ident" id="2277369">d</span><span class="op" id="2277370">,</span>&nbsp;<span class="ident" id="2277372">currentDiff</span><span class="op" id="2277383">,</span>&nbsp;<span class="ident" id="2277385">targetDiff</span><span class="op" id="2277395">,</span>&nbsp;<span class="ident" id="2277397">allowance</span><span class="op" id="2277406">,</span>&nbsp;<span class="ident" id="2277408">pow</span><span class="op" id="2277411">&lt;&lt;</span><span class="ident" id="2277413">shift</span><span class="op" id="2277418">,</span>&nbsp;<span class="num" id="2277420">2</span><span class="op" id="2277421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2277425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2277428">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277431">d</span><span class="op" id="2277432">.</span><span class="ident" id="2277433">nd</span>&nbsp;<span class="op" id="2277436">=</span>&nbsp;<span class="ident" id="2277438">integerDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277453">d</span><span class="op" id="2277454">.</span><span class="ident" id="2277455">dp</span>&nbsp;<span class="op" id="2277458">=</span>&nbsp;<span class="ident" id="2277460">d</span><span class="op" id="2277461">.</span><span class="ident" id="2277462">nd</span>&nbsp;<span class="op" id="2277465">+</span>&nbsp;<span class="ident" id="2277467">exp10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277474">d</span><span class="op" id="2277475">.</span><span class="ident" id="2277476">neg</span>&nbsp;<span class="op" id="2277480">=</span>&nbsp;<span class="ident" id="2277482">f</span><span class="op" id="2277483">.</span><span class="ident" id="2277484">neg</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277490">//&nbsp;Compute&nbsp;digits&nbsp;of&nbsp;the&nbsp;fractional&nbsp;part.&nbsp;At&nbsp;each&nbsp;step&nbsp;fraction&nbsp;does&nbsp;not</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277564">//&nbsp;overflow.&nbsp;The&nbsp;choice&nbsp;of&nbsp;minExp&nbsp;implies&nbsp;that&nbsp;fraction&nbsp;is&nbsp;less&nbsp;than&nbsp;2^60.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277640">var</span>&nbsp;<span class="ident" id="2277644">digit</span>&nbsp;<span class="builtintype" id="2277650">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277655">multiplier</span>&nbsp;<span class="op" id="2277666">:=</span>&nbsp;<span class="ident" id="2277669">uint64</span><span class="op" id="2277675">(</span><span class="num" id="2277676">1</span><span class="op" id="2277677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277680">for</span>&nbsp;<span class="op" id="2277684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277688">fraction</span>&nbsp;<span class="op" id="2277697">*=</span>&nbsp;<span class="num" id="2277700">10</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277705">multiplier</span>&nbsp;<span class="op" id="2277716">*=</span>&nbsp;<span class="num" id="2277719">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277724">digit</span>&nbsp;<span class="op" id="2277730">=</span>&nbsp;<span class="builtintype" id="2277732">int</span><span class="op" id="2277735">(</span><span class="ident" id="2277736">fraction</span>&nbsp;<span class="op" id="2277745">&gt;&gt;</span>&nbsp;<span class="ident" id="2277748">shift</span><span class="op" id="2277753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277757">d</span><span class="op" id="2277758">.</span><span class="ident" id="2277759">d</span><span class="op" id="2277760">[</span><span class="ident" id="2277761">d</span><span class="op" id="2277762">.</span><span class="ident" id="2277763">nd</span><span class="op" id="2277765">]</span>&nbsp;<span class="op" id="2277767">=</span>&nbsp;<span class="builtintype" id="2277769">byte</span><span class="op" id="2277773">(</span><span class="ident" id="2277774">digit</span>&nbsp;<span class="op" id="2277780">+</span>&nbsp;<span class="string" id="2277782">&#39;0&#39;</span><span class="op" id="2277785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277789">d</span><span class="op" id="2277790">.</span><span class="ident" id="2277791">nd</span><span class="op" id="2277793">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277798">fraction</span>&nbsp;<span class="op" id="2277807">-=</span>&nbsp;<span class="ident" id="2277810">uint64</span><span class="op" id="2277816">(</span><span class="ident" id="2277817">digit</span><span class="op" id="2277822">)</span>&nbsp;<span class="op" id="2277824">&lt;&lt;</span>&nbsp;<span class="ident" id="2277827">shift</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277835">if</span>&nbsp;<span class="ident" id="2277838">fraction</span>&nbsp;<span class="op" id="2277847">&lt;</span>&nbsp;<span class="ident" id="2277849">allowance</span><span class="op" id="2277858">*</span><span class="ident" id="2277859">multiplier</span>&nbsp;<span class="op" id="2277870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277875">//&nbsp;We&nbsp;are&nbsp;in&nbsp;the&nbsp;admissible&nbsp;range.&nbsp;Note&nbsp;that&nbsp;if&nbsp;allowance&nbsp;is&nbsp;about&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277948">//&nbsp;overflow,&nbsp;that&nbsp;is,&nbsp;allowance&nbsp;&gt;&nbsp;2^64/10,&nbsp;the&nbsp;condition&nbsp;is&nbsp;automatically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2278025">//&nbsp;true&nbsp;due&nbsp;to&nbsp;the&nbsp;limited&nbsp;range&nbsp;of&nbsp;fraction.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278074">return</span>&nbsp;<span class="ident" id="2278081">adjustLastDigit</span><span class="op" id="2278096">(</span><span class="ident" id="2278097">d</span><span class="op" id="2278098">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278104">fraction</span><span class="op" id="2278112">,</span>&nbsp;<span class="ident" id="2278114">targetDiff</span><span class="op" id="2278124">*</span><span class="ident" id="2278125">multiplier</span><span class="op" id="2278135">,</span>&nbsp;<span class="ident" id="2278137">allowance</span><span class="op" id="2278146">*</span><span class="ident" id="2278147">multiplier</span><span class="op" id="2278157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2278163">1</span><span class="op" id="2278164">&lt;&lt;</span><span class="ident" id="2278166">shift</span><span class="op" id="2278171">,</span>&nbsp;<span class="ident" id="2278173">multiplier</span><span class="op" id="2278183">*</span><span class="num" id="2278184">2</span><span class="op" id="2278185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278192">}</span><br>
<span class="lineno"></span><span class="op" id="2278194">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2278197">//&nbsp;adjustLastDigit&nbsp;modifies&nbsp;d&nbsp;=&nbsp;x-currentDiff*,&nbsp;to&nbsp;get&nbsp;closest&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2278265">//&nbsp;d&nbsp;=&nbsp;x-targetDiff*,&nbsp;without&nbsp;becoming&nbsp;smaller&nbsp;than&nbsp;x-maxDiff*.</span><br>
<span class="lineno"></span><span class="comment" id="2278333">//&nbsp;It&nbsp;assumes&nbsp;that&nbsp;a&nbsp;decimal&nbsp;digit&nbsp;is&nbsp;worth&nbsp;ulpDecimal*,&nbsp;and&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2278401">//&nbsp;all&nbsp;data&nbsp;is&nbsp;known&nbsp;with&nbsp;a&nbsp;error&nbsp;estimate&nbsp;of&nbsp;ulpBinary*.</span><br>
<span class="lineno">645</span><span class="keyword" id="2278461">func</span>&nbsp;<span class="ident" id="2278466">adjustLastDigit</span><span class="op" id="2278481">(</span><span class="ident" id="2278482">d</span>&nbsp;<span class="op" id="2278484">*</span><span class="ident" id="2278485">decimalSlice</span><span class="op" id="2278497">,</span>&nbsp;<span class="ident" id="2278499">currentDiff</span><span class="op" id="2278510">,</span>&nbsp;<span class="ident" id="2278512">targetDiff</span><span class="op" id="2278522">,</span>&nbsp;<span class="ident" id="2278524">maxDiff</span><span class="op" id="2278531">,</span>&nbsp;<span class="ident" id="2278533">ulpDecimal</span><span class="op" id="2278543">,</span>&nbsp;<span class="ident" id="2278545">ulpBinary</span>&nbsp;<span class="ident" id="2278555">uint64</span><span class="op" id="2278561">)</span>&nbsp;<span class="builtintype" id="2278563">bool</span>&nbsp;<span class="op" id="2278568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278571">if</span>&nbsp;<span class="ident" id="2278574">ulpDecimal</span>&nbsp;<span class="op" id="2278585">&lt;</span>&nbsp;<span class="num" id="2278587">2</span><span class="op" id="2278588">*</span><span class="ident" id="2278589">ulpBinary</span>&nbsp;<span class="op" id="2278599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2278603">//&nbsp;Approximation&nbsp;is&nbsp;too&nbsp;wide.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278635">return</span>&nbsp;<span class="builtintype" id="2278642">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278649">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278652">for</span>&nbsp;<span class="ident" id="2278656">currentDiff</span><span class="op" id="2278667">+</span><span class="ident" id="2278668">ulpDecimal</span><span class="op" id="2278678">/</span><span class="num" id="2278679">2</span><span class="op" id="2278680">+</span><span class="ident" id="2278681">ulpBinary</span>&nbsp;<span class="op" id="2278691">&lt;</span>&nbsp;<span class="ident" id="2278693">targetDiff</span>&nbsp;<span class="op" id="2278704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278708">d</span><span class="op" id="2278709">.</span><span class="ident" id="2278710">d</span><span class="op" id="2278711">[</span><span class="ident" id="2278712">d</span><span class="op" id="2278713">.</span><span class="ident" id="2278714">nd</span><span class="op" id="2278716">-</span><span class="num" id="2278717">1</span><span class="op" id="2278718">]</span><span class="op" id="2278719">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278724">currentDiff</span>&nbsp;<span class="op" id="2278736">+=</span>&nbsp;<span class="ident" id="2278739">ulpDecimal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278754">if</span>&nbsp;<span class="ident" id="2278757">currentDiff</span><span class="op" id="2278768">+</span><span class="ident" id="2278769">ulpDecimal</span>&nbsp;<span class="op" id="2278780">&lt;=</span>&nbsp;<span class="ident" id="2278783">targetDiff</span><span class="op" id="2278793">+</span><span class="ident" id="2278794">ulpDecimal</span><span class="op" id="2278804">/</span><span class="num" id="2278805">2</span><span class="op" id="2278806">+</span><span class="ident" id="2278807">ulpBinary</span>&nbsp;<span class="op" id="2278817">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2278821">//&nbsp;we&nbsp;have&nbsp;two&nbsp;choices,&nbsp;and&nbsp;don&#39;t&nbsp;know&nbsp;what&nbsp;to&nbsp;do.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278874">return</span>&nbsp;<span class="builtintype" id="2278881">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278891">if</span>&nbsp;<span class="ident" id="2278894">currentDiff</span>&nbsp;<span class="op" id="2278906">&lt;</span>&nbsp;<span class="ident" id="2278908">ulpBinary</span>&nbsp;<span class="op" id="2278918">||</span>&nbsp;<span class="ident" id="2278921">currentDiff</span>&nbsp;<span class="op" id="2278933">&gt;</span>&nbsp;<span class="ident" id="2278935">maxDiff</span><span class="op" id="2278942">-</span><span class="ident" id="2278943">ulpBinary</span>&nbsp;<span class="op" id="2278953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2278957">//&nbsp;we&nbsp;went&nbsp;too&nbsp;far</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278978">return</span>&nbsp;<span class="builtintype" id="2278985">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278995">if</span>&nbsp;<span class="ident" id="2278998">d</span><span class="op" id="2278999">.</span><span class="ident" id="2279000">nd</span>&nbsp;<span class="op" id="2279003">==</span>&nbsp;<span class="num" id="2279006">1</span>&nbsp;<span class="op" id="2279008">&amp;&amp;</span>&nbsp;<span class="ident" id="2279011">d</span><span class="op" id="2279012">.</span><span class="ident" id="2279013">d</span><span class="op" id="2279014">[</span><span class="num" id="2279015">0</span><span class="op" id="2279016">]</span>&nbsp;<span class="op" id="2279018">==</span>&nbsp;<span class="string" id="2279021">&#39;0&#39;</span>&nbsp;<span class="op" id="2279025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2279029">//&nbsp;the&nbsp;number&nbsp;has&nbsp;actually&nbsp;reached&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279072">d</span><span class="op" id="2279073">.</span><span class="ident" id="2279074">nd</span>&nbsp;<span class="op" id="2279077">=</span>&nbsp;<span class="num" id="2279079">0</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279083">d</span><span class="op" id="2279084">.</span><span class="ident" id="2279085">dp</span>&nbsp;<span class="op" id="2279088">=</span>&nbsp;<span class="num" id="2279090">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2279093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2279096">return</span>&nbsp;<span class="builtintype" id="2279103">true</span><br>
<span class="lineno"></span><span class="op" id="2279108">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
