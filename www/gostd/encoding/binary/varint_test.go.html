<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7603990">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7604045">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7604099">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7604150">package</span>&nbsp;<span class="ident" id="7604158">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7604166">import</span>&nbsp;<span class="op" id="7604173">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604176">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604185">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604191">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7604201">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7604204">func</span>&nbsp;<span class="ident" id="7604209">testConstant</span><span class="op" id="7604221">(</span><span class="ident" id="7604222">t</span>&nbsp;<span class="op" id="7604224">*</span><span class="ident" id="7604225">testing</span><span class="op" id="7604232">.</span><span class="ident" id="7604233">T</span><span class="op" id="7604234">,</span>&nbsp;<span class="ident" id="7604236">w</span>&nbsp;<span class="builtintype" id="7604238">uint</span><span class="op" id="7604242">,</span>&nbsp;<span class="ident" id="7604244">max</span>&nbsp;<span class="builtintype" id="7604248">int</span><span class="op" id="7604251">)</span>&nbsp;<span class="op" id="7604253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604256">buf</span>&nbsp;<span class="op" id="7604260">:=</span>&nbsp;<span class="builtinfunc" id="7604263">make</span><span class="op" id="7604267">(</span><span class="op" id="7604268">[</span><span class="op" id="7604269">]</span><span class="builtintype" id="7604270">byte</span><span class="op" id="7604274">,</span>&nbsp;<span class="ident" id="7604276">MaxVarintLen64</span><span class="op" id="7604290">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604293">n</span>&nbsp;<span class="op" id="7604295">:=</span>&nbsp;<span class="ident" id="7604298">PutUvarint</span><span class="op" id="7604308">(</span><span class="ident" id="7604309">buf</span><span class="op" id="7604312">,</span>&nbsp;<span class="num" id="7604314">1</span><span class="op" id="7604315">&lt;&lt;</span><span class="ident" id="7604317">w</span><span class="op" id="7604318">-</span><span class="num" id="7604319">1</span><span class="op" id="7604320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7604323">if</span>&nbsp;<span class="ident" id="7604326">n</span>&nbsp;<span class="op" id="7604328">!=</span>&nbsp;<span class="ident" id="7604331">max</span>&nbsp;<span class="op" id="7604335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604339">t</span><span class="op" id="7604340">.</span><span class="ident" id="7604341">Errorf</span><span class="op" id="7604347">(</span><span class="string" id="7604348">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7604378">,</span>&nbsp;<span class="ident" id="7604380">w</span><span class="op" id="7604381">,</span>&nbsp;<span class="ident" id="7604383">max</span><span class="op" id="7604386">,</span>&nbsp;<span class="ident" id="7604388">n</span><span class="op" id="7604389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7604392">}</span><br>
<span class="lineno"></span><span class="op" id="7604394">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7604397">func</span>&nbsp;<span class="ident" id="7604402">TestConstants</span><span class="op" id="7604415">(</span><span class="ident" id="7604416">t</span>&nbsp;<span class="op" id="7604418">*</span><span class="ident" id="7604419">testing</span><span class="op" id="7604426">.</span><span class="ident" id="7604427">T</span><span class="op" id="7604428">)</span>&nbsp;<span class="op" id="7604430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604433">testConstant</span><span class="op" id="7604445">(</span><span class="ident" id="7604446">t</span><span class="op" id="7604447">,</span>&nbsp;<span class="num" id="7604449">16</span><span class="op" id="7604451">,</span>&nbsp;<span class="ident" id="7604453">MaxVarintLen16</span><span class="op" id="7604467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604470">testConstant</span><span class="op" id="7604482">(</span><span class="ident" id="7604483">t</span><span class="op" id="7604484">,</span>&nbsp;<span class="num" id="7604486">32</span><span class="op" id="7604488">,</span>&nbsp;<span class="ident" id="7604490">MaxVarintLen32</span><span class="op" id="7604504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604507">testConstant</span><span class="op" id="7604519">(</span><span class="ident" id="7604520">t</span><span class="op" id="7604521">,</span>&nbsp;<span class="num" id="7604523">64</span><span class="op" id="7604525">,</span>&nbsp;<span class="ident" id="7604527">MaxVarintLen64</span><span class="op" id="7604541">)</span><br>
<span class="lineno">25</span><span class="op" id="7604543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7604546">func</span>&nbsp;<span class="ident" id="7604551">testVarint</span><span class="op" id="7604561">(</span><span class="ident" id="7604562">t</span>&nbsp;<span class="op" id="7604564">*</span><span class="ident" id="7604565">testing</span><span class="op" id="7604572">.</span><span class="ident" id="7604573">T</span><span class="op" id="7604574">,</span>&nbsp;<span class="ident" id="7604576">x</span>&nbsp;<span class="ident" id="7604578">int64</span><span class="op" id="7604583">)</span>&nbsp;<span class="op" id="7604585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604588">buf</span>&nbsp;<span class="op" id="7604592">:=</span>&nbsp;<span class="builtinfunc" id="7604595">make</span><span class="op" id="7604599">(</span><span class="op" id="7604600">[</span><span class="op" id="7604601">]</span><span class="builtintype" id="7604602">byte</span><span class="op" id="7604606">,</span>&nbsp;<span class="ident" id="7604608">MaxVarintLen64</span><span class="op" id="7604622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604625">n</span>&nbsp;<span class="op" id="7604627">:=</span>&nbsp;<span class="ident" id="7604630">PutVarint</span><span class="op" id="7604639">(</span><span class="ident" id="7604640">buf</span><span class="op" id="7604643">,</span>&nbsp;<span class="ident" id="7604645">x</span><span class="op" id="7604646">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604649">y</span><span class="op" id="7604650">,</span>&nbsp;<span class="ident" id="7604652">m</span>&nbsp;<span class="op" id="7604654">:=</span>&nbsp;<span class="ident" id="7604657">Varint</span><span class="op" id="7604663">(</span><span class="ident" id="7604664">buf</span><span class="op" id="7604667">[</span><span class="num" id="7604668">0</span><span class="op" id="7604669">:</span><span class="ident" id="7604670">n</span><span class="op" id="7604671">]</span><span class="op" id="7604672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7604675">if</span>&nbsp;<span class="ident" id="7604678">x</span>&nbsp;<span class="op" id="7604680">!=</span>&nbsp;<span class="ident" id="7604683">y</span>&nbsp;<span class="op" id="7604685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604689">t</span><span class="op" id="7604690">.</span><span class="ident" id="7604691">Errorf</span><span class="op" id="7604697">(</span><span class="string" id="7604698">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7604718">,</span>&nbsp;<span class="ident" id="7604720">x</span><span class="op" id="7604721">,</span>&nbsp;<span class="ident" id="7604723">y</span><span class="op" id="7604724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7604727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7604730">if</span>&nbsp;<span class="ident" id="7604733">n</span>&nbsp;<span class="op" id="7604735">!=</span>&nbsp;<span class="ident" id="7604738">m</span>&nbsp;<span class="op" id="7604740">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604744">t</span><span class="op" id="7604745">.</span><span class="ident" id="7604746">Errorf</span><span class="op" id="7604752">(</span><span class="string" id="7604753">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7604786">,</span>&nbsp;<span class="ident" id="7604788">x</span><span class="op" id="7604789">,</span>&nbsp;<span class="ident" id="7604791">m</span><span class="op" id="7604792">,</span>&nbsp;<span class="ident" id="7604794">n</span><span class="op" id="7604795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7604798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604802">y</span><span class="op" id="7604803">,</span>&nbsp;<span class="ident" id="7604805">err</span>&nbsp;<span class="op" id="7604809">:=</span>&nbsp;<span class="ident" id="7604812">ReadVarint</span><span class="op" id="7604822">(</span><span class="ident" id="7604823">bytes</span><span class="op" id="7604828">.</span><span class="ident" id="7604829">NewReader</span><span class="op" id="7604838">(</span><span class="ident" id="7604839">buf</span><span class="op" id="7604842">)</span><span class="op" id="7604843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7604846">if</span>&nbsp;<span class="ident" id="7604849">err</span>&nbsp;<span class="op" id="7604853">!=</span>&nbsp;<span class="ident" id="7604856">nil</span>&nbsp;<span class="op" id="7604860">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604864">t</span><span class="op" id="7604865">.</span><span class="ident" id="7604866">Errorf</span><span class="op" id="7604872">(</span><span class="string" id="7604873">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="7604893">,</span>&nbsp;<span class="ident" id="7604895">x</span><span class="op" id="7604896">,</span>&nbsp;<span class="ident" id="7604898">err</span><span class="op" id="7604901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7604904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7604907">if</span>&nbsp;<span class="ident" id="7604910">x</span>&nbsp;<span class="op" id="7604912">!=</span>&nbsp;<span class="ident" id="7604915">y</span>&nbsp;<span class="op" id="7604917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7604921">t</span><span class="op" id="7604922">.</span><span class="ident" id="7604923">Errorf</span><span class="op" id="7604929">(</span><span class="string" id="7604930">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7604954">,</span>&nbsp;<span class="ident" id="7604956">x</span><span class="op" id="7604957">,</span>&nbsp;<span class="ident" id="7604959">y</span><span class="op" id="7604960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7604963">}</span><br>
<span class="lineno">45</span><span class="op" id="7604965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7604968">func</span>&nbsp;<span class="ident" id="7604973">testUvarint</span><span class="op" id="7604984">(</span><span class="ident" id="7604985">t</span>&nbsp;<span class="op" id="7604987">*</span><span class="ident" id="7604988">testing</span><span class="op" id="7604995">.</span><span class="ident" id="7604996">T</span><span class="op" id="7604997">,</span>&nbsp;<span class="ident" id="7604999">x</span>&nbsp;<span class="ident" id="7605001">uint64</span><span class="op" id="7605007">)</span>&nbsp;<span class="op" id="7605009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605012">buf</span>&nbsp;<span class="op" id="7605016">:=</span>&nbsp;<span class="builtinfunc" id="7605019">make</span><span class="op" id="7605023">(</span><span class="op" id="7605024">[</span><span class="op" id="7605025">]</span><span class="builtintype" id="7605026">byte</span><span class="op" id="7605030">,</span>&nbsp;<span class="ident" id="7605032">MaxVarintLen64</span><span class="op" id="7605046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605049">n</span>&nbsp;<span class="op" id="7605051">:=</span>&nbsp;<span class="ident" id="7605054">PutUvarint</span><span class="op" id="7605064">(</span><span class="ident" id="7605065">buf</span><span class="op" id="7605068">,</span>&nbsp;<span class="ident" id="7605070">x</span><span class="op" id="7605071">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605074">y</span><span class="op" id="7605075">,</span>&nbsp;<span class="ident" id="7605077">m</span>&nbsp;<span class="op" id="7605079">:=</span>&nbsp;<span class="ident" id="7605082">Uvarint</span><span class="op" id="7605089">(</span><span class="ident" id="7605090">buf</span><span class="op" id="7605093">[</span><span class="num" id="7605094">0</span><span class="op" id="7605095">:</span><span class="ident" id="7605096">n</span><span class="op" id="7605097">]</span><span class="op" id="7605098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605101">if</span>&nbsp;<span class="ident" id="7605104">x</span>&nbsp;<span class="op" id="7605106">!=</span>&nbsp;<span class="ident" id="7605109">y</span>&nbsp;<span class="op" id="7605111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605115">t</span><span class="op" id="7605116">.</span><span class="ident" id="7605117">Errorf</span><span class="op" id="7605123">(</span><span class="string" id="7605124">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7605145">,</span>&nbsp;<span class="ident" id="7605147">x</span><span class="op" id="7605148">,</span>&nbsp;<span class="ident" id="7605150">y</span><span class="op" id="7605151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605157">if</span>&nbsp;<span class="ident" id="7605160">n</span>&nbsp;<span class="op" id="7605162">!=</span>&nbsp;<span class="ident" id="7605165">m</span>&nbsp;<span class="op" id="7605167">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605171">t</span><span class="op" id="7605172">.</span><span class="ident" id="7605173">Errorf</span><span class="op" id="7605179">(</span><span class="string" id="7605180">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7605214">,</span>&nbsp;<span class="ident" id="7605216">x</span><span class="op" id="7605217">,</span>&nbsp;<span class="ident" id="7605219">m</span><span class="op" id="7605220">,</span>&nbsp;<span class="ident" id="7605222">n</span><span class="op" id="7605223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605230">y</span><span class="op" id="7605231">,</span>&nbsp;<span class="ident" id="7605233">err</span>&nbsp;<span class="op" id="7605237">:=</span>&nbsp;<span class="ident" id="7605240">ReadUvarint</span><span class="op" id="7605251">(</span><span class="ident" id="7605252">bytes</span><span class="op" id="7605257">.</span><span class="ident" id="7605258">NewReader</span><span class="op" id="7605267">(</span><span class="ident" id="7605268">buf</span><span class="op" id="7605271">)</span><span class="op" id="7605272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605275">if</span>&nbsp;<span class="ident" id="7605278">err</span>&nbsp;<span class="op" id="7605282">!=</span>&nbsp;<span class="ident" id="7605285">nil</span>&nbsp;<span class="op" id="7605289">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605293">t</span><span class="op" id="7605294">.</span><span class="ident" id="7605295">Errorf</span><span class="op" id="7605301">(</span><span class="string" id="7605302">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="7605323">,</span>&nbsp;<span class="ident" id="7605325">x</span><span class="op" id="7605326">,</span>&nbsp;<span class="ident" id="7605328">err</span><span class="op" id="7605331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605337">if</span>&nbsp;<span class="ident" id="7605340">x</span>&nbsp;<span class="op" id="7605342">!=</span>&nbsp;<span class="ident" id="7605345">y</span>&nbsp;<span class="op" id="7605347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605351">t</span><span class="op" id="7605352">.</span><span class="ident" id="7605353">Errorf</span><span class="op" id="7605359">(</span><span class="string" id="7605360">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7605385">,</span>&nbsp;<span class="ident" id="7605387">x</span><span class="op" id="7605388">,</span>&nbsp;<span class="ident" id="7605390">y</span><span class="op" id="7605391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605394">}</span><br>
<span class="lineno">65</span><span class="op" id="7605396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7605399">var</span>&nbsp;<span class="ident" id="7605403">tests</span>&nbsp;<span class="op" id="7605409">=</span>&nbsp;<span class="op" id="7605411">[</span><span class="op" id="7605412">]</span><span class="ident" id="7605413">int64</span><span class="op" id="7605418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605421">-</span><span class="num" id="7605422">1</span>&nbsp;<span class="op" id="7605424">&lt;&lt;</span>&nbsp;<span class="num" id="7605427">63</span><span class="op" id="7605429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605432">-</span><span class="num" id="7605433">1</span><span class="op" id="7605434">&lt;&lt;</span><span class="num" id="7605436">63</span>&nbsp;<span class="op" id="7605439">+</span>&nbsp;<span class="num" id="7605441">1</span><span class="op" id="7605442">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605445">-</span><span class="num" id="7605446">1</span><span class="op" id="7605447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605450">0</span><span class="op" id="7605451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605454">1</span><span class="op" id="7605455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605458">2</span><span class="op" id="7605459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605462">10</span><span class="op" id="7605464">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605467">20</span><span class="op" id="7605469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605472">63</span><span class="op" id="7605474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605477">64</span><span class="op" id="7605479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605482">65</span><span class="op" id="7605484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605487">127</span><span class="op" id="7605490">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605493">128</span><span class="op" id="7605496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605499">129</span><span class="op" id="7605502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605505">255</span><span class="op" id="7605508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605511">256</span><span class="op" id="7605514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605517">257</span><span class="op" id="7605520">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7605523">1</span><span class="op" id="7605524">&lt;&lt;</span><span class="num" id="7605526">63</span>&nbsp;<span class="op" id="7605529">-</span>&nbsp;<span class="num" id="7605531">1</span><span class="op" id="7605532">,</span><br>
<span class="lineno"></span><span class="op" id="7605534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7605537">func</span>&nbsp;<span class="ident" id="7605542">TestVarint</span><span class="op" id="7605552">(</span><span class="ident" id="7605553">t</span>&nbsp;<span class="op" id="7605555">*</span><span class="ident" id="7605556">testing</span><span class="op" id="7605563">.</span><span class="ident" id="7605564">T</span><span class="op" id="7605565">)</span>&nbsp;<span class="op" id="7605567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605570">for</span>&nbsp;<span class="ident" id="7605574">_</span><span class="op" id="7605575">,</span>&nbsp;<span class="ident" id="7605577">x</span>&nbsp;<span class="op" id="7605579">:=</span>&nbsp;<span class="keyword" id="7605582">range</span>&nbsp;<span class="ident" id="7605588">tests</span>&nbsp;<span class="op" id="7605594">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605598">testVarint</span><span class="op" id="7605608">(</span><span class="ident" id="7605609">t</span><span class="op" id="7605610">,</span>&nbsp;<span class="ident" id="7605612">x</span><span class="op" id="7605613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605617">testVarint</span><span class="op" id="7605627">(</span><span class="ident" id="7605628">t</span><span class="op" id="7605629">,</span>&nbsp;<span class="op" id="7605631">-</span><span class="ident" id="7605632">x</span><span class="op" id="7605633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605639">for</span>&nbsp;<span class="ident" id="7605643">x</span>&nbsp;<span class="op" id="7605645">:=</span>&nbsp;<span class="ident" id="7605648">int64</span><span class="op" id="7605653">(</span><span class="num" id="7605654">0x7</span><span class="op" id="7605657">)</span><span class="op" id="7605658">;</span>&nbsp;<span class="ident" id="7605660">x</span>&nbsp;<span class="op" id="7605662">!=</span>&nbsp;<span class="num" id="7605665">0</span><span class="op" id="7605666">;</span>&nbsp;<span class="ident" id="7605668">x</span>&nbsp;<span class="op" id="7605670">&lt;&lt;=</span>&nbsp;<span class="num" id="7605674">1</span>&nbsp;<span class="op" id="7605676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605680">testVarint</span><span class="op" id="7605690">(</span><span class="ident" id="7605691">t</span><span class="op" id="7605692">,</span>&nbsp;<span class="ident" id="7605694">x</span><span class="op" id="7605695">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605699">testVarint</span><span class="op" id="7605709">(</span><span class="ident" id="7605710">t</span><span class="op" id="7605711">,</span>&nbsp;<span class="op" id="7605713">-</span><span class="ident" id="7605714">x</span><span class="op" id="7605715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605718">}</span><br>
<span class="lineno"></span><span class="op" id="7605720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7605723">func</span>&nbsp;<span class="ident" id="7605728">TestUvarint</span><span class="op" id="7605739">(</span><span class="ident" id="7605740">t</span>&nbsp;<span class="op" id="7605742">*</span><span class="ident" id="7605743">testing</span><span class="op" id="7605750">.</span><span class="ident" id="7605751">T</span><span class="op" id="7605752">)</span>&nbsp;<span class="op" id="7605754">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605757">for</span>&nbsp;<span class="ident" id="7605761">_</span><span class="op" id="7605762">,</span>&nbsp;<span class="ident" id="7605764">x</span>&nbsp;<span class="op" id="7605766">:=</span>&nbsp;<span class="keyword" id="7605769">range</span>&nbsp;<span class="ident" id="7605775">tests</span>&nbsp;<span class="op" id="7605781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605785">testUvarint</span><span class="op" id="7605796">(</span><span class="ident" id="7605797">t</span><span class="op" id="7605798">,</span>&nbsp;<span class="ident" id="7605800">uint64</span><span class="op" id="7605806">(</span><span class="ident" id="7605807">x</span><span class="op" id="7605808">)</span><span class="op" id="7605809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605815">for</span>&nbsp;<span class="ident" id="7605819">x</span>&nbsp;<span class="op" id="7605821">:=</span>&nbsp;<span class="ident" id="7605824">uint64</span><span class="op" id="7605830">(</span><span class="num" id="7605831">0x7</span><span class="op" id="7605834">)</span><span class="op" id="7605835">;</span>&nbsp;<span class="ident" id="7605837">x</span>&nbsp;<span class="op" id="7605839">!=</span>&nbsp;<span class="num" id="7605842">0</span><span class="op" id="7605843">;</span>&nbsp;<span class="ident" id="7605845">x</span>&nbsp;<span class="op" id="7605847">&lt;&lt;=</span>&nbsp;<span class="num" id="7605851">1</span>&nbsp;<span class="op" id="7605853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605857">testUvarint</span><span class="op" id="7605868">(</span><span class="ident" id="7605869">t</span><span class="op" id="7605870">,</span>&nbsp;<span class="ident" id="7605872">x</span><span class="op" id="7605873">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605876">}</span><br>
<span class="lineno"></span><span class="op" id="7605878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7605881">func</span>&nbsp;<span class="ident" id="7605886">TestBufferTooSmall</span><span class="op" id="7605904">(</span><span class="ident" id="7605905">t</span>&nbsp;<span class="op" id="7605907">*</span><span class="ident" id="7605908">testing</span><span class="op" id="7605915">.</span><span class="ident" id="7605916">T</span><span class="op" id="7605917">)</span>&nbsp;<span class="op" id="7605919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605922">buf</span>&nbsp;<span class="op" id="7605926">:=</span>&nbsp;<span class="op" id="7605929">[</span><span class="op" id="7605930">]</span><span class="builtintype" id="7605931">byte</span><span class="op" id="7605935">{</span><span class="num" id="7605936">0x80</span><span class="op" id="7605940">,</span>&nbsp;<span class="num" id="7605942">0x80</span><span class="op" id="7605946">,</span>&nbsp;<span class="num" id="7605948">0x80</span><span class="op" id="7605952">,</span>&nbsp;<span class="num" id="7605954">0x80</span><span class="op" id="7605958">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605961">for</span>&nbsp;<span class="ident" id="7605965">i</span>&nbsp;<span class="op" id="7605967">:=</span>&nbsp;<span class="num" id="7605970">0</span><span class="op" id="7605971">;</span>&nbsp;<span class="ident" id="7605973">i</span>&nbsp;<span class="op" id="7605975">&lt;=</span>&nbsp;<span class="builtinfunc" id="7605978">len</span><span class="op" id="7605981">(</span><span class="ident" id="7605982">buf</span><span class="op" id="7605985">)</span><span class="op" id="7605986">;</span>&nbsp;<span class="ident" id="7605988">i</span><span class="op" id="7605989">++</span>&nbsp;<span class="op" id="7605992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605996">buf</span>&nbsp;<span class="op" id="7606000">:=</span>&nbsp;<span class="ident" id="7606003">buf</span><span class="op" id="7606006">[</span><span class="num" id="7606007">0</span><span class="op" id="7606008">:</span><span class="ident" id="7606009">i</span><span class="op" id="7606010">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606014">x</span><span class="op" id="7606015">,</span>&nbsp;<span class="ident" id="7606017">n</span>&nbsp;<span class="op" id="7606019">:=</span>&nbsp;<span class="ident" id="7606022">Uvarint</span><span class="op" id="7606029">(</span><span class="ident" id="7606030">buf</span><span class="op" id="7606033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606037">if</span>&nbsp;<span class="ident" id="7606040">x</span>&nbsp;<span class="op" id="7606042">!=</span>&nbsp;<span class="num" id="7606045">0</span>&nbsp;<span class="op" id="7606047">||</span>&nbsp;<span class="ident" id="7606050">n</span>&nbsp;<span class="op" id="7606052">!=</span>&nbsp;<span class="num" id="7606055">0</span>&nbsp;<span class="op" id="7606057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606062">t</span><span class="op" id="7606063">.</span><span class="ident" id="7606064">Errorf</span><span class="op" id="7606070">(</span><span class="string" id="7606071">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7606104">,</span>&nbsp;<span class="ident" id="7606106">buf</span><span class="op" id="7606109">,</span>&nbsp;<span class="ident" id="7606111">x</span><span class="op" id="7606112">,</span>&nbsp;<span class="ident" id="7606114">n</span><span class="op" id="7606115">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606124">x</span><span class="op" id="7606125">,</span>&nbsp;<span class="ident" id="7606127">err</span>&nbsp;<span class="op" id="7606131">:=</span>&nbsp;<span class="ident" id="7606134">ReadUvarint</span><span class="op" id="7606145">(</span><span class="ident" id="7606146">bytes</span><span class="op" id="7606151">.</span><span class="ident" id="7606152">NewReader</span><span class="op" id="7606161">(</span><span class="ident" id="7606162">buf</span><span class="op" id="7606165">)</span><span class="op" id="7606166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606170">if</span>&nbsp;<span class="ident" id="7606173">x</span>&nbsp;<span class="op" id="7606175">!=</span>&nbsp;<span class="num" id="7606178">0</span>&nbsp;<span class="op" id="7606180">||</span>&nbsp;<span class="ident" id="7606183">err</span>&nbsp;<span class="op" id="7606187">!=</span>&nbsp;<span class="ident" id="7606190">io</span><span class="op" id="7606192">.</span><span class="ident" id="7606193">EOF</span>&nbsp;<span class="op" id="7606197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606202">t</span><span class="op" id="7606203">.</span><span class="ident" id="7606204">Errorf</span><span class="op" id="7606210">(</span><span class="string" id="7606211">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7606250">,</span>&nbsp;<span class="ident" id="7606252">buf</span><span class="op" id="7606255">,</span>&nbsp;<span class="ident" id="7606257">x</span><span class="op" id="7606258">,</span>&nbsp;<span class="ident" id="7606260">err</span><span class="op" id="7606263">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606270">}</span><br>
<span class="lineno"></span><span class="op" id="7606272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7606275">func</span>&nbsp;<span class="ident" id="7606280">testOverflow</span><span class="op" id="7606292">(</span><span class="ident" id="7606293">t</span>&nbsp;<span class="op" id="7606295">*</span><span class="ident" id="7606296">testing</span><span class="op" id="7606303">.</span><span class="ident" id="7606304">T</span><span class="op" id="7606305">,</span>&nbsp;<span class="ident" id="7606307">buf</span>&nbsp;<span class="op" id="7606311">[</span><span class="op" id="7606312">]</span><span class="builtintype" id="7606313">byte</span><span class="op" id="7606317">,</span>&nbsp;<span class="ident" id="7606319">n0</span>&nbsp;<span class="builtintype" id="7606322">int</span><span class="op" id="7606325">,</span>&nbsp;<span class="ident" id="7606327">err0</span>&nbsp;<span class="builtintype" id="7606332">error</span><span class="op" id="7606337">)</span>&nbsp;<span class="op" id="7606339">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606342">x</span><span class="op" id="7606343">,</span>&nbsp;<span class="ident" id="7606345">n</span>&nbsp;<span class="op" id="7606347">:=</span>&nbsp;<span class="ident" id="7606350">Uvarint</span><span class="op" id="7606357">(</span><span class="ident" id="7606358">buf</span><span class="op" id="7606361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606364">if</span>&nbsp;<span class="ident" id="7606367">x</span>&nbsp;<span class="op" id="7606369">!=</span>&nbsp;<span class="num" id="7606372">0</span>&nbsp;<span class="op" id="7606374">||</span>&nbsp;<span class="ident" id="7606377">n</span>&nbsp;<span class="op" id="7606379">!=</span>&nbsp;<span class="ident" id="7606382">n0</span>&nbsp;<span class="op" id="7606385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606389">t</span><span class="op" id="7606390">.</span><span class="ident" id="7606391">Errorf</span><span class="op" id="7606397">(</span><span class="string" id="7606398">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="7606443">,</span>&nbsp;<span class="ident" id="7606445">buf</span><span class="op" id="7606448">,</span>&nbsp;<span class="ident" id="7606450">x</span><span class="op" id="7606451">,</span>&nbsp;<span class="ident" id="7606453">n</span><span class="op" id="7606454">,</span>&nbsp;<span class="ident" id="7606456">n0</span><span class="op" id="7606458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606465">x</span><span class="op" id="7606466">,</span>&nbsp;<span class="ident" id="7606468">err</span>&nbsp;<span class="op" id="7606472">:=</span>&nbsp;<span class="ident" id="7606475">ReadUvarint</span><span class="op" id="7606486">(</span><span class="ident" id="7606487">bytes</span><span class="op" id="7606492">.</span><span class="ident" id="7606493">NewReader</span><span class="op" id="7606502">(</span><span class="ident" id="7606503">buf</span><span class="op" id="7606506">)</span><span class="op" id="7606507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606510">if</span>&nbsp;<span class="ident" id="7606513">x</span>&nbsp;<span class="op" id="7606515">!=</span>&nbsp;<span class="num" id="7606518">0</span>&nbsp;<span class="op" id="7606520">||</span>&nbsp;<span class="ident" id="7606523">err</span>&nbsp;<span class="op" id="7606527">!=</span>&nbsp;<span class="ident" id="7606530">err0</span>&nbsp;<span class="op" id="7606535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606539">t</span><span class="op" id="7606540">.</span><span class="ident" id="7606541">Errorf</span><span class="op" id="7606547">(</span><span class="string" id="7606548">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="7606599">,</span>&nbsp;<span class="ident" id="7606601">buf</span><span class="op" id="7606604">,</span>&nbsp;<span class="ident" id="7606606">x</span><span class="op" id="7606607">,</span>&nbsp;<span class="ident" id="7606609">err</span><span class="op" id="7606612">,</span>&nbsp;<span class="ident" id="7606614">err0</span><span class="op" id="7606618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606621">}</span><br>
<span class="lineno"></span><span class="op" id="7606623">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="7606626">func</span>&nbsp;<span class="ident" id="7606631">TestOverflow</span><span class="op" id="7606643">(</span><span class="ident" id="7606644">t</span>&nbsp;<span class="op" id="7606646">*</span><span class="ident" id="7606647">testing</span><span class="op" id="7606654">.</span><span class="ident" id="7606655">T</span><span class="op" id="7606656">)</span>&nbsp;<span class="op" id="7606658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606661">testOverflow</span><span class="op" id="7606673">(</span><span class="ident" id="7606674">t</span><span class="op" id="7606675">,</span>&nbsp;<span class="op" id="7606677">[</span><span class="op" id="7606678">]</span><span class="builtintype" id="7606679">byte</span><span class="op" id="7606683">{</span><span class="num" id="7606684">0x80</span><span class="op" id="7606688">,</span>&nbsp;<span class="num" id="7606690">0x80</span><span class="op" id="7606694">,</span>&nbsp;<span class="num" id="7606696">0x80</span><span class="op" id="7606700">,</span>&nbsp;<span class="num" id="7606702">0x80</span><span class="op" id="7606706">,</span>&nbsp;<span class="num" id="7606708">0x80</span><span class="op" id="7606712">,</span>&nbsp;<span class="num" id="7606714">0x80</span><span class="op" id="7606718">,</span>&nbsp;<span class="num" id="7606720">0x80</span><span class="op" id="7606724">,</span>&nbsp;<span class="num" id="7606726">0x80</span><span class="op" id="7606730">,</span>&nbsp;<span class="num" id="7606732">0x80</span><span class="op" id="7606736">,</span>&nbsp;<span class="num" id="7606738">0x2</span><span class="op" id="7606741">}</span><span class="op" id="7606742">,</span>&nbsp;<span class="op" id="7606744">-</span><span class="num" id="7606745">10</span><span class="op" id="7606747">,</span>&nbsp;<span class="ident" id="7606749">overflow</span><span class="op" id="7606757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606760">testOverflow</span><span class="op" id="7606772">(</span><span class="ident" id="7606773">t</span><span class="op" id="7606774">,</span>&nbsp;<span class="op" id="7606776">[</span><span class="op" id="7606777">]</span><span class="builtintype" id="7606778">byte</span><span class="op" id="7606782">{</span><span class="num" id="7606783">0x80</span><span class="op" id="7606787">,</span>&nbsp;<span class="num" id="7606789">0x80</span><span class="op" id="7606793">,</span>&nbsp;<span class="num" id="7606795">0x80</span><span class="op" id="7606799">,</span>&nbsp;<span class="num" id="7606801">0x80</span><span class="op" id="7606805">,</span>&nbsp;<span class="num" id="7606807">0x80</span><span class="op" id="7606811">,</span>&nbsp;<span class="num" id="7606813">0x80</span><span class="op" id="7606817">,</span>&nbsp;<span class="num" id="7606819">0x80</span><span class="op" id="7606823">,</span>&nbsp;<span class="num" id="7606825">0x80</span><span class="op" id="7606829">,</span>&nbsp;<span class="num" id="7606831">0x80</span><span class="op" id="7606835">,</span>&nbsp;<span class="num" id="7606837">0x80</span><span class="op" id="7606841">,</span>&nbsp;<span class="num" id="7606843">0x80</span><span class="op" id="7606847">,</span>&nbsp;<span class="num" id="7606849">0x80</span><span class="op" id="7606853">,</span>&nbsp;<span class="num" id="7606855">0x1</span><span class="op" id="7606858">,</span>&nbsp;<span class="num" id="7606860">0</span><span class="op" id="7606861">,</span>&nbsp;<span class="num" id="7606863">0</span><span class="op" id="7606864">}</span><span class="op" id="7606865">,</span>&nbsp;<span class="op" id="7606867">-</span><span class="num" id="7606868">13</span><span class="op" id="7606870">,</span>&nbsp;<span class="ident" id="7606872">overflow</span><span class="op" id="7606880">)</span><br>
<span class="lineno"></span><span class="op" id="7606882">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7606885">func</span>&nbsp;<span class="ident" id="7606890">TestNonCanonicalZero</span><span class="op" id="7606910">(</span><span class="ident" id="7606911">t</span>&nbsp;<span class="op" id="7606913">*</span><span class="ident" id="7606914">testing</span><span class="op" id="7606921">.</span><span class="ident" id="7606922">T</span><span class="op" id="7606923">)</span>&nbsp;<span class="op" id="7606925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606928">buf</span>&nbsp;<span class="op" id="7606932">:=</span>&nbsp;<span class="op" id="7606935">[</span><span class="op" id="7606936">]</span><span class="builtintype" id="7606937">byte</span><span class="op" id="7606941">{</span><span class="num" id="7606942">0x80</span><span class="op" id="7606946">,</span>&nbsp;<span class="num" id="7606948">0x80</span><span class="op" id="7606952">,</span>&nbsp;<span class="num" id="7606954">0x80</span><span class="op" id="7606958">,</span>&nbsp;<span class="num" id="7606960">0</span><span class="op" id="7606961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606964">x</span><span class="op" id="7606965">,</span>&nbsp;<span class="ident" id="7606967">n</span>&nbsp;<span class="op" id="7606969">:=</span>&nbsp;<span class="ident" id="7606972">Uvarint</span><span class="op" id="7606979">(</span><span class="ident" id="7606980">buf</span><span class="op" id="7606983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606986">if</span>&nbsp;<span class="ident" id="7606989">x</span>&nbsp;<span class="op" id="7606991">!=</span>&nbsp;<span class="num" id="7606994">0</span>&nbsp;<span class="op" id="7606996">||</span>&nbsp;<span class="ident" id="7606999">n</span>&nbsp;<span class="op" id="7607001">!=</span>&nbsp;<span class="num" id="7607004">4</span>&nbsp;<span class="op" id="7607006">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607010">t</span><span class="op" id="7607011">.</span><span class="ident" id="7607012">Errorf</span><span class="op" id="7607018">(</span><span class="string" id="7607019">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="7607063">,</span>&nbsp;<span class="ident" id="7607065">buf</span><span class="op" id="7607068">,</span>&nbsp;<span class="ident" id="7607070">x</span><span class="op" id="7607071">,</span>&nbsp;<span class="ident" id="7607073">n</span><span class="op" id="7607074">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607078">}</span><br>
<span class="lineno"></span><span class="op" id="7607080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="7607083">func</span>&nbsp;<span class="ident" id="7607088">BenchmarkPutUvarint32</span><span class="op" id="7607109">(</span><span class="ident" id="7607110">b</span>&nbsp;<span class="op" id="7607112">*</span><span class="ident" id="7607113">testing</span><span class="op" id="7607120">.</span><span class="ident" id="7607121">B</span><span class="op" id="7607122">)</span>&nbsp;<span class="op" id="7607124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607127">buf</span>&nbsp;<span class="op" id="7607131">:=</span>&nbsp;<span class="builtinfunc" id="7607134">make</span><span class="op" id="7607138">(</span><span class="op" id="7607139">[</span><span class="op" id="7607140">]</span><span class="builtintype" id="7607141">byte</span><span class="op" id="7607145">,</span>&nbsp;<span class="ident" id="7607147">MaxVarintLen32</span><span class="op" id="7607161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607164">b</span><span class="op" id="7607165">.</span><span class="ident" id="7607166">SetBytes</span><span class="op" id="7607174">(</span><span class="num" id="7607175">4</span><span class="op" id="7607176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607179">for</span>&nbsp;<span class="ident" id="7607183">i</span>&nbsp;<span class="op" id="7607185">:=</span>&nbsp;<span class="num" id="7607188">0</span><span class="op" id="7607189">;</span>&nbsp;<span class="ident" id="7607191">i</span>&nbsp;<span class="op" id="7607193">&lt;</span>&nbsp;<span class="ident" id="7607195">b</span><span class="op" id="7607196">.</span><span class="ident" id="7607197">N</span><span class="op" id="7607198">;</span>&nbsp;<span class="ident" id="7607200">i</span><span class="op" id="7607201">++</span>&nbsp;<span class="op" id="7607204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607208">for</span>&nbsp;<span class="ident" id="7607212">j</span>&nbsp;<span class="op" id="7607214">:=</span>&nbsp;<span class="builtintype" id="7607217">uint</span><span class="op" id="7607221">(</span><span class="num" id="7607222">0</span><span class="op" id="7607223">)</span><span class="op" id="7607224">;</span>&nbsp;<span class="ident" id="7607226">j</span>&nbsp;<span class="op" id="7607228">&lt;</span>&nbsp;<span class="ident" id="7607230">MaxVarintLen32</span><span class="op" id="7607244">;</span>&nbsp;<span class="ident" id="7607246">j</span><span class="op" id="7607247">++</span>&nbsp;<span class="op" id="7607250">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607255">PutUvarint</span><span class="op" id="7607265">(</span><span class="ident" id="7607266">buf</span><span class="op" id="7607269">,</span>&nbsp;<span class="num" id="7607271">1</span><span class="op" id="7607272">&lt;&lt;</span><span class="op" id="7607274">(</span><span class="ident" id="7607275">j</span><span class="op" id="7607276">*</span><span class="num" id="7607277">7</span><span class="op" id="7607278">)</span><span class="op" id="7607279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607286">}</span><br>
<span class="lineno"></span><span class="op" id="7607288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7607291">func</span>&nbsp;<span class="ident" id="7607296">BenchmarkPutUvarint64</span><span class="op" id="7607317">(</span><span class="ident" id="7607318">b</span>&nbsp;<span class="op" id="7607320">*</span><span class="ident" id="7607321">testing</span><span class="op" id="7607328">.</span><span class="ident" id="7607329">B</span><span class="op" id="7607330">)</span>&nbsp;<span class="op" id="7607332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607335">buf</span>&nbsp;<span class="op" id="7607339">:=</span>&nbsp;<span class="builtinfunc" id="7607342">make</span><span class="op" id="7607346">(</span><span class="op" id="7607347">[</span><span class="op" id="7607348">]</span><span class="builtintype" id="7607349">byte</span><span class="op" id="7607353">,</span>&nbsp;<span class="ident" id="7607355">MaxVarintLen64</span><span class="op" id="7607369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607372">b</span><span class="op" id="7607373">.</span><span class="ident" id="7607374">SetBytes</span><span class="op" id="7607382">(</span><span class="num" id="7607383">8</span><span class="op" id="7607384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607387">for</span>&nbsp;<span class="ident" id="7607391">i</span>&nbsp;<span class="op" id="7607393">:=</span>&nbsp;<span class="num" id="7607396">0</span><span class="op" id="7607397">;</span>&nbsp;<span class="ident" id="7607399">i</span>&nbsp;<span class="op" id="7607401">&lt;</span>&nbsp;<span class="ident" id="7607403">b</span><span class="op" id="7607404">.</span><span class="ident" id="7607405">N</span><span class="op" id="7607406">;</span>&nbsp;<span class="ident" id="7607408">i</span><span class="op" id="7607409">++</span>&nbsp;<span class="op" id="7607412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607416">for</span>&nbsp;<span class="ident" id="7607420">j</span>&nbsp;<span class="op" id="7607422">:=</span>&nbsp;<span class="builtintype" id="7607425">uint</span><span class="op" id="7607429">(</span><span class="num" id="7607430">0</span><span class="op" id="7607431">)</span><span class="op" id="7607432">;</span>&nbsp;<span class="ident" id="7607434">j</span>&nbsp;<span class="op" id="7607436">&lt;</span>&nbsp;<span class="ident" id="7607438">MaxVarintLen64</span><span class="op" id="7607452">;</span>&nbsp;<span class="ident" id="7607454">j</span><span class="op" id="7607455">++</span>&nbsp;<span class="op" id="7607458">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607463">PutUvarint</span><span class="op" id="7607473">(</span><span class="ident" id="7607474">buf</span><span class="op" id="7607477">,</span>&nbsp;<span class="num" id="7607479">1</span><span class="op" id="7607480">&lt;&lt;</span><span class="op" id="7607482">(</span><span class="ident" id="7607483">j</span><span class="op" id="7607484">*</span><span class="num" id="7607485">7</span><span class="op" id="7607486">)</span><span class="op" id="7607487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607494">}</span><br>
<span class="lineno"></span><span class="op" id="7607496">}</span>
</div>
</body>
</html>
