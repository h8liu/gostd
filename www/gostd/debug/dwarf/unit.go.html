<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5268464">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5268520">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5268574">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5268625">package</span>&nbsp;<span class="ident" id="5268633">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5268640">import</span>&nbsp;<span class="string" id="5268647">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5268658">//&nbsp;DWARF&nbsp;debug&nbsp;info&nbsp;is&nbsp;split&nbsp;into&nbsp;a&nbsp;sequence&nbsp;of&nbsp;compilation&nbsp;units.</span><br>
<span class="lineno">10</span><span class="comment" id="5268725">//&nbsp;Each&nbsp;unit&nbsp;has&nbsp;its&nbsp;own&nbsp;abbreviation&nbsp;table&nbsp;and&nbsp;address&nbsp;size.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5268788">type</span>&nbsp;<span class="ident" id="5268793">unit</span>&nbsp;<span class="keyword" id="5268798">struct</span>&nbsp;<span class="op" id="5268805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268808">base</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5268815">Offset</span>&nbsp;<span class="comment" id="5268822">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;header&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268874">off</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268881">Offset</span>&nbsp;<span class="comment" id="5268888">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;data&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268938">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5268945">[</span><span class="op" id="5268946">]</span><span class="builtintype" id="5268947">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268953">atable</span>&nbsp;<span class="ident" id="5268960">abbrevTable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268973">asize</span>&nbsp;&nbsp;<span class="builtintype" id="5268980">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268985">vers</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5268992">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268997">is64</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5269004">bool</span>&nbsp;<span class="comment" id="5269009">//&nbsp;True&nbsp;for&nbsp;64-bit&nbsp;DWARF&nbsp;format</span><br>
<span class="lineno">20</span><span class="op" id="5269041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5269044">//&nbsp;Implement&nbsp;the&nbsp;dataFormat&nbsp;interface.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5269084">func</span>&nbsp;<span class="op" id="5269089">(</span><span class="ident" id="5269090">u</span>&nbsp;<span class="op" id="5269092">*</span><span class="ident" id="5269093">unit</span><span class="op" id="5269097">)</span>&nbsp;<span class="ident" id="5269099">version</span><span class="op" id="5269106">(</span><span class="op" id="5269107">)</span>&nbsp;<span class="builtintype" id="5269109">int</span>&nbsp;<span class="op" id="5269113">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269116">return</span>&nbsp;<span class="ident" id="5269123">u</span><span class="op" id="5269124">.</span><span class="ident" id="5269125">vers</span><br>
<span class="lineno"></span><span class="op" id="5269130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5269133">func</span>&nbsp;<span class="op" id="5269138">(</span><span class="ident" id="5269139">u</span>&nbsp;<span class="op" id="5269141">*</span><span class="ident" id="5269142">unit</span><span class="op" id="5269146">)</span>&nbsp;<span class="ident" id="5269148">dwarf64</span><span class="op" id="5269155">(</span><span class="op" id="5269156">)</span>&nbsp;<span class="op" id="5269158">(</span><span class="builtintype" id="5269159">bool</span><span class="op" id="5269163">,</span>&nbsp;<span class="builtintype" id="5269165">bool</span><span class="op" id="5269169">)</span>&nbsp;<span class="op" id="5269171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269174">return</span>&nbsp;<span class="ident" id="5269181">u</span><span class="op" id="5269182">.</span><span class="ident" id="5269183">is64</span><span class="op" id="5269187">,</span>&nbsp;<span class="builtintype" id="5269189">true</span><br>
<span class="lineno">30</span><span class="op" id="5269194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5269197">func</span>&nbsp;<span class="op" id="5269202">(</span><span class="ident" id="5269203">u</span>&nbsp;<span class="op" id="5269205">*</span><span class="ident" id="5269206">unit</span><span class="op" id="5269210">)</span>&nbsp;<span class="ident" id="5269212">addrsize</span><span class="op" id="5269220">(</span><span class="op" id="5269221">)</span>&nbsp;<span class="builtintype" id="5269223">int</span>&nbsp;<span class="op" id="5269227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269230">return</span>&nbsp;<span class="ident" id="5269237">u</span><span class="op" id="5269238">.</span><span class="ident" id="5269239">asize</span><br>
<span class="lineno"></span><span class="op" id="5269245">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5269248">func</span>&nbsp;<span class="op" id="5269253">(</span><span class="ident" id="5269254">d</span>&nbsp;<span class="op" id="5269256">*</span><span class="ident" id="5269257">Data</span><span class="op" id="5269261">)</span>&nbsp;<span class="ident" id="5269263">parseUnits</span><span class="op" id="5269273">(</span><span class="op" id="5269274">)</span>&nbsp;<span class="op" id="5269276">(</span><span class="op" id="5269277">[</span><span class="op" id="5269278">]</span><span class="ident" id="5269279">unit</span><span class="op" id="5269283">,</span>&nbsp;<span class="builtintype" id="5269285">error</span><span class="op" id="5269290">)</span>&nbsp;<span class="op" id="5269292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5269295">//&nbsp;Count&nbsp;units.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269312">nunit</span>&nbsp;<span class="op" id="5269318">:=</span>&nbsp;<span class="num" id="5269321">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269324">b</span>&nbsp;<span class="op" id="5269326">:=</span>&nbsp;<span class="ident" id="5269329">makeBuf</span><span class="op" id="5269336">(</span><span class="ident" id="5269337">d</span><span class="op" id="5269338">,</span>&nbsp;<span class="ident" id="5269340">unknownFormat</span><span class="op" id="5269353">{</span><span class="op" id="5269354">}</span><span class="op" id="5269355">,</span>&nbsp;<span class="string" id="5269357">&#34;info&#34;</span><span class="op" id="5269363">,</span>&nbsp;<span class="num" id="5269365">0</span><span class="op" id="5269366">,</span>&nbsp;<span class="ident" id="5269368">d</span><span class="op" id="5269369">.</span><span class="ident" id="5269370">info</span><span class="op" id="5269374">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269377">for</span>&nbsp;<span class="builtinfunc" id="5269381">len</span><span class="op" id="5269384">(</span><span class="ident" id="5269385">b</span><span class="op" id="5269386">.</span><span class="ident" id="5269387">data</span><span class="op" id="5269391">)</span>&nbsp;<span class="op" id="5269393">&gt;</span>&nbsp;<span class="num" id="5269395">0</span>&nbsp;<span class="op" id="5269397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5269401">len</span>&nbsp;<span class="op" id="5269405">:=</span>&nbsp;<span class="ident" id="5269408">b</span><span class="op" id="5269409">.</span><span class="builtintype" id="5269410">uint32</span><span class="op" id="5269416">(</span><span class="op" id="5269417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269421">if</span>&nbsp;<span class="builtinfunc" id="5269424">len</span>&nbsp;<span class="op" id="5269428">==</span>&nbsp;<span class="num" id="5269431">0xffffffff</span>&nbsp;<span class="op" id="5269442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269447">len64</span>&nbsp;<span class="op" id="5269453">:=</span>&nbsp;<span class="ident" id="5269456">b</span><span class="op" id="5269457">.</span><span class="ident" id="5269458">uint64</span><span class="op" id="5269464">(</span><span class="op" id="5269465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269470">if</span>&nbsp;<span class="ident" id="5269473">len64</span>&nbsp;<span class="op" id="5269479">!=</span>&nbsp;<span class="ident" id="5269482">uint64</span><span class="op" id="5269488">(</span><span class="builtintype" id="5269489">uint32</span><span class="op" id="5269495">(</span><span class="ident" id="5269496">len64</span><span class="op" id="5269501">)</span><span class="op" id="5269502">)</span>&nbsp;<span class="op" id="5269504">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269510">b</span><span class="op" id="5269511">.</span><span class="builtintype" id="5269512">error</span><span class="op" id="5269517">(</span><span class="string" id="5269518">&#34;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5269540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269546">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5269560">len</span>&nbsp;<span class="op" id="5269564">=</span>&nbsp;<span class="builtintype" id="5269566">uint32</span><span class="op" id="5269572">(</span><span class="ident" id="5269573">len64</span><span class="op" id="5269578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269582">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269586">b</span><span class="op" id="5269587">.</span><span class="ident" id="5269588">skip</span><span class="op" id="5269592">(</span><span class="builtintype" id="5269593">int</span><span class="op" id="5269596">(</span><span class="builtinfunc" id="5269597">len</span><span class="op" id="5269600">)</span><span class="op" id="5269601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269605">nunit</span><span class="op" id="5269610">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269617">if</span>&nbsp;<span class="ident" id="5269620">b</span><span class="op" id="5269621">.</span><span class="ident" id="5269622">err</span>&nbsp;<span class="op" id="5269626">!=</span>&nbsp;<span class="ident" id="5269629">nil</span>&nbsp;<span class="op" id="5269633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269637">return</span>&nbsp;<span class="ident" id="5269644">nil</span><span class="op" id="5269647">,</span>&nbsp;<span class="ident" id="5269649">b</span><span class="op" id="5269650">.</span><span class="ident" id="5269651">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5269660">//&nbsp;Again,&nbsp;this&nbsp;time&nbsp;writing&nbsp;them&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269700">b</span>&nbsp;<span class="op" id="5269702">=</span>&nbsp;<span class="ident" id="5269704">makeBuf</span><span class="op" id="5269711">(</span><span class="ident" id="5269712">d</span><span class="op" id="5269713">,</span>&nbsp;<span class="ident" id="5269715">unknownFormat</span><span class="op" id="5269728">{</span><span class="op" id="5269729">}</span><span class="op" id="5269730">,</span>&nbsp;<span class="string" id="5269732">&#34;info&#34;</span><span class="op" id="5269738">,</span>&nbsp;<span class="num" id="5269740">0</span><span class="op" id="5269741">,</span>&nbsp;<span class="ident" id="5269743">d</span><span class="op" id="5269744">.</span><span class="ident" id="5269745">info</span><span class="op" id="5269749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269752">units</span>&nbsp;<span class="op" id="5269758">:=</span>&nbsp;<span class="builtinfunc" id="5269761">make</span><span class="op" id="5269765">(</span><span class="op" id="5269766">[</span><span class="op" id="5269767">]</span><span class="ident" id="5269768">unit</span><span class="op" id="5269772">,</span>&nbsp;<span class="ident" id="5269774">nunit</span><span class="op" id="5269779">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269782">for</span>&nbsp;<span class="ident" id="5269786">i</span>&nbsp;<span class="op" id="5269788">:=</span>&nbsp;<span class="keyword" id="5269791">range</span>&nbsp;<span class="ident" id="5269797">units</span>&nbsp;<span class="op" id="5269803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269807">u</span>&nbsp;<span class="op" id="5269809">:=</span>&nbsp;<span class="op" id="5269812">&amp;</span><span class="ident" id="5269813">units</span><span class="op" id="5269818">[</span><span class="ident" id="5269819">i</span><span class="op" id="5269820">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269824">u</span><span class="op" id="5269825">.</span><span class="ident" id="5269826">base</span>&nbsp;<span class="op" id="5269831">=</span>&nbsp;<span class="ident" id="5269833">b</span><span class="op" id="5269834">.</span><span class="ident" id="5269835">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269841">n</span>&nbsp;<span class="op" id="5269843">:=</span>&nbsp;<span class="ident" id="5269846">b</span><span class="op" id="5269847">.</span><span class="builtintype" id="5269848">uint32</span><span class="op" id="5269854">(</span><span class="op" id="5269855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269859">if</span>&nbsp;<span class="ident" id="5269862">n</span>&nbsp;<span class="op" id="5269864">==</span>&nbsp;<span class="num" id="5269867">0xffffffff</span>&nbsp;<span class="op" id="5269878">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269883">u</span><span class="op" id="5269884">.</span><span class="ident" id="5269885">is64</span>&nbsp;<span class="op" id="5269890">=</span>&nbsp;<span class="builtintype" id="5269892">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269900">n</span>&nbsp;<span class="op" id="5269902">=</span>&nbsp;<span class="builtintype" id="5269904">uint32</span><span class="op" id="5269910">(</span><span class="ident" id="5269911">b</span><span class="op" id="5269912">.</span><span class="ident" id="5269913">uint64</span><span class="op" id="5269919">(</span><span class="op" id="5269920">)</span><span class="op" id="5269921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269929">vers</span>&nbsp;<span class="op" id="5269934">:=</span>&nbsp;<span class="ident" id="5269937">b</span><span class="op" id="5269938">.</span><span class="builtintype" id="5269939">uint16</span><span class="op" id="5269945">(</span><span class="op" id="5269946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269950">if</span>&nbsp;<span class="ident" id="5269953">vers</span>&nbsp;<span class="op" id="5269958">!=</span>&nbsp;<span class="num" id="5269961">2</span>&nbsp;<span class="op" id="5269963">&amp;&amp;</span>&nbsp;<span class="ident" id="5269966">vers</span>&nbsp;<span class="op" id="5269971">!=</span>&nbsp;<span class="num" id="5269974">3</span>&nbsp;<span class="op" id="5269976">&amp;&amp;</span>&nbsp;<span class="ident" id="5269979">vers</span>&nbsp;<span class="op" id="5269984">!=</span>&nbsp;<span class="num" id="5269987">4</span>&nbsp;<span class="op" id="5269989">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269994">b</span><span class="op" id="5269995">.</span><span class="builtintype" id="5269996">error</span><span class="op" id="5270001">(</span><span class="string" id="5270002">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5270031">+</span>&nbsp;<span class="ident" id="5270033">strconv</span><span class="op" id="5270040">.</span><span class="ident" id="5270041">Itoa</span><span class="op" id="5270045">(</span><span class="builtintype" id="5270046">int</span><span class="op" id="5270049">(</span><span class="ident" id="5270050">vers</span><span class="op" id="5270054">)</span><span class="op" id="5270055">)</span><span class="op" id="5270056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270061">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270073">u</span><span class="op" id="5270074">.</span><span class="ident" id="5270075">vers</span>&nbsp;<span class="op" id="5270080">=</span>&nbsp;<span class="builtintype" id="5270082">int</span><span class="op" id="5270085">(</span><span class="ident" id="5270086">vers</span><span class="op" id="5270090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270094">atable</span><span class="op" id="5270100">,</span>&nbsp;<span class="ident" id="5270102">err</span>&nbsp;<span class="op" id="5270106">:=</span>&nbsp;<span class="ident" id="5270109">d</span><span class="op" id="5270110">.</span><span class="ident" id="5270111">parseAbbrev</span><span class="op" id="5270122">(</span><span class="ident" id="5270123">b</span><span class="op" id="5270124">.</span><span class="builtintype" id="5270125">uint32</span><span class="op" id="5270131">(</span><span class="op" id="5270132">)</span><span class="op" id="5270133">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270137">if</span>&nbsp;<span class="ident" id="5270140">err</span>&nbsp;<span class="op" id="5270144">!=</span>&nbsp;<span class="ident" id="5270147">nil</span>&nbsp;<span class="op" id="5270151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270156">if</span>&nbsp;<span class="ident" id="5270159">b</span><span class="op" id="5270160">.</span><span class="ident" id="5270161">err</span>&nbsp;<span class="op" id="5270165">==</span>&nbsp;<span class="ident" id="5270168">nil</span>&nbsp;<span class="op" id="5270172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270178">b</span><span class="op" id="5270179">.</span><span class="ident" id="5270180">err</span>&nbsp;<span class="op" id="5270184">=</span>&nbsp;<span class="ident" id="5270186">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270198">break</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270210">u</span><span class="op" id="5270211">.</span><span class="ident" id="5270212">atable</span>&nbsp;<span class="op" id="5270219">=</span>&nbsp;<span class="ident" id="5270221">atable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270230">u</span><span class="op" id="5270231">.</span><span class="ident" id="5270232">asize</span>&nbsp;<span class="op" id="5270238">=</span>&nbsp;<span class="builtintype" id="5270240">int</span><span class="op" id="5270243">(</span><span class="ident" id="5270244">b</span><span class="op" id="5270245">.</span><span class="builtintype" id="5270246">uint8</span><span class="op" id="5270251">(</span><span class="op" id="5270252">)</span><span class="op" id="5270253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270257">u</span><span class="op" id="5270258">.</span><span class="ident" id="5270259">off</span>&nbsp;<span class="op" id="5270263">=</span>&nbsp;<span class="ident" id="5270265">b</span><span class="op" id="5270266">.</span><span class="ident" id="5270267">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270273">u</span><span class="op" id="5270274">.</span><span class="ident" id="5270275">data</span>&nbsp;<span class="op" id="5270280">=</span>&nbsp;<span class="ident" id="5270282">b</span><span class="op" id="5270283">.</span><span class="ident" id="5270284">bytes</span><span class="op" id="5270289">(</span><span class="builtintype" id="5270290">int</span><span class="op" id="5270293">(</span><span class="ident" id="5270294">n</span>&nbsp;<span class="op" id="5270296">-</span>&nbsp;<span class="op" id="5270298">(</span><span class="num" id="5270299">2</span>&nbsp;<span class="op" id="5270301">+</span>&nbsp;<span class="num" id="5270303">4</span>&nbsp;<span class="op" id="5270305">+</span>&nbsp;<span class="num" id="5270307">1</span><span class="op" id="5270308">)</span><span class="op" id="5270309">)</span><span class="op" id="5270310">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270316">if</span>&nbsp;<span class="ident" id="5270319">b</span><span class="op" id="5270320">.</span><span class="ident" id="5270321">err</span>&nbsp;<span class="op" id="5270325">!=</span>&nbsp;<span class="ident" id="5270328">nil</span>&nbsp;<span class="op" id="5270332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270336">return</span>&nbsp;<span class="ident" id="5270343">nil</span><span class="op" id="5270346">,</span>&nbsp;<span class="ident" id="5270348">b</span><span class="op" id="5270349">.</span><span class="ident" id="5270350">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270358">return</span>&nbsp;<span class="ident" id="5270365">units</span><span class="op" id="5270370">,</span>&nbsp;<span class="ident" id="5270372">nil</span><br>
<span class="lineno">90</span><span class="op" id="5270376">}</span>
</div>
</body>
</html>
