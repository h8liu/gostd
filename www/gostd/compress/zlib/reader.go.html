<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/zlib</h2>
<ul>
<li><a href="/gostd/compress/zlib/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/compress/zlib/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/compress/zlib/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/zlib/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/zlib/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5441244">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5441299">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5441353">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5441404">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbspw.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbspr,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspio.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspr.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5441847">package</span>&nbsp;<span class="ident" id="5441855">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5441861">import</span>&nbsp;<span class="op" id="5441868">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5441871">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5441880">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5441898">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5441908">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5441916">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5441932">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5441937">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5441940">const</span>&nbsp;<span class="ident" id="5441946">zlibDeflate</span>&nbsp;<span class="op" id="5441958">=</span>&nbsp;<span class="num" id="5441960">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5441963">var</span>&nbsp;<span class="op" id="5441967">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5441970">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442051">ErrChecksum</span>&nbsp;<span class="op" id="5442063">=</span>&nbsp;<span class="ident" id="5442065">errors</span><span class="op" id="5442071">.</span><span class="ident" id="5442072">New</span><span class="op" id="5442075">(</span><span class="string" id="5442076">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="5442100">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5442103">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442188">ErrDictionary</span>&nbsp;<span class="op" id="5442202">=</span>&nbsp;<span class="ident" id="5442204">errors</span><span class="op" id="5442210">.</span><span class="ident" id="5442211">New</span><span class="op" id="5442214">(</span><span class="string" id="5442215">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="5442241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5442244">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442321">ErrHeader</span>&nbsp;<span class="op" id="5442331">=</span>&nbsp;<span class="ident" id="5442333">errors</span><span class="op" id="5442339">.</span><span class="ident" id="5442340">New</span><span class="op" id="5442343">(</span><span class="string" id="5442344">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="5442366">)</span><br>
<span class="lineno"></span><span class="op" id="5442368">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5442371">type</span>&nbsp;<span class="ident" id="5442376">reader</span>&nbsp;<span class="keyword" id="5442383">struct</span>&nbsp;<span class="op" id="5442390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442393">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5442406">flate</span><span class="op" id="5442411">.</span><span class="ident" id="5442412">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442420">decompressor</span>&nbsp;<span class="ident" id="5442433">io</span><span class="op" id="5442435">.</span><span class="ident" id="5442436">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442448">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5442461">hash</span><span class="op" id="5442465">.</span><span class="ident" id="5442466">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442474">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5442487">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442494">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5442507">[</span><span class="num" id="5442508">4</span><span class="op" id="5442509">]</span><span class="builtintype" id="5442510">byte</span><br>
<span class="lineno"></span><span class="op" id="5442515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5442518">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="5442592">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="5442667">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="5442703">type</span>&nbsp;<span class="ident" id="5442708">Resetter</span>&nbsp;<span class="keyword" id="5442717">interface</span>&nbsp;<span class="op" id="5442727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5442730">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5442804">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442849">Reset</span><span class="op" id="5442854">(</span><span class="ident" id="5442855">r</span>&nbsp;<span class="ident" id="5442857">io</span><span class="op" id="5442859">.</span><span class="ident" id="5442860">Reader</span><span class="op" id="5442866">,</span>&nbsp;<span class="ident" id="5442868">dict</span>&nbsp;<span class="op" id="5442873">[</span><span class="op" id="5442874">]</span><span class="builtintype" id="5442875">byte</span><span class="op" id="5442879">)</span>&nbsp;<span class="builtintype" id="5442881">error</span><br>
<span class="lineno"></span><span class="op" id="5442887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5442890">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5442929">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="5443000">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5443082">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5443162">//</span><br>
<span class="lineno"></span><span class="comment" id="5443165">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5443231">func</span>&nbsp;<span class="ident" id="5443236">NewReader</span><span class="op" id="5443245">(</span><span class="ident" id="5443246">r</span>&nbsp;<span class="ident" id="5443248">io</span><span class="op" id="5443250">.</span><span class="ident" id="5443251">Reader</span><span class="op" id="5443257">)</span>&nbsp;<span class="op" id="5443259">(</span><span class="ident" id="5443260">io</span><span class="op" id="5443262">.</span><span class="ident" id="5443263">ReadCloser</span><span class="op" id="5443273">,</span>&nbsp;<span class="builtintype" id="5443275">error</span><span class="op" id="5443280">)</span>&nbsp;<span class="op" id="5443282">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443285">return</span>&nbsp;<span class="ident" id="5443292">NewReaderDict</span><span class="op" id="5443305">(</span><span class="ident" id="5443306">r</span><span class="op" id="5443307">,</span>&nbsp;<span class="ident" id="5443309">nil</span><span class="op" id="5443312">)</span><br>
<span class="lineno"></span><span class="op" id="5443314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5443317">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5443382">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="5443467">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5443564">//</span><br>
<span class="lineno"></span><span class="comment" id="5443567">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5443637">func</span>&nbsp;<span class="ident" id="5443642">NewReaderDict</span><span class="op" id="5443655">(</span><span class="ident" id="5443656">r</span>&nbsp;<span class="ident" id="5443658">io</span><span class="op" id="5443660">.</span><span class="ident" id="5443661">Reader</span><span class="op" id="5443667">,</span>&nbsp;<span class="ident" id="5443669">dict</span>&nbsp;<span class="op" id="5443674">[</span><span class="op" id="5443675">]</span><span class="builtintype" id="5443676">byte</span><span class="op" id="5443680">)</span>&nbsp;<span class="op" id="5443682">(</span><span class="ident" id="5443683">io</span><span class="op" id="5443685">.</span><span class="ident" id="5443686">ReadCloser</span><span class="op" id="5443696">,</span>&nbsp;<span class="builtintype" id="5443698">error</span><span class="op" id="5443703">)</span>&nbsp;<span class="op" id="5443705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5443708">z</span>&nbsp;<span class="op" id="5443710">:=</span>&nbsp;<span class="builtinfunc" id="5443713">new</span><span class="op" id="5443716">(</span><span class="ident" id="5443717">reader</span><span class="op" id="5443723">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5443726">err</span>&nbsp;<span class="op" id="5443730">:=</span>&nbsp;<span class="ident" id="5443733">z</span><span class="op" id="5443734">.</span><span class="ident" id="5443735">Reset</span><span class="op" id="5443740">(</span><span class="ident" id="5443741">r</span><span class="op" id="5443742">,</span>&nbsp;<span class="ident" id="5443744">dict</span><span class="op" id="5443748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443751">if</span>&nbsp;<span class="ident" id="5443754">err</span>&nbsp;<span class="op" id="5443758">!=</span>&nbsp;<span class="ident" id="5443761">nil</span>&nbsp;<span class="op" id="5443765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443769">return</span>&nbsp;<span class="ident" id="5443776">nil</span><span class="op" id="5443779">,</span>&nbsp;<span class="ident" id="5443781">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5443786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443789">return</span>&nbsp;<span class="ident" id="5443796">z</span><span class="op" id="5443797">,</span>&nbsp;<span class="ident" id="5443799">nil</span><br>
<span class="lineno">85</span><span class="op" id="5443803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5443806">func</span>&nbsp;<span class="op" id="5443811">(</span><span class="ident" id="5443812">z</span>&nbsp;<span class="op" id="5443814">*</span><span class="ident" id="5443815">reader</span><span class="op" id="5443821">)</span>&nbsp;<span class="ident" id="5443823">Read</span><span class="op" id="5443827">(</span><span class="ident" id="5443828">p</span>&nbsp;<span class="op" id="5443830">[</span><span class="op" id="5443831">]</span><span class="builtintype" id="5443832">byte</span><span class="op" id="5443836">)</span>&nbsp;<span class="op" id="5443838">(</span><span class="ident" id="5443839">n</span>&nbsp;<span class="builtintype" id="5443841">int</span><span class="op" id="5443844">,</span>&nbsp;<span class="ident" id="5443846">err</span>&nbsp;<span class="builtintype" id="5443850">error</span><span class="op" id="5443855">)</span>&nbsp;<span class="op" id="5443857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443860">if</span>&nbsp;<span class="ident" id="5443863">z</span><span class="op" id="5443864">.</span><span class="ident" id="5443865">err</span>&nbsp;<span class="op" id="5443869">!=</span>&nbsp;<span class="ident" id="5443872">nil</span>&nbsp;<span class="op" id="5443876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443880">return</span>&nbsp;<span class="num" id="5443887">0</span><span class="op" id="5443888">,</span>&nbsp;<span class="ident" id="5443890">z</span><span class="op" id="5443891">.</span><span class="ident" id="5443892">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5443897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443900">if</span>&nbsp;<span class="builtinfunc" id="5443903">len</span><span class="op" id="5443906">(</span><span class="ident" id="5443907">p</span><span class="op" id="5443908">)</span>&nbsp;<span class="op" id="5443910">==</span>&nbsp;<span class="num" id="5443913">0</span>&nbsp;<span class="op" id="5443915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443919">return</span>&nbsp;<span class="num" id="5443926">0</span><span class="op" id="5443927">,</span>&nbsp;<span class="ident" id="5443929">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5443934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5443938">n</span><span class="op" id="5443939">,</span>&nbsp;<span class="ident" id="5443941">err</span>&nbsp;<span class="op" id="5443945">=</span>&nbsp;<span class="ident" id="5443947">z</span><span class="op" id="5443948">.</span><span class="ident" id="5443949">decompressor</span><span class="op" id="5443961">.</span><span class="ident" id="5443962">Read</span><span class="op" id="5443966">(</span><span class="ident" id="5443967">p</span><span class="op" id="5443968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5443971">z</span><span class="op" id="5443972">.</span><span class="ident" id="5443973">digest</span><span class="op" id="5443979">.</span><span class="ident" id="5443980">Write</span><span class="op" id="5443985">(</span><span class="ident" id="5443986">p</span><span class="op" id="5443987">[</span><span class="num" id="5443988">0</span><span class="op" id="5443989">:</span><span class="ident" id="5443990">n</span><span class="op" id="5443991">]</span><span class="op" id="5443992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5443995">if</span>&nbsp;<span class="ident" id="5443998">n</span>&nbsp;<span class="op" id="5444000">!=</span>&nbsp;<span class="num" id="5444003">0</span>&nbsp;<span class="op" id="5444005">||</span>&nbsp;<span class="ident" id="5444008">err</span>&nbsp;<span class="op" id="5444012">!=</span>&nbsp;<span class="ident" id="5444015">io</span><span class="op" id="5444017">.</span><span class="ident" id="5444018">EOF</span>&nbsp;<span class="op" id="5444022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444026">z</span><span class="op" id="5444027">.</span><span class="ident" id="5444028">err</span>&nbsp;<span class="op" id="5444032">=</span>&nbsp;<span class="ident" id="5444034">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444040">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5444048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5444052">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444087">if</span>&nbsp;<span class="ident" id="5444090">_</span><span class="op" id="5444091">,</span>&nbsp;<span class="ident" id="5444093">err</span>&nbsp;<span class="op" id="5444097">:=</span>&nbsp;<span class="ident" id="5444100">io</span><span class="op" id="5444102">.</span><span class="ident" id="5444103">ReadFull</span><span class="op" id="5444111">(</span><span class="ident" id="5444112">z</span><span class="op" id="5444113">.</span><span class="ident" id="5444114">r</span><span class="op" id="5444115">,</span>&nbsp;<span class="ident" id="5444117">z</span><span class="op" id="5444118">.</span><span class="ident" id="5444119">scratch</span><span class="op" id="5444126">[</span><span class="num" id="5444127">0</span><span class="op" id="5444128">:</span><span class="num" id="5444129">4</span><span class="op" id="5444130">]</span><span class="op" id="5444131">)</span><span class="op" id="5444132">;</span>&nbsp;<span class="ident" id="5444134">err</span>&nbsp;<span class="op" id="5444138">!=</span>&nbsp;<span class="ident" id="5444141">nil</span>&nbsp;<span class="op" id="5444145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444149">z</span><span class="op" id="5444150">.</span><span class="ident" id="5444151">err</span>&nbsp;<span class="op" id="5444155">=</span>&nbsp;<span class="ident" id="5444157">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444163">return</span>&nbsp;<span class="num" id="5444170">0</span><span class="op" id="5444171">,</span>&nbsp;<span class="ident" id="5444173">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5444178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5444181">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444240">checksum</span>&nbsp;<span class="op" id="5444249">:=</span>&nbsp;<span class="builtintype" id="5444252">uint32</span><span class="op" id="5444258">(</span><span class="ident" id="5444259">z</span><span class="op" id="5444260">.</span><span class="ident" id="5444261">scratch</span><span class="op" id="5444268">[</span><span class="num" id="5444269">0</span><span class="op" id="5444270">]</span><span class="op" id="5444271">)</span><span class="op" id="5444272">&lt;&lt;</span><span class="num" id="5444274">24</span>&nbsp;<span class="op" id="5444277">|</span>&nbsp;<span class="builtintype" id="5444279">uint32</span><span class="op" id="5444285">(</span><span class="ident" id="5444286">z</span><span class="op" id="5444287">.</span><span class="ident" id="5444288">scratch</span><span class="op" id="5444295">[</span><span class="num" id="5444296">1</span><span class="op" id="5444297">]</span><span class="op" id="5444298">)</span><span class="op" id="5444299">&lt;&lt;</span><span class="num" id="5444301">16</span>&nbsp;<span class="op" id="5444304">|</span>&nbsp;<span class="builtintype" id="5444306">uint32</span><span class="op" id="5444312">(</span><span class="ident" id="5444313">z</span><span class="op" id="5444314">.</span><span class="ident" id="5444315">scratch</span><span class="op" id="5444322">[</span><span class="num" id="5444323">2</span><span class="op" id="5444324">]</span><span class="op" id="5444325">)</span><span class="op" id="5444326">&lt;&lt;</span><span class="num" id="5444328">8</span>&nbsp;<span class="op" id="5444330">|</span>&nbsp;<span class="builtintype" id="5444332">uint32</span><span class="op" id="5444338">(</span><span class="ident" id="5444339">z</span><span class="op" id="5444340">.</span><span class="ident" id="5444341">scratch</span><span class="op" id="5444348">[</span><span class="num" id="5444349">3</span><span class="op" id="5444350">]</span><span class="op" id="5444351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444354">if</span>&nbsp;<span class="ident" id="5444357">checksum</span>&nbsp;<span class="op" id="5444366">!=</span>&nbsp;<span class="ident" id="5444369">z</span><span class="op" id="5444370">.</span><span class="ident" id="5444371">digest</span><span class="op" id="5444377">.</span><span class="ident" id="5444378">Sum32</span><span class="op" id="5444383">(</span><span class="op" id="5444384">)</span>&nbsp;<span class="op" id="5444386">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444390">z</span><span class="op" id="5444391">.</span><span class="ident" id="5444392">err</span>&nbsp;<span class="op" id="5444396">=</span>&nbsp;<span class="ident" id="5444398">ErrChecksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444412">return</span>&nbsp;<span class="num" id="5444419">0</span><span class="op" id="5444420">,</span>&nbsp;<span class="ident" id="5444422">z</span><span class="op" id="5444423">.</span><span class="ident" id="5444424">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5444429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444432">return</span><br>
<span class="lineno"></span><span class="op" id="5444439">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5444442">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5444528">func</span>&nbsp;<span class="op" id="5444533">(</span><span class="ident" id="5444534">z</span>&nbsp;<span class="op" id="5444536">*</span><span class="ident" id="5444537">reader</span><span class="op" id="5444543">)</span>&nbsp;<span class="ident" id="5444545">Close</span><span class="op" id="5444550">(</span><span class="op" id="5444551">)</span>&nbsp;<span class="builtintype" id="5444553">error</span>&nbsp;<span class="op" id="5444559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444562">if</span>&nbsp;<span class="ident" id="5444565">z</span><span class="op" id="5444566">.</span><span class="ident" id="5444567">err</span>&nbsp;<span class="op" id="5444571">!=</span>&nbsp;<span class="ident" id="5444574">nil</span>&nbsp;<span class="op" id="5444578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444582">return</span>&nbsp;<span class="ident" id="5444589">z</span><span class="op" id="5444590">.</span><span class="ident" id="5444591">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5444596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444599">z</span><span class="op" id="5444600">.</span><span class="ident" id="5444601">err</span>&nbsp;<span class="op" id="5444605">=</span>&nbsp;<span class="ident" id="5444607">z</span><span class="op" id="5444608">.</span><span class="ident" id="5444609">decompressor</span><span class="op" id="5444621">.</span><span class="ident" id="5444622">Close</span><span class="op" id="5444627">(</span><span class="op" id="5444628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444631">return</span>&nbsp;<span class="ident" id="5444638">z</span><span class="op" id="5444639">.</span><span class="ident" id="5444640">err</span><br>
<span class="lineno"></span><span class="op" id="5444644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5444647">func</span>&nbsp;<span class="op" id="5444652">(</span><span class="ident" id="5444653">z</span>&nbsp;<span class="op" id="5444655">*</span><span class="ident" id="5444656">reader</span><span class="op" id="5444662">)</span>&nbsp;<span class="ident" id="5444664">Reset</span><span class="op" id="5444669">(</span><span class="ident" id="5444670">r</span>&nbsp;<span class="ident" id="5444672">io</span><span class="op" id="5444674">.</span><span class="ident" id="5444675">Reader</span><span class="op" id="5444681">,</span>&nbsp;<span class="ident" id="5444683">dict</span>&nbsp;<span class="op" id="5444688">[</span><span class="op" id="5444689">]</span><span class="builtintype" id="5444690">byte</span><span class="op" id="5444694">)</span>&nbsp;<span class="builtintype" id="5444696">error</span>&nbsp;<span class="op" id="5444702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444705">if</span>&nbsp;<span class="ident" id="5444708">fr</span><span class="op" id="5444710">,</span>&nbsp;<span class="ident" id="5444712">ok</span>&nbsp;<span class="op" id="5444715">:=</span>&nbsp;<span class="ident" id="5444718">r</span><span class="op" id="5444719">.</span><span class="op" id="5444720">(</span><span class="ident" id="5444721">flate</span><span class="op" id="5444726">.</span><span class="ident" id="5444727">Reader</span><span class="op" id="5444733">)</span><span class="op" id="5444734">;</span>&nbsp;<span class="ident" id="5444736">ok</span>&nbsp;<span class="op" id="5444739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444743">z</span><span class="op" id="5444744">.</span><span class="ident" id="5444745">r</span>&nbsp;<span class="op" id="5444747">=</span>&nbsp;<span class="ident" id="5444749">fr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5444753">}</span>&nbsp;<span class="keyword" id="5444755">else</span>&nbsp;<span class="op" id="5444760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444764">z</span><span class="op" id="5444765">.</span><span class="ident" id="5444766">r</span>&nbsp;<span class="op" id="5444768">=</span>&nbsp;<span class="ident" id="5444770">bufio</span><span class="op" id="5444775">.</span><span class="ident" id="5444776">NewReader</span><span class="op" id="5444785">(</span><span class="ident" id="5444786">r</span><span class="op" id="5444787">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5444790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444793">_</span><span class="op" id="5444794">,</span>&nbsp;<span class="ident" id="5444796">err</span>&nbsp;<span class="op" id="5444800">:=</span>&nbsp;<span class="ident" id="5444803">io</span><span class="op" id="5444805">.</span><span class="ident" id="5444806">ReadFull</span><span class="op" id="5444814">(</span><span class="ident" id="5444815">z</span><span class="op" id="5444816">.</span><span class="ident" id="5444817">r</span><span class="op" id="5444818">,</span>&nbsp;<span class="ident" id="5444820">z</span><span class="op" id="5444821">.</span><span class="ident" id="5444822">scratch</span><span class="op" id="5444829">[</span><span class="num" id="5444830">0</span><span class="op" id="5444831">:</span><span class="num" id="5444832">2</span><span class="op" id="5444833">]</span><span class="op" id="5444834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444837">if</span>&nbsp;<span class="ident" id="5444840">err</span>&nbsp;<span class="op" id="5444844">!=</span>&nbsp;<span class="ident" id="5444847">nil</span>&nbsp;<span class="op" id="5444851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444855">return</span>&nbsp;<span class="ident" id="5444862">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5444867">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444870">h</span>&nbsp;<span class="op" id="5444872">:=</span>&nbsp;<span class="builtintype" id="5444875">uint</span><span class="op" id="5444879">(</span><span class="ident" id="5444880">z</span><span class="op" id="5444881">.</span><span class="ident" id="5444882">scratch</span><span class="op" id="5444889">[</span><span class="num" id="5444890">0</span><span class="op" id="5444891">]</span><span class="op" id="5444892">)</span><span class="op" id="5444893">&lt;&lt;</span><span class="num" id="5444895">8</span>&nbsp;<span class="op" id="5444897">|</span>&nbsp;<span class="builtintype" id="5444899">uint</span><span class="op" id="5444903">(</span><span class="ident" id="5444904">z</span><span class="op" id="5444905">.</span><span class="ident" id="5444906">scratch</span><span class="op" id="5444913">[</span><span class="num" id="5444914">1</span><span class="op" id="5444915">]</span><span class="op" id="5444916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444919">if</span>&nbsp;<span class="op" id="5444922">(</span><span class="ident" id="5444923">z</span><span class="op" id="5444924">.</span><span class="ident" id="5444925">scratch</span><span class="op" id="5444932">[</span><span class="num" id="5444933">0</span><span class="op" id="5444934">]</span><span class="op" id="5444935">&amp;</span><span class="num" id="5444936">0x0f</span>&nbsp;<span class="op" id="5444941">!=</span>&nbsp;<span class="ident" id="5444944">zlibDeflate</span><span class="op" id="5444955">)</span>&nbsp;<span class="op" id="5444957">||</span>&nbsp;<span class="op" id="5444960">(</span><span class="ident" id="5444961">h</span><span class="op" id="5444962">%</span><span class="num" id="5444963">31</span>&nbsp;<span class="op" id="5444966">!=</span>&nbsp;<span class="num" id="5444969">0</span><span class="op" id="5444970">)</span>&nbsp;<span class="op" id="5444972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5444976">return</span>&nbsp;<span class="ident" id="5444983">ErrHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5444994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5444997">haveDict</span>&nbsp;<span class="op" id="5445006">:=</span>&nbsp;<span class="ident" id="5445009">z</span><span class="op" id="5445010">.</span><span class="ident" id="5445011">scratch</span><span class="op" id="5445018">[</span><span class="num" id="5445019">1</span><span class="op" id="5445020">]</span><span class="op" id="5445021">&amp;</span><span class="num" id="5445022">0x20</span>&nbsp;<span class="op" id="5445027">!=</span>&nbsp;<span class="num" id="5445030">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5445033">if</span>&nbsp;<span class="ident" id="5445036">haveDict</span>&nbsp;<span class="op" id="5445045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5445049">_</span><span class="op" id="5445050">,</span>&nbsp;<span class="ident" id="5445052">err</span>&nbsp;<span class="op" id="5445056">=</span>&nbsp;<span class="ident" id="5445058">io</span><span class="op" id="5445060">.</span><span class="ident" id="5445061">ReadFull</span><span class="op" id="5445069">(</span><span class="ident" id="5445070">z</span><span class="op" id="5445071">.</span><span class="ident" id="5445072">r</span><span class="op" id="5445073">,</span>&nbsp;<span class="ident" id="5445075">z</span><span class="op" id="5445076">.</span><span class="ident" id="5445077">scratch</span><span class="op" id="5445084">[</span><span class="num" id="5445085">0</span><span class="op" id="5445086">:</span><span class="num" id="5445087">4</span><span class="op" id="5445088">]</span><span class="op" id="5445089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5445093">if</span>&nbsp;<span class="ident" id="5445096">err</span>&nbsp;<span class="op" id="5445100">!=</span>&nbsp;<span class="ident" id="5445103">nil</span>&nbsp;<span class="op" id="5445107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5445112">return</span>&nbsp;<span class="ident" id="5445119">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5445125">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5445129">checksum</span>&nbsp;<span class="op" id="5445138">:=</span>&nbsp;<span class="builtintype" id="5445141">uint32</span><span class="op" id="5445147">(</span><span class="ident" id="5445148">z</span><span class="op" id="5445149">.</span><span class="ident" id="5445150">scratch</span><span class="op" id="5445157">[</span><span class="num" id="5445158">0</span><span class="op" id="5445159">]</span><span class="op" id="5445160">)</span><span class="op" id="5445161">&lt;&lt;</span><span class="num" id="5445163">24</span>&nbsp;<span class="op" id="5445166">|</span>&nbsp;<span class="builtintype" id="5445168">uint32</span><span class="op" id="5445174">(</span><span class="ident" id="5445175">z</span><span class="op" id="5445176">.</span><span class="ident" id="5445177">scratch</span><span class="op" id="5445184">[</span><span class="num" id="5445185">1</span><span class="op" id="5445186">]</span><span class="op" id="5445187">)</span><span class="op" id="5445188">&lt;&lt;</span><span class="num" id="5445190">16</span>&nbsp;<span class="op" id="5445193">|</span>&nbsp;<span class="builtintype" id="5445195">uint32</span><span class="op" id="5445201">(</span><span class="ident" id="5445202">z</span><span class="op" id="5445203">.</span><span class="ident" id="5445204">scratch</span><span class="op" id="5445211">[</span><span class="num" id="5445212">2</span><span class="op" id="5445213">]</span><span class="op" id="5445214">)</span><span class="op" id="5445215">&lt;&lt;</span><span class="num" id="5445217">8</span>&nbsp;<span class="op" id="5445219">|</span>&nbsp;<span class="builtintype" id="5445221">uint32</span><span class="op" id="5445227">(</span><span class="ident" id="5445228">z</span><span class="op" id="5445229">.</span><span class="ident" id="5445230">scratch</span><span class="op" id="5445237">[</span><span class="num" id="5445238">3</span><span class="op" id="5445239">]</span><span class="op" id="5445240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5445244">if</span>&nbsp;<span class="ident" id="5445247">checksum</span>&nbsp;<span class="op" id="5445256">!=</span>&nbsp;<span class="ident" id="5445259">adler32</span><span class="op" id="5445266">.</span><span class="ident" id="5445267">Checksum</span><span class="op" id="5445275">(</span><span class="ident" id="5445276">dict</span><span class="op" id="5445280">)</span>&nbsp;<span class="op" id="5445282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5445287">return</span>&nbsp;<span class="ident" id="5445294">ErrDictionary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5445310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5445313">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5445316">if</span>&nbsp;<span class="ident" id="5445319">z</span><span class="op" id="5445320">.</span><span class="ident" id="5445321">decompressor</span>&nbsp;<span class="op" id="5445334">==</span>&nbsp;<span class="ident" id="5445337">nil</span>&nbsp;<span class="op" id="5445341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5445345">if</span>&nbsp;<span class="ident" id="5445348">haveDict</span>&nbsp;<span class="op" id="5445357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5445362">z</span><span class="op" id="5445363">.</span><span class="ident" id="5445364">decompressor</span>&nbsp;<span class="op" id="5445377">=</span>&nbsp;<span class="ident" id="5445379">flate</span><span class="op" id="5445384">.</span><span class="ident" id="5445385">NewReaderDict</span><span class="op" id="5445398">(</span><span class="ident" id="5445399">z</span><span class="op" id="5445400">.</span><span class="ident" id="5445401">r</span><span class="op" id="5445402">,</span>&nbsp;<span class="ident" id="5445404">dict</span><span class="op" id="5445408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5445412">}</span>&nbsp;<span class="keyword" id="5445414">else</span>&nbsp;<span class="op" id="5445419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5445424">z</span><span class="op" id="5445425">.</span><span class="ident" id="5445426">decompressor</span>&nbsp;<span class="op" id="5445439">=</span>&nbsp;<span class="ident" id="5445441">flate</span><span class="op" id="5445446">.</span><span class="ident" id="5445447">NewReader</span><span class="op" id="5445456">(</span><span class="ident" id="5445457">z</span><span class="op" id="5445458">.</span><span class="ident" id="5445459">r</span><span class="op" id="5445460">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5445464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5445467">}</span>&nbsp;<span class="keyword" id="5445469">else</span>&nbsp;<span class="op" id="5445474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5445478">z</span><span class="op" id="5445479">.</span><span class="ident" id="5445480">decompressor</span><span class="op" id="5445492">.</span><span class="op" id="5445493">(</span><span class="ident" id="5445494">flate</span><span class="op" id="5445499">.</span><span class="ident" id="5445500">Resetter</span><span class="op" id="5445508">)</span><span class="op" id="5445509">.</span><span class="ident" id="5445510">Reset</span><span class="op" id="5445515">(</span><span class="ident" id="5445516">z</span><span class="op" id="5445517">.</span><span class="ident" id="5445518">r</span><span class="op" id="5445519">,</span>&nbsp;<span class="ident" id="5445521">dict</span><span class="op" id="5445525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5445528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5445531">z</span><span class="op" id="5445532">.</span><span class="ident" id="5445533">digest</span>&nbsp;<span class="op" id="5445540">=</span>&nbsp;<span class="ident" id="5445542">adler32</span><span class="op" id="5445549">.</span><span class="ident" id="5445550">New</span><span class="op" id="5445553">(</span><span class="op" id="5445554">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5445557">return</span>&nbsp;<span class="ident" id="5445564">nil</span><br>
<span class="lineno"></span><span class="op" id="5445568">}</span>
</div>
</body>
</html>
