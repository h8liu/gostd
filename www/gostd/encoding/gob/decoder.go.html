<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html" class="current">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4924952">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4925007">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4925061">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4925112">package</span>&nbsp;<span class="ident" id="4925120">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4925125">import</span>&nbsp;<span class="op" id="4925132">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4925135">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4925144">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4925154">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4925160">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4925171">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="4925178">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4925181">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="4925250">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="4925322">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="4925353">const</span>&nbsp;<span class="ident" id="4925359">tooBig</span>&nbsp;<span class="op" id="4925366">=</span>&nbsp;<span class="num" id="4925368">1</span>&nbsp;<span class="op" id="4925370">&lt;&lt;</span>&nbsp;<span class="num" id="4925373">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="4925377">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4925453">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="4925485">type</span>&nbsp;<span class="ident" id="4925490">Decoder</span>&nbsp;<span class="keyword" id="4925498">struct</span>&nbsp;<span class="op" id="4925505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925508">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925521">sync</span><span class="op" id="4925525">.</span><span class="ident" id="4925526">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4925561">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925603">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925616">io</span><span class="op" id="4925618">.</span><span class="ident" id="4925619">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4925656">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925679">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925692">decBuffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4925732">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925773">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4925786">map</span><span class="op" id="4925789">[</span><span class="ident" id="4925790">typeId</span><span class="op" id="4925796">]</span><span class="op" id="4925797">*</span><span class="ident" id="4925798">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4925826">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925870">decoderCache</span>&nbsp;<span class="keyword" id="4925883">map</span><span class="op" id="4925886">[</span><span class="ident" id="4925887">reflect</span><span class="op" id="4925894">.</span><span class="ident" id="4925895">Type</span><span class="op" id="4925899">]</span><span class="keyword" id="4925900">map</span><span class="op" id="4925903">[</span><span class="ident" id="4925904">typeId</span><span class="op" id="4925910">]</span><span class="op" id="4925911">*</span><span class="op" id="4925912">*</span><span class="ident" id="4925913">decEngine</span>&nbsp;<span class="comment" id="4925923">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925953">ignorerCache</span>&nbsp;<span class="keyword" id="4925966">map</span><span class="op" id="4925969">[</span><span class="ident" id="4925970">typeId</span><span class="op" id="4925976">]</span><span class="op" id="4925977">*</span><span class="op" id="4925978">*</span><span class="ident" id="4925979">decEngine</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4926006">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926036">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4926049">*</span><span class="ident" id="4926050">decoderState</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4926089">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926141">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4926154">[</span><span class="op" id="4926155">]</span><span class="builtintype" id="4926156">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4926194">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926248">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4926261">error</span><br>
<span class="lineno"></span><span class="op" id="4926267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4926270">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="4926337">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4926408">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="4926425">func</span>&nbsp;<span class="ident" id="4926430">NewDecoder</span><span class="op" id="4926440">(</span><span class="ident" id="4926441">r</span>&nbsp;<span class="ident" id="4926443">io</span><span class="op" id="4926445">.</span><span class="ident" id="4926446">Reader</span><span class="op" id="4926452">)</span>&nbsp;<span class="op" id="4926454">*</span><span class="ident" id="4926455">Decoder</span>&nbsp;<span class="op" id="4926463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926466">dec</span>&nbsp;<span class="op" id="4926470">:=</span>&nbsp;<span class="builtinfunc" id="4926473">new</span><span class="op" id="4926476">(</span><span class="ident" id="4926477">Decoder</span><span class="op" id="4926484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4926487">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4926564">if</span>&nbsp;<span class="ident" id="4926567">_</span><span class="op" id="4926568">,</span>&nbsp;<span class="ident" id="4926570">ok</span>&nbsp;<span class="op" id="4926573">:=</span>&nbsp;<span class="ident" id="4926576">r</span><span class="op" id="4926577">.</span><span class="op" id="4926578">(</span><span class="ident" id="4926579">io</span><span class="op" id="4926581">.</span><span class="ident" id="4926582">ByteReader</span><span class="op" id="4926592">)</span><span class="op" id="4926593">;</span>&nbsp;<span class="op" id="4926595">!</span><span class="ident" id="4926596">ok</span>&nbsp;<span class="op" id="4926599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926603">r</span>&nbsp;<span class="op" id="4926605">=</span>&nbsp;<span class="ident" id="4926607">bufio</span><span class="op" id="4926612">.</span><span class="ident" id="4926613">NewReader</span><span class="op" id="4926622">(</span><span class="ident" id="4926623">r</span><span class="op" id="4926624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4926627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926630">dec</span><span class="op" id="4926633">.</span><span class="ident" id="4926634">r</span>&nbsp;<span class="op" id="4926636">=</span>&nbsp;<span class="ident" id="4926638">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926641">dec</span><span class="op" id="4926644">.</span><span class="ident" id="4926645">wireType</span>&nbsp;<span class="op" id="4926654">=</span>&nbsp;<span class="builtinfunc" id="4926656">make</span><span class="op" id="4926660">(</span><span class="keyword" id="4926661">map</span><span class="op" id="4926664">[</span><span class="ident" id="4926665">typeId</span><span class="op" id="4926671">]</span><span class="op" id="4926672">*</span><span class="ident" id="4926673">wireType</span><span class="op" id="4926681">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926684">dec</span><span class="op" id="4926687">.</span><span class="ident" id="4926688">decoderCache</span>&nbsp;<span class="op" id="4926701">=</span>&nbsp;<span class="builtinfunc" id="4926703">make</span><span class="op" id="4926707">(</span><span class="keyword" id="4926708">map</span><span class="op" id="4926711">[</span><span class="ident" id="4926712">reflect</span><span class="op" id="4926719">.</span><span class="ident" id="4926720">Type</span><span class="op" id="4926724">]</span><span class="keyword" id="4926725">map</span><span class="op" id="4926728">[</span><span class="ident" id="4926729">typeId</span><span class="op" id="4926735">]</span><span class="op" id="4926736">*</span><span class="op" id="4926737">*</span><span class="ident" id="4926738">decEngine</span><span class="op" id="4926747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926750">dec</span><span class="op" id="4926753">.</span><span class="ident" id="4926754">ignorerCache</span>&nbsp;<span class="op" id="4926767">=</span>&nbsp;<span class="builtinfunc" id="4926769">make</span><span class="op" id="4926773">(</span><span class="keyword" id="4926774">map</span><span class="op" id="4926777">[</span><span class="ident" id="4926778">typeId</span><span class="op" id="4926784">]</span><span class="op" id="4926785">*</span><span class="op" id="4926786">*</span><span class="ident" id="4926787">decEngine</span><span class="op" id="4926796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926799">dec</span><span class="op" id="4926802">.</span><span class="ident" id="4926803">countBuf</span>&nbsp;<span class="op" id="4926812">=</span>&nbsp;<span class="builtinfunc" id="4926814">make</span><span class="op" id="4926818">(</span><span class="op" id="4926819">[</span><span class="op" id="4926820">]</span><span class="builtintype" id="4926821">byte</span><span class="op" id="4926825">,</span>&nbsp;<span class="num" id="4926827">9</span><span class="op" id="4926828">)</span>&nbsp;<span class="comment" id="4926830">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4926886">return</span>&nbsp;<span class="ident" id="4926893">dec</span><br>
<span class="lineno">50</span><span class="op" id="4926897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4926900">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4926944">func</span>&nbsp;<span class="op" id="4926949">(</span><span class="ident" id="4926950">dec</span>&nbsp;<span class="op" id="4926954">*</span><span class="ident" id="4926955">Decoder</span><span class="op" id="4926962">)</span>&nbsp;<span class="ident" id="4926964">recvType</span><span class="op" id="4926972">(</span><span class="ident" id="4926973">id</span>&nbsp;<span class="ident" id="4926976">typeId</span><span class="op" id="4926982">)</span>&nbsp;<span class="op" id="4926984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4926987">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927040">if</span>&nbsp;<span class="ident" id="4927043">id</span>&nbsp;<span class="op" id="4927046">&lt;</span>&nbsp;<span class="ident" id="4927048">firstUserId</span>&nbsp;<span class="op" id="4927060">||</span>&nbsp;<span class="ident" id="4927063">dec</span><span class="op" id="4927066">.</span><span class="ident" id="4927067">wireType</span><span class="op" id="4927075">[</span><span class="ident" id="4927076">id</span><span class="op" id="4927078">]</span>&nbsp;<span class="op" id="4927080">!=</span>&nbsp;<span class="ident" id="4927083">nil</span>&nbsp;<span class="op" id="4927087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927091">dec</span><span class="op" id="4927094">.</span><span class="ident" id="4927095">err</span>&nbsp;<span class="op" id="4927099">=</span>&nbsp;<span class="ident" id="4927101">errors</span><span class="op" id="4927107">.</span><span class="ident" id="4927108">New</span><span class="op" id="4927111">(</span><span class="string" id="4927112">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="4927142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927146">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4927158">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927168">wire</span>&nbsp;<span class="op" id="4927173">:=</span>&nbsp;<span class="builtinfunc" id="4927176">new</span><span class="op" id="4927179">(</span><span class="ident" id="4927180">wireType</span><span class="op" id="4927188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927191">dec</span><span class="op" id="4927194">.</span><span class="ident" id="4927195">decodeValue</span><span class="op" id="4927206">(</span><span class="ident" id="4927207">tWireType</span><span class="op" id="4927216">,</span>&nbsp;<span class="ident" id="4927218">reflect</span><span class="op" id="4927225">.</span><span class="ident" id="4927226">ValueOf</span><span class="op" id="4927233">(</span><span class="ident" id="4927234">wire</span><span class="op" id="4927238">)</span><span class="op" id="4927239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927242">if</span>&nbsp;<span class="ident" id="4927245">dec</span><span class="op" id="4927248">.</span><span class="ident" id="4927249">err</span>&nbsp;<span class="op" id="4927253">!=</span>&nbsp;<span class="ident" id="4927256">nil</span>&nbsp;<span class="op" id="4927260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927264">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4927275">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927310">dec</span><span class="op" id="4927313">.</span><span class="ident" id="4927314">wireType</span><span class="op" id="4927322">[</span><span class="ident" id="4927323">id</span><span class="op" id="4927325">]</span>&nbsp;<span class="op" id="4927327">=</span>&nbsp;<span class="ident" id="4927329">wire</span><br>
<span class="lineno"></span><span class="op" id="4927334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="4927337">var</span>&nbsp;<span class="ident" id="4927341">errBadCount</span>&nbsp;<span class="op" id="4927353">=</span>&nbsp;<span class="ident" id="4927355">errors</span><span class="op" id="4927361">.</span><span class="ident" id="4927362">New</span><span class="op" id="4927365">(</span><span class="string" id="4927366">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="4927390">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4927393">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="4927479">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="4927567">func</span>&nbsp;<span class="op" id="4927572">(</span><span class="ident" id="4927573">dec</span>&nbsp;<span class="op" id="4927577">*</span><span class="ident" id="4927578">Decoder</span><span class="op" id="4927585">)</span>&nbsp;<span class="ident" id="4927587">recvMessage</span><span class="op" id="4927598">(</span><span class="op" id="4927599">)</span>&nbsp;<span class="builtintype" id="4927601">bool</span>&nbsp;<span class="op" id="4927606">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4927609">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927627">nbytes</span><span class="op" id="4927633">,</span>&nbsp;<span class="ident" id="4927635">_</span><span class="op" id="4927636">,</span>&nbsp;<span class="ident" id="4927638">err</span>&nbsp;<span class="op" id="4927642">:=</span>&nbsp;<span class="ident" id="4927645">decodeUintReader</span><span class="op" id="4927661">(</span><span class="ident" id="4927662">dec</span><span class="op" id="4927665">.</span><span class="ident" id="4927666">r</span><span class="op" id="4927667">,</span>&nbsp;<span class="ident" id="4927669">dec</span><span class="op" id="4927672">.</span><span class="ident" id="4927673">countBuf</span><span class="op" id="4927681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927684">if</span>&nbsp;<span class="ident" id="4927687">err</span>&nbsp;<span class="op" id="4927691">!=</span>&nbsp;<span class="ident" id="4927694">nil</span>&nbsp;<span class="op" id="4927698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927702">dec</span><span class="op" id="4927705">.</span><span class="ident" id="4927706">err</span>&nbsp;<span class="op" id="4927710">=</span>&nbsp;<span class="ident" id="4927712">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927718">return</span>&nbsp;<span class="builtintype" id="4927725">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927735">if</span>&nbsp;<span class="ident" id="4927738">nbytes</span>&nbsp;<span class="op" id="4927745">&gt;=</span>&nbsp;<span class="ident" id="4927748">tooBig</span>&nbsp;<span class="op" id="4927755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927759">dec</span><span class="op" id="4927762">.</span><span class="ident" id="4927763">err</span>&nbsp;<span class="op" id="4927767">=</span>&nbsp;<span class="ident" id="4927769">errBadCount</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927783">return</span>&nbsp;<span class="builtintype" id="4927790">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927797">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927800">dec</span><span class="op" id="4927803">.</span><span class="ident" id="4927804">readMessage</span><span class="op" id="4927815">(</span><span class="builtintype" id="4927816">int</span><span class="op" id="4927819">(</span><span class="ident" id="4927820">nbytes</span><span class="op" id="4927826">)</span><span class="op" id="4927827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927830">return</span>&nbsp;<span class="ident" id="4927837">dec</span><span class="op" id="4927840">.</span><span class="ident" id="4927841">err</span>&nbsp;<span class="op" id="4927845">==</span>&nbsp;<span class="ident" id="4927848">nil</span><br>
<span class="lineno"></span><span class="op" id="4927852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4927855">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="4927914">func</span>&nbsp;<span class="op" id="4927919">(</span><span class="ident" id="4927920">dec</span>&nbsp;<span class="op" id="4927924">*</span><span class="ident" id="4927925">Decoder</span><span class="op" id="4927932">)</span>&nbsp;<span class="ident" id="4927934">readMessage</span><span class="op" id="4927945">(</span><span class="ident" id="4927946">nbytes</span>&nbsp;<span class="builtintype" id="4927953">int</span><span class="op" id="4927956">)</span>&nbsp;<span class="op" id="4927958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927961">if</span>&nbsp;<span class="ident" id="4927964">dec</span><span class="op" id="4927967">.</span><span class="ident" id="4927968">buf</span><span class="op" id="4927971">.</span><span class="ident" id="4927972">Len</span><span class="op" id="4927975">(</span><span class="op" id="4927976">)</span>&nbsp;<span class="op" id="4927978">!=</span>&nbsp;<span class="num" id="4927981">0</span>&nbsp;<span class="op" id="4927983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4927987">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4928031">panic</span><span class="op" id="4928036">(</span><span class="string" id="4928037">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="4928063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928066">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4928069">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928087">dec</span><span class="op" id="4928090">.</span><span class="ident" id="4928091">buf</span><span class="op" id="4928094">.</span><span class="ident" id="4928095">Size</span><span class="op" id="4928099">(</span><span class="ident" id="4928100">nbytes</span><span class="op" id="4928106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928109">_</span><span class="op" id="4928110">,</span>&nbsp;<span class="ident" id="4928112">dec</span><span class="op" id="4928115">.</span><span class="ident" id="4928116">err</span>&nbsp;<span class="op" id="4928120">=</span>&nbsp;<span class="ident" id="4928122">io</span><span class="op" id="4928124">.</span><span class="ident" id="4928125">ReadFull</span><span class="op" id="4928133">(</span><span class="ident" id="4928134">dec</span><span class="op" id="4928137">.</span><span class="ident" id="4928138">r</span><span class="op" id="4928139">,</span>&nbsp;<span class="ident" id="4928141">dec</span><span class="op" id="4928144">.</span><span class="ident" id="4928145">buf</span><span class="op" id="4928148">.</span><span class="ident" id="4928149">Bytes</span><span class="op" id="4928154">(</span><span class="op" id="4928155">)</span><span class="op" id="4928156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928159">if</span>&nbsp;<span class="ident" id="4928162">dec</span><span class="op" id="4928165">.</span><span class="ident" id="4928166">err</span>&nbsp;<span class="op" id="4928170">!=</span>&nbsp;<span class="ident" id="4928173">nil</span>&nbsp;<span class="op" id="4928177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928181">if</span>&nbsp;<span class="ident" id="4928184">dec</span><span class="op" id="4928187">.</span><span class="ident" id="4928188">err</span>&nbsp;<span class="op" id="4928192">==</span>&nbsp;<span class="ident" id="4928195">io</span><span class="op" id="4928197">.</span><span class="ident" id="4928198">EOF</span>&nbsp;<span class="op" id="4928202">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928207">dec</span><span class="op" id="4928210">.</span><span class="ident" id="4928211">err</span>&nbsp;<span class="op" id="4928215">=</span>&nbsp;<span class="ident" id="4928217">io</span><span class="op" id="4928219">.</span><span class="ident" id="4928220">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928242">}</span><br>
<span class="lineno"></span><span class="op" id="4928244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4928247">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="4928328">func</span>&nbsp;<span class="ident" id="4928333">toInt</span><span class="op" id="4928338">(</span><span class="ident" id="4928339">x</span>&nbsp;<span class="ident" id="4928341">uint64</span><span class="op" id="4928347">)</span>&nbsp;<span class="ident" id="4928349">int64</span>&nbsp;<span class="op" id="4928355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928358">i</span>&nbsp;<span class="op" id="4928360">:=</span>&nbsp;<span class="ident" id="4928363">int64</span><span class="op" id="4928368">(</span><span class="ident" id="4928369">x</span>&nbsp;<span class="op" id="4928371">&gt;&gt;</span>&nbsp;<span class="num" id="4928374">1</span><span class="op" id="4928375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928378">if</span>&nbsp;<span class="ident" id="4928381">x</span><span class="op" id="4928382">&amp;</span><span class="num" id="4928383">1</span>&nbsp;<span class="op" id="4928385">!=</span>&nbsp;<span class="num" id="4928388">0</span>&nbsp;<span class="op" id="4928390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928394">i</span>&nbsp;<span class="op" id="4928396">=</span>&nbsp;<span class="op" id="4928398">^</span><span class="ident" id="4928399">i</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928405">return</span>&nbsp;<span class="ident" id="4928412">i</span><br>
<span class="lineno"></span><span class="op" id="4928414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4928417">func</span>&nbsp;<span class="op" id="4928422">(</span><span class="ident" id="4928423">dec</span>&nbsp;<span class="op" id="4928427">*</span><span class="ident" id="4928428">Decoder</span><span class="op" id="4928435">)</span>&nbsp;<span class="ident" id="4928437">nextInt</span><span class="op" id="4928444">(</span><span class="op" id="4928445">)</span>&nbsp;<span class="ident" id="4928447">int64</span>&nbsp;<span class="op" id="4928453">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928456">n</span><span class="op" id="4928457">,</span>&nbsp;<span class="ident" id="4928459">_</span><span class="op" id="4928460">,</span>&nbsp;<span class="ident" id="4928462">err</span>&nbsp;<span class="op" id="4928466">:=</span>&nbsp;<span class="ident" id="4928469">decodeUintReader</span><span class="op" id="4928485">(</span><span class="op" id="4928486">&amp;</span><span class="ident" id="4928487">dec</span><span class="op" id="4928490">.</span><span class="ident" id="4928491">buf</span><span class="op" id="4928494">,</span>&nbsp;<span class="ident" id="4928496">dec</span><span class="op" id="4928499">.</span><span class="ident" id="4928500">countBuf</span><span class="op" id="4928508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928511">if</span>&nbsp;<span class="ident" id="4928514">err</span>&nbsp;<span class="op" id="4928518">!=</span>&nbsp;<span class="ident" id="4928521">nil</span>&nbsp;<span class="op" id="4928525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928529">dec</span><span class="op" id="4928532">.</span><span class="ident" id="4928533">err</span>&nbsp;<span class="op" id="4928537">=</span>&nbsp;<span class="ident" id="4928539">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928547">return</span>&nbsp;<span class="ident" id="4928554">toInt</span><span class="op" id="4928559">(</span><span class="ident" id="4928560">n</span><span class="op" id="4928561">)</span><br>
<span class="lineno">120</span><span class="op" id="4928563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4928566">func</span>&nbsp;<span class="op" id="4928571">(</span><span class="ident" id="4928572">dec</span>&nbsp;<span class="op" id="4928576">*</span><span class="ident" id="4928577">Decoder</span><span class="op" id="4928584">)</span>&nbsp;<span class="ident" id="4928586">nextUint</span><span class="op" id="4928594">(</span><span class="op" id="4928595">)</span>&nbsp;<span class="ident" id="4928597">uint64</span>&nbsp;<span class="op" id="4928604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928607">n</span><span class="op" id="4928608">,</span>&nbsp;<span class="ident" id="4928610">_</span><span class="op" id="4928611">,</span>&nbsp;<span class="ident" id="4928613">err</span>&nbsp;<span class="op" id="4928617">:=</span>&nbsp;<span class="ident" id="4928620">decodeUintReader</span><span class="op" id="4928636">(</span><span class="op" id="4928637">&amp;</span><span class="ident" id="4928638">dec</span><span class="op" id="4928641">.</span><span class="ident" id="4928642">buf</span><span class="op" id="4928645">,</span>&nbsp;<span class="ident" id="4928647">dec</span><span class="op" id="4928650">.</span><span class="ident" id="4928651">countBuf</span><span class="op" id="4928659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928662">if</span>&nbsp;<span class="ident" id="4928665">err</span>&nbsp;<span class="op" id="4928669">!=</span>&nbsp;<span class="ident" id="4928672">nil</span>&nbsp;<span class="op" id="4928676">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928680">dec</span><span class="op" id="4928683">.</span><span class="ident" id="4928684">err</span>&nbsp;<span class="op" id="4928688">=</span>&nbsp;<span class="ident" id="4928690">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928698">return</span>&nbsp;<span class="ident" id="4928705">n</span><br>
<span class="lineno"></span><span class="op" id="4928707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4928710">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="4928740">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="4928756">//&nbsp;&nbsp;&nbsp;&nbsp;(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="4928802">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="4928866">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="4928932">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4928997">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="4929023">func</span>&nbsp;<span class="op" id="4929028">(</span><span class="ident" id="4929029">dec</span>&nbsp;<span class="op" id="4929033">*</span><span class="ident" id="4929034">Decoder</span><span class="op" id="4929041">)</span>&nbsp;<span class="ident" id="4929043">decodeTypeSequence</span><span class="op" id="4929061">(</span><span class="ident" id="4929062">isInterface</span>&nbsp;<span class="builtintype" id="4929074">bool</span><span class="op" id="4929078">)</span>&nbsp;<span class="ident" id="4929080">typeId</span>&nbsp;<span class="op" id="4929087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929090">for</span>&nbsp;<span class="ident" id="4929094">dec</span><span class="op" id="4929097">.</span><span class="ident" id="4929098">err</span>&nbsp;<span class="op" id="4929102">==</span>&nbsp;<span class="ident" id="4929105">nil</span>&nbsp;<span class="op" id="4929109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929113">if</span>&nbsp;<span class="ident" id="4929116">dec</span><span class="op" id="4929119">.</span><span class="ident" id="4929120">buf</span><span class="op" id="4929123">.</span><span class="ident" id="4929124">Len</span><span class="op" id="4929127">(</span><span class="op" id="4929128">)</span>&nbsp;<span class="op" id="4929130">==</span>&nbsp;<span class="num" id="4929133">0</span>&nbsp;<span class="op" id="4929135">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929140">if</span>&nbsp;<span class="op" id="4929143">!</span><span class="ident" id="4929144">dec</span><span class="op" id="4929147">.</span><span class="ident" id="4929148">recvMessage</span><span class="op" id="4929159">(</span><span class="op" id="4929160">)</span>&nbsp;<span class="op" id="4929162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929168">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929185">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929209">id</span>&nbsp;<span class="op" id="4929212">:=</span>&nbsp;<span class="ident" id="4929215">typeId</span><span class="op" id="4929221">(</span><span class="ident" id="4929222">dec</span><span class="op" id="4929225">.</span><span class="ident" id="4929226">nextInt</span><span class="op" id="4929233">(</span><span class="op" id="4929234">)</span><span class="op" id="4929235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929239">if</span>&nbsp;<span class="ident" id="4929242">id</span>&nbsp;<span class="op" id="4929245">&gt;=</span>&nbsp;<span class="num" id="4929248">0</span>&nbsp;<span class="op" id="4929250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929255">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929276">return</span>&nbsp;<span class="ident" id="4929283">id</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929288">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929292">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929332">dec</span><span class="op" id="4929335">.</span><span class="ident" id="4929336">recvType</span><span class="op" id="4929344">(</span><span class="op" id="4929345">-</span><span class="ident" id="4929346">id</span><span class="op" id="4929348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929352">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929413">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929471">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929531">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929570">if</span>&nbsp;<span class="ident" id="4929573">dec</span><span class="op" id="4929576">.</span><span class="ident" id="4929577">buf</span><span class="op" id="4929580">.</span><span class="ident" id="4929581">Len</span><span class="op" id="4929584">(</span><span class="op" id="4929585">)</span>&nbsp;<span class="op" id="4929587">&gt;</span>&nbsp;<span class="num" id="4929589">0</span>&nbsp;<span class="op" id="4929591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929596">if</span>&nbsp;<span class="op" id="4929599">!</span><span class="ident" id="4929600">isInterface</span>&nbsp;<span class="op" id="4929612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929618">dec</span><span class="op" id="4929621">.</span><span class="ident" id="4929622">err</span>&nbsp;<span class="op" id="4929626">=</span>&nbsp;<span class="ident" id="4929628">errors</span><span class="op" id="4929634">.</span><span class="ident" id="4929635">New</span><span class="op" id="4929638">(</span><span class="string" id="4929639">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="4929661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929667">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929681">dec</span><span class="op" id="4929684">.</span><span class="ident" id="4929685">nextUint</span><span class="op" id="4929693">(</span><span class="op" id="4929694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929704">return</span>&nbsp;<span class="op" id="4929711">-</span><span class="num" id="4929712">1</span><br>
<span class="lineno">165</span><span class="op" id="4929714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4929717">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="4929781">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4929841">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="4929897">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4929948">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="4929997">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4930050">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4930072">func</span>&nbsp;<span class="op" id="4930077">(</span><span class="ident" id="4930078">dec</span>&nbsp;<span class="op" id="4930082">*</span><span class="ident" id="4930083">Decoder</span><span class="op" id="4930090">)</span>&nbsp;<span class="ident" id="4930092">Decode</span><span class="op" id="4930098">(</span><span class="ident" id="4930099">e</span>&nbsp;<span class="keyword" id="4930101">interface</span><span class="op" id="4930110">{</span><span class="op" id="4930111">}</span><span class="op" id="4930112">)</span>&nbsp;<span class="builtintype" id="4930114">error</span>&nbsp;<span class="op" id="4930120">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930123">if</span>&nbsp;<span class="ident" id="4930126">e</span>&nbsp;<span class="op" id="4930128">==</span>&nbsp;<span class="ident" id="4930131">nil</span>&nbsp;<span class="op" id="4930135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930139">return</span>&nbsp;<span class="ident" id="4930146">dec</span><span class="op" id="4930149">.</span><span class="ident" id="4930150">DecodeValue</span><span class="op" id="4930161">(</span><span class="ident" id="4930162">reflect</span><span class="op" id="4930169">.</span><span class="ident" id="4930170">Value</span><span class="op" id="4930175">{</span><span class="op" id="4930176">}</span><span class="op" id="4930177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930183">value</span>&nbsp;<span class="op" id="4930189">:=</span>&nbsp;<span class="ident" id="4930192">reflect</span><span class="op" id="4930199">.</span><span class="ident" id="4930200">ValueOf</span><span class="op" id="4930207">(</span><span class="ident" id="4930208">e</span><span class="op" id="4930209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930212">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930282">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930337">if</span>&nbsp;<span class="ident" id="4930340">value</span><span class="op" id="4930345">.</span><span class="ident" id="4930346">Type</span><span class="op" id="4930350">(</span><span class="op" id="4930351">)</span><span class="op" id="4930352">.</span><span class="ident" id="4930353">Kind</span><span class="op" id="4930357">(</span><span class="op" id="4930358">)</span>&nbsp;<span class="op" id="4930360">!=</span>&nbsp;<span class="ident" id="4930363">reflect</span><span class="op" id="4930370">.</span><span class="ident" id="4930371">Ptr</span>&nbsp;<span class="op" id="4930375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930379">dec</span><span class="op" id="4930382">.</span><span class="ident" id="4930383">err</span>&nbsp;<span class="op" id="4930387">=</span>&nbsp;<span class="ident" id="4930389">errors</span><span class="op" id="4930395">.</span><span class="ident" id="4930396">New</span><span class="op" id="4930399">(</span><span class="string" id="4930400">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="4930443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930447">return</span>&nbsp;<span class="ident" id="4930454">dec</span><span class="op" id="4930457">.</span><span class="ident" id="4930458">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930463">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930466">return</span>&nbsp;<span class="ident" id="4930473">dec</span><span class="op" id="4930476">.</span><span class="ident" id="4930477">DecodeValue</span><span class="op" id="4930488">(</span><span class="ident" id="4930489">value</span><span class="op" id="4930494">)</span><br>
<span class="lineno"></span><span class="op" id="4930496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4930499">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="4930558">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="4930647">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="4930721">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="4930797">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4930855">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="4930877">func</span>&nbsp;<span class="op" id="4930882">(</span><span class="ident" id="4930883">dec</span>&nbsp;<span class="op" id="4930887">*</span><span class="ident" id="4930888">Decoder</span><span class="op" id="4930895">)</span>&nbsp;<span class="ident" id="4930897">DecodeValue</span><span class="op" id="4930908">(</span><span class="ident" id="4930909">v</span>&nbsp;<span class="ident" id="4930911">reflect</span><span class="op" id="4930918">.</span><span class="ident" id="4930919">Value</span><span class="op" id="4930924">)</span>&nbsp;<span class="builtintype" id="4930926">error</span>&nbsp;<span class="op" id="4930932">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930935">if</span>&nbsp;<span class="ident" id="4930938">v</span><span class="op" id="4930939">.</span><span class="ident" id="4930940">IsValid</span><span class="op" id="4930947">(</span><span class="op" id="4930948">)</span>&nbsp;<span class="op" id="4930950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930954">if</span>&nbsp;<span class="ident" id="4930957">v</span><span class="op" id="4930958">.</span><span class="ident" id="4930959">Kind</span><span class="op" id="4930963">(</span><span class="op" id="4930964">)</span>&nbsp;<span class="op" id="4930966">==</span>&nbsp;<span class="ident" id="4930969">reflect</span><span class="op" id="4930976">.</span><span class="ident" id="4930977">Ptr</span>&nbsp;<span class="op" id="4930981">&amp;&amp;</span>&nbsp;<span class="op" id="4930984">!</span><span class="ident" id="4930985">v</span><span class="op" id="4930986">.</span><span class="ident" id="4930987">IsNil</span><span class="op" id="4930992">(</span><span class="op" id="4930993">)</span>&nbsp;<span class="op" id="4930995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4931000">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931051">}</span>&nbsp;<span class="keyword" id="4931053">else</span>&nbsp;<span class="keyword" id="4931058">if</span>&nbsp;<span class="op" id="4931061">!</span><span class="ident" id="4931062">v</span><span class="op" id="4931063">.</span><span class="ident" id="4931064">CanSet</span><span class="op" id="4931070">(</span><span class="op" id="4931071">)</span>&nbsp;<span class="op" id="4931073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931078">return</span>&nbsp;<span class="ident" id="4931085">errors</span><span class="op" id="4931091">.</span><span class="ident" id="4931092">New</span><span class="op" id="4931095">(</span><span class="string" id="4931096">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="4931136">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4931146">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931196">dec</span><span class="op" id="4931199">.</span><span class="ident" id="4931200">mutex</span><span class="op" id="4931205">.</span><span class="ident" id="4931206">Lock</span><span class="op" id="4931210">(</span><span class="op" id="4931211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931214">defer</span>&nbsp;<span class="ident" id="4931220">dec</span><span class="op" id="4931223">.</span><span class="ident" id="4931224">mutex</span><span class="op" id="4931229">.</span><span class="ident" id="4931230">Unlock</span><span class="op" id="4931236">(</span><span class="op" id="4931237">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931241">dec</span><span class="op" id="4931244">.</span><span class="ident" id="4931245">buf</span><span class="op" id="4931248">.</span><span class="ident" id="4931249">Reset</span><span class="op" id="4931254">(</span><span class="op" id="4931255">)</span>&nbsp;<span class="comment" id="4931257">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931308">dec</span><span class="op" id="4931311">.</span><span class="ident" id="4931312">err</span>&nbsp;<span class="op" id="4931316">=</span>&nbsp;<span class="ident" id="4931318">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931323">id</span>&nbsp;<span class="op" id="4931326">:=</span>&nbsp;<span class="ident" id="4931329">dec</span><span class="op" id="4931332">.</span><span class="ident" id="4931333">decodeTypeSequence</span><span class="op" id="4931351">(</span><span class="builtintype" id="4931352">false</span><span class="op" id="4931357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931360">if</span>&nbsp;<span class="ident" id="4931363">dec</span><span class="op" id="4931366">.</span><span class="ident" id="4931367">err</span>&nbsp;<span class="op" id="4931371">==</span>&nbsp;<span class="ident" id="4931374">nil</span>&nbsp;<span class="op" id="4931378">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931382">dec</span><span class="op" id="4931385">.</span><span class="ident" id="4931386">decodeValue</span><span class="op" id="4931397">(</span><span class="ident" id="4931398">id</span><span class="op" id="4931400">,</span>&nbsp;<span class="ident" id="4931402">v</span><span class="op" id="4931403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931409">return</span>&nbsp;<span class="ident" id="4931416">dec</span><span class="op" id="4931419">.</span><span class="ident" id="4931420">err</span><br>
<span class="lineno"></span><span class="op" id="4931424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="4931427">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="4931507">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="4931592">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4931616">var</span>&nbsp;<span class="ident" id="4931620">debugFunc</span>&nbsp;<span class="keyword" id="4931630">func</span><span class="op" id="4931634">(</span><span class="ident" id="4931635">io</span><span class="op" id="4931637">.</span><span class="ident" id="4931638">Reader</span><span class="op" id="4931644">)</span>
</div>
</body>
</html>
