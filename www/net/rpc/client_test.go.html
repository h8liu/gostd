<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8352746">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8352801">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8352855">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8352906">package</span>&nbsp;<span class="ident" id="8352914">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8352919">import</span>&nbsp;<span class="op" id="8352926">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352929">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352939">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352946">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352953">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352964">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352975">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8352985">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8352988">type</span>&nbsp;<span class="ident" id="8352993">shutdownCodec</span>&nbsp;<span class="keyword" id="8353007">struct</span>&nbsp;<span class="op" id="8353014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353017">responded</span>&nbsp;<span class="keyword" id="8353027">chan</span>&nbsp;<span class="builtintype" id="8353032">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353037">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8353047">bool</span><br>
<span class="lineno"></span><span class="op" id="8353052">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8353055">func</span>&nbsp;<span class="op" id="8353060">(</span><span class="ident" id="8353061">c</span>&nbsp;<span class="op" id="8353063">*</span><span class="ident" id="8353064">shutdownCodec</span><span class="op" id="8353077">)</span>&nbsp;<span class="ident" id="8353079">WriteRequest</span><span class="op" id="8353091">(</span><span class="op" id="8353092">*</span><span class="ident" id="8353093">Request</span><span class="op" id="8353100">,</span>&nbsp;<span class="keyword" id="8353102">interface</span><span class="op" id="8353111">{</span><span class="op" id="8353112">}</span><span class="op" id="8353113">)</span>&nbsp;<span class="builtintype" id="8353115">error</span>&nbsp;<span class="op" id="8353121">{</span>&nbsp;<span class="keyword" id="8353123">return</span>&nbsp;<span class="ident" id="8353130">nil</span>&nbsp;<span class="op" id="8353134">}</span><br>
<span class="lineno"></span><span class="keyword" id="8353136">func</span>&nbsp;<span class="op" id="8353141">(</span><span class="ident" id="8353142">c</span>&nbsp;<span class="op" id="8353144">*</span><span class="ident" id="8353145">shutdownCodec</span><span class="op" id="8353158">)</span>&nbsp;<span class="ident" id="8353160">ReadResponseBody</span><span class="op" id="8353176">(</span><span class="keyword" id="8353177">interface</span><span class="op" id="8353186">{</span><span class="op" id="8353187">}</span><span class="op" id="8353188">)</span>&nbsp;<span class="builtintype" id="8353190">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8353202">{</span>&nbsp;<span class="keyword" id="8353204">return</span>&nbsp;<span class="ident" id="8353211">nil</span>&nbsp;<span class="op" id="8353215">}</span><br>
<span class="lineno"></span><span class="keyword" id="8353217">func</span>&nbsp;<span class="op" id="8353222">(</span><span class="ident" id="8353223">c</span>&nbsp;<span class="op" id="8353225">*</span><span class="ident" id="8353226">shutdownCodec</span><span class="op" id="8353239">)</span>&nbsp;<span class="ident" id="8353241">ReadResponseHeader</span><span class="op" id="8353259">(</span><span class="op" id="8353260">*</span><span class="ident" id="8353261">Response</span><span class="op" id="8353269">)</span>&nbsp;<span class="builtintype" id="8353271">error</span>&nbsp;<span class="op" id="8353277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353280">c</span><span class="op" id="8353281">.</span><span class="ident" id="8353282">responded</span>&nbsp;<span class="op" id="8353292">&lt;-</span>&nbsp;<span class="num" id="8353295">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353298">return</span>&nbsp;<span class="ident" id="8353305">errors</span><span class="op" id="8353311">.</span><span class="ident" id="8353312">New</span><span class="op" id="8353315">(</span><span class="string" id="8353316">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="8353350">)</span><br>
<span class="lineno"></span><span class="op" id="8353352">}</span><br>
<span class="lineno"></span><span class="keyword" id="8353354">func</span>&nbsp;<span class="op" id="8353359">(</span><span class="ident" id="8353360">c</span>&nbsp;<span class="op" id="8353362">*</span><span class="ident" id="8353363">shutdownCodec</span><span class="op" id="8353376">)</span>&nbsp;<span class="ident" id="8353378">Close</span><span class="op" id="8353383">(</span><span class="op" id="8353384">)</span>&nbsp;<span class="builtintype" id="8353386">error</span>&nbsp;<span class="op" id="8353392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353395">c</span><span class="op" id="8353396">.</span><span class="ident" id="8353397">closed</span>&nbsp;<span class="op" id="8353404">=</span>&nbsp;<span class="ident" id="8353406">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353412">return</span>&nbsp;<span class="ident" id="8353419">nil</span><br>
<span class="lineno">30</span><span class="op" id="8353423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8353426">func</span>&nbsp;<span class="ident" id="8353431">TestCloseCodec</span><span class="op" id="8353445">(</span><span class="ident" id="8353446">t</span>&nbsp;<span class="op" id="8353448">*</span><span class="ident" id="8353449">testing</span><span class="op" id="8353456">.</span><span class="ident" id="8353457">T</span><span class="op" id="8353458">)</span>&nbsp;<span class="op" id="8353460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353463">codec</span>&nbsp;<span class="op" id="8353469">:=</span>&nbsp;<span class="op" id="8353472">&amp;</span><span class="ident" id="8353473">shutdownCodec</span><span class="op" id="8353486">{</span><span class="ident" id="8353487">responded</span><span class="op" id="8353496">:</span>&nbsp;<span class="builtinfunc" id="8353498">make</span><span class="op" id="8353502">(</span><span class="keyword" id="8353503">chan</span>&nbsp;<span class="builtintype" id="8353508">int</span><span class="op" id="8353511">)</span><span class="op" id="8353512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353515">client</span>&nbsp;<span class="op" id="8353522">:=</span>&nbsp;<span class="ident" id="8353525">NewClientWithCodec</span><span class="op" id="8353543">(</span><span class="ident" id="8353544">codec</span><span class="op" id="8353549">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353552">&lt;-</span><span class="ident" id="8353554">codec</span><span class="op" id="8353559">.</span><span class="ident" id="8353560">responded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353571">client</span><span class="op" id="8353577">.</span><span class="ident" id="8353578">Close</span><span class="op" id="8353583">(</span><span class="op" id="8353584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353587">if</span>&nbsp;<span class="op" id="8353590">!</span><span class="ident" id="8353591">codec</span><span class="op" id="8353596">.</span><span class="ident" id="8353597">closed</span>&nbsp;<span class="op" id="8353604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353608">t</span><span class="op" id="8353609">.</span><span class="ident" id="8353610">Error</span><span class="op" id="8353615">(</span><span class="string" id="8353616">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="8353650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353653">}</span><br>
<span class="lineno">40</span><span class="op" id="8353655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8353658">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8353724">type</span>&nbsp;<span class="ident" id="8353729">R</span>&nbsp;<span class="keyword" id="8353731">struct</span>&nbsp;<span class="op" id="8353738">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353741">msg</span>&nbsp;<span class="op" id="8353745">[</span><span class="op" id="8353746">]</span><span class="builtintype" id="8353747">byte</span>&nbsp;<span class="comment" id="8353752">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="8353798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8353801">type</span>&nbsp;<span class="ident" id="8353806">S</span>&nbsp;<span class="keyword" id="8353808">struct</span><span class="op" id="8353814">{</span><span class="op" id="8353815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="8353818">func</span>&nbsp;<span class="op" id="8353823">(</span><span class="ident" id="8353824">s</span>&nbsp;<span class="op" id="8353826">*</span><span class="ident" id="8353827">S</span><span class="op" id="8353828">)</span>&nbsp;<span class="ident" id="8353830">Recv</span><span class="op" id="8353834">(</span><span class="ident" id="8353835">nul</span>&nbsp;<span class="op" id="8353839">*</span><span class="keyword" id="8353840">struct</span><span class="op" id="8353846">{</span><span class="op" id="8353847">}</span><span class="op" id="8353848">,</span>&nbsp;<span class="ident" id="8353850">reply</span>&nbsp;<span class="op" id="8353856">*</span><span class="ident" id="8353857">R</span><span class="op" id="8353858">)</span>&nbsp;<span class="builtintype" id="8353860">error</span>&nbsp;<span class="op" id="8353866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353869">*</span><span class="ident" id="8353870">reply</span>&nbsp;<span class="op" id="8353876">=</span>&nbsp;<span class="ident" id="8353878">R</span><span class="op" id="8353879">{</span><span class="op" id="8353880">[</span><span class="op" id="8353881">]</span><span class="builtintype" id="8353882">byte</span><span class="op" id="8353886">(</span><span class="string" id="8353887">&#34;foo&#34;</span><span class="op" id="8353892">)</span><span class="op" id="8353893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353896">return</span>&nbsp;<span class="ident" id="8353903">nil</span><br>
<span class="lineno"></span><span class="op" id="8353907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="8353910">func</span>&nbsp;<span class="ident" id="8353915">TestGobError</span><span class="op" id="8353927">(</span><span class="ident" id="8353928">t</span>&nbsp;<span class="op" id="8353930">*</span><span class="ident" id="8353931">testing</span><span class="op" id="8353938">.</span><span class="ident" id="8353939">T</span><span class="op" id="8353940">)</span>&nbsp;<span class="op" id="8353942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353945">if</span>&nbsp;<span class="ident" id="8353948">runtime</span><span class="op" id="8353955">.</span><span class="ident" id="8353956">GOOS</span>&nbsp;<span class="op" id="8353961">==</span>&nbsp;<span class="string" id="8353964">&#34;plan9&#34;</span>&nbsp;<span class="op" id="8353972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353976">t</span><span class="op" id="8353977">.</span><span class="ident" id="8353978">Skip</span><span class="op" id="8353982">(</span><span class="string" id="8353983">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="8354032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354038">defer</span>&nbsp;<span class="keyword" id="8354044">func</span><span class="op" id="8354048">(</span><span class="op" id="8354049">)</span>&nbsp;<span class="op" id="8354051">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354055">err</span>&nbsp;<span class="op" id="8354059">:=</span>&nbsp;<span class="builtinfunc" id="8354062">recover</span><span class="op" id="8354069">(</span><span class="op" id="8354070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354074">if</span>&nbsp;<span class="ident" id="8354077">err</span>&nbsp;<span class="op" id="8354081">==</span>&nbsp;<span class="ident" id="8354084">nil</span>&nbsp;<span class="op" id="8354088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354093">t</span><span class="op" id="8354094">.</span><span class="ident" id="8354095">Fatal</span><span class="op" id="8354100">(</span><span class="string" id="8354101">&#34;no&nbsp;error&#34;</span><span class="op" id="8354111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354119">if</span>&nbsp;<span class="op" id="8354122">!</span><span class="ident" id="8354123">strings</span><span class="op" id="8354130">.</span><span class="ident" id="8354131">Contains</span><span class="op" id="8354139">(</span><span class="string" id="8354140">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="8354158">,</span>&nbsp;<span class="ident" id="8354160">err</span><span class="op" id="8354163">.</span><span class="op" id="8354164">(</span><span class="builtintype" id="8354165">error</span><span class="op" id="8354170">)</span><span class="op" id="8354171">.</span><span class="ident" id="8354172">Error</span><span class="op" id="8354177">(</span><span class="op" id="8354178">)</span><span class="op" id="8354179">)</span>&nbsp;<span class="op" id="8354181">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354186">t</span><span class="op" id="8354187">.</span><span class="ident" id="8354188">Fatal</span><span class="op" id="8354193">(</span><span class="string" id="8354194">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="8354228">,</span>&nbsp;<span class="ident" id="8354230">err</span><span class="op" id="8354233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354240">}</span><span class="op" id="8354241">(</span><span class="op" id="8354242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354245">Register</span><span class="op" id="8354253">(</span><span class="builtinfunc" id="8354254">new</span><span class="op" id="8354257">(</span><span class="ident" id="8354258">S</span><span class="op" id="8354259">)</span><span class="op" id="8354260">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354264">listen</span><span class="op" id="8354270">,</span>&nbsp;<span class="ident" id="8354272">err</span>&nbsp;<span class="op" id="8354276">:=</span>&nbsp;<span class="ident" id="8354279">net</span><span class="op" id="8354282">.</span><span class="ident" id="8354283">Listen</span><span class="op" id="8354289">(</span><span class="string" id="8354290">&#34;tcp&#34;</span><span class="op" id="8354295">,</span>&nbsp;<span class="string" id="8354297">&#34;127.0.0.1:0&#34;</span><span class="op" id="8354310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354313">if</span>&nbsp;<span class="ident" id="8354316">err</span>&nbsp;<span class="op" id="8354320">!=</span>&nbsp;<span class="ident" id="8354323">nil</span>&nbsp;<span class="op" id="8354327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8354331">panic</span><span class="op" id="8354336">(</span><span class="ident" id="8354337">err</span><span class="op" id="8354340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354346">go</span>&nbsp;<span class="ident" id="8354349">Accept</span><span class="op" id="8354355">(</span><span class="ident" id="8354356">listen</span><span class="op" id="8354362">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354366">client</span><span class="op" id="8354372">,</span>&nbsp;<span class="ident" id="8354374">err</span>&nbsp;<span class="op" id="8354378">:=</span>&nbsp;<span class="ident" id="8354381">Dial</span><span class="op" id="8354385">(</span><span class="string" id="8354386">&#34;tcp&#34;</span><span class="op" id="8354391">,</span>&nbsp;<span class="ident" id="8354393">listen</span><span class="op" id="8354399">.</span><span class="ident" id="8354400">Addr</span><span class="op" id="8354404">(</span><span class="op" id="8354405">)</span><span class="op" id="8354406">.</span><span class="ident" id="8354407">String</span><span class="op" id="8354413">(</span><span class="op" id="8354414">)</span><span class="op" id="8354415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354418">if</span>&nbsp;<span class="ident" id="8354421">err</span>&nbsp;<span class="op" id="8354425">!=</span>&nbsp;<span class="ident" id="8354428">nil</span>&nbsp;<span class="op" id="8354432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8354436">panic</span><span class="op" id="8354441">(</span><span class="ident" id="8354442">err</span><span class="op" id="8354445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354448">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354452">var</span>&nbsp;<span class="ident" id="8354456">reply</span>&nbsp;<span class="ident" id="8354462">Reply</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354469">err</span>&nbsp;<span class="op" id="8354473">=</span>&nbsp;<span class="ident" id="8354475">client</span><span class="op" id="8354481">.</span><span class="ident" id="8354482">Call</span><span class="op" id="8354486">(</span><span class="string" id="8354487">&#34;S.Recv&#34;</span><span class="op" id="8354495">,</span>&nbsp;<span class="op" id="8354497">&amp;</span><span class="keyword" id="8354498">struct</span><span class="op" id="8354504">{</span><span class="op" id="8354505">}</span><span class="op" id="8354506">{</span><span class="op" id="8354507">}</span><span class="op" id="8354508">,</span>&nbsp;<span class="op" id="8354510">&amp;</span><span class="ident" id="8354511">reply</span><span class="op" id="8354516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354519">if</span>&nbsp;<span class="ident" id="8354522">err</span>&nbsp;<span class="op" id="8354526">!=</span>&nbsp;<span class="ident" id="8354529">nil</span>&nbsp;<span class="op" id="8354533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8354537">panic</span><span class="op" id="8354542">(</span><span class="ident" id="8354543">err</span><span class="op" id="8354546">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354553">fmt</span><span class="op" id="8354556">.</span><span class="ident" id="8354557">Printf</span><span class="op" id="8354563">(</span><span class="string" id="8354564">&#34;%#v\n&#34;</span><span class="op" id="8354571">,</span>&nbsp;<span class="ident" id="8354573">reply</span><span class="op" id="8354578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354581">client</span><span class="op" id="8354587">.</span><span class="ident" id="8354588">Close</span><span class="op" id="8354593">(</span><span class="op" id="8354594">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354598">listen</span><span class="op" id="8354604">.</span><span class="ident" id="8354605">Close</span><span class="op" id="8354610">(</span><span class="op" id="8354611">)</span><br>
<span class="lineno"></span><span class="op" id="8354613">}</span>
</div>
</body>
</html>
