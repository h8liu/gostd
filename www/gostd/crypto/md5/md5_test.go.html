<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/md5</h2>
<ul>
<li><a href="/gostd/crypto/md5/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/md5/md5.go.html">md5.go</a></li>
<li><a href="/gostd/crypto/md5/md5_test.go.html" class="current">md5_test.go</a></li>
<li><a href="/gostd/crypto/md5/md5block.go.html">md5block.go</a></li>
<li><a href="/gostd/crypto/md5/md5block_decl.go.html">md5block_decl.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7219564">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7219619">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7219673">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7219724">package</span>&nbsp;<span class="ident" id="7219732">md5</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7219737">import</span>&nbsp;<span class="op" id="7219744">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7219747">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7219762">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7219769">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7219775">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7219786">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="7219795">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7219798">type</span>&nbsp;<span class="ident" id="7219803">md5Test</span>&nbsp;<span class="keyword" id="7219811">struct</span>&nbsp;<span class="op" id="7219818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7219821">out</span>&nbsp;<span class="builtintype" id="7219825">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7219833">in</span>&nbsp;&nbsp;<span class="builtintype" id="7219837">string</span><br>
<span class="lineno"></span><span class="op" id="7219844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7219847">var</span>&nbsp;<span class="ident" id="7219851">golden</span>&nbsp;<span class="op" id="7219858">=</span>&nbsp;<span class="op" id="7219860">[</span><span class="op" id="7219861">]</span><span class="ident" id="7219862">md5Test</span><span class="op" id="7219869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7219872">{</span><span class="string" id="7219873">&#34;d41d8cd98f00b204e9800998ecf8427e&#34;</span><span class="op" id="7219907">,</span>&nbsp;<span class="string" id="7219909">&#34;&#34;</span><span class="op" id="7219911">}</span><span class="op" id="7219912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7219915">{</span><span class="string" id="7219916">&#34;0cc175b9c0f1b6a831c399e269772661&#34;</span><span class="op" id="7219950">,</span>&nbsp;<span class="string" id="7219952">&#34;a&#34;</span><span class="op" id="7219955">}</span><span class="op" id="7219956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7219959">{</span><span class="string" id="7219960">&#34;187ef4436122d1cc2f40dc2b92f0eba0&#34;</span><span class="op" id="7219994">,</span>&nbsp;<span class="string" id="7219996">&#34;ab&#34;</span><span class="op" id="7220000">}</span><span class="op" id="7220001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220004">{</span><span class="string" id="7220005">&#34;900150983cd24fb0d6963f7d28e17f72&#34;</span><span class="op" id="7220039">,</span>&nbsp;<span class="string" id="7220041">&#34;abc&#34;</span><span class="op" id="7220046">}</span><span class="op" id="7220047">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220050">{</span><span class="string" id="7220051">&#34;e2fc714c4727ee9395f324cd2e7f331f&#34;</span><span class="op" id="7220085">,</span>&nbsp;<span class="string" id="7220087">&#34;abcd&#34;</span><span class="op" id="7220093">}</span><span class="op" id="7220094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220097">{</span><span class="string" id="7220098">&#34;ab56b4d92b40713acc5af89985d4b786&#34;</span><span class="op" id="7220132">,</span>&nbsp;<span class="string" id="7220134">&#34;abcde&#34;</span><span class="op" id="7220141">}</span><span class="op" id="7220142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220145">{</span><span class="string" id="7220146">&#34;e80b5017098950fc58aad83c8c14978e&#34;</span><span class="op" id="7220180">,</span>&nbsp;<span class="string" id="7220182">&#34;abcdef&#34;</span><span class="op" id="7220190">}</span><span class="op" id="7220191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220194">{</span><span class="string" id="7220195">&#34;7ac66c0f148de9519b8bd264312c4d64&#34;</span><span class="op" id="7220229">,</span>&nbsp;<span class="string" id="7220231">&#34;abcdefg&#34;</span><span class="op" id="7220240">}</span><span class="op" id="7220241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220244">{</span><span class="string" id="7220245">&#34;e8dc4081b13434b45189a720b77b6818&#34;</span><span class="op" id="7220279">,</span>&nbsp;<span class="string" id="7220281">&#34;abcdefgh&#34;</span><span class="op" id="7220291">}</span><span class="op" id="7220292">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220295">{</span><span class="string" id="7220296">&#34;8aa99b1f439ff71293e95357bac6fd94&#34;</span><span class="op" id="7220330">,</span>&nbsp;<span class="string" id="7220332">&#34;abcdefghi&#34;</span><span class="op" id="7220343">}</span><span class="op" id="7220344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220347">{</span><span class="string" id="7220348">&#34;a925576942e94b2ef57a066101b48876&#34;</span><span class="op" id="7220382">,</span>&nbsp;<span class="string" id="7220384">&#34;abcdefghij&#34;</span><span class="op" id="7220396">}</span><span class="op" id="7220397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220400">{</span><span class="string" id="7220401">&#34;d747fc1719c7eacb84058196cfe56d57&#34;</span><span class="op" id="7220435">,</span>&nbsp;<span class="string" id="7220437">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="7220480">}</span><span class="op" id="7220481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220484">{</span><span class="string" id="7220485">&#34;bff2dcb37ef3a44ba43ab144768ca837&#34;</span><span class="op" id="7220519">,</span>&nbsp;<span class="string" id="7220521">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="7220580">}</span><span class="op" id="7220581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220584">{</span><span class="string" id="7220585">&#34;0441015ecb54a7342d017ed1bcfdbea5&#34;</span><span class="op" id="7220619">,</span>&nbsp;<span class="string" id="7220621">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="7220665">}</span><span class="op" id="7220666">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220669">{</span><span class="string" id="7220670">&#34;9e3cac8e9e9757a60c3ea391130d3689&#34;</span><span class="op" id="7220704">,</span>&nbsp;<span class="string" id="7220706">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="7220765">}</span><span class="op" id="7220766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220769">{</span><span class="string" id="7220770">&#34;a0f04459b031f916a59a35cc482dc039&#34;</span><span class="op" id="7220804">,</span>&nbsp;<span class="string" id="7220806">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="7220866">}</span><span class="op" id="7220867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220870">{</span><span class="string" id="7220871">&#34;e7a48e0fe884faf31475d2a04b1362cc&#34;</span><span class="op" id="7220905">,</span>&nbsp;<span class="string" id="7220907">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="7220936">}</span><span class="op" id="7220937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7220940">{</span><span class="string" id="7220941">&#34;637d2fe925c07c113800509964fb0e06&#34;</span><span class="op" id="7220975">,</span>&nbsp;<span class="string" id="7220977">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="7221046">}</span><span class="op" id="7221047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221050">{</span><span class="string" id="7221051">&#34;834a8d18d5c6562119cf4c7f5086cb71&#34;</span><span class="op" id="7221085">,</span>&nbsp;<span class="string" id="7221087">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="7221146">}</span><span class="op" id="7221147">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221150">{</span><span class="string" id="7221151">&#34;de3a4d2fd6c73ec2db2abad23b444281&#34;</span><span class="op" id="7221185">,</span>&nbsp;<span class="string" id="7221187">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="7221277">}</span><span class="op" id="7221278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221281">{</span><span class="string" id="7221282">&#34;acf203f997e2cf74ea3aff86985aefaf&#34;</span><span class="op" id="7221316">,</span>&nbsp;<span class="string" id="7221318">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="7221395">}</span><span class="op" id="7221396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221399">{</span><span class="string" id="7221400">&#34;e1c1384cb4d2221dfdd7c795a4222c9a&#34;</span><span class="op" id="7221434">,</span>&nbsp;<span class="string" id="7221436">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="7221462">}</span><span class="op" id="7221463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221466">{</span><span class="string" id="7221467">&#34;c90f3ddecc54f34228c063d7525bf644&#34;</span><span class="op" id="7221501">,</span>&nbsp;<span class="string" id="7221503">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="7221554">}</span><span class="op" id="7221555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221558">{</span><span class="string" id="7221559">&#34;cdf7ab6c1fd49bd9933c43f3ea5af185&#34;</span><span class="op" id="7221593">,</span>&nbsp;<span class="string" id="7221595">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="7221669">}</span><span class="op" id="7221670">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221673">{</span><span class="string" id="7221674">&#34;83bc85234942fc883c063cbd7f0ad5d0&#34;</span><span class="op" id="7221708">,</span>&nbsp;<span class="string" id="7221710">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="7221758">}</span><span class="op" id="7221759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221762">{</span><span class="string" id="7221763">&#34;277cbe255686b48dd7e8f389394d9299&#34;</span><span class="op" id="7221797">,</span>&nbsp;<span class="string" id="7221799">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="7221871">}</span><span class="op" id="7221872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221875">{</span><span class="string" id="7221876">&#34;fd3fb0a7ffb8af16603f3d3af98f8e1f&#34;</span><span class="op" id="7221910">,</span>&nbsp;<span class="string" id="7221912">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="7221982">}</span><span class="op" id="7221983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7221986">{</span><span class="string" id="7221987">&#34;469b13a78ebf297ecda64d4723655154&#34;</span><span class="op" id="7222021">,</span>&nbsp;<span class="string" id="7222023">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="7222057">}</span><span class="op" id="7222058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7222061">{</span><span class="string" id="7222062">&#34;63eb3a2f466410104731c4b037600110&#34;</span><span class="op" id="7222096">,</span>&nbsp;<span class="string" id="7222098">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="7222188">}</span><span class="op" id="7222189">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7222192">{</span><span class="string" id="7222193">&#34;72c2ed7592debca1c90fc0100f931a2f&#34;</span><span class="op" id="7222227">,</span>&nbsp;<span class="string" id="7222229">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="7222363">}</span><span class="op" id="7222364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7222367">{</span><span class="string" id="7222368">&#34;132f7619d33b523b1d9e5bd8e0928355&#34;</span><span class="op" id="7222402">,</span>&nbsp;<span class="string" id="7222404">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="7222462">}</span><span class="op" id="7222463">,</span><br>
<span class="lineno"></span><span class="op" id="7222465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7222468">func</span>&nbsp;<span class="ident" id="7222473">TestGolden</span><span class="op" id="7222483">(</span><span class="ident" id="7222484">t</span>&nbsp;<span class="op" id="7222486">*</span><span class="ident" id="7222487">testing</span><span class="op" id="7222494">.</span><span class="ident" id="7222495">T</span><span class="op" id="7222496">)</span>&nbsp;<span class="op" id="7222498">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7222501">for</span>&nbsp;<span class="ident" id="7222505">i</span>&nbsp;<span class="op" id="7222507">:=</span>&nbsp;<span class="num" id="7222510">0</span><span class="op" id="7222511">;</span>&nbsp;<span class="ident" id="7222513">i</span>&nbsp;<span class="op" id="7222515">&lt;</span>&nbsp;<span class="builtinfunc" id="7222517">len</span><span class="op" id="7222520">(</span><span class="ident" id="7222521">golden</span><span class="op" id="7222527">)</span><span class="op" id="7222528">;</span>&nbsp;<span class="ident" id="7222530">i</span><span class="op" id="7222531">++</span>&nbsp;<span class="op" id="7222534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222538">g</span>&nbsp;<span class="op" id="7222540">:=</span>&nbsp;<span class="ident" id="7222543">golden</span><span class="op" id="7222549">[</span><span class="ident" id="7222550">i</span><span class="op" id="7222551">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222555">s</span>&nbsp;<span class="op" id="7222557">:=</span>&nbsp;<span class="ident" id="7222560">fmt</span><span class="op" id="7222563">.</span><span class="ident" id="7222564">Sprintf</span><span class="op" id="7222571">(</span><span class="string" id="7222572">&#34;%x&#34;</span><span class="op" id="7222576">,</span>&nbsp;<span class="ident" id="7222578">Sum</span><span class="op" id="7222581">(</span><span class="op" id="7222582">[</span><span class="op" id="7222583">]</span><span class="builtintype" id="7222584">byte</span><span class="op" id="7222588">(</span><span class="ident" id="7222589">g</span><span class="op" id="7222590">.</span><span class="ident" id="7222591">in</span><span class="op" id="7222593">)</span><span class="op" id="7222594">)</span><span class="op" id="7222595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7222599">if</span>&nbsp;<span class="ident" id="7222602">s</span>&nbsp;<span class="op" id="7222604">!=</span>&nbsp;<span class="ident" id="7222607">g</span><span class="op" id="7222608">.</span><span class="ident" id="7222609">out</span>&nbsp;<span class="op" id="7222613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222618">t</span><span class="op" id="7222619">.</span><span class="ident" id="7222620">Fatalf</span><span class="op" id="7222626">(</span><span class="string" id="7222627">&#34;Sum&nbsp;function:&nbsp;md5(%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7222663">,</span>&nbsp;<span class="ident" id="7222665">g</span><span class="op" id="7222666">.</span><span class="ident" id="7222667">in</span><span class="op" id="7222669">,</span>&nbsp;<span class="ident" id="7222671">s</span><span class="op" id="7222672">,</span>&nbsp;<span class="ident" id="7222674">g</span><span class="op" id="7222675">.</span><span class="ident" id="7222676">out</span><span class="op" id="7222679">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7222683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222687">c</span>&nbsp;<span class="op" id="7222689">:=</span>&nbsp;<span class="ident" id="7222692">New</span><span class="op" id="7222695">(</span><span class="op" id="7222696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222700">buf</span>&nbsp;<span class="op" id="7222704">:=</span>&nbsp;<span class="builtinfunc" id="7222707">make</span><span class="op" id="7222711">(</span><span class="op" id="7222712">[</span><span class="op" id="7222713">]</span><span class="builtintype" id="7222714">byte</span><span class="op" id="7222718">,</span>&nbsp;<span class="builtinfunc" id="7222720">len</span><span class="op" id="7222723">(</span><span class="ident" id="7222724">g</span><span class="op" id="7222725">.</span><span class="ident" id="7222726">in</span><span class="op" id="7222728">)</span><span class="op" id="7222729">+</span><span class="num" id="7222730">4</span><span class="op" id="7222731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7222735">for</span>&nbsp;<span class="ident" id="7222739">j</span>&nbsp;<span class="op" id="7222741">:=</span>&nbsp;<span class="num" id="7222744">0</span><span class="op" id="7222745">;</span>&nbsp;<span class="ident" id="7222747">j</span>&nbsp;<span class="op" id="7222749">&lt;</span>&nbsp;<span class="num" id="7222751">3</span><span class="op" id="7222752">+</span><span class="num" id="7222753">4</span><span class="op" id="7222754">;</span>&nbsp;<span class="ident" id="7222756">j</span><span class="op" id="7222757">++</span>&nbsp;<span class="op" id="7222760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7222765">if</span>&nbsp;<span class="ident" id="7222768">j</span>&nbsp;<span class="op" id="7222770">&lt;</span>&nbsp;<span class="num" id="7222772">2</span>&nbsp;<span class="op" id="7222774">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222780">io</span><span class="op" id="7222782">.</span><span class="ident" id="7222783">WriteString</span><span class="op" id="7222794">(</span><span class="ident" id="7222795">c</span><span class="op" id="7222796">,</span>&nbsp;<span class="ident" id="7222798">g</span><span class="op" id="7222799">.</span><span class="ident" id="7222800">in</span><span class="op" id="7222802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7222807">}</span>&nbsp;<span class="keyword" id="7222809">else</span>&nbsp;<span class="keyword" id="7222814">if</span>&nbsp;<span class="ident" id="7222817">j</span>&nbsp;<span class="op" id="7222819">==</span>&nbsp;<span class="num" id="7222822">2</span>&nbsp;<span class="op" id="7222824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222830">io</span><span class="op" id="7222832">.</span><span class="ident" id="7222833">WriteString</span><span class="op" id="7222844">(</span><span class="ident" id="7222845">c</span><span class="op" id="7222846">,</span>&nbsp;<span class="ident" id="7222848">g</span><span class="op" id="7222849">.</span><span class="ident" id="7222850">in</span><span class="op" id="7222852">[</span><span class="num" id="7222853">0</span><span class="op" id="7222854">:</span><span class="builtinfunc" id="7222855">len</span><span class="op" id="7222858">(</span><span class="ident" id="7222859">g</span><span class="op" id="7222860">.</span><span class="ident" id="7222861">in</span><span class="op" id="7222863">)</span><span class="op" id="7222864">/</span><span class="num" id="7222865">2</span><span class="op" id="7222866">]</span><span class="op" id="7222867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222873">c</span><span class="op" id="7222874">.</span><span class="ident" id="7222875">Sum</span><span class="op" id="7222878">(</span><span class="ident" id="7222879">nil</span><span class="op" id="7222882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222888">io</span><span class="op" id="7222890">.</span><span class="ident" id="7222891">WriteString</span><span class="op" id="7222902">(</span><span class="ident" id="7222903">c</span><span class="op" id="7222904">,</span>&nbsp;<span class="ident" id="7222906">g</span><span class="op" id="7222907">.</span><span class="ident" id="7222908">in</span><span class="op" id="7222910">[</span><span class="builtinfunc" id="7222911">len</span><span class="op" id="7222914">(</span><span class="ident" id="7222915">g</span><span class="op" id="7222916">.</span><span class="ident" id="7222917">in</span><span class="op" id="7222919">)</span><span class="op" id="7222920">/</span><span class="num" id="7222921">2</span><span class="op" id="7222922">:</span><span class="op" id="7222923">]</span><span class="op" id="7222924">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7222929">}</span>&nbsp;<span class="keyword" id="7222931">else</span>&nbsp;<span class="keyword" id="7222936">if</span>&nbsp;<span class="ident" id="7222939">j</span>&nbsp;<span class="op" id="7222941">&gt;</span>&nbsp;<span class="num" id="7222943">2</span>&nbsp;<span class="op" id="7222945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7222951">//&nbsp;test&nbsp;unaligned&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7222979">buf</span>&nbsp;<span class="op" id="7222983">=</span>&nbsp;<span class="ident" id="7222985">buf</span><span class="op" id="7222988">[</span><span class="num" id="7222989">1</span><span class="op" id="7222990">:</span><span class="op" id="7222991">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7222997">copy</span><span class="op" id="7223001">(</span><span class="ident" id="7223002">buf</span><span class="op" id="7223005">,</span>&nbsp;<span class="ident" id="7223007">g</span><span class="op" id="7223008">.</span><span class="ident" id="7223009">in</span><span class="op" id="7223011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223017">c</span><span class="op" id="7223018">.</span><span class="ident" id="7223019">Write</span><span class="op" id="7223024">(</span><span class="ident" id="7223025">buf</span><span class="op" id="7223028">[</span><span class="op" id="7223029">:</span><span class="builtinfunc" id="7223030">len</span><span class="op" id="7223033">(</span><span class="ident" id="7223034">g</span><span class="op" id="7223035">.</span><span class="ident" id="7223036">in</span><span class="op" id="7223038">)</span><span class="op" id="7223039">]</span><span class="op" id="7223040">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223050">s</span>&nbsp;<span class="op" id="7223052">:=</span>&nbsp;<span class="ident" id="7223055">fmt</span><span class="op" id="7223058">.</span><span class="ident" id="7223059">Sprintf</span><span class="op" id="7223066">(</span><span class="string" id="7223067">&#34;%x&#34;</span><span class="op" id="7223071">,</span>&nbsp;<span class="ident" id="7223073">c</span><span class="op" id="7223074">.</span><span class="ident" id="7223075">Sum</span><span class="op" id="7223078">(</span><span class="ident" id="7223079">nil</span><span class="op" id="7223082">)</span><span class="op" id="7223083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7223088">if</span>&nbsp;<span class="ident" id="7223091">s</span>&nbsp;<span class="op" id="7223093">!=</span>&nbsp;<span class="ident" id="7223096">g</span><span class="op" id="7223097">.</span><span class="ident" id="7223098">out</span>&nbsp;<span class="op" id="7223102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223108">t</span><span class="op" id="7223109">.</span><span class="ident" id="7223110">Fatalf</span><span class="op" id="7223116">(</span><span class="string" id="7223117">&#34;md5[%d](%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7223143">,</span>&nbsp;<span class="ident" id="7223145">j</span><span class="op" id="7223146">,</span>&nbsp;<span class="ident" id="7223148">g</span><span class="op" id="7223149">.</span><span class="ident" id="7223150">in</span><span class="op" id="7223152">,</span>&nbsp;<span class="ident" id="7223154">s</span><span class="op" id="7223155">,</span>&nbsp;<span class="ident" id="7223157">g</span><span class="op" id="7223158">.</span><span class="ident" id="7223159">out</span><span class="op" id="7223162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223167">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223172">c</span><span class="op" id="7223173">.</span><span class="ident" id="7223174">Reset</span><span class="op" id="7223179">(</span><span class="op" id="7223180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223187">}</span><br>
<span class="lineno"></span><span class="op" id="7223189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="7223192">func</span>&nbsp;<span class="ident" id="7223197">TestLarge</span><span class="op" id="7223206">(</span><span class="ident" id="7223207">t</span>&nbsp;<span class="op" id="7223209">*</span><span class="ident" id="7223210">testing</span><span class="op" id="7223217">.</span><span class="ident" id="7223218">T</span><span class="op" id="7223219">)</span>&nbsp;<span class="op" id="7223221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7223224">const</span>&nbsp;<span class="ident" id="7223230">N</span>&nbsp;<span class="op" id="7223232">=</span>&nbsp;<span class="num" id="7223234">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223241">ok</span>&nbsp;<span class="op" id="7223244">:=</span>&nbsp;<span class="string" id="7223247">&#34;2bb571599a4180e1d542f76904adc3df&#34;</span>&nbsp;<span class="comment" id="7223282">//&nbsp;md5sum&nbsp;of&nbsp;&#34;0123456789&#34;&nbsp;*&nbsp;1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223316">block</span>&nbsp;<span class="op" id="7223322">:=</span>&nbsp;<span class="builtinfunc" id="7223325">make</span><span class="op" id="7223329">(</span><span class="op" id="7223330">[</span><span class="op" id="7223331">]</span><span class="builtintype" id="7223332">byte</span><span class="op" id="7223336">,</span>&nbsp;<span class="num" id="7223338">10004</span><span class="op" id="7223343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223346">c</span>&nbsp;<span class="op" id="7223348">:=</span>&nbsp;<span class="ident" id="7223351">New</span><span class="op" id="7223354">(</span><span class="op" id="7223355">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7223358">for</span>&nbsp;<span class="ident" id="7223362">offset</span>&nbsp;<span class="op" id="7223369">:=</span>&nbsp;<span class="num" id="7223372">0</span><span class="op" id="7223373">;</span>&nbsp;<span class="ident" id="7223375">offset</span>&nbsp;<span class="op" id="7223382">&lt;</span>&nbsp;<span class="num" id="7223384">4</span><span class="op" id="7223385">;</span>&nbsp;<span class="ident" id="7223387">offset</span><span class="op" id="7223393">++</span>&nbsp;<span class="op" id="7223396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7223400">for</span>&nbsp;<span class="ident" id="7223404">i</span>&nbsp;<span class="op" id="7223406">:=</span>&nbsp;<span class="num" id="7223409">0</span><span class="op" id="7223410">;</span>&nbsp;<span class="ident" id="7223412">i</span>&nbsp;<span class="op" id="7223414">&lt;</span>&nbsp;<span class="ident" id="7223416">N</span><span class="op" id="7223417">;</span>&nbsp;<span class="ident" id="7223419">i</span><span class="op" id="7223420">++</span>&nbsp;<span class="op" id="7223423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223428">block</span><span class="op" id="7223433">[</span><span class="ident" id="7223434">offset</span><span class="op" id="7223440">+</span><span class="ident" id="7223441">i</span><span class="op" id="7223442">]</span>&nbsp;<span class="op" id="7223444">=</span>&nbsp;<span class="string" id="7223446">&#39;0&#39;</span>&nbsp;<span class="op" id="7223450">+</span>&nbsp;<span class="builtintype" id="7223452">byte</span><span class="op" id="7223456">(</span><span class="ident" id="7223457">i</span><span class="op" id="7223458">%</span><span class="num" id="7223459">10</span><span class="op" id="7223461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7223469">for</span>&nbsp;<span class="ident" id="7223473">blockSize</span>&nbsp;<span class="op" id="7223483">:=</span>&nbsp;<span class="num" id="7223486">10</span><span class="op" id="7223488">;</span>&nbsp;<span class="ident" id="7223490">blockSize</span>&nbsp;<span class="op" id="7223500">&lt;=</span>&nbsp;<span class="ident" id="7223503">N</span><span class="op" id="7223504">;</span>&nbsp;<span class="ident" id="7223506">blockSize</span>&nbsp;<span class="op" id="7223516">*=</span>&nbsp;<span class="num" id="7223519">10</span>&nbsp;<span class="op" id="7223522">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223527">blocks</span>&nbsp;<span class="op" id="7223534">:=</span>&nbsp;<span class="ident" id="7223537">N</span>&nbsp;<span class="op" id="7223539">/</span>&nbsp;<span class="ident" id="7223541">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223554">b</span>&nbsp;<span class="op" id="7223556">:=</span>&nbsp;<span class="ident" id="7223559">block</span><span class="op" id="7223564">[</span><span class="ident" id="7223565">offset</span>&nbsp;<span class="op" id="7223572">:</span>&nbsp;<span class="ident" id="7223574">offset</span><span class="op" id="7223580">+</span><span class="ident" id="7223581">blockSize</span><span class="op" id="7223590">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223595">c</span><span class="op" id="7223596">.</span><span class="ident" id="7223597">Reset</span><span class="op" id="7223602">(</span><span class="op" id="7223603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7223608">for</span>&nbsp;<span class="ident" id="7223612">i</span>&nbsp;<span class="op" id="7223614">:=</span>&nbsp;<span class="num" id="7223617">0</span><span class="op" id="7223618">;</span>&nbsp;<span class="ident" id="7223620">i</span>&nbsp;<span class="op" id="7223622">&lt;</span>&nbsp;<span class="ident" id="7223624">blocks</span><span class="op" id="7223630">;</span>&nbsp;<span class="ident" id="7223632">i</span><span class="op" id="7223633">++</span>&nbsp;<span class="op" id="7223636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223642">c</span><span class="op" id="7223643">.</span><span class="ident" id="7223644">Write</span><span class="op" id="7223649">(</span><span class="ident" id="7223650">b</span><span class="op" id="7223651">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223661">s</span>&nbsp;<span class="op" id="7223663">:=</span>&nbsp;<span class="ident" id="7223666">fmt</span><span class="op" id="7223669">.</span><span class="ident" id="7223670">Sprintf</span><span class="op" id="7223677">(</span><span class="string" id="7223678">&#34;%x&#34;</span><span class="op" id="7223682">,</span>&nbsp;<span class="ident" id="7223684">c</span><span class="op" id="7223685">.</span><span class="ident" id="7223686">Sum</span><span class="op" id="7223689">(</span><span class="ident" id="7223690">nil</span><span class="op" id="7223693">)</span><span class="op" id="7223694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7223699">if</span>&nbsp;<span class="ident" id="7223702">s</span>&nbsp;<span class="op" id="7223704">!=</span>&nbsp;<span class="ident" id="7223707">ok</span>&nbsp;<span class="op" id="7223710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223716">t</span><span class="op" id="7223717">.</span><span class="ident" id="7223718">Fatalf</span><span class="op" id="7223724">(</span><span class="string" id="7223725">&#34;md5&nbsp;TestLarge&nbsp;offset=%d,&nbsp;blockSize=%d&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7223777">,</span>&nbsp;<span class="ident" id="7223779">offset</span><span class="op" id="7223785">,</span>&nbsp;<span class="ident" id="7223787">blockSize</span><span class="op" id="7223796">,</span>&nbsp;<span class="ident" id="7223798">s</span><span class="op" id="7223799">,</span>&nbsp;<span class="ident" id="7223801">ok</span><span class="op" id="7223803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223808">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7223815">}</span><br>
<span class="lineno"></span><span class="op" id="7223817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7223820">//&nbsp;Tests&nbsp;that&nbsp;blockGeneric&nbsp;(pure&nbsp;Go)&nbsp;and&nbsp;block&nbsp;(in&nbsp;assembly&nbsp;for&nbsp;amd64,&nbsp;386,&nbsp;arm)&nbsp;match.</span><br>
<span class="lineno">110</span><span class="keyword" id="7223908">func</span>&nbsp;<span class="ident" id="7223913">TestBlockGeneric</span><span class="op" id="7223929">(</span><span class="ident" id="7223930">t</span>&nbsp;<span class="op" id="7223932">*</span><span class="ident" id="7223933">testing</span><span class="op" id="7223940">.</span><span class="ident" id="7223941">T</span><span class="op" id="7223942">)</span>&nbsp;<span class="op" id="7223944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223947">gen</span><span class="op" id="7223950">,</span>&nbsp;<span class="ident" id="7223952">asm</span>&nbsp;<span class="op" id="7223956">:=</span>&nbsp;<span class="ident" id="7223959">New</span><span class="op" id="7223962">(</span><span class="op" id="7223963">)</span><span class="op" id="7223964">.</span><span class="op" id="7223965">(</span><span class="op" id="7223966">*</span><span class="ident" id="7223967">digest</span><span class="op" id="7223973">)</span><span class="op" id="7223974">,</span>&nbsp;<span class="ident" id="7223976">New</span><span class="op" id="7223979">(</span><span class="op" id="7223980">)</span><span class="op" id="7223981">.</span><span class="op" id="7223982">(</span><span class="op" id="7223983">*</span><span class="ident" id="7223984">digest</span><span class="op" id="7223990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7223993">buf</span>&nbsp;<span class="op" id="7223997">:=</span>&nbsp;<span class="builtinfunc" id="7224000">make</span><span class="op" id="7224004">(</span><span class="op" id="7224005">[</span><span class="op" id="7224006">]</span><span class="builtintype" id="7224007">byte</span><span class="op" id="7224011">,</span>&nbsp;<span class="ident" id="7224013">BlockSize</span><span class="op" id="7224022">*</span><span class="num" id="7224023">20</span><span class="op" id="7224025">)</span>&nbsp;<span class="comment" id="7224027">//&nbsp;arbitrary&nbsp;factor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224048">rand</span><span class="op" id="7224052">.</span><span class="ident" id="7224053">Read</span><span class="op" id="7224057">(</span><span class="ident" id="7224058">buf</span><span class="op" id="7224061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224064">blockGeneric</span><span class="op" id="7224076">(</span><span class="ident" id="7224077">gen</span><span class="op" id="7224080">,</span>&nbsp;<span class="ident" id="7224082">buf</span><span class="op" id="7224085">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224088">block</span><span class="op" id="7224093">(</span><span class="ident" id="7224094">asm</span><span class="op" id="7224097">,</span>&nbsp;<span class="ident" id="7224099">buf</span><span class="op" id="7224102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7224105">if</span>&nbsp;<span class="op" id="7224108">*</span><span class="ident" id="7224109">gen</span>&nbsp;<span class="op" id="7224113">!=</span>&nbsp;<span class="op" id="7224116">*</span><span class="ident" id="7224117">asm</span>&nbsp;<span class="op" id="7224121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224125">t</span><span class="op" id="7224126">.</span><span class="ident" id="7224127">Error</span><span class="op" id="7224132">(</span><span class="string" id="7224133">&#34;block&nbsp;and&nbsp;blockGeneric&nbsp;resulted&nbsp;in&nbsp;different&nbsp;states&#34;</span><span class="op" id="7224186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7224189">}</span><br>
<span class="lineno"></span><span class="op" id="7224191">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="7224194">var</span>&nbsp;<span class="ident" id="7224198">bench</span>&nbsp;<span class="op" id="7224204">=</span>&nbsp;<span class="ident" id="7224206">New</span><span class="op" id="7224209">(</span><span class="op" id="7224210">)</span><br>
<span class="lineno"></span><span class="keyword" id="7224212">var</span>&nbsp;<span class="ident" id="7224216">buf</span>&nbsp;<span class="op" id="7224220">=</span>&nbsp;<span class="builtinfunc" id="7224222">make</span><span class="op" id="7224226">(</span><span class="op" id="7224227">[</span><span class="op" id="7224228">]</span><span class="builtintype" id="7224229">byte</span><span class="op" id="7224233">,</span>&nbsp;<span class="num" id="7224235">8192</span><span class="op" id="7224239">+</span><span class="num" id="7224240">1</span><span class="op" id="7224241">)</span><br>
<span class="lineno"></span><span class="keyword" id="7224243">var</span>&nbsp;<span class="ident" id="7224247">sum</span>&nbsp;<span class="op" id="7224251">=</span>&nbsp;<span class="builtinfunc" id="7224253">make</span><span class="op" id="7224257">(</span><span class="op" id="7224258">[</span><span class="op" id="7224259">]</span><span class="builtintype" id="7224260">byte</span><span class="op" id="7224264">,</span>&nbsp;<span class="ident" id="7224266">bench</span><span class="op" id="7224271">.</span><span class="ident" id="7224272">Size</span><span class="op" id="7224276">(</span><span class="op" id="7224277">)</span><span class="op" id="7224278">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="7224281">func</span>&nbsp;<span class="ident" id="7224286">benchmarkSize</span><span class="op" id="7224299">(</span><span class="ident" id="7224300">b</span>&nbsp;<span class="op" id="7224302">*</span><span class="ident" id="7224303">testing</span><span class="op" id="7224310">.</span><span class="ident" id="7224311">B</span><span class="op" id="7224312">,</span>&nbsp;<span class="ident" id="7224314">size</span>&nbsp;<span class="builtintype" id="7224319">int</span><span class="op" id="7224322">,</span>&nbsp;<span class="ident" id="7224324">unaligned</span>&nbsp;<span class="builtintype" id="7224334">bool</span><span class="op" id="7224338">)</span>&nbsp;<span class="op" id="7224340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224343">b</span><span class="op" id="7224344">.</span><span class="ident" id="7224345">SetBytes</span><span class="op" id="7224353">(</span><span class="ident" id="7224354">int64</span><span class="op" id="7224359">(</span><span class="ident" id="7224360">size</span><span class="op" id="7224364">)</span><span class="op" id="7224365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224368">buf</span>&nbsp;<span class="op" id="7224372">:=</span>&nbsp;<span class="ident" id="7224375">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7224380">if</span>&nbsp;<span class="ident" id="7224383">unaligned</span>&nbsp;<span class="op" id="7224393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7224397">if</span>&nbsp;<span class="builtintype" id="7224400">uintptr</span><span class="op" id="7224407">(</span><span class="ident" id="7224408">unsafe</span><span class="op" id="7224414">.</span><span class="ident" id="7224415">Pointer</span><span class="op" id="7224422">(</span><span class="op" id="7224423">&amp;</span><span class="ident" id="7224424">buf</span><span class="op" id="7224427">[</span><span class="num" id="7224428">0</span><span class="op" id="7224429">]</span><span class="op" id="7224430">)</span><span class="op" id="7224431">)</span><span class="op" id="7224432">&amp;</span><span class="op" id="7224433">(</span><span class="ident" id="7224434">unsafe</span><span class="op" id="7224440">.</span><span class="ident" id="7224441">Alignof</span><span class="op" id="7224448">(</span><span class="builtintype" id="7224449">uint32</span><span class="op" id="7224455">(</span><span class="num" id="7224456">0</span><span class="op" id="7224457">)</span><span class="op" id="7224458">)</span><span class="op" id="7224459">-</span><span class="num" id="7224460">1</span><span class="op" id="7224461">)</span>&nbsp;<span class="op" id="7224463">==</span>&nbsp;<span class="num" id="7224466">0</span>&nbsp;<span class="op" id="7224468">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224473">buf</span>&nbsp;<span class="op" id="7224477">=</span>&nbsp;<span class="ident" id="7224479">buf</span><span class="op" id="7224482">[</span><span class="num" id="7224483">1</span><span class="op" id="7224484">:</span><span class="op" id="7224485">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7224489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7224492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224495">b</span><span class="op" id="7224496">.</span><span class="ident" id="7224497">ResetTimer</span><span class="op" id="7224507">(</span><span class="op" id="7224508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7224511">for</span>&nbsp;<span class="ident" id="7224515">i</span>&nbsp;<span class="op" id="7224517">:=</span>&nbsp;<span class="num" id="7224520">0</span><span class="op" id="7224521">;</span>&nbsp;<span class="ident" id="7224523">i</span>&nbsp;<span class="op" id="7224525">&lt;</span>&nbsp;<span class="ident" id="7224527">b</span><span class="op" id="7224528">.</span><span class="ident" id="7224529">N</span><span class="op" id="7224530">;</span>&nbsp;<span class="ident" id="7224532">i</span><span class="op" id="7224533">++</span>&nbsp;<span class="op" id="7224536">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224540">bench</span><span class="op" id="7224545">.</span><span class="ident" id="7224546">Reset</span><span class="op" id="7224551">(</span><span class="op" id="7224552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224556">bench</span><span class="op" id="7224561">.</span><span class="ident" id="7224562">Write</span><span class="op" id="7224567">(</span><span class="ident" id="7224568">buf</span><span class="op" id="7224571">[</span><span class="op" id="7224572">:</span><span class="ident" id="7224573">size</span><span class="op" id="7224577">]</span><span class="op" id="7224578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224582">bench</span><span class="op" id="7224587">.</span><span class="ident" id="7224588">Sum</span><span class="op" id="7224591">(</span><span class="ident" id="7224592">sum</span><span class="op" id="7224595">[</span><span class="op" id="7224596">:</span><span class="num" id="7224597">0</span><span class="op" id="7224598">]</span><span class="op" id="7224599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7224602">}</span><br>
<span class="lineno"></span><span class="op" id="7224604">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7224607">func</span>&nbsp;<span class="ident" id="7224612">BenchmarkHash8Bytes</span><span class="op" id="7224631">(</span><span class="ident" id="7224632">b</span>&nbsp;<span class="op" id="7224634">*</span><span class="ident" id="7224635">testing</span><span class="op" id="7224642">.</span><span class="ident" id="7224643">B</span><span class="op" id="7224644">)</span>&nbsp;<span class="op" id="7224646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224649">benchmarkSize</span><span class="op" id="7224662">(</span><span class="ident" id="7224663">b</span><span class="op" id="7224664">,</span>&nbsp;<span class="num" id="7224666">8</span><span class="op" id="7224667">,</span>&nbsp;<span class="builtintype" id="7224669">false</span><span class="op" id="7224674">)</span><br>
<span class="lineno"></span><span class="op" id="7224676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="7224679">func</span>&nbsp;<span class="ident" id="7224684">BenchmarkHash1K</span><span class="op" id="7224699">(</span><span class="ident" id="7224700">b</span>&nbsp;<span class="op" id="7224702">*</span><span class="ident" id="7224703">testing</span><span class="op" id="7224710">.</span><span class="ident" id="7224711">B</span><span class="op" id="7224712">)</span>&nbsp;<span class="op" id="7224714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224717">benchmarkSize</span><span class="op" id="7224730">(</span><span class="ident" id="7224731">b</span><span class="op" id="7224732">,</span>&nbsp;<span class="num" id="7224734">1024</span><span class="op" id="7224738">,</span>&nbsp;<span class="builtintype" id="7224740">false</span><span class="op" id="7224745">)</span><br>
<span class="lineno"></span><span class="op" id="7224747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7224750">func</span>&nbsp;<span class="ident" id="7224755">BenchmarkHash8K</span><span class="op" id="7224770">(</span><span class="ident" id="7224771">b</span>&nbsp;<span class="op" id="7224773">*</span><span class="ident" id="7224774">testing</span><span class="op" id="7224781">.</span><span class="ident" id="7224782">B</span><span class="op" id="7224783">)</span>&nbsp;<span class="op" id="7224785">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224788">benchmarkSize</span><span class="op" id="7224801">(</span><span class="ident" id="7224802">b</span><span class="op" id="7224803">,</span>&nbsp;<span class="num" id="7224805">8192</span><span class="op" id="7224809">,</span>&nbsp;<span class="builtintype" id="7224811">false</span><span class="op" id="7224816">)</span><br>
<span class="lineno"></span><span class="op" id="7224818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7224821">func</span>&nbsp;<span class="ident" id="7224826">BenchmarkHash8BytesUnaligned</span><span class="op" id="7224854">(</span><span class="ident" id="7224855">b</span>&nbsp;<span class="op" id="7224857">*</span><span class="ident" id="7224858">testing</span><span class="op" id="7224865">.</span><span class="ident" id="7224866">B</span><span class="op" id="7224867">)</span>&nbsp;<span class="op" id="7224869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224872">benchmarkSize</span><span class="op" id="7224885">(</span><span class="ident" id="7224886">b</span><span class="op" id="7224887">,</span>&nbsp;<span class="num" id="7224889">8</span><span class="op" id="7224890">,</span>&nbsp;<span class="builtintype" id="7224892">true</span><span class="op" id="7224896">)</span><br>
<span class="lineno">155</span><span class="op" id="7224898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7224901">func</span>&nbsp;<span class="ident" id="7224906">BenchmarkHash1KUnaligned</span><span class="op" id="7224930">(</span><span class="ident" id="7224931">b</span>&nbsp;<span class="op" id="7224933">*</span><span class="ident" id="7224934">testing</span><span class="op" id="7224941">.</span><span class="ident" id="7224942">B</span><span class="op" id="7224943">)</span>&nbsp;<span class="op" id="7224945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7224948">benchmarkSize</span><span class="op" id="7224961">(</span><span class="ident" id="7224962">b</span><span class="op" id="7224963">,</span>&nbsp;<span class="num" id="7224965">1024</span><span class="op" id="7224969">,</span>&nbsp;<span class="builtintype" id="7224971">true</span><span class="op" id="7224975">)</span><br>
<span class="lineno"></span><span class="op" id="7224977">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="7224980">func</span>&nbsp;<span class="ident" id="7224985">BenchmarkHash8KUnaligned</span><span class="op" id="7225009">(</span><span class="ident" id="7225010">b</span>&nbsp;<span class="op" id="7225012">*</span><span class="ident" id="7225013">testing</span><span class="op" id="7225020">.</span><span class="ident" id="7225021">B</span><span class="op" id="7225022">)</span>&nbsp;<span class="op" id="7225024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7225027">benchmarkSize</span><span class="op" id="7225040">(</span><span class="ident" id="7225041">b</span><span class="op" id="7225042">,</span>&nbsp;<span class="num" id="7225044">8192</span><span class="op" id="7225048">,</span>&nbsp;<span class="builtintype" id="7225050">true</span><span class="op" id="7225054">)</span><br>
<span class="lineno"></span><span class="op" id="7225056">}</span>
</div>
</body>
</html>
