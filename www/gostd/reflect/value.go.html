<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2863667">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2863722">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2863776">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2863827">package</span>&nbsp;<span class="ident" id="2863835">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2863844">import</span>&nbsp;<span class="op" id="2863851">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2863854">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2863862">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2863873">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2863882">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2863885">const</span>&nbsp;<span class="ident" id="2863891">ptrSize</span>&nbsp;<span class="op" id="2863899">=</span>&nbsp;<span class="ident" id="2863901">unsafe</span><span class="op" id="2863907">.</span><span class="ident" id="2863908">Sizeof</span><span class="op" id="2863914">(</span><span class="op" id="2863915">(</span><span class="op" id="2863916">*</span><span class="builtintype" id="2863917">byte</span><span class="op" id="2863921">)</span><span class="op" id="2863922">(</span><span class="ident" id="2863923">nil</span><span class="op" id="2863926">)</span><span class="op" id="2863927">)</span><br>
<span class="lineno"></span><span class="keyword" id="2863929">const</span>&nbsp;<span class="ident" id="2863935">cannotSet</span>&nbsp;<span class="op" id="2863945">=</span>&nbsp;<span class="string" id="2863947">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2864005">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2864057">//</span><br>
<span class="lineno"></span><span class="comment" id="2864060">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2864124">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2864183">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2864243">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2864295">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2864357">//</span><br>
<span class="lineno"></span><span class="comment" id="2864360">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2864399">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2864469">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2864546">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2864607">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2864675">//</span><br>
<span class="lineno">30</span><span class="comment" id="2864678">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2864751">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2864822">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2864844">type</span>&nbsp;<span class="ident" id="2864849">Value</span>&nbsp;<span class="keyword" id="2864855">struct</span>&nbsp;<span class="op" id="2864862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2864865">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864925">typ</span>&nbsp;<span class="op" id="2864929">*</span><span class="ident" id="2864930">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2864938">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865004">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865070">ptr</span>&nbsp;<span class="ident" id="2865074">unsafe</span><span class="op" id="2865080">.</span><span class="ident" id="2865081">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865091">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865132">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865167">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865225">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865274">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865328">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865367">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865418">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865472">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865539">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865609">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865672">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865679">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865737">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865806">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865873">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865941">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2865972">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2865975">type</span>&nbsp;<span class="ident" id="2865980">flag</span>&nbsp;<span class="builtintype" id="2865985">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2865994">const</span>&nbsp;<span class="op" id="2866000">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866003">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866024">=</span>&nbsp;<span class="num" id="2866026">5</span>&nbsp;<span class="comment" id="2866028">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866051">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866067">flag</span>&nbsp;<span class="op" id="2866072">=</span>&nbsp;<span class="num" id="2866074">1</span><span class="op" id="2866075">&lt;&lt;</span><span class="ident" id="2866077">flagKindWidth</span>&nbsp;<span class="op" id="2866091">-</span>&nbsp;<span class="num" id="2866093">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866096">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866112">flag</span>&nbsp;<span class="op" id="2866117">=</span>&nbsp;<span class="num" id="2866119">1</span>&nbsp;<span class="op" id="2866121">&lt;&lt;</span>&nbsp;<span class="num" id="2866124">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866127">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866143">flag</span>&nbsp;<span class="op" id="2866148">=</span>&nbsp;<span class="num" id="2866150">1</span>&nbsp;<span class="op" id="2866152">&lt;&lt;</span>&nbsp;<span class="num" id="2866155">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866158">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866174">flag</span>&nbsp;<span class="op" id="2866179">=</span>&nbsp;<span class="num" id="2866181">1</span>&nbsp;<span class="op" id="2866183">&lt;&lt;</span>&nbsp;<span class="num" id="2866186">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866189">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866205">flag</span>&nbsp;<span class="op" id="2866210">=</span>&nbsp;<span class="num" id="2866212">1</span>&nbsp;<span class="op" id="2866214">&lt;&lt;</span>&nbsp;<span class="num" id="2866217">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866220">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866241">=</span>&nbsp;<span class="num" id="2866243">9</span><br>
<span class="lineno"></span><span class="op" id="2866245">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2866248">func</span>&nbsp;<span class="op" id="2866253">(</span><span class="ident" id="2866254">f</span>&nbsp;<span class="ident" id="2866256">flag</span><span class="op" id="2866260">)</span>&nbsp;<span class="ident" id="2866262">kind</span><span class="op" id="2866266">(</span><span class="op" id="2866267">)</span>&nbsp;<span class="ident" id="2866269">Kind</span>&nbsp;<span class="op" id="2866274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866277">return</span>&nbsp;<span class="ident" id="2866284">Kind</span><span class="op" id="2866288">(</span><span class="ident" id="2866289">f</span>&nbsp;<span class="op" id="2866291">&amp;</span>&nbsp;<span class="ident" id="2866293">flagKindMask</span><span class="op" id="2866305">)</span><br>
<span class="lineno">75</span><span class="op" id="2866307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2866310">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2866370">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2866429">func</span>&nbsp;<span class="op" id="2866434">(</span><span class="ident" id="2866435">v</span>&nbsp;<span class="ident" id="2866437">Value</span><span class="op" id="2866442">)</span>&nbsp;<span class="ident" id="2866444">pointer</span><span class="op" id="2866451">(</span><span class="op" id="2866452">)</span>&nbsp;<span class="ident" id="2866454">unsafe</span><span class="op" id="2866460">.</span><span class="ident" id="2866461">Pointer</span>&nbsp;<span class="op" id="2866469">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866472">if</span>&nbsp;<span class="ident" id="2866475">v</span><span class="op" id="2866476">.</span><span class="ident" id="2866477">typ</span><span class="op" id="2866480">.</span><span class="ident" id="2866481">size</span>&nbsp;<span class="op" id="2866486">!=</span>&nbsp;<span class="ident" id="2866489">ptrSize</span>&nbsp;<span class="op" id="2866497">||</span>&nbsp;<span class="op" id="2866500">!</span><span class="ident" id="2866501">v</span><span class="op" id="2866502">.</span><span class="ident" id="2866503">typ</span><span class="op" id="2866506">.</span><span class="ident" id="2866507">pointers</span><span class="op" id="2866515">(</span><span class="op" id="2866516">)</span>&nbsp;<span class="op" id="2866518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2866522">panic</span><span class="op" id="2866527">(</span><span class="string" id="2866528">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2866571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866577">if</span>&nbsp;<span class="ident" id="2866580">v</span><span class="op" id="2866581">.</span><span class="ident" id="2866582">flag</span><span class="op" id="2866586">&amp;</span><span class="ident" id="2866587">flagIndir</span>&nbsp;<span class="op" id="2866597">!=</span>&nbsp;<span class="num" id="2866600">0</span>&nbsp;<span class="op" id="2866602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866606">return</span>&nbsp;<span class="op" id="2866613">*</span><span class="op" id="2866614">(</span><span class="op" id="2866615">*</span><span class="ident" id="2866616">unsafe</span><span class="op" id="2866622">.</span><span class="ident" id="2866623">Pointer</span><span class="op" id="2866630">)</span><span class="op" id="2866631">(</span><span class="ident" id="2866632">v</span><span class="op" id="2866633">.</span><span class="ident" id="2866634">ptr</span><span class="op" id="2866637">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866643">return</span>&nbsp;<span class="ident" id="2866650">v</span><span class="op" id="2866651">.</span><span class="ident" id="2866652">ptr</span><br>
<span class="lineno"></span><span class="op" id="2866656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2866659">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2866707">func</span>&nbsp;<span class="ident" id="2866712">packEface</span><span class="op" id="2866721">(</span><span class="ident" id="2866722">v</span>&nbsp;<span class="ident" id="2866724">Value</span><span class="op" id="2866729">)</span>&nbsp;<span class="keyword" id="2866731">interface</span><span class="op" id="2866740">{</span><span class="op" id="2866741">}</span>&nbsp;<span class="op" id="2866743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866746">t</span>&nbsp;<span class="op" id="2866748">:=</span>&nbsp;<span class="ident" id="2866751">v</span><span class="op" id="2866752">.</span><span class="ident" id="2866753">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866758">var</span>&nbsp;<span class="ident" id="2866762">i</span>&nbsp;<span class="keyword" id="2866764">interface</span><span class="op" id="2866773">{</span><span class="op" id="2866774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866777">e</span>&nbsp;<span class="op" id="2866779">:=</span>&nbsp;<span class="op" id="2866782">(</span><span class="op" id="2866783">*</span><span class="ident" id="2866784">emptyInterface</span><span class="op" id="2866798">)</span><span class="op" id="2866799">(</span><span class="ident" id="2866800">unsafe</span><span class="op" id="2866806">.</span><span class="ident" id="2866807">Pointer</span><span class="op" id="2866814">(</span><span class="op" id="2866815">&amp;</span><span class="ident" id="2866816">i</span><span class="op" id="2866817">)</span><span class="op" id="2866818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2866821">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866875">switch</span>&nbsp;<span class="op" id="2866882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866885">case</span>&nbsp;<span class="ident" id="2866890">ifaceIndir</span><span class="op" id="2866900">(</span><span class="ident" id="2866901">t</span><span class="op" id="2866902">)</span><span class="op" id="2866903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866907">if</span>&nbsp;<span class="ident" id="2866910">v</span><span class="op" id="2866911">.</span><span class="ident" id="2866912">flag</span><span class="op" id="2866916">&amp;</span><span class="ident" id="2866917">flagIndir</span>&nbsp;<span class="op" id="2866927">==</span>&nbsp;<span class="num" id="2866930">0</span>&nbsp;<span class="op" id="2866932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2866937">panic</span><span class="op" id="2866942">(</span><span class="string" id="2866943">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2866954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866958">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2866962">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867024">ptr</span>&nbsp;<span class="op" id="2867028">:=</span>&nbsp;<span class="ident" id="2867031">v</span><span class="op" id="2867032">.</span><span class="ident" id="2867033">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867039">if</span>&nbsp;<span class="ident" id="2867042">v</span><span class="op" id="2867043">.</span><span class="ident" id="2867044">flag</span><span class="op" id="2867048">&amp;</span><span class="ident" id="2867049">flagAddr</span>&nbsp;<span class="op" id="2867058">!=</span>&nbsp;<span class="num" id="2867061">0</span>&nbsp;<span class="op" id="2867063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867068">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867121">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867164">c</span>&nbsp;<span class="op" id="2867166">:=</span>&nbsp;<span class="ident" id="2867169">unsafe_New</span><span class="op" id="2867179">(</span><span class="ident" id="2867180">t</span><span class="op" id="2867181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867186">memmove</span><span class="op" id="2867193">(</span><span class="ident" id="2867194">c</span><span class="op" id="2867195">,</span>&nbsp;<span class="ident" id="2867197">ptr</span><span class="op" id="2867200">,</span>&nbsp;<span class="ident" id="2867202">t</span><span class="op" id="2867203">.</span><span class="ident" id="2867204">size</span><span class="op" id="2867208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867213">ptr</span>&nbsp;<span class="op" id="2867217">=</span>&nbsp;<span class="ident" id="2867219">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867227">e</span><span class="op" id="2867228">.</span><span class="ident" id="2867229">word</span>&nbsp;<span class="op" id="2867234">=</span>&nbsp;<span class="ident" id="2867236">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867241">case</span>&nbsp;<span class="ident" id="2867246">v</span><span class="op" id="2867247">.</span><span class="ident" id="2867248">flag</span><span class="op" id="2867252">&amp;</span><span class="ident" id="2867253">flagIndir</span>&nbsp;<span class="op" id="2867263">!=</span>&nbsp;<span class="num" id="2867266">0</span><span class="op" id="2867267">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867271">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867329">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867390">e</span><span class="op" id="2867391">.</span><span class="ident" id="2867392">word</span>&nbsp;<span class="op" id="2867397">=</span>&nbsp;<span class="op" id="2867399">*</span><span class="op" id="2867400">(</span><span class="op" id="2867401">*</span><span class="ident" id="2867402">unsafe</span><span class="op" id="2867408">.</span><span class="ident" id="2867409">Pointer</span><span class="op" id="2867416">)</span><span class="op" id="2867417">(</span><span class="ident" id="2867418">v</span><span class="op" id="2867419">.</span><span class="ident" id="2867420">ptr</span><span class="op" id="2867423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867426">default</span><span class="op" id="2867433">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867437">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867484">e</span><span class="op" id="2867485">.</span><span class="ident" id="2867486">word</span>&nbsp;<span class="op" id="2867491">=</span>&nbsp;<span class="ident" id="2867493">v</span><span class="op" id="2867494">.</span><span class="ident" id="2867495">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867503">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867567">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867634">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867703">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867724">e</span><span class="op" id="2867725">.</span><span class="ident" id="2867726">typ</span>&nbsp;<span class="op" id="2867730">=</span>&nbsp;<span class="ident" id="2867732">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867735">return</span>&nbsp;<span class="ident" id="2867742">i</span><br>
<span class="lineno"></span><span class="op" id="2867744">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2867747">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2867805">func</span>&nbsp;<span class="ident" id="2867810">unpackEface</span><span class="op" id="2867821">(</span><span class="ident" id="2867822">i</span>&nbsp;<span class="keyword" id="2867824">interface</span><span class="op" id="2867833">{</span><span class="op" id="2867834">}</span><span class="op" id="2867835">)</span>&nbsp;<span class="ident" id="2867837">Value</span>&nbsp;<span class="op" id="2867843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867846">e</span>&nbsp;<span class="op" id="2867848">:=</span>&nbsp;<span class="op" id="2867851">(</span><span class="op" id="2867852">*</span><span class="ident" id="2867853">emptyInterface</span><span class="op" id="2867867">)</span><span class="op" id="2867868">(</span><span class="ident" id="2867869">unsafe</span><span class="op" id="2867875">.</span><span class="ident" id="2867876">Pointer</span><span class="op" id="2867883">(</span><span class="op" id="2867884">&amp;</span><span class="ident" id="2867885">i</span><span class="op" id="2867886">)</span><span class="op" id="2867887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867890">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867971">t</span>&nbsp;<span class="op" id="2867973">:=</span>&nbsp;<span class="ident" id="2867976">e</span><span class="op" id="2867977">.</span><span class="ident" id="2867978">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867983">if</span>&nbsp;<span class="ident" id="2867986">t</span>&nbsp;<span class="op" id="2867988">==</span>&nbsp;<span class="ident" id="2867991">nil</span>&nbsp;<span class="op" id="2867995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867999">return</span>&nbsp;<span class="ident" id="2868006">Value</span><span class="op" id="2868011">{</span><span class="op" id="2868012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868018">f</span>&nbsp;<span class="op" id="2868020">:=</span>&nbsp;<span class="ident" id="2868023">flag</span><span class="op" id="2868027">(</span><span class="ident" id="2868028">t</span><span class="op" id="2868029">.</span><span class="ident" id="2868030">Kind</span><span class="op" id="2868034">(</span><span class="op" id="2868035">)</span><span class="op" id="2868036">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868039">if</span>&nbsp;<span class="ident" id="2868042">ifaceIndir</span><span class="op" id="2868052">(</span><span class="ident" id="2868053">t</span><span class="op" id="2868054">)</span>&nbsp;<span class="op" id="2868056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868060">f</span>&nbsp;<span class="op" id="2868062">|=</span>&nbsp;<span class="ident" id="2868065">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868079">return</span>&nbsp;<span class="ident" id="2868086">Value</span><span class="op" id="2868091">{</span><span class="ident" id="2868092">t</span><span class="op" id="2868093">,</span>&nbsp;<span class="ident" id="2868095">unsafe</span><span class="op" id="2868101">.</span><span class="ident" id="2868102">Pointer</span><span class="op" id="2868109">(</span><span class="ident" id="2868110">e</span><span class="op" id="2868111">.</span><span class="ident" id="2868112">word</span><span class="op" id="2868116">)</span><span class="op" id="2868117">,</span>&nbsp;<span class="ident" id="2868119">f</span><span class="op" id="2868120">}</span><br>
<span class="lineno"></span><span class="op" id="2868122">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2868125">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2868182">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2868246">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2868284">type</span>&nbsp;<span class="ident" id="2868289">ValueError</span>&nbsp;<span class="keyword" id="2868300">struct</span>&nbsp;<span class="op" id="2868307">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868310">Method</span>&nbsp;<span class="builtintype" id="2868317">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868325">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2868332">Kind</span><br>
<span class="lineno"></span><span class="op" id="2868337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2868340">func</span>&nbsp;<span class="op" id="2868345">(</span><span class="ident" id="2868346">e</span>&nbsp;<span class="op" id="2868348">*</span><span class="ident" id="2868349">ValueError</span><span class="op" id="2868359">)</span>&nbsp;<span class="ident" id="2868361">Error</span><span class="op" id="2868366">(</span><span class="op" id="2868367">)</span>&nbsp;<span class="builtintype" id="2868369">string</span>&nbsp;<span class="op" id="2868376">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868379">if</span>&nbsp;<span class="ident" id="2868382">e</span><span class="op" id="2868383">.</span><span class="ident" id="2868384">Kind</span>&nbsp;<span class="op" id="2868389">==</span>&nbsp;<span class="num" id="2868392">0</span>&nbsp;<span class="op" id="2868394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868398">return</span>&nbsp;<span class="string" id="2868405">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2868425">+</span>&nbsp;<span class="ident" id="2868427">e</span><span class="op" id="2868428">.</span><span class="ident" id="2868429">Method</span>&nbsp;<span class="op" id="2868436">+</span>&nbsp;<span class="string" id="2868438">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868459">return</span>&nbsp;<span class="string" id="2868466">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2868486">+</span>&nbsp;<span class="ident" id="2868488">e</span><span class="op" id="2868489">.</span><span class="ident" id="2868490">Method</span>&nbsp;<span class="op" id="2868497">+</span>&nbsp;<span class="string" id="2868499">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2868506">+</span>&nbsp;<span class="ident" id="2868508">e</span><span class="op" id="2868509">.</span><span class="ident" id="2868510">Kind</span><span class="op" id="2868514">.</span><span class="ident" id="2868515">String</span><span class="op" id="2868521">(</span><span class="op" id="2868522">)</span>&nbsp;<span class="op" id="2868524">+</span>&nbsp;<span class="string" id="2868526">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2868535">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2868538">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2868592">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2868633">func</span>&nbsp;<span class="ident" id="2868638">methodName</span><span class="op" id="2868648">(</span><span class="op" id="2868649">)</span>&nbsp;<span class="builtintype" id="2868651">string</span>&nbsp;<span class="op" id="2868658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868661">pc</span><span class="op" id="2868663">,</span>&nbsp;<span class="ident" id="2868665">_</span><span class="op" id="2868666">,</span>&nbsp;<span class="ident" id="2868668">_</span><span class="op" id="2868669">,</span>&nbsp;<span class="ident" id="2868671">_</span>&nbsp;<span class="op" id="2868673">:=</span>&nbsp;<span class="ident" id="2868676">runtime</span><span class="op" id="2868683">.</span><span class="ident" id="2868684">Caller</span><span class="op" id="2868690">(</span><span class="num" id="2868691">2</span><span class="op" id="2868692">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868695">f</span>&nbsp;<span class="op" id="2868697">:=</span>&nbsp;<span class="ident" id="2868700">runtime</span><span class="op" id="2868707">.</span><span class="ident" id="2868708">FuncForPC</span><span class="op" id="2868717">(</span><span class="ident" id="2868718">pc</span><span class="op" id="2868720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868723">if</span>&nbsp;<span class="ident" id="2868726">f</span>&nbsp;<span class="op" id="2868728">==</span>&nbsp;<span class="ident" id="2868731">nil</span>&nbsp;<span class="op" id="2868735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868739">return</span>&nbsp;<span class="string" id="2868746">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868767">return</span>&nbsp;<span class="ident" id="2868774">f</span><span class="op" id="2868775">.</span><span class="ident" id="2868776">Name</span><span class="op" id="2868780">(</span><span class="op" id="2868781">)</span><br>
<span class="lineno">165</span><span class="op" id="2868783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2868786">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2868844">type</span>&nbsp;<span class="ident" id="2868849">emptyInterface</span>&nbsp;<span class="keyword" id="2868864">struct</span>&nbsp;<span class="op" id="2868871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868874">typ</span>&nbsp;&nbsp;<span class="op" id="2868879">*</span><span class="ident" id="2868880">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868887">word</span>&nbsp;<span class="ident" id="2868892">unsafe</span><span class="op" id="2868898">.</span><span class="ident" id="2868899">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2868907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2868910">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2868981">type</span>&nbsp;<span class="ident" id="2868986">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2869004">struct</span>&nbsp;<span class="op" id="2869011">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2869014">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869047">itab</span>&nbsp;<span class="op" id="2869052">*</span><span class="keyword" id="2869053">struct</span>&nbsp;<span class="op" id="2869060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869064">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2869071">*</span><span class="ident" id="2869072">rtype</span>&nbsp;<span class="comment" id="2869078">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869105">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2869112">*</span><span class="ident" id="2869113">rtype</span>&nbsp;<span class="comment" id="2869119">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869146">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2869153">unsafe</span><span class="op" id="2869159">.</span><span class="ident" id="2869160">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869170">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2869177">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869185">unused</span>&nbsp;<span class="builtintype" id="2869192">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869200">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2869207">[</span><span class="num" id="2869208">100000</span><span class="op" id="2869214">]</span><span class="ident" id="2869215">unsafe</span><span class="op" id="2869221">.</span><span class="ident" id="2869222">Pointer</span>&nbsp;<span class="comment" id="2869230">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869250">word</span>&nbsp;<span class="ident" id="2869255">unsafe</span><span class="op" id="2869261">.</span><span class="ident" id="2869262">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2869270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2869273">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2869319">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2869371">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2869428">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2869486">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2869545">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2869588">func</span>&nbsp;<span class="op" id="2869593">(</span><span class="ident" id="2869594">f</span>&nbsp;<span class="ident" id="2869596">flag</span><span class="op" id="2869600">)</span>&nbsp;<span class="ident" id="2869602">mustBe</span><span class="op" id="2869608">(</span><span class="ident" id="2869609">expected</span>&nbsp;<span class="ident" id="2869618">Kind</span><span class="op" id="2869622">)</span>&nbsp;<span class="op" id="2869624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2869627">if</span>&nbsp;<span class="ident" id="2869630">f</span><span class="op" id="2869631">.</span><span class="ident" id="2869632">kind</span><span class="op" id="2869636">(</span><span class="op" id="2869637">)</span>&nbsp;<span class="op" id="2869639">!=</span>&nbsp;<span class="ident" id="2869642">expected</span>&nbsp;<span class="op" id="2869651">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2869655">panic</span><span class="op" id="2869660">(</span><span class="op" id="2869661">&amp;</span><span class="ident" id="2869662">ValueError</span><span class="op" id="2869672">{</span><span class="ident" id="2869673">methodName</span><span class="op" id="2869683">(</span><span class="op" id="2869684">)</span><span class="op" id="2869685">,</span>&nbsp;<span class="ident" id="2869687">f</span><span class="op" id="2869688">.</span><span class="ident" id="2869689">kind</span><span class="op" id="2869693">(</span><span class="op" id="2869694">)</span><span class="op" id="2869695">}</span><span class="op" id="2869696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869699">}</span><br>
<span class="lineno"></span><span class="op" id="2869701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2869704">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2869776">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2869800">func</span>&nbsp;<span class="op" id="2869805">(</span><span class="ident" id="2869806">f</span>&nbsp;<span class="ident" id="2869808">flag</span><span class="op" id="2869812">)</span>&nbsp;<span class="ident" id="2869814">mustBeExported</span><span class="op" id="2869828">(</span><span class="op" id="2869829">)</span>&nbsp;<span class="op" id="2869831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2869834">if</span>&nbsp;<span class="ident" id="2869837">f</span>&nbsp;<span class="op" id="2869839">==</span>&nbsp;<span class="num" id="2869842">0</span>&nbsp;<span class="op" id="2869844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2869848">panic</span><span class="op" id="2869853">(</span><span class="op" id="2869854">&amp;</span><span class="ident" id="2869855">ValueError</span><span class="op" id="2869865">{</span><span class="ident" id="2869866">methodName</span><span class="op" id="2869876">(</span><span class="op" id="2869877">)</span><span class="op" id="2869878">,</span>&nbsp;<span class="num" id="2869880">0</span><span class="op" id="2869881">}</span><span class="op" id="2869882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869885">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2869888">if</span>&nbsp;<span class="ident" id="2869891">f</span><span class="op" id="2869892">&amp;</span><span class="ident" id="2869893">flagRO</span>&nbsp;<span class="op" id="2869900">!=</span>&nbsp;<span class="num" id="2869903">0</span>&nbsp;<span class="op" id="2869905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2869909">panic</span><span class="op" id="2869914">(</span><span class="string" id="2869915">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2869927">+</span>&nbsp;<span class="ident" id="2869929">methodName</span><span class="op" id="2869939">(</span><span class="op" id="2869940">)</span>&nbsp;<span class="op" id="2869942">+</span>&nbsp;<span class="string" id="2869944">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2869990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869993">}</span><br>
<span class="lineno"></span><span class="op" id="2869995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2869998">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2870072">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2870145">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2870174">func</span>&nbsp;<span class="op" id="2870179">(</span><span class="ident" id="2870180">f</span>&nbsp;<span class="ident" id="2870182">flag</span><span class="op" id="2870186">)</span>&nbsp;<span class="ident" id="2870188">mustBeAssignable</span><span class="op" id="2870204">(</span><span class="op" id="2870205">)</span>&nbsp;<span class="op" id="2870207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870210">if</span>&nbsp;<span class="ident" id="2870213">f</span>&nbsp;<span class="op" id="2870215">==</span>&nbsp;<span class="num" id="2870218">0</span>&nbsp;<span class="op" id="2870220">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870224">panic</span><span class="op" id="2870229">(</span><span class="op" id="2870230">&amp;</span><span class="ident" id="2870231">ValueError</span><span class="op" id="2870241">{</span><span class="ident" id="2870242">methodName</span><span class="op" id="2870252">(</span><span class="op" id="2870253">)</span><span class="op" id="2870254">,</span>&nbsp;<span class="ident" id="2870256">Invalid</span><span class="op" id="2870263">}</span><span class="op" id="2870264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2870270">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870319">if</span>&nbsp;<span class="ident" id="2870322">f</span><span class="op" id="2870323">&amp;</span><span class="ident" id="2870324">flagRO</span>&nbsp;<span class="op" id="2870331">!=</span>&nbsp;<span class="num" id="2870334">0</span>&nbsp;<span class="op" id="2870336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870340">panic</span><span class="op" id="2870345">(</span><span class="string" id="2870346">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2870358">+</span>&nbsp;<span class="ident" id="2870360">methodName</span><span class="op" id="2870370">(</span><span class="op" id="2870371">)</span>&nbsp;<span class="op" id="2870373">+</span>&nbsp;<span class="string" id="2870375">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2870421">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870427">if</span>&nbsp;<span class="ident" id="2870430">f</span><span class="op" id="2870431">&amp;</span><span class="ident" id="2870432">flagAddr</span>&nbsp;<span class="op" id="2870441">==</span>&nbsp;<span class="num" id="2870444">0</span>&nbsp;<span class="op" id="2870446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870450">panic</span><span class="op" id="2870455">(</span><span class="string" id="2870456">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2870468">+</span>&nbsp;<span class="ident" id="2870470">methodName</span><span class="op" id="2870480">(</span><span class="op" id="2870481">)</span>&nbsp;<span class="op" id="2870483">+</span>&nbsp;<span class="string" id="2870485">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2870513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870516">}</span><br>
<span class="lineno"></span><span class="op" id="2870518">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2870521">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2870584">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2870625">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2870689">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2870751">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2870772">func</span>&nbsp;<span class="op" id="2870777">(</span><span class="ident" id="2870778">v</span>&nbsp;<span class="ident" id="2870780">Value</span><span class="op" id="2870785">)</span>&nbsp;<span class="ident" id="2870787">Addr</span><span class="op" id="2870791">(</span><span class="op" id="2870792">)</span>&nbsp;<span class="ident" id="2870794">Value</span>&nbsp;<span class="op" id="2870800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870803">if</span>&nbsp;<span class="ident" id="2870806">v</span><span class="op" id="2870807">.</span><span class="ident" id="2870808">flag</span><span class="op" id="2870812">&amp;</span><span class="ident" id="2870813">flagAddr</span>&nbsp;<span class="op" id="2870822">==</span>&nbsp;<span class="num" id="2870825">0</span>&nbsp;<span class="op" id="2870827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870831">panic</span><span class="op" id="2870836">(</span><span class="string" id="2870837">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2870880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870883">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870886">return</span>&nbsp;<span class="ident" id="2870893">Value</span><span class="op" id="2870898">{</span><span class="ident" id="2870899">v</span><span class="op" id="2870900">.</span><span class="ident" id="2870901">typ</span><span class="op" id="2870904">.</span><span class="ident" id="2870905">ptrTo</span><span class="op" id="2870910">(</span><span class="op" id="2870911">)</span><span class="op" id="2870912">,</span>&nbsp;<span class="ident" id="2870914">v</span><span class="op" id="2870915">.</span><span class="ident" id="2870916">ptr</span><span class="op" id="2870919">,</span>&nbsp;<span class="op" id="2870921">(</span><span class="ident" id="2870922">v</span><span class="op" id="2870923">.</span><span class="ident" id="2870924">flag</span>&nbsp;<span class="op" id="2870929">&amp;</span>&nbsp;<span class="ident" id="2870931">flagRO</span><span class="op" id="2870937">)</span>&nbsp;<span class="op" id="2870939">|</span>&nbsp;<span class="ident" id="2870941">flag</span><span class="op" id="2870945">(</span><span class="ident" id="2870946">Ptr</span><span class="op" id="2870949">)</span><span class="op" id="2870950">}</span><br>
<span class="lineno"></span><span class="op" id="2870952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2870955">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2870993">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2871031">func</span>&nbsp;<span class="op" id="2871036">(</span><span class="ident" id="2871037">v</span>&nbsp;<span class="ident" id="2871039">Value</span><span class="op" id="2871044">)</span>&nbsp;<span class="ident" id="2871046">Bool</span><span class="op" id="2871050">(</span><span class="op" id="2871051">)</span>&nbsp;<span class="builtintype" id="2871053">bool</span>&nbsp;<span class="op" id="2871058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2871061">v</span><span class="op" id="2871062">.</span><span class="ident" id="2871063">mustBe</span><span class="op" id="2871069">(</span><span class="ident" id="2871070">Bool</span><span class="op" id="2871074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2871077">return</span>&nbsp;<span class="op" id="2871084">*</span><span class="op" id="2871085">(</span><span class="op" id="2871086">*</span><span class="builtintype" id="2871087">bool</span><span class="op" id="2871091">)</span><span class="op" id="2871092">(</span><span class="ident" id="2871093">v</span><span class="op" id="2871094">.</span><span class="ident" id="2871095">ptr</span><span class="op" id="2871098">)</span><br>
<span class="lineno"></span><span class="op" id="2871100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2871103">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2871142">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2871204">func</span>&nbsp;<span class="op" id="2871209">(</span><span class="ident" id="2871210">v</span>&nbsp;<span class="ident" id="2871212">Value</span><span class="op" id="2871217">)</span>&nbsp;<span class="ident" id="2871219">Bytes</span><span class="op" id="2871224">(</span><span class="op" id="2871225">)</span>&nbsp;<span class="op" id="2871227">[</span><span class="op" id="2871228">]</span><span class="builtintype" id="2871229">byte</span>&nbsp;<span class="op" id="2871234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2871237">v</span><span class="op" id="2871238">.</span><span class="ident" id="2871239">mustBe</span><span class="op" id="2871245">(</span><span class="ident" id="2871246">Slice</span><span class="op" id="2871251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2871254">if</span>&nbsp;<span class="ident" id="2871257">v</span><span class="op" id="2871258">.</span><span class="ident" id="2871259">typ</span><span class="op" id="2871262">.</span><span class="ident" id="2871263">Elem</span><span class="op" id="2871267">(</span><span class="op" id="2871268">)</span><span class="op" id="2871269">.</span><span class="ident" id="2871270">Kind</span><span class="op" id="2871274">(</span><span class="op" id="2871275">)</span>&nbsp;<span class="op" id="2871277">!=</span>&nbsp;<span class="ident" id="2871280">Uint8</span>&nbsp;<span class="op" id="2871286">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2871290">panic</span><span class="op" id="2871295">(</span><span class="string" id="2871296">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2871335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2871341">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2871399">return</span>&nbsp;<span class="op" id="2871406">*</span><span class="op" id="2871407">(</span><span class="op" id="2871408">*</span><span class="op" id="2871409">[</span><span class="op" id="2871410">]</span><span class="builtintype" id="2871411">byte</span><span class="op" id="2871415">)</span><span class="op" id="2871416">(</span><span class="ident" id="2871417">v</span><span class="op" id="2871418">.</span><span class="ident" id="2871419">ptr</span><span class="op" id="2871422">)</span><br>
<span class="lineno"></span><span class="op" id="2871424">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2871427">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2871466">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2871537">func</span>&nbsp;<span class="op" id="2871542">(</span><span class="ident" id="2871543">v</span>&nbsp;<span class="ident" id="2871545">Value</span><span class="op" id="2871550">)</span>&nbsp;<span class="ident" id="2871552">runes</span><span class="op" id="2871557">(</span><span class="op" id="2871558">)</span>&nbsp;<span class="op" id="2871560">[</span><span class="op" id="2871561">]</span><span class="builtintype" id="2871562">rune</span>&nbsp;<span class="op" id="2871567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2871570">v</span><span class="op" id="2871571">.</span><span class="ident" id="2871572">mustBe</span><span class="op" id="2871578">(</span><span class="ident" id="2871579">Slice</span><span class="op" id="2871584">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2871587">if</span>&nbsp;<span class="ident" id="2871590">v</span><span class="op" id="2871591">.</span><span class="ident" id="2871592">typ</span><span class="op" id="2871595">.</span><span class="ident" id="2871596">Elem</span><span class="op" id="2871600">(</span><span class="op" id="2871601">)</span><span class="op" id="2871602">.</span><span class="ident" id="2871603">Kind</span><span class="op" id="2871607">(</span><span class="op" id="2871608">)</span>&nbsp;<span class="op" id="2871610">!=</span>&nbsp;<span class="ident" id="2871613">Int32</span>&nbsp;<span class="op" id="2871619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2871623">panic</span><span class="op" id="2871628">(</span><span class="string" id="2871629">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2871668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2871674">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2871732">return</span>&nbsp;<span class="op" id="2871739">*</span><span class="op" id="2871740">(</span><span class="op" id="2871741">*</span><span class="op" id="2871742">[</span><span class="op" id="2871743">]</span><span class="builtintype" id="2871744">rune</span><span class="op" id="2871748">)</span><span class="op" id="2871749">(</span><span class="ident" id="2871750">v</span><span class="op" id="2871751">.</span><span class="ident" id="2871752">ptr</span><span class="op" id="2871755">)</span><br>
<span class="lineno">265</span><span class="op" id="2871757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2871760">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2871834">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2871906">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2871968">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2872047">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2872101">func</span>&nbsp;<span class="op" id="2872106">(</span><span class="ident" id="2872107">v</span>&nbsp;<span class="ident" id="2872109">Value</span><span class="op" id="2872114">)</span>&nbsp;<span class="ident" id="2872116">CanAddr</span><span class="op" id="2872123">(</span><span class="op" id="2872124">)</span>&nbsp;<span class="builtintype" id="2872126">bool</span>&nbsp;<span class="op" id="2872131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2872134">return</span>&nbsp;<span class="ident" id="2872141">v</span><span class="op" id="2872142">.</span><span class="ident" id="2872143">flag</span><span class="op" id="2872147">&amp;</span><span class="ident" id="2872148">flagAddr</span>&nbsp;<span class="op" id="2872157">!=</span>&nbsp;<span class="num" id="2872160">0</span><br>
<span class="lineno"></span><span class="op" id="2872162">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2872165">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2872222">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2872286">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2872338">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2872399">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2872447">func</span>&nbsp;<span class="op" id="2872452">(</span><span class="ident" id="2872453">v</span>&nbsp;<span class="ident" id="2872455">Value</span><span class="op" id="2872460">)</span>&nbsp;<span class="ident" id="2872462">CanSet</span><span class="op" id="2872468">(</span><span class="op" id="2872469">)</span>&nbsp;<span class="builtintype" id="2872471">bool</span>&nbsp;<span class="op" id="2872476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2872479">return</span>&nbsp;<span class="ident" id="2872486">v</span><span class="op" id="2872487">.</span><span class="ident" id="2872488">flag</span><span class="op" id="2872492">&amp;</span><span class="op" id="2872493">(</span><span class="ident" id="2872494">flagAddr</span><span class="op" id="2872502">|</span><span class="ident" id="2872503">flagRO</span><span class="op" id="2872509">)</span>&nbsp;<span class="op" id="2872511">==</span>&nbsp;<span class="ident" id="2872514">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2872523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2872526">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2872584">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2872675">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2872715">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2872759">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2872818">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2872875">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2872949">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2872997">func</span>&nbsp;<span class="op" id="2873002">(</span><span class="ident" id="2873003">v</span>&nbsp;<span class="ident" id="2873005">Value</span><span class="op" id="2873010">)</span>&nbsp;<span class="ident" id="2873012">Call</span><span class="op" id="2873016">(</span><span class="ident" id="2873017">in</span>&nbsp;<span class="op" id="2873020">[</span><span class="op" id="2873021">]</span><span class="ident" id="2873022">Value</span><span class="op" id="2873027">)</span>&nbsp;<span class="op" id="2873029">[</span><span class="op" id="2873030">]</span><span class="ident" id="2873031">Value</span>&nbsp;<span class="op" id="2873037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873040">v</span><span class="op" id="2873041">.</span><span class="ident" id="2873042">mustBe</span><span class="op" id="2873048">(</span><span class="ident" id="2873049">Func</span><span class="op" id="2873053">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873056">v</span><span class="op" id="2873057">.</span><span class="ident" id="2873058">mustBeExported</span><span class="op" id="2873072">(</span><span class="op" id="2873073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873076">return</span>&nbsp;<span class="ident" id="2873083">v</span><span class="op" id="2873084">.</span><span class="ident" id="2873085">call</span><span class="op" id="2873089">(</span><span class="string" id="2873090">&#34;Call&#34;</span><span class="op" id="2873096">,</span>&nbsp;<span class="ident" id="2873098">in</span><span class="op" id="2873100">)</span><br>
<span class="lineno"></span><span class="op" id="2873102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2873105">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2873177">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2873246">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2873340">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2873404">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2873448">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2873507">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2873564">func</span>&nbsp;<span class="op" id="2873569">(</span><span class="ident" id="2873570">v</span>&nbsp;<span class="ident" id="2873572">Value</span><span class="op" id="2873577">)</span>&nbsp;<span class="ident" id="2873579">CallSlice</span><span class="op" id="2873588">(</span><span class="ident" id="2873589">in</span>&nbsp;<span class="op" id="2873592">[</span><span class="op" id="2873593">]</span><span class="ident" id="2873594">Value</span><span class="op" id="2873599">)</span>&nbsp;<span class="op" id="2873601">[</span><span class="op" id="2873602">]</span><span class="ident" id="2873603">Value</span>&nbsp;<span class="op" id="2873609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873612">v</span><span class="op" id="2873613">.</span><span class="ident" id="2873614">mustBe</span><span class="op" id="2873620">(</span><span class="ident" id="2873621">Func</span><span class="op" id="2873625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873628">v</span><span class="op" id="2873629">.</span><span class="ident" id="2873630">mustBeExported</span><span class="op" id="2873644">(</span><span class="op" id="2873645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873648">return</span>&nbsp;<span class="ident" id="2873655">v</span><span class="op" id="2873656">.</span><span class="ident" id="2873657">call</span><span class="op" id="2873661">(</span><span class="string" id="2873662">&#34;CallSlice&#34;</span><span class="op" id="2873673">,</span>&nbsp;<span class="ident" id="2873675">in</span><span class="op" id="2873677">)</span><br>
<span class="lineno">310</span><span class="op" id="2873679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2873682">var</span>&nbsp;<span class="ident" id="2873686">callGC</span>&nbsp;<span class="builtintype" id="2873693">bool</span>&nbsp;<span class="comment" id="2873698">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2873738">func</span>&nbsp;<span class="op" id="2873743">(</span><span class="ident" id="2873744">v</span>&nbsp;<span class="ident" id="2873746">Value</span><span class="op" id="2873751">)</span>&nbsp;<span class="ident" id="2873753">call</span><span class="op" id="2873757">(</span><span class="ident" id="2873758">op</span>&nbsp;<span class="builtintype" id="2873761">string</span><span class="op" id="2873767">,</span>&nbsp;<span class="ident" id="2873769">in</span>&nbsp;<span class="op" id="2873772">[</span><span class="op" id="2873773">]</span><span class="ident" id="2873774">Value</span><span class="op" id="2873779">)</span>&nbsp;<span class="op" id="2873781">[</span><span class="op" id="2873782">]</span><span class="ident" id="2873783">Value</span>&nbsp;<span class="op" id="2873789">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2873792">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873824">t</span>&nbsp;<span class="op" id="2873826">:=</span>&nbsp;<span class="ident" id="2873829">v</span><span class="op" id="2873830">.</span><span class="ident" id="2873831">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873836">var</span>&nbsp;<span class="op" id="2873840">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873844">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873853">unsafe</span><span class="op" id="2873859">.</span><span class="ident" id="2873860">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873870">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873879">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873887">rcvrtype</span>&nbsp;<span class="op" id="2873896">*</span><span class="ident" id="2873897">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2873904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873907">if</span>&nbsp;<span class="ident" id="2873910">v</span><span class="op" id="2873911">.</span><span class="ident" id="2873912">flag</span><span class="op" id="2873916">&amp;</span><span class="ident" id="2873917">flagMethod</span>&nbsp;<span class="op" id="2873928">!=</span>&nbsp;<span class="num" id="2873931">0</span>&nbsp;<span class="op" id="2873933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873937">rcvr</span>&nbsp;<span class="op" id="2873942">=</span>&nbsp;<span class="ident" id="2873944">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873948">rcvrtype</span><span class="op" id="2873956">,</span>&nbsp;<span class="ident" id="2873958">t</span><span class="op" id="2873959">,</span>&nbsp;<span class="ident" id="2873961">fn</span>&nbsp;<span class="op" id="2873964">=</span>&nbsp;<span class="ident" id="2873966">methodReceiver</span><span class="op" id="2873980">(</span><span class="ident" id="2873981">op</span><span class="op" id="2873983">,</span>&nbsp;<span class="ident" id="2873985">v</span><span class="op" id="2873986">,</span>&nbsp;<span class="builtintype" id="2873988">int</span><span class="op" id="2873991">(</span><span class="ident" id="2873992">v</span><span class="op" id="2873993">.</span><span class="ident" id="2873994">flag</span><span class="op" id="2873998">)</span><span class="op" id="2873999">&gt;&gt;</span><span class="ident" id="2874001">flagMethodShift</span><span class="op" id="2874016">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874019">}</span>&nbsp;<span class="keyword" id="2874021">else</span>&nbsp;<span class="keyword" id="2874026">if</span>&nbsp;<span class="ident" id="2874029">v</span><span class="op" id="2874030">.</span><span class="ident" id="2874031">flag</span><span class="op" id="2874035">&amp;</span><span class="ident" id="2874036">flagIndir</span>&nbsp;<span class="op" id="2874046">!=</span>&nbsp;<span class="num" id="2874049">0</span>&nbsp;<span class="op" id="2874051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874055">fn</span>&nbsp;<span class="op" id="2874058">=</span>&nbsp;<span class="op" id="2874060">*</span><span class="op" id="2874061">(</span><span class="op" id="2874062">*</span><span class="ident" id="2874063">unsafe</span><span class="op" id="2874069">.</span><span class="ident" id="2874070">Pointer</span><span class="op" id="2874077">)</span><span class="op" id="2874078">(</span><span class="ident" id="2874079">v</span><span class="op" id="2874080">.</span><span class="ident" id="2874081">ptr</span><span class="op" id="2874084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874087">}</span>&nbsp;<span class="keyword" id="2874089">else</span>&nbsp;<span class="op" id="2874094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874098">fn</span>&nbsp;<span class="op" id="2874101">=</span>&nbsp;<span class="ident" id="2874103">v</span><span class="op" id="2874104">.</span><span class="ident" id="2874105">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874110">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874114">if</span>&nbsp;<span class="ident" id="2874117">fn</span>&nbsp;<span class="op" id="2874120">==</span>&nbsp;<span class="ident" id="2874123">nil</span>&nbsp;<span class="op" id="2874127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874131">panic</span><span class="op" id="2874136">(</span><span class="string" id="2874137">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2874179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874186">isSlice</span>&nbsp;<span class="op" id="2874194">:=</span>&nbsp;<span class="ident" id="2874197">op</span>&nbsp;<span class="op" id="2874200">==</span>&nbsp;<span class="string" id="2874203">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874216">n</span>&nbsp;<span class="op" id="2874218">:=</span>&nbsp;<span class="ident" id="2874221">t</span><span class="op" id="2874222">.</span><span class="ident" id="2874223">NumIn</span><span class="op" id="2874228">(</span><span class="op" id="2874229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874232">if</span>&nbsp;<span class="ident" id="2874235">isSlice</span>&nbsp;<span class="op" id="2874243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874247">if</span>&nbsp;<span class="op" id="2874250">!</span><span class="ident" id="2874251">t</span><span class="op" id="2874252">.</span><span class="ident" id="2874253">IsVariadic</span><span class="op" id="2874263">(</span><span class="op" id="2874264">)</span>&nbsp;<span class="op" id="2874266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874271">panic</span><span class="op" id="2874276">(</span><span class="string" id="2874277">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2874322">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874330">if</span>&nbsp;<span class="builtinfunc" id="2874333">len</span><span class="op" id="2874336">(</span><span class="ident" id="2874337">in</span><span class="op" id="2874339">)</span>&nbsp;<span class="op" id="2874341">&lt;</span>&nbsp;<span class="ident" id="2874343">n</span>&nbsp;<span class="op" id="2874345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874350">panic</span><span class="op" id="2874355">(</span><span class="string" id="2874356">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2874405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874413">if</span>&nbsp;<span class="builtinfunc" id="2874416">len</span><span class="op" id="2874419">(</span><span class="ident" id="2874420">in</span><span class="op" id="2874422">)</span>&nbsp;<span class="op" id="2874424">&gt;</span>&nbsp;<span class="ident" id="2874426">n</span>&nbsp;<span class="op" id="2874428">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874433">panic</span><span class="op" id="2874438">(</span><span class="string" id="2874439">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2874489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874496">}</span>&nbsp;<span class="keyword" id="2874498">else</span>&nbsp;<span class="op" id="2874503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874507">if</span>&nbsp;<span class="ident" id="2874510">t</span><span class="op" id="2874511">.</span><span class="ident" id="2874512">IsVariadic</span><span class="op" id="2874522">(</span><span class="op" id="2874523">)</span>&nbsp;<span class="op" id="2874525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874530">n</span><span class="op" id="2874531">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874540">if</span>&nbsp;<span class="builtinfunc" id="2874543">len</span><span class="op" id="2874546">(</span><span class="ident" id="2874547">in</span><span class="op" id="2874549">)</span>&nbsp;<span class="op" id="2874551">&lt;</span>&nbsp;<span class="ident" id="2874553">n</span>&nbsp;<span class="op" id="2874555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874560">panic</span><span class="op" id="2874565">(</span><span class="string" id="2874566">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2874610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874618">if</span>&nbsp;<span class="op" id="2874621">!</span><span class="ident" id="2874622">t</span><span class="op" id="2874623">.</span><span class="ident" id="2874624">IsVariadic</span><span class="op" id="2874634">(</span><span class="op" id="2874635">)</span>&nbsp;<span class="op" id="2874637">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2874640">len</span><span class="op" id="2874643">(</span><span class="ident" id="2874644">in</span><span class="op" id="2874646">)</span>&nbsp;<span class="op" id="2874648">&gt;</span>&nbsp;<span class="ident" id="2874650">n</span>&nbsp;<span class="op" id="2874652">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874657">panic</span><span class="op" id="2874662">(</span><span class="string" id="2874663">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2874708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874718">for</span>&nbsp;<span class="ident" id="2874722">_</span><span class="op" id="2874723">,</span>&nbsp;<span class="ident" id="2874725">x</span>&nbsp;<span class="op" id="2874727">:=</span>&nbsp;<span class="keyword" id="2874730">range</span>&nbsp;<span class="ident" id="2874736">in</span>&nbsp;<span class="op" id="2874739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874743">if</span>&nbsp;<span class="ident" id="2874746">x</span><span class="op" id="2874747">.</span><span class="ident" id="2874748">Kind</span><span class="op" id="2874752">(</span><span class="op" id="2874753">)</span>&nbsp;<span class="op" id="2874755">==</span>&nbsp;<span class="ident" id="2874758">Invalid</span>&nbsp;<span class="op" id="2874766">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874771">panic</span><span class="op" id="2874776">(</span><span class="string" id="2874777">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2874789">+</span>&nbsp;<span class="ident" id="2874791">op</span>&nbsp;<span class="op" id="2874794">+</span>&nbsp;<span class="string" id="2874796">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2874824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874834">for</span>&nbsp;<span class="ident" id="2874838">i</span>&nbsp;<span class="op" id="2874840">:=</span>&nbsp;<span class="num" id="2874843">0</span><span class="op" id="2874844">;</span>&nbsp;<span class="ident" id="2874846">i</span>&nbsp;<span class="op" id="2874848">&lt;</span>&nbsp;<span class="ident" id="2874850">n</span><span class="op" id="2874851">;</span>&nbsp;<span class="ident" id="2874853">i</span><span class="op" id="2874854">++</span>&nbsp;<span class="op" id="2874857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874861">if</span>&nbsp;<span class="ident" id="2874864">xt</span><span class="op" id="2874866">,</span>&nbsp;<span class="ident" id="2874868">targ</span>&nbsp;<span class="op" id="2874873">:=</span>&nbsp;<span class="ident" id="2874876">in</span><span class="op" id="2874878">[</span><span class="ident" id="2874879">i</span><span class="op" id="2874880">]</span><span class="op" id="2874881">.</span><span class="ident" id="2874882">Type</span><span class="op" id="2874886">(</span><span class="op" id="2874887">)</span><span class="op" id="2874888">,</span>&nbsp;<span class="ident" id="2874890">t</span><span class="op" id="2874891">.</span><span class="ident" id="2874892">In</span><span class="op" id="2874894">(</span><span class="ident" id="2874895">i</span><span class="op" id="2874896">)</span><span class="op" id="2874897">;</span>&nbsp;<span class="op" id="2874899">!</span><span class="ident" id="2874900">xt</span><span class="op" id="2874902">.</span><span class="ident" id="2874903">AssignableTo</span><span class="op" id="2874915">(</span><span class="ident" id="2874916">targ</span><span class="op" id="2874920">)</span>&nbsp;<span class="op" id="2874922">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874927">panic</span><span class="op" id="2874932">(</span><span class="string" id="2874933">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2874945">+</span>&nbsp;<span class="ident" id="2874947">op</span>&nbsp;<span class="op" id="2874950">+</span>&nbsp;<span class="string" id="2874952">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2874962">+</span>&nbsp;<span class="ident" id="2874964">xt</span><span class="op" id="2874966">.</span><span class="ident" id="2874967">String</span><span class="op" id="2874973">(</span><span class="op" id="2874974">)</span>&nbsp;<span class="op" id="2874976">+</span>&nbsp;<span class="string" id="2874978">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2874990">+</span>&nbsp;<span class="ident" id="2874992">targ</span><span class="op" id="2874996">.</span><span class="ident" id="2874997">String</span><span class="op" id="2875003">(</span><span class="op" id="2875004">)</span><span class="op" id="2875005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875015">if</span>&nbsp;<span class="op" id="2875018">!</span><span class="ident" id="2875019">isSlice</span>&nbsp;<span class="op" id="2875027">&amp;&amp;</span>&nbsp;<span class="ident" id="2875030">t</span><span class="op" id="2875031">.</span><span class="ident" id="2875032">IsVariadic</span><span class="op" id="2875042">(</span><span class="op" id="2875043">)</span>&nbsp;<span class="op" id="2875045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2875049">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875089">m</span>&nbsp;<span class="op" id="2875091">:=</span>&nbsp;<span class="builtinfunc" id="2875094">len</span><span class="op" id="2875097">(</span><span class="ident" id="2875098">in</span><span class="op" id="2875100">)</span>&nbsp;<span class="op" id="2875102">-</span>&nbsp;<span class="ident" id="2875104">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875108">slice</span>&nbsp;<span class="op" id="2875114">:=</span>&nbsp;<span class="ident" id="2875117">MakeSlice</span><span class="op" id="2875126">(</span><span class="ident" id="2875127">t</span><span class="op" id="2875128">.</span><span class="ident" id="2875129">In</span><span class="op" id="2875131">(</span><span class="ident" id="2875132">n</span><span class="op" id="2875133">)</span><span class="op" id="2875134">,</span>&nbsp;<span class="ident" id="2875136">m</span><span class="op" id="2875137">,</span>&nbsp;<span class="ident" id="2875139">m</span><span class="op" id="2875140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875144">elem</span>&nbsp;<span class="op" id="2875149">:=</span>&nbsp;<span class="ident" id="2875152">t</span><span class="op" id="2875153">.</span><span class="ident" id="2875154">In</span><span class="op" id="2875156">(</span><span class="ident" id="2875157">n</span><span class="op" id="2875158">)</span><span class="op" id="2875159">.</span><span class="ident" id="2875160">Elem</span><span class="op" id="2875164">(</span><span class="op" id="2875165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875169">for</span>&nbsp;<span class="ident" id="2875173">i</span>&nbsp;<span class="op" id="2875175">:=</span>&nbsp;<span class="num" id="2875178">0</span><span class="op" id="2875179">;</span>&nbsp;<span class="ident" id="2875181">i</span>&nbsp;<span class="op" id="2875183">&lt;</span>&nbsp;<span class="ident" id="2875185">m</span><span class="op" id="2875186">;</span>&nbsp;<span class="ident" id="2875188">i</span><span class="op" id="2875189">++</span>&nbsp;<span class="op" id="2875192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875197">x</span>&nbsp;<span class="op" id="2875199">:=</span>&nbsp;<span class="ident" id="2875202">in</span><span class="op" id="2875204">[</span><span class="ident" id="2875205">n</span><span class="op" id="2875206">+</span><span class="ident" id="2875207">i</span><span class="op" id="2875208">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875213">if</span>&nbsp;<span class="ident" id="2875216">xt</span>&nbsp;<span class="op" id="2875219">:=</span>&nbsp;<span class="ident" id="2875222">x</span><span class="op" id="2875223">.</span><span class="ident" id="2875224">Type</span><span class="op" id="2875228">(</span><span class="op" id="2875229">)</span><span class="op" id="2875230">;</span>&nbsp;<span class="op" id="2875232">!</span><span class="ident" id="2875233">xt</span><span class="op" id="2875235">.</span><span class="ident" id="2875236">AssignableTo</span><span class="op" id="2875248">(</span><span class="ident" id="2875249">elem</span><span class="op" id="2875253">)</span>&nbsp;<span class="op" id="2875255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2875261">panic</span><span class="op" id="2875266">(</span><span class="string" id="2875267">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2875290">+</span>&nbsp;<span class="ident" id="2875292">xt</span><span class="op" id="2875294">.</span><span class="ident" id="2875295">String</span><span class="op" id="2875301">(</span><span class="op" id="2875302">)</span>&nbsp;<span class="op" id="2875304">+</span>&nbsp;<span class="string" id="2875306">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2875318">+</span>&nbsp;<span class="ident" id="2875320">elem</span><span class="op" id="2875324">.</span><span class="ident" id="2875325">String</span><span class="op" id="2875331">(</span><span class="op" id="2875332">)</span>&nbsp;<span class="op" id="2875334">+</span>&nbsp;<span class="string" id="2875336">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2875343">+</span>&nbsp;<span class="ident" id="2875345">op</span><span class="op" id="2875347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875357">slice</span><span class="op" id="2875362">.</span><span class="ident" id="2875363">Index</span><span class="op" id="2875368">(</span><span class="ident" id="2875369">i</span><span class="op" id="2875370">)</span><span class="op" id="2875371">.</span><span class="ident" id="2875372">Set</span><span class="op" id="2875375">(</span><span class="ident" id="2875376">x</span><span class="op" id="2875377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875381">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875385">origIn</span>&nbsp;<span class="op" id="2875392">:=</span>&nbsp;<span class="ident" id="2875395">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875400">in</span>&nbsp;<span class="op" id="2875403">=</span>&nbsp;<span class="builtinfunc" id="2875405">make</span><span class="op" id="2875409">(</span><span class="op" id="2875410">[</span><span class="op" id="2875411">]</span><span class="ident" id="2875412">Value</span><span class="op" id="2875417">,</span>&nbsp;<span class="ident" id="2875419">n</span><span class="op" id="2875420">+</span><span class="num" id="2875421">1</span><span class="op" id="2875422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2875426">copy</span><span class="op" id="2875430">(</span><span class="ident" id="2875431">in</span><span class="op" id="2875433">[</span><span class="op" id="2875434">:</span><span class="ident" id="2875435">n</span><span class="op" id="2875436">]</span><span class="op" id="2875437">,</span>&nbsp;<span class="ident" id="2875439">origIn</span><span class="op" id="2875445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875449">in</span><span class="op" id="2875451">[</span><span class="ident" id="2875452">n</span><span class="op" id="2875453">]</span>&nbsp;<span class="op" id="2875455">=</span>&nbsp;<span class="ident" id="2875457">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875464">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875468">nin</span>&nbsp;<span class="op" id="2875472">:=</span>&nbsp;<span class="builtinfunc" id="2875475">len</span><span class="op" id="2875478">(</span><span class="ident" id="2875479">in</span><span class="op" id="2875481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875484">if</span>&nbsp;<span class="ident" id="2875487">nin</span>&nbsp;<span class="op" id="2875491">!=</span>&nbsp;<span class="ident" id="2875494">t</span><span class="op" id="2875495">.</span><span class="ident" id="2875496">NumIn</span><span class="op" id="2875501">(</span><span class="op" id="2875502">)</span>&nbsp;<span class="op" id="2875504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2875508">panic</span><span class="op" id="2875513">(</span><span class="string" id="2875514">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2875556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875559">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875562">nout</span>&nbsp;<span class="op" id="2875567">:=</span>&nbsp;<span class="ident" id="2875570">t</span><span class="op" id="2875571">.</span><span class="ident" id="2875572">NumOut</span><span class="op" id="2875578">(</span><span class="op" id="2875579">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2875583">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875644">frametype</span><span class="op" id="2875653">,</span>&nbsp;<span class="ident" id="2875655">_</span><span class="op" id="2875656">,</span>&nbsp;<span class="ident" id="2875658">retOffset</span><span class="op" id="2875667">,</span>&nbsp;<span class="ident" id="2875669">_</span>&nbsp;<span class="op" id="2875671">:=</span>&nbsp;<span class="ident" id="2875674">funcLayout</span><span class="op" id="2875684">(</span><span class="ident" id="2875685">t</span><span class="op" id="2875686">,</span>&nbsp;<span class="ident" id="2875688">rcvrtype</span><span class="op" id="2875696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875699">args</span>&nbsp;<span class="op" id="2875704">:=</span>&nbsp;<span class="ident" id="2875707">unsafe_New</span><span class="op" id="2875717">(</span><span class="ident" id="2875718">frametype</span><span class="op" id="2875727">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875730">off</span>&nbsp;<span class="op" id="2875734">:=</span>&nbsp;<span class="builtintype" id="2875737">uintptr</span><span class="op" id="2875744">(</span><span class="num" id="2875745">0</span><span class="op" id="2875746">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2875750">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875777">if</span>&nbsp;<span class="ident" id="2875780">rcvrtype</span>&nbsp;<span class="op" id="2875789">!=</span>&nbsp;<span class="ident" id="2875792">nil</span>&nbsp;<span class="op" id="2875796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875800">storeRcvr</span><span class="op" id="2875809">(</span><span class="ident" id="2875810">rcvr</span><span class="op" id="2875814">,</span>&nbsp;<span class="ident" id="2875816">args</span><span class="op" id="2875820">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875824">off</span>&nbsp;<span class="op" id="2875828">=</span>&nbsp;<span class="ident" id="2875830">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875842">for</span>&nbsp;<span class="ident" id="2875846">i</span><span class="op" id="2875847">,</span>&nbsp;<span class="ident" id="2875849">v</span>&nbsp;<span class="op" id="2875851">:=</span>&nbsp;<span class="keyword" id="2875854">range</span>&nbsp;<span class="ident" id="2875860">in</span>&nbsp;<span class="op" id="2875863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875867">v</span><span class="op" id="2875868">.</span><span class="ident" id="2875869">mustBeExported</span><span class="op" id="2875883">(</span><span class="op" id="2875884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875888">targ</span>&nbsp;<span class="op" id="2875893">:=</span>&nbsp;<span class="ident" id="2875896">t</span><span class="op" id="2875897">.</span><span class="ident" id="2875898">In</span><span class="op" id="2875900">(</span><span class="ident" id="2875901">i</span><span class="op" id="2875902">)</span><span class="op" id="2875903">.</span><span class="op" id="2875904">(</span><span class="op" id="2875905">*</span><span class="ident" id="2875906">rtype</span><span class="op" id="2875911">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875915">a</span>&nbsp;<span class="op" id="2875917">:=</span>&nbsp;<span class="builtintype" id="2875920">uintptr</span><span class="op" id="2875927">(</span><span class="ident" id="2875928">targ</span><span class="op" id="2875932">.</span><span class="ident" id="2875933">align</span><span class="op" id="2875938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875942">off</span>&nbsp;<span class="op" id="2875946">=</span>&nbsp;<span class="op" id="2875948">(</span><span class="ident" id="2875949">off</span>&nbsp;<span class="op" id="2875953">+</span>&nbsp;<span class="ident" id="2875955">a</span>&nbsp;<span class="op" id="2875957">-</span>&nbsp;<span class="num" id="2875959">1</span><span class="op" id="2875960">)</span>&nbsp;<span class="op" id="2875962">&amp;^</span>&nbsp;<span class="op" id="2875965">(</span><span class="ident" id="2875966">a</span>&nbsp;<span class="op" id="2875968">-</span>&nbsp;<span class="num" id="2875970">1</span><span class="op" id="2875971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875975">n</span>&nbsp;<span class="op" id="2875977">:=</span>&nbsp;<span class="ident" id="2875980">targ</span><span class="op" id="2875984">.</span><span class="ident" id="2875985">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875992">addr</span>&nbsp;<span class="op" id="2875997">:=</span>&nbsp;<span class="ident" id="2876000">unsafe</span><span class="op" id="2876006">.</span><span class="ident" id="2876007">Pointer</span><span class="op" id="2876014">(</span><span class="builtintype" id="2876015">uintptr</span><span class="op" id="2876022">(</span><span class="ident" id="2876023">args</span><span class="op" id="2876027">)</span>&nbsp;<span class="op" id="2876029">+</span>&nbsp;<span class="ident" id="2876031">off</span><span class="op" id="2876034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876038">v</span>&nbsp;<span class="op" id="2876040">=</span>&nbsp;<span class="ident" id="2876042">v</span><span class="op" id="2876043">.</span><span class="ident" id="2876044">assignTo</span><span class="op" id="2876052">(</span><span class="string" id="2876053">&#34;reflect.Value.Call&#34;</span><span class="op" id="2876073">,</span>&nbsp;<span class="ident" id="2876075">targ</span><span class="op" id="2876079">,</span>&nbsp;<span class="ident" id="2876081">addr</span><span class="op" id="2876085">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876089">if</span>&nbsp;<span class="ident" id="2876092">v</span><span class="op" id="2876093">.</span><span class="ident" id="2876094">flag</span><span class="op" id="2876098">&amp;</span><span class="ident" id="2876099">flagIndir</span>&nbsp;<span class="op" id="2876109">!=</span>&nbsp;<span class="num" id="2876112">0</span>&nbsp;<span class="op" id="2876114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876119">memmove</span><span class="op" id="2876126">(</span><span class="ident" id="2876127">addr</span><span class="op" id="2876131">,</span>&nbsp;<span class="ident" id="2876133">v</span><span class="op" id="2876134">.</span><span class="ident" id="2876135">ptr</span><span class="op" id="2876138">,</span>&nbsp;<span class="ident" id="2876140">n</span><span class="op" id="2876141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876145">}</span>&nbsp;<span class="keyword" id="2876147">else</span>&nbsp;<span class="op" id="2876152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876157">*</span><span class="op" id="2876158">(</span><span class="op" id="2876159">*</span><span class="ident" id="2876160">unsafe</span><span class="op" id="2876166">.</span><span class="ident" id="2876167">Pointer</span><span class="op" id="2876174">)</span><span class="op" id="2876175">(</span><span class="ident" id="2876176">addr</span><span class="op" id="2876180">)</span>&nbsp;<span class="op" id="2876182">=</span>&nbsp;<span class="ident" id="2876184">v</span><span class="op" id="2876185">.</span><span class="ident" id="2876186">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876192">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876196">off</span>&nbsp;<span class="op" id="2876200">+=</span>&nbsp;<span class="ident" id="2876203">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876210">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876220">call</span><span class="op" id="2876224">(</span><span class="ident" id="2876225">fn</span><span class="op" id="2876227">,</span>&nbsp;<span class="ident" id="2876229">args</span><span class="op" id="2876233">,</span>&nbsp;<span class="builtintype" id="2876235">uint32</span><span class="op" id="2876241">(</span><span class="ident" id="2876242">frametype</span><span class="op" id="2876251">.</span><span class="ident" id="2876252">size</span><span class="op" id="2876256">)</span><span class="op" id="2876257">,</span>&nbsp;<span class="builtintype" id="2876259">uint32</span><span class="op" id="2876265">(</span><span class="ident" id="2876266">retOffset</span><span class="op" id="2876275">)</span><span class="op" id="2876276">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876280">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876321">if</span>&nbsp;<span class="ident" id="2876324">callGC</span>&nbsp;<span class="op" id="2876331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876335">runtime</span><span class="op" id="2876342">.</span><span class="ident" id="2876343">GC</span><span class="op" id="2876345">(</span><span class="op" id="2876346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876349">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876353">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876389">ret</span>&nbsp;<span class="op" id="2876393">:=</span>&nbsp;<span class="builtinfunc" id="2876396">make</span><span class="op" id="2876400">(</span><span class="op" id="2876401">[</span><span class="op" id="2876402">]</span><span class="ident" id="2876403">Value</span><span class="op" id="2876408">,</span>&nbsp;<span class="ident" id="2876410">nout</span><span class="op" id="2876414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876417">off</span>&nbsp;<span class="op" id="2876421">=</span>&nbsp;<span class="ident" id="2876423">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876434">for</span>&nbsp;<span class="ident" id="2876438">i</span>&nbsp;<span class="op" id="2876440">:=</span>&nbsp;<span class="num" id="2876443">0</span><span class="op" id="2876444">;</span>&nbsp;<span class="ident" id="2876446">i</span>&nbsp;<span class="op" id="2876448">&lt;</span>&nbsp;<span class="ident" id="2876450">nout</span><span class="op" id="2876454">;</span>&nbsp;<span class="ident" id="2876456">i</span><span class="op" id="2876457">++</span>&nbsp;<span class="op" id="2876460">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876464">tv</span>&nbsp;<span class="op" id="2876467">:=</span>&nbsp;<span class="ident" id="2876470">t</span><span class="op" id="2876471">.</span><span class="ident" id="2876472">Out</span><span class="op" id="2876475">(</span><span class="ident" id="2876476">i</span><span class="op" id="2876477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876481">a</span>&nbsp;<span class="op" id="2876483">:=</span>&nbsp;<span class="builtintype" id="2876486">uintptr</span><span class="op" id="2876493">(</span><span class="ident" id="2876494">tv</span><span class="op" id="2876496">.</span><span class="ident" id="2876497">Align</span><span class="op" id="2876502">(</span><span class="op" id="2876503">)</span><span class="op" id="2876504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876508">off</span>&nbsp;<span class="op" id="2876512">=</span>&nbsp;<span class="op" id="2876514">(</span><span class="ident" id="2876515">off</span>&nbsp;<span class="op" id="2876519">+</span>&nbsp;<span class="ident" id="2876521">a</span>&nbsp;<span class="op" id="2876523">-</span>&nbsp;<span class="num" id="2876525">1</span><span class="op" id="2876526">)</span>&nbsp;<span class="op" id="2876528">&amp;^</span>&nbsp;<span class="op" id="2876531">(</span><span class="ident" id="2876532">a</span>&nbsp;<span class="op" id="2876534">-</span>&nbsp;<span class="num" id="2876536">1</span><span class="op" id="2876537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876541">fl</span>&nbsp;<span class="op" id="2876544">:=</span>&nbsp;<span class="ident" id="2876547">flagIndir</span>&nbsp;<span class="op" id="2876557">|</span>&nbsp;<span class="ident" id="2876559">flag</span><span class="op" id="2876563">(</span><span class="ident" id="2876564">tv</span><span class="op" id="2876566">.</span><span class="ident" id="2876567">Kind</span><span class="op" id="2876571">(</span><span class="op" id="2876572">)</span><span class="op" id="2876573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876577">ret</span><span class="op" id="2876580">[</span><span class="ident" id="2876581">i</span><span class="op" id="2876582">]</span>&nbsp;<span class="op" id="2876584">=</span>&nbsp;<span class="ident" id="2876586">Value</span><span class="op" id="2876591">{</span><span class="ident" id="2876592">tv</span><span class="op" id="2876594">.</span><span class="ident" id="2876595">common</span><span class="op" id="2876601">(</span><span class="op" id="2876602">)</span><span class="op" id="2876603">,</span>&nbsp;<span class="ident" id="2876605">unsafe</span><span class="op" id="2876611">.</span><span class="ident" id="2876612">Pointer</span><span class="op" id="2876619">(</span><span class="builtintype" id="2876620">uintptr</span><span class="op" id="2876627">(</span><span class="ident" id="2876628">args</span><span class="op" id="2876632">)</span>&nbsp;<span class="op" id="2876634">+</span>&nbsp;<span class="ident" id="2876636">off</span><span class="op" id="2876639">)</span><span class="op" id="2876640">,</span>&nbsp;<span class="ident" id="2876642">fl</span><span class="op" id="2876644">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876648">off</span>&nbsp;<span class="op" id="2876652">+=</span>&nbsp;<span class="ident" id="2876655">tv</span><span class="op" id="2876657">.</span><span class="ident" id="2876658">Size</span><span class="op" id="2876662">(</span><span class="op" id="2876663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876670">return</span>&nbsp;<span class="ident" id="2876677">ret</span><br>
<span class="lineno"></span><span class="op" id="2876681">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2876684">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2876745">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2876809">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2876883">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2876950">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2877020">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2877055">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2877126">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2877193">//</span><br>
<span class="lineno">450</span><span class="comment" id="2877196">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2877272">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2877344">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2877416">func</span>&nbsp;<span class="ident" id="2877421">callReflect</span><span class="op" id="2877432">(</span><span class="ident" id="2877433">ctxt</span>&nbsp;<span class="op" id="2877438">*</span><span class="ident" id="2877439">makeFuncImpl</span><span class="op" id="2877451">,</span>&nbsp;<span class="ident" id="2877453">frame</span>&nbsp;<span class="ident" id="2877459">unsafe</span><span class="op" id="2877465">.</span><span class="ident" id="2877466">Pointer</span><span class="op" id="2877473">)</span>&nbsp;<span class="op" id="2877475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877478">ftyp</span>&nbsp;<span class="op" id="2877483">:=</span>&nbsp;<span class="ident" id="2877486">ctxt</span><span class="op" id="2877490">.</span><span class="ident" id="2877491">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877496">f</span>&nbsp;<span class="op" id="2877498">:=</span>&nbsp;<span class="ident" id="2877501">ctxt</span><span class="op" id="2877505">.</span><span class="ident" id="2877506">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2877511">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877548">ptr</span>&nbsp;<span class="op" id="2877552">:=</span>&nbsp;<span class="ident" id="2877555">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877562">off</span>&nbsp;<span class="op" id="2877566">:=</span>&nbsp;<span class="builtintype" id="2877569">uintptr</span><span class="op" id="2877576">(</span><span class="num" id="2877577">0</span><span class="op" id="2877578">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877581">in</span>&nbsp;<span class="op" id="2877584">:=</span>&nbsp;<span class="builtinfunc" id="2877587">make</span><span class="op" id="2877591">(</span><span class="op" id="2877592">[</span><span class="op" id="2877593">]</span><span class="ident" id="2877594">Value</span><span class="op" id="2877599">,</span>&nbsp;<span class="num" id="2877601">0</span><span class="op" id="2877602">,</span>&nbsp;<span class="builtinfunc" id="2877604">len</span><span class="op" id="2877607">(</span><span class="ident" id="2877608">ftyp</span><span class="op" id="2877612">.</span><span class="ident" id="2877613">in</span><span class="op" id="2877615">)</span><span class="op" id="2877616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877619">for</span>&nbsp;<span class="ident" id="2877623">_</span><span class="op" id="2877624">,</span>&nbsp;<span class="ident" id="2877626">arg</span>&nbsp;<span class="op" id="2877630">:=</span>&nbsp;<span class="keyword" id="2877633">range</span>&nbsp;<span class="ident" id="2877639">ftyp</span><span class="op" id="2877643">.</span><span class="ident" id="2877644">in</span>&nbsp;<span class="op" id="2877647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877651">typ</span>&nbsp;<span class="op" id="2877655">:=</span>&nbsp;<span class="ident" id="2877658">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877664">off</span>&nbsp;<span class="op" id="2877668">+=</span>&nbsp;<span class="op" id="2877671">-</span><span class="ident" id="2877672">off</span>&nbsp;<span class="op" id="2877676">&amp;</span>&nbsp;<span class="builtintype" id="2877678">uintptr</span><span class="op" id="2877685">(</span><span class="ident" id="2877686">typ</span><span class="op" id="2877689">.</span><span class="ident" id="2877690">align</span><span class="op" id="2877695">-</span><span class="num" id="2877696">1</span><span class="op" id="2877697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877701">addr</span>&nbsp;<span class="op" id="2877706">:=</span>&nbsp;<span class="ident" id="2877709">unsafe</span><span class="op" id="2877715">.</span><span class="ident" id="2877716">Pointer</span><span class="op" id="2877723">(</span><span class="builtintype" id="2877724">uintptr</span><span class="op" id="2877731">(</span><span class="ident" id="2877732">ptr</span><span class="op" id="2877735">)</span>&nbsp;<span class="op" id="2877737">+</span>&nbsp;<span class="ident" id="2877739">off</span><span class="op" id="2877742">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877746">v</span>&nbsp;<span class="op" id="2877748">:=</span>&nbsp;<span class="ident" id="2877751">Value</span><span class="op" id="2877756">{</span><span class="ident" id="2877757">typ</span><span class="op" id="2877760">,</span>&nbsp;<span class="ident" id="2877762">nil</span><span class="op" id="2877765">,</span>&nbsp;<span class="ident" id="2877767">flag</span><span class="op" id="2877771">(</span><span class="ident" id="2877772">typ</span><span class="op" id="2877775">.</span><span class="ident" id="2877776">Kind</span><span class="op" id="2877780">(</span><span class="op" id="2877781">)</span><span class="op" id="2877782">)</span><span class="op" id="2877783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877787">if</span>&nbsp;<span class="ident" id="2877790">ifaceIndir</span><span class="op" id="2877800">(</span><span class="ident" id="2877801">typ</span><span class="op" id="2877804">)</span>&nbsp;<span class="op" id="2877806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2877811">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2877860">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2877924">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2877986">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878053">v</span><span class="op" id="2878054">.</span><span class="ident" id="2878055">ptr</span>&nbsp;<span class="op" id="2878059">=</span>&nbsp;<span class="ident" id="2878061">unsafe_New</span><span class="op" id="2878071">(</span><span class="ident" id="2878072">typ</span><span class="op" id="2878075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878080">memmove</span><span class="op" id="2878087">(</span><span class="ident" id="2878088">v</span><span class="op" id="2878089">.</span><span class="ident" id="2878090">ptr</span><span class="op" id="2878093">,</span>&nbsp;<span class="ident" id="2878095">addr</span><span class="op" id="2878099">,</span>&nbsp;<span class="ident" id="2878101">typ</span><span class="op" id="2878104">.</span><span class="ident" id="2878105">size</span><span class="op" id="2878109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878114">v</span><span class="op" id="2878115">.</span><span class="ident" id="2878116">flag</span>&nbsp;<span class="op" id="2878121">|=</span>&nbsp;<span class="ident" id="2878124">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878136">}</span>&nbsp;<span class="keyword" id="2878138">else</span>&nbsp;<span class="op" id="2878143">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878148">v</span><span class="op" id="2878149">.</span><span class="ident" id="2878150">ptr</span>&nbsp;<span class="op" id="2878154">=</span>&nbsp;<span class="op" id="2878156">*</span><span class="op" id="2878157">(</span><span class="op" id="2878158">*</span><span class="ident" id="2878159">unsafe</span><span class="op" id="2878165">.</span><span class="ident" id="2878166">Pointer</span><span class="op" id="2878173">)</span><span class="op" id="2878174">(</span><span class="ident" id="2878175">addr</span><span class="op" id="2878179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878187">in</span>&nbsp;<span class="op" id="2878190">=</span>&nbsp;<span class="builtinfunc" id="2878192">append</span><span class="op" id="2878198">(</span><span class="ident" id="2878199">in</span><span class="op" id="2878201">,</span>&nbsp;<span class="ident" id="2878203">v</span><span class="op" id="2878204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878208">off</span>&nbsp;<span class="op" id="2878212">+=</span>&nbsp;<span class="ident" id="2878215">typ</span><span class="op" id="2878218">.</span><span class="ident" id="2878219">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878225">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878229">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878259">out</span>&nbsp;<span class="op" id="2878263">:=</span>&nbsp;<span class="ident" id="2878266">f</span><span class="op" id="2878267">(</span><span class="ident" id="2878268">in</span><span class="op" id="2878270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878273">if</span>&nbsp;<span class="builtinfunc" id="2878276">len</span><span class="op" id="2878279">(</span><span class="ident" id="2878280">out</span><span class="op" id="2878283">)</span>&nbsp;<span class="op" id="2878285">!=</span>&nbsp;<span class="builtinfunc" id="2878288">len</span><span class="op" id="2878291">(</span><span class="ident" id="2878292">ftyp</span><span class="op" id="2878296">.</span><span class="ident" id="2878297">out</span><span class="op" id="2878300">)</span>&nbsp;<span class="op" id="2878302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2878306">panic</span><span class="op" id="2878311">(</span><span class="string" id="2878312">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2878375">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878382">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878425">if</span>&nbsp;<span class="builtinfunc" id="2878428">len</span><span class="op" id="2878431">(</span><span class="ident" id="2878432">ftyp</span><span class="op" id="2878436">.</span><span class="ident" id="2878437">out</span><span class="op" id="2878440">)</span>&nbsp;<span class="op" id="2878442">&gt;</span>&nbsp;<span class="num" id="2878444">0</span>&nbsp;<span class="op" id="2878446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878450">off</span>&nbsp;<span class="op" id="2878454">+=</span>&nbsp;<span class="op" id="2878457">-</span><span class="ident" id="2878458">off</span>&nbsp;<span class="op" id="2878462">&amp;</span>&nbsp;<span class="op" id="2878464">(</span><span class="ident" id="2878465">ptrSize</span>&nbsp;<span class="op" id="2878473">-</span>&nbsp;<span class="num" id="2878475">1</span><span class="op" id="2878476">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878480">if</span>&nbsp;<span class="ident" id="2878483">runtime</span><span class="op" id="2878490">.</span><span class="ident" id="2878491">GOARCH</span>&nbsp;<span class="op" id="2878498">==</span>&nbsp;<span class="string" id="2878501">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2878512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878517">off</span>&nbsp;<span class="op" id="2878521">=</span>&nbsp;<span class="ident" id="2878523">align</span><span class="op" id="2878528">(</span><span class="ident" id="2878529">off</span><span class="op" id="2878532">,</span>&nbsp;<span class="num" id="2878534">8</span><span class="op" id="2878535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878543">for</span>&nbsp;<span class="ident" id="2878547">i</span><span class="op" id="2878548">,</span>&nbsp;<span class="ident" id="2878550">arg</span>&nbsp;<span class="op" id="2878554">:=</span>&nbsp;<span class="keyword" id="2878557">range</span>&nbsp;<span class="ident" id="2878563">ftyp</span><span class="op" id="2878567">.</span><span class="ident" id="2878568">out</span>&nbsp;<span class="op" id="2878572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878577">typ</span>&nbsp;<span class="op" id="2878581">:=</span>&nbsp;<span class="ident" id="2878584">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878591">v</span>&nbsp;<span class="op" id="2878593">:=</span>&nbsp;<span class="ident" id="2878596">out</span><span class="op" id="2878599">[</span><span class="ident" id="2878600">i</span><span class="op" id="2878601">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878606">if</span>&nbsp;<span class="ident" id="2878609">v</span><span class="op" id="2878610">.</span><span class="ident" id="2878611">typ</span>&nbsp;<span class="op" id="2878615">!=</span>&nbsp;<span class="ident" id="2878618">typ</span>&nbsp;<span class="op" id="2878622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2878628">panic</span><span class="op" id="2878633">(</span><span class="string" id="2878634">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2878681">+</span>&nbsp;<span class="ident" id="2878683">funcName</span><span class="op" id="2878691">(</span><span class="ident" id="2878692">f</span><span class="op" id="2878693">)</span>&nbsp;<span class="op" id="2878695">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2878702">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2878732">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878739">out</span><span class="op" id="2878742">[</span><span class="ident" id="2878743">i</span><span class="op" id="2878744">]</span><span class="op" id="2878745">.</span><span class="ident" id="2878746">typ</span><span class="op" id="2878749">.</span><span class="ident" id="2878750">String</span><span class="op" id="2878756">(</span><span class="op" id="2878757">)</span>&nbsp;<span class="op" id="2878759">+</span>&nbsp;<span class="string" id="2878761">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2878769">+</span>&nbsp;<span class="ident" id="2878771">typ</span><span class="op" id="2878774">.</span><span class="ident" id="2878775">String</span><span class="op" id="2878781">(</span><span class="op" id="2878782">)</span><span class="op" id="2878783">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878793">if</span>&nbsp;<span class="ident" id="2878796">v</span><span class="op" id="2878797">.</span><span class="ident" id="2878798">flag</span><span class="op" id="2878802">&amp;</span><span class="ident" id="2878803">flagRO</span>&nbsp;<span class="op" id="2878810">!=</span>&nbsp;<span class="num" id="2878813">0</span>&nbsp;<span class="op" id="2878815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2878821">panic</span><span class="op" id="2878826">(</span><span class="string" id="2878827">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2878874">+</span>&nbsp;<span class="ident" id="2878876">funcName</span><span class="op" id="2878884">(</span><span class="ident" id="2878885">f</span><span class="op" id="2878886">)</span>&nbsp;<span class="op" id="2878888">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2878895">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2878943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878948">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878953">off</span>&nbsp;<span class="op" id="2878957">+=</span>&nbsp;<span class="op" id="2878960">-</span><span class="ident" id="2878961">off</span>&nbsp;<span class="op" id="2878965">&amp;</span>&nbsp;<span class="builtintype" id="2878967">uintptr</span><span class="op" id="2878974">(</span><span class="ident" id="2878975">typ</span><span class="op" id="2878978">.</span><span class="ident" id="2878979">align</span><span class="op" id="2878984">-</span><span class="num" id="2878985">1</span><span class="op" id="2878986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878991">addr</span>&nbsp;<span class="op" id="2878996">:=</span>&nbsp;<span class="ident" id="2878999">unsafe</span><span class="op" id="2879005">.</span><span class="ident" id="2879006">Pointer</span><span class="op" id="2879013">(</span><span class="builtintype" id="2879014">uintptr</span><span class="op" id="2879021">(</span><span class="ident" id="2879022">ptr</span><span class="op" id="2879025">)</span>&nbsp;<span class="op" id="2879027">+</span>&nbsp;<span class="ident" id="2879029">off</span><span class="op" id="2879032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879037">if</span>&nbsp;<span class="ident" id="2879040">v</span><span class="op" id="2879041">.</span><span class="ident" id="2879042">flag</span><span class="op" id="2879046">&amp;</span><span class="ident" id="2879047">flagIndir</span>&nbsp;<span class="op" id="2879057">!=</span>&nbsp;<span class="num" id="2879060">0</span>&nbsp;<span class="op" id="2879062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879068">memmove</span><span class="op" id="2879075">(</span><span class="ident" id="2879076">addr</span><span class="op" id="2879080">,</span>&nbsp;<span class="ident" id="2879082">v</span><span class="op" id="2879083">.</span><span class="ident" id="2879084">ptr</span><span class="op" id="2879087">,</span>&nbsp;<span class="ident" id="2879089">typ</span><span class="op" id="2879092">.</span><span class="ident" id="2879093">size</span><span class="op" id="2879097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879102">}</span>&nbsp;<span class="keyword" id="2879104">else</span>&nbsp;<span class="op" id="2879109">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879115">*</span><span class="op" id="2879116">(</span><span class="op" id="2879117">*</span><span class="ident" id="2879118">unsafe</span><span class="op" id="2879124">.</span><span class="ident" id="2879125">Pointer</span><span class="op" id="2879132">)</span><span class="op" id="2879133">(</span><span class="ident" id="2879134">addr</span><span class="op" id="2879138">)</span>&nbsp;<span class="op" id="2879140">=</span>&nbsp;<span class="ident" id="2879142">v</span><span class="op" id="2879143">.</span><span class="ident" id="2879144">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879156">off</span>&nbsp;<span class="op" id="2879160">+=</span>&nbsp;<span class="ident" id="2879163">typ</span><span class="op" id="2879166">.</span><span class="ident" id="2879167">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879177">}</span><br>
<span class="lineno">515</span><span class="op" id="2879179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2879182">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2879239">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2879294">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2879353">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2879369">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2879439">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2879517">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2879573">func</span>&nbsp;<span class="ident" id="2879578">methodReceiver</span><span class="op" id="2879592">(</span><span class="ident" id="2879593">op</span>&nbsp;<span class="builtintype" id="2879596">string</span><span class="op" id="2879602">,</span>&nbsp;<span class="ident" id="2879604">v</span>&nbsp;<span class="ident" id="2879606">Value</span><span class="op" id="2879611">,</span>&nbsp;<span class="ident" id="2879613">methodIndex</span>&nbsp;<span class="builtintype" id="2879625">int</span><span class="op" id="2879628">)</span>&nbsp;<span class="op" id="2879630">(</span><span class="ident" id="2879631">rcvrtype</span><span class="op" id="2879639">,</span>&nbsp;<span class="ident" id="2879641">t</span>&nbsp;<span class="op" id="2879643">*</span><span class="ident" id="2879644">rtype</span><span class="op" id="2879649">,</span>&nbsp;<span class="ident" id="2879651">fn</span>&nbsp;<span class="ident" id="2879654">unsafe</span><span class="op" id="2879660">.</span><span class="ident" id="2879661">Pointer</span><span class="op" id="2879668">)</span>&nbsp;<span class="op" id="2879670">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879673">i</span>&nbsp;<span class="op" id="2879675">:=</span>&nbsp;<span class="ident" id="2879678">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879691">if</span>&nbsp;<span class="ident" id="2879694">v</span><span class="op" id="2879695">.</span><span class="ident" id="2879696">typ</span><span class="op" id="2879699">.</span><span class="ident" id="2879700">Kind</span><span class="op" id="2879704">(</span><span class="op" id="2879705">)</span>&nbsp;<span class="op" id="2879707">==</span>&nbsp;<span class="ident" id="2879710">Interface</span>&nbsp;<span class="op" id="2879720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879724">tt</span>&nbsp;<span class="op" id="2879727">:=</span>&nbsp;<span class="op" id="2879730">(</span><span class="op" id="2879731">*</span><span class="ident" id="2879732">interfaceType</span><span class="op" id="2879745">)</span><span class="op" id="2879746">(</span><span class="ident" id="2879747">unsafe</span><span class="op" id="2879753">.</span><span class="ident" id="2879754">Pointer</span><span class="op" id="2879761">(</span><span class="ident" id="2879762">v</span><span class="op" id="2879763">.</span><span class="ident" id="2879764">typ</span><span class="op" id="2879767">)</span><span class="op" id="2879768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879772">if</span>&nbsp;<span class="builtintype" id="2879775">uint</span><span class="op" id="2879779">(</span><span class="ident" id="2879780">i</span><span class="op" id="2879781">)</span>&nbsp;<span class="op" id="2879783">&gt;=</span>&nbsp;<span class="builtintype" id="2879786">uint</span><span class="op" id="2879790">(</span><span class="builtinfunc" id="2879791">len</span><span class="op" id="2879794">(</span><span class="ident" id="2879795">tt</span><span class="op" id="2879797">.</span><span class="ident" id="2879798">methods</span><span class="op" id="2879805">)</span><span class="op" id="2879806">)</span>&nbsp;<span class="op" id="2879808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2879813">panic</span><span class="op" id="2879818">(</span><span class="string" id="2879819">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2879866">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879874">m</span>&nbsp;<span class="op" id="2879876">:=</span>&nbsp;<span class="op" id="2879879">&amp;</span><span class="ident" id="2879880">tt</span><span class="op" id="2879882">.</span><span class="ident" id="2879883">methods</span><span class="op" id="2879890">[</span><span class="ident" id="2879891">i</span><span class="op" id="2879892">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879896">if</span>&nbsp;<span class="ident" id="2879899">m</span><span class="op" id="2879900">.</span><span class="ident" id="2879901">pkgPath</span>&nbsp;<span class="op" id="2879909">!=</span>&nbsp;<span class="ident" id="2879912">nil</span>&nbsp;<span class="op" id="2879916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2879921">panic</span><span class="op" id="2879926">(</span><span class="string" id="2879927">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2879939">+</span>&nbsp;<span class="ident" id="2879941">op</span>&nbsp;<span class="op" id="2879944">+</span>&nbsp;<span class="string" id="2879946">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2879969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879973">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879977">iface</span>&nbsp;<span class="op" id="2879983">:=</span>&nbsp;<span class="op" id="2879986">(</span><span class="op" id="2879987">*</span><span class="ident" id="2879988">nonEmptyInterface</span><span class="op" id="2880005">)</span><span class="op" id="2880006">(</span><span class="ident" id="2880007">v</span><span class="op" id="2880008">.</span><span class="ident" id="2880009">ptr</span><span class="op" id="2880012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880016">if</span>&nbsp;<span class="ident" id="2880019">iface</span><span class="op" id="2880024">.</span><span class="ident" id="2880025">itab</span>&nbsp;<span class="op" id="2880030">==</span>&nbsp;<span class="ident" id="2880033">nil</span>&nbsp;<span class="op" id="2880037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2880042">panic</span><span class="op" id="2880047">(</span><span class="string" id="2880048">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2880060">+</span>&nbsp;<span class="ident" id="2880062">op</span>&nbsp;<span class="op" id="2880065">+</span>&nbsp;<span class="string" id="2880067">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2880102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880110">rcvrtype</span>&nbsp;<span class="op" id="2880119">=</span>&nbsp;<span class="ident" id="2880121">iface</span><span class="op" id="2880126">.</span><span class="ident" id="2880127">itab</span><span class="op" id="2880131">.</span><span class="ident" id="2880132">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880138">fn</span>&nbsp;<span class="op" id="2880141">=</span>&nbsp;<span class="ident" id="2880143">unsafe</span><span class="op" id="2880149">.</span><span class="ident" id="2880150">Pointer</span><span class="op" id="2880157">(</span><span class="op" id="2880158">&amp;</span><span class="ident" id="2880159">iface</span><span class="op" id="2880164">.</span><span class="ident" id="2880165">itab</span><span class="op" id="2880169">.</span><span class="ident" id="2880170">fun</span><span class="op" id="2880173">[</span><span class="ident" id="2880174">i</span><span class="op" id="2880175">]</span><span class="op" id="2880176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880180">t</span>&nbsp;<span class="op" id="2880182">=</span>&nbsp;<span class="ident" id="2880184">m</span><span class="op" id="2880185">.</span><span class="ident" id="2880186">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880191">}</span>&nbsp;<span class="keyword" id="2880193">else</span>&nbsp;<span class="op" id="2880198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880202">rcvrtype</span>&nbsp;<span class="op" id="2880211">=</span>&nbsp;<span class="ident" id="2880213">v</span><span class="op" id="2880214">.</span><span class="ident" id="2880215">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880221">ut</span>&nbsp;<span class="op" id="2880224">:=</span>&nbsp;<span class="ident" id="2880227">v</span><span class="op" id="2880228">.</span><span class="ident" id="2880229">typ</span><span class="op" id="2880232">.</span><span class="ident" id="2880233">uncommon</span><span class="op" id="2880241">(</span><span class="op" id="2880242">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880246">if</span>&nbsp;<span class="ident" id="2880249">ut</span>&nbsp;<span class="op" id="2880252">==</span>&nbsp;<span class="ident" id="2880255">nil</span>&nbsp;<span class="op" id="2880259">||</span>&nbsp;<span class="builtintype" id="2880262">uint</span><span class="op" id="2880266">(</span><span class="ident" id="2880267">i</span><span class="op" id="2880268">)</span>&nbsp;<span class="op" id="2880270">&gt;=</span>&nbsp;<span class="builtintype" id="2880273">uint</span><span class="op" id="2880277">(</span><span class="builtinfunc" id="2880278">len</span><span class="op" id="2880281">(</span><span class="ident" id="2880282">ut</span><span class="op" id="2880284">.</span><span class="ident" id="2880285">methods</span><span class="op" id="2880292">)</span><span class="op" id="2880293">)</span>&nbsp;<span class="op" id="2880295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2880300">panic</span><span class="op" id="2880305">(</span><span class="string" id="2880306">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2880353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880361">m</span>&nbsp;<span class="op" id="2880363">:=</span>&nbsp;<span class="op" id="2880366">&amp;</span><span class="ident" id="2880367">ut</span><span class="op" id="2880369">.</span><span class="ident" id="2880370">methods</span><span class="op" id="2880377">[</span><span class="ident" id="2880378">i</span><span class="op" id="2880379">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880383">if</span>&nbsp;<span class="ident" id="2880386">m</span><span class="op" id="2880387">.</span><span class="ident" id="2880388">pkgPath</span>&nbsp;<span class="op" id="2880396">!=</span>&nbsp;<span class="ident" id="2880399">nil</span>&nbsp;<span class="op" id="2880403">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2880408">panic</span><span class="op" id="2880413">(</span><span class="string" id="2880414">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2880426">+</span>&nbsp;<span class="ident" id="2880428">op</span>&nbsp;<span class="op" id="2880431">+</span>&nbsp;<span class="string" id="2880433">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2880456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880464">fn</span>&nbsp;<span class="op" id="2880467">=</span>&nbsp;<span class="ident" id="2880469">unsafe</span><span class="op" id="2880475">.</span><span class="ident" id="2880476">Pointer</span><span class="op" id="2880483">(</span><span class="op" id="2880484">&amp;</span><span class="ident" id="2880485">m</span><span class="op" id="2880486">.</span><span class="ident" id="2880487">ifn</span><span class="op" id="2880490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880494">t</span>&nbsp;<span class="op" id="2880496">=</span>&nbsp;<span class="ident" id="2880498">m</span><span class="op" id="2880499">.</span><span class="ident" id="2880500">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880506">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880509">return</span><br>
<span class="lineno"></span><span class="op" id="2880516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2880519">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2880584">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2880643">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2880698">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2880761">func</span>&nbsp;<span class="ident" id="2880766">storeRcvr</span><span class="op" id="2880775">(</span><span class="ident" id="2880776">v</span>&nbsp;<span class="ident" id="2880778">Value</span><span class="op" id="2880783">,</span>&nbsp;<span class="ident" id="2880785">p</span>&nbsp;<span class="ident" id="2880787">unsafe</span><span class="op" id="2880793">.</span><span class="ident" id="2880794">Pointer</span><span class="op" id="2880801">)</span>&nbsp;<span class="op" id="2880803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880806">t</span>&nbsp;<span class="op" id="2880808">:=</span>&nbsp;<span class="ident" id="2880811">v</span><span class="op" id="2880812">.</span><span class="ident" id="2880813">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880818">if</span>&nbsp;<span class="ident" id="2880821">t</span><span class="op" id="2880822">.</span><span class="ident" id="2880823">Kind</span><span class="op" id="2880827">(</span><span class="op" id="2880828">)</span>&nbsp;<span class="op" id="2880830">==</span>&nbsp;<span class="ident" id="2880833">Interface</span>&nbsp;<span class="op" id="2880843">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2880847">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2880902">iface</span>&nbsp;<span class="op" id="2880908">:=</span>&nbsp;<span class="op" id="2880911">(</span><span class="op" id="2880912">*</span><span class="ident" id="2880913">nonEmptyInterface</span><span class="op" id="2880930">)</span><span class="op" id="2880931">(</span><span class="ident" id="2880932">v</span><span class="op" id="2880933">.</span><span class="ident" id="2880934">ptr</span><span class="op" id="2880937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880941">*</span><span class="op" id="2880942">(</span><span class="op" id="2880943">*</span><span class="ident" id="2880944">unsafe</span><span class="op" id="2880950">.</span><span class="ident" id="2880951">Pointer</span><span class="op" id="2880958">)</span><span class="op" id="2880959">(</span><span class="ident" id="2880960">p</span><span class="op" id="2880961">)</span>&nbsp;<span class="op" id="2880963">=</span>&nbsp;<span class="ident" id="2880965">unsafe</span><span class="op" id="2880971">.</span><span class="ident" id="2880972">Pointer</span><span class="op" id="2880979">(</span><span class="ident" id="2880980">iface</span><span class="op" id="2880985">.</span><span class="ident" id="2880986">word</span><span class="op" id="2880990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880993">}</span>&nbsp;<span class="keyword" id="2880995">else</span>&nbsp;<span class="keyword" id="2881000">if</span>&nbsp;<span class="ident" id="2881003">v</span><span class="op" id="2881004">.</span><span class="ident" id="2881005">flag</span><span class="op" id="2881009">&amp;</span><span class="ident" id="2881010">flagIndir</span>&nbsp;<span class="op" id="2881020">!=</span>&nbsp;<span class="num" id="2881023">0</span>&nbsp;<span class="op" id="2881025">&amp;&amp;</span>&nbsp;<span class="op" id="2881028">!</span><span class="ident" id="2881029">ifaceIndir</span><span class="op" id="2881039">(</span><span class="ident" id="2881040">t</span><span class="op" id="2881041">)</span>&nbsp;<span class="op" id="2881043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2881047">*</span><span class="op" id="2881048">(</span><span class="op" id="2881049">*</span><span class="ident" id="2881050">unsafe</span><span class="op" id="2881056">.</span><span class="ident" id="2881057">Pointer</span><span class="op" id="2881064">)</span><span class="op" id="2881065">(</span><span class="ident" id="2881066">p</span><span class="op" id="2881067">)</span>&nbsp;<span class="op" id="2881069">=</span>&nbsp;<span class="op" id="2881071">*</span><span class="op" id="2881072">(</span><span class="op" id="2881073">*</span><span class="ident" id="2881074">unsafe</span><span class="op" id="2881080">.</span><span class="ident" id="2881081">Pointer</span><span class="op" id="2881088">)</span><span class="op" id="2881089">(</span><span class="ident" id="2881090">v</span><span class="op" id="2881091">.</span><span class="ident" id="2881092">ptr</span><span class="op" id="2881095">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2881098">}</span>&nbsp;<span class="keyword" id="2881100">else</span>&nbsp;<span class="op" id="2881105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2881109">*</span><span class="op" id="2881110">(</span><span class="op" id="2881111">*</span><span class="ident" id="2881112">unsafe</span><span class="op" id="2881118">.</span><span class="ident" id="2881119">Pointer</span><span class="op" id="2881126">)</span><span class="op" id="2881127">(</span><span class="ident" id="2881128">p</span><span class="op" id="2881129">)</span>&nbsp;<span class="op" id="2881131">=</span>&nbsp;<span class="ident" id="2881133">v</span><span class="op" id="2881134">.</span><span class="ident" id="2881135">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2881140">}</span><br>
<span class="lineno"></span><span class="op" id="2881142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2881145">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2881210">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2881239">func</span>&nbsp;<span class="ident" id="2881244">align</span><span class="op" id="2881249">(</span><span class="ident" id="2881250">x</span><span class="op" id="2881251">,</span>&nbsp;<span class="ident" id="2881253">n</span>&nbsp;<span class="builtintype" id="2881255">uintptr</span><span class="op" id="2881262">)</span>&nbsp;<span class="builtintype" id="2881264">uintptr</span>&nbsp;<span class="op" id="2881272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2881275">return</span>&nbsp;<span class="op" id="2881282">(</span><span class="ident" id="2881283">x</span>&nbsp;<span class="op" id="2881285">+</span>&nbsp;<span class="ident" id="2881287">n</span>&nbsp;<span class="op" id="2881289">-</span>&nbsp;<span class="num" id="2881291">1</span><span class="op" id="2881292">)</span>&nbsp;<span class="op" id="2881294">&amp;^</span>&nbsp;<span class="op" id="2881297">(</span><span class="ident" id="2881298">n</span>&nbsp;<span class="op" id="2881300">-</span>&nbsp;<span class="num" id="2881302">1</span><span class="op" id="2881303">)</span><br>
<span class="lineno"></span><span class="op" id="2881305">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2881308">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2881377">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2881434">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2881507">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2881571">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2881624">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2881705">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2881779">//</span><br>
<span class="lineno"></span><span class="comment" id="2881782">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2881858">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2881930">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2882001">func</span>&nbsp;<span class="ident" id="2882006">callMethod</span><span class="op" id="2882016">(</span><span class="ident" id="2882017">ctxt</span>&nbsp;<span class="op" id="2882022">*</span><span class="ident" id="2882023">methodValue</span><span class="op" id="2882034">,</span>&nbsp;<span class="ident" id="2882036">frame</span>&nbsp;<span class="ident" id="2882042">unsafe</span><span class="op" id="2882048">.</span><span class="ident" id="2882049">Pointer</span><span class="op" id="2882056">)</span>&nbsp;<span class="op" id="2882058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882061">rcvr</span>&nbsp;<span class="op" id="2882066">:=</span>&nbsp;<span class="ident" id="2882069">ctxt</span><span class="op" id="2882073">.</span><span class="ident" id="2882074">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882080">rcvrtype</span><span class="op" id="2882088">,</span>&nbsp;<span class="ident" id="2882090">t</span><span class="op" id="2882091">,</span>&nbsp;<span class="ident" id="2882093">fn</span>&nbsp;<span class="op" id="2882096">:=</span>&nbsp;<span class="ident" id="2882099">methodReceiver</span><span class="op" id="2882113">(</span><span class="string" id="2882114">&#34;call&#34;</span><span class="op" id="2882120">,</span>&nbsp;<span class="ident" id="2882122">rcvr</span><span class="op" id="2882126">,</span>&nbsp;<span class="ident" id="2882128">ctxt</span><span class="op" id="2882132">.</span><span class="ident" id="2882133">method</span><span class="op" id="2882139">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882142">frametype</span><span class="op" id="2882151">,</span>&nbsp;<span class="ident" id="2882153">argSize</span><span class="op" id="2882160">,</span>&nbsp;<span class="ident" id="2882162">retOffset</span><span class="op" id="2882171">,</span>&nbsp;<span class="ident" id="2882173">_</span>&nbsp;<span class="op" id="2882175">:=</span>&nbsp;<span class="ident" id="2882178">funcLayout</span><span class="op" id="2882188">(</span><span class="ident" id="2882189">t</span><span class="op" id="2882190">,</span>&nbsp;<span class="ident" id="2882192">rcvrtype</span><span class="op" id="2882200">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882204">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882279">args</span>&nbsp;<span class="op" id="2882284">:=</span>&nbsp;<span class="ident" id="2882287">unsafe_New</span><span class="op" id="2882297">(</span><span class="ident" id="2882298">frametype</span><span class="op" id="2882307">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882311">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882350">storeRcvr</span><span class="op" id="2882359">(</span><span class="ident" id="2882360">rcvr</span><span class="op" id="2882364">,</span>&nbsp;<span class="ident" id="2882366">args</span><span class="op" id="2882370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882373">memmove</span><span class="op" id="2882380">(</span><span class="ident" id="2882381">unsafe</span><span class="op" id="2882387">.</span><span class="ident" id="2882388">Pointer</span><span class="op" id="2882395">(</span><span class="builtintype" id="2882396">uintptr</span><span class="op" id="2882403">(</span><span class="ident" id="2882404">args</span><span class="op" id="2882408">)</span><span class="op" id="2882409">+</span><span class="ident" id="2882410">ptrSize</span><span class="op" id="2882417">)</span><span class="op" id="2882418">,</span>&nbsp;<span class="ident" id="2882420">frame</span><span class="op" id="2882425">,</span>&nbsp;<span class="ident" id="2882427">argSize</span><span class="op" id="2882434">-</span><span class="ident" id="2882435">ptrSize</span><span class="op" id="2882442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882446">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882456">call</span><span class="op" id="2882460">(</span><span class="ident" id="2882461">fn</span><span class="op" id="2882463">,</span>&nbsp;<span class="ident" id="2882465">args</span><span class="op" id="2882469">,</span>&nbsp;<span class="builtintype" id="2882471">uint32</span><span class="op" id="2882477">(</span><span class="ident" id="2882478">frametype</span><span class="op" id="2882487">.</span><span class="ident" id="2882488">size</span><span class="op" id="2882492">)</span><span class="op" id="2882493">,</span>&nbsp;<span class="builtintype" id="2882495">uint32</span><span class="op" id="2882501">(</span><span class="ident" id="2882502">retOffset</span><span class="op" id="2882511">)</span><span class="op" id="2882512">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882516">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882584">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882656">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882727">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882743">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882803">callerRetOffset</span>&nbsp;<span class="op" id="2882819">:=</span>&nbsp;<span class="ident" id="2882822">retOffset</span>&nbsp;<span class="op" id="2882832">-</span>&nbsp;<span class="ident" id="2882834">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882843">if</span>&nbsp;<span class="ident" id="2882846">runtime</span><span class="op" id="2882853">.</span><span class="ident" id="2882854">GOARCH</span>&nbsp;<span class="op" id="2882861">==</span>&nbsp;<span class="string" id="2882864">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2882875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882879">callerRetOffset</span>&nbsp;<span class="op" id="2882895">=</span>&nbsp;<span class="ident" id="2882897">align</span><span class="op" id="2882902">(</span><span class="ident" id="2882903">argSize</span><span class="op" id="2882910">-</span><span class="ident" id="2882911">ptrSize</span><span class="op" id="2882918">,</span>&nbsp;<span class="num" id="2882920">8</span><span class="op" id="2882921">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2882924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882927">memmove</span><span class="op" id="2882934">(</span><span class="ident" id="2882935">unsafe</span><span class="op" id="2882941">.</span><span class="ident" id="2882942">Pointer</span><span class="op" id="2882949">(</span><span class="builtintype" id="2882950">uintptr</span><span class="op" id="2882957">(</span><span class="ident" id="2882958">frame</span><span class="op" id="2882963">)</span><span class="op" id="2882964">+</span><span class="ident" id="2882965">callerRetOffset</span><span class="op" id="2882980">)</span><span class="op" id="2882981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882985">unsafe</span><span class="op" id="2882991">.</span><span class="ident" id="2882992">Pointer</span><span class="op" id="2882999">(</span><span class="builtintype" id="2883000">uintptr</span><span class="op" id="2883007">(</span><span class="ident" id="2883008">args</span><span class="op" id="2883012">)</span><span class="op" id="2883013">+</span><span class="ident" id="2883014">retOffset</span><span class="op" id="2883023">)</span><span class="op" id="2883024">,</span>&nbsp;<span class="ident" id="2883026">frametype</span><span class="op" id="2883035">.</span><span class="ident" id="2883036">size</span><span class="op" id="2883040">-</span><span class="ident" id="2883041">retOffset</span><span class="op" id="2883050">)</span><br>
<span class="lineno"></span><span class="op" id="2883052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2883055">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2883117">func</span>&nbsp;<span class="ident" id="2883122">funcName</span><span class="op" id="2883130">(</span><span class="ident" id="2883131">f</span>&nbsp;<span class="keyword" id="2883133">func</span><span class="op" id="2883137">(</span><span class="op" id="2883138">[</span><span class="op" id="2883139">]</span><span class="ident" id="2883140">Value</span><span class="op" id="2883145">)</span>&nbsp;<span class="op" id="2883147">[</span><span class="op" id="2883148">]</span><span class="ident" id="2883149">Value</span><span class="op" id="2883154">)</span>&nbsp;<span class="builtintype" id="2883156">string</span>&nbsp;<span class="op" id="2883163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883166">pc</span>&nbsp;<span class="op" id="2883169">:=</span>&nbsp;<span class="op" id="2883172">*</span><span class="op" id="2883173">(</span><span class="op" id="2883174">*</span><span class="builtintype" id="2883175">uintptr</span><span class="op" id="2883182">)</span><span class="op" id="2883183">(</span><span class="ident" id="2883184">unsafe</span><span class="op" id="2883190">.</span><span class="ident" id="2883191">Pointer</span><span class="op" id="2883198">(</span><span class="op" id="2883199">&amp;</span><span class="ident" id="2883200">f</span><span class="op" id="2883201">)</span><span class="op" id="2883202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883205">rf</span>&nbsp;<span class="op" id="2883208">:=</span>&nbsp;<span class="ident" id="2883211">runtime</span><span class="op" id="2883218">.</span><span class="ident" id="2883219">FuncForPC</span><span class="op" id="2883228">(</span><span class="ident" id="2883229">pc</span><span class="op" id="2883231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883234">if</span>&nbsp;<span class="ident" id="2883237">rf</span>&nbsp;<span class="op" id="2883240">!=</span>&nbsp;<span class="ident" id="2883243">nil</span>&nbsp;<span class="op" id="2883247">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883251">return</span>&nbsp;<span class="ident" id="2883258">rf</span><span class="op" id="2883260">.</span><span class="ident" id="2883261">Name</span><span class="op" id="2883265">(</span><span class="op" id="2883266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2883269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883272">return</span>&nbsp;<span class="string" id="2883279">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2883289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2883292">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2883321">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2883376">func</span>&nbsp;<span class="op" id="2883381">(</span><span class="ident" id="2883382">v</span>&nbsp;<span class="ident" id="2883384">Value</span><span class="op" id="2883389">)</span>&nbsp;<span class="ident" id="2883391">Cap</span><span class="op" id="2883394">(</span><span class="op" id="2883395">)</span>&nbsp;<span class="builtintype" id="2883397">int</span>&nbsp;<span class="op" id="2883401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883404">k</span>&nbsp;<span class="op" id="2883406">:=</span>&nbsp;<span class="ident" id="2883409">v</span><span class="op" id="2883410">.</span><span class="ident" id="2883411">kind</span><span class="op" id="2883415">(</span><span class="op" id="2883416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883419">switch</span>&nbsp;<span class="ident" id="2883426">k</span>&nbsp;<span class="op" id="2883428">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883431">case</span>&nbsp;<span class="ident" id="2883436">Array</span><span class="op" id="2883441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883445">return</span>&nbsp;<span class="ident" id="2883452">v</span><span class="op" id="2883453">.</span><span class="ident" id="2883454">typ</span><span class="op" id="2883457">.</span><span class="ident" id="2883458">Len</span><span class="op" id="2883461">(</span><span class="op" id="2883462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883465">case</span>&nbsp;<span class="ident" id="2883470">Chan</span><span class="op" id="2883474">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883478">return</span>&nbsp;<span class="builtintype" id="2883485">int</span><span class="op" id="2883488">(</span><span class="ident" id="2883489">chancap</span><span class="op" id="2883496">(</span><span class="ident" id="2883497">v</span><span class="op" id="2883498">.</span><span class="ident" id="2883499">pointer</span><span class="op" id="2883506">(</span><span class="op" id="2883507">)</span><span class="op" id="2883508">)</span><span class="op" id="2883509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883512">case</span>&nbsp;<span class="ident" id="2883517">Slice</span><span class="op" id="2883522">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2883526">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883585">return</span>&nbsp;<span class="op" id="2883592">(</span><span class="op" id="2883593">*</span><span class="ident" id="2883594">sliceHeader</span><span class="op" id="2883605">)</span><span class="op" id="2883606">(</span><span class="ident" id="2883607">v</span><span class="op" id="2883608">.</span><span class="ident" id="2883609">ptr</span><span class="op" id="2883612">)</span><span class="op" id="2883613">.</span><span class="ident" id="2883614">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2883619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2883622">panic</span><span class="op" id="2883627">(</span><span class="op" id="2883628">&amp;</span><span class="ident" id="2883629">ValueError</span><span class="op" id="2883639">{</span><span class="string" id="2883640">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2883659">,</span>&nbsp;<span class="ident" id="2883661">v</span><span class="op" id="2883662">.</span><span class="ident" id="2883663">kind</span><span class="op" id="2883667">(</span><span class="op" id="2883668">)</span><span class="op" id="2883669">}</span><span class="op" id="2883670">)</span><br>
<span class="lineno"></span><span class="op" id="2883672">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2883675">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2883706">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2883744">func</span>&nbsp;<span class="op" id="2883749">(</span><span class="ident" id="2883750">v</span>&nbsp;<span class="ident" id="2883752">Value</span><span class="op" id="2883757">)</span>&nbsp;<span class="ident" id="2883759">Close</span><span class="op" id="2883764">(</span><span class="op" id="2883765">)</span>&nbsp;<span class="op" id="2883767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883770">v</span><span class="op" id="2883771">.</span><span class="ident" id="2883772">mustBe</span><span class="op" id="2883778">(</span><span class="ident" id="2883779">Chan</span><span class="op" id="2883783">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883786">v</span><span class="op" id="2883787">.</span><span class="ident" id="2883788">mustBeExported</span><span class="op" id="2883802">(</span><span class="op" id="2883803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883806">chanclose</span><span class="op" id="2883815">(</span><span class="ident" id="2883816">v</span><span class="op" id="2883817">.</span><span class="ident" id="2883818">pointer</span><span class="op" id="2883825">(</span><span class="op" id="2883826">)</span><span class="op" id="2883827">)</span><br>
<span class="lineno"></span><span class="op" id="2883829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2883832">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2883890">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2883946">func</span>&nbsp;<span class="op" id="2883951">(</span><span class="ident" id="2883952">v</span>&nbsp;<span class="ident" id="2883954">Value</span><span class="op" id="2883959">)</span>&nbsp;<span class="ident" id="2883961">Complex</span><span class="op" id="2883968">(</span><span class="op" id="2883969">)</span>&nbsp;<span class="builtintype" id="2883971">complex128</span>&nbsp;<span class="op" id="2883982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883985">k</span>&nbsp;<span class="op" id="2883987">:=</span>&nbsp;<span class="ident" id="2883990">v</span><span class="op" id="2883991">.</span><span class="ident" id="2883992">kind</span><span class="op" id="2883996">(</span><span class="op" id="2883997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884000">switch</span>&nbsp;<span class="ident" id="2884007">k</span>&nbsp;<span class="op" id="2884009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884012">case</span>&nbsp;<span class="ident" id="2884017">Complex64</span><span class="op" id="2884026">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884030">return</span>&nbsp;<span class="builtintype" id="2884037">complex128</span><span class="op" id="2884047">(</span><span class="op" id="2884048">*</span><span class="op" id="2884049">(</span><span class="op" id="2884050">*</span><span class="builtintype" id="2884051">complex64</span><span class="op" id="2884060">)</span><span class="op" id="2884061">(</span><span class="ident" id="2884062">v</span><span class="op" id="2884063">.</span><span class="ident" id="2884064">ptr</span><span class="op" id="2884067">)</span><span class="op" id="2884068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884071">case</span>&nbsp;<span class="ident" id="2884076">Complex128</span><span class="op" id="2884086">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884090">return</span>&nbsp;<span class="op" id="2884097">*</span><span class="op" id="2884098">(</span><span class="op" id="2884099">*</span><span class="builtintype" id="2884100">complex128</span><span class="op" id="2884110">)</span><span class="op" id="2884111">(</span><span class="ident" id="2884112">v</span><span class="op" id="2884113">.</span><span class="ident" id="2884114">ptr</span><span class="op" id="2884117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2884123">panic</span><span class="op" id="2884128">(</span><span class="op" id="2884129">&amp;</span><span class="ident" id="2884130">ValueError</span><span class="op" id="2884140">{</span><span class="string" id="2884141">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2884164">,</span>&nbsp;<span class="ident" id="2884166">v</span><span class="op" id="2884167">.</span><span class="ident" id="2884168">kind</span><span class="op" id="2884172">(</span><span class="op" id="2884173">)</span><span class="op" id="2884174">}</span><span class="op" id="2884175">)</span><br>
<span class="lineno">665</span><span class="op" id="2884177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2884180">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2884236">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2884272">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2884322">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2884364">func</span>&nbsp;<span class="op" id="2884369">(</span><span class="ident" id="2884370">v</span>&nbsp;<span class="ident" id="2884372">Value</span><span class="op" id="2884377">)</span>&nbsp;<span class="ident" id="2884379">Elem</span><span class="op" id="2884383">(</span><span class="op" id="2884384">)</span>&nbsp;<span class="ident" id="2884386">Value</span>&nbsp;<span class="op" id="2884392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884395">k</span>&nbsp;<span class="op" id="2884397">:=</span>&nbsp;<span class="ident" id="2884400">v</span><span class="op" id="2884401">.</span><span class="ident" id="2884402">kind</span><span class="op" id="2884406">(</span><span class="op" id="2884407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884410">switch</span>&nbsp;<span class="ident" id="2884417">k</span>&nbsp;<span class="op" id="2884419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884422">case</span>&nbsp;<span class="ident" id="2884427">Interface</span><span class="op" id="2884436">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884440">var</span>&nbsp;<span class="ident" id="2884444">eface</span>&nbsp;<span class="keyword" id="2884450">interface</span><span class="op" id="2884459">{</span><span class="op" id="2884460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884464">if</span>&nbsp;<span class="ident" id="2884467">v</span><span class="op" id="2884468">.</span><span class="ident" id="2884469">typ</span><span class="op" id="2884472">.</span><span class="ident" id="2884473">NumMethod</span><span class="op" id="2884482">(</span><span class="op" id="2884483">)</span>&nbsp;<span class="op" id="2884485">==</span>&nbsp;<span class="num" id="2884488">0</span>&nbsp;<span class="op" id="2884490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884495">eface</span>&nbsp;<span class="op" id="2884501">=</span>&nbsp;<span class="op" id="2884503">*</span><span class="op" id="2884504">(</span><span class="op" id="2884505">*</span><span class="keyword" id="2884506">interface</span><span class="op" id="2884515">{</span><span class="op" id="2884516">}</span><span class="op" id="2884517">)</span><span class="op" id="2884518">(</span><span class="ident" id="2884519">v</span><span class="op" id="2884520">.</span><span class="ident" id="2884521">ptr</span><span class="op" id="2884524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884528">}</span>&nbsp;<span class="keyword" id="2884530">else</span>&nbsp;<span class="op" id="2884535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884540">eface</span>&nbsp;<span class="op" id="2884546">=</span>&nbsp;<span class="op" id="2884548">(</span><span class="keyword" id="2884549">interface</span><span class="op" id="2884558">{</span><span class="op" id="2884559">}</span><span class="op" id="2884560">)</span><span class="op" id="2884561">(</span><span class="op" id="2884562">*</span><span class="op" id="2884563">(</span><span class="op" id="2884564">*</span><span class="keyword" id="2884565">interface</span>&nbsp;<span class="op" id="2884575">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884581">M</span><span class="op" id="2884582">(</span><span class="op" id="2884583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884588">}</span><span class="op" id="2884589">)</span><span class="op" id="2884590">(</span><span class="ident" id="2884591">v</span><span class="op" id="2884592">.</span><span class="ident" id="2884593">ptr</span><span class="op" id="2884596">)</span><span class="op" id="2884597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884605">x</span>&nbsp;<span class="op" id="2884607">:=</span>&nbsp;<span class="ident" id="2884610">unpackEface</span><span class="op" id="2884621">(</span><span class="ident" id="2884622">eface</span><span class="op" id="2884627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884631">if</span>&nbsp;<span class="ident" id="2884634">x</span><span class="op" id="2884635">.</span><span class="ident" id="2884636">flag</span>&nbsp;<span class="op" id="2884641">!=</span>&nbsp;<span class="num" id="2884644">0</span>&nbsp;<span class="op" id="2884646">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884651">x</span><span class="op" id="2884652">.</span><span class="ident" id="2884653">flag</span>&nbsp;<span class="op" id="2884658">|=</span>&nbsp;<span class="ident" id="2884661">v</span><span class="op" id="2884662">.</span><span class="ident" id="2884663">flag</span>&nbsp;<span class="op" id="2884668">&amp;</span>&nbsp;<span class="ident" id="2884670">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884683">return</span>&nbsp;<span class="ident" id="2884690">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884693">case</span>&nbsp;<span class="ident" id="2884698">Ptr</span><span class="op" id="2884701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884705">ptr</span>&nbsp;<span class="op" id="2884709">:=</span>&nbsp;<span class="ident" id="2884712">v</span><span class="op" id="2884713">.</span><span class="ident" id="2884714">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884720">if</span>&nbsp;<span class="ident" id="2884723">v</span><span class="op" id="2884724">.</span><span class="ident" id="2884725">flag</span><span class="op" id="2884729">&amp;</span><span class="ident" id="2884730">flagIndir</span>&nbsp;<span class="op" id="2884740">!=</span>&nbsp;<span class="num" id="2884743">0</span>&nbsp;<span class="op" id="2884745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884750">ptr</span>&nbsp;<span class="op" id="2884754">=</span>&nbsp;<span class="op" id="2884756">*</span><span class="op" id="2884757">(</span><span class="op" id="2884758">*</span><span class="ident" id="2884759">unsafe</span><span class="op" id="2884765">.</span><span class="ident" id="2884766">Pointer</span><span class="op" id="2884773">)</span><span class="op" id="2884774">(</span><span class="ident" id="2884775">ptr</span><span class="op" id="2884778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884786">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884834">if</span>&nbsp;<span class="ident" id="2884837">ptr</span>&nbsp;<span class="op" id="2884841">==</span>&nbsp;<span class="ident" id="2884844">nil</span>&nbsp;<span class="op" id="2884848">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884853">return</span>&nbsp;<span class="ident" id="2884860">Value</span><span class="op" id="2884865">{</span><span class="op" id="2884866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884874">tt</span>&nbsp;<span class="op" id="2884877">:=</span>&nbsp;<span class="op" id="2884880">(</span><span class="op" id="2884881">*</span><span class="ident" id="2884882">ptrType</span><span class="op" id="2884889">)</span><span class="op" id="2884890">(</span><span class="ident" id="2884891">unsafe</span><span class="op" id="2884897">.</span><span class="ident" id="2884898">Pointer</span><span class="op" id="2884905">(</span><span class="ident" id="2884906">v</span><span class="op" id="2884907">.</span><span class="ident" id="2884908">typ</span><span class="op" id="2884911">)</span><span class="op" id="2884912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884916">typ</span>&nbsp;<span class="op" id="2884920">:=</span>&nbsp;<span class="ident" id="2884923">tt</span><span class="op" id="2884925">.</span><span class="ident" id="2884926">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884933">fl</span>&nbsp;<span class="op" id="2884936">:=</span>&nbsp;<span class="ident" id="2884939">v</span><span class="op" id="2884940">.</span><span class="ident" id="2884941">flag</span><span class="op" id="2884945">&amp;</span><span class="ident" id="2884946">flagRO</span>&nbsp;<span class="op" id="2884953">|</span>&nbsp;<span class="ident" id="2884955">flagIndir</span>&nbsp;<span class="op" id="2884965">|</span>&nbsp;<span class="ident" id="2884967">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884978">fl</span>&nbsp;<span class="op" id="2884981">|=</span>&nbsp;<span class="ident" id="2884984">flag</span><span class="op" id="2884988">(</span><span class="ident" id="2884989">typ</span><span class="op" id="2884992">.</span><span class="ident" id="2884993">Kind</span><span class="op" id="2884997">(</span><span class="op" id="2884998">)</span><span class="op" id="2884999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885003">return</span>&nbsp;<span class="ident" id="2885010">Value</span><span class="op" id="2885015">{</span><span class="ident" id="2885016">typ</span><span class="op" id="2885019">,</span>&nbsp;<span class="ident" id="2885021">ptr</span><span class="op" id="2885024">,</span>&nbsp;<span class="ident" id="2885026">fl</span><span class="op" id="2885028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2885031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2885034">panic</span><span class="op" id="2885039">(</span><span class="op" id="2885040">&amp;</span><span class="ident" id="2885041">ValueError</span><span class="op" id="2885051">{</span><span class="string" id="2885052">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2885072">,</span>&nbsp;<span class="ident" id="2885074">v</span><span class="op" id="2885075">.</span><span class="ident" id="2885076">kind</span><span class="op" id="2885080">(</span><span class="op" id="2885081">)</span><span class="op" id="2885082">}</span><span class="op" id="2885083">)</span><br>
<span class="lineno"></span><span class="op" id="2885085">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2885088">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2885137">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2885198">func</span>&nbsp;<span class="op" id="2885203">(</span><span class="ident" id="2885204">v</span>&nbsp;<span class="ident" id="2885206">Value</span><span class="op" id="2885211">)</span>&nbsp;<span class="ident" id="2885213">Field</span><span class="op" id="2885218">(</span><span class="ident" id="2885219">i</span>&nbsp;<span class="builtintype" id="2885221">int</span><span class="op" id="2885224">)</span>&nbsp;<span class="ident" id="2885226">Value</span>&nbsp;<span class="op" id="2885232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885235">if</span>&nbsp;<span class="ident" id="2885238">v</span><span class="op" id="2885239">.</span><span class="ident" id="2885240">kind</span><span class="op" id="2885244">(</span><span class="op" id="2885245">)</span>&nbsp;<span class="op" id="2885247">!=</span>&nbsp;<span class="ident" id="2885250">Struct</span>&nbsp;<span class="op" id="2885257">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2885261">panic</span><span class="op" id="2885266">(</span><span class="op" id="2885267">&amp;</span><span class="ident" id="2885268">ValueError</span><span class="op" id="2885278">{</span><span class="string" id="2885279">&#34;reflect.Value.Field&#34;</span><span class="op" id="2885300">,</span>&nbsp;<span class="ident" id="2885302">v</span><span class="op" id="2885303">.</span><span class="ident" id="2885304">kind</span><span class="op" id="2885308">(</span><span class="op" id="2885309">)</span><span class="op" id="2885310">}</span><span class="op" id="2885311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2885314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885317">tt</span>&nbsp;<span class="op" id="2885320">:=</span>&nbsp;<span class="op" id="2885323">(</span><span class="op" id="2885324">*</span><span class="ident" id="2885325">structType</span><span class="op" id="2885335">)</span><span class="op" id="2885336">(</span><span class="ident" id="2885337">unsafe</span><span class="op" id="2885343">.</span><span class="ident" id="2885344">Pointer</span><span class="op" id="2885351">(</span><span class="ident" id="2885352">v</span><span class="op" id="2885353">.</span><span class="ident" id="2885354">typ</span><span class="op" id="2885357">)</span><span class="op" id="2885358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885361">if</span>&nbsp;<span class="builtintype" id="2885364">uint</span><span class="op" id="2885368">(</span><span class="ident" id="2885369">i</span><span class="op" id="2885370">)</span>&nbsp;<span class="op" id="2885372">&gt;=</span>&nbsp;<span class="builtintype" id="2885375">uint</span><span class="op" id="2885379">(</span><span class="builtinfunc" id="2885380">len</span><span class="op" id="2885383">(</span><span class="ident" id="2885384">tt</span><span class="op" id="2885386">.</span><span class="ident" id="2885387">fields</span><span class="op" id="2885393">)</span><span class="op" id="2885394">)</span>&nbsp;<span class="op" id="2885396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2885400">panic</span><span class="op" id="2885405">(</span><span class="string" id="2885406">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2885441">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2885444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885447">field</span>&nbsp;<span class="op" id="2885453">:=</span>&nbsp;<span class="op" id="2885456">&amp;</span><span class="ident" id="2885457">tt</span><span class="op" id="2885459">.</span><span class="ident" id="2885460">fields</span><span class="op" id="2885466">[</span><span class="ident" id="2885467">i</span><span class="op" id="2885468">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885471">typ</span>&nbsp;<span class="op" id="2885475">:=</span>&nbsp;<span class="ident" id="2885478">field</span><span class="op" id="2885483">.</span><span class="ident" id="2885484">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885490">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885526">fl</span>&nbsp;<span class="op" id="2885529">:=</span>&nbsp;<span class="ident" id="2885532">v</span><span class="op" id="2885533">.</span><span class="ident" id="2885534">flag</span><span class="op" id="2885538">&amp;</span><span class="op" id="2885539">(</span><span class="ident" id="2885540">flagRO</span><span class="op" id="2885546">|</span><span class="ident" id="2885547">flagIndir</span><span class="op" id="2885556">|</span><span class="ident" id="2885557">flagAddr</span><span class="op" id="2885565">)</span>&nbsp;<span class="op" id="2885567">|</span>&nbsp;<span class="ident" id="2885569">flag</span><span class="op" id="2885573">(</span><span class="ident" id="2885574">typ</span><span class="op" id="2885577">.</span><span class="ident" id="2885578">Kind</span><span class="op" id="2885582">(</span><span class="op" id="2885583">)</span><span class="op" id="2885584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885587">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885632">if</span>&nbsp;<span class="ident" id="2885635">field</span><span class="op" id="2885640">.</span><span class="ident" id="2885641">pkgPath</span>&nbsp;<span class="op" id="2885649">!=</span>&nbsp;<span class="ident" id="2885652">nil</span>&nbsp;<span class="op" id="2885656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885660">fl</span>&nbsp;<span class="op" id="2885663">|=</span>&nbsp;<span class="ident" id="2885666">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2885674">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885677">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885733">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885798">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885846">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885904">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885947">ptr</span>&nbsp;<span class="op" id="2885951">:=</span>&nbsp;<span class="ident" id="2885954">unsafe</span><span class="op" id="2885960">.</span><span class="ident" id="2885961">Pointer</span><span class="op" id="2885968">(</span><span class="builtintype" id="2885969">uintptr</span><span class="op" id="2885976">(</span><span class="ident" id="2885977">v</span><span class="op" id="2885978">.</span><span class="ident" id="2885979">ptr</span><span class="op" id="2885982">)</span>&nbsp;<span class="op" id="2885984">+</span>&nbsp;<span class="ident" id="2885986">field</span><span class="op" id="2885991">.</span><span class="ident" id="2885992">offset</span><span class="op" id="2885998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886001">return</span>&nbsp;<span class="ident" id="2886008">Value</span><span class="op" id="2886013">{</span><span class="ident" id="2886014">typ</span><span class="op" id="2886017">,</span>&nbsp;<span class="ident" id="2886019">ptr</span><span class="op" id="2886022">,</span>&nbsp;<span class="ident" id="2886024">fl</span><span class="op" id="2886026">}</span><br>
<span class="lineno"></span><span class="op" id="2886028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2886031">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2886096">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2886136">func</span>&nbsp;<span class="op" id="2886141">(</span><span class="ident" id="2886142">v</span>&nbsp;<span class="ident" id="2886144">Value</span><span class="op" id="2886149">)</span>&nbsp;<span class="ident" id="2886151">FieldByIndex</span><span class="op" id="2886163">(</span><span class="ident" id="2886164">index</span>&nbsp;<span class="op" id="2886170">[</span><span class="op" id="2886171">]</span><span class="builtintype" id="2886172">int</span><span class="op" id="2886175">)</span>&nbsp;<span class="ident" id="2886177">Value</span>&nbsp;<span class="op" id="2886183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886186">if</span>&nbsp;<span class="builtinfunc" id="2886189">len</span><span class="op" id="2886192">(</span><span class="ident" id="2886193">index</span><span class="op" id="2886198">)</span>&nbsp;<span class="op" id="2886200">==</span>&nbsp;<span class="num" id="2886203">1</span>&nbsp;<span class="op" id="2886205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886209">return</span>&nbsp;<span class="ident" id="2886216">v</span><span class="op" id="2886217">.</span><span class="ident" id="2886218">Field</span><span class="op" id="2886223">(</span><span class="ident" id="2886224">index</span><span class="op" id="2886229">[</span><span class="num" id="2886230">0</span><span class="op" id="2886231">]</span><span class="op" id="2886232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886235">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886238">v</span><span class="op" id="2886239">.</span><span class="ident" id="2886240">mustBe</span><span class="op" id="2886246">(</span><span class="ident" id="2886247">Struct</span><span class="op" id="2886253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886256">for</span>&nbsp;<span class="ident" id="2886260">i</span><span class="op" id="2886261">,</span>&nbsp;<span class="ident" id="2886263">x</span>&nbsp;<span class="op" id="2886265">:=</span>&nbsp;<span class="keyword" id="2886268">range</span>&nbsp;<span class="ident" id="2886274">index</span>&nbsp;<span class="op" id="2886280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886284">if</span>&nbsp;<span class="ident" id="2886287">i</span>&nbsp;<span class="op" id="2886289">&gt;</span>&nbsp;<span class="num" id="2886291">0</span>&nbsp;<span class="op" id="2886293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886298">if</span>&nbsp;<span class="ident" id="2886301">v</span><span class="op" id="2886302">.</span><span class="ident" id="2886303">Kind</span><span class="op" id="2886307">(</span><span class="op" id="2886308">)</span>&nbsp;<span class="op" id="2886310">==</span>&nbsp;<span class="ident" id="2886313">Ptr</span>&nbsp;<span class="op" id="2886317">&amp;&amp;</span>&nbsp;<span class="ident" id="2886320">v</span><span class="op" id="2886321">.</span><span class="ident" id="2886322">typ</span><span class="op" id="2886325">.</span><span class="ident" id="2886326">Elem</span><span class="op" id="2886330">(</span><span class="op" id="2886331">)</span><span class="op" id="2886332">.</span><span class="ident" id="2886333">Kind</span><span class="op" id="2886337">(</span><span class="op" id="2886338">)</span>&nbsp;<span class="op" id="2886340">==</span>&nbsp;<span class="ident" id="2886343">Struct</span>&nbsp;<span class="op" id="2886350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886356">if</span>&nbsp;<span class="ident" id="2886359">v</span><span class="op" id="2886360">.</span><span class="ident" id="2886361">IsNil</span><span class="op" id="2886366">(</span><span class="op" id="2886367">)</span>&nbsp;<span class="op" id="2886369">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2886376">panic</span><span class="op" id="2886381">(</span><span class="string" id="2886382">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2886443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886455">v</span>&nbsp;<span class="op" id="2886457">=</span>&nbsp;<span class="ident" id="2886459">v</span><span class="op" id="2886460">.</span><span class="ident" id="2886461">Elem</span><span class="op" id="2886465">(</span><span class="op" id="2886466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886475">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886479">v</span>&nbsp;<span class="op" id="2886481">=</span>&nbsp;<span class="ident" id="2886483">v</span><span class="op" id="2886484">.</span><span class="ident" id="2886485">Field</span><span class="op" id="2886490">(</span><span class="ident" id="2886491">x</span><span class="op" id="2886492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886498">return</span>&nbsp;<span class="ident" id="2886505">v</span><br>
<span class="lineno"></span><span class="op" id="2886507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2886510">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2886571">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2886623">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2886663">func</span>&nbsp;<span class="op" id="2886668">(</span><span class="ident" id="2886669">v</span>&nbsp;<span class="ident" id="2886671">Value</span><span class="op" id="2886676">)</span>&nbsp;<span class="ident" id="2886678">FieldByName</span><span class="op" id="2886689">(</span><span class="ident" id="2886690">name</span>&nbsp;<span class="builtintype" id="2886695">string</span><span class="op" id="2886701">)</span>&nbsp;<span class="ident" id="2886703">Value</span>&nbsp;<span class="op" id="2886709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886712">v</span><span class="op" id="2886713">.</span><span class="ident" id="2886714">mustBe</span><span class="op" id="2886720">(</span><span class="ident" id="2886721">Struct</span><span class="op" id="2886727">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886730">if</span>&nbsp;<span class="ident" id="2886733">f</span><span class="op" id="2886734">,</span>&nbsp;<span class="ident" id="2886736">ok</span>&nbsp;<span class="op" id="2886739">:=</span>&nbsp;<span class="ident" id="2886742">v</span><span class="op" id="2886743">.</span><span class="ident" id="2886744">typ</span><span class="op" id="2886747">.</span><span class="ident" id="2886748">FieldByName</span><span class="op" id="2886759">(</span><span class="ident" id="2886760">name</span><span class="op" id="2886764">)</span><span class="op" id="2886765">;</span>&nbsp;<span class="ident" id="2886767">ok</span>&nbsp;<span class="op" id="2886770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886774">return</span>&nbsp;<span class="ident" id="2886781">v</span><span class="op" id="2886782">.</span><span class="ident" id="2886783">FieldByIndex</span><span class="op" id="2886795">(</span><span class="ident" id="2886796">f</span><span class="op" id="2886797">.</span><span class="ident" id="2886798">Index</span><span class="op" id="2886803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886809">return</span>&nbsp;<span class="ident" id="2886816">Value</span><span class="op" id="2886821">{</span><span class="op" id="2886822">}</span><br>
<span class="lineno"></span><span class="op" id="2886824">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2886827">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2886883">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2886921">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2886961">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2887013">func</span>&nbsp;<span class="op" id="2887018">(</span><span class="ident" id="2887019">v</span>&nbsp;<span class="ident" id="2887021">Value</span><span class="op" id="2887026">)</span>&nbsp;<span class="ident" id="2887028">FieldByNameFunc</span><span class="op" id="2887043">(</span><span class="ident" id="2887044">match</span>&nbsp;<span class="keyword" id="2887050">func</span><span class="op" id="2887054">(</span><span class="builtintype" id="2887055">string</span><span class="op" id="2887061">)</span>&nbsp;<span class="builtintype" id="2887063">bool</span><span class="op" id="2887067">)</span>&nbsp;<span class="ident" id="2887069">Value</span>&nbsp;<span class="op" id="2887075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887078">if</span>&nbsp;<span class="ident" id="2887081">f</span><span class="op" id="2887082">,</span>&nbsp;<span class="ident" id="2887084">ok</span>&nbsp;<span class="op" id="2887087">:=</span>&nbsp;<span class="ident" id="2887090">v</span><span class="op" id="2887091">.</span><span class="ident" id="2887092">typ</span><span class="op" id="2887095">.</span><span class="ident" id="2887096">FieldByNameFunc</span><span class="op" id="2887111">(</span><span class="ident" id="2887112">match</span><span class="op" id="2887117">)</span><span class="op" id="2887118">;</span>&nbsp;<span class="ident" id="2887120">ok</span>&nbsp;<span class="op" id="2887123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887127">return</span>&nbsp;<span class="ident" id="2887134">v</span><span class="op" id="2887135">.</span><span class="ident" id="2887136">FieldByIndex</span><span class="op" id="2887148">(</span><span class="ident" id="2887149">f</span><span class="op" id="2887150">.</span><span class="ident" id="2887151">Index</span><span class="op" id="2887156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2887159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887162">return</span>&nbsp;<span class="ident" id="2887169">Value</span><span class="op" id="2887174">{</span><span class="op" id="2887175">}</span><br>
<span class="lineno">775</span><span class="op" id="2887177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2887180">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2887233">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2887284">func</span>&nbsp;<span class="op" id="2887289">(</span><span class="ident" id="2887290">v</span>&nbsp;<span class="ident" id="2887292">Value</span><span class="op" id="2887297">)</span>&nbsp;<span class="ident" id="2887299">Float</span><span class="op" id="2887304">(</span><span class="op" id="2887305">)</span>&nbsp;<span class="builtintype" id="2887307">float64</span>&nbsp;<span class="op" id="2887315">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2887318">k</span>&nbsp;<span class="op" id="2887320">:=</span>&nbsp;<span class="ident" id="2887323">v</span><span class="op" id="2887324">.</span><span class="ident" id="2887325">kind</span><span class="op" id="2887329">(</span><span class="op" id="2887330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887333">switch</span>&nbsp;<span class="ident" id="2887340">k</span>&nbsp;<span class="op" id="2887342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887345">case</span>&nbsp;<span class="ident" id="2887350">Float32</span><span class="op" id="2887357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887361">return</span>&nbsp;<span class="builtintype" id="2887368">float64</span><span class="op" id="2887375">(</span><span class="op" id="2887376">*</span><span class="op" id="2887377">(</span><span class="op" id="2887378">*</span><span class="builtintype" id="2887379">float32</span><span class="op" id="2887386">)</span><span class="op" id="2887387">(</span><span class="ident" id="2887388">v</span><span class="op" id="2887389">.</span><span class="ident" id="2887390">ptr</span><span class="op" id="2887393">)</span><span class="op" id="2887394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887397">case</span>&nbsp;<span class="ident" id="2887402">Float64</span><span class="op" id="2887409">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887413">return</span>&nbsp;<span class="op" id="2887420">*</span><span class="op" id="2887421">(</span><span class="op" id="2887422">*</span><span class="builtintype" id="2887423">float64</span><span class="op" id="2887430">)</span><span class="op" id="2887431">(</span><span class="ident" id="2887432">v</span><span class="op" id="2887433">.</span><span class="ident" id="2887434">ptr</span><span class="op" id="2887437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2887440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2887443">panic</span><span class="op" id="2887448">(</span><span class="op" id="2887449">&amp;</span><span class="ident" id="2887450">ValueError</span><span class="op" id="2887460">{</span><span class="string" id="2887461">&#34;reflect.Value.Float&#34;</span><span class="op" id="2887482">,</span>&nbsp;<span class="ident" id="2887484">v</span><span class="op" id="2887485">.</span><span class="ident" id="2887486">kind</span><span class="op" id="2887490">(</span><span class="op" id="2887491">)</span><span class="op" id="2887492">}</span><span class="op" id="2887493">)</span><br>
<span class="lineno"></span><span class="op" id="2887495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2887498">var</span>&nbsp;<span class="ident" id="2887502">uint8Type</span>&nbsp;<span class="op" id="2887512">=</span>&nbsp;<span class="ident" id="2887514">TypeOf</span><span class="op" id="2887520">(</span><span class="builtintype" id="2887521">uint8</span><span class="op" id="2887526">(</span><span class="num" id="2887527">0</span><span class="op" id="2887528">)</span><span class="op" id="2887529">)</span><span class="op" id="2887530">.</span><span class="op" id="2887531">(</span><span class="op" id="2887532">*</span><span class="ident" id="2887533">rtype</span><span class="op" id="2887538">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2887541">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2887576">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2887654">func</span>&nbsp;<span class="op" id="2887659">(</span><span class="ident" id="2887660">v</span>&nbsp;<span class="ident" id="2887662">Value</span><span class="op" id="2887667">)</span>&nbsp;<span class="ident" id="2887669">Index</span><span class="op" id="2887674">(</span><span class="ident" id="2887675">i</span>&nbsp;<span class="builtintype" id="2887677">int</span><span class="op" id="2887680">)</span>&nbsp;<span class="ident" id="2887682">Value</span>&nbsp;<span class="op" id="2887688">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887691">switch</span>&nbsp;<span class="ident" id="2887698">v</span><span class="op" id="2887699">.</span><span class="ident" id="2887700">kind</span><span class="op" id="2887704">(</span><span class="op" id="2887705">)</span>&nbsp;<span class="op" id="2887707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887710">case</span>&nbsp;<span class="ident" id="2887715">Array</span><span class="op" id="2887720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2887724">tt</span>&nbsp;<span class="op" id="2887727">:=</span>&nbsp;<span class="op" id="2887730">(</span><span class="op" id="2887731">*</span><span class="ident" id="2887732">arrayType</span><span class="op" id="2887741">)</span><span class="op" id="2887742">(</span><span class="ident" id="2887743">unsafe</span><span class="op" id="2887749">.</span><span class="ident" id="2887750">Pointer</span><span class="op" id="2887757">(</span><span class="ident" id="2887758">v</span><span class="op" id="2887759">.</span><span class="ident" id="2887760">typ</span><span class="op" id="2887763">)</span><span class="op" id="2887764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887768">if</span>&nbsp;<span class="builtintype" id="2887771">uint</span><span class="op" id="2887775">(</span><span class="ident" id="2887776">i</span><span class="op" id="2887777">)</span>&nbsp;<span class="op" id="2887779">&gt;=</span>&nbsp;<span class="builtintype" id="2887782">uint</span><span class="op" id="2887786">(</span><span class="ident" id="2887787">tt</span><span class="op" id="2887789">.</span><span class="builtinfunc" id="2887790">len</span><span class="op" id="2887793">)</span>&nbsp;<span class="op" id="2887795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2887800">panic</span><span class="op" id="2887805">(</span><span class="string" id="2887806">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2887841">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2887845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2887849">typ</span>&nbsp;<span class="op" id="2887853">:=</span>&nbsp;<span class="ident" id="2887856">tt</span><span class="op" id="2887858">.</span><span class="ident" id="2887859">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2887866">offset</span>&nbsp;<span class="op" id="2887873">:=</span>&nbsp;<span class="builtintype" id="2887876">uintptr</span><span class="op" id="2887883">(</span><span class="ident" id="2887884">i</span><span class="op" id="2887885">)</span>&nbsp;<span class="op" id="2887887">*</span>&nbsp;<span class="ident" id="2887889">typ</span><span class="op" id="2887892">.</span><span class="ident" id="2887893">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2887901">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2887957">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2888022">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2888071">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2888138">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888176">val</span>&nbsp;<span class="op" id="2888180">:=</span>&nbsp;<span class="ident" id="2888183">unsafe</span><span class="op" id="2888189">.</span><span class="ident" id="2888190">Pointer</span><span class="op" id="2888197">(</span><span class="builtintype" id="2888198">uintptr</span><span class="op" id="2888205">(</span><span class="ident" id="2888206">v</span><span class="op" id="2888207">.</span><span class="ident" id="2888208">ptr</span><span class="op" id="2888211">)</span>&nbsp;<span class="op" id="2888213">+</span>&nbsp;<span class="ident" id="2888215">offset</span><span class="op" id="2888221">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888225">fl</span>&nbsp;<span class="op" id="2888228">:=</span>&nbsp;<span class="ident" id="2888231">v</span><span class="op" id="2888232">.</span><span class="ident" id="2888233">flag</span><span class="op" id="2888237">&amp;</span><span class="op" id="2888238">(</span><span class="ident" id="2888239">flagRO</span><span class="op" id="2888245">|</span><span class="ident" id="2888246">flagIndir</span><span class="op" id="2888255">|</span><span class="ident" id="2888256">flagAddr</span><span class="op" id="2888264">)</span>&nbsp;<span class="op" id="2888266">|</span>&nbsp;<span class="ident" id="2888268">flag</span><span class="op" id="2888272">(</span><span class="ident" id="2888273">typ</span><span class="op" id="2888276">.</span><span class="ident" id="2888277">Kind</span><span class="op" id="2888281">(</span><span class="op" id="2888282">)</span><span class="op" id="2888283">)</span>&nbsp;<span class="comment" id="2888285">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888317">return</span>&nbsp;<span class="ident" id="2888324">Value</span><span class="op" id="2888329">{</span><span class="ident" id="2888330">typ</span><span class="op" id="2888333">,</span>&nbsp;<span class="ident" id="2888335">val</span><span class="op" id="2888338">,</span>&nbsp;<span class="ident" id="2888340">fl</span><span class="op" id="2888342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888346">case</span>&nbsp;<span class="ident" id="2888351">Slice</span><span class="op" id="2888356">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2888360">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2888399">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888447">s</span>&nbsp;<span class="op" id="2888449">:=</span>&nbsp;<span class="op" id="2888452">(</span><span class="op" id="2888453">*</span><span class="ident" id="2888454">sliceHeader</span><span class="op" id="2888465">)</span><span class="op" id="2888466">(</span><span class="ident" id="2888467">v</span><span class="op" id="2888468">.</span><span class="ident" id="2888469">ptr</span><span class="op" id="2888472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888476">if</span>&nbsp;<span class="builtintype" id="2888479">uint</span><span class="op" id="2888483">(</span><span class="ident" id="2888484">i</span><span class="op" id="2888485">)</span>&nbsp;<span class="op" id="2888487">&gt;=</span>&nbsp;<span class="builtintype" id="2888490">uint</span><span class="op" id="2888494">(</span><span class="ident" id="2888495">s</span><span class="op" id="2888496">.</span><span class="ident" id="2888497">Len</span><span class="op" id="2888500">)</span>&nbsp;<span class="op" id="2888502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2888507">panic</span><span class="op" id="2888512">(</span><span class="string" id="2888513">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2888548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2888552">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888556">tt</span>&nbsp;<span class="op" id="2888559">:=</span>&nbsp;<span class="op" id="2888562">(</span><span class="op" id="2888563">*</span><span class="ident" id="2888564">sliceType</span><span class="op" id="2888573">)</span><span class="op" id="2888574">(</span><span class="ident" id="2888575">unsafe</span><span class="op" id="2888581">.</span><span class="ident" id="2888582">Pointer</span><span class="op" id="2888589">(</span><span class="ident" id="2888590">v</span><span class="op" id="2888591">.</span><span class="ident" id="2888592">typ</span><span class="op" id="2888595">)</span><span class="op" id="2888596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888600">typ</span>&nbsp;<span class="op" id="2888604">:=</span>&nbsp;<span class="ident" id="2888607">tt</span><span class="op" id="2888609">.</span><span class="ident" id="2888610">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888617">val</span>&nbsp;<span class="op" id="2888621">:=</span>&nbsp;<span class="ident" id="2888624">unsafe</span><span class="op" id="2888630">.</span><span class="ident" id="2888631">Pointer</span><span class="op" id="2888638">(</span><span class="builtintype" id="2888639">uintptr</span><span class="op" id="2888646">(</span><span class="ident" id="2888647">s</span><span class="op" id="2888648">.</span><span class="ident" id="2888649">Data</span><span class="op" id="2888653">)</span>&nbsp;<span class="op" id="2888655">+</span>&nbsp;<span class="builtintype" id="2888657">uintptr</span><span class="op" id="2888664">(</span><span class="ident" id="2888665">i</span><span class="op" id="2888666">)</span><span class="op" id="2888667">*</span><span class="ident" id="2888668">typ</span><span class="op" id="2888671">.</span><span class="ident" id="2888672">size</span><span class="op" id="2888676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888680">fl</span>&nbsp;<span class="op" id="2888683">:=</span>&nbsp;<span class="ident" id="2888686">flagAddr</span>&nbsp;<span class="op" id="2888695">|</span>&nbsp;<span class="ident" id="2888697">flagIndir</span>&nbsp;<span class="op" id="2888707">|</span>&nbsp;<span class="ident" id="2888709">v</span><span class="op" id="2888710">.</span><span class="ident" id="2888711">flag</span><span class="op" id="2888715">&amp;</span><span class="ident" id="2888716">flagRO</span>&nbsp;<span class="op" id="2888723">|</span>&nbsp;<span class="ident" id="2888725">flag</span><span class="op" id="2888729">(</span><span class="ident" id="2888730">typ</span><span class="op" id="2888733">.</span><span class="ident" id="2888734">Kind</span><span class="op" id="2888738">(</span><span class="op" id="2888739">)</span><span class="op" id="2888740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888744">return</span>&nbsp;<span class="ident" id="2888751">Value</span><span class="op" id="2888756">{</span><span class="ident" id="2888757">typ</span><span class="op" id="2888760">,</span>&nbsp;<span class="ident" id="2888762">val</span><span class="op" id="2888765">,</span>&nbsp;<span class="ident" id="2888767">fl</span><span class="op" id="2888769">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888773">case</span>&nbsp;<span class="ident" id="2888778">String</span><span class="op" id="2888784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888788">s</span>&nbsp;<span class="op" id="2888790">:=</span>&nbsp;<span class="op" id="2888793">(</span><span class="op" id="2888794">*</span><span class="ident" id="2888795">stringHeader</span><span class="op" id="2888807">)</span><span class="op" id="2888808">(</span><span class="ident" id="2888809">v</span><span class="op" id="2888810">.</span><span class="ident" id="2888811">ptr</span><span class="op" id="2888814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888818">if</span>&nbsp;<span class="builtintype" id="2888821">uint</span><span class="op" id="2888825">(</span><span class="ident" id="2888826">i</span><span class="op" id="2888827">)</span>&nbsp;<span class="op" id="2888829">&gt;=</span>&nbsp;<span class="builtintype" id="2888832">uint</span><span class="op" id="2888836">(</span><span class="ident" id="2888837">s</span><span class="op" id="2888838">.</span><span class="ident" id="2888839">Len</span><span class="op" id="2888842">)</span>&nbsp;<span class="op" id="2888844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2888849">panic</span><span class="op" id="2888854">(</span><span class="string" id="2888855">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2888891">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2888895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888899">p</span>&nbsp;<span class="op" id="2888901">:=</span>&nbsp;<span class="ident" id="2888904">unsafe</span><span class="op" id="2888910">.</span><span class="ident" id="2888911">Pointer</span><span class="op" id="2888918">(</span><span class="builtintype" id="2888919">uintptr</span><span class="op" id="2888926">(</span><span class="ident" id="2888927">s</span><span class="op" id="2888928">.</span><span class="ident" id="2888929">Data</span><span class="op" id="2888933">)</span>&nbsp;<span class="op" id="2888935">+</span>&nbsp;<span class="builtintype" id="2888937">uintptr</span><span class="op" id="2888944">(</span><span class="ident" id="2888945">i</span><span class="op" id="2888946">)</span><span class="op" id="2888947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888951">fl</span>&nbsp;<span class="op" id="2888954">:=</span>&nbsp;<span class="ident" id="2888957">v</span><span class="op" id="2888958">.</span><span class="ident" id="2888959">flag</span><span class="op" id="2888963">&amp;</span><span class="ident" id="2888964">flagRO</span>&nbsp;<span class="op" id="2888971">|</span>&nbsp;<span class="ident" id="2888973">flag</span><span class="op" id="2888977">(</span><span class="ident" id="2888978">Uint8</span><span class="op" id="2888983">)</span>&nbsp;<span class="op" id="2888985">|</span>&nbsp;<span class="ident" id="2888987">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888999">return</span>&nbsp;<span class="ident" id="2889006">Value</span><span class="op" id="2889011">{</span><span class="ident" id="2889012">uint8Type</span><span class="op" id="2889021">,</span>&nbsp;<span class="ident" id="2889023">p</span><span class="op" id="2889024">,</span>&nbsp;<span class="ident" id="2889026">fl</span><span class="op" id="2889028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2889031">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2889034">panic</span><span class="op" id="2889039">(</span><span class="op" id="2889040">&amp;</span><span class="ident" id="2889041">ValueError</span><span class="op" id="2889051">{</span><span class="string" id="2889052">&#34;reflect.Value.Index&#34;</span><span class="op" id="2889073">,</span>&nbsp;<span class="ident" id="2889075">v</span><span class="op" id="2889076">.</span><span class="ident" id="2889077">kind</span><span class="op" id="2889081">(</span><span class="op" id="2889082">)</span><span class="op" id="2889083">}</span><span class="op" id="2889084">)</span><br>
<span class="lineno"></span><span class="op" id="2889086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2889089">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2889139">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2889206">func</span>&nbsp;<span class="op" id="2889211">(</span><span class="ident" id="2889212">v</span>&nbsp;<span class="ident" id="2889214">Value</span><span class="op" id="2889219">)</span>&nbsp;<span class="ident" id="2889221">Int</span><span class="op" id="2889224">(</span><span class="op" id="2889225">)</span>&nbsp;<span class="ident" id="2889227">int64</span>&nbsp;<span class="op" id="2889233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2889236">k</span>&nbsp;<span class="op" id="2889238">:=</span>&nbsp;<span class="ident" id="2889241">v</span><span class="op" id="2889242">.</span><span class="ident" id="2889243">kind</span><span class="op" id="2889247">(</span><span class="op" id="2889248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2889251">p</span>&nbsp;<span class="op" id="2889253">:=</span>&nbsp;<span class="ident" id="2889256">v</span><span class="op" id="2889257">.</span><span class="ident" id="2889258">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889263">switch</span>&nbsp;<span class="ident" id="2889270">k</span>&nbsp;<span class="op" id="2889272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889275">case</span>&nbsp;<span class="ident" id="2889280">Int</span><span class="op" id="2889283">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889287">return</span>&nbsp;<span class="ident" id="2889294">int64</span><span class="op" id="2889299">(</span><span class="op" id="2889300">*</span><span class="op" id="2889301">(</span><span class="op" id="2889302">*</span><span class="builtintype" id="2889303">int</span><span class="op" id="2889306">)</span><span class="op" id="2889307">(</span><span class="ident" id="2889308">p</span><span class="op" id="2889309">)</span><span class="op" id="2889310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889313">case</span>&nbsp;<span class="ident" id="2889318">Int8</span><span class="op" id="2889322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889326">return</span>&nbsp;<span class="ident" id="2889333">int64</span><span class="op" id="2889338">(</span><span class="op" id="2889339">*</span><span class="op" id="2889340">(</span><span class="op" id="2889341">*</span><span class="builtintype" id="2889342">int8</span><span class="op" id="2889346">)</span><span class="op" id="2889347">(</span><span class="ident" id="2889348">p</span><span class="op" id="2889349">)</span><span class="op" id="2889350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889353">case</span>&nbsp;<span class="ident" id="2889358">Int16</span><span class="op" id="2889363">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889367">return</span>&nbsp;<span class="ident" id="2889374">int64</span><span class="op" id="2889379">(</span><span class="op" id="2889380">*</span><span class="op" id="2889381">(</span><span class="op" id="2889382">*</span><span class="builtintype" id="2889383">int16</span><span class="op" id="2889388">)</span><span class="op" id="2889389">(</span><span class="ident" id="2889390">p</span><span class="op" id="2889391">)</span><span class="op" id="2889392">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889395">case</span>&nbsp;<span class="ident" id="2889400">Int32</span><span class="op" id="2889405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889409">return</span>&nbsp;<span class="ident" id="2889416">int64</span><span class="op" id="2889421">(</span><span class="op" id="2889422">*</span><span class="op" id="2889423">(</span><span class="op" id="2889424">*</span><span class="builtintype" id="2889425">int32</span><span class="op" id="2889430">)</span><span class="op" id="2889431">(</span><span class="ident" id="2889432">p</span><span class="op" id="2889433">)</span><span class="op" id="2889434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889437">case</span>&nbsp;<span class="ident" id="2889442">Int64</span><span class="op" id="2889447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889451">return</span>&nbsp;<span class="ident" id="2889458">int64</span><span class="op" id="2889463">(</span><span class="op" id="2889464">*</span><span class="op" id="2889465">(</span><span class="op" id="2889466">*</span><span class="ident" id="2889467">int64</span><span class="op" id="2889472">)</span><span class="op" id="2889473">(</span><span class="ident" id="2889474">p</span><span class="op" id="2889475">)</span><span class="op" id="2889476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2889479">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2889482">panic</span><span class="op" id="2889487">(</span><span class="op" id="2889488">&amp;</span><span class="ident" id="2889489">ValueError</span><span class="op" id="2889499">{</span><span class="string" id="2889500">&#34;reflect.Value.Int&#34;</span><span class="op" id="2889519">,</span>&nbsp;<span class="ident" id="2889521">v</span><span class="op" id="2889522">.</span><span class="ident" id="2889523">kind</span><span class="op" id="2889527">(</span><span class="op" id="2889528">)</span><span class="op" id="2889529">}</span><span class="op" id="2889530">)</span><br>
<span class="lineno"></span><span class="op" id="2889532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2889535">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2889608">func</span>&nbsp;<span class="op" id="2889613">(</span><span class="ident" id="2889614">v</span>&nbsp;<span class="ident" id="2889616">Value</span><span class="op" id="2889621">)</span>&nbsp;<span class="ident" id="2889623">CanInterface</span><span class="op" id="2889635">(</span><span class="op" id="2889636">)</span>&nbsp;<span class="builtintype" id="2889638">bool</span>&nbsp;<span class="op" id="2889643">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889646">if</span>&nbsp;<span class="ident" id="2889649">v</span><span class="op" id="2889650">.</span><span class="ident" id="2889651">flag</span>&nbsp;<span class="op" id="2889656">==</span>&nbsp;<span class="num" id="2889659">0</span>&nbsp;<span class="op" id="2889661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2889665">panic</span><span class="op" id="2889670">(</span><span class="op" id="2889671">&amp;</span><span class="ident" id="2889672">ValueError</span><span class="op" id="2889682">{</span><span class="string" id="2889683">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2889711">,</span>&nbsp;<span class="ident" id="2889713">Invalid</span><span class="op" id="2889720">}</span><span class="op" id="2889721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2889724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889727">return</span>&nbsp;<span class="ident" id="2889734">v</span><span class="op" id="2889735">.</span><span class="ident" id="2889736">flag</span><span class="op" id="2889740">&amp;</span><span class="ident" id="2889741">flagRO</span>&nbsp;<span class="op" id="2889748">==</span>&nbsp;<span class="num" id="2889751">0</span><br>
<span class="lineno"></span><span class="op" id="2889753">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2889756">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2889814">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2889838">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2889884">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2889936">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2889965">func</span>&nbsp;<span class="op" id="2889970">(</span><span class="ident" id="2889971">v</span>&nbsp;<span class="ident" id="2889973">Value</span><span class="op" id="2889978">)</span>&nbsp;<span class="ident" id="2889980">Interface</span><span class="op" id="2889989">(</span><span class="op" id="2889990">)</span>&nbsp;<span class="op" id="2889992">(</span><span class="ident" id="2889993">i</span>&nbsp;<span class="keyword" id="2889995">interface</span><span class="op" id="2890004">{</span><span class="op" id="2890005">}</span><span class="op" id="2890006">)</span>&nbsp;<span class="op" id="2890008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890011">return</span>&nbsp;<span class="ident" id="2890018">valueInterface</span><span class="op" id="2890032">(</span><span class="ident" id="2890033">v</span><span class="op" id="2890034">,</span>&nbsp;<span class="builtintype" id="2890036">true</span><span class="op" id="2890040">)</span><br>
<span class="lineno"></span><span class="op" id="2890042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2890045">func</span>&nbsp;<span class="ident" id="2890050">valueInterface</span><span class="op" id="2890064">(</span><span class="ident" id="2890065">v</span>&nbsp;<span class="ident" id="2890067">Value</span><span class="op" id="2890072">,</span>&nbsp;<span class="ident" id="2890074">safe</span>&nbsp;<span class="builtintype" id="2890079">bool</span><span class="op" id="2890083">)</span>&nbsp;<span class="keyword" id="2890085">interface</span><span class="op" id="2890094">{</span><span class="op" id="2890095">}</span>&nbsp;<span class="op" id="2890097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890100">if</span>&nbsp;<span class="ident" id="2890103">v</span><span class="op" id="2890104">.</span><span class="ident" id="2890105">flag</span>&nbsp;<span class="op" id="2890110">==</span>&nbsp;<span class="num" id="2890113">0</span>&nbsp;<span class="op" id="2890115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2890119">panic</span><span class="op" id="2890124">(</span><span class="op" id="2890125">&amp;</span><span class="ident" id="2890126">ValueError</span><span class="op" id="2890136">{</span><span class="string" id="2890137">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2890162">,</span>&nbsp;<span class="num" id="2890164">0</span><span class="op" id="2890165">}</span><span class="op" id="2890166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2890169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890172">if</span>&nbsp;<span class="ident" id="2890175">safe</span>&nbsp;<span class="op" id="2890180">&amp;&amp;</span>&nbsp;<span class="ident" id="2890183">v</span><span class="op" id="2890184">.</span><span class="ident" id="2890185">flag</span><span class="op" id="2890189">&amp;</span><span class="ident" id="2890190">flagRO</span>&nbsp;<span class="op" id="2890197">!=</span>&nbsp;<span class="num" id="2890200">0</span>&nbsp;<span class="op" id="2890202">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890206">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890267">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890322">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2890388">panic</span><span class="op" id="2890393">(</span><span class="string" id="2890394">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2890481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2890484">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890487">if</span>&nbsp;<span class="ident" id="2890490">v</span><span class="op" id="2890491">.</span><span class="ident" id="2890492">flag</span><span class="op" id="2890496">&amp;</span><span class="ident" id="2890497">flagMethod</span>&nbsp;<span class="op" id="2890508">!=</span>&nbsp;<span class="num" id="2890511">0</span>&nbsp;<span class="op" id="2890513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2890517">v</span>&nbsp;<span class="op" id="2890519">=</span>&nbsp;<span class="ident" id="2890521">makeMethodValue</span><span class="op" id="2890536">(</span><span class="string" id="2890537">&#34;Interface&#34;</span><span class="op" id="2890548">,</span>&nbsp;<span class="ident" id="2890550">v</span><span class="op" id="2890551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2890554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890558">if</span>&nbsp;<span class="ident" id="2890561">v</span><span class="op" id="2890562">.</span><span class="ident" id="2890563">kind</span><span class="op" id="2890567">(</span><span class="op" id="2890568">)</span>&nbsp;<span class="op" id="2890570">==</span>&nbsp;<span class="ident" id="2890573">Interface</span>&nbsp;<span class="op" id="2890583">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890587">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890647">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890704">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890739">if</span>&nbsp;<span class="ident" id="2890742">v</span><span class="op" id="2890743">.</span><span class="ident" id="2890744">NumMethod</span><span class="op" id="2890753">(</span><span class="op" id="2890754">)</span>&nbsp;<span class="op" id="2890756">==</span>&nbsp;<span class="num" id="2890759">0</span>&nbsp;<span class="op" id="2890761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890766">return</span>&nbsp;<span class="op" id="2890773">*</span><span class="op" id="2890774">(</span><span class="op" id="2890775">*</span><span class="keyword" id="2890776">interface</span><span class="op" id="2890785">{</span><span class="op" id="2890786">}</span><span class="op" id="2890787">)</span><span class="op" id="2890788">(</span><span class="ident" id="2890789">v</span><span class="op" id="2890790">.</span><span class="ident" id="2890791">ptr</span><span class="op" id="2890794">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2890798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890802">return</span>&nbsp;<span class="op" id="2890809">*</span><span class="op" id="2890810">(</span><span class="op" id="2890811">*</span><span class="keyword" id="2890812">interface</span>&nbsp;<span class="op" id="2890822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2890827">M</span><span class="op" id="2890828">(</span><span class="op" id="2890829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2890833">}</span><span class="op" id="2890834">)</span><span class="op" id="2890835">(</span><span class="ident" id="2890836">v</span><span class="op" id="2890837">.</span><span class="ident" id="2890838">ptr</span><span class="op" id="2890841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2890844">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890848">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890921">return</span>&nbsp;<span class="ident" id="2890928">packEface</span><span class="op" id="2890937">(</span><span class="ident" id="2890938">v</span><span class="op" id="2890939">)</span><br>
<span class="lineno"></span><span class="op" id="2890941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2890944">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2891012">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2891055">func</span>&nbsp;<span class="op" id="2891060">(</span><span class="ident" id="2891061">v</span>&nbsp;<span class="ident" id="2891063">Value</span><span class="op" id="2891068">)</span>&nbsp;<span class="ident" id="2891070">InterfaceData</span><span class="op" id="2891083">(</span><span class="op" id="2891084">)</span>&nbsp;<span class="op" id="2891086">[</span><span class="num" id="2891087">2</span><span class="op" id="2891088">]</span><span class="builtintype" id="2891089">uintptr</span>&nbsp;<span class="op" id="2891097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2891100">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891125">v</span><span class="op" id="2891126">.</span><span class="ident" id="2891127">mustBe</span><span class="op" id="2891133">(</span><span class="ident" id="2891134">Interface</span><span class="op" id="2891143">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2891146">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2891197">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2891249">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2891302">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2891326">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891394">return</span>&nbsp;<span class="op" id="2891401">*</span><span class="op" id="2891402">(</span><span class="op" id="2891403">*</span><span class="op" id="2891404">[</span><span class="num" id="2891405">2</span><span class="op" id="2891406">]</span><span class="builtintype" id="2891407">uintptr</span><span class="op" id="2891414">)</span><span class="op" id="2891415">(</span><span class="ident" id="2891416">v</span><span class="op" id="2891417">.</span><span class="ident" id="2891418">ptr</span><span class="op" id="2891421">)</span><br>
<span class="lineno"></span><span class="op" id="2891423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891426">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2891495">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2891562">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2891630">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2891698">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2891764">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2891832">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2891842">func</span>&nbsp;<span class="op" id="2891847">(</span><span class="ident" id="2891848">v</span>&nbsp;<span class="ident" id="2891850">Value</span><span class="op" id="2891855">)</span>&nbsp;<span class="ident" id="2891857">IsNil</span><span class="op" id="2891862">(</span><span class="op" id="2891863">)</span>&nbsp;<span class="builtintype" id="2891865">bool</span>&nbsp;<span class="op" id="2891870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891873">k</span>&nbsp;<span class="op" id="2891875">:=</span>&nbsp;<span class="ident" id="2891878">v</span><span class="op" id="2891879">.</span><span class="ident" id="2891880">kind</span><span class="op" id="2891884">(</span><span class="op" id="2891885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891888">switch</span>&nbsp;<span class="ident" id="2891895">k</span>&nbsp;<span class="op" id="2891897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891900">case</span>&nbsp;<span class="ident" id="2891905">Chan</span><span class="op" id="2891909">,</span>&nbsp;<span class="ident" id="2891911">Func</span><span class="op" id="2891915">,</span>&nbsp;<span class="ident" id="2891917">Map</span><span class="op" id="2891920">,</span>&nbsp;<span class="ident" id="2891922">Ptr</span><span class="op" id="2891925">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891929">if</span>&nbsp;<span class="ident" id="2891932">v</span><span class="op" id="2891933">.</span><span class="ident" id="2891934">flag</span><span class="op" id="2891938">&amp;</span><span class="ident" id="2891939">flagMethod</span>&nbsp;<span class="op" id="2891950">!=</span>&nbsp;<span class="num" id="2891953">0</span>&nbsp;<span class="op" id="2891955">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891960">return</span>&nbsp;<span class="builtintype" id="2891967">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2891975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891979">ptr</span>&nbsp;<span class="op" id="2891983">:=</span>&nbsp;<span class="ident" id="2891986">v</span><span class="op" id="2891987">.</span><span class="ident" id="2891988">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891994">if</span>&nbsp;<span class="ident" id="2891997">v</span><span class="op" id="2891998">.</span><span class="ident" id="2891999">flag</span><span class="op" id="2892003">&amp;</span><span class="ident" id="2892004">flagIndir</span>&nbsp;<span class="op" id="2892014">!=</span>&nbsp;<span class="num" id="2892017">0</span>&nbsp;<span class="op" id="2892019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892024">ptr</span>&nbsp;<span class="op" id="2892028">=</span>&nbsp;<span class="op" id="2892030">*</span><span class="op" id="2892031">(</span><span class="op" id="2892032">*</span><span class="ident" id="2892033">unsafe</span><span class="op" id="2892039">.</span><span class="ident" id="2892040">Pointer</span><span class="op" id="2892047">)</span><span class="op" id="2892048">(</span><span class="ident" id="2892049">ptr</span><span class="op" id="2892052">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2892056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892060">return</span>&nbsp;<span class="ident" id="2892067">ptr</span>&nbsp;<span class="op" id="2892071">==</span>&nbsp;<span class="ident" id="2892074">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892079">case</span>&nbsp;<span class="ident" id="2892084">Interface</span><span class="op" id="2892093">,</span>&nbsp;<span class="ident" id="2892095">Slice</span><span class="op" id="2892100">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2892104">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2892162">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892221">return</span>&nbsp;<span class="op" id="2892228">*</span><span class="op" id="2892229">(</span><span class="op" id="2892230">*</span><span class="ident" id="2892231">unsafe</span><span class="op" id="2892237">.</span><span class="ident" id="2892238">Pointer</span><span class="op" id="2892245">)</span><span class="op" id="2892246">(</span><span class="ident" id="2892247">v</span><span class="op" id="2892248">.</span><span class="ident" id="2892249">ptr</span><span class="op" id="2892252">)</span>&nbsp;<span class="op" id="2892254">==</span>&nbsp;<span class="ident" id="2892257">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2892262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2892265">panic</span><span class="op" id="2892270">(</span><span class="op" id="2892271">&amp;</span><span class="ident" id="2892272">ValueError</span><span class="op" id="2892282">{</span><span class="string" id="2892283">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2892304">,</span>&nbsp;<span class="ident" id="2892306">v</span><span class="op" id="2892307">.</span><span class="ident" id="2892308">kind</span><span class="op" id="2892312">(</span><span class="op" id="2892313">)</span><span class="op" id="2892314">}</span><span class="op" id="2892315">)</span><br>
<span class="lineno"></span><span class="op" id="2892317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2892320">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2892369">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2892413">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2892481">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2892542">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2892610">func</span>&nbsp;<span class="op" id="2892615">(</span><span class="ident" id="2892616">v</span>&nbsp;<span class="ident" id="2892618">Value</span><span class="op" id="2892623">)</span>&nbsp;<span class="ident" id="2892625">IsValid</span><span class="op" id="2892632">(</span><span class="op" id="2892633">)</span>&nbsp;<span class="builtintype" id="2892635">bool</span>&nbsp;<span class="op" id="2892640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892643">return</span>&nbsp;<span class="ident" id="2892650">v</span><span class="op" id="2892651">.</span><span class="ident" id="2892652">flag</span>&nbsp;<span class="op" id="2892657">!=</span>&nbsp;<span class="num" id="2892660">0</span><br>
<span class="lineno"></span><span class="op" id="2892662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2892665">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2892691">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2892764">func</span>&nbsp;<span class="op" id="2892769">(</span><span class="ident" id="2892770">v</span>&nbsp;<span class="ident" id="2892772">Value</span><span class="op" id="2892777">)</span>&nbsp;<span class="ident" id="2892779">Kind</span><span class="op" id="2892783">(</span><span class="op" id="2892784">)</span>&nbsp;<span class="ident" id="2892786">Kind</span>&nbsp;<span class="op" id="2892791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892794">return</span>&nbsp;<span class="ident" id="2892801">v</span><span class="op" id="2892802">.</span><span class="ident" id="2892803">kind</span><span class="op" id="2892807">(</span><span class="op" id="2892808">)</span><br>
<span class="lineno"></span><span class="op" id="2892810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2892813">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2892840">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2892908">func</span>&nbsp;<span class="op" id="2892913">(</span><span class="ident" id="2892914">v</span>&nbsp;<span class="ident" id="2892916">Value</span><span class="op" id="2892921">)</span>&nbsp;<span class="ident" id="2892923">Len</span><span class="op" id="2892926">(</span><span class="op" id="2892927">)</span>&nbsp;<span class="builtintype" id="2892929">int</span>&nbsp;<span class="op" id="2892933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892936">k</span>&nbsp;<span class="op" id="2892938">:=</span>&nbsp;<span class="ident" id="2892941">v</span><span class="op" id="2892942">.</span><span class="ident" id="2892943">kind</span><span class="op" id="2892947">(</span><span class="op" id="2892948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892951">switch</span>&nbsp;<span class="ident" id="2892958">k</span>&nbsp;<span class="op" id="2892960">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892963">case</span>&nbsp;<span class="ident" id="2892968">Array</span><span class="op" id="2892973">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892977">tt</span>&nbsp;<span class="op" id="2892980">:=</span>&nbsp;<span class="op" id="2892983">(</span><span class="op" id="2892984">*</span><span class="ident" id="2892985">arrayType</span><span class="op" id="2892994">)</span><span class="op" id="2892995">(</span><span class="ident" id="2892996">unsafe</span><span class="op" id="2893002">.</span><span class="ident" id="2893003">Pointer</span><span class="op" id="2893010">(</span><span class="ident" id="2893011">v</span><span class="op" id="2893012">.</span><span class="ident" id="2893013">typ</span><span class="op" id="2893016">)</span><span class="op" id="2893017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893021">return</span>&nbsp;<span class="builtintype" id="2893028">int</span><span class="op" id="2893031">(</span><span class="ident" id="2893032">tt</span><span class="op" id="2893034">.</span><span class="builtinfunc" id="2893035">len</span><span class="op" id="2893038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893041">case</span>&nbsp;<span class="ident" id="2893046">Chan</span><span class="op" id="2893050">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893054">return</span>&nbsp;<span class="ident" id="2893061">chanlen</span><span class="op" id="2893068">(</span><span class="ident" id="2893069">v</span><span class="op" id="2893070">.</span><span class="ident" id="2893071">pointer</span><span class="op" id="2893078">(</span><span class="op" id="2893079">)</span><span class="op" id="2893080">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893083">case</span>&nbsp;<span class="ident" id="2893088">Map</span><span class="op" id="2893091">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893095">return</span>&nbsp;<span class="ident" id="2893102">maplen</span><span class="op" id="2893108">(</span><span class="ident" id="2893109">v</span><span class="op" id="2893110">.</span><span class="ident" id="2893111">pointer</span><span class="op" id="2893118">(</span><span class="op" id="2893119">)</span><span class="op" id="2893120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893123">case</span>&nbsp;<span class="ident" id="2893128">Slice</span><span class="op" id="2893133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2893137">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893189">return</span>&nbsp;<span class="op" id="2893196">(</span><span class="op" id="2893197">*</span><span class="ident" id="2893198">sliceHeader</span><span class="op" id="2893209">)</span><span class="op" id="2893210">(</span><span class="ident" id="2893211">v</span><span class="op" id="2893212">.</span><span class="ident" id="2893213">ptr</span><span class="op" id="2893216">)</span><span class="op" id="2893217">.</span><span class="ident" id="2893218">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893223">case</span>&nbsp;<span class="ident" id="2893228">String</span><span class="op" id="2893234">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2893238">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893291">return</span>&nbsp;<span class="op" id="2893298">(</span><span class="op" id="2893299">*</span><span class="ident" id="2893300">stringHeader</span><span class="op" id="2893312">)</span><span class="op" id="2893313">(</span><span class="ident" id="2893314">v</span><span class="op" id="2893315">.</span><span class="ident" id="2893316">ptr</span><span class="op" id="2893319">)</span><span class="op" id="2893320">.</span><span class="ident" id="2893321">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2893326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2893329">panic</span><span class="op" id="2893334">(</span><span class="op" id="2893335">&amp;</span><span class="ident" id="2893336">ValueError</span><span class="op" id="2893346">{</span><span class="string" id="2893347">&#34;reflect.Value.Len&#34;</span><span class="op" id="2893366">,</span>&nbsp;<span class="ident" id="2893368">v</span><span class="op" id="2893369">.</span><span class="ident" id="2893370">kind</span><span class="op" id="2893374">(</span><span class="op" id="2893375">)</span><span class="op" id="2893376">}</span><span class="op" id="2893377">)</span><br>
<span class="lineno">980</span><span class="op" id="2893379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2893382">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2893446">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2893483">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2893573">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2893644">func</span>&nbsp;<span class="op" id="2893649">(</span><span class="ident" id="2893650">v</span>&nbsp;<span class="ident" id="2893652">Value</span><span class="op" id="2893657">)</span>&nbsp;<span class="ident" id="2893659">MapIndex</span><span class="op" id="2893667">(</span><span class="ident" id="2893668">key</span>&nbsp;<span class="ident" id="2893672">Value</span><span class="op" id="2893677">)</span>&nbsp;<span class="ident" id="2893679">Value</span>&nbsp;<span class="op" id="2893685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893688">v</span><span class="op" id="2893689">.</span><span class="ident" id="2893690">mustBe</span><span class="op" id="2893696">(</span><span class="ident" id="2893697">Map</span><span class="op" id="2893700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893703">tt</span>&nbsp;<span class="op" id="2893706">:=</span>&nbsp;<span class="op" id="2893709">(</span><span class="op" id="2893710">*</span><span class="ident" id="2893711">mapType</span><span class="op" id="2893718">)</span><span class="op" id="2893719">(</span><span class="ident" id="2893720">unsafe</span><span class="op" id="2893726">.</span><span class="ident" id="2893727">Pointer</span><span class="op" id="2893734">(</span><span class="ident" id="2893735">v</span><span class="op" id="2893736">.</span><span class="ident" id="2893737">typ</span><span class="op" id="2893740">)</span><span class="op" id="2893741">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2893745">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2893802">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2893858">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2893915">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2893972">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2894028">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2894085">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894111">key</span>&nbsp;<span class="op" id="2894115">=</span>&nbsp;<span class="ident" id="2894117">key</span><span class="op" id="2894120">.</span><span class="ident" id="2894121">assignTo</span><span class="op" id="2894129">(</span><span class="string" id="2894130">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2894154">,</span>&nbsp;<span class="ident" id="2894156">tt</span><span class="op" id="2894158">.</span><span class="ident" id="2894159">key</span><span class="op" id="2894162">,</span>&nbsp;<span class="ident" id="2894164">nil</span><span class="op" id="2894167">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894171">var</span>&nbsp;<span class="ident" id="2894175">k</span>&nbsp;<span class="ident" id="2894177">unsafe</span><span class="op" id="2894183">.</span><span class="ident" id="2894184">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894193">if</span>&nbsp;<span class="ident" id="2894196">key</span><span class="op" id="2894199">.</span><span class="ident" id="2894200">flag</span><span class="op" id="2894204">&amp;</span><span class="ident" id="2894205">flagIndir</span>&nbsp;<span class="op" id="2894215">!=</span>&nbsp;<span class="num" id="2894218">0</span>&nbsp;<span class="op" id="2894220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894224">k</span>&nbsp;<span class="op" id="2894226">=</span>&nbsp;<span class="ident" id="2894228">key</span><span class="op" id="2894231">.</span><span class="ident" id="2894232">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894237">}</span>&nbsp;<span class="keyword" id="2894239">else</span>&nbsp;<span class="op" id="2894244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894248">k</span>&nbsp;<span class="op" id="2894250">=</span>&nbsp;<span class="ident" id="2894252">unsafe</span><span class="op" id="2894258">.</span><span class="ident" id="2894259">Pointer</span><span class="op" id="2894266">(</span><span class="op" id="2894267">&amp;</span><span class="ident" id="2894268">key</span><span class="op" id="2894271">.</span><span class="ident" id="2894272">ptr</span><span class="op" id="2894275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894278">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894281">e</span>&nbsp;<span class="op" id="2894283">:=</span>&nbsp;<span class="ident" id="2894286">mapaccess</span><span class="op" id="2894295">(</span><span class="ident" id="2894296">v</span><span class="op" id="2894297">.</span><span class="ident" id="2894298">typ</span><span class="op" id="2894301">,</span>&nbsp;<span class="ident" id="2894303">v</span><span class="op" id="2894304">.</span><span class="ident" id="2894305">pointer</span><span class="op" id="2894312">(</span><span class="op" id="2894313">)</span><span class="op" id="2894314">,</span>&nbsp;<span class="ident" id="2894316">k</span><span class="op" id="2894317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894320">if</span>&nbsp;<span class="ident" id="2894323">e</span>&nbsp;<span class="op" id="2894325">==</span>&nbsp;<span class="ident" id="2894328">nil</span>&nbsp;<span class="op" id="2894332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894336">return</span>&nbsp;<span class="ident" id="2894343">Value</span><span class="op" id="2894348">{</span><span class="op" id="2894349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894355">typ</span>&nbsp;<span class="op" id="2894359">:=</span>&nbsp;<span class="ident" id="2894362">tt</span><span class="op" id="2894364">.</span><span class="ident" id="2894365">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894371">fl</span>&nbsp;<span class="op" id="2894374">:=</span>&nbsp;<span class="op" id="2894377">(</span><span class="ident" id="2894378">v</span><span class="op" id="2894379">.</span><span class="ident" id="2894380">flag</span>&nbsp;<span class="op" id="2894385">|</span>&nbsp;<span class="ident" id="2894387">key</span><span class="op" id="2894390">.</span><span class="ident" id="2894391">flag</span><span class="op" id="2894395">)</span>&nbsp;<span class="op" id="2894397">&amp;</span>&nbsp;<span class="ident" id="2894399">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894407">fl</span>&nbsp;<span class="op" id="2894410">|=</span>&nbsp;<span class="ident" id="2894413">flag</span><span class="op" id="2894417">(</span><span class="ident" id="2894418">typ</span><span class="op" id="2894421">.</span><span class="ident" id="2894422">Kind</span><span class="op" id="2894426">(</span><span class="op" id="2894427">)</span><span class="op" id="2894428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894431">if</span>&nbsp;<span class="ident" id="2894434">ifaceIndir</span><span class="op" id="2894444">(</span><span class="ident" id="2894445">typ</span><span class="op" id="2894448">)</span>&nbsp;<span class="op" id="2894450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2894454">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2894500">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894540">c</span>&nbsp;<span class="op" id="2894542">:=</span>&nbsp;<span class="ident" id="2894545">unsafe_New</span><span class="op" id="2894555">(</span><span class="ident" id="2894556">typ</span><span class="op" id="2894559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894563">memmove</span><span class="op" id="2894570">(</span><span class="ident" id="2894571">c</span><span class="op" id="2894572">,</span>&nbsp;<span class="ident" id="2894574">e</span><span class="op" id="2894575">,</span>&nbsp;<span class="ident" id="2894577">typ</span><span class="op" id="2894580">.</span><span class="ident" id="2894581">size</span><span class="op" id="2894585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894589">return</span>&nbsp;<span class="ident" id="2894596">Value</span><span class="op" id="2894601">{</span><span class="ident" id="2894602">typ</span><span class="op" id="2894605">,</span>&nbsp;<span class="ident" id="2894607">c</span><span class="op" id="2894608">,</span>&nbsp;<span class="ident" id="2894610">fl</span>&nbsp;<span class="op" id="2894613">|</span>&nbsp;<span class="ident" id="2894615">flagIndir</span><span class="op" id="2894624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894627">}</span>&nbsp;<span class="keyword" id="2894629">else</span>&nbsp;<span class="op" id="2894634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894638">return</span>&nbsp;<span class="ident" id="2894645">Value</span><span class="op" id="2894650">{</span><span class="ident" id="2894651">typ</span><span class="op" id="2894654">,</span>&nbsp;<span class="op" id="2894656">*</span><span class="op" id="2894657">(</span><span class="op" id="2894658">*</span><span class="ident" id="2894659">unsafe</span><span class="op" id="2894665">.</span><span class="ident" id="2894666">Pointer</span><span class="op" id="2894673">)</span><span class="op" id="2894674">(</span><span class="ident" id="2894675">e</span><span class="op" id="2894676">)</span><span class="op" id="2894677">,</span>&nbsp;<span class="ident" id="2894679">fl</span><span class="op" id="2894681">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894684">}</span><br>
<span class="lineno"></span><span class="op" id="2894686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2894689">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2894760">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2894785">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2894822">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2894878">func</span>&nbsp;<span class="op" id="2894883">(</span><span class="ident" id="2894884">v</span>&nbsp;<span class="ident" id="2894886">Value</span><span class="op" id="2894891">)</span>&nbsp;<span class="ident" id="2894893">MapKeys</span><span class="op" id="2894900">(</span><span class="op" id="2894901">)</span>&nbsp;<span class="op" id="2894903">[</span><span class="op" id="2894904">]</span><span class="ident" id="2894905">Value</span>&nbsp;<span class="op" id="2894911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894914">v</span><span class="op" id="2894915">.</span><span class="ident" id="2894916">mustBe</span><span class="op" id="2894922">(</span><span class="ident" id="2894923">Map</span><span class="op" id="2894926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894929">tt</span>&nbsp;<span class="op" id="2894932">:=</span>&nbsp;<span class="op" id="2894935">(</span><span class="op" id="2894936">*</span><span class="ident" id="2894937">mapType</span><span class="op" id="2894944">)</span><span class="op" id="2894945">(</span><span class="ident" id="2894946">unsafe</span><span class="op" id="2894952">.</span><span class="ident" id="2894953">Pointer</span><span class="op" id="2894960">(</span><span class="ident" id="2894961">v</span><span class="op" id="2894962">.</span><span class="ident" id="2894963">typ</span><span class="op" id="2894966">)</span><span class="op" id="2894967">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894970">keyType</span>&nbsp;<span class="op" id="2894978">:=</span>&nbsp;<span class="ident" id="2894981">tt</span><span class="op" id="2894983">.</span><span class="ident" id="2894984">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894990">fl</span>&nbsp;<span class="op" id="2894993">:=</span>&nbsp;<span class="ident" id="2894996">v</span><span class="op" id="2894997">.</span><span class="ident" id="2894998">flag</span><span class="op" id="2895002">&amp;</span><span class="ident" id="2895003">flagRO</span>&nbsp;<span class="op" id="2895010">|</span>&nbsp;<span class="ident" id="2895012">flag</span><span class="op" id="2895016">(</span><span class="ident" id="2895017">keyType</span><span class="op" id="2895024">.</span><span class="ident" id="2895025">Kind</span><span class="op" id="2895029">(</span><span class="op" id="2895030">)</span><span class="op" id="2895031">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895035">m</span>&nbsp;<span class="op" id="2895037">:=</span>&nbsp;<span class="ident" id="2895040">v</span><span class="op" id="2895041">.</span><span class="ident" id="2895042">pointer</span><span class="op" id="2895049">(</span><span class="op" id="2895050">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895053">mlen</span>&nbsp;<span class="op" id="2895058">:=</span>&nbsp;<span class="builtintype" id="2895061">int</span><span class="op" id="2895064">(</span><span class="num" id="2895065">0</span><span class="op" id="2895066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895069">if</span>&nbsp;<span class="ident" id="2895072">m</span>&nbsp;<span class="op" id="2895074">!=</span>&nbsp;<span class="ident" id="2895077">nil</span>&nbsp;<span class="op" id="2895081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895085">mlen</span>&nbsp;<span class="op" id="2895090">=</span>&nbsp;<span class="ident" id="2895092">maplen</span><span class="op" id="2895098">(</span><span class="ident" id="2895099">m</span><span class="op" id="2895100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895106">it</span>&nbsp;<span class="op" id="2895109">:=</span>&nbsp;<span class="ident" id="2895112">mapiterinit</span><span class="op" id="2895123">(</span><span class="ident" id="2895124">v</span><span class="op" id="2895125">.</span><span class="ident" id="2895126">typ</span><span class="op" id="2895129">,</span>&nbsp;<span class="ident" id="2895131">m</span><span class="op" id="2895132">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895135">a</span>&nbsp;<span class="op" id="2895137">:=</span>&nbsp;<span class="builtinfunc" id="2895140">make</span><span class="op" id="2895144">(</span><span class="op" id="2895145">[</span><span class="op" id="2895146">]</span><span class="ident" id="2895147">Value</span><span class="op" id="2895152">,</span>&nbsp;<span class="ident" id="2895154">mlen</span><span class="op" id="2895158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895161">var</span>&nbsp;<span class="ident" id="2895165">i</span>&nbsp;<span class="builtintype" id="2895167">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895172">for</span>&nbsp;<span class="ident" id="2895176">i</span>&nbsp;<span class="op" id="2895178">=</span>&nbsp;<span class="num" id="2895180">0</span><span class="op" id="2895181">;</span>&nbsp;<span class="ident" id="2895183">i</span>&nbsp;<span class="op" id="2895185">&lt;</span>&nbsp;<span class="builtinfunc" id="2895187">len</span><span class="op" id="2895190">(</span><span class="ident" id="2895191">a</span><span class="op" id="2895192">)</span><span class="op" id="2895193">;</span>&nbsp;<span class="ident" id="2895195">i</span><span class="op" id="2895196">++</span>&nbsp;<span class="op" id="2895199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895203">key</span>&nbsp;<span class="op" id="2895207">:=</span>&nbsp;<span class="ident" id="2895210">mapiterkey</span><span class="op" id="2895220">(</span><span class="ident" id="2895221">it</span><span class="op" id="2895223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895227">if</span>&nbsp;<span class="ident" id="2895230">key</span>&nbsp;<span class="op" id="2895234">==</span>&nbsp;<span class="ident" id="2895237">nil</span>&nbsp;<span class="op" id="2895241">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2895246">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2895299">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2895357">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895383">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895391">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895395">if</span>&nbsp;<span class="ident" id="2895398">ifaceIndir</span><span class="op" id="2895408">(</span><span class="ident" id="2895409">keyType</span><span class="op" id="2895416">)</span>&nbsp;<span class="op" id="2895418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2895423">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2895470">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895511">c</span>&nbsp;<span class="op" id="2895513">:=</span>&nbsp;<span class="ident" id="2895516">unsafe_New</span><span class="op" id="2895526">(</span><span class="ident" id="2895527">keyType</span><span class="op" id="2895534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895539">memmove</span><span class="op" id="2895546">(</span><span class="ident" id="2895547">c</span><span class="op" id="2895548">,</span>&nbsp;<span class="ident" id="2895550">key</span><span class="op" id="2895553">,</span>&nbsp;<span class="ident" id="2895555">keyType</span><span class="op" id="2895562">.</span><span class="ident" id="2895563">size</span><span class="op" id="2895567">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895572">a</span><span class="op" id="2895573">[</span><span class="ident" id="2895574">i</span><span class="op" id="2895575">]</span>&nbsp;<span class="op" id="2895577">=</span>&nbsp;<span class="ident" id="2895579">Value</span><span class="op" id="2895584">{</span><span class="ident" id="2895585">keyType</span><span class="op" id="2895592">,</span>&nbsp;<span class="ident" id="2895594">c</span><span class="op" id="2895595">,</span>&nbsp;<span class="ident" id="2895597">fl</span>&nbsp;<span class="op" id="2895600">|</span>&nbsp;<span class="ident" id="2895602">flagIndir</span><span class="op" id="2895611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895615">}</span>&nbsp;<span class="keyword" id="2895617">else</span>&nbsp;<span class="op" id="2895622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895627">a</span><span class="op" id="2895628">[</span><span class="ident" id="2895629">i</span><span class="op" id="2895630">]</span>&nbsp;<span class="op" id="2895632">=</span>&nbsp;<span class="ident" id="2895634">Value</span><span class="op" id="2895639">{</span><span class="ident" id="2895640">keyType</span><span class="op" id="2895647">,</span>&nbsp;<span class="op" id="2895649">*</span><span class="op" id="2895650">(</span><span class="op" id="2895651">*</span><span class="ident" id="2895652">unsafe</span><span class="op" id="2895658">.</span><span class="ident" id="2895659">Pointer</span><span class="op" id="2895666">)</span><span class="op" id="2895667">(</span><span class="ident" id="2895668">key</span><span class="op" id="2895671">)</span><span class="op" id="2895672">,</span>&nbsp;<span class="ident" id="2895674">fl</span><span class="op" id="2895676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895684">mapiternext</span><span class="op" id="2895695">(</span><span class="ident" id="2895696">it</span><span class="op" id="2895698">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895704">return</span>&nbsp;<span class="ident" id="2895711">a</span><span class="op" id="2895712">[</span><span class="op" id="2895713">:</span><span class="ident" id="2895714">i</span><span class="op" id="2895715">]</span><br>
<span class="lineno"></span><span class="op" id="2895717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2895720">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2895789">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2895860">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2895932">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2896004">func</span>&nbsp;<span class="op" id="2896009">(</span><span class="ident" id="2896010">v</span>&nbsp;<span class="ident" id="2896012">Value</span><span class="op" id="2896017">)</span>&nbsp;<span class="ident" id="2896019">Method</span><span class="op" id="2896025">(</span><span class="ident" id="2896026">i</span>&nbsp;<span class="builtintype" id="2896028">int</span><span class="op" id="2896031">)</span>&nbsp;<span class="ident" id="2896033">Value</span>&nbsp;<span class="op" id="2896039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896042">if</span>&nbsp;<span class="ident" id="2896045">v</span><span class="op" id="2896046">.</span><span class="ident" id="2896047">typ</span>&nbsp;<span class="op" id="2896051">==</span>&nbsp;<span class="ident" id="2896054">nil</span>&nbsp;<span class="op" id="2896058">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2896062">panic</span><span class="op" id="2896067">(</span><span class="op" id="2896068">&amp;</span><span class="ident" id="2896069">ValueError</span><span class="op" id="2896079">{</span><span class="string" id="2896080">&#34;reflect.Value.Method&#34;</span><span class="op" id="2896102">,</span>&nbsp;<span class="ident" id="2896104">Invalid</span><span class="op" id="2896111">}</span><span class="op" id="2896112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2896115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896118">if</span>&nbsp;<span class="ident" id="2896121">v</span><span class="op" id="2896122">.</span><span class="ident" id="2896123">flag</span><span class="op" id="2896127">&amp;</span><span class="ident" id="2896128">flagMethod</span>&nbsp;<span class="op" id="2896139">!=</span>&nbsp;<span class="num" id="2896142">0</span>&nbsp;<span class="op" id="2896144">||</span>&nbsp;<span class="builtintype" id="2896147">uint</span><span class="op" id="2896151">(</span><span class="ident" id="2896152">i</span><span class="op" id="2896153">)</span>&nbsp;<span class="op" id="2896155">&gt;=</span>&nbsp;<span class="builtintype" id="2896158">uint</span><span class="op" id="2896162">(</span><span class="ident" id="2896163">v</span><span class="op" id="2896164">.</span><span class="ident" id="2896165">typ</span><span class="op" id="2896168">.</span><span class="ident" id="2896169">NumMethod</span><span class="op" id="2896178">(</span><span class="op" id="2896179">)</span><span class="op" id="2896180">)</span>&nbsp;<span class="op" id="2896182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2896186">panic</span><span class="op" id="2896191">(</span><span class="string" id="2896192">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2896228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2896231">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896234">if</span>&nbsp;<span class="ident" id="2896237">v</span><span class="op" id="2896238">.</span><span class="ident" id="2896239">typ</span><span class="op" id="2896242">.</span><span class="ident" id="2896243">Kind</span><span class="op" id="2896247">(</span><span class="op" id="2896248">)</span>&nbsp;<span class="op" id="2896250">==</span>&nbsp;<span class="ident" id="2896253">Interface</span>&nbsp;<span class="op" id="2896263">&amp;&amp;</span>&nbsp;<span class="ident" id="2896266">v</span><span class="op" id="2896267">.</span><span class="ident" id="2896268">IsNil</span><span class="op" id="2896273">(</span><span class="op" id="2896274">)</span>&nbsp;<span class="op" id="2896276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2896280">panic</span><span class="op" id="2896285">(</span><span class="string" id="2896286">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2896326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2896329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896332">fl</span>&nbsp;<span class="op" id="2896335">:=</span>&nbsp;<span class="ident" id="2896338">v</span><span class="op" id="2896339">.</span><span class="ident" id="2896340">flag</span>&nbsp;<span class="op" id="2896345">&amp;</span>&nbsp;<span class="op" id="2896347">(</span><span class="ident" id="2896348">flagRO</span>&nbsp;<span class="op" id="2896355">|</span>&nbsp;<span class="ident" id="2896357">flagIndir</span><span class="op" id="2896366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896369">fl</span>&nbsp;<span class="op" id="2896372">|=</span>&nbsp;<span class="ident" id="2896375">flag</span><span class="op" id="2896379">(</span><span class="ident" id="2896380">Func</span><span class="op" id="2896384">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896387">fl</span>&nbsp;<span class="op" id="2896390">|=</span>&nbsp;<span class="ident" id="2896393">flag</span><span class="op" id="2896397">(</span><span class="ident" id="2896398">i</span><span class="op" id="2896399">)</span><span class="op" id="2896400">&lt;&lt;</span><span class="ident" id="2896402">flagMethodShift</span>&nbsp;<span class="op" id="2896418">|</span>&nbsp;<span class="ident" id="2896420">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896432">return</span>&nbsp;<span class="ident" id="2896439">Value</span><span class="op" id="2896444">{</span><span class="ident" id="2896445">v</span><span class="op" id="2896446">.</span><span class="ident" id="2896447">typ</span><span class="op" id="2896450">,</span>&nbsp;<span class="ident" id="2896452">v</span><span class="op" id="2896453">.</span><span class="ident" id="2896454">ptr</span><span class="op" id="2896457">,</span>&nbsp;<span class="ident" id="2896459">fl</span><span class="op" id="2896461">}</span><br>
<span class="lineno"></span><span class="op" id="2896463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2896466">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2896536">func</span>&nbsp;<span class="op" id="2896541">(</span><span class="ident" id="2896542">v</span>&nbsp;<span class="ident" id="2896544">Value</span><span class="op" id="2896549">)</span>&nbsp;<span class="ident" id="2896551">NumMethod</span><span class="op" id="2896560">(</span><span class="op" id="2896561">)</span>&nbsp;<span class="builtintype" id="2896563">int</span>&nbsp;<span class="op" id="2896567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896570">if</span>&nbsp;<span class="ident" id="2896573">v</span><span class="op" id="2896574">.</span><span class="ident" id="2896575">typ</span>&nbsp;<span class="op" id="2896579">==</span>&nbsp;<span class="ident" id="2896582">nil</span>&nbsp;<span class="op" id="2896586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2896590">panic</span><span class="op" id="2896595">(</span><span class="op" id="2896596">&amp;</span><span class="ident" id="2896597">ValueError</span><span class="op" id="2896607">{</span><span class="string" id="2896608">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2896633">,</span>&nbsp;<span class="ident" id="2896635">Invalid</span><span class="op" id="2896642">}</span><span class="op" id="2896643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2896646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896649">if</span>&nbsp;<span class="ident" id="2896652">v</span><span class="op" id="2896653">.</span><span class="ident" id="2896654">flag</span><span class="op" id="2896658">&amp;</span><span class="ident" id="2896659">flagMethod</span>&nbsp;<span class="op" id="2896670">!=</span>&nbsp;<span class="num" id="2896673">0</span>&nbsp;<span class="op" id="2896675">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896679">return</span>&nbsp;<span class="num" id="2896686">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2896689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896692">return</span>&nbsp;<span class="ident" id="2896699">v</span><span class="op" id="2896700">.</span><span class="ident" id="2896701">typ</span><span class="op" id="2896704">.</span><span class="ident" id="2896705">NumMethod</span><span class="op" id="2896714">(</span><span class="op" id="2896715">)</span><br>
<span class="lineno"></span><span class="op" id="2896717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2896720">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2896789">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2896818">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2896889">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2896961">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2897014">func</span>&nbsp;<span class="op" id="2897019">(</span><span class="ident" id="2897020">v</span>&nbsp;<span class="ident" id="2897022">Value</span><span class="op" id="2897027">)</span>&nbsp;<span class="ident" id="2897029">MethodByName</span><span class="op" id="2897041">(</span><span class="ident" id="2897042">name</span>&nbsp;<span class="builtintype" id="2897047">string</span><span class="op" id="2897053">)</span>&nbsp;<span class="ident" id="2897055">Value</span>&nbsp;<span class="op" id="2897061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897064">if</span>&nbsp;<span class="ident" id="2897067">v</span><span class="op" id="2897068">.</span><span class="ident" id="2897069">typ</span>&nbsp;<span class="op" id="2897073">==</span>&nbsp;<span class="ident" id="2897076">nil</span>&nbsp;<span class="op" id="2897080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2897084">panic</span><span class="op" id="2897089">(</span><span class="op" id="2897090">&amp;</span><span class="ident" id="2897091">ValueError</span><span class="op" id="2897101">{</span><span class="string" id="2897102">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2897130">,</span>&nbsp;<span class="ident" id="2897132">Invalid</span><span class="op" id="2897139">}</span><span class="op" id="2897140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897146">if</span>&nbsp;<span class="ident" id="2897149">v</span><span class="op" id="2897150">.</span><span class="ident" id="2897151">flag</span><span class="op" id="2897155">&amp;</span><span class="ident" id="2897156">flagMethod</span>&nbsp;<span class="op" id="2897167">!=</span>&nbsp;<span class="num" id="2897170">0</span>&nbsp;<span class="op" id="2897172">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897176">return</span>&nbsp;<span class="ident" id="2897183">Value</span><span class="op" id="2897188">{</span><span class="op" id="2897189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897195">m</span><span class="op" id="2897196">,</span>&nbsp;<span class="ident" id="2897198">ok</span>&nbsp;<span class="op" id="2897201">:=</span>&nbsp;<span class="ident" id="2897204">v</span><span class="op" id="2897205">.</span><span class="ident" id="2897206">typ</span><span class="op" id="2897209">.</span><span class="ident" id="2897210">MethodByName</span><span class="op" id="2897222">(</span><span class="ident" id="2897223">name</span><span class="op" id="2897227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897230">if</span>&nbsp;<span class="op" id="2897233">!</span><span class="ident" id="2897234">ok</span>&nbsp;<span class="op" id="2897237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897241">return</span>&nbsp;<span class="ident" id="2897248">Value</span><span class="op" id="2897253">{</span><span class="op" id="2897254">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897260">return</span>&nbsp;<span class="ident" id="2897267">v</span><span class="op" id="2897268">.</span><span class="ident" id="2897269">Method</span><span class="op" id="2897275">(</span><span class="ident" id="2897276">m</span><span class="op" id="2897277">.</span><span class="ident" id="2897278">Index</span><span class="op" id="2897283">)</span><br>
<span class="lineno"></span><span class="op" id="2897285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2897288">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2897346">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2897386">func</span>&nbsp;<span class="op" id="2897391">(</span><span class="ident" id="2897392">v</span>&nbsp;<span class="ident" id="2897394">Value</span><span class="op" id="2897399">)</span>&nbsp;<span class="ident" id="2897401">NumField</span><span class="op" id="2897409">(</span><span class="op" id="2897410">)</span>&nbsp;<span class="builtintype" id="2897412">int</span>&nbsp;<span class="op" id="2897416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897419">v</span><span class="op" id="2897420">.</span><span class="ident" id="2897421">mustBe</span><span class="op" id="2897427">(</span><span class="ident" id="2897428">Struct</span><span class="op" id="2897434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897437">tt</span>&nbsp;<span class="op" id="2897440">:=</span>&nbsp;<span class="op" id="2897443">(</span><span class="op" id="2897444">*</span><span class="ident" id="2897445">structType</span><span class="op" id="2897455">)</span><span class="op" id="2897456">(</span><span class="ident" id="2897457">unsafe</span><span class="op" id="2897463">.</span><span class="ident" id="2897464">Pointer</span><span class="op" id="2897471">(</span><span class="ident" id="2897472">v</span><span class="op" id="2897473">.</span><span class="ident" id="2897474">typ</span><span class="op" id="2897477">)</span><span class="op" id="2897478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897481">return</span>&nbsp;<span class="builtinfunc" id="2897488">len</span><span class="op" id="2897491">(</span><span class="ident" id="2897492">tt</span><span class="op" id="2897494">.</span><span class="ident" id="2897495">fields</span><span class="op" id="2897501">)</span><br>
<span class="lineno">1120</span><span class="op" id="2897503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2897506">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2897593">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2897650">func</span>&nbsp;<span class="op" id="2897655">(</span><span class="ident" id="2897656">v</span>&nbsp;<span class="ident" id="2897658">Value</span><span class="op" id="2897663">)</span>&nbsp;<span class="ident" id="2897665">OverflowComplex</span><span class="op" id="2897680">(</span><span class="ident" id="2897681">x</span>&nbsp;<span class="builtintype" id="2897683">complex128</span><span class="op" id="2897693">)</span>&nbsp;<span class="builtintype" id="2897695">bool</span>&nbsp;<span class="op" id="2897700">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897703">k</span>&nbsp;<span class="op" id="2897705">:=</span>&nbsp;<span class="ident" id="2897708">v</span><span class="op" id="2897709">.</span><span class="ident" id="2897710">kind</span><span class="op" id="2897714">(</span><span class="op" id="2897715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897718">switch</span>&nbsp;<span class="ident" id="2897725">k</span>&nbsp;<span class="op" id="2897727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897730">case</span>&nbsp;<span class="ident" id="2897735">Complex64</span><span class="op" id="2897744">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897748">return</span>&nbsp;<span class="ident" id="2897755">overflowFloat32</span><span class="op" id="2897770">(</span><span class="builtinfunc" id="2897771">real</span><span class="op" id="2897775">(</span><span class="ident" id="2897776">x</span><span class="op" id="2897777">)</span><span class="op" id="2897778">)</span>&nbsp;<span class="op" id="2897780">||</span>&nbsp;<span class="ident" id="2897783">overflowFloat32</span><span class="op" id="2897798">(</span><span class="builtinfunc" id="2897799">imag</span><span class="op" id="2897803">(</span><span class="ident" id="2897804">x</span><span class="op" id="2897805">)</span><span class="op" id="2897806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897809">case</span>&nbsp;<span class="ident" id="2897814">Complex128</span><span class="op" id="2897824">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897828">return</span>&nbsp;<span class="builtintype" id="2897835">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2897845">panic</span><span class="op" id="2897850">(</span><span class="op" id="2897851">&amp;</span><span class="ident" id="2897852">ValueError</span><span class="op" id="2897862">{</span><span class="string" id="2897863">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2897894">,</span>&nbsp;<span class="ident" id="2897896">v</span><span class="op" id="2897897">.</span><span class="ident" id="2897898">kind</span><span class="op" id="2897902">(</span><span class="op" id="2897903">)</span><span class="op" id="2897904">}</span><span class="op" id="2897905">)</span><br>
<span class="lineno"></span><span class="op" id="2897907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2897910">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2897992">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2898044">func</span>&nbsp;<span class="op" id="2898049">(</span><span class="ident" id="2898050">v</span>&nbsp;<span class="ident" id="2898052">Value</span><span class="op" id="2898057">)</span>&nbsp;<span class="ident" id="2898059">OverflowFloat</span><span class="op" id="2898072">(</span><span class="ident" id="2898073">x</span>&nbsp;<span class="builtintype" id="2898075">float64</span><span class="op" id="2898082">)</span>&nbsp;<span class="builtintype" id="2898084">bool</span>&nbsp;<span class="op" id="2898089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898092">k</span>&nbsp;<span class="op" id="2898094">:=</span>&nbsp;<span class="ident" id="2898097">v</span><span class="op" id="2898098">.</span><span class="ident" id="2898099">kind</span><span class="op" id="2898103">(</span><span class="op" id="2898104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898107">switch</span>&nbsp;<span class="ident" id="2898114">k</span>&nbsp;<span class="op" id="2898116">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898119">case</span>&nbsp;<span class="ident" id="2898124">Float32</span><span class="op" id="2898131">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898135">return</span>&nbsp;<span class="ident" id="2898142">overflowFloat32</span><span class="op" id="2898157">(</span><span class="ident" id="2898158">x</span><span class="op" id="2898159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898162">case</span>&nbsp;<span class="ident" id="2898167">Float64</span><span class="op" id="2898174">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898178">return</span>&nbsp;<span class="builtintype" id="2898185">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2898192">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2898195">panic</span><span class="op" id="2898200">(</span><span class="op" id="2898201">&amp;</span><span class="ident" id="2898202">ValueError</span><span class="op" id="2898212">{</span><span class="string" id="2898213">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2898242">,</span>&nbsp;<span class="ident" id="2898244">v</span><span class="op" id="2898245">.</span><span class="ident" id="2898246">kind</span><span class="op" id="2898250">(</span><span class="op" id="2898251">)</span><span class="op" id="2898252">}</span><span class="op" id="2898253">)</span><br>
<span class="lineno"></span><span class="op" id="2898255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2898258">func</span>&nbsp;<span class="ident" id="2898263">overflowFloat32</span><span class="op" id="2898278">(</span><span class="ident" id="2898279">x</span>&nbsp;<span class="builtintype" id="2898281">float64</span><span class="op" id="2898288">)</span>&nbsp;<span class="builtintype" id="2898290">bool</span>&nbsp;<span class="op" id="2898295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898298">if</span>&nbsp;<span class="ident" id="2898301">x</span>&nbsp;<span class="op" id="2898303">&lt;</span>&nbsp;<span class="num" id="2898305">0</span>&nbsp;<span class="op" id="2898307">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898311">x</span>&nbsp;<span class="op" id="2898313">=</span>&nbsp;<span class="op" id="2898315">-</span><span class="ident" id="2898316">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2898319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898322">return</span>&nbsp;<span class="ident" id="2898329">math</span><span class="op" id="2898333">.</span><span class="ident" id="2898334">MaxFloat32</span>&nbsp;<span class="op" id="2898345">&lt;</span>&nbsp;<span class="ident" id="2898347">x</span>&nbsp;<span class="op" id="2898349">&amp;&amp;</span>&nbsp;<span class="ident" id="2898352">x</span>&nbsp;<span class="op" id="2898354">&lt;=</span>&nbsp;<span class="ident" id="2898357">math</span><span class="op" id="2898361">.</span><span class="ident" id="2898362">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2898373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2898376">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2898454">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2898521">func</span>&nbsp;<span class="op" id="2898526">(</span><span class="ident" id="2898527">v</span>&nbsp;<span class="ident" id="2898529">Value</span><span class="op" id="2898534">)</span>&nbsp;<span class="ident" id="2898536">OverflowInt</span><span class="op" id="2898547">(</span><span class="ident" id="2898548">x</span>&nbsp;<span class="ident" id="2898550">int64</span><span class="op" id="2898555">)</span>&nbsp;<span class="builtintype" id="2898557">bool</span>&nbsp;<span class="op" id="2898562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898565">k</span>&nbsp;<span class="op" id="2898567">:=</span>&nbsp;<span class="ident" id="2898570">v</span><span class="op" id="2898571">.</span><span class="ident" id="2898572">kind</span><span class="op" id="2898576">(</span><span class="op" id="2898577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898580">switch</span>&nbsp;<span class="ident" id="2898587">k</span>&nbsp;<span class="op" id="2898589">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898592">case</span>&nbsp;<span class="ident" id="2898597">Int</span><span class="op" id="2898600">,</span>&nbsp;<span class="ident" id="2898602">Int8</span><span class="op" id="2898606">,</span>&nbsp;<span class="ident" id="2898608">Int16</span><span class="op" id="2898613">,</span>&nbsp;<span class="ident" id="2898615">Int32</span><span class="op" id="2898620">,</span>&nbsp;<span class="ident" id="2898622">Int64</span><span class="op" id="2898627">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898631">bitSize</span>&nbsp;<span class="op" id="2898639">:=</span>&nbsp;<span class="ident" id="2898642">v</span><span class="op" id="2898643">.</span><span class="ident" id="2898644">typ</span><span class="op" id="2898647">.</span><span class="ident" id="2898648">size</span>&nbsp;<span class="op" id="2898653">*</span>&nbsp;<span class="num" id="2898655">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898659">trunc</span>&nbsp;<span class="op" id="2898665">:=</span>&nbsp;<span class="op" id="2898668">(</span><span class="ident" id="2898669">x</span>&nbsp;<span class="op" id="2898671">&lt;&lt;</span>&nbsp;<span class="op" id="2898674">(</span><span class="num" id="2898675">64</span>&nbsp;<span class="op" id="2898678">-</span>&nbsp;<span class="ident" id="2898680">bitSize</span><span class="op" id="2898687">)</span><span class="op" id="2898688">)</span>&nbsp;<span class="op" id="2898690">&gt;&gt;</span>&nbsp;<span class="op" id="2898693">(</span><span class="num" id="2898694">64</span>&nbsp;<span class="op" id="2898697">-</span>&nbsp;<span class="ident" id="2898699">bitSize</span><span class="op" id="2898706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898710">return</span>&nbsp;<span class="ident" id="2898717">x</span>&nbsp;<span class="op" id="2898719">!=</span>&nbsp;<span class="ident" id="2898722">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2898729">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2898732">panic</span><span class="op" id="2898737">(</span><span class="op" id="2898738">&amp;</span><span class="ident" id="2898739">ValueError</span><span class="op" id="2898749">{</span><span class="string" id="2898750">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2898777">,</span>&nbsp;<span class="ident" id="2898779">v</span><span class="op" id="2898780">.</span><span class="ident" id="2898781">kind</span><span class="op" id="2898785">(</span><span class="op" id="2898786">)</span><span class="op" id="2898787">}</span><span class="op" id="2898788">)</span><br>
<span class="lineno"></span><span class="op" id="2898790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2898793">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2898873">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2898954">func</span>&nbsp;<span class="op" id="2898959">(</span><span class="ident" id="2898960">v</span>&nbsp;<span class="ident" id="2898962">Value</span><span class="op" id="2898967">)</span>&nbsp;<span class="ident" id="2898969">OverflowUint</span><span class="op" id="2898981">(</span><span class="ident" id="2898982">x</span>&nbsp;<span class="ident" id="2898984">uint64</span><span class="op" id="2898990">)</span>&nbsp;<span class="builtintype" id="2898992">bool</span>&nbsp;<span class="op" id="2898997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899000">k</span>&nbsp;<span class="op" id="2899002">:=</span>&nbsp;<span class="ident" id="2899005">v</span><span class="op" id="2899006">.</span><span class="ident" id="2899007">kind</span><span class="op" id="2899011">(</span><span class="op" id="2899012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899015">switch</span>&nbsp;<span class="ident" id="2899022">k</span>&nbsp;<span class="op" id="2899024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899027">case</span>&nbsp;<span class="ident" id="2899032">Uint</span><span class="op" id="2899036">,</span>&nbsp;<span class="ident" id="2899038">Uintptr</span><span class="op" id="2899045">,</span>&nbsp;<span class="ident" id="2899047">Uint8</span><span class="op" id="2899052">,</span>&nbsp;<span class="ident" id="2899054">Uint16</span><span class="op" id="2899060">,</span>&nbsp;<span class="ident" id="2899062">Uint32</span><span class="op" id="2899068">,</span>&nbsp;<span class="ident" id="2899070">Uint64</span><span class="op" id="2899076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899080">bitSize</span>&nbsp;<span class="op" id="2899088">:=</span>&nbsp;<span class="ident" id="2899091">v</span><span class="op" id="2899092">.</span><span class="ident" id="2899093">typ</span><span class="op" id="2899096">.</span><span class="ident" id="2899097">size</span>&nbsp;<span class="op" id="2899102">*</span>&nbsp;<span class="num" id="2899104">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899108">trunc</span>&nbsp;<span class="op" id="2899114">:=</span>&nbsp;<span class="op" id="2899117">(</span><span class="ident" id="2899118">x</span>&nbsp;<span class="op" id="2899120">&lt;&lt;</span>&nbsp;<span class="op" id="2899123">(</span><span class="num" id="2899124">64</span>&nbsp;<span class="op" id="2899127">-</span>&nbsp;<span class="ident" id="2899129">bitSize</span><span class="op" id="2899136">)</span><span class="op" id="2899137">)</span>&nbsp;<span class="op" id="2899139">&gt;&gt;</span>&nbsp;<span class="op" id="2899142">(</span><span class="num" id="2899143">64</span>&nbsp;<span class="op" id="2899146">-</span>&nbsp;<span class="ident" id="2899148">bitSize</span><span class="op" id="2899155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899159">return</span>&nbsp;<span class="ident" id="2899166">x</span>&nbsp;<span class="op" id="2899168">!=</span>&nbsp;<span class="ident" id="2899171">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2899181">panic</span><span class="op" id="2899186">(</span><span class="op" id="2899187">&amp;</span><span class="ident" id="2899188">ValueError</span><span class="op" id="2899198">{</span><span class="string" id="2899199">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2899227">,</span>&nbsp;<span class="ident" id="2899229">v</span><span class="op" id="2899230">.</span><span class="ident" id="2899231">kind</span><span class="op" id="2899235">(</span><span class="op" id="2899236">)</span><span class="op" id="2899237">}</span><span class="op" id="2899238">)</span><br>
<span class="lineno"></span><span class="op" id="2899240">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2899243">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2899286">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2899342">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2899394">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2899446">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2899525">//</span><br>
<span class="lineno"></span><span class="comment" id="2899528">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2899590">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2899648">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2899708">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2899764">//</span><br>
<span class="lineno"></span><span class="comment" id="2899767">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2899829">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2899894">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2899968">func</span>&nbsp;<span class="op" id="2899973">(</span><span class="ident" id="2899974">v</span>&nbsp;<span class="ident" id="2899976">Value</span><span class="op" id="2899981">)</span>&nbsp;<span class="ident" id="2899983">Pointer</span><span class="op" id="2899990">(</span><span class="op" id="2899991">)</span>&nbsp;<span class="builtintype" id="2899993">uintptr</span>&nbsp;<span class="op" id="2900001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900004">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900024">k</span>&nbsp;<span class="op" id="2900026">:=</span>&nbsp;<span class="ident" id="2900029">v</span><span class="op" id="2900030">.</span><span class="ident" id="2900031">kind</span><span class="op" id="2900035">(</span><span class="op" id="2900036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900039">switch</span>&nbsp;<span class="ident" id="2900046">k</span>&nbsp;<span class="op" id="2900048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900051">case</span>&nbsp;<span class="ident" id="2900056">Chan</span><span class="op" id="2900060">,</span>&nbsp;<span class="ident" id="2900062">Map</span><span class="op" id="2900065">,</span>&nbsp;<span class="ident" id="2900067">Ptr</span><span class="op" id="2900070">,</span>&nbsp;<span class="ident" id="2900072">UnsafePointer</span><span class="op" id="2900085">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900089">return</span>&nbsp;<span class="builtintype" id="2900096">uintptr</span><span class="op" id="2900103">(</span><span class="ident" id="2900104">v</span><span class="op" id="2900105">.</span><span class="ident" id="2900106">pointer</span><span class="op" id="2900113">(</span><span class="op" id="2900114">)</span><span class="op" id="2900115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900118">case</span>&nbsp;<span class="ident" id="2900123">Func</span><span class="op" id="2900127">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900131">if</span>&nbsp;<span class="ident" id="2900134">v</span><span class="op" id="2900135">.</span><span class="ident" id="2900136">flag</span><span class="op" id="2900140">&amp;</span><span class="ident" id="2900141">flagMethod</span>&nbsp;<span class="op" id="2900152">!=</span>&nbsp;<span class="num" id="2900155">0</span>&nbsp;<span class="op" id="2900157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900162">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900220">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900280">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900346">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900411">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900474">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900519">f</span>&nbsp;<span class="op" id="2900521">:=</span>&nbsp;<span class="ident" id="2900524">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900543">return</span>&nbsp;<span class="op" id="2900550">*</span><span class="op" id="2900551">*</span><span class="op" id="2900552">(</span><span class="op" id="2900553">*</span><span class="op" id="2900554">*</span><span class="builtintype" id="2900555">uintptr</span><span class="op" id="2900562">)</span><span class="op" id="2900563">(</span><span class="ident" id="2900564">unsafe</span><span class="op" id="2900570">.</span><span class="ident" id="2900571">Pointer</span><span class="op" id="2900578">(</span><span class="op" id="2900579">&amp;</span><span class="ident" id="2900580">f</span><span class="op" id="2900581">)</span><span class="op" id="2900582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900590">p</span>&nbsp;<span class="op" id="2900592">:=</span>&nbsp;<span class="ident" id="2900595">v</span><span class="op" id="2900596">.</span><span class="ident" id="2900597">pointer</span><span class="op" id="2900604">(</span><span class="op" id="2900605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900609">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900655">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900701">if</span>&nbsp;<span class="ident" id="2900704">p</span>&nbsp;<span class="op" id="2900706">!=</span>&nbsp;<span class="ident" id="2900709">nil</span>&nbsp;<span class="op" id="2900713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900718">p</span>&nbsp;<span class="op" id="2900720">=</span>&nbsp;<span class="op" id="2900722">*</span><span class="op" id="2900723">(</span><span class="op" id="2900724">*</span><span class="ident" id="2900725">unsafe</span><span class="op" id="2900731">.</span><span class="ident" id="2900732">Pointer</span><span class="op" id="2900739">)</span><span class="op" id="2900740">(</span><span class="ident" id="2900741">p</span><span class="op" id="2900742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900750">return</span>&nbsp;<span class="builtintype" id="2900757">uintptr</span><span class="op" id="2900764">(</span><span class="ident" id="2900765">p</span><span class="op" id="2900766">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900770">case</span>&nbsp;<span class="ident" id="2900775">Slice</span><span class="op" id="2900780">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900784">return</span>&nbsp;<span class="op" id="2900791">(</span><span class="op" id="2900792">*</span><span class="ident" id="2900793">SliceHeader</span><span class="op" id="2900804">)</span><span class="op" id="2900805">(</span><span class="ident" id="2900806">v</span><span class="op" id="2900807">.</span><span class="ident" id="2900808">ptr</span><span class="op" id="2900811">)</span><span class="op" id="2900812">.</span><span class="ident" id="2900813">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2900822">panic</span><span class="op" id="2900827">(</span><span class="op" id="2900828">&amp;</span><span class="ident" id="2900829">ValueError</span><span class="op" id="2900839">{</span><span class="string" id="2900840">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2900863">,</span>&nbsp;<span class="ident" id="2900865">v</span><span class="op" id="2900866">.</span><span class="ident" id="2900867">kind</span><span class="op" id="2900871">(</span><span class="op" id="2900872">)</span><span class="op" id="2900873">}</span><span class="op" id="2900874">)</span><br>
<span class="lineno"></span><span class="op" id="2900876">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2900879">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2900936">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2900974">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2901020">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2901089">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2901176">func</span>&nbsp;<span class="op" id="2901181">(</span><span class="ident" id="2901182">v</span>&nbsp;<span class="ident" id="2901184">Value</span><span class="op" id="2901189">)</span>&nbsp;<span class="ident" id="2901191">Recv</span><span class="op" id="2901195">(</span><span class="op" id="2901196">)</span>&nbsp;<span class="op" id="2901198">(</span><span class="ident" id="2901199">x</span>&nbsp;<span class="ident" id="2901201">Value</span><span class="op" id="2901206">,</span>&nbsp;<span class="ident" id="2901208">ok</span>&nbsp;<span class="builtintype" id="2901211">bool</span><span class="op" id="2901215">)</span>&nbsp;<span class="op" id="2901217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901220">v</span><span class="op" id="2901221">.</span><span class="ident" id="2901222">mustBe</span><span class="op" id="2901228">(</span><span class="ident" id="2901229">Chan</span><span class="op" id="2901233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901236">v</span><span class="op" id="2901237">.</span><span class="ident" id="2901238">mustBeExported</span><span class="op" id="2901252">(</span><span class="op" id="2901253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901256">return</span>&nbsp;<span class="ident" id="2901263">v</span><span class="op" id="2901264">.</span><span class="ident" id="2901265">recv</span><span class="op" id="2901269">(</span><span class="builtintype" id="2901270">false</span><span class="op" id="2901275">)</span><br>
<span class="lineno">1235</span><span class="op" id="2901277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901280">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2901326">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2901357">func</span>&nbsp;<span class="op" id="2901362">(</span><span class="ident" id="2901363">v</span>&nbsp;<span class="ident" id="2901365">Value</span><span class="op" id="2901370">)</span>&nbsp;<span class="ident" id="2901372">recv</span><span class="op" id="2901376">(</span><span class="ident" id="2901377">nb</span>&nbsp;<span class="builtintype" id="2901380">bool</span><span class="op" id="2901384">)</span>&nbsp;<span class="op" id="2901386">(</span><span class="ident" id="2901387">val</span>&nbsp;<span class="ident" id="2901391">Value</span><span class="op" id="2901396">,</span>&nbsp;<span class="ident" id="2901398">ok</span>&nbsp;<span class="builtintype" id="2901401">bool</span><span class="op" id="2901405">)</span>&nbsp;<span class="op" id="2901407">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901410">tt</span>&nbsp;<span class="op" id="2901413">:=</span>&nbsp;<span class="op" id="2901416">(</span><span class="op" id="2901417">*</span><span class="ident" id="2901418">chanType</span><span class="op" id="2901426">)</span><span class="op" id="2901427">(</span><span class="ident" id="2901428">unsafe</span><span class="op" id="2901434">.</span><span class="ident" id="2901435">Pointer</span><span class="op" id="2901442">(</span><span class="ident" id="2901443">v</span><span class="op" id="2901444">.</span><span class="ident" id="2901445">typ</span><span class="op" id="2901448">)</span><span class="op" id="2901449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901452">if</span>&nbsp;<span class="ident" id="2901455">ChanDir</span><span class="op" id="2901462">(</span><span class="ident" id="2901463">tt</span><span class="op" id="2901465">.</span><span class="ident" id="2901466">dir</span><span class="op" id="2901469">)</span><span class="op" id="2901470">&amp;</span><span class="ident" id="2901471">RecvDir</span>&nbsp;<span class="op" id="2901479">==</span>&nbsp;<span class="num" id="2901482">0</span>&nbsp;<span class="op" id="2901484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2901488">panic</span><span class="op" id="2901493">(</span><span class="string" id="2901494">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2901530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901536">t</span>&nbsp;<span class="op" id="2901538">:=</span>&nbsp;<span class="ident" id="2901541">tt</span><span class="op" id="2901543">.</span><span class="ident" id="2901544">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901550">val</span>&nbsp;<span class="op" id="2901554">=</span>&nbsp;<span class="ident" id="2901556">Value</span><span class="op" id="2901561">{</span><span class="ident" id="2901562">t</span><span class="op" id="2901563">,</span>&nbsp;<span class="ident" id="2901565">nil</span><span class="op" id="2901568">,</span>&nbsp;<span class="ident" id="2901570">flag</span><span class="op" id="2901574">(</span><span class="ident" id="2901575">t</span><span class="op" id="2901576">.</span><span class="ident" id="2901577">Kind</span><span class="op" id="2901581">(</span><span class="op" id="2901582">)</span><span class="op" id="2901583">)</span><span class="op" id="2901584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901587">var</span>&nbsp;<span class="ident" id="2901591">p</span>&nbsp;<span class="ident" id="2901593">unsafe</span><span class="op" id="2901599">.</span><span class="ident" id="2901600">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901609">if</span>&nbsp;<span class="ident" id="2901612">ifaceIndir</span><span class="op" id="2901622">(</span><span class="ident" id="2901623">t</span><span class="op" id="2901624">)</span>&nbsp;<span class="op" id="2901626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901630">p</span>&nbsp;<span class="op" id="2901632">=</span>&nbsp;<span class="ident" id="2901634">unsafe_New</span><span class="op" id="2901644">(</span><span class="ident" id="2901645">t</span><span class="op" id="2901646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901650">val</span><span class="op" id="2901653">.</span><span class="ident" id="2901654">ptr</span>&nbsp;<span class="op" id="2901658">=</span>&nbsp;<span class="ident" id="2901660">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901664">val</span><span class="op" id="2901667">.</span><span class="ident" id="2901668">flag</span>&nbsp;<span class="op" id="2901673">|=</span>&nbsp;<span class="ident" id="2901676">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901687">}</span>&nbsp;<span class="keyword" id="2901689">else</span>&nbsp;<span class="op" id="2901694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901698">p</span>&nbsp;<span class="op" id="2901700">=</span>&nbsp;<span class="ident" id="2901702">unsafe</span><span class="op" id="2901708">.</span><span class="ident" id="2901709">Pointer</span><span class="op" id="2901716">(</span><span class="op" id="2901717">&amp;</span><span class="ident" id="2901718">val</span><span class="op" id="2901721">.</span><span class="ident" id="2901722">ptr</span><span class="op" id="2901725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901731">selected</span><span class="op" id="2901739">,</span>&nbsp;<span class="ident" id="2901741">ok</span>&nbsp;<span class="op" id="2901744">:=</span>&nbsp;<span class="ident" id="2901747">chanrecv</span><span class="op" id="2901755">(</span><span class="ident" id="2901756">v</span><span class="op" id="2901757">.</span><span class="ident" id="2901758">typ</span><span class="op" id="2901761">,</span>&nbsp;<span class="ident" id="2901763">v</span><span class="op" id="2901764">.</span><span class="ident" id="2901765">pointer</span><span class="op" id="2901772">(</span><span class="op" id="2901773">)</span><span class="op" id="2901774">,</span>&nbsp;<span class="ident" id="2901776">nb</span><span class="op" id="2901778">,</span>&nbsp;<span class="ident" id="2901780">p</span><span class="op" id="2901781">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901784">if</span>&nbsp;<span class="op" id="2901787">!</span><span class="ident" id="2901788">selected</span>&nbsp;<span class="op" id="2901797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901801">val</span>&nbsp;<span class="op" id="2901805">=</span>&nbsp;<span class="ident" id="2901807">Value</span><span class="op" id="2901812">{</span><span class="op" id="2901813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901819">return</span><br>
<span class="lineno"></span><span class="op" id="2901826">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2901829">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2901863">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2901957">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2902030">func</span>&nbsp;<span class="op" id="2902035">(</span><span class="ident" id="2902036">v</span>&nbsp;<span class="ident" id="2902038">Value</span><span class="op" id="2902043">)</span>&nbsp;<span class="ident" id="2902045">Send</span><span class="op" id="2902049">(</span><span class="ident" id="2902050">x</span>&nbsp;<span class="ident" id="2902052">Value</span><span class="op" id="2902057">)</span>&nbsp;<span class="op" id="2902059">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902062">v</span><span class="op" id="2902063">.</span><span class="ident" id="2902064">mustBe</span><span class="op" id="2902070">(</span><span class="ident" id="2902071">Chan</span><span class="op" id="2902075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902078">v</span><span class="op" id="2902079">.</span><span class="ident" id="2902080">mustBeExported</span><span class="op" id="2902094">(</span><span class="op" id="2902095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902098">v</span><span class="op" id="2902099">.</span><span class="ident" id="2902100">send</span><span class="op" id="2902104">(</span><span class="ident" id="2902105">x</span><span class="op" id="2902106">,</span>&nbsp;<span class="builtintype" id="2902108">false</span><span class="op" id="2902113">)</span><br>
<span class="lineno"></span><span class="op" id="2902115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2902118">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2902159">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2902190">func</span>&nbsp;<span class="op" id="2902195">(</span><span class="ident" id="2902196">v</span>&nbsp;<span class="ident" id="2902198">Value</span><span class="op" id="2902203">)</span>&nbsp;<span class="ident" id="2902205">send</span><span class="op" id="2902209">(</span><span class="ident" id="2902210">x</span>&nbsp;<span class="ident" id="2902212">Value</span><span class="op" id="2902217">,</span>&nbsp;<span class="ident" id="2902219">nb</span>&nbsp;<span class="builtintype" id="2902222">bool</span><span class="op" id="2902226">)</span>&nbsp;<span class="op" id="2902228">(</span><span class="ident" id="2902229">selected</span>&nbsp;<span class="builtintype" id="2902238">bool</span><span class="op" id="2902242">)</span>&nbsp;<span class="op" id="2902244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902247">tt</span>&nbsp;<span class="op" id="2902250">:=</span>&nbsp;<span class="op" id="2902253">(</span><span class="op" id="2902254">*</span><span class="ident" id="2902255">chanType</span><span class="op" id="2902263">)</span><span class="op" id="2902264">(</span><span class="ident" id="2902265">unsafe</span><span class="op" id="2902271">.</span><span class="ident" id="2902272">Pointer</span><span class="op" id="2902279">(</span><span class="ident" id="2902280">v</span><span class="op" id="2902281">.</span><span class="ident" id="2902282">typ</span><span class="op" id="2902285">)</span><span class="op" id="2902286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902289">if</span>&nbsp;<span class="ident" id="2902292">ChanDir</span><span class="op" id="2902299">(</span><span class="ident" id="2902300">tt</span><span class="op" id="2902302">.</span><span class="ident" id="2902303">dir</span><span class="op" id="2902306">)</span><span class="op" id="2902307">&amp;</span><span class="ident" id="2902308">SendDir</span>&nbsp;<span class="op" id="2902316">==</span>&nbsp;<span class="num" id="2902319">0</span>&nbsp;<span class="op" id="2902321">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2902325">panic</span><span class="op" id="2902330">(</span><span class="string" id="2902331">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2902367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902373">x</span><span class="op" id="2902374">.</span><span class="ident" id="2902375">mustBeExported</span><span class="op" id="2902389">(</span><span class="op" id="2902390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902393">x</span>&nbsp;<span class="op" id="2902395">=</span>&nbsp;<span class="ident" id="2902397">x</span><span class="op" id="2902398">.</span><span class="ident" id="2902399">assignTo</span><span class="op" id="2902407">(</span><span class="string" id="2902408">&#34;reflect.Value.Send&#34;</span><span class="op" id="2902428">,</span>&nbsp;<span class="ident" id="2902430">tt</span><span class="op" id="2902432">.</span><span class="ident" id="2902433">elem</span><span class="op" id="2902437">,</span>&nbsp;<span class="ident" id="2902439">nil</span><span class="op" id="2902442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902445">var</span>&nbsp;<span class="ident" id="2902449">p</span>&nbsp;<span class="ident" id="2902451">unsafe</span><span class="op" id="2902457">.</span><span class="ident" id="2902458">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902467">if</span>&nbsp;<span class="ident" id="2902470">x</span><span class="op" id="2902471">.</span><span class="ident" id="2902472">flag</span><span class="op" id="2902476">&amp;</span><span class="ident" id="2902477">flagIndir</span>&nbsp;<span class="op" id="2902487">!=</span>&nbsp;<span class="num" id="2902490">0</span>&nbsp;<span class="op" id="2902492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902496">p</span>&nbsp;<span class="op" id="2902498">=</span>&nbsp;<span class="ident" id="2902500">x</span><span class="op" id="2902501">.</span><span class="ident" id="2902502">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902507">}</span>&nbsp;<span class="keyword" id="2902509">else</span>&nbsp;<span class="op" id="2902514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902518">p</span>&nbsp;<span class="op" id="2902520">=</span>&nbsp;<span class="ident" id="2902522">unsafe</span><span class="op" id="2902528">.</span><span class="ident" id="2902529">Pointer</span><span class="op" id="2902536">(</span><span class="op" id="2902537">&amp;</span><span class="ident" id="2902538">x</span><span class="op" id="2902539">.</span><span class="ident" id="2902540">ptr</span><span class="op" id="2902543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902546">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902549">return</span>&nbsp;<span class="ident" id="2902556">chansend</span><span class="op" id="2902564">(</span><span class="ident" id="2902565">v</span><span class="op" id="2902566">.</span><span class="ident" id="2902567">typ</span><span class="op" id="2902570">,</span>&nbsp;<span class="ident" id="2902572">v</span><span class="op" id="2902573">.</span><span class="ident" id="2902574">pointer</span><span class="op" id="2902581">(</span><span class="op" id="2902582">)</span><span class="op" id="2902583">,</span>&nbsp;<span class="ident" id="2902585">p</span><span class="op" id="2902586">,</span>&nbsp;<span class="ident" id="2902588">nb</span><span class="op" id="2902590">)</span><br>
<span class="lineno"></span><span class="op" id="2902592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902595">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2902628">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2902666">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2902721">func</span>&nbsp;<span class="op" id="2902726">(</span><span class="ident" id="2902727">v</span>&nbsp;<span class="ident" id="2902729">Value</span><span class="op" id="2902734">)</span>&nbsp;<span class="ident" id="2902736">Set</span><span class="op" id="2902739">(</span><span class="ident" id="2902740">x</span>&nbsp;<span class="ident" id="2902742">Value</span><span class="op" id="2902747">)</span>&nbsp;<span class="op" id="2902749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902752">v</span><span class="op" id="2902753">.</span><span class="ident" id="2902754">mustBeAssignable</span><span class="op" id="2902770">(</span><span class="op" id="2902771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902774">x</span><span class="op" id="2902775">.</span><span class="ident" id="2902776">mustBeExported</span><span class="op" id="2902790">(</span><span class="op" id="2902791">)</span>&nbsp;<span class="comment" id="2902793">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902826">var</span>&nbsp;<span class="ident" id="2902830">target</span>&nbsp;<span class="ident" id="2902837">unsafe</span><span class="op" id="2902843">.</span><span class="ident" id="2902844">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902853">if</span>&nbsp;<span class="ident" id="2902856">v</span><span class="op" id="2902857">.</span><span class="ident" id="2902858">kind</span><span class="op" id="2902862">(</span><span class="op" id="2902863">)</span>&nbsp;<span class="op" id="2902865">==</span>&nbsp;<span class="ident" id="2902868">Interface</span>&nbsp;<span class="op" id="2902878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902882">target</span>&nbsp;<span class="op" id="2902889">=</span>&nbsp;<span class="ident" id="2902891">v</span><span class="op" id="2902892">.</span><span class="ident" id="2902893">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902901">x</span>&nbsp;<span class="op" id="2902903">=</span>&nbsp;<span class="ident" id="2902905">x</span><span class="op" id="2902906">.</span><span class="ident" id="2902907">assignTo</span><span class="op" id="2902915">(</span><span class="string" id="2902916">&#34;reflect.Set&#34;</span><span class="op" id="2902929">,</span>&nbsp;<span class="ident" id="2902931">v</span><span class="op" id="2902932">.</span><span class="ident" id="2902933">typ</span><span class="op" id="2902936">,</span>&nbsp;<span class="ident" id="2902938">target</span><span class="op" id="2902944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902947">if</span>&nbsp;<span class="ident" id="2902950">x</span><span class="op" id="2902951">.</span><span class="ident" id="2902952">flag</span><span class="op" id="2902956">&amp;</span><span class="ident" id="2902957">flagIndir</span>&nbsp;<span class="op" id="2902967">!=</span>&nbsp;<span class="num" id="2902970">0</span>&nbsp;<span class="op" id="2902972">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902976">memmove</span><span class="op" id="2902983">(</span><span class="ident" id="2902984">v</span><span class="op" id="2902985">.</span><span class="ident" id="2902986">ptr</span><span class="op" id="2902989">,</span>&nbsp;<span class="ident" id="2902991">x</span><span class="op" id="2902992">.</span><span class="ident" id="2902993">ptr</span><span class="op" id="2902996">,</span>&nbsp;<span class="ident" id="2902998">v</span><span class="op" id="2902999">.</span><span class="ident" id="2903000">typ</span><span class="op" id="2903003">.</span><span class="ident" id="2903004">size</span><span class="op" id="2903008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903011">}</span>&nbsp;<span class="keyword" id="2903013">else</span>&nbsp;<span class="op" id="2903018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903022">*</span><span class="op" id="2903023">(</span><span class="op" id="2903024">*</span><span class="ident" id="2903025">unsafe</span><span class="op" id="2903031">.</span><span class="ident" id="2903032">Pointer</span><span class="op" id="2903039">)</span><span class="op" id="2903040">(</span><span class="ident" id="2903041">v</span><span class="op" id="2903042">.</span><span class="ident" id="2903043">ptr</span><span class="op" id="2903046">)</span>&nbsp;<span class="op" id="2903048">=</span>&nbsp;<span class="ident" id="2903050">x</span><span class="op" id="2903051">.</span><span class="ident" id="2903052">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903057">}</span><br>
<span class="lineno"></span><span class="op" id="2903059">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2903062">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2903100">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2903162">func</span>&nbsp;<span class="op" id="2903167">(</span><span class="ident" id="2903168">v</span>&nbsp;<span class="ident" id="2903170">Value</span><span class="op" id="2903175">)</span>&nbsp;<span class="ident" id="2903177">SetBool</span><span class="op" id="2903184">(</span><span class="ident" id="2903185">x</span>&nbsp;<span class="builtintype" id="2903187">bool</span><span class="op" id="2903191">)</span>&nbsp;<span class="op" id="2903193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903196">v</span><span class="op" id="2903197">.</span><span class="ident" id="2903198">mustBeAssignable</span><span class="op" id="2903214">(</span><span class="op" id="2903215">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903218">v</span><span class="op" id="2903219">.</span><span class="ident" id="2903220">mustBe</span><span class="op" id="2903226">(</span><span class="ident" id="2903227">Bool</span><span class="op" id="2903231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903234">*</span><span class="op" id="2903235">(</span><span class="op" id="2903236">*</span><span class="builtintype" id="2903237">bool</span><span class="op" id="2903241">)</span><span class="op" id="2903242">(</span><span class="ident" id="2903243">v</span><span class="op" id="2903244">.</span><span class="ident" id="2903245">ptr</span><span class="op" id="2903248">)</span>&nbsp;<span class="op" id="2903250">=</span>&nbsp;<span class="ident" id="2903252">x</span><br>
<span class="lineno"></span><span class="op" id="2903254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903257">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2903296">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2903358">func</span>&nbsp;<span class="op" id="2903363">(</span><span class="ident" id="2903364">v</span>&nbsp;<span class="ident" id="2903366">Value</span><span class="op" id="2903371">)</span>&nbsp;<span class="ident" id="2903373">SetBytes</span><span class="op" id="2903381">(</span><span class="ident" id="2903382">x</span>&nbsp;<span class="op" id="2903384">[</span><span class="op" id="2903385">]</span><span class="builtintype" id="2903386">byte</span><span class="op" id="2903390">)</span>&nbsp;<span class="op" id="2903392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903395">v</span><span class="op" id="2903396">.</span><span class="ident" id="2903397">mustBeAssignable</span><span class="op" id="2903413">(</span><span class="op" id="2903414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903417">v</span><span class="op" id="2903418">.</span><span class="ident" id="2903419">mustBe</span><span class="op" id="2903425">(</span><span class="ident" id="2903426">Slice</span><span class="op" id="2903431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903434">if</span>&nbsp;<span class="ident" id="2903437">v</span><span class="op" id="2903438">.</span><span class="ident" id="2903439">typ</span><span class="op" id="2903442">.</span><span class="ident" id="2903443">Elem</span><span class="op" id="2903447">(</span><span class="op" id="2903448">)</span><span class="op" id="2903449">.</span><span class="ident" id="2903450">Kind</span><span class="op" id="2903454">(</span><span class="op" id="2903455">)</span>&nbsp;<span class="op" id="2903457">!=</span>&nbsp;<span class="ident" id="2903460">Uint8</span>&nbsp;<span class="op" id="2903466">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2903470">panic</span><span class="op" id="2903475">(</span><span class="string" id="2903476">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2903518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903524">*</span><span class="op" id="2903525">(</span><span class="op" id="2903526">*</span><span class="op" id="2903527">[</span><span class="op" id="2903528">]</span><span class="builtintype" id="2903529">byte</span><span class="op" id="2903533">)</span><span class="op" id="2903534">(</span><span class="ident" id="2903535">v</span><span class="op" id="2903536">.</span><span class="ident" id="2903537">ptr</span><span class="op" id="2903540">)</span>&nbsp;<span class="op" id="2903542">=</span>&nbsp;<span class="ident" id="2903544">x</span><br>
<span class="lineno"></span><span class="op" id="2903546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2903549">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2903588">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2903659">func</span>&nbsp;<span class="op" id="2903664">(</span><span class="ident" id="2903665">v</span>&nbsp;<span class="ident" id="2903667">Value</span><span class="op" id="2903672">)</span>&nbsp;<span class="ident" id="2903674">setRunes</span><span class="op" id="2903682">(</span><span class="ident" id="2903683">x</span>&nbsp;<span class="op" id="2903685">[</span><span class="op" id="2903686">]</span><span class="builtintype" id="2903687">rune</span><span class="op" id="2903691">)</span>&nbsp;<span class="op" id="2903693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903696">v</span><span class="op" id="2903697">.</span><span class="ident" id="2903698">mustBeAssignable</span><span class="op" id="2903714">(</span><span class="op" id="2903715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903718">v</span><span class="op" id="2903719">.</span><span class="ident" id="2903720">mustBe</span><span class="op" id="2903726">(</span><span class="ident" id="2903727">Slice</span><span class="op" id="2903732">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903735">if</span>&nbsp;<span class="ident" id="2903738">v</span><span class="op" id="2903739">.</span><span class="ident" id="2903740">typ</span><span class="op" id="2903743">.</span><span class="ident" id="2903744">Elem</span><span class="op" id="2903748">(</span><span class="op" id="2903749">)</span><span class="op" id="2903750">.</span><span class="ident" id="2903751">Kind</span><span class="op" id="2903755">(</span><span class="op" id="2903756">)</span>&nbsp;<span class="op" id="2903758">!=</span>&nbsp;<span class="ident" id="2903761">Int32</span>&nbsp;<span class="op" id="2903767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2903771">panic</span><span class="op" id="2903776">(</span><span class="string" id="2903777">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2903819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903825">*</span><span class="op" id="2903826">(</span><span class="op" id="2903827">*</span><span class="op" id="2903828">[</span><span class="op" id="2903829">]</span><span class="builtintype" id="2903830">rune</span><span class="op" id="2903834">)</span><span class="op" id="2903835">(</span><span class="ident" id="2903836">v</span><span class="op" id="2903837">.</span><span class="ident" id="2903838">ptr</span><span class="op" id="2903841">)</span>&nbsp;<span class="op" id="2903843">=</span>&nbsp;<span class="ident" id="2903845">x</span><br>
<span class="lineno"></span><span class="op" id="2903847">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2903850">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2903896">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2903978">func</span>&nbsp;<span class="op" id="2903983">(</span><span class="ident" id="2903984">v</span>&nbsp;<span class="ident" id="2903986">Value</span><span class="op" id="2903991">)</span>&nbsp;<span class="ident" id="2903993">SetComplex</span><span class="op" id="2904003">(</span><span class="ident" id="2904004">x</span>&nbsp;<span class="builtintype" id="2904006">complex128</span><span class="op" id="2904016">)</span>&nbsp;<span class="op" id="2904018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2904021">v</span><span class="op" id="2904022">.</span><span class="ident" id="2904023">mustBeAssignable</span><span class="op" id="2904039">(</span><span class="op" id="2904040">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904043">switch</span>&nbsp;<span class="ident" id="2904050">k</span>&nbsp;<span class="op" id="2904052">:=</span>&nbsp;<span class="ident" id="2904055">v</span><span class="op" id="2904056">.</span><span class="ident" id="2904057">kind</span><span class="op" id="2904061">(</span><span class="op" id="2904062">)</span><span class="op" id="2904063">;</span>&nbsp;<span class="ident" id="2904065">k</span>&nbsp;<span class="op" id="2904067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904070">default</span><span class="op" id="2904077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2904081">panic</span><span class="op" id="2904086">(</span><span class="op" id="2904087">&amp;</span><span class="ident" id="2904088">ValueError</span><span class="op" id="2904098">{</span><span class="string" id="2904099">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2904125">,</span>&nbsp;<span class="ident" id="2904127">v</span><span class="op" id="2904128">.</span><span class="ident" id="2904129">kind</span><span class="op" id="2904133">(</span><span class="op" id="2904134">)</span><span class="op" id="2904135">}</span><span class="op" id="2904136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904139">case</span>&nbsp;<span class="ident" id="2904144">Complex64</span><span class="op" id="2904153">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904157">*</span><span class="op" id="2904158">(</span><span class="op" id="2904159">*</span><span class="builtintype" id="2904160">complex64</span><span class="op" id="2904169">)</span><span class="op" id="2904170">(</span><span class="ident" id="2904171">v</span><span class="op" id="2904172">.</span><span class="ident" id="2904173">ptr</span><span class="op" id="2904176">)</span>&nbsp;<span class="op" id="2904178">=</span>&nbsp;<span class="builtintype" id="2904180">complex64</span><span class="op" id="2904189">(</span><span class="ident" id="2904190">x</span><span class="op" id="2904191">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904194">case</span>&nbsp;<span class="ident" id="2904199">Complex128</span><span class="op" id="2904209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904213">*</span><span class="op" id="2904214">(</span><span class="op" id="2904215">*</span><span class="builtintype" id="2904216">complex128</span><span class="op" id="2904226">)</span><span class="op" id="2904227">(</span><span class="ident" id="2904228">v</span><span class="op" id="2904229">.</span><span class="ident" id="2904230">ptr</span><span class="op" id="2904233">)</span>&nbsp;<span class="op" id="2904235">=</span>&nbsp;<span class="ident" id="2904237">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904240">}</span><br>
<span class="lineno"></span><span class="op" id="2904242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2904245">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2904289">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2904366">func</span>&nbsp;<span class="op" id="2904371">(</span><span class="ident" id="2904372">v</span>&nbsp;<span class="ident" id="2904374">Value</span><span class="op" id="2904379">)</span>&nbsp;<span class="ident" id="2904381">SetFloat</span><span class="op" id="2904389">(</span><span class="ident" id="2904390">x</span>&nbsp;<span class="builtintype" id="2904392">float64</span><span class="op" id="2904399">)</span>&nbsp;<span class="op" id="2904401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2904404">v</span><span class="op" id="2904405">.</span><span class="ident" id="2904406">mustBeAssignable</span><span class="op" id="2904422">(</span><span class="op" id="2904423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904426">switch</span>&nbsp;<span class="ident" id="2904433">k</span>&nbsp;<span class="op" id="2904435">:=</span>&nbsp;<span class="ident" id="2904438">v</span><span class="op" id="2904439">.</span><span class="ident" id="2904440">kind</span><span class="op" id="2904444">(</span><span class="op" id="2904445">)</span><span class="op" id="2904446">;</span>&nbsp;<span class="ident" id="2904448">k</span>&nbsp;<span class="op" id="2904450">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904453">default</span><span class="op" id="2904460">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2904464">panic</span><span class="op" id="2904469">(</span><span class="op" id="2904470">&amp;</span><span class="ident" id="2904471">ValueError</span><span class="op" id="2904481">{</span><span class="string" id="2904482">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2904506">,</span>&nbsp;<span class="ident" id="2904508">v</span><span class="op" id="2904509">.</span><span class="ident" id="2904510">kind</span><span class="op" id="2904514">(</span><span class="op" id="2904515">)</span><span class="op" id="2904516">}</span><span class="op" id="2904517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904520">case</span>&nbsp;<span class="ident" id="2904525">Float32</span><span class="op" id="2904532">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904536">*</span><span class="op" id="2904537">(</span><span class="op" id="2904538">*</span><span class="builtintype" id="2904539">float32</span><span class="op" id="2904546">)</span><span class="op" id="2904547">(</span><span class="ident" id="2904548">v</span><span class="op" id="2904549">.</span><span class="ident" id="2904550">ptr</span><span class="op" id="2904553">)</span>&nbsp;<span class="op" id="2904555">=</span>&nbsp;<span class="builtintype" id="2904557">float32</span><span class="op" id="2904564">(</span><span class="ident" id="2904565">x</span><span class="op" id="2904566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904569">case</span>&nbsp;<span class="ident" id="2904574">Float64</span><span class="op" id="2904581">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904585">*</span><span class="op" id="2904586">(</span><span class="op" id="2904587">*</span><span class="builtintype" id="2904588">float64</span><span class="op" id="2904595">)</span><span class="op" id="2904596">(</span><span class="ident" id="2904597">v</span><span class="op" id="2904598">.</span><span class="ident" id="2904599">ptr</span><span class="op" id="2904602">)</span>&nbsp;<span class="op" id="2904604">=</span>&nbsp;<span class="ident" id="2904606">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904609">}</span><br>
<span class="lineno"></span><span class="op" id="2904611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904614">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2904656">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2904748">func</span>&nbsp;<span class="op" id="2904753">(</span><span class="ident" id="2904754">v</span>&nbsp;<span class="ident" id="2904756">Value</span><span class="op" id="2904761">)</span>&nbsp;<span class="ident" id="2904763">SetInt</span><span class="op" id="2904769">(</span><span class="ident" id="2904770">x</span>&nbsp;<span class="ident" id="2904772">int64</span><span class="op" id="2904777">)</span>&nbsp;<span class="op" id="2904779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2904782">v</span><span class="op" id="2904783">.</span><span class="ident" id="2904784">mustBeAssignable</span><span class="op" id="2904800">(</span><span class="op" id="2904801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904804">switch</span>&nbsp;<span class="ident" id="2904811">k</span>&nbsp;<span class="op" id="2904813">:=</span>&nbsp;<span class="ident" id="2904816">v</span><span class="op" id="2904817">.</span><span class="ident" id="2904818">kind</span><span class="op" id="2904822">(</span><span class="op" id="2904823">)</span><span class="op" id="2904824">;</span>&nbsp;<span class="ident" id="2904826">k</span>&nbsp;<span class="op" id="2904828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904831">default</span><span class="op" id="2904838">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2904842">panic</span><span class="op" id="2904847">(</span><span class="op" id="2904848">&amp;</span><span class="ident" id="2904849">ValueError</span><span class="op" id="2904859">{</span><span class="string" id="2904860">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2904882">,</span>&nbsp;<span class="ident" id="2904884">v</span><span class="op" id="2904885">.</span><span class="ident" id="2904886">kind</span><span class="op" id="2904890">(</span><span class="op" id="2904891">)</span><span class="op" id="2904892">}</span><span class="op" id="2904893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904896">case</span>&nbsp;<span class="ident" id="2904901">Int</span><span class="op" id="2904904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904908">*</span><span class="op" id="2904909">(</span><span class="op" id="2904910">*</span><span class="builtintype" id="2904911">int</span><span class="op" id="2904914">)</span><span class="op" id="2904915">(</span><span class="ident" id="2904916">v</span><span class="op" id="2904917">.</span><span class="ident" id="2904918">ptr</span><span class="op" id="2904921">)</span>&nbsp;<span class="op" id="2904923">=</span>&nbsp;<span class="builtintype" id="2904925">int</span><span class="op" id="2904928">(</span><span class="ident" id="2904929">x</span><span class="op" id="2904930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904933">case</span>&nbsp;<span class="ident" id="2904938">Int8</span><span class="op" id="2904942">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904946">*</span><span class="op" id="2904947">(</span><span class="op" id="2904948">*</span><span class="builtintype" id="2904949">int8</span><span class="op" id="2904953">)</span><span class="op" id="2904954">(</span><span class="ident" id="2904955">v</span><span class="op" id="2904956">.</span><span class="ident" id="2904957">ptr</span><span class="op" id="2904960">)</span>&nbsp;<span class="op" id="2904962">=</span>&nbsp;<span class="builtintype" id="2904964">int8</span><span class="op" id="2904968">(</span><span class="ident" id="2904969">x</span><span class="op" id="2904970">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904973">case</span>&nbsp;<span class="ident" id="2904978">Int16</span><span class="op" id="2904983">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904987">*</span><span class="op" id="2904988">(</span><span class="op" id="2904989">*</span><span class="builtintype" id="2904990">int16</span><span class="op" id="2904995">)</span><span class="op" id="2904996">(</span><span class="ident" id="2904997">v</span><span class="op" id="2904998">.</span><span class="ident" id="2904999">ptr</span><span class="op" id="2905002">)</span>&nbsp;<span class="op" id="2905004">=</span>&nbsp;<span class="builtintype" id="2905006">int16</span><span class="op" id="2905011">(</span><span class="ident" id="2905012">x</span><span class="op" id="2905013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905016">case</span>&nbsp;<span class="ident" id="2905021">Int32</span><span class="op" id="2905026">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905030">*</span><span class="op" id="2905031">(</span><span class="op" id="2905032">*</span><span class="builtintype" id="2905033">int32</span><span class="op" id="2905038">)</span><span class="op" id="2905039">(</span><span class="ident" id="2905040">v</span><span class="op" id="2905041">.</span><span class="ident" id="2905042">ptr</span><span class="op" id="2905045">)</span>&nbsp;<span class="op" id="2905047">=</span>&nbsp;<span class="builtintype" id="2905049">int32</span><span class="op" id="2905054">(</span><span class="ident" id="2905055">x</span><span class="op" id="2905056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905059">case</span>&nbsp;<span class="ident" id="2905064">Int64</span><span class="op" id="2905069">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905073">*</span><span class="op" id="2905074">(</span><span class="op" id="2905075">*</span><span class="ident" id="2905076">int64</span><span class="op" id="2905081">)</span><span class="op" id="2905082">(</span><span class="ident" id="2905083">v</span><span class="op" id="2905084">.</span><span class="ident" id="2905085">ptr</span><span class="op" id="2905088">)</span>&nbsp;<span class="op" id="2905090">=</span>&nbsp;<span class="ident" id="2905092">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905095">}</span><br>
<span class="lineno"></span><span class="op" id="2905097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905100">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2905132">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2905193">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2905236">func</span>&nbsp;<span class="op" id="2905241">(</span><span class="ident" id="2905242">v</span>&nbsp;<span class="ident" id="2905244">Value</span><span class="op" id="2905249">)</span>&nbsp;<span class="ident" id="2905251">SetLen</span><span class="op" id="2905257">(</span><span class="ident" id="2905258">n</span>&nbsp;<span class="builtintype" id="2905260">int</span><span class="op" id="2905263">)</span>&nbsp;<span class="op" id="2905265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905268">v</span><span class="op" id="2905269">.</span><span class="ident" id="2905270">mustBeAssignable</span><span class="op" id="2905286">(</span><span class="op" id="2905287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905290">v</span><span class="op" id="2905291">.</span><span class="ident" id="2905292">mustBe</span><span class="op" id="2905298">(</span><span class="ident" id="2905299">Slice</span><span class="op" id="2905304">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905307">s</span>&nbsp;<span class="op" id="2905309">:=</span>&nbsp;<span class="op" id="2905312">(</span><span class="op" id="2905313">*</span><span class="ident" id="2905314">sliceHeader</span><span class="op" id="2905325">)</span><span class="op" id="2905326">(</span><span class="ident" id="2905327">v</span><span class="op" id="2905328">.</span><span class="ident" id="2905329">ptr</span><span class="op" id="2905332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905335">if</span>&nbsp;<span class="builtintype" id="2905338">uint</span><span class="op" id="2905342">(</span><span class="ident" id="2905343">n</span><span class="op" id="2905344">)</span>&nbsp;<span class="op" id="2905346">&gt;</span>&nbsp;<span class="builtintype" id="2905348">uint</span><span class="op" id="2905352">(</span><span class="ident" id="2905353">s</span><span class="op" id="2905354">.</span><span class="ident" id="2905355">Cap</span><span class="op" id="2905358">)</span>&nbsp;<span class="op" id="2905360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2905364">panic</span><span class="op" id="2905369">(</span><span class="string" id="2905370">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2905416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905422">s</span><span class="op" id="2905423">.</span><span class="ident" id="2905424">Len</span>&nbsp;<span class="op" id="2905428">=</span>&nbsp;<span class="ident" id="2905430">n</span><br>
<span class="lineno">1395</span><span class="op" id="2905432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905435">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2905469">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2905545">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2905588">func</span>&nbsp;<span class="op" id="2905593">(</span><span class="ident" id="2905594">v</span>&nbsp;<span class="ident" id="2905596">Value</span><span class="op" id="2905601">)</span>&nbsp;<span class="ident" id="2905603">SetCap</span><span class="op" id="2905609">(</span><span class="ident" id="2905610">n</span>&nbsp;<span class="builtintype" id="2905612">int</span><span class="op" id="2905615">)</span>&nbsp;<span class="op" id="2905617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905620">v</span><span class="op" id="2905621">.</span><span class="ident" id="2905622">mustBeAssignable</span><span class="op" id="2905638">(</span><span class="op" id="2905639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905642">v</span><span class="op" id="2905643">.</span><span class="ident" id="2905644">mustBe</span><span class="op" id="2905650">(</span><span class="ident" id="2905651">Slice</span><span class="op" id="2905656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905659">s</span>&nbsp;<span class="op" id="2905661">:=</span>&nbsp;<span class="op" id="2905664">(</span><span class="op" id="2905665">*</span><span class="ident" id="2905666">sliceHeader</span><span class="op" id="2905677">)</span><span class="op" id="2905678">(</span><span class="ident" id="2905679">v</span><span class="op" id="2905680">.</span><span class="ident" id="2905681">ptr</span><span class="op" id="2905684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905687">if</span>&nbsp;<span class="ident" id="2905690">n</span>&nbsp;<span class="op" id="2905692">&lt;</span>&nbsp;<span class="builtintype" id="2905694">int</span><span class="op" id="2905697">(</span><span class="ident" id="2905698">s</span><span class="op" id="2905699">.</span><span class="ident" id="2905700">Len</span><span class="op" id="2905703">)</span>&nbsp;<span class="op" id="2905705">||</span>&nbsp;<span class="ident" id="2905708">n</span>&nbsp;<span class="op" id="2905710">&gt;</span>&nbsp;<span class="builtintype" id="2905712">int</span><span class="op" id="2905715">(</span><span class="ident" id="2905716">s</span><span class="op" id="2905717">.</span><span class="ident" id="2905718">Cap</span><span class="op" id="2905721">)</span>&nbsp;<span class="op" id="2905723">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2905727">panic</span><span class="op" id="2905732">(</span><span class="string" id="2905733">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2905781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905787">s</span><span class="op" id="2905788">.</span><span class="ident" id="2905789">Cap</span>&nbsp;<span class="op" id="2905793">=</span>&nbsp;<span class="ident" id="2905795">n</span><br>
<span class="lineno"></span><span class="op" id="2905797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2905800">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2905871">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2905908">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2905979">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2906038">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2906105">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2906168">func</span>&nbsp;<span class="op" id="2906173">(</span><span class="ident" id="2906174">v</span>&nbsp;<span class="ident" id="2906176">Value</span><span class="op" id="2906181">)</span>&nbsp;<span class="ident" id="2906183">SetMapIndex</span><span class="op" id="2906194">(</span><span class="ident" id="2906195">key</span><span class="op" id="2906198">,</span>&nbsp;<span class="ident" id="2906200">val</span>&nbsp;<span class="ident" id="2906204">Value</span><span class="op" id="2906209">)</span>&nbsp;<span class="op" id="2906211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906214">v</span><span class="op" id="2906215">.</span><span class="ident" id="2906216">mustBe</span><span class="op" id="2906222">(</span><span class="ident" id="2906223">Map</span><span class="op" id="2906226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906229">v</span><span class="op" id="2906230">.</span><span class="ident" id="2906231">mustBeExported</span><span class="op" id="2906245">(</span><span class="op" id="2906246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906249">key</span><span class="op" id="2906252">.</span><span class="ident" id="2906253">mustBeExported</span><span class="op" id="2906267">(</span><span class="op" id="2906268">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906271">tt</span>&nbsp;<span class="op" id="2906274">:=</span>&nbsp;<span class="op" id="2906277">(</span><span class="op" id="2906278">*</span><span class="ident" id="2906279">mapType</span><span class="op" id="2906286">)</span><span class="op" id="2906287">(</span><span class="ident" id="2906288">unsafe</span><span class="op" id="2906294">.</span><span class="ident" id="2906295">Pointer</span><span class="op" id="2906302">(</span><span class="ident" id="2906303">v</span><span class="op" id="2906304">.</span><span class="ident" id="2906305">typ</span><span class="op" id="2906308">)</span><span class="op" id="2906309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906312">key</span>&nbsp;<span class="op" id="2906316">=</span>&nbsp;<span class="ident" id="2906318">key</span><span class="op" id="2906321">.</span><span class="ident" id="2906322">assignTo</span><span class="op" id="2906330">(</span><span class="string" id="2906331">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2906358">,</span>&nbsp;<span class="ident" id="2906360">tt</span><span class="op" id="2906362">.</span><span class="ident" id="2906363">key</span><span class="op" id="2906366">,</span>&nbsp;<span class="ident" id="2906368">nil</span><span class="op" id="2906371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906374">var</span>&nbsp;<span class="ident" id="2906378">k</span>&nbsp;<span class="ident" id="2906380">unsafe</span><span class="op" id="2906386">.</span><span class="ident" id="2906387">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906396">if</span>&nbsp;<span class="ident" id="2906399">key</span><span class="op" id="2906402">.</span><span class="ident" id="2906403">flag</span><span class="op" id="2906407">&amp;</span><span class="ident" id="2906408">flagIndir</span>&nbsp;<span class="op" id="2906418">!=</span>&nbsp;<span class="num" id="2906421">0</span>&nbsp;<span class="op" id="2906423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906427">k</span>&nbsp;<span class="op" id="2906429">=</span>&nbsp;<span class="ident" id="2906431">key</span><span class="op" id="2906434">.</span><span class="ident" id="2906435">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906440">}</span>&nbsp;<span class="keyword" id="2906442">else</span>&nbsp;<span class="op" id="2906447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906451">k</span>&nbsp;<span class="op" id="2906453">=</span>&nbsp;<span class="ident" id="2906455">unsafe</span><span class="op" id="2906461">.</span><span class="ident" id="2906462">Pointer</span><span class="op" id="2906469">(</span><span class="op" id="2906470">&amp;</span><span class="ident" id="2906471">key</span><span class="op" id="2906474">.</span><span class="ident" id="2906475">ptr</span><span class="op" id="2906478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906484">if</span>&nbsp;<span class="ident" id="2906487">val</span><span class="op" id="2906490">.</span><span class="ident" id="2906491">typ</span>&nbsp;<span class="op" id="2906495">==</span>&nbsp;<span class="ident" id="2906498">nil</span>&nbsp;<span class="op" id="2906502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906506">mapdelete</span><span class="op" id="2906515">(</span><span class="ident" id="2906516">v</span><span class="op" id="2906517">.</span><span class="ident" id="2906518">typ</span><span class="op" id="2906521">,</span>&nbsp;<span class="ident" id="2906523">v</span><span class="op" id="2906524">.</span><span class="ident" id="2906525">pointer</span><span class="op" id="2906532">(</span><span class="op" id="2906533">)</span><span class="op" id="2906534">,</span>&nbsp;<span class="ident" id="2906536">k</span><span class="op" id="2906537">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906541">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906552">val</span><span class="op" id="2906555">.</span><span class="ident" id="2906556">mustBeExported</span><span class="op" id="2906570">(</span><span class="op" id="2906571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906574">val</span>&nbsp;<span class="op" id="2906578">=</span>&nbsp;<span class="ident" id="2906580">val</span><span class="op" id="2906583">.</span><span class="ident" id="2906584">assignTo</span><span class="op" id="2906592">(</span><span class="string" id="2906593">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2906620">,</span>&nbsp;<span class="ident" id="2906622">tt</span><span class="op" id="2906624">.</span><span class="ident" id="2906625">elem</span><span class="op" id="2906629">,</span>&nbsp;<span class="ident" id="2906631">nil</span><span class="op" id="2906634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906637">var</span>&nbsp;<span class="ident" id="2906641">e</span>&nbsp;<span class="ident" id="2906643">unsafe</span><span class="op" id="2906649">.</span><span class="ident" id="2906650">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906659">if</span>&nbsp;<span class="ident" id="2906662">val</span><span class="op" id="2906665">.</span><span class="ident" id="2906666">flag</span><span class="op" id="2906670">&amp;</span><span class="ident" id="2906671">flagIndir</span>&nbsp;<span class="op" id="2906681">!=</span>&nbsp;<span class="num" id="2906684">0</span>&nbsp;<span class="op" id="2906686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906690">e</span>&nbsp;<span class="op" id="2906692">=</span>&nbsp;<span class="ident" id="2906694">val</span><span class="op" id="2906697">.</span><span class="ident" id="2906698">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906703">}</span>&nbsp;<span class="keyword" id="2906705">else</span>&nbsp;<span class="op" id="2906710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906714">e</span>&nbsp;<span class="op" id="2906716">=</span>&nbsp;<span class="ident" id="2906718">unsafe</span><span class="op" id="2906724">.</span><span class="ident" id="2906725">Pointer</span><span class="op" id="2906732">(</span><span class="op" id="2906733">&amp;</span><span class="ident" id="2906734">val</span><span class="op" id="2906737">.</span><span class="ident" id="2906738">ptr</span><span class="op" id="2906741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906744">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906747">mapassign</span><span class="op" id="2906756">(</span><span class="ident" id="2906757">v</span><span class="op" id="2906758">.</span><span class="ident" id="2906759">typ</span><span class="op" id="2906762">,</span>&nbsp;<span class="ident" id="2906764">v</span><span class="op" id="2906765">.</span><span class="ident" id="2906766">pointer</span><span class="op" id="2906773">(</span><span class="op" id="2906774">)</span><span class="op" id="2906775">,</span>&nbsp;<span class="ident" id="2906777">k</span><span class="op" id="2906778">,</span>&nbsp;<span class="ident" id="2906780">e</span><span class="op" id="2906781">)</span><br>
<span class="lineno"></span><span class="op" id="2906783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906786">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2906829">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2906935">func</span>&nbsp;<span class="op" id="2906940">(</span><span class="ident" id="2906941">v</span>&nbsp;<span class="ident" id="2906943">Value</span><span class="op" id="2906948">)</span>&nbsp;<span class="ident" id="2906950">SetUint</span><span class="op" id="2906957">(</span><span class="ident" id="2906958">x</span>&nbsp;<span class="ident" id="2906960">uint64</span><span class="op" id="2906966">)</span>&nbsp;<span class="op" id="2906968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906971">v</span><span class="op" id="2906972">.</span><span class="ident" id="2906973">mustBeAssignable</span><span class="op" id="2906989">(</span><span class="op" id="2906990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906993">switch</span>&nbsp;<span class="ident" id="2907000">k</span>&nbsp;<span class="op" id="2907002">:=</span>&nbsp;<span class="ident" id="2907005">v</span><span class="op" id="2907006">.</span><span class="ident" id="2907007">kind</span><span class="op" id="2907011">(</span><span class="op" id="2907012">)</span><span class="op" id="2907013">;</span>&nbsp;<span class="ident" id="2907015">k</span>&nbsp;<span class="op" id="2907017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907020">default</span><span class="op" id="2907027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2907031">panic</span><span class="op" id="2907036">(</span><span class="op" id="2907037">&amp;</span><span class="ident" id="2907038">ValueError</span><span class="op" id="2907048">{</span><span class="string" id="2907049">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2907072">,</span>&nbsp;<span class="ident" id="2907074">v</span><span class="op" id="2907075">.</span><span class="ident" id="2907076">kind</span><span class="op" id="2907080">(</span><span class="op" id="2907081">)</span><span class="op" id="2907082">}</span><span class="op" id="2907083">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907086">case</span>&nbsp;<span class="ident" id="2907091">Uint</span><span class="op" id="2907095">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907099">*</span><span class="op" id="2907100">(</span><span class="op" id="2907101">*</span><span class="builtintype" id="2907102">uint</span><span class="op" id="2907106">)</span><span class="op" id="2907107">(</span><span class="ident" id="2907108">v</span><span class="op" id="2907109">.</span><span class="ident" id="2907110">ptr</span><span class="op" id="2907113">)</span>&nbsp;<span class="op" id="2907115">=</span>&nbsp;<span class="builtintype" id="2907117">uint</span><span class="op" id="2907121">(</span><span class="ident" id="2907122">x</span><span class="op" id="2907123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907126">case</span>&nbsp;<span class="ident" id="2907131">Uint8</span><span class="op" id="2907136">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907140">*</span><span class="op" id="2907141">(</span><span class="op" id="2907142">*</span><span class="builtintype" id="2907143">uint8</span><span class="op" id="2907148">)</span><span class="op" id="2907149">(</span><span class="ident" id="2907150">v</span><span class="op" id="2907151">.</span><span class="ident" id="2907152">ptr</span><span class="op" id="2907155">)</span>&nbsp;<span class="op" id="2907157">=</span>&nbsp;<span class="builtintype" id="2907159">uint8</span><span class="op" id="2907164">(</span><span class="ident" id="2907165">x</span><span class="op" id="2907166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907169">case</span>&nbsp;<span class="ident" id="2907174">Uint16</span><span class="op" id="2907180">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907184">*</span><span class="op" id="2907185">(</span><span class="op" id="2907186">*</span><span class="builtintype" id="2907187">uint16</span><span class="op" id="2907193">)</span><span class="op" id="2907194">(</span><span class="ident" id="2907195">v</span><span class="op" id="2907196">.</span><span class="ident" id="2907197">ptr</span><span class="op" id="2907200">)</span>&nbsp;<span class="op" id="2907202">=</span>&nbsp;<span class="builtintype" id="2907204">uint16</span><span class="op" id="2907210">(</span><span class="ident" id="2907211">x</span><span class="op" id="2907212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907215">case</span>&nbsp;<span class="ident" id="2907220">Uint32</span><span class="op" id="2907226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907230">*</span><span class="op" id="2907231">(</span><span class="op" id="2907232">*</span><span class="builtintype" id="2907233">uint32</span><span class="op" id="2907239">)</span><span class="op" id="2907240">(</span><span class="ident" id="2907241">v</span><span class="op" id="2907242">.</span><span class="ident" id="2907243">ptr</span><span class="op" id="2907246">)</span>&nbsp;<span class="op" id="2907248">=</span>&nbsp;<span class="builtintype" id="2907250">uint32</span><span class="op" id="2907256">(</span><span class="ident" id="2907257">x</span><span class="op" id="2907258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907261">case</span>&nbsp;<span class="ident" id="2907266">Uint64</span><span class="op" id="2907272">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907276">*</span><span class="op" id="2907277">(</span><span class="op" id="2907278">*</span><span class="ident" id="2907279">uint64</span><span class="op" id="2907285">)</span><span class="op" id="2907286">(</span><span class="ident" id="2907287">v</span><span class="op" id="2907288">.</span><span class="ident" id="2907289">ptr</span><span class="op" id="2907292">)</span>&nbsp;<span class="op" id="2907294">=</span>&nbsp;<span class="ident" id="2907296">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907299">case</span>&nbsp;<span class="ident" id="2907304">Uintptr</span><span class="op" id="2907311">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907315">*</span><span class="op" id="2907316">(</span><span class="op" id="2907317">*</span><span class="builtintype" id="2907318">uintptr</span><span class="op" id="2907325">)</span><span class="op" id="2907326">(</span><span class="ident" id="2907327">v</span><span class="op" id="2907328">.</span><span class="ident" id="2907329">ptr</span><span class="op" id="2907332">)</span>&nbsp;<span class="op" id="2907334">=</span>&nbsp;<span class="builtintype" id="2907336">uintptr</span><span class="op" id="2907343">(</span><span class="ident" id="2907344">x</span><span class="op" id="2907345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907348">}</span><br>
<span class="lineno"></span><span class="op" id="2907350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2907353">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2907405">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2907452">func</span>&nbsp;<span class="op" id="2907457">(</span><span class="ident" id="2907458">v</span>&nbsp;<span class="ident" id="2907460">Value</span><span class="op" id="2907465">)</span>&nbsp;<span class="ident" id="2907467">SetPointer</span><span class="op" id="2907477">(</span><span class="ident" id="2907478">x</span>&nbsp;<span class="ident" id="2907480">unsafe</span><span class="op" id="2907486">.</span><span class="ident" id="2907487">Pointer</span><span class="op" id="2907494">)</span>&nbsp;<span class="op" id="2907496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907499">v</span><span class="op" id="2907500">.</span><span class="ident" id="2907501">mustBeAssignable</span><span class="op" id="2907517">(</span><span class="op" id="2907518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907521">v</span><span class="op" id="2907522">.</span><span class="ident" id="2907523">mustBe</span><span class="op" id="2907529">(</span><span class="ident" id="2907530">UnsafePointer</span><span class="op" id="2907543">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907546">*</span><span class="op" id="2907547">(</span><span class="op" id="2907548">*</span><span class="ident" id="2907549">unsafe</span><span class="op" id="2907555">.</span><span class="ident" id="2907556">Pointer</span><span class="op" id="2907563">)</span><span class="op" id="2907564">(</span><span class="ident" id="2907565">v</span><span class="op" id="2907566">.</span><span class="ident" id="2907567">ptr</span><span class="op" id="2907570">)</span>&nbsp;<span class="op" id="2907572">=</span>&nbsp;<span class="ident" id="2907574">x</span><br>
<span class="lineno"></span><span class="op" id="2907576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907579">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2907624">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2907688">func</span>&nbsp;<span class="op" id="2907693">(</span><span class="ident" id="2907694">v</span>&nbsp;<span class="ident" id="2907696">Value</span><span class="op" id="2907701">)</span>&nbsp;<span class="ident" id="2907703">SetString</span><span class="op" id="2907712">(</span><span class="ident" id="2907713">x</span>&nbsp;<span class="builtintype" id="2907715">string</span><span class="op" id="2907721">)</span>&nbsp;<span class="op" id="2907723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907726">v</span><span class="op" id="2907727">.</span><span class="ident" id="2907728">mustBeAssignable</span><span class="op" id="2907744">(</span><span class="op" id="2907745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907748">v</span><span class="op" id="2907749">.</span><span class="ident" id="2907750">mustBe</span><span class="op" id="2907756">(</span><span class="ident" id="2907757">String</span><span class="op" id="2907763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907766">*</span><span class="op" id="2907767">(</span><span class="op" id="2907768">*</span><span class="builtintype" id="2907769">string</span><span class="op" id="2907775">)</span><span class="op" id="2907776">(</span><span class="ident" id="2907777">v</span><span class="op" id="2907778">.</span><span class="ident" id="2907779">ptr</span><span class="op" id="2907782">)</span>&nbsp;<span class="op" id="2907784">=</span>&nbsp;<span class="ident" id="2907786">x</span><br>
<span class="lineno"></span><span class="op" id="2907788">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2907791">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2907816">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2907907">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2907947">func</span>&nbsp;<span class="op" id="2907952">(</span><span class="ident" id="2907953">v</span>&nbsp;<span class="ident" id="2907955">Value</span><span class="op" id="2907960">)</span>&nbsp;<span class="ident" id="2907962">Slice</span><span class="op" id="2907967">(</span><span class="ident" id="2907968">i</span><span class="op" id="2907969">,</span>&nbsp;<span class="ident" id="2907971">j</span>&nbsp;<span class="builtintype" id="2907973">int</span><span class="op" id="2907976">)</span>&nbsp;<span class="ident" id="2907978">Value</span>&nbsp;<span class="op" id="2907984">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907987">var</span>&nbsp;<span class="op" id="2907991">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2907995">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2908000">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908006">typ</span>&nbsp;&nbsp;<span class="op" id="2908011">*</span><span class="ident" id="2908012">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908024">base</span>&nbsp;<span class="ident" id="2908029">unsafe</span><span class="op" id="2908035">.</span><span class="ident" id="2908036">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908045">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908048">switch</span>&nbsp;<span class="ident" id="2908055">kind</span>&nbsp;<span class="op" id="2908060">:=</span>&nbsp;<span class="ident" id="2908063">v</span><span class="op" id="2908064">.</span><span class="ident" id="2908065">kind</span><span class="op" id="2908069">(</span><span class="op" id="2908070">)</span><span class="op" id="2908071">;</span>&nbsp;<span class="ident" id="2908073">kind</span>&nbsp;<span class="op" id="2908078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908081">default</span><span class="op" id="2908088">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2908092">panic</span><span class="op" id="2908097">(</span><span class="op" id="2908098">&amp;</span><span class="ident" id="2908099">ValueError</span><span class="op" id="2908109">{</span><span class="string" id="2908110">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2908131">,</span>&nbsp;<span class="ident" id="2908133">v</span><span class="op" id="2908134">.</span><span class="ident" id="2908135">kind</span><span class="op" id="2908139">(</span><span class="op" id="2908140">)</span><span class="op" id="2908141">}</span><span class="op" id="2908142">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908146">case</span>&nbsp;<span class="ident" id="2908151">Array</span><span class="op" id="2908156">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908160">if</span>&nbsp;<span class="ident" id="2908163">v</span><span class="op" id="2908164">.</span><span class="ident" id="2908165">flag</span><span class="op" id="2908169">&amp;</span><span class="ident" id="2908170">flagAddr</span>&nbsp;<span class="op" id="2908179">==</span>&nbsp;<span class="num" id="2908182">0</span>&nbsp;<span class="op" id="2908184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2908189">panic</span><span class="op" id="2908194">(</span><span class="string" id="2908195">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2908246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908254">tt</span>&nbsp;<span class="op" id="2908257">:=</span>&nbsp;<span class="op" id="2908260">(</span><span class="op" id="2908261">*</span><span class="ident" id="2908262">arrayType</span><span class="op" id="2908271">)</span><span class="op" id="2908272">(</span><span class="ident" id="2908273">unsafe</span><span class="op" id="2908279">.</span><span class="ident" id="2908280">Pointer</span><span class="op" id="2908287">(</span><span class="ident" id="2908288">v</span><span class="op" id="2908289">.</span><span class="ident" id="2908290">typ</span><span class="op" id="2908293">)</span><span class="op" id="2908294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2908298">cap</span>&nbsp;<span class="op" id="2908302">=</span>&nbsp;<span class="builtintype" id="2908304">int</span><span class="op" id="2908307">(</span><span class="ident" id="2908308">tt</span><span class="op" id="2908310">.</span><span class="builtinfunc" id="2908311">len</span><span class="op" id="2908314">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908318">typ</span>&nbsp;<span class="op" id="2908322">=</span>&nbsp;<span class="op" id="2908324">(</span><span class="op" id="2908325">*</span><span class="ident" id="2908326">sliceType</span><span class="op" id="2908335">)</span><span class="op" id="2908336">(</span><span class="ident" id="2908337">unsafe</span><span class="op" id="2908343">.</span><span class="ident" id="2908344">Pointer</span><span class="op" id="2908351">(</span><span class="ident" id="2908352">tt</span><span class="op" id="2908354">.</span><span class="ident" id="2908355">slice</span><span class="op" id="2908360">)</span><span class="op" id="2908361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908365">base</span>&nbsp;<span class="op" id="2908370">=</span>&nbsp;<span class="ident" id="2908372">v</span><span class="op" id="2908373">.</span><span class="ident" id="2908374">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908380">case</span>&nbsp;<span class="ident" id="2908385">Slice</span><span class="op" id="2908390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908394">typ</span>&nbsp;<span class="op" id="2908398">=</span>&nbsp;<span class="op" id="2908400">(</span><span class="op" id="2908401">*</span><span class="ident" id="2908402">sliceType</span><span class="op" id="2908411">)</span><span class="op" id="2908412">(</span><span class="ident" id="2908413">unsafe</span><span class="op" id="2908419">.</span><span class="ident" id="2908420">Pointer</span><span class="op" id="2908427">(</span><span class="ident" id="2908428">v</span><span class="op" id="2908429">.</span><span class="ident" id="2908430">typ</span><span class="op" id="2908433">)</span><span class="op" id="2908434">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908438">s</span>&nbsp;<span class="op" id="2908440">:=</span>&nbsp;<span class="op" id="2908443">(</span><span class="op" id="2908444">*</span><span class="ident" id="2908445">sliceHeader</span><span class="op" id="2908456">)</span><span class="op" id="2908457">(</span><span class="ident" id="2908458">v</span><span class="op" id="2908459">.</span><span class="ident" id="2908460">ptr</span><span class="op" id="2908463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908467">base</span>&nbsp;<span class="op" id="2908472">=</span>&nbsp;<span class="ident" id="2908474">unsafe</span><span class="op" id="2908480">.</span><span class="ident" id="2908481">Pointer</span><span class="op" id="2908488">(</span><span class="ident" id="2908489">s</span><span class="op" id="2908490">.</span><span class="ident" id="2908491">Data</span><span class="op" id="2908495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2908499">cap</span>&nbsp;<span class="op" id="2908503">=</span>&nbsp;<span class="ident" id="2908505">s</span><span class="op" id="2908506">.</span><span class="ident" id="2908507">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908513">case</span>&nbsp;<span class="ident" id="2908518">String</span><span class="op" id="2908524">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908528">s</span>&nbsp;<span class="op" id="2908530">:=</span>&nbsp;<span class="op" id="2908533">(</span><span class="op" id="2908534">*</span><span class="ident" id="2908535">stringHeader</span><span class="op" id="2908547">)</span><span class="op" id="2908548">(</span><span class="ident" id="2908549">v</span><span class="op" id="2908550">.</span><span class="ident" id="2908551">ptr</span><span class="op" id="2908554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908558">if</span>&nbsp;<span class="ident" id="2908561">i</span>&nbsp;<span class="op" id="2908563">&lt;</span>&nbsp;<span class="num" id="2908565">0</span>&nbsp;<span class="op" id="2908567">||</span>&nbsp;<span class="ident" id="2908570">j</span>&nbsp;<span class="op" id="2908572">&lt;</span>&nbsp;<span class="ident" id="2908574">i</span>&nbsp;<span class="op" id="2908576">||</span>&nbsp;<span class="ident" id="2908579">j</span>&nbsp;<span class="op" id="2908581">&gt;</span>&nbsp;<span class="ident" id="2908583">s</span><span class="op" id="2908584">.</span><span class="ident" id="2908585">Len</span>&nbsp;<span class="op" id="2908589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2908594">panic</span><span class="op" id="2908599">(</span><span class="string" id="2908600">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2908655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908663">t</span>&nbsp;<span class="op" id="2908665">:=</span>&nbsp;<span class="ident" id="2908668">stringHeader</span><span class="op" id="2908680">{</span><span class="ident" id="2908681">unsafe</span><span class="op" id="2908687">.</span><span class="ident" id="2908688">Pointer</span><span class="op" id="2908695">(</span><span class="builtintype" id="2908696">uintptr</span><span class="op" id="2908703">(</span><span class="ident" id="2908704">s</span><span class="op" id="2908705">.</span><span class="ident" id="2908706">Data</span><span class="op" id="2908710">)</span>&nbsp;<span class="op" id="2908712">+</span>&nbsp;<span class="builtintype" id="2908714">uintptr</span><span class="op" id="2908721">(</span><span class="ident" id="2908722">i</span><span class="op" id="2908723">)</span><span class="op" id="2908724">)</span><span class="op" id="2908725">,</span>&nbsp;<span class="ident" id="2908727">j</span>&nbsp;<span class="op" id="2908729">-</span>&nbsp;<span class="ident" id="2908731">i</span><span class="op" id="2908732">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908736">return</span>&nbsp;<span class="ident" id="2908743">Value</span><span class="op" id="2908748">{</span><span class="ident" id="2908749">v</span><span class="op" id="2908750">.</span><span class="ident" id="2908751">typ</span><span class="op" id="2908754">,</span>&nbsp;<span class="ident" id="2908756">unsafe</span><span class="op" id="2908762">.</span><span class="ident" id="2908763">Pointer</span><span class="op" id="2908770">(</span><span class="op" id="2908771">&amp;</span><span class="ident" id="2908772">t</span><span class="op" id="2908773">)</span><span class="op" id="2908774">,</span>&nbsp;<span class="ident" id="2908776">v</span><span class="op" id="2908777">.</span><span class="ident" id="2908778">flag</span><span class="op" id="2908782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908789">if</span>&nbsp;<span class="ident" id="2908792">i</span>&nbsp;<span class="op" id="2908794">&lt;</span>&nbsp;<span class="num" id="2908796">0</span>&nbsp;<span class="op" id="2908798">||</span>&nbsp;<span class="ident" id="2908801">j</span>&nbsp;<span class="op" id="2908803">&lt;</span>&nbsp;<span class="ident" id="2908805">i</span>&nbsp;<span class="op" id="2908807">||</span>&nbsp;<span class="ident" id="2908810">j</span>&nbsp;<span class="op" id="2908812">&gt;</span>&nbsp;<span class="builtinfunc" id="2908814">cap</span>&nbsp;<span class="op" id="2908818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2908822">panic</span><span class="op" id="2908827">(</span><span class="string" id="2908828">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2908876">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2908883">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908944">var</span>&nbsp;<span class="ident" id="2908948">x</span>&nbsp;<span class="op" id="2908950">[</span><span class="op" id="2908951">]</span><span class="ident" id="2908952">unsafe</span><span class="op" id="2908958">.</span><span class="ident" id="2908959">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2908969">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909010">s</span>&nbsp;<span class="op" id="2909012">:=</span>&nbsp;<span class="op" id="2909015">(</span><span class="op" id="2909016">*</span><span class="ident" id="2909017">sliceHeader</span><span class="op" id="2909028">)</span><span class="op" id="2909029">(</span><span class="ident" id="2909030">unsafe</span><span class="op" id="2909036">.</span><span class="ident" id="2909037">Pointer</span><span class="op" id="2909044">(</span><span class="op" id="2909045">&amp;</span><span class="ident" id="2909046">x</span><span class="op" id="2909047">)</span><span class="op" id="2909048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909051">s</span><span class="op" id="2909052">.</span><span class="ident" id="2909053">Len</span>&nbsp;<span class="op" id="2909057">=</span>&nbsp;<span class="ident" id="2909059">j</span>&nbsp;<span class="op" id="2909061">-</span>&nbsp;<span class="ident" id="2909063">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909066">s</span><span class="op" id="2909067">.</span><span class="ident" id="2909068">Cap</span>&nbsp;<span class="op" id="2909072">=</span>&nbsp;<span class="builtinfunc" id="2909074">cap</span>&nbsp;<span class="op" id="2909078">-</span>&nbsp;<span class="ident" id="2909080">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909083">if</span>&nbsp;<span class="builtinfunc" id="2909086">cap</span><span class="op" id="2909089">-</span><span class="ident" id="2909090">i</span>&nbsp;<span class="op" id="2909092">&gt;</span>&nbsp;<span class="num" id="2909094">0</span>&nbsp;<span class="op" id="2909096">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909100">s</span><span class="op" id="2909101">.</span><span class="ident" id="2909102">Data</span>&nbsp;<span class="op" id="2909107">=</span>&nbsp;<span class="ident" id="2909109">unsafe</span><span class="op" id="2909115">.</span><span class="ident" id="2909116">Pointer</span><span class="op" id="2909123">(</span><span class="builtintype" id="2909124">uintptr</span><span class="op" id="2909131">(</span><span class="ident" id="2909132">base</span><span class="op" id="2909136">)</span>&nbsp;<span class="op" id="2909138">+</span>&nbsp;<span class="builtintype" id="2909140">uintptr</span><span class="op" id="2909147">(</span><span class="ident" id="2909148">i</span><span class="op" id="2909149">)</span><span class="op" id="2909150">*</span><span class="ident" id="2909151">typ</span><span class="op" id="2909154">.</span><span class="ident" id="2909155">elem</span><span class="op" id="2909159">.</span><span class="ident" id="2909160">Size</span><span class="op" id="2909164">(</span><span class="op" id="2909165">)</span><span class="op" id="2909166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909169">}</span>&nbsp;<span class="keyword" id="2909171">else</span>&nbsp;<span class="op" id="2909176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909180">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909247">s</span><span class="op" id="2909248">.</span><span class="ident" id="2909249">Data</span>&nbsp;<span class="op" id="2909254">=</span>&nbsp;<span class="ident" id="2909256">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909262">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909266">fl</span>&nbsp;<span class="op" id="2909269">:=</span>&nbsp;<span class="ident" id="2909272">v</span><span class="op" id="2909273">.</span><span class="ident" id="2909274">flag</span><span class="op" id="2909278">&amp;</span><span class="ident" id="2909279">flagRO</span>&nbsp;<span class="op" id="2909286">|</span>&nbsp;<span class="ident" id="2909288">flagIndir</span>&nbsp;<span class="op" id="2909298">|</span>&nbsp;<span class="ident" id="2909300">flag</span><span class="op" id="2909304">(</span><span class="ident" id="2909305">Slice</span><span class="op" id="2909310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909313">return</span>&nbsp;<span class="ident" id="2909320">Value</span><span class="op" id="2909325">{</span><span class="ident" id="2909326">typ</span><span class="op" id="2909329">.</span><span class="ident" id="2909330">common</span><span class="op" id="2909336">(</span><span class="op" id="2909337">)</span><span class="op" id="2909338">,</span>&nbsp;<span class="ident" id="2909340">unsafe</span><span class="op" id="2909346">.</span><span class="ident" id="2909347">Pointer</span><span class="op" id="2909354">(</span><span class="op" id="2909355">&amp;</span><span class="ident" id="2909356">x</span><span class="op" id="2909357">)</span><span class="op" id="2909358">,</span>&nbsp;<span class="ident" id="2909360">fl</span><span class="op" id="2909362">}</span><br>
<span class="lineno"></span><span class="op" id="2909364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2909367">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2909442">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2909525">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2909565">func</span>&nbsp;<span class="op" id="2909570">(</span><span class="ident" id="2909571">v</span>&nbsp;<span class="ident" id="2909573">Value</span><span class="op" id="2909578">)</span>&nbsp;<span class="ident" id="2909580">Slice3</span><span class="op" id="2909586">(</span><span class="ident" id="2909587">i</span><span class="op" id="2909588">,</span>&nbsp;<span class="ident" id="2909590">j</span><span class="op" id="2909591">,</span>&nbsp;<span class="ident" id="2909593">k</span>&nbsp;<span class="builtintype" id="2909595">int</span><span class="op" id="2909598">)</span>&nbsp;<span class="ident" id="2909600">Value</span>&nbsp;<span class="op" id="2909606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909609">var</span>&nbsp;<span class="op" id="2909613">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2909617">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2909622">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909628">typ</span>&nbsp;&nbsp;<span class="op" id="2909633">*</span><span class="ident" id="2909634">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909646">base</span>&nbsp;<span class="ident" id="2909651">unsafe</span><span class="op" id="2909657">.</span><span class="ident" id="2909658">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909670">switch</span>&nbsp;<span class="ident" id="2909677">kind</span>&nbsp;<span class="op" id="2909682">:=</span>&nbsp;<span class="ident" id="2909685">v</span><span class="op" id="2909686">.</span><span class="ident" id="2909687">kind</span><span class="op" id="2909691">(</span><span class="op" id="2909692">)</span><span class="op" id="2909693">;</span>&nbsp;<span class="ident" id="2909695">kind</span>&nbsp;<span class="op" id="2909700">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909703">default</span><span class="op" id="2909710">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2909714">panic</span><span class="op" id="2909719">(</span><span class="op" id="2909720">&amp;</span><span class="ident" id="2909721">ValueError</span><span class="op" id="2909731">{</span><span class="string" id="2909732">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2909754">,</span>&nbsp;<span class="ident" id="2909756">v</span><span class="op" id="2909757">.</span><span class="ident" id="2909758">kind</span><span class="op" id="2909762">(</span><span class="op" id="2909763">)</span><span class="op" id="2909764">}</span><span class="op" id="2909765">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909769">case</span>&nbsp;<span class="ident" id="2909774">Array</span><span class="op" id="2909779">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909783">if</span>&nbsp;<span class="ident" id="2909786">v</span><span class="op" id="2909787">.</span><span class="ident" id="2909788">flag</span><span class="op" id="2909792">&amp;</span><span class="ident" id="2909793">flagAddr</span>&nbsp;<span class="op" id="2909802">==</span>&nbsp;<span class="num" id="2909805">0</span>&nbsp;<span class="op" id="2909807">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2909812">panic</span><span class="op" id="2909817">(</span><span class="string" id="2909818">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2909870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909878">tt</span>&nbsp;<span class="op" id="2909881">:=</span>&nbsp;<span class="op" id="2909884">(</span><span class="op" id="2909885">*</span><span class="ident" id="2909886">arrayType</span><span class="op" id="2909895">)</span><span class="op" id="2909896">(</span><span class="ident" id="2909897">unsafe</span><span class="op" id="2909903">.</span><span class="ident" id="2909904">Pointer</span><span class="op" id="2909911">(</span><span class="ident" id="2909912">v</span><span class="op" id="2909913">.</span><span class="ident" id="2909914">typ</span><span class="op" id="2909917">)</span><span class="op" id="2909918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2909922">cap</span>&nbsp;<span class="op" id="2909926">=</span>&nbsp;<span class="builtintype" id="2909928">int</span><span class="op" id="2909931">(</span><span class="ident" id="2909932">tt</span><span class="op" id="2909934">.</span><span class="builtinfunc" id="2909935">len</span><span class="op" id="2909938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909942">typ</span>&nbsp;<span class="op" id="2909946">=</span>&nbsp;<span class="op" id="2909948">(</span><span class="op" id="2909949">*</span><span class="ident" id="2909950">sliceType</span><span class="op" id="2909959">)</span><span class="op" id="2909960">(</span><span class="ident" id="2909961">unsafe</span><span class="op" id="2909967">.</span><span class="ident" id="2909968">Pointer</span><span class="op" id="2909975">(</span><span class="ident" id="2909976">tt</span><span class="op" id="2909978">.</span><span class="ident" id="2909979">slice</span><span class="op" id="2909984">)</span><span class="op" id="2909985">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909989">base</span>&nbsp;<span class="op" id="2909994">=</span>&nbsp;<span class="ident" id="2909996">v</span><span class="op" id="2909997">.</span><span class="ident" id="2909998">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910004">case</span>&nbsp;<span class="ident" id="2910009">Slice</span><span class="op" id="2910014">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910018">typ</span>&nbsp;<span class="op" id="2910022">=</span>&nbsp;<span class="op" id="2910024">(</span><span class="op" id="2910025">*</span><span class="ident" id="2910026">sliceType</span><span class="op" id="2910035">)</span><span class="op" id="2910036">(</span><span class="ident" id="2910037">unsafe</span><span class="op" id="2910043">.</span><span class="ident" id="2910044">Pointer</span><span class="op" id="2910051">(</span><span class="ident" id="2910052">v</span><span class="op" id="2910053">.</span><span class="ident" id="2910054">typ</span><span class="op" id="2910057">)</span><span class="op" id="2910058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910062">s</span>&nbsp;<span class="op" id="2910064">:=</span>&nbsp;<span class="op" id="2910067">(</span><span class="op" id="2910068">*</span><span class="ident" id="2910069">sliceHeader</span><span class="op" id="2910080">)</span><span class="op" id="2910081">(</span><span class="ident" id="2910082">v</span><span class="op" id="2910083">.</span><span class="ident" id="2910084">ptr</span><span class="op" id="2910087">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910091">base</span>&nbsp;<span class="op" id="2910096">=</span>&nbsp;<span class="ident" id="2910098">s</span><span class="op" id="2910099">.</span><span class="ident" id="2910100">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2910107">cap</span>&nbsp;<span class="op" id="2910111">=</span>&nbsp;<span class="ident" id="2910113">s</span><span class="op" id="2910114">.</span><span class="ident" id="2910115">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910124">if</span>&nbsp;<span class="ident" id="2910127">i</span>&nbsp;<span class="op" id="2910129">&lt;</span>&nbsp;<span class="num" id="2910131">0</span>&nbsp;<span class="op" id="2910133">||</span>&nbsp;<span class="ident" id="2910136">j</span>&nbsp;<span class="op" id="2910138">&lt;</span>&nbsp;<span class="ident" id="2910140">i</span>&nbsp;<span class="op" id="2910142">||</span>&nbsp;<span class="ident" id="2910145">k</span>&nbsp;<span class="op" id="2910147">&lt;</span>&nbsp;<span class="ident" id="2910149">j</span>&nbsp;<span class="op" id="2910151">||</span>&nbsp;<span class="ident" id="2910154">k</span>&nbsp;<span class="op" id="2910156">&gt;</span>&nbsp;<span class="builtinfunc" id="2910158">cap</span>&nbsp;<span class="op" id="2910162">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2910166">panic</span><span class="op" id="2910171">(</span><span class="string" id="2910172">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2910221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910228">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910276">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910312">var</span>&nbsp;<span class="ident" id="2910316">x</span>&nbsp;<span class="op" id="2910318">[</span><span class="op" id="2910319">]</span><span class="ident" id="2910320">unsafe</span><span class="op" id="2910326">.</span><span class="ident" id="2910327">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910337">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910378">s</span>&nbsp;<span class="op" id="2910380">:=</span>&nbsp;<span class="op" id="2910383">(</span><span class="op" id="2910384">*</span><span class="ident" id="2910385">sliceHeader</span><span class="op" id="2910396">)</span><span class="op" id="2910397">(</span><span class="ident" id="2910398">unsafe</span><span class="op" id="2910404">.</span><span class="ident" id="2910405">Pointer</span><span class="op" id="2910412">(</span><span class="op" id="2910413">&amp;</span><span class="ident" id="2910414">x</span><span class="op" id="2910415">)</span><span class="op" id="2910416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910419">s</span><span class="op" id="2910420">.</span><span class="ident" id="2910421">Len</span>&nbsp;<span class="op" id="2910425">=</span>&nbsp;<span class="ident" id="2910427">j</span>&nbsp;<span class="op" id="2910429">-</span>&nbsp;<span class="ident" id="2910431">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910434">s</span><span class="op" id="2910435">.</span><span class="ident" id="2910436">Cap</span>&nbsp;<span class="op" id="2910440">=</span>&nbsp;<span class="ident" id="2910442">k</span>&nbsp;<span class="op" id="2910444">-</span>&nbsp;<span class="ident" id="2910446">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910449">if</span>&nbsp;<span class="ident" id="2910452">k</span><span class="op" id="2910453">-</span><span class="ident" id="2910454">i</span>&nbsp;<span class="op" id="2910456">&gt;</span>&nbsp;<span class="num" id="2910458">0</span>&nbsp;<span class="op" id="2910460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910464">s</span><span class="op" id="2910465">.</span><span class="ident" id="2910466">Data</span>&nbsp;<span class="op" id="2910471">=</span>&nbsp;<span class="ident" id="2910473">unsafe</span><span class="op" id="2910479">.</span><span class="ident" id="2910480">Pointer</span><span class="op" id="2910487">(</span><span class="builtintype" id="2910488">uintptr</span><span class="op" id="2910495">(</span><span class="ident" id="2910496">base</span><span class="op" id="2910500">)</span>&nbsp;<span class="op" id="2910502">+</span>&nbsp;<span class="builtintype" id="2910504">uintptr</span><span class="op" id="2910511">(</span><span class="ident" id="2910512">i</span><span class="op" id="2910513">)</span><span class="op" id="2910514">*</span><span class="ident" id="2910515">typ</span><span class="op" id="2910518">.</span><span class="ident" id="2910519">elem</span><span class="op" id="2910523">.</span><span class="ident" id="2910524">Size</span><span class="op" id="2910528">(</span><span class="op" id="2910529">)</span><span class="op" id="2910530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910533">}</span>&nbsp;<span class="keyword" id="2910535">else</span>&nbsp;<span class="op" id="2910540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910544">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910611">s</span><span class="op" id="2910612">.</span><span class="ident" id="2910613">Data</span>&nbsp;<span class="op" id="2910618">=</span>&nbsp;<span class="ident" id="2910620">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910630">fl</span>&nbsp;<span class="op" id="2910633">:=</span>&nbsp;<span class="ident" id="2910636">v</span><span class="op" id="2910637">.</span><span class="ident" id="2910638">flag</span><span class="op" id="2910642">&amp;</span><span class="ident" id="2910643">flagRO</span>&nbsp;<span class="op" id="2910650">|</span>&nbsp;<span class="ident" id="2910652">flagIndir</span>&nbsp;<span class="op" id="2910662">|</span>&nbsp;<span class="ident" id="2910664">flag</span><span class="op" id="2910668">(</span><span class="ident" id="2910669">Slice</span><span class="op" id="2910674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910677">return</span>&nbsp;<span class="ident" id="2910684">Value</span><span class="op" id="2910689">{</span><span class="ident" id="2910690">typ</span><span class="op" id="2910693">.</span><span class="ident" id="2910694">common</span><span class="op" id="2910700">(</span><span class="op" id="2910701">)</span><span class="op" id="2910702">,</span>&nbsp;<span class="ident" id="2910704">unsafe</span><span class="op" id="2910710">.</span><span class="ident" id="2910711">Pointer</span><span class="op" id="2910718">(</span><span class="op" id="2910719">&amp;</span><span class="ident" id="2910720">x</span><span class="op" id="2910721">)</span><span class="op" id="2910722">,</span>&nbsp;<span class="ident" id="2910724">fl</span><span class="op" id="2910726">}</span><br>
<span class="lineno">1590</span><span class="op" id="2910728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2910731">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2910795">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2910865">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2910939">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2911016">func</span>&nbsp;<span class="op" id="2911021">(</span><span class="ident" id="2911022">v</span>&nbsp;<span class="ident" id="2911024">Value</span><span class="op" id="2911029">)</span>&nbsp;<span class="ident" id="2911031">String</span><span class="op" id="2911037">(</span><span class="op" id="2911038">)</span>&nbsp;<span class="builtintype" id="2911040">string</span>&nbsp;<span class="op" id="2911047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911050">switch</span>&nbsp;<span class="ident" id="2911057">k</span>&nbsp;<span class="op" id="2911059">:=</span>&nbsp;<span class="ident" id="2911062">v</span><span class="op" id="2911063">.</span><span class="ident" id="2911064">kind</span><span class="op" id="2911068">(</span><span class="op" id="2911069">)</span><span class="op" id="2911070">;</span>&nbsp;<span class="ident" id="2911072">k</span>&nbsp;<span class="op" id="2911074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911077">case</span>&nbsp;<span class="ident" id="2911082">Invalid</span><span class="op" id="2911089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911093">return</span>&nbsp;<span class="string" id="2911100">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911119">case</span>&nbsp;<span class="ident" id="2911124">String</span><span class="op" id="2911130">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911134">return</span>&nbsp;<span class="op" id="2911141">*</span><span class="op" id="2911142">(</span><span class="op" id="2911143">*</span><span class="builtintype" id="2911144">string</span><span class="op" id="2911150">)</span><span class="op" id="2911151">(</span><span class="ident" id="2911152">v</span><span class="op" id="2911153">.</span><span class="ident" id="2911154">ptr</span><span class="op" id="2911157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2911163">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2911235">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911291">return</span>&nbsp;<span class="string" id="2911298">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2911302">+</span>&nbsp;<span class="ident" id="2911304">v</span><span class="op" id="2911305">.</span><span class="ident" id="2911306">Type</span><span class="op" id="2911310">(</span><span class="op" id="2911311">)</span><span class="op" id="2911312">.</span><span class="ident" id="2911313">String</span><span class="op" id="2911319">(</span><span class="op" id="2911320">)</span>&nbsp;<span class="op" id="2911322">+</span>&nbsp;<span class="string" id="2911324">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2911334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2911337">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2911415">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2911453">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2911532">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2911619">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2911716">func</span>&nbsp;<span class="op" id="2911721">(</span><span class="ident" id="2911722">v</span>&nbsp;<span class="ident" id="2911724">Value</span><span class="op" id="2911729">)</span>&nbsp;<span class="ident" id="2911731">TryRecv</span><span class="op" id="2911738">(</span><span class="op" id="2911739">)</span>&nbsp;<span class="op" id="2911741">(</span><span class="ident" id="2911742">x</span>&nbsp;<span class="ident" id="2911744">Value</span><span class="op" id="2911749">,</span>&nbsp;<span class="ident" id="2911751">ok</span>&nbsp;<span class="builtintype" id="2911754">bool</span><span class="op" id="2911758">)</span>&nbsp;<span class="op" id="2911760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911763">v</span><span class="op" id="2911764">.</span><span class="ident" id="2911765">mustBe</span><span class="op" id="2911771">(</span><span class="ident" id="2911772">Chan</span><span class="op" id="2911776">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911779">v</span><span class="op" id="2911780">.</span><span class="ident" id="2911781">mustBeExported</span><span class="op" id="2911795">(</span><span class="op" id="2911796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911799">return</span>&nbsp;<span class="ident" id="2911806">v</span><span class="op" id="2911807">.</span><span class="ident" id="2911808">recv</span><span class="op" id="2911812">(</span><span class="builtintype" id="2911813">true</span><span class="op" id="2911817">)</span><br>
<span class="lineno"></span><span class="op" id="2911819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2911822">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2911889">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2911927">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2911986">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2912059">func</span>&nbsp;<span class="op" id="2912064">(</span><span class="ident" id="2912065">v</span>&nbsp;<span class="ident" id="2912067">Value</span><span class="op" id="2912072">)</span>&nbsp;<span class="ident" id="2912074">TrySend</span><span class="op" id="2912081">(</span><span class="ident" id="2912082">x</span>&nbsp;<span class="ident" id="2912084">Value</span><span class="op" id="2912089">)</span>&nbsp;<span class="builtintype" id="2912091">bool</span>&nbsp;<span class="op" id="2912096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912099">v</span><span class="op" id="2912100">.</span><span class="ident" id="2912101">mustBe</span><span class="op" id="2912107">(</span><span class="ident" id="2912108">Chan</span><span class="op" id="2912112">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912115">v</span><span class="op" id="2912116">.</span><span class="ident" id="2912117">mustBeExported</span><span class="op" id="2912131">(</span><span class="op" id="2912132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912135">return</span>&nbsp;<span class="ident" id="2912142">v</span><span class="op" id="2912143">.</span><span class="ident" id="2912144">send</span><span class="op" id="2912148">(</span><span class="ident" id="2912149">x</span><span class="op" id="2912150">,</span>&nbsp;<span class="builtintype" id="2912152">true</span><span class="op" id="2912156">)</span><br>
<span class="lineno"></span><span class="op" id="2912158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2912161">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2912187">func</span>&nbsp;<span class="op" id="2912192">(</span><span class="ident" id="2912193">v</span>&nbsp;<span class="ident" id="2912195">Value</span><span class="op" id="2912200">)</span>&nbsp;<span class="ident" id="2912202">Type</span><span class="op" id="2912206">(</span><span class="op" id="2912207">)</span>&nbsp;<span class="ident" id="2912209">Type</span>&nbsp;<span class="op" id="2912214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912217">f</span>&nbsp;<span class="op" id="2912219">:=</span>&nbsp;<span class="ident" id="2912222">v</span><span class="op" id="2912223">.</span><span class="ident" id="2912224">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912230">if</span>&nbsp;<span class="ident" id="2912233">f</span>&nbsp;<span class="op" id="2912235">==</span>&nbsp;<span class="num" id="2912238">0</span>&nbsp;<span class="op" id="2912240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2912244">panic</span><span class="op" id="2912249">(</span><span class="op" id="2912250">&amp;</span><span class="ident" id="2912251">ValueError</span><span class="op" id="2912261">{</span><span class="string" id="2912262">&#34;reflect.Value.Type&#34;</span><span class="op" id="2912282">,</span>&nbsp;<span class="ident" id="2912284">Invalid</span><span class="op" id="2912291">}</span><span class="op" id="2912292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912295">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912298">if</span>&nbsp;<span class="ident" id="2912301">f</span><span class="op" id="2912302">&amp;</span><span class="ident" id="2912303">flagMethod</span>&nbsp;<span class="op" id="2912314">==</span>&nbsp;<span class="num" id="2912317">0</span>&nbsp;<span class="op" id="2912319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912323">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912338">return</span>&nbsp;<span class="ident" id="2912345">v</span><span class="op" id="2912346">.</span><span class="ident" id="2912347">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912356">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912374">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912429">i</span>&nbsp;<span class="op" id="2912431">:=</span>&nbsp;<span class="builtintype" id="2912434">int</span><span class="op" id="2912437">(</span><span class="ident" id="2912438">v</span><span class="op" id="2912439">.</span><span class="ident" id="2912440">flag</span><span class="op" id="2912444">)</span>&nbsp;<span class="op" id="2912446">&gt;&gt;</span>&nbsp;<span class="ident" id="2912449">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912466">if</span>&nbsp;<span class="ident" id="2912469">v</span><span class="op" id="2912470">.</span><span class="ident" id="2912471">typ</span><span class="op" id="2912474">.</span><span class="ident" id="2912475">Kind</span><span class="op" id="2912479">(</span><span class="op" id="2912480">)</span>&nbsp;<span class="op" id="2912482">==</span>&nbsp;<span class="ident" id="2912485">Interface</span>&nbsp;<span class="op" id="2912495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912499">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912525">tt</span>&nbsp;<span class="op" id="2912528">:=</span>&nbsp;<span class="op" id="2912531">(</span><span class="op" id="2912532">*</span><span class="ident" id="2912533">interfaceType</span><span class="op" id="2912546">)</span><span class="op" id="2912547">(</span><span class="ident" id="2912548">unsafe</span><span class="op" id="2912554">.</span><span class="ident" id="2912555">Pointer</span><span class="op" id="2912562">(</span><span class="ident" id="2912563">v</span><span class="op" id="2912564">.</span><span class="ident" id="2912565">typ</span><span class="op" id="2912568">)</span><span class="op" id="2912569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912573">if</span>&nbsp;<span class="builtintype" id="2912576">uint</span><span class="op" id="2912580">(</span><span class="ident" id="2912581">i</span><span class="op" id="2912582">)</span>&nbsp;<span class="op" id="2912584">&gt;=</span>&nbsp;<span class="builtintype" id="2912587">uint</span><span class="op" id="2912591">(</span><span class="builtinfunc" id="2912592">len</span><span class="op" id="2912595">(</span><span class="ident" id="2912596">tt</span><span class="op" id="2912598">.</span><span class="ident" id="2912599">methods</span><span class="op" id="2912606">)</span><span class="op" id="2912607">)</span>&nbsp;<span class="op" id="2912609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2912614">panic</span><span class="op" id="2912619">(</span><span class="string" id="2912620">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2912667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912675">m</span>&nbsp;<span class="op" id="2912677">:=</span>&nbsp;<span class="op" id="2912680">&amp;</span><span class="ident" id="2912681">tt</span><span class="op" id="2912683">.</span><span class="ident" id="2912684">methods</span><span class="op" id="2912691">[</span><span class="ident" id="2912692">i</span><span class="op" id="2912693">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912697">return</span>&nbsp;<span class="ident" id="2912704">m</span><span class="op" id="2912705">.</span><span class="ident" id="2912706">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912714">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912743">ut</span>&nbsp;<span class="op" id="2912746">:=</span>&nbsp;<span class="ident" id="2912749">v</span><span class="op" id="2912750">.</span><span class="ident" id="2912751">typ</span><span class="op" id="2912754">.</span><span class="ident" id="2912755">uncommon</span><span class="op" id="2912763">(</span><span class="op" id="2912764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912767">if</span>&nbsp;<span class="ident" id="2912770">ut</span>&nbsp;<span class="op" id="2912773">==</span>&nbsp;<span class="ident" id="2912776">nil</span>&nbsp;<span class="op" id="2912780">||</span>&nbsp;<span class="builtintype" id="2912783">uint</span><span class="op" id="2912787">(</span><span class="ident" id="2912788">i</span><span class="op" id="2912789">)</span>&nbsp;<span class="op" id="2912791">&gt;=</span>&nbsp;<span class="builtintype" id="2912794">uint</span><span class="op" id="2912798">(</span><span class="builtinfunc" id="2912799">len</span><span class="op" id="2912802">(</span><span class="ident" id="2912803">ut</span><span class="op" id="2912805">.</span><span class="ident" id="2912806">methods</span><span class="op" id="2912813">)</span><span class="op" id="2912814">)</span>&nbsp;<span class="op" id="2912816">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2912820">panic</span><span class="op" id="2912825">(</span><span class="string" id="2912826">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2912873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912879">m</span>&nbsp;<span class="op" id="2912881">:=</span>&nbsp;<span class="op" id="2912884">&amp;</span><span class="ident" id="2912885">ut</span><span class="op" id="2912887">.</span><span class="ident" id="2912888">methods</span><span class="op" id="2912895">[</span><span class="ident" id="2912896">i</span><span class="op" id="2912897">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912900">return</span>&nbsp;<span class="ident" id="2912907">m</span><span class="op" id="2912908">.</span><span class="ident" id="2912909">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2912914">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2912917">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2912968">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2913049">func</span>&nbsp;<span class="op" id="2913054">(</span><span class="ident" id="2913055">v</span>&nbsp;<span class="ident" id="2913057">Value</span><span class="op" id="2913062">)</span>&nbsp;<span class="ident" id="2913064">Uint</span><span class="op" id="2913068">(</span><span class="op" id="2913069">)</span>&nbsp;<span class="ident" id="2913071">uint64</span>&nbsp;<span class="op" id="2913078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913081">k</span>&nbsp;<span class="op" id="2913083">:=</span>&nbsp;<span class="ident" id="2913086">v</span><span class="op" id="2913087">.</span><span class="ident" id="2913088">kind</span><span class="op" id="2913092">(</span><span class="op" id="2913093">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913096">p</span>&nbsp;<span class="op" id="2913098">:=</span>&nbsp;<span class="ident" id="2913101">v</span><span class="op" id="2913102">.</span><span class="ident" id="2913103">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913108">switch</span>&nbsp;<span class="ident" id="2913115">k</span>&nbsp;<span class="op" id="2913117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913120">case</span>&nbsp;<span class="ident" id="2913125">Uint</span><span class="op" id="2913129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913133">return</span>&nbsp;<span class="ident" id="2913140">uint64</span><span class="op" id="2913146">(</span><span class="op" id="2913147">*</span><span class="op" id="2913148">(</span><span class="op" id="2913149">*</span><span class="builtintype" id="2913150">uint</span><span class="op" id="2913154">)</span><span class="op" id="2913155">(</span><span class="ident" id="2913156">p</span><span class="op" id="2913157">)</span><span class="op" id="2913158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913161">case</span>&nbsp;<span class="ident" id="2913166">Uint8</span><span class="op" id="2913171">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913175">return</span>&nbsp;<span class="ident" id="2913182">uint64</span><span class="op" id="2913188">(</span><span class="op" id="2913189">*</span><span class="op" id="2913190">(</span><span class="op" id="2913191">*</span><span class="builtintype" id="2913192">uint8</span><span class="op" id="2913197">)</span><span class="op" id="2913198">(</span><span class="ident" id="2913199">p</span><span class="op" id="2913200">)</span><span class="op" id="2913201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913204">case</span>&nbsp;<span class="ident" id="2913209">Uint16</span><span class="op" id="2913215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913219">return</span>&nbsp;<span class="ident" id="2913226">uint64</span><span class="op" id="2913232">(</span><span class="op" id="2913233">*</span><span class="op" id="2913234">(</span><span class="op" id="2913235">*</span><span class="builtintype" id="2913236">uint16</span><span class="op" id="2913242">)</span><span class="op" id="2913243">(</span><span class="ident" id="2913244">p</span><span class="op" id="2913245">)</span><span class="op" id="2913246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913249">case</span>&nbsp;<span class="ident" id="2913254">Uint32</span><span class="op" id="2913260">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913264">return</span>&nbsp;<span class="ident" id="2913271">uint64</span><span class="op" id="2913277">(</span><span class="op" id="2913278">*</span><span class="op" id="2913279">(</span><span class="op" id="2913280">*</span><span class="builtintype" id="2913281">uint32</span><span class="op" id="2913287">)</span><span class="op" id="2913288">(</span><span class="ident" id="2913289">p</span><span class="op" id="2913290">)</span><span class="op" id="2913291">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913294">case</span>&nbsp;<span class="ident" id="2913299">Uint64</span><span class="op" id="2913305">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913309">return</span>&nbsp;<span class="ident" id="2913316">uint64</span><span class="op" id="2913322">(</span><span class="op" id="2913323">*</span><span class="op" id="2913324">(</span><span class="op" id="2913325">*</span><span class="ident" id="2913326">uint64</span><span class="op" id="2913332">)</span><span class="op" id="2913333">(</span><span class="ident" id="2913334">p</span><span class="op" id="2913335">)</span><span class="op" id="2913336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913339">case</span>&nbsp;<span class="ident" id="2913344">Uintptr</span><span class="op" id="2913351">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913355">return</span>&nbsp;<span class="ident" id="2913362">uint64</span><span class="op" id="2913368">(</span><span class="op" id="2913369">*</span><span class="op" id="2913370">(</span><span class="op" id="2913371">*</span><span class="builtintype" id="2913372">uintptr</span><span class="op" id="2913379">)</span><span class="op" id="2913380">(</span><span class="ident" id="2913381">p</span><span class="op" id="2913382">)</span><span class="op" id="2913383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913386">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913389">panic</span><span class="op" id="2913394">(</span><span class="op" id="2913395">&amp;</span><span class="ident" id="2913396">ValueError</span><span class="op" id="2913406">{</span><span class="string" id="2913407">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2913427">,</span>&nbsp;<span class="ident" id="2913429">v</span><span class="op" id="2913430">.</span><span class="ident" id="2913431">kind</span><span class="op" id="2913435">(</span><span class="op" id="2913436">)</span><span class="op" id="2913437">}</span><span class="op" id="2913438">)</span><br>
<span class="lineno"></span><span class="op" id="2913440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2913443">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2913488">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2913557">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2913595">func</span>&nbsp;<span class="op" id="2913600">(</span><span class="ident" id="2913601">v</span>&nbsp;<span class="ident" id="2913603">Value</span><span class="op" id="2913608">)</span>&nbsp;<span class="ident" id="2913610">UnsafeAddr</span><span class="op" id="2913620">(</span><span class="op" id="2913621">)</span>&nbsp;<span class="builtintype" id="2913623">uintptr</span>&nbsp;<span class="op" id="2913631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913634">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913654">if</span>&nbsp;<span class="ident" id="2913657">v</span><span class="op" id="2913658">.</span><span class="ident" id="2913659">typ</span>&nbsp;<span class="op" id="2913663">==</span>&nbsp;<span class="ident" id="2913666">nil</span>&nbsp;<span class="op" id="2913670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913674">panic</span><span class="op" id="2913679">(</span><span class="op" id="2913680">&amp;</span><span class="ident" id="2913681">ValueError</span><span class="op" id="2913691">{</span><span class="string" id="2913692">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2913718">,</span>&nbsp;<span class="ident" id="2913720">Invalid</span><span class="op" id="2913727">}</span><span class="op" id="2913728">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913734">if</span>&nbsp;<span class="ident" id="2913737">v</span><span class="op" id="2913738">.</span><span class="ident" id="2913739">flag</span><span class="op" id="2913743">&amp;</span><span class="ident" id="2913744">flagAddr</span>&nbsp;<span class="op" id="2913753">==</span>&nbsp;<span class="num" id="2913756">0</span>&nbsp;<span class="op" id="2913758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913762">panic</span><span class="op" id="2913767">(</span><span class="string" id="2913768">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2913817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913823">return</span>&nbsp;<span class="builtintype" id="2913830">uintptr</span><span class="op" id="2913837">(</span><span class="ident" id="2913838">v</span><span class="op" id="2913839">.</span><span class="ident" id="2913840">ptr</span><span class="op" id="2913843">)</span><br>
<span class="lineno">1695</span><span class="op" id="2913845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2913848">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2913907">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2913974">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2914004">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2914072">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2914142">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2914205">type</span>&nbsp;<span class="ident" id="2914210">StringHeader</span>&nbsp;<span class="keyword" id="2914223">struct</span>&nbsp;<span class="op" id="2914230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914233">Data</span>&nbsp;<span class="builtintype" id="2914238">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914247">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2914252">int</span><br>
<span class="lineno"></span><span class="op" id="2914256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2914259">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2914335">type</span>&nbsp;<span class="ident" id="2914340">stringHeader</span>&nbsp;<span class="keyword" id="2914353">struct</span>&nbsp;<span class="op" id="2914360">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914363">Data</span>&nbsp;<span class="ident" id="2914368">unsafe</span><span class="op" id="2914374">.</span><span class="ident" id="2914375">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914384">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2914389">int</span><br>
<span class="lineno"></span><span class="op" id="2914393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2914396">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2914453">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2914520">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2914550">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2914618">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2914688">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2914751">type</span>&nbsp;<span class="ident" id="2914756">SliceHeader</span>&nbsp;<span class="keyword" id="2914768">struct</span>&nbsp;<span class="op" id="2914775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914778">Data</span>&nbsp;<span class="builtintype" id="2914783">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914792">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2914797">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914802">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2914807">int</span><br>
<span class="lineno"></span><span class="op" id="2914811">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2914814">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2914888">type</span>&nbsp;<span class="ident" id="2914893">sliceHeader</span>&nbsp;<span class="keyword" id="2914905">struct</span>&nbsp;<span class="op" id="2914912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914915">Data</span>&nbsp;<span class="ident" id="2914920">unsafe</span><span class="op" id="2914926">.</span><span class="ident" id="2914927">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914936">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2914941">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914946">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2914951">int</span><br>
<span class="lineno"></span><span class="op" id="2914955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2914958">func</span>&nbsp;<span class="ident" id="2914963">typesMustMatch</span><span class="op" id="2914977">(</span><span class="ident" id="2914978">what</span>&nbsp;<span class="builtintype" id="2914983">string</span><span class="op" id="2914989">,</span>&nbsp;<span class="ident" id="2914991">t1</span><span class="op" id="2914993">,</span>&nbsp;<span class="ident" id="2914995">t2</span>&nbsp;<span class="ident" id="2914998">Type</span><span class="op" id="2915002">)</span>&nbsp;<span class="op" id="2915004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915007">if</span>&nbsp;<span class="ident" id="2915010">t1</span>&nbsp;<span class="op" id="2915013">!=</span>&nbsp;<span class="ident" id="2915016">t2</span>&nbsp;<span class="op" id="2915019">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2915023">panic</span><span class="op" id="2915028">(</span><span class="ident" id="2915029">what</span>&nbsp;<span class="op" id="2915034">+</span>&nbsp;<span class="string" id="2915036">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2915041">+</span>&nbsp;<span class="ident" id="2915043">t1</span><span class="op" id="2915045">.</span><span class="ident" id="2915046">String</span><span class="op" id="2915052">(</span><span class="op" id="2915053">)</span>&nbsp;<span class="op" id="2915055">+</span>&nbsp;<span class="string" id="2915057">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2915064">+</span>&nbsp;<span class="ident" id="2915066">t2</span><span class="op" id="2915068">.</span><span class="ident" id="2915069">String</span><span class="op" id="2915075">(</span><span class="op" id="2915076">)</span><span class="op" id="2915077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915080">}</span><br>
<span class="lineno"></span><span class="op" id="2915082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915085">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2915161">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2915236">func</span>&nbsp;<span class="ident" id="2915241">grow</span><span class="op" id="2915245">(</span><span class="ident" id="2915246">s</span>&nbsp;<span class="ident" id="2915248">Value</span><span class="op" id="2915253">,</span>&nbsp;<span class="ident" id="2915255">extra</span>&nbsp;<span class="builtintype" id="2915261">int</span><span class="op" id="2915264">)</span>&nbsp;<span class="op" id="2915266">(</span><span class="ident" id="2915267">Value</span><span class="op" id="2915272">,</span>&nbsp;<span class="builtintype" id="2915274">int</span><span class="op" id="2915277">,</span>&nbsp;<span class="builtintype" id="2915279">int</span><span class="op" id="2915282">)</span>&nbsp;<span class="op" id="2915284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915287">i0</span>&nbsp;<span class="op" id="2915290">:=</span>&nbsp;<span class="ident" id="2915293">s</span><span class="op" id="2915294">.</span><span class="ident" id="2915295">Len</span><span class="op" id="2915298">(</span><span class="op" id="2915299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915302">i1</span>&nbsp;<span class="op" id="2915305">:=</span>&nbsp;<span class="ident" id="2915308">i0</span>&nbsp;<span class="op" id="2915311">+</span>&nbsp;<span class="ident" id="2915313">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915320">if</span>&nbsp;<span class="ident" id="2915323">i1</span>&nbsp;<span class="op" id="2915326">&lt;</span>&nbsp;<span class="ident" id="2915328">i0</span>&nbsp;<span class="op" id="2915331">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2915335">panic</span><span class="op" id="2915340">(</span><span class="string" id="2915341">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2915373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915379">m</span>&nbsp;<span class="op" id="2915381">:=</span>&nbsp;<span class="ident" id="2915384">s</span><span class="op" id="2915385">.</span><span class="ident" id="2915386">Cap</span><span class="op" id="2915389">(</span><span class="op" id="2915390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915393">if</span>&nbsp;<span class="ident" id="2915396">i1</span>&nbsp;<span class="op" id="2915399">&lt;=</span>&nbsp;<span class="ident" id="2915402">m</span>&nbsp;<span class="op" id="2915404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915408">return</span>&nbsp;<span class="ident" id="2915415">s</span><span class="op" id="2915416">.</span><span class="ident" id="2915417">Slice</span><span class="op" id="2915422">(</span><span class="num" id="2915423">0</span><span class="op" id="2915424">,</span>&nbsp;<span class="ident" id="2915426">i1</span><span class="op" id="2915428">)</span><span class="op" id="2915429">,</span>&nbsp;<span class="ident" id="2915431">i0</span><span class="op" id="2915433">,</span>&nbsp;<span class="ident" id="2915435">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915442">if</span>&nbsp;<span class="ident" id="2915445">m</span>&nbsp;<span class="op" id="2915447">==</span>&nbsp;<span class="num" id="2915450">0</span>&nbsp;<span class="op" id="2915452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915456">m</span>&nbsp;<span class="op" id="2915458">=</span>&nbsp;<span class="ident" id="2915460">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915467">}</span>&nbsp;<span class="keyword" id="2915469">else</span>&nbsp;<span class="op" id="2915474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915478">for</span>&nbsp;<span class="ident" id="2915482">m</span>&nbsp;<span class="op" id="2915484">&lt;</span>&nbsp;<span class="ident" id="2915486">i1</span>&nbsp;<span class="op" id="2915489">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915494">if</span>&nbsp;<span class="ident" id="2915497">i0</span>&nbsp;<span class="op" id="2915500">&lt;</span>&nbsp;<span class="num" id="2915502">1024</span>&nbsp;<span class="op" id="2915507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915513">m</span>&nbsp;<span class="op" id="2915515">+=</span>&nbsp;<span class="ident" id="2915518">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915523">}</span>&nbsp;<span class="keyword" id="2915525">else</span>&nbsp;<span class="op" id="2915530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915536">m</span>&nbsp;<span class="op" id="2915538">+=</span>&nbsp;<span class="ident" id="2915541">m</span>&nbsp;<span class="op" id="2915543">/</span>&nbsp;<span class="num" id="2915545">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915550">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915560">t</span>&nbsp;<span class="op" id="2915562">:=</span>&nbsp;<span class="ident" id="2915565">MakeSlice</span><span class="op" id="2915574">(</span><span class="ident" id="2915575">s</span><span class="op" id="2915576">.</span><span class="ident" id="2915577">Type</span><span class="op" id="2915581">(</span><span class="op" id="2915582">)</span><span class="op" id="2915583">,</span>&nbsp;<span class="ident" id="2915585">i1</span><span class="op" id="2915587">,</span>&nbsp;<span class="ident" id="2915589">m</span><span class="op" id="2915590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915593">Copy</span><span class="op" id="2915597">(</span><span class="ident" id="2915598">t</span><span class="op" id="2915599">,</span>&nbsp;<span class="ident" id="2915601">s</span><span class="op" id="2915602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915605">return</span>&nbsp;<span class="ident" id="2915612">t</span><span class="op" id="2915613">,</span>&nbsp;<span class="ident" id="2915615">i0</span><span class="op" id="2915617">,</span>&nbsp;<span class="ident" id="2915619">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2915622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915625">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2915702">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2915778">func</span>&nbsp;<span class="ident" id="2915783">Append</span><span class="op" id="2915789">(</span><span class="ident" id="2915790">s</span>&nbsp;<span class="ident" id="2915792">Value</span><span class="op" id="2915797">,</span>&nbsp;<span class="ident" id="2915799">x</span>&nbsp;<span class="op" id="2915801">...</span><span class="ident" id="2915804">Value</span><span class="op" id="2915809">)</span>&nbsp;<span class="ident" id="2915811">Value</span>&nbsp;<span class="op" id="2915817">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915820">s</span><span class="op" id="2915821">.</span><span class="ident" id="2915822">mustBe</span><span class="op" id="2915828">(</span><span class="ident" id="2915829">Slice</span><span class="op" id="2915834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915837">s</span><span class="op" id="2915838">,</span>&nbsp;<span class="ident" id="2915840">i0</span><span class="op" id="2915842">,</span>&nbsp;<span class="ident" id="2915844">i1</span>&nbsp;<span class="op" id="2915847">:=</span>&nbsp;<span class="ident" id="2915850">grow</span><span class="op" id="2915854">(</span><span class="ident" id="2915855">s</span><span class="op" id="2915856">,</span>&nbsp;<span class="builtinfunc" id="2915858">len</span><span class="op" id="2915861">(</span><span class="ident" id="2915862">x</span><span class="op" id="2915863">)</span><span class="op" id="2915864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915867">for</span>&nbsp;<span class="ident" id="2915871">i</span><span class="op" id="2915872">,</span>&nbsp;<span class="ident" id="2915874">j</span>&nbsp;<span class="op" id="2915876">:=</span>&nbsp;<span class="ident" id="2915879">i0</span><span class="op" id="2915881">,</span>&nbsp;<span class="num" id="2915883">0</span><span class="op" id="2915884">;</span>&nbsp;<span class="ident" id="2915886">i</span>&nbsp;<span class="op" id="2915888">&lt;</span>&nbsp;<span class="ident" id="2915890">i1</span><span class="op" id="2915892">;</span>&nbsp;<span class="ident" id="2915894">i</span><span class="op" id="2915895">,</span>&nbsp;<span class="ident" id="2915897">j</span>&nbsp;<span class="op" id="2915899">=</span>&nbsp;<span class="ident" id="2915901">i</span><span class="op" id="2915902">+</span><span class="num" id="2915903">1</span><span class="op" id="2915904">,</span>&nbsp;<span class="ident" id="2915906">j</span><span class="op" id="2915907">+</span><span class="num" id="2915908">1</span>&nbsp;<span class="op" id="2915910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915914">s</span><span class="op" id="2915915">.</span><span class="ident" id="2915916">Index</span><span class="op" id="2915921">(</span><span class="ident" id="2915922">i</span><span class="op" id="2915923">)</span><span class="op" id="2915924">.</span><span class="ident" id="2915925">Set</span><span class="op" id="2915928">(</span><span class="ident" id="2915929">x</span><span class="op" id="2915930">[</span><span class="ident" id="2915931">j</span><span class="op" id="2915932">]</span><span class="op" id="2915933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915936">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915939">return</span>&nbsp;<span class="ident" id="2915946">s</span><br>
<span class="lineno"></span><span class="op" id="2915948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915951">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2916030">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2916085">func</span>&nbsp;<span class="ident" id="2916090">AppendSlice</span><span class="op" id="2916101">(</span><span class="ident" id="2916102">s</span><span class="op" id="2916103">,</span>&nbsp;<span class="ident" id="2916105">t</span>&nbsp;<span class="ident" id="2916107">Value</span><span class="op" id="2916112">)</span>&nbsp;<span class="ident" id="2916114">Value</span>&nbsp;<span class="op" id="2916120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916123">s</span><span class="op" id="2916124">.</span><span class="ident" id="2916125">mustBe</span><span class="op" id="2916131">(</span><span class="ident" id="2916132">Slice</span><span class="op" id="2916137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916140">t</span><span class="op" id="2916141">.</span><span class="ident" id="2916142">mustBe</span><span class="op" id="2916148">(</span><span class="ident" id="2916149">Slice</span><span class="op" id="2916154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916157">typesMustMatch</span><span class="op" id="2916171">(</span><span class="string" id="2916172">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2916193">,</span>&nbsp;<span class="ident" id="2916195">s</span><span class="op" id="2916196">.</span><span class="ident" id="2916197">Type</span><span class="op" id="2916201">(</span><span class="op" id="2916202">)</span><span class="op" id="2916203">.</span><span class="ident" id="2916204">Elem</span><span class="op" id="2916208">(</span><span class="op" id="2916209">)</span><span class="op" id="2916210">,</span>&nbsp;<span class="ident" id="2916212">t</span><span class="op" id="2916213">.</span><span class="ident" id="2916214">Type</span><span class="op" id="2916218">(</span><span class="op" id="2916219">)</span><span class="op" id="2916220">.</span><span class="ident" id="2916221">Elem</span><span class="op" id="2916225">(</span><span class="op" id="2916226">)</span><span class="op" id="2916227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916230">s</span><span class="op" id="2916231">,</span>&nbsp;<span class="ident" id="2916233">i0</span><span class="op" id="2916235">,</span>&nbsp;<span class="ident" id="2916237">i1</span>&nbsp;<span class="op" id="2916240">:=</span>&nbsp;<span class="ident" id="2916243">grow</span><span class="op" id="2916247">(</span><span class="ident" id="2916248">s</span><span class="op" id="2916249">,</span>&nbsp;<span class="ident" id="2916251">t</span><span class="op" id="2916252">.</span><span class="ident" id="2916253">Len</span><span class="op" id="2916256">(</span><span class="op" id="2916257">)</span><span class="op" id="2916258">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916261">Copy</span><span class="op" id="2916265">(</span><span class="ident" id="2916266">s</span><span class="op" id="2916267">.</span><span class="ident" id="2916268">Slice</span><span class="op" id="2916273">(</span><span class="ident" id="2916274">i0</span><span class="op" id="2916276">,</span>&nbsp;<span class="ident" id="2916278">i1</span><span class="op" id="2916280">)</span><span class="op" id="2916281">,</span>&nbsp;<span class="ident" id="2916283">t</span><span class="op" id="2916284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916287">return</span>&nbsp;<span class="ident" id="2916294">s</span><br>
<span class="lineno"></span><span class="op" id="2916296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2916299">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2916356">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2916406">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2916451">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2916506">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2916554">func</span>&nbsp;<span class="ident" id="2916559">Copy</span><span class="op" id="2916563">(</span><span class="ident" id="2916564">dst</span><span class="op" id="2916567">,</span>&nbsp;<span class="ident" id="2916569">src</span>&nbsp;<span class="ident" id="2916573">Value</span><span class="op" id="2916578">)</span>&nbsp;<span class="builtintype" id="2916580">int</span>&nbsp;<span class="op" id="2916584">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916587">dk</span>&nbsp;<span class="op" id="2916590">:=</span>&nbsp;<span class="ident" id="2916593">dst</span><span class="op" id="2916596">.</span><span class="ident" id="2916597">kind</span><span class="op" id="2916601">(</span><span class="op" id="2916602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916605">if</span>&nbsp;<span class="ident" id="2916608">dk</span>&nbsp;<span class="op" id="2916611">!=</span>&nbsp;<span class="ident" id="2916614">Array</span>&nbsp;<span class="op" id="2916620">&amp;&amp;</span>&nbsp;<span class="ident" id="2916623">dk</span>&nbsp;<span class="op" id="2916626">!=</span>&nbsp;<span class="ident" id="2916629">Slice</span>&nbsp;<span class="op" id="2916635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2916639">panic</span><span class="op" id="2916644">(</span><span class="op" id="2916645">&amp;</span><span class="ident" id="2916646">ValueError</span><span class="op" id="2916656">{</span><span class="string" id="2916657">&#34;reflect.Copy&#34;</span><span class="op" id="2916671">,</span>&nbsp;<span class="ident" id="2916673">dk</span><span class="op" id="2916675">}</span><span class="op" id="2916676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916682">if</span>&nbsp;<span class="ident" id="2916685">dk</span>&nbsp;<span class="op" id="2916688">==</span>&nbsp;<span class="ident" id="2916691">Array</span>&nbsp;<span class="op" id="2916697">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916701">dst</span><span class="op" id="2916704">.</span><span class="ident" id="2916705">mustBeAssignable</span><span class="op" id="2916721">(</span><span class="op" id="2916722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916728">dst</span><span class="op" id="2916731">.</span><span class="ident" id="2916732">mustBeExported</span><span class="op" id="2916746">(</span><span class="op" id="2916747">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916751">sk</span>&nbsp;<span class="op" id="2916754">:=</span>&nbsp;<span class="ident" id="2916757">src</span><span class="op" id="2916760">.</span><span class="ident" id="2916761">kind</span><span class="op" id="2916765">(</span><span class="op" id="2916766">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916769">if</span>&nbsp;<span class="ident" id="2916772">sk</span>&nbsp;<span class="op" id="2916775">!=</span>&nbsp;<span class="ident" id="2916778">Array</span>&nbsp;<span class="op" id="2916784">&amp;&amp;</span>&nbsp;<span class="ident" id="2916787">sk</span>&nbsp;<span class="op" id="2916790">!=</span>&nbsp;<span class="ident" id="2916793">Slice</span>&nbsp;<span class="op" id="2916799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2916803">panic</span><span class="op" id="2916808">(</span><span class="op" id="2916809">&amp;</span><span class="ident" id="2916810">ValueError</span><span class="op" id="2916820">{</span><span class="string" id="2916821">&#34;reflect.Copy&#34;</span><span class="op" id="2916835">,</span>&nbsp;<span class="ident" id="2916837">sk</span><span class="op" id="2916839">}</span><span class="op" id="2916840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916846">src</span><span class="op" id="2916849">.</span><span class="ident" id="2916850">mustBeExported</span><span class="op" id="2916864">(</span><span class="op" id="2916865">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916869">de</span>&nbsp;<span class="op" id="2916872">:=</span>&nbsp;<span class="ident" id="2916875">dst</span><span class="op" id="2916878">.</span><span class="ident" id="2916879">typ</span><span class="op" id="2916882">.</span><span class="ident" id="2916883">Elem</span><span class="op" id="2916887">(</span><span class="op" id="2916888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916891">se</span>&nbsp;<span class="op" id="2916894">:=</span>&nbsp;<span class="ident" id="2916897">src</span><span class="op" id="2916900">.</span><span class="ident" id="2916901">typ</span><span class="op" id="2916904">.</span><span class="ident" id="2916905">Elem</span><span class="op" id="2916909">(</span><span class="op" id="2916910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916913">typesMustMatch</span><span class="op" id="2916927">(</span><span class="string" id="2916928">&#34;reflect.Copy&#34;</span><span class="op" id="2916942">,</span>&nbsp;<span class="ident" id="2916944">de</span><span class="op" id="2916946">,</span>&nbsp;<span class="ident" id="2916948">se</span><span class="op" id="2916950">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916954">n</span>&nbsp;<span class="op" id="2916956">:=</span>&nbsp;<span class="ident" id="2916959">dst</span><span class="op" id="2916962">.</span><span class="ident" id="2916963">Len</span><span class="op" id="2916966">(</span><span class="op" id="2916967">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916970">if</span>&nbsp;<span class="ident" id="2916973">sn</span>&nbsp;<span class="op" id="2916976">:=</span>&nbsp;<span class="ident" id="2916979">src</span><span class="op" id="2916982">.</span><span class="ident" id="2916983">Len</span><span class="op" id="2916986">(</span><span class="op" id="2916987">)</span><span class="op" id="2916988">;</span>&nbsp;<span class="ident" id="2916990">n</span>&nbsp;<span class="op" id="2916992">&gt;</span>&nbsp;<span class="ident" id="2916994">sn</span>&nbsp;<span class="op" id="2916997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917001">n</span>&nbsp;<span class="op" id="2917003">=</span>&nbsp;<span class="ident" id="2917005">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2917013">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917035">var</span>&nbsp;<span class="ident" id="2917039">da</span><span class="op" id="2917041">,</span>&nbsp;<span class="ident" id="2917043">sa</span>&nbsp;<span class="ident" id="2917046">unsafe</span><span class="op" id="2917052">.</span><span class="ident" id="2917053">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917062">if</span>&nbsp;<span class="ident" id="2917065">dk</span>&nbsp;<span class="op" id="2917068">==</span>&nbsp;<span class="ident" id="2917071">Array</span>&nbsp;<span class="op" id="2917077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917081">da</span>&nbsp;<span class="op" id="2917084">=</span>&nbsp;<span class="ident" id="2917086">dst</span><span class="op" id="2917089">.</span><span class="ident" id="2917090">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917095">}</span>&nbsp;<span class="keyword" id="2917097">else</span>&nbsp;<span class="op" id="2917102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917106">da</span>&nbsp;<span class="op" id="2917109">=</span>&nbsp;<span class="op" id="2917111">(</span><span class="op" id="2917112">*</span><span class="ident" id="2917113">sliceHeader</span><span class="op" id="2917124">)</span><span class="op" id="2917125">(</span><span class="ident" id="2917126">dst</span><span class="op" id="2917129">.</span><span class="ident" id="2917130">ptr</span><span class="op" id="2917133">)</span><span class="op" id="2917134">.</span><span class="ident" id="2917135">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917144">if</span>&nbsp;<span class="ident" id="2917147">src</span><span class="op" id="2917150">.</span><span class="ident" id="2917151">flag</span><span class="op" id="2917155">&amp;</span><span class="ident" id="2917156">flagIndir</span>&nbsp;<span class="op" id="2917166">==</span>&nbsp;<span class="num" id="2917169">0</span>&nbsp;<span class="op" id="2917171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917175">sa</span>&nbsp;<span class="op" id="2917178">=</span>&nbsp;<span class="ident" id="2917180">unsafe</span><span class="op" id="2917186">.</span><span class="ident" id="2917187">Pointer</span><span class="op" id="2917194">(</span><span class="op" id="2917195">&amp;</span><span class="ident" id="2917196">src</span><span class="op" id="2917199">.</span><span class="ident" id="2917200">ptr</span><span class="op" id="2917203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917206">}</span>&nbsp;<span class="keyword" id="2917208">else</span>&nbsp;<span class="keyword" id="2917213">if</span>&nbsp;<span class="ident" id="2917216">sk</span>&nbsp;<span class="op" id="2917219">==</span>&nbsp;<span class="ident" id="2917222">Array</span>&nbsp;<span class="op" id="2917228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917232">sa</span>&nbsp;<span class="op" id="2917235">=</span>&nbsp;<span class="ident" id="2917237">src</span><span class="op" id="2917240">.</span><span class="ident" id="2917241">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917246">}</span>&nbsp;<span class="keyword" id="2917248">else</span>&nbsp;<span class="op" id="2917253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917257">sa</span>&nbsp;<span class="op" id="2917260">=</span>&nbsp;<span class="op" id="2917262">(</span><span class="op" id="2917263">*</span><span class="ident" id="2917264">sliceHeader</span><span class="op" id="2917275">)</span><span class="op" id="2917276">(</span><span class="ident" id="2917277">src</span><span class="op" id="2917280">.</span><span class="ident" id="2917281">ptr</span><span class="op" id="2917284">)</span><span class="op" id="2917285">.</span><span class="ident" id="2917286">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917295">memmove</span><span class="op" id="2917302">(</span><span class="ident" id="2917303">da</span><span class="op" id="2917305">,</span>&nbsp;<span class="ident" id="2917307">sa</span><span class="op" id="2917309">,</span>&nbsp;<span class="builtintype" id="2917311">uintptr</span><span class="op" id="2917318">(</span><span class="ident" id="2917319">n</span><span class="op" id="2917320">)</span><span class="op" id="2917321">*</span><span class="ident" id="2917322">de</span><span class="op" id="2917324">.</span><span class="ident" id="2917325">Size</span><span class="op" id="2917329">(</span><span class="op" id="2917330">)</span><span class="op" id="2917331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917334">return</span>&nbsp;<span class="ident" id="2917341">n</span><br>
<span class="lineno">1835</span><span class="op" id="2917343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917346">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2917401">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2917456">type</span>&nbsp;<span class="ident" id="2917461">runtimeSelect</span>&nbsp;<span class="keyword" id="2917475">struct</span>&nbsp;<span class="op" id="2917482">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917485">dir</span>&nbsp;<span class="builtintype" id="2917489">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2917504">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917531">typ</span>&nbsp;<span class="op" id="2917535">*</span><span class="ident" id="2917536">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2917550">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917567">ch</span>&nbsp;&nbsp;<span class="ident" id="2917571">unsafe</span><span class="op" id="2917577">.</span><span class="ident" id="2917578">Pointer</span>&nbsp;<span class="comment" id="2917586">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917598">val</span>&nbsp;<span class="ident" id="2917602">unsafe</span><span class="op" id="2917608">.</span><span class="ident" id="2917609">Pointer</span>&nbsp;<span class="comment" id="2917617">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2917677">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2917680">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2917748">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2917820">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2917890">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2917910">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2917924">func</span>&nbsp;<span class="ident" id="2917929">rselect</span><span class="op" id="2917936">(</span><span class="op" id="2917937">[</span><span class="op" id="2917938">]</span><span class="ident" id="2917939">runtimeSelect</span><span class="op" id="2917952">)</span>&nbsp;<span class="op" id="2917954">(</span><span class="ident" id="2917955">chosen</span>&nbsp;<span class="builtintype" id="2917962">int</span><span class="op" id="2917965">,</span>&nbsp;<span class="ident" id="2917967">recvOK</span>&nbsp;<span class="builtintype" id="2917974">bool</span><span class="op" id="2917978">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917981">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2918052">type</span>&nbsp;<span class="ident" id="2918057">SelectDir</span>&nbsp;<span class="builtintype" id="2918067">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2918072">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2918139">const</span>&nbsp;<span class="op" id="2918145">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918148">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918162">SelectDir</span>&nbsp;<span class="op" id="2918172">=</span>&nbsp;<span class="ident" id="2918174">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918180">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2918204">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918226">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2918250">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918267">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2918291">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2918302">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2918305">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2918368">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2918433">//</span><br>
<span class="lineno"></span><span class="comment" id="2918436">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2918500">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2918538">//</span><br>
<span class="lineno"></span><span class="comment" id="2918541">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2918604">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2918695">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2918784">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2918876">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2918892">//</span><br>
<span class="lineno"></span><span class="comment" id="2918895">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2918961">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2919046">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2919137">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2919220">//</span><br>
<span class="lineno"></span><span class="keyword" id="2919223">type</span>&nbsp;<span class="ident" id="2919228">SelectCase</span>&nbsp;<span class="keyword" id="2919239">struct</span>&nbsp;<span class="op" id="2919246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919249">Dir</span>&nbsp;&nbsp;<span class="ident" id="2919254">SelectDir</span>&nbsp;<span class="comment" id="2919264">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919286">Chan</span>&nbsp;<span class="ident" id="2919291">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2919301">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919342">Send</span>&nbsp;<span class="ident" id="2919347">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2919357">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2919385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2919388">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2919458">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2919533">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2919587">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2919659">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2919730">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2919807">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2919879">func</span>&nbsp;<span class="ident" id="2919884">Select</span><span class="op" id="2919890">(</span><span class="ident" id="2919891">cases</span>&nbsp;<span class="op" id="2919897">[</span><span class="op" id="2919898">]</span><span class="ident" id="2919899">SelectCase</span><span class="op" id="2919909">)</span>&nbsp;<span class="op" id="2919911">(</span><span class="ident" id="2919912">chosen</span>&nbsp;<span class="builtintype" id="2919919">int</span><span class="op" id="2919922">,</span>&nbsp;<span class="ident" id="2919924">recv</span>&nbsp;<span class="ident" id="2919929">Value</span><span class="op" id="2919934">,</span>&nbsp;<span class="ident" id="2919936">recvOK</span>&nbsp;<span class="builtintype" id="2919943">bool</span><span class="op" id="2919947">)</span>&nbsp;<span class="op" id="2919949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2919952">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2920026">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2920101">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920159">runcases</span>&nbsp;<span class="op" id="2920168">:=</span>&nbsp;<span class="builtinfunc" id="2920171">make</span><span class="op" id="2920175">(</span><span class="op" id="2920176">[</span><span class="op" id="2920177">]</span><span class="ident" id="2920178">runtimeSelect</span><span class="op" id="2920191">,</span>&nbsp;<span class="builtinfunc" id="2920193">len</span><span class="op" id="2920196">(</span><span class="ident" id="2920197">cases</span><span class="op" id="2920202">)</span><span class="op" id="2920203">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920206">haveDefault</span>&nbsp;<span class="op" id="2920218">:=</span>&nbsp;<span class="builtintype" id="2920221">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920228">for</span>&nbsp;<span class="ident" id="2920232">i</span><span class="op" id="2920233">,</span>&nbsp;<span class="ident" id="2920235">c</span>&nbsp;<span class="op" id="2920237">:=</span>&nbsp;<span class="keyword" id="2920240">range</span>&nbsp;<span class="ident" id="2920246">cases</span>&nbsp;<span class="op" id="2920252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920256">rc</span>&nbsp;<span class="op" id="2920259">:=</span>&nbsp;<span class="op" id="2920262">&amp;</span><span class="ident" id="2920263">runcases</span><span class="op" id="2920271">[</span><span class="ident" id="2920272">i</span><span class="op" id="2920273">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920277">rc</span><span class="op" id="2920279">.</span><span class="ident" id="2920280">dir</span>&nbsp;<span class="op" id="2920284">=</span>&nbsp;<span class="builtintype" id="2920286">uintptr</span><span class="op" id="2920293">(</span><span class="ident" id="2920294">c</span><span class="op" id="2920295">.</span><span class="ident" id="2920296">Dir</span><span class="op" id="2920299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920303">switch</span>&nbsp;<span class="ident" id="2920310">c</span><span class="op" id="2920311">.</span><span class="ident" id="2920312">Dir</span>&nbsp;<span class="op" id="2920316">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920320">default</span><span class="op" id="2920327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2920332">panic</span><span class="op" id="2920337">(</span><span class="string" id="2920338">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2920367">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920372">case</span>&nbsp;<span class="ident" id="2920377">SelectDefault</span><span class="op" id="2920390">:</span>&nbsp;<span class="comment" id="2920392">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920406">if</span>&nbsp;<span class="ident" id="2920409">haveDefault</span>&nbsp;<span class="op" id="2920421">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2920427">panic</span><span class="op" id="2920432">(</span><span class="string" id="2920433">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2920473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920483">haveDefault</span>&nbsp;<span class="op" id="2920495">=</span>&nbsp;<span class="builtintype" id="2920497">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920505">if</span>&nbsp;<span class="ident" id="2920508">c</span><span class="op" id="2920509">.</span><span class="ident" id="2920510">Chan</span><span class="op" id="2920514">.</span><span class="ident" id="2920515">IsValid</span><span class="op" id="2920522">(</span><span class="op" id="2920523">)</span>&nbsp;<span class="op" id="2920525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2920531">panic</span><span class="op" id="2920536">(</span><span class="string" id="2920537">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2920582">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920592">if</span>&nbsp;<span class="ident" id="2920595">c</span><span class="op" id="2920596">.</span><span class="ident" id="2920597">Send</span><span class="op" id="2920601">.</span><span class="ident" id="2920602">IsValid</span><span class="op" id="2920609">(</span><span class="op" id="2920610">)</span>&nbsp;<span class="op" id="2920612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2920618">panic</span><span class="op" id="2920623">(</span><span class="string" id="2920624">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2920669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920679">case</span>&nbsp;<span class="ident" id="2920684">SelectSend</span><span class="op" id="2920694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920699">ch</span>&nbsp;<span class="op" id="2920702">:=</span>&nbsp;<span class="ident" id="2920705">c</span><span class="op" id="2920706">.</span><span class="ident" id="2920707">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920715">if</span>&nbsp;<span class="op" id="2920718">!</span><span class="ident" id="2920719">ch</span><span class="op" id="2920721">.</span><span class="ident" id="2920722">IsValid</span><span class="op" id="2920729">(</span><span class="op" id="2920730">)</span>&nbsp;<span class="op" id="2920732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920738">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920747">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920752">ch</span><span class="op" id="2920754">.</span><span class="ident" id="2920755">mustBe</span><span class="op" id="2920761">(</span><span class="ident" id="2920762">Chan</span><span class="op" id="2920766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920771">ch</span><span class="op" id="2920773">.</span><span class="ident" id="2920774">mustBeExported</span><span class="op" id="2920788">(</span><span class="op" id="2920789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920794">tt</span>&nbsp;<span class="op" id="2920797">:=</span>&nbsp;<span class="op" id="2920800">(</span><span class="op" id="2920801">*</span><span class="ident" id="2920802">chanType</span><span class="op" id="2920810">)</span><span class="op" id="2920811">(</span><span class="ident" id="2920812">unsafe</span><span class="op" id="2920818">.</span><span class="ident" id="2920819">Pointer</span><span class="op" id="2920826">(</span><span class="ident" id="2920827">ch</span><span class="op" id="2920829">.</span><span class="ident" id="2920830">typ</span><span class="op" id="2920833">)</span><span class="op" id="2920834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920839">if</span>&nbsp;<span class="ident" id="2920842">ChanDir</span><span class="op" id="2920849">(</span><span class="ident" id="2920850">tt</span><span class="op" id="2920852">.</span><span class="ident" id="2920853">dir</span><span class="op" id="2920856">)</span><span class="op" id="2920857">&amp;</span><span class="ident" id="2920858">SendDir</span>&nbsp;<span class="op" id="2920866">==</span>&nbsp;<span class="num" id="2920869">0</span>&nbsp;<span class="op" id="2920871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2920877">panic</span><span class="op" id="2920882">(</span><span class="string" id="2920883">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2920937">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920947">rc</span><span class="op" id="2920949">.</span><span class="ident" id="2920950">ch</span>&nbsp;<span class="op" id="2920953">=</span>&nbsp;<span class="ident" id="2920955">ch</span><span class="op" id="2920957">.</span><span class="ident" id="2920958">pointer</span><span class="op" id="2920965">(</span><span class="op" id="2920966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920971">rc</span><span class="op" id="2920973">.</span><span class="ident" id="2920974">typ</span>&nbsp;<span class="op" id="2920978">=</span>&nbsp;<span class="op" id="2920980">&amp;</span><span class="ident" id="2920981">tt</span><span class="op" id="2920983">.</span><span class="ident" id="2920984">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920993">v</span>&nbsp;<span class="op" id="2920995">:=</span>&nbsp;<span class="ident" id="2920998">c</span><span class="op" id="2920999">.</span><span class="ident" id="2921000">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921008">if</span>&nbsp;<span class="op" id="2921011">!</span><span class="ident" id="2921012">v</span><span class="op" id="2921013">.</span><span class="ident" id="2921014">IsValid</span><span class="op" id="2921021">(</span><span class="op" id="2921022">)</span>&nbsp;<span class="op" id="2921024">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2921030">panic</span><span class="op" id="2921035">(</span><span class="string" id="2921036">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2921085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921095">v</span><span class="op" id="2921096">.</span><span class="ident" id="2921097">mustBeExported</span><span class="op" id="2921111">(</span><span class="op" id="2921112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921117">v</span>&nbsp;<span class="op" id="2921119">=</span>&nbsp;<span class="ident" id="2921121">v</span><span class="op" id="2921122">.</span><span class="ident" id="2921123">assignTo</span><span class="op" id="2921131">(</span><span class="string" id="2921132">&#34;reflect.Select&#34;</span><span class="op" id="2921148">,</span>&nbsp;<span class="ident" id="2921150">tt</span><span class="op" id="2921152">.</span><span class="ident" id="2921153">elem</span><span class="op" id="2921157">,</span>&nbsp;<span class="ident" id="2921159">nil</span><span class="op" id="2921162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921167">if</span>&nbsp;<span class="ident" id="2921170">v</span><span class="op" id="2921171">.</span><span class="ident" id="2921172">flag</span><span class="op" id="2921176">&amp;</span><span class="ident" id="2921177">flagIndir</span>&nbsp;<span class="op" id="2921187">!=</span>&nbsp;<span class="num" id="2921190">0</span>&nbsp;<span class="op" id="2921192">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921198">rc</span><span class="op" id="2921200">.</span><span class="ident" id="2921201">val</span>&nbsp;<span class="op" id="2921205">=</span>&nbsp;<span class="ident" id="2921207">v</span><span class="op" id="2921208">.</span><span class="ident" id="2921209">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921216">}</span>&nbsp;<span class="keyword" id="2921218">else</span>&nbsp;<span class="op" id="2921223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921229">rc</span><span class="op" id="2921231">.</span><span class="ident" id="2921232">val</span>&nbsp;<span class="op" id="2921236">=</span>&nbsp;<span class="ident" id="2921238">unsafe</span><span class="op" id="2921244">.</span><span class="ident" id="2921245">Pointer</span><span class="op" id="2921252">(</span><span class="op" id="2921253">&amp;</span><span class="ident" id="2921254">v</span><span class="op" id="2921255">.</span><span class="ident" id="2921256">ptr</span><span class="op" id="2921259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921269">case</span>&nbsp;<span class="ident" id="2921274">SelectRecv</span><span class="op" id="2921284">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921289">if</span>&nbsp;<span class="ident" id="2921292">c</span><span class="op" id="2921293">.</span><span class="ident" id="2921294">Send</span><span class="op" id="2921298">.</span><span class="ident" id="2921299">IsValid</span><span class="op" id="2921306">(</span><span class="op" id="2921307">)</span>&nbsp;<span class="op" id="2921309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2921315">panic</span><span class="op" id="2921320">(</span><span class="string" id="2921321">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2921366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921376">ch</span>&nbsp;<span class="op" id="2921379">:=</span>&nbsp;<span class="ident" id="2921382">c</span><span class="op" id="2921383">.</span><span class="ident" id="2921384">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921392">if</span>&nbsp;<span class="op" id="2921395">!</span><span class="ident" id="2921396">ch</span><span class="op" id="2921398">.</span><span class="ident" id="2921399">IsValid</span><span class="op" id="2921406">(</span><span class="op" id="2921407">)</span>&nbsp;<span class="op" id="2921409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921415">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921429">ch</span><span class="op" id="2921431">.</span><span class="ident" id="2921432">mustBe</span><span class="op" id="2921438">(</span><span class="ident" id="2921439">Chan</span><span class="op" id="2921443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921448">ch</span><span class="op" id="2921450">.</span><span class="ident" id="2921451">mustBeExported</span><span class="op" id="2921465">(</span><span class="op" id="2921466">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921471">tt</span>&nbsp;<span class="op" id="2921474">:=</span>&nbsp;<span class="op" id="2921477">(</span><span class="op" id="2921478">*</span><span class="ident" id="2921479">chanType</span><span class="op" id="2921487">)</span><span class="op" id="2921488">(</span><span class="ident" id="2921489">unsafe</span><span class="op" id="2921495">.</span><span class="ident" id="2921496">Pointer</span><span class="op" id="2921503">(</span><span class="ident" id="2921504">ch</span><span class="op" id="2921506">.</span><span class="ident" id="2921507">typ</span><span class="op" id="2921510">)</span><span class="op" id="2921511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921516">if</span>&nbsp;<span class="ident" id="2921519">ChanDir</span><span class="op" id="2921526">(</span><span class="ident" id="2921527">tt</span><span class="op" id="2921529">.</span><span class="ident" id="2921530">dir</span><span class="op" id="2921533">)</span><span class="op" id="2921534">&amp;</span><span class="ident" id="2921535">RecvDir</span>&nbsp;<span class="op" id="2921543">==</span>&nbsp;<span class="num" id="2921546">0</span>&nbsp;<span class="op" id="2921548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2921554">panic</span><span class="op" id="2921559">(</span><span class="string" id="2921560">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2921614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921624">rc</span><span class="op" id="2921626">.</span><span class="ident" id="2921627">ch</span>&nbsp;<span class="op" id="2921630">=</span>&nbsp;<span class="ident" id="2921632">ch</span><span class="op" id="2921634">.</span><span class="ident" id="2921635">pointer</span><span class="op" id="2921642">(</span><span class="op" id="2921643">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921648">rc</span><span class="op" id="2921650">.</span><span class="ident" id="2921651">typ</span>&nbsp;<span class="op" id="2921655">=</span>&nbsp;<span class="op" id="2921657">&amp;</span><span class="ident" id="2921658">tt</span><span class="op" id="2921660">.</span><span class="ident" id="2921661">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921670">rc</span><span class="op" id="2921672">.</span><span class="ident" id="2921673">val</span>&nbsp;<span class="op" id="2921677">=</span>&nbsp;<span class="ident" id="2921679">unsafe_New</span><span class="op" id="2921689">(</span><span class="ident" id="2921690">tt</span><span class="op" id="2921692">.</span><span class="ident" id="2921693">elem</span><span class="op" id="2921697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921708">chosen</span><span class="op" id="2921714">,</span>&nbsp;<span class="ident" id="2921716">recvOK</span>&nbsp;<span class="op" id="2921723">=</span>&nbsp;<span class="ident" id="2921725">rselect</span><span class="op" id="2921732">(</span><span class="ident" id="2921733">runcases</span><span class="op" id="2921741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921744">if</span>&nbsp;<span class="ident" id="2921747">runcases</span><span class="op" id="2921755">[</span><span class="ident" id="2921756">chosen</span><span class="op" id="2921762">]</span><span class="op" id="2921763">.</span><span class="ident" id="2921764">dir</span>&nbsp;<span class="op" id="2921768">==</span>&nbsp;<span class="builtintype" id="2921771">uintptr</span><span class="op" id="2921778">(</span><span class="ident" id="2921779">SelectRecv</span><span class="op" id="2921789">)</span>&nbsp;<span class="op" id="2921791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921795">tt</span>&nbsp;<span class="op" id="2921798">:=</span>&nbsp;<span class="op" id="2921801">(</span><span class="op" id="2921802">*</span><span class="ident" id="2921803">chanType</span><span class="op" id="2921811">)</span><span class="op" id="2921812">(</span><span class="ident" id="2921813">unsafe</span><span class="op" id="2921819">.</span><span class="ident" id="2921820">Pointer</span><span class="op" id="2921827">(</span><span class="ident" id="2921828">runcases</span><span class="op" id="2921836">[</span><span class="ident" id="2921837">chosen</span><span class="op" id="2921843">]</span><span class="op" id="2921844">.</span><span class="ident" id="2921845">typ</span><span class="op" id="2921848">)</span><span class="op" id="2921849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921853">t</span>&nbsp;<span class="op" id="2921855">:=</span>&nbsp;<span class="ident" id="2921858">tt</span><span class="op" id="2921860">.</span><span class="ident" id="2921861">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921868">p</span>&nbsp;<span class="op" id="2921870">:=</span>&nbsp;<span class="ident" id="2921873">runcases</span><span class="op" id="2921881">[</span><span class="ident" id="2921882">chosen</span><span class="op" id="2921888">]</span><span class="op" id="2921889">.</span><span class="ident" id="2921890">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921896">fl</span>&nbsp;<span class="op" id="2921899">:=</span>&nbsp;<span class="ident" id="2921902">flag</span><span class="op" id="2921906">(</span><span class="ident" id="2921907">t</span><span class="op" id="2921908">.</span><span class="ident" id="2921909">Kind</span><span class="op" id="2921913">(</span><span class="op" id="2921914">)</span><span class="op" id="2921915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921919">if</span>&nbsp;<span class="ident" id="2921922">ifaceIndir</span><span class="op" id="2921932">(</span><span class="ident" id="2921933">t</span><span class="op" id="2921934">)</span>&nbsp;<span class="op" id="2921936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921941">recv</span>&nbsp;<span class="op" id="2921946">=</span>&nbsp;<span class="ident" id="2921948">Value</span><span class="op" id="2921953">{</span><span class="ident" id="2921954">t</span><span class="op" id="2921955">,</span>&nbsp;<span class="ident" id="2921957">p</span><span class="op" id="2921958">,</span>&nbsp;<span class="ident" id="2921960">fl</span>&nbsp;<span class="op" id="2921963">|</span>&nbsp;<span class="ident" id="2921965">flagIndir</span><span class="op" id="2921974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921978">}</span>&nbsp;<span class="keyword" id="2921980">else</span>&nbsp;<span class="op" id="2921985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921990">recv</span>&nbsp;<span class="op" id="2921995">=</span>&nbsp;<span class="ident" id="2921997">Value</span><span class="op" id="2922002">{</span><span class="ident" id="2922003">t</span><span class="op" id="2922004">,</span>&nbsp;<span class="op" id="2922006">*</span><span class="op" id="2922007">(</span><span class="op" id="2922008">*</span><span class="ident" id="2922009">unsafe</span><span class="op" id="2922015">.</span><span class="ident" id="2922016">Pointer</span><span class="op" id="2922023">)</span><span class="op" id="2922024">(</span><span class="ident" id="2922025">p</span><span class="op" id="2922026">)</span><span class="op" id="2922027">,</span>&nbsp;<span class="ident" id="2922029">fl</span><span class="op" id="2922031">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922041">return</span>&nbsp;<span class="ident" id="2922048">chosen</span><span class="op" id="2922054">,</span>&nbsp;<span class="ident" id="2922056">recv</span><span class="op" id="2922060">,</span>&nbsp;<span class="ident" id="2922062">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2922069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2922072">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922096">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2922130">func</span>&nbsp;<span class="ident" id="2922135">unsafe_New</span><span class="op" id="2922145">(</span><span class="op" id="2922146">*</span><span class="ident" id="2922147">rtype</span><span class="op" id="2922152">)</span>&nbsp;<span class="ident" id="2922154">unsafe</span><span class="op" id="2922160">.</span><span class="ident" id="2922161">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2922169">func</span>&nbsp;<span class="ident" id="2922174">unsafe_NewArray</span><span class="op" id="2922189">(</span><span class="op" id="2922190">*</span><span class="ident" id="2922191">rtype</span><span class="op" id="2922196">,</span>&nbsp;<span class="builtintype" id="2922198">int</span><span class="op" id="2922201">)</span>&nbsp;<span class="ident" id="2922203">unsafe</span><span class="op" id="2922209">.</span><span class="ident" id="2922210">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922219">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2922275">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2922330">func</span>&nbsp;<span class="ident" id="2922335">MakeSlice</span><span class="op" id="2922344">(</span><span class="ident" id="2922345">typ</span>&nbsp;<span class="ident" id="2922349">Type</span><span class="op" id="2922353">,</span>&nbsp;<span class="builtinfunc" id="2922355">len</span><span class="op" id="2922358">,</span>&nbsp;<span class="builtinfunc" id="2922360">cap</span>&nbsp;<span class="builtintype" id="2922364">int</span><span class="op" id="2922367">)</span>&nbsp;<span class="ident" id="2922369">Value</span>&nbsp;<span class="op" id="2922375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922378">if</span>&nbsp;<span class="ident" id="2922381">typ</span><span class="op" id="2922384">.</span><span class="ident" id="2922385">Kind</span><span class="op" id="2922389">(</span><span class="op" id="2922390">)</span>&nbsp;<span class="op" id="2922392">!=</span>&nbsp;<span class="ident" id="2922395">Slice</span>&nbsp;<span class="op" id="2922401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2922405">panic</span><span class="op" id="2922410">(</span><span class="string" id="2922411">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2922448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922454">if</span>&nbsp;<span class="builtinfunc" id="2922457">len</span>&nbsp;<span class="op" id="2922461">&lt;</span>&nbsp;<span class="num" id="2922463">0</span>&nbsp;<span class="op" id="2922465">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2922469">panic</span><span class="op" id="2922474">(</span><span class="string" id="2922475">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2922508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922514">if</span>&nbsp;<span class="builtinfunc" id="2922517">cap</span>&nbsp;<span class="op" id="2922521">&lt;</span>&nbsp;<span class="num" id="2922523">0</span>&nbsp;<span class="op" id="2922525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2922529">panic</span><span class="op" id="2922534">(</span><span class="string" id="2922535">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2922568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922571">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922574">if</span>&nbsp;<span class="builtinfunc" id="2922577">len</span>&nbsp;<span class="op" id="2922581">&gt;</span>&nbsp;<span class="builtinfunc" id="2922583">cap</span>&nbsp;<span class="op" id="2922587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2922591">panic</span><span class="op" id="2922596">(</span><span class="string" id="2922597">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2922627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922634">s</span>&nbsp;<span class="op" id="2922636">:=</span>&nbsp;<span class="ident" id="2922639">sliceHeader</span><span class="op" id="2922650">{</span><span class="ident" id="2922651">unsafe_NewArray</span><span class="op" id="2922666">(</span><span class="ident" id="2922667">typ</span><span class="op" id="2922670">.</span><span class="ident" id="2922671">Elem</span><span class="op" id="2922675">(</span><span class="op" id="2922676">)</span><span class="op" id="2922677">.</span><span class="op" id="2922678">(</span><span class="op" id="2922679">*</span><span class="ident" id="2922680">rtype</span><span class="op" id="2922685">)</span><span class="op" id="2922686">,</span>&nbsp;<span class="builtinfunc" id="2922688">cap</span><span class="op" id="2922691">)</span><span class="op" id="2922692">,</span>&nbsp;<span class="builtinfunc" id="2922694">len</span><span class="op" id="2922697">,</span>&nbsp;<span class="builtinfunc" id="2922699">cap</span><span class="op" id="2922702">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922705">return</span>&nbsp;<span class="ident" id="2922712">Value</span><span class="op" id="2922717">{</span><span class="ident" id="2922718">typ</span><span class="op" id="2922721">.</span><span class="ident" id="2922722">common</span><span class="op" id="2922728">(</span><span class="op" id="2922729">)</span><span class="op" id="2922730">,</span>&nbsp;<span class="ident" id="2922732">unsafe</span><span class="op" id="2922738">.</span><span class="ident" id="2922739">Pointer</span><span class="op" id="2922746">(</span><span class="op" id="2922747">&amp;</span><span class="ident" id="2922748">s</span><span class="op" id="2922749">)</span><span class="op" id="2922750">,</span>&nbsp;<span class="ident" id="2922752">flagIndir</span>&nbsp;<span class="op" id="2922762">|</span>&nbsp;<span class="ident" id="2922764">flag</span><span class="op" id="2922768">(</span><span class="ident" id="2922769">Slice</span><span class="op" id="2922774">)</span><span class="op" id="2922775">}</span><br>
<span class="lineno"></span><span class="op" id="2922777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922780">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2922855">func</span>&nbsp;<span class="ident" id="2922860">MakeChan</span><span class="op" id="2922868">(</span><span class="ident" id="2922869">typ</span>&nbsp;<span class="ident" id="2922873">Type</span><span class="op" id="2922877">,</span>&nbsp;<span class="ident" id="2922879">buffer</span>&nbsp;<span class="builtintype" id="2922886">int</span><span class="op" id="2922889">)</span>&nbsp;<span class="ident" id="2922891">Value</span>&nbsp;<span class="op" id="2922897">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922900">if</span>&nbsp;<span class="ident" id="2922903">typ</span><span class="op" id="2922906">.</span><span class="ident" id="2922907">Kind</span><span class="op" id="2922911">(</span><span class="op" id="2922912">)</span>&nbsp;<span class="op" id="2922914">!=</span>&nbsp;<span class="ident" id="2922917">Chan</span>&nbsp;<span class="op" id="2922922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2922926">panic</span><span class="op" id="2922931">(</span><span class="string" id="2922932">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2922967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922973">if</span>&nbsp;<span class="ident" id="2922976">buffer</span>&nbsp;<span class="op" id="2922983">&lt;</span>&nbsp;<span class="num" id="2922985">0</span>&nbsp;<span class="op" id="2922987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2922991">panic</span><span class="op" id="2922996">(</span><span class="string" id="2922997">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2923037">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923043">if</span>&nbsp;<span class="ident" id="2923046">typ</span><span class="op" id="2923049">.</span><span class="ident" id="2923050">ChanDir</span><span class="op" id="2923057">(</span><span class="op" id="2923058">)</span>&nbsp;<span class="op" id="2923060">!=</span>&nbsp;<span class="ident" id="2923063">BothDir</span>&nbsp;<span class="op" id="2923071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2923075">panic</span><span class="op" id="2923080">(</span><span class="string" id="2923081">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2923128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923134">ch</span>&nbsp;<span class="op" id="2923137">:=</span>&nbsp;<span class="ident" id="2923140">makechan</span><span class="op" id="2923148">(</span><span class="ident" id="2923149">typ</span><span class="op" id="2923152">.</span><span class="op" id="2923153">(</span><span class="op" id="2923154">*</span><span class="ident" id="2923155">rtype</span><span class="op" id="2923160">)</span><span class="op" id="2923161">,</span>&nbsp;<span class="ident" id="2923163">uint64</span><span class="op" id="2923169">(</span><span class="ident" id="2923170">buffer</span><span class="op" id="2923176">)</span><span class="op" id="2923177">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923180">return</span>&nbsp;<span class="ident" id="2923187">Value</span><span class="op" id="2923192">{</span><span class="ident" id="2923193">typ</span><span class="op" id="2923196">.</span><span class="ident" id="2923197">common</span><span class="op" id="2923203">(</span><span class="op" id="2923204">)</span><span class="op" id="2923205">,</span>&nbsp;<span class="ident" id="2923207">ch</span><span class="op" id="2923209">,</span>&nbsp;<span class="ident" id="2923211">flag</span><span class="op" id="2923215">(</span><span class="ident" id="2923216">Chan</span><span class="op" id="2923220">)</span><span class="op" id="2923221">}</span><br>
<span class="lineno"></span><span class="op" id="2923223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923226">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2923278">func</span>&nbsp;<span class="ident" id="2923283">MakeMap</span><span class="op" id="2923290">(</span><span class="ident" id="2923291">typ</span>&nbsp;<span class="ident" id="2923295">Type</span><span class="op" id="2923299">)</span>&nbsp;<span class="ident" id="2923301">Value</span>&nbsp;<span class="op" id="2923307">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923310">if</span>&nbsp;<span class="ident" id="2923313">typ</span><span class="op" id="2923316">.</span><span class="ident" id="2923317">Kind</span><span class="op" id="2923321">(</span><span class="op" id="2923322">)</span>&nbsp;<span class="op" id="2923324">!=</span>&nbsp;<span class="ident" id="2923327">Map</span>&nbsp;<span class="op" id="2923331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2923335">panic</span><span class="op" id="2923340">(</span><span class="string" id="2923341">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2923374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923380">m</span>&nbsp;<span class="op" id="2923382">:=</span>&nbsp;<span class="ident" id="2923385">makemap</span><span class="op" id="2923392">(</span><span class="ident" id="2923393">typ</span><span class="op" id="2923396">.</span><span class="op" id="2923397">(</span><span class="op" id="2923398">*</span><span class="ident" id="2923399">rtype</span><span class="op" id="2923404">)</span><span class="op" id="2923405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923408">return</span>&nbsp;<span class="ident" id="2923415">Value</span><span class="op" id="2923420">{</span><span class="ident" id="2923421">typ</span><span class="op" id="2923424">.</span><span class="ident" id="2923425">common</span><span class="op" id="2923431">(</span><span class="op" id="2923432">)</span><span class="op" id="2923433">,</span>&nbsp;<span class="ident" id="2923435">m</span><span class="op" id="2923436">,</span>&nbsp;<span class="ident" id="2923438">flag</span><span class="op" id="2923442">(</span><span class="ident" id="2923443">Map</span><span class="op" id="2923446">)</span><span class="op" id="2923447">}</span><br>
<span class="lineno">2030</span><span class="op" id="2923449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923452">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2923500">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2923557">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2923603">func</span>&nbsp;<span class="ident" id="2923608">Indirect</span><span class="op" id="2923616">(</span><span class="ident" id="2923617">v</span>&nbsp;<span class="ident" id="2923619">Value</span><span class="op" id="2923624">)</span>&nbsp;<span class="ident" id="2923626">Value</span>&nbsp;<span class="op" id="2923632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923635">if</span>&nbsp;<span class="ident" id="2923638">v</span><span class="op" id="2923639">.</span><span class="ident" id="2923640">Kind</span><span class="op" id="2923644">(</span><span class="op" id="2923645">)</span>&nbsp;<span class="op" id="2923647">!=</span>&nbsp;<span class="ident" id="2923650">Ptr</span>&nbsp;<span class="op" id="2923654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923658">return</span>&nbsp;<span class="ident" id="2923665">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923671">return</span>&nbsp;<span class="ident" id="2923678">v</span><span class="op" id="2923679">.</span><span class="ident" id="2923680">Elem</span><span class="op" id="2923684">(</span><span class="op" id="2923685">)</span><br>
<span class="lineno">2040</span><span class="op" id="2923687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923690">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2923755">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2923823">func</span>&nbsp;<span class="ident" id="2923828">ValueOf</span><span class="op" id="2923835">(</span><span class="ident" id="2923836">i</span>&nbsp;<span class="keyword" id="2923838">interface</span><span class="op" id="2923847">{</span><span class="op" id="2923848">}</span><span class="op" id="2923849">)</span>&nbsp;<span class="ident" id="2923851">Value</span>&nbsp;<span class="op" id="2923857">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923860">if</span>&nbsp;<span class="ident" id="2923863">i</span>&nbsp;<span class="op" id="2923865">==</span>&nbsp;<span class="ident" id="2923868">nil</span>&nbsp;<span class="op" id="2923872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923876">return</span>&nbsp;<span class="ident" id="2923883">Value</span><span class="op" id="2923888">{</span><span class="op" id="2923889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2923896">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2923941">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2923995">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2924043">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2924086">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924128">escapes</span><span class="op" id="2924135">(</span><span class="ident" id="2924136">i</span><span class="op" id="2924137">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924141">return</span>&nbsp;<span class="ident" id="2924148">unpackEface</span><span class="op" id="2924159">(</span><span class="ident" id="2924160">i</span><span class="op" id="2924161">)</span><br>
<span class="lineno"></span><span class="op" id="2924163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2924166">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2924242">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2924310">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2924347">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2924423">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2924482">func</span>&nbsp;<span class="ident" id="2924487">Zero</span><span class="op" id="2924491">(</span><span class="ident" id="2924492">typ</span>&nbsp;<span class="ident" id="2924496">Type</span><span class="op" id="2924500">)</span>&nbsp;<span class="ident" id="2924502">Value</span>&nbsp;<span class="op" id="2924508">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924511">if</span>&nbsp;<span class="ident" id="2924514">typ</span>&nbsp;<span class="op" id="2924518">==</span>&nbsp;<span class="ident" id="2924521">nil</span>&nbsp;<span class="op" id="2924525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2924529">panic</span><span class="op" id="2924534">(</span><span class="string" id="2924535">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2924555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2924558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924561">t</span>&nbsp;<span class="op" id="2924563">:=</span>&nbsp;<span class="ident" id="2924566">typ</span><span class="op" id="2924569">.</span><span class="ident" id="2924570">common</span><span class="op" id="2924576">(</span><span class="op" id="2924577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924580">fl</span>&nbsp;<span class="op" id="2924583">:=</span>&nbsp;<span class="ident" id="2924586">flag</span><span class="op" id="2924590">(</span><span class="ident" id="2924591">t</span><span class="op" id="2924592">.</span><span class="ident" id="2924593">Kind</span><span class="op" id="2924597">(</span><span class="op" id="2924598">)</span><span class="op" id="2924599">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924602">if</span>&nbsp;<span class="ident" id="2924605">ifaceIndir</span><span class="op" id="2924615">(</span><span class="ident" id="2924616">t</span><span class="op" id="2924617">)</span>&nbsp;<span class="op" id="2924619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924623">return</span>&nbsp;<span class="ident" id="2924630">Value</span><span class="op" id="2924635">{</span><span class="ident" id="2924636">t</span><span class="op" id="2924637">,</span>&nbsp;<span class="ident" id="2924639">unsafe_New</span><span class="op" id="2924649">(</span><span class="ident" id="2924650">typ</span><span class="op" id="2924653">.</span><span class="op" id="2924654">(</span><span class="op" id="2924655">*</span><span class="ident" id="2924656">rtype</span><span class="op" id="2924661">)</span><span class="op" id="2924662">)</span><span class="op" id="2924663">,</span>&nbsp;<span class="ident" id="2924665">fl</span>&nbsp;<span class="op" id="2924668">|</span>&nbsp;<span class="ident" id="2924670">flagIndir</span><span class="op" id="2924679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2924682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924685">return</span>&nbsp;<span class="ident" id="2924692">Value</span><span class="op" id="2924697">{</span><span class="ident" id="2924698">t</span><span class="op" id="2924699">,</span>&nbsp;<span class="ident" id="2924701">nil</span><span class="op" id="2924704">,</span>&nbsp;<span class="ident" id="2924706">fl</span><span class="op" id="2924708">}</span><br>
<span class="lineno"></span><span class="op" id="2924710">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2924713">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2924779">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2924857">func</span>&nbsp;<span class="ident" id="2924862">New</span><span class="op" id="2924865">(</span><span class="ident" id="2924866">typ</span>&nbsp;<span class="ident" id="2924870">Type</span><span class="op" id="2924874">)</span>&nbsp;<span class="ident" id="2924876">Value</span>&nbsp;<span class="op" id="2924882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924885">if</span>&nbsp;<span class="ident" id="2924888">typ</span>&nbsp;<span class="op" id="2924892">==</span>&nbsp;<span class="ident" id="2924895">nil</span>&nbsp;<span class="op" id="2924899">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2924903">panic</span><span class="op" id="2924908">(</span><span class="string" id="2924909">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2924928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2924931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924934">ptr</span>&nbsp;<span class="op" id="2924938">:=</span>&nbsp;<span class="ident" id="2924941">unsafe_New</span><span class="op" id="2924951">(</span><span class="ident" id="2924952">typ</span><span class="op" id="2924955">.</span><span class="op" id="2924956">(</span><span class="op" id="2924957">*</span><span class="ident" id="2924958">rtype</span><span class="op" id="2924963">)</span><span class="op" id="2924964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924967">fl</span>&nbsp;<span class="op" id="2924970">:=</span>&nbsp;<span class="ident" id="2924973">flag</span><span class="op" id="2924977">(</span><span class="ident" id="2924978">Ptr</span><span class="op" id="2924981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924984">return</span>&nbsp;<span class="ident" id="2924991">Value</span><span class="op" id="2924996">{</span><span class="ident" id="2924997">typ</span><span class="op" id="2925000">.</span><span class="ident" id="2925001">common</span><span class="op" id="2925007">(</span><span class="op" id="2925008">)</span><span class="op" id="2925009">.</span><span class="ident" id="2925010">ptrTo</span><span class="op" id="2925015">(</span><span class="op" id="2925016">)</span><span class="op" id="2925017">,</span>&nbsp;<span class="ident" id="2925019">ptr</span><span class="op" id="2925022">,</span>&nbsp;<span class="ident" id="2925024">fl</span><span class="op" id="2925026">}</span><br>
<span class="lineno">2085</span><span class="op" id="2925028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2925031">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2925097">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2925141">func</span>&nbsp;<span class="ident" id="2925146">NewAt</span><span class="op" id="2925151">(</span><span class="ident" id="2925152">typ</span>&nbsp;<span class="ident" id="2925156">Type</span><span class="op" id="2925160">,</span>&nbsp;<span class="ident" id="2925162">p</span>&nbsp;<span class="ident" id="2925164">unsafe</span><span class="op" id="2925170">.</span><span class="ident" id="2925171">Pointer</span><span class="op" id="2925178">)</span>&nbsp;<span class="ident" id="2925180">Value</span>&nbsp;<span class="op" id="2925186">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925189">fl</span>&nbsp;<span class="op" id="2925192">:=</span>&nbsp;<span class="ident" id="2925195">flag</span><span class="op" id="2925199">(</span><span class="ident" id="2925200">Ptr</span><span class="op" id="2925203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925206">return</span>&nbsp;<span class="ident" id="2925213">Value</span><span class="op" id="2925218">{</span><span class="ident" id="2925219">typ</span><span class="op" id="2925222">.</span><span class="ident" id="2925223">common</span><span class="op" id="2925229">(</span><span class="op" id="2925230">)</span><span class="op" id="2925231">.</span><span class="ident" id="2925232">ptrTo</span><span class="op" id="2925237">(</span><span class="op" id="2925238">)</span><span class="op" id="2925239">,</span>&nbsp;<span class="ident" id="2925241">p</span><span class="op" id="2925242">,</span>&nbsp;<span class="ident" id="2925244">fl</span><span class="op" id="2925246">}</span><br>
<span class="lineno"></span><span class="op" id="2925248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2925251">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2925319">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2925363">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2925449">func</span>&nbsp;<span class="op" id="2925454">(</span><span class="ident" id="2925455">v</span>&nbsp;<span class="ident" id="2925457">Value</span><span class="op" id="2925462">)</span>&nbsp;<span class="ident" id="2925464">assignTo</span><span class="op" id="2925472">(</span><span class="ident" id="2925473">context</span>&nbsp;<span class="builtintype" id="2925481">string</span><span class="op" id="2925487">,</span>&nbsp;<span class="ident" id="2925489">dst</span>&nbsp;<span class="op" id="2925493">*</span><span class="ident" id="2925494">rtype</span><span class="op" id="2925499">,</span>&nbsp;<span class="ident" id="2925501">target</span>&nbsp;<span class="ident" id="2925508">unsafe</span><span class="op" id="2925514">.</span><span class="ident" id="2925515">Pointer</span><span class="op" id="2925522">)</span>&nbsp;<span class="ident" id="2925524">Value</span>&nbsp;<span class="op" id="2925530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925533">if</span>&nbsp;<span class="ident" id="2925536">v</span><span class="op" id="2925537">.</span><span class="ident" id="2925538">flag</span><span class="op" id="2925542">&amp;</span><span class="ident" id="2925543">flagMethod</span>&nbsp;<span class="op" id="2925554">!=</span>&nbsp;<span class="num" id="2925557">0</span>&nbsp;<span class="op" id="2925559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925563">v</span>&nbsp;<span class="op" id="2925565">=</span>&nbsp;<span class="ident" id="2925567">makeMethodValue</span><span class="op" id="2925582">(</span><span class="ident" id="2925583">context</span><span class="op" id="2925590">,</span>&nbsp;<span class="ident" id="2925592">v</span><span class="op" id="2925593">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2925596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925600">switch</span>&nbsp;<span class="op" id="2925607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925610">case</span>&nbsp;<span class="ident" id="2925615">directlyAssignable</span><span class="op" id="2925633">(</span><span class="ident" id="2925634">dst</span><span class="op" id="2925637">,</span>&nbsp;<span class="ident" id="2925639">v</span><span class="op" id="2925640">.</span><span class="ident" id="2925641">typ</span><span class="op" id="2925644">)</span><span class="op" id="2925645">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2925649">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2925689">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925731">v</span><span class="op" id="2925732">.</span><span class="ident" id="2925733">typ</span>&nbsp;<span class="op" id="2925737">=</span>&nbsp;<span class="ident" id="2925739">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925745">fl</span>&nbsp;<span class="op" id="2925748">:=</span>&nbsp;<span class="ident" id="2925751">v</span><span class="op" id="2925752">.</span><span class="ident" id="2925753">flag</span>&nbsp;<span class="op" id="2925758">&amp;</span>&nbsp;<span class="op" id="2925760">(</span><span class="ident" id="2925761">flagRO</span>&nbsp;<span class="op" id="2925768">|</span>&nbsp;<span class="ident" id="2925770">flagAddr</span>&nbsp;<span class="op" id="2925779">|</span>&nbsp;<span class="ident" id="2925781">flagIndir</span><span class="op" id="2925790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925794">fl</span>&nbsp;<span class="op" id="2925797">|=</span>&nbsp;<span class="ident" id="2925800">flag</span><span class="op" id="2925804">(</span><span class="ident" id="2925805">dst</span><span class="op" id="2925808">.</span><span class="ident" id="2925809">Kind</span><span class="op" id="2925813">(</span><span class="op" id="2925814">)</span><span class="op" id="2925815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925819">return</span>&nbsp;<span class="ident" id="2925826">Value</span><span class="op" id="2925831">{</span><span class="ident" id="2925832">dst</span><span class="op" id="2925835">,</span>&nbsp;<span class="ident" id="2925837">v</span><span class="op" id="2925838">.</span><span class="ident" id="2925839">ptr</span><span class="op" id="2925842">,</span>&nbsp;<span class="ident" id="2925844">fl</span><span class="op" id="2925846">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925850">case</span>&nbsp;<span class="ident" id="2925855">implements</span><span class="op" id="2925865">(</span><span class="ident" id="2925866">dst</span><span class="op" id="2925869">,</span>&nbsp;<span class="ident" id="2925871">v</span><span class="op" id="2925872">.</span><span class="ident" id="2925873">typ</span><span class="op" id="2925876">)</span><span class="op" id="2925877">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925881">if</span>&nbsp;<span class="ident" id="2925884">target</span>&nbsp;<span class="op" id="2925891">==</span>&nbsp;<span class="ident" id="2925894">nil</span>&nbsp;<span class="op" id="2925898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925903">target</span>&nbsp;<span class="op" id="2925910">=</span>&nbsp;<span class="ident" id="2925912">unsafe_New</span><span class="op" id="2925922">(</span><span class="ident" id="2925923">dst</span><span class="op" id="2925926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2925930">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925934">x</span>&nbsp;<span class="op" id="2925936">:=</span>&nbsp;<span class="ident" id="2925939">valueInterface</span><span class="op" id="2925953">(</span><span class="ident" id="2925954">v</span><span class="op" id="2925955">,</span>&nbsp;<span class="builtintype" id="2925957">false</span><span class="op" id="2925962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925966">if</span>&nbsp;<span class="ident" id="2925969">dst</span><span class="op" id="2925972">.</span><span class="ident" id="2925973">NumMethod</span><span class="op" id="2925982">(</span><span class="op" id="2925983">)</span>&nbsp;<span class="op" id="2925985">==</span>&nbsp;<span class="num" id="2925988">0</span>&nbsp;<span class="op" id="2925990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2925995">*</span><span class="op" id="2925996">(</span><span class="op" id="2925997">*</span><span class="keyword" id="2925998">interface</span><span class="op" id="2926007">{</span><span class="op" id="2926008">}</span><span class="op" id="2926009">)</span><span class="op" id="2926010">(</span><span class="ident" id="2926011">target</span><span class="op" id="2926017">)</span>&nbsp;<span class="op" id="2926019">=</span>&nbsp;<span class="ident" id="2926021">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926025">}</span>&nbsp;<span class="keyword" id="2926027">else</span>&nbsp;<span class="op" id="2926032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2926037">ifaceE2I</span><span class="op" id="2926045">(</span><span class="ident" id="2926046">dst</span><span class="op" id="2926049">,</span>&nbsp;<span class="ident" id="2926051">x</span><span class="op" id="2926052">,</span>&nbsp;<span class="ident" id="2926054">target</span><span class="op" id="2926060">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926068">return</span>&nbsp;<span class="ident" id="2926075">Value</span><span class="op" id="2926080">{</span><span class="ident" id="2926081">dst</span><span class="op" id="2926084">,</span>&nbsp;<span class="ident" id="2926086">target</span><span class="op" id="2926092">,</span>&nbsp;<span class="ident" id="2926094">flagIndir</span>&nbsp;<span class="op" id="2926104">|</span>&nbsp;<span class="ident" id="2926106">flag</span><span class="op" id="2926110">(</span><span class="ident" id="2926111">Interface</span><span class="op" id="2926120">)</span><span class="op" id="2926121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926128">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2926140">panic</span><span class="op" id="2926145">(</span><span class="ident" id="2926146">context</span>&nbsp;<span class="op" id="2926154">+</span>&nbsp;<span class="string" id="2926156">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2926175">+</span>&nbsp;<span class="ident" id="2926177">v</span><span class="op" id="2926178">.</span><span class="ident" id="2926179">typ</span><span class="op" id="2926182">.</span><span class="ident" id="2926183">String</span><span class="op" id="2926189">(</span><span class="op" id="2926190">)</span>&nbsp;<span class="op" id="2926192">+</span>&nbsp;<span class="string" id="2926194">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2926224">+</span>&nbsp;<span class="ident" id="2926226">dst</span><span class="op" id="2926229">.</span><span class="ident" id="2926230">String</span><span class="op" id="2926236">(</span><span class="op" id="2926237">)</span><span class="op" id="2926238">)</span><br>
<span class="lineno"></span><span class="op" id="2926240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2926243">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2926295">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2926355">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2926400">func</span>&nbsp;<span class="op" id="2926405">(</span><span class="ident" id="2926406">v</span>&nbsp;<span class="ident" id="2926408">Value</span><span class="op" id="2926413">)</span>&nbsp;<span class="ident" id="2926415">Convert</span><span class="op" id="2926422">(</span><span class="ident" id="2926423">t</span>&nbsp;<span class="ident" id="2926425">Type</span><span class="op" id="2926429">)</span>&nbsp;<span class="ident" id="2926431">Value</span>&nbsp;<span class="op" id="2926437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926440">if</span>&nbsp;<span class="ident" id="2926443">v</span><span class="op" id="2926444">.</span><span class="ident" id="2926445">flag</span><span class="op" id="2926449">&amp;</span><span class="ident" id="2926450">flagMethod</span>&nbsp;<span class="op" id="2926461">!=</span>&nbsp;<span class="num" id="2926464">0</span>&nbsp;<span class="op" id="2926466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2926470">v</span>&nbsp;<span class="op" id="2926472">=</span>&nbsp;<span class="ident" id="2926474">makeMethodValue</span><span class="op" id="2926489">(</span><span class="string" id="2926490">&#34;Convert&#34;</span><span class="op" id="2926499">,</span>&nbsp;<span class="ident" id="2926501">v</span><span class="op" id="2926502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926505">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2926508">op</span>&nbsp;<span class="op" id="2926511">:=</span>&nbsp;<span class="ident" id="2926514">convertOp</span><span class="op" id="2926523">(</span><span class="ident" id="2926524">t</span><span class="op" id="2926525">.</span><span class="ident" id="2926526">common</span><span class="op" id="2926532">(</span><span class="op" id="2926533">)</span><span class="op" id="2926534">,</span>&nbsp;<span class="ident" id="2926536">v</span><span class="op" id="2926537">.</span><span class="ident" id="2926538">typ</span><span class="op" id="2926541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926544">if</span>&nbsp;<span class="ident" id="2926547">op</span>&nbsp;<span class="op" id="2926550">==</span>&nbsp;<span class="ident" id="2926553">nil</span>&nbsp;<span class="op" id="2926557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2926561">panic</span><span class="op" id="2926566">(</span><span class="string" id="2926567">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2926607">+</span>&nbsp;<span class="ident" id="2926609">v</span><span class="op" id="2926610">.</span><span class="ident" id="2926611">typ</span><span class="op" id="2926614">.</span><span class="ident" id="2926615">String</span><span class="op" id="2926621">(</span><span class="op" id="2926622">)</span>&nbsp;<span class="op" id="2926624">+</span>&nbsp;<span class="string" id="2926626">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2926658">+</span>&nbsp;<span class="ident" id="2926660">t</span><span class="op" id="2926661">.</span><span class="ident" id="2926662">String</span><span class="op" id="2926668">(</span><span class="op" id="2926669">)</span><span class="op" id="2926670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926676">return</span>&nbsp;<span class="ident" id="2926683">op</span><span class="op" id="2926685">(</span><span class="ident" id="2926686">v</span><span class="op" id="2926687">,</span>&nbsp;<span class="ident" id="2926689">t</span><span class="op" id="2926690">)</span><br>
<span class="lineno">2140</span><span class="op" id="2926692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2926695">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2926760">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2926840">func</span>&nbsp;<span class="ident" id="2926845">convertOp</span><span class="op" id="2926854">(</span><span class="ident" id="2926855">dst</span><span class="op" id="2926858">,</span>&nbsp;<span class="ident" id="2926860">src</span>&nbsp;<span class="op" id="2926864">*</span><span class="ident" id="2926865">rtype</span><span class="op" id="2926870">)</span>&nbsp;<span class="keyword" id="2926872">func</span><span class="op" id="2926876">(</span><span class="ident" id="2926877">Value</span><span class="op" id="2926882">,</span>&nbsp;<span class="ident" id="2926884">Type</span><span class="op" id="2926888">)</span>&nbsp;<span class="ident" id="2926890">Value</span>&nbsp;<span class="op" id="2926896">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926899">switch</span>&nbsp;<span class="ident" id="2926906">src</span><span class="op" id="2926909">.</span><span class="ident" id="2926910">Kind</span><span class="op" id="2926914">(</span><span class="op" id="2926915">)</span>&nbsp;<span class="op" id="2926917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926920">case</span>&nbsp;<span class="ident" id="2926925">Int</span><span class="op" id="2926928">,</span>&nbsp;<span class="ident" id="2926930">Int8</span><span class="op" id="2926934">,</span>&nbsp;<span class="ident" id="2926936">Int16</span><span class="op" id="2926941">,</span>&nbsp;<span class="ident" id="2926943">Int32</span><span class="op" id="2926948">,</span>&nbsp;<span class="ident" id="2926950">Int64</span><span class="op" id="2926955">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926959">switch</span>&nbsp;<span class="ident" id="2926966">dst</span><span class="op" id="2926969">.</span><span class="ident" id="2926970">Kind</span><span class="op" id="2926974">(</span><span class="op" id="2926975">)</span>&nbsp;<span class="op" id="2926977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926981">case</span>&nbsp;<span class="ident" id="2926986">Int</span><span class="op" id="2926989">,</span>&nbsp;<span class="ident" id="2926991">Int8</span><span class="op" id="2926995">,</span>&nbsp;<span class="ident" id="2926997">Int16</span><span class="op" id="2927002">,</span>&nbsp;<span class="ident" id="2927004">Int32</span><span class="op" id="2927009">,</span>&nbsp;<span class="ident" id="2927011">Int64</span><span class="op" id="2927016">,</span>&nbsp;<span class="ident" id="2927018">Uint</span><span class="op" id="2927022">,</span>&nbsp;<span class="ident" id="2927024">Uint8</span><span class="op" id="2927029">,</span>&nbsp;<span class="ident" id="2927031">Uint16</span><span class="op" id="2927037">,</span>&nbsp;<span class="ident" id="2927039">Uint32</span><span class="op" id="2927045">,</span>&nbsp;<span class="ident" id="2927047">Uint64</span><span class="op" id="2927053">,</span>&nbsp;<span class="ident" id="2927055">Uintptr</span><span class="op" id="2927062">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927067">return</span>&nbsp;<span class="ident" id="2927074">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927083">case</span>&nbsp;<span class="ident" id="2927088">Float32</span><span class="op" id="2927095">,</span>&nbsp;<span class="ident" id="2927097">Float64</span><span class="op" id="2927104">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927109">return</span>&nbsp;<span class="ident" id="2927116">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927130">case</span>&nbsp;<span class="ident" id="2927135">String</span><span class="op" id="2927141">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927146">return</span>&nbsp;<span class="ident" id="2927153">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927168">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927172">case</span>&nbsp;<span class="ident" id="2927177">Uint</span><span class="op" id="2927181">,</span>&nbsp;<span class="ident" id="2927183">Uint8</span><span class="op" id="2927188">,</span>&nbsp;<span class="ident" id="2927190">Uint16</span><span class="op" id="2927196">,</span>&nbsp;<span class="ident" id="2927198">Uint32</span><span class="op" id="2927204">,</span>&nbsp;<span class="ident" id="2927206">Uint64</span><span class="op" id="2927212">,</span>&nbsp;<span class="ident" id="2927214">Uintptr</span><span class="op" id="2927221">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927225">switch</span>&nbsp;<span class="ident" id="2927232">dst</span><span class="op" id="2927235">.</span><span class="ident" id="2927236">Kind</span><span class="op" id="2927240">(</span><span class="op" id="2927241">)</span>&nbsp;<span class="op" id="2927243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927247">case</span>&nbsp;<span class="ident" id="2927252">Int</span><span class="op" id="2927255">,</span>&nbsp;<span class="ident" id="2927257">Int8</span><span class="op" id="2927261">,</span>&nbsp;<span class="ident" id="2927263">Int16</span><span class="op" id="2927268">,</span>&nbsp;<span class="ident" id="2927270">Int32</span><span class="op" id="2927275">,</span>&nbsp;<span class="ident" id="2927277">Int64</span><span class="op" id="2927282">,</span>&nbsp;<span class="ident" id="2927284">Uint</span><span class="op" id="2927288">,</span>&nbsp;<span class="ident" id="2927290">Uint8</span><span class="op" id="2927295">,</span>&nbsp;<span class="ident" id="2927297">Uint16</span><span class="op" id="2927303">,</span>&nbsp;<span class="ident" id="2927305">Uint32</span><span class="op" id="2927311">,</span>&nbsp;<span class="ident" id="2927313">Uint64</span><span class="op" id="2927319">,</span>&nbsp;<span class="ident" id="2927321">Uintptr</span><span class="op" id="2927328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927333">return</span>&nbsp;<span class="ident" id="2927340">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927350">case</span>&nbsp;<span class="ident" id="2927355">Float32</span><span class="op" id="2927362">,</span>&nbsp;<span class="ident" id="2927364">Float64</span><span class="op" id="2927371">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927376">return</span>&nbsp;<span class="ident" id="2927383">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927398">case</span>&nbsp;<span class="ident" id="2927403">String</span><span class="op" id="2927409">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927414">return</span>&nbsp;<span class="ident" id="2927421">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927437">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927441">case</span>&nbsp;<span class="ident" id="2927446">Float32</span><span class="op" id="2927453">,</span>&nbsp;<span class="ident" id="2927455">Float64</span><span class="op" id="2927462">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927466">switch</span>&nbsp;<span class="ident" id="2927473">dst</span><span class="op" id="2927476">.</span><span class="ident" id="2927477">Kind</span><span class="op" id="2927481">(</span><span class="op" id="2927482">)</span>&nbsp;<span class="op" id="2927484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927488">case</span>&nbsp;<span class="ident" id="2927493">Int</span><span class="op" id="2927496">,</span>&nbsp;<span class="ident" id="2927498">Int8</span><span class="op" id="2927502">,</span>&nbsp;<span class="ident" id="2927504">Int16</span><span class="op" id="2927509">,</span>&nbsp;<span class="ident" id="2927511">Int32</span><span class="op" id="2927516">,</span>&nbsp;<span class="ident" id="2927518">Int64</span><span class="op" id="2927523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927528">return</span>&nbsp;<span class="ident" id="2927535">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927549">case</span>&nbsp;<span class="ident" id="2927554">Uint</span><span class="op" id="2927558">,</span>&nbsp;<span class="ident" id="2927560">Uint8</span><span class="op" id="2927565">,</span>&nbsp;<span class="ident" id="2927567">Uint16</span><span class="op" id="2927573">,</span>&nbsp;<span class="ident" id="2927575">Uint32</span><span class="op" id="2927581">,</span>&nbsp;<span class="ident" id="2927583">Uint64</span><span class="op" id="2927589">,</span>&nbsp;<span class="ident" id="2927591">Uintptr</span><span class="op" id="2927598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927603">return</span>&nbsp;<span class="ident" id="2927610">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927625">case</span>&nbsp;<span class="ident" id="2927630">Float32</span><span class="op" id="2927637">,</span>&nbsp;<span class="ident" id="2927639">Float64</span><span class="op" id="2927646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927651">return</span>&nbsp;<span class="ident" id="2927658">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927669">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927673">case</span>&nbsp;<span class="ident" id="2927678">Complex64</span><span class="op" id="2927687">,</span>&nbsp;<span class="ident" id="2927689">Complex128</span><span class="op" id="2927699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927703">switch</span>&nbsp;<span class="ident" id="2927710">dst</span><span class="op" id="2927713">.</span><span class="ident" id="2927714">Kind</span><span class="op" id="2927718">(</span><span class="op" id="2927719">)</span>&nbsp;<span class="op" id="2927721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927725">case</span>&nbsp;<span class="ident" id="2927730">Complex64</span><span class="op" id="2927739">,</span>&nbsp;<span class="ident" id="2927741">Complex128</span><span class="op" id="2927751">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927756">return</span>&nbsp;<span class="ident" id="2927763">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927780">case</span>&nbsp;<span class="ident" id="2927785">String</span><span class="op" id="2927791">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927795">if</span>&nbsp;<span class="ident" id="2927798">dst</span><span class="op" id="2927801">.</span><span class="ident" id="2927802">Kind</span><span class="op" id="2927806">(</span><span class="op" id="2927807">)</span>&nbsp;<span class="op" id="2927809">==</span>&nbsp;<span class="ident" id="2927812">Slice</span>&nbsp;<span class="op" id="2927818">&amp;&amp;</span>&nbsp;<span class="ident" id="2927821">dst</span><span class="op" id="2927824">.</span><span class="ident" id="2927825">Elem</span><span class="op" id="2927829">(</span><span class="op" id="2927830">)</span><span class="op" id="2927831">.</span><span class="ident" id="2927832">PkgPath</span><span class="op" id="2927839">(</span><span class="op" id="2927840">)</span>&nbsp;<span class="op" id="2927842">==</span>&nbsp;<span class="string" id="2927845">&#34;&#34;</span>&nbsp;<span class="op" id="2927848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927853">switch</span>&nbsp;<span class="ident" id="2927860">dst</span><span class="op" id="2927863">.</span><span class="ident" id="2927864">Elem</span><span class="op" id="2927868">(</span><span class="op" id="2927869">)</span><span class="op" id="2927870">.</span><span class="ident" id="2927871">Kind</span><span class="op" id="2927875">(</span><span class="op" id="2927876">)</span>&nbsp;<span class="op" id="2927878">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927883">case</span>&nbsp;<span class="ident" id="2927888">Uint8</span><span class="op" id="2927893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927899">return</span>&nbsp;<span class="ident" id="2927906">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927924">case</span>&nbsp;<span class="ident" id="2927929">Int32</span><span class="op" id="2927934">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927940">return</span>&nbsp;<span class="ident" id="2927947">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927965">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927973">case</span>&nbsp;<span class="ident" id="2927978">Slice</span><span class="op" id="2927983">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927987">if</span>&nbsp;<span class="ident" id="2927990">dst</span><span class="op" id="2927993">.</span><span class="ident" id="2927994">Kind</span><span class="op" id="2927998">(</span><span class="op" id="2927999">)</span>&nbsp;<span class="op" id="2928001">==</span>&nbsp;<span class="ident" id="2928004">String</span>&nbsp;<span class="op" id="2928011">&amp;&amp;</span>&nbsp;<span class="ident" id="2928014">src</span><span class="op" id="2928017">.</span><span class="ident" id="2928018">Elem</span><span class="op" id="2928022">(</span><span class="op" id="2928023">)</span><span class="op" id="2928024">.</span><span class="ident" id="2928025">PkgPath</span><span class="op" id="2928032">(</span><span class="op" id="2928033">)</span>&nbsp;<span class="op" id="2928035">==</span>&nbsp;<span class="string" id="2928038">&#34;&#34;</span>&nbsp;<span class="op" id="2928041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928046">switch</span>&nbsp;<span class="ident" id="2928053">src</span><span class="op" id="2928056">.</span><span class="ident" id="2928057">Elem</span><span class="op" id="2928061">(</span><span class="op" id="2928062">)</span><span class="op" id="2928063">.</span><span class="ident" id="2928064">Kind</span><span class="op" id="2928068">(</span><span class="op" id="2928069">)</span>&nbsp;<span class="op" id="2928071">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928076">case</span>&nbsp;<span class="ident" id="2928081">Uint8</span><span class="op" id="2928086">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928092">return</span>&nbsp;<span class="ident" id="2928099">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928117">case</span>&nbsp;<span class="ident" id="2928122">Int32</span><span class="op" id="2928127">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928133">return</span>&nbsp;<span class="ident" id="2928140">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928158">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2928169">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928212">if</span>&nbsp;<span class="ident" id="2928215">haveIdenticalUnderlyingType</span><span class="op" id="2928242">(</span><span class="ident" id="2928243">dst</span><span class="op" id="2928246">,</span>&nbsp;<span class="ident" id="2928248">src</span><span class="op" id="2928251">)</span>&nbsp;<span class="op" id="2928253">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928257">return</span>&nbsp;<span class="ident" id="2928264">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2928279">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928353">if</span>&nbsp;<span class="ident" id="2928356">dst</span><span class="op" id="2928359">.</span><span class="ident" id="2928360">Kind</span><span class="op" id="2928364">(</span><span class="op" id="2928365">)</span>&nbsp;<span class="op" id="2928367">==</span>&nbsp;<span class="ident" id="2928370">Ptr</span>&nbsp;<span class="op" id="2928374">&amp;&amp;</span>&nbsp;<span class="ident" id="2928377">dst</span><span class="op" id="2928380">.</span><span class="ident" id="2928381">Name</span><span class="op" id="2928385">(</span><span class="op" id="2928386">)</span>&nbsp;<span class="op" id="2928388">==</span>&nbsp;<span class="string" id="2928391">&#34;&#34;</span>&nbsp;<span class="op" id="2928394">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928399">src</span><span class="op" id="2928402">.</span><span class="ident" id="2928403">Kind</span><span class="op" id="2928407">(</span><span class="op" id="2928408">)</span>&nbsp;<span class="op" id="2928410">==</span>&nbsp;<span class="ident" id="2928413">Ptr</span>&nbsp;<span class="op" id="2928417">&amp;&amp;</span>&nbsp;<span class="ident" id="2928420">src</span><span class="op" id="2928423">.</span><span class="ident" id="2928424">Name</span><span class="op" id="2928428">(</span><span class="op" id="2928429">)</span>&nbsp;<span class="op" id="2928431">==</span>&nbsp;<span class="string" id="2928434">&#34;&#34;</span>&nbsp;<span class="op" id="2928437">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928442">haveIdenticalUnderlyingType</span><span class="op" id="2928469">(</span><span class="ident" id="2928470">dst</span><span class="op" id="2928473">.</span><span class="ident" id="2928474">Elem</span><span class="op" id="2928478">(</span><span class="op" id="2928479">)</span><span class="op" id="2928480">.</span><span class="ident" id="2928481">common</span><span class="op" id="2928487">(</span><span class="op" id="2928488">)</span><span class="op" id="2928489">,</span>&nbsp;<span class="ident" id="2928491">src</span><span class="op" id="2928494">.</span><span class="ident" id="2928495">Elem</span><span class="op" id="2928499">(</span><span class="op" id="2928500">)</span><span class="op" id="2928501">.</span><span class="ident" id="2928502">common</span><span class="op" id="2928508">(</span><span class="op" id="2928509">)</span><span class="op" id="2928510">)</span>&nbsp;<span class="op" id="2928512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928516">return</span>&nbsp;<span class="ident" id="2928523">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928538">if</span>&nbsp;<span class="ident" id="2928541">implements</span><span class="op" id="2928551">(</span><span class="ident" id="2928552">dst</span><span class="op" id="2928555">,</span>&nbsp;<span class="ident" id="2928557">src</span><span class="op" id="2928560">)</span>&nbsp;<span class="op" id="2928562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928566">if</span>&nbsp;<span class="ident" id="2928569">src</span><span class="op" id="2928572">.</span><span class="ident" id="2928573">Kind</span><span class="op" id="2928577">(</span><span class="op" id="2928578">)</span>&nbsp;<span class="op" id="2928580">==</span>&nbsp;<span class="ident" id="2928583">Interface</span>&nbsp;<span class="op" id="2928593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928598">return</span>&nbsp;<span class="ident" id="2928605">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928618">return</span>&nbsp;<span class="ident" id="2928625">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928637">return</span>&nbsp;<span class="ident" id="2928644">nil</span><br>
<span class="lineno"></span><span class="op" id="2928648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2928651">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2928724">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2928769">func</span>&nbsp;<span class="ident" id="2928774">makeInt</span><span class="op" id="2928781">(</span><span class="ident" id="2928782">f</span>&nbsp;<span class="ident" id="2928784">flag</span><span class="op" id="2928788">,</span>&nbsp;<span class="ident" id="2928790">bits</span>&nbsp;<span class="ident" id="2928795">uint64</span><span class="op" id="2928801">,</span>&nbsp;<span class="ident" id="2928803">t</span>&nbsp;<span class="ident" id="2928805">Type</span><span class="op" id="2928809">)</span>&nbsp;<span class="ident" id="2928811">Value</span>&nbsp;<span class="op" id="2928817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928820">typ</span>&nbsp;<span class="op" id="2928824">:=</span>&nbsp;<span class="ident" id="2928827">t</span><span class="op" id="2928828">.</span><span class="ident" id="2928829">common</span><span class="op" id="2928835">(</span><span class="op" id="2928836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928839">ptr</span>&nbsp;<span class="op" id="2928843">:=</span>&nbsp;<span class="ident" id="2928846">unsafe_New</span><span class="op" id="2928856">(</span><span class="ident" id="2928857">typ</span><span class="op" id="2928860">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928863">switch</span>&nbsp;<span class="ident" id="2928870">typ</span><span class="op" id="2928873">.</span><span class="ident" id="2928874">size</span>&nbsp;<span class="op" id="2928879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928882">case</span>&nbsp;<span class="num" id="2928887">1</span><span class="op" id="2928888">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928892">*</span><span class="op" id="2928893">(</span><span class="op" id="2928894">*</span><span class="builtintype" id="2928895">uint8</span><span class="op" id="2928900">)</span><span class="op" id="2928901">(</span><span class="ident" id="2928902">unsafe</span><span class="op" id="2928908">.</span><span class="ident" id="2928909">Pointer</span><span class="op" id="2928916">(</span><span class="ident" id="2928917">ptr</span><span class="op" id="2928920">)</span><span class="op" id="2928921">)</span>&nbsp;<span class="op" id="2928923">=</span>&nbsp;<span class="builtintype" id="2928925">uint8</span><span class="op" id="2928930">(</span><span class="ident" id="2928931">bits</span><span class="op" id="2928935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928938">case</span>&nbsp;<span class="num" id="2928943">2</span><span class="op" id="2928944">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928948">*</span><span class="op" id="2928949">(</span><span class="op" id="2928950">*</span><span class="builtintype" id="2928951">uint16</span><span class="op" id="2928957">)</span><span class="op" id="2928958">(</span><span class="ident" id="2928959">unsafe</span><span class="op" id="2928965">.</span><span class="ident" id="2928966">Pointer</span><span class="op" id="2928973">(</span><span class="ident" id="2928974">ptr</span><span class="op" id="2928977">)</span><span class="op" id="2928978">)</span>&nbsp;<span class="op" id="2928980">=</span>&nbsp;<span class="builtintype" id="2928982">uint16</span><span class="op" id="2928988">(</span><span class="ident" id="2928989">bits</span><span class="op" id="2928993">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928996">case</span>&nbsp;<span class="num" id="2929001">4</span><span class="op" id="2929002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929006">*</span><span class="op" id="2929007">(</span><span class="op" id="2929008">*</span><span class="builtintype" id="2929009">uint32</span><span class="op" id="2929015">)</span><span class="op" id="2929016">(</span><span class="ident" id="2929017">unsafe</span><span class="op" id="2929023">.</span><span class="ident" id="2929024">Pointer</span><span class="op" id="2929031">(</span><span class="ident" id="2929032">ptr</span><span class="op" id="2929035">)</span><span class="op" id="2929036">)</span>&nbsp;<span class="op" id="2929038">=</span>&nbsp;<span class="builtintype" id="2929040">uint32</span><span class="op" id="2929046">(</span><span class="ident" id="2929047">bits</span><span class="op" id="2929051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929054">case</span>&nbsp;<span class="num" id="2929059">8</span><span class="op" id="2929060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929064">*</span><span class="op" id="2929065">(</span><span class="op" id="2929066">*</span><span class="ident" id="2929067">uint64</span><span class="op" id="2929073">)</span><span class="op" id="2929074">(</span><span class="ident" id="2929075">unsafe</span><span class="op" id="2929081">.</span><span class="ident" id="2929082">Pointer</span><span class="op" id="2929089">(</span><span class="ident" id="2929090">ptr</span><span class="op" id="2929093">)</span><span class="op" id="2929094">)</span>&nbsp;<span class="op" id="2929096">=</span>&nbsp;<span class="ident" id="2929098">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929104">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929107">return</span>&nbsp;<span class="ident" id="2929114">Value</span><span class="op" id="2929119">{</span><span class="ident" id="2929120">typ</span><span class="op" id="2929123">,</span>&nbsp;<span class="ident" id="2929125">ptr</span><span class="op" id="2929128">,</span>&nbsp;<span class="ident" id="2929130">f</span>&nbsp;<span class="op" id="2929132">|</span>&nbsp;<span class="ident" id="2929134">flagIndir</span>&nbsp;<span class="op" id="2929144">|</span>&nbsp;<span class="ident" id="2929146">flag</span><span class="op" id="2929150">(</span><span class="ident" id="2929151">typ</span><span class="op" id="2929154">.</span><span class="ident" id="2929155">Kind</span><span class="op" id="2929159">(</span><span class="op" id="2929160">)</span><span class="op" id="2929161">)</span><span class="op" id="2929162">}</span><br>
<span class="lineno"></span><span class="op" id="2929164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2929167">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2929250">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2929291">func</span>&nbsp;<span class="ident" id="2929296">makeFloat</span><span class="op" id="2929305">(</span><span class="ident" id="2929306">f</span>&nbsp;<span class="ident" id="2929308">flag</span><span class="op" id="2929312">,</span>&nbsp;<span class="ident" id="2929314">v</span>&nbsp;<span class="builtintype" id="2929316">float64</span><span class="op" id="2929323">,</span>&nbsp;<span class="ident" id="2929325">t</span>&nbsp;<span class="ident" id="2929327">Type</span><span class="op" id="2929331">)</span>&nbsp;<span class="ident" id="2929333">Value</span>&nbsp;<span class="op" id="2929339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929342">typ</span>&nbsp;<span class="op" id="2929346">:=</span>&nbsp;<span class="ident" id="2929349">t</span><span class="op" id="2929350">.</span><span class="ident" id="2929351">common</span><span class="op" id="2929357">(</span><span class="op" id="2929358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929361">ptr</span>&nbsp;<span class="op" id="2929365">:=</span>&nbsp;<span class="ident" id="2929368">unsafe_New</span><span class="op" id="2929378">(</span><span class="ident" id="2929379">typ</span><span class="op" id="2929382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929385">switch</span>&nbsp;<span class="ident" id="2929392">typ</span><span class="op" id="2929395">.</span><span class="ident" id="2929396">size</span>&nbsp;<span class="op" id="2929401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929404">case</span>&nbsp;<span class="num" id="2929409">4</span><span class="op" id="2929410">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929414">*</span><span class="op" id="2929415">(</span><span class="op" id="2929416">*</span><span class="builtintype" id="2929417">float32</span><span class="op" id="2929424">)</span><span class="op" id="2929425">(</span><span class="ident" id="2929426">unsafe</span><span class="op" id="2929432">.</span><span class="ident" id="2929433">Pointer</span><span class="op" id="2929440">(</span><span class="ident" id="2929441">ptr</span><span class="op" id="2929444">)</span><span class="op" id="2929445">)</span>&nbsp;<span class="op" id="2929447">=</span>&nbsp;<span class="builtintype" id="2929449">float32</span><span class="op" id="2929456">(</span><span class="ident" id="2929457">v</span><span class="op" id="2929458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929461">case</span>&nbsp;<span class="num" id="2929466">8</span><span class="op" id="2929467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929471">*</span><span class="op" id="2929472">(</span><span class="op" id="2929473">*</span><span class="builtintype" id="2929474">float64</span><span class="op" id="2929481">)</span><span class="op" id="2929482">(</span><span class="ident" id="2929483">unsafe</span><span class="op" id="2929489">.</span><span class="ident" id="2929490">Pointer</span><span class="op" id="2929497">(</span><span class="ident" id="2929498">ptr</span><span class="op" id="2929501">)</span><span class="op" id="2929502">)</span>&nbsp;<span class="op" id="2929504">=</span>&nbsp;<span class="ident" id="2929506">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929512">return</span>&nbsp;<span class="ident" id="2929519">Value</span><span class="op" id="2929524">{</span><span class="ident" id="2929525">typ</span><span class="op" id="2929528">,</span>&nbsp;<span class="ident" id="2929530">ptr</span><span class="op" id="2929533">,</span>&nbsp;<span class="ident" id="2929535">f</span>&nbsp;<span class="op" id="2929537">|</span>&nbsp;<span class="ident" id="2929539">flagIndir</span>&nbsp;<span class="op" id="2929549">|</span>&nbsp;<span class="ident" id="2929551">flag</span><span class="op" id="2929555">(</span><span class="ident" id="2929556">typ</span><span class="op" id="2929559">.</span><span class="ident" id="2929560">Kind</span><span class="op" id="2929564">(</span><span class="op" id="2929565">)</span><span class="op" id="2929566">)</span><span class="op" id="2929567">}</span><br>
<span class="lineno">2255</span><span class="op" id="2929569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2929572">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2929659">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2929705">func</span>&nbsp;<span class="ident" id="2929710">makeComplex</span><span class="op" id="2929721">(</span><span class="ident" id="2929722">f</span>&nbsp;<span class="ident" id="2929724">flag</span><span class="op" id="2929728">,</span>&nbsp;<span class="ident" id="2929730">v</span>&nbsp;<span class="builtintype" id="2929732">complex128</span><span class="op" id="2929742">,</span>&nbsp;<span class="ident" id="2929744">t</span>&nbsp;<span class="ident" id="2929746">Type</span><span class="op" id="2929750">)</span>&nbsp;<span class="ident" id="2929752">Value</span>&nbsp;<span class="op" id="2929758">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929761">typ</span>&nbsp;<span class="op" id="2929765">:=</span>&nbsp;<span class="ident" id="2929768">t</span><span class="op" id="2929769">.</span><span class="ident" id="2929770">common</span><span class="op" id="2929776">(</span><span class="op" id="2929777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929780">ptr</span>&nbsp;<span class="op" id="2929784">:=</span>&nbsp;<span class="ident" id="2929787">unsafe_New</span><span class="op" id="2929797">(</span><span class="ident" id="2929798">typ</span><span class="op" id="2929801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929804">switch</span>&nbsp;<span class="ident" id="2929811">typ</span><span class="op" id="2929814">.</span><span class="ident" id="2929815">size</span>&nbsp;<span class="op" id="2929820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929823">case</span>&nbsp;<span class="num" id="2929828">8</span><span class="op" id="2929829">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929833">*</span><span class="op" id="2929834">(</span><span class="op" id="2929835">*</span><span class="builtintype" id="2929836">complex64</span><span class="op" id="2929845">)</span><span class="op" id="2929846">(</span><span class="ident" id="2929847">unsafe</span><span class="op" id="2929853">.</span><span class="ident" id="2929854">Pointer</span><span class="op" id="2929861">(</span><span class="ident" id="2929862">ptr</span><span class="op" id="2929865">)</span><span class="op" id="2929866">)</span>&nbsp;<span class="op" id="2929868">=</span>&nbsp;<span class="builtintype" id="2929870">complex64</span><span class="op" id="2929879">(</span><span class="ident" id="2929880">v</span><span class="op" id="2929881">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929884">case</span>&nbsp;<span class="num" id="2929889">16</span><span class="op" id="2929891">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929895">*</span><span class="op" id="2929896">(</span><span class="op" id="2929897">*</span><span class="builtintype" id="2929898">complex128</span><span class="op" id="2929908">)</span><span class="op" id="2929909">(</span><span class="ident" id="2929910">unsafe</span><span class="op" id="2929916">.</span><span class="ident" id="2929917">Pointer</span><span class="op" id="2929924">(</span><span class="ident" id="2929925">ptr</span><span class="op" id="2929928">)</span><span class="op" id="2929929">)</span>&nbsp;<span class="op" id="2929931">=</span>&nbsp;<span class="ident" id="2929933">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929939">return</span>&nbsp;<span class="ident" id="2929946">Value</span><span class="op" id="2929951">{</span><span class="ident" id="2929952">typ</span><span class="op" id="2929955">,</span>&nbsp;<span class="ident" id="2929957">ptr</span><span class="op" id="2929960">,</span>&nbsp;<span class="ident" id="2929962">f</span>&nbsp;<span class="op" id="2929964">|</span>&nbsp;<span class="ident" id="2929966">flagIndir</span>&nbsp;<span class="op" id="2929976">|</span>&nbsp;<span class="ident" id="2929978">flag</span><span class="op" id="2929982">(</span><span class="ident" id="2929983">typ</span><span class="op" id="2929986">.</span><span class="ident" id="2929987">Kind</span><span class="op" id="2929991">(</span><span class="op" id="2929992">)</span><span class="op" id="2929993">)</span><span class="op" id="2929994">}</span><br>
<span class="lineno"></span><span class="op" id="2929996">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2929999">func</span>&nbsp;<span class="ident" id="2930004">makeString</span><span class="op" id="2930014">(</span><span class="ident" id="2930015">f</span>&nbsp;<span class="ident" id="2930017">flag</span><span class="op" id="2930021">,</span>&nbsp;<span class="ident" id="2930023">v</span>&nbsp;<span class="builtintype" id="2930025">string</span><span class="op" id="2930031">,</span>&nbsp;<span class="ident" id="2930033">t</span>&nbsp;<span class="ident" id="2930035">Type</span><span class="op" id="2930039">)</span>&nbsp;<span class="ident" id="2930041">Value</span>&nbsp;<span class="op" id="2930047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930050">ret</span>&nbsp;<span class="op" id="2930054">:=</span>&nbsp;<span class="ident" id="2930057">New</span><span class="op" id="2930060">(</span><span class="ident" id="2930061">t</span><span class="op" id="2930062">)</span><span class="op" id="2930063">.</span><span class="ident" id="2930064">Elem</span><span class="op" id="2930068">(</span><span class="op" id="2930069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930072">ret</span><span class="op" id="2930075">.</span><span class="ident" id="2930076">SetString</span><span class="op" id="2930085">(</span><span class="ident" id="2930086">v</span><span class="op" id="2930087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930090">ret</span><span class="op" id="2930093">.</span><span class="ident" id="2930094">flag</span>&nbsp;<span class="op" id="2930099">=</span>&nbsp;<span class="ident" id="2930101">ret</span><span class="op" id="2930104">.</span><span class="ident" id="2930105">flag</span><span class="op" id="2930109">&amp;^</span><span class="ident" id="2930111">flagAddr</span>&nbsp;<span class="op" id="2930120">|</span>&nbsp;<span class="ident" id="2930122">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930125">return</span>&nbsp;<span class="ident" id="2930132">ret</span><br>
<span class="lineno"></span><span class="op" id="2930136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2930139">func</span>&nbsp;<span class="ident" id="2930144">makeBytes</span><span class="op" id="2930153">(</span><span class="ident" id="2930154">f</span>&nbsp;<span class="ident" id="2930156">flag</span><span class="op" id="2930160">,</span>&nbsp;<span class="ident" id="2930162">v</span>&nbsp;<span class="op" id="2930164">[</span><span class="op" id="2930165">]</span><span class="builtintype" id="2930166">byte</span><span class="op" id="2930170">,</span>&nbsp;<span class="ident" id="2930172">t</span>&nbsp;<span class="ident" id="2930174">Type</span><span class="op" id="2930178">)</span>&nbsp;<span class="ident" id="2930180">Value</span>&nbsp;<span class="op" id="2930186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930189">ret</span>&nbsp;<span class="op" id="2930193">:=</span>&nbsp;<span class="ident" id="2930196">New</span><span class="op" id="2930199">(</span><span class="ident" id="2930200">t</span><span class="op" id="2930201">)</span><span class="op" id="2930202">.</span><span class="ident" id="2930203">Elem</span><span class="op" id="2930207">(</span><span class="op" id="2930208">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930211">ret</span><span class="op" id="2930214">.</span><span class="ident" id="2930215">SetBytes</span><span class="op" id="2930223">(</span><span class="ident" id="2930224">v</span><span class="op" id="2930225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930228">ret</span><span class="op" id="2930231">.</span><span class="ident" id="2930232">flag</span>&nbsp;<span class="op" id="2930237">=</span>&nbsp;<span class="ident" id="2930239">ret</span><span class="op" id="2930242">.</span><span class="ident" id="2930243">flag</span><span class="op" id="2930247">&amp;^</span><span class="ident" id="2930249">flagAddr</span>&nbsp;<span class="op" id="2930258">|</span>&nbsp;<span class="ident" id="2930260">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930263">return</span>&nbsp;<span class="ident" id="2930270">ret</span><br>
<span class="lineno"></span><span class="op" id="2930274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2930277">func</span>&nbsp;<span class="ident" id="2930282">makeRunes</span><span class="op" id="2930291">(</span><span class="ident" id="2930292">f</span>&nbsp;<span class="ident" id="2930294">flag</span><span class="op" id="2930298">,</span>&nbsp;<span class="ident" id="2930300">v</span>&nbsp;<span class="op" id="2930302">[</span><span class="op" id="2930303">]</span><span class="builtintype" id="2930304">rune</span><span class="op" id="2930308">,</span>&nbsp;<span class="ident" id="2930310">t</span>&nbsp;<span class="ident" id="2930312">Type</span><span class="op" id="2930316">)</span>&nbsp;<span class="ident" id="2930318">Value</span>&nbsp;<span class="op" id="2930324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930327">ret</span>&nbsp;<span class="op" id="2930331">:=</span>&nbsp;<span class="ident" id="2930334">New</span><span class="op" id="2930337">(</span><span class="ident" id="2930338">t</span><span class="op" id="2930339">)</span><span class="op" id="2930340">.</span><span class="ident" id="2930341">Elem</span><span class="op" id="2930345">(</span><span class="op" id="2930346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930349">ret</span><span class="op" id="2930352">.</span><span class="ident" id="2930353">setRunes</span><span class="op" id="2930361">(</span><span class="ident" id="2930362">v</span><span class="op" id="2930363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930366">ret</span><span class="op" id="2930369">.</span><span class="ident" id="2930370">flag</span>&nbsp;<span class="op" id="2930375">=</span>&nbsp;<span class="ident" id="2930377">ret</span><span class="op" id="2930380">.</span><span class="ident" id="2930381">flag</span><span class="op" id="2930385">&amp;^</span><span class="ident" id="2930387">flagAddr</span>&nbsp;<span class="op" id="2930396">|</span>&nbsp;<span class="ident" id="2930398">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930401">return</span>&nbsp;<span class="ident" id="2930408">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2930412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2930415">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2930471">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2930543">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2930615">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2930674">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2930706">func</span>&nbsp;<span class="ident" id="2930711">cvtInt</span><span class="op" id="2930717">(</span><span class="ident" id="2930718">v</span>&nbsp;<span class="ident" id="2930720">Value</span><span class="op" id="2930725">,</span>&nbsp;<span class="ident" id="2930727">t</span>&nbsp;<span class="ident" id="2930729">Type</span><span class="op" id="2930733">)</span>&nbsp;<span class="ident" id="2930735">Value</span>&nbsp;<span class="op" id="2930741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930744">return</span>&nbsp;<span class="ident" id="2930751">makeInt</span><span class="op" id="2930758">(</span><span class="ident" id="2930759">v</span><span class="op" id="2930760">.</span><span class="ident" id="2930761">flag</span><span class="op" id="2930765">&amp;</span><span class="ident" id="2930766">flagRO</span><span class="op" id="2930772">,</span>&nbsp;<span class="ident" id="2930774">uint64</span><span class="op" id="2930780">(</span><span class="ident" id="2930781">v</span><span class="op" id="2930782">.</span><span class="ident" id="2930783">Int</span><span class="op" id="2930786">(</span><span class="op" id="2930787">)</span><span class="op" id="2930788">)</span><span class="op" id="2930789">,</span>&nbsp;<span class="ident" id="2930791">t</span><span class="op" id="2930792">)</span><br>
<span class="lineno">2300</span><span class="op" id="2930794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2930797">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2930830">func</span>&nbsp;<span class="ident" id="2930835">cvtUint</span><span class="op" id="2930842">(</span><span class="ident" id="2930843">v</span>&nbsp;<span class="ident" id="2930845">Value</span><span class="op" id="2930850">,</span>&nbsp;<span class="ident" id="2930852">t</span>&nbsp;<span class="ident" id="2930854">Type</span><span class="op" id="2930858">)</span>&nbsp;<span class="ident" id="2930860">Value</span>&nbsp;<span class="op" id="2930866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930869">return</span>&nbsp;<span class="ident" id="2930876">makeInt</span><span class="op" id="2930883">(</span><span class="ident" id="2930884">v</span><span class="op" id="2930885">.</span><span class="ident" id="2930886">flag</span><span class="op" id="2930890">&amp;</span><span class="ident" id="2930891">flagRO</span><span class="op" id="2930897">,</span>&nbsp;<span class="ident" id="2930899">v</span><span class="op" id="2930900">.</span><span class="ident" id="2930901">Uint</span><span class="op" id="2930905">(</span><span class="op" id="2930906">)</span><span class="op" id="2930907">,</span>&nbsp;<span class="ident" id="2930909">t</span><span class="op" id="2930910">)</span><br>
<span class="lineno">2305</span><span class="op" id="2930912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2930915">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2930946">func</span>&nbsp;<span class="ident" id="2930951">cvtFloatInt</span><span class="op" id="2930962">(</span><span class="ident" id="2930963">v</span>&nbsp;<span class="ident" id="2930965">Value</span><span class="op" id="2930970">,</span>&nbsp;<span class="ident" id="2930972">t</span>&nbsp;<span class="ident" id="2930974">Type</span><span class="op" id="2930978">)</span>&nbsp;<span class="ident" id="2930980">Value</span>&nbsp;<span class="op" id="2930986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930989">return</span>&nbsp;<span class="ident" id="2930996">makeInt</span><span class="op" id="2931003">(</span><span class="ident" id="2931004">v</span><span class="op" id="2931005">.</span><span class="ident" id="2931006">flag</span><span class="op" id="2931010">&amp;</span><span class="ident" id="2931011">flagRO</span><span class="op" id="2931017">,</span>&nbsp;<span class="ident" id="2931019">uint64</span><span class="op" id="2931025">(</span><span class="ident" id="2931026">int64</span><span class="op" id="2931031">(</span><span class="ident" id="2931032">v</span><span class="op" id="2931033">.</span><span class="ident" id="2931034">Float</span><span class="op" id="2931039">(</span><span class="op" id="2931040">)</span><span class="op" id="2931041">)</span><span class="op" id="2931042">)</span><span class="op" id="2931043">,</span>&nbsp;<span class="ident" id="2931045">t</span><span class="op" id="2931046">)</span><br>
<span class="lineno">2310</span><span class="op" id="2931048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931051">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2931083">func</span>&nbsp;<span class="ident" id="2931088">cvtFloatUint</span><span class="op" id="2931100">(</span><span class="ident" id="2931101">v</span>&nbsp;<span class="ident" id="2931103">Value</span><span class="op" id="2931108">,</span>&nbsp;<span class="ident" id="2931110">t</span>&nbsp;<span class="ident" id="2931112">Type</span><span class="op" id="2931116">)</span>&nbsp;<span class="ident" id="2931118">Value</span>&nbsp;<span class="op" id="2931124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931127">return</span>&nbsp;<span class="ident" id="2931134">makeInt</span><span class="op" id="2931141">(</span><span class="ident" id="2931142">v</span><span class="op" id="2931143">.</span><span class="ident" id="2931144">flag</span><span class="op" id="2931148">&amp;</span><span class="ident" id="2931149">flagRO</span><span class="op" id="2931155">,</span>&nbsp;<span class="ident" id="2931157">uint64</span><span class="op" id="2931163">(</span><span class="ident" id="2931164">v</span><span class="op" id="2931165">.</span><span class="ident" id="2931166">Float</span><span class="op" id="2931171">(</span><span class="op" id="2931172">)</span><span class="op" id="2931173">)</span><span class="op" id="2931174">,</span>&nbsp;<span class="ident" id="2931176">t</span><span class="op" id="2931177">)</span><br>
<span class="lineno">2315</span><span class="op" id="2931179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931182">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2931213">func</span>&nbsp;<span class="ident" id="2931218">cvtIntFloat</span><span class="op" id="2931229">(</span><span class="ident" id="2931230">v</span>&nbsp;<span class="ident" id="2931232">Value</span><span class="op" id="2931237">,</span>&nbsp;<span class="ident" id="2931239">t</span>&nbsp;<span class="ident" id="2931241">Type</span><span class="op" id="2931245">)</span>&nbsp;<span class="ident" id="2931247">Value</span>&nbsp;<span class="op" id="2931253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931256">return</span>&nbsp;<span class="ident" id="2931263">makeFloat</span><span class="op" id="2931272">(</span><span class="ident" id="2931273">v</span><span class="op" id="2931274">.</span><span class="ident" id="2931275">flag</span><span class="op" id="2931279">&amp;</span><span class="ident" id="2931280">flagRO</span><span class="op" id="2931286">,</span>&nbsp;<span class="builtintype" id="2931288">float64</span><span class="op" id="2931295">(</span><span class="ident" id="2931296">v</span><span class="op" id="2931297">.</span><span class="ident" id="2931298">Int</span><span class="op" id="2931301">(</span><span class="op" id="2931302">)</span><span class="op" id="2931303">)</span><span class="op" id="2931304">,</span>&nbsp;<span class="ident" id="2931306">t</span><span class="op" id="2931307">)</span><br>
<span class="lineno">2320</span><span class="op" id="2931309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931312">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2931344">func</span>&nbsp;<span class="ident" id="2931349">cvtUintFloat</span><span class="op" id="2931361">(</span><span class="ident" id="2931362">v</span>&nbsp;<span class="ident" id="2931364">Value</span><span class="op" id="2931369">,</span>&nbsp;<span class="ident" id="2931371">t</span>&nbsp;<span class="ident" id="2931373">Type</span><span class="op" id="2931377">)</span>&nbsp;<span class="ident" id="2931379">Value</span>&nbsp;<span class="op" id="2931385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931388">return</span>&nbsp;<span class="ident" id="2931395">makeFloat</span><span class="op" id="2931404">(</span><span class="ident" id="2931405">v</span><span class="op" id="2931406">.</span><span class="ident" id="2931407">flag</span><span class="op" id="2931411">&amp;</span><span class="ident" id="2931412">flagRO</span><span class="op" id="2931418">,</span>&nbsp;<span class="builtintype" id="2931420">float64</span><span class="op" id="2931427">(</span><span class="ident" id="2931428">v</span><span class="op" id="2931429">.</span><span class="ident" id="2931430">Uint</span><span class="op" id="2931434">(</span><span class="op" id="2931435">)</span><span class="op" id="2931436">)</span><span class="op" id="2931437">,</span>&nbsp;<span class="ident" id="2931439">t</span><span class="op" id="2931440">)</span><br>
<span class="lineno">2325</span><span class="op" id="2931442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931445">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2931478">func</span>&nbsp;<span class="ident" id="2931483">cvtFloat</span><span class="op" id="2931491">(</span><span class="ident" id="2931492">v</span>&nbsp;<span class="ident" id="2931494">Value</span><span class="op" id="2931499">,</span>&nbsp;<span class="ident" id="2931501">t</span>&nbsp;<span class="ident" id="2931503">Type</span><span class="op" id="2931507">)</span>&nbsp;<span class="ident" id="2931509">Value</span>&nbsp;<span class="op" id="2931515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931518">return</span>&nbsp;<span class="ident" id="2931525">makeFloat</span><span class="op" id="2931534">(</span><span class="ident" id="2931535">v</span><span class="op" id="2931536">.</span><span class="ident" id="2931537">flag</span><span class="op" id="2931541">&amp;</span><span class="ident" id="2931542">flagRO</span><span class="op" id="2931548">,</span>&nbsp;<span class="ident" id="2931550">v</span><span class="op" id="2931551">.</span><span class="ident" id="2931552">Float</span><span class="op" id="2931557">(</span><span class="op" id="2931558">)</span><span class="op" id="2931559">,</span>&nbsp;<span class="ident" id="2931561">t</span><span class="op" id="2931562">)</span><br>
<span class="lineno">2330</span><span class="op" id="2931564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931567">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2931604">func</span>&nbsp;<span class="ident" id="2931609">cvtComplex</span><span class="op" id="2931619">(</span><span class="ident" id="2931620">v</span>&nbsp;<span class="ident" id="2931622">Value</span><span class="op" id="2931627">,</span>&nbsp;<span class="ident" id="2931629">t</span>&nbsp;<span class="ident" id="2931631">Type</span><span class="op" id="2931635">)</span>&nbsp;<span class="ident" id="2931637">Value</span>&nbsp;<span class="op" id="2931643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931646">return</span>&nbsp;<span class="ident" id="2931653">makeComplex</span><span class="op" id="2931664">(</span><span class="ident" id="2931665">v</span><span class="op" id="2931666">.</span><span class="ident" id="2931667">flag</span><span class="op" id="2931671">&amp;</span><span class="ident" id="2931672">flagRO</span><span class="op" id="2931678">,</span>&nbsp;<span class="ident" id="2931680">v</span><span class="op" id="2931681">.</span><span class="ident" id="2931682">Complex</span><span class="op" id="2931689">(</span><span class="op" id="2931690">)</span><span class="op" id="2931691">,</span>&nbsp;<span class="ident" id="2931693">t</span><span class="op" id="2931694">)</span><br>
<span class="lineno">2335</span><span class="op" id="2931696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931699">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2931729">func</span>&nbsp;<span class="ident" id="2931734">cvtIntString</span><span class="op" id="2931746">(</span><span class="ident" id="2931747">v</span>&nbsp;<span class="ident" id="2931749">Value</span><span class="op" id="2931754">,</span>&nbsp;<span class="ident" id="2931756">t</span>&nbsp;<span class="ident" id="2931758">Type</span><span class="op" id="2931762">)</span>&nbsp;<span class="ident" id="2931764">Value</span>&nbsp;<span class="op" id="2931770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931773">return</span>&nbsp;<span class="ident" id="2931780">makeString</span><span class="op" id="2931790">(</span><span class="ident" id="2931791">v</span><span class="op" id="2931792">.</span><span class="ident" id="2931793">flag</span><span class="op" id="2931797">&amp;</span><span class="ident" id="2931798">flagRO</span><span class="op" id="2931804">,</span>&nbsp;<span class="builtintype" id="2931806">string</span><span class="op" id="2931812">(</span><span class="ident" id="2931813">v</span><span class="op" id="2931814">.</span><span class="ident" id="2931815">Int</span><span class="op" id="2931818">(</span><span class="op" id="2931819">)</span><span class="op" id="2931820">)</span><span class="op" id="2931821">,</span>&nbsp;<span class="ident" id="2931823">t</span><span class="op" id="2931824">)</span><br>
<span class="lineno">2340</span><span class="op" id="2931826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931829">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2931860">func</span>&nbsp;<span class="ident" id="2931865">cvtUintString</span><span class="op" id="2931878">(</span><span class="ident" id="2931879">v</span>&nbsp;<span class="ident" id="2931881">Value</span><span class="op" id="2931886">,</span>&nbsp;<span class="ident" id="2931888">t</span>&nbsp;<span class="ident" id="2931890">Type</span><span class="op" id="2931894">)</span>&nbsp;<span class="ident" id="2931896">Value</span>&nbsp;<span class="op" id="2931902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931905">return</span>&nbsp;<span class="ident" id="2931912">makeString</span><span class="op" id="2931922">(</span><span class="ident" id="2931923">v</span><span class="op" id="2931924">.</span><span class="ident" id="2931925">flag</span><span class="op" id="2931929">&amp;</span><span class="ident" id="2931930">flagRO</span><span class="op" id="2931936">,</span>&nbsp;<span class="builtintype" id="2931938">string</span><span class="op" id="2931944">(</span><span class="ident" id="2931945">v</span><span class="op" id="2931946">.</span><span class="ident" id="2931947">Uint</span><span class="op" id="2931951">(</span><span class="op" id="2931952">)</span><span class="op" id="2931953">)</span><span class="op" id="2931954">,</span>&nbsp;<span class="ident" id="2931956">t</span><span class="op" id="2931957">)</span><br>
<span class="lineno">2345</span><span class="op" id="2931959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931962">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2931993">func</span>&nbsp;<span class="ident" id="2931998">cvtBytesString</span><span class="op" id="2932012">(</span><span class="ident" id="2932013">v</span>&nbsp;<span class="ident" id="2932015">Value</span><span class="op" id="2932020">,</span>&nbsp;<span class="ident" id="2932022">t</span>&nbsp;<span class="ident" id="2932024">Type</span><span class="op" id="2932028">)</span>&nbsp;<span class="ident" id="2932030">Value</span>&nbsp;<span class="op" id="2932036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2932039">return</span>&nbsp;<span class="ident" id="2932046">makeString</span><span class="op" id="2932056">(</span><span class="ident" id="2932057">v</span><span class="op" id="2932058">.</span><span class="ident" id="2932059">flag</span><span class="op" id="2932063">&amp;</span><span class="ident" id="2932064">flagRO</span><span class="op" id="2932070">,</span>&nbsp;<span class="builtintype" id="2932072">string</span><span class="op" id="2932078">(</span><span class="ident" id="2932079">v</span><span class="op" id="2932080">.</span><span class="ident" id="2932081">Bytes</span><span class="op" id="2932086">(</span><span class="op" id="2932087">)</span><span class="op" id="2932088">)</span><span class="op" id="2932089">,</span>&nbsp;<span class="ident" id="2932091">t</span><span class="op" id="2932092">)</span><br>
<span class="lineno">2350</span><span class="op" id="2932094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2932097">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2932128">func</span>&nbsp;<span class="ident" id="2932133">cvtStringBytes</span><span class="op" id="2932147">(</span><span class="ident" id="2932148">v</span>&nbsp;<span class="ident" id="2932150">Value</span><span class="op" id="2932155">,</span>&nbsp;<span class="ident" id="2932157">t</span>&nbsp;<span class="ident" id="2932159">Type</span><span class="op" id="2932163">)</span>&nbsp;<span class="ident" id="2932165">Value</span>&nbsp;<span class="op" id="2932171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2932174">return</span>&nbsp;<span class="ident" id="2932181">makeBytes</span><span class="op" id="2932190">(</span><span class="ident" id="2932191">v</span><span class="op" id="2932192">.</span><span class="ident" id="2932193">flag</span><span class="op" id="2932197">&amp;</span><span class="ident" id="2932198">flagRO</span><span class="op" id="2932204">,</span>&nbsp;<span class="op" id="2932206">[</span><span class="op" id="2932207">]</span><span class="builtintype" id="2932208">byte</span><span class="op" id="2932212">(</span><span class="ident" id="2932213">v</span><span class="op" id="2932214">.</span><span class="ident" id="2932215">String</span><span class="op" id="2932221">(</span><span class="op" id="2932222">)</span><span class="op" id="2932223">)</span><span class="op" id="2932224">,</span>&nbsp;<span class="ident" id="2932226">t</span><span class="op" id="2932227">)</span><br>
<span class="lineno">2355</span><span class="op" id="2932229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2932232">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2932263">func</span>&nbsp;<span class="ident" id="2932268">cvtRunesString</span><span class="op" id="2932282">(</span><span class="ident" id="2932283">v</span>&nbsp;<span class="ident" id="2932285">Value</span><span class="op" id="2932290">,</span>&nbsp;<span class="ident" id="2932292">t</span>&nbsp;<span class="ident" id="2932294">Type</span><span class="op" id="2932298">)</span>&nbsp;<span class="ident" id="2932300">Value</span>&nbsp;<span class="op" id="2932306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2932309">return</span>&nbsp;<span class="ident" id="2932316">makeString</span><span class="op" id="2932326">(</span><span class="ident" id="2932327">v</span><span class="op" id="2932328">.</span><span class="ident" id="2932329">flag</span><span class="op" id="2932333">&amp;</span><span class="ident" id="2932334">flagRO</span><span class="op" id="2932340">,</span>&nbsp;<span class="builtintype" id="2932342">string</span><span class="op" id="2932348">(</span><span class="ident" id="2932349">v</span><span class="op" id="2932350">.</span><span class="ident" id="2932351">runes</span><span class="op" id="2932356">(</span><span class="op" id="2932357">)</span><span class="op" id="2932358">)</span><span class="op" id="2932359">,</span>&nbsp;<span class="ident" id="2932361">t</span><span class="op" id="2932362">)</span><br>
<span class="lineno">2360</span><span class="op" id="2932364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2932367">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2932398">func</span>&nbsp;<span class="ident" id="2932403">cvtStringRunes</span><span class="op" id="2932417">(</span><span class="ident" id="2932418">v</span>&nbsp;<span class="ident" id="2932420">Value</span><span class="op" id="2932425">,</span>&nbsp;<span class="ident" id="2932427">t</span>&nbsp;<span class="ident" id="2932429">Type</span><span class="op" id="2932433">)</span>&nbsp;<span class="ident" id="2932435">Value</span>&nbsp;<span class="op" id="2932441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2932444">return</span>&nbsp;<span class="ident" id="2932451">makeRunes</span><span class="op" id="2932460">(</span><span class="ident" id="2932461">v</span><span class="op" id="2932462">.</span><span class="ident" id="2932463">flag</span><span class="op" id="2932467">&amp;</span><span class="ident" id="2932468">flagRO</span><span class="op" id="2932474">,</span>&nbsp;<span class="op" id="2932476">[</span><span class="op" id="2932477">]</span><span class="builtintype" id="2932478">rune</span><span class="op" id="2932482">(</span><span class="ident" id="2932483">v</span><span class="op" id="2932484">.</span><span class="ident" id="2932485">String</span><span class="op" id="2932491">(</span><span class="op" id="2932492">)</span><span class="op" id="2932493">)</span><span class="op" id="2932494">,</span>&nbsp;<span class="ident" id="2932496">t</span><span class="op" id="2932497">)</span><br>
<span class="lineno">2365</span><span class="op" id="2932499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2932502">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2932528">func</span>&nbsp;<span class="ident" id="2932533">cvtDirect</span><span class="op" id="2932542">(</span><span class="ident" id="2932543">v</span>&nbsp;<span class="ident" id="2932545">Value</span><span class="op" id="2932550">,</span>&nbsp;<span class="ident" id="2932552">typ</span>&nbsp;<span class="ident" id="2932556">Type</span><span class="op" id="2932560">)</span>&nbsp;<span class="ident" id="2932562">Value</span>&nbsp;<span class="op" id="2932568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932571">f</span>&nbsp;<span class="op" id="2932573">:=</span>&nbsp;<span class="ident" id="2932576">v</span><span class="op" id="2932577">.</span><span class="ident" id="2932578">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932584">t</span>&nbsp;<span class="op" id="2932586">:=</span>&nbsp;<span class="ident" id="2932589">typ</span><span class="op" id="2932592">.</span><span class="ident" id="2932593">common</span><span class="op" id="2932599">(</span><span class="op" id="2932600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932603">ptr</span>&nbsp;<span class="op" id="2932607">:=</span>&nbsp;<span class="ident" id="2932610">v</span><span class="op" id="2932611">.</span><span class="ident" id="2932612">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2932617">if</span>&nbsp;<span class="ident" id="2932620">f</span><span class="op" id="2932621">&amp;</span><span class="ident" id="2932622">flagAddr</span>&nbsp;<span class="op" id="2932631">!=</span>&nbsp;<span class="num" id="2932634">0</span>&nbsp;<span class="op" id="2932636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2932640">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932682">c</span>&nbsp;<span class="op" id="2932684">:=</span>&nbsp;<span class="ident" id="2932687">unsafe_New</span><span class="op" id="2932697">(</span><span class="ident" id="2932698">t</span><span class="op" id="2932699">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932703">memmove</span><span class="op" id="2932710">(</span><span class="ident" id="2932711">c</span><span class="op" id="2932712">,</span>&nbsp;<span class="ident" id="2932714">ptr</span><span class="op" id="2932717">,</span>&nbsp;<span class="ident" id="2932719">t</span><span class="op" id="2932720">.</span><span class="ident" id="2932721">size</span><span class="op" id="2932725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932729">ptr</span>&nbsp;<span class="op" id="2932733">=</span>&nbsp;<span class="ident" id="2932735">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932739">f</span>&nbsp;<span class="op" id="2932741">&amp;^=</span>&nbsp;<span class="ident" id="2932745">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2932755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2932758">return</span>&nbsp;<span class="ident" id="2932765">Value</span><span class="op" id="2932770">{</span><span class="ident" id="2932771">t</span><span class="op" id="2932772">,</span>&nbsp;<span class="ident" id="2932774">ptr</span><span class="op" id="2932777">,</span>&nbsp;<span class="ident" id="2932779">v</span><span class="op" id="2932780">.</span><span class="ident" id="2932781">flag</span><span class="op" id="2932785">&amp;</span><span class="ident" id="2932786">flagRO</span>&nbsp;<span class="op" id="2932793">|</span>&nbsp;<span class="ident" id="2932795">f</span><span class="op" id="2932796">}</span>&nbsp;<span class="comment" id="2932798">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2932823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2932826">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2932862">func</span>&nbsp;<span class="ident" id="2932867">cvtT2I</span><span class="op" id="2932873">(</span><span class="ident" id="2932874">v</span>&nbsp;<span class="ident" id="2932876">Value</span><span class="op" id="2932881">,</span>&nbsp;<span class="ident" id="2932883">typ</span>&nbsp;<span class="ident" id="2932887">Type</span><span class="op" id="2932891">)</span>&nbsp;<span class="ident" id="2932893">Value</span>&nbsp;<span class="op" id="2932899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932902">target</span>&nbsp;<span class="op" id="2932909">:=</span>&nbsp;<span class="ident" id="2932912">unsafe_New</span><span class="op" id="2932922">(</span><span class="ident" id="2932923">typ</span><span class="op" id="2932926">.</span><span class="ident" id="2932927">common</span><span class="op" id="2932933">(</span><span class="op" id="2932934">)</span><span class="op" id="2932935">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2932938">x</span>&nbsp;<span class="op" id="2932940">:=</span>&nbsp;<span class="ident" id="2932943">valueInterface</span><span class="op" id="2932957">(</span><span class="ident" id="2932958">v</span><span class="op" id="2932959">,</span>&nbsp;<span class="builtintype" id="2932961">false</span><span class="op" id="2932966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2932969">if</span>&nbsp;<span class="ident" id="2932972">typ</span><span class="op" id="2932975">.</span><span class="ident" id="2932976">NumMethod</span><span class="op" id="2932985">(</span><span class="op" id="2932986">)</span>&nbsp;<span class="op" id="2932988">==</span>&nbsp;<span class="num" id="2932991">0</span>&nbsp;<span class="op" id="2932993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2932997">*</span><span class="op" id="2932998">(</span><span class="op" id="2932999">*</span><span class="keyword" id="2933000">interface</span><span class="op" id="2933009">{</span><span class="op" id="2933010">}</span><span class="op" id="2933011">)</span><span class="op" id="2933012">(</span><span class="ident" id="2933013">target</span><span class="op" id="2933019">)</span>&nbsp;<span class="op" id="2933021">=</span>&nbsp;<span class="ident" id="2933023">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2933026">}</span>&nbsp;<span class="keyword" id="2933028">else</span>&nbsp;<span class="op" id="2933033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2933037">ifaceE2I</span><span class="op" id="2933045">(</span><span class="ident" id="2933046">typ</span><span class="op" id="2933049">.</span><span class="op" id="2933050">(</span><span class="op" id="2933051">*</span><span class="ident" id="2933052">rtype</span><span class="op" id="2933057">)</span><span class="op" id="2933058">,</span>&nbsp;<span class="ident" id="2933060">x</span><span class="op" id="2933061">,</span>&nbsp;<span class="ident" id="2933063">target</span><span class="op" id="2933069">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2933072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933075">return</span>&nbsp;<span class="ident" id="2933082">Value</span><span class="op" id="2933087">{</span><span class="ident" id="2933088">typ</span><span class="op" id="2933091">.</span><span class="ident" id="2933092">common</span><span class="op" id="2933098">(</span><span class="op" id="2933099">)</span><span class="op" id="2933100">,</span>&nbsp;<span class="ident" id="2933102">target</span><span class="op" id="2933108">,</span>&nbsp;<span class="ident" id="2933110">v</span><span class="op" id="2933111">.</span><span class="ident" id="2933112">flag</span><span class="op" id="2933116">&amp;</span><span class="ident" id="2933117">flagRO</span>&nbsp;<span class="op" id="2933124">|</span>&nbsp;<span class="ident" id="2933126">flagIndir</span>&nbsp;<span class="op" id="2933136">|</span>&nbsp;<span class="ident" id="2933138">flag</span><span class="op" id="2933142">(</span><span class="ident" id="2933143">Interface</span><span class="op" id="2933152">)</span><span class="op" id="2933153">}</span><br>
<span class="lineno"></span><span class="op" id="2933155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2933158">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2933195">func</span>&nbsp;<span class="ident" id="2933200">cvtI2I</span><span class="op" id="2933206">(</span><span class="ident" id="2933207">v</span>&nbsp;<span class="ident" id="2933209">Value</span><span class="op" id="2933214">,</span>&nbsp;<span class="ident" id="2933216">typ</span>&nbsp;<span class="ident" id="2933220">Type</span><span class="op" id="2933224">)</span>&nbsp;<span class="ident" id="2933226">Value</span>&nbsp;<span class="op" id="2933232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933235">if</span>&nbsp;<span class="ident" id="2933238">v</span><span class="op" id="2933239">.</span><span class="ident" id="2933240">IsNil</span><span class="op" id="2933245">(</span><span class="op" id="2933246">)</span>&nbsp;<span class="op" id="2933248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2933252">ret</span>&nbsp;<span class="op" id="2933256">:=</span>&nbsp;<span class="ident" id="2933259">Zero</span><span class="op" id="2933263">(</span><span class="ident" id="2933264">typ</span><span class="op" id="2933267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2933271">ret</span><span class="op" id="2933274">.</span><span class="ident" id="2933275">flag</span>&nbsp;<span class="op" id="2933280">|=</span>&nbsp;<span class="ident" id="2933283">v</span><span class="op" id="2933284">.</span><span class="ident" id="2933285">flag</span>&nbsp;<span class="op" id="2933290">&amp;</span>&nbsp;<span class="ident" id="2933292">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933301">return</span>&nbsp;<span class="ident" id="2933308">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2933313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933316">return</span>&nbsp;<span class="ident" id="2933323">cvtT2I</span><span class="op" id="2933329">(</span><span class="ident" id="2933330">v</span><span class="op" id="2933331">.</span><span class="ident" id="2933332">Elem</span><span class="op" id="2933336">(</span><span class="op" id="2933337">)</span><span class="op" id="2933338">,</span>&nbsp;<span class="ident" id="2933340">typ</span><span class="op" id="2933343">)</span><br>
<span class="lineno"></span><span class="op" id="2933345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2933348">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2933377">func</span>&nbsp;<span class="ident" id="2933382">chancap</span><span class="op" id="2933389">(</span><span class="ident" id="2933390">ch</span>&nbsp;<span class="ident" id="2933393">unsafe</span><span class="op" id="2933399">.</span><span class="ident" id="2933400">Pointer</span><span class="op" id="2933407">)</span>&nbsp;<span class="builtintype" id="2933409">int</span><br>
<span class="lineno"></span><span class="keyword" id="2933413">func</span>&nbsp;<span class="ident" id="2933418">chanclose</span><span class="op" id="2933427">(</span><span class="ident" id="2933428">ch</span>&nbsp;<span class="ident" id="2933431">unsafe</span><span class="op" id="2933437">.</span><span class="ident" id="2933438">Pointer</span><span class="op" id="2933445">)</span><br>
<span class="lineno"></span><span class="keyword" id="2933447">func</span>&nbsp;<span class="ident" id="2933452">chanlen</span><span class="op" id="2933459">(</span><span class="ident" id="2933460">ch</span>&nbsp;<span class="ident" id="2933463">unsafe</span><span class="op" id="2933469">.</span><span class="ident" id="2933470">Pointer</span><span class="op" id="2933477">)</span>&nbsp;<span class="builtintype" id="2933479">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2933484">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2933498">func</span>&nbsp;<span class="ident" id="2933503">chanrecv</span><span class="op" id="2933511">(</span><span class="ident" id="2933512">t</span>&nbsp;<span class="op" id="2933514">*</span><span class="ident" id="2933515">rtype</span><span class="op" id="2933520">,</span>&nbsp;<span class="ident" id="2933522">ch</span>&nbsp;<span class="ident" id="2933525">unsafe</span><span class="op" id="2933531">.</span><span class="ident" id="2933532">Pointer</span><span class="op" id="2933539">,</span>&nbsp;<span class="ident" id="2933541">nb</span>&nbsp;<span class="builtintype" id="2933544">bool</span><span class="op" id="2933548">,</span>&nbsp;<span class="ident" id="2933550">val</span>&nbsp;<span class="ident" id="2933554">unsafe</span><span class="op" id="2933560">.</span><span class="ident" id="2933561">Pointer</span><span class="op" id="2933568">)</span>&nbsp;<span class="op" id="2933570">(</span><span class="ident" id="2933571">selected</span><span class="op" id="2933579">,</span>&nbsp;<span class="ident" id="2933581">received</span>&nbsp;<span class="builtintype" id="2933590">bool</span><span class="op" id="2933594">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2933597">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2933611">func</span>&nbsp;<span class="ident" id="2933616">chansend</span><span class="op" id="2933624">(</span><span class="ident" id="2933625">t</span>&nbsp;<span class="op" id="2933627">*</span><span class="ident" id="2933628">rtype</span><span class="op" id="2933633">,</span>&nbsp;<span class="ident" id="2933635">ch</span>&nbsp;<span class="ident" id="2933638">unsafe</span><span class="op" id="2933644">.</span><span class="ident" id="2933645">Pointer</span><span class="op" id="2933652">,</span>&nbsp;<span class="ident" id="2933654">val</span>&nbsp;<span class="ident" id="2933658">unsafe</span><span class="op" id="2933664">.</span><span class="ident" id="2933665">Pointer</span><span class="op" id="2933672">,</span>&nbsp;<span class="ident" id="2933674">nb</span>&nbsp;<span class="builtintype" id="2933677">bool</span><span class="op" id="2933681">)</span>&nbsp;<span class="builtintype" id="2933683">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2933689">func</span>&nbsp;<span class="ident" id="2933694">makechan</span><span class="op" id="2933702">(</span><span class="ident" id="2933703">typ</span>&nbsp;<span class="op" id="2933707">*</span><span class="ident" id="2933708">rtype</span><span class="op" id="2933713">,</span>&nbsp;<span class="ident" id="2933715">size</span>&nbsp;<span class="ident" id="2933720">uint64</span><span class="op" id="2933726">)</span>&nbsp;<span class="op" id="2933728">(</span><span class="ident" id="2933729">ch</span>&nbsp;<span class="ident" id="2933732">unsafe</span><span class="op" id="2933738">.</span><span class="ident" id="2933739">Pointer</span><span class="op" id="2933746">)</span><br>
<span class="lineno"></span><span class="keyword" id="2933748">func</span>&nbsp;<span class="ident" id="2933753">makemap</span><span class="op" id="2933760">(</span><span class="ident" id="2933761">t</span>&nbsp;<span class="op" id="2933763">*</span><span class="ident" id="2933764">rtype</span><span class="op" id="2933769">)</span>&nbsp;<span class="op" id="2933771">(</span><span class="ident" id="2933772">m</span>&nbsp;<span class="ident" id="2933774">unsafe</span><span class="op" id="2933780">.</span><span class="ident" id="2933781">Pointer</span><span class="op" id="2933788">)</span><br>
<span class="lineno"></span><span class="keyword" id="2933790">func</span>&nbsp;<span class="ident" id="2933795">mapaccess</span><span class="op" id="2933804">(</span><span class="ident" id="2933805">t</span>&nbsp;<span class="op" id="2933807">*</span><span class="ident" id="2933808">rtype</span><span class="op" id="2933813">,</span>&nbsp;<span class="ident" id="2933815">m</span>&nbsp;<span class="ident" id="2933817">unsafe</span><span class="op" id="2933823">.</span><span class="ident" id="2933824">Pointer</span><span class="op" id="2933831">,</span>&nbsp;<span class="ident" id="2933833">key</span>&nbsp;<span class="ident" id="2933837">unsafe</span><span class="op" id="2933843">.</span><span class="ident" id="2933844">Pointer</span><span class="op" id="2933851">)</span>&nbsp;<span class="op" id="2933853">(</span><span class="ident" id="2933854">val</span>&nbsp;<span class="ident" id="2933858">unsafe</span><span class="op" id="2933864">.</span><span class="ident" id="2933865">Pointer</span><span class="op" id="2933872">)</span><br>
<span class="lineno"></span><span class="keyword" id="2933874">func</span>&nbsp;<span class="ident" id="2933879">mapassign</span><span class="op" id="2933888">(</span><span class="ident" id="2933889">t</span>&nbsp;<span class="op" id="2933891">*</span><span class="ident" id="2933892">rtype</span><span class="op" id="2933897">,</span>&nbsp;<span class="ident" id="2933899">m</span>&nbsp;<span class="ident" id="2933901">unsafe</span><span class="op" id="2933907">.</span><span class="ident" id="2933908">Pointer</span><span class="op" id="2933915">,</span>&nbsp;<span class="ident" id="2933917">key</span><span class="op" id="2933920">,</span>&nbsp;<span class="ident" id="2933922">val</span>&nbsp;<span class="ident" id="2933926">unsafe</span><span class="op" id="2933932">.</span><span class="ident" id="2933933">Pointer</span><span class="op" id="2933940">)</span><br>
<span class="lineno"></span><span class="keyword" id="2933942">func</span>&nbsp;<span class="ident" id="2933947">mapdelete</span><span class="op" id="2933956">(</span><span class="ident" id="2933957">t</span>&nbsp;<span class="op" id="2933959">*</span><span class="ident" id="2933960">rtype</span><span class="op" id="2933965">,</span>&nbsp;<span class="ident" id="2933967">m</span>&nbsp;<span class="ident" id="2933969">unsafe</span><span class="op" id="2933975">.</span><span class="ident" id="2933976">Pointer</span><span class="op" id="2933983">,</span>&nbsp;<span class="ident" id="2933985">key</span>&nbsp;<span class="ident" id="2933989">unsafe</span><span class="op" id="2933995">.</span><span class="ident" id="2933996">Pointer</span><span class="op" id="2934003">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2934005">func</span>&nbsp;<span class="ident" id="2934010">mapiterinit</span><span class="op" id="2934021">(</span><span class="ident" id="2934022">t</span>&nbsp;<span class="op" id="2934024">*</span><span class="ident" id="2934025">rtype</span><span class="op" id="2934030">,</span>&nbsp;<span class="ident" id="2934032">m</span>&nbsp;<span class="ident" id="2934034">unsafe</span><span class="op" id="2934040">.</span><span class="ident" id="2934041">Pointer</span><span class="op" id="2934048">)</span>&nbsp;<span class="ident" id="2934050">unsafe</span><span class="op" id="2934056">.</span><span class="ident" id="2934057">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2934065">func</span>&nbsp;<span class="ident" id="2934070">mapiterkey</span><span class="op" id="2934080">(</span><span class="ident" id="2934081">it</span>&nbsp;<span class="ident" id="2934084">unsafe</span><span class="op" id="2934090">.</span><span class="ident" id="2934091">Pointer</span><span class="op" id="2934098">)</span>&nbsp;<span class="op" id="2934100">(</span><span class="ident" id="2934101">key</span>&nbsp;<span class="ident" id="2934105">unsafe</span><span class="op" id="2934111">.</span><span class="ident" id="2934112">Pointer</span><span class="op" id="2934119">)</span><br>
<span class="lineno"></span><span class="keyword" id="2934121">func</span>&nbsp;<span class="ident" id="2934126">mapiternext</span><span class="op" id="2934137">(</span><span class="ident" id="2934138">it</span>&nbsp;<span class="ident" id="2934141">unsafe</span><span class="op" id="2934147">.</span><span class="ident" id="2934148">Pointer</span><span class="op" id="2934155">)</span><br>
<span class="lineno"></span><span class="keyword" id="2934157">func</span>&nbsp;<span class="ident" id="2934162">maplen</span><span class="op" id="2934168">(</span><span class="ident" id="2934169">m</span>&nbsp;<span class="ident" id="2934171">unsafe</span><span class="op" id="2934177">.</span><span class="ident" id="2934178">Pointer</span><span class="op" id="2934185">)</span>&nbsp;<span class="builtintype" id="2934187">int</span><br>
<span class="lineno"></span><span class="keyword" id="2934191">func</span>&nbsp;<span class="ident" id="2934196">call</span><span class="op" id="2934200">(</span><span class="ident" id="2934201">fn</span><span class="op" id="2934203">,</span>&nbsp;<span class="ident" id="2934205">arg</span>&nbsp;<span class="ident" id="2934209">unsafe</span><span class="op" id="2934215">.</span><span class="ident" id="2934216">Pointer</span><span class="op" id="2934223">,</span>&nbsp;<span class="ident" id="2934225">n</span>&nbsp;<span class="builtintype" id="2934227">uint32</span><span class="op" id="2934233">,</span>&nbsp;<span class="ident" id="2934235">retoffset</span>&nbsp;<span class="builtintype" id="2934245">uint32</span><span class="op" id="2934251">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2934254">func</span>&nbsp;<span class="ident" id="2934259">ifaceE2I</span><span class="op" id="2934267">(</span><span class="ident" id="2934268">t</span>&nbsp;<span class="op" id="2934270">*</span><span class="ident" id="2934271">rtype</span><span class="op" id="2934276">,</span>&nbsp;<span class="ident" id="2934278">src</span>&nbsp;<span class="keyword" id="2934282">interface</span><span class="op" id="2934291">{</span><span class="op" id="2934292">}</span><span class="op" id="2934293">,</span>&nbsp;<span class="ident" id="2934295">dst</span>&nbsp;<span class="ident" id="2934299">unsafe</span><span class="op" id="2934305">.</span><span class="ident" id="2934306">Pointer</span><span class="op" id="2934313">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2934316">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2934330">func</span>&nbsp;<span class="ident" id="2934335">memmove</span><span class="op" id="2934342">(</span><span class="ident" id="2934343">adst</span><span class="op" id="2934347">,</span>&nbsp;<span class="ident" id="2934349">asrc</span>&nbsp;<span class="ident" id="2934354">unsafe</span><span class="op" id="2934360">.</span><span class="ident" id="2934361">Pointer</span><span class="op" id="2934368">,</span>&nbsp;<span class="ident" id="2934370">n</span>&nbsp;<span class="builtintype" id="2934372">uintptr</span><span class="op" id="2934379">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2934382">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2934436">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2934497">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2934528">func</span>&nbsp;<span class="ident" id="2934533">escapes</span><span class="op" id="2934540">(</span><span class="ident" id="2934541">x</span>&nbsp;<span class="keyword" id="2934543">interface</span><span class="op" id="2934552">{</span><span class="op" id="2934553">}</span><span class="op" id="2934554">)</span>&nbsp;<span class="op" id="2934556">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2934559">if</span>&nbsp;<span class="ident" id="2934562">dummy</span><span class="op" id="2934567">.</span><span class="ident" id="2934568">b</span>&nbsp;<span class="op" id="2934570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2934574">dummy</span><span class="op" id="2934579">.</span><span class="ident" id="2934580">x</span>&nbsp;<span class="op" id="2934582">=</span>&nbsp;<span class="ident" id="2934584">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2934587">}</span><br>
<span class="lineno"></span><span class="op" id="2934589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2934592">var</span>&nbsp;<span class="ident" id="2934596">dummy</span>&nbsp;<span class="keyword" id="2934602">struct</span>&nbsp;<span class="op" id="2934609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2934612">b</span>&nbsp;<span class="builtintype" id="2934614">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2934620">x</span>&nbsp;<span class="keyword" id="2934622">interface</span><span class="op" id="2934631">{</span><span class="op" id="2934632">}</span><br>
<span class="lineno"></span><span class="op" id="2934634">}</span>
</div>
</body>
</html>
