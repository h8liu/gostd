<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html" class="current">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7527979">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7528035">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7528089">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7528140">package</span>&nbsp;<span class="ident" id="7528148">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7528153">import</span>&nbsp;<span class="op" id="7528160">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7528163">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7528170">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7528181">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7528191">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7528194">func</span>&nbsp;<span class="op" id="7528199">(</span><span class="ident" id="7528200">ti</span>&nbsp;<span class="op" id="7528203">*</span><span class="ident" id="7528204">testInterface</span><span class="op" id="7528217">)</span>&nbsp;<span class="ident" id="7528219">setBroadcast</span><span class="op" id="7528231">(</span><span class="ident" id="7528232">suffix</span>&nbsp;<span class="builtintype" id="7528239">int</span><span class="op" id="7528242">)</span>&nbsp;<span class="builtintype" id="7528244">error</span>&nbsp;<span class="op" id="7528250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528253">ti</span><span class="op" id="7528255">.</span><span class="ident" id="7528256">name</span>&nbsp;<span class="op" id="7528261">=</span>&nbsp;<span class="ident" id="7528263">fmt</span><span class="op" id="7528266">.</span><span class="ident" id="7528267">Sprintf</span><span class="op" id="7528274">(</span><span class="string" id="7528275">&#34;gotest%d&#34;</span><span class="op" id="7528285">,</span>&nbsp;<span class="ident" id="7528287">suffix</span><span class="op" id="7528293">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528296">xname</span><span class="op" id="7528301">,</span>&nbsp;<span class="ident" id="7528303">err</span>&nbsp;<span class="op" id="7528307">:=</span>&nbsp;<span class="ident" id="7528310">exec</span><span class="op" id="7528314">.</span><span class="ident" id="7528315">LookPath</span><span class="op" id="7528323">(</span><span class="string" id="7528324">&#34;ip&#34;</span><span class="op" id="7528328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528331">if</span>&nbsp;<span class="ident" id="7528334">err</span>&nbsp;<span class="op" id="7528338">!=</span>&nbsp;<span class="ident" id="7528341">nil</span>&nbsp;<span class="op" id="7528345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528349">return</span>&nbsp;<span class="ident" id="7528356">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528364">ti</span><span class="op" id="7528366">.</span><span class="ident" id="7528367">setupCmds</span>&nbsp;<span class="op" id="7528377">=</span>&nbsp;<span class="builtinfunc" id="7528379">append</span><span class="op" id="7528385">(</span><span class="ident" id="7528386">ti</span><span class="op" id="7528388">.</span><span class="ident" id="7528389">setupCmds</span><span class="op" id="7528398">,</span>&nbsp;<span class="op" id="7528400">&amp;</span><span class="ident" id="7528401">exec</span><span class="op" id="7528405">.</span><span class="ident" id="7528406">Cmd</span><span class="op" id="7528409">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528413">Path</span><span class="op" id="7528417">:</span>&nbsp;<span class="ident" id="7528419">xname</span><span class="op" id="7528424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528428">Args</span><span class="op" id="7528432">:</span>&nbsp;<span class="op" id="7528434">[</span><span class="op" id="7528435">]</span><span class="builtintype" id="7528436">string</span><span class="op" id="7528442">{</span><span class="string" id="7528443">&#34;ip&#34;</span><span class="op" id="7528447">,</span>&nbsp;<span class="string" id="7528449">&#34;link&#34;</span><span class="op" id="7528455">,</span>&nbsp;<span class="string" id="7528457">&#34;add&#34;</span><span class="op" id="7528462">,</span>&nbsp;<span class="ident" id="7528464">ti</span><span class="op" id="7528466">.</span><span class="ident" id="7528467">name</span><span class="op" id="7528471">,</span>&nbsp;<span class="string" id="7528473">&#34;type&#34;</span><span class="op" id="7528479">,</span>&nbsp;<span class="string" id="7528481">&#34;dummy&#34;</span><span class="op" id="7528488">}</span><span class="op" id="7528489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528492">}</span><span class="op" id="7528493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528496">ti</span><span class="op" id="7528498">.</span><span class="ident" id="7528499">teardownCmds</span>&nbsp;<span class="op" id="7528512">=</span>&nbsp;<span class="builtinfunc" id="7528514">append</span><span class="op" id="7528520">(</span><span class="ident" id="7528521">ti</span><span class="op" id="7528523">.</span><span class="ident" id="7528524">teardownCmds</span><span class="op" id="7528536">,</span>&nbsp;<span class="op" id="7528538">&amp;</span><span class="ident" id="7528539">exec</span><span class="op" id="7528543">.</span><span class="ident" id="7528544">Cmd</span><span class="op" id="7528547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528551">Path</span><span class="op" id="7528555">:</span>&nbsp;<span class="ident" id="7528557">xname</span><span class="op" id="7528562">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528566">Args</span><span class="op" id="7528570">:</span>&nbsp;<span class="op" id="7528572">[</span><span class="op" id="7528573">]</span><span class="builtintype" id="7528574">string</span><span class="op" id="7528580">{</span><span class="string" id="7528581">&#34;ip&#34;</span><span class="op" id="7528585">,</span>&nbsp;<span class="string" id="7528587">&#34;link&#34;</span><span class="op" id="7528593">,</span>&nbsp;<span class="string" id="7528595">&#34;delete&#34;</span><span class="op" id="7528603">,</span>&nbsp;<span class="ident" id="7528605">ti</span><span class="op" id="7528607">.</span><span class="ident" id="7528608">name</span><span class="op" id="7528612">,</span>&nbsp;<span class="string" id="7528614">&#34;type&#34;</span><span class="op" id="7528620">,</span>&nbsp;<span class="string" id="7528622">&#34;dummy&#34;</span><span class="op" id="7528629">}</span><span class="op" id="7528630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528633">}</span><span class="op" id="7528634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528637">return</span>&nbsp;<span class="ident" id="7528644">nil</span><br>
<span class="lineno"></span><span class="op" id="7528648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7528651">func</span>&nbsp;<span class="op" id="7528656">(</span><span class="ident" id="7528657">ti</span>&nbsp;<span class="op" id="7528660">*</span><span class="ident" id="7528661">testInterface</span><span class="op" id="7528674">)</span>&nbsp;<span class="ident" id="7528676">setPointToPoint</span><span class="op" id="7528691">(</span><span class="ident" id="7528692">suffix</span>&nbsp;<span class="builtintype" id="7528699">int</span><span class="op" id="7528702">,</span>&nbsp;<span class="ident" id="7528704">local</span><span class="op" id="7528709">,</span>&nbsp;<span class="ident" id="7528711">remote</span>&nbsp;<span class="builtintype" id="7528718">string</span><span class="op" id="7528724">)</span>&nbsp;<span class="builtintype" id="7528726">error</span>&nbsp;<span class="op" id="7528732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528735">ti</span><span class="op" id="7528737">.</span><span class="ident" id="7528738">name</span>&nbsp;<span class="op" id="7528743">=</span>&nbsp;<span class="ident" id="7528745">fmt</span><span class="op" id="7528748">.</span><span class="ident" id="7528749">Sprintf</span><span class="op" id="7528756">(</span><span class="string" id="7528757">&#34;gotest%d&#34;</span><span class="op" id="7528767">,</span>&nbsp;<span class="ident" id="7528769">suffix</span><span class="op" id="7528775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528778">ti</span><span class="op" id="7528780">.</span><span class="ident" id="7528781">local</span>&nbsp;<span class="op" id="7528787">=</span>&nbsp;<span class="ident" id="7528789">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528796">ti</span><span class="op" id="7528798">.</span><span class="ident" id="7528799">remote</span>&nbsp;<span class="op" id="7528806">=</span>&nbsp;<span class="ident" id="7528808">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528816">xname</span><span class="op" id="7528821">,</span>&nbsp;<span class="ident" id="7528823">err</span>&nbsp;<span class="op" id="7528827">:=</span>&nbsp;<span class="ident" id="7528830">exec</span><span class="op" id="7528834">.</span><span class="ident" id="7528835">LookPath</span><span class="op" id="7528843">(</span><span class="string" id="7528844">&#34;ip&#34;</span><span class="op" id="7528848">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528851">if</span>&nbsp;<span class="ident" id="7528854">err</span>&nbsp;<span class="op" id="7528858">!=</span>&nbsp;<span class="ident" id="7528861">nil</span>&nbsp;<span class="op" id="7528865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528869">return</span>&nbsp;<span class="ident" id="7528876">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528884">ti</span><span class="op" id="7528886">.</span><span class="ident" id="7528887">setupCmds</span>&nbsp;<span class="op" id="7528897">=</span>&nbsp;<span class="builtinfunc" id="7528899">append</span><span class="op" id="7528905">(</span><span class="ident" id="7528906">ti</span><span class="op" id="7528908">.</span><span class="ident" id="7528909">setupCmds</span><span class="op" id="7528918">,</span>&nbsp;<span class="op" id="7528920">&amp;</span><span class="ident" id="7528921">exec</span><span class="op" id="7528925">.</span><span class="ident" id="7528926">Cmd</span><span class="op" id="7528929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528933">Path</span><span class="op" id="7528937">:</span>&nbsp;<span class="ident" id="7528939">xname</span><span class="op" id="7528944">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528948">Args</span><span class="op" id="7528952">:</span>&nbsp;<span class="op" id="7528954">[</span><span class="op" id="7528955">]</span><span class="builtintype" id="7528956">string</span><span class="op" id="7528962">{</span><span class="string" id="7528963">&#34;ip&#34;</span><span class="op" id="7528967">,</span>&nbsp;<span class="string" id="7528969">&#34;tunnel&#34;</span><span class="op" id="7528977">,</span>&nbsp;<span class="string" id="7528979">&#34;add&#34;</span><span class="op" id="7528984">,</span>&nbsp;<span class="ident" id="7528986">ti</span><span class="op" id="7528988">.</span><span class="ident" id="7528989">name</span><span class="op" id="7528993">,</span>&nbsp;<span class="string" id="7528995">&#34;mode&#34;</span><span class="op" id="7529001">,</span>&nbsp;<span class="string" id="7529003">&#34;gre&#34;</span><span class="op" id="7529008">,</span>&nbsp;<span class="string" id="7529010">&#34;local&#34;</span><span class="op" id="7529017">,</span>&nbsp;<span class="ident" id="7529019">local</span><span class="op" id="7529024">,</span>&nbsp;<span class="string" id="7529026">&#34;remote&#34;</span><span class="op" id="7529034">,</span>&nbsp;<span class="ident" id="7529036">remote</span><span class="op" id="7529042">}</span><span class="op" id="7529043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529046">}</span><span class="op" id="7529047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529050">ti</span><span class="op" id="7529052">.</span><span class="ident" id="7529053">teardownCmds</span>&nbsp;<span class="op" id="7529066">=</span>&nbsp;<span class="builtinfunc" id="7529068">append</span><span class="op" id="7529074">(</span><span class="ident" id="7529075">ti</span><span class="op" id="7529077">.</span><span class="ident" id="7529078">teardownCmds</span><span class="op" id="7529090">,</span>&nbsp;<span class="op" id="7529092">&amp;</span><span class="ident" id="7529093">exec</span><span class="op" id="7529097">.</span><span class="ident" id="7529098">Cmd</span><span class="op" id="7529101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529105">Path</span><span class="op" id="7529109">:</span>&nbsp;<span class="ident" id="7529111">xname</span><span class="op" id="7529116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529120">Args</span><span class="op" id="7529124">:</span>&nbsp;<span class="op" id="7529126">[</span><span class="op" id="7529127">]</span><span class="builtintype" id="7529128">string</span><span class="op" id="7529134">{</span><span class="string" id="7529135">&#34;ip&#34;</span><span class="op" id="7529139">,</span>&nbsp;<span class="string" id="7529141">&#34;tunnel&#34;</span><span class="op" id="7529149">,</span>&nbsp;<span class="string" id="7529151">&#34;del&#34;</span><span class="op" id="7529156">,</span>&nbsp;<span class="ident" id="7529158">ti</span><span class="op" id="7529160">.</span><span class="ident" id="7529161">name</span><span class="op" id="7529165">,</span>&nbsp;<span class="string" id="7529167">&#34;mode&#34;</span><span class="op" id="7529173">,</span>&nbsp;<span class="string" id="7529175">&#34;gre&#34;</span><span class="op" id="7529180">,</span>&nbsp;<span class="string" id="7529182">&#34;local&#34;</span><span class="op" id="7529189">,</span>&nbsp;<span class="ident" id="7529191">local</span><span class="op" id="7529196">,</span>&nbsp;<span class="string" id="7529198">&#34;remote&#34;</span><span class="op" id="7529206">,</span>&nbsp;<span class="ident" id="7529208">remote</span><span class="op" id="7529214">}</span><span class="op" id="7529215">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529218">}</span><span class="op" id="7529219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529222">xname</span><span class="op" id="7529227">,</span>&nbsp;<span class="ident" id="7529229">err</span>&nbsp;<span class="op" id="7529233">=</span>&nbsp;<span class="ident" id="7529235">exec</span><span class="op" id="7529239">.</span><span class="ident" id="7529240">LookPath</span><span class="op" id="7529248">(</span><span class="string" id="7529249">&#34;ifconfig&#34;</span><span class="op" id="7529259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529262">if</span>&nbsp;<span class="ident" id="7529265">err</span>&nbsp;<span class="op" id="7529269">!=</span>&nbsp;<span class="ident" id="7529272">nil</span>&nbsp;<span class="op" id="7529276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529280">return</span>&nbsp;<span class="ident" id="7529287">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529292">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529295">ti</span><span class="op" id="7529297">.</span><span class="ident" id="7529298">setupCmds</span>&nbsp;<span class="op" id="7529308">=</span>&nbsp;<span class="builtinfunc" id="7529310">append</span><span class="op" id="7529316">(</span><span class="ident" id="7529317">ti</span><span class="op" id="7529319">.</span><span class="ident" id="7529320">setupCmds</span><span class="op" id="7529329">,</span>&nbsp;<span class="op" id="7529331">&amp;</span><span class="ident" id="7529332">exec</span><span class="op" id="7529336">.</span><span class="ident" id="7529337">Cmd</span><span class="op" id="7529340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529344">Path</span><span class="op" id="7529348">:</span>&nbsp;<span class="ident" id="7529350">xname</span><span class="op" id="7529355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529359">Args</span><span class="op" id="7529363">:</span>&nbsp;<span class="op" id="7529365">[</span><span class="op" id="7529366">]</span><span class="builtintype" id="7529367">string</span><span class="op" id="7529373">{</span><span class="string" id="7529374">&#34;ifconfig&#34;</span><span class="op" id="7529384">,</span>&nbsp;<span class="ident" id="7529386">ti</span><span class="op" id="7529388">.</span><span class="ident" id="7529389">name</span><span class="op" id="7529393">,</span>&nbsp;<span class="string" id="7529395">&#34;inet&#34;</span><span class="op" id="7529401">,</span>&nbsp;<span class="ident" id="7529403">local</span><span class="op" id="7529408">,</span>&nbsp;<span class="string" id="7529410">&#34;dstaddr&#34;</span><span class="op" id="7529419">,</span>&nbsp;<span class="ident" id="7529421">remote</span><span class="op" id="7529427">}</span><span class="op" id="7529428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529431">}</span><span class="op" id="7529432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529435">return</span>&nbsp;<span class="ident" id="7529442">nil</span><br>
<span class="lineno">55</span><span class="op" id="7529446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7529449">const</span>&nbsp;<span class="op" id="7529455">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529458">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="7529479">=</span>&nbsp;<span class="num" id="7529481">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529485">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="7529506">=</span>&nbsp;<span class="num" id="7529508">18</span><br>
<span class="lineno">60</span><span class="op" id="7529511">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7529514">var</span>&nbsp;<span class="op" id="7529518">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529521">igmpInterfaceTable</span>&nbsp;<span class="op" id="7529540">=</span>&nbsp;<span class="op" id="7529542">[</span><span class="op" id="7529543">]</span><span class="ident" id="7529544">Interface</span><span class="op" id="7529553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529557">{</span><span class="ident" id="7529558">Name</span><span class="op" id="7529562">:</span>&nbsp;<span class="string" id="7529564">&#34;lo&#34;</span><span class="op" id="7529568">}</span><span class="op" id="7529569">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529573">{</span><span class="ident" id="7529574">Name</span><span class="op" id="7529578">:</span>&nbsp;<span class="string" id="7529580">&#34;eth0&#34;</span><span class="op" id="7529586">}</span><span class="op" id="7529587">,</span>&nbsp;<span class="op" id="7529589">{</span><span class="ident" id="7529590">Name</span><span class="op" id="7529594">:</span>&nbsp;<span class="string" id="7529596">&#34;eth1&#34;</span><span class="op" id="7529602">}</span><span class="op" id="7529603">,</span>&nbsp;<span class="op" id="7529605">{</span><span class="ident" id="7529606">Name</span><span class="op" id="7529610">:</span>&nbsp;<span class="string" id="7529612">&#34;eth2&#34;</span><span class="op" id="7529618">}</span><span class="op" id="7529619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529623">{</span><span class="ident" id="7529624">Name</span><span class="op" id="7529628">:</span>&nbsp;<span class="string" id="7529630">&#34;eth0.100&#34;</span><span class="op" id="7529640">}</span><span class="op" id="7529641">,</span>&nbsp;<span class="op" id="7529643">{</span><span class="ident" id="7529644">Name</span><span class="op" id="7529648">:</span>&nbsp;<span class="string" id="7529650">&#34;eth0.101&#34;</span><span class="op" id="7529660">}</span><span class="op" id="7529661">,</span>&nbsp;<span class="op" id="7529663">{</span><span class="ident" id="7529664">Name</span><span class="op" id="7529668">:</span>&nbsp;<span class="string" id="7529670">&#34;eth0.102&#34;</span><span class="op" id="7529680">}</span><span class="op" id="7529681">,</span>&nbsp;<span class="op" id="7529683">{</span><span class="ident" id="7529684">Name</span><span class="op" id="7529688">:</span>&nbsp;<span class="string" id="7529690">&#34;eth0.103&#34;</span><span class="op" id="7529700">}</span><span class="op" id="7529701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529705">{</span><span class="ident" id="7529706">Name</span><span class="op" id="7529710">:</span>&nbsp;<span class="string" id="7529712">&#34;device1tap2&#34;</span><span class="op" id="7529725">}</span><span class="op" id="7529726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529732">igmp6InterfaceTable</span>&nbsp;<span class="op" id="7529752">=</span>&nbsp;<span class="op" id="7529754">[</span><span class="op" id="7529755">]</span><span class="ident" id="7529756">Interface</span><span class="op" id="7529765">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529769">{</span><span class="ident" id="7529770">Name</span><span class="op" id="7529774">:</span>&nbsp;<span class="string" id="7529776">&#34;lo&#34;</span><span class="op" id="7529780">}</span><span class="op" id="7529781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529785">{</span><span class="ident" id="7529786">Name</span><span class="op" id="7529790">:</span>&nbsp;<span class="string" id="7529792">&#34;eth0&#34;</span><span class="op" id="7529798">}</span><span class="op" id="7529799">,</span>&nbsp;<span class="op" id="7529801">{</span><span class="ident" id="7529802">Name</span><span class="op" id="7529806">:</span>&nbsp;<span class="string" id="7529808">&#34;eth1&#34;</span><span class="op" id="7529814">}</span><span class="op" id="7529815">,</span>&nbsp;<span class="op" id="7529817">{</span><span class="ident" id="7529818">Name</span><span class="op" id="7529822">:</span>&nbsp;<span class="string" id="7529824">&#34;eth2&#34;</span><span class="op" id="7529830">}</span><span class="op" id="7529831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529835">{</span><span class="ident" id="7529836">Name</span><span class="op" id="7529840">:</span>&nbsp;<span class="string" id="7529842">&#34;eth0.100&#34;</span><span class="op" id="7529852">}</span><span class="op" id="7529853">,</span>&nbsp;<span class="op" id="7529855">{</span><span class="ident" id="7529856">Name</span><span class="op" id="7529860">:</span>&nbsp;<span class="string" id="7529862">&#34;eth0.101&#34;</span><span class="op" id="7529872">}</span><span class="op" id="7529873">,</span>&nbsp;<span class="op" id="7529875">{</span><span class="ident" id="7529876">Name</span><span class="op" id="7529880">:</span>&nbsp;<span class="string" id="7529882">&#34;eth0.102&#34;</span><span class="op" id="7529892">}</span><span class="op" id="7529893">,</span>&nbsp;<span class="op" id="7529895">{</span><span class="ident" id="7529896">Name</span><span class="op" id="7529900">:</span>&nbsp;<span class="string" id="7529902">&#34;eth0.103&#34;</span><span class="op" id="7529912">}</span><span class="op" id="7529913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529917">{</span><span class="ident" id="7529918">Name</span><span class="op" id="7529922">:</span>&nbsp;<span class="string" id="7529924">&#34;device1tap2&#34;</span><span class="op" id="7529937">}</span><span class="op" id="7529938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529942">{</span><span class="ident" id="7529943">Name</span><span class="op" id="7529947">:</span>&nbsp;<span class="string" id="7529949">&#34;pan0&#34;</span><span class="op" id="7529955">}</span><span class="op" id="7529956">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529959">}</span><br>
<span class="lineno"></span><span class="op" id="7529961">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7529964">func</span>&nbsp;<span class="ident" id="7529969">TestParseProcNet</span><span class="op" id="7529985">(</span><span class="ident" id="7529986">t</span>&nbsp;<span class="op" id="7529988">*</span><span class="ident" id="7529989">testing</span><span class="op" id="7529996">.</span><span class="ident" id="7529997">T</span><span class="op" id="7529998">)</span>&nbsp;<span class="op" id="7530000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530003">defer</span>&nbsp;<span class="keyword" id="7530009">func</span><span class="op" id="7530013">(</span><span class="op" id="7530014">)</span>&nbsp;<span class="op" id="7530016">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530020">if</span>&nbsp;<span class="ident" id="7530023">p</span>&nbsp;<span class="op" id="7530025">:=</span>&nbsp;<span class="builtinfunc" id="7530028">recover</span><span class="op" id="7530035">(</span><span class="op" id="7530036">)</span><span class="op" id="7530037">;</span>&nbsp;<span class="ident" id="7530039">p</span>&nbsp;<span class="op" id="7530041">!=</span>&nbsp;<span class="ident" id="7530044">nil</span>&nbsp;<span class="op" id="7530048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530053">t</span><span class="op" id="7530054">.</span><span class="ident" id="7530055">Fatalf</span><span class="op" id="7530061">(</span><span class="string" id="7530062">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="7530114">,</span>&nbsp;<span class="ident" id="7530116">p</span><span class="op" id="7530117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530124">}</span><span class="op" id="7530125">(</span><span class="op" id="7530126">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530130">var</span>&nbsp;<span class="ident" id="7530134">ifmat4</span>&nbsp;<span class="op" id="7530141">[</span><span class="op" id="7530142">]</span><span class="ident" id="7530143">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530149">for</span>&nbsp;<span class="ident" id="7530153">_</span><span class="op" id="7530154">,</span>&nbsp;<span class="ident" id="7530156">ifi</span>&nbsp;<span class="op" id="7530160">:=</span>&nbsp;<span class="keyword" id="7530163">range</span>&nbsp;<span class="ident" id="7530169">igmpInterfaceTable</span>&nbsp;<span class="op" id="7530188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530192">ifmat</span>&nbsp;<span class="op" id="7530198">:=</span>&nbsp;<span class="ident" id="7530201">parseProcNetIGMP</span><span class="op" id="7530217">(</span><span class="string" id="7530218">&#34;testdata/igmp&#34;</span><span class="op" id="7530233">,</span>&nbsp;<span class="op" id="7530235">&amp;</span><span class="ident" id="7530236">ifi</span><span class="op" id="7530239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530243">ifmat4</span>&nbsp;<span class="op" id="7530250">=</span>&nbsp;<span class="builtinfunc" id="7530252">append</span><span class="op" id="7530258">(</span><span class="ident" id="7530259">ifmat4</span><span class="op" id="7530265">,</span>&nbsp;<span class="ident" id="7530267">ifmat</span><span class="op" id="7530272">...</span><span class="op" id="7530275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530278">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530281">if</span>&nbsp;<span class="builtinfunc" id="7530284">len</span><span class="op" id="7530287">(</span><span class="ident" id="7530288">ifmat4</span><span class="op" id="7530294">)</span>&nbsp;<span class="op" id="7530296">!=</span>&nbsp;<span class="ident" id="7530299">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="7530320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530324">t</span><span class="op" id="7530325">.</span><span class="ident" id="7530326">Fatalf</span><span class="op" id="7530332">(</span><span class="string" id="7530333">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7530385">,</span>&nbsp;<span class="builtinfunc" id="7530387">len</span><span class="op" id="7530390">(</span><span class="ident" id="7530391">ifmat4</span><span class="op" id="7530397">)</span><span class="op" id="7530398">,</span>&nbsp;<span class="ident" id="7530400">numOfTestIPv4MCAddrs</span><span class="op" id="7530420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530427">var</span>&nbsp;<span class="ident" id="7530431">ifmat6</span>&nbsp;<span class="op" id="7530438">[</span><span class="op" id="7530439">]</span><span class="ident" id="7530440">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530446">for</span>&nbsp;<span class="ident" id="7530450">_</span><span class="op" id="7530451">,</span>&nbsp;<span class="ident" id="7530453">ifi</span>&nbsp;<span class="op" id="7530457">:=</span>&nbsp;<span class="keyword" id="7530460">range</span>&nbsp;<span class="ident" id="7530466">igmp6InterfaceTable</span>&nbsp;<span class="op" id="7530486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530490">ifmat</span>&nbsp;<span class="op" id="7530496">:=</span>&nbsp;<span class="ident" id="7530499">parseProcNetIGMP6</span><span class="op" id="7530516">(</span><span class="string" id="7530517">&#34;testdata/igmp6&#34;</span><span class="op" id="7530533">,</span>&nbsp;<span class="op" id="7530535">&amp;</span><span class="ident" id="7530536">ifi</span><span class="op" id="7530539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530543">ifmat6</span>&nbsp;<span class="op" id="7530550">=</span>&nbsp;<span class="builtinfunc" id="7530552">append</span><span class="op" id="7530558">(</span><span class="ident" id="7530559">ifmat6</span><span class="op" id="7530565">,</span>&nbsp;<span class="ident" id="7530567">ifmat</span><span class="op" id="7530572">...</span><span class="op" id="7530575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530581">if</span>&nbsp;<span class="builtinfunc" id="7530584">len</span><span class="op" id="7530587">(</span><span class="ident" id="7530588">ifmat6</span><span class="op" id="7530594">)</span>&nbsp;<span class="op" id="7530596">!=</span>&nbsp;<span class="ident" id="7530599">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="7530620">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530624">t</span><span class="op" id="7530625">.</span><span class="ident" id="7530626">Fatalf</span><span class="op" id="7530632">(</span><span class="string" id="7530633">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7530686">,</span>&nbsp;<span class="builtinfunc" id="7530688">len</span><span class="op" id="7530691">(</span><span class="ident" id="7530692">ifmat6</span><span class="op" id="7530698">)</span><span class="op" id="7530699">,</span>&nbsp;<span class="ident" id="7530701">numOfTestIPv6MCAddrs</span><span class="op" id="7530721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530724">}</span><br>
<span class="lineno"></span><span class="op" id="7530726">}</span>
</div>
</body>
</html>
