<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html" class="current">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6097679">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6097734">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6097788">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6097839">package</span>&nbsp;<span class="ident" id="6097847">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6097856">import</span>&nbsp;<span class="op" id="6097863">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6097866">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6097875">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6097882">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6097888">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6097894">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6097905">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6097912">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6097915">type</span>&nbsp;<span class="ident" id="6097920">InternalExample</span>&nbsp;<span class="keyword" id="6097936">struct</span>&nbsp;<span class="op" id="6097943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097946">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6097953">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097961">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6097968">func</span><span class="op" id="6097972">(</span><span class="op" id="6097973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097976">Output</span>&nbsp;<span class="builtintype" id="6097983">string</span><br>
<span class="lineno">20</span><span class="op" id="6097990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6097993">func</span>&nbsp;<span class="ident" id="6097998">RunExamples</span><span class="op" id="6098009">(</span><span class="ident" id="6098010">matchString</span>&nbsp;<span class="keyword" id="6098022">func</span><span class="op" id="6098026">(</span><span class="ident" id="6098027">pat</span><span class="op" id="6098030">,</span>&nbsp;<span class="ident" id="6098032">str</span>&nbsp;<span class="builtintype" id="6098036">string</span><span class="op" id="6098042">)</span>&nbsp;<span class="op" id="6098044">(</span><span class="builtintype" id="6098045">bool</span><span class="op" id="6098049">,</span>&nbsp;<span class="builtintype" id="6098051">error</span><span class="op" id="6098056">)</span><span class="op" id="6098057">,</span>&nbsp;<span class="ident" id="6098059">examples</span>&nbsp;<span class="op" id="6098068">[</span><span class="op" id="6098069">]</span><span class="ident" id="6098070">InternalExample</span><span class="op" id="6098085">)</span>&nbsp;<span class="op" id="6098087">(</span><span class="ident" id="6098088">ok</span>&nbsp;<span class="builtintype" id="6098091">bool</span><span class="op" id="6098095">)</span>&nbsp;<span class="op" id="6098097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098100">ok</span>&nbsp;<span class="op" id="6098103">=</span>&nbsp;<span class="builtintype" id="6098105">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098112">var</span>&nbsp;<span class="ident" id="6098116">eg</span>&nbsp;<span class="ident" id="6098119">InternalExample</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098137">for</span>&nbsp;<span class="ident" id="6098141">_</span><span class="op" id="6098142">,</span>&nbsp;<span class="ident" id="6098144">eg</span>&nbsp;<span class="op" id="6098147">=</span>&nbsp;<span class="keyword" id="6098149">range</span>&nbsp;<span class="ident" id="6098155">examples</span>&nbsp;<span class="op" id="6098164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098168">matched</span><span class="op" id="6098175">,</span>&nbsp;<span class="ident" id="6098177">err</span>&nbsp;<span class="op" id="6098181">:=</span>&nbsp;<span class="ident" id="6098184">matchString</span><span class="op" id="6098195">(</span><span class="op" id="6098196">*</span><span class="ident" id="6098197">match</span><span class="op" id="6098202">,</span>&nbsp;<span class="ident" id="6098204">eg</span><span class="op" id="6098206">.</span><span class="ident" id="6098207">Name</span><span class="op" id="6098211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098215">if</span>&nbsp;<span class="ident" id="6098218">err</span>&nbsp;<span class="op" id="6098222">!=</span>&nbsp;<span class="builtintype" id="6098225">nil</span>&nbsp;<span class="op" id="6098229">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098234">fmt</span><span class="op" id="6098237">.</span><span class="ident" id="6098238">Fprintf</span><span class="op" id="6098245">(</span><span class="ident" id="6098246">os</span><span class="op" id="6098248">.</span><span class="ident" id="6098249">Stderr</span><span class="op" id="6098255">,</span>&nbsp;<span class="string" id="6098257">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="6098302">,</span>&nbsp;<span class="ident" id="6098304">err</span><span class="op" id="6098307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098312">os</span><span class="op" id="6098314">.</span><span class="ident" id="6098315">Exit</span><span class="op" id="6098319">(</span><span class="num" id="6098320">1</span><span class="op" id="6098321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6098325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098329">if</span>&nbsp;<span class="op" id="6098332">!</span><span class="ident" id="6098333">matched</span>&nbsp;<span class="op" id="6098341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098346">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6098357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098361">if</span>&nbsp;<span class="op" id="6098364">!</span><span class="ident" id="6098365">runExample</span><span class="op" id="6098375">(</span><span class="ident" id="6098376">eg</span><span class="op" id="6098378">)</span>&nbsp;<span class="op" id="6098380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098385">ok</span>&nbsp;<span class="op" id="6098388">=</span>&nbsp;<span class="builtintype" id="6098390">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6098398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6098401">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098405">return</span><br>
<span class="lineno"></span><span class="op" id="6098412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6098415">func</span>&nbsp;<span class="ident" id="6098420">runExample</span><span class="op" id="6098430">(</span><span class="ident" id="6098431">eg</span>&nbsp;<span class="ident" id="6098434">InternalExample</span><span class="op" id="6098449">)</span>&nbsp;<span class="op" id="6098451">(</span><span class="ident" id="6098452">ok</span>&nbsp;<span class="builtintype" id="6098455">bool</span><span class="op" id="6098459">)</span>&nbsp;<span class="op" id="6098461">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098464">if</span>&nbsp;<span class="op" id="6098467">*</span><span class="ident" id="6098468">chatty</span>&nbsp;<span class="op" id="6098475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098479">fmt</span><span class="op" id="6098482">.</span><span class="ident" id="6098483">Printf</span><span class="op" id="6098489">(</span><span class="string" id="6098490">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="6098505">,</span>&nbsp;<span class="ident" id="6098507">eg</span><span class="op" id="6098509">.</span><span class="ident" id="6098510">Name</span><span class="op" id="6098514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6098517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6098521">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098541">stdout</span>&nbsp;<span class="op" id="6098548">:=</span>&nbsp;<span class="ident" id="6098551">os</span><span class="op" id="6098553">.</span><span class="ident" id="6098554">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098562">r</span><span class="op" id="6098563">,</span>&nbsp;<span class="ident" id="6098565">w</span><span class="op" id="6098566">,</span>&nbsp;<span class="ident" id="6098568">err</span>&nbsp;<span class="op" id="6098572">:=</span>&nbsp;<span class="ident" id="6098575">os</span><span class="op" id="6098577">.</span><span class="ident" id="6098578">Pipe</span><span class="op" id="6098582">(</span><span class="op" id="6098583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098586">if</span>&nbsp;<span class="ident" id="6098589">err</span>&nbsp;<span class="op" id="6098593">!=</span>&nbsp;<span class="builtintype" id="6098596">nil</span>&nbsp;<span class="op" id="6098600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098604">fmt</span><span class="op" id="6098607">.</span><span class="ident" id="6098608">Fprintln</span><span class="op" id="6098616">(</span><span class="ident" id="6098617">os</span><span class="op" id="6098619">.</span><span class="ident" id="6098620">Stderr</span><span class="op" id="6098626">,</span>&nbsp;<span class="ident" id="6098628">err</span><span class="op" id="6098631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098635">os</span><span class="op" id="6098637">.</span><span class="ident" id="6098638">Exit</span><span class="op" id="6098642">(</span><span class="num" id="6098643">1</span><span class="op" id="6098644">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6098647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098650">os</span><span class="op" id="6098652">.</span><span class="ident" id="6098653">Stdout</span>&nbsp;<span class="op" id="6098660">=</span>&nbsp;<span class="ident" id="6098662">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098665">outC</span>&nbsp;<span class="op" id="6098670">:=</span>&nbsp;<span class="builtinfunc" id="6098673">make</span><span class="op" id="6098677">(</span><span class="keyword" id="6098678">chan</span>&nbsp;<span class="builtintype" id="6098683">string</span><span class="op" id="6098689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098692">go</span>&nbsp;<span class="keyword" id="6098695">func</span><span class="op" id="6098699">(</span><span class="op" id="6098700">)</span>&nbsp;<span class="op" id="6098702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098706">buf</span>&nbsp;<span class="op" id="6098710">:=</span>&nbsp;<span class="builtinfunc" id="6098713">new</span><span class="op" id="6098716">(</span><span class="ident" id="6098717">bytes</span><span class="op" id="6098722">.</span><span class="ident" id="6098723">Buffer</span><span class="op" id="6098729">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098733">_</span><span class="op" id="6098734">,</span>&nbsp;<span class="ident" id="6098736">err</span>&nbsp;<span class="op" id="6098740">:=</span>&nbsp;<span class="ident" id="6098743">io</span><span class="op" id="6098745">.</span><span class="ident" id="6098746">Copy</span><span class="op" id="6098750">(</span><span class="ident" id="6098751">buf</span><span class="op" id="6098754">,</span>&nbsp;<span class="ident" id="6098756">r</span><span class="op" id="6098757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098761">r</span><span class="op" id="6098762">.</span><span class="ident" id="6098763">Close</span><span class="op" id="6098768">(</span><span class="op" id="6098769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6098773">if</span>&nbsp;<span class="ident" id="6098776">err</span>&nbsp;<span class="op" id="6098780">!=</span>&nbsp;<span class="builtintype" id="6098783">nil</span>&nbsp;<span class="op" id="6098787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098792">fmt</span><span class="op" id="6098795">.</span><span class="ident" id="6098796">Fprintf</span><span class="op" id="6098803">(</span><span class="ident" id="6098804">os</span><span class="op" id="6098806">.</span><span class="ident" id="6098807">Stderr</span><span class="op" id="6098813">,</span>&nbsp;<span class="string" id="6098815">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="6098844">,</span>&nbsp;<span class="ident" id="6098846">err</span><span class="op" id="6098849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098854">os</span><span class="op" id="6098856">.</span><span class="ident" id="6098857">Exit</span><span class="op" id="6098861">(</span><span class="num" id="6098862">1</span><span class="op" id="6098863">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6098867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098871">outC</span>&nbsp;<span class="op" id="6098876">&lt;-</span>&nbsp;<span class="ident" id="6098879">buf</span><span class="op" id="6098882">.</span><span class="ident" id="6098883">String</span><span class="op" id="6098889">(</span><span class="op" id="6098890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6098893">}</span><span class="op" id="6098894">(</span><span class="op" id="6098895">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098899">start</span>&nbsp;<span class="op" id="6098905">:=</span>&nbsp;<span class="ident" id="6098908">time</span><span class="op" id="6098912">.</span><span class="ident" id="6098913">Now</span><span class="op" id="6098916">(</span><span class="op" id="6098917">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6098920">ok</span>&nbsp;<span class="op" id="6098923">=</span>&nbsp;<span class="builtintype" id="6098925">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6098932">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6099005">defer</span>&nbsp;<span class="keyword" id="6099011">func</span><span class="op" id="6099015">(</span><span class="op" id="6099016">)</span>&nbsp;<span class="op" id="6099018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099022">dstr</span>&nbsp;<span class="op" id="6099027">:=</span>&nbsp;<span class="ident" id="6099030">fmtDuration</span><span class="op" id="6099041">(</span><span class="ident" id="6099042">time</span><span class="op" id="6099046">.</span><span class="ident" id="6099047">Now</span><span class="op" id="6099050">(</span><span class="op" id="6099051">)</span><span class="op" id="6099052">.</span><span class="ident" id="6099053">Sub</span><span class="op" id="6099056">(</span><span class="ident" id="6099057">start</span><span class="op" id="6099062">)</span><span class="op" id="6099063">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6099068">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099113">w</span><span class="op" id="6099114">.</span><span class="ident" id="6099115">Close</span><span class="op" id="6099120">(</span><span class="op" id="6099121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099125">os</span><span class="op" id="6099127">.</span><span class="ident" id="6099128">Stdout</span>&nbsp;<span class="op" id="6099135">=</span>&nbsp;<span class="ident" id="6099137">stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099146">out</span>&nbsp;<span class="op" id="6099150">:=</span>&nbsp;<span class="op" id="6099153">&lt;-</span><span class="ident" id="6099155">outC</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6099163">var</span>&nbsp;<span class="ident" id="6099167">fail</span>&nbsp;<span class="builtintype" id="6099172">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099181">err</span>&nbsp;<span class="op" id="6099185">:=</span>&nbsp;<span class="builtinfunc" id="6099188">recover</span><span class="op" id="6099195">(</span><span class="op" id="6099196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6099200">if</span>&nbsp;<span class="ident" id="6099203">g</span><span class="op" id="6099204">,</span>&nbsp;<span class="ident" id="6099206">e</span>&nbsp;<span class="op" id="6099208">:=</span>&nbsp;<span class="ident" id="6099211">strings</span><span class="op" id="6099218">.</span><span class="ident" id="6099219">TrimSpace</span><span class="op" id="6099228">(</span><span class="ident" id="6099229">out</span><span class="op" id="6099232">)</span><span class="op" id="6099233">,</span>&nbsp;<span class="ident" id="6099235">strings</span><span class="op" id="6099242">.</span><span class="ident" id="6099243">TrimSpace</span><span class="op" id="6099252">(</span><span class="ident" id="6099253">eg</span><span class="op" id="6099255">.</span><span class="ident" id="6099256">Output</span><span class="op" id="6099262">)</span><span class="op" id="6099263">;</span>&nbsp;<span class="ident" id="6099265">g</span>&nbsp;<span class="op" id="6099267">!=</span>&nbsp;<span class="ident" id="6099270">e</span>&nbsp;<span class="op" id="6099272">&amp;&amp;</span>&nbsp;<span class="ident" id="6099275">err</span>&nbsp;<span class="op" id="6099279">==</span>&nbsp;<span class="builtintype" id="6099282">nil</span>&nbsp;<span class="op" id="6099286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099291">fail</span>&nbsp;<span class="op" id="6099296">=</span>&nbsp;<span class="ident" id="6099298">fmt</span><span class="op" id="6099301">.</span><span class="ident" id="6099302">Sprintf</span><span class="op" id="6099309">(</span><span class="string" id="6099310">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="6099333">,</span>&nbsp;<span class="ident" id="6099335">g</span><span class="op" id="6099336">,</span>&nbsp;<span class="ident" id="6099338">e</span><span class="op" id="6099339">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6099343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6099347">if</span>&nbsp;<span class="ident" id="6099350">fail</span>&nbsp;<span class="op" id="6099355">!=</span>&nbsp;<span class="string" id="6099358">&#34;&#34;</span>&nbsp;<span class="op" id="6099361">||</span>&nbsp;<span class="ident" id="6099364">err</span>&nbsp;<span class="op" id="6099368">!=</span>&nbsp;<span class="builtintype" id="6099371">nil</span>&nbsp;<span class="op" id="6099375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099380">fmt</span><span class="op" id="6099383">.</span><span class="ident" id="6099384">Printf</span><span class="op" id="6099390">(</span><span class="string" id="6099391">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="6099414">,</span>&nbsp;<span class="ident" id="6099416">eg</span><span class="op" id="6099418">.</span><span class="ident" id="6099419">Name</span><span class="op" id="6099423">,</span>&nbsp;<span class="ident" id="6099425">dstr</span><span class="op" id="6099429">,</span>&nbsp;<span class="ident" id="6099431">fail</span><span class="op" id="6099435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099440">ok</span>&nbsp;<span class="op" id="6099443">=</span>&nbsp;<span class="builtintype" id="6099445">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6099453">}</span>&nbsp;<span class="keyword" id="6099455">else</span>&nbsp;<span class="keyword" id="6099460">if</span>&nbsp;<span class="op" id="6099463">*</span><span class="ident" id="6099464">chatty</span>&nbsp;<span class="op" id="6099471">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099476">fmt</span><span class="op" id="6099479">.</span><span class="ident" id="6099480">Printf</span><span class="op" id="6099486">(</span><span class="string" id="6099487">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="6099508">,</span>&nbsp;<span class="ident" id="6099510">eg</span><span class="op" id="6099512">.</span><span class="ident" id="6099513">Name</span><span class="op" id="6099517">,</span>&nbsp;<span class="ident" id="6099519">dstr</span><span class="op" id="6099523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6099527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6099531">if</span>&nbsp;<span class="ident" id="6099534">err</span>&nbsp;<span class="op" id="6099538">!=</span>&nbsp;<span class="builtintype" id="6099541">nil</span>&nbsp;<span class="op" id="6099545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6099550">panic</span><span class="op" id="6099555">(</span><span class="ident" id="6099556">err</span><span class="op" id="6099559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6099563">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6099566">}</span><span class="op" id="6099567">(</span><span class="op" id="6099568">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6099572">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099589">eg</span><span class="op" id="6099591">.</span><span class="ident" id="6099592">F</span><span class="op" id="6099593">(</span><span class="op" id="6099594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6099597">return</span><br>
<span class="lineno">100</span><span class="op" id="6099604">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
