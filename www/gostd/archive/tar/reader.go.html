<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5617698">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5617753">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5617807">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5617858">package</span>&nbsp;<span class="ident" id="5617866">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5617871">//&nbsp;TODO(dsymonds):</span><br>
<span class="lineno"></span><span class="comment" id="5617890">//&nbsp;&nbsp;&nbsp;-&nbsp;pax&nbsp;extensions</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5617913">import</span>&nbsp;<span class="op" id="5617920">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5617923">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5617932">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5617942">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5617948">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5617961">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5617967">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5617978">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5617989">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5617996">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="5617999">var</span>&nbsp;<span class="op" id="5618003">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618006">ErrHeader</span>&nbsp;<span class="op" id="5618016">=</span>&nbsp;<span class="ident" id="5618018"><a href="/gostd/archive/tar/reader.go.html#5617932">errors</a></span><span class="op" id="5618024">.</span><span class="ident" id="5618025"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5618028">(</span><span class="string" id="5618029">&#34;archive/tar:&nbsp;invalid&nbsp;tar&nbsp;header&#34;</span><span class="op" id="5618062">)</span><br>
<span class="lineno"></span><span class="op" id="5618064">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5618067">const</span>&nbsp;<span class="ident" id="5618073">maxNanoSecondIntSize</span>&nbsp;<span class="op" id="5618094">=</span>&nbsp;<span class="num" id="5618096">9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5618099">//&nbsp;A&nbsp;Reader&nbsp;provides&nbsp;sequential&nbsp;access&nbsp;to&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno"></span><span class="comment" id="5618172">//&nbsp;A&nbsp;tar&nbsp;archive&nbsp;consists&nbsp;of&nbsp;a&nbsp;sequence&nbsp;of&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5618222">//&nbsp;The&nbsp;Next&nbsp;method&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;file&nbsp;in&nbsp;the&nbsp;archive&nbsp;(including&nbsp;the&nbsp;first),</span><br>
<span class="lineno">30</span><span class="comment" id="5618305">//&nbsp;and&nbsp;then&nbsp;it&nbsp;can&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;access&nbsp;the&nbsp;file&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5618378">type</span>&nbsp;<span class="ident" id="5618383">Reader</span>&nbsp;<span class="keyword" id="5618390">struct</span>&nbsp;<span class="op" id="5618397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618400">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618408"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5618410">.</span><span class="ident" id="5618411"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618419">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5618427">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618434">pad</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5618442">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5618458">//&nbsp;amount&nbsp;of&nbsp;padding&nbsp;(ignored)&nbsp;after&nbsp;current&nbsp;file&nbsp;entry</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618515">curr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618523"><a href="/gostd/archive/tar/reader.go.html#5618771">numBytesReader</a></span>&nbsp;&nbsp;<span class="comment" id="5618539">//&nbsp;reader&nbsp;for&nbsp;current&nbsp;file&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618573">hdrBuff</span>&nbsp;<span class="op" id="5618581">[</span><span class="ident" id="5618582"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span><span class="op" id="5618591">]</span><span class="builtintype" id="5618592">byte</span>&nbsp;<span class="comment" id="5618597">//&nbsp;buffer&nbsp;to&nbsp;use&nbsp;in&nbsp;readHeader</span><br>
<span class="lineno"></span><span class="op" id="5618628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5618631">//&nbsp;A&nbsp;numBytesReader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;with&nbsp;a&nbsp;numBytes&nbsp;method,&nbsp;returning&nbsp;the&nbsp;number</span><br>
<span class="lineno">40</span><span class="comment" id="5618712">//&nbsp;of&nbsp;bytes&nbsp;remaining&nbsp;in&nbsp;the&nbsp;underlying&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5618766">type</span>&nbsp;<span class="ident" id="5618771">numBytesReader</span>&nbsp;<span class="keyword" id="5618786">interface</span>&nbsp;<span class="op" id="5618796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618799"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5618801">.</span><span class="ident" id="5618802"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618810">numBytes</span><span class="op" id="5618818">(</span><span class="op" id="5618819">)</span>&nbsp;<span class="builtintype" id="5618821">int64</span><br>
<span class="lineno"></span><span class="op" id="5618827">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5618830">//&nbsp;A&nbsp;regFileReader&nbsp;is&nbsp;a&nbsp;numBytesReader&nbsp;for&nbsp;reading&nbsp;file&nbsp;data&nbsp;from&nbsp;a&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno"></span><span class="keyword" id="5618911">type</span>&nbsp;<span class="ident" id="5618916">regFileReader</span>&nbsp;<span class="keyword" id="5618930">struct</span>&nbsp;<span class="op" id="5618937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618940">r</span>&nbsp;&nbsp;<span class="ident" id="5618943"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5618945">.</span><span class="ident" id="5618946"><a href="/gostd/io/io.go.html#1421823">Reader</a></span>&nbsp;<span class="comment" id="5618953">//&nbsp;underlying&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5618975">nb</span>&nbsp;<span class="builtintype" id="5618978">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5618988">//&nbsp;number&nbsp;of&nbsp;unread&nbsp;bytes&nbsp;for&nbsp;current&nbsp;file&nbsp;entry</span><br>
<span class="lineno">50</span><span class="op" id="5619037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5619040">//&nbsp;A&nbsp;sparseFileReader&nbsp;is&nbsp;a&nbsp;numBytesReader&nbsp;for&nbsp;reading&nbsp;sparse&nbsp;file&nbsp;data&nbsp;from&nbsp;a&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno"></span><span class="keyword" id="5619131">type</span>&nbsp;<span class="ident" id="5619136">sparseFileReader</span>&nbsp;<span class="keyword" id="5619153">struct</span>&nbsp;<span class="op" id="5619160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619163">rfr</span>&nbsp;<span class="op" id="5619167">*</span><span class="ident" id="5619168"><a href="/gostd/archive/tar/reader.go.html#5618916">regFileReader</a></span>&nbsp;<span class="comment" id="5619182">//&nbsp;reads&nbsp;the&nbsp;sparse-encoded&nbsp;file&nbsp;data</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619221">sp</span>&nbsp;&nbsp;<span class="op" id="5619225">[</span><span class="op" id="5619226">]</span><span class="ident" id="5619227"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span>&nbsp;&nbsp;<span class="comment" id="5619240">//&nbsp;the&nbsp;sparse&nbsp;map&nbsp;for&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619272">pos</span>&nbsp;<span class="builtintype" id="5619276">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5619291">//&nbsp;keeps&nbsp;track&nbsp;of&nbsp;file&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619324">tot</span>&nbsp;<span class="builtintype" id="5619328">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5619343">//&nbsp;total&nbsp;size&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span><span class="op" id="5619369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="5619372">//&nbsp;Keywords&nbsp;for&nbsp;GNU&nbsp;sparse&nbsp;files&nbsp;in&nbsp;a&nbsp;PAX&nbsp;extended&nbsp;header</span><br>
<span class="lineno"></span><span class="keyword" id="5619430">const</span>&nbsp;<span class="op" id="5619436">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619439">paxGNUSparseNumBlocks</span>&nbsp;<span class="op" id="5619461">=</span>&nbsp;<span class="string" id="5619463">&#34;GNU.sparse.numblocks&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619487">paxGNUSparseOffset</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5619509">=</span>&nbsp;<span class="string" id="5619511">&#34;GNU.sparse.offset&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619532">paxGNUSparseNumBytes</span>&nbsp;&nbsp;<span class="op" id="5619554">=</span>&nbsp;<span class="string" id="5619556">&#34;GNU.sparse.numbytes&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619579">paxGNUSparseMap</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5619601">=</span>&nbsp;<span class="string" id="5619603">&#34;GNU.sparse.map&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619621">paxGNUSparseName</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5619643">=</span>&nbsp;<span class="string" id="5619645">&#34;GNU.sparse.name&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619664">paxGNUSparseMajor</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5619686">=</span>&nbsp;<span class="string" id="5619688">&#34;GNU.sparse.major&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619708">paxGNUSparseMinor</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5619730">=</span>&nbsp;<span class="string" id="5619732">&#34;GNU.sparse.minor&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619752">paxGNUSparseSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5619774">=</span>&nbsp;<span class="string" id="5619776">&#34;GNU.sparse.size&#34;</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619795">paxGNUSparseRealSize</span>&nbsp;&nbsp;<span class="op" id="5619817">=</span>&nbsp;<span class="string" id="5619819">&#34;GNU.sparse.realsize&#34;</span><br>
<span class="lineno"></span><span class="op" id="5619841">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5619844">//&nbsp;Keywords&nbsp;for&nbsp;old&nbsp;GNU&nbsp;sparse&nbsp;headers</span><br>
<span class="lineno"></span><span class="keyword" id="5619883">const</span>&nbsp;<span class="op" id="5619889">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619892">oldGNUSparseMainHeaderOffset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5619935">=</span>&nbsp;<span class="num" id="5619937">386</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619942">oldGNUSparseMainHeaderIsExtendedOffset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5619985">=</span>&nbsp;<span class="num" id="5619987">482</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5619992">oldGNUSparseMainHeaderNumEntries</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5620035">=</span>&nbsp;<span class="num" id="5620037">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620040">oldGNUSparseExtendedHeaderIsExtendedOffset</span>&nbsp;<span class="op" id="5620083">=</span>&nbsp;<span class="num" id="5620085">504</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620090">oldGNUSparseExtendedHeaderNumEntries</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5620133">=</span>&nbsp;<span class="num" id="5620135">21</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620139">oldGNUSparseOffsetSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5620182">=</span>&nbsp;<span class="num" id="5620184">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620188">oldGNUSparseNumBytesSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5620231">=</span>&nbsp;<span class="num" id="5620233">12</span><br>
<span class="lineno"></span><span class="op" id="5620236">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5620239">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;Reader&nbsp;reading&nbsp;from&nbsp;r.</span><br>
<span class="lineno">85</span><span class="keyword" id="5620289">func</span>&nbsp;<span class="ident" id="5620294">NewReader</span><span class="op" id="5620303">(</span><span class="ident" id="5620304">r</span>&nbsp;<span class="ident" id="5620306"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5620308">.</span><span class="ident" id="5620309"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5620315">)</span>&nbsp;<span class="op" id="5620317">*</span><span class="ident" id="5620318"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span>&nbsp;<span class="op" id="5620325">{</span>&nbsp;<span class="keyword" id="5620327">return</span>&nbsp;<span class="op" id="5620334">&amp;</span><span class="ident" id="5620335"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5620341">{</span><span class="ident" id="5620342"><a href="/gostd/archive/tar/reader.go.html#5618400">r</a></span><span class="op" id="5620343">:</span>&nbsp;<span class="ident" id="5620345"><a href="/gostd/archive/tar/reader.go.html#5620304">r</a></span><span class="op" id="5620346">}</span>&nbsp;<span class="op" id="5620348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5620351">//&nbsp;Next&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;entry&nbsp;in&nbsp;the&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno"></span><span class="keyword" id="5620406">func</span>&nbsp;<span class="op" id="5620411">(</span><span class="ident" id="5620412">tr</span>&nbsp;<span class="op" id="5620415">*</span><span class="ident" id="5620416"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5620422">)</span>&nbsp;<span class="ident" id="5620424">Next</span><span class="op" id="5620428">(</span><span class="op" id="5620429">)</span>&nbsp;<span class="op" id="5620431">(</span><span class="op" id="5620432">*</span><span class="ident" id="5620433"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="5620439">,</span>&nbsp;<span class="builtintype" id="5620441">error</span><span class="op" id="5620446">)</span>&nbsp;<span class="op" id="5620448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620451">var</span>&nbsp;<span class="ident" id="5620455">hdr</span>&nbsp;<span class="op" id="5620459">*</span><span class="ident" id="5620460"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620468">if</span>&nbsp;<span class="ident" id="5620471"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620473">.</span><span class="ident" id="5620474"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5620478">==</span>&nbsp;<span class="builtintype" id="5620481">nil</span>&nbsp;<span class="op" id="5620485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620489"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620491">.</span><span class="ident" id="5620492"><a href="/gostd/archive/tar/reader.go.html#5628912">skipUnread</a></span><span class="op" id="5620502">(</span><span class="op" id="5620503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5620506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620509">if</span>&nbsp;<span class="ident" id="5620512"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620514">.</span><span class="ident" id="5620515"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5620519">!=</span>&nbsp;<span class="builtintype" id="5620522">nil</span>&nbsp;<span class="op" id="5620526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620530">return</span>&nbsp;<span class="ident" id="5620537"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span><span class="op" id="5620540">,</span>&nbsp;<span class="ident" id="5620542"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620544">.</span><span class="ident" id="5620545"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5620550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620553"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span>&nbsp;<span class="op" id="5620557">=</span>&nbsp;<span class="ident" id="5620559"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620561">.</span><span class="ident" id="5620562"><a href="/gostd/archive/tar/reader.go.html#5629403">readHeader</a></span><span class="op" id="5620572">(</span><span class="op" id="5620573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620576">if</span>&nbsp;<span class="ident" id="5620579"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span>&nbsp;<span class="op" id="5620583">==</span>&nbsp;<span class="builtintype" id="5620586">nil</span>&nbsp;<span class="op" id="5620590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620594">return</span>&nbsp;<span class="ident" id="5620601"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span><span class="op" id="5620604">,</span>&nbsp;<span class="ident" id="5620606"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620608">.</span><span class="ident" id="5620609"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5620614">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5620617">//&nbsp;Check&nbsp;for&nbsp;PAX/GNU&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620647">switch</span>&nbsp;<span class="ident" id="5620654"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span><span class="op" id="5620657">.</span><span class="ident" id="5620658"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5620667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620670">case</span>&nbsp;<span class="ident" id="5620675"><a href="/gostd/archive/tar/common.go.html#5610936">TypeXHeader</a></span><span class="op" id="5620686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5620690">//&nbsp;&nbsp;PAX&nbsp;extended&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620716">headers</span><span class="op" id="5620723">,</span>&nbsp;<span class="ident" id="5620725">err</span>&nbsp;<span class="op" id="5620729">:=</span>&nbsp;<span class="ident" id="5620732"><a href="/gostd/archive/tar/reader.go.html#5626209">parsePAX</a></span><span class="op" id="5620740">(</span><span class="ident" id="5620741"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620743">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620747">if</span>&nbsp;<span class="ident" id="5620750"><a href="/gostd/archive/tar/reader.go.html#5620725">err</a></span>&nbsp;<span class="op" id="5620754">!=</span>&nbsp;<span class="builtintype" id="5620757">nil</span>&nbsp;<span class="op" id="5620761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5620766">return</span>&nbsp;<span class="builtintype" id="5620773">nil</span><span class="op" id="5620776">,</span>&nbsp;<span class="ident" id="5620778"><a href="/gostd/archive/tar/reader.go.html#5620725">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5620784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5620788">//&nbsp;We&nbsp;actually&nbsp;read&nbsp;the&nbsp;whole&nbsp;file,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5620826">//&nbsp;but&nbsp;this&nbsp;skips&nbsp;alignment&nbsp;padding</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620864"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620866">.</span><span class="ident" id="5620867"><a href="/gostd/archive/tar/reader.go.html#5628912">skipUnread</a></span><span class="op" id="5620877">(</span><span class="op" id="5620878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620882"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span>&nbsp;<span class="op" id="5620886">=</span>&nbsp;<span class="ident" id="5620888"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620890">.</span><span class="ident" id="5620891"><a href="/gostd/archive/tar/reader.go.html#5629403">readHeader</a></span><span class="op" id="5620901">(</span><span class="op" id="5620902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620906"><a href="/gostd/archive/tar/reader.go.html#5623957">mergePAX</a></span><span class="op" id="5620914">(</span><span class="ident" id="5620915"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span><span class="op" id="5620918">,</span>&nbsp;<span class="ident" id="5620920"><a href="/gostd/archive/tar/reader.go.html#5620716">headers</a></span><span class="op" id="5620927">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5620932">//&nbsp;Check&nbsp;for&nbsp;a&nbsp;PAX&nbsp;format&nbsp;sparse&nbsp;file</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5620972">sp</span><span class="op" id="5620974">,</span>&nbsp;<span class="ident" id="5620976"><a href="/gostd/archive/tar/reader.go.html#5620725">err</a></span>&nbsp;<span class="op" id="5620980">:=</span>&nbsp;<span class="ident" id="5620983"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5620985">.</span><span class="ident" id="5620986"><a href="/gostd/archive/tar/reader.go.html#5622074">checkForGNUSparsePAXHeaders</a></span><span class="op" id="5621013">(</span><span class="ident" id="5621014"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span><span class="op" id="5621017">,</span>&nbsp;<span class="ident" id="5621019"><a href="/gostd/archive/tar/reader.go.html#5620716">headers</a></span><span class="op" id="5621026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621030">if</span>&nbsp;<span class="ident" id="5621033"><a href="/gostd/archive/tar/reader.go.html#5620725">err</a></span>&nbsp;<span class="op" id="5621037">!=</span>&nbsp;<span class="builtintype" id="5621040">nil</span>&nbsp;<span class="op" id="5621044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5621049"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5621051">.</span><span class="ident" id="5621052"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5621056">=</span>&nbsp;<span class="ident" id="5621058"><a href="/gostd/archive/tar/reader.go.html#5620725">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621065">return</span>&nbsp;<span class="builtintype" id="5621072">nil</span><span class="op" id="5621075">,</span>&nbsp;<span class="ident" id="5621077"><a href="/gostd/archive/tar/reader.go.html#5620725">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5621083">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621087">if</span>&nbsp;<span class="ident" id="5621090"><a href="/gostd/archive/tar/reader.go.html#5620972">sp</a></span>&nbsp;<span class="op" id="5621093">!=</span>&nbsp;<span class="builtintype" id="5621096">nil</span>&nbsp;<span class="op" id="5621100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5621105">//&nbsp;Current&nbsp;file&nbsp;is&nbsp;a&nbsp;PAX&nbsp;format&nbsp;GNU&nbsp;sparse&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5621157">//&nbsp;Set&nbsp;the&nbsp;current&nbsp;file&nbsp;reader&nbsp;to&nbsp;a&nbsp;sparse&nbsp;file&nbsp;reader.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5621216"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5621218">.</span><span class="ident" id="5621219"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span>&nbsp;<span class="op" id="5621224">=</span>&nbsp;<span class="op" id="5621226">&amp;</span><span class="ident" id="5621227"><a href="/gostd/archive/tar/reader.go.html#5619136">sparseFileReader</a></span><span class="op" id="5621243">{</span><span class="ident" id="5621244"><a href="/gostd/archive/tar/reader.go.html#5619163">rfr</a></span><span class="op" id="5621247">:</span>&nbsp;<span class="ident" id="5621249"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5621251">.</span><span class="ident" id="5621252"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span><span class="op" id="5621256">.</span><span class="op" id="5621257">(</span><span class="op" id="5621258">*</span><span class="ident" id="5621259"><a href="/gostd/archive/tar/reader.go.html#5618916">regFileReader</a></span><span class="op" id="5621272">)</span><span class="op" id="5621273">,</span>&nbsp;<span class="ident" id="5621275"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span><span class="op" id="5621277">:</span>&nbsp;<span class="ident" id="5621279"><a href="/gostd/archive/tar/reader.go.html#5620972">sp</a></span><span class="op" id="5621281">,</span>&nbsp;<span class="ident" id="5621283"><a href="/gostd/archive/tar/reader.go.html#5619324">tot</a></span><span class="op" id="5621286">:</span>&nbsp;<span class="ident" id="5621288"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span><span class="op" id="5621291">.</span><span class="ident" id="5621292"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="5621296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5621300">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621304">return</span>&nbsp;<span class="ident" id="5621311"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span><span class="op" id="5621314">,</span>&nbsp;<span class="builtintype" id="5621316">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621321">case</span>&nbsp;<span class="ident" id="5621326"><a href="/gostd/archive/tar/common.go.html#5611037">TypeGNULongName</a></span><span class="op" id="5621341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5621345">//&nbsp;We&nbsp;have&nbsp;a&nbsp;GNU&nbsp;long&nbsp;name&nbsp;header.&nbsp;Its&nbsp;contents&nbsp;are&nbsp;the&nbsp;real&nbsp;file&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5621419">realname</span><span class="op" id="5621427">,</span>&nbsp;<span class="ident" id="5621429">err</span>&nbsp;<span class="op" id="5621433">:=</span>&nbsp;<span class="ident" id="5621436"><a href="/gostd/archive/tar/reader.go.html#5617948">ioutil</a></span><span class="op" id="5621442">.</span><span class="ident" id="5621443"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="5621450">(</span><span class="ident" id="5621451"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5621453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621457">if</span>&nbsp;<span class="ident" id="5621460"><a href="/gostd/archive/tar/reader.go.html#5621429">err</a></span>&nbsp;<span class="op" id="5621464">!=</span>&nbsp;<span class="builtintype" id="5621467">nil</span>&nbsp;<span class="op" id="5621471">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621476">return</span>&nbsp;<span class="builtintype" id="5621483">nil</span><span class="op" id="5621486">,</span>&nbsp;<span class="ident" id="5621488"><a href="/gostd/archive/tar/reader.go.html#5621429">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5621494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5621498">hdr</span><span class="op" id="5621501">,</span>&nbsp;<span class="ident" id="5621503"><a href="/gostd/archive/tar/reader.go.html#5621429">err</a></span>&nbsp;<span class="op" id="5621507">:=</span>&nbsp;<span class="ident" id="5621510"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5621512">.</span><span class="ident" id="5621513"><a href="/gostd/archive/tar/reader.go.html#5620424">Next</a></span><span class="op" id="5621517">(</span><span class="op" id="5621518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5621522"><a href="/gostd/archive/tar/reader.go.html#5621498">hdr</a></span><span class="op" id="5621525">.</span><span class="ident" id="5621526"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="5621531">=</span>&nbsp;<span class="ident" id="5621533"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5621540">(</span><span class="ident" id="5621541"><a href="/gostd/archive/tar/reader.go.html#5621419">realname</a></span><span class="op" id="5621549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621553">return</span>&nbsp;<span class="ident" id="5621560"><a href="/gostd/archive/tar/reader.go.html#5621498">hdr</a></span><span class="op" id="5621563">,</span>&nbsp;<span class="ident" id="5621565"><a href="/gostd/archive/tar/reader.go.html#5621429">err</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621570">case</span>&nbsp;<span class="ident" id="5621575"><a href="/gostd/archive/tar/common.go.html#5611094">TypeGNULongLink</a></span><span class="op" id="5621590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5621594">//&nbsp;We&nbsp;have&nbsp;a&nbsp;GNU&nbsp;long&nbsp;link&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5621631">realname</span><span class="op" id="5621639">,</span>&nbsp;<span class="ident" id="5621641">err</span>&nbsp;<span class="op" id="5621645">:=</span>&nbsp;<span class="ident" id="5621648"><a href="/gostd/archive/tar/reader.go.html#5617948">ioutil</a></span><span class="op" id="5621654">.</span><span class="ident" id="5621655"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="5621662">(</span><span class="ident" id="5621663"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5621665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621669">if</span>&nbsp;<span class="ident" id="5621672"><a href="/gostd/archive/tar/reader.go.html#5621641">err</a></span>&nbsp;<span class="op" id="5621676">!=</span>&nbsp;<span class="builtintype" id="5621679">nil</span>&nbsp;<span class="op" id="5621683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621688">return</span>&nbsp;<span class="builtintype" id="5621695">nil</span><span class="op" id="5621698">,</span>&nbsp;<span class="ident" id="5621700"><a href="/gostd/archive/tar/reader.go.html#5621641">err</a></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5621706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5621710">hdr</span><span class="op" id="5621713">,</span>&nbsp;<span class="ident" id="5621715"><a href="/gostd/archive/tar/reader.go.html#5621641">err</a></span>&nbsp;<span class="op" id="5621719">:=</span>&nbsp;<span class="ident" id="5621722"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5621724">.</span><span class="ident" id="5621725"><a href="/gostd/archive/tar/reader.go.html#5620424">Next</a></span><span class="op" id="5621729">(</span><span class="op" id="5621730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5621734"><a href="/gostd/archive/tar/reader.go.html#5621710">hdr</a></span><span class="op" id="5621737">.</span><span class="ident" id="5621738"><a href="/gostd/archive/tar/common.go.html#5611642">Linkname</a></span>&nbsp;<span class="op" id="5621747">=</span>&nbsp;<span class="ident" id="5621749"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5621756">(</span><span class="ident" id="5621757"><a href="/gostd/archive/tar/reader.go.html#5621631">realname</a></span><span class="op" id="5621765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621769">return</span>&nbsp;<span class="ident" id="5621776"><a href="/gostd/archive/tar/reader.go.html#5621710">hdr</a></span><span class="op" id="5621779">,</span>&nbsp;<span class="ident" id="5621781"><a href="/gostd/archive/tar/reader.go.html#5621641">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5621786">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5621789">return</span>&nbsp;<span class="ident" id="5621796"><a href="/gostd/archive/tar/reader.go.html#5620455">hdr</a></span><span class="op" id="5621799">,</span>&nbsp;<span class="ident" id="5621801"><a href="/gostd/archive/tar/reader.go.html#5620412">tr</a></span><span class="op" id="5621803">.</span><span class="ident" id="5621804"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span><br>
<span class="lineno"></span><span class="op" id="5621808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5621811">//&nbsp;checkForGNUSparsePAXHeaders&nbsp;checks&nbsp;the&nbsp;PAX&nbsp;headers&nbsp;for&nbsp;GNU&nbsp;sparse&nbsp;headers.&nbsp;If&nbsp;they&nbsp;are&nbsp;found,&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5621913">//&nbsp;this&nbsp;function&nbsp;reads&nbsp;the&nbsp;sparse&nbsp;map&nbsp;and&nbsp;returns&nbsp;it.&nbsp;Unknown&nbsp;sparse&nbsp;formats&nbsp;are&nbsp;ignored,&nbsp;causing&nbsp;the&nbsp;file&nbsp;to</span><br>
<span class="lineno">150</span><span class="comment" id="5622023">//&nbsp;be&nbsp;treated&nbsp;as&nbsp;a&nbsp;regular&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5622056">func</span>&nbsp;<span class="op" id="5622061">(</span><span class="ident" id="5622062">tr</span>&nbsp;<span class="op" id="5622065">*</span><span class="ident" id="5622066"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5622072">)</span>&nbsp;<span class="ident" id="5622074">checkForGNUSparsePAXHeaders</span><span class="op" id="5622101">(</span><span class="ident" id="5622102">hdr</span>&nbsp;<span class="op" id="5622106">*</span><span class="ident" id="5622107"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="5622113">,</span>&nbsp;<span class="ident" id="5622115">headers</span>&nbsp;<span class="keyword" id="5622123">map</span><span class="op" id="5622126">[</span><span class="builtintype" id="5622127">string</span><span class="op" id="5622133">]</span><span class="builtintype" id="5622134">string</span><span class="op" id="5622140">)</span>&nbsp;<span class="op" id="5622142">(</span><span class="op" id="5622143">[</span><span class="op" id="5622144">]</span><span class="ident" id="5622145"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5622156">,</span>&nbsp;<span class="builtintype" id="5622158">error</span><span class="op" id="5622163">)</span>&nbsp;<span class="op" id="5622165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5622168">var</span>&nbsp;<span class="ident" id="5622172">sparseFormat</span>&nbsp;<span class="builtintype" id="5622185">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5622194">//&nbsp;Check&nbsp;for&nbsp;sparse&nbsp;format&nbsp;indicators</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622233">major</span><span class="op" id="5622238">,</span>&nbsp;<span class="ident" id="5622240">majorOk</span>&nbsp;<span class="op" id="5622248">:=</span>&nbsp;<span class="ident" id="5622251"><a href="/gostd/archive/tar/reader.go.html#5622115">headers</a></span><span class="op" id="5622258">[</span><span class="ident" id="5622259"><a href="/gostd/archive/tar/reader.go.html#5619664">paxGNUSparseMajor</a></span><span class="op" id="5622276">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622279">minor</span><span class="op" id="5622284">,</span>&nbsp;<span class="ident" id="5622286">minorOk</span>&nbsp;<span class="op" id="5622294">:=</span>&nbsp;<span class="ident" id="5622297"><a href="/gostd/archive/tar/reader.go.html#5622115">headers</a></span><span class="op" id="5622304">[</span><span class="ident" id="5622305"><a href="/gostd/archive/tar/reader.go.html#5619708">paxGNUSparseMinor</a></span><span class="op" id="5622322">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622325">sparseName</span><span class="op" id="5622335">,</span>&nbsp;<span class="ident" id="5622337">sparseNameOk</span>&nbsp;<span class="op" id="5622350">:=</span>&nbsp;<span class="ident" id="5622353"><a href="/gostd/archive/tar/reader.go.html#5622115">headers</a></span><span class="op" id="5622360">[</span><span class="ident" id="5622361"><a href="/gostd/archive/tar/reader.go.html#5619621">paxGNUSparseName</a></span><span class="op" id="5622377">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622380">_</span><span class="op" id="5622381">,</span>&nbsp;<span class="ident" id="5622383">sparseMapOk</span>&nbsp;<span class="op" id="5622395">:=</span>&nbsp;<span class="ident" id="5622398"><a href="/gostd/archive/tar/reader.go.html#5622115">headers</a></span><span class="op" id="5622405">[</span><span class="ident" id="5622406"><a href="/gostd/archive/tar/reader.go.html#5619579">paxGNUSparseMap</a></span><span class="op" id="5622421">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622424">sparseSize</span><span class="op" id="5622434">,</span>&nbsp;<span class="ident" id="5622436">sparseSizeOk</span>&nbsp;<span class="op" id="5622449">:=</span>&nbsp;<span class="ident" id="5622452"><a href="/gostd/archive/tar/reader.go.html#5622115">headers</a></span><span class="op" id="5622459">[</span><span class="ident" id="5622460"><a href="/gostd/archive/tar/reader.go.html#5619752">paxGNUSparseSize</a></span><span class="op" id="5622476">]</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622479">sparseRealSize</span><span class="op" id="5622493">,</span>&nbsp;<span class="ident" id="5622495">sparseRealSizeOk</span>&nbsp;<span class="op" id="5622512">:=</span>&nbsp;<span class="ident" id="5622515"><a href="/gostd/archive/tar/reader.go.html#5622115">headers</a></span><span class="op" id="5622522">[</span><span class="ident" id="5622523"><a href="/gostd/archive/tar/reader.go.html#5619795">paxGNUSparseRealSize</a></span><span class="op" id="5622543">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5622547">//&nbsp;Identify&nbsp;which,&nbsp;if&nbsp;any,&nbsp;sparse&nbsp;format&nbsp;applies&nbsp;from&nbsp;which&nbsp;PAX&nbsp;headers&nbsp;are&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5622628">if</span>&nbsp;<span class="ident" id="5622631"><a href="/gostd/archive/tar/reader.go.html#5622240">majorOk</a></span>&nbsp;<span class="op" id="5622639">&amp;&amp;</span>&nbsp;<span class="ident" id="5622642"><a href="/gostd/archive/tar/reader.go.html#5622286">minorOk</a></span>&nbsp;<span class="op" id="5622650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622654"><a href="/gostd/archive/tar/reader.go.html#5622172">sparseFormat</a></span>&nbsp;<span class="op" id="5622667">=</span>&nbsp;<span class="ident" id="5622669"><a href="/gostd/archive/tar/reader.go.html#5622233">major</a></span>&nbsp;<span class="op" id="5622675">+</span>&nbsp;<span class="string" id="5622677">&#34;.&#34;</span>&nbsp;<span class="op" id="5622681">+</span>&nbsp;<span class="ident" id="5622683"><a href="/gostd/archive/tar/reader.go.html#5622279">minor</a></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5622690">}</span>&nbsp;<span class="keyword" id="5622692">else</span>&nbsp;<span class="keyword" id="5622697">if</span>&nbsp;<span class="ident" id="5622700"><a href="/gostd/archive/tar/reader.go.html#5622337">sparseNameOk</a></span>&nbsp;<span class="op" id="5622713">&amp;&amp;</span>&nbsp;<span class="ident" id="5622716"><a href="/gostd/archive/tar/reader.go.html#5622383">sparseMapOk</a></span>&nbsp;<span class="op" id="5622728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622732"><a href="/gostd/archive/tar/reader.go.html#5622172">sparseFormat</a></span>&nbsp;<span class="op" id="5622745">=</span>&nbsp;<span class="string" id="5622747">&#34;0.1&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5622754">}</span>&nbsp;<span class="keyword" id="5622756">else</span>&nbsp;<span class="keyword" id="5622761">if</span>&nbsp;<span class="ident" id="5622764"><a href="/gostd/archive/tar/reader.go.html#5622436">sparseSizeOk</a></span>&nbsp;<span class="op" id="5622777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5622781"><a href="/gostd/archive/tar/reader.go.html#5622172">sparseFormat</a></span>&nbsp;<span class="op" id="5622794">=</span>&nbsp;<span class="string" id="5622796">&#34;0.0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5622803">}</span>&nbsp;<span class="keyword" id="5622805">else</span>&nbsp;<span class="op" id="5622810">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5622814">//&nbsp;Not&nbsp;a&nbsp;PAX&nbsp;format&nbsp;GNU&nbsp;sparse&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5622853">return</span>&nbsp;<span class="builtintype" id="5622860">nil</span><span class="op" id="5622863">,</span>&nbsp;<span class="builtintype" id="5622865">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5622870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5622874">//&nbsp;Check&nbsp;for&nbsp;unknown&nbsp;sparse&nbsp;format</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5622910">if</span>&nbsp;<span class="ident" id="5622913"><a href="/gostd/archive/tar/reader.go.html#5622172">sparseFormat</a></span>&nbsp;<span class="op" id="5622926">!=</span>&nbsp;<span class="string" id="5622929">&#34;0.0&#34;</span>&nbsp;<span class="op" id="5622935">&amp;&amp;</span>&nbsp;<span class="ident" id="5622938"><a href="/gostd/archive/tar/reader.go.html#5622172">sparseFormat</a></span>&nbsp;<span class="op" id="5622951">!=</span>&nbsp;<span class="string" id="5622954">&#34;0.1&#34;</span>&nbsp;<span class="op" id="5622960">&amp;&amp;</span>&nbsp;<span class="ident" id="5622963"><a href="/gostd/archive/tar/reader.go.html#5622172">sparseFormat</a></span>&nbsp;<span class="op" id="5622976">!=</span>&nbsp;<span class="string" id="5622979">&#34;1.0&#34;</span>&nbsp;<span class="op" id="5622985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5622989">return</span>&nbsp;<span class="builtintype" id="5622996">nil</span><span class="op" id="5622999">,</span>&nbsp;<span class="builtintype" id="5623001">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5623006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5623010">//&nbsp;Update&nbsp;hdr&nbsp;from&nbsp;GNU&nbsp;sparse&nbsp;PAX&nbsp;headers</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623053">if</span>&nbsp;<span class="ident" id="5623056"><a href="/gostd/archive/tar/reader.go.html#5622337">sparseNameOk</a></span>&nbsp;<span class="op" id="5623069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5623073"><a href="/gostd/archive/tar/reader.go.html#5622102">hdr</a></span><span class="op" id="5623076">.</span><span class="ident" id="5623077"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="5623082">=</span>&nbsp;<span class="ident" id="5623084"><a href="/gostd/archive/tar/reader.go.html#5622325">sparseName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5623096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623099">if</span>&nbsp;<span class="ident" id="5623102"><a href="/gostd/archive/tar/reader.go.html#5622436">sparseSizeOk</a></span>&nbsp;<span class="op" id="5623115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5623119">realSize</span><span class="op" id="5623127">,</span>&nbsp;<span class="ident" id="5623129">err</span>&nbsp;<span class="op" id="5623133">:=</span>&nbsp;<span class="ident" id="5623136"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5623143">.</span><span class="ident" id="5623144"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5623152">(</span><span class="ident" id="5623153"><a href="/gostd/archive/tar/reader.go.html#5622424">sparseSize</a></span><span class="op" id="5623163">,</span>&nbsp;<span class="num" id="5623165">10</span><span class="op" id="5623167">,</span>&nbsp;<span class="num" id="5623169">0</span><span class="op" id="5623170">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623174">if</span>&nbsp;<span class="ident" id="5623177"><a href="/gostd/archive/tar/reader.go.html#5623129">err</a></span>&nbsp;<span class="op" id="5623181">!=</span>&nbsp;<span class="builtintype" id="5623184">nil</span>&nbsp;<span class="op" id="5623188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623193">return</span>&nbsp;<span class="builtintype" id="5623200">nil</span><span class="op" id="5623203">,</span>&nbsp;<span class="ident" id="5623205"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5623217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5623221"><a href="/gostd/archive/tar/reader.go.html#5622102">hdr</a></span><span class="op" id="5623224">.</span><span class="ident" id="5623225"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="5623230">=</span>&nbsp;<span class="ident" id="5623232"><a href="/gostd/archive/tar/reader.go.html#5623119">realSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5623242">}</span>&nbsp;<span class="keyword" id="5623244">else</span>&nbsp;<span class="keyword" id="5623249">if</span>&nbsp;<span class="ident" id="5623252"><a href="/gostd/archive/tar/reader.go.html#5622495">sparseRealSizeOk</a></span>&nbsp;<span class="op" id="5623269">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5623273">realSize</span><span class="op" id="5623281">,</span>&nbsp;<span class="ident" id="5623283">err</span>&nbsp;<span class="op" id="5623287">:=</span>&nbsp;<span class="ident" id="5623290"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5623297">.</span><span class="ident" id="5623298"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5623306">(</span><span class="ident" id="5623307"><a href="/gostd/archive/tar/reader.go.html#5622479">sparseRealSize</a></span><span class="op" id="5623321">,</span>&nbsp;<span class="num" id="5623323">10</span><span class="op" id="5623325">,</span>&nbsp;<span class="num" id="5623327">0</span><span class="op" id="5623328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623332">if</span>&nbsp;<span class="ident" id="5623335"><a href="/gostd/archive/tar/reader.go.html#5623283">err</a></span>&nbsp;<span class="op" id="5623339">!=</span>&nbsp;<span class="builtintype" id="5623342">nil</span>&nbsp;<span class="op" id="5623346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623351">return</span>&nbsp;<span class="builtintype" id="5623358">nil</span><span class="op" id="5623361">,</span>&nbsp;<span class="ident" id="5623363"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5623375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5623379"><a href="/gostd/archive/tar/reader.go.html#5622102">hdr</a></span><span class="op" id="5623382">.</span><span class="ident" id="5623383"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="5623388">=</span>&nbsp;<span class="ident" id="5623390"><a href="/gostd/archive/tar/reader.go.html#5623273">realSize</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5623400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5623404">//&nbsp;Set&nbsp;up&nbsp;the&nbsp;sparse&nbsp;map,&nbsp;according&nbsp;to&nbsp;the&nbsp;particular&nbsp;sparse&nbsp;format&nbsp;in&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623480">var</span>&nbsp;<span class="ident" id="5623484">sp</span>&nbsp;<span class="op" id="5623487">[</span><span class="op" id="5623488">]</span><span class="ident" id="5623489"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623502">var</span>&nbsp;<span class="ident" id="5623506">err</span>&nbsp;<span class="builtintype" id="5623510">error</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623517">switch</span>&nbsp;<span class="ident" id="5623524"><a href="/gostd/archive/tar/reader.go.html#5622172">sparseFormat</a></span>&nbsp;<span class="op" id="5623537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623540">case</span>&nbsp;<span class="string" id="5623545">&#34;0.0&#34;</span><span class="op" id="5623550">,</span>&nbsp;<span class="string" id="5623552">&#34;0.1&#34;</span><span class="op" id="5623557">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5623561"><a href="/gostd/archive/tar/reader.go.html#5623484">sp</a></span><span class="op" id="5623563">,</span>&nbsp;<span class="ident" id="5623565"><a href="/gostd/archive/tar/reader.go.html#5623506">err</a></span>&nbsp;<span class="op" id="5623569">=</span>&nbsp;<span class="ident" id="5623571"><a href="/gostd/archive/tar/reader.go.html#5636607">readGNUSparseMap0x1</a></span><span class="op" id="5623590">(</span><span class="ident" id="5623591"><a href="/gostd/archive/tar/reader.go.html#5622115">headers</a></span><span class="op" id="5623598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623601">case</span>&nbsp;<span class="string" id="5623606">&#34;1.0&#34;</span><span class="op" id="5623611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5623615"><a href="/gostd/archive/tar/reader.go.html#5623484">sp</a></span><span class="op" id="5623617">,</span>&nbsp;<span class="ident" id="5623619"><a href="/gostd/archive/tar/reader.go.html#5623506">err</a></span>&nbsp;<span class="op" id="5623623">=</span>&nbsp;<span class="ident" id="5623625"><a href="/gostd/archive/tar/reader.go.html#5634354">readGNUSparseMap1x0</a></span><span class="op" id="5623644">(</span><span class="ident" id="5623645"><a href="/gostd/archive/tar/reader.go.html#5622062">tr</a></span><span class="op" id="5623647">.</span><span class="ident" id="5623648"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span><span class="op" id="5623652">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5623655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5623658">return</span>&nbsp;<span class="ident" id="5623665"><a href="/gostd/archive/tar/reader.go.html#5623484">sp</a></span><span class="op" id="5623667">,</span>&nbsp;<span class="ident" id="5623669"><a href="/gostd/archive/tar/reader.go.html#5623506">err</a></span><br>
<span class="lineno"></span><span class="op" id="5623673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5623676">//&nbsp;mergePAX&nbsp;merges&nbsp;well&nbsp;known&nbsp;headers&nbsp;according&nbsp;to&nbsp;PAX&nbsp;standard.</span><br>
<span class="lineno">210</span><span class="comment" id="5623741">//&nbsp;In&nbsp;general&nbsp;headers&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;as&nbsp;those&nbsp;found</span><br>
<span class="lineno"></span><span class="comment" id="5623797">//&nbsp;in&nbsp;the&nbsp;header&nbsp;struct&nbsp;overwrite&nbsp;those&nbsp;found&nbsp;in&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span><span class="comment" id="5623857">//&nbsp;struct&nbsp;with&nbsp;higher&nbsp;precision&nbsp;or&nbsp;longer&nbsp;values.&nbsp;Esp.&nbsp;useful</span><br>
<span class="lineno"></span><span class="comment" id="5623919">//&nbsp;for&nbsp;name&nbsp;and&nbsp;linkname&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="5623952">func</span>&nbsp;<span class="ident" id="5623957">mergePAX</span><span class="op" id="5623965">(</span><span class="ident" id="5623966">hdr</span>&nbsp;<span class="op" id="5623970">*</span><span class="ident" id="5623971"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="5623977">,</span>&nbsp;<span class="ident" id="5623979">headers</span>&nbsp;<span class="keyword" id="5623987">map</span><span class="op" id="5623990">[</span><span class="builtintype" id="5623991">string</span><span class="op" id="5623997">]</span><span class="builtintype" id="5623998">string</span><span class="op" id="5624004">)</span>&nbsp;<span class="builtintype" id="5624006">error</span>&nbsp;<span class="op" id="5624012">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624015">for</span>&nbsp;<span class="ident" id="5624019">k</span><span class="op" id="5624020">,</span>&nbsp;<span class="ident" id="5624022">v</span>&nbsp;<span class="op" id="5624024">:=</span>&nbsp;<span class="keyword" id="5624027">range</span>&nbsp;<span class="ident" id="5624033"><a href="/gostd/archive/tar/reader.go.html#5623979">headers</a></span>&nbsp;<span class="op" id="5624041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624045">switch</span>&nbsp;<span class="ident" id="5624052"><a href="/gostd/archive/tar/reader.go.html#5624019">k</a></span>&nbsp;<span class="op" id="5624054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624058">case</span>&nbsp;<span class="ident" id="5624063"><a href="/gostd/archive/tar/common.go.html#5615076">paxPath</a></span><span class="op" id="5624070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624075"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624078">.</span><span class="ident" id="5624079"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="5624084">=</span>&nbsp;<span class="ident" id="5624086"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624090">case</span>&nbsp;<span class="ident" id="5624095"><a href="/gostd/archive/tar/common.go.html#5615027">paxLinkpath</a></span><span class="op" id="5624106">:</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624111"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624114">.</span><span class="ident" id="5624115"><a href="/gostd/archive/tar/common.go.html#5611642">Linkname</a></span>&nbsp;<span class="op" id="5624124">=</span>&nbsp;<span class="ident" id="5624126"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624130">case</span>&nbsp;<span class="ident" id="5624135"><a href="/gostd/archive/tar/common.go.html#5615004">paxGname</a></span><span class="op" id="5624143">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624148"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624151">.</span><span class="ident" id="5624152"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span>&nbsp;<span class="op" id="5624158">=</span>&nbsp;<span class="ident" id="5624160"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624164">case</span>&nbsp;<span class="ident" id="5624169"><a href="/gostd/archive/tar/common.go.html#5615141">paxUname</a></span><span class="op" id="5624177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624182"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624185">.</span><span class="ident" id="5624186"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span>&nbsp;<span class="op" id="5624192">=</span>&nbsp;<span class="ident" id="5624194"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624198">case</span>&nbsp;<span class="ident" id="5624203"><a href="/gostd/archive/tar/common.go.html#5615120">paxUid</a></span><span class="op" id="5624209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624214">uid</span><span class="op" id="5624217">,</span>&nbsp;<span class="ident" id="5624219">err</span>&nbsp;<span class="op" id="5624223">:=</span>&nbsp;<span class="ident" id="5624226"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5624233">.</span><span class="ident" id="5624234"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5624242">(</span><span class="ident" id="5624243"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><span class="op" id="5624244">,</span>&nbsp;<span class="num" id="5624246">10</span><span class="op" id="5624248">,</span>&nbsp;<span class="num" id="5624250">0</span><span class="op" id="5624251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624256">if</span>&nbsp;<span class="ident" id="5624259"><a href="/gostd/archive/tar/reader.go.html#5624219">err</a></span>&nbsp;<span class="op" id="5624263">!=</span>&nbsp;<span class="builtintype" id="5624266">nil</span>&nbsp;<span class="op" id="5624270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624276">return</span>&nbsp;<span class="ident" id="5624283"><a href="/gostd/archive/tar/reader.go.html#5624219">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5624290">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624295"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624298">.</span><span class="ident" id="5624299"><a href="/gostd/archive/tar/common.go.html#5611431">Uid</a></span>&nbsp;<span class="op" id="5624303">=</span>&nbsp;<span class="builtintype" id="5624305">int</span><span class="op" id="5624308">(</span><span class="ident" id="5624309"><a href="/gostd/archive/tar/reader.go.html#5624214">uid</a></span><span class="op" id="5624312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624316">case</span>&nbsp;<span class="ident" id="5624321"><a href="/gostd/archive/tar/common.go.html#5614983">paxGid</a></span><span class="op" id="5624327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624332">gid</span><span class="op" id="5624335">,</span>&nbsp;<span class="ident" id="5624337">err</span>&nbsp;<span class="op" id="5624341">:=</span>&nbsp;<span class="ident" id="5624344"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5624351">.</span><span class="ident" id="5624352"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5624360">(</span><span class="ident" id="5624361"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><span class="op" id="5624362">,</span>&nbsp;<span class="num" id="5624364">10</span><span class="op" id="5624366">,</span>&nbsp;<span class="num" id="5624368">0</span><span class="op" id="5624369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624374">if</span>&nbsp;<span class="ident" id="5624377"><a href="/gostd/archive/tar/reader.go.html#5624337">err</a></span>&nbsp;<span class="op" id="5624381">!=</span>&nbsp;<span class="builtintype" id="5624384">nil</span>&nbsp;<span class="op" id="5624388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624394">return</span>&nbsp;<span class="ident" id="5624401"><a href="/gostd/archive/tar/reader.go.html#5624337">err</a></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5624408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624413"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624416">.</span><span class="ident" id="5624417"><a href="/gostd/archive/tar/common.go.html#5611473">Gid</a></span>&nbsp;<span class="op" id="5624421">=</span>&nbsp;<span class="builtintype" id="5624423">int</span><span class="op" id="5624426">(</span><span class="ident" id="5624427"><a href="/gostd/archive/tar/reader.go.html#5624332">gid</a></span><span class="op" id="5624430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624434">case</span>&nbsp;<span class="ident" id="5624439"><a href="/gostd/archive/tar/common.go.html#5614834">paxAtime</a></span><span class="op" id="5624447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624452">t</span><span class="op" id="5624453">,</span>&nbsp;<span class="ident" id="5624455">err</span>&nbsp;<span class="op" id="5624459">:=</span>&nbsp;<span class="ident" id="5624462"><a href="/gostd/archive/tar/reader.go.html#5625160">parsePAXTime</a></span><span class="op" id="5624474">(</span><span class="ident" id="5624475"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><span class="op" id="5624476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624481">if</span>&nbsp;<span class="ident" id="5624484"><a href="/gostd/archive/tar/reader.go.html#5624455">err</a></span>&nbsp;<span class="op" id="5624488">!=</span>&nbsp;<span class="builtintype" id="5624491">nil</span>&nbsp;<span class="op" id="5624495">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624501">return</span>&nbsp;<span class="ident" id="5624508"><a href="/gostd/archive/tar/reader.go.html#5624455">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5624515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624520"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624523">.</span><span class="ident" id="5624524"><a href="/gostd/archive/tar/common.go.html#5611910">AccessTime</a></span>&nbsp;<span class="op" id="5624535">=</span>&nbsp;<span class="ident" id="5624537"><a href="/gostd/archive/tar/reader.go.html#5624452">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624541">case</span>&nbsp;<span class="ident" id="5624546"><a href="/gostd/archive/tar/common.go.html#5615053">paxMtime</a></span><span class="op" id="5624554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624559">t</span><span class="op" id="5624560">,</span>&nbsp;<span class="ident" id="5624562">err</span>&nbsp;<span class="op" id="5624566">:=</span>&nbsp;<span class="ident" id="5624569"><a href="/gostd/archive/tar/reader.go.html#5625160">parsePAXTime</a></span><span class="op" id="5624581">(</span><span class="ident" id="5624582"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><span class="op" id="5624583">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624588">if</span>&nbsp;<span class="ident" id="5624591"><a href="/gostd/archive/tar/reader.go.html#5624562">err</a></span>&nbsp;<span class="op" id="5624595">!=</span>&nbsp;<span class="builtintype" id="5624598">nil</span>&nbsp;<span class="op" id="5624602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624608">return</span>&nbsp;<span class="ident" id="5624615"><a href="/gostd/archive/tar/reader.go.html#5624562">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5624622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624627"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624630">.</span><span class="ident" id="5624631"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span>&nbsp;<span class="op" id="5624639">=</span>&nbsp;<span class="ident" id="5624641"><a href="/gostd/archive/tar/reader.go.html#5624559">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624645">case</span>&nbsp;<span class="ident" id="5624650"><a href="/gostd/archive/tar/common.go.html#5614907">paxCtime</a></span><span class="op" id="5624658">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624663">t</span><span class="op" id="5624664">,</span>&nbsp;<span class="ident" id="5624666">err</span>&nbsp;<span class="op" id="5624670">:=</span>&nbsp;<span class="ident" id="5624673"><a href="/gostd/archive/tar/reader.go.html#5625160">parsePAXTime</a></span><span class="op" id="5624685">(</span><span class="ident" id="5624686"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><span class="op" id="5624687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624692">if</span>&nbsp;<span class="ident" id="5624695"><a href="/gostd/archive/tar/reader.go.html#5624666">err</a></span>&nbsp;<span class="op" id="5624699">!=</span>&nbsp;<span class="builtintype" id="5624702">nil</span>&nbsp;<span class="op" id="5624706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624712">return</span>&nbsp;<span class="ident" id="5624719"><a href="/gostd/archive/tar/reader.go.html#5624666">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5624726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624731"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624734">.</span><span class="ident" id="5624735"><a href="/gostd/archive/tar/common.go.html#5611947">ChangeTime</a></span>&nbsp;<span class="op" id="5624746">=</span>&nbsp;<span class="ident" id="5624748"><a href="/gostd/archive/tar/reader.go.html#5624663">t</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624752">case</span>&nbsp;<span class="ident" id="5624757"><a href="/gostd/archive/tar/common.go.html#5615098">paxSize</a></span><span class="op" id="5624764">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624769">size</span><span class="op" id="5624773">,</span>&nbsp;<span class="ident" id="5624775">err</span>&nbsp;<span class="op" id="5624779">:=</span>&nbsp;<span class="ident" id="5624782"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5624789">.</span><span class="ident" id="5624790"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5624798">(</span><span class="ident" id="5624799"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><span class="op" id="5624800">,</span>&nbsp;<span class="num" id="5624802">10</span><span class="op" id="5624804">,</span>&nbsp;<span class="num" id="5624806">0</span><span class="op" id="5624807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624812">if</span>&nbsp;<span class="ident" id="5624815"><a href="/gostd/archive/tar/reader.go.html#5624775">err</a></span>&nbsp;<span class="op" id="5624819">!=</span>&nbsp;<span class="builtintype" id="5624822">nil</span>&nbsp;<span class="op" id="5624826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624832">return</span>&nbsp;<span class="ident" id="5624839"><a href="/gostd/archive/tar/reader.go.html#5624775">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5624846">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624851"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624854">.</span><span class="ident" id="5624855"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="5624860">=</span>&nbsp;<span class="builtintype" id="5624862">int64</span><span class="op" id="5624867">(</span><span class="ident" id="5624868"><a href="/gostd/archive/tar/reader.go.html#5624769">size</a></span><span class="op" id="5624872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624876">default</span><span class="op" id="5624883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624888">if</span>&nbsp;<span class="ident" id="5624891"><a href="/gostd/archive/tar/reader.go.html#5617978">strings</a></span><span class="op" id="5624898">.</span><span class="ident" id="5624899"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5624908">(</span><span class="ident" id="5624909"><a href="/gostd/archive/tar/reader.go.html#5624019">k</a></span><span class="op" id="5624910">,</span>&nbsp;<span class="ident" id="5624912"><a href="/gostd/archive/tar/common.go.html#5615164">paxXattr</a></span><span class="op" id="5624920">)</span>&nbsp;<span class="op" id="5624922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5624928">if</span>&nbsp;<span class="ident" id="5624931"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624934">.</span><span class="ident" id="5624935"><a href="/gostd/archive/tar/common.go.html#5611991">Xattrs</a></span>&nbsp;<span class="op" id="5624942">==</span>&nbsp;<span class="builtintype" id="5624945">nil</span>&nbsp;<span class="op" id="5624949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5624956"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5624959">.</span><span class="ident" id="5624960"><a href="/gostd/archive/tar/common.go.html#5611991">Xattrs</a></span>&nbsp;<span class="op" id="5624967">=</span>&nbsp;<span class="builtinfunc" id="5624969">make</span><span class="op" id="5624973">(</span><span class="keyword" id="5624974">map</span><span class="op" id="5624977">[</span><span class="builtintype" id="5624978">string</span><span class="op" id="5624984">]</span><span class="builtintype" id="5624985">string</span><span class="op" id="5624991">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5624997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625003"><a href="/gostd/archive/tar/reader.go.html#5623966">hdr</a></span><span class="op" id="5625006">.</span><span class="ident" id="5625007"><a href="/gostd/archive/tar/common.go.html#5611991">Xattrs</a></span><span class="op" id="5625013">[</span><span class="ident" id="5625014"><a href="/gostd/archive/tar/reader.go.html#5624019">k</a></span><span class="op" id="5625015">[</span><span class="builtinfunc" id="5625016">len</span><span class="op" id="5625019">(</span><span class="ident" id="5625020"><a href="/gostd/archive/tar/common.go.html#5615164">paxXattr</a></span><span class="op" id="5625028">)</span><span class="op" id="5625029">:</span><span class="op" id="5625030">]</span><span class="op" id="5625031">]</span>&nbsp;<span class="op" id="5625033">=</span>&nbsp;<span class="ident" id="5625035"><a href="/gostd/archive/tar/reader.go.html#5624022">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5625040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5625044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5625047">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625050">return</span>&nbsp;<span class="builtintype" id="5625057">nil</span><br>
<span class="lineno"></span><span class="op" id="5625061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5625064">//&nbsp;parsePAXTime&nbsp;takes&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;%d.%d&nbsp;as&nbsp;described&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5625129">//&nbsp;the&nbsp;PAX&nbsp;specification.</span><br>
<span class="lineno">275</span><span class="keyword" id="5625155">func</span>&nbsp;<span class="ident" id="5625160">parsePAXTime</span><span class="op" id="5625172">(</span><span class="ident" id="5625173">t</span>&nbsp;<span class="builtintype" id="5625175">string</span><span class="op" id="5625181">)</span>&nbsp;<span class="op" id="5625183">(</span><span class="ident" id="5625184"><a href="/gostd/archive/tar/reader.go.html#5617989">time</a></span><span class="op" id="5625188">.</span><span class="ident" id="5625189"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="5625193">,</span>&nbsp;<span class="builtintype" id="5625195">error</span><span class="op" id="5625200">)</span>&nbsp;<span class="op" id="5625202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625205">buf</span>&nbsp;<span class="op" id="5625209">:=</span>&nbsp;<span class="op" id="5625212">[</span><span class="op" id="5625213">]</span><span class="builtintype" id="5625214">byte</span><span class="op" id="5625218">(</span><span class="ident" id="5625219"><a href="/gostd/archive/tar/reader.go.html#5625173">t</a></span><span class="op" id="5625220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625223">pos</span>&nbsp;<span class="op" id="5625227">:=</span>&nbsp;<span class="ident" id="5625230"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5625235">.</span><span class="ident" id="5625236"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="5625245">(</span><span class="ident" id="5625246"><a href="/gostd/archive/tar/reader.go.html#5625205">buf</a></span><span class="op" id="5625249">,</span>&nbsp;<span class="string" id="5625251">&#39;.&#39;</span><span class="op" id="5625254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625257">var</span>&nbsp;<span class="ident" id="5625261">seconds</span><span class="op" id="5625268">,</span>&nbsp;<span class="ident" id="5625270">nanoseconds</span>&nbsp;<span class="builtintype" id="5625282">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625289">var</span>&nbsp;<span class="ident" id="5625293">err</span>&nbsp;<span class="builtintype" id="5625297">error</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625304">if</span>&nbsp;<span class="ident" id="5625307"><a href="/gostd/archive/tar/reader.go.html#5625223">pos</a></span>&nbsp;<span class="op" id="5625311">==</span>&nbsp;<span class="op" id="5625314">-</span><span class="num" id="5625315">1</span>&nbsp;<span class="op" id="5625317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625321"><a href="/gostd/archive/tar/reader.go.html#5625261">seconds</a></span><span class="op" id="5625328">,</span>&nbsp;<span class="ident" id="5625330"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span>&nbsp;<span class="op" id="5625334">=</span>&nbsp;<span class="ident" id="5625336"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5625343">.</span><span class="ident" id="5625344"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5625352">(</span><span class="ident" id="5625353"><a href="/gostd/archive/tar/reader.go.html#5625173">t</a></span><span class="op" id="5625354">,</span>&nbsp;<span class="num" id="5625356">10</span><span class="op" id="5625358">,</span>&nbsp;<span class="num" id="5625360">0</span><span class="op" id="5625361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625365">if</span>&nbsp;<span class="ident" id="5625368"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span>&nbsp;<span class="op" id="5625372">!=</span>&nbsp;<span class="builtintype" id="5625375">nil</span>&nbsp;<span class="op" id="5625379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625384">return</span>&nbsp;<span class="ident" id="5625391"><a href="/gostd/archive/tar/reader.go.html#5617989">time</a></span><span class="op" id="5625395">.</span><span class="ident" id="5625396"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="5625400">{</span><span class="op" id="5625401">}</span><span class="op" id="5625402">,</span>&nbsp;<span class="ident" id="5625404"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5625410">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5625413">}</span>&nbsp;<span class="keyword" id="5625415">else</span>&nbsp;<span class="op" id="5625420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625424"><a href="/gostd/archive/tar/reader.go.html#5625261">seconds</a></span><span class="op" id="5625431">,</span>&nbsp;<span class="ident" id="5625433"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span>&nbsp;<span class="op" id="5625437">=</span>&nbsp;<span class="ident" id="5625439"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5625446">.</span><span class="ident" id="5625447"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5625455">(</span><span class="builtintype" id="5625456">string</span><span class="op" id="5625462">(</span><span class="ident" id="5625463"><a href="/gostd/archive/tar/reader.go.html#5625205">buf</a></span><span class="op" id="5625466">[</span><span class="op" id="5625467">:</span><span class="ident" id="5625468"><a href="/gostd/archive/tar/reader.go.html#5625223">pos</a></span><span class="op" id="5625471">]</span><span class="op" id="5625472">)</span><span class="op" id="5625473">,</span>&nbsp;<span class="num" id="5625475">10</span><span class="op" id="5625477">,</span>&nbsp;<span class="num" id="5625479">0</span><span class="op" id="5625480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625484">if</span>&nbsp;<span class="ident" id="5625487"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span>&nbsp;<span class="op" id="5625491">!=</span>&nbsp;<span class="builtintype" id="5625494">nil</span>&nbsp;<span class="op" id="5625498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625503">return</span>&nbsp;<span class="ident" id="5625510"><a href="/gostd/archive/tar/reader.go.html#5617989">time</a></span><span class="op" id="5625514">.</span><span class="ident" id="5625515"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="5625519">{</span><span class="op" id="5625520">}</span><span class="op" id="5625521">,</span>&nbsp;<span class="ident" id="5625523"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5625529">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625533">nano_buf</span>&nbsp;<span class="op" id="5625542">:=</span>&nbsp;<span class="builtintype" id="5625545">string</span><span class="op" id="5625551">(</span><span class="ident" id="5625552"><a href="/gostd/archive/tar/reader.go.html#5625205">buf</a></span><span class="op" id="5625555">[</span><span class="ident" id="5625556"><a href="/gostd/archive/tar/reader.go.html#5625223">pos</a></span><span class="op" id="5625559">+</span><span class="num" id="5625560">1</span><span class="op" id="5625561">:</span><span class="op" id="5625562">]</span><span class="op" id="5625563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5625567">//&nbsp;Pad&nbsp;as&nbsp;needed&nbsp;before&nbsp;converting&nbsp;to&nbsp;a&nbsp;decimal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5625618">//&nbsp;For&nbsp;example&nbsp;.030&nbsp;-&gt;&nbsp;.030000000&nbsp;-&gt;&nbsp;30000000&nbsp;nanoseconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625678">if</span>&nbsp;<span class="builtinfunc" id="5625681">len</span><span class="op" id="5625684">(</span><span class="ident" id="5625685"><a href="/gostd/archive/tar/reader.go.html#5625533">nano_buf</a></span><span class="op" id="5625693">)</span>&nbsp;<span class="op" id="5625695">&lt;</span>&nbsp;<span class="ident" id="5625697"><a href="/gostd/archive/tar/reader.go.html#5618073">maxNanoSecondIntSize</a></span>&nbsp;<span class="op" id="5625718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5625723">//&nbsp;Right&nbsp;pad</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625739"><a href="/gostd/archive/tar/reader.go.html#5625533">nano_buf</a></span>&nbsp;<span class="op" id="5625748">+=</span>&nbsp;<span class="ident" id="5625751"><a href="/gostd/archive/tar/reader.go.html#5617978">strings</a></span><span class="op" id="5625758">.</span><span class="ident" id="5625759"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="5625765">(</span><span class="string" id="5625766">&#34;0&#34;</span><span class="op" id="5625769">,</span>&nbsp;<span class="ident" id="5625771"><a href="/gostd/archive/tar/reader.go.html#5618073">maxNanoSecondIntSize</a></span><span class="op" id="5625791">-</span><span class="builtinfunc" id="5625792">len</span><span class="op" id="5625795">(</span><span class="ident" id="5625796"><a href="/gostd/archive/tar/reader.go.html#5625533">nano_buf</a></span><span class="op" id="5625804">)</span><span class="op" id="5625805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5625809">}</span>&nbsp;<span class="keyword" id="5625811">else</span>&nbsp;<span class="keyword" id="5625816">if</span>&nbsp;<span class="builtinfunc" id="5625819">len</span><span class="op" id="5625822">(</span><span class="ident" id="5625823"><a href="/gostd/archive/tar/reader.go.html#5625533">nano_buf</a></span><span class="op" id="5625831">)</span>&nbsp;<span class="op" id="5625833">&gt;</span>&nbsp;<span class="ident" id="5625835"><a href="/gostd/archive/tar/reader.go.html#5618073">maxNanoSecondIntSize</a></span>&nbsp;<span class="op" id="5625856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5625861">//&nbsp;Right&nbsp;truncate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625882"><a href="/gostd/archive/tar/reader.go.html#5625533">nano_buf</a></span>&nbsp;<span class="op" id="5625891">=</span>&nbsp;<span class="ident" id="5625893"><a href="/gostd/archive/tar/reader.go.html#5625533">nano_buf</a></span><span class="op" id="5625901">[</span><span class="op" id="5625902">:</span><span class="ident" id="5625903"><a href="/gostd/archive/tar/reader.go.html#5618073">maxNanoSecondIntSize</a></span><span class="op" id="5625923">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5625927">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625931"><a href="/gostd/archive/tar/reader.go.html#5625270">nanoseconds</a></span><span class="op" id="5625942">,</span>&nbsp;<span class="ident" id="5625944"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span>&nbsp;<span class="op" id="5625948">=</span>&nbsp;<span class="ident" id="5625950"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5625957">.</span><span class="ident" id="5625958"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5625966">(</span><span class="builtintype" id="5625967">string</span><span class="op" id="5625973">(</span><span class="ident" id="5625974"><a href="/gostd/archive/tar/reader.go.html#5625533">nano_buf</a></span><span class="op" id="5625982">)</span><span class="op" id="5625983">,</span>&nbsp;<span class="num" id="5625985">10</span><span class="op" id="5625987">,</span>&nbsp;<span class="num" id="5625989">0</span><span class="op" id="5625990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625994">if</span>&nbsp;<span class="ident" id="5625997"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span>&nbsp;<span class="op" id="5626001">!=</span>&nbsp;<span class="builtintype" id="5626004">nil</span>&nbsp;<span class="op" id="5626008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626013">return</span>&nbsp;<span class="ident" id="5626020"><a href="/gostd/archive/tar/reader.go.html#5617989">time</a></span><span class="op" id="5626024">.</span><span class="ident" id="5626025"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="5626029">{</span><span class="op" id="5626030">}</span><span class="op" id="5626031">,</span>&nbsp;<span class="ident" id="5626033"><a href="/gostd/archive/tar/reader.go.html#5625293">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5626039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5626042">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5626045">ts</span>&nbsp;<span class="op" id="5626048">:=</span>&nbsp;<span class="ident" id="5626051"><a href="/gostd/archive/tar/reader.go.html#5617989">time</a></span><span class="op" id="5626055">.</span><span class="ident" id="5626056"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="5626060">(</span><span class="ident" id="5626061"><a href="/gostd/archive/tar/reader.go.html#5625261">seconds</a></span><span class="op" id="5626068">,</span>&nbsp;<span class="ident" id="5626070"><a href="/gostd/archive/tar/reader.go.html#5625270">nanoseconds</a></span><span class="op" id="5626081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626084">return</span>&nbsp;<span class="ident" id="5626091"><a href="/gostd/archive/tar/reader.go.html#5626045">ts</a></span><span class="op" id="5626093">,</span>&nbsp;<span class="builtintype" id="5626095">nil</span><br>
<span class="lineno"></span><span class="op" id="5626099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5626102">//&nbsp;parsePAX&nbsp;parses&nbsp;PAX&nbsp;headers.</span><br>
<span class="lineno">310</span><span class="comment" id="5626134">//&nbsp;If&nbsp;an&nbsp;extended&nbsp;header&nbsp;(type&nbsp;&#39;x&#39;)&nbsp;is&nbsp;invalid,&nbsp;ErrHeader&nbsp;is&nbsp;returned</span><br>
<span class="lineno"></span><span class="keyword" id="5626204">func</span>&nbsp;<span class="ident" id="5626209">parsePAX</span><span class="op" id="5626217">(</span><span class="ident" id="5626218">r</span>&nbsp;<span class="ident" id="5626220"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5626222">.</span><span class="ident" id="5626223"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5626229">)</span>&nbsp;<span class="op" id="5626231">(</span><span class="keyword" id="5626232">map</span><span class="op" id="5626235">[</span><span class="builtintype" id="5626236">string</span><span class="op" id="5626242">]</span><span class="builtintype" id="5626243">string</span><span class="op" id="5626249">,</span>&nbsp;<span class="builtintype" id="5626251">error</span><span class="op" id="5626256">)</span>&nbsp;<span class="op" id="5626258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5626261">buf</span><span class="op" id="5626264">,</span>&nbsp;<span class="ident" id="5626266">err</span>&nbsp;<span class="op" id="5626270">:=</span>&nbsp;<span class="ident" id="5626273"><a href="/gostd/archive/tar/reader.go.html#5617948">ioutil</a></span><span class="op" id="5626279">.</span><span class="ident" id="5626280"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="5626287">(</span><span class="ident" id="5626288"><a href="/gostd/archive/tar/reader.go.html#5626218">r</a></span><span class="op" id="5626289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626292">if</span>&nbsp;<span class="ident" id="5626295"><a href="/gostd/archive/tar/reader.go.html#5626266">err</a></span>&nbsp;<span class="op" id="5626299">!=</span>&nbsp;<span class="builtintype" id="5626302">nil</span>&nbsp;<span class="op" id="5626306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626310">return</span>&nbsp;<span class="builtintype" id="5626317">nil</span><span class="op" id="5626320">,</span>&nbsp;<span class="ident" id="5626322"><a href="/gostd/archive/tar/reader.go.html#5626266">err</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5626327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5626331">//&nbsp;For&nbsp;GNU&nbsp;PAX&nbsp;sparse&nbsp;format&nbsp;0.0&nbsp;support.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5626374">//&nbsp;This&nbsp;function&nbsp;transforms&nbsp;the&nbsp;sparse&nbsp;format&nbsp;0.0&nbsp;headers&nbsp;into&nbsp;sparse&nbsp;format&nbsp;0.1&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626465">var</span>&nbsp;<span class="ident" id="5626469">sparseMap</span>&nbsp;<span class="ident" id="5626479"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5626484">.</span><span class="ident" id="5626485"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5626494">headers</span>&nbsp;<span class="op" id="5626502">:=</span>&nbsp;<span class="builtinfunc" id="5626505">make</span><span class="op" id="5626509">(</span><span class="keyword" id="5626510">map</span><span class="op" id="5626513">[</span><span class="builtintype" id="5626514">string</span><span class="op" id="5626520">]</span><span class="builtintype" id="5626521">string</span><span class="op" id="5626527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5626530">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;constructed&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5626564">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;%d&nbsp;%s=%s\n&#34;,&nbsp;length,&nbsp;keyword,&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626609">for</span>&nbsp;<span class="builtinfunc" id="5626613">len</span><span class="op" id="5626616">(</span><span class="ident" id="5626617"><a href="/gostd/archive/tar/reader.go.html#5626261">buf</a></span><span class="op" id="5626620">)</span>&nbsp;<span class="op" id="5626622">&gt;</span>&nbsp;<span class="num" id="5626624">0</span>&nbsp;<span class="op" id="5626626">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5626630">//&nbsp;or&nbsp;the&nbsp;header&nbsp;was&nbsp;empty&nbsp;to&nbsp;start&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626674">var</span>&nbsp;<span class="ident" id="5626678">sp</span>&nbsp;<span class="builtintype" id="5626681">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5626687">//&nbsp;The&nbsp;size&nbsp;field&nbsp;ends&nbsp;at&nbsp;the&nbsp;first&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5626732"><a href="/gostd/archive/tar/reader.go.html#5626678">sp</a></span>&nbsp;<span class="op" id="5626735">=</span>&nbsp;<span class="ident" id="5626737"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5626742">.</span><span class="ident" id="5626743"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="5626752">(</span><span class="ident" id="5626753"><a href="/gostd/archive/tar/reader.go.html#5626261">buf</a></span><span class="op" id="5626756">,</span>&nbsp;<span class="string" id="5626758">&#39;&nbsp;&#39;</span><span class="op" id="5626761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626765">if</span>&nbsp;<span class="ident" id="5626768"><a href="/gostd/archive/tar/reader.go.html#5626678">sp</a></span>&nbsp;<span class="op" id="5626771">==</span>&nbsp;<span class="op" id="5626774">-</span><span class="num" id="5626775">1</span>&nbsp;<span class="op" id="5626777">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626782">return</span>&nbsp;<span class="builtintype" id="5626789">nil</span><span class="op" id="5626792">,</span>&nbsp;<span class="ident" id="5626794"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5626806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5626810">//&nbsp;Parse&nbsp;the&nbsp;first&nbsp;token&nbsp;as&nbsp;a&nbsp;decimal&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5626859">n</span><span class="op" id="5626860">,</span>&nbsp;<span class="ident" id="5626862">err</span>&nbsp;<span class="op" id="5626866">:=</span>&nbsp;<span class="ident" id="5626869"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5626876">.</span><span class="ident" id="5626877"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5626885">(</span><span class="builtintype" id="5626886">string</span><span class="op" id="5626892">(</span><span class="ident" id="5626893"><a href="/gostd/archive/tar/reader.go.html#5626261">buf</a></span><span class="op" id="5626896">[</span><span class="op" id="5626897">:</span><span class="ident" id="5626898"><a href="/gostd/archive/tar/reader.go.html#5626678">sp</a></span><span class="op" id="5626900">]</span><span class="op" id="5626901">)</span><span class="op" id="5626902">,</span>&nbsp;<span class="num" id="5626904">10</span><span class="op" id="5626906">,</span>&nbsp;<span class="num" id="5626908">0</span><span class="op" id="5626909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626913">if</span>&nbsp;<span class="ident" id="5626916"><a href="/gostd/archive/tar/reader.go.html#5626862">err</a></span>&nbsp;<span class="op" id="5626920">!=</span>&nbsp;<span class="builtintype" id="5626923">nil</span>&nbsp;<span class="op" id="5626927">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626932">return</span>&nbsp;<span class="builtintype" id="5626939">nil</span><span class="op" id="5626942">,</span>&nbsp;<span class="ident" id="5626944"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5626956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5626960">//&nbsp;Extract&nbsp;everything&nbsp;between&nbsp;the&nbsp;decimal&nbsp;and&nbsp;the&nbsp;n&nbsp;-1&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5627024">//&nbsp;beginning&nbsp;to&nbsp;eat&nbsp;the&nbsp;&#39;&nbsp;&#39;,&nbsp;-1&nbsp;on&nbsp;the&nbsp;end&nbsp;to&nbsp;skip&nbsp;the&nbsp;newline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627090">var</span>&nbsp;<span class="ident" id="5627094">record</span>&nbsp;<span class="op" id="5627101">[</span><span class="op" id="5627102">]</span><span class="builtintype" id="5627103">byte</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627110"><a href="/gostd/archive/tar/reader.go.html#5627094">record</a></span><span class="op" id="5627116">,</span>&nbsp;<span class="ident" id="5627118"><a href="/gostd/archive/tar/reader.go.html#5626261">buf</a></span>&nbsp;<span class="op" id="5627122">=</span>&nbsp;<span class="ident" id="5627124"><a href="/gostd/archive/tar/reader.go.html#5626261">buf</a></span><span class="op" id="5627127">[</span><span class="ident" id="5627128"><a href="/gostd/archive/tar/reader.go.html#5626678">sp</a></span><span class="op" id="5627130">+</span><span class="num" id="5627131">1</span><span class="op" id="5627132">:</span><span class="ident" id="5627133"><a href="/gostd/archive/tar/reader.go.html#5626859">n</a></span><span class="op" id="5627134">-</span><span class="num" id="5627135">1</span><span class="op" id="5627136">]</span><span class="op" id="5627137">,</span>&nbsp;<span class="ident" id="5627139"><a href="/gostd/archive/tar/reader.go.html#5626261">buf</a></span><span class="op" id="5627142">[</span><span class="ident" id="5627143"><a href="/gostd/archive/tar/reader.go.html#5626859">n</a></span><span class="op" id="5627144">:</span><span class="op" id="5627145">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5627149">//&nbsp;The&nbsp;first&nbsp;equals&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;mark&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5627213">//&nbsp;Everything&nbsp;else&nbsp;is&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627244">eq</span>&nbsp;<span class="op" id="5627247">:=</span>&nbsp;<span class="ident" id="5627250"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5627255">.</span><span class="ident" id="5627256"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="5627265">(</span><span class="ident" id="5627266"><a href="/gostd/archive/tar/reader.go.html#5627094">record</a></span><span class="op" id="5627272">,</span>&nbsp;<span class="string" id="5627274">&#39;=&#39;</span><span class="op" id="5627277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627281">if</span>&nbsp;<span class="ident" id="5627284"><a href="/gostd/archive/tar/reader.go.html#5627244">eq</a></span>&nbsp;<span class="op" id="5627287">==</span>&nbsp;<span class="op" id="5627290">-</span><span class="num" id="5627291">1</span>&nbsp;<span class="op" id="5627293">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627298">return</span>&nbsp;<span class="builtintype" id="5627305">nil</span><span class="op" id="5627308">,</span>&nbsp;<span class="ident" id="5627310"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627326">key</span><span class="op" id="5627329">,</span>&nbsp;<span class="ident" id="5627331">value</span>&nbsp;<span class="op" id="5627337">:=</span>&nbsp;<span class="ident" id="5627340"><a href="/gostd/archive/tar/reader.go.html#5627094">record</a></span><span class="op" id="5627346">[</span><span class="op" id="5627347">:</span><span class="ident" id="5627348"><a href="/gostd/archive/tar/reader.go.html#5627244">eq</a></span><span class="op" id="5627350">]</span><span class="op" id="5627351">,</span>&nbsp;<span class="ident" id="5627353"><a href="/gostd/archive/tar/reader.go.html#5627094">record</a></span><span class="op" id="5627359">[</span><span class="ident" id="5627360"><a href="/gostd/archive/tar/reader.go.html#5627244">eq</a></span><span class="op" id="5627362">+</span><span class="num" id="5627363">1</span><span class="op" id="5627364">:</span><span class="op" id="5627365">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627370">keyStr</span>&nbsp;<span class="op" id="5627377">:=</span>&nbsp;<span class="builtintype" id="5627380">string</span><span class="op" id="5627386">(</span><span class="ident" id="5627387"><a href="/gostd/archive/tar/reader.go.html#5627326">key</a></span><span class="op" id="5627390">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627394">if</span>&nbsp;<span class="ident" id="5627397"><a href="/gostd/archive/tar/reader.go.html#5627370">keyStr</a></span>&nbsp;<span class="op" id="5627404">==</span>&nbsp;<span class="ident" id="5627407"><a href="/gostd/archive/tar/reader.go.html#5619487">paxGNUSparseOffset</a></span>&nbsp;<span class="op" id="5627426">||</span>&nbsp;<span class="ident" id="5627429"><a href="/gostd/archive/tar/reader.go.html#5627370">keyStr</a></span>&nbsp;<span class="op" id="5627436">==</span>&nbsp;<span class="ident" id="5627439"><a href="/gostd/archive/tar/reader.go.html#5619532">paxGNUSparseNumBytes</a></span>&nbsp;<span class="op" id="5627460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5627465">//&nbsp;GNU&nbsp;sparse&nbsp;format&nbsp;0.0&nbsp;special&nbsp;key.&nbsp;Write&nbsp;to&nbsp;sparseMap&nbsp;instead&nbsp;of&nbsp;using&nbsp;the&nbsp;headers&nbsp;map.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627559"><a href="/gostd/archive/tar/reader.go.html#5626469">sparseMap</a></span><span class="op" id="5627568">.</span><span class="ident" id="5627569"><a href="/gostd/bytes/buffer.go.html#1387016">Write</a></span><span class="op" id="5627574">(</span><span class="ident" id="5627575"><a href="/gostd/archive/tar/reader.go.html#5627331">value</a></span><span class="op" id="5627580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627585"><a href="/gostd/archive/tar/reader.go.html#5626469">sparseMap</a></span><span class="op" id="5627594">.</span><span class="ident" id="5627595"><a href="/gostd/bytes/buffer.go.html#1387016">Write</a></span><span class="op" id="5627600">(</span><span class="op" id="5627601">[</span><span class="op" id="5627602">]</span><span class="builtintype" id="5627603">byte</span><span class="op" id="5627607">{</span><span class="string" id="5627608">&#39;,&#39;</span><span class="op" id="5627611">}</span><span class="op" id="5627612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627616">}</span>&nbsp;<span class="keyword" id="5627618">else</span>&nbsp;<span class="op" id="5627623">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5627628">//&nbsp;Normal&nbsp;key.&nbsp;Set&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;headers&nbsp;map.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627680"><a href="/gostd/archive/tar/reader.go.html#5626494">headers</a></span><span class="op" id="5627687">[</span><span class="ident" id="5627688"><a href="/gostd/archive/tar/reader.go.html#5627370">keyStr</a></span><span class="op" id="5627694">]</span>&nbsp;<span class="op" id="5627696">=</span>&nbsp;<span class="builtintype" id="5627698">string</span><span class="op" id="5627704">(</span><span class="ident" id="5627705"><a href="/gostd/archive/tar/reader.go.html#5627331">value</a></span><span class="op" id="5627710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627720">if</span>&nbsp;<span class="ident" id="5627723"><a href="/gostd/archive/tar/reader.go.html#5626469">sparseMap</a></span><span class="op" id="5627732">.</span><span class="ident" id="5627733"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="5627736">(</span><span class="op" id="5627737">)</span>&nbsp;<span class="op" id="5627739">!=</span>&nbsp;<span class="num" id="5627742">0</span>&nbsp;<span class="op" id="5627744">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5627748">//&nbsp;Add&nbsp;sparse&nbsp;info&nbsp;to&nbsp;headers,&nbsp;chopping&nbsp;off&nbsp;the&nbsp;extra&nbsp;comma</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627810"><a href="/gostd/archive/tar/reader.go.html#5626469">sparseMap</a></span><span class="op" id="5627819">.</span><span class="ident" id="5627820"><a href="/gostd/bytes/buffer.go.html#1385094">Truncate</a></span><span class="op" id="5627828">(</span><span class="ident" id="5627829"><a href="/gostd/archive/tar/reader.go.html#5626469">sparseMap</a></span><span class="op" id="5627838">.</span><span class="ident" id="5627839"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="5627842">(</span><span class="op" id="5627843">)</span>&nbsp;<span class="op" id="5627845">-</span>&nbsp;<span class="num" id="5627847">1</span><span class="op" id="5627848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627852"><a href="/gostd/archive/tar/reader.go.html#5626494">headers</a></span><span class="op" id="5627859">[</span><span class="ident" id="5627860"><a href="/gostd/archive/tar/reader.go.html#5619579">paxGNUSparseMap</a></span><span class="op" id="5627875">]</span>&nbsp;<span class="op" id="5627877">=</span>&nbsp;<span class="ident" id="5627879"><a href="/gostd/archive/tar/reader.go.html#5626469">sparseMap</a></span><span class="op" id="5627888">.</span><span class="ident" id="5627889"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="5627895">(</span><span class="op" id="5627896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627902">return</span>&nbsp;<span class="ident" id="5627909"><a href="/gostd/archive/tar/reader.go.html#5626494">headers</a></span><span class="op" id="5627916">,</span>&nbsp;<span class="builtintype" id="5627918">nil</span><br>
<span class="lineno">365</span><span class="op" id="5627922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5627925">//&nbsp;cString&nbsp;parses&nbsp;bytes&nbsp;as&nbsp;a&nbsp;NUL-terminated&nbsp;C-style&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5627985">//&nbsp;If&nbsp;a&nbsp;NUL&nbsp;byte&nbsp;is&nbsp;not&nbsp;found&nbsp;then&nbsp;the&nbsp;whole&nbsp;slice&nbsp;is&nbsp;returned&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="5628061">func</span>&nbsp;<span class="ident" id="5628066">cString</span><span class="op" id="5628073">(</span><span class="ident" id="5628074">b</span>&nbsp;<span class="op" id="5628076">[</span><span class="op" id="5628077">]</span><span class="builtintype" id="5628078">byte</span><span class="op" id="5628082">)</span>&nbsp;<span class="builtintype" id="5628084">string</span>&nbsp;<span class="op" id="5628091">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628094">n</span>&nbsp;<span class="op" id="5628096">:=</span>&nbsp;<span class="num" id="5628099">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628102">for</span>&nbsp;<span class="ident" id="5628106"><a href="/gostd/archive/tar/reader.go.html#5628094">n</a></span>&nbsp;<span class="op" id="5628108">&lt;</span>&nbsp;<span class="builtinfunc" id="5628110">len</span><span class="op" id="5628113">(</span><span class="ident" id="5628114"><a href="/gostd/archive/tar/reader.go.html#5628074">b</a></span><span class="op" id="5628115">)</span>&nbsp;<span class="op" id="5628117">&amp;&amp;</span>&nbsp;<span class="ident" id="5628120"><a href="/gostd/archive/tar/reader.go.html#5628074">b</a></span><span class="op" id="5628121">[</span><span class="ident" id="5628122"><a href="/gostd/archive/tar/reader.go.html#5628094">n</a></span><span class="op" id="5628123">]</span>&nbsp;<span class="op" id="5628125">!=</span>&nbsp;<span class="num" id="5628128">0</span>&nbsp;<span class="op" id="5628130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628134"><a href="/gostd/archive/tar/reader.go.html#5628094">n</a></span><span class="op" id="5628135">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5628139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628142">return</span>&nbsp;<span class="builtintype" id="5628149">string</span><span class="op" id="5628155">(</span><span class="ident" id="5628156"><a href="/gostd/archive/tar/reader.go.html#5628074">b</a></span><span class="op" id="5628157">[</span><span class="num" id="5628158">0</span><span class="op" id="5628159">:</span><span class="ident" id="5628160"><a href="/gostd/archive/tar/reader.go.html#5628094">n</a></span><span class="op" id="5628161">]</span><span class="op" id="5628162">)</span><br>
<span class="lineno">375</span><span class="op" id="5628164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5628167">func</span>&nbsp;<span class="op" id="5628172">(</span><span class="ident" id="5628173">tr</span>&nbsp;<span class="op" id="5628176">*</span><span class="ident" id="5628177"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5628183">)</span>&nbsp;<span class="ident" id="5628185">octal</span><span class="op" id="5628190">(</span><span class="ident" id="5628191">b</span>&nbsp;<span class="op" id="5628193">[</span><span class="op" id="5628194">]</span><span class="builtintype" id="5628195">byte</span><span class="op" id="5628199">)</span>&nbsp;<span class="builtintype" id="5628201">int64</span>&nbsp;<span class="op" id="5628207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5628210">//&nbsp;Check&nbsp;for&nbsp;binary&nbsp;format&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628245">if</span>&nbsp;<span class="builtinfunc" id="5628248">len</span><span class="op" id="5628251">(</span><span class="ident" id="5628252"><a href="/gostd/archive/tar/reader.go.html#5628191">b</a></span><span class="op" id="5628253">)</span>&nbsp;<span class="op" id="5628255">&gt;</span>&nbsp;<span class="num" id="5628257">0</span>&nbsp;<span class="op" id="5628259">&amp;&amp;</span>&nbsp;<span class="ident" id="5628262"><a href="/gostd/archive/tar/reader.go.html#5628191">b</a></span><span class="op" id="5628263">[</span><span class="num" id="5628264">0</span><span class="op" id="5628265">]</span><span class="op" id="5628266">&amp;</span><span class="num" id="5628267">0x80</span>&nbsp;<span class="op" id="5628272">!=</span>&nbsp;<span class="num" id="5628275">0</span>&nbsp;<span class="op" id="5628277">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628281">var</span>&nbsp;<span class="ident" id="5628285">x</span>&nbsp;<span class="builtintype" id="5628287">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628295">for</span>&nbsp;<span class="ident" id="5628299">i</span><span class="op" id="5628300">,</span>&nbsp;<span class="ident" id="5628302">c</span>&nbsp;<span class="op" id="5628304">:=</span>&nbsp;<span class="keyword" id="5628307">range</span>&nbsp;<span class="ident" id="5628313"><a href="/gostd/archive/tar/reader.go.html#5628191">b</a></span>&nbsp;<span class="op" id="5628315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628320">if</span>&nbsp;<span class="ident" id="5628323"><a href="/gostd/archive/tar/reader.go.html#5628299">i</a></span>&nbsp;<span class="op" id="5628325">==</span>&nbsp;<span class="num" id="5628328">0</span>&nbsp;<span class="op" id="5628330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628336"><a href="/gostd/archive/tar/reader.go.html#5628302">c</a></span>&nbsp;<span class="op" id="5628338">&amp;=</span>&nbsp;<span class="num" id="5628341">0x7f</span>&nbsp;<span class="comment" id="5628346">//&nbsp;ignore&nbsp;signal&nbsp;bit&nbsp;in&nbsp;first&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5628384">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628389"><a href="/gostd/archive/tar/reader.go.html#5628285">x</a></span>&nbsp;<span class="op" id="5628391">=</span>&nbsp;<span class="ident" id="5628393"><a href="/gostd/archive/tar/reader.go.html#5628285">x</a></span><span class="op" id="5628394">&lt;&lt;</span><span class="num" id="5628396">8</span>&nbsp;<span class="op" id="5628398">|</span>&nbsp;<span class="builtintype" id="5628400">int64</span><span class="op" id="5628405">(</span><span class="ident" id="5628406"><a href="/gostd/archive/tar/reader.go.html#5628302">c</a></span><span class="op" id="5628407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5628411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628415">return</span>&nbsp;<span class="ident" id="5628422"><a href="/gostd/archive/tar/reader.go.html#5628285">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5628425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5628429">//&nbsp;Because&nbsp;unused&nbsp;fields&nbsp;are&nbsp;filled&nbsp;with&nbsp;NULs,&nbsp;we&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5628485">//&nbsp;to&nbsp;skip&nbsp;leading&nbsp;NULs.&nbsp;Fields&nbsp;may&nbsp;also&nbsp;be&nbsp;padded&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5628542">//&nbsp;spaces&nbsp;or&nbsp;NULs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5628562">//&nbsp;So&nbsp;we&nbsp;remove&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;NULs&nbsp;and&nbsp;spaces&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5628619">//&nbsp;be&nbsp;sure.</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628632"><a href="/gostd/archive/tar/reader.go.html#5628191">b</a></span>&nbsp;<span class="op" id="5628634">=</span>&nbsp;<span class="ident" id="5628636"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5628641">.</span><span class="ident" id="5628642"><a href="/gostd/bytes/bytes.go.html#1411147">Trim</a></span><span class="op" id="5628646">(</span><span class="ident" id="5628647"><a href="/gostd/archive/tar/reader.go.html#5628191">b</a></span><span class="op" id="5628648">,</span>&nbsp;<span class="string" id="5628650">&#34;&nbsp;\x00&#34;</span><span class="op" id="5628657">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628661">if</span>&nbsp;<span class="builtinfunc" id="5628664">len</span><span class="op" id="5628667">(</span><span class="ident" id="5628668"><a href="/gostd/archive/tar/reader.go.html#5628191">b</a></span><span class="op" id="5628669">)</span>&nbsp;<span class="op" id="5628671">==</span>&nbsp;<span class="num" id="5628674">0</span>&nbsp;<span class="op" id="5628676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628680">return</span>&nbsp;<span class="num" id="5628687">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5628690">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628693">x</span><span class="op" id="5628694">,</span>&nbsp;<span class="ident" id="5628696">err</span>&nbsp;<span class="op" id="5628700">:=</span>&nbsp;<span class="ident" id="5628703"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5628710">.</span><span class="ident" id="5628711"><a href="/gostd/strconv/atoi.go.html#2353976">ParseUint</a></span><span class="op" id="5628720">(</span><span class="ident" id="5628721"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5628728">(</span><span class="ident" id="5628729"><a href="/gostd/archive/tar/reader.go.html#5628191">b</a></span><span class="op" id="5628730">)</span><span class="op" id="5628731">,</span>&nbsp;<span class="num" id="5628733">8</span><span class="op" id="5628734">,</span>&nbsp;<span class="num" id="5628736">64</span><span class="op" id="5628738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628741">if</span>&nbsp;<span class="ident" id="5628744"><a href="/gostd/archive/tar/reader.go.html#5628696">err</a></span>&nbsp;<span class="op" id="5628748">!=</span>&nbsp;<span class="builtintype" id="5628751">nil</span>&nbsp;<span class="op" id="5628755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628759"><a href="/gostd/archive/tar/reader.go.html#5628173">tr</a></span><span class="op" id="5628761">.</span><span class="ident" id="5628762"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5628766">=</span>&nbsp;<span class="ident" id="5628768"><a href="/gostd/archive/tar/reader.go.html#5628696">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5628773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628776">return</span>&nbsp;<span class="builtintype" id="5628783">int64</span><span class="op" id="5628788">(</span><span class="ident" id="5628789"><a href="/gostd/archive/tar/reader.go.html#5628693">x</a></span><span class="op" id="5628790">)</span><br>
<span class="lineno">405</span><span class="op" id="5628792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5628795">//&nbsp;skipUnread&nbsp;skips&nbsp;any&nbsp;unread&nbsp;bytes&nbsp;in&nbsp;the&nbsp;existing&nbsp;file&nbsp;entry,&nbsp;as&nbsp;well&nbsp;as&nbsp;any&nbsp;alignment&nbsp;padding.</span><br>
<span class="lineno"></span><span class="keyword" id="5628894">func</span>&nbsp;<span class="op" id="5628899">(</span><span class="ident" id="5628900">tr</span>&nbsp;<span class="op" id="5628903">*</span><span class="ident" id="5628904"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5628910">)</span>&nbsp;<span class="ident" id="5628912">skipUnread</span><span class="op" id="5628922">(</span><span class="op" id="5628923">)</span>&nbsp;<span class="op" id="5628925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628928">nr</span>&nbsp;<span class="op" id="5628931">:=</span>&nbsp;<span class="ident" id="5628934"><a href="/gostd/archive/tar/reader.go.html#5628900">tr</a></span><span class="op" id="5628936">.</span><span class="ident" id="5628937"><a href="/gostd/archive/tar/reader.go.html#5637680">numBytes</a></span><span class="op" id="5628945">(</span><span class="op" id="5628946">)</span>&nbsp;<span class="op" id="5628948">+</span>&nbsp;<span class="ident" id="5628950"><a href="/gostd/archive/tar/reader.go.html#5628900">tr</a></span><span class="op" id="5628952">.</span><span class="ident" id="5628953"><a href="/gostd/archive/tar/reader.go.html#5618434">pad</a></span>&nbsp;<span class="comment" id="5628957">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;to&nbsp;skip</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628985"><a href="/gostd/archive/tar/reader.go.html#5628900">tr</a></span><span class="op" id="5628987">.</span><span class="ident" id="5628988"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span><span class="op" id="5628992">,</span>&nbsp;<span class="ident" id="5628994"><a href="/gostd/archive/tar/reader.go.html#5628900">tr</a></span><span class="op" id="5628996">.</span><span class="ident" id="5628997"><a href="/gostd/archive/tar/reader.go.html#5618434">pad</a></span>&nbsp;<span class="op" id="5629001">=</span>&nbsp;<span class="builtintype" id="5629003">nil</span><span class="op" id="5629006">,</span>&nbsp;<span class="num" id="5629008">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629011">if</span>&nbsp;<span class="ident" id="5629014">sr</span><span class="op" id="5629016">,</span>&nbsp;<span class="ident" id="5629018">ok</span>&nbsp;<span class="op" id="5629021">:=</span>&nbsp;<span class="ident" id="5629024"><a href="/gostd/archive/tar/reader.go.html#5628900">tr</a></span><span class="op" id="5629026">.</span><span class="ident" id="5629027"><a href="/gostd/archive/tar/reader.go.html#5618400">r</a></span><span class="op" id="5629028">.</span><span class="op" id="5629029">(</span><span class="ident" id="5629030"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5629032">.</span><span class="ident" id="5629033"><a href="/gostd/io/io.go.html#1423139">Seeker</a></span><span class="op" id="5629039">)</span><span class="op" id="5629040">;</span>&nbsp;<span class="ident" id="5629042"><a href="/gostd/archive/tar/reader.go.html#5629018">ok</a></span>&nbsp;<span class="op" id="5629045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629049">if</span>&nbsp;<span class="ident" id="5629052">_</span><span class="op" id="5629053">,</span>&nbsp;<span class="ident" id="5629055">err</span>&nbsp;<span class="op" id="5629059">:=</span>&nbsp;<span class="ident" id="5629062"><a href="/gostd/archive/tar/reader.go.html#5629014">sr</a></span><span class="op" id="5629064">.</span><span class="ident" id="5629065"><a href="/gostd/io/io.go.html#1423159">Seek</a></span><span class="op" id="5629069">(</span><span class="ident" id="5629070"><a href="/gostd/archive/tar/reader.go.html#5628928">nr</a></span><span class="op" id="5629072">,</span>&nbsp;<span class="ident" id="5629074"><a href="/gostd/archive/tar/reader.go.html#5617961">os</a></span><span class="op" id="5629076">.</span><span class="ident" id="5629077"><a href="/gostd/os/file.go.html#2442692">SEEK_CUR</a></span><span class="op" id="5629085">)</span><span class="op" id="5629086">;</span>&nbsp;<span class="ident" id="5629088"><a href="/gostd/archive/tar/reader.go.html#5629055">err</a></span>&nbsp;<span class="op" id="5629092">==</span>&nbsp;<span class="builtintype" id="5629095">nil</span>&nbsp;<span class="op" id="5629099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629104">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629113">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5629119">_</span><span class="op" id="5629120">,</span>&nbsp;<span class="ident" id="5629122"><a href="/gostd/archive/tar/reader.go.html#5628900">tr</a></span><span class="op" id="5629124">.</span><span class="ident" id="5629125"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629129">=</span>&nbsp;<span class="ident" id="5629131"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5629133">.</span><span class="ident" id="5629134"><a href="/gostd/io/io.go.html#1430100">CopyN</a></span><span class="op" id="5629139">(</span><span class="ident" id="5629140"><a href="/gostd/archive/tar/reader.go.html#5617948">ioutil</a></span><span class="op" id="5629146">.</span><span class="ident" id="5629147"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="5629154">,</span>&nbsp;<span class="ident" id="5629156"><a href="/gostd/archive/tar/reader.go.html#5628900">tr</a></span><span class="op" id="5629158">.</span><span class="ident" id="5629159"><a href="/gostd/archive/tar/reader.go.html#5618400">r</a></span><span class="op" id="5629160">,</span>&nbsp;<span class="ident" id="5629162"><a href="/gostd/archive/tar/reader.go.html#5628928">nr</a></span><span class="op" id="5629164">)</span><br>
<span class="lineno"></span><span class="op" id="5629166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5629169">func</span>&nbsp;<span class="op" id="5629174">(</span><span class="ident" id="5629175">tr</span>&nbsp;<span class="op" id="5629178">*</span><span class="ident" id="5629179"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5629185">)</span>&nbsp;<span class="ident" id="5629187">verifyChecksum</span><span class="op" id="5629201">(</span><span class="ident" id="5629202">header</span>&nbsp;<span class="op" id="5629209">[</span><span class="op" id="5629210">]</span><span class="builtintype" id="5629211">byte</span><span class="op" id="5629215">)</span>&nbsp;<span class="builtintype" id="5629217">bool</span>&nbsp;<span class="op" id="5629222">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629225">if</span>&nbsp;<span class="ident" id="5629228"><a href="/gostd/archive/tar/reader.go.html#5629175">tr</a></span><span class="op" id="5629230">.</span><span class="ident" id="5629231"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629235">!=</span>&nbsp;<span class="builtintype" id="5629238">nil</span>&nbsp;<span class="op" id="5629242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629246">return</span>&nbsp;<span class="builtintype" id="5629253">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5629264">given</span>&nbsp;<span class="op" id="5629270">:=</span>&nbsp;<span class="ident" id="5629273"><a href="/gostd/archive/tar/reader.go.html#5629175">tr</a></span><span class="op" id="5629275">.</span><span class="ident" id="5629276"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5629281">(</span><span class="ident" id="5629282"><a href="/gostd/archive/tar/reader.go.html#5629202">header</a></span><span class="op" id="5629288">[</span><span class="num" id="5629289">148</span><span class="op" id="5629292">:</span><span class="num" id="5629293">156</span><span class="op" id="5629296">]</span><span class="op" id="5629297">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5629300">unsigned</span><span class="op" id="5629308">,</span>&nbsp;<span class="ident" id="5629310">signed</span>&nbsp;<span class="op" id="5629317">:=</span>&nbsp;<span class="ident" id="5629320"><a href="/gostd/archive/tar/common.go.html#5616951">checksum</a></span><span class="op" id="5629328">(</span><span class="ident" id="5629329"><a href="/gostd/archive/tar/reader.go.html#5629202">header</a></span><span class="op" id="5629335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629338">return</span>&nbsp;<span class="ident" id="5629345"><a href="/gostd/archive/tar/reader.go.html#5629264">given</a></span>&nbsp;<span class="op" id="5629351">==</span>&nbsp;<span class="ident" id="5629354"><a href="/gostd/archive/tar/reader.go.html#5629300">unsigned</a></span>&nbsp;<span class="op" id="5629363">||</span>&nbsp;<span class="ident" id="5629366"><a href="/gostd/archive/tar/reader.go.html#5629264">given</a></span>&nbsp;<span class="op" id="5629372">==</span>&nbsp;<span class="ident" id="5629375"><a href="/gostd/archive/tar/reader.go.html#5629310">signed</a></span><br>
<span class="lineno"></span><span class="op" id="5629382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5629385">func</span>&nbsp;<span class="op" id="5629390">(</span><span class="ident" id="5629391">tr</span>&nbsp;<span class="op" id="5629394">*</span><span class="ident" id="5629395"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5629401">)</span>&nbsp;<span class="ident" id="5629403">readHeader</span><span class="op" id="5629413">(</span><span class="op" id="5629414">)</span>&nbsp;<span class="op" id="5629416">*</span><span class="ident" id="5629417"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span>&nbsp;<span class="op" id="5629424">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5629427">header</span>&nbsp;<span class="op" id="5629434">:=</span>&nbsp;<span class="ident" id="5629437"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629439">.</span><span class="ident" id="5629440"><a href="/gostd/archive/tar/reader.go.html#5618573">hdrBuff</a></span><span class="op" id="5629447">[</span><span class="op" id="5629448">:</span><span class="op" id="5629449">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5629452">copy</span><span class="op" id="5629456">(</span><span class="ident" id="5629457"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5629463">,</span>&nbsp;<span class="ident" id="5629465"><a href="/gostd/archive/tar/common.go.html#5616783">zeroBlock</a></span><span class="op" id="5629474">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629478">if</span>&nbsp;<span class="ident" id="5629481">_</span><span class="op" id="5629482">,</span>&nbsp;<span class="ident" id="5629484"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629486">.</span><span class="ident" id="5629487"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629491">=</span>&nbsp;<span class="ident" id="5629493"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5629495">.</span><span class="ident" id="5629496"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5629504">(</span><span class="ident" id="5629505"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629507">.</span><span class="ident" id="5629508"><a href="/gostd/archive/tar/reader.go.html#5618400">r</a></span><span class="op" id="5629509">,</span>&nbsp;<span class="ident" id="5629511"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5629517">)</span><span class="op" id="5629518">;</span>&nbsp;<span class="ident" id="5629520"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629522">.</span><span class="ident" id="5629523"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629527">!=</span>&nbsp;<span class="builtintype" id="5629530">nil</span>&nbsp;<span class="op" id="5629534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629538">return</span>&nbsp;<span class="builtintype" id="5629545">nil</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5629554">//&nbsp;Two&nbsp;blocks&nbsp;of&nbsp;zero&nbsp;bytes&nbsp;marks&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;archive.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629613">if</span>&nbsp;<span class="ident" id="5629616"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5629621">.</span><span class="ident" id="5629622"><a href="/gostd/bytes/bytes_decl.go.html#1414806">Equal</a></span><span class="op" id="5629627">(</span><span class="ident" id="5629628"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5629634">,</span>&nbsp;<span class="ident" id="5629636"><a href="/gostd/archive/tar/common.go.html#5616783">zeroBlock</a></span><span class="op" id="5629645">[</span><span class="num" id="5629646">0</span><span class="op" id="5629647">:</span><span class="ident" id="5629648"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span><span class="op" id="5629657">]</span><span class="op" id="5629658">)</span>&nbsp;<span class="op" id="5629660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629664">if</span>&nbsp;<span class="ident" id="5629667">_</span><span class="op" id="5629668">,</span>&nbsp;<span class="ident" id="5629670"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629672">.</span><span class="ident" id="5629673"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629677">=</span>&nbsp;<span class="ident" id="5629679"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5629681">.</span><span class="ident" id="5629682"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5629690">(</span><span class="ident" id="5629691"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629693">.</span><span class="ident" id="5629694"><a href="/gostd/archive/tar/reader.go.html#5618400">r</a></span><span class="op" id="5629695">,</span>&nbsp;<span class="ident" id="5629697"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5629703">)</span><span class="op" id="5629704">;</span>&nbsp;<span class="ident" id="5629706"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629708">.</span><span class="ident" id="5629709"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629713">!=</span>&nbsp;<span class="builtintype" id="5629716">nil</span>&nbsp;<span class="op" id="5629720">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629725">return</span>&nbsp;<span class="builtintype" id="5629732">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629742">if</span>&nbsp;<span class="ident" id="5629745"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5629750">.</span><span class="ident" id="5629751"><a href="/gostd/bytes/bytes_decl.go.html#1414806">Equal</a></span><span class="op" id="5629756">(</span><span class="ident" id="5629757"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5629763">,</span>&nbsp;<span class="ident" id="5629765"><a href="/gostd/archive/tar/common.go.html#5616783">zeroBlock</a></span><span class="op" id="5629774">[</span><span class="num" id="5629775">0</span><span class="op" id="5629776">:</span><span class="ident" id="5629777"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span><span class="op" id="5629786">]</span><span class="op" id="5629787">)</span>&nbsp;<span class="op" id="5629789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5629794"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629796">.</span><span class="ident" id="5629797"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629801">=</span>&nbsp;<span class="ident" id="5629803"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5629805">.</span><span class="ident" id="5629806"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629812">}</span>&nbsp;<span class="keyword" id="5629814">else</span>&nbsp;<span class="op" id="5629819">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5629824"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629826">.</span><span class="ident" id="5629827"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629831">=</span>&nbsp;<span class="ident" id="5629833"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span>&nbsp;<span class="comment" id="5629843">//&nbsp;zero&nbsp;block&nbsp;and&nbsp;then&nbsp;non-zero&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629887">return</span>&nbsp;<span class="builtintype" id="5629894">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629903">if</span>&nbsp;<span class="op" id="5629906">!</span><span class="ident" id="5629907"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629909">.</span><span class="ident" id="5629910"><a href="/gostd/archive/tar/reader.go.html#5629187">verifyChecksum</a></span><span class="op" id="5629924">(</span><span class="ident" id="5629925"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5629931">)</span>&nbsp;<span class="op" id="5629933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5629937"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5629939">.</span><span class="ident" id="5629940"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5629944">=</span>&nbsp;<span class="ident" id="5629946"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5629958">return</span>&nbsp;<span class="builtintype" id="5629965">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5629970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5629974">//&nbsp;Unpack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5629985">hdr</span>&nbsp;<span class="op" id="5629989">:=</span>&nbsp;<span class="builtinfunc" id="5629992">new</span><span class="op" id="5629995">(</span><span class="ident" id="5629996"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="5630002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630005">s</span>&nbsp;<span class="op" id="5630007">:=</span>&nbsp;<span class="ident" id="5630010"><a href="/gostd/archive/tar/common.go.html#5617305">slicer</a></span><span class="op" id="5630016">(</span><span class="ident" id="5630017"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5630023">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630027"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630030">.</span><span class="ident" id="5630031"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="5630036">=</span>&nbsp;<span class="ident" id="5630038"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5630045">(</span><span class="ident" id="5630046"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630047">.</span><span class="ident" id="5630048"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630052">(</span><span class="num" id="5630053">100</span><span class="op" id="5630056">)</span><span class="op" id="5630057">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630060"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630063">.</span><span class="ident" id="5630064"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5630069">=</span>&nbsp;<span class="ident" id="5630071"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5630073">.</span><span class="ident" id="5630074"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5630079">(</span><span class="ident" id="5630080"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630081">.</span><span class="ident" id="5630082"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630086">(</span><span class="num" id="5630087">8</span><span class="op" id="5630088">)</span><span class="op" id="5630089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630092"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630095">.</span><span class="ident" id="5630096"><a href="/gostd/archive/tar/common.go.html#5611431">Uid</a></span>&nbsp;<span class="op" id="5630100">=</span>&nbsp;<span class="builtintype" id="5630102">int</span><span class="op" id="5630105">(</span><span class="ident" id="5630106"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5630108">.</span><span class="ident" id="5630109"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5630114">(</span><span class="ident" id="5630115"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630116">.</span><span class="ident" id="5630117"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630121">(</span><span class="num" id="5630122">8</span><span class="op" id="5630123">)</span><span class="op" id="5630124">)</span><span class="op" id="5630125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630128"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630131">.</span><span class="ident" id="5630132"><a href="/gostd/archive/tar/common.go.html#5611473">Gid</a></span>&nbsp;<span class="op" id="5630136">=</span>&nbsp;<span class="builtintype" id="5630138">int</span><span class="op" id="5630141">(</span><span class="ident" id="5630142"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5630144">.</span><span class="ident" id="5630145"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5630150">(</span><span class="ident" id="5630151"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630152">.</span><span class="ident" id="5630153"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630157">(</span><span class="num" id="5630158">8</span><span class="op" id="5630159">)</span><span class="op" id="5630160">)</span><span class="op" id="5630161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630164"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630167">.</span><span class="ident" id="5630168"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="5630173">=</span>&nbsp;<span class="ident" id="5630175"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5630177">.</span><span class="ident" id="5630178"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5630183">(</span><span class="ident" id="5630184"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630185">.</span><span class="ident" id="5630186"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630190">(</span><span class="num" id="5630191">12</span><span class="op" id="5630193">)</span><span class="op" id="5630194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630197"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630200">.</span><span class="ident" id="5630201"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span>&nbsp;<span class="op" id="5630209">=</span>&nbsp;<span class="ident" id="5630211"><a href="/gostd/archive/tar/reader.go.html#5617989">time</a></span><span class="op" id="5630215">.</span><span class="ident" id="5630216"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="5630220">(</span><span class="ident" id="5630221"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5630223">.</span><span class="ident" id="5630224"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5630229">(</span><span class="ident" id="5630230"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630231">.</span><span class="ident" id="5630232"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630236">(</span><span class="num" id="5630237">12</span><span class="op" id="5630239">)</span><span class="op" id="5630240">)</span><span class="op" id="5630241">,</span>&nbsp;<span class="num" id="5630243">0</span><span class="op" id="5630244">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630247"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630248">.</span><span class="ident" id="5630249"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630253">(</span><span class="num" id="5630254">8</span><span class="op" id="5630255">)</span>&nbsp;<span class="comment" id="5630257">//&nbsp;chksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630268"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630271">.</span><span class="ident" id="5630272"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5630281">=</span>&nbsp;<span class="ident" id="5630283"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630284">.</span><span class="ident" id="5630285"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630289">(</span><span class="num" id="5630290">1</span><span class="op" id="5630291">)</span><span class="op" id="5630292">[</span><span class="num" id="5630293">0</span><span class="op" id="5630294">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630297"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630300">.</span><span class="ident" id="5630301"><a href="/gostd/archive/tar/common.go.html#5611642">Linkname</a></span>&nbsp;<span class="op" id="5630310">=</span>&nbsp;<span class="ident" id="5630312"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5630319">(</span><span class="ident" id="5630320"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630321">.</span><span class="ident" id="5630322"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630326">(</span><span class="num" id="5630327">100</span><span class="op" id="5630330">)</span><span class="op" id="5630331">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5630335">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;header&nbsp;depends&nbsp;on&nbsp;the&nbsp;value&nbsp;of&nbsp;magic.</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5630398">//&nbsp;The&nbsp;original&nbsp;(v7)&nbsp;version&nbsp;of&nbsp;tar&nbsp;had&nbsp;no&nbsp;explicit&nbsp;magic&nbsp;field,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5630464">//&nbsp;so&nbsp;its&nbsp;magic&nbsp;bytes,&nbsp;like&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;block,&nbsp;are&nbsp;NULs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630526">magic</span>&nbsp;<span class="op" id="5630532">:=</span>&nbsp;<span class="builtintype" id="5630535">string</span><span class="op" id="5630541">(</span><span class="ident" id="5630542"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630543">.</span><span class="ident" id="5630544"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630548">(</span><span class="num" id="5630549">8</span><span class="op" id="5630550">)</span><span class="op" id="5630551">)</span>&nbsp;<span class="comment" id="5630553">//&nbsp;contains&nbsp;version&nbsp;field&nbsp;as&nbsp;well.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630589">var</span>&nbsp;<span class="ident" id="5630593">format</span>&nbsp;<span class="builtintype" id="5630600">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630608">switch</span>&nbsp;<span class="op" id="5630615">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630618">case</span>&nbsp;<span class="ident" id="5630623"><a href="/gostd/archive/tar/reader.go.html#5630526">magic</a></span><span class="op" id="5630628">[</span><span class="op" id="5630629">:</span><span class="num" id="5630630">6</span><span class="op" id="5630631">]</span>&nbsp;<span class="op" id="5630633">==</span>&nbsp;<span class="string" id="5630636">&#34;ustar\x00&#34;</span><span class="op" id="5630647">:</span>&nbsp;<span class="comment" id="5630649">//&nbsp;POSIX&nbsp;tar&nbsp;(1003.1-1988)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630678">if</span>&nbsp;<span class="builtintype" id="5630681">string</span><span class="op" id="5630687">(</span><span class="ident" id="5630688"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5630694">[</span><span class="num" id="5630695">508</span><span class="op" id="5630698">:</span><span class="num" id="5630699">512</span><span class="op" id="5630702">]</span><span class="op" id="5630703">)</span>&nbsp;<span class="op" id="5630705">==</span>&nbsp;<span class="string" id="5630708">&#34;tar\x00&#34;</span>&nbsp;<span class="op" id="5630718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630723"><a href="/gostd/archive/tar/reader.go.html#5630593">format</a></span>&nbsp;<span class="op" id="5630730">=</span>&nbsp;<span class="string" id="5630732">&#34;star&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5630741">}</span>&nbsp;<span class="keyword" id="5630743">else</span>&nbsp;<span class="op" id="5630748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630753"><a href="/gostd/archive/tar/reader.go.html#5630593">format</a></span>&nbsp;<span class="op" id="5630760">=</span>&nbsp;<span class="string" id="5630762">&#34;posix&#34;</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5630772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630775">case</span>&nbsp;<span class="ident" id="5630780"><a href="/gostd/archive/tar/reader.go.html#5630526">magic</a></span>&nbsp;<span class="op" id="5630786">==</span>&nbsp;<span class="string" id="5630789">&#34;ustar&nbsp;&nbsp;\x00&#34;</span><span class="op" id="5630802">:</span>&nbsp;<span class="comment" id="5630804">//&nbsp;old&nbsp;GNU&nbsp;tar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630821"><a href="/gostd/archive/tar/reader.go.html#5630593">format</a></span>&nbsp;<span class="op" id="5630828">=</span>&nbsp;<span class="string" id="5630830">&#34;gnu&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5630837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630841">switch</span>&nbsp;<span class="ident" id="5630848"><a href="/gostd/archive/tar/reader.go.html#5630593">format</a></span>&nbsp;<span class="op" id="5630855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630858">case</span>&nbsp;<span class="string" id="5630863">&#34;posix&#34;</span><span class="op" id="5630870">,</span>&nbsp;<span class="string" id="5630872">&#34;gnu&#34;</span><span class="op" id="5630877">,</span>&nbsp;<span class="string" id="5630879">&#34;star&#34;</span><span class="op" id="5630885">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630889"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630892">.</span><span class="ident" id="5630893"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span>&nbsp;<span class="op" id="5630899">=</span>&nbsp;<span class="ident" id="5630901"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5630908">(</span><span class="ident" id="5630909"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630910">.</span><span class="ident" id="5630911"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630915">(</span><span class="num" id="5630916">32</span><span class="op" id="5630918">)</span><span class="op" id="5630919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630923"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5630926">.</span><span class="ident" id="5630927"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span>&nbsp;<span class="op" id="5630933">=</span>&nbsp;<span class="ident" id="5630935"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5630942">(</span><span class="ident" id="5630943"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630944">.</span><span class="ident" id="5630945"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630949">(</span><span class="num" id="5630950">32</span><span class="op" id="5630952">)</span><span class="op" id="5630953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630957">devmajor</span>&nbsp;<span class="op" id="5630966">:=</span>&nbsp;<span class="ident" id="5630969"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630970">.</span><span class="ident" id="5630971"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630975">(</span><span class="num" id="5630976">8</span><span class="op" id="5630977">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630981">devminor</span>&nbsp;<span class="op" id="5630990">:=</span>&nbsp;<span class="ident" id="5630993"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5630994">.</span><span class="ident" id="5630995"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5630999">(</span><span class="num" id="5631000">8</span><span class="op" id="5631001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631005">if</span>&nbsp;<span class="ident" id="5631008"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631011">.</span><span class="ident" id="5631012"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5631021">==</span>&nbsp;<span class="ident" id="5631024"><a href="/gostd/archive/tar/common.go.html#5610712">TypeChar</a></span>&nbsp;<span class="op" id="5631033">||</span>&nbsp;<span class="ident" id="5631036"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631039">.</span><span class="ident" id="5631040"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5631049">==</span>&nbsp;<span class="ident" id="5631052"><a href="/gostd/archive/tar/common.go.html#5610765">TypeBlock</a></span>&nbsp;<span class="op" id="5631062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631067"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631070">.</span><span class="ident" id="5631071"><a href="/gostd/archive/tar/common.go.html#5611776">Devmajor</a></span>&nbsp;<span class="op" id="5631080">=</span>&nbsp;<span class="ident" id="5631082"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631084">.</span><span class="ident" id="5631085"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5631090">(</span><span class="ident" id="5631091"><a href="/gostd/archive/tar/reader.go.html#5630957">devmajor</a></span><span class="op" id="5631099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631104"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631107">.</span><span class="ident" id="5631108"><a href="/gostd/archive/tar/common.go.html#5611843">Devminor</a></span>&nbsp;<span class="op" id="5631117">=</span>&nbsp;<span class="ident" id="5631119"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631121">.</span><span class="ident" id="5631122"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5631127">(</span><span class="ident" id="5631128"><a href="/gostd/archive/tar/reader.go.html#5630981">devminor</a></span><span class="op" id="5631136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631140">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631144">var</span>&nbsp;<span class="ident" id="5631148">prefix</span>&nbsp;<span class="builtintype" id="5631155">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631164">switch</span>&nbsp;<span class="ident" id="5631171"><a href="/gostd/archive/tar/reader.go.html#5630593">format</a></span>&nbsp;<span class="op" id="5631178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631182">case</span>&nbsp;<span class="string" id="5631187">&#34;posix&#34;</span><span class="op" id="5631194">,</span>&nbsp;<span class="string" id="5631196">&#34;gnu&#34;</span><span class="op" id="5631201">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631206"><a href="/gostd/archive/tar/reader.go.html#5631148">prefix</a></span>&nbsp;<span class="op" id="5631213">=</span>&nbsp;<span class="ident" id="5631215"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5631222">(</span><span class="ident" id="5631223"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5631224">.</span><span class="ident" id="5631225"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5631229">(</span><span class="num" id="5631230">155</span><span class="op" id="5631233">)</span><span class="op" id="5631234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631238">case</span>&nbsp;<span class="string" id="5631243">&#34;star&#34;</span><span class="op" id="5631249">:</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631254"><a href="/gostd/archive/tar/reader.go.html#5631148">prefix</a></span>&nbsp;<span class="op" id="5631261">=</span>&nbsp;<span class="ident" id="5631263"><a href="/gostd/archive/tar/reader.go.html#5628066">cString</a></span><span class="op" id="5631270">(</span><span class="ident" id="5631271"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5631272">.</span><span class="ident" id="5631273"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5631277">(</span><span class="num" id="5631278">131</span><span class="op" id="5631281">)</span><span class="op" id="5631282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631287"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631290">.</span><span class="ident" id="5631291"><a href="/gostd/archive/tar/common.go.html#5611910">AccessTime</a></span>&nbsp;<span class="op" id="5631302">=</span>&nbsp;<span class="ident" id="5631304"><a href="/gostd/archive/tar/reader.go.html#5617989">time</a></span><span class="op" id="5631308">.</span><span class="ident" id="5631309"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="5631313">(</span><span class="ident" id="5631314"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631316">.</span><span class="ident" id="5631317"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5631322">(</span><span class="ident" id="5631323"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5631324">.</span><span class="ident" id="5631325"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5631329">(</span><span class="num" id="5631330">12</span><span class="op" id="5631332">)</span><span class="op" id="5631333">)</span><span class="op" id="5631334">,</span>&nbsp;<span class="num" id="5631336">0</span><span class="op" id="5631337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631342"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631345">.</span><span class="ident" id="5631346"><a href="/gostd/archive/tar/common.go.html#5611947">ChangeTime</a></span>&nbsp;<span class="op" id="5631357">=</span>&nbsp;<span class="ident" id="5631359"><a href="/gostd/archive/tar/reader.go.html#5617989">time</a></span><span class="op" id="5631363">.</span><span class="ident" id="5631364"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="5631368">(</span><span class="ident" id="5631369"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631371">.</span><span class="ident" id="5631372"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5631377">(</span><span class="ident" id="5631378"><a href="/gostd/archive/tar/reader.go.html#5630005">s</a></span><span class="op" id="5631379">.</span><span class="ident" id="5631380"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5631384">(</span><span class="num" id="5631385">12</span><span class="op" id="5631387">)</span><span class="op" id="5631388">)</span><span class="op" id="5631389">,</span>&nbsp;<span class="num" id="5631391">0</span><span class="op" id="5631392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631400">if</span>&nbsp;<span class="builtinfunc" id="5631403">len</span><span class="op" id="5631406">(</span><span class="ident" id="5631407"><a href="/gostd/archive/tar/reader.go.html#5631148">prefix</a></span><span class="op" id="5631413">)</span>&nbsp;<span class="op" id="5631415">&gt;</span>&nbsp;<span class="num" id="5631417">0</span>&nbsp;<span class="op" id="5631419">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631424"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631427">.</span><span class="ident" id="5631428"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="5631433">=</span>&nbsp;<span class="ident" id="5631435"><a href="/gostd/archive/tar/reader.go.html#5631148">prefix</a></span>&nbsp;<span class="op" id="5631442">+</span>&nbsp;<span class="string" id="5631444">&#34;/&#34;</span>&nbsp;<span class="op" id="5631448">+</span>&nbsp;<span class="ident" id="5631450"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631453">.</span><span class="ident" id="5631454"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631468">if</span>&nbsp;<span class="ident" id="5631471"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631473">.</span><span class="ident" id="5631474"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5631478">!=</span>&nbsp;<span class="builtintype" id="5631481">nil</span>&nbsp;<span class="op" id="5631485">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631489"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631491">.</span><span class="ident" id="5631492"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5631496">=</span>&nbsp;<span class="ident" id="5631498"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631510">return</span>&nbsp;<span class="builtintype" id="5631517">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5631526">//&nbsp;Maximum&nbsp;value&nbsp;of&nbsp;hdr.Size&nbsp;is&nbsp;64&nbsp;GB&nbsp;(12&nbsp;octal&nbsp;digits),</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5631584">//&nbsp;so&nbsp;there&#39;s&nbsp;no&nbsp;risk&nbsp;of&nbsp;int64&nbsp;overflowing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631629">nb</span>&nbsp;<span class="op" id="5631632">:=</span>&nbsp;<span class="builtintype" id="5631635">int64</span><span class="op" id="5631640">(</span><span class="ident" id="5631641"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631644">.</span><span class="ident" id="5631645"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="5631649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631652"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631654">.</span><span class="ident" id="5631655"><a href="/gostd/archive/tar/reader.go.html#5618434">pad</a></span>&nbsp;<span class="op" id="5631659">=</span>&nbsp;<span class="op" id="5631661">-</span><span class="ident" id="5631662"><a href="/gostd/archive/tar/reader.go.html#5631629">nb</a></span>&nbsp;<span class="op" id="5631665">&amp;</span>&nbsp;<span class="op" id="5631667">(</span><span class="ident" id="5631668"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span>&nbsp;<span class="op" id="5631678">-</span>&nbsp;<span class="num" id="5631680">1</span><span class="op" id="5631681">)</span>&nbsp;<span class="comment" id="5631683">//&nbsp;blockSize&nbsp;is&nbsp;a&nbsp;power&nbsp;of&nbsp;two</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5631716">//&nbsp;Set&nbsp;the&nbsp;current&nbsp;file&nbsp;reader.</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631749"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631751">.</span><span class="ident" id="5631752"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span>&nbsp;<span class="op" id="5631757">=</span>&nbsp;<span class="op" id="5631759">&amp;</span><span class="ident" id="5631760"><a href="/gostd/archive/tar/reader.go.html#5618916">regFileReader</a></span><span class="op" id="5631773">{</span><span class="ident" id="5631774"><a href="/gostd/archive/tar/reader.go.html#5618940">r</a></span><span class="op" id="5631775">:</span>&nbsp;<span class="ident" id="5631777"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631779">.</span><span class="ident" id="5631780"><a href="/gostd/archive/tar/reader.go.html#5618400">r</a></span><span class="op" id="5631781">,</span>&nbsp;<span class="ident" id="5631783"><a href="/gostd/archive/tar/reader.go.html#5618975">nb</a></span><span class="op" id="5631785">:</span>&nbsp;<span class="ident" id="5631787"><a href="/gostd/archive/tar/reader.go.html#5631629">nb</a></span><span class="op" id="5631789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5631793">//&nbsp;Check&nbsp;for&nbsp;old&nbsp;GNU&nbsp;sparse&nbsp;format&nbsp;entry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631836">if</span>&nbsp;<span class="ident" id="5631839"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631842">.</span><span class="ident" id="5631843"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5631852">==</span>&nbsp;<span class="ident" id="5631855"><a href="/gostd/archive/tar/common.go.html#5611169">TypeGNUSparse</a></span>&nbsp;<span class="op" id="5631869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5631873">//&nbsp;Get&nbsp;the&nbsp;real&nbsp;size&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631909"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5631912">.</span><span class="ident" id="5631913"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="5631918">=</span>&nbsp;<span class="ident" id="5631920"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631922">.</span><span class="ident" id="5631923"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5631928">(</span><span class="ident" id="5631929"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5631935">[</span><span class="num" id="5631936">483</span><span class="op" id="5631939">:</span><span class="num" id="5631940">495</span><span class="op" id="5631943">]</span><span class="op" id="5631944">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5631949">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631975">sp</span>&nbsp;<span class="op" id="5631978">:=</span>&nbsp;<span class="ident" id="5631981"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5631983">.</span><span class="ident" id="5631984"><a href="/gostd/archive/tar/reader.go.html#5632732">readOldGNUSparseMap</a></span><span class="op" id="5632003">(</span><span class="ident" id="5632004"><a href="/gostd/archive/tar/reader.go.html#5629427">header</a></span><span class="op" id="5632010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5632014">if</span>&nbsp;<span class="ident" id="5632017"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5632019">.</span><span class="ident" id="5632020"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5632024">!=</span>&nbsp;<span class="builtintype" id="5632027">nil</span>&nbsp;<span class="op" id="5632031">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5632036">return</span>&nbsp;<span class="builtintype" id="5632043">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5632049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5632053">//&nbsp;Current&nbsp;file&nbsp;is&nbsp;a&nbsp;GNU&nbsp;sparse&nbsp;file.&nbsp;Update&nbsp;the&nbsp;current&nbsp;file&nbsp;reader.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5632125"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5632127">.</span><span class="ident" id="5632128"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span>&nbsp;<span class="op" id="5632133">=</span>&nbsp;<span class="op" id="5632135">&amp;</span><span class="ident" id="5632136"><a href="/gostd/archive/tar/reader.go.html#5619136">sparseFileReader</a></span><span class="op" id="5632152">{</span><span class="ident" id="5632153"><a href="/gostd/archive/tar/reader.go.html#5619163">rfr</a></span><span class="op" id="5632156">:</span>&nbsp;<span class="ident" id="5632158"><a href="/gostd/archive/tar/reader.go.html#5629391">tr</a></span><span class="op" id="5632160">.</span><span class="ident" id="5632161"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span><span class="op" id="5632165">.</span><span class="op" id="5632166">(</span><span class="op" id="5632167">*</span><span class="ident" id="5632168"><a href="/gostd/archive/tar/reader.go.html#5618916">regFileReader</a></span><span class="op" id="5632181">)</span><span class="op" id="5632182">,</span>&nbsp;<span class="ident" id="5632184"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span><span class="op" id="5632186">:</span>&nbsp;<span class="ident" id="5632188"><a href="/gostd/archive/tar/reader.go.html#5631975">sp</a></span><span class="op" id="5632190">,</span>&nbsp;<span class="ident" id="5632192"><a href="/gostd/archive/tar/reader.go.html#5619324">tot</a></span><span class="op" id="5632195">:</span>&nbsp;<span class="ident" id="5632197"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><span class="op" id="5632200">.</span><span class="ident" id="5632201"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="5632205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5632208">}</span><br>
<span class="lineno">535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5632212">return</span>&nbsp;<span class="ident" id="5632219"><a href="/gostd/archive/tar/reader.go.html#5629985">hdr</a></span><br>
<span class="lineno"></span><span class="op" id="5632223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5632226">//&nbsp;A&nbsp;sparseEntry&nbsp;holds&nbsp;a&nbsp;single&nbsp;entry&nbsp;in&nbsp;a&nbsp;sparse&nbsp;file&#39;s&nbsp;sparse&nbsp;map.</span><br>
<span class="lineno">540</span><span class="comment" id="5632295">//&nbsp;A&nbsp;sparse&nbsp;entry&nbsp;indicates&nbsp;the&nbsp;offset&nbsp;and&nbsp;size&nbsp;in&nbsp;a&nbsp;sparse&nbsp;file&nbsp;of&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5632365">//&nbsp;block&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5632383">type</span>&nbsp;<span class="ident" id="5632388">sparseEntry</span>&nbsp;<span class="keyword" id="5632400">struct</span>&nbsp;<span class="op" id="5632407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5632410">offset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5632419">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5632426">numBytes</span>&nbsp;<span class="builtintype" id="5632435">int64</span><br>
<span class="lineno">545</span><span class="op" id="5632441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5632444">//&nbsp;readOldGNUSparseMap&nbsp;reads&nbsp;the&nbsp;sparse&nbsp;map&nbsp;as&nbsp;stored&nbsp;in&nbsp;the&nbsp;old&nbsp;GNU&nbsp;sparse&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="5632528">//&nbsp;The&nbsp;sparse&nbsp;map&nbsp;is&nbsp;stored&nbsp;in&nbsp;the&nbsp;tar&nbsp;header&nbsp;if&nbsp;it&#39;s&nbsp;small&nbsp;enough.&nbsp;If&nbsp;it&#39;s&nbsp;larger&nbsp;than&nbsp;four&nbsp;entries,</span><br>
<span class="lineno"></span><span class="comment" id="5632630">//&nbsp;then&nbsp;one&nbsp;or&nbsp;more&nbsp;extension&nbsp;headers&nbsp;are&nbsp;used&nbsp;to&nbsp;store&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;sparse&nbsp;map.</span><br>
<span class="lineno">550</span><span class="keyword" id="5632714">func</span>&nbsp;<span class="op" id="5632719">(</span><span class="ident" id="5632720">tr</span>&nbsp;<span class="op" id="5632723">*</span><span class="ident" id="5632724"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5632730">)</span>&nbsp;<span class="ident" id="5632732">readOldGNUSparseMap</span><span class="op" id="5632751">(</span><span class="ident" id="5632752">header</span>&nbsp;<span class="op" id="5632759">[</span><span class="op" id="5632760">]</span><span class="builtintype" id="5632761">byte</span><span class="op" id="5632765">)</span>&nbsp;<span class="op" id="5632767">[</span><span class="op" id="5632768">]</span><span class="ident" id="5632769"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span>&nbsp;<span class="op" id="5632781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5632784">isExtended</span>&nbsp;<span class="op" id="5632795">:=</span>&nbsp;<span class="ident" id="5632798"><a href="/gostd/archive/tar/reader.go.html#5632752">header</a></span><span class="op" id="5632804">[</span><span class="ident" id="5632805"><a href="/gostd/archive/tar/reader.go.html#5619942">oldGNUSparseMainHeaderIsExtendedOffset</a></span><span class="op" id="5632843">]</span>&nbsp;<span class="op" id="5632845">!=</span>&nbsp;<span class="num" id="5632848">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5632851">spCap</span>&nbsp;<span class="op" id="5632857">:=</span>&nbsp;<span class="ident" id="5632860"><a href="/gostd/archive/tar/reader.go.html#5619992">oldGNUSparseMainHeaderNumEntries</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5632894">if</span>&nbsp;<span class="ident" id="5632897"><a href="/gostd/archive/tar/reader.go.html#5632784">isExtended</a></span>&nbsp;<span class="op" id="5632908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5632912"><a href="/gostd/archive/tar/reader.go.html#5632851">spCap</a></span>&nbsp;<span class="op" id="5632918">+=</span>&nbsp;<span class="ident" id="5632921"><a href="/gostd/archive/tar/reader.go.html#5620090">oldGNUSparseExtendedHeaderNumEntries</a></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5632959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5632962">sp</span>&nbsp;<span class="op" id="5632965">:=</span>&nbsp;<span class="builtinfunc" id="5632968">make</span><span class="op" id="5632972">(</span><span class="op" id="5632973">[</span><span class="op" id="5632974">]</span><span class="ident" id="5632975"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5632986">,</span>&nbsp;<span class="num" id="5632988">0</span><span class="op" id="5632989">,</span>&nbsp;<span class="ident" id="5632991"><a href="/gostd/archive/tar/reader.go.html#5632851">spCap</a></span><span class="op" id="5632996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5632999">s</span>&nbsp;<span class="op" id="5633001">:=</span>&nbsp;<span class="ident" id="5633004"><a href="/gostd/archive/tar/common.go.html#5617305">slicer</a></span><span class="op" id="5633010">(</span><span class="ident" id="5633011"><a href="/gostd/archive/tar/reader.go.html#5632752">header</a></span><span class="op" id="5633017">[</span><span class="ident" id="5633018"><a href="/gostd/archive/tar/reader.go.html#5619892">oldGNUSparseMainHeaderOffset</a></span><span class="op" id="5633046">:</span><span class="op" id="5633047">]</span><span class="op" id="5633048">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5633052">//&nbsp;Read&nbsp;the&nbsp;four&nbsp;entries&nbsp;from&nbsp;the&nbsp;main&nbsp;tar&nbsp;header</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633103">for</span>&nbsp;<span class="ident" id="5633107">i</span>&nbsp;<span class="op" id="5633109">:=</span>&nbsp;<span class="num" id="5633112">0</span><span class="op" id="5633113">;</span>&nbsp;<span class="ident" id="5633115"><a href="/gostd/archive/tar/reader.go.html#5633107">i</a></span>&nbsp;<span class="op" id="5633117">&lt;</span>&nbsp;<span class="ident" id="5633119"><a href="/gostd/archive/tar/reader.go.html#5619992">oldGNUSparseMainHeaderNumEntries</a></span><span class="op" id="5633151">;</span>&nbsp;<span class="ident" id="5633153"><a href="/gostd/archive/tar/reader.go.html#5633107">i</a></span><span class="op" id="5633154">++</span>&nbsp;<span class="op" id="5633157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633161">offset</span>&nbsp;<span class="op" id="5633168">:=</span>&nbsp;<span class="ident" id="5633171"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633173">.</span><span class="ident" id="5633174"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5633179">(</span><span class="ident" id="5633180"><a href="/gostd/archive/tar/reader.go.html#5632999">s</a></span><span class="op" id="5633181">.</span><span class="ident" id="5633182"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5633186">(</span><span class="ident" id="5633187"><a href="/gostd/archive/tar/reader.go.html#5620139">oldGNUSparseOffsetSize</a></span><span class="op" id="5633209">)</span><span class="op" id="5633210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633214">numBytes</span>&nbsp;<span class="op" id="5633223">:=</span>&nbsp;<span class="ident" id="5633226"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633228">.</span><span class="ident" id="5633229"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5633234">(</span><span class="ident" id="5633235"><a href="/gostd/archive/tar/reader.go.html#5632999">s</a></span><span class="op" id="5633236">.</span><span class="ident" id="5633237"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5633241">(</span><span class="ident" id="5633242"><a href="/gostd/archive/tar/reader.go.html#5620188">oldGNUSparseNumBytesSize</a></span><span class="op" id="5633266">)</span><span class="op" id="5633267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633271">if</span>&nbsp;<span class="ident" id="5633274"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633276">.</span><span class="ident" id="5633277"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5633281">!=</span>&nbsp;<span class="builtintype" id="5633284">nil</span>&nbsp;<span class="op" id="5633288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633293"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633295">.</span><span class="ident" id="5633296"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5633300">=</span>&nbsp;<span class="ident" id="5633302"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633315">return</span>&nbsp;<span class="builtintype" id="5633322">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5633328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633332">if</span>&nbsp;<span class="ident" id="5633335"><a href="/gostd/archive/tar/reader.go.html#5633161">offset</a></span>&nbsp;<span class="op" id="5633342">==</span>&nbsp;<span class="num" id="5633345">0</span>&nbsp;<span class="op" id="5633347">&amp;&amp;</span>&nbsp;<span class="ident" id="5633350"><a href="/gostd/archive/tar/reader.go.html#5633214">numBytes</a></span>&nbsp;<span class="op" id="5633359">==</span>&nbsp;<span class="num" id="5633362">0</span>&nbsp;<span class="op" id="5633364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633369">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5633377">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633381"><a href="/gostd/archive/tar/reader.go.html#5632962">sp</a></span>&nbsp;<span class="op" id="5633384">=</span>&nbsp;<span class="builtinfunc" id="5633386">append</span><span class="op" id="5633392">(</span><span class="ident" id="5633393"><a href="/gostd/archive/tar/reader.go.html#5632962">sp</a></span><span class="op" id="5633395">,</span>&nbsp;<span class="ident" id="5633397"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5633408">{</span><span class="ident" id="5633409"><a href="/gostd/archive/tar/reader.go.html#5632410">offset</a></span><span class="op" id="5633415">:</span>&nbsp;<span class="ident" id="5633417"><a href="/gostd/archive/tar/reader.go.html#5633161">offset</a></span><span class="op" id="5633423">,</span>&nbsp;<span class="ident" id="5633425"><a href="/gostd/archive/tar/reader.go.html#5632426">numBytes</a></span><span class="op" id="5633433">:</span>&nbsp;<span class="ident" id="5633435"><a href="/gostd/archive/tar/reader.go.html#5633214">numBytes</a></span><span class="op" id="5633443">}</span><span class="op" id="5633444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5633447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633451">for</span>&nbsp;<span class="ident" id="5633455"><a href="/gostd/archive/tar/reader.go.html#5632784">isExtended</a></span>&nbsp;<span class="op" id="5633466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5633470">//&nbsp;There&nbsp;are&nbsp;more&nbsp;entries.&nbsp;Read&nbsp;an&nbsp;extension&nbsp;header&nbsp;and&nbsp;parse&nbsp;its&nbsp;entries.</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633547">sparseHeader</span>&nbsp;<span class="op" id="5633560">:=</span>&nbsp;<span class="builtinfunc" id="5633563">make</span><span class="op" id="5633567">(</span><span class="op" id="5633568">[</span><span class="op" id="5633569">]</span><span class="builtintype" id="5633570">byte</span><span class="op" id="5633574">,</span>&nbsp;<span class="ident" id="5633576"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span><span class="op" id="5633585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633589">if</span>&nbsp;<span class="ident" id="5633592">_</span><span class="op" id="5633593">,</span>&nbsp;<span class="ident" id="5633595"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633597">.</span><span class="ident" id="5633598"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5633602">=</span>&nbsp;<span class="ident" id="5633604"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5633606">.</span><span class="ident" id="5633607"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5633615">(</span><span class="ident" id="5633616"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633618">.</span><span class="ident" id="5633619"><a href="/gostd/archive/tar/reader.go.html#5618400">r</a></span><span class="op" id="5633620">,</span>&nbsp;<span class="ident" id="5633622"><a href="/gostd/archive/tar/reader.go.html#5633547">sparseHeader</a></span><span class="op" id="5633634">)</span><span class="op" id="5633635">;</span>&nbsp;<span class="ident" id="5633637"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633639">.</span><span class="ident" id="5633640"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5633644">!=</span>&nbsp;<span class="builtintype" id="5633647">nil</span>&nbsp;<span class="op" id="5633651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633656">return</span>&nbsp;<span class="builtintype" id="5633663">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5633669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633673"><a href="/gostd/archive/tar/reader.go.html#5632784">isExtended</a></span>&nbsp;<span class="op" id="5633684">=</span>&nbsp;<span class="ident" id="5633686"><a href="/gostd/archive/tar/reader.go.html#5633547">sparseHeader</a></span><span class="op" id="5633698">[</span><span class="ident" id="5633699"><a href="/gostd/archive/tar/reader.go.html#5620040">oldGNUSparseExtendedHeaderIsExtendedOffset</a></span><span class="op" id="5633741">]</span>&nbsp;<span class="op" id="5633743">!=</span>&nbsp;<span class="num" id="5633746">0</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633750"><a href="/gostd/archive/tar/reader.go.html#5632999">s</a></span>&nbsp;<span class="op" id="5633752">=</span>&nbsp;<span class="ident" id="5633754"><a href="/gostd/archive/tar/common.go.html#5617305">slicer</a></span><span class="op" id="5633760">(</span><span class="ident" id="5633761"><a href="/gostd/archive/tar/reader.go.html#5633547">sparseHeader</a></span><span class="op" id="5633773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633777">for</span>&nbsp;<span class="ident" id="5633781">i</span>&nbsp;<span class="op" id="5633783">:=</span>&nbsp;<span class="num" id="5633786">0</span><span class="op" id="5633787">;</span>&nbsp;<span class="ident" id="5633789"><a href="/gostd/archive/tar/reader.go.html#5633781">i</a></span>&nbsp;<span class="op" id="5633791">&lt;</span>&nbsp;<span class="ident" id="5633793"><a href="/gostd/archive/tar/reader.go.html#5620090">oldGNUSparseExtendedHeaderNumEntries</a></span><span class="op" id="5633829">;</span>&nbsp;<span class="ident" id="5633831"><a href="/gostd/archive/tar/reader.go.html#5633781">i</a></span><span class="op" id="5633832">++</span>&nbsp;<span class="op" id="5633835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633840">offset</span>&nbsp;<span class="op" id="5633847">:=</span>&nbsp;<span class="ident" id="5633850"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633852">.</span><span class="ident" id="5633853"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5633858">(</span><span class="ident" id="5633859"><a href="/gostd/archive/tar/reader.go.html#5632999">s</a></span><span class="op" id="5633860">.</span><span class="ident" id="5633861"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5633865">(</span><span class="ident" id="5633866"><a href="/gostd/archive/tar/reader.go.html#5620139">oldGNUSparseOffsetSize</a></span><span class="op" id="5633888">)</span><span class="op" id="5633889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633894">numBytes</span>&nbsp;<span class="op" id="5633903">:=</span>&nbsp;<span class="ident" id="5633906"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633908">.</span><span class="ident" id="5633909"><a href="/gostd/archive/tar/reader.go.html#5628185">octal</a></span><span class="op" id="5633914">(</span><span class="ident" id="5633915"><a href="/gostd/archive/tar/reader.go.html#5632999">s</a></span><span class="op" id="5633916">.</span><span class="ident" id="5633917"><a href="/gostd/archive/tar/common.go.html#5617338">next</a></span><span class="op" id="5633921">(</span><span class="ident" id="5633922"><a href="/gostd/archive/tar/reader.go.html#5620188">oldGNUSparseNumBytesSize</a></span><span class="op" id="5633946">)</span><span class="op" id="5633947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633952">if</span>&nbsp;<span class="ident" id="5633955"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633957">.</span><span class="ident" id="5633958"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5633962">!=</span>&nbsp;<span class="builtintype" id="5633965">nil</span>&nbsp;<span class="op" id="5633969">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5633975"><a href="/gostd/archive/tar/reader.go.html#5632720">tr</a></span><span class="op" id="5633977">.</span><span class="ident" id="5633978"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5633982">=</span>&nbsp;<span class="ident" id="5633984"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5633998">return</span>&nbsp;<span class="builtintype" id="5634005">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5634012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5634017">if</span>&nbsp;<span class="ident" id="5634020"><a href="/gostd/archive/tar/reader.go.html#5633840">offset</a></span>&nbsp;<span class="op" id="5634027">==</span>&nbsp;<span class="num" id="5634030">0</span>&nbsp;<span class="op" id="5634032">&amp;&amp;</span>&nbsp;<span class="ident" id="5634035"><a href="/gostd/archive/tar/reader.go.html#5633894">numBytes</a></span>&nbsp;<span class="op" id="5634044">==</span>&nbsp;<span class="num" id="5634047">0</span>&nbsp;<span class="op" id="5634049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5634055">break</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5634064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5634069"><a href="/gostd/archive/tar/reader.go.html#5632962">sp</a></span>&nbsp;<span class="op" id="5634072">=</span>&nbsp;<span class="builtinfunc" id="5634074">append</span><span class="op" id="5634080">(</span><span class="ident" id="5634081"><a href="/gostd/archive/tar/reader.go.html#5632962">sp</a></span><span class="op" id="5634083">,</span>&nbsp;<span class="ident" id="5634085"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5634096">{</span><span class="ident" id="5634097"><a href="/gostd/archive/tar/reader.go.html#5632410">offset</a></span><span class="op" id="5634103">:</span>&nbsp;<span class="ident" id="5634105"><a href="/gostd/archive/tar/reader.go.html#5633840">offset</a></span><span class="op" id="5634111">,</span>&nbsp;<span class="ident" id="5634113"><a href="/gostd/archive/tar/reader.go.html#5632426">numBytes</a></span><span class="op" id="5634121">:</span>&nbsp;<span class="ident" id="5634123"><a href="/gostd/archive/tar/reader.go.html#5633894">numBytes</a></span><span class="op" id="5634131">}</span><span class="op" id="5634132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5634136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5634139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5634142">return</span>&nbsp;<span class="ident" id="5634149"><a href="/gostd/archive/tar/reader.go.html#5632962">sp</a></span><br>
<span class="lineno">595</span><span class="op" id="5634152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5634155">//&nbsp;readGNUSparseMap1x0&nbsp;reads&nbsp;the&nbsp;sparse&nbsp;map&nbsp;as&nbsp;stored&nbsp;in&nbsp;GNU&#39;s&nbsp;PAX&nbsp;sparse&nbsp;format&nbsp;version&nbsp;1.0.</span><br>
<span class="lineno"></span><span class="comment" id="5634249">//&nbsp;The&nbsp;sparse&nbsp;map&nbsp;is&nbsp;stored&nbsp;just&nbsp;before&nbsp;the&nbsp;file&nbsp;data&nbsp;and&nbsp;padded&nbsp;out&nbsp;to&nbsp;the&nbsp;nearest&nbsp;block&nbsp;boundary.</span><br>
<span class="lineno"></span><span class="keyword" id="5634349">func</span>&nbsp;<span class="ident" id="5634354">readGNUSparseMap1x0</span><span class="op" id="5634373">(</span><span class="ident" id="5634374">r</span>&nbsp;<span class="ident" id="5634376"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5634378">.</span><span class="ident" id="5634379"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5634385">)</span>&nbsp;<span class="op" id="5634387">(</span><span class="op" id="5634388">[</span><span class="op" id="5634389">]</span><span class="ident" id="5634390"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5634401">,</span>&nbsp;<span class="builtintype" id="5634403">error</span><span class="op" id="5634408">)</span>&nbsp;<span class="op" id="5634410">{</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5634413">buf</span>&nbsp;<span class="op" id="5634417">:=</span>&nbsp;<span class="builtinfunc" id="5634420">make</span><span class="op" id="5634424">(</span><span class="op" id="5634425">[</span><span class="op" id="5634426">]</span><span class="builtintype" id="5634427">byte</span><span class="op" id="5634431">,</span>&nbsp;<span class="num" id="5634433">2</span><span class="op" id="5634434">*</span><span class="ident" id="5634435"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span><span class="op" id="5634444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5634447">sparseHeader</span>&nbsp;<span class="op" id="5634460">:=</span>&nbsp;<span class="ident" id="5634463"><a href="/gostd/archive/tar/reader.go.html#5634413">buf</a></span><span class="op" id="5634466">[</span><span class="op" id="5634467">:</span><span class="ident" id="5634468"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span><span class="op" id="5634477">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5634481">//&nbsp;readDecimal&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;to&nbsp;read&nbsp;a&nbsp;decimal&nbsp;integer&nbsp;from&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5634564">//&nbsp;while&nbsp;making&nbsp;sure&nbsp;to&nbsp;read&nbsp;from&nbsp;the&nbsp;file&nbsp;in&nbsp;blocks&nbsp;of&nbsp;size&nbsp;blockSize</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5634636">readDecimal</span>&nbsp;<span class="op" id="5634648">:=</span>&nbsp;<span class="keyword" id="5634651">func</span><span class="op" id="5634655">(</span><span class="op" id="5634656">)</span>&nbsp;<span class="op" id="5634658">(</span><span class="builtintype" id="5634659">int64</span><span class="op" id="5634664">,</span>&nbsp;<span class="builtintype" id="5634666">error</span><span class="op" id="5634671">)</span>&nbsp;<span class="op" id="5634673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5634677">//&nbsp;Look&nbsp;for&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5634699">nl</span>&nbsp;<span class="op" id="5634702">:=</span>&nbsp;<span class="ident" id="5634705"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5634710">.</span><span class="ident" id="5634711"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="5634720">(</span><span class="ident" id="5634721"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5634733">,</span>&nbsp;<span class="string" id="5634735">&#39;\n&#39;</span><span class="op" id="5634739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5634743">if</span>&nbsp;<span class="ident" id="5634746"><a href="/gostd/archive/tar/reader.go.html#5634699">nl</a></span>&nbsp;<span class="op" id="5634749">==</span>&nbsp;<span class="op" id="5634752">-</span><span class="num" id="5634753">1</span>&nbsp;<span class="op" id="5634755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5634760">if</span>&nbsp;<span class="builtinfunc" id="5634763">len</span><span class="op" id="5634766">(</span><span class="ident" id="5634767"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5634779">)</span>&nbsp;<span class="op" id="5634781">&gt;=</span>&nbsp;<span class="ident" id="5634784"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span>&nbsp;<span class="op" id="5634794">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5634800">//&nbsp;This&nbsp;is&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5634824">return</span>&nbsp;<span class="num" id="5634831">0</span><span class="op" id="5634832">,</span>&nbsp;<span class="ident" id="5634834"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5634847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5634852">oldLen</span>&nbsp;<span class="op" id="5634859">:=</span>&nbsp;<span class="builtinfunc" id="5634862">len</span><span class="op" id="5634865">(</span><span class="ident" id="5634866"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5634878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5634883">newLen</span>&nbsp;<span class="op" id="5634890">:=</span>&nbsp;<span class="ident" id="5634893"><a href="/gostd/archive/tar/reader.go.html#5634852">oldLen</a></span>&nbsp;<span class="op" id="5634900">+</span>&nbsp;<span class="ident" id="5634902"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5634915">if</span>&nbsp;<span class="builtinfunc" id="5634918">cap</span><span class="op" id="5634921">(</span><span class="ident" id="5634922"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5634934">)</span>&nbsp;<span class="op" id="5634936">&lt;</span>&nbsp;<span class="ident" id="5634938"><a href="/gostd/archive/tar/reader.go.html#5634883">newLen</a></span>&nbsp;<span class="op" id="5634945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5634951">//&nbsp;There&#39;s&nbsp;more&nbsp;header,&nbsp;but&nbsp;we&nbsp;need&nbsp;to&nbsp;make&nbsp;room&nbsp;for&nbsp;the&nbsp;next&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5635023">copy</span><span class="op" id="5635027">(</span><span class="ident" id="5635028"><a href="/gostd/archive/tar/reader.go.html#5634413">buf</a></span><span class="op" id="5635031">,</span>&nbsp;<span class="ident" id="5635033"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5635045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5635051"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span>&nbsp;<span class="op" id="5635064">=</span>&nbsp;<span class="ident" id="5635066"><a href="/gostd/archive/tar/reader.go.html#5634413">buf</a></span><span class="op" id="5635069">[</span><span class="op" id="5635070">:</span><span class="ident" id="5635071"><a href="/gostd/archive/tar/reader.go.html#5634883">newLen</a></span><span class="op" id="5635077">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5635082">}</span>&nbsp;<span class="keyword" id="5635084">else</span>&nbsp;<span class="op" id="5635089">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5635095">//&nbsp;There&#39;s&nbsp;more&nbsp;header,&nbsp;and&nbsp;we&nbsp;can&nbsp;just&nbsp;reslice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5635147"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span>&nbsp;<span class="op" id="5635160">=</span>&nbsp;<span class="ident" id="5635162"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5635174">[</span><span class="op" id="5635175">:</span><span class="ident" id="5635176"><a href="/gostd/archive/tar/reader.go.html#5634883">newLen</a></span><span class="op" id="5635182">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5635187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5635193">//&nbsp;Now&nbsp;that&nbsp;sparseHeader&nbsp;is&nbsp;large&nbsp;enough,&nbsp;read&nbsp;next&nbsp;block</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635254">if</span>&nbsp;<span class="ident" id="5635257">_</span><span class="op" id="5635258">,</span>&nbsp;<span class="ident" id="5635260">err</span>&nbsp;<span class="op" id="5635264">:=</span>&nbsp;<span class="ident" id="5635267"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5635269">.</span><span class="ident" id="5635270"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5635278">(</span><span class="ident" id="5635279"><a href="/gostd/archive/tar/reader.go.html#5634374">r</a></span><span class="op" id="5635280">,</span>&nbsp;<span class="ident" id="5635282"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5635294">[</span><span class="ident" id="5635295"><a href="/gostd/archive/tar/reader.go.html#5634852">oldLen</a></span><span class="op" id="5635301">:</span><span class="ident" id="5635302"><a href="/gostd/archive/tar/reader.go.html#5634883">newLen</a></span><span class="op" id="5635308">]</span><span class="op" id="5635309">)</span><span class="op" id="5635310">;</span>&nbsp;<span class="ident" id="5635312"><a href="/gostd/archive/tar/reader.go.html#5635260">err</a></span>&nbsp;<span class="op" id="5635316">!=</span>&nbsp;<span class="builtintype" id="5635319">nil</span>&nbsp;<span class="op" id="5635323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635329">return</span>&nbsp;<span class="num" id="5635336">0</span><span class="op" id="5635337">,</span>&nbsp;<span class="ident" id="5635339"><a href="/gostd/archive/tar/reader.go.html#5635260">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5635346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5635352">//&nbsp;Look&nbsp;for&nbsp;a&nbsp;newline&nbsp;in&nbsp;the&nbsp;new&nbsp;data</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5635393"><a href="/gostd/archive/tar/reader.go.html#5634699">nl</a></span>&nbsp;<span class="op" id="5635396">=</span>&nbsp;<span class="ident" id="5635398"><a href="/gostd/archive/tar/reader.go.html#5617923">bytes</a></span><span class="op" id="5635403">.</span><span class="ident" id="5635404"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="5635413">(</span><span class="ident" id="5635414"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5635426">[</span><span class="ident" id="5635427"><a href="/gostd/archive/tar/reader.go.html#5634852">oldLen</a></span><span class="op" id="5635433">:</span><span class="ident" id="5635434"><a href="/gostd/archive/tar/reader.go.html#5634883">newLen</a></span><span class="op" id="5635440">]</span><span class="op" id="5635441">,</span>&nbsp;<span class="string" id="5635443">&#39;\n&#39;</span><span class="op" id="5635447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635452">if</span>&nbsp;<span class="ident" id="5635455"><a href="/gostd/archive/tar/reader.go.html#5634699">nl</a></span>&nbsp;<span class="op" id="5635458">==</span>&nbsp;<span class="op" id="5635461">-</span><span class="num" id="5635462">1</span>&nbsp;<span class="op" id="5635464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5635470">//&nbsp;This&nbsp;is&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635494">return</span>&nbsp;<span class="num" id="5635501">0</span><span class="op" id="5635502">,</span>&nbsp;<span class="ident" id="5635504"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5635517">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5635522"><a href="/gostd/archive/tar/reader.go.html#5634699">nl</a></span>&nbsp;<span class="op" id="5635525">+=</span>&nbsp;<span class="ident" id="5635528"><a href="/gostd/archive/tar/reader.go.html#5634852">oldLen</a></span>&nbsp;<span class="comment" id="5635535">//&nbsp;We&nbsp;want&nbsp;the&nbsp;position&nbsp;from&nbsp;the&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5635580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5635584">//&nbsp;Now&nbsp;that&nbsp;we&#39;ve&nbsp;found&nbsp;a&nbsp;newline,&nbsp;read&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5635635">n</span><span class="op" id="5635636">,</span>&nbsp;<span class="ident" id="5635638">err</span>&nbsp;<span class="op" id="5635642">:=</span>&nbsp;<span class="ident" id="5635645"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5635652">.</span><span class="ident" id="5635653"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5635661">(</span><span class="builtintype" id="5635662">string</span><span class="op" id="5635668">(</span><span class="ident" id="5635669"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5635681">[</span><span class="op" id="5635682">:</span><span class="ident" id="5635683"><a href="/gostd/archive/tar/reader.go.html#5634699">nl</a></span><span class="op" id="5635685">]</span><span class="op" id="5635686">)</span><span class="op" id="5635687">,</span>&nbsp;<span class="num" id="5635689">10</span><span class="op" id="5635691">,</span>&nbsp;<span class="num" id="5635693">0</span><span class="op" id="5635694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635698">if</span>&nbsp;<span class="ident" id="5635701"><a href="/gostd/archive/tar/reader.go.html#5635638">err</a></span>&nbsp;<span class="op" id="5635705">!=</span>&nbsp;<span class="builtintype" id="5635708">nil</span>&nbsp;<span class="op" id="5635712">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635717">return</span>&nbsp;<span class="num" id="5635724">0</span><span class="op" id="5635725">,</span>&nbsp;<span class="ident" id="5635727"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5635739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5635744">//&nbsp;Update&nbsp;sparseHeader&nbsp;to&nbsp;consume&nbsp;this&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5635792"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span>&nbsp;<span class="op" id="5635805">=</span>&nbsp;<span class="ident" id="5635807"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5635819">[</span><span class="ident" id="5635820"><a href="/gostd/archive/tar/reader.go.html#5634699">nl</a></span><span class="op" id="5635822">+</span><span class="num" id="5635823">1</span><span class="op" id="5635824">:</span><span class="op" id="5635825">]</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635829">return</span>&nbsp;<span class="ident" id="5635836"><a href="/gostd/archive/tar/reader.go.html#5635635">n</a></span><span class="op" id="5635837">,</span>&nbsp;<span class="builtintype" id="5635839">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5635844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5635848">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635873">if</span>&nbsp;<span class="ident" id="5635876">_</span><span class="op" id="5635877">,</span>&nbsp;<span class="ident" id="5635879">err</span>&nbsp;<span class="op" id="5635883">:=</span>&nbsp;<span class="ident" id="5635886"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5635888">.</span><span class="ident" id="5635889"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5635897">(</span><span class="ident" id="5635898"><a href="/gostd/archive/tar/reader.go.html#5634374">r</a></span><span class="op" id="5635899">,</span>&nbsp;<span class="ident" id="5635901"><a href="/gostd/archive/tar/reader.go.html#5634447">sparseHeader</a></span><span class="op" id="5635913">)</span><span class="op" id="5635914">;</span>&nbsp;<span class="ident" id="5635916"><a href="/gostd/archive/tar/reader.go.html#5635879">err</a></span>&nbsp;<span class="op" id="5635920">!=</span>&nbsp;<span class="builtintype" id="5635923">nil</span>&nbsp;<span class="op" id="5635927">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5635931">return</span>&nbsp;<span class="builtintype" id="5635938">nil</span><span class="op" id="5635941">,</span>&nbsp;<span class="ident" id="5635943"><a href="/gostd/archive/tar/reader.go.html#5635879">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5635948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5635952">//&nbsp;The&nbsp;first&nbsp;line&nbsp;contains&nbsp;the&nbsp;number&nbsp;of&nbsp;entries</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5636002">numEntries</span><span class="op" id="5636012">,</span>&nbsp;<span class="ident" id="5636014">err</span>&nbsp;<span class="op" id="5636018">:=</span>&nbsp;<span class="ident" id="5636021"><a href="/gostd/archive/tar/reader.go.html#5634636">readDecimal</a></span><span class="op" id="5636032">(</span><span class="op" id="5636033">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636036">if</span>&nbsp;<span class="ident" id="5636039"><a href="/gostd/archive/tar/reader.go.html#5636014">err</a></span>&nbsp;<span class="op" id="5636043">!=</span>&nbsp;<span class="builtintype" id="5636046">nil</span>&nbsp;<span class="op" id="5636050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636054">return</span>&nbsp;<span class="builtintype" id="5636061">nil</span><span class="op" id="5636064">,</span>&nbsp;<span class="ident" id="5636066"><a href="/gostd/archive/tar/reader.go.html#5636014">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5636071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5636075">//&nbsp;Read&nbsp;all&nbsp;the&nbsp;entries</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5636100">sp</span>&nbsp;<span class="op" id="5636103">:=</span>&nbsp;<span class="builtinfunc" id="5636106">make</span><span class="op" id="5636110">(</span><span class="op" id="5636111">[</span><span class="op" id="5636112">]</span><span class="ident" id="5636113"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5636124">,</span>&nbsp;<span class="num" id="5636126">0</span><span class="op" id="5636127">,</span>&nbsp;<span class="ident" id="5636129"><a href="/gostd/archive/tar/reader.go.html#5636002">numEntries</a></span><span class="op" id="5636139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636142">for</span>&nbsp;<span class="ident" id="5636146">i</span>&nbsp;<span class="op" id="5636148">:=</span>&nbsp;<span class="builtintype" id="5636151">int64</span><span class="op" id="5636156">(</span><span class="num" id="5636157">0</span><span class="op" id="5636158">)</span><span class="op" id="5636159">;</span>&nbsp;<span class="ident" id="5636161"><a href="/gostd/archive/tar/reader.go.html#5636146">i</a></span>&nbsp;<span class="op" id="5636163">&lt;</span>&nbsp;<span class="ident" id="5636165"><a href="/gostd/archive/tar/reader.go.html#5636002">numEntries</a></span><span class="op" id="5636175">;</span>&nbsp;<span class="ident" id="5636177"><a href="/gostd/archive/tar/reader.go.html#5636146">i</a></span><span class="op" id="5636178">++</span>&nbsp;<span class="op" id="5636181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5636185">//&nbsp;Read&nbsp;the&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5636206">offset</span><span class="op" id="5636212">,</span>&nbsp;<span class="ident" id="5636214">err</span>&nbsp;<span class="op" id="5636218">:=</span>&nbsp;<span class="ident" id="5636221"><a href="/gostd/archive/tar/reader.go.html#5634636">readDecimal</a></span><span class="op" id="5636232">(</span><span class="op" id="5636233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636237">if</span>&nbsp;<span class="ident" id="5636240"><a href="/gostd/archive/tar/reader.go.html#5636214">err</a></span>&nbsp;<span class="op" id="5636244">!=</span>&nbsp;<span class="builtintype" id="5636247">nil</span>&nbsp;<span class="op" id="5636251">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636256">return</span>&nbsp;<span class="builtintype" id="5636263">nil</span><span class="op" id="5636266">,</span>&nbsp;<span class="ident" id="5636268"><a href="/gostd/archive/tar/reader.go.html#5636214">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5636274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5636278">//&nbsp;Read&nbsp;numBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5636297">numBytes</span><span class="op" id="5636305">,</span>&nbsp;<span class="ident" id="5636307"><a href="/gostd/archive/tar/reader.go.html#5636214">err</a></span>&nbsp;<span class="op" id="5636311">:=</span>&nbsp;<span class="ident" id="5636314"><a href="/gostd/archive/tar/reader.go.html#5634636">readDecimal</a></span><span class="op" id="5636325">(</span><span class="op" id="5636326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636330">if</span>&nbsp;<span class="ident" id="5636333"><a href="/gostd/archive/tar/reader.go.html#5636214">err</a></span>&nbsp;<span class="op" id="5636337">!=</span>&nbsp;<span class="builtintype" id="5636340">nil</span>&nbsp;<span class="op" id="5636344">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636349">return</span>&nbsp;<span class="builtintype" id="5636356">nil</span><span class="op" id="5636359">,</span>&nbsp;<span class="ident" id="5636361"><a href="/gostd/archive/tar/reader.go.html#5636214">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5636367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5636372"><a href="/gostd/archive/tar/reader.go.html#5636100">sp</a></span>&nbsp;<span class="op" id="5636375">=</span>&nbsp;<span class="builtinfunc" id="5636377">append</span><span class="op" id="5636383">(</span><span class="ident" id="5636384"><a href="/gostd/archive/tar/reader.go.html#5636100">sp</a></span><span class="op" id="5636386">,</span>&nbsp;<span class="ident" id="5636388"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5636399">{</span><span class="ident" id="5636400"><a href="/gostd/archive/tar/reader.go.html#5632410">offset</a></span><span class="op" id="5636406">:</span>&nbsp;<span class="ident" id="5636408"><a href="/gostd/archive/tar/reader.go.html#5636206">offset</a></span><span class="op" id="5636414">,</span>&nbsp;<span class="ident" id="5636416"><a href="/gostd/archive/tar/reader.go.html#5632426">numBytes</a></span><span class="op" id="5636424">:</span>&nbsp;<span class="ident" id="5636426"><a href="/gostd/archive/tar/reader.go.html#5636297">numBytes</a></span><span class="op" id="5636434">}</span><span class="op" id="5636435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5636438">}</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636442">return</span>&nbsp;<span class="ident" id="5636449"><a href="/gostd/archive/tar/reader.go.html#5636100">sp</a></span><span class="op" id="5636451">,</span>&nbsp;<span class="builtintype" id="5636453">nil</span><br>
<span class="lineno"></span><span class="op" id="5636457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5636460">//&nbsp;readGNUSparseMap0x1&nbsp;reads&nbsp;the&nbsp;sparse&nbsp;map&nbsp;as&nbsp;stored&nbsp;in&nbsp;GNU&#39;s&nbsp;PAX&nbsp;sparse&nbsp;format&nbsp;version&nbsp;0.1.</span><br>
<span class="lineno">680</span><span class="comment" id="5636554">//&nbsp;The&nbsp;sparse&nbsp;map&nbsp;is&nbsp;stored&nbsp;in&nbsp;the&nbsp;PAX&nbsp;headers.</span><br>
<span class="lineno"></span><span class="keyword" id="5636602">func</span>&nbsp;<span class="ident" id="5636607">readGNUSparseMap0x1</span><span class="op" id="5636626">(</span><span class="ident" id="5636627">headers</span>&nbsp;<span class="keyword" id="5636635">map</span><span class="op" id="5636638">[</span><span class="builtintype" id="5636639">string</span><span class="op" id="5636645">]</span><span class="builtintype" id="5636646">string</span><span class="op" id="5636652">)</span>&nbsp;<span class="op" id="5636654">(</span><span class="op" id="5636655">[</span><span class="op" id="5636656">]</span><span class="ident" id="5636657"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5636668">,</span>&nbsp;<span class="builtintype" id="5636670">error</span><span class="op" id="5636675">)</span>&nbsp;<span class="op" id="5636677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5636680">//&nbsp;Get&nbsp;number&nbsp;of&nbsp;entries</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5636706">numEntriesStr</span><span class="op" id="5636719">,</span>&nbsp;<span class="ident" id="5636721">ok</span>&nbsp;<span class="op" id="5636724">:=</span>&nbsp;<span class="ident" id="5636727"><a href="/gostd/archive/tar/reader.go.html#5636627">headers</a></span><span class="op" id="5636734">[</span><span class="ident" id="5636735"><a href="/gostd/archive/tar/reader.go.html#5619439">paxGNUSparseNumBlocks</a></span><span class="op" id="5636756">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636759">if</span>&nbsp;<span class="op" id="5636762">!</span><span class="ident" id="5636763"><a href="/gostd/archive/tar/reader.go.html#5636721">ok</a></span>&nbsp;<span class="op" id="5636766">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636770">return</span>&nbsp;<span class="builtintype" id="5636777">nil</span><span class="op" id="5636780">,</span>&nbsp;<span class="ident" id="5636782"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5636793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5636796">numEntries</span><span class="op" id="5636806">,</span>&nbsp;<span class="ident" id="5636808">err</span>&nbsp;<span class="op" id="5636812">:=</span>&nbsp;<span class="ident" id="5636815"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5636822">.</span><span class="ident" id="5636823"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5636831">(</span><span class="ident" id="5636832"><a href="/gostd/archive/tar/reader.go.html#5636706">numEntriesStr</a></span><span class="op" id="5636845">,</span>&nbsp;<span class="num" id="5636847">10</span><span class="op" id="5636849">,</span>&nbsp;<span class="num" id="5636851">0</span><span class="op" id="5636852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636855">if</span>&nbsp;<span class="ident" id="5636858"><a href="/gostd/archive/tar/reader.go.html#5636808">err</a></span>&nbsp;<span class="op" id="5636862">!=</span>&nbsp;<span class="builtintype" id="5636865">nil</span>&nbsp;<span class="op" id="5636869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5636873">return</span>&nbsp;<span class="builtintype" id="5636880">nil</span><span class="op" id="5636883">,</span>&nbsp;<span class="ident" id="5636885"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5636896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5636900">sparseMap</span>&nbsp;<span class="op" id="5636910">:=</span>&nbsp;<span class="ident" id="5636913"><a href="/gostd/archive/tar/reader.go.html#5617978">strings</a></span><span class="op" id="5636920">.</span><span class="ident" id="5636921"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="5636926">(</span><span class="ident" id="5636927"><a href="/gostd/archive/tar/reader.go.html#5636627">headers</a></span><span class="op" id="5636934">[</span><span class="ident" id="5636935"><a href="/gostd/archive/tar/reader.go.html#5619579">paxGNUSparseMap</a></span><span class="op" id="5636950">]</span><span class="op" id="5636951">,</span>&nbsp;<span class="string" id="5636953">&#34;,&#34;</span><span class="op" id="5636956">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5636960">//&nbsp;There&nbsp;should&nbsp;be&nbsp;two&nbsp;numbers&nbsp;in&nbsp;sparseMap&nbsp;for&nbsp;each&nbsp;entry</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637020">if</span>&nbsp;<span class="builtintype" id="5637023">int64</span><span class="op" id="5637028">(</span><span class="builtinfunc" id="5637029">len</span><span class="op" id="5637032">(</span><span class="ident" id="5637033"><a href="/gostd/archive/tar/reader.go.html#5636900">sparseMap</a></span><span class="op" id="5637042">)</span><span class="op" id="5637043">)</span>&nbsp;<span class="op" id="5637045">!=</span>&nbsp;<span class="num" id="5637048">2</span><span class="op" id="5637049">*</span><span class="ident" id="5637050"><a href="/gostd/archive/tar/reader.go.html#5636796">numEntries</a></span>&nbsp;<span class="op" id="5637061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637065">return</span>&nbsp;<span class="builtintype" id="5637072">nil</span><span class="op" id="5637075">,</span>&nbsp;<span class="ident" id="5637077"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5637088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5637092">//&nbsp;Loop&nbsp;through&nbsp;the&nbsp;entries&nbsp;in&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5637139">sp</span>&nbsp;<span class="op" id="5637142">:=</span>&nbsp;<span class="builtinfunc" id="5637145">make</span><span class="op" id="5637149">(</span><span class="op" id="5637150">[</span><span class="op" id="5637151">]</span><span class="ident" id="5637152"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5637163">,</span>&nbsp;<span class="num" id="5637165">0</span><span class="op" id="5637166">,</span>&nbsp;<span class="ident" id="5637168"><a href="/gostd/archive/tar/reader.go.html#5636796">numEntries</a></span><span class="op" id="5637178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637181">for</span>&nbsp;<span class="ident" id="5637185">i</span>&nbsp;<span class="op" id="5637187">:=</span>&nbsp;<span class="builtintype" id="5637190">int64</span><span class="op" id="5637195">(</span><span class="num" id="5637196">0</span><span class="op" id="5637197">)</span><span class="op" id="5637198">;</span>&nbsp;<span class="ident" id="5637200"><a href="/gostd/archive/tar/reader.go.html#5637185">i</a></span>&nbsp;<span class="op" id="5637202">&lt;</span>&nbsp;<span class="ident" id="5637204"><a href="/gostd/archive/tar/reader.go.html#5636796">numEntries</a></span><span class="op" id="5637214">;</span>&nbsp;<span class="ident" id="5637216"><a href="/gostd/archive/tar/reader.go.html#5637185">i</a></span><span class="op" id="5637217">++</span>&nbsp;<span class="op" id="5637220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5637224">offset</span><span class="op" id="5637230">,</span>&nbsp;<span class="ident" id="5637232">err</span>&nbsp;<span class="op" id="5637236">:=</span>&nbsp;<span class="ident" id="5637239"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5637246">.</span><span class="ident" id="5637247"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5637255">(</span><span class="ident" id="5637256"><a href="/gostd/archive/tar/reader.go.html#5636900">sparseMap</a></span><span class="op" id="5637265">[</span><span class="num" id="5637266">2</span><span class="op" id="5637267">*</span><span class="ident" id="5637268"><a href="/gostd/archive/tar/reader.go.html#5637185">i</a></span><span class="op" id="5637269">]</span><span class="op" id="5637270">,</span>&nbsp;<span class="num" id="5637272">10</span><span class="op" id="5637274">,</span>&nbsp;<span class="num" id="5637276">0</span><span class="op" id="5637277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637281">if</span>&nbsp;<span class="ident" id="5637284"><a href="/gostd/archive/tar/reader.go.html#5637232">err</a></span>&nbsp;<span class="op" id="5637288">!=</span>&nbsp;<span class="builtintype" id="5637291">nil</span>&nbsp;<span class="op" id="5637295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637300">return</span>&nbsp;<span class="builtintype" id="5637307">nil</span><span class="op" id="5637310">,</span>&nbsp;<span class="ident" id="5637312"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5637324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5637328">numBytes</span><span class="op" id="5637336">,</span>&nbsp;<span class="ident" id="5637338"><a href="/gostd/archive/tar/reader.go.html#5637232">err</a></span>&nbsp;<span class="op" id="5637342">:=</span>&nbsp;<span class="ident" id="5637345"><a href="/gostd/archive/tar/reader.go.html#5617967">strconv</a></span><span class="op" id="5637352">.</span><span class="ident" id="5637353"><a href="/gostd/strconv/atoi.go.html#2356133">ParseInt</a></span><span class="op" id="5637361">(</span><span class="ident" id="5637362"><a href="/gostd/archive/tar/reader.go.html#5636900">sparseMap</a></span><span class="op" id="5637371">[</span><span class="num" id="5637372">2</span><span class="op" id="5637373">*</span><span class="ident" id="5637374"><a href="/gostd/archive/tar/reader.go.html#5637185">i</a></span><span class="op" id="5637375">+</span><span class="num" id="5637376">1</span><span class="op" id="5637377">]</span><span class="op" id="5637378">,</span>&nbsp;<span class="num" id="5637380">10</span><span class="op" id="5637382">,</span>&nbsp;<span class="num" id="5637384">0</span><span class="op" id="5637385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637389">if</span>&nbsp;<span class="ident" id="5637392"><a href="/gostd/archive/tar/reader.go.html#5637232">err</a></span>&nbsp;<span class="op" id="5637396">!=</span>&nbsp;<span class="builtintype" id="5637399">nil</span>&nbsp;<span class="op" id="5637403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637408">return</span>&nbsp;<span class="builtintype" id="5637415">nil</span><span class="op" id="5637418">,</span>&nbsp;<span class="ident" id="5637420"><a href="/gostd/archive/tar/reader.go.html#5618006">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5637432">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5637436"><a href="/gostd/archive/tar/reader.go.html#5637139">sp</a></span>&nbsp;<span class="op" id="5637439">=</span>&nbsp;<span class="builtinfunc" id="5637441">append</span><span class="op" id="5637447">(</span><span class="ident" id="5637448"><a href="/gostd/archive/tar/reader.go.html#5637139">sp</a></span><span class="op" id="5637450">,</span>&nbsp;<span class="ident" id="5637452"><a href="/gostd/archive/tar/reader.go.html#5632388">sparseEntry</a></span><span class="op" id="5637463">{</span><span class="ident" id="5637464"><a href="/gostd/archive/tar/reader.go.html#5632410">offset</a></span><span class="op" id="5637470">:</span>&nbsp;<span class="ident" id="5637472"><a href="/gostd/archive/tar/reader.go.html#5637224">offset</a></span><span class="op" id="5637478">,</span>&nbsp;<span class="ident" id="5637480"><a href="/gostd/archive/tar/reader.go.html#5632426">numBytes</a></span><span class="op" id="5637488">:</span>&nbsp;<span class="ident" id="5637490"><a href="/gostd/archive/tar/reader.go.html#5637328">numBytes</a></span><span class="op" id="5637498">}</span><span class="op" id="5637499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5637502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637506">return</span>&nbsp;<span class="ident" id="5637513"><a href="/gostd/archive/tar/reader.go.html#5637139">sp</a></span><span class="op" id="5637515">,</span>&nbsp;<span class="builtintype" id="5637517">nil</span><br>
<span class="lineno"></span><span class="op" id="5637521">}</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span><span class="comment" id="5637524">//&nbsp;numBytes&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;left&nbsp;to&nbsp;read&nbsp;in&nbsp;the&nbsp;current&nbsp;file&#39;s&nbsp;entry</span><br>
<span class="lineno"></span><span class="comment" id="5637605">//&nbsp;in&nbsp;the&nbsp;tar&nbsp;archive,&nbsp;or&nbsp;0&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;current&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5637662">func</span>&nbsp;<span class="op" id="5637667">(</span><span class="ident" id="5637668">tr</span>&nbsp;<span class="op" id="5637671">*</span><span class="ident" id="5637672"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5637678">)</span>&nbsp;<span class="ident" id="5637680">numBytes</span><span class="op" id="5637688">(</span><span class="op" id="5637689">)</span>&nbsp;<span class="builtintype" id="5637691">int64</span>&nbsp;<span class="op" id="5637697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637700">if</span>&nbsp;<span class="ident" id="5637703"><a href="/gostd/archive/tar/reader.go.html#5637668">tr</a></span><span class="op" id="5637705">.</span><span class="ident" id="5637706"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span>&nbsp;<span class="op" id="5637711">==</span>&nbsp;<span class="builtintype" id="5637714">nil</span>&nbsp;<span class="op" id="5637718">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5637722">//&nbsp;No&nbsp;current&nbsp;file,&nbsp;so&nbsp;no&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637756">return</span>&nbsp;<span class="num" id="5637763">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5637766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5637769">return</span>&nbsp;<span class="ident" id="5637776"><a href="/gostd/archive/tar/reader.go.html#5637668">tr</a></span><span class="op" id="5637778">.</span><span class="ident" id="5637779"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span><span class="op" id="5637783">.</span><span class="ident" id="5637784"><a href="/gostd/archive/tar/reader.go.html#5618810">numBytes</a></span><span class="op" id="5637792">(</span><span class="op" id="5637793">)</span><br>
<span class="lineno"></span><span class="op" id="5637795">}</span><br>
<span class="lineno">725</span><br>
<span class="lineno"></span><span class="comment" id="5637798">//&nbsp;Read&nbsp;reads&nbsp;from&nbsp;the&nbsp;current&nbsp;entry&nbsp;in&nbsp;the&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno"></span><span class="comment" id="5637855">//&nbsp;It&nbsp;returns&nbsp;0,&nbsp;io.EOF&nbsp;when&nbsp;it&nbsp;reaches&nbsp;the&nbsp;end&nbsp;of&nbsp;that&nbsp;entry,</span><br>
<span class="lineno"></span><span class="comment" id="5637918">//&nbsp;until&nbsp;Next&nbsp;is&nbsp;called&nbsp;to&nbsp;advance&nbsp;to&nbsp;the&nbsp;next&nbsp;entry.</span><br>
<span class="lineno"></span><span class="keyword" id="5637972">func</span>&nbsp;<span class="op" id="5637977">(</span><span class="ident" id="5637978">tr</span>&nbsp;<span class="op" id="5637981">*</span><span class="ident" id="5637982"><a href="/gostd/archive/tar/reader.go.html#5618383">Reader</a></span><span class="op" id="5637988">)</span>&nbsp;<span class="ident" id="5637990">Read</span><span class="op" id="5637994">(</span><span class="ident" id="5637995">b</span>&nbsp;<span class="op" id="5637997">[</span><span class="op" id="5637998">]</span><span class="builtintype" id="5637999">byte</span><span class="op" id="5638003">)</span>&nbsp;<span class="op" id="5638005">(</span><span class="ident" id="5638006">n</span>&nbsp;<span class="builtintype" id="5638008">int</span><span class="op" id="5638011">,</span>&nbsp;<span class="ident" id="5638013">err</span>&nbsp;<span class="builtintype" id="5638017">error</span><span class="op" id="5638022">)</span>&nbsp;<span class="op" id="5638024">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638027">if</span>&nbsp;<span class="ident" id="5638030"><a href="/gostd/archive/tar/reader.go.html#5637978">tr</a></span><span class="op" id="5638032">.</span><span class="ident" id="5638033"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span>&nbsp;<span class="op" id="5638038">==</span>&nbsp;<span class="builtintype" id="5638041">nil</span>&nbsp;<span class="op" id="5638045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638049">return</span>&nbsp;<span class="num" id="5638056">0</span><span class="op" id="5638057">,</span>&nbsp;<span class="ident" id="5638059"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5638061">.</span><span class="ident" id="5638062"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5638067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638070"><a href="/gostd/archive/tar/reader.go.html#5638006">n</a></span><span class="op" id="5638071">,</span>&nbsp;<span class="ident" id="5638073"><a href="/gostd/archive/tar/reader.go.html#5638013">err</a></span>&nbsp;<span class="op" id="5638077">=</span>&nbsp;<span class="ident" id="5638079"><a href="/gostd/archive/tar/reader.go.html#5637978">tr</a></span><span class="op" id="5638081">.</span><span class="ident" id="5638082"><a href="/gostd/archive/tar/reader.go.html#5618515">curr</a></span><span class="op" id="5638086">.</span><span class="ident" id="5638087"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="5638091">(</span><span class="ident" id="5638092"><a href="/gostd/archive/tar/reader.go.html#5637995">b</a></span><span class="op" id="5638093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638096">if</span>&nbsp;<span class="ident" id="5638099"><a href="/gostd/archive/tar/reader.go.html#5638013">err</a></span>&nbsp;<span class="op" id="5638103">!=</span>&nbsp;<span class="builtintype" id="5638106">nil</span>&nbsp;<span class="op" id="5638110">&amp;&amp;</span>&nbsp;<span class="ident" id="5638113"><a href="/gostd/archive/tar/reader.go.html#5638013">err</a></span>&nbsp;<span class="op" id="5638117">!=</span>&nbsp;<span class="ident" id="5638120"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5638122">.</span><span class="ident" id="5638123"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="5638127">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638131"><a href="/gostd/archive/tar/reader.go.html#5637978">tr</a></span><span class="op" id="5638133">.</span><span class="ident" id="5638134"><a href="/gostd/archive/tar/reader.go.html#5618419">err</a></span>&nbsp;<span class="op" id="5638138">=</span>&nbsp;<span class="ident" id="5638140"><a href="/gostd/archive/tar/reader.go.html#5638013">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5638145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638148">return</span><br>
<span class="lineno"></span><span class="op" id="5638155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="5638158">func</span>&nbsp;<span class="op" id="5638163">(</span><span class="ident" id="5638164">rfr</span>&nbsp;<span class="op" id="5638168">*</span><span class="ident" id="5638169"><a href="/gostd/archive/tar/reader.go.html#5618916">regFileReader</a></span><span class="op" id="5638182">)</span>&nbsp;<span class="ident" id="5638184">Read</span><span class="op" id="5638188">(</span><span class="ident" id="5638189">b</span>&nbsp;<span class="op" id="5638191">[</span><span class="op" id="5638192">]</span><span class="builtintype" id="5638193">byte</span><span class="op" id="5638197">)</span>&nbsp;<span class="op" id="5638199">(</span><span class="ident" id="5638200">n</span>&nbsp;<span class="builtintype" id="5638202">int</span><span class="op" id="5638205">,</span>&nbsp;<span class="ident" id="5638207">err</span>&nbsp;<span class="builtintype" id="5638211">error</span><span class="op" id="5638216">)</span>&nbsp;<span class="op" id="5638218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638221">if</span>&nbsp;<span class="ident" id="5638224"><a href="/gostd/archive/tar/reader.go.html#5638164">rfr</a></span><span class="op" id="5638227">.</span><span class="ident" id="5638228"><a href="/gostd/archive/tar/reader.go.html#5618975">nb</a></span>&nbsp;<span class="op" id="5638231">==</span>&nbsp;<span class="num" id="5638234">0</span>&nbsp;<span class="op" id="5638236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5638240">//&nbsp;file&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638259">return</span>&nbsp;<span class="num" id="5638266">0</span><span class="op" id="5638267">,</span>&nbsp;<span class="ident" id="5638269"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5638271">.</span><span class="ident" id="5638272"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5638277">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638280">if</span>&nbsp;<span class="builtintype" id="5638283">int64</span><span class="op" id="5638288">(</span><span class="builtinfunc" id="5638289">len</span><span class="op" id="5638292">(</span><span class="ident" id="5638293"><a href="/gostd/archive/tar/reader.go.html#5638189">b</a></span><span class="op" id="5638294">)</span><span class="op" id="5638295">)</span>&nbsp;<span class="op" id="5638297">&gt;</span>&nbsp;<span class="ident" id="5638299"><a href="/gostd/archive/tar/reader.go.html#5638164">rfr</a></span><span class="op" id="5638302">.</span><span class="ident" id="5638303"><a href="/gostd/archive/tar/reader.go.html#5618975">nb</a></span>&nbsp;<span class="op" id="5638306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638310"><a href="/gostd/archive/tar/reader.go.html#5638189">b</a></span>&nbsp;<span class="op" id="5638312">=</span>&nbsp;<span class="ident" id="5638314"><a href="/gostd/archive/tar/reader.go.html#5638189">b</a></span><span class="op" id="5638315">[</span><span class="num" id="5638316">0</span><span class="op" id="5638317">:</span><span class="ident" id="5638318"><a href="/gostd/archive/tar/reader.go.html#5638164">rfr</a></span><span class="op" id="5638321">.</span><span class="ident" id="5638322"><a href="/gostd/archive/tar/reader.go.html#5618975">nb</a></span><span class="op" id="5638324">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5638327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638330"><a href="/gostd/archive/tar/reader.go.html#5638200">n</a></span><span class="op" id="5638331">,</span>&nbsp;<span class="ident" id="5638333"><a href="/gostd/archive/tar/reader.go.html#5638207">err</a></span>&nbsp;<span class="op" id="5638337">=</span>&nbsp;<span class="ident" id="5638339"><a href="/gostd/archive/tar/reader.go.html#5638164">rfr</a></span><span class="op" id="5638342">.</span><span class="ident" id="5638343"><a href="/gostd/archive/tar/reader.go.html#5618940">r</a></span><span class="op" id="5638344">.</span><span class="ident" id="5638345"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="5638349">(</span><span class="ident" id="5638350"><a href="/gostd/archive/tar/reader.go.html#5638189">b</a></span><span class="op" id="5638351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638354"><a href="/gostd/archive/tar/reader.go.html#5638164">rfr</a></span><span class="op" id="5638357">.</span><span class="ident" id="5638358"><a href="/gostd/archive/tar/reader.go.html#5618975">nb</a></span>&nbsp;<span class="op" id="5638361">-=</span>&nbsp;<span class="builtintype" id="5638364">int64</span><span class="op" id="5638369">(</span><span class="ident" id="5638370"><a href="/gostd/archive/tar/reader.go.html#5638200">n</a></span><span class="op" id="5638371">)</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638375">if</span>&nbsp;<span class="ident" id="5638378"><a href="/gostd/archive/tar/reader.go.html#5638207">err</a></span>&nbsp;<span class="op" id="5638382">==</span>&nbsp;<span class="ident" id="5638385"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5638387">.</span><span class="ident" id="5638388"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="5638392">&amp;&amp;</span>&nbsp;<span class="ident" id="5638395"><a href="/gostd/archive/tar/reader.go.html#5638164">rfr</a></span><span class="op" id="5638398">.</span><span class="ident" id="5638399"><a href="/gostd/archive/tar/reader.go.html#5618975">nb</a></span>&nbsp;<span class="op" id="5638402">&gt;</span>&nbsp;<span class="num" id="5638404">0</span>&nbsp;<span class="op" id="5638406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638410"><a href="/gostd/archive/tar/reader.go.html#5638207">err</a></span>&nbsp;<span class="op" id="5638414">=</span>&nbsp;<span class="ident" id="5638416"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5638418">.</span><span class="ident" id="5638419"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5638437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638440">return</span><br>
<span class="lineno">755</span><span class="op" id="5638447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5638450">//&nbsp;numBytes&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;left&nbsp;to&nbsp;read&nbsp;in&nbsp;the&nbsp;file&#39;s&nbsp;data&nbsp;in&nbsp;the&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno"></span><span class="keyword" id="5638542">func</span>&nbsp;<span class="op" id="5638547">(</span><span class="ident" id="5638548">rfr</span>&nbsp;<span class="op" id="5638552">*</span><span class="ident" id="5638553"><a href="/gostd/archive/tar/reader.go.html#5618916">regFileReader</a></span><span class="op" id="5638566">)</span>&nbsp;<span class="ident" id="5638568">numBytes</span><span class="op" id="5638576">(</span><span class="op" id="5638577">)</span>&nbsp;<span class="builtintype" id="5638579">int64</span>&nbsp;<span class="op" id="5638585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638588">return</span>&nbsp;<span class="ident" id="5638595"><a href="/gostd/archive/tar/reader.go.html#5638548">rfr</a></span><span class="op" id="5638598">.</span><span class="ident" id="5638599"><a href="/gostd/archive/tar/reader.go.html#5618975">nb</a></span><br>
<span class="lineno">760</span><span class="op" id="5638602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5638605">//&nbsp;readHole&nbsp;reads&nbsp;a&nbsp;sparse&nbsp;file&nbsp;hole&nbsp;ending&nbsp;at&nbsp;offset&nbsp;toOffset</span><br>
<span class="lineno"></span><span class="keyword" id="5638668">func</span>&nbsp;<span class="op" id="5638673">(</span><span class="ident" id="5638674">sfr</span>&nbsp;<span class="op" id="5638678">*</span><span class="ident" id="5638679"><a href="/gostd/archive/tar/reader.go.html#5619136">sparseFileReader</a></span><span class="op" id="5638695">)</span>&nbsp;<span class="ident" id="5638697">readHole</span><span class="op" id="5638705">(</span><span class="ident" id="5638706">b</span>&nbsp;<span class="op" id="5638708">[</span><span class="op" id="5638709">]</span><span class="builtintype" id="5638710">byte</span><span class="op" id="5638714">,</span>&nbsp;<span class="ident" id="5638716">toOffset</span>&nbsp;<span class="builtintype" id="5638725">int64</span><span class="op" id="5638730">)</span>&nbsp;<span class="builtintype" id="5638732">int</span>&nbsp;<span class="op" id="5638736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638739">n64</span>&nbsp;<span class="op" id="5638743">:=</span>&nbsp;<span class="ident" id="5638746"><a href="/gostd/archive/tar/reader.go.html#5638716">toOffset</a></span>&nbsp;<span class="op" id="5638755">-</span>&nbsp;<span class="ident" id="5638757"><a href="/gostd/archive/tar/reader.go.html#5638674">sfr</a></span><span class="op" id="5638760">.</span><span class="ident" id="5638761"><a href="/gostd/archive/tar/reader.go.html#5619272">pos</a></span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638766">if</span>&nbsp;<span class="ident" id="5638769"><a href="/gostd/archive/tar/reader.go.html#5638739">n64</a></span>&nbsp;<span class="op" id="5638773">&gt;</span>&nbsp;<span class="builtintype" id="5638775">int64</span><span class="op" id="5638780">(</span><span class="builtinfunc" id="5638781">len</span><span class="op" id="5638784">(</span><span class="ident" id="5638785"><a href="/gostd/archive/tar/reader.go.html#5638706">b</a></span><span class="op" id="5638786">)</span><span class="op" id="5638787">)</span>&nbsp;<span class="op" id="5638789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638793"><a href="/gostd/archive/tar/reader.go.html#5638739">n64</a></span>&nbsp;<span class="op" id="5638797">=</span>&nbsp;<span class="builtintype" id="5638799">int64</span><span class="op" id="5638804">(</span><span class="builtinfunc" id="5638805">len</span><span class="op" id="5638808">(</span><span class="ident" id="5638809"><a href="/gostd/archive/tar/reader.go.html#5638706">b</a></span><span class="op" id="5638810">)</span><span class="op" id="5638811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5638814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638817">n</span>&nbsp;<span class="op" id="5638819">:=</span>&nbsp;<span class="builtintype" id="5638822">int</span><span class="op" id="5638825">(</span><span class="ident" id="5638826"><a href="/gostd/archive/tar/reader.go.html#5638739">n64</a></span><span class="op" id="5638829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638832">for</span>&nbsp;<span class="ident" id="5638836">i</span>&nbsp;<span class="op" id="5638838">:=</span>&nbsp;<span class="num" id="5638841">0</span><span class="op" id="5638842">;</span>&nbsp;<span class="ident" id="5638844"><a href="/gostd/archive/tar/reader.go.html#5638836">i</a></span>&nbsp;<span class="op" id="5638846">&lt;</span>&nbsp;<span class="ident" id="5638848"><a href="/gostd/archive/tar/reader.go.html#5638817">n</a></span><span class="op" id="5638849">;</span>&nbsp;<span class="ident" id="5638851"><a href="/gostd/archive/tar/reader.go.html#5638836">i</a></span><span class="op" id="5638852">++</span>&nbsp;<span class="op" id="5638855">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638859"><a href="/gostd/archive/tar/reader.go.html#5638706">b</a></span><span class="op" id="5638860">[</span><span class="ident" id="5638861"><a href="/gostd/archive/tar/reader.go.html#5638836">i</a></span><span class="op" id="5638862">]</span>&nbsp;<span class="op" id="5638864">=</span>&nbsp;<span class="num" id="5638866">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5638869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5638872"><a href="/gostd/archive/tar/reader.go.html#5638674">sfr</a></span><span class="op" id="5638875">.</span><span class="ident" id="5638876"><a href="/gostd/archive/tar/reader.go.html#5619272">pos</a></span>&nbsp;<span class="op" id="5638880">+=</span>&nbsp;<span class="ident" id="5638883"><a href="/gostd/archive/tar/reader.go.html#5638739">n64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5638888">return</span>&nbsp;<span class="ident" id="5638895"><a href="/gostd/archive/tar/reader.go.html#5638817">n</a></span><br>
<span class="lineno"></span><span class="op" id="5638897">}</span><br>
<span class="lineno">775</span><br>
<span class="lineno"></span><span class="comment" id="5638900">//&nbsp;Read&nbsp;reads&nbsp;the&nbsp;sparse&nbsp;file&nbsp;data&nbsp;in&nbsp;expanded&nbsp;form.</span><br>
<span class="lineno"></span><span class="keyword" id="5638953">func</span>&nbsp;<span class="op" id="5638958">(</span><span class="ident" id="5638959">sfr</span>&nbsp;<span class="op" id="5638963">*</span><span class="ident" id="5638964"><a href="/gostd/archive/tar/reader.go.html#5619136">sparseFileReader</a></span><span class="op" id="5638980">)</span>&nbsp;<span class="ident" id="5638982">Read</span><span class="op" id="5638986">(</span><span class="ident" id="5638987">b</span>&nbsp;<span class="op" id="5638989">[</span><span class="op" id="5638990">]</span><span class="builtintype" id="5638991">byte</span><span class="op" id="5638995">)</span>&nbsp;<span class="op" id="5638997">(</span><span class="ident" id="5638998">n</span>&nbsp;<span class="builtintype" id="5639000">int</span><span class="op" id="5639003">,</span>&nbsp;<span class="ident" id="5639005">err</span>&nbsp;<span class="builtintype" id="5639009">error</span><span class="op" id="5639014">)</span>&nbsp;<span class="op" id="5639016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639019">if</span>&nbsp;<span class="builtinfunc" id="5639022">len</span><span class="op" id="5639025">(</span><span class="ident" id="5639026"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639029">.</span><span class="ident" id="5639030"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span><span class="op" id="5639032">)</span>&nbsp;<span class="op" id="5639034">==</span>&nbsp;<span class="num" id="5639037">0</span>&nbsp;<span class="op" id="5639039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5639043">//&nbsp;No&nbsp;more&nbsp;data&nbsp;fragments&nbsp;to&nbsp;read&nbsp;from.</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639085">if</span>&nbsp;<span class="ident" id="5639088"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639091">.</span><span class="ident" id="5639092"><a href="/gostd/archive/tar/reader.go.html#5619272">pos</a></span>&nbsp;<span class="op" id="5639096">&lt;</span>&nbsp;<span class="ident" id="5639098"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639101">.</span><span class="ident" id="5639102"><a href="/gostd/archive/tar/reader.go.html#5619324">tot</a></span>&nbsp;<span class="op" id="5639106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5639111">//&nbsp;We&#39;re&nbsp;in&nbsp;the&nbsp;last&nbsp;hole</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639140"><a href="/gostd/archive/tar/reader.go.html#5638998">n</a></span>&nbsp;<span class="op" id="5639142">=</span>&nbsp;<span class="ident" id="5639144"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639147">.</span><span class="ident" id="5639148"><a href="/gostd/archive/tar/reader.go.html#5638697">readHole</a></span><span class="op" id="5639156">(</span><span class="ident" id="5639157"><a href="/gostd/archive/tar/reader.go.html#5638987">b</a></span><span class="op" id="5639158">,</span>&nbsp;<span class="ident" id="5639160"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639163">.</span><span class="ident" id="5639164"><a href="/gostd/archive/tar/reader.go.html#5619324">tot</a></span><span class="op" id="5639167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639172">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5639181">}</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5639185">//&nbsp;Otherwise,&nbsp;we&#39;re&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639230">return</span>&nbsp;<span class="num" id="5639237">0</span><span class="op" id="5639238">,</span>&nbsp;<span class="ident" id="5639240"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5639242">.</span><span class="ident" id="5639243"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5639248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639251">if</span>&nbsp;<span class="ident" id="5639254"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639257">.</span><span class="ident" id="5639258"><a href="/gostd/archive/tar/reader.go.html#5619272">pos</a></span>&nbsp;<span class="op" id="5639262">&lt;</span>&nbsp;<span class="ident" id="5639264"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639267">.</span><span class="ident" id="5639268"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span><span class="op" id="5639270">[</span><span class="num" id="5639271">0</span><span class="op" id="5639272">]</span><span class="op" id="5639273">.</span><span class="ident" id="5639274"><a href="/gostd/archive/tar/reader.go.html#5632410">offset</a></span>&nbsp;<span class="op" id="5639281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5639285">//&nbsp;We&#39;re&nbsp;in&nbsp;a&nbsp;hole</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639306"><a href="/gostd/archive/tar/reader.go.html#5638998">n</a></span>&nbsp;<span class="op" id="5639308">=</span>&nbsp;<span class="ident" id="5639310"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639313">.</span><span class="ident" id="5639314"><a href="/gostd/archive/tar/reader.go.html#5638697">readHole</a></span><span class="op" id="5639322">(</span><span class="ident" id="5639323"><a href="/gostd/archive/tar/reader.go.html#5638987">b</a></span><span class="op" id="5639324">,</span>&nbsp;<span class="ident" id="5639326"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639329">.</span><span class="ident" id="5639330"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span><span class="op" id="5639332">[</span><span class="num" id="5639333">0</span><span class="op" id="5639334">]</span><span class="op" id="5639335">.</span><span class="ident" id="5639336"><a href="/gostd/archive/tar/reader.go.html#5632410">offset</a></span><span class="op" id="5639342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639346">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5639354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5639358">//&nbsp;We&#39;re&nbsp;not&nbsp;in&nbsp;a&nbsp;hole,&nbsp;so&nbsp;we&#39;ll&nbsp;read&nbsp;from&nbsp;the&nbsp;next&nbsp;data&nbsp;fragment</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639425">posInFragment</span>&nbsp;<span class="op" id="5639439">:=</span>&nbsp;<span class="ident" id="5639442"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639445">.</span><span class="ident" id="5639446"><a href="/gostd/archive/tar/reader.go.html#5619272">pos</a></span>&nbsp;<span class="op" id="5639450">-</span>&nbsp;<span class="ident" id="5639452"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639455">.</span><span class="ident" id="5639456"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span><span class="op" id="5639458">[</span><span class="num" id="5639459">0</span><span class="op" id="5639460">]</span><span class="op" id="5639461">.</span><span class="ident" id="5639462"><a href="/gostd/archive/tar/reader.go.html#5632410">offset</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639470">bytesLeft</span>&nbsp;<span class="op" id="5639480">:=</span>&nbsp;<span class="ident" id="5639483"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639486">.</span><span class="ident" id="5639487"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span><span class="op" id="5639489">[</span><span class="num" id="5639490">0</span><span class="op" id="5639491">]</span><span class="op" id="5639492">.</span><span class="ident" id="5639493"><a href="/gostd/archive/tar/reader.go.html#5632426">numBytes</a></span>&nbsp;<span class="op" id="5639502">-</span>&nbsp;<span class="ident" id="5639504"><a href="/gostd/archive/tar/reader.go.html#5639425">posInFragment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639519">if</span>&nbsp;<span class="builtintype" id="5639522">int64</span><span class="op" id="5639527">(</span><span class="builtinfunc" id="5639528">len</span><span class="op" id="5639531">(</span><span class="ident" id="5639532"><a href="/gostd/archive/tar/reader.go.html#5638987">b</a></span><span class="op" id="5639533">)</span><span class="op" id="5639534">)</span>&nbsp;<span class="op" id="5639536">&gt;</span>&nbsp;<span class="ident" id="5639538"><a href="/gostd/archive/tar/reader.go.html#5639470">bytesLeft</a></span>&nbsp;<span class="op" id="5639548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639552"><a href="/gostd/archive/tar/reader.go.html#5638987">b</a></span>&nbsp;<span class="op" id="5639554">=</span>&nbsp;<span class="ident" id="5639556"><a href="/gostd/archive/tar/reader.go.html#5638987">b</a></span><span class="op" id="5639557">[</span><span class="num" id="5639558">0</span><span class="op" id="5639559">:</span><span class="ident" id="5639560"><a href="/gostd/archive/tar/reader.go.html#5639470">bytesLeft</a></span><span class="op" id="5639569">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5639572">}</span><br>
<span class="lineno">800</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639576"><a href="/gostd/archive/tar/reader.go.html#5638998">n</a></span><span class="op" id="5639577">,</span>&nbsp;<span class="ident" id="5639579"><a href="/gostd/archive/tar/reader.go.html#5639005">err</a></span>&nbsp;<span class="op" id="5639583">=</span>&nbsp;<span class="ident" id="5639585"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639588">.</span><span class="ident" id="5639589"><a href="/gostd/archive/tar/reader.go.html#5619163">rfr</a></span><span class="op" id="5639592">.</span><span class="ident" id="5639593"><a href="/gostd/archive/tar/reader.go.html#5638184">Read</a></span><span class="op" id="5639597">(</span><span class="ident" id="5639598"><a href="/gostd/archive/tar/reader.go.html#5638987">b</a></span><span class="op" id="5639599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639602"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639605">.</span><span class="ident" id="5639606"><a href="/gostd/archive/tar/reader.go.html#5619272">pos</a></span>&nbsp;<span class="op" id="5639610">+=</span>&nbsp;<span class="builtintype" id="5639613">int64</span><span class="op" id="5639618">(</span><span class="ident" id="5639619"><a href="/gostd/archive/tar/reader.go.html#5638998">n</a></span><span class="op" id="5639620">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639624">if</span>&nbsp;<span class="builtintype" id="5639627">int64</span><span class="op" id="5639632">(</span><span class="ident" id="5639633"><a href="/gostd/archive/tar/reader.go.html#5638998">n</a></span><span class="op" id="5639634">)</span>&nbsp;<span class="op" id="5639636">==</span>&nbsp;<span class="ident" id="5639639"><a href="/gostd/archive/tar/reader.go.html#5639470">bytesLeft</a></span>&nbsp;<span class="op" id="5639649">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5639653">//&nbsp;We&#39;re&nbsp;done&nbsp;with&nbsp;this&nbsp;fragment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639688"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639691">.</span><span class="ident" id="5639692"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span>&nbsp;<span class="op" id="5639695">=</span>&nbsp;<span class="ident" id="5639697"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639700">.</span><span class="ident" id="5639701"><a href="/gostd/archive/tar/reader.go.html#5619221">sp</a></span><span class="op" id="5639703">[</span><span class="num" id="5639704">1</span><span class="op" id="5639705">:</span><span class="op" id="5639706">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5639709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639713">if</span>&nbsp;<span class="ident" id="5639716"><a href="/gostd/archive/tar/reader.go.html#5639005">err</a></span>&nbsp;<span class="op" id="5639720">==</span>&nbsp;<span class="ident" id="5639723"><a href="/gostd/archive/tar/reader.go.html#5617942">io</a></span><span class="op" id="5639725">.</span><span class="ident" id="5639726"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="5639730">&amp;&amp;</span>&nbsp;<span class="ident" id="5639733"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639736">.</span><span class="ident" id="5639737"><a href="/gostd/archive/tar/reader.go.html#5619272">pos</a></span>&nbsp;<span class="op" id="5639741">&lt;</span>&nbsp;<span class="ident" id="5639743"><a href="/gostd/archive/tar/reader.go.html#5638959">sfr</a></span><span class="op" id="5639746">.</span><span class="ident" id="5639747"><a href="/gostd/archive/tar/reader.go.html#5619324">tot</a></span>&nbsp;<span class="op" id="5639751">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5639755">//&nbsp;We&nbsp;reached&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;last&nbsp;fragment&#39;s&nbsp;data,&nbsp;but&nbsp;there&#39;s&nbsp;a&nbsp;final&nbsp;hole</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5639833"><a href="/gostd/archive/tar/reader.go.html#5639005">err</a></span>&nbsp;<span class="op" id="5639837">=</span>&nbsp;<span class="builtintype" id="5639839">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5639844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5639847">return</span><br>
<span class="lineno"></span><span class="op" id="5639854">}</span><br>
<span class="lineno">815</span><br>
<span class="lineno"></span><span class="comment" id="5639857">//&nbsp;numBytes&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;left&nbsp;to&nbsp;read&nbsp;in&nbsp;the&nbsp;sparse&nbsp;file&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="5639931">//&nbsp;sparse-encoded&nbsp;data&nbsp;in&nbsp;the&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno"></span><span class="keyword" id="5639974">func</span>&nbsp;<span class="op" id="5639979">(</span><span class="ident" id="5639980">sfr</span>&nbsp;<span class="op" id="5639984">*</span><span class="ident" id="5639985"><a href="/gostd/archive/tar/reader.go.html#5619136">sparseFileReader</a></span><span class="op" id="5640001">)</span>&nbsp;<span class="ident" id="5640003">numBytes</span><span class="op" id="5640011">(</span><span class="op" id="5640012">)</span>&nbsp;<span class="builtintype" id="5640014">int64</span>&nbsp;<span class="op" id="5640020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5640023">return</span>&nbsp;<span class="ident" id="5640030"><a href="/gostd/archive/tar/reader.go.html#5639980">sfr</a></span><span class="op" id="5640033">.</span><span class="ident" id="5640034"><a href="/gostd/archive/tar/reader.go.html#5619163">rfr</a></span><span class="op" id="5640037">.</span><span class="ident" id="5640038"><a href="/gostd/archive/tar/reader.go.html#5618975">nb</a></span><br>
<span class="lineno">820</span><span class="op" id="5640041">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
