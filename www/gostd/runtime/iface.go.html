<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html" class="current">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1486324">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1486379">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1486433">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1486484">package</span>&nbsp;<span class="ident" id="1486492">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1486501">import</span>&nbsp;<span class="op" id="1486508">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1486511">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1486520">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1486523">const</span>&nbsp;<span class="op" id="1486529">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1486532">hashSize</span>&nbsp;<span class="op" id="1486541">=</span>&nbsp;<span class="num" id="1486543">1009</span><br>
<span class="lineno"></span><span class="op" id="1486548">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1486551">var</span>&nbsp;<span class="op" id="1486555">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1486558">ifaceLock</span>&nbsp;<span class="ident" id="1486568">mutex</span>&nbsp;<span class="comment" id="1486574">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1486602">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1486612">[</span><span class="ident" id="1486613">hashSize</span><span class="op" id="1486621">]</span><span class="op" id="1486622">*</span><span class="ident" id="1486623">itab</span><br>
<span class="lineno"></span><span class="op" id="1486628">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1486631">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1486701">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1486770">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1486839">type</span>&nbsp;<span class="ident" id="1486844">fInterface</span>&nbsp;<span class="keyword" id="1486855">interface</span>&nbsp;<span class="op" id="1486865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1486868">f</span><span class="op" id="1486869">(</span><span class="op" id="1486870">)</span><br>
<span class="lineno">25</span><span class="op" id="1486872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1486875">func</span>&nbsp;<span class="ident" id="1486880">getitab</span><span class="op" id="1486887">(</span><span class="ident" id="1486888">inter</span>&nbsp;<span class="op" id="1486894">*</span><span class="ident" id="1486895">interfacetype</span><span class="op" id="1486908">,</span>&nbsp;<span class="ident" id="1486910">typ</span>&nbsp;<span class="op" id="1486914">*</span><span class="ident" id="1486915">_type</span><span class="op" id="1486920">,</span>&nbsp;<span class="ident" id="1486922">canfail</span>&nbsp;<span class="builtintype" id="1486930">bool</span><span class="op" id="1486934">)</span>&nbsp;<span class="op" id="1486936">*</span><span class="ident" id="1486937">itab</span>&nbsp;<span class="op" id="1486942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1486945">if</span>&nbsp;<span class="builtinfunc" id="1486948">len</span><span class="op" id="1486951">(</span><span class="ident" id="1486952">inter</span><span class="op" id="1486957">.</span><span class="ident" id="1486958">mhdr</span><span class="op" id="1486962">)</span>&nbsp;<span class="op" id="1486964">==</span>&nbsp;<span class="num" id="1486967">0</span>&nbsp;<span class="op" id="1486969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1486973">gothrow</span><span class="op" id="1486980">(</span><span class="string" id="1486981">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1487014">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1487017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487021">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1487035">x</span>&nbsp;<span class="op" id="1487037">:=</span>&nbsp;<span class="ident" id="1487040">typ</span><span class="op" id="1487043">.</span><span class="ident" id="1487044">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487047">if</span>&nbsp;<span class="ident" id="1487050">x</span>&nbsp;<span class="op" id="1487052">==</span>&nbsp;<span class="builtintype" id="1487055">nil</span>&nbsp;<span class="op" id="1487059">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487063">if</span>&nbsp;<span class="ident" id="1487066">canfail</span>&nbsp;<span class="op" id="1487074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487079">return</span>&nbsp;<span class="builtintype" id="1487086">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1487092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1487096">i</span>&nbsp;<span class="op" id="1487098">:=</span>&nbsp;<span class="op" id="1487101">(</span><span class="op" id="1487102">*</span><span class="ident" id="1487103">imethod</span><span class="op" id="1487110">)</span><span class="op" id="1487111">(</span><span class="ident" id="1487112">add</span><span class="op" id="1487115">(</span><span class="ident" id="1487116">unsafe</span><span class="op" id="1487122">.</span><span class="ident" id="1487123">Pointer</span><span class="op" id="1487130">(</span><span class="ident" id="1487131">inter</span><span class="op" id="1487136">)</span><span class="op" id="1487137">,</span>&nbsp;<span class="ident" id="1487139">unsafe</span><span class="op" id="1487145">.</span><span class="ident" id="1487146">Sizeof</span><span class="op" id="1487152">(</span><span class="ident" id="1487153">interfacetype</span><span class="op" id="1487166">{</span><span class="op" id="1487167">}</span><span class="op" id="1487168">)</span><span class="op" id="1487169">)</span><span class="op" id="1487170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1487174">panic</span><span class="op" id="1487179">(</span><span class="op" id="1487180">&amp;</span><span class="ident" id="1487181">TypeAssertionError</span><span class="op" id="1487199">{</span><span class="string" id="1487200">&#34;&#34;</span><span class="op" id="1487202">,</span>&nbsp;<span class="op" id="1487204">*</span><span class="ident" id="1487205">typ</span><span class="op" id="1487208">.</span><span class="ident" id="1487209">_string</span><span class="op" id="1487216">,</span>&nbsp;<span class="op" id="1487218">*</span><span class="ident" id="1487219">inter</span><span class="op" id="1487224">.</span><span class="ident" id="1487225">typ</span><span class="op" id="1487228">.</span><span class="ident" id="1487229">_string</span><span class="op" id="1487236">,</span>&nbsp;<span class="op" id="1487238">*</span><span class="ident" id="1487239">i</span><span class="op" id="1487240">.</span><span class="ident" id="1487241">name</span><span class="op" id="1487245">}</span><span class="op" id="1487246">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1487249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487253">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1487308">h</span>&nbsp;<span class="op" id="1487310">:=</span>&nbsp;<span class="ident" id="1487313">inter</span><span class="op" id="1487318">.</span><span class="ident" id="1487319">typ</span><span class="op" id="1487322">.</span><span class="ident" id="1487323">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1487329">h</span>&nbsp;<span class="op" id="1487331">+=</span>&nbsp;<span class="num" id="1487334">17</span>&nbsp;<span class="op" id="1487337">*</span>&nbsp;<span class="ident" id="1487339">typ</span><span class="op" id="1487342">.</span><span class="ident" id="1487343">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487349">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1487384">h</span>&nbsp;<span class="op" id="1487386">%=</span>&nbsp;<span class="ident" id="1487389">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487400">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487447">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487491">var</span>&nbsp;<span class="ident" id="1487495">m</span>&nbsp;<span class="op" id="1487497">*</span><span class="ident" id="1487498">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487504">var</span>&nbsp;<span class="ident" id="1487508">locked</span>&nbsp;<span class="builtintype" id="1487515">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487520">for</span>&nbsp;<span class="ident" id="1487524">locked</span>&nbsp;<span class="op" id="1487531">=</span>&nbsp;<span class="num" id="1487533">0</span><span class="op" id="1487534">;</span>&nbsp;<span class="ident" id="1487536">locked</span>&nbsp;<span class="op" id="1487543">&lt;</span>&nbsp;<span class="num" id="1487545">2</span><span class="op" id="1487546">;</span>&nbsp;<span class="ident" id="1487548">locked</span><span class="op" id="1487554">++</span>&nbsp;<span class="op" id="1487557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487561">if</span>&nbsp;<span class="ident" id="1487564">locked</span>&nbsp;<span class="op" id="1487571">!=</span>&nbsp;<span class="num" id="1487574">0</span>&nbsp;<span class="op" id="1487576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1487581">lock</span><span class="op" id="1487585">(</span><span class="op" id="1487586">&amp;</span><span class="ident" id="1487587">ifaceLock</span><span class="op" id="1487596">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1487600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487604">for</span>&nbsp;<span class="ident" id="1487608">m</span>&nbsp;<span class="op" id="1487610">=</span>&nbsp;<span class="op" id="1487612">(</span><span class="op" id="1487613">*</span><span class="ident" id="1487614">itab</span><span class="op" id="1487618">)</span><span class="op" id="1487619">(</span><span class="ident" id="1487620">atomicloadp</span><span class="op" id="1487631">(</span><span class="ident" id="1487632">unsafe</span><span class="op" id="1487638">.</span><span class="ident" id="1487639">Pointer</span><span class="op" id="1487646">(</span><span class="op" id="1487647">&amp;</span><span class="ident" id="1487648">hash</span><span class="op" id="1487652">[</span><span class="ident" id="1487653">h</span><span class="op" id="1487654">]</span><span class="op" id="1487655">)</span><span class="op" id="1487656">)</span><span class="op" id="1487657">)</span><span class="op" id="1487658">;</span>&nbsp;<span class="ident" id="1487660">m</span>&nbsp;<span class="op" id="1487662">!=</span>&nbsp;<span class="builtintype" id="1487665">nil</span><span class="op" id="1487668">;</span>&nbsp;<span class="ident" id="1487670">m</span>&nbsp;<span class="op" id="1487672">=</span>&nbsp;<span class="ident" id="1487674">m</span><span class="op" id="1487675">.</span><span class="ident" id="1487676">link</span>&nbsp;<span class="op" id="1487681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487686">if</span>&nbsp;<span class="ident" id="1487689">m</span><span class="op" id="1487690">.</span><span class="ident" id="1487691">inter</span>&nbsp;<span class="op" id="1487697">==</span>&nbsp;<span class="ident" id="1487700">inter</span>&nbsp;<span class="op" id="1487706">&amp;&amp;</span>&nbsp;<span class="ident" id="1487709">m</span><span class="op" id="1487710">.</span><span class="ident" id="1487711">_type</span>&nbsp;<span class="op" id="1487717">==</span>&nbsp;<span class="ident" id="1487720">typ</span>&nbsp;<span class="op" id="1487724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487730">if</span>&nbsp;<span class="ident" id="1487733">m</span><span class="op" id="1487734">.</span><span class="ident" id="1487735">bad</span>&nbsp;<span class="op" id="1487739">!=</span>&nbsp;<span class="num" id="1487742">0</span>&nbsp;<span class="op" id="1487744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1487751">m</span>&nbsp;<span class="op" id="1487753">=</span>&nbsp;<span class="builtintype" id="1487755">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1487764">if</span>&nbsp;<span class="op" id="1487767">!</span><span class="ident" id="1487768">canfail</span>&nbsp;<span class="op" id="1487776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487784">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487832">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487883">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487930">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1487978">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1488027">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1488076">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1488123">goto</span>&nbsp;<span class="ident" id="1488128">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1488140">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1488146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1488152">if</span>&nbsp;<span class="ident" id="1488155">locked</span>&nbsp;<span class="op" id="1488162">!=</span>&nbsp;<span class="num" id="1488165">0</span>&nbsp;<span class="op" id="1488167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488174">unlock</span><span class="op" id="1488180">(</span><span class="op" id="1488181">&amp;</span><span class="ident" id="1488182">ifaceLock</span><span class="op" id="1488191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1488197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1488203">return</span>&nbsp;<span class="ident" id="1488210">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1488215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1488219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1488222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488226">m</span>&nbsp;<span class="op" id="1488228">=</span>&nbsp;<span class="op" id="1488230">(</span><span class="op" id="1488231">*</span><span class="ident" id="1488232">itab</span><span class="op" id="1488236">)</span><span class="op" id="1488237">(</span><span class="ident" id="1488238">persistentalloc</span><span class="op" id="1488253">(</span><span class="ident" id="1488254">unsafe</span><span class="op" id="1488260">.</span><span class="ident" id="1488261">Sizeof</span><span class="op" id="1488267">(</span><span class="ident" id="1488268">itab</span><span class="op" id="1488272">{</span><span class="op" id="1488273">}</span><span class="op" id="1488274">)</span><span class="op" id="1488275">+</span><span class="builtintype" id="1488276">uintptr</span><span class="op" id="1488283">(</span><span class="builtinfunc" id="1488284">len</span><span class="op" id="1488287">(</span><span class="ident" id="1488288">inter</span><span class="op" id="1488293">.</span><span class="ident" id="1488294">mhdr</span><span class="op" id="1488298">)</span><span class="op" id="1488299">)</span><span class="op" id="1488300">*</span><span class="ident" id="1488301">ptrSize</span><span class="op" id="1488308">,</span>&nbsp;<span class="num" id="1488310">0</span><span class="op" id="1488311">,</span>&nbsp;<span class="op" id="1488313">&amp;</span><span class="ident" id="1488314">memstats</span><span class="op" id="1488322">.</span><span class="ident" id="1488323">other_sys</span><span class="op" id="1488332">)</span><span class="op" id="1488333">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488336">m</span><span class="op" id="1488337">.</span><span class="ident" id="1488338">inter</span>&nbsp;<span class="op" id="1488344">=</span>&nbsp;<span class="ident" id="1488346">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488353">m</span><span class="op" id="1488354">.</span><span class="ident" id="1488355">_type</span>&nbsp;<span class="op" id="1488361">=</span>&nbsp;<span class="ident" id="1488363">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1488368">search</span><span class="op" id="1488374">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1488377">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1488428">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1488464">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1488507">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488546">ni</span>&nbsp;<span class="op" id="1488549">:=</span>&nbsp;<span class="builtinfunc" id="1488552">len</span><span class="op" id="1488555">(</span><span class="ident" id="1488556">inter</span><span class="op" id="1488561">.</span><span class="ident" id="1488562">mhdr</span><span class="op" id="1488566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488569">nt</span>&nbsp;<span class="op" id="1488572">:=</span>&nbsp;<span class="builtinfunc" id="1488575">len</span><span class="op" id="1488578">(</span><span class="ident" id="1488579">x</span><span class="op" id="1488580">.</span><span class="ident" id="1488581">mhdr</span><span class="op" id="1488585">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488588">j</span>&nbsp;<span class="op" id="1488590">:=</span>&nbsp;<span class="num" id="1488593">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1488596">for</span>&nbsp;<span class="ident" id="1488600">k</span>&nbsp;<span class="op" id="1488602">:=</span>&nbsp;<span class="num" id="1488605">0</span><span class="op" id="1488606">;</span>&nbsp;<span class="ident" id="1488608">k</span>&nbsp;<span class="op" id="1488610">&lt;</span>&nbsp;<span class="ident" id="1488612">ni</span><span class="op" id="1488614">;</span>&nbsp;<span class="ident" id="1488616">k</span><span class="op" id="1488617">++</span>&nbsp;<span class="op" id="1488620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488624">i</span>&nbsp;<span class="op" id="1488626">:=</span>&nbsp;<span class="op" id="1488629">(</span><span class="op" id="1488630">*</span><span class="ident" id="1488631">imethod</span><span class="op" id="1488638">)</span><span class="op" id="1488639">(</span><span class="ident" id="1488640">add</span><span class="op" id="1488643">(</span><span class="ident" id="1488644">unsafe</span><span class="op" id="1488650">.</span><span class="ident" id="1488651">Pointer</span><span class="op" id="1488658">(</span><span class="ident" id="1488659">inter</span><span class="op" id="1488664">)</span><span class="op" id="1488665">,</span>&nbsp;<span class="ident" id="1488667">unsafe</span><span class="op" id="1488673">.</span><span class="ident" id="1488674">Sizeof</span><span class="op" id="1488680">(</span><span class="ident" id="1488681">interfacetype</span><span class="op" id="1488694">{</span><span class="op" id="1488695">}</span><span class="op" id="1488696">)</span><span class="op" id="1488697">+</span><span class="builtintype" id="1488698">uintptr</span><span class="op" id="1488705">(</span><span class="ident" id="1488706">k</span><span class="op" id="1488707">)</span><span class="op" id="1488708">*</span><span class="ident" id="1488709">unsafe</span><span class="op" id="1488715">.</span><span class="ident" id="1488716">Sizeof</span><span class="op" id="1488722">(</span><span class="ident" id="1488723">imethod</span><span class="op" id="1488730">{</span><span class="op" id="1488731">}</span><span class="op" id="1488732">)</span><span class="op" id="1488733">)</span><span class="op" id="1488734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488738">iname</span>&nbsp;<span class="op" id="1488744">:=</span>&nbsp;<span class="ident" id="1488747">i</span><span class="op" id="1488748">.</span><span class="ident" id="1488749">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488756">ipkgpath</span>&nbsp;<span class="op" id="1488765">:=</span>&nbsp;<span class="ident" id="1488768">i</span><span class="op" id="1488769">.</span><span class="ident" id="1488770">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488780">itype</span>&nbsp;<span class="op" id="1488786">:=</span>&nbsp;<span class="ident" id="1488789">i</span><span class="op" id="1488790">.</span><span class="ident" id="1488791">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1488799">for</span>&nbsp;<span class="op" id="1488803">;</span>&nbsp;<span class="ident" id="1488805">j</span>&nbsp;<span class="op" id="1488807">&lt;</span>&nbsp;<span class="ident" id="1488809">nt</span><span class="op" id="1488811">;</span>&nbsp;<span class="ident" id="1488813">j</span><span class="op" id="1488814">++</span>&nbsp;<span class="op" id="1488817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1488822">t</span>&nbsp;<span class="op" id="1488824">:=</span>&nbsp;<span class="op" id="1488827">(</span><span class="op" id="1488828">*</span><span class="ident" id="1488829">method</span><span class="op" id="1488835">)</span><span class="op" id="1488836">(</span><span class="ident" id="1488837">add</span><span class="op" id="1488840">(</span><span class="ident" id="1488841">unsafe</span><span class="op" id="1488847">.</span><span class="ident" id="1488848">Pointer</span><span class="op" id="1488855">(</span><span class="ident" id="1488856">x</span><span class="op" id="1488857">)</span><span class="op" id="1488858">,</span>&nbsp;<span class="ident" id="1488860">unsafe</span><span class="op" id="1488866">.</span><span class="ident" id="1488867">Sizeof</span><span class="op" id="1488873">(</span><span class="ident" id="1488874">uncommontype</span><span class="op" id="1488886">{</span><span class="op" id="1488887">}</span><span class="op" id="1488888">)</span><span class="op" id="1488889">+</span><span class="builtintype" id="1488890">uintptr</span><span class="op" id="1488897">(</span><span class="ident" id="1488898">j</span><span class="op" id="1488899">)</span><span class="op" id="1488900">*</span><span class="ident" id="1488901">unsafe</span><span class="op" id="1488907">.</span><span class="ident" id="1488908">Sizeof</span><span class="op" id="1488914">(</span><span class="ident" id="1488915">method</span><span class="op" id="1488921">{</span><span class="op" id="1488922">}</span><span class="op" id="1488923">)</span><span class="op" id="1488924">)</span><span class="op" id="1488925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1488930">if</span>&nbsp;<span class="ident" id="1488933">t</span><span class="op" id="1488934">.</span><span class="ident" id="1488935">mtyp</span>&nbsp;<span class="op" id="1488940">==</span>&nbsp;<span class="ident" id="1488943">itype</span>&nbsp;<span class="op" id="1488949">&amp;&amp;</span>&nbsp;<span class="ident" id="1488952">t</span><span class="op" id="1488953">.</span><span class="ident" id="1488954">name</span>&nbsp;<span class="op" id="1488959">==</span>&nbsp;<span class="ident" id="1488962">iname</span>&nbsp;<span class="op" id="1488968">&amp;&amp;</span>&nbsp;<span class="ident" id="1488971">t</span><span class="op" id="1488972">.</span><span class="ident" id="1488973">pkgpath</span>&nbsp;<span class="op" id="1488981">==</span>&nbsp;<span class="ident" id="1488984">ipkgpath</span>&nbsp;<span class="op" id="1488993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1488999">if</span>&nbsp;<span class="ident" id="1489002">m</span>&nbsp;<span class="op" id="1489004">!=</span>&nbsp;<span class="builtintype" id="1489007">nil</span>&nbsp;<span class="op" id="1489011">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489018">*</span><span class="op" id="1489019">(</span><span class="op" id="1489020">*</span><span class="ident" id="1489021">unsafe</span><span class="op" id="1489027">.</span><span class="ident" id="1489028">Pointer</span><span class="op" id="1489035">)</span><span class="op" id="1489036">(</span><span class="ident" id="1489037">add</span><span class="op" id="1489040">(</span><span class="ident" id="1489041">unsafe</span><span class="op" id="1489047">.</span><span class="ident" id="1489048">Pointer</span><span class="op" id="1489055">(</span><span class="ident" id="1489056">m</span><span class="op" id="1489057">)</span><span class="op" id="1489058">,</span>&nbsp;<span class="ident" id="1489060">unsafe</span><span class="op" id="1489066">.</span><span class="ident" id="1489067">Sizeof</span><span class="op" id="1489073">(</span><span class="ident" id="1489074">itab</span><span class="op" id="1489078">{</span><span class="op" id="1489079">}</span><span class="op" id="1489080">)</span><span class="op" id="1489081">+</span><span class="builtintype" id="1489082">uintptr</span><span class="op" id="1489089">(</span><span class="ident" id="1489090">k</span><span class="op" id="1489091">)</span><span class="op" id="1489092">*</span><span class="ident" id="1489093">ptrSize</span><span class="op" id="1489100">)</span><span class="op" id="1489101">)</span>&nbsp;<span class="op" id="1489103">=</span>&nbsp;<span class="ident" id="1489105">t</span><span class="op" id="1489106">.</span><span class="ident" id="1489107">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489121">goto</span>&nbsp;<span class="ident" id="1489126">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489145">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1489149">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489173">if</span>&nbsp;<span class="op" id="1489176">!</span><span class="ident" id="1489177">canfail</span>&nbsp;<span class="op" id="1489185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489190">if</span>&nbsp;<span class="ident" id="1489193">locked</span>&nbsp;<span class="op" id="1489200">!=</span>&nbsp;<span class="num" id="1489203">0</span>&nbsp;<span class="op" id="1489205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489211">unlock</span><span class="op" id="1489217">(</span><span class="op" id="1489218">&amp;</span><span class="ident" id="1489219">ifaceLock</span><span class="op" id="1489228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489233">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1489238">panic</span><span class="op" id="1489243">(</span><span class="op" id="1489244">&amp;</span><span class="ident" id="1489245">TypeAssertionError</span><span class="op" id="1489263">{</span><span class="string" id="1489264">&#34;&#34;</span><span class="op" id="1489266">,</span>&nbsp;<span class="op" id="1489268">*</span><span class="ident" id="1489269">typ</span><span class="op" id="1489272">.</span><span class="ident" id="1489273">_string</span><span class="op" id="1489280">,</span>&nbsp;<span class="op" id="1489282">*</span><span class="ident" id="1489283">inter</span><span class="op" id="1489288">.</span><span class="ident" id="1489289">typ</span><span class="op" id="1489292">.</span><span class="ident" id="1489293">_string</span><span class="op" id="1489300">,</span>&nbsp;<span class="op" id="1489302">*</span><span class="ident" id="1489303">iname</span><span class="op" id="1489308">}</span><span class="op" id="1489309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489317">m</span><span class="op" id="1489318">.</span><span class="ident" id="1489319">bad</span>&nbsp;<span class="op" id="1489323">=</span>&nbsp;<span class="num" id="1489325">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489329">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489336">nextimethod</span><span class="op" id="1489347">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489353">if</span>&nbsp;<span class="ident" id="1489356">locked</span>&nbsp;<span class="op" id="1489363">==</span>&nbsp;<span class="num" id="1489366">0</span>&nbsp;<span class="op" id="1489368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489372">gothrow</span><span class="op" id="1489379">(</span><span class="string" id="1489380">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1489402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489408">m</span><span class="op" id="1489409">.</span><span class="ident" id="1489410">link</span>&nbsp;<span class="op" id="1489415">=</span>&nbsp;<span class="ident" id="1489417">hash</span><span class="op" id="1489421">[</span><span class="ident" id="1489422">h</span><span class="op" id="1489423">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489426">atomicstorep</span><span class="op" id="1489438">(</span><span class="ident" id="1489439">unsafe</span><span class="op" id="1489445">.</span><span class="ident" id="1489446">Pointer</span><span class="op" id="1489453">(</span><span class="op" id="1489454">&amp;</span><span class="ident" id="1489455">hash</span><span class="op" id="1489459">[</span><span class="ident" id="1489460">h</span><span class="op" id="1489461">]</span><span class="op" id="1489462">)</span><span class="op" id="1489463">,</span>&nbsp;<span class="ident" id="1489465">unsafe</span><span class="op" id="1489471">.</span><span class="ident" id="1489472">Pointer</span><span class="op" id="1489479">(</span><span class="ident" id="1489480">m</span><span class="op" id="1489481">)</span><span class="op" id="1489482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489485">unlock</span><span class="op" id="1489491">(</span><span class="op" id="1489492">&amp;</span><span class="ident" id="1489493">ifaceLock</span><span class="op" id="1489502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489505">if</span>&nbsp;<span class="ident" id="1489508">m</span><span class="op" id="1489509">.</span><span class="ident" id="1489510">bad</span>&nbsp;<span class="op" id="1489514">!=</span>&nbsp;<span class="num" id="1489517">0</span>&nbsp;<span class="op" id="1489519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489523">return</span>&nbsp;<span class="builtintype" id="1489530">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489535">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489538">return</span>&nbsp;<span class="ident" id="1489545">m</span><br>
<span class="lineno"></span><span class="op" id="1489547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1489550">func</span>&nbsp;<span class="ident" id="1489555">typ2Itab</span><span class="op" id="1489563">(</span><span class="ident" id="1489564">t</span>&nbsp;<span class="op" id="1489566">*</span><span class="ident" id="1489567">_type</span><span class="op" id="1489572">,</span>&nbsp;<span class="ident" id="1489574">inter</span>&nbsp;<span class="op" id="1489580">*</span><span class="ident" id="1489581">interfacetype</span><span class="op" id="1489594">,</span>&nbsp;<span class="ident" id="1489596">cache</span>&nbsp;<span class="op" id="1489602">*</span><span class="op" id="1489603">*</span><span class="ident" id="1489604">itab</span><span class="op" id="1489608">)</span>&nbsp;<span class="op" id="1489610">*</span><span class="ident" id="1489611">itab</span>&nbsp;<span class="op" id="1489616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489619">tab</span>&nbsp;<span class="op" id="1489623">:=</span>&nbsp;<span class="ident" id="1489626">getitab</span><span class="op" id="1489633">(</span><span class="ident" id="1489634">inter</span><span class="op" id="1489639">,</span>&nbsp;<span class="ident" id="1489641">t</span><span class="op" id="1489642">,</span>&nbsp;<span class="builtintype" id="1489644">false</span><span class="op" id="1489649">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489652">atomicstorep</span><span class="op" id="1489664">(</span><span class="ident" id="1489665">unsafe</span><span class="op" id="1489671">.</span><span class="ident" id="1489672">Pointer</span><span class="op" id="1489679">(</span><span class="ident" id="1489680">cache</span><span class="op" id="1489685">)</span><span class="op" id="1489686">,</span>&nbsp;<span class="ident" id="1489688">unsafe</span><span class="op" id="1489694">.</span><span class="ident" id="1489695">Pointer</span><span class="op" id="1489702">(</span><span class="ident" id="1489703">tab</span><span class="op" id="1489706">)</span><span class="op" id="1489707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489710">return</span>&nbsp;<span class="ident" id="1489717">tab</span><br>
<span class="lineno"></span><span class="op" id="1489721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1489724">func</span>&nbsp;<span class="ident" id="1489729">convT2E</span><span class="op" id="1489736">(</span><span class="ident" id="1489737">t</span>&nbsp;<span class="op" id="1489739">*</span><span class="ident" id="1489740">_type</span><span class="op" id="1489745">,</span>&nbsp;<span class="ident" id="1489747">elem</span>&nbsp;<span class="ident" id="1489752">unsafe</span><span class="op" id="1489758">.</span><span class="ident" id="1489759">Pointer</span><span class="op" id="1489766">)</span>&nbsp;<span class="op" id="1489768">(</span><span class="ident" id="1489769">e</span>&nbsp;<span class="keyword" id="1489771">interface</span><span class="op" id="1489780">{</span><span class="op" id="1489781">}</span><span class="op" id="1489782">)</span>&nbsp;<span class="op" id="1489784">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489787">size</span>&nbsp;<span class="op" id="1489792">:=</span>&nbsp;<span class="builtintype" id="1489795">uintptr</span><span class="op" id="1489802">(</span><span class="ident" id="1489803">t</span><span class="op" id="1489804">.</span><span class="ident" id="1489805">size</span><span class="op" id="1489809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489812">ep</span>&nbsp;<span class="op" id="1489815">:=</span>&nbsp;<span class="op" id="1489818">(</span><span class="op" id="1489819">*</span><span class="ident" id="1489820">eface</span><span class="op" id="1489825">)</span><span class="op" id="1489826">(</span><span class="ident" id="1489827">unsafe</span><span class="op" id="1489833">.</span><span class="ident" id="1489834">Pointer</span><span class="op" id="1489841">(</span><span class="op" id="1489842">&amp;</span><span class="ident" id="1489843">e</span><span class="op" id="1489844">)</span><span class="op" id="1489845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1489848">if</span>&nbsp;<span class="ident" id="1489851">isDirectIface</span><span class="op" id="1489864">(</span><span class="ident" id="1489865">t</span><span class="op" id="1489866">)</span>&nbsp;<span class="op" id="1489868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489872">ep</span><span class="op" id="1489874">.</span><span class="ident" id="1489875">_type</span>&nbsp;<span class="op" id="1489881">=</span>&nbsp;<span class="ident" id="1489883">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489887">memmove</span><span class="op" id="1489894">(</span><span class="ident" id="1489895">unsafe</span><span class="op" id="1489901">.</span><span class="ident" id="1489902">Pointer</span><span class="op" id="1489909">(</span><span class="op" id="1489910">&amp;</span><span class="ident" id="1489911">ep</span><span class="op" id="1489913">.</span><span class="ident" id="1489914">data</span><span class="op" id="1489918">)</span><span class="op" id="1489919">,</span>&nbsp;<span class="ident" id="1489921">elem</span><span class="op" id="1489925">,</span>&nbsp;<span class="ident" id="1489927">size</span><span class="op" id="1489931">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1489934">}</span>&nbsp;<span class="keyword" id="1489936">else</span>&nbsp;<span class="op" id="1489941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1489945">x</span>&nbsp;<span class="op" id="1489947">:=</span>&nbsp;<span class="ident" id="1489950">newobject</span><span class="op" id="1489959">(</span><span class="ident" id="1489960">t</span><span class="op" id="1489961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1489965">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1490030">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490106">memmove</span><span class="op" id="1490113">(</span><span class="ident" id="1490114">x</span><span class="op" id="1490115">,</span>&nbsp;<span class="ident" id="1490117">elem</span><span class="op" id="1490121">,</span>&nbsp;<span class="ident" id="1490123">size</span><span class="op" id="1490127">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490131">ep</span><span class="op" id="1490133">.</span><span class="ident" id="1490134">_type</span>&nbsp;<span class="op" id="1490140">=</span>&nbsp;<span class="ident" id="1490142">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490146">ep</span><span class="op" id="1490148">.</span><span class="ident" id="1490149">data</span>&nbsp;<span class="op" id="1490154">=</span>&nbsp;<span class="ident" id="1490156">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1490159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1490162">return</span><br>
<span class="lineno"></span><span class="op" id="1490169">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1490172">func</span>&nbsp;<span class="ident" id="1490177">convT2I</span><span class="op" id="1490184">(</span><span class="ident" id="1490185">t</span>&nbsp;<span class="op" id="1490187">*</span><span class="ident" id="1490188">_type</span><span class="op" id="1490193">,</span>&nbsp;<span class="ident" id="1490195">inter</span>&nbsp;<span class="op" id="1490201">*</span><span class="ident" id="1490202">interfacetype</span><span class="op" id="1490215">,</span>&nbsp;<span class="ident" id="1490217">cache</span>&nbsp;<span class="op" id="1490223">*</span><span class="op" id="1490224">*</span><span class="ident" id="1490225">itab</span><span class="op" id="1490229">,</span>&nbsp;<span class="ident" id="1490231">elem</span>&nbsp;<span class="ident" id="1490236">unsafe</span><span class="op" id="1490242">.</span><span class="ident" id="1490243">Pointer</span><span class="op" id="1490250">)</span>&nbsp;<span class="op" id="1490252">(</span><span class="ident" id="1490253">i</span>&nbsp;<span class="ident" id="1490255">fInterface</span><span class="op" id="1490265">)</span>&nbsp;<span class="op" id="1490267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490270">tab</span>&nbsp;<span class="op" id="1490274">:=</span>&nbsp;<span class="op" id="1490277">(</span><span class="op" id="1490278">*</span><span class="ident" id="1490279">itab</span><span class="op" id="1490283">)</span><span class="op" id="1490284">(</span><span class="ident" id="1490285">atomicloadp</span><span class="op" id="1490296">(</span><span class="ident" id="1490297">unsafe</span><span class="op" id="1490303">.</span><span class="ident" id="1490304">Pointer</span><span class="op" id="1490311">(</span><span class="ident" id="1490312">cache</span><span class="op" id="1490317">)</span><span class="op" id="1490318">)</span><span class="op" id="1490319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1490322">if</span>&nbsp;<span class="ident" id="1490325">tab</span>&nbsp;<span class="op" id="1490329">==</span>&nbsp;<span class="builtintype" id="1490332">nil</span>&nbsp;<span class="op" id="1490336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490340">tab</span>&nbsp;<span class="op" id="1490344">=</span>&nbsp;<span class="ident" id="1490346">getitab</span><span class="op" id="1490353">(</span><span class="ident" id="1490354">inter</span><span class="op" id="1490359">,</span>&nbsp;<span class="ident" id="1490361">t</span><span class="op" id="1490362">,</span>&nbsp;<span class="builtintype" id="1490364">false</span><span class="op" id="1490369">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490373">atomicstorep</span><span class="op" id="1490385">(</span><span class="ident" id="1490386">unsafe</span><span class="op" id="1490392">.</span><span class="ident" id="1490393">Pointer</span><span class="op" id="1490400">(</span><span class="ident" id="1490401">cache</span><span class="op" id="1490406">)</span><span class="op" id="1490407">,</span>&nbsp;<span class="ident" id="1490409">unsafe</span><span class="op" id="1490415">.</span><span class="ident" id="1490416">Pointer</span><span class="op" id="1490423">(</span><span class="ident" id="1490424">tab</span><span class="op" id="1490427">)</span><span class="op" id="1490428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1490431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490434">size</span>&nbsp;<span class="op" id="1490439">:=</span>&nbsp;<span class="builtintype" id="1490442">uintptr</span><span class="op" id="1490449">(</span><span class="ident" id="1490450">t</span><span class="op" id="1490451">.</span><span class="ident" id="1490452">size</span><span class="op" id="1490456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490459">pi</span>&nbsp;<span class="op" id="1490462">:=</span>&nbsp;<span class="op" id="1490465">(</span><span class="op" id="1490466">*</span><span class="ident" id="1490467">iface</span><span class="op" id="1490472">)</span><span class="op" id="1490473">(</span><span class="ident" id="1490474">unsafe</span><span class="op" id="1490480">.</span><span class="ident" id="1490481">Pointer</span><span class="op" id="1490488">(</span><span class="op" id="1490489">&amp;</span><span class="ident" id="1490490">i</span><span class="op" id="1490491">)</span><span class="op" id="1490492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1490495">if</span>&nbsp;<span class="ident" id="1490498">isDirectIface</span><span class="op" id="1490511">(</span><span class="ident" id="1490512">t</span><span class="op" id="1490513">)</span>&nbsp;<span class="op" id="1490515">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490519">pi</span><span class="op" id="1490521">.</span><span class="ident" id="1490522">tab</span>&nbsp;<span class="op" id="1490526">=</span>&nbsp;<span class="ident" id="1490528">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490534">memmove</span><span class="op" id="1490541">(</span><span class="ident" id="1490542">unsafe</span><span class="op" id="1490548">.</span><span class="ident" id="1490549">Pointer</span><span class="op" id="1490556">(</span><span class="op" id="1490557">&amp;</span><span class="ident" id="1490558">pi</span><span class="op" id="1490560">.</span><span class="ident" id="1490561">data</span><span class="op" id="1490565">)</span><span class="op" id="1490566">,</span>&nbsp;<span class="ident" id="1490568">elem</span><span class="op" id="1490572">,</span>&nbsp;<span class="ident" id="1490574">size</span><span class="op" id="1490578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1490581">}</span>&nbsp;<span class="keyword" id="1490583">else</span>&nbsp;<span class="op" id="1490588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490592">x</span>&nbsp;<span class="op" id="1490594">:=</span>&nbsp;<span class="ident" id="1490597">newobject</span><span class="op" id="1490606">(</span><span class="ident" id="1490607">t</span><span class="op" id="1490608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490612">memmove</span><span class="op" id="1490619">(</span><span class="ident" id="1490620">x</span><span class="op" id="1490621">,</span>&nbsp;<span class="ident" id="1490623">elem</span><span class="op" id="1490627">,</span>&nbsp;<span class="ident" id="1490629">size</span><span class="op" id="1490633">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490637">pi</span><span class="op" id="1490639">.</span><span class="ident" id="1490640">tab</span>&nbsp;<span class="op" id="1490644">=</span>&nbsp;<span class="ident" id="1490646">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490652">pi</span><span class="op" id="1490654">.</span><span class="ident" id="1490655">data</span>&nbsp;<span class="op" id="1490660">=</span>&nbsp;<span class="ident" id="1490662">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1490665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1490668">return</span><br>
<span class="lineno"></span><span class="op" id="1490675">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1490678">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1490755">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1490829">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1490842">func</span>&nbsp;<span class="ident" id="1490847">assertI2T</span><span class="op" id="1490856">(</span><span class="ident" id="1490857">t</span>&nbsp;<span class="op" id="1490859">*</span><span class="ident" id="1490860">_type</span><span class="op" id="1490865">,</span>&nbsp;<span class="ident" id="1490867">i</span>&nbsp;<span class="ident" id="1490869">fInterface</span><span class="op" id="1490879">)</span>&nbsp;<span class="op" id="1490881">(</span><span class="ident" id="1490882">r</span>&nbsp;<span class="keyword" id="1490884">struct</span><span class="op" id="1490890">{</span><span class="op" id="1490891">}</span><span class="op" id="1490892">)</span>&nbsp;<span class="op" id="1490894">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490897">ip</span>&nbsp;<span class="op" id="1490900">:=</span>&nbsp;<span class="op" id="1490903">(</span><span class="op" id="1490904">*</span><span class="ident" id="1490905">iface</span><span class="op" id="1490910">)</span><span class="op" id="1490911">(</span><span class="ident" id="1490912">unsafe</span><span class="op" id="1490918">.</span><span class="ident" id="1490919">Pointer</span><span class="op" id="1490926">(</span><span class="op" id="1490927">&amp;</span><span class="ident" id="1490928">i</span><span class="op" id="1490929">)</span><span class="op" id="1490930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1490933">tab</span>&nbsp;<span class="op" id="1490937">:=</span>&nbsp;<span class="ident" id="1490940">ip</span><span class="op" id="1490942">.</span><span class="ident" id="1490943">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1490948">if</span>&nbsp;<span class="ident" id="1490951">tab</span>&nbsp;<span class="op" id="1490955">==</span>&nbsp;<span class="builtintype" id="1490958">nil</span>&nbsp;<span class="op" id="1490962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1490966">panic</span><span class="op" id="1490971">(</span><span class="op" id="1490972">&amp;</span><span class="ident" id="1490973">TypeAssertionError</span><span class="op" id="1490991">{</span><span class="string" id="1490992">&#34;&#34;</span><span class="op" id="1490994">,</span>&nbsp;<span class="string" id="1490996">&#34;&#34;</span><span class="op" id="1490998">,</span>&nbsp;<span class="op" id="1491000">*</span><span class="ident" id="1491001">t</span><span class="op" id="1491002">.</span><span class="ident" id="1491003">_string</span><span class="op" id="1491010">,</span>&nbsp;<span class="string" id="1491012">&#34;&#34;</span><span class="op" id="1491014">}</span><span class="op" id="1491015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491018">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1491021">if</span>&nbsp;<span class="ident" id="1491024">tab</span><span class="op" id="1491027">.</span><span class="ident" id="1491028">_type</span>&nbsp;<span class="op" id="1491034">!=</span>&nbsp;<span class="ident" id="1491037">t</span>&nbsp;<span class="op" id="1491039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1491043">panic</span><span class="op" id="1491048">(</span><span class="op" id="1491049">&amp;</span><span class="ident" id="1491050">TypeAssertionError</span><span class="op" id="1491068">{</span><span class="op" id="1491069">*</span><span class="ident" id="1491070">tab</span><span class="op" id="1491073">.</span><span class="ident" id="1491074">inter</span><span class="op" id="1491079">.</span><span class="ident" id="1491080">typ</span><span class="op" id="1491083">.</span><span class="ident" id="1491084">_string</span><span class="op" id="1491091">,</span>&nbsp;<span class="op" id="1491093">*</span><span class="ident" id="1491094">tab</span><span class="op" id="1491097">.</span><span class="ident" id="1491098">_type</span><span class="op" id="1491103">.</span><span class="ident" id="1491104">_string</span><span class="op" id="1491111">,</span>&nbsp;<span class="op" id="1491113">*</span><span class="ident" id="1491114">t</span><span class="op" id="1491115">.</span><span class="ident" id="1491116">_string</span><span class="op" id="1491123">,</span>&nbsp;<span class="string" id="1491125">&#34;&#34;</span><span class="op" id="1491127">}</span><span class="op" id="1491128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491134">size</span>&nbsp;<span class="op" id="1491139">:=</span>&nbsp;<span class="builtintype" id="1491142">uintptr</span><span class="op" id="1491149">(</span><span class="ident" id="1491150">t</span><span class="op" id="1491151">.</span><span class="ident" id="1491152">size</span><span class="op" id="1491156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1491159">if</span>&nbsp;<span class="ident" id="1491162">isDirectIface</span><span class="op" id="1491175">(</span><span class="ident" id="1491176">t</span><span class="op" id="1491177">)</span>&nbsp;<span class="op" id="1491179">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491183">memmove</span><span class="op" id="1491190">(</span><span class="ident" id="1491191">unsafe</span><span class="op" id="1491197">.</span><span class="ident" id="1491198">Pointer</span><span class="op" id="1491205">(</span><span class="op" id="1491206">&amp;</span><span class="ident" id="1491207">r</span><span class="op" id="1491208">)</span><span class="op" id="1491209">,</span>&nbsp;<span class="ident" id="1491211">unsafe</span><span class="op" id="1491217">.</span><span class="ident" id="1491218">Pointer</span><span class="op" id="1491225">(</span><span class="op" id="1491226">&amp;</span><span class="ident" id="1491227">ip</span><span class="op" id="1491229">.</span><span class="ident" id="1491230">data</span><span class="op" id="1491234">)</span><span class="op" id="1491235">,</span>&nbsp;<span class="ident" id="1491237">size</span><span class="op" id="1491241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491244">}</span>&nbsp;<span class="keyword" id="1491246">else</span>&nbsp;<span class="op" id="1491251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491255">memmove</span><span class="op" id="1491262">(</span><span class="ident" id="1491263">unsafe</span><span class="op" id="1491269">.</span><span class="ident" id="1491270">Pointer</span><span class="op" id="1491277">(</span><span class="op" id="1491278">&amp;</span><span class="ident" id="1491279">r</span><span class="op" id="1491280">)</span><span class="op" id="1491281">,</span>&nbsp;<span class="ident" id="1491283">ip</span><span class="op" id="1491285">.</span><span class="ident" id="1491286">data</span><span class="op" id="1491290">,</span>&nbsp;<span class="ident" id="1491292">size</span><span class="op" id="1491296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1491302">return</span><br>
<span class="lineno">190</span><span class="op" id="1491309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1491312">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1491325">func</span>&nbsp;<span class="ident" id="1491330">assertI2T2</span><span class="op" id="1491340">(</span><span class="ident" id="1491341">t</span>&nbsp;<span class="op" id="1491343">*</span><span class="ident" id="1491344">_type</span><span class="op" id="1491349">,</span>&nbsp;<span class="ident" id="1491351">i</span>&nbsp;<span class="ident" id="1491353">fInterface</span><span class="op" id="1491363">)</span>&nbsp;<span class="op" id="1491365">(</span><span class="ident" id="1491366">r</span>&nbsp;<span class="builtintype" id="1491368">byte</span><span class="op" id="1491372">)</span>&nbsp;<span class="op" id="1491374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491377">ip</span>&nbsp;<span class="op" id="1491380">:=</span>&nbsp;<span class="op" id="1491383">(</span><span class="op" id="1491384">*</span><span class="ident" id="1491385">iface</span><span class="op" id="1491390">)</span><span class="op" id="1491391">(</span><span class="ident" id="1491392">unsafe</span><span class="op" id="1491398">.</span><span class="ident" id="1491399">Pointer</span><span class="op" id="1491406">(</span><span class="op" id="1491407">&amp;</span><span class="ident" id="1491408">i</span><span class="op" id="1491409">)</span><span class="op" id="1491410">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491413">size</span>&nbsp;<span class="op" id="1491418">:=</span>&nbsp;<span class="builtintype" id="1491421">uintptr</span><span class="op" id="1491428">(</span><span class="ident" id="1491429">t</span><span class="op" id="1491430">.</span><span class="ident" id="1491431">size</span><span class="op" id="1491435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491438">ok</span>&nbsp;<span class="op" id="1491441">:=</span>&nbsp;<span class="op" id="1491444">(</span><span class="op" id="1491445">*</span><span class="builtintype" id="1491446">bool</span><span class="op" id="1491450">)</span><span class="op" id="1491451">(</span><span class="ident" id="1491452">add</span><span class="op" id="1491455">(</span><span class="ident" id="1491456">unsafe</span><span class="op" id="1491462">.</span><span class="ident" id="1491463">Pointer</span><span class="op" id="1491470">(</span><span class="op" id="1491471">&amp;</span><span class="ident" id="1491472">r</span><span class="op" id="1491473">)</span><span class="op" id="1491474">,</span>&nbsp;<span class="ident" id="1491476">size</span><span class="op" id="1491480">)</span><span class="op" id="1491481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491484">tab</span>&nbsp;<span class="op" id="1491488">:=</span>&nbsp;<span class="ident" id="1491491">ip</span><span class="op" id="1491493">.</span><span class="ident" id="1491494">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1491499">if</span>&nbsp;<span class="ident" id="1491502">tab</span>&nbsp;<span class="op" id="1491506">==</span>&nbsp;<span class="builtintype" id="1491509">nil</span>&nbsp;<span class="op" id="1491513">||</span>&nbsp;<span class="ident" id="1491516">tab</span><span class="op" id="1491519">.</span><span class="ident" id="1491520">_type</span>&nbsp;<span class="op" id="1491526">!=</span>&nbsp;<span class="ident" id="1491529">t</span>&nbsp;<span class="op" id="1491531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491535">*</span><span class="ident" id="1491536">ok</span>&nbsp;<span class="op" id="1491539">=</span>&nbsp;<span class="builtintype" id="1491541">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491549">memclr</span><span class="op" id="1491555">(</span><span class="ident" id="1491556">unsafe</span><span class="op" id="1491562">.</span><span class="ident" id="1491563">Pointer</span><span class="op" id="1491570">(</span><span class="op" id="1491571">&amp;</span><span class="ident" id="1491572">r</span><span class="op" id="1491573">)</span><span class="op" id="1491574">,</span>&nbsp;<span class="ident" id="1491576">size</span><span class="op" id="1491580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1491584">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491595">*</span><span class="ident" id="1491596">ok</span>&nbsp;<span class="op" id="1491599">=</span>&nbsp;<span class="builtintype" id="1491601">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1491607">if</span>&nbsp;<span class="ident" id="1491610">isDirectIface</span><span class="op" id="1491623">(</span><span class="ident" id="1491624">t</span><span class="op" id="1491625">)</span>&nbsp;<span class="op" id="1491627">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491631">memmove</span><span class="op" id="1491638">(</span><span class="ident" id="1491639">unsafe</span><span class="op" id="1491645">.</span><span class="ident" id="1491646">Pointer</span><span class="op" id="1491653">(</span><span class="op" id="1491654">&amp;</span><span class="ident" id="1491655">r</span><span class="op" id="1491656">)</span><span class="op" id="1491657">,</span>&nbsp;<span class="ident" id="1491659">unsafe</span><span class="op" id="1491665">.</span><span class="ident" id="1491666">Pointer</span><span class="op" id="1491673">(</span><span class="op" id="1491674">&amp;</span><span class="ident" id="1491675">ip</span><span class="op" id="1491677">.</span><span class="ident" id="1491678">data</span><span class="op" id="1491682">)</span><span class="op" id="1491683">,</span>&nbsp;<span class="ident" id="1491685">size</span><span class="op" id="1491689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491692">}</span>&nbsp;<span class="keyword" id="1491694">else</span>&nbsp;<span class="op" id="1491699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491703">memmove</span><span class="op" id="1491710">(</span><span class="ident" id="1491711">unsafe</span><span class="op" id="1491717">.</span><span class="ident" id="1491718">Pointer</span><span class="op" id="1491725">(</span><span class="op" id="1491726">&amp;</span><span class="ident" id="1491727">r</span><span class="op" id="1491728">)</span><span class="op" id="1491729">,</span>&nbsp;<span class="ident" id="1491731">ip</span><span class="op" id="1491733">.</span><span class="ident" id="1491734">data</span><span class="op" id="1491738">,</span>&nbsp;<span class="ident" id="1491740">size</span><span class="op" id="1491744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1491747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1491750">return</span><br>
<span class="lineno">210</span><span class="op" id="1491757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1491760">func</span>&nbsp;<span class="ident" id="1491765">assertI2TOK</span><span class="op" id="1491776">(</span><span class="ident" id="1491777">t</span>&nbsp;<span class="op" id="1491779">*</span><span class="ident" id="1491780">_type</span><span class="op" id="1491785">,</span>&nbsp;<span class="ident" id="1491787">i</span>&nbsp;<span class="ident" id="1491789">fInterface</span><span class="op" id="1491799">)</span>&nbsp;<span class="builtintype" id="1491801">bool</span>&nbsp;<span class="op" id="1491806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491809">ip</span>&nbsp;<span class="op" id="1491812">:=</span>&nbsp;<span class="op" id="1491815">(</span><span class="op" id="1491816">*</span><span class="ident" id="1491817">iface</span><span class="op" id="1491822">)</span><span class="op" id="1491823">(</span><span class="ident" id="1491824">unsafe</span><span class="op" id="1491830">.</span><span class="ident" id="1491831">Pointer</span><span class="op" id="1491838">(</span><span class="op" id="1491839">&amp;</span><span class="ident" id="1491840">i</span><span class="op" id="1491841">)</span><span class="op" id="1491842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491845">tab</span>&nbsp;<span class="op" id="1491849">:=</span>&nbsp;<span class="ident" id="1491852">ip</span><span class="op" id="1491854">.</span><span class="ident" id="1491855">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1491860">return</span>&nbsp;<span class="ident" id="1491867">tab</span>&nbsp;<span class="op" id="1491871">!=</span>&nbsp;<span class="builtintype" id="1491874">nil</span>&nbsp;<span class="op" id="1491878">&amp;&amp;</span>&nbsp;<span class="ident" id="1491881">tab</span><span class="op" id="1491884">.</span><span class="ident" id="1491885">_type</span>&nbsp;<span class="op" id="1491891">==</span>&nbsp;<span class="ident" id="1491894">t</span><br>
<span class="lineno"></span><span class="op" id="1491896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1491899">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1491912">func</span>&nbsp;<span class="ident" id="1491917">assertE2T</span><span class="op" id="1491926">(</span><span class="ident" id="1491927">t</span>&nbsp;<span class="op" id="1491929">*</span><span class="ident" id="1491930">_type</span><span class="op" id="1491935">,</span>&nbsp;<span class="ident" id="1491937">e</span>&nbsp;<span class="keyword" id="1491939">interface</span><span class="op" id="1491948">{</span><span class="op" id="1491949">}</span><span class="op" id="1491950">)</span>&nbsp;<span class="op" id="1491952">(</span><span class="ident" id="1491953">r</span>&nbsp;<span class="keyword" id="1491955">struct</span><span class="op" id="1491961">{</span><span class="op" id="1491962">}</span><span class="op" id="1491963">)</span>&nbsp;<span class="op" id="1491965">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1491968">ep</span>&nbsp;<span class="op" id="1491971">:=</span>&nbsp;<span class="op" id="1491974">(</span><span class="op" id="1491975">*</span><span class="ident" id="1491976">eface</span><span class="op" id="1491981">)</span><span class="op" id="1491982">(</span><span class="ident" id="1491983">unsafe</span><span class="op" id="1491989">.</span><span class="ident" id="1491990">Pointer</span><span class="op" id="1491997">(</span><span class="op" id="1491998">&amp;</span><span class="ident" id="1491999">e</span><span class="op" id="1492000">)</span><span class="op" id="1492001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492004">if</span>&nbsp;<span class="ident" id="1492007">ep</span><span class="op" id="1492009">.</span><span class="ident" id="1492010">_type</span>&nbsp;<span class="op" id="1492016">==</span>&nbsp;<span class="builtintype" id="1492019">nil</span>&nbsp;<span class="op" id="1492023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1492027">panic</span><span class="op" id="1492032">(</span><span class="op" id="1492033">&amp;</span><span class="ident" id="1492034">TypeAssertionError</span><span class="op" id="1492052">{</span><span class="string" id="1492053">&#34;&#34;</span><span class="op" id="1492055">,</span>&nbsp;<span class="string" id="1492057">&#34;&#34;</span><span class="op" id="1492059">,</span>&nbsp;<span class="op" id="1492061">*</span><span class="ident" id="1492062">t</span><span class="op" id="1492063">.</span><span class="ident" id="1492064">_string</span><span class="op" id="1492071">,</span>&nbsp;<span class="string" id="1492073">&#34;&#34;</span><span class="op" id="1492075">}</span><span class="op" id="1492076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492082">if</span>&nbsp;<span class="ident" id="1492085">ep</span><span class="op" id="1492087">.</span><span class="ident" id="1492088">_type</span>&nbsp;<span class="op" id="1492094">!=</span>&nbsp;<span class="ident" id="1492097">t</span>&nbsp;<span class="op" id="1492099">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1492103">panic</span><span class="op" id="1492108">(</span><span class="op" id="1492109">&amp;</span><span class="ident" id="1492110">TypeAssertionError</span><span class="op" id="1492128">{</span><span class="string" id="1492129">&#34;&#34;</span><span class="op" id="1492131">,</span>&nbsp;<span class="op" id="1492133">*</span><span class="ident" id="1492134">ep</span><span class="op" id="1492136">.</span><span class="ident" id="1492137">_type</span><span class="op" id="1492142">.</span><span class="ident" id="1492143">_string</span><span class="op" id="1492150">,</span>&nbsp;<span class="op" id="1492152">*</span><span class="ident" id="1492153">t</span><span class="op" id="1492154">.</span><span class="ident" id="1492155">_string</span><span class="op" id="1492162">,</span>&nbsp;<span class="string" id="1492164">&#34;&#34;</span><span class="op" id="1492166">}</span><span class="op" id="1492167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492173">size</span>&nbsp;<span class="op" id="1492178">:=</span>&nbsp;<span class="builtintype" id="1492181">uintptr</span><span class="op" id="1492188">(</span><span class="ident" id="1492189">t</span><span class="op" id="1492190">.</span><span class="ident" id="1492191">size</span><span class="op" id="1492195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492198">if</span>&nbsp;<span class="ident" id="1492201">isDirectIface</span><span class="op" id="1492214">(</span><span class="ident" id="1492215">t</span><span class="op" id="1492216">)</span>&nbsp;<span class="op" id="1492218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492222">memmove</span><span class="op" id="1492229">(</span><span class="ident" id="1492230">unsafe</span><span class="op" id="1492236">.</span><span class="ident" id="1492237">Pointer</span><span class="op" id="1492244">(</span><span class="op" id="1492245">&amp;</span><span class="ident" id="1492246">r</span><span class="op" id="1492247">)</span><span class="op" id="1492248">,</span>&nbsp;<span class="ident" id="1492250">unsafe</span><span class="op" id="1492256">.</span><span class="ident" id="1492257">Pointer</span><span class="op" id="1492264">(</span><span class="op" id="1492265">&amp;</span><span class="ident" id="1492266">ep</span><span class="op" id="1492268">.</span><span class="ident" id="1492269">data</span><span class="op" id="1492273">)</span><span class="op" id="1492274">,</span>&nbsp;<span class="ident" id="1492276">size</span><span class="op" id="1492280">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492283">}</span>&nbsp;<span class="keyword" id="1492285">else</span>&nbsp;<span class="op" id="1492290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492294">memmove</span><span class="op" id="1492301">(</span><span class="ident" id="1492302">unsafe</span><span class="op" id="1492308">.</span><span class="ident" id="1492309">Pointer</span><span class="op" id="1492316">(</span><span class="op" id="1492317">&amp;</span><span class="ident" id="1492318">r</span><span class="op" id="1492319">)</span><span class="op" id="1492320">,</span>&nbsp;<span class="ident" id="1492322">ep</span><span class="op" id="1492324">.</span><span class="ident" id="1492325">data</span><span class="op" id="1492329">,</span>&nbsp;<span class="ident" id="1492331">size</span><span class="op" id="1492335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492341">return</span><br>
<span class="lineno"></span><span class="op" id="1492348">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1492351">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1492364">func</span>&nbsp;<span class="ident" id="1492369">assertE2T2</span><span class="op" id="1492379">(</span><span class="ident" id="1492380">t</span>&nbsp;<span class="op" id="1492382">*</span><span class="ident" id="1492383">_type</span><span class="op" id="1492388">,</span>&nbsp;<span class="ident" id="1492390">e</span>&nbsp;<span class="keyword" id="1492392">interface</span><span class="op" id="1492401">{</span><span class="op" id="1492402">}</span><span class="op" id="1492403">)</span>&nbsp;<span class="op" id="1492405">(</span><span class="ident" id="1492406">r</span>&nbsp;<span class="builtintype" id="1492408">byte</span><span class="op" id="1492412">)</span>&nbsp;<span class="op" id="1492414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492417">ep</span>&nbsp;<span class="op" id="1492420">:=</span>&nbsp;<span class="op" id="1492423">(</span><span class="op" id="1492424">*</span><span class="ident" id="1492425">eface</span><span class="op" id="1492430">)</span><span class="op" id="1492431">(</span><span class="ident" id="1492432">unsafe</span><span class="op" id="1492438">.</span><span class="ident" id="1492439">Pointer</span><span class="op" id="1492446">(</span><span class="op" id="1492447">&amp;</span><span class="ident" id="1492448">e</span><span class="op" id="1492449">)</span><span class="op" id="1492450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492453">size</span>&nbsp;<span class="op" id="1492458">:=</span>&nbsp;<span class="builtintype" id="1492461">uintptr</span><span class="op" id="1492468">(</span><span class="ident" id="1492469">t</span><span class="op" id="1492470">.</span><span class="ident" id="1492471">size</span><span class="op" id="1492475">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492478">ok</span>&nbsp;<span class="op" id="1492481">:=</span>&nbsp;<span class="op" id="1492484">(</span><span class="op" id="1492485">*</span><span class="builtintype" id="1492486">bool</span><span class="op" id="1492490">)</span><span class="op" id="1492491">(</span><span class="ident" id="1492492">add</span><span class="op" id="1492495">(</span><span class="ident" id="1492496">unsafe</span><span class="op" id="1492502">.</span><span class="ident" id="1492503">Pointer</span><span class="op" id="1492510">(</span><span class="op" id="1492511">&amp;</span><span class="ident" id="1492512">r</span><span class="op" id="1492513">)</span><span class="op" id="1492514">,</span>&nbsp;<span class="ident" id="1492516">size</span><span class="op" id="1492520">)</span><span class="op" id="1492521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492524">if</span>&nbsp;<span class="ident" id="1492527">ep</span><span class="op" id="1492529">.</span><span class="ident" id="1492530">_type</span>&nbsp;<span class="op" id="1492536">!=</span>&nbsp;<span class="ident" id="1492539">t</span>&nbsp;<span class="op" id="1492541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492545">*</span><span class="ident" id="1492546">ok</span>&nbsp;<span class="op" id="1492549">=</span>&nbsp;<span class="builtintype" id="1492551">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492559">memclr</span><span class="op" id="1492565">(</span><span class="ident" id="1492566">unsafe</span><span class="op" id="1492572">.</span><span class="ident" id="1492573">Pointer</span><span class="op" id="1492580">(</span><span class="op" id="1492581">&amp;</span><span class="ident" id="1492582">r</span><span class="op" id="1492583">)</span><span class="op" id="1492584">,</span>&nbsp;<span class="ident" id="1492586">size</span><span class="op" id="1492590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492594">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492605">*</span><span class="ident" id="1492606">ok</span>&nbsp;<span class="op" id="1492609">=</span>&nbsp;<span class="builtintype" id="1492611">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492617">if</span>&nbsp;<span class="ident" id="1492620">isDirectIface</span><span class="op" id="1492633">(</span><span class="ident" id="1492634">t</span><span class="op" id="1492635">)</span>&nbsp;<span class="op" id="1492637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492641">memmove</span><span class="op" id="1492648">(</span><span class="ident" id="1492649">unsafe</span><span class="op" id="1492655">.</span><span class="ident" id="1492656">Pointer</span><span class="op" id="1492663">(</span><span class="op" id="1492664">&amp;</span><span class="ident" id="1492665">r</span><span class="op" id="1492666">)</span><span class="op" id="1492667">,</span>&nbsp;<span class="ident" id="1492669">unsafe</span><span class="op" id="1492675">.</span><span class="ident" id="1492676">Pointer</span><span class="op" id="1492683">(</span><span class="op" id="1492684">&amp;</span><span class="ident" id="1492685">ep</span><span class="op" id="1492687">.</span><span class="ident" id="1492688">data</span><span class="op" id="1492692">)</span><span class="op" id="1492693">,</span>&nbsp;<span class="ident" id="1492695">size</span><span class="op" id="1492699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492702">}</span>&nbsp;<span class="keyword" id="1492704">else</span>&nbsp;<span class="op" id="1492709">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492713">memmove</span><span class="op" id="1492720">(</span><span class="ident" id="1492721">unsafe</span><span class="op" id="1492727">.</span><span class="ident" id="1492728">Pointer</span><span class="op" id="1492735">(</span><span class="op" id="1492736">&amp;</span><span class="ident" id="1492737">r</span><span class="op" id="1492738">)</span><span class="op" id="1492739">,</span>&nbsp;<span class="ident" id="1492741">ep</span><span class="op" id="1492743">.</span><span class="ident" id="1492744">data</span><span class="op" id="1492748">,</span>&nbsp;<span class="ident" id="1492750">size</span><span class="op" id="1492754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1492757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492760">return</span><br>
<span class="lineno"></span><span class="op" id="1492767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1492770">func</span>&nbsp;<span class="ident" id="1492775">assertE2TOK</span><span class="op" id="1492786">(</span><span class="ident" id="1492787">t</span>&nbsp;<span class="op" id="1492789">*</span><span class="ident" id="1492790">_type</span><span class="op" id="1492795">,</span>&nbsp;<span class="ident" id="1492797">e</span>&nbsp;<span class="keyword" id="1492799">interface</span><span class="op" id="1492808">{</span><span class="op" id="1492809">}</span><span class="op" id="1492810">)</span>&nbsp;<span class="builtintype" id="1492812">bool</span>&nbsp;<span class="op" id="1492817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492820">ep</span>&nbsp;<span class="op" id="1492823">:=</span>&nbsp;<span class="op" id="1492826">(</span><span class="op" id="1492827">*</span><span class="ident" id="1492828">eface</span><span class="op" id="1492833">)</span><span class="op" id="1492834">(</span><span class="ident" id="1492835">unsafe</span><span class="op" id="1492841">.</span><span class="ident" id="1492842">Pointer</span><span class="op" id="1492849">(</span><span class="op" id="1492850">&amp;</span><span class="ident" id="1492851">e</span><span class="op" id="1492852">)</span><span class="op" id="1492853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492856">return</span>&nbsp;<span class="ident" id="1492863">t</span>&nbsp;<span class="op" id="1492865">==</span>&nbsp;<span class="ident" id="1492868">ep</span><span class="op" id="1492870">.</span><span class="ident" id="1492871">_type</span><br>
<span class="lineno"></span><span class="op" id="1492877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1492880">func</span>&nbsp;<span class="ident" id="1492885">convI2E</span><span class="op" id="1492892">(</span><span class="ident" id="1492893">i</span>&nbsp;<span class="ident" id="1492895">fInterface</span><span class="op" id="1492905">)</span>&nbsp;<span class="op" id="1492907">(</span><span class="ident" id="1492908">r</span>&nbsp;<span class="keyword" id="1492910">interface</span><span class="op" id="1492919">{</span><span class="op" id="1492920">}</span><span class="op" id="1492921">)</span>&nbsp;<span class="op" id="1492923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492926">ip</span>&nbsp;<span class="op" id="1492929">:=</span>&nbsp;<span class="op" id="1492932">(</span><span class="op" id="1492933">*</span><span class="ident" id="1492934">iface</span><span class="op" id="1492939">)</span><span class="op" id="1492940">(</span><span class="ident" id="1492941">unsafe</span><span class="op" id="1492947">.</span><span class="ident" id="1492948">Pointer</span><span class="op" id="1492955">(</span><span class="op" id="1492956">&amp;</span><span class="ident" id="1492957">i</span><span class="op" id="1492958">)</span><span class="op" id="1492959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1492962">tab</span>&nbsp;<span class="op" id="1492966">:=</span>&nbsp;<span class="ident" id="1492969">ip</span><span class="op" id="1492971">.</span><span class="ident" id="1492972">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492977">if</span>&nbsp;<span class="ident" id="1492980">tab</span>&nbsp;<span class="op" id="1492984">==</span>&nbsp;<span class="builtintype" id="1492987">nil</span>&nbsp;<span class="op" id="1492991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1492995">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1493003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493006">rp</span>&nbsp;<span class="op" id="1493009">:=</span>&nbsp;<span class="op" id="1493012">(</span><span class="op" id="1493013">*</span><span class="ident" id="1493014">eface</span><span class="op" id="1493019">)</span><span class="op" id="1493020">(</span><span class="ident" id="1493021">unsafe</span><span class="op" id="1493027">.</span><span class="ident" id="1493028">Pointer</span><span class="op" id="1493035">(</span><span class="op" id="1493036">&amp;</span><span class="ident" id="1493037">r</span><span class="op" id="1493038">)</span><span class="op" id="1493039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493042">rp</span><span class="op" id="1493044">.</span><span class="ident" id="1493045">_type</span>&nbsp;<span class="op" id="1493051">=</span>&nbsp;<span class="ident" id="1493053">tab</span><span class="op" id="1493056">.</span><span class="ident" id="1493057">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493064">rp</span><span class="op" id="1493066">.</span><span class="ident" id="1493067">data</span>&nbsp;<span class="op" id="1493072">=</span>&nbsp;<span class="ident" id="1493074">ip</span><span class="op" id="1493076">.</span><span class="ident" id="1493077">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493083">return</span><br>
<span class="lineno">270</span><span class="op" id="1493090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1493093">func</span>&nbsp;<span class="ident" id="1493098">assertI2E</span><span class="op" id="1493107">(</span><span class="ident" id="1493108">inter</span>&nbsp;<span class="op" id="1493114">*</span><span class="ident" id="1493115">interfacetype</span><span class="op" id="1493128">,</span>&nbsp;<span class="ident" id="1493130">i</span>&nbsp;<span class="ident" id="1493132">fInterface</span><span class="op" id="1493142">)</span>&nbsp;<span class="op" id="1493144">(</span><span class="ident" id="1493145">r</span>&nbsp;<span class="keyword" id="1493147">interface</span><span class="op" id="1493156">{</span><span class="op" id="1493157">}</span><span class="op" id="1493158">)</span>&nbsp;<span class="op" id="1493160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493163">ip</span>&nbsp;<span class="op" id="1493166">:=</span>&nbsp;<span class="op" id="1493169">(</span><span class="op" id="1493170">*</span><span class="ident" id="1493171">iface</span><span class="op" id="1493176">)</span><span class="op" id="1493177">(</span><span class="ident" id="1493178">unsafe</span><span class="op" id="1493184">.</span><span class="ident" id="1493185">Pointer</span><span class="op" id="1493192">(</span><span class="op" id="1493193">&amp;</span><span class="ident" id="1493194">i</span><span class="op" id="1493195">)</span><span class="op" id="1493196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493199">tab</span>&nbsp;<span class="op" id="1493203">:=</span>&nbsp;<span class="ident" id="1493206">ip</span><span class="op" id="1493208">.</span><span class="ident" id="1493209">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493214">if</span>&nbsp;<span class="ident" id="1493217">tab</span>&nbsp;<span class="op" id="1493221">==</span>&nbsp;<span class="builtintype" id="1493224">nil</span>&nbsp;<span class="op" id="1493228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1493232">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1493291">panic</span><span class="op" id="1493296">(</span><span class="op" id="1493297">&amp;</span><span class="ident" id="1493298">TypeAssertionError</span><span class="op" id="1493316">{</span><span class="string" id="1493317">&#34;&#34;</span><span class="op" id="1493319">,</span>&nbsp;<span class="string" id="1493321">&#34;&#34;</span><span class="op" id="1493323">,</span>&nbsp;<span class="op" id="1493325">*</span><span class="ident" id="1493326">inter</span><span class="op" id="1493331">.</span><span class="ident" id="1493332">typ</span><span class="op" id="1493335">.</span><span class="ident" id="1493336">_string</span><span class="op" id="1493343">,</span>&nbsp;<span class="string" id="1493345">&#34;&#34;</span><span class="op" id="1493347">}</span><span class="op" id="1493348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1493351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493354">rp</span>&nbsp;<span class="op" id="1493357">:=</span>&nbsp;<span class="op" id="1493360">(</span><span class="op" id="1493361">*</span><span class="ident" id="1493362">eface</span><span class="op" id="1493367">)</span><span class="op" id="1493368">(</span><span class="ident" id="1493369">unsafe</span><span class="op" id="1493375">.</span><span class="ident" id="1493376">Pointer</span><span class="op" id="1493383">(</span><span class="op" id="1493384">&amp;</span><span class="ident" id="1493385">r</span><span class="op" id="1493386">)</span><span class="op" id="1493387">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493390">rp</span><span class="op" id="1493392">.</span><span class="ident" id="1493393">_type</span>&nbsp;<span class="op" id="1493399">=</span>&nbsp;<span class="ident" id="1493401">tab</span><span class="op" id="1493404">.</span><span class="ident" id="1493405">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493412">rp</span><span class="op" id="1493414">.</span><span class="ident" id="1493415">data</span>&nbsp;<span class="op" id="1493420">=</span>&nbsp;<span class="ident" id="1493422">ip</span><span class="op" id="1493424">.</span><span class="ident" id="1493425">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493431">return</span><br>
<span class="lineno"></span><span class="op" id="1493438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1493441">func</span>&nbsp;<span class="ident" id="1493446">assertI2E2</span><span class="op" id="1493456">(</span><span class="ident" id="1493457">inter</span>&nbsp;<span class="op" id="1493463">*</span><span class="ident" id="1493464">interfacetype</span><span class="op" id="1493477">,</span>&nbsp;<span class="ident" id="1493479">i</span>&nbsp;<span class="ident" id="1493481">fInterface</span><span class="op" id="1493491">)</span>&nbsp;<span class="op" id="1493493">(</span><span class="ident" id="1493494">r</span>&nbsp;<span class="keyword" id="1493496">interface</span><span class="op" id="1493505">{</span><span class="op" id="1493506">}</span><span class="op" id="1493507">,</span>&nbsp;<span class="ident" id="1493509">ok</span>&nbsp;<span class="builtintype" id="1493512">bool</span><span class="op" id="1493516">)</span>&nbsp;<span class="op" id="1493518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493521">ip</span>&nbsp;<span class="op" id="1493524">:=</span>&nbsp;<span class="op" id="1493527">(</span><span class="op" id="1493528">*</span><span class="ident" id="1493529">iface</span><span class="op" id="1493534">)</span><span class="op" id="1493535">(</span><span class="ident" id="1493536">unsafe</span><span class="op" id="1493542">.</span><span class="ident" id="1493543">Pointer</span><span class="op" id="1493550">(</span><span class="op" id="1493551">&amp;</span><span class="ident" id="1493552">i</span><span class="op" id="1493553">)</span><span class="op" id="1493554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493557">tab</span>&nbsp;<span class="op" id="1493561">:=</span>&nbsp;<span class="ident" id="1493564">ip</span><span class="op" id="1493566">.</span><span class="ident" id="1493567">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493572">if</span>&nbsp;<span class="ident" id="1493575">tab</span>&nbsp;<span class="op" id="1493579">==</span>&nbsp;<span class="builtintype" id="1493582">nil</span>&nbsp;<span class="op" id="1493586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493590">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1493598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493601">rp</span>&nbsp;<span class="op" id="1493604">:=</span>&nbsp;<span class="op" id="1493607">(</span><span class="op" id="1493608">*</span><span class="ident" id="1493609">eface</span><span class="op" id="1493614">)</span><span class="op" id="1493615">(</span><span class="ident" id="1493616">unsafe</span><span class="op" id="1493622">.</span><span class="ident" id="1493623">Pointer</span><span class="op" id="1493630">(</span><span class="op" id="1493631">&amp;</span><span class="ident" id="1493632">r</span><span class="op" id="1493633">)</span><span class="op" id="1493634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493637">rp</span><span class="op" id="1493639">.</span><span class="ident" id="1493640">_type</span>&nbsp;<span class="op" id="1493646">=</span>&nbsp;<span class="ident" id="1493648">tab</span><span class="op" id="1493651">.</span><span class="ident" id="1493652">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493659">rp</span><span class="op" id="1493661">.</span><span class="ident" id="1493662">data</span>&nbsp;<span class="op" id="1493667">=</span>&nbsp;<span class="ident" id="1493669">ip</span><span class="op" id="1493671">.</span><span class="ident" id="1493672">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493678">ok</span>&nbsp;<span class="op" id="1493681">=</span>&nbsp;<span class="builtintype" id="1493683">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493689">return</span><br>
<span class="lineno"></span><span class="op" id="1493696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1493699">func</span>&nbsp;<span class="ident" id="1493704">convI2I</span><span class="op" id="1493711">(</span><span class="ident" id="1493712">inter</span>&nbsp;<span class="op" id="1493718">*</span><span class="ident" id="1493719">interfacetype</span><span class="op" id="1493732">,</span>&nbsp;<span class="ident" id="1493734">i</span>&nbsp;<span class="ident" id="1493736">fInterface</span><span class="op" id="1493746">)</span>&nbsp;<span class="op" id="1493748">(</span><span class="ident" id="1493749">r</span>&nbsp;<span class="ident" id="1493751">fInterface</span><span class="op" id="1493761">)</span>&nbsp;<span class="op" id="1493763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493766">ip</span>&nbsp;<span class="op" id="1493769">:=</span>&nbsp;<span class="op" id="1493772">(</span><span class="op" id="1493773">*</span><span class="ident" id="1493774">iface</span><span class="op" id="1493779">)</span><span class="op" id="1493780">(</span><span class="ident" id="1493781">unsafe</span><span class="op" id="1493787">.</span><span class="ident" id="1493788">Pointer</span><span class="op" id="1493795">(</span><span class="op" id="1493796">&amp;</span><span class="ident" id="1493797">i</span><span class="op" id="1493798">)</span><span class="op" id="1493799">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493802">tab</span>&nbsp;<span class="op" id="1493806">:=</span>&nbsp;<span class="ident" id="1493809">ip</span><span class="op" id="1493811">.</span><span class="ident" id="1493812">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493817">if</span>&nbsp;<span class="ident" id="1493820">tab</span>&nbsp;<span class="op" id="1493824">==</span>&nbsp;<span class="builtintype" id="1493827">nil</span>&nbsp;<span class="op" id="1493831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493835">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1493843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493846">rp</span>&nbsp;<span class="op" id="1493849">:=</span>&nbsp;<span class="op" id="1493852">(</span><span class="op" id="1493853">*</span><span class="ident" id="1493854">iface</span><span class="op" id="1493859">)</span><span class="op" id="1493860">(</span><span class="ident" id="1493861">unsafe</span><span class="op" id="1493867">.</span><span class="ident" id="1493868">Pointer</span><span class="op" id="1493875">(</span><span class="op" id="1493876">&amp;</span><span class="ident" id="1493877">r</span><span class="op" id="1493878">)</span><span class="op" id="1493879">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493882">if</span>&nbsp;<span class="ident" id="1493885">tab</span><span class="op" id="1493888">.</span><span class="ident" id="1493889">inter</span>&nbsp;<span class="op" id="1493895">==</span>&nbsp;<span class="ident" id="1493898">inter</span>&nbsp;<span class="op" id="1493904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493908">rp</span><span class="op" id="1493910">.</span><span class="ident" id="1493911">tab</span>&nbsp;<span class="op" id="1493915">=</span>&nbsp;<span class="ident" id="1493917">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493923">rp</span><span class="op" id="1493925">.</span><span class="ident" id="1493926">data</span>&nbsp;<span class="op" id="1493931">=</span>&nbsp;<span class="ident" id="1493933">ip</span><span class="op" id="1493935">.</span><span class="ident" id="1493936">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1493943">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1493951">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493954">rp</span><span class="op" id="1493956">.</span><span class="ident" id="1493957">tab</span>&nbsp;<span class="op" id="1493961">=</span>&nbsp;<span class="ident" id="1493963">getitab</span><span class="op" id="1493970">(</span><span class="ident" id="1493971">inter</span><span class="op" id="1493976">,</span>&nbsp;<span class="ident" id="1493978">tab</span><span class="op" id="1493981">.</span><span class="ident" id="1493982">_type</span><span class="op" id="1493987">,</span>&nbsp;<span class="builtintype" id="1493989">false</span><span class="op" id="1493994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1493997">rp</span><span class="op" id="1493999">.</span><span class="ident" id="1494000">data</span>&nbsp;<span class="op" id="1494005">=</span>&nbsp;<span class="ident" id="1494007">ip</span><span class="op" id="1494009">.</span><span class="ident" id="1494010">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494016">return</span><br>
<span class="lineno"></span><span class="op" id="1494023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1494026">func</span>&nbsp;<span class="ident" id="1494031">assertI2I</span><span class="op" id="1494040">(</span><span class="ident" id="1494041">inter</span>&nbsp;<span class="op" id="1494047">*</span><span class="ident" id="1494048">interfacetype</span><span class="op" id="1494061">,</span>&nbsp;<span class="ident" id="1494063">i</span>&nbsp;<span class="ident" id="1494065">fInterface</span><span class="op" id="1494075">)</span>&nbsp;<span class="op" id="1494077">(</span><span class="ident" id="1494078">r</span>&nbsp;<span class="ident" id="1494080">fInterface</span><span class="op" id="1494090">)</span>&nbsp;<span class="op" id="1494092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494095">ip</span>&nbsp;<span class="op" id="1494098">:=</span>&nbsp;<span class="op" id="1494101">(</span><span class="op" id="1494102">*</span><span class="ident" id="1494103">iface</span><span class="op" id="1494108">)</span><span class="op" id="1494109">(</span><span class="ident" id="1494110">unsafe</span><span class="op" id="1494116">.</span><span class="ident" id="1494117">Pointer</span><span class="op" id="1494124">(</span><span class="op" id="1494125">&amp;</span><span class="ident" id="1494126">i</span><span class="op" id="1494127">)</span><span class="op" id="1494128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494131">tab</span>&nbsp;<span class="op" id="1494135">:=</span>&nbsp;<span class="ident" id="1494138">ip</span><span class="op" id="1494140">.</span><span class="ident" id="1494141">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494146">if</span>&nbsp;<span class="ident" id="1494149">tab</span>&nbsp;<span class="op" id="1494153">==</span>&nbsp;<span class="builtintype" id="1494156">nil</span>&nbsp;<span class="op" id="1494160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1494164">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1494223">panic</span><span class="op" id="1494228">(</span><span class="op" id="1494229">&amp;</span><span class="ident" id="1494230">TypeAssertionError</span><span class="op" id="1494248">{</span><span class="string" id="1494249">&#34;&#34;</span><span class="op" id="1494251">,</span>&nbsp;<span class="string" id="1494253">&#34;&#34;</span><span class="op" id="1494255">,</span>&nbsp;<span class="op" id="1494257">*</span><span class="ident" id="1494258">inter</span><span class="op" id="1494263">.</span><span class="ident" id="1494264">typ</span><span class="op" id="1494267">.</span><span class="ident" id="1494268">_string</span><span class="op" id="1494275">,</span>&nbsp;<span class="string" id="1494277">&#34;&#34;</span><span class="op" id="1494279">}</span><span class="op" id="1494280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1494283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494286">rp</span>&nbsp;<span class="op" id="1494289">:=</span>&nbsp;<span class="op" id="1494292">(</span><span class="op" id="1494293">*</span><span class="ident" id="1494294">iface</span><span class="op" id="1494299">)</span><span class="op" id="1494300">(</span><span class="ident" id="1494301">unsafe</span><span class="op" id="1494307">.</span><span class="ident" id="1494308">Pointer</span><span class="op" id="1494315">(</span><span class="op" id="1494316">&amp;</span><span class="ident" id="1494317">r</span><span class="op" id="1494318">)</span><span class="op" id="1494319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494322">if</span>&nbsp;<span class="ident" id="1494325">tab</span><span class="op" id="1494328">.</span><span class="ident" id="1494329">inter</span>&nbsp;<span class="op" id="1494335">==</span>&nbsp;<span class="ident" id="1494338">inter</span>&nbsp;<span class="op" id="1494344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494348">rp</span><span class="op" id="1494350">.</span><span class="ident" id="1494351">tab</span>&nbsp;<span class="op" id="1494355">=</span>&nbsp;<span class="ident" id="1494357">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494363">rp</span><span class="op" id="1494365">.</span><span class="ident" id="1494366">data</span>&nbsp;<span class="op" id="1494371">=</span>&nbsp;<span class="ident" id="1494373">ip</span><span class="op" id="1494375">.</span><span class="ident" id="1494376">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494383">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1494391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494394">rp</span><span class="op" id="1494396">.</span><span class="ident" id="1494397">tab</span>&nbsp;<span class="op" id="1494401">=</span>&nbsp;<span class="ident" id="1494403">getitab</span><span class="op" id="1494410">(</span><span class="ident" id="1494411">inter</span><span class="op" id="1494416">,</span>&nbsp;<span class="ident" id="1494418">tab</span><span class="op" id="1494421">.</span><span class="ident" id="1494422">_type</span><span class="op" id="1494427">,</span>&nbsp;<span class="builtintype" id="1494429">false</span><span class="op" id="1494434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494437">rp</span><span class="op" id="1494439">.</span><span class="ident" id="1494440">data</span>&nbsp;<span class="op" id="1494445">=</span>&nbsp;<span class="ident" id="1494447">ip</span><span class="op" id="1494449">.</span><span class="ident" id="1494450">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494456">return</span><br>
<span class="lineno"></span><span class="op" id="1494463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1494466">func</span>&nbsp;<span class="ident" id="1494471">assertI2I2</span><span class="op" id="1494481">(</span><span class="ident" id="1494482">inter</span>&nbsp;<span class="op" id="1494488">*</span><span class="ident" id="1494489">interfacetype</span><span class="op" id="1494502">,</span>&nbsp;<span class="ident" id="1494504">i</span>&nbsp;<span class="ident" id="1494506">fInterface</span><span class="op" id="1494516">)</span>&nbsp;<span class="op" id="1494518">(</span><span class="ident" id="1494519">r</span>&nbsp;<span class="ident" id="1494521">fInterface</span><span class="op" id="1494531">,</span>&nbsp;<span class="ident" id="1494533">ok</span>&nbsp;<span class="builtintype" id="1494536">bool</span><span class="op" id="1494540">)</span>&nbsp;<span class="op" id="1494542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494545">ip</span>&nbsp;<span class="op" id="1494548">:=</span>&nbsp;<span class="op" id="1494551">(</span><span class="op" id="1494552">*</span><span class="ident" id="1494553">iface</span><span class="op" id="1494558">)</span><span class="op" id="1494559">(</span><span class="ident" id="1494560">unsafe</span><span class="op" id="1494566">.</span><span class="ident" id="1494567">Pointer</span><span class="op" id="1494574">(</span><span class="op" id="1494575">&amp;</span><span class="ident" id="1494576">i</span><span class="op" id="1494577">)</span><span class="op" id="1494578">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494581">tab</span>&nbsp;<span class="op" id="1494585">:=</span>&nbsp;<span class="ident" id="1494588">ip</span><span class="op" id="1494590">.</span><span class="ident" id="1494591">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494596">if</span>&nbsp;<span class="ident" id="1494599">tab</span>&nbsp;<span class="op" id="1494603">==</span>&nbsp;<span class="builtintype" id="1494606">nil</span>&nbsp;<span class="op" id="1494610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494614">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1494622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494625">rp</span>&nbsp;<span class="op" id="1494628">:=</span>&nbsp;<span class="op" id="1494631">(</span><span class="op" id="1494632">*</span><span class="ident" id="1494633">iface</span><span class="op" id="1494638">)</span><span class="op" id="1494639">(</span><span class="ident" id="1494640">unsafe</span><span class="op" id="1494646">.</span><span class="ident" id="1494647">Pointer</span><span class="op" id="1494654">(</span><span class="op" id="1494655">&amp;</span><span class="ident" id="1494656">r</span><span class="op" id="1494657">)</span><span class="op" id="1494658">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494661">if</span>&nbsp;<span class="ident" id="1494664">tab</span><span class="op" id="1494667">.</span><span class="ident" id="1494668">inter</span>&nbsp;<span class="op" id="1494674">==</span>&nbsp;<span class="ident" id="1494677">inter</span>&nbsp;<span class="op" id="1494683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494687">rp</span><span class="op" id="1494689">.</span><span class="ident" id="1494690">tab</span>&nbsp;<span class="op" id="1494694">=</span>&nbsp;<span class="ident" id="1494696">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494702">rp</span><span class="op" id="1494704">.</span><span class="ident" id="1494705">data</span>&nbsp;<span class="op" id="1494710">=</span>&nbsp;<span class="ident" id="1494712">ip</span><span class="op" id="1494714">.</span><span class="ident" id="1494715">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494722">ok</span>&nbsp;<span class="op" id="1494725">=</span>&nbsp;<span class="builtintype" id="1494727">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494734">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1494742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494745">tab</span>&nbsp;<span class="op" id="1494749">=</span>&nbsp;<span class="ident" id="1494751">getitab</span><span class="op" id="1494758">(</span><span class="ident" id="1494759">inter</span><span class="op" id="1494764">,</span>&nbsp;<span class="ident" id="1494766">tab</span><span class="op" id="1494769">.</span><span class="ident" id="1494770">_type</span><span class="op" id="1494775">,</span>&nbsp;<span class="builtintype" id="1494777">true</span><span class="op" id="1494781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494784">if</span>&nbsp;<span class="ident" id="1494787">tab</span>&nbsp;<span class="op" id="1494791">==</span>&nbsp;<span class="builtintype" id="1494794">nil</span>&nbsp;<span class="op" id="1494798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494802">rp</span><span class="op" id="1494804">.</span><span class="ident" id="1494805">data</span>&nbsp;<span class="op" id="1494810">=</span>&nbsp;<span class="builtintype" id="1494812">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494818">rp</span><span class="op" id="1494820">.</span><span class="ident" id="1494821">tab</span>&nbsp;<span class="op" id="1494825">=</span>&nbsp;<span class="builtintype" id="1494827">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494833">ok</span>&nbsp;<span class="op" id="1494836">=</span>&nbsp;<span class="builtintype" id="1494838">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494846">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1494854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494857">rp</span><span class="op" id="1494859">.</span><span class="ident" id="1494860">tab</span>&nbsp;<span class="op" id="1494864">=</span>&nbsp;<span class="ident" id="1494866">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494871">rp</span><span class="op" id="1494873">.</span><span class="ident" id="1494874">data</span>&nbsp;<span class="op" id="1494879">=</span>&nbsp;<span class="ident" id="1494881">ip</span><span class="op" id="1494883">.</span><span class="ident" id="1494884">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494890">ok</span>&nbsp;<span class="op" id="1494893">=</span>&nbsp;<span class="builtintype" id="1494895">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1494901">return</span><br>
<span class="lineno"></span><span class="op" id="1494908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1494911">func</span>&nbsp;<span class="ident" id="1494916">assertE2I</span><span class="op" id="1494925">(</span><span class="ident" id="1494926">inter</span>&nbsp;<span class="op" id="1494932">*</span><span class="ident" id="1494933">interfacetype</span><span class="op" id="1494946">,</span>&nbsp;<span class="ident" id="1494948">e</span>&nbsp;<span class="keyword" id="1494950">interface</span><span class="op" id="1494959">{</span><span class="op" id="1494960">}</span><span class="op" id="1494961">)</span>&nbsp;<span class="op" id="1494963">(</span><span class="ident" id="1494964">r</span>&nbsp;<span class="ident" id="1494966">fInterface</span><span class="op" id="1494976">)</span>&nbsp;<span class="op" id="1494978">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1494981">ep</span>&nbsp;<span class="op" id="1494984">:=</span>&nbsp;<span class="op" id="1494987">(</span><span class="op" id="1494988">*</span><span class="ident" id="1494989">eface</span><span class="op" id="1494994">)</span><span class="op" id="1494995">(</span><span class="ident" id="1494996">unsafe</span><span class="op" id="1495002">.</span><span class="ident" id="1495003">Pointer</span><span class="op" id="1495010">(</span><span class="op" id="1495011">&amp;</span><span class="ident" id="1495012">e</span><span class="op" id="1495013">)</span><span class="op" id="1495014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495017">t</span>&nbsp;<span class="op" id="1495019">:=</span>&nbsp;<span class="ident" id="1495022">ep</span><span class="op" id="1495024">.</span><span class="ident" id="1495025">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495032">if</span>&nbsp;<span class="ident" id="1495035">t</span>&nbsp;<span class="op" id="1495037">==</span>&nbsp;<span class="builtintype" id="1495040">nil</span>&nbsp;<span class="op" id="1495044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1495048">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1495107">panic</span><span class="op" id="1495112">(</span><span class="op" id="1495113">&amp;</span><span class="ident" id="1495114">TypeAssertionError</span><span class="op" id="1495132">{</span><span class="string" id="1495133">&#34;&#34;</span><span class="op" id="1495135">,</span>&nbsp;<span class="string" id="1495137">&#34;&#34;</span><span class="op" id="1495139">,</span>&nbsp;<span class="op" id="1495141">*</span><span class="ident" id="1495142">inter</span><span class="op" id="1495147">.</span><span class="ident" id="1495148">typ</span><span class="op" id="1495151">.</span><span class="ident" id="1495152">_string</span><span class="op" id="1495159">,</span>&nbsp;<span class="string" id="1495161">&#34;&#34;</span><span class="op" id="1495163">}</span><span class="op" id="1495164">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1495167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495170">rp</span>&nbsp;<span class="op" id="1495173">:=</span>&nbsp;<span class="op" id="1495176">(</span><span class="op" id="1495177">*</span><span class="ident" id="1495178">iface</span><span class="op" id="1495183">)</span><span class="op" id="1495184">(</span><span class="ident" id="1495185">unsafe</span><span class="op" id="1495191">.</span><span class="ident" id="1495192">Pointer</span><span class="op" id="1495199">(</span><span class="op" id="1495200">&amp;</span><span class="ident" id="1495201">r</span><span class="op" id="1495202">)</span><span class="op" id="1495203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495206">rp</span><span class="op" id="1495208">.</span><span class="ident" id="1495209">tab</span>&nbsp;<span class="op" id="1495213">=</span>&nbsp;<span class="ident" id="1495215">getitab</span><span class="op" id="1495222">(</span><span class="ident" id="1495223">inter</span><span class="op" id="1495228">,</span>&nbsp;<span class="ident" id="1495230">t</span><span class="op" id="1495231">,</span>&nbsp;<span class="builtintype" id="1495233">false</span><span class="op" id="1495238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495241">rp</span><span class="op" id="1495243">.</span><span class="ident" id="1495244">data</span>&nbsp;<span class="op" id="1495249">=</span>&nbsp;<span class="ident" id="1495251">ep</span><span class="op" id="1495253">.</span><span class="ident" id="1495254">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495260">return</span><br>
<span class="lineno">370</span><span class="op" id="1495267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1495270">func</span>&nbsp;<span class="ident" id="1495275">assertE2I2</span><span class="op" id="1495285">(</span><span class="ident" id="1495286">inter</span>&nbsp;<span class="op" id="1495292">*</span><span class="ident" id="1495293">interfacetype</span><span class="op" id="1495306">,</span>&nbsp;<span class="ident" id="1495308">e</span>&nbsp;<span class="keyword" id="1495310">interface</span><span class="op" id="1495319">{</span><span class="op" id="1495320">}</span><span class="op" id="1495321">)</span>&nbsp;<span class="op" id="1495323">(</span><span class="ident" id="1495324">r</span>&nbsp;<span class="ident" id="1495326">fInterface</span><span class="op" id="1495336">,</span>&nbsp;<span class="ident" id="1495338">ok</span>&nbsp;<span class="builtintype" id="1495341">bool</span><span class="op" id="1495345">)</span>&nbsp;<span class="op" id="1495347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495350">ep</span>&nbsp;<span class="op" id="1495353">:=</span>&nbsp;<span class="op" id="1495356">(</span><span class="op" id="1495357">*</span><span class="ident" id="1495358">eface</span><span class="op" id="1495363">)</span><span class="op" id="1495364">(</span><span class="ident" id="1495365">unsafe</span><span class="op" id="1495371">.</span><span class="ident" id="1495372">Pointer</span><span class="op" id="1495379">(</span><span class="op" id="1495380">&amp;</span><span class="ident" id="1495381">e</span><span class="op" id="1495382">)</span><span class="op" id="1495383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495386">t</span>&nbsp;<span class="op" id="1495388">:=</span>&nbsp;<span class="ident" id="1495391">ep</span><span class="op" id="1495393">.</span><span class="ident" id="1495394">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495401">if</span>&nbsp;<span class="ident" id="1495404">t</span>&nbsp;<span class="op" id="1495406">==</span>&nbsp;<span class="builtintype" id="1495409">nil</span>&nbsp;<span class="op" id="1495413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495417">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1495425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495428">tab</span>&nbsp;<span class="op" id="1495432">:=</span>&nbsp;<span class="ident" id="1495435">getitab</span><span class="op" id="1495442">(</span><span class="ident" id="1495443">inter</span><span class="op" id="1495448">,</span>&nbsp;<span class="ident" id="1495450">t</span><span class="op" id="1495451">,</span>&nbsp;<span class="builtintype" id="1495453">true</span><span class="op" id="1495457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495460">if</span>&nbsp;<span class="ident" id="1495463">tab</span>&nbsp;<span class="op" id="1495467">==</span>&nbsp;<span class="builtintype" id="1495470">nil</span>&nbsp;<span class="op" id="1495474">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495478">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1495486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495489">rp</span>&nbsp;<span class="op" id="1495492">:=</span>&nbsp;<span class="op" id="1495495">(</span><span class="op" id="1495496">*</span><span class="ident" id="1495497">iface</span><span class="op" id="1495502">)</span><span class="op" id="1495503">(</span><span class="ident" id="1495504">unsafe</span><span class="op" id="1495510">.</span><span class="ident" id="1495511">Pointer</span><span class="op" id="1495518">(</span><span class="op" id="1495519">&amp;</span><span class="ident" id="1495520">r</span><span class="op" id="1495521">)</span><span class="op" id="1495522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495525">rp</span><span class="op" id="1495527">.</span><span class="ident" id="1495528">tab</span>&nbsp;<span class="op" id="1495532">=</span>&nbsp;<span class="ident" id="1495534">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495539">rp</span><span class="op" id="1495541">.</span><span class="ident" id="1495542">data</span>&nbsp;<span class="op" id="1495547">=</span>&nbsp;<span class="ident" id="1495549">ep</span><span class="op" id="1495551">.</span><span class="ident" id="1495552">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495558">ok</span>&nbsp;<span class="op" id="1495561">=</span>&nbsp;<span class="builtintype" id="1495563">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495569">return</span><br>
<span class="lineno"></span><span class="op" id="1495576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1495579">func</span>&nbsp;<span class="ident" id="1495584">reflect_ifaceE2I</span><span class="op" id="1495600">(</span><span class="ident" id="1495601">inter</span>&nbsp;<span class="op" id="1495607">*</span><span class="ident" id="1495608">interfacetype</span><span class="op" id="1495621">,</span>&nbsp;<span class="ident" id="1495623">e</span>&nbsp;<span class="keyword" id="1495625">interface</span><span class="op" id="1495634">{</span><span class="op" id="1495635">}</span><span class="op" id="1495636">,</span>&nbsp;<span class="ident" id="1495638">dst</span>&nbsp;<span class="op" id="1495642">*</span><span class="ident" id="1495643">fInterface</span><span class="op" id="1495653">)</span>&nbsp;<span class="op" id="1495655">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1495658">*</span><span class="ident" id="1495659">dst</span>&nbsp;<span class="op" id="1495663">=</span>&nbsp;<span class="ident" id="1495665">assertE2I</span><span class="op" id="1495674">(</span><span class="ident" id="1495675">inter</span><span class="op" id="1495680">,</span>&nbsp;<span class="ident" id="1495682">e</span><span class="op" id="1495683">)</span><br>
<span class="lineno"></span><span class="op" id="1495685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1495688">func</span>&nbsp;<span class="ident" id="1495693">assertE2E</span><span class="op" id="1495702">(</span><span class="ident" id="1495703">inter</span>&nbsp;<span class="op" id="1495709">*</span><span class="ident" id="1495710">interfacetype</span><span class="op" id="1495723">,</span>&nbsp;<span class="ident" id="1495725">e</span>&nbsp;<span class="keyword" id="1495727">interface</span><span class="op" id="1495736">{</span><span class="op" id="1495737">}</span><span class="op" id="1495738">)</span>&nbsp;<span class="keyword" id="1495740">interface</span><span class="op" id="1495749">{</span><span class="op" id="1495750">}</span>&nbsp;<span class="op" id="1495752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1495755">ep</span>&nbsp;<span class="op" id="1495758">:=</span>&nbsp;<span class="op" id="1495761">(</span><span class="op" id="1495762">*</span><span class="ident" id="1495763">eface</span><span class="op" id="1495768">)</span><span class="op" id="1495769">(</span><span class="ident" id="1495770">unsafe</span><span class="op" id="1495776">.</span><span class="ident" id="1495777">Pointer</span><span class="op" id="1495784">(</span><span class="op" id="1495785">&amp;</span><span class="ident" id="1495786">e</span><span class="op" id="1495787">)</span><span class="op" id="1495788">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495791">if</span>&nbsp;<span class="ident" id="1495794">ep</span><span class="op" id="1495796">.</span><span class="ident" id="1495797">_type</span>&nbsp;<span class="op" id="1495803">==</span>&nbsp;<span class="builtintype" id="1495806">nil</span>&nbsp;<span class="op" id="1495810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1495814">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1495873">panic</span><span class="op" id="1495878">(</span><span class="op" id="1495879">&amp;</span><span class="ident" id="1495880">TypeAssertionError</span><span class="op" id="1495898">{</span><span class="string" id="1495899">&#34;&#34;</span><span class="op" id="1495901">,</span>&nbsp;<span class="string" id="1495903">&#34;&#34;</span><span class="op" id="1495905">,</span>&nbsp;<span class="op" id="1495907">*</span><span class="ident" id="1495908">inter</span><span class="op" id="1495913">.</span><span class="ident" id="1495914">typ</span><span class="op" id="1495917">.</span><span class="ident" id="1495918">_string</span><span class="op" id="1495925">,</span>&nbsp;<span class="string" id="1495927">&#34;&#34;</span><span class="op" id="1495929">}</span><span class="op" id="1495930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1495933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1495936">return</span>&nbsp;<span class="ident" id="1495943">e</span><br>
<span class="lineno">400</span><span class="op" id="1495945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1495948">func</span>&nbsp;<span class="ident" id="1495953">assertE2E2</span><span class="op" id="1495963">(</span><span class="ident" id="1495964">inter</span>&nbsp;<span class="op" id="1495970">*</span><span class="ident" id="1495971">interfacetype</span><span class="op" id="1495984">,</span>&nbsp;<span class="ident" id="1495986">e</span>&nbsp;<span class="keyword" id="1495988">interface</span><span class="op" id="1495997">{</span><span class="op" id="1495998">}</span><span class="op" id="1495999">)</span>&nbsp;<span class="op" id="1496001">(</span><span class="keyword" id="1496002">interface</span><span class="op" id="1496011">{</span><span class="op" id="1496012">}</span><span class="op" id="1496013">,</span>&nbsp;<span class="builtintype" id="1496015">bool</span><span class="op" id="1496019">)</span>&nbsp;<span class="op" id="1496021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1496024">ep</span>&nbsp;<span class="op" id="1496027">:=</span>&nbsp;<span class="op" id="1496030">(</span><span class="op" id="1496031">*</span><span class="ident" id="1496032">eface</span><span class="op" id="1496037">)</span><span class="op" id="1496038">(</span><span class="ident" id="1496039">unsafe</span><span class="op" id="1496045">.</span><span class="ident" id="1496046">Pointer</span><span class="op" id="1496053">(</span><span class="op" id="1496054">&amp;</span><span class="ident" id="1496055">e</span><span class="op" id="1496056">)</span><span class="op" id="1496057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496060">if</span>&nbsp;<span class="ident" id="1496063">ep</span><span class="op" id="1496065">.</span><span class="ident" id="1496066">_type</span>&nbsp;<span class="op" id="1496072">==</span>&nbsp;<span class="builtintype" id="1496075">nil</span>&nbsp;<span class="op" id="1496079">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496083">return</span>&nbsp;<span class="builtintype" id="1496090">nil</span><span class="op" id="1496093">,</span>&nbsp;<span class="builtintype" id="1496095">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1496102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496105">return</span>&nbsp;<span class="ident" id="1496112">e</span><span class="op" id="1496113">,</span>&nbsp;<span class="builtintype" id="1496115">true</span><br>
<span class="lineno"></span><span class="op" id="1496120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1496123">func</span>&nbsp;<span class="ident" id="1496128">ifacethash</span><span class="op" id="1496138">(</span><span class="ident" id="1496139">i</span>&nbsp;<span class="ident" id="1496141">fInterface</span><span class="op" id="1496151">)</span>&nbsp;<span class="builtintype" id="1496153">uint32</span>&nbsp;<span class="op" id="1496160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1496163">ip</span>&nbsp;<span class="op" id="1496166">:=</span>&nbsp;<span class="op" id="1496169">(</span><span class="op" id="1496170">*</span><span class="ident" id="1496171">iface</span><span class="op" id="1496176">)</span><span class="op" id="1496177">(</span><span class="ident" id="1496178">unsafe</span><span class="op" id="1496184">.</span><span class="ident" id="1496185">Pointer</span><span class="op" id="1496192">(</span><span class="op" id="1496193">&amp;</span><span class="ident" id="1496194">i</span><span class="op" id="1496195">)</span><span class="op" id="1496196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1496199">tab</span>&nbsp;<span class="op" id="1496203">:=</span>&nbsp;<span class="ident" id="1496206">ip</span><span class="op" id="1496208">.</span><span class="ident" id="1496209">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496214">if</span>&nbsp;<span class="ident" id="1496217">tab</span>&nbsp;<span class="op" id="1496221">==</span>&nbsp;<span class="builtintype" id="1496224">nil</span>&nbsp;<span class="op" id="1496228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496232">return</span>&nbsp;<span class="num" id="1496239">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1496242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496245">return</span>&nbsp;<span class="ident" id="1496252">tab</span><span class="op" id="1496255">.</span><span class="ident" id="1496256">_type</span><span class="op" id="1496261">.</span><span class="ident" id="1496262">hash</span><br>
<span class="lineno"></span><span class="op" id="1496267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1496270">func</span>&nbsp;<span class="ident" id="1496275">efacethash</span><span class="op" id="1496285">(</span><span class="ident" id="1496286">e</span>&nbsp;<span class="keyword" id="1496288">interface</span><span class="op" id="1496297">{</span><span class="op" id="1496298">}</span><span class="op" id="1496299">)</span>&nbsp;<span class="builtintype" id="1496301">uint32</span>&nbsp;<span class="op" id="1496308">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1496311">ep</span>&nbsp;<span class="op" id="1496314">:=</span>&nbsp;<span class="op" id="1496317">(</span><span class="op" id="1496318">*</span><span class="ident" id="1496319">eface</span><span class="op" id="1496324">)</span><span class="op" id="1496325">(</span><span class="ident" id="1496326">unsafe</span><span class="op" id="1496332">.</span><span class="ident" id="1496333">Pointer</span><span class="op" id="1496340">(</span><span class="op" id="1496341">&amp;</span><span class="ident" id="1496342">e</span><span class="op" id="1496343">)</span><span class="op" id="1496344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1496347">t</span>&nbsp;<span class="op" id="1496349">:=</span>&nbsp;<span class="ident" id="1496352">ep</span><span class="op" id="1496354">.</span><span class="ident" id="1496355">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496362">if</span>&nbsp;<span class="ident" id="1496365">t</span>&nbsp;<span class="op" id="1496367">==</span>&nbsp;<span class="builtintype" id="1496370">nil</span>&nbsp;<span class="op" id="1496374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496378">return</span>&nbsp;<span class="num" id="1496385">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1496388">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496391">return</span>&nbsp;<span class="ident" id="1496398">t</span><span class="op" id="1496399">.</span><span class="ident" id="1496400">hash</span><br>
<span class="lineno"></span><span class="op" id="1496405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1496408">func</span>&nbsp;<span class="ident" id="1496413">iterate_itabs</span><span class="op" id="1496426">(</span><span class="ident" id="1496427">fn</span>&nbsp;<span class="keyword" id="1496430">func</span><span class="op" id="1496434">(</span><span class="op" id="1496435">*</span><span class="ident" id="1496436">itab</span><span class="op" id="1496440">)</span><span class="op" id="1496441">)</span>&nbsp;<span class="op" id="1496443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496446">for</span>&nbsp;<span class="ident" id="1496450">_</span><span class="op" id="1496451">,</span>&nbsp;<span class="ident" id="1496453">h</span>&nbsp;<span class="op" id="1496455">:=</span>&nbsp;<span class="keyword" id="1496458">range</span>&nbsp;<span class="op" id="1496464">&amp;</span><span class="ident" id="1496465">hash</span>&nbsp;<span class="op" id="1496470">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496474">for</span>&nbsp;<span class="op" id="1496478">;</span>&nbsp;<span class="ident" id="1496480">h</span>&nbsp;<span class="op" id="1496482">!=</span>&nbsp;<span class="builtintype" id="1496485">nil</span><span class="op" id="1496488">;</span>&nbsp;<span class="ident" id="1496490">h</span>&nbsp;<span class="op" id="1496492">=</span>&nbsp;<span class="ident" id="1496494">h</span><span class="op" id="1496495">.</span><span class="ident" id="1496496">link</span>&nbsp;<span class="op" id="1496501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1496506">fn</span><span class="op" id="1496508">(</span><span class="ident" id="1496509">h</span><span class="op" id="1496510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1496514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1496517">}</span><br>
<span class="lineno"></span><span class="op" id="1496519">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1496522">func</span>&nbsp;<span class="ident" id="1496527">ifaceE2I2</span><span class="op" id="1496536">(</span><span class="ident" id="1496537">inter</span>&nbsp;<span class="op" id="1496543">*</span><span class="ident" id="1496544">interfacetype</span><span class="op" id="1496557">,</span>&nbsp;<span class="ident" id="1496559">e</span>&nbsp;<span class="keyword" id="1496561">interface</span><span class="op" id="1496570">{</span><span class="op" id="1496571">}</span><span class="op" id="1496572">,</span>&nbsp;<span class="ident" id="1496574">r</span>&nbsp;<span class="op" id="1496576">*</span><span class="ident" id="1496577">fInterface</span><span class="op" id="1496587">)</span>&nbsp;<span class="op" id="1496589">(</span><span class="ident" id="1496590">ok</span>&nbsp;<span class="builtintype" id="1496593">bool</span><span class="op" id="1496597">)</span>&nbsp;<span class="op" id="1496599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1496602">*</span><span class="ident" id="1496603">r</span><span class="op" id="1496604">,</span>&nbsp;<span class="ident" id="1496606">ok</span>&nbsp;<span class="op" id="1496609">=</span>&nbsp;<span class="ident" id="1496611">assertE2I2</span><span class="op" id="1496621">(</span><span class="ident" id="1496622">inter</span><span class="op" id="1496627">,</span>&nbsp;<span class="ident" id="1496629">e</span><span class="op" id="1496630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1496633">return</span><br>
<span class="lineno"></span><span class="op" id="1496640">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
