<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7590846">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7590902">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7590956">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7591007">package</span>&nbsp;<span class="ident" id="7591015">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7591026">import</span>&nbsp;<span class="op" id="7591033">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7591036">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7591045">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7591054">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7591060">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7591071">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7591082">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7591092">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7591095">type</span>&nbsp;<span class="ident" id="7591100">canonicalHeaderKeyTest</span>&nbsp;<span class="keyword" id="7591123">struct</span>&nbsp;<span class="op" id="7591130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591133">in</span><span class="op" id="7591135">,</span>&nbsp;<span class="ident" id="7591137">out</span>&nbsp;<span class="builtintype" id="7591141">string</span><br>
<span class="lineno"></span><span class="op" id="7591148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7591151">var</span>&nbsp;<span class="ident" id="7591155">canonicalHeaderKeyTests</span>&nbsp;<span class="op" id="7591179">=</span>&nbsp;<span class="op" id="7591181">[</span><span class="op" id="7591182">]</span><span class="ident" id="7591183"><a href="/net/textproto/reader_test.go.html#7591100">canonicalHeaderKeyTest</a></span><span class="op" id="7591205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591208">{</span><span class="string" id="7591209">&#34;a-b-c&#34;</span><span class="op" id="7591216">,</span>&nbsp;<span class="string" id="7591218">&#34;A-B-C&#34;</span><span class="op" id="7591225">}</span><span class="op" id="7591226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591229">{</span><span class="string" id="7591230">&#34;a-1-c&#34;</span><span class="op" id="7591237">,</span>&nbsp;<span class="string" id="7591239">&#34;A-1-C&#34;</span><span class="op" id="7591246">}</span><span class="op" id="7591247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591250">{</span><span class="string" id="7591251">&#34;User-Agent&#34;</span><span class="op" id="7591263">,</span>&nbsp;<span class="string" id="7591265">&#34;User-Agent&#34;</span><span class="op" id="7591277">}</span><span class="op" id="7591278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591281">{</span><span class="string" id="7591282">&#34;uSER-aGENT&#34;</span><span class="op" id="7591294">,</span>&nbsp;<span class="string" id="7591296">&#34;User-Agent&#34;</span><span class="op" id="7591308">}</span><span class="op" id="7591309">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591312">{</span><span class="string" id="7591313">&#34;user-agent&#34;</span><span class="op" id="7591325">,</span>&nbsp;<span class="string" id="7591327">&#34;User-Agent&#34;</span><span class="op" id="7591339">}</span><span class="op" id="7591340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591343">{</span><span class="string" id="7591344">&#34;USER-AGENT&#34;</span><span class="op" id="7591356">,</span>&nbsp;<span class="string" id="7591358">&#34;User-Agent&#34;</span><span class="op" id="7591370">}</span><span class="op" id="7591371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591374">{</span><span class="string" id="7591375">&#34;üser-agenT&#34;</span><span class="op" id="7591388">,</span>&nbsp;<span class="string" id="7591390">&#34;üser-Agent&#34;</span><span class="op" id="7591403">}</span><span class="op" id="7591404">,</span>&nbsp;<span class="comment" id="7591406">//&nbsp;non-ASCII&nbsp;unchanged</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7591431">//&nbsp;This&nbsp;caused&nbsp;a&nbsp;panic&nbsp;due&nbsp;to&nbsp;mishandling&nbsp;of&nbsp;a&nbsp;space:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591486">{</span><span class="string" id="7591487">&#34;C&nbsp;Ontent-Transfer-Encoding&#34;</span><span class="op" id="7591515">,</span>&nbsp;<span class="string" id="7591517">&#34;C-Ontent-Transfer-Encoding&#34;</span><span class="op" id="7591545">}</span><span class="op" id="7591546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591549">{</span><span class="string" id="7591550">&#34;foo&nbsp;bar&#34;</span><span class="op" id="7591559">,</span>&nbsp;<span class="string" id="7591561">&#34;Foo-Bar&#34;</span><span class="op" id="7591570">}</span><span class="op" id="7591571">,</span><br>
<span class="lineno"></span><span class="op" id="7591573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7591576">func</span>&nbsp;<span class="ident" id="7591581">TestCanonicalMIMEHeaderKey</span><span class="op" id="7591607">(</span><span class="ident" id="7591608">t</span>&nbsp;<span class="op" id="7591610">*</span><span class="ident" id="7591611"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7591618">.</span><span class="ident" id="7591619">T</span><span class="op" id="7591620">)</span>&nbsp;<span class="op" id="7591622">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591625">for</span>&nbsp;<span class="ident" id="7591629">_</span><span class="op" id="7591630">,</span>&nbsp;<span class="ident" id="7591632">tt</span>&nbsp;<span class="op" id="7591635">:=</span>&nbsp;<span class="keyword" id="7591638">range</span>&nbsp;<span class="ident" id="7591644"><a href="/net/textproto/reader_test.go.html#7591155">canonicalHeaderKeyTests</a></span>&nbsp;<span class="op" id="7591668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591672">if</span>&nbsp;<span class="ident" id="7591675">s</span>&nbsp;<span class="op" id="7591677">:=</span>&nbsp;<span class="ident" id="7591680"><a href="/net/textproto/reader.go.html#4002381">CanonicalMIMEHeaderKey</a></span><span class="op" id="7591702">(</span><span class="ident" id="7591703"><a href="/net/textproto/reader_test.go.html#7591632">tt</a></span><span class="op" id="7591705">.</span><span class="ident" id="7591706">in</span><span class="op" id="7591708">)</span><span class="op" id="7591709">;</span>&nbsp;<span class="ident" id="7591711"><a href="/net/textproto/reader_test.go.html#7591675">s</a></span>&nbsp;<span class="op" id="7591713">!=</span>&nbsp;<span class="ident" id="7591716"><a href="/net/textproto/reader_test.go.html#7591632">tt</a></span><span class="op" id="7591718">.</span><span class="ident" id="7591719">out</span>&nbsp;<span class="op" id="7591723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591728"><a href="/net/textproto/reader_test.go.html#7591608">t</a></span><span class="op" id="7591729">.</span><span class="ident" id="7591730">Errorf</span><span class="op" id="7591736">(</span><span class="string" id="7591737">&#34;CanonicalMIMEHeaderKey(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7591779">,</span>&nbsp;<span class="ident" id="7591781"><a href="/net/textproto/reader_test.go.html#7591632">tt</a></span><span class="op" id="7591783">.</span><span class="ident" id="7591784">in</span><span class="op" id="7591786">,</span>&nbsp;<span class="ident" id="7591788"><a href="/net/textproto/reader_test.go.html#7591675">s</a></span><span class="op" id="7591789">,</span>&nbsp;<span class="ident" id="7591791"><a href="/net/textproto/reader_test.go.html#7591632">tt</a></span><span class="op" id="7591793">.</span><span class="ident" id="7591794">out</span><span class="op" id="7591797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591804">}</span><br>
<span class="lineno">40</span><span class="op" id="7591806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7591809">func</span>&nbsp;<span class="ident" id="7591814">reader</span><span class="op" id="7591820">(</span><span class="ident" id="7591821">s</span>&nbsp;<span class="builtintype" id="7591823">string</span><span class="op" id="7591829">)</span>&nbsp;<span class="op" id="7591831">*</span><span class="ident" id="7591832"><a href="/net/textproto/reader.go.html#3988643">Reader</a></span>&nbsp;<span class="op" id="7591839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591842">return</span>&nbsp;<span class="ident" id="7591849"><a href="/net/textproto/reader.go.html#3988813">NewReader</a></span><span class="op" id="7591858">(</span><span class="ident" id="7591859"><a href="/net/textproto/reader_test.go.html#7591036">bufio</a></span><span class="op" id="7591864">.</span><span class="ident" id="7591865">NewReader</span><span class="op" id="7591874">(</span><span class="ident" id="7591875"><a href="/net/textproto/reader_test.go.html#7591071">strings</a></span><span class="op" id="7591882">.</span><span class="ident" id="7591883">NewReader</span><span class="op" id="7591892">(</span><span class="ident" id="7591893"><a href="/net/textproto/reader_test.go.html#7591821">s</a></span><span class="op" id="7591894">)</span><span class="op" id="7591895">)</span><span class="op" id="7591896">)</span><br>
<span class="lineno"></span><span class="op" id="7591898">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="7591901">func</span>&nbsp;<span class="ident" id="7591906">TestReadLine</span><span class="op" id="7591918">(</span><span class="ident" id="7591919">t</span>&nbsp;<span class="op" id="7591921">*</span><span class="ident" id="7591922"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7591929">.</span><span class="ident" id="7591930">T</span><span class="op" id="7591931">)</span>&nbsp;<span class="op" id="7591933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591936">r</span>&nbsp;<span class="op" id="7591938">:=</span>&nbsp;<span class="ident" id="7591941"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7591947">(</span><span class="string" id="7591948">&#34;line1\nline2\n&#34;</span><span class="op" id="7591964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591967">s</span><span class="op" id="7591968">,</span>&nbsp;<span class="ident" id="7591970">err</span>&nbsp;<span class="op" id="7591974">:=</span>&nbsp;<span class="ident" id="7591977"><a href="/net/textproto/reader_test.go.html#7591936">r</a></span><span class="op" id="7591978">.</span><span class="ident" id="7591979">ReadLine</span><span class="op" id="7591987">(</span><span class="op" id="7591988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591991">if</span>&nbsp;<span class="ident" id="7591994"><a href="/net/textproto/reader_test.go.html#7591967">s</a></span>&nbsp;<span class="op" id="7591996">!=</span>&nbsp;<span class="string" id="7591999">&#34;line1&#34;</span>&nbsp;<span class="op" id="7592007">||</span>&nbsp;<span class="ident" id="7592010"><a href="/net/textproto/reader_test.go.html#7591970">err</a></span>&nbsp;<span class="op" id="7592014">!=</span>&nbsp;<span class="ident" id="7592017">nil</span>&nbsp;<span class="op" id="7592021">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592025"><a href="/net/textproto/reader_test.go.html#7591919">t</a></span><span class="op" id="7592026">.</span><span class="ident" id="7592027">Fatalf</span><span class="op" id="7592033">(</span><span class="string" id="7592034">&#34;Line&nbsp;1:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7592050">,</span>&nbsp;<span class="ident" id="7592052"><a href="/net/textproto/reader_test.go.html#7591967">s</a></span><span class="op" id="7592053">,</span>&nbsp;<span class="ident" id="7592055"><a href="/net/textproto/reader_test.go.html#7591970">err</a></span><span class="op" id="7592058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592064"><a href="/net/textproto/reader_test.go.html#7591967">s</a></span><span class="op" id="7592065">,</span>&nbsp;<span class="ident" id="7592067"><a href="/net/textproto/reader_test.go.html#7591970">err</a></span>&nbsp;<span class="op" id="7592071">=</span>&nbsp;<span class="ident" id="7592073"><a href="/net/textproto/reader_test.go.html#7591936">r</a></span><span class="op" id="7592074">.</span><span class="ident" id="7592075">ReadLine</span><span class="op" id="7592083">(</span><span class="op" id="7592084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7592087">if</span>&nbsp;<span class="ident" id="7592090"><a href="/net/textproto/reader_test.go.html#7591967">s</a></span>&nbsp;<span class="op" id="7592092">!=</span>&nbsp;<span class="string" id="7592095">&#34;line2&#34;</span>&nbsp;<span class="op" id="7592103">||</span>&nbsp;<span class="ident" id="7592106"><a href="/net/textproto/reader_test.go.html#7591970">err</a></span>&nbsp;<span class="op" id="7592110">!=</span>&nbsp;<span class="ident" id="7592113">nil</span>&nbsp;<span class="op" id="7592117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592121"><a href="/net/textproto/reader_test.go.html#7591919">t</a></span><span class="op" id="7592122">.</span><span class="ident" id="7592123">Fatalf</span><span class="op" id="7592129">(</span><span class="string" id="7592130">&#34;Line&nbsp;2:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7592146">,</span>&nbsp;<span class="ident" id="7592148"><a href="/net/textproto/reader_test.go.html#7591967">s</a></span><span class="op" id="7592149">,</span>&nbsp;<span class="ident" id="7592151"><a href="/net/textproto/reader_test.go.html#7591970">err</a></span><span class="op" id="7592154">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592160"><a href="/net/textproto/reader_test.go.html#7591967">s</a></span><span class="op" id="7592161">,</span>&nbsp;<span class="ident" id="7592163"><a href="/net/textproto/reader_test.go.html#7591970">err</a></span>&nbsp;<span class="op" id="7592167">=</span>&nbsp;<span class="ident" id="7592169"><a href="/net/textproto/reader_test.go.html#7591936">r</a></span><span class="op" id="7592170">.</span><span class="ident" id="7592171">ReadLine</span><span class="op" id="7592179">(</span><span class="op" id="7592180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7592183">if</span>&nbsp;<span class="ident" id="7592186"><a href="/net/textproto/reader_test.go.html#7591967">s</a></span>&nbsp;<span class="op" id="7592188">!=</span>&nbsp;<span class="string" id="7592191">&#34;&#34;</span>&nbsp;<span class="op" id="7592194">||</span>&nbsp;<span class="ident" id="7592197"><a href="/net/textproto/reader_test.go.html#7591970">err</a></span>&nbsp;<span class="op" id="7592201">!=</span>&nbsp;<span class="ident" id="7592204"><a href="/net/textproto/reader_test.go.html#7591054">io</a></span><span class="op" id="7592206">.</span><span class="ident" id="7592207">EOF</span>&nbsp;<span class="op" id="7592211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592215"><a href="/net/textproto/reader_test.go.html#7591919">t</a></span><span class="op" id="7592216">.</span><span class="ident" id="7592217">Fatalf</span><span class="op" id="7592223">(</span><span class="string" id="7592224">&#34;EOF:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7592237">,</span>&nbsp;<span class="ident" id="7592239"><a href="/net/textproto/reader_test.go.html#7591967">s</a></span><span class="op" id="7592240">,</span>&nbsp;<span class="ident" id="7592242"><a href="/net/textproto/reader_test.go.html#7591970">err</a></span><span class="op" id="7592245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592248">}</span><br>
<span class="lineno">60</span><span class="op" id="7592250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7592253">func</span>&nbsp;<span class="ident" id="7592258">TestReadContinuedLine</span><span class="op" id="7592279">(</span><span class="ident" id="7592280">t</span>&nbsp;<span class="op" id="7592282">*</span><span class="ident" id="7592283"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7592290">.</span><span class="ident" id="7592291">T</span><span class="op" id="7592292">)</span>&nbsp;<span class="op" id="7592294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592297">r</span>&nbsp;<span class="op" id="7592299">:=</span>&nbsp;<span class="ident" id="7592302"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7592308">(</span><span class="string" id="7592309">&#34;line1\nline\n&nbsp;2\nline3\n&#34;</span><span class="op" id="7592335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592338">s</span><span class="op" id="7592339">,</span>&nbsp;<span class="ident" id="7592341">err</span>&nbsp;<span class="op" id="7592345">:=</span>&nbsp;<span class="ident" id="7592348"><a href="/net/textproto/reader_test.go.html#7592297">r</a></span><span class="op" id="7592349">.</span><span class="ident" id="7592350">ReadContinuedLine</span><span class="op" id="7592367">(</span><span class="op" id="7592368">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7592371">if</span>&nbsp;<span class="ident" id="7592374"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span>&nbsp;<span class="op" id="7592376">!=</span>&nbsp;<span class="string" id="7592379">&#34;line1&#34;</span>&nbsp;<span class="op" id="7592387">||</span>&nbsp;<span class="ident" id="7592390"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span>&nbsp;<span class="op" id="7592394">!=</span>&nbsp;<span class="ident" id="7592397">nil</span>&nbsp;<span class="op" id="7592401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592405"><a href="/net/textproto/reader_test.go.html#7592280">t</a></span><span class="op" id="7592406">.</span><span class="ident" id="7592407">Fatalf</span><span class="op" id="7592413">(</span><span class="string" id="7592414">&#34;Line&nbsp;1:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7592430">,</span>&nbsp;<span class="ident" id="7592432"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span><span class="op" id="7592433">,</span>&nbsp;<span class="ident" id="7592435"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span><span class="op" id="7592438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592444"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span><span class="op" id="7592445">,</span>&nbsp;<span class="ident" id="7592447"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span>&nbsp;<span class="op" id="7592451">=</span>&nbsp;<span class="ident" id="7592453"><a href="/net/textproto/reader_test.go.html#7592297">r</a></span><span class="op" id="7592454">.</span><span class="ident" id="7592455">ReadContinuedLine</span><span class="op" id="7592472">(</span><span class="op" id="7592473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7592476">if</span>&nbsp;<span class="ident" id="7592479"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span>&nbsp;<span class="op" id="7592481">!=</span>&nbsp;<span class="string" id="7592484">&#34;line&nbsp;2&#34;</span>&nbsp;<span class="op" id="7592493">||</span>&nbsp;<span class="ident" id="7592496"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span>&nbsp;<span class="op" id="7592500">!=</span>&nbsp;<span class="ident" id="7592503">nil</span>&nbsp;<span class="op" id="7592507">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592511"><a href="/net/textproto/reader_test.go.html#7592280">t</a></span><span class="op" id="7592512">.</span><span class="ident" id="7592513">Fatalf</span><span class="op" id="7592519">(</span><span class="string" id="7592520">&#34;Line&nbsp;2:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7592536">,</span>&nbsp;<span class="ident" id="7592538"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span><span class="op" id="7592539">,</span>&nbsp;<span class="ident" id="7592541"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span><span class="op" id="7592544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592550"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span><span class="op" id="7592551">,</span>&nbsp;<span class="ident" id="7592553"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span>&nbsp;<span class="op" id="7592557">=</span>&nbsp;<span class="ident" id="7592559"><a href="/net/textproto/reader_test.go.html#7592297">r</a></span><span class="op" id="7592560">.</span><span class="ident" id="7592561">ReadContinuedLine</span><span class="op" id="7592578">(</span><span class="op" id="7592579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7592582">if</span>&nbsp;<span class="ident" id="7592585"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span>&nbsp;<span class="op" id="7592587">!=</span>&nbsp;<span class="string" id="7592590">&#34;line3&#34;</span>&nbsp;<span class="op" id="7592598">||</span>&nbsp;<span class="ident" id="7592601"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span>&nbsp;<span class="op" id="7592605">!=</span>&nbsp;<span class="ident" id="7592608">nil</span>&nbsp;<span class="op" id="7592612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592616"><a href="/net/textproto/reader_test.go.html#7592280">t</a></span><span class="op" id="7592617">.</span><span class="ident" id="7592618">Fatalf</span><span class="op" id="7592624">(</span><span class="string" id="7592625">&#34;Line&nbsp;3:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7592641">,</span>&nbsp;<span class="ident" id="7592643"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span><span class="op" id="7592644">,</span>&nbsp;<span class="ident" id="7592646"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span><span class="op" id="7592649">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592655"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span><span class="op" id="7592656">,</span>&nbsp;<span class="ident" id="7592658"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span>&nbsp;<span class="op" id="7592662">=</span>&nbsp;<span class="ident" id="7592664"><a href="/net/textproto/reader_test.go.html#7592297">r</a></span><span class="op" id="7592665">.</span><span class="ident" id="7592666">ReadContinuedLine</span><span class="op" id="7592683">(</span><span class="op" id="7592684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7592687">if</span>&nbsp;<span class="ident" id="7592690"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span>&nbsp;<span class="op" id="7592692">!=</span>&nbsp;<span class="string" id="7592695">&#34;&#34;</span>&nbsp;<span class="op" id="7592698">||</span>&nbsp;<span class="ident" id="7592701"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span>&nbsp;<span class="op" id="7592705">!=</span>&nbsp;<span class="ident" id="7592708"><a href="/net/textproto/reader_test.go.html#7591054">io</a></span><span class="op" id="7592710">.</span><span class="ident" id="7592711">EOF</span>&nbsp;<span class="op" id="7592715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592719"><a href="/net/textproto/reader_test.go.html#7592280">t</a></span><span class="op" id="7592720">.</span><span class="ident" id="7592721">Fatalf</span><span class="op" id="7592727">(</span><span class="string" id="7592728">&#34;EOF:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7592741">,</span>&nbsp;<span class="ident" id="7592743"><a href="/net/textproto/reader_test.go.html#7592338">s</a></span><span class="op" id="7592744">,</span>&nbsp;<span class="ident" id="7592746"><a href="/net/textproto/reader_test.go.html#7592341">err</a></span><span class="op" id="7592749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592752">}</span><br>
<span class="lineno">80</span><span class="op" id="7592754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7592757">func</span>&nbsp;<span class="ident" id="7592762">TestReadCodeLine</span><span class="op" id="7592778">(</span><span class="ident" id="7592779">t</span>&nbsp;<span class="op" id="7592781">*</span><span class="ident" id="7592782"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7592789">.</span><span class="ident" id="7592790">T</span><span class="op" id="7592791">)</span>&nbsp;<span class="op" id="7592793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592796">r</span>&nbsp;<span class="op" id="7592798">:=</span>&nbsp;<span class="ident" id="7592801"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7592807">(</span><span class="string" id="7592808">&#34;123&nbsp;hi\n234&nbsp;bye\n345&nbsp;no&nbsp;way\n&#34;</span><span class="op" id="7592839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592842">code</span><span class="op" id="7592846">,</span>&nbsp;<span class="ident" id="7592848">msg</span><span class="op" id="7592851">,</span>&nbsp;<span class="ident" id="7592853">err</span>&nbsp;<span class="op" id="7592857">:=</span>&nbsp;<span class="ident" id="7592860"><a href="/net/textproto/reader_test.go.html#7592796">r</a></span><span class="op" id="7592861">.</span><span class="ident" id="7592862">ReadCodeLine</span><span class="op" id="7592874">(</span><span class="num" id="7592875">0</span><span class="op" id="7592876">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7592879">if</span>&nbsp;<span class="ident" id="7592882"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span>&nbsp;<span class="op" id="7592887">!=</span>&nbsp;<span class="num" id="7592890">123</span>&nbsp;<span class="op" id="7592894">||</span>&nbsp;<span class="ident" id="7592897"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span>&nbsp;<span class="op" id="7592901">!=</span>&nbsp;<span class="string" id="7592904">&#34;hi&#34;</span>&nbsp;<span class="op" id="7592909">||</span>&nbsp;<span class="ident" id="7592912"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span>&nbsp;<span class="op" id="7592916">!=</span>&nbsp;<span class="ident" id="7592919">nil</span>&nbsp;<span class="op" id="7592923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592927"><a href="/net/textproto/reader_test.go.html#7592779">t</a></span><span class="op" id="7592928">.</span><span class="ident" id="7592929">Fatalf</span><span class="op" id="7592935">(</span><span class="string" id="7592936">&#34;Line&nbsp;1:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7592956">,</span>&nbsp;<span class="ident" id="7592958"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span><span class="op" id="7592962">,</span>&nbsp;<span class="ident" id="7592964"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span><span class="op" id="7592967">,</span>&nbsp;<span class="ident" id="7592969"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span><span class="op" id="7592972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7592978"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span><span class="op" id="7592982">,</span>&nbsp;<span class="ident" id="7592984"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span><span class="op" id="7592987">,</span>&nbsp;<span class="ident" id="7592989"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span>&nbsp;<span class="op" id="7592993">=</span>&nbsp;<span class="ident" id="7592995"><a href="/net/textproto/reader_test.go.html#7592796">r</a></span><span class="op" id="7592996">.</span><span class="ident" id="7592997">ReadCodeLine</span><span class="op" id="7593009">(</span><span class="num" id="7593010">23</span><span class="op" id="7593012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7593015">if</span>&nbsp;<span class="ident" id="7593018"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span>&nbsp;<span class="op" id="7593023">!=</span>&nbsp;<span class="num" id="7593026">234</span>&nbsp;<span class="op" id="7593030">||</span>&nbsp;<span class="ident" id="7593033"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span>&nbsp;<span class="op" id="7593037">!=</span>&nbsp;<span class="string" id="7593040">&#34;bye&#34;</span>&nbsp;<span class="op" id="7593046">||</span>&nbsp;<span class="ident" id="7593049"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span>&nbsp;<span class="op" id="7593053">!=</span>&nbsp;<span class="ident" id="7593056">nil</span>&nbsp;<span class="op" id="7593060">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593064"><a href="/net/textproto/reader_test.go.html#7592779">t</a></span><span class="op" id="7593065">.</span><span class="ident" id="7593066">Fatalf</span><span class="op" id="7593072">(</span><span class="string" id="7593073">&#34;Line&nbsp;2:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7593093">,</span>&nbsp;<span class="ident" id="7593095"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span><span class="op" id="7593099">,</span>&nbsp;<span class="ident" id="7593101"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span><span class="op" id="7593104">,</span>&nbsp;<span class="ident" id="7593106"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span><span class="op" id="7593109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593115"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span><span class="op" id="7593119">,</span>&nbsp;<span class="ident" id="7593121"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span><span class="op" id="7593124">,</span>&nbsp;<span class="ident" id="7593126"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span>&nbsp;<span class="op" id="7593130">=</span>&nbsp;<span class="ident" id="7593132"><a href="/net/textproto/reader_test.go.html#7592796">r</a></span><span class="op" id="7593133">.</span><span class="ident" id="7593134">ReadCodeLine</span><span class="op" id="7593146">(</span><span class="num" id="7593147">346</span><span class="op" id="7593150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7593153">if</span>&nbsp;<span class="ident" id="7593156"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span>&nbsp;<span class="op" id="7593161">!=</span>&nbsp;<span class="num" id="7593164">345</span>&nbsp;<span class="op" id="7593168">||</span>&nbsp;<span class="ident" id="7593171"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span>&nbsp;<span class="op" id="7593175">!=</span>&nbsp;<span class="string" id="7593178">&#34;no&nbsp;way&#34;</span>&nbsp;<span class="op" id="7593187">||</span>&nbsp;<span class="ident" id="7593190"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span>&nbsp;<span class="op" id="7593194">==</span>&nbsp;<span class="ident" id="7593197">nil</span>&nbsp;<span class="op" id="7593201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593205"><a href="/net/textproto/reader_test.go.html#7592779">t</a></span><span class="op" id="7593206">.</span><span class="ident" id="7593207">Fatalf</span><span class="op" id="7593213">(</span><span class="string" id="7593214">&#34;Line&nbsp;3:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7593234">,</span>&nbsp;<span class="ident" id="7593236"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span><span class="op" id="7593240">,</span>&nbsp;<span class="ident" id="7593242"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span><span class="op" id="7593245">,</span>&nbsp;<span class="ident" id="7593247"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span><span class="op" id="7593250">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7593256">if</span>&nbsp;<span class="ident" id="7593259">e</span><span class="op" id="7593260">,</span>&nbsp;<span class="ident" id="7593262">ok</span>&nbsp;<span class="op" id="7593265">:=</span>&nbsp;<span class="ident" id="7593268"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span><span class="op" id="7593271">.</span><span class="op" id="7593272">(</span><span class="op" id="7593273">*</span><span class="ident" id="7593274"><a href="/net/textproto/textproto.go.html#4005346">Error</a></span><span class="op" id="7593279">)</span><span class="op" id="7593280">;</span>&nbsp;<span class="op" id="7593282">!</span><span class="ident" id="7593283"><a href="/net/textproto/reader_test.go.html#7593262">ok</a></span>&nbsp;<span class="op" id="7593286">||</span>&nbsp;<span class="ident" id="7593289"><a href="/net/textproto/reader_test.go.html#7593259">e</a></span><span class="op" id="7593290">.</span><span class="ident" id="7593291">Code</span>&nbsp;<span class="op" id="7593296">!=</span>&nbsp;<span class="ident" id="7593299"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span>&nbsp;<span class="op" id="7593304">||</span>&nbsp;<span class="ident" id="7593307"><a href="/net/textproto/reader_test.go.html#7593259">e</a></span><span class="op" id="7593308">.</span><span class="ident" id="7593309">Msg</span>&nbsp;<span class="op" id="7593313">!=</span>&nbsp;<span class="ident" id="7593316"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span>&nbsp;<span class="op" id="7593320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593324"><a href="/net/textproto/reader_test.go.html#7592779">t</a></span><span class="op" id="7593325">.</span><span class="ident" id="7593326">Fatalf</span><span class="op" id="7593332">(</span><span class="string" id="7593333">&#34;Line&nbsp;3:&nbsp;wrong&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7593359">,</span>&nbsp;<span class="ident" id="7593361"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span><span class="op" id="7593364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593370"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span><span class="op" id="7593374">,</span>&nbsp;<span class="ident" id="7593376"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span><span class="op" id="7593379">,</span>&nbsp;<span class="ident" id="7593381"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span>&nbsp;<span class="op" id="7593385">=</span>&nbsp;<span class="ident" id="7593387"><a href="/net/textproto/reader_test.go.html#7592796">r</a></span><span class="op" id="7593388">.</span><span class="ident" id="7593389">ReadCodeLine</span><span class="op" id="7593401">(</span><span class="num" id="7593402">1</span><span class="op" id="7593403">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7593406">if</span>&nbsp;<span class="ident" id="7593409"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span>&nbsp;<span class="op" id="7593414">!=</span>&nbsp;<span class="num" id="7593417">0</span>&nbsp;<span class="op" id="7593419">||</span>&nbsp;<span class="ident" id="7593422"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span>&nbsp;<span class="op" id="7593426">!=</span>&nbsp;<span class="string" id="7593429">&#34;&#34;</span>&nbsp;<span class="op" id="7593432">||</span>&nbsp;<span class="ident" id="7593435"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span>&nbsp;<span class="op" id="7593439">!=</span>&nbsp;<span class="ident" id="7593442"><a href="/net/textproto/reader_test.go.html#7591054">io</a></span><span class="op" id="7593444">.</span><span class="ident" id="7593445">EOF</span>&nbsp;<span class="op" id="7593449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593453"><a href="/net/textproto/reader_test.go.html#7592779">t</a></span><span class="op" id="7593454">.</span><span class="ident" id="7593455">Fatalf</span><span class="op" id="7593461">(</span><span class="string" id="7593462">&#34;EOF:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7593479">,</span>&nbsp;<span class="ident" id="7593481"><a href="/net/textproto/reader_test.go.html#7592842">code</a></span><span class="op" id="7593485">,</span>&nbsp;<span class="ident" id="7593487"><a href="/net/textproto/reader_test.go.html#7592848">msg</a></span><span class="op" id="7593490">,</span>&nbsp;<span class="ident" id="7593492"><a href="/net/textproto/reader_test.go.html#7592853">err</a></span><span class="op" id="7593495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593498">}</span><br>
<span class="lineno"></span><span class="op" id="7593500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7593503">func</span>&nbsp;<span class="ident" id="7593508">TestReadDotLines</span><span class="op" id="7593524">(</span><span class="ident" id="7593525">t</span>&nbsp;<span class="op" id="7593527">*</span><span class="ident" id="7593528"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7593535">.</span><span class="ident" id="7593536">T</span><span class="op" id="7593537">)</span>&nbsp;<span class="op" id="7593539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593542">r</span>&nbsp;<span class="op" id="7593544">:=</span>&nbsp;<span class="ident" id="7593547"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7593553">(</span><span class="string" id="7593554">&#34;dotlines\r\n.foo\r\n..bar\n...baz\nquux\r\n\r\n.\r\nanother\n&#34;</span><span class="op" id="7593617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593620">s</span><span class="op" id="7593621">,</span>&nbsp;<span class="ident" id="7593623">err</span>&nbsp;<span class="op" id="7593627">:=</span>&nbsp;<span class="ident" id="7593630"><a href="/net/textproto/reader_test.go.html#7593542">r</a></span><span class="op" id="7593631">.</span><span class="ident" id="7593632">ReadDotLines</span><span class="op" id="7593644">(</span><span class="op" id="7593645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593648">want</span>&nbsp;<span class="op" id="7593653">:=</span>&nbsp;<span class="op" id="7593656">[</span><span class="op" id="7593657">]</span><span class="builtintype" id="7593658">string</span><span class="op" id="7593664">{</span><span class="string" id="7593665">&#34;dotlines&#34;</span><span class="op" id="7593675">,</span>&nbsp;<span class="string" id="7593677">&#34;foo&#34;</span><span class="op" id="7593682">,</span>&nbsp;<span class="string" id="7593684">&#34;.bar&#34;</span><span class="op" id="7593690">,</span>&nbsp;<span class="string" id="7593692">&#34;..baz&#34;</span><span class="op" id="7593699">,</span>&nbsp;<span class="string" id="7593701">&#34;quux&#34;</span><span class="op" id="7593707">,</span>&nbsp;<span class="string" id="7593709">&#34;&#34;</span><span class="op" id="7593711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7593714">if</span>&nbsp;<span class="op" id="7593717">!</span><span class="ident" id="7593718"><a href="/net/textproto/reader_test.go.html#7591060">reflect</a></span><span class="op" id="7593725">.</span><span class="ident" id="7593726">DeepEqual</span><span class="op" id="7593735">(</span><span class="ident" id="7593736"><a href="/net/textproto/reader_test.go.html#7593620">s</a></span><span class="op" id="7593737">,</span>&nbsp;<span class="ident" id="7593739"><a href="/net/textproto/reader_test.go.html#7593648">want</a></span><span class="op" id="7593743">)</span>&nbsp;<span class="op" id="7593745">||</span>&nbsp;<span class="ident" id="7593748"><a href="/net/textproto/reader_test.go.html#7593623">err</a></span>&nbsp;<span class="op" id="7593752">!=</span>&nbsp;<span class="ident" id="7593755">nil</span>&nbsp;<span class="op" id="7593759">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593763"><a href="/net/textproto/reader_test.go.html#7593525">t</a></span><span class="op" id="7593764">.</span><span class="ident" id="7593765">Fatalf</span><span class="op" id="7593771">(</span><span class="string" id="7593772">&#34;ReadDotLines:&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="7593794">,</span>&nbsp;<span class="ident" id="7593796"><a href="/net/textproto/reader_test.go.html#7593620">s</a></span><span class="op" id="7593797">,</span>&nbsp;<span class="ident" id="7593799"><a href="/net/textproto/reader_test.go.html#7593623">err</a></span><span class="op" id="7593802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593809"><a href="/net/textproto/reader_test.go.html#7593620">s</a></span><span class="op" id="7593810">,</span>&nbsp;<span class="ident" id="7593812"><a href="/net/textproto/reader_test.go.html#7593623">err</a></span>&nbsp;<span class="op" id="7593816">=</span>&nbsp;<span class="ident" id="7593818"><a href="/net/textproto/reader_test.go.html#7593542">r</a></span><span class="op" id="7593819">.</span><span class="ident" id="7593820">ReadDotLines</span><span class="op" id="7593832">(</span><span class="op" id="7593833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593836"><a href="/net/textproto/reader_test.go.html#7593648">want</a></span>&nbsp;<span class="op" id="7593841">=</span>&nbsp;<span class="op" id="7593843">[</span><span class="op" id="7593844">]</span><span class="builtintype" id="7593845">string</span><span class="op" id="7593851">{</span><span class="string" id="7593852">&#34;another&#34;</span><span class="op" id="7593861">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7593864">if</span>&nbsp;<span class="op" id="7593867">!</span><span class="ident" id="7593868"><a href="/net/textproto/reader_test.go.html#7591060">reflect</a></span><span class="op" id="7593875">.</span><span class="ident" id="7593876">DeepEqual</span><span class="op" id="7593885">(</span><span class="ident" id="7593886"><a href="/net/textproto/reader_test.go.html#7593620">s</a></span><span class="op" id="7593887">,</span>&nbsp;<span class="ident" id="7593889"><a href="/net/textproto/reader_test.go.html#7593648">want</a></span><span class="op" id="7593893">)</span>&nbsp;<span class="op" id="7593895">||</span>&nbsp;<span class="ident" id="7593898"><a href="/net/textproto/reader_test.go.html#7593623">err</a></span>&nbsp;<span class="op" id="7593902">!=</span>&nbsp;<span class="ident" id="7593905"><a href="/net/textproto/reader_test.go.html#7591054">io</a></span><span class="op" id="7593907">.</span><span class="ident" id="7593908">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7593925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593929"><a href="/net/textproto/reader_test.go.html#7593525">t</a></span><span class="op" id="7593930">.</span><span class="ident" id="7593931">Fatalf</span><span class="op" id="7593937">(</span><span class="string" id="7593938">&#34;ReadDotLines2:&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="7593961">,</span>&nbsp;<span class="ident" id="7593963"><a href="/net/textproto/reader_test.go.html#7593620">s</a></span><span class="op" id="7593964">,</span>&nbsp;<span class="ident" id="7593966"><a href="/net/textproto/reader_test.go.html#7593623">err</a></span><span class="op" id="7593969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593972">}</span><br>
<span class="lineno"></span><span class="op" id="7593974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="7593977">func</span>&nbsp;<span class="ident" id="7593982">TestReadDotBytes</span><span class="op" id="7593998">(</span><span class="ident" id="7593999">t</span>&nbsp;<span class="op" id="7594001">*</span><span class="ident" id="7594002"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7594009">.</span><span class="ident" id="7594010">T</span><span class="op" id="7594011">)</span>&nbsp;<span class="op" id="7594013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594016">r</span>&nbsp;<span class="op" id="7594018">:=</span>&nbsp;<span class="ident" id="7594021"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7594027">(</span><span class="string" id="7594028">&#34;dotlines\r\n.foo\r\n..bar\n...baz\nquux\r\n\r\n.\r\nanot.her\r\n&#34;</span><span class="op" id="7594094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594097">b</span><span class="op" id="7594098">,</span>&nbsp;<span class="ident" id="7594100">err</span>&nbsp;<span class="op" id="7594104">:=</span>&nbsp;<span class="ident" id="7594107"><a href="/net/textproto/reader_test.go.html#7594016">r</a></span><span class="op" id="7594108">.</span><span class="ident" id="7594109">ReadDotBytes</span><span class="op" id="7594121">(</span><span class="op" id="7594122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594125">want</span>&nbsp;<span class="op" id="7594130">:=</span>&nbsp;<span class="op" id="7594133">[</span><span class="op" id="7594134">]</span><span class="builtintype" id="7594135">byte</span><span class="op" id="7594139">(</span><span class="string" id="7594140">&#34;dotlines\nfoo\n.bar\n..baz\nquux\n\n&#34;</span><span class="op" id="7594178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7594181">if</span>&nbsp;<span class="op" id="7594184">!</span><span class="ident" id="7594185"><a href="/net/textproto/reader_test.go.html#7591060">reflect</a></span><span class="op" id="7594192">.</span><span class="ident" id="7594193">DeepEqual</span><span class="op" id="7594202">(</span><span class="ident" id="7594203"><a href="/net/textproto/reader_test.go.html#7594097">b</a></span><span class="op" id="7594204">,</span>&nbsp;<span class="ident" id="7594206"><a href="/net/textproto/reader_test.go.html#7594125">want</a></span><span class="op" id="7594210">)</span>&nbsp;<span class="op" id="7594212">||</span>&nbsp;<span class="ident" id="7594215"><a href="/net/textproto/reader_test.go.html#7594100">err</a></span>&nbsp;<span class="op" id="7594219">!=</span>&nbsp;<span class="ident" id="7594222">nil</span>&nbsp;<span class="op" id="7594226">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594230"><a href="/net/textproto/reader_test.go.html#7593999">t</a></span><span class="op" id="7594231">.</span><span class="ident" id="7594232">Fatalf</span><span class="op" id="7594238">(</span><span class="string" id="7594239">&#34;ReadDotBytes:&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7594261">,</span>&nbsp;<span class="ident" id="7594263"><a href="/net/textproto/reader_test.go.html#7594097">b</a></span><span class="op" id="7594264">,</span>&nbsp;<span class="ident" id="7594266"><a href="/net/textproto/reader_test.go.html#7594100">err</a></span><span class="op" id="7594269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594276"><a href="/net/textproto/reader_test.go.html#7594097">b</a></span><span class="op" id="7594277">,</span>&nbsp;<span class="ident" id="7594279"><a href="/net/textproto/reader_test.go.html#7594100">err</a></span>&nbsp;<span class="op" id="7594283">=</span>&nbsp;<span class="ident" id="7594285"><a href="/net/textproto/reader_test.go.html#7594016">r</a></span><span class="op" id="7594286">.</span><span class="ident" id="7594287">ReadDotBytes</span><span class="op" id="7594299">(</span><span class="op" id="7594300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594303"><a href="/net/textproto/reader_test.go.html#7594125">want</a></span>&nbsp;<span class="op" id="7594308">=</span>&nbsp;<span class="op" id="7594310">[</span><span class="op" id="7594311">]</span><span class="builtintype" id="7594312">byte</span><span class="op" id="7594316">(</span><span class="string" id="7594317">&#34;anot.her\n&#34;</span><span class="op" id="7594329">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7594332">if</span>&nbsp;<span class="op" id="7594335">!</span><span class="ident" id="7594336"><a href="/net/textproto/reader_test.go.html#7591060">reflect</a></span><span class="op" id="7594343">.</span><span class="ident" id="7594344">DeepEqual</span><span class="op" id="7594353">(</span><span class="ident" id="7594354"><a href="/net/textproto/reader_test.go.html#7594097">b</a></span><span class="op" id="7594355">,</span>&nbsp;<span class="ident" id="7594357"><a href="/net/textproto/reader_test.go.html#7594125">want</a></span><span class="op" id="7594361">)</span>&nbsp;<span class="op" id="7594363">||</span>&nbsp;<span class="ident" id="7594366"><a href="/net/textproto/reader_test.go.html#7594100">err</a></span>&nbsp;<span class="op" id="7594370">!=</span>&nbsp;<span class="ident" id="7594373"><a href="/net/textproto/reader_test.go.html#7591054">io</a></span><span class="op" id="7594375">.</span><span class="ident" id="7594376">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7594393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594397"><a href="/net/textproto/reader_test.go.html#7593999">t</a></span><span class="op" id="7594398">.</span><span class="ident" id="7594399">Fatalf</span><span class="op" id="7594405">(</span><span class="string" id="7594406">&#34;ReadDotBytes2:&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7594429">,</span>&nbsp;<span class="ident" id="7594431"><a href="/net/textproto/reader_test.go.html#7594097">b</a></span><span class="op" id="7594432">,</span>&nbsp;<span class="ident" id="7594434"><a href="/net/textproto/reader_test.go.html#7594100">err</a></span><span class="op" id="7594437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594440">}</span><br>
<span class="lineno"></span><span class="op" id="7594442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7594445">func</span>&nbsp;<span class="ident" id="7594450">TestReadMIMEHeader</span><span class="op" id="7594468">(</span><span class="ident" id="7594469">t</span>&nbsp;<span class="op" id="7594471">*</span><span class="ident" id="7594472"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7594479">.</span><span class="ident" id="7594480">T</span><span class="op" id="7594481">)</span>&nbsp;<span class="op" id="7594483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594486">r</span>&nbsp;<span class="op" id="7594488">:=</span>&nbsp;<span class="ident" id="7594491"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7594497">(</span><span class="string" id="7594498">&#34;my-key:&nbsp;Value&nbsp;1&nbsp;&nbsp;\r\nLong-key:&nbsp;Even&nbsp;\n&nbsp;Longer&nbsp;Value\r\nmy-Key:&nbsp;Value&nbsp;2\r\n\n&#34;</span><span class="op" id="7594576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594579">m</span><span class="op" id="7594580">,</span>&nbsp;<span class="ident" id="7594582">err</span>&nbsp;<span class="op" id="7594586">:=</span>&nbsp;<span class="ident" id="7594589"><a href="/net/textproto/reader_test.go.html#7594486">r</a></span><span class="op" id="7594590">.</span><span class="ident" id="7594591">ReadMIMEHeader</span><span class="op" id="7594605">(</span><span class="op" id="7594606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594609">want</span>&nbsp;<span class="op" id="7594614">:=</span>&nbsp;<span class="ident" id="7594617"><a href="/net/textproto/header.go.html#3984090">MIMEHeader</a></span><span class="op" id="7594627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7594631">&#34;My-Key&#34;</span><span class="op" id="7594639">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7594643">{</span><span class="string" id="7594644">&#34;Value&nbsp;1&#34;</span><span class="op" id="7594653">,</span>&nbsp;<span class="string" id="7594655">&#34;Value&nbsp;2&#34;</span><span class="op" id="7594664">}</span><span class="op" id="7594665">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7594669">&#34;Long-Key&#34;</span><span class="op" id="7594679">:</span>&nbsp;<span class="op" id="7594681">{</span><span class="string" id="7594682">&#34;Even&nbsp;Longer&nbsp;Value&#34;</span><span class="op" id="7594701">}</span><span class="op" id="7594702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7594708">if</span>&nbsp;<span class="op" id="7594711">!</span><span class="ident" id="7594712"><a href="/net/textproto/reader_test.go.html#7591060">reflect</a></span><span class="op" id="7594719">.</span><span class="ident" id="7594720">DeepEqual</span><span class="op" id="7594729">(</span><span class="ident" id="7594730"><a href="/net/textproto/reader_test.go.html#7594579">m</a></span><span class="op" id="7594731">,</span>&nbsp;<span class="ident" id="7594733"><a href="/net/textproto/reader_test.go.html#7594609">want</a></span><span class="op" id="7594737">)</span>&nbsp;<span class="op" id="7594739">||</span>&nbsp;<span class="ident" id="7594742"><a href="/net/textproto/reader_test.go.html#7594582">err</a></span>&nbsp;<span class="op" id="7594746">!=</span>&nbsp;<span class="ident" id="7594749">nil</span>&nbsp;<span class="op" id="7594753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594757"><a href="/net/textproto/reader_test.go.html#7594469">t</a></span><span class="op" id="7594758">.</span><span class="ident" id="7594759">Fatalf</span><span class="op" id="7594765">(</span><span class="string" id="7594766">&#34;ReadMIMEHeader:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7594799">,</span>&nbsp;<span class="ident" id="7594801"><a href="/net/textproto/reader_test.go.html#7594579">m</a></span><span class="op" id="7594802">,</span>&nbsp;<span class="ident" id="7594804"><a href="/net/textproto/reader_test.go.html#7594582">err</a></span><span class="op" id="7594807">,</span>&nbsp;<span class="ident" id="7594809"><a href="/net/textproto/reader_test.go.html#7594609">want</a></span><span class="op" id="7594813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594816">}</span><br>
<span class="lineno">145</span><span class="op" id="7594818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7594821">func</span>&nbsp;<span class="ident" id="7594826">TestReadMIMEHeaderSingle</span><span class="op" id="7594850">(</span><span class="ident" id="7594851">t</span>&nbsp;<span class="op" id="7594853">*</span><span class="ident" id="7594854"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7594861">.</span><span class="ident" id="7594862">T</span><span class="op" id="7594863">)</span>&nbsp;<span class="op" id="7594865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594868">r</span>&nbsp;<span class="op" id="7594870">:=</span>&nbsp;<span class="ident" id="7594873"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7594879">(</span><span class="string" id="7594880">&#34;Foo:&nbsp;bar\n\n&#34;</span><span class="op" id="7594894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594897">m</span><span class="op" id="7594898">,</span>&nbsp;<span class="ident" id="7594900">err</span>&nbsp;<span class="op" id="7594904">:=</span>&nbsp;<span class="ident" id="7594907"><a href="/net/textproto/reader_test.go.html#7594868">r</a></span><span class="op" id="7594908">.</span><span class="ident" id="7594909">ReadMIMEHeader</span><span class="op" id="7594923">(</span><span class="op" id="7594924">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594927">want</span>&nbsp;<span class="op" id="7594932">:=</span>&nbsp;<span class="ident" id="7594935"><a href="/net/textproto/header.go.html#3984090">MIMEHeader</a></span><span class="op" id="7594945">{</span><span class="string" id="7594946">&#34;Foo&#34;</span><span class="op" id="7594951">:</span>&nbsp;<span class="op" id="7594953">{</span><span class="string" id="7594954">&#34;bar&#34;</span><span class="op" id="7594959">}</span><span class="op" id="7594960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7594963">if</span>&nbsp;<span class="op" id="7594966">!</span><span class="ident" id="7594967"><a href="/net/textproto/reader_test.go.html#7591060">reflect</a></span><span class="op" id="7594974">.</span><span class="ident" id="7594975">DeepEqual</span><span class="op" id="7594984">(</span><span class="ident" id="7594985"><a href="/net/textproto/reader_test.go.html#7594897">m</a></span><span class="op" id="7594986">,</span>&nbsp;<span class="ident" id="7594988"><a href="/net/textproto/reader_test.go.html#7594927">want</a></span><span class="op" id="7594992">)</span>&nbsp;<span class="op" id="7594994">||</span>&nbsp;<span class="ident" id="7594997"><a href="/net/textproto/reader_test.go.html#7594900">err</a></span>&nbsp;<span class="op" id="7595001">!=</span>&nbsp;<span class="ident" id="7595004">nil</span>&nbsp;<span class="op" id="7595008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595012"><a href="/net/textproto/reader_test.go.html#7594851">t</a></span><span class="op" id="7595013">.</span><span class="ident" id="7595014">Fatalf</span><span class="op" id="7595020">(</span><span class="string" id="7595021">&#34;ReadMIMEHeader:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7595054">,</span>&nbsp;<span class="ident" id="7595056"><a href="/net/textproto/reader_test.go.html#7594897">m</a></span><span class="op" id="7595057">,</span>&nbsp;<span class="ident" id="7595059"><a href="/net/textproto/reader_test.go.html#7594900">err</a></span><span class="op" id="7595062">,</span>&nbsp;<span class="ident" id="7595064"><a href="/net/textproto/reader_test.go.html#7594927">want</a></span><span class="op" id="7595068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595071">}</span><br>
<span class="lineno"></span><span class="op" id="7595073">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="7595076">func</span>&nbsp;<span class="ident" id="7595081">TestLargeReadMIMEHeader</span><span class="op" id="7595104">(</span><span class="ident" id="7595105">t</span>&nbsp;<span class="op" id="7595107">*</span><span class="ident" id="7595108"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7595115">.</span><span class="ident" id="7595116">T</span><span class="op" id="7595117">)</span>&nbsp;<span class="op" id="7595119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595122">data</span>&nbsp;<span class="op" id="7595127">:=</span>&nbsp;<span class="builtinfunc" id="7595130">make</span><span class="op" id="7595134">(</span><span class="op" id="7595135">[</span><span class="op" id="7595136">]</span><span class="builtintype" id="7595137">byte</span><span class="op" id="7595141">,</span>&nbsp;<span class="num" id="7595143">16</span><span class="op" id="7595145">*</span><span class="num" id="7595146">1024</span><span class="op" id="7595150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595153">for</span>&nbsp;<span class="ident" id="7595157">i</span>&nbsp;<span class="op" id="7595159">:=</span>&nbsp;<span class="num" id="7595162">0</span><span class="op" id="7595163">;</span>&nbsp;<span class="ident" id="7595165"><a href="/net/textproto/reader_test.go.html#7595157">i</a></span>&nbsp;<span class="op" id="7595167">&lt;</span>&nbsp;<span class="builtinfunc" id="7595169">len</span><span class="op" id="7595172">(</span><span class="ident" id="7595173"><a href="/net/textproto/reader_test.go.html#7595122">data</a></span><span class="op" id="7595177">)</span><span class="op" id="7595178">;</span>&nbsp;<span class="ident" id="7595180"><a href="/net/textproto/reader_test.go.html#7595157">i</a></span><span class="op" id="7595181">++</span>&nbsp;<span class="op" id="7595184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595188"><a href="/net/textproto/reader_test.go.html#7595122">data</a></span><span class="op" id="7595192">[</span><span class="ident" id="7595193"><a href="/net/textproto/reader_test.go.html#7595157">i</a></span><span class="op" id="7595194">]</span>&nbsp;<span class="op" id="7595196">=</span>&nbsp;<span class="string" id="7595198">&#39;x&#39;</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595206">sdata</span>&nbsp;<span class="op" id="7595212">:=</span>&nbsp;<span class="builtintype" id="7595215">string</span><span class="op" id="7595221">(</span><span class="ident" id="7595222"><a href="/net/textproto/reader_test.go.html#7595122">data</a></span><span class="op" id="7595226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595229">r</span>&nbsp;<span class="op" id="7595231">:=</span>&nbsp;<span class="ident" id="7595234"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7595240">(</span><span class="string" id="7595241">&#34;Cookie:&nbsp;&#34;</span>&nbsp;<span class="op" id="7595252">+</span>&nbsp;<span class="ident" id="7595254"><a href="/net/textproto/reader_test.go.html#7595206">sdata</a></span>&nbsp;<span class="op" id="7595260">+</span>&nbsp;<span class="string" id="7595262">&#34;\r\n\n&#34;</span><span class="op" id="7595270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595273">m</span><span class="op" id="7595274">,</span>&nbsp;<span class="ident" id="7595276">err</span>&nbsp;<span class="op" id="7595280">:=</span>&nbsp;<span class="ident" id="7595283"><a href="/net/textproto/reader_test.go.html#7595229">r</a></span><span class="op" id="7595284">.</span><span class="ident" id="7595285">ReadMIMEHeader</span><span class="op" id="7595299">(</span><span class="op" id="7595300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595303">if</span>&nbsp;<span class="ident" id="7595306"><a href="/net/textproto/reader_test.go.html#7595276">err</a></span>&nbsp;<span class="op" id="7595310">!=</span>&nbsp;<span class="ident" id="7595313">nil</span>&nbsp;<span class="op" id="7595317">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595321"><a href="/net/textproto/reader_test.go.html#7595105">t</a></span><span class="op" id="7595322">.</span><span class="ident" id="7595323">Fatalf</span><span class="op" id="7595329">(</span><span class="string" id="7595330">&#34;ReadMIMEHeader:&nbsp;%v&#34;</span><span class="op" id="7595350">,</span>&nbsp;<span class="ident" id="7595352"><a href="/net/textproto/reader_test.go.html#7595276">err</a></span><span class="op" id="7595355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595361">cookie</span>&nbsp;<span class="op" id="7595368">:=</span>&nbsp;<span class="ident" id="7595371"><a href="/net/textproto/reader_test.go.html#7595273">m</a></span><span class="op" id="7595372">.</span><span class="ident" id="7595373">Get</span><span class="op" id="7595376">(</span><span class="string" id="7595377">&#34;Cookie&#34;</span><span class="op" id="7595385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595388">if</span>&nbsp;<span class="ident" id="7595391"><a href="/net/textproto/reader_test.go.html#7595361">cookie</a></span>&nbsp;<span class="op" id="7595398">!=</span>&nbsp;<span class="ident" id="7595401"><a href="/net/textproto/reader_test.go.html#7595206">sdata</a></span>&nbsp;<span class="op" id="7595407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595411"><a href="/net/textproto/reader_test.go.html#7595105">t</a></span><span class="op" id="7595412">.</span><span class="ident" id="7595413">Fatalf</span><span class="op" id="7595419">(</span><span class="string" id="7595420">&#34;ReadMIMEHeader:&nbsp;%v&nbsp;bytes,&nbsp;want&nbsp;%v&nbsp;bytes&#34;</span><span class="op" id="7595461">,</span>&nbsp;<span class="builtinfunc" id="7595463">len</span><span class="op" id="7595466">(</span><span class="ident" id="7595467"><a href="/net/textproto/reader_test.go.html#7595361">cookie</a></span><span class="op" id="7595473">)</span><span class="op" id="7595474">,</span>&nbsp;<span class="builtinfunc" id="7595476">len</span><span class="op" id="7595479">(</span><span class="ident" id="7595480"><a href="/net/textproto/reader_test.go.html#7595206">sdata</a></span><span class="op" id="7595485">)</span><span class="op" id="7595486">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595489">}</span><br>
<span class="lineno"></span><span class="op" id="7595491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7595494">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;read&nbsp;slightly-bogus&nbsp;MIME&nbsp;headers&nbsp;seen&nbsp;in&nbsp;the&nbsp;wild,</span><br>
<span class="lineno"></span><span class="comment" id="7595561">//&nbsp;with&nbsp;spaces&nbsp;before&nbsp;colons,&nbsp;and&nbsp;spaces&nbsp;in&nbsp;keys.</span><br>
<span class="lineno">175</span><span class="keyword" id="7595611">func</span>&nbsp;<span class="ident" id="7595616">TestReadMIMEHeaderNonCompliant</span><span class="op" id="7595646">(</span><span class="ident" id="7595647">t</span>&nbsp;<span class="op" id="7595649">*</span><span class="ident" id="7595650"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7595657">.</span><span class="ident" id="7595658">T</span><span class="op" id="7595659">)</span>&nbsp;<span class="op" id="7595661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7595664">//&nbsp;Invalid&nbsp;HTTP&nbsp;response&nbsp;header&nbsp;as&nbsp;sent&nbsp;by&nbsp;an&nbsp;Axis&nbsp;security</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7595725">//&nbsp;camera:&nbsp;(this&nbsp;is&nbsp;handled&nbsp;by&nbsp;IE,&nbsp;Firefox,&nbsp;Chrome,&nbsp;curl,&nbsp;etc.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595790">r</span>&nbsp;<span class="op" id="7595792">:=</span>&nbsp;<span class="ident" id="7595795"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7595801">(</span><span class="string" id="7595802">&#34;Foo:&nbsp;bar\r\n&#34;</span>&nbsp;<span class="op" id="7595817">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7595821">&#34;Content-Language:&nbsp;en\r\n&#34;</span>&nbsp;<span class="op" id="7595848">+</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7595852">&#34;SID&nbsp;:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7595866">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7595870">&#34;Audio&nbsp;Mode&nbsp;:&nbsp;None\r\n&#34;</span>&nbsp;<span class="op" id="7595894">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7595898">&#34;Privilege&nbsp;:&nbsp;127\r\n\r\n&#34;</span><span class="op" id="7595923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595926">m</span><span class="op" id="7595927">,</span>&nbsp;<span class="ident" id="7595929">err</span>&nbsp;<span class="op" id="7595933">:=</span>&nbsp;<span class="ident" id="7595936"><a href="/net/textproto/reader_test.go.html#7595790">r</a></span><span class="op" id="7595937">.</span><span class="ident" id="7595938">ReadMIMEHeader</span><span class="op" id="7595952">(</span><span class="op" id="7595953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595956">want</span>&nbsp;<span class="op" id="7595961">:=</span>&nbsp;<span class="ident" id="7595964"><a href="/net/textproto/header.go.html#3984090">MIMEHeader</a></span><span class="op" id="7595974">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7595978">&#34;Foo&#34;</span><span class="op" id="7595983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7595998">{</span><span class="string" id="7595999">&#34;bar&#34;</span><span class="op" id="7596004">}</span><span class="op" id="7596005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596009">&#34;Content-Language&#34;</span><span class="op" id="7596027">:</span>&nbsp;<span class="op" id="7596029">{</span><span class="string" id="7596030">&#34;en&#34;</span><span class="op" id="7596034">}</span><span class="op" id="7596035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596039">&#34;Sid&#34;</span><span class="op" id="7596044">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596059">{</span><span class="string" id="7596060">&#34;0&#34;</span><span class="op" id="7596063">}</span><span class="op" id="7596064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596068">&#34;Audio-Mode&#34;</span><span class="op" id="7596080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596088">{</span><span class="string" id="7596089">&#34;None&#34;</span><span class="op" id="7596095">}</span><span class="op" id="7596096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596100">&#34;Privilege&#34;</span><span class="op" id="7596111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596120">{</span><span class="string" id="7596121">&#34;127&#34;</span><span class="op" id="7596126">}</span><span class="op" id="7596127">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596133">if</span>&nbsp;<span class="op" id="7596136">!</span><span class="ident" id="7596137"><a href="/net/textproto/reader_test.go.html#7591060">reflect</a></span><span class="op" id="7596144">.</span><span class="ident" id="7596145">DeepEqual</span><span class="op" id="7596154">(</span><span class="ident" id="7596155"><a href="/net/textproto/reader_test.go.html#7595926">m</a></span><span class="op" id="7596156">,</span>&nbsp;<span class="ident" id="7596158"><a href="/net/textproto/reader_test.go.html#7595956">want</a></span><span class="op" id="7596162">)</span>&nbsp;<span class="op" id="7596164">||</span>&nbsp;<span class="ident" id="7596167"><a href="/net/textproto/reader_test.go.html#7595929">err</a></span>&nbsp;<span class="op" id="7596171">!=</span>&nbsp;<span class="ident" id="7596174">nil</span>&nbsp;<span class="op" id="7596178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596182"><a href="/net/textproto/reader_test.go.html#7595647">t</a></span><span class="op" id="7596183">.</span><span class="ident" id="7596184">Fatalf</span><span class="op" id="7596190">(</span><span class="string" id="7596191">&#34;ReadMIMEHeader&nbsp;=\n%v,&nbsp;%v;&nbsp;want:\n%v&#34;</span><span class="op" id="7596228">,</span>&nbsp;<span class="ident" id="7596230"><a href="/net/textproto/reader_test.go.html#7595926">m</a></span><span class="op" id="7596231">,</span>&nbsp;<span class="ident" id="7596233"><a href="/net/textproto/reader_test.go.html#7595929">err</a></span><span class="op" id="7596236">,</span>&nbsp;<span class="ident" id="7596238"><a href="/net/textproto/reader_test.go.html#7595956">want</a></span><span class="op" id="7596242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596245">}</span><br>
<span class="lineno"></span><span class="op" id="7596247">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7596250">type</span>&nbsp;<span class="ident" id="7596255">readResponseTest</span>&nbsp;<span class="keyword" id="7596272">struct</span>&nbsp;<span class="op" id="7596279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596282">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7596291">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596299">inCode</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7596308">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596313">wantCode</span>&nbsp;<span class="builtintype" id="7596322">int</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596327">wantMsg</span>&nbsp;&nbsp;<span class="builtintype" id="7596336">string</span><br>
<span class="lineno"></span><span class="op" id="7596343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7596346">var</span>&nbsp;<span class="ident" id="7596350">readResponseTests</span>&nbsp;<span class="op" id="7596368">=</span>&nbsp;<span class="op" id="7596370">[</span><span class="op" id="7596371">]</span><span class="ident" id="7596372"><a href="/net/textproto/reader_test.go.html#7596255">readResponseTest</a></span><span class="op" id="7596388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596391">{</span><span class="string" id="7596392">&#34;230-Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\n&#34;</span>&nbsp;<span class="op" id="7596445">+</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596449">&#34;Read&nbsp;the&nbsp;file&nbsp;README.txt,\n&#34;</span>&nbsp;<span class="op" id="7596479">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596483">&#34;230&nbsp;&nbsp;please&#34;</span><span class="op" id="7596496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7596500">23</span><span class="op" id="7596502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7596506">230</span><span class="op" id="7596509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596513">&#34;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\nRead&nbsp;the&nbsp;file&nbsp;README.txt,\n&nbsp;please&#34;</span><span class="op" id="7596595">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596598">}</span><span class="op" id="7596599">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596603">{</span><span class="string" id="7596604">&#34;230&nbsp;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\n&#34;</span><span class="op" id="7596656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7596660">23</span><span class="op" id="7596662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7596666">230</span><span class="op" id="7596669">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596673">&#34;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply&#34;</span><span class="op" id="7596719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596722">}</span><span class="op" id="7596723">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596727">{</span><span class="string" id="7596728">&#34;400-A\n400-B\n400&nbsp;C&#34;</span><span class="op" id="7596749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7596753">4</span><span class="op" id="7596754">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7596758">400</span><span class="op" id="7596761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596765">&#34;A\nB\nC&#34;</span><span class="op" id="7596774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596777">}</span><span class="op" id="7596778">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596782">{</span><span class="string" id="7596783">&#34;400-A\r\n400-B\r\n400&nbsp;C\r\n&#34;</span><span class="op" id="7596812">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7596816">4</span><span class="op" id="7596817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7596821">400</span><span class="op" id="7596824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596828">&#34;A\nB\nC&#34;</span><span class="op" id="7596837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596840">}</span><span class="op" id="7596841">,</span><br>
<span class="lineno"></span><span class="op" id="7596843">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="7596846">//&nbsp;See&nbsp;http://www.ietf.org/rfc/rfc959.txt&nbsp;page&nbsp;36.</span><br>
<span class="lineno"></span><span class="keyword" id="7596897">func</span>&nbsp;<span class="ident" id="7596902">TestRFC959Lines</span><span class="op" id="7596917">(</span><span class="ident" id="7596918">t</span>&nbsp;<span class="op" id="7596920">*</span><span class="ident" id="7596921"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7596928">.</span><span class="ident" id="7596929">T</span><span class="op" id="7596930">)</span>&nbsp;<span class="op" id="7596932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596935">for</span>&nbsp;<span class="ident" id="7596939">i</span><span class="op" id="7596940">,</span>&nbsp;<span class="ident" id="7596942">tt</span>&nbsp;<span class="op" id="7596945">:=</span>&nbsp;<span class="keyword" id="7596948">range</span>&nbsp;<span class="ident" id="7596954"><a href="/net/textproto/reader_test.go.html#7596350">readResponseTests</a></span>&nbsp;<span class="op" id="7596972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596976">r</span>&nbsp;<span class="op" id="7596978">:=</span>&nbsp;<span class="ident" id="7596981"><a href="/net/textproto/reader_test.go.html#7591814">reader</a></span><span class="op" id="7596987">(</span><span class="ident" id="7596988"><a href="/net/textproto/reader_test.go.html#7596942">tt</a></span><span class="op" id="7596990">.</span><span class="ident" id="7596991">in</span>&nbsp;<span class="op" id="7596994">+</span>&nbsp;<span class="string" id="7596996">&#34;\nFOLLOWING&nbsp;DATA&#34;</span><span class="op" id="7597014">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597018">code</span><span class="op" id="7597022">,</span>&nbsp;<span class="ident" id="7597024">msg</span><span class="op" id="7597027">,</span>&nbsp;<span class="ident" id="7597029">err</span>&nbsp;<span class="op" id="7597033">:=</span>&nbsp;<span class="ident" id="7597036"><a href="/net/textproto/reader_test.go.html#7596976">r</a></span><span class="op" id="7597037">.</span><span class="ident" id="7597038">ReadResponse</span><span class="op" id="7597050">(</span><span class="ident" id="7597051"><a href="/net/textproto/reader_test.go.html#7596942">tt</a></span><span class="op" id="7597053">.</span><span class="ident" id="7597054">inCode</span><span class="op" id="7597060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597064">if</span>&nbsp;<span class="ident" id="7597067"><a href="/net/textproto/reader_test.go.html#7597029">err</a></span>&nbsp;<span class="op" id="7597071">!=</span>&nbsp;<span class="ident" id="7597074">nil</span>&nbsp;<span class="op" id="7597078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597083"><a href="/net/textproto/reader_test.go.html#7596918">t</a></span><span class="op" id="7597084">.</span><span class="ident" id="7597085">Errorf</span><span class="op" id="7597091">(</span><span class="string" id="7597092">&#34;#%d:&nbsp;ReadResponse:&nbsp;%v&#34;</span><span class="op" id="7597115">,</span>&nbsp;<span class="ident" id="7597117"><a href="/net/textproto/reader_test.go.html#7596939">i</a></span><span class="op" id="7597118">,</span>&nbsp;<span class="ident" id="7597120"><a href="/net/textproto/reader_test.go.html#7597029">err</a></span><span class="op" id="7597123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597128">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597139">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597143">if</span>&nbsp;<span class="ident" id="7597146"><a href="/net/textproto/reader_test.go.html#7597018">code</a></span>&nbsp;<span class="op" id="7597151">!=</span>&nbsp;<span class="ident" id="7597154"><a href="/net/textproto/reader_test.go.html#7596942">tt</a></span><span class="op" id="7597156">.</span><span class="ident" id="7597157">wantCode</span>&nbsp;<span class="op" id="7597166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597171"><a href="/net/textproto/reader_test.go.html#7596918">t</a></span><span class="op" id="7597172">.</span><span class="ident" id="7597173">Errorf</span><span class="op" id="7597179">(</span><span class="string" id="7597180">&#34;#%d:&nbsp;code=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7597203">,</span>&nbsp;<span class="ident" id="7597205"><a href="/net/textproto/reader_test.go.html#7596939">i</a></span><span class="op" id="7597206">,</span>&nbsp;<span class="ident" id="7597208"><a href="/net/textproto/reader_test.go.html#7597018">code</a></span><span class="op" id="7597212">,</span>&nbsp;<span class="ident" id="7597214"><a href="/net/textproto/reader_test.go.html#7596942">tt</a></span><span class="op" id="7597216">.</span><span class="ident" id="7597217">wantCode</span><span class="op" id="7597225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597233">if</span>&nbsp;<span class="ident" id="7597236"><a href="/net/textproto/reader_test.go.html#7597024">msg</a></span>&nbsp;<span class="op" id="7597240">!=</span>&nbsp;<span class="ident" id="7597243"><a href="/net/textproto/reader_test.go.html#7596942">tt</a></span><span class="op" id="7597245">.</span><span class="ident" id="7597246">wantMsg</span>&nbsp;<span class="op" id="7597254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597259"><a href="/net/textproto/reader_test.go.html#7596918">t</a></span><span class="op" id="7597260">.</span><span class="ident" id="7597261">Errorf</span><span class="op" id="7597267">(</span><span class="string" id="7597268">&#34;#%d:&nbsp;msg=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7597290">,</span>&nbsp;<span class="ident" id="7597292"><a href="/net/textproto/reader_test.go.html#7596939">i</a></span><span class="op" id="7597293">,</span>&nbsp;<span class="ident" id="7597295"><a href="/net/textproto/reader_test.go.html#7597024">msg</a></span><span class="op" id="7597298">,</span>&nbsp;<span class="ident" id="7597300"><a href="/net/textproto/reader_test.go.html#7596942">tt</a></span><span class="op" id="7597302">.</span><span class="ident" id="7597303">wantMsg</span><span class="op" id="7597310">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597317">}</span><br>
<span class="lineno"></span><span class="op" id="7597319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7597322">func</span>&nbsp;<span class="ident" id="7597327">TestCommonHeaders</span><span class="op" id="7597344">(</span><span class="ident" id="7597345">t</span>&nbsp;<span class="op" id="7597347">*</span><span class="ident" id="7597348"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7597355">.</span><span class="ident" id="7597356">T</span><span class="op" id="7597357">)</span>&nbsp;<span class="op" id="7597359">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597362">for</span>&nbsp;<span class="ident" id="7597366">h</span>&nbsp;<span class="op" id="7597368">:=</span>&nbsp;<span class="keyword" id="7597371">range</span>&nbsp;<span class="ident" id="7597377"><a href="/net/textproto/reader.go.html#4003645">commonHeader</a></span>&nbsp;<span class="op" id="7597390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597394">if</span>&nbsp;<span class="ident" id="7597397"><a href="/net/textproto/reader_test.go.html#7597366">h</a></span>&nbsp;<span class="op" id="7597399">!=</span>&nbsp;<span class="ident" id="7597402"><a href="/net/textproto/reader.go.html#4002381">CanonicalMIMEHeaderKey</a></span><span class="op" id="7597424">(</span><span class="ident" id="7597425"><a href="/net/textproto/reader_test.go.html#7597366">h</a></span><span class="op" id="7597426">)</span>&nbsp;<span class="op" id="7597428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597433"><a href="/net/textproto/reader_test.go.html#7597345">t</a></span><span class="op" id="7597434">.</span><span class="ident" id="7597435">Errorf</span><span class="op" id="7597441">(</span><span class="string" id="7597442">&#34;Non-canonical&nbsp;header&nbsp;%q&nbsp;in&nbsp;commonHeader&#34;</span><span class="op" id="7597483">,</span>&nbsp;<span class="ident" id="7597485"><a href="/net/textproto/reader_test.go.html#7597366">h</a></span><span class="op" id="7597486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597493">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597496">b</span>&nbsp;<span class="op" id="7597498">:=</span>&nbsp;<span class="op" id="7597501">[</span><span class="op" id="7597502">]</span><span class="builtintype" id="7597503">byte</span><span class="op" id="7597507">(</span><span class="string" id="7597508">&#34;content-Length&#34;</span><span class="op" id="7597524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597527">want</span>&nbsp;<span class="op" id="7597532">:=</span>&nbsp;<span class="string" id="7597535">&#34;Content-Length&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597553">n</span>&nbsp;<span class="op" id="7597555">:=</span>&nbsp;<span class="ident" id="7597558"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7597565">.</span><span class="ident" id="7597566">AllocsPerRun</span><span class="op" id="7597578">(</span><span class="num" id="7597579">200</span><span class="op" id="7597582">,</span>&nbsp;<span class="keyword" id="7597584">func</span><span class="op" id="7597588">(</span><span class="op" id="7597589">)</span>&nbsp;<span class="op" id="7597591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597595">if</span>&nbsp;<span class="ident" id="7597598">x</span>&nbsp;<span class="op" id="7597600">:=</span>&nbsp;<span class="ident" id="7597603"><a href="/net/textproto/reader.go.html#4002900">canonicalMIMEHeaderKey</a></span><span class="op" id="7597625">(</span><span class="ident" id="7597626"><a href="/net/textproto/reader_test.go.html#7597496">b</a></span><span class="op" id="7597627">)</span><span class="op" id="7597628">;</span>&nbsp;<span class="ident" id="7597630"><a href="/net/textproto/reader_test.go.html#7597598">x</a></span>&nbsp;<span class="op" id="7597632">!=</span>&nbsp;<span class="ident" id="7597635"><a href="/net/textproto/reader_test.go.html#7597527">want</a></span>&nbsp;<span class="op" id="7597640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597645"><a href="/net/textproto/reader_test.go.html#7597345">t</a></span><span class="op" id="7597646">.</span><span class="ident" id="7597647">Fatalf</span><span class="op" id="7597653">(</span><span class="string" id="7597654">&#34;canonicalMIMEHeaderKey(%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7597696">,</span>&nbsp;<span class="ident" id="7597698"><a href="/net/textproto/reader_test.go.html#7597496">b</a></span><span class="op" id="7597699">,</span>&nbsp;<span class="ident" id="7597701"><a href="/net/textproto/reader_test.go.html#7597598">x</a></span><span class="op" id="7597702">,</span>&nbsp;<span class="ident" id="7597704"><a href="/net/textproto/reader_test.go.html#7597527">want</a></span><span class="op" id="7597708">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597715">}</span><span class="op" id="7597716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597719">if</span>&nbsp;<span class="ident" id="7597722"><a href="/net/textproto/reader_test.go.html#7597553">n</a></span>&nbsp;<span class="op" id="7597724">&gt;</span>&nbsp;<span class="num" id="7597726">0</span>&nbsp;<span class="op" id="7597728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597732"><a href="/net/textproto/reader_test.go.html#7597345">t</a></span><span class="op" id="7597733">.</span><span class="ident" id="7597734">Errorf</span><span class="op" id="7597740">(</span><span class="string" id="7597741">&#34;canonicalMIMEHeaderKey&nbsp;allocs&nbsp;=&nbsp;%v;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7597785">,</span>&nbsp;<span class="ident" id="7597787"><a href="/net/textproto/reader_test.go.html#7597553">n</a></span><span class="op" id="7597788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597791">}</span><br>
<span class="lineno">265</span><span class="op" id="7597793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7597796">var</span>&nbsp;<span class="ident" id="7597800">clientHeaders</span>&nbsp;<span class="op" id="7597814">=</span>&nbsp;<span class="ident" id="7597816"><a href="/net/textproto/reader_test.go.html#7591071">strings</a></span><span class="op" id="7597823">.</span><span class="ident" id="7597824">Replace</span><span class="op" id="7597831">(</span><span class="string" id="7597832">`Host:&nbsp;golang.org<br>
<span class="lineno"></span>Connection:&nbsp;keep-alive<br>
<span class="lineno"></span>Cache-Control:&nbsp;max-age=0<br>
<span class="lineno">270</span>Accept:&nbsp;application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5<br>
<span class="lineno"></span>User-Agent:&nbsp;Mozilla/5.0&nbsp;(X11;&nbsp;U;&nbsp;Linux&nbsp;x86_64;&nbsp;en-US)&nbsp;AppleWebKit/534.3&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/6.0.472.63&nbsp;Safari/534.3<br>
<span class="lineno"></span>Accept-Encoding:&nbsp;gzip,deflate,sdch<br>
<span class="lineno"></span>Accept-Language:&nbsp;en-US,en;q=0.8,fr-CH;q=0.6<br>
<span class="lineno"></span>Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.3<br>
<span class="lineno">275</span>COOKIE:&nbsp;__utma=000000000.0000000000.0000000000.0000000000.0000000000.00;&nbsp;__utmb=000000000.0.00.0000000000;&nbsp;__utmc=000000000;&nbsp;__utmz=000000000.0000000000.00.0.utmcsr=code.google.com|utmccn=(referral)|utmcmd=referral|utmcct=/p/go/issues/detail<br>
<span class="lineno"></span>Non-Interned:&nbsp;test<br>
<span class="lineno"></span><br>
<span class="lineno"></span>`</span><span class="op" id="7598509">,</span>&nbsp;<span class="string" id="7598511">&#34;\n&#34;</span><span class="op" id="7598515">,</span>&nbsp;<span class="string" id="7598517">&#34;\r\n&#34;</span><span class="op" id="7598523">,</span>&nbsp;<span class="op" id="7598525">-</span><span class="num" id="7598526">1</span><span class="op" id="7598527">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="7598530">var</span>&nbsp;<span class="ident" id="7598534">serverHeaders</span>&nbsp;<span class="op" id="7598548">=</span>&nbsp;<span class="ident" id="7598550"><a href="/net/textproto/reader_test.go.html#7591071">strings</a></span><span class="op" id="7598557">.</span><span class="ident" id="7598558">Replace</span><span class="op" id="7598565">(</span><span class="string" id="7598566">`Content-Type:&nbsp;text/html;&nbsp;charset=utf-8<br>
<span class="lineno"></span>Content-Encoding:&nbsp;gzip<br>
<span class="lineno"></span>Date:&nbsp;Thu,&nbsp;27&nbsp;Sep&nbsp;2012&nbsp;09:03:33&nbsp;GMT<br>
<span class="lineno"></span>Server:&nbsp;Google&nbsp;Frontend<br>
<span class="lineno"></span>Cache-Control:&nbsp;private<br>
<span class="lineno">285</span>Content-Length:&nbsp;2298<br>
<span class="lineno"></span>VIA:&nbsp;1.1&nbsp;proxy.example.com:80&nbsp;(XXX/n.n.n-nnn)<br>
<span class="lineno"></span>Connection:&nbsp;Close<br>
<span class="lineno"></span>Non-Interned:&nbsp;test<br>
<span class="lineno"></span><br>
<span class="lineno">290</span>`</span><span class="op" id="7598818">,</span>&nbsp;<span class="string" id="7598820">&#34;\n&#34;</span><span class="op" id="7598824">,</span>&nbsp;<span class="string" id="7598826">&#34;\r\n&#34;</span><span class="op" id="7598832">,</span>&nbsp;<span class="op" id="7598834">-</span><span class="num" id="7598835">1</span><span class="op" id="7598836">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7598839">func</span>&nbsp;<span class="ident" id="7598844">BenchmarkReadMIMEHeader</span><span class="op" id="7598867">(</span><span class="ident" id="7598868">b</span>&nbsp;<span class="op" id="7598870">*</span><span class="ident" id="7598871"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7598878">.</span><span class="ident" id="7598879">B</span><span class="op" id="7598880">)</span>&nbsp;<span class="op" id="7598882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598885"><a href="/net/textproto/reader_test.go.html#7598868">b</a></span><span class="op" id="7598886">.</span><span class="ident" id="7598887">ReportAllocs</span><span class="op" id="7598899">(</span><span class="op" id="7598900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598903">var</span>&nbsp;<span class="ident" id="7598907">buf</span>&nbsp;<span class="ident" id="7598911"><a href="/net/textproto/reader_test.go.html#7591045">bytes</a></span><span class="op" id="7598916">.</span><span class="ident" id="7598917">Buffer</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598925">br</span>&nbsp;<span class="op" id="7598928">:=</span>&nbsp;<span class="ident" id="7598931"><a href="/net/textproto/reader_test.go.html#7591036">bufio</a></span><span class="op" id="7598936">.</span><span class="ident" id="7598937">NewReader</span><span class="op" id="7598946">(</span><span class="op" id="7598947">&amp;</span><span class="ident" id="7598948"><a href="/net/textproto/reader_test.go.html#7598907">buf</a></span><span class="op" id="7598951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598954">r</span>&nbsp;<span class="op" id="7598956">:=</span>&nbsp;<span class="ident" id="7598959"><a href="/net/textproto/reader.go.html#3988813">NewReader</a></span><span class="op" id="7598968">(</span><span class="ident" id="7598969"><a href="/net/textproto/reader_test.go.html#7598925">br</a></span><span class="op" id="7598971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598974">for</span>&nbsp;<span class="ident" id="7598978">i</span>&nbsp;<span class="op" id="7598980">:=</span>&nbsp;<span class="num" id="7598983">0</span><span class="op" id="7598984">;</span>&nbsp;<span class="ident" id="7598986"><a href="/net/textproto/reader_test.go.html#7598978">i</a></span>&nbsp;<span class="op" id="7598988">&lt;</span>&nbsp;<span class="ident" id="7598990"><a href="/net/textproto/reader_test.go.html#7598868">b</a></span><span class="op" id="7598991">.</span><span class="ident" id="7598992">N</span><span class="op" id="7598993">;</span>&nbsp;<span class="ident" id="7598995"><a href="/net/textproto/reader_test.go.html#7598978">i</a></span><span class="op" id="7598996">++</span>&nbsp;<span class="op" id="7598999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599003">var</span>&nbsp;<span class="ident" id="7599007">want</span>&nbsp;<span class="builtintype" id="7599012">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599018">var</span>&nbsp;<span class="ident" id="7599022">find</span>&nbsp;<span class="builtintype" id="7599027">string</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599036">if</span>&nbsp;<span class="op" id="7599039">(</span><span class="ident" id="7599040"><a href="/net/textproto/reader_test.go.html#7598978">i</a></span>&nbsp;<span class="op" id="7599042">&amp;</span>&nbsp;<span class="num" id="7599044">1</span><span class="op" id="7599045">)</span>&nbsp;<span class="op" id="7599047">==</span>&nbsp;<span class="num" id="7599050">1</span>&nbsp;<span class="op" id="7599052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599057"><a href="/net/textproto/reader_test.go.html#7598907">buf</a></span><span class="op" id="7599060">.</span><span class="ident" id="7599061">WriteString</span><span class="op" id="7599072">(</span><span class="ident" id="7599073"><a href="/net/textproto/reader_test.go.html#7597800">clientHeaders</a></span><span class="op" id="7599086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599091"><a href="/net/textproto/reader_test.go.html#7599007">want</a></span>&nbsp;<span class="op" id="7599096">=</span>&nbsp;<span class="num" id="7599098">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599104"><a href="/net/textproto/reader_test.go.html#7599022">find</a></span>&nbsp;<span class="op" id="7599109">=</span>&nbsp;<span class="string" id="7599111">&#34;Cookie&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599122">}</span>&nbsp;<span class="keyword" id="7599124">else</span>&nbsp;<span class="op" id="7599129">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599134"><a href="/net/textproto/reader_test.go.html#7598907">buf</a></span><span class="op" id="7599137">.</span><span class="ident" id="7599138">WriteString</span><span class="op" id="7599149">(</span><span class="ident" id="7599150"><a href="/net/textproto/reader_test.go.html#7598534">serverHeaders</a></span><span class="op" id="7599163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599168"><a href="/net/textproto/reader_test.go.html#7599007">want</a></span>&nbsp;<span class="op" id="7599173">=</span>&nbsp;<span class="num" id="7599175">9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599180"><a href="/net/textproto/reader_test.go.html#7599022">find</a></span>&nbsp;<span class="op" id="7599185">=</span>&nbsp;<span class="string" id="7599187">&#34;Via&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599199">h</span><span class="op" id="7599200">,</span>&nbsp;<span class="ident" id="7599202">err</span>&nbsp;<span class="op" id="7599206">:=</span>&nbsp;<span class="ident" id="7599209"><a href="/net/textproto/reader_test.go.html#7598954">r</a></span><span class="op" id="7599210">.</span><span class="ident" id="7599211">ReadMIMEHeader</span><span class="op" id="7599225">(</span><span class="op" id="7599226">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599230">if</span>&nbsp;<span class="ident" id="7599233"><a href="/net/textproto/reader_test.go.html#7599202">err</a></span>&nbsp;<span class="op" id="7599237">!=</span>&nbsp;<span class="ident" id="7599240">nil</span>&nbsp;<span class="op" id="7599244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599249"><a href="/net/textproto/reader_test.go.html#7598868">b</a></span><span class="op" id="7599250">.</span><span class="ident" id="7599251">Fatal</span><span class="op" id="7599256">(</span><span class="ident" id="7599257"><a href="/net/textproto/reader_test.go.html#7599202">err</a></span><span class="op" id="7599260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599268">if</span>&nbsp;<span class="builtinfunc" id="7599271">len</span><span class="op" id="7599274">(</span><span class="ident" id="7599275"><a href="/net/textproto/reader_test.go.html#7599199">h</a></span><span class="op" id="7599276">)</span>&nbsp;<span class="op" id="7599278">!=</span>&nbsp;<span class="ident" id="7599281"><a href="/net/textproto/reader_test.go.html#7599007">want</a></span>&nbsp;<span class="op" id="7599286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599291"><a href="/net/textproto/reader_test.go.html#7598868">b</a></span><span class="op" id="7599292">.</span><span class="ident" id="7599293">Fatalf</span><span class="op" id="7599299">(</span><span class="string" id="7599300">&#34;wrong&nbsp;number&nbsp;of&nbsp;headers:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7599342">,</span>&nbsp;<span class="builtinfunc" id="7599344">len</span><span class="op" id="7599347">(</span><span class="ident" id="7599348"><a href="/net/textproto/reader_test.go.html#7599199">h</a></span><span class="op" id="7599349">)</span><span class="op" id="7599350">,</span>&nbsp;<span class="ident" id="7599352"><a href="/net/textproto/reader_test.go.html#7599007">want</a></span><span class="op" id="7599356">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599364">if</span>&nbsp;<span class="ident" id="7599367">_</span><span class="op" id="7599368">,</span>&nbsp;<span class="ident" id="7599370">ok</span>&nbsp;<span class="op" id="7599373">:=</span>&nbsp;<span class="ident" id="7599376"><a href="/net/textproto/reader_test.go.html#7599199">h</a></span><span class="op" id="7599377">[</span><span class="ident" id="7599378"><a href="/net/textproto/reader_test.go.html#7599022">find</a></span><span class="op" id="7599382">]</span><span class="op" id="7599383">;</span>&nbsp;<span class="op" id="7599385">!</span><span class="ident" id="7599386"><a href="/net/textproto/reader_test.go.html#7599370">ok</a></span>&nbsp;<span class="op" id="7599389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599394"><a href="/net/textproto/reader_test.go.html#7598868">b</a></span><span class="op" id="7599395">.</span><span class="ident" id="7599396">Fatalf</span><span class="op" id="7599402">(</span><span class="string" id="7599403">&#34;did&nbsp;not&nbsp;find&nbsp;key&nbsp;%s&#34;</span><span class="op" id="7599424">,</span>&nbsp;<span class="ident" id="7599426"><a href="/net/textproto/reader_test.go.html#7599022">find</a></span><span class="op" id="7599430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599437">}</span><br>
<span class="lineno">320</span><span class="op" id="7599439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7599442">func</span>&nbsp;<span class="ident" id="7599447">BenchmarkUncommon</span><span class="op" id="7599464">(</span><span class="ident" id="7599465">b</span>&nbsp;<span class="op" id="7599467">*</span><span class="ident" id="7599468"><a href="/net/textproto/reader_test.go.html#7591082">testing</a></span><span class="op" id="7599475">.</span><span class="ident" id="7599476">B</span><span class="op" id="7599477">)</span>&nbsp;<span class="op" id="7599479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599482"><a href="/net/textproto/reader_test.go.html#7599465">b</a></span><span class="op" id="7599483">.</span><span class="ident" id="7599484">ReportAllocs</span><span class="op" id="7599496">(</span><span class="op" id="7599497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599500">var</span>&nbsp;<span class="ident" id="7599504">buf</span>&nbsp;<span class="ident" id="7599508"><a href="/net/textproto/reader_test.go.html#7591045">bytes</a></span><span class="op" id="7599513">.</span><span class="ident" id="7599514">Buffer</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599522">br</span>&nbsp;<span class="op" id="7599525">:=</span>&nbsp;<span class="ident" id="7599528"><a href="/net/textproto/reader_test.go.html#7591036">bufio</a></span><span class="op" id="7599533">.</span><span class="ident" id="7599534">NewReader</span><span class="op" id="7599543">(</span><span class="op" id="7599544">&amp;</span><span class="ident" id="7599545"><a href="/net/textproto/reader_test.go.html#7599504">buf</a></span><span class="op" id="7599548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599551">r</span>&nbsp;<span class="op" id="7599553">:=</span>&nbsp;<span class="ident" id="7599556"><a href="/net/textproto/reader.go.html#3988813">NewReader</a></span><span class="op" id="7599565">(</span><span class="ident" id="7599566"><a href="/net/textproto/reader_test.go.html#7599522">br</a></span><span class="op" id="7599568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599571">for</span>&nbsp;<span class="ident" id="7599575">i</span>&nbsp;<span class="op" id="7599577">:=</span>&nbsp;<span class="num" id="7599580">0</span><span class="op" id="7599581">;</span>&nbsp;<span class="ident" id="7599583"><a href="/net/textproto/reader_test.go.html#7599575">i</a></span>&nbsp;<span class="op" id="7599585">&lt;</span>&nbsp;<span class="ident" id="7599587"><a href="/net/textproto/reader_test.go.html#7599465">b</a></span><span class="op" id="7599588">.</span><span class="ident" id="7599589">N</span><span class="op" id="7599590">;</span>&nbsp;<span class="ident" id="7599592"><a href="/net/textproto/reader_test.go.html#7599575">i</a></span><span class="op" id="7599593">++</span>&nbsp;<span class="op" id="7599596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599600"><a href="/net/textproto/reader_test.go.html#7599504">buf</a></span><span class="op" id="7599603">.</span><span class="ident" id="7599604">WriteString</span><span class="op" id="7599615">(</span><span class="string" id="7599616">&#34;uncommon-header-for-benchmark:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7599660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599664">h</span><span class="op" id="7599665">,</span>&nbsp;<span class="ident" id="7599667">err</span>&nbsp;<span class="op" id="7599671">:=</span>&nbsp;<span class="ident" id="7599674"><a href="/net/textproto/reader_test.go.html#7599551">r</a></span><span class="op" id="7599675">.</span><span class="ident" id="7599676">ReadMIMEHeader</span><span class="op" id="7599690">(</span><span class="op" id="7599691">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599695">if</span>&nbsp;<span class="ident" id="7599698"><a href="/net/textproto/reader_test.go.html#7599667">err</a></span>&nbsp;<span class="op" id="7599702">!=</span>&nbsp;<span class="ident" id="7599705">nil</span>&nbsp;<span class="op" id="7599709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599714"><a href="/net/textproto/reader_test.go.html#7599465">b</a></span><span class="op" id="7599715">.</span><span class="ident" id="7599716">Fatal</span><span class="op" id="7599721">(</span><span class="ident" id="7599722"><a href="/net/textproto/reader_test.go.html#7599667">err</a></span><span class="op" id="7599725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599733">if</span>&nbsp;<span class="ident" id="7599736">_</span><span class="op" id="7599737">,</span>&nbsp;<span class="ident" id="7599739">ok</span>&nbsp;<span class="op" id="7599742">:=</span>&nbsp;<span class="ident" id="7599745"><a href="/net/textproto/reader_test.go.html#7599664">h</a></span><span class="op" id="7599746">[</span><span class="string" id="7599747">&#34;Uncommon-Header-For-Benchmark&#34;</span><span class="op" id="7599778">]</span><span class="op" id="7599779">;</span>&nbsp;<span class="op" id="7599781">!</span><span class="ident" id="7599782"><a href="/net/textproto/reader_test.go.html#7599739">ok</a></span>&nbsp;<span class="op" id="7599785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599790"><a href="/net/textproto/reader_test.go.html#7599465">b</a></span><span class="op" id="7599791">.</span><span class="ident" id="7599792">Fatal</span><span class="op" id="7599797">(</span><span class="string" id="7599798">&#34;Missing&nbsp;result&nbsp;header.&#34;</span><span class="op" id="7599822">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599829">}</span><br>
<span class="lineno"></span><span class="op" id="7599831">}</span>
</div>
</body>
</html>
