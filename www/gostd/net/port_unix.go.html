<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html" class="current">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3986142">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3986197">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3986251">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3986302">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3986367">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3986416">package</span>&nbsp;<span class="ident" id="3986424">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3986429">import</span>&nbsp;<span class="string" id="3986436">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3986444">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="3986514">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="3986587">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="3986614">var</span>&nbsp;<span class="ident" id="3986618">services</span>&nbsp;<span class="op" id="3986627">=</span>&nbsp;<span class="keyword" id="3986629">map</span><span class="op" id="3986632">[</span><span class="builtintype" id="3986633">string</span><span class="op" id="3986639">]</span><span class="keyword" id="3986640">map</span><span class="op" id="3986643">[</span><span class="builtintype" id="3986644">string</span><span class="op" id="3986650">]</span><span class="builtintype" id="3986651">int</span><span class="op" id="3986654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3986657">&#34;tcp&#34;</span><span class="op" id="3986662">:</span>&nbsp;<span class="op" id="3986664">{</span><span class="string" id="3986665">&#34;http&#34;</span><span class="op" id="3986671">:</span>&nbsp;<span class="num" id="3986673">80</span><span class="op" id="3986675">}</span><span class="op" id="3986676">,</span><br>
<span class="lineno"></span><span class="op" id="3986678">}</span><br>
<span class="lineno"></span><span class="keyword" id="3986680">var</span>&nbsp;<span class="ident" id="3986684">servicesError</span>&nbsp;<span class="builtintype" id="3986698">error</span><br>
<span class="lineno">20</span><span class="keyword" id="3986704">var</span>&nbsp;<span class="ident" id="3986708">onceReadServices</span>&nbsp;<span class="ident" id="3986725">sync</span><span class="op" id="3986729">.</span><span class="ident" id="3986730">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3986736">func</span>&nbsp;<span class="ident" id="3986741">readServices</span><span class="op" id="3986753">(</span><span class="op" id="3986754">)</span>&nbsp;<span class="op" id="3986756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3986759">var</span>&nbsp;<span class="ident" id="3986763">file</span>&nbsp;<span class="op" id="3986768">*</span><span class="ident" id="3986769">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3986775">if</span>&nbsp;<span class="ident" id="3986778">file</span><span class="op" id="3986782">,</span>&nbsp;<span class="ident" id="3986784">servicesError</span>&nbsp;<span class="op" id="3986798">=</span>&nbsp;<span class="ident" id="3986800">open</span><span class="op" id="3986804">(</span><span class="string" id="3986805">&#34;/etc/services&#34;</span><span class="op" id="3986820">)</span><span class="op" id="3986821">;</span>&nbsp;<span class="ident" id="3986823">servicesError</span>&nbsp;<span class="op" id="3986837">!=</span>&nbsp;<span class="builtintype" id="3986840">nil</span>&nbsp;<span class="op" id="3986844">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3986848">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3986856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3986859">for</span>&nbsp;<span class="ident" id="3986863">line</span><span class="op" id="3986867">,</span>&nbsp;<span class="ident" id="3986869">ok</span>&nbsp;<span class="op" id="3986872">:=</span>&nbsp;<span class="ident" id="3986875">file</span><span class="op" id="3986879">.</span><span class="ident" id="3986880">readLine</span><span class="op" id="3986888">(</span><span class="op" id="3986889">)</span><span class="op" id="3986890">;</span>&nbsp;<span class="ident" id="3986892">ok</span><span class="op" id="3986894">;</span>&nbsp;<span class="ident" id="3986896">line</span><span class="op" id="3986900">,</span>&nbsp;<span class="ident" id="3986902">ok</span>&nbsp;<span class="op" id="3986905">=</span>&nbsp;<span class="ident" id="3986907">file</span><span class="op" id="3986911">.</span><span class="ident" id="3986912">readLine</span><span class="op" id="3986920">(</span><span class="op" id="3986921">)</span>&nbsp;<span class="op" id="3986923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3986927">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3986981">if</span>&nbsp;<span class="ident" id="3986984">i</span>&nbsp;<span class="op" id="3986986">:=</span>&nbsp;<span class="ident" id="3986989">byteIndex</span><span class="op" id="3986998">(</span><span class="ident" id="3986999">line</span><span class="op" id="3987003">,</span>&nbsp;<span class="string" id="3987005">&#39;#&#39;</span><span class="op" id="3987008">)</span><span class="op" id="3987009">;</span>&nbsp;<span class="ident" id="3987011">i</span>&nbsp;<span class="op" id="3987013">&gt;=</span>&nbsp;<span class="num" id="3987016">0</span>&nbsp;<span class="op" id="3987018">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987023">line</span>&nbsp;<span class="op" id="3987028">=</span>&nbsp;<span class="ident" id="3987030">line</span><span class="op" id="3987034">[</span><span class="num" id="3987035">0</span><span class="op" id="3987036">:</span><span class="ident" id="3987037">i</span><span class="op" id="3987038">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987046">f</span>&nbsp;<span class="op" id="3987048">:=</span>&nbsp;<span class="ident" id="3987051">getFields</span><span class="op" id="3987060">(</span><span class="ident" id="3987061">line</span><span class="op" id="3987065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987069">if</span>&nbsp;<span class="builtinfunc" id="3987072">len</span><span class="op" id="3987075">(</span><span class="ident" id="3987076">f</span><span class="op" id="3987077">)</span>&nbsp;<span class="op" id="3987079">&lt;</span>&nbsp;<span class="num" id="3987081">2</span>&nbsp;<span class="op" id="3987083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987088">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987103">portnet</span>&nbsp;<span class="op" id="3987111">:=</span>&nbsp;<span class="ident" id="3987114">f</span><span class="op" id="3987115">[</span><span class="num" id="3987116">1</span><span class="op" id="3987117">]</span>&nbsp;<span class="comment" id="3987119">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987133">port</span><span class="op" id="3987137">,</span>&nbsp;<span class="ident" id="3987139">j</span><span class="op" id="3987140">,</span>&nbsp;<span class="ident" id="3987142">ok</span>&nbsp;<span class="op" id="3987145">:=</span>&nbsp;<span class="ident" id="3987148">dtoi</span><span class="op" id="3987152">(</span><span class="ident" id="3987153">portnet</span><span class="op" id="3987160">,</span>&nbsp;<span class="num" id="3987162">0</span><span class="op" id="3987163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987167">if</span>&nbsp;<span class="op" id="3987170">!</span><span class="ident" id="3987171">ok</span>&nbsp;<span class="op" id="3987174">||</span>&nbsp;<span class="ident" id="3987177">port</span>&nbsp;<span class="op" id="3987182">&lt;=</span>&nbsp;<span class="num" id="3987185">0</span>&nbsp;<span class="op" id="3987187">||</span>&nbsp;<span class="ident" id="3987190">j</span>&nbsp;<span class="op" id="3987192">&gt;=</span>&nbsp;<span class="builtinfunc" id="3987195">len</span><span class="op" id="3987198">(</span><span class="ident" id="3987199">portnet</span><span class="op" id="3987206">)</span>&nbsp;<span class="op" id="3987208">||</span>&nbsp;<span class="ident" id="3987211">portnet</span><span class="op" id="3987218">[</span><span class="ident" id="3987219">j</span><span class="op" id="3987220">]</span>&nbsp;<span class="op" id="3987222">!=</span>&nbsp;<span class="string" id="3987225">&#39;/&#39;</span>&nbsp;<span class="op" id="3987229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987234">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987249">netw</span>&nbsp;<span class="op" id="3987254">:=</span>&nbsp;<span class="ident" id="3987257">portnet</span><span class="op" id="3987264">[</span><span class="ident" id="3987265">j</span><span class="op" id="3987266">+</span><span class="num" id="3987267">1</span><span class="op" id="3987268">:</span><span class="op" id="3987269">]</span>&nbsp;<span class="comment" id="3987271">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987282">m</span><span class="op" id="3987283">,</span>&nbsp;<span class="ident" id="3987285">ok1</span>&nbsp;<span class="op" id="3987289">:=</span>&nbsp;<span class="ident" id="3987292">services</span><span class="op" id="3987300">[</span><span class="ident" id="3987301">netw</span><span class="op" id="3987305">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987309">if</span>&nbsp;<span class="op" id="3987312">!</span><span class="ident" id="3987313">ok1</span>&nbsp;<span class="op" id="3987317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987322">m</span>&nbsp;<span class="op" id="3987324">=</span>&nbsp;<span class="builtinfunc" id="3987326">make</span><span class="op" id="3987330">(</span><span class="keyword" id="3987331">map</span><span class="op" id="3987334">[</span><span class="builtintype" id="3987335">string</span><span class="op" id="3987341">]</span><span class="builtintype" id="3987342">int</span><span class="op" id="3987345">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987350">services</span><span class="op" id="3987358">[</span><span class="ident" id="3987359">netw</span><span class="op" id="3987363">]</span>&nbsp;<span class="op" id="3987365">=</span>&nbsp;<span class="ident" id="3987367">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987375">for</span>&nbsp;<span class="ident" id="3987379">i</span>&nbsp;<span class="op" id="3987381">:=</span>&nbsp;<span class="num" id="3987384">0</span><span class="op" id="3987385">;</span>&nbsp;<span class="ident" id="3987387">i</span>&nbsp;<span class="op" id="3987389">&lt;</span>&nbsp;<span class="builtinfunc" id="3987391">len</span><span class="op" id="3987394">(</span><span class="ident" id="3987395">f</span><span class="op" id="3987396">)</span><span class="op" id="3987397">;</span>&nbsp;<span class="ident" id="3987399">i</span><span class="op" id="3987400">++</span>&nbsp;<span class="op" id="3987403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987408">if</span>&nbsp;<span class="ident" id="3987411">i</span>&nbsp;<span class="op" id="3987413">!=</span>&nbsp;<span class="num" id="3987416">1</span>&nbsp;<span class="op" id="3987418">{</span>&nbsp;<span class="comment" id="3987420">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987445">m</span><span class="op" id="3987446">[</span><span class="ident" id="3987447">f</span><span class="op" id="3987448">[</span><span class="ident" id="3987449">i</span><span class="op" id="3987450">]</span><span class="op" id="3987451">]</span>&nbsp;<span class="op" id="3987453">=</span>&nbsp;<span class="ident" id="3987455">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987473">file</span><span class="op" id="3987477">.</span><span class="builtinfunc" id="3987478">close</span><span class="op" id="3987483">(</span><span class="op" id="3987484">)</span><br>
<span class="lineno"></span><span class="op" id="3987486">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3987489">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="3987552">func</span>&nbsp;<span class="ident" id="3987557">goLookupPort</span><span class="op" id="3987569">(</span><span class="ident" id="3987570">network</span><span class="op" id="3987577">,</span>&nbsp;<span class="ident" id="3987579">service</span>&nbsp;<span class="builtintype" id="3987587">string</span><span class="op" id="3987593">)</span>&nbsp;<span class="op" id="3987595">(</span><span class="ident" id="3987596">port</span>&nbsp;<span class="builtintype" id="3987601">int</span><span class="op" id="3987604">,</span>&nbsp;<span class="ident" id="3987606">err</span>&nbsp;<span class="builtintype" id="3987610">error</span><span class="op" id="3987615">)</span>&nbsp;<span class="op" id="3987617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987620">onceReadServices</span><span class="op" id="3987636">.</span><span class="ident" id="3987637">Do</span><span class="op" id="3987639">(</span><span class="ident" id="3987640">readServices</span><span class="op" id="3987652">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987656">switch</span>&nbsp;<span class="ident" id="3987663">network</span>&nbsp;<span class="op" id="3987671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987674">case</span>&nbsp;<span class="string" id="3987679">&#34;tcp4&#34;</span><span class="op" id="3987685">,</span>&nbsp;<span class="string" id="3987687">&#34;tcp6&#34;</span><span class="op" id="3987693">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987697">network</span>&nbsp;<span class="op" id="3987705">=</span>&nbsp;<span class="string" id="3987707">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987714">case</span>&nbsp;<span class="string" id="3987719">&#34;udp4&#34;</span><span class="op" id="3987725">,</span>&nbsp;<span class="string" id="3987727">&#34;udp6&#34;</span><span class="op" id="3987733">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3987737">network</span>&nbsp;<span class="op" id="3987745">=</span>&nbsp;<span class="string" id="3987747">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987758">if</span>&nbsp;<span class="ident" id="3987761">m</span><span class="op" id="3987762">,</span>&nbsp;<span class="ident" id="3987764">ok</span>&nbsp;<span class="op" id="3987767">:=</span>&nbsp;<span class="ident" id="3987770">services</span><span class="op" id="3987778">[</span><span class="ident" id="3987779">network</span><span class="op" id="3987786">]</span><span class="op" id="3987787">;</span>&nbsp;<span class="ident" id="3987789">ok</span>&nbsp;<span class="op" id="3987792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987796">if</span>&nbsp;<span class="ident" id="3987799">port</span><span class="op" id="3987803">,</span>&nbsp;<span class="ident" id="3987805">ok</span>&nbsp;<span class="op" id="3987808">=</span>&nbsp;<span class="ident" id="3987810">m</span><span class="op" id="3987811">[</span><span class="ident" id="3987812">service</span><span class="op" id="3987819">]</span><span class="op" id="3987820">;</span>&nbsp;<span class="ident" id="3987822">ok</span>&nbsp;<span class="op" id="3987825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987830">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3987842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3987845">return</span>&nbsp;<span class="num" id="3987852">0</span><span class="op" id="3987853">,</span>&nbsp;<span class="op" id="3987855">&amp;</span><span class="ident" id="3987856">AddrError</span><span class="op" id="3987865">{</span><span class="string" id="3987866">&#34;unknown&nbsp;port&#34;</span><span class="op" id="3987880">,</span>&nbsp;<span class="ident" id="3987882">network</span>&nbsp;<span class="op" id="3987890">+</span>&nbsp;<span class="string" id="3987892">&#34;/&#34;</span>&nbsp;<span class="op" id="3987896">+</span>&nbsp;<span class="ident" id="3987898">service</span><span class="op" id="3987905">}</span><br>
<span class="lineno"></span><span class="op" id="3987907">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
